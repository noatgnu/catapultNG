import{d as de}from"./chunk-6GGWJWPR.js";import{k as ie,m as ne}from"./chunk-EQB5EGJF.js";import{c as U,e as W,f as $,i as H,j as J,k as K,l as Q,m as X,n as Y,o as Z,p as ee,r as te}from"./chunk-URRA4EOY.js";import{a as ce}from"./chunk-7ITMQ6SW.js";import{$a as A,Aa as w,Da as C,Ea as d,Ia as B,L as le,O as pe,Oa as r,Pa as u,Q as D,Qa as z,Sa as V,Ta as q,Ua as M,W as v,Wa as k,X as S,ab as L,ca as G,da as o,ea as _,i as se,la as g,na as c,qa as f,rb as O,sa as j,ta as y,ua as b,ub as oe,va as e,vb as me,wa as i,xa as h}from"./chunk-VG74EQIO.js";var re=(()=>{let s=class s{constructor(l){this.http=l,this.baseURL=ce.baseURL,this.refreshReportSubject=new se}getProteinGroupReport(l,p=10,m=0,x="intensity",ae="desc",I,P,E=[],F,T,R,N){let a=new oe;return console.log(l),l&&l!==""&&(a=a.append("search",l)),a=a.append("limit",p),a=a.append("offset",m),ae==="desc"?a=a.append("ordering",`-${x}`):a=a.append("ordering",x),I&&(a=a.append("min_intensity",I)),P&&(a=a.append("max_intensity",P)),E.length>0&&(a=a.append("analysis",E.join(","))),F&&(a=a.append("min_precursor",F)),T&&(a=a.append("max_precursor",T)),R&&(a=a.append("min_protein",R)),N&&(a=a.append("max_protein",N)),this.http.get(`${this.baseURL}/api/proteingroup/`,{params:a})}getPrecursorReport(l,p=10,m=0,x="intensity",ae="desc",I,P,E=[],F,T,R,N){let a=new oe;return l&&l!==""&&(a=a.append("search",l)),a=a.append("limit",p),a=a.append("offset",m),ae==="desc"?a=a.append("ordering",`-${x}`):a=a.append("ordering",x),I&&(a=a.append("min_intensity",I)),P&&(a=a.append("max_intensity",P)),E.length>0&&(a=a.append("analysis",E.join(","))),F&&(a=a.append("min_precursor",F)),T&&(a=a.append("max_precursor",T)),R&&(a=a.append("min_protein",R)),N&&(a=a.append("max_protein",N)),this.http.get(`${this.baseURL}/api/precursor/`,{params:a})}};s.\u0275fac=function(p){return new(p||s)(pe(me))},s.\u0275prov=le({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();var xe=(n,s)=>s.id;function _e(n,s){if(n&1&&(e(0,"option",6),r(1),i()),n&2){let t=s.$implicit;c("value",t.value),o(),u(t.label)}}function ge(n,s){if(n&1&&(e(0,"b"),r(1,"Min Protein Identified:"),i(),r(2),h(3,"br")),n&2){let t=d(2);o(2),z(" ",t.extraParameterService.proteinIdentified.min," ")}}function ve(n,s){if(n&1&&(e(0,"b"),r(1,"Max Protein Identified:"),i(),r(2),h(3,"br")),n&2){let t=d(2);o(2),z(" ",t.extraParameterService.proteinIdentified.max," ")}}function Se(n,s){if(n&1&&(e(0,"b"),r(1,"Min Precursor Identified:"),i(),r(2),h(3,"br")),n&2){let t=d(2);o(2),z(" ",t.extraParameterService.precursorIdentified.min," ")}}function ye(n,s){if(n&1&&(e(0,"b"),r(1,"Max Precursor Identified:"),i(),r(2),h(3,"br")),n&2){let t=d(2);o(2),z(" ",t.extraParameterService.precursorIdentified.max," ")}}function be(n,s){if(n&1&&(e(0,"div",18)(1,"b"),r(2,"Additional filter:"),i(),e(3,"p"),g(4,ge,4,1)(5,ve,4,1)(6,Se,4,1)(7,ye,4,1),i()()),n&2){let t=d();o(4),f(t.extraParameterService.proteinIdentified.min?4:-1),o(),f(t.extraParameterService.proteinIdentified.max?5:-1),o(),f(t.extraParameterService.precursorIdentified.min?6:-1),o(),f(t.extraParameterService.precursorIdentified.max?7:-1)}}function Ce(n,s){if(n&1&&(e(0,"tr")(1,"td")(2,"span",23),r(3),i()(),e(4,"td")(5,"span",23),r(6),i()(),e(7,"td")(8,"span",23),r(9),i()(),e(10,"td"),r(11),A(12,"number"),i(),e(13,"td")(14,"a",24)(15,"span",23),r(16),i()()(),e(17,"td")(18,"span",23),r(19),i()()()),n&2){let t=s.$implicit;o(2),c("ngbTooltip",t.precursor_id),o(),u(t.precursor_id),o(2),c("ngbTooltip",t.protein_group),o(),u(t.protein_group),o(2),c("ngbTooltip",t.gene_names),o(),u(t.gene_names),o(2),u(L(12,13,t.intensity,".0-4")),o(3),B("href","/#/analysis/manage/",t.analysis.id,"",G),o(),c("ngbTooltip",t.analysis.analysis_path),o(),u(t.analysis.analysis_path),o(2),c("ngbTooltip",t.file.file_path),o(),u(t.file.file_path)}}function Ie(n,s){if(n&1){let t=w();e(0,"table",20)(1,"thead")(2,"tr")(3,"th",21),r(4," Precursor "),i(),e(5,"th",21),r(6," Protein Group "),i(),e(7,"th",21),r(8," Gene Names "),i(),e(9,"th",21),r(10," Intensity "),i(),e(11,"th",21),r(12," Analysis "),i(),e(13,"th",21),r(14," File "),i()()(),e(15,"tbody"),y(16,Ce,20,16,"tr",null,xe),i()(),e(18,"ngb-pagination",22),M("pageChange",function(p){v(t);let m=d(2);return q(m.page,p)||(m.page=p),S(p)}),C("pageChange",function(){v(t);let p=d(2);return S(p.handlePageChange())}),i()}if(n&2){let t=d(2);o(16),b(t.query.results),o(2),c("collectionSize",t.query.count)("pageSize",t.pageSize)("rotate",!0)("boundaryLinks",!0)("maxSize",5),V("page",t.page)}}function Pe(n,s){n&1&&(e(0,"div",19),r(1," No protein groups found. "),i())}function Ee(n,s){if(n&1&&g(0,Ie,19,6)(1,Pe,2,0,"div",19),n&2){let t=d();f(t.query.count>0?0:1)}}var Ae=(()=>{let s=class s{set analysisIds(l){this.searchForm.controls.analysisIds.setValue(l)}constructor(l,p,m){this.dataReportService=l,this.fb=p,this.extraParameterService=m,this.page=1,this.pageSize=15,this.query=void 0,this.searchTerm=void 0,this.searchForm=this.fb.group({searchTerm:[""],sortBy:["intensity"],sortDirection:["desc"],minIntensity:[null],maxIntensity:[null],analysisIds:[this.analysisIds]}),this.sortOptions=[{value:"intensity",label:"Intensity"},{value:"precursor_id",label:"Precursor"},{value:"gene_names",label:"Gene Names"},{value:"protein_group",label:"Protein Group"}],this.dataReportService.refreshReportSubject.subscribe(()=>{this.refresh()})}ngOnInit(){this.refresh()}search(){this.dataReportService.getPrecursorReport(this.searchForm.value.searchTerm,this.pageSize,0,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max).subscribe(l=>{this.query=l})}handlePageChange(){let l=(this.page-1)*this.pageSize;console.log(l),console.log(this.page),this.dataReportService.getPrecursorReport(this.searchForm.value.searchTerm,this.pageSize,l,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max).subscribe(p=>{this.query=p})}refresh(){this.dataReportService.getPrecursorReport(null,this.pageSize,0,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max).subscribe(l=>{this.query=l})}};s.\u0275fac=function(p){return new(p||s)(_(re),_(ee),_(de))},s.\u0275cmp=D({type:s,selectors:[["app-precursor-report"]],inputs:{pageSize:"pageSize",analysisIds:"analysisIds"},standalone:!0,features:[k],decls:34,vars:3,consts:[[1,"p-5"],[1,"d-flex","flex-row","gap-2",3,"ngSubmit","formGroup"],[1,"form-floating"],["type","search","id","searchTerm","formControlName","searchTerm",1,"input-journal","form-control"],["for","searchTerm"],["id","sortBy","formControlName","sortBy",1,"input-journal","form-select"],[3,"value"],["for","sortBy"],["id","sortDirection","formControlName","sortDirection",1,"input-journal","form-select",2,"width","200px"],["value","desc"],["value","asc"],["for","sortDirection"],["type","number","id","minIntensity","formControlName","minIntensity",1,"input-journal","form-control"],["for","minIntensity"],["type","number","id","maxIntensity","formControlName","maxIntensity",1,"input-journal","form-control"],["for","maxIntensity"],["type","submit",1,"btn"],[1,"bi","bi-search"],[1,"small"],["role","alert",1,"alert","alert-info","mt-2"],[1,"table","table-journal","mt-2"],["scope","col"],[3,"pageChange","collectionSize","pageSize","rotate","boundaryLinks","maxSize","page"],[3,"ngbTooltip"],["target","_blank",3,"href"]],template:function(p,m){p&1&&(e(0,"div",0)(1,"h5"),r(2,"Precursor Report Search"),i(),e(3,"form",1),C("ngSubmit",function(){return m.search()}),e(4,"div",2),h(5,"input",3),e(6,"label",4),r(7,"Search"),i()(),e(8,"div",2)(9,"select",5),y(10,_e,2,2,"option",6,j),i(),e(12,"label",7),r(13,"Sort By"),i()(),e(14,"div",2)(15,"select",8)(16,"option",9),r(17,"Desc"),i(),e(18,"option",10),r(19,"Asc"),i()(),e(20,"label",11),r(21,"Sort Direction"),i()(),e(22,"div",2),h(23,"input",12),e(24,"label",13),r(25,"Min Intensity"),i()(),e(26,"div",2),h(27,"input",14),e(28,"label",15),r(29,"Max Intensity"),i()(),e(30,"button",16),h(31,"span",17),i()(),g(32,be,8,4,"div",18)(33,Ee,2,1),i()),p&2&&(o(3),c("formGroup",m.searchForm),o(7),b(m.sortOptions),o(22),f(m.extraParameterService.proteinIdentified.min||m.extraParameterService.proteinIdentified.max||m.extraParameterService.precursorIdentified.max||m.extraParameterService.precursorIdentified.min?32:-1),o(),f(m.query?33:-1))},dependencies:[O,ie,te,H,Y,Z,U,J,X,W,$,K,Q,ne]});let n=s;return n})();var Fe=(n,s)=>s.id;function Te(n,s){if(n&1&&(e(0,"option",6),r(1),i()),n&2){let t=s.$implicit;c("value",t.value),o(),u(t.label)}}function Re(n,s){if(n&1&&(e(0,"tr")(1,"td")(2,"span",22),r(3),i()(),e(4,"td")(5,"span",22),r(6),i()(),e(7,"td"),r(8),A(9,"number"),i(),e(10,"td")(11,"a",23)(12,"span",22),r(13),i()()(),e(14,"td")(15,"span",22),r(16),i()()()),n&2){let t=s.$implicit;o(2),c("ngbTooltip",t.protein_group),o(),u(t.protein_group),o(2),c("ngbTooltip",t.gene_names),o(),u(t.gene_names),o(2),u(L(9,11,t.intensity,".0-4")),o(3),B("href","/#/analysis/manage/",t.analysis.id,"",G),o(),c("ngbTooltip",t.analysis.analysis_path),o(),u(t.analysis.analysis_path),o(2),c("ngbTooltip",t.file.file_path),o(),u(t.file.file_path)}}function Ne(n,s){if(n&1){let t=w();e(0,"table",19)(1,"thead")(2,"tr")(3,"th",20),r(4," Protein Group "),i(),e(5,"th",20),r(6," Gene Names "),i(),e(7,"th",20),r(8," Intensity "),i(),e(9,"th",20),r(10," Analysis "),i(),e(11,"th",20),r(12," File "),i()()(),e(13,"tbody"),y(14,Re,17,14,"tr",null,Fe),i()(),e(16,"ngb-pagination",21),M("pageChange",function(p){v(t);let m=d(2);return q(m.page,p)||(m.page=p),S(p)}),C("pageChange",function(){v(t);let p=d(2);return S(p.handlePageChange())}),i()}if(n&2){let t=d(2);o(14),b(t.query.results),o(2),c("collectionSize",t.query.count)("pageSize",t.pageSize)("rotate",!0)("boundaryLinks",!0)("maxSize",5),V("page",t.page)}}function ze(n,s){n&1&&(e(0,"div",18),r(1," No protein groups found. "),i())}function De(n,s){if(n&1&&g(0,Ne,17,6)(1,ze,2,0,"div",18),n&2){let t=d();f(t.query.count>0?0:1)}}var $e=(()=>{let s=class s{constructor(l,p){this.dataReportService=l,this.fb=p,this.page=1,this.pageSize=15,this.analysisIds=[],this.query=void 0,this.searchTerm=void 0,this.searchForm=this.fb.group({searchTerm:[""],sortBy:["intensity"],sortDirection:["desc"],minIntensity:[null],maxIntensity:[null],analysisIds:[this.analysisIds]}),this.sortOptions=[{value:"intensity",label:"Intensity"},{value:"gene_names",label:"Gene Names"},{value:"protein_group",label:"Protein Group"}],this.refresh(),this.dataReportService.refreshReportSubject.subscribe(()=>{this.refresh()})}search(){this.dataReportService.getProteinGroupReport(this.searchForm.value.searchTerm,this.pageSize,0,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds).subscribe(l=>{this.query=l})}handlePageChange(){let l=(this.page-1)*this.pageSize;console.log(l),console.log(this.page),this.dataReportService.getProteinGroupReport(this.searchForm.value.searchTerm,this.pageSize,l,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds).subscribe(p=>{this.query=p})}refresh(){this.dataReportService.getProteinGroupReport(null,this.pageSize,0,this.searchForm.value.sortBy,this.searchForm.value.sortDirection,this.searchForm.value.minIntensity,this.searchForm.value.maxIntensity,this.searchForm.value.analysisIds).subscribe(l=>{this.query=l})}};s.\u0275fac=function(p){return new(p||s)(_(re),_(ee))},s.\u0275cmp=D({type:s,selectors:[["app-protein-group-report"]],inputs:{pageSize:"pageSize",analysisIds:"analysisIds"},standalone:!0,features:[k],decls:33,vars:2,consts:[[1,"p-5"],[1,"d-flex","flex-row","gap-2",3,"ngSubmit","formGroup"],[1,"form-floating"],["type","search","id","searchTerm","formControlName","searchTerm",1,"input-journal","form-control"],["for","searchTerm"],["id","sortBy","formControlName","sortBy",1,"input-journal","form-select"],[3,"value"],["for","sortBy"],["id","sortDirection","formControlName","sortDirection",1,"input-journal","form-select",2,"width","200px"],["value","desc"],["value","asc"],["for","sortDirection"],["type","number","id","minIntensity","formControlName","minIntensity",1,"input-journal","form-control"],["for","minIntensity"],["type","number","id","maxIntensity","formControlName","maxIntensity",1,"input-journal","form-control"],["for","maxIntensity"],["type","submit",1,"btn"],[1,"bi","bi-search"],["role","alert",1,"alert","alert-info","mt-2"],[1,"table","table-journal","mt-2"],["scope","col"],[3,"pageChange","collectionSize","pageSize","rotate","boundaryLinks","maxSize","page"],[3,"ngbTooltip"],["target","_blank",3,"href"]],template:function(p,m){p&1&&(e(0,"div",0)(1,"h5"),r(2,"Protein Group Report Search"),i(),e(3,"form",1),C("ngSubmit",function(){return m.search()}),e(4,"div",2),h(5,"input",3),e(6,"label",4),r(7,"Search"),i()(),e(8,"div",2)(9,"select",5),y(10,Te,2,2,"option",6,j),i(),e(12,"label",7),r(13,"Sort By"),i()(),e(14,"div",2)(15,"select",8)(16,"option",9),r(17,"Desc"),i(),e(18,"option",10),r(19,"Asc"),i()(),e(20,"label",11),r(21,"Sort Direction"),i()(),e(22,"div",2),h(23,"input",12),e(24,"label",13),r(25,"Min Intensity"),i()(),e(26,"div",2),h(27,"input",14),e(28,"label",15),r(29,"Max Intensity"),i()(),e(30,"button",16),h(31,"span",17),i()(),g(32,De,2,1),i()),p&2&&(o(3),c("formGroup",m.searchForm),o(7),b(m.sortOptions),o(22),f(m.query?32:-1))},dependencies:[O,te,H,Y,Z,U,J,X,W,$,K,Q,ie,ne]});let n=s;return n})();export{re as a,Ae as b,$e as c};
