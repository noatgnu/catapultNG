import{a as W,b as q,d as z}from"./chunk-6GGWJWPR.js";import{b as k,c as L,e as B,f as A,g as h,i as G,j as P,k as M,l as j,p as O,r as R}from"./chunk-URRA4EOY.js";import{Aa as g,Da as y,Ea as e,Ha as s,Ia as _,Oa as C,Pa as x,Q as w,Qa as $,W as v,Wa as N,X as I,ba as V,da as i,ea as D,la as f,na as E,qa as u,sa as b,ta as S,ua as T,va as a,wa as r,xa as d}from"./chunk-VG74EQIO.js";function H(n,o){if(n&1){let t=g();a(0,"li"),C(1),a(2,"span",12),y("click",function(){let p=v(t).$index,m=e(6).$implicit,c=e(2);return I(c.removeFromList(p,m.name))}),r()()}if(n&2){let t=o.$implicit;i(),$("",t," ")}}function J(n,o){if(n&1&&(a(0,"ul"),S(1,H,3,1,"li",null,b),r()),n&2){let t=e(5).$implicit,l=e(2);i(),T(l.form.value[t.name])}}function K(n,o){if(n&1&&f(0,J,3,0,"ul"),n&2){let t=e(4).$implicit,l=e(2);u(l.form.value[t.name].length>0?0:-1)}}function Q(n,o){if(n&1){let t=g();a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r(),a(4,"div",10)(5,"button",11),y("click",function(){v(t);let p=e(3).$implicit,m=e(2);return I(m.addSearchList(p.name+"_input",p.name))}),C(6,"+"),r()(),f(7,K,1,1)}if(n&2){let t=e(3).$implicit,l=e(2);i(),_("for","cat-",t.name,"_input"),i(),x(t.name),i(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),i(4),u(l.form.value[t.name]?7:-1)}}function U(n,o){if(n&1&&(a(0,"div",6),d(1,"input",13),a(2,"label",14),C(3),r()()),n&2){let t=e(3).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name),i(),_("for","cat-",t.name,""),i(),x(t.name)}}function X(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",15),r()),n&2){let t=e(3).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Y(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r()),n&2){let t=e(3).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Z(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r()),n&2){let t=e(3).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function tt(n,o){if(n&1&&f(0,Q,8,8)(1,U,4,6,"div",6)(2,X,4,6,"div",7)(3,Y,4,6,"div",7)(4,Z,4,6,"div",7),n&2){let t=e(2).$implicit;u(t.type==="array"?0:t.type==="boolean"?1:t.type==="number"?2:t.type==="string"?3:4)}}function nt(n,o){if(n&1&&f(0,tt,5,1),n&2){let t=e().$implicit,l=e(2);u(t.name.toLowerCase().replace(" ","_").includes(l.configSearchForm.value.searchTerm.toLowerCase())?0:-1)}}function et(n,o){if(n&1){let t=g();a(0,"li"),C(1),a(2,"span",12),y("click",function(){let p=v(t).$index,m=e(5).$implicit,c=e(2);return I(c.removeFromList(p,m.name))}),r()()}if(n&2){let t=o.$implicit;i(),$("",t," ")}}function it(n,o){if(n&1&&(a(0,"ul"),S(1,et,3,1,"li",null,b),r()),n&2){let t=e(4).$implicit,l=e(2);i(),T(l.form.value[t.name])}}function ot(n,o){if(n&1&&f(0,it,3,0,"ul"),n&2){let t=e(3).$implicit,l=e(2);u(l.form.value[t.name].length>0?0:-1)}}function at(n,o){if(n&1){let t=g();a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r(),a(4,"div",10)(5,"button",11),y("click",function(){v(t);let p=e(2).$implicit,m=e(2);return I(m.addSearchList(p.name+"_input",p.name))}),C(6,"+"),r()(),f(7,ot,1,1)}if(n&2){let t=e(2).$implicit,l=e(2);i(),_("for","cat-",t.name,"_input"),i(),x(t.name),i(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),i(4),u(l.form.value[t.name]?7:-1)}}function rt(n,o){if(n&1&&(a(0,"div",6),d(1,"input",13),a(2,"label",14),C(3),r()()),n&2){let t=e(2).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name),i(),_("for","cat-",t.name,""),i(),x(t.name)}}function lt(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",15),r()),n&2){let t=e(2).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function _t(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r()),n&2){let t=e(2).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function mt(n,o){if(n&1&&(a(0,"div",7)(1,"label",8),C(2),r(),d(3,"input",9),r()),n&2){let t=e(2).$implicit;i(),_("for","cat-",t.name,""),i(),x(t.name),i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function pt(n,o){if(n&1&&f(0,at,8,8)(1,rt,4,6,"div",6)(2,lt,4,6,"div",7)(3,_t,4,6,"div",7)(4,mt,4,6,"div",7),n&2){let t=e().$implicit;u(t.type==="array"?0:t.type==="boolean"?1:t.type==="number"?2:t.type==="string"?3:4)}}function ct(n,o){if(n&1&&f(0,nt,1,1)(1,pt,5,1),n&2){let t=e(2);u(t.configSearchForm.value.searchTerm&&t.configSearchForm.value.searchTerm!==""?0:1)}}function dt(n,o){if(n&1&&S(0,ct,2,1,null,null,b),n&2){let t=e();T(t.fields)}}function Ct(n,o){if(n&1){let t=g();a(0,"li"),C(1),a(2,"span",12),y("click",function(){let p=v(t).$index,m=e(6).$implicit,c=e(2);return I(c.removeFromList(p,m.name))}),r()()}if(n&2){let t=o.$implicit;i(),$("",t," ")}}function ft(n,o){if(n&1&&(a(0,"ul"),S(1,Ct,3,1,"li",null,b),r()),n&2){let t=e(5).$implicit,l=e(2);i(),T(l.form.value[t.name])}}function ut(n,o){if(n&1&&f(0,ft,3,0,"ul"),n&2){let t=e(4).$implicit,l=e(2);u(l.form.value[t.name].length>0?0:-1)}}function st(n,o){if(n&1){let t=g();a(0,"div",7),d(1,"input",9),r(),a(2,"div",10)(3,"button",11),y("click",function(){v(t);let p=e(3).$implicit,m=e(2);return I(m.addSearchList(p.name+"_input",p.name))}),C(4,"+"),r()(),f(5,ut,1,1)}if(n&2){let t=e(3).$implicit,l=e(2);i(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),i(4),u(l.form.value[t.name]?5:-1)}}function xt(n,o){if(n&1&&(a(0,"div",6),d(1,"input",13),r()),n&2){let t=e(3).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function vt(n,o){if(n&1&&(a(0,"div",7),d(1,"input",15),r()),n&2){let t=e(3).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function It(n,o){if(n&1&&(a(0,"div",7),d(1,"input",9),r()),n&2){let t=e(3).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function gt(n,o){if(n&1&&(a(0,"div",7),d(1,"input",9),r()),n&2){let t=e(3).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function yt(n,o){if(n&1&&(a(0,"tr")(1,"td")(2,"div",6),d(3,"input",13),a(4,"label",14),C(5),r()()(),a(6,"td"),f(7,st,6,5)(8,xt,2,3,"div",6)(9,vt,2,3,"div",7)(10,It,2,3,"div",7)(11,gt,2,3,"div",7),r()()),n&2){let t=e(2).$implicit;i(3),_("id","cat-",t.name,"_catenable"),_("formControlName","",t.name,"_catenable"),i(),_("for","cat-",t.name,"_catenable"),i(),x(t.name),i(2),u(t.type==="array"?7:t.type==="boolean"?8:t.type==="number"?9:t.type==="string"?10:11)}}function ht(n,o){if(n&1&&f(0,yt,12,8,"tr"),n&2){let t=e().$implicit,l=e(2);u(t.name.toLowerCase().replace(" ","_").includes(l.configSearchForm.value.searchTerm.toLowerCase())?0:-1)}}function Ft(n,o){if(n&1){let t=g();a(0,"li"),C(1),a(2,"span",12),y("click",function(){let p=v(t).$index,m=e(5).$implicit,c=e(2);return I(c.removeFromList(p,m.name))}),r()()}if(n&2){let t=o.$implicit;i(),$("",t," ")}}function bt(n,o){if(n&1&&(a(0,"ul"),S(1,Ft,3,1,"li",null,b),r()),n&2){let t=e(4).$implicit,l=e(2);i(),T(l.form.value[t.name])}}function St(n,o){if(n&1&&f(0,bt,3,0,"ul"),n&2){let t=e(3).$implicit,l=e(2);u(l.form.value[t.name].length>0?0:-1)}}function Tt(n,o){if(n&1){let t=g();a(0,"div",7),d(1,"input",9),r(),a(2,"div",10)(3,"button",11),y("click",function(){v(t);let p=e(2).$implicit,m=e(2);return I(m.addSearchList(p.name+"_input",p.name))}),C(4,"+"),r()(),f(5,St,1,1)}if(n&2){let t=e(2).$implicit,l=e(2);i(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),i(4),u(l.form.value[t.name]?5:-1)}}function $t(n,o){if(n&1&&(a(0,"div",6),d(1,"input",13),r()),n&2){let t=e(2).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Dt(n,o){if(n&1&&(a(0,"div",7),d(1,"input",15),r()),n&2){let t=e(2).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Et(n,o){if(n&1&&(a(0,"div",7),d(1,"input",9),r()),n&2){let t=e(2).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function wt(n,o){if(n&1&&(a(0,"div",7),d(1,"input",9),r()),n&2){let t=e(2).$implicit;i(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Vt(n,o){if(n&1&&(a(0,"tr")(1,"td")(2,"div",6),d(3,"input",13),a(4,"label",14),C(5),r()()(),a(6,"td"),f(7,Tt,6,5)(8,$t,2,3,"div",6)(9,Dt,2,3,"div",7)(10,Et,2,3,"div",7)(11,wt,2,3,"div",7),r()()),n&2){let t=e().$implicit;i(3),_("id","cat-",t.name,"_catenable"),_("formControlName","",t.name,"_catenable"),i(),_("for","cat-",t.name,"_catenable"),i(),x(t.name),i(2),u(t.type==="array"?7:t.type==="boolean"?8:t.type==="number"?9:t.type==="string"?10:11)}}function Nt(n,o){if(n&1&&f(0,ht,1,1)(1,Vt,12,8,"tr"),n&2){let t=e(2);u(t.configSearchForm.value.searchTerm&&t.configSearchForm.value.searchTerm!==""?0:1)}}function kt(n,o){if(n&1&&(a(0,"table",5)(1,"thead")(2,"tr")(3,"th",16),C(4,"Enable"),r(),a(5,"th",16),C(6,"Parameter Detail"),r()()(),a(7,"tbody"),S(8,Nt,2,1,null,null,b),r()()),n&2){let t=e();i(8),T(t.fields)}}var qt=(()=>{let o=class o{set enableColumn(l){this._enableColumn=l;let p=this.fields.reduce((m,c)=>(m[c.name]=new h(null),c.type==="array"&&(m[`${c.name}_input`]=new h("")),l&&(this.extraParameterService.diannConfigEnableMap[c.name]?m[`${c.name}_catenable`]=new h(!0):m[`${c.name}_catenable`]=new h(!1)),m),{});for(let m in W){let c=this.extraParameterService.diannConfig[m];p[m]&&p[m].setValue(c)}this.form=this.fb.group(p),this.form.valueChanges.subscribe(m=>{this.updateConfig.emit(m)})}get enableColumn(){return this._enableColumn}constructor(l,p){this.fb=l,this.extraParameterService=p,this.config=new q,this.configSearchForm=this.fb.group({searchTerm:new h("")}),this.fields=[],this.updateConfig=new V,this._enableColumn=!1,this.configSearchForm.controls.searchTerm.valueChanges.subscribe(c=>{}),this.fields=Object.keys(this.config).filter(c=>!c.startsWith("cat_")).map(c=>{let F=this.config[c];return{name:c,type:Array.isArray(F)?"array":typeof F}});let m=this.fields.reduce((c,F)=>{let Lt=this.config[F.name];return c[F.name]=new h(null),F.type==="array"&&(c[`${F.name}_input`]=new h("")),this.enableColumn&&(c[`${F.name}_catenable`]=new h(!1)),console.log(this.enableColumn),c},{});this.form=this.fb.group(m),this.form.valueChanges.subscribe(c=>{this.updateConfig.emit(c)})}getConfigValue(l){return this.config[l]}addSearchList(l,p){let m=this.form.controls[l].value,c=this.form.controls[p].value;c?c.includes(m)||(c.push(m),this.form.controls[p].setValue(c),this.form.controls[l].setValue(null)):(this.form.controls[p].setValue([m]),this.form.controls[l].setValue(null))}removeFromList(l,p){let m=this.form.controls[p].value;m.splice(l,1),this.form.controls[p].setValue(m)}};o.\u0275fac=function(p){return new(p||o)(D(O),D(z))},o.\u0275cmp=w({type:o,selectors:[["app-diann-config-input"]],inputs:{enableColumn:"enableColumn"},outputs:{updateConfig:"updateConfig"},standalone:!0,features:[N],decls:11,vars:3,consts:[[3,"formGroup"],[1,"form-floating"],["type","search","id","config-searchTerm","formControlName","searchTerm",1,"form-control"],["for","config-searchTerm"],[1,"d-flex","flex-column","gap-2",3,"formGroup"],[1,"table","table-borderless"],[1,"form-check"],[1,"form-group"],[1,"form-group",3,"for"],["type","text",1,"form-control",3,"id","formControlName"],[1,"mt-2"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-trash",3,"click"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],["type","number",1,"form-control",3,"id","formControlName"],["scope","col"]],template:function(p,m){p&1&&(a(0,"h5"),C(1,"DIANN Config Parameters"),r(),a(2,"form",0)(3,"div",1),d(4,"input",2),a(5,"label",3),C(6,"Config Search Term"),r()()(),d(7,"hr"),a(8,"form",4),f(9,dt,2,0)(10,kt,10,0,"table",5),r()),p&2&&(i(2),E("formGroup",m.configSearchForm),i(6),E("formGroup",m.form),i(),u(m.enableColumn?10:9))},dependencies:[R,G,L,P,k,B,A,M,j]});let n=o;return n})();export{qt as a};
