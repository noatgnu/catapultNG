import{a as W,b as q,d as z}from"./chunk-6GGWJWPR.js";import{b as k,c as A,e as B,f as L,g as v,i as P,j as G,k as M,l as j,p as O,r as R}from"./chunk-URRA4EOY.js";import{Aa as F,Da as E,Ea as o,Ha as s,Ia as _,Oa as d,Pa as I,Q as T,Qa as $,W as g,Wa as N,X as y,ba as V,da as n,ea as D,la as u,na as w,qa as x,sa as h,ta as b,ua as S,va as m,wa as p,xa as C}from"./chunk-VG74EQIO.js";function H(e,a){if(e&1){let t=F();m(0,"li"),d(1),m(2,"span",8),E("click",function(){let c=g(t).$index,i=o(4).$implicit,l=o(2);return y(l.removeFromList(c,i.name))}),p()()}if(e&2){let t=a.$implicit;n(),$("",t," ")}}function J(e,a){if(e&1&&(m(0,"ul"),b(1,H,3,1,"li",null,h),p()),e&2){let t=o(3).$implicit,r=o(2);n(),S(r.form.value[t.name])}}function K(e,a){if(e&1&&u(0,J,3,0,"ul"),e&2){let t=o(2).$implicit,r=o(2);x(r.form.value[t.name].length>0?0:-1)}}function Q(e,a){if(e&1){let t=F();m(0,"div",3)(1,"label",4),d(2),p(),C(3,"input",5),p(),m(4,"div",6)(5,"button",7),E("click",function(){g(t);let c=o().$implicit,i=o(2);return y(i.addSearchList(c.name+"_input",c.name))}),d(6,"+"),p()(),u(7,K,1,1)}if(e&2){let t=o().$implicit,r=o(2);n(),_("for","cat-",t.name,"_input"),n(),I(t.name),n(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),n(4),x(r.form.value[t.name]?7:-1)}}function U(e,a){if(e&1&&(m(0,"div",2),C(1,"input",9),m(2,"label",10),d(3),p()()),e&2){let t=o().$implicit;n(),_("id","cat-",t.name,""),s("formControlName",t.name),n(),_("for","cat-",t.name,""),n(),I(t.name)}}function X(e,a){if(e&1&&(m(0,"div",3)(1,"label",4),d(2),p(),C(3,"input",11),p()),e&2){let t=o().$implicit;n(),_("for","cat-",t.name,""),n(),I(t.name),n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Y(e,a){if(e&1&&(m(0,"div",3)(1,"label",4),d(2),p(),C(3,"input",5),p()),e&2){let t=o().$implicit;n(),_("for","cat-",t.name,""),n(),I(t.name),n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function Z(e,a){if(e&1&&(m(0,"div",3)(1,"label",4),d(2),p(),C(3,"input",5),p()),e&2){let t=o().$implicit;n(),_("for","cat-",t.name,""),n(),I(t.name),n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function tt(e,a){if(e&1&&u(0,Q,8,8)(1,U,4,6,"div",2)(2,X,4,6,"div",3)(3,Y,4,6,"div",3)(4,Z,4,6,"div",3),e&2){let t=a.$implicit;x(t.type==="array"?0:t.type==="boolean"?1:t.type==="number"?2:t.type==="string"?3:4)}}function et(e,a){if(e&1&&b(0,tt,5,1,null,null,h),e&2){let t=o();S(t.fields)}}function nt(e,a){if(e&1){let t=F();m(0,"li"),d(1),m(2,"span",8),E("click",function(){let c=g(t).$index,i=o(4).$implicit,l=o(2);return y(l.removeFromList(c,i.name))}),p()()}if(e&2){let t=a.$implicit;n(),$("",t," ")}}function it(e,a){if(e&1&&(m(0,"ul"),b(1,nt,3,1,"li",null,h),p()),e&2){let t=o(3).$implicit,r=o(2);n(),S(r.form.value[t.name])}}function ot(e,a){if(e&1&&u(0,it,3,0,"ul"),e&2){let t=o(2).$implicit,r=o(2);x(r.form.value[t.name].length>0?0:-1)}}function at(e,a){if(e&1){let t=F();m(0,"div",3),C(1,"input",5),p(),m(2,"div",6)(3,"button",7),E("click",function(){g(t);let c=o().$implicit,i=o(2);return y(i.addSearchList(c.name+"_input",c.name))}),d(4,"+"),p()(),u(5,ot,1,1)}if(e&2){let t=o().$implicit,r=o(2);n(),_("id","cat-",t.name,"_input"),_("formControlName","",t.name,"_input"),n(4),x(r.form.value[t.name]?5:-1)}}function rt(e,a){if(e&1&&(m(0,"div",2),C(1,"input",9),p()),e&2){let t=o().$implicit;n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function lt(e,a){if(e&1&&(m(0,"div",3),C(1,"input",11),p()),e&2){let t=o().$implicit;n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function mt(e,a){if(e&1&&(m(0,"div",3),C(1,"input",5),p()),e&2){let t=o().$implicit;n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function pt(e,a){if(e&1&&(m(0,"div",3),C(1,"input",5),p()),e&2){let t=o().$implicit;n(),_("id","cat-",t.name,""),s("formControlName",t.name)}}function ct(e,a){if(e&1&&(m(0,"tr")(1,"td")(2,"div",2),C(3,"input",9),m(4,"label",10),d(5),p()()(),m(6,"td"),u(7,at,6,5)(8,rt,2,3,"div",2)(9,lt,2,3,"div",3)(10,mt,2,3,"div",3)(11,pt,2,3,"div",3),p()()),e&2){let t=a.$implicit;n(3),_("id","cat-",t.name,"_catenable"),_("formControlName","",t.name,"_catenable"),n(),_("for","cat-",t.name,"_catenable"),n(),I(t.name),n(2),x(t.type==="array"?7:t.type==="boolean"?8:t.type==="number"?9:t.type==="string"?10:11)}}function _t(e,a){if(e&1&&(m(0,"table",1)(1,"thead")(2,"tr")(3,"th",12),d(4,"Enable"),p(),m(5,"th",12),d(6,"Parameter Detail"),p()()(),m(7,"tbody"),b(8,ct,12,8,"tr",null,h),p()()),e&2){let t=o();n(8),S(t.fields)}}var ht=(()=>{let a=class a{set enableColumn(r){this._enableColumn=r;let c=this.fields.reduce((i,l)=>(i[l.name]=new v(null),l.type==="array"&&(i[`${l.name}_input`]=new v("")),r&&(this.extraParameterService.diannConfigEnableMap[l.name]?i[`${l.name}_catenable`]=new v(!0):i[`${l.name}_catenable`]=new v(!1)),i),{});for(let i in W){let l=this.extraParameterService.diannConfig[i];c[i]&&c[i].setValue(l)}this.form=this.fb.group(c),this.form.valueChanges.subscribe(i=>{this.updateConfig.emit(i)})}get enableColumn(){return this._enableColumn}constructor(r,c){this.fb=r,this.extraParameterService=c,this.config=new q,this.fields=[],this.updateConfig=new V,this._enableColumn=!1,this.fields=Object.keys(this.config).filter(l=>!l.startsWith("cat_")).map(l=>{let f=this.config[l];return{name:l,type:Array.isArray(f)?"array":typeof f}});let i=this.fields.reduce((l,f)=>{let dt=this.config[f.name];return l[f.name]=new v(null),f.type==="array"&&(l[`${f.name}_input`]=new v("")),this.enableColumn&&(l[`${f.name}_catenable`]=new v(!1)),console.log(this.enableColumn),l},{});this.form=this.fb.group(i),this.form.valueChanges.subscribe(l=>{this.updateConfig.emit(l)})}getConfigValue(r){return this.config[r]}addSearchList(r,c){let i=this.form.controls[r].value,l=this.form.controls[c].value;l?l.includes(i)||(l.push(i),this.form.controls[c].setValue(l),this.form.controls[r].setValue(null)):(this.form.controls[c].setValue([i]),this.form.controls[r].setValue(null))}removeFromList(r,c){let i=this.form.controls[c].value;i.splice(r,1),this.form.controls[c].setValue(i)}};a.\u0275fac=function(c){return new(c||a)(D(O),D(z))},a.\u0275cmp=T({type:a,selectors:[["app-diann-config-input"]],inputs:{enableColumn:"enableColumn"},outputs:{updateConfig:"updateConfig"},standalone:!0,features:[N],decls:5,vars:2,consts:[[1,"d-flex","flex-column","gap-2",3,"formGroup"],[1,"table","table-borderless"],[1,"form-check"],[1,"form-group"],[1,"form-group",3,"for"],["type","text",1,"form-control",3,"id","formControlName"],[1,"mt-2"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-trash",3,"click"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],["type","number",1,"form-control",3,"id","formControlName"],["scope","col"]],template:function(c,i){c&1&&(m(0,"h5"),d(1,"DIANN Config Parameters"),p(),m(2,"form",0),u(3,et,2,0)(4,_t,10,0,"table",1),p()),c&2&&(n(2),w("formGroup",i.form),n(),x(i.enableColumn?4:3))},dependencies:[R,P,A,G,k,B,L,M,j]});let e=a;return e})();export{ht as a};
