import{a as Ge}from"./chunk-34Q7TYYH.js";import{a as Ve}from"./chunk-AQOP4WXO.js";import{a as J,b as Ne,c as X}from"./chunk-EWNG6GOD.js";import{a as De,b as Be,c as Re}from"./chunk-XFD5YITK.js";import{b as je,d as O}from"./chunk-6GGWJWPR.js";import{d as Ie,e as we,f as Ae,g as Ee,h as ke,i as Pe,j as Me,n as Te,o as Fe}from"./chunk-EQB5EGJF.js";import{b as be,c as A,d as D,e as E,f as k,g as f,h as Ce,i as P,j as $,k as M,l as T,p as F,q as H,r as N}from"./chunk-URRA4EOY.js";import{a as Oe}from"./chunk-LPVHG6AI.js";import{a as Se,b as K}from"./chunk-J6EH74H5.js";import{a as qe}from"./chunk-MK7P4XXY.js";import"./chunk-OV7F5RRE.js";import{Aa as C,B as ee,Da as u,Ea as d,F as de,H as q,Hb as ne,Ia as he,M as pe,Na as Q,Oa as l,Pa as xe,Q as I,Qa as b,R as ue,Sa as L,Ta as U,Ua as W,W as v,Wa as w,X as g,Xa as j,Ya as _e,ba as te,bb as ve,ca as fe,da as m,ea as h,la as y,na as p,nb as z,o as se,oa as ie,p as le,qa as _,r as me,sa as B,sb as ge,ta as R,ua as G,va as o,wa as n,x as ce,xa as c,y as Z,zb as ye}from"./chunk-VG74EQIO.js";function et(i,s){i&1&&(o(0,"small",5),l(1,"Searching..."),n())}function tt(i,s){i&1&&(o(0,"small",6),l(1,"No analyses found"),n())}function it(i,s){if(i&1){let r=C();o(0,"div",1)(1,"label",3),l(2,"Analysis"),n(),o(3,"input",4),u("selectItem",function(t){v(r);let a=d();return g(a.selectionHandler(t))}),W("ngModelChange",function(t){v(r);let a=d();return U(a.searchTerm,t)||(a.searchTerm=t),g(t)}),n(),y(4,et,2,0,"small",5)(5,tt,2,0,"small",6),n()}if(i&2){let r=d(),e=Q(3);m(3),ie("is-invalid",r.searchFailed),p("resultTemplate",e)("inputFormatter",r.formatter),L("ngModel",r.searchTerm),p("ngbTypeahead",r.search),m(),_(r.searching?4:-1),m(),_(r.searchFailed?5:-1)}}function nt(i,s){if(i&1&&(o(0,"form",2)(1,"div",7),c(2,"input",8),o(3,"label",9),l(4,"Analysis search"),n()()()),i&2){let r=d();p("formGroup",r.form),m(2),ie("is-invalid",r.searchFailed)}}function rt(i,s){if(i&1&&c(0,"ngb-highlight",10),i&2){let r=s.result,e=s.term;p("result",r.analysis_path)("term",e)}}var Qe=(()=>{let s=class s{constructor(e,t){this.analysisService=e,this.fb=t,this.mode="typeahead",this.searchTerm="",this.searching=!1,this.searchFailed=!1,this.search=a=>a.pipe(Z(300),ee(),q(()=>this.searching=!0),de(x=>this.analysisService.searchAnalyses(x).pipe(q(()=>this.searchFailed=!1),le(V=>V.results),ce(()=>(this.searchFailed=!0,se([]))))),q(()=>this.searching=!1)),this.formatter=a=>a.analysis_path,this.searchQuery=new te,this.selectedAnalysis=new te,this.form=this.fb.group({searchTerm:new f("")}),this.form.controls.searchTerm.valueChanges.pipe(Z(300),ee()).subscribe(a=>{a&&a.length>2&&this.searchAnalysisName()})}searchAnalysisName(){this.form.value.searchTerm&&this.analysisService.searchAnalyses(this.form.value.searchTerm).subscribe(e=>{this.searchQuery.emit(e)})}selectionHandler(e){this.selectedAnalysis.emit(e.item)}};s.\u0275fac=function(t){return new(t||s)(h(K),h(F))},s.\u0275cmp=I({type:s,selectors:[["app-analysis-search"]],inputs:{mode:"mode",searchTerm:"searchTerm"},outputs:{searchQuery:"searchQuery",selectedAnalysis:"selectedAnalysis"},standalone:!0,features:[w],decls:4,vars:1,consts:[["resultTemplate",""],[1,"form-group"],[3,"formGroup"],["for","searchAnalysis"],["id","searchAnalysis","type","search","placeholder","Experiment search",1,"form-control",3,"selectItem","ngModelChange","resultTemplate","inputFormatter","ngModel","ngbTypeahead"],[1,"form-text","text-muted"],[1,"invalid-feedback"],[1,"form-floating"],["id","searchAnalysisEmit","type","search","formControlName","searchTerm",1,"form-control"],["for","searchAnalysisEmit"],[3,"result","term"]],template:function(t,a){t&1&&y(0,it,6,8,"div",1)(1,nt,5,3,"form",2)(2,rt,1,2,"ng-template",null,0,ve),t&2&&_(a.mode==="typeahead"?0:1)},dependencies:[Te,Fe,N,P,A,E,k,M,T,H,Ce]});let i=s;return i})();var Le=i=>({active:i});function ot(i,s){if(i&1){let r=C();o(0,"div",10),u("click",function(){let t=v(r).$implicit,a=d();return g(a.handleFolderClick(t))}),l(1),n()}if(i&2){let r=s.$implicit,e=d();p("ngClass",j(2,Le,e.clickedFolder===r)),m(),b(" ",r+"/"," ")}}function st(i,s){if(i&1){let r=C();o(0,"div",10),u("click",function(){let t=v(r).$implicit,a=d();return a.clickedFile=t,g(a.clickedFolder="")}),l(1),n()}if(i&2){let r=s.$implicit,e=d();p("ngClass",j(2,Le,e.clickedFile===r)),m(),b(" ",r," ")}}var Ue=(()=>{let s=class s{constructor(e,t){this.fb=e,this.generalService=t,this.form=this.fb.group({path:new f(".",D.required)}),this.folders=[],this.files=[],this.clickedFolder="",this.clickedFile="",this.browse()}browse(){this.form.valid&&this.form.value.path&&(this.files=[],this.folders=[],this.generalService.postFileLocation(this.form.value.path).subscribe(e=>{this.form.controls.path.setValue(e.current),this.folders=["..",...e.folders],this.files=e.files}))}handleFolderClick(e){e===".."?this.form.controls.path.setValue(this.form.value.path.split("/").slice(0,-1).join("/")):this.form.controls.path.setValue(this.form.value.path+"/"+e),this.browse()}};s.\u0275fac=function(t){return new(t||s)(h(F),h(J))},s.\u0275cmp=I({type:s,selectors:[["app-file-browser-modal"]],standalone:!0,features:[w],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"form-floating"],["type","text","id","file_path","formControlName","path","placeholder","File/Folder Location",1,"form-control"],["for","file_path"],[1,"d-flex","flex-row","gap-2","mt-2"],[1,"list-group","overflow-auto",2,"width","100%","height","50vh"],[1,"list-group-item",3,"ngClass"],[1,"list-group-item",3,"click","ngClass"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"h5",1),l(2," File Path Browser "),n()(),o(3,"div",2)(4,"form",3)(5,"div",4),c(6,"input",5),o(7,"label",6),l(8,"Storage Location"),n()(),o(9,"div",7)(10,"div",8),R(11,ot,2,4,"div",9,B),R(13,st,2,4,"div",9,B),n()()()()),t&2&&(m(4),p("formGroup",a.form),m(7),G(a.folders),m(2),G(a.files))},dependencies:[N,P,A,E,k,M,T,z]});let i=s;return i})();var ae=(()=>{let s=class s{constructor(e,t,a){this.activeModal=e,this.fb=t,this.extraParameterService=a,this.form=this.fb.group({min_precursor:[this.extraParameterService.precursorIdentified.min],max_precursor:[this.extraParameterService.precursorIdentified.max],min_protein:[this.extraParameterService.proteinIdentified.min],max_protein:[this.extraParameterService.proteinIdentified.max]}),this.diannConfig=new je}submit(){this.activeModal.close({form:this.form.value,diannConfig:this.diannConfig})}close(){this.activeModal.dismiss()}handleDiannConfigUpdate(e){this.diannConfig.reset(),console.log(e),Object.keys(this.diannConfig).forEach(t=>{let a=e[t];e[`${t}_catenable`]&&(console.log(a),this.diannConfig[t]=a,this.extraParameterService.diannConfigEnableMap[t]=!0)}),console.log(this.diannConfig)}};s.\u0275fac=function(t){return new(t||s)(h(Ie),h(F),h(O))},s.\u0275cmp=I({type:s,selectors:[["app-filter-modal"]],standalone:!0,features:[w],decls:28,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["for","min_precursor"],["type","number","id","min_precursor","formControlName","min_precursor",1,"form-control"],["for","max_precursor"],["type","number","id","max_precursor","formControlName","max_precursor",1,"form-control"],["for","min_protein"],["type","number","id","min_protein","formControlName","min_protein",1,"form-control"],["for","max_protein"],["type","number","id","max_protein","formControlName","max_protein",1,"form-control"],[3,"updateConfig","enableColumn"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"h5",1),l(2," Additional Filter Parameters "),n()(),o(3,"div",2)(4,"form",3)(5,"div",4)(6,"label",5),l(7," Minimum Precursor Identified "),n(),c(8,"input",6),n(),o(9,"div",4)(10,"label",7),l(11," Maximum Precursor Identified "),n(),c(12,"input",8),n(),o(13,"div",4)(14,"label",9),l(15," Minimum Protein Identified "),n(),c(16,"input",10),n(),o(17,"div",4)(18,"label",11),l(19," Maximum Protein Identified "),n(),c(20,"input",12),n()(),c(21,"hr"),o(22,"app-diann-config-input",13),u("updateConfig",function(V){return a.handleDiannConfigUpdate(V)}),n()(),o(23,"div",14)(24,"button",15),u("click",function(){return a.submit()}),l(25,"Submit"),n(),o(26,"button",16),u("click",function(){return a.close()}),l(27,"Close"),n()()),t&2&&(m(4),p("formGroup",a.form),m(18),p("enableColumn",!0))},dependencies:[N,P,A,$,E,k,M,T,Ge]});let i=s;return i})();var mt=(i,s)=>({"list-group-item list-group-item-action d-flex flex-row align-item-center g-2":!0,"bg-primary":i,"text-light":s}),ze=i=>[i];function ct(i,s){if(i&1){let r=C();o(0,"div",21)(1,"input",23),u("change",function(t){v(r);let a=d().$implicit,x=d();return g(x.toggleAnalysisSelect(a.id,t))}),n()()}}function dt(i,s){if(i&1){let r=C();o(0,"div",20),u("click",function(){let t=v(r).$implicit,a=d();return g(a.selectAnalysis(t.id))}),y(1,ct,2,0,"div",21),o(2,"div",22)(3,"div")(4,"b"),l(5,"ID:"),n(),l(6),c(7,"br"),o(8,"b"),l(9,"Name:"),n(),l(10),c(11,"br"),o(12,"b"),l(13,"Path:"),n(),l(14),n()()()}if(i&2){let r=s.$implicit,e=d();p("ngClass",_e(5,mt,r.id===e.clickedAnalysis,r.id===e.clickedAnalysis)),m(),_(e.showSelect?1:-1),m(5),b(" ",r.id,""),m(4),b(" ",r.analysis_name,""),m(4),b(" ",r.analysis_path," ")}}function pt(i,s){if(i&1&&(o(0,"b"),l(1,"Min Protein Identified:"),n(),l(2),c(3,"br")),i&2){let r=d(2);m(2),b(" ",r.extraParameterService.proteinIdentified.min," ")}}function ut(i,s){if(i&1&&(o(0,"b"),l(1,"Max Protein Identified:"),n(),l(2),c(3,"br")),i&2){let r=d(2);m(2),b(" ",r.extraParameterService.proteinIdentified.max," ")}}function ft(i,s){if(i&1&&(o(0,"b"),l(1,"Min Precursor Identified:"),n(),l(2),c(3,"br")),i&2){let r=d(2);m(2),b(" ",r.extraParameterService.precursorIdentified.min," ")}}function ht(i,s){if(i&1&&(o(0,"b"),l(1,"Max Precursor Identified:"),n(),l(2),c(3,"br")),i&2){let r=d(2);m(2),b(" ",r.extraParameterService.precursorIdentified.max," ")}}function xt(i,s){if(i&1&&(o(0,"div",18)(1,"b"),l(2,"Current Extra Filter"),n(),o(3,"p"),y(4,pt,4,1)(5,ut,4,1)(6,ft,4,1)(7,ht,4,1),n()()),i&2){let r=d();m(4),_(r.extraParameterService.proteinIdentified.min?4:-1),m(),_(r.extraParameterService.proteinIdentified.max?5:-1),m(),_(r.extraParameterService.precursorIdentified.min?6:-1),m(),_(r.extraParameterService.precursorIdentified.max?7:-1)}}function _t(i,s){i&1&&(o(0,"div",19)(1,"div",24)(2,"div",19)(3,"p"),l(4," No analysis selected yet. "),n()()()())}function vt(i,s){if(i&1&&l(0),i&2){let r=d(2);b(" ",r.form.value.start_time," ")}}function gt(i,s){if(i&1&&l(0),i&2){let r=d(2);b(" ",r.form.value.end_time," ")}}function yt(i,s){if(i&1&&(o(0,"div",26)(1,"label")(2,"b"),l(3,"Experiment"),n()(),o(4,"p")(5,"a",49),l(6),n()()()),i&2){let r=d(3);m(5),he("href","/#/experiment/manage/",r.selectedExperiment.id,"",fe),m(),xe(r.selectedExperiment.experiment_name)}}function bt(i,s){if(i&1){let r=C();o(0,"app-experiment-search",50),u("selectedExperiment",function(t){v(r);let a=d(3);return g(a.handleExperimentSelect(t))}),n()}if(i&2){let r=d(3);p("mode","typeahead")("experiment",r.selectedExperiment)}}function Ct(i,s){if(i&1&&y(0,yt,7,3,"div",26)(1,bt,1,2,"app-experiment-search",48),i&2){let r=d(2);_(r.editExperiment?1:0)}}function St(i,s){if(i&1){let r=C();o(0,"button",45),u("click",function(){v(r);let t=d(2);return g(t.queueAnalysis(t.form.value.id))}),l(1,"Queue Analysis"),n()}}function It(i,s){if(i&1&&(o(0,"div",56),c(1,"app-bar-chart-result-summary",57),n(),o(2,"div"),c(3,"app-precursor-report",58),n()),i&2){let r=d(3);m(),p("plotType","precursor")("data",r.resultSummaries),m(2),p("pageSize",5)("analysisIds",j(4,ze,r.clickedAnalysis))}}function wt(i,s){if(i&1&&(o(0,"div",56),c(1,"app-bar-chart-result-summary",57),n(),o(2,"div"),c(3,"app-protein-group-report",58),n()),i&2){let r=d(3);m(),p("plotType","protein")("data",r.resultSummaries),m(2),p("pageSize",5)("analysisIds",j(4,ze,r.clickedAnalysis))}}function At(i,s){if(i&1){let r=C();o(0,"ul",51,0),W("activeIdChange",function(t){v(r);let a=d(2);return U(a.active,t)||(a.active=t),g(t)}),o(2,"li",52)(3,"button",53),l(4,"Precursor"),n(),y(5,It,4,6,"ng-template",54),n(),o(6,"li",52)(7,"button",53),l(8,"Protein"),n(),y(9,wt,4,6,"ng-template",54),n()(),c(10,"div",55)}if(i&2){let r=Q(1),e=d(2);L("activeId",e.active),m(2),p("ngbNavItem","precursor"),m(4),p("ngbNavItem","protein"),m(4),p("ngbNavOutlet",r)}}function Et(i,s){if(i&1){let r=C();o(0,"div",19)(1,"form",25)(2,"div",26)(3,"label",27),l(4,"Analysis Name"),n(),c(5,"input",28),n(),o(6,"div",26)(7,"label",29),l(8,"Analysis Path"),n(),c(9,"input",30),n(),o(10,"div",26)(11,"label",31),l(12,"Unique ID"),n(),c(13,"input",32),n(),c(14,"div",33),o(15,"div",26)(16,"b"),l(17,"Created At:"),n(),l(18),n(),o(19,"div",26)(20,"b"),l(21,"Updated At:"),n(),l(22),n(),o(23,"div",33)(24,"div",34),c(25,"input",35),o(26,"label",36),l(27," Processing "),n(),o(28,"small",37),l(29," Indicate if the analysis is processing. "),n()(),o(30,"div",34),c(31,"input",38),o(32,"label",39),l(33," Completed "),n(),o(34,"small",37),l(35," Indicate if the analysis is completed. "),n()()(),o(36,"div",26)(37,"label",40),l(38,"Command Parameters"),n(),c(39,"textarea",41),n(),o(40,"div",26)(41,"label",42),l(42,"Output Folder"),n(),c(43,"input",43),o(44,"button",44),u("click",function(){v(r);let t=d();return g(t.openFileBrowser())}),l(45,"Browse"),n()(),o(46,"div",26)(47,"b"),l(48,"Start Time:"),n(),y(49,vt,1,1),n(),o(50,"div",26)(51,"b"),l(52,"End Time:"),n(),y(53,gt,1,1),n(),y(54,Ct,2,1),o(55,"div",33)(56,"button",45),u("click",function(){v(r);let t=d();return g(t.updateAnalysis())}),l(57,"Update"),n(),y(58,St,2,0,"button",46),o(59,"button",47),u("click",function(){v(r);let t=d();return g(t.deleteAnalysis(t.clickedAnalysis))}),l(60,"Delete"),n()()(),y(61,At,11,4),n()}if(i&2){let r=d();m(),p("formGroup",r.form),m(17),b(" ",r.form.value.created_at," "),m(4),b(" ",r.form.value.updated_at," "),m(27),_(r.form.value.start_time?49:-1),m(4),_(r.form.value.end_time?53:-1),m(),_(r.selectedExperiment?54:-1),m(4),_(r.form.value.id&&r.form.value.ready?58:-1),m(3),_(r.resultSummaries.length>0?61:-1)}}var oe=(()=>{let s=class s{set analysisId(e){this._analysisId=e,this.selectAnalysis(e)}get analysisId(){return this._analysisId}constructor(e,t,a,x,V,$e,He,Je,Ke,Xe){this.dataReportService=e,this.toastService=t,this.websocketService=a,this.experimentService=x,this.modal=V,this.activatedRoute=$e,this.generalService=He,this.analysisService=Je,this.fb=Ke,this.extraParameterService=Xe,this.showSelect=!1,this.active="precursor",this.previous=null,this.next=null,this.n_analysis=0,this.analyses=[],this.clickedAnalysis=-1,this.searchTerm="",this.form=this.fb.group({id:new f(-1,D.required),analysis_path:new f("",D.required),experiment:new f(-1,D.required),analysis_type:new f("diann-spectral",D.required),fasta_file:new f(""),spectral_library:new f(""),created_at:new f,updated_at:new f,processing:new f(!1),completed:new f(!1),start_time:new f,end_time:new f,log:new f(""),commands:new f(""),output_folder:new f(""),default_analysis:new f(!1),ready:new f(!1),analysis_name:new f("")}),this.analysisTypeChoices=[],this.selectedAnalyses=[],this.editExperiment=!1,this._analysisId=-1,this.resultSummaries=[],this.analysisService.getAnalysisType().subscribe(S=>{this.analysisTypeChoices=S}),this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(S=>{this.analyses=S.results,this.next=S.next,this.previous=S.previous,this.n_analysis=S.count}),this.websocketService.connectNotification().asObservable().subscribe(S=>{this.toastService.show(S.task_id,S.status),this.clickedAnalysis>0&&this.analysisService.getAssociatedTasks(this.clickedAnalysis).subscribe(Ye=>{this.tasks=Ye})})}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.generalService.setBreadcrumbs(e.breadcrumbs,e.breadcrumbs.join("/"))})}openCreateAnalysisModal(){this.modal.open(X)}deleteAllSelected(){let e=[];for(let t of this.selectedAnalyses)e.push(this.analysisService.deleteAnalysis(t));me(e).subscribe(t=>{this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(a=>{this.analyses=a.results,this.next=a.next,this.previous=a.previous,this.n_analysis=a.count})})}nextPage(){this.next&&this.analysisService.getAnalyses(this.next).subscribe(e=>{this.analyses=e.results,this.next=e.next,this.previous=e.previous,this.n_analysis=e.count})}previousPage(){this.previous&&this.analysisService.getAnalyses(this.previous).subscribe(e=>{this.analyses=e.results,this.next=e.next,this.previous=e.previous,this.n_analysis=e.count})}selectAnalysis(e){this.selectedExperiment=void 0,this.clickedAnalysis===e||!e?this.clickedAnalysis=-1:(this.clickedAnalysis=e,this.analysisService.getAssociatedTasks(e).subscribe(t=>{this.tasks=t}),this.analysisService.getAnalysis(e).subscribe(t=>{let a={id:t.id,analysis_path:t.analysis_path,analysis_type:t.analysis_type,experiment:t.experiment,created_at:new Date(t.created_at),updated_at:new Date(t.updated_at),processing:t.processing,completed:t.completed,commands:t.commands,log:t.log,output_folder:t.output_folder,analysis_name:t.analysis_name};t.start_time&&(a.start_time=new Date(t.start_time)),t.stop_time&&(a.end_time=new Date(t.stop_time)),this.form.patchValue(a),this.experimentService.getExperiment(t.experiment).subscribe(x=>{this.selectedExperiment=x})}),this.analysisService.getResultSummaries(e).subscribe(t=>{this.resultSummaries=t}))}toggleAnalysisSelect(e,t){if(t.target){let a=t.target;"checked"in a&&(a.checked?this.selectedAnalyses.push(e):this.selectedAnalyses=this.selectedAnalyses.filter(x=>x!==e))}}updateAnalysis(){this.form.valid&&this.form.value.id&&this.analysisService.updateAnalysis(this.form.value.id,this.form.value).subscribe(e=>{this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(t=>{this.analyses=t.results,this.next=t.next,this.previous=t.previous,this.n_analysis=t.count})})}deleteAnalysis(e){e&&e>0&&this.analysisService.deleteAnalysis(e).subscribe(t=>{this.clickedAnalysis=-1,this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(a=>{this.analyses=a.results,this.next=a.next,this.previous=a.previous,this.n_analysis=a.count})})}handleAnalysisSearchQuery(e){this.analyses=e.results,this.next=e.next,this.previous=e.previous,this.n_analysis=e.count}handleExperimentSelect(e){this.form.patchValue({experiment:e.id}),this.selectedExperiment=e,this.editExperiment=!1}queueAnalysis(e){e>0&&this.analysisService.queueAnalysis(e).subscribe(t=>{this.toastService.show("Analysis","Successfully Queued")})}openFileBrowser(){this.modal.open(Ue,{size:"lg"})}openFilterModal(){this.modal.open(ae,{scrollable:!0}).closed.subscribe(t=>{this.extraParameterService.proteinIdentified.min=t.min_protein,this.extraParameterService.proteinIdentified.max=t.max_protein,this.extraParameterService.precursorIdentified.min=t.min_precursor,this.extraParameterService.precursorIdentified.max=t.max_precursor,this.extraParameterService.diannConfig=t.diannConfig,this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(a=>{this.analyses=a.results,this.next=a.next,this.previous=a.previous,this.n_analysis=a.count}),this.dataReportService.refreshReportSubject.next(!0)})}resetFilter(){this.extraParameterService.proteinIdentified.min=null,this.extraParameterService.proteinIdentified.max=null,this.extraParameterService.precursorIdentified.min=null,this.extraParameterService.precursorIdentified.max=null,this.searchTerm="",this.analysisService.getAnalyses(void 0,this.extraParameterService.precursorIdentified.min,this.extraParameterService.precursorIdentified.max,this.extraParameterService.proteinIdentified.min,this.extraParameterService.proteinIdentified.max,this.extraParameterService.diannConfig).subscribe(e=>{this.analyses=e.results,this.next=e.next,this.previous=e.previous,this.n_analysis=e.count}),this.dataReportService.refreshReportSubject.next(!0)}};s.\u0275fac=function(t){return new(t||s)(h(De),h(Oe),h(qe),h(Se),h(we),h(ye),h(J),h(K),h(F),h(O))},s.\u0275cmp=I({type:s,selectors:[["app-analysis-manage"]],inputs:{analysisId:"analysisId"},standalone:!0,features:[w],decls:31,vars:6,consts:[["nav","ngbNav"],[1,"d-flex","g-1"],[1,"border-end","border-1","border-black","d-flex","flex-column",2,"height","100%","width","300px","min-width","300px"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","d-flex","flex-wrap","text-light"],[1,"container-fluid"],[1,"navbar-brand"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","d-flex","justify-content-start","g-2","flex-wrap","text-light"],[1,"btn","btn-sm","btn-dark",3,"click"],[1,"bi","bi-folder-check"],[1,"bi","bi-filter"],[1,"bi","bi-trash"],[1,"btn","btn-sm","btn-dark",3,"click","disabled"],[1,"bi","bi-repeat"],[3,"searchQuery","searchTerm","mode"],[1,"analysis-side-nav"],[1,"list-group","d-flex","flex-column","rounded-0"],[3,"ngClass"],[1,"analysis-main-content"],[1,"m-5","small"],[1,"p-5"],[3,"click","ngClass"],[1,"form-check","flex-grow-0"],[1,"flex-grow-1"],["type","checkbox",1,"form-check-input",3,"change"],[1,"border-dark","border-opacity-25","rounded-3","d-flex",2,"border-style","dashed"],[1,"d-flex","flex-column","gap-2","mb-2",3,"formGroup"],[1,"form-group"],["for","analysis_name"],["type","text","id","analysis_name","formControlName","analysis_name",1,"form-control","input-journal"],["for","analysis_path"],["type","text","readonly","","id","analysis_path","formControlName","analysis_path",1,"form-control","input-journal"],["for","id"],["type","number","id","id","formControlName","id","readonly","",1,"form-control","input-journal"],[1,"d-flex","gap-2"],[1,"form-check"],["type","checkbox","id","processing","formControlName","processing",1,"form-check-input"],["for","processing",1,"form-check-label"],[1,"form-text","text-muted"],["type","checkbox","id","completed","formControlName","completed",1,"form-check-input"],["for","completed",1,"form-check-label"],["for","commands"],["id","commands","formControlName","commands","readonly","",1,"form-control","input-journal"],["for","output_folder"],["type","text","id","output_folder","formControlName","output_folder",1,"form-control","input-journal"],[1,"btn","btn-sm","btn-outline-primary","mt-1",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary"],[1,"btn","btn-danger",3,"click"],[3,"mode","experiment"],[3,"href"],[3,"selectedExperiment","mode","experiment"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"d-flex","justify-content-center","mt-2"],[3,"plotType","data"],[3,"pageSize","analysisIds"]],template:function(t,a){t&1&&(o(0,"div")(1,"div",1)(2,"div",2)(3,"nav",3)(4,"div",4)(5,"div",5),l(6,"Analyses Management"),n()()(),o(7,"nav",6)(8,"button",7),u("click",function(){return a.openCreateAnalysisModal()}),l(9,"+"),n(),o(10,"button",7),u("click",function(){return a.showSelect=!a.showSelect}),c(11,"i",8),n(),o(12,"button",7),u("click",function(){return a.openFilterModal()}),c(13,"i",9),n(),o(14,"button",7),u("click",function(){return a.deleteAllSelected()}),c(15,"i",10),n(),o(16,"button",11),u("click",function(){return a.previousPage()}),l(17,"<"),n(),o(18,"button",11),u("click",function(){return a.nextPage()}),l(19,">"),n(),o(20,"button",7),u("click",function(){return a.resetFilter()}),c(21,"i",12),n()(),o(22,"app-analysis-search",13),u("searchQuery",function(V){return a.handleAnalysisSearchQuery(V)}),n(),o(23,"div",14)(24,"div",15),R(25,dt,15,8,"div",16,B),n()()(),o(27,"div",17),y(28,xt,8,4,"div",18)(29,_t,5,0,"div",19)(30,Et,62,8,"div",19),n()()()),t&2&&(m(16),p("disabled",!a.previous),m(2),p("disabled",!a.next),m(4),p("searchTerm",a.searchTerm)("mode","emit"),m(3),G(a.analyses),m(3),_(a.extraParameterService.proteinIdentified.min||a.extraParameterService.proteinIdentified.max||a.extraParameterService.precursorIdentified.max||a.extraParameterService.precursorIdentified.min?28:-1),m(),_(a.clickedAnalysis===-1?29:30))},dependencies:[Ne,H,P,A,$,be,E,k,N,M,T,z,Qe,Ve,Be,ke,Ee,Pe,Ae,Re,Me],styles:[".analysis-side-nav[_ngcontent-%COMP%]{width:300px;border-right:1px solid #000000;display:flex;flex-direction:column;height:calc(100vh - 226px);overflow:auto}.analysis-main-content[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:calc(100vw - 350px);overflow:auto}.analysis-task-list[_ngcontent-%COMP%]{width:300px;height:calc(100vh - 128px);overflow:auto}.floating-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background-color:#007bff;color:#fff;border:none;border-radius:50%;width:50px;height:50px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a;cursor:pointer}.floating-dropdown[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:20px;background-color:#fff;border:1px solid #ccc;padding:10px;box-shadow:0 2px 10px #0000001a;z-index:1000}"]});let i=s;return i})();var kt=[{path:"create",component:X,data:{breadcrumbs:["analysis","create"]}},{path:"manage",component:oe,data:{breadcrumbs:["analysis","manage"]}},{path:"manage/:analysisId",component:oe,data:{breadcrumbs:["analysis","manage"]}}],_i=(()=>{let s=class s{};s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=ue({type:s}),s.\u0275inj=pe({imports:[ge,ne.forChild(kt),ne]});let i=s;return i})();export{_i as AnalysisModule};
