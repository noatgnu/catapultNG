import{Fa as qd,Ga as Hd,Ka as Gd,L as Ch,La as Wd,M as yf,Ma as Yd,O as Rd,Q as mf,R as xf,V as Bd,Va as Zd,Wa as Xd,a as zd,ba as ri,c as js,d as Vu,e as Eh,ea as wc,fb as Jd,gb as Kd,ma as Nd,na as bf,nb as $d,ob as Qd,sb as _f,va as jd,wa as Ud,xa as Vd}from"./chunk-VG74EQIO.js";var e0=js((wf,Dh)=>{"use strict";(function(qe,be){typeof wf=="object"&&typeof Dh=="object"?Dh.exports=be():typeof define=="function"&&define.amd?define([],be):typeof wf=="object"?wf.Plotly=be():qe.Plotly=be()})(self,function(){return function(){var qe={79288:function(R,C,e){"use strict";var _=e(3400),T={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var r in T){var w=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");_.addStyleRule(w,T[r])}},86712:function(R,C,e){"use strict";R.exports=e(84224)},37240:function(R,C,e){"use strict";R.exports=e(51132)},29744:function(R,C,e){"use strict";R.exports=e(94456)},29352:function(R,C,e){"use strict";R.exports=e(67244)},96144:function(R,C,e){"use strict";R.exports=e(97776)},53219:function(R,C,e){"use strict";R.exports=e(61712)},4624:function(R,C,e){"use strict";R.exports=e(95856)},54543:function(R,C,e){"use strict";R.exports=e(54272)},45e3:function(R,C,e){"use strict";R.exports=e(85404)},62300:function(R,C,e){"use strict";R.exports=e(26048)},6920:function(R,C,e){"use strict";R.exports=e(66240)},10264:function(R,C,e){"use strict";R.exports=e(40448)},32016:function(R,C,e){"use strict";R.exports=e(64884)},27528:function(R,C,e){"use strict";R.exports=e(15088)},75556:function(R,C,e){"use strict";R.exports=e(76744)},39204:function(R,C,e){"use strict";R.exports=e(94704)},73996:function(R,C,e){"use strict";R.exports=e(62396)},16489:function(R,C,e){"use strict";R.exports=e(32028)},5e3:function(R,C,e){"use strict";R.exports=e(81932)},77280:function(R,C,e){"use strict";R.exports=e(45536)},33992:function(R,C,e){"use strict";R.exports=e(42600)},17600:function(R,C,e){"use strict";R.exports=e(21536)},49116:function(R,C,e){"use strict";R.exports=e(65664)},46808:function(R,C,e){"use strict";R.exports=e(29044)},36168:function(R,C,e){"use strict";R.exports=e(48928)},13792:function(R,C,e){"use strict";var _=e(32016);_.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),R.exports=_},3920:function(R,C,e){"use strict";R.exports=e(43480)},25120:function(R,C,e){"use strict";R.exports=e(6296)},4340:function(R,C,e){"use strict";R.exports=e(7404)},86152:function(R,C,e){"use strict";R.exports=e(65456)},56816:function(R,C,e){"use strict";R.exports=e(22020)},89296:function(R,C,e){"use strict";R.exports=e(29928)},20260:function(R,C,e){"use strict";R.exports=e(75792)},32140:function(R,C,e){"use strict";R.exports=e(156)},84764:function(R,C,e){"use strict";R.exports=e(45499)},48824:function(R,C,e){"use strict";R.exports=e(3296)},69967:function(R,C,e){"use strict";R.exports=e(4184)},8363:function(R,C,e){"use strict";R.exports=e(36952)},86636:function(R,C,e){"use strict";R.exports=e(38983)},70192:function(R,C,e){"use strict";R.exports=e(11572)},81604:function(R,C,e){"use strict";R.exports=e(76924)},63796:function(R,C,e){"use strict";R.exports=e(62944)},89336:function(R,C,e){"use strict";R.exports=e(95443)},67484:function(R,C,e){"use strict";R.exports=e(34864)},97312:function(R,C,e){"use strict";R.exports=e(76272)},42192:function(R,C,e){"use strict";R.exports=e(97924)},29800:function(R,C,e){"use strict";R.exports=e(15436)},63560:function(R,C,e){"use strict";R.exports=e(5621)},89904:function(R,C,e){"use strict";R.exports=e(91304)},50248:function(R,C,e){"use strict";R.exports=e(41724)},65832:function(R,C,e){"use strict";R.exports=e(31991)},79440:function(R,C,e){"use strict";R.exports=e(22869)},13752:function(R,C,e){"use strict";R.exports=e(67776)},83096:function(R,C,e){"use strict";R.exports=e(95952)},72196:function(R){"use strict";R.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(R,C,e){"use strict";var _=e(72196),T=e(25376),r=e(33816),w=e(31780).templatedArray;e(36208),R.exports=w("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:T({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",r.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",r.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:T({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(23816).draw;function w(c){var o=c._fullLayout;_.filterVisible(o.annotations).forEach(function(t){var i=T.getFromId(c,t.xref),n=T.getFromId(c,t.yref),a=T.getRefType(t.xref),s=T.getRefType(t.yref);t._extremes={},a==="range"&&b(t,i),s==="range"&&b(t,n)})}function b(c,o){var t,i=o._id,n=i.charAt(0),a=c[n],s=c["a"+n],l=c[n+"ref"],u=c["a"+n+"ref"],p=c["_"+n+"padplus"],f=c["_"+n+"padminus"],m={x:1,y:-1}[n]*c[n+"shift"],h=3*c.arrowsize*c.arrowwidth||0,g=h+m,v=h-m,x=3*c.startarrowsize*c.arrowwidth||0,y=x+m,A=x-m;if(u===l){var d=T.findExtremes(o,[o.r2c(a)],{ppadplus:g,ppadminus:v}),S=T.findExtremes(o,[o.r2c(s)],{ppadplus:Math.max(p,y),ppadminus:Math.max(f,A)});t={min:[d.min[0],S.min[0]],max:[d.max[0],S.max[0]]}}else y=s?y+s:y,A=s?A-s:A,t=T.findExtremes(o,[o.r2c(a)],{ppadplus:Math.max(p,g,y),ppadminus:Math.max(f,v,A)});c._extremes[i]=t}R.exports=function(c){var o=c._fullLayout;if(_.filterVisible(o.annotations).length&&c._fullData.length)return _.syncOrAsync([r,w],c)}},42300:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(31780).arrayEditor;function w(c,o){var t,i,n,a,s,l,u,p=c._fullLayout.annotations,f=[],m=[],h=[],g=(o||[]).length;for(t=0;t<p.length;t++)if(a=(n=p[t]).clicktoshow){for(i=0;i<g;i++)if(l=(s=o[i]).xaxis,u=s.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(s.x)===b(n._xclick,l)&&u.d2r(s.y)===b(n._yclick,u)){(n.visible?a==="onout"?m:h:f).push(t);break}i===g&&n.visible&&a==="onout"&&m.push(t)}return{on:f,off:m,explicitOff:h}}function b(c,o){return o.type==="log"?o.l2r(c):o.d2r(c)}R.exports={hasClickToShow:function(c,o){var t=w(c,o);return t.on.length>0||t.explicitOff.length>0},onClick:function(c,o){var t,i,n=w(c,o),a=n.on,s=n.off.concat(n.explicitOff),l={},u=c._fullLayout.annotations;if(a.length||s.length){for(t=0;t<a.length;t++)(i=r(c.layout,"annotations",u[a[t]])).modifyItem("visible",!0),_.extendFlat(l,i.getUpdateObj());for(t=0;t<s.length;t++)(i=r(c.layout,"annotations",u[s[t]])).modifyItem("visible",!1),_.extendFlat(l,i.getUpdateObj());return T.call("update",c,{},l)}}}},87192:function(R,C,e){"use strict";var _=e(3400),T=e(76308);R.exports=function(r,w,b,c){c("opacity");var o=c("bgcolor"),t=c("bordercolor"),i=T.opacity(t);c("borderpad");var n=c("borderwidth"),a=c("showarrow");if(c("text",a?" ":b._dfltTitle.annotation),c("textangle"),_.coerceFont(c,"font",b.font),c("width"),c("align"),c("height")&&c("valign"),a){var s,l,u=c("arrowside");u.indexOf("end")!==-1&&(s=c("arrowhead"),l=c("arrowsize")),u.indexOf("start")!==-1&&(c("startarrowhead",s),c("startarrowsize",l)),c("arrowcolor",i?w.bordercolor:T.defaultLine),c("arrowwidth",2*(i&&n||1)),c("standoff"),c("startstandoff")}var p=c("hovertext"),f=b.hoverlabel||{};if(p){var m=c("hoverlabel.bgcolor",f.bgcolor||(T.opacity(o)?T.rgb(o):T.defaultLine)),h=c("hoverlabel.bordercolor",f.bordercolor||T.contrast(m)),g=_.extendFlat({},f.font);g.color||(g.color=h),_.coerceFont(c,"hoverlabel.font",g)}c("captureevents",!!p)}},26828:function(R,C,e){"use strict";var _=e(38248),T=e(36896);R.exports=function(r,w,b,c){w=w||{};var o=b==="log"&&w.type==="linear",t=b==="linear"&&w.type==="log";if(o||t)for(var i,n,a=r._fullLayout.annotations,s=w._id.charAt(0),l=0;l<a.length;l++)i=a[l],n="annotations["+l+"].",i[s+"ref"]===w._id&&u(s),i["a"+s+"ref"]===w._id&&u("a"+s);function u(p){var f=i[p],m=null;m=o?T(f,w.range):Math.pow(10,f),_(m)||(m=null),c(n+p,m)}}},45216:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(51272),w=e(87192),b=e(13916);function c(o,t,i){function n(S,k){return _.coerce(o,t,b,S,k)}var a=n("visible"),s=n("clicktoshow");if(a||s){w(o,t,i,n);for(var l=t.showarrow,u=["x","y"],p=[-10,-30],f={_fullLayout:i},m=0;m<2;m++){var h=u[m],g=T.coerceRef(o,t,f,h,"","paper");if(g!=="paper"&&T.getFromId(f,g)._annIndices.push(t._index),T.coercePosition(t,f,n,g,h,.5),l){var v="a"+h,x=T.coerceRef(o,t,f,v,"pixel",["pixel","paper"]);x!=="pixel"&&x!==g&&(x=t[v]="pixel");var y=x==="pixel"?p[m]:.4;T.coercePosition(t,f,n,x,v,y)}n(h+"anchor"),n(h+"shift")}if(_.noneOrAll(o,t,["x","y"]),l&&_.noneOrAll(o,t,["ax","ay"]),s){var A=n("xclick"),d=n("yclick");t._xclick=A===void 0?t.x:T.cleanPosition(A,f,t.xref),t._yclick=d===void 0?t.y:T.cleanPosition(d,f,t.yref)}}}R.exports=function(o,t){r(o,t,{name:"annotations",handleItemDefaults:c})}},23816:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(7316),w=e(3400),b=w.strTranslate,c=e(54460),o=e(76308),t=e(43616),i=e(93024),n=e(72736),a=e(93972),s=e(86476),l=e(31780).arrayEditor,u=e(33652);function p(h,g){var v=h._fullLayout.annotations[g]||{},x=c.getFromId(h,v.xref),y=c.getFromId(h,v.yref);x&&x.setScale(),y&&y.setScale(),m(h,v,g,!1,x,y)}function f(h,g,v,x,y){var A=y[v],d=y[v+"ref"],S=v.indexOf("y")!==-1,k=c.getRefType(d)==="domain",E=S?x.h:x.w;return h?k?A+(S?-g:g)/h._length:h.p2r(h.r2p(A)+g):A+(S?-g:g)/E}function m(h,g,v,x,y,A){var d,S,k=h._fullLayout,E=h._fullLayout._size,L=h._context.edits;x?(d="annotation-"+x,S=x+".annotations"):(d="annotation",S="annotations");var O=l(h.layout,S,g),P=O.modifyBase,F=O.modifyItem,U=O.getUpdateObj;k._infolayer.selectAll("."+d+'[data-index="'+v+'"]').remove();var I="clip"+k._uid+"_ann"+v;if(g._input&&g.visible!==!1){var N={x:{},y:{}},W=+g.textangle||0,B=k._infolayer.append("g").classed(d,!0).attr("data-index",String(v)).style("opacity",g.opacity),V=B.append("g").classed("annotation-text-g",!0),q=L[g.showarrow?"annotationTail":"annotationPosition"],ne=g.captureevents||L.annotationText||q,$=V.append("g").style("pointer-events",ne?"all":null).call(a,"pointer").on("click",function(){h._dragging=!1,h.emit("plotly_clickannotation",me(_.event))});g.hovertext&&$.on("mouseover",function(){var ge=g.hoverlabel,ke=ge.font,Ce=this.getBoundingClientRect(),de=h.getBoundingClientRect();i.loneHover({x0:Ce.left-de.left,x1:Ce.right-de.left,y:(Ce.top+Ce.bottom)/2-de.top,text:g.hovertext,color:ge.bgcolor,borderColor:ge.bordercolor,fontFamily:ke.family,fontSize:ke.size,fontColor:ke.color,fontWeight:ke.weight,fontStyle:ke.style,fontVariant:ke.variant,fontShadow:ke.fontShadow,fontLineposition:ke.fontLineposition,fontTextcase:ke.fontTextcase},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:h})}).on("mouseout",function(){i.loneUnhover(k._hoverlayer.node())});var K=g.borderwidth,ee=g.borderpad,J=K+ee,Z=$.append("rect").attr("class","bg").style("stroke-width",K+"px").call(o.stroke,g.bordercolor).call(o.fill,g.bgcolor),te=g.width||g.height,oe=k._topclips.selectAll("#"+I).data(te?[0]:[]);oe.enter().append("clipPath").classed("annclip",!0).attr("id",I).append("rect"),oe.exit().remove();var se=g.font,ce=k._meta?w.templateString(g.text,k._meta):g.text,ye=$.append("text").classed("annotation-text",!0).text(ce);L.annotationText?ye.call(n.makeEditable,{delegate:$,gd:h}).call(fe).on("edit",function(ge){g.text=ge,this.call(fe),F("text",ge),y&&y.autorange&&P(y._name+".autorange",!0),A&&A.autorange&&P(A._name+".autorange",!0),T.call("_guiRelayout",h,U())}):ye.call(fe)}else _.selectAll("#"+I).remove();function me(ge){var ke={index:v,annotation:g._input,fullAnnotation:g,event:ge};return x&&(ke.subplotId=x),ke}function fe(ge){return ge.call(t.font,se).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"}),n.convertToTspans(ge,h,pe),ge}function pe(){var ge=ye.selectAll("a");ge.size()===1&&ge.text()===ye.text()&&$.insert("a",":first-child").attr({"xlink:xlink:href":ge.attr("xlink:href"),"xlink:xlink:show":ge.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Z.node());var ke=$.select(".annotation-text-math-group"),Ce=!ke.empty(),de=t.bBox((Ce?ke:ye).node()),ae=de.width,re=de.height,he=g.width||ae,Se=g.height||re,xe=Math.round(he+2*J),Te=Math.round(Se+2*J);function Ae(dt,it){return it==="auto"&&(it=dt<.3333333333333333?"left":dt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[it]}for(var Pe=!1,De=["x","y"],ve=0;ve<De.length;ve++){var we,Ee,Fe,Le,je,Ge=De[ve],Je=g[Ge+"ref"]||Ge,rt=g["a"+Ge+"ref"],ot={x:y,y:A}[Ge],yt=(W+(Ge==="x"?0:-90))*Math.PI/180,_t=xe*Math.cos(yt),mt=Te*Math.sin(yt),tt=Math.abs(_t)+Math.abs(mt),Qe=g[Ge+"anchor"],Dt=g[Ge+"shift"]*(Ge==="x"?1:-1),zt=N[Ge],pt=c.getRefType(Je);if(ot&&pt!=="domain"){var vt=ot.r2fraction(g[Ge]);(vt<0||vt>1)&&(rt===Je?((vt=ot.r2fraction(g["a"+Ge]))<0||vt>1)&&(Pe=!0):Pe=!0),we=ot._offset+ot.r2p(g[Ge]),Le=.5}else{var We=pt==="domain";Ge==="x"?(Fe=g[Ge],we=We?ot._offset+ot._length*Fe:we=E.l+E.w*Fe):(Fe=1-g[Ge],we=We?ot._offset+ot._length*Fe:we=E.t+E.h*Fe),Le=g.showarrow?.5:Fe}if(g.showarrow){zt.head=we;var Ze=g["a"+Ge];if(je=_t*Ae(.5,g.xanchor)-mt*Ae(.5,g.yanchor),rt===Je){var Ne=c.getRefType(rt);Ne==="domain"?(Ge==="y"&&(Ze=1-Ze),zt.tail=ot._offset+ot._length*Ze):Ne==="paper"?Ge==="y"?(Ze=1-Ze,zt.tail=E.t+E.h*Ze):zt.tail=E.l+E.w*Ze:zt.tail=ot._offset+ot.r2p(Ze),Ee=je}else zt.tail=we+Ze,Ee=je+Ze;zt.text=zt.tail+je;var Xe=k[Ge==="x"?"width":"height"];if(Je==="paper"&&(zt.head=w.constrain(zt.head,1,Xe-1)),rt==="pixel"){var st=-Math.max(zt.tail-3,zt.text),lt=Math.min(zt.tail+3,zt.text)-Xe;st>0?(zt.tail+=st,zt.text+=st):lt>0&&(zt.tail-=lt,zt.text-=lt)}zt.tail+=Dt,zt.head+=Dt}else Ee=je=tt*Ae(Le,Qe),zt.text=we+je;zt.text+=Dt,je+=Dt,Ee+=Dt,g["_"+Ge+"padplus"]=tt/2+Ee,g["_"+Ge+"padminus"]=tt/2-Ee,g["_"+Ge+"size"]=tt,g["_"+Ge+"shift"]=je}if(Pe)$.remove();else{var xt=0,bt=0;if(g.align!=="left"&&(xt=(he-ae)*(g.align==="center"?.5:1)),g.valign!=="top"&&(bt=(Se-re)*(g.valign==="middle"?.5:1)),Ce)ke.select("svg").attr({x:J+xt-1,y:J+bt}).call(t.setClipUrl,te?I:null,h);else{var Ve=J+bt-de.top,Be=J+xt-de.left;ye.call(n.positionText,Be,Ve).call(t.setClipUrl,te?I:null,h)}oe.select("rect").call(t.setRect,J,J,he,Se),Z.call(t.setRect,K/2,K/2,xe-K,Te-K),$.call(t.setTranslate,Math.round(N.x.text-xe/2),Math.round(N.y.text-Te/2)),V.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var at,ht=function(dt,it){B.selectAll(".annotation-arrow-g").remove();var kt=N.x.head,Tt=N.y.head,St=N.x.tail+dt,wt=N.y.tail+it,At=N.x.text+dt,Ft=N.y.text+it,jt=w.rotationXYMatrix(W,At,Ft),rn=w.apply2DTransform(jt),nn=w.apply2DTransform2(jt),on=+Z.attr("width"),Ht=+Z.attr("height"),$t=At-.5*on,bn=$t+on,ln=Ft-.5*Ht,Kt=ln+Ht,fn=[[$t,ln,$t,Kt],[$t,Kt,bn,Kt],[bn,Kt,bn,ln],[bn,ln,$t,ln]].map(nn);if(!fn.reduce(function(jn,Kn){return jn^!!w.segmentsIntersect(kt,Tt,kt+1e6,Tt+1e6,Kn[0],Kn[1],Kn[2],Kn[3])},!1)){fn.forEach(function(jn){var Kn=w.segmentsIntersect(St,wt,kt,Tt,jn[0],jn[1],jn[2],jn[3]);Kn&&(St=Kn.x,wt=Kn.y)});var en=g.arrowwidth,un=g.arrowcolor,An=g.arrowside,wn=B.append("g").style({opacity:o.opacity(un)}).classed("annotation-arrow-g",!0),On=wn.append("path").attr("d","M"+St+","+wt+"L"+kt+","+Tt).style("stroke-width",en+"px").call(o.stroke,o.rgb(un));if(u(On,An,g),L.annotationPosition&&On.node().parentNode&&!x){var Tn=kt,Cn=Tt;if(g.standoff){var Bn=Math.sqrt(Math.pow(kt-St,2)+Math.pow(Tt-wt,2));Tn+=g.standoff*(St-kt)/Bn,Cn+=g.standoff*(wt-Tt)/Bn}var Xn,cr,Yn=wn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(St-Tn)+","+(wt-Cn),transform:b(Tn,Cn)}).style("stroke-width",en+6+"px").call(o.stroke,"rgba(0,0,0,0)").call(o.fill,"rgba(0,0,0,0)");s.init({element:Yn.node(),gd:h,prepFn:function(){var jn=t.getTranslate($);Xn=jn.x,cr=jn.y,y&&y.autorange&&P(y._name+".autorange",!0),A&&A.autorange&&P(A._name+".autorange",!0)},moveFn:function(jn,Kn){var or=rn(Xn,cr),Qt=or[0]+jn,an=or[1]+Kn;$.call(t.setTranslate,Qt,an),F("x",f(y,jn,"x",E,g)),F("y",f(A,Kn,"y",E,g)),g.axref===g.xref&&F("ax",f(y,jn,"ax",E,g)),g.ayref===g.yref&&F("ay",f(A,Kn,"ay",E,g)),wn.attr("transform",b(jn,Kn)),V.attr({transform:"rotate("+W+","+Qt+","+an+")"})},doneFn:function(){T.call("_guiRelayout",h,U());var jn=document.querySelector(".js-notes-box-panel");jn&&jn.redraw(jn.selectedObj)}})}}};g.showarrow&&ht(0,0),q&&s.init({element:$.node(),gd:h,prepFn:function(){at=V.attr("transform")},moveFn:function(dt,it){var kt="pointer";if(g.showarrow)g.axref===g.xref?F("ax",f(y,dt,"ax",E,g)):F("ax",g.ax+dt),g.ayref===g.yref?F("ay",f(A,it,"ay",E.w,g)):F("ay",g.ay+it),ht(dt,it);else{if(x)return;var Tt,St;if(y)Tt=f(y,dt,"x",E,g);else{var wt=g._xsize/E.w,At=g.x+(g._xshift-g.xshift)/E.w-wt/2;Tt=s.align(At+dt/E.w,wt,0,1,g.xanchor)}if(A)St=f(A,it,"y",E,g);else{var Ft=g._ysize/E.h,jt=g.y-(g._yshift+g.yshift)/E.h-Ft/2;St=s.align(jt-it/E.h,Ft,0,1,g.yanchor)}F("x",Tt),F("y",St),y&&A||(kt=s.getCursor(y?.5:Tt,A?.5:St,g.xanchor,g.yanchor))}V.attr({transform:b(dt,it)+at}),a($,kt)},clickFn:function(dt,it){g.captureevents&&h.emit("plotly_clickannotation",me(it))},doneFn:function(){a($),T.call("_guiRelayout",h,U());var dt=document.querySelector(".js-notes-box-panel");dt&&dt.redraw(dt.selectedObj)}})}}}R.exports={draw:function(h){var g=h._fullLayout;g._infolayer.selectAll(".annotation").remove();for(var v=0;v<g.annotations.length;v++)g.annotations[v].visible&&p(h,v);return r.previousPromises(h)},drawOne:p,drawRaw:m}},33652:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(72196),w=e(3400),b=w.strScale,c=w.strRotate,o=w.strTranslate;R.exports=function(t,i,n){var a,s,l,u,p=t.node(),f=r[n.arrowhead||0],m=r[n.startarrowhead||0],h=(n.arrowwidth||1)*(n.arrowsize||1),g=(n.arrowwidth||1)*(n.startarrowsize||1),v=i.indexOf("start")>=0,x=i.indexOf("end")>=0,y=f.backoff*h+n.standoff,A=m.backoff*g+n.startstandoff;if(p.nodeName==="line"){a={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var d=a.x-s.x,S=a.y-s.y;if(u=(l=Math.atan2(S,d))+Math.PI,y&&A&&y+A>Math.sqrt(d*d+S*S))return void B();if(y){if(y*y>d*d+S*S)return void B();var k=y*Math.cos(l),E=y*Math.sin(l);s.x+=k,s.y+=E,t.attr({x2:s.x,y2:s.y})}if(A){if(A*A>d*d+S*S)return void B();var L=A*Math.cos(l),O=A*Math.sin(l);a.x-=L,a.y-=O,t.attr({x1:a.x,y1:a.y})}}else if(p.nodeName==="path"){var P=p.getTotalLength(),F="";if(P<y+A)return void B();var U=p.getPointAtLength(0),I=p.getPointAtLength(.1);l=Math.atan2(U.y-I.y,U.x-I.x),a=p.getPointAtLength(Math.min(A,P)),F="0px,"+A+"px,";var N=p.getPointAtLength(P),W=p.getPointAtLength(P-.1);u=Math.atan2(N.y-W.y,N.x-W.x),s=p.getPointAtLength(Math.max(0,P-y)),F+=P-(F?A+y:y)+"px,"+P+"px",t.style("stroke-dasharray",F)}function B(){t.style("stroke-dasharray","0px,100px")}function V(q,ne,$,K){q.path&&(q.noRotate&&($=0),_.select(p.parentNode).append("path").attr({class:t.attr("class"),d:q.path,transform:o(ne.x,ne.y)+c(180*$/Math.PI)+b(K)}).style({fill:T.rgb(n.arrowcolor),"stroke-width":0}))}v&&V(m,a,l,g),x&&V(f,s,u,h)}},79180:function(R,C,e){"use strict";var _=e(23816),T=e(42300);R.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:_.draw,drawOne:_.drawOne,drawRaw:_.drawRaw,hasClickToShow:T.hasClickToShow,onClick:T.onClick,convertCoords:e(26828)}},45899:function(R,C,e){"use strict";var _=e(13916),T=e(67824).overrideAll,r=e(31780).templatedArray;R.exports=T(r("annotation",{visible:_.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:_.xanchor,xshift:_.xshift,yanchor:_.yanchor,yshift:_.yshift,text:_.text,textangle:_.textangle,font:_.font,width:_.width,height:_.height,opacity:_.opacity,align:_.align,valign:_.valign,bgcolor:_.bgcolor,bordercolor:_.bordercolor,borderpad:_.borderpad,borderwidth:_.borderwidth,showarrow:_.showarrow,arrowcolor:_.arrowcolor,arrowhead:_.arrowhead,startarrowhead:_.startarrowhead,arrowside:_.arrowside,arrowsize:_.arrowsize,startarrowsize:_.startarrowsize,arrowwidth:_.arrowwidth,standoff:_.standoff,startstandoff:_.startstandoff,hovertext:_.hovertext,hoverlabel:_.hoverlabel,captureevents:_.captureevents}),"calc","from-root")},42456:function(R,C,e){"use strict";var _=e(3400),T=e(54460);function r(w,b){var c=b.fullSceneLayout.domain,o=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};w._xa={},_.extendFlat(w._xa,t),T.setConvert(w._xa),w._xa._offset=o.l+c.x[0]*o.w,w._xa.l2p=function(){return .5*(1+w._pdata[0]/w._pdata[3])*o.w*(c.x[1]-c.x[0])},w._ya={},_.extendFlat(w._ya,t),T.setConvert(w._ya),w._ya._offset=o.t+(1-c.y[1])*o.h,w._ya.l2p=function(){return .5*(1-w._pdata[1]/w._pdata[3])*o.h*(c.y[1]-c.y[0])}}R.exports=function(w){for(var b=w.fullSceneLayout.annotations,c=0;c<b.length;c++)r(b[c],w);w.fullLayout._infolayer.selectAll(".annotation-"+w.id).remove()}},52808:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(51272),w=e(87192),b=e(45899);function c(o,t,i,n){function a(l,u){return _.coerce(o,t,b,l,u)}function s(l){var u=l+"axis",p={_fullLayout:{}};return p._fullLayout[u]=i[u],T.coercePosition(t,p,a,l,l,.5)}a("visible")&&(w(o,t,n.fullLayout,a),s("x"),s("y"),s("z"),_.noneOrAll(o,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",a("ax",-10),a("ay",-30),_.noneOrAll(o,t,["ax","ay"])))}R.exports=function(o,t,i){r(o,t,{name:"annotations",handleItemDefaults:c,fullLayout:i.fullLayout})}},71836:function(R,C,e){"use strict";var _=e(23816).drawRaw,T=e(94424),r=["x","y","z"];R.exports=function(w){for(var b=w.fullSceneLayout,c=w.dataScale,o=b.annotations,t=0;t<o.length;t++){for(var i=o[t],n=!1,a=0;a<3;a++){var s=r[a],l=i[s],u=b[s+"axis"].r2fraction(l);if(u<0||u>1){n=!0;break}}n?w.fullLayout._infolayer.select(".annotation-"+w.id+'[data-index="'+t+'"]').remove():(i._pdata=T(w.glplot.cameraParams,[b.xaxis.r2l(i.x)*c[0],b.yaxis.r2l(i.y)*c[1],b.zaxis.r2l(i.z)*c[2]]),_(w.graphDiv,i,t,w.id,i._xa,i._ya))}}},56864:function(R,C,e){"use strict";var _=e(24040),T=e(3400);R.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(r,w){var b=_.subplotsRegistry.gl3d;if(b)for(var c=b.attrRegex,o=Object.keys(r),t=0;t<o.length;t++){var i=o[t];c.test(i)&&(r[i].annotations||[]).length&&(T.pushUnique(w._basePlotModules,b),T.pushUnique(w._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(R,C,e){"use strict";R.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(R,C,e){"use strict";var _=e(54976),T=e(3400),r=e(39032),w=r.EPOCHJD,b=r.ONEDAY,c={valType:"enumerated",values:T.sortObjectKeys(_.calendars),editType:"calc",dflt:"gregorian"},o=function(h,g,v,x){var y={};return y[v]=c,T.coerce(h,g,y,v,x)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function a(h){var g=n[h];return g||(n[h]=_.instance(h))}function s(h){return T.extendFlat({},c,{description:h})}function l(h){return"Sets the calendar system to use with `"+h+"` date data."}var u={xcalendar:s(l("x"))},p=T.extendFlat({},u,{ycalendar:s(l("y"))}),f=T.extendFlat({},p,{zcalendar:s(l("z"))}),m=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));R.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:f,surface:f,mesh3d:f,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:m},yaxis:{calendar:m},scene:{xaxis:{calendar:m},yaxis:{calendar:m},zaxis:{calendar:m}},polar:{radialaxis:{calendar:m}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:c,handleDefaults:o,handleTraceDefaults:function(h,g,v,x){for(var y=0;y<v.length;y++)o(h,g,v[y]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:a,worldCalFmt:function(h,g,v){for(var x,y,A,d,S,k=Math.floor((g+.05)/b)+w,E=a(v).fromJD(k),L=0;(L=h.indexOf("%",L))!==-1;)(x=h.charAt(L+1))==="0"||x==="-"||x==="_"?(A=3,y=h.charAt(L+2),x==="_"&&(x="-")):(y=x,x="0",A=2),(d=i[y])?(S=d===t?t:E.formatDate(d[x]),h=h.substr(0,L)+S+h.substr(L+A),L+=S.length):L+=A;return h}}},22548:function(R,C){"use strict";C.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],C.defaultLine="#444",C.lightLine="#eee",C.background="#fff",C.borderLine="#BEC8D9",C.lightFraction=90.9090909090909},76308:function(R,C,e){"use strict";var _=e(49760),T=e(38248),r=e(38116).isTypedArray,w=R.exports={},b=e(22548);w.defaults=b.defaults;var c=w.defaultLine=b.defaultLine;w.lightLine=b.lightLine;var o=w.background=b.background;function t(i){if(T(i)||typeof i!="string")return i;var n=i.trim();if(n.substr(0,3)!=="rgb")return i;var a=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!a)return i;var s=a[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&s.length===4;if(!l&&s.length!==3)return i;for(var u=0;u<s.length;u++){if(!s[u].length||(s[u]=Number(s[u]),!(s[u]>=0)))return i;if(u===3)s[u]>1&&(s[u]=1);else if(s[u]>=1)return i}var p=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return l?"rgba("+p+", "+s[3]+")":"rgb("+p+")"}w.tinyRGB=function(i){var n=i.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},w.rgb=function(i){return w.tinyRGB(_(i))},w.opacity=function(i){return i?_(i).getAlpha():0},w.addOpacity=function(i,n){var a=_(i).toRgb();return"rgba("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+", "+n+")"},w.combine=function(i,n){var a=_(i).toRgb();if(a.a===1)return _(i).toRgbString();var s=_(n||o).toRgb(),l=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},u={r:l.r*(1-a.a)+a.r*a.a,g:l.g*(1-a.a)+a.g*a.a,b:l.b*(1-a.a)+a.b*a.a};return _(u).toRgbString()},w.interpolate=function(i,n,a){var s=_(i).toRgb(),l=_(n).toRgb(),u={r:a*s.r+(1-a)*l.r,g:a*s.g+(1-a)*l.g,b:a*s.b+(1-a)*l.b};return _(u).toRgbString()},w.contrast=function(i,n,a){var s=_(i);return s.getAlpha()!==1&&(s=_(w.combine(i,o))),(s.isDark()?n?s.lighten(n):o:a?s.darken(a):c).toString()},w.stroke=function(i,n){var a=_(n);i.style({stroke:w.tinyRGB(a),"stroke-opacity":a.getAlpha()})},w.fill=function(i,n){var a=_(n);i.style({fill:w.tinyRGB(a),"fill-opacity":a.getAlpha()})},w.clean=function(i){if(i&&typeof i=="object"){var n,a,s,l,u=Object.keys(i);for(n=0;n<u.length;n++)if(l=i[s=u[n]],s.substr(s.length-5)==="color")if(Array.isArray(l))for(a=0;a<l.length;a++)l[a]=t(l[a]);else i[s]=t(l);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(l))for(a=0;a<l.length;a++)Array.isArray(l[a])&&(l[a][1]=t(l[a][1]));else if(Array.isArray(l)){var p=l[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(a=0;a<l.length;a++)w.clean(l[a])}else l&&typeof l=="object"&&!r(l)&&w.clean(l)}}},42996:function(R,C,e){"use strict";var _=e(94724),T=e(25376),r=e(92880).extendFlat,w=e(67824).overrideAll;R.exports=w({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_.linecolor,outlinewidth:_.linewidth,bordercolor:_.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_.minor.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:r({},_.ticks,{dflt:""}),ticklabeloverflow:r({},_.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,ticklabelstep:_.ticklabelstep,showticklabels:_.showticklabels,labelalias:_.labelalias,tickfont:T({}),tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,tickprefix:_.tickprefix,showtickprefix:_.showtickprefix,ticksuffix:_.ticksuffix,showticksuffix:_.showticksuffix,separatethousands:_.separatethousands,exponentformat:_.exponentformat,minexponent:_.minexponent,showexponent:_.showexponent,title:{text:{valType:"string"},font:T({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:T({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(R){"use strict";R.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(R,C,e){"use strict";var _=e(3400),T=e(31780),r=e(26332),w=e(25404),b=e(95936),c=e(42568),o=e(42996);R.exports=function(t,i,n){var a=T.newContainer(i,"colorbar"),s=t.colorbar||{};function l(F,U){return _.coerce(s,a,o,F,U)}var u=n.margin||{t:0,b:0,l:0,r:0},p=n.width-u.l-u.r,f=n.height-u.t-u.b,m=l("orientation")==="v",h=l("thicknessmode");l("thickness",h==="fraction"?30/(m?p:f):30);var g=l("lenmode");l("len",g==="fraction"?1:m?f:p);var v,x,y,A=l("yref")==="paper",d=l("xref")==="paper",S="left";m?(y="middle",S=d?"left":"right",v=d?1.02:1,x=.5):(y=A?"bottom":"top",S="center",v=.5,x=A?1.02:1),_.coerce(s,a,{x:{valType:"number",min:d?-2:0,max:d?3:1,dflt:v}},"x"),_.coerce(s,a,{y:{valType:"number",min:A?-2:0,max:A?3:1,dflt:x}},"y"),l("xanchor",S),l("xpad"),l("yanchor",y),l("ypad"),_.noneOrAll(s,a,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var k=_.coerce(s,a,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),r(s,a,l,"linear");var E=n.font,L={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:E};k.indexOf("inside")!==-1&&(L.bgColor="black"),c(s,a,l,"linear",L),b(s,a,l,"linear",L),w(s,a,l,"linear",L),l("title.text",n._dfltTitle.colorbar);var O=a.showticklabels?a.tickfont:E,P=_.extendFlat({},E,{family:O.family,size:_.bigFont(O.size)});_.coerceFont(l,"title.font",P),l("title.side",m?"top":"right")}},37848:function(R,C,e){"use strict";var _=e(33428),T=e(49760),r=e(7316),w=e(24040),b=e(54460),c=e(86476),o=e(3400),t=o.strTranslate,i=e(92880).extendFlat,n=e(93972),a=e(43616),s=e(76308),l=e(81668),u=e(72736),p=e(94288).flipScale,f=e(28336),m=e(37668),h=e(94724),g=e(84284),v=g.LINE_SPACING,x=g.FROM_TL,y=g.FROM_BR,A=e(63964).cn;R.exports={draw:function(d){var S=d._fullLayout._infolayer.selectAll("g."+A.colorbar).data(function(k){var E,L,O,P,F=k._fullLayout,U=k.calcdata,I=[];function N(te){return i(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof P.calc=="function"?P.calc(k,O,E):(E._fillgradient=L.reversescale?p(L.colorscale):L.colorscale,E._zrange=[L[P.min],L[P.max]])}for(var B=0;B<U.length;B++){var V=U[B];if((O=V[0].trace)._module){var q=O._module.colorbar;if(O.visible===!0&&q)for(var ne=Array.isArray(q),$=ne?q:[q],K=0;K<$.length;K++){var ee=(P=$[K]).container;(L=ee?O[ee]:O)&&L.showscale&&((E=N(L.colorbar))._id="cb"+O.uid+(ne&&ee?"-"+ee:""),E._traceIndex=O.index,E._propPrefix=(ee?ee+".":"")+"colorbar.",E._meta=O._meta,W(),I.push(E))}}}for(var J in F._colorAxes)if((L=F[J]).showscale){var Z=F._colorAxes[J];(E=N(L.colorbar))._id="cb"+J,E._propPrefix=J+".colorbar.",E._meta=F._meta,P={min:"cmin",max:"cmax"},Z[0]!=="heatmap"&&(O=Z[1],P.calc=O._module.colorbar.calc),W(),I.push(E)}return I}(d),function(k){return k._id});S.enter().append("g").attr("class",function(k){return k._id}).classed(A.colorbar,!0),S.each(function(k){var E=_.select(this);o.ensureSingle(E,"rect",A.cbbg),o.ensureSingle(E,"g",A.cbfills),o.ensureSingle(E,"g",A.cblines),o.ensureSingle(E,"g",A.cbaxis,function(O){O.classed(A.crisp,!0)}),o.ensureSingle(E,"g",A.cbtitleunshift,function(O){O.append("g").classed(A.cbtitle,!0)}),o.ensureSingle(E,"rect",A.cboutline);var L=function(O,P,F){var U=P.orientation==="v",I=P.len,N=P.lenmode,W=P.thickness,B=P.thicknessmode,V=P.outlinewidth,q=P.borderwidth,ne=P.bgcolor,$=P.xanchor,K=P.yanchor,ee=P.xpad,J=P.ypad,Z=P.x,te=U?P.y:1-P.y,oe=P.yref==="paper",se=P.xref==="paper",ce=F._fullLayout,ye=ce._size,me=P._fillcolor,fe=P._line,pe=P.title,ge=pe.side,ke=P._zrange||_.extent((typeof me=="function"?me:fe.color).domain()),Ce=typeof fe.color=="function"?fe.color:function(){return fe.color},de=typeof me=="function"?me:function(){return me},ae=P._levels,re=function(Ne,Xe,st){var lt,xt,bt=Xe._levels,Ve=[],Be=[],at=bt.end+bt.size/100,ht=bt.size,dt=1.001*st[0]-.001*st[1],it=1.001*st[1]-.001*st[0];for(xt=0;xt<1e5&&(lt=bt.start+xt*ht,!(ht>0?lt>=at:lt<=at));xt++)lt>dt&&lt<it&&Ve.push(lt);if(Xe._fillgradient)Be=[0];else if(typeof Xe._fillcolor=="function"){var kt=Xe._filllevels;if(kt)for(at=kt.end+kt.size/100,ht=kt.size,xt=0;xt<1e5&&(lt=kt.start+xt*ht,!(ht>0?lt>=at:lt<=at));xt++)lt>st[0]&&lt<st[1]&&Be.push(lt);else(Be=Ve.map(function(Tt){return Tt-bt.size/2})).push(Be[Be.length-1]+bt.size)}else Xe._fillcolor&&typeof Xe._fillcolor=="string"&&(Be=[0]);return bt.size<0&&(Ve.reverse(),Be.reverse()),{line:Ve,fill:Be}}(0,P,ke),he=re.fill,Se=re.line,xe=Math.round(W*(B==="fraction"?U?ye.w:ye.h:1)),Te=xe/(U?ye.w:ye.h),Ae=Math.round(I*(N==="fraction"?U?ye.h:ye.w:1)),Pe=Ae/(U?ye.h:ye.w),De=se?ye.w:F._fullLayout.width,ve=oe?ye.h:F._fullLayout.height,we=Math.round(U?Z*De+ee:te*ve+J),Ee={center:.5,right:1}[$]||0,Fe={top:1,middle:.5}[K]||0,Le=U?Z-Ee*Te:te-Fe*Te,je=U?te-Fe*Pe:Z-Ee*Pe,Ge=Math.round(U?ve*(1-je):De*je);P._lenFrac=Pe,P._thickFrac=Te,P._uFrac=Le,P._vFrac=je;var Je=P._axis=function(Ne,Xe,st){var lt=Ne._fullLayout,xt=Xe.orientation==="v",bt={type:"linear",range:st,tickmode:Xe.tickmode,nticks:Xe.nticks,tick0:Xe.tick0,dtick:Xe.dtick,tickvals:Xe.tickvals,ticktext:Xe.ticktext,ticks:Xe.ticks,ticklen:Xe.ticklen,tickwidth:Xe.tickwidth,tickcolor:Xe.tickcolor,showticklabels:Xe.showticklabels,labelalias:Xe.labelalias,ticklabelposition:Xe.ticklabelposition,ticklabeloverflow:Xe.ticklabeloverflow,ticklabelstep:Xe.ticklabelstep,tickfont:Xe.tickfont,tickangle:Xe.tickangle,tickformat:Xe.tickformat,exponentformat:Xe.exponentformat,minexponent:Xe.minexponent,separatethousands:Xe.separatethousands,showexponent:Xe.showexponent,showtickprefix:Xe.showtickprefix,tickprefix:Xe.tickprefix,showticksuffix:Xe.showticksuffix,ticksuffix:Xe.ticksuffix,title:Xe.title,showline:!0,anchor:"free",side:xt?"right":"bottom",position:1},Ve=xt?"y":"x",Be={type:"linear",_id:Ve+Xe._id},at={letter:Ve,font:lt.font,noAutotickangles:Ve==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:lt.calendar};function ht(dt,it){return o.coerce(bt,Be,h,dt,it)}return f(bt,Be,ht,at,lt),m(bt,Be,ht,at),Be}(F,P,ke);Je.position=Te+(U?Z+ee/ye.w:te+J/ye.h);var rt=["top","bottom"].indexOf(ge)!==-1;if(U&&rt&&(Je.title.side=ge,Je.titlex=Z+ee/ye.w,Je.titley=je+(pe.side==="top"?Pe-J/ye.h:J/ye.h)),U||rt||(Je.title.side=ge,Je.titley=te+J/ye.h,Je.titlex=je+ee/ye.w),fe.color&&P.tickmode==="auto"){Je.tickmode="linear",Je.tick0=ae.start;var ot=ae.size,yt=o.constrain(Ae/50,4,15)+1,_t=(ke[1]-ke[0])/((P.nticks||yt)*ot);if(_t>1){var mt=Math.pow(10,Math.floor(Math.log(_t)/Math.LN10));ot*=mt*o.roundUp(_t/mt,[2,5,10]),(Math.abs(ae.start)/ae.size+1e-6)%1<2e-6&&(Je.tick0=0)}Je.dtick=ot}Je.domain=U?[je+J/ye.h,je+Pe-J/ye.h]:[je+ee/ye.w,je+Pe-ee/ye.w],Je.setScale(),O.attr("transform",t(Math.round(ye.l),Math.round(ye.t)));var tt,Qe=O.select("."+A.cbtitleunshift).attr("transform",t(-Math.round(ye.l),-Math.round(ye.t))),Dt=Je.ticklabelposition,zt=Je.title.font.size,pt=O.select("."+A.cbaxis),vt=0,We=0;function Ze(Ne,Xe){var st={propContainer:Je,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ce._dfltTitle.colorbar,containerGroup:O.select("."+A.cbtitle)},lt=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;O.selectAll("."+lt+",."+lt+"-math-group").remove(),l.draw(F,Ne,i(st,Xe||{}))}return o.syncOrAsync([r.previousPromises,function(){var Ne,Xe;(U&&rt||!U&&!rt)&&(ge==="top"&&(Ne=ee+ye.l+De*Z,Xe=J+ye.t+ve*(1-je-Pe)+3+.75*zt),ge==="bottom"&&(Ne=ee+ye.l+De*Z,Xe=J+ye.t+ve*(1-je)-3-.25*zt),ge==="right"&&(Xe=J+ye.t+ve*te+3+.75*zt,Ne=ee+ye.l+De*je),Ze(Je._id+"title",{attributes:{x:Ne,y:Xe,"text-anchor":U?"start":"middle"}}))},function(){if(!U&&!rt||U&&rt){var Ne,Xe=O.select("."+A.cbtitle),st=Xe.select("text"),lt=[-V/2,V/2],xt=Xe.select(".h"+Je._id+"title-math-group").node(),bt=15.6;if(st.node()&&(bt=parseInt(st.node().style.fontSize,10)*v),xt?(Ne=a.bBox(xt),We=Ne.width,(vt=Ne.height)>bt&&(lt[1]-=(vt-bt)/2)):st.node()&&!st.classed(A.jsPlaceholder)&&(Ne=a.bBox(st.node()),We=Ne.width,vt=Ne.height),U){if(vt){if(vt+=5,ge==="top")Je.domain[1]-=vt/ye.h,lt[1]*=-1;else{Je.domain[0]+=vt/ye.h;var Ve=u.lineCount(st);lt[1]+=(1-Ve)*bt}Xe.attr("transform",t(lt[0],lt[1])),Je.setScale()}}else We&&(ge==="right"&&(Je.domain[0]+=(We+zt/2)/ye.w),Xe.attr("transform",t(lt[0],lt[1])),Je.setScale())}O.selectAll("."+A.cbfills+",."+A.cblines).attr("transform",U?t(0,Math.round(ye.h*(1-Je.domain[1]))):t(Math.round(ye.w*Je.domain[0]),0)),pt.attr("transform",U?t(0,Math.round(-ye.t)):t(Math.round(-ye.l),0));var Be=O.select("."+A.cbfills).selectAll("rect."+A.cbfill).attr("style","").data(he);Be.enter().append("rect").classed(A.cbfill,!0).attr("style",""),Be.exit().remove();var at=ke.map(Je.c2p).map(Math.round).sort(function(Tt,St){return Tt-St});Be.each(function(Tt,St){var wt=[St===0?ke[0]:(he[St]+he[St-1])/2,St===he.length-1?ke[1]:(he[St]+he[St+1])/2].map(Je.c2p).map(Math.round);U&&(wt[1]=o.constrain(wt[1]+(wt[1]>wt[0])?1:-1,at[0],at[1]));var At=_.select(this).attr(U?"x":"y",we).attr(U?"y":"x",_.min(wt)).attr(U?"width":"height",Math.max(xe,2)).attr(U?"height":"width",Math.max(_.max(wt)-_.min(wt),2));if(P._fillgradient)a.gradient(At,F,P._id,U?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var Ft=de(Tt).replace("e-","");At.attr("fill",T(Ft).toHexString())}});var ht=O.select("."+A.cblines).selectAll("path."+A.cbline).data(fe.color&&fe.width?Se:[]);ht.enter().append("path").classed(A.cbline,!0),ht.exit().remove(),ht.each(function(Tt){var St=we,wt=Math.round(Je.c2p(Tt))+fe.width/2%1;_.select(this).attr("d","M"+(U?St+","+wt:wt+","+St)+(U?"h":"v")+xe).call(a.lineGroupStyle,fe.width,Ce(Tt),fe.dash)}),pt.selectAll("g."+Je._id+"tick,path").remove();var dt=we+xe+(V||0)/2-(P.ticks==="outside"?1:0),it=b.calcTicks(Je),kt=b.getTickSigns(Je)[2];return b.drawTicks(F,Je,{vals:Je.ticks==="inside"?b.clipEnds(Je,it):it,layer:pt,path:b.makeTickPath(Je,dt,kt),transFn:b.makeTransTickFn(Je)}),b.drawLabels(F,Je,{vals:it,layer:pt,transFn:b.makeTransTickLabelFn(Je),labelFns:b.makeLabelFns(Je,dt)})},function(){if(U&&!rt||!U&&rt){var Ne,Xe,st=Je.position||0,lt=Je._offset+Je._length/2;if(ge==="right")Xe=lt,Ne=ye.l+De*st+10+zt*(Je.showticklabels?1:.5);else if(Ne=lt,ge==="bottom"&&(Xe=ye.t+ve*st+10+(Dt.indexOf("inside")===-1?Je.tickfont.size:0)+(Je.ticks!=="intside"&&P.ticklen||0)),ge==="top"){var xt=pe.text.split("<br>").length;Xe=ye.t+ve*st+10-xe-v*zt*xt}Ze((U?"h":"v")+Je._id+"title",{avoid:{selection:_.select(F).selectAll("g."+Je._id+"tick"),side:ge,offsetTop:U?0:ye.t,offsetLeft:U?ye.l:0,maxShift:U?ce.width:ce.height},attributes:{x:Ne,y:Xe,"text-anchor":"middle"},transform:{rotate:U?-90:0,offset:0}})}},r.previousPromises,function(){var Ne,Xe=xe+V/2;Dt.indexOf("inside")===-1&&(Ne=a.bBox(pt.node()),Xe+=U?Ne.width:Ne.height),tt=Qe.select("text");var st=0,lt=U&&ge==="top",xt=!U&&ge==="right",bt=0;if(tt.node()&&!tt.classed(A.jsPlaceholder)){var Ve,Be=Qe.select(".h"+Je._id+"title-math-group").node();Be&&(U&&rt||!U&&!rt)?(st=(Ne=a.bBox(Be)).width,Ve=Ne.height):(st=(Ne=a.bBox(Qe.node())).right-ye.l-(U?we:Ge),Ve=Ne.bottom-ye.t-(U?Ge:we),U||ge!=="top"||(Xe+=Ne.height,bt=Ne.height)),xt&&(tt.attr("transform",t(st/2+zt/2,0)),st*=2),Xe=Math.max(Xe,U?st:Ve)}var at=2*(U?ee:J)+Xe+q+V/2,ht=0;!U&&pe.text&&K==="bottom"&&te<=0&&(at+=ht=at/2,bt+=ht),ce._hColorbarMoveTitle=ht,ce._hColorbarMoveCBTitle=bt;var dt=q+V,it=(U?we:Ge)-dt/2-(U?ee:0),kt=(U?Ge:we)-(U?Ae:J+bt-ht);O.select("."+A.cbbg).attr("x",it).attr("y",kt).attr(U?"width":"height",Math.max(at-ht,2)).attr(U?"height":"width",Math.max(Ae+dt,2)).call(s.fill,ne).call(s.stroke,P.bordercolor).style("stroke-width",q);var Tt=xt?Math.max(st-10,0):0;O.selectAll("."+A.cboutline).attr("x",(U?we:Ge+ee)+Tt).attr("y",(U?Ge+J-Ae:we)+(lt?vt:0)).attr(U?"width":"height",Math.max(xe,2)).attr(U?"height":"width",Math.max(Ae-(U?2*J+vt:2*ee+Tt),2)).call(s.stroke,P.outlinecolor).style({fill:"none","stroke-width":V});var St=U?Ee*at:0,wt=U?0:(1-Fe)*at-bt;if(St=se?ye.l-St:-St,wt=oe?ye.t-wt:-wt,O.attr("transform",t(St,wt)),!U&&(q||T(ne).getAlpha()&&!T.equals(ce.paper_bgcolor,ne))){var At=pt.selectAll("text"),Ft=At[0].length,jt=O.select("."+A.cbbg).node(),rn=a.bBox(jt),nn=a.getTranslate(O);At.each(function(An,wn){var On=Ft-1;if(wn===0||wn===On){var Tn,Cn=a.bBox(this),Bn=a.getTranslate(this);if(wn===On){var Xn=Cn.right+Bn.x;(Tn=rn.right+nn.x+Ge-q-2+Z-Xn)>0&&(Tn=0)}else if(wn===0){var cr=Cn.left+Bn.x;(Tn=rn.left+nn.x+Ge+q+2-cr)<0&&(Tn=0)}Tn&&(Ft<3?this.setAttribute("transform","translate("+Tn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var on={},Ht=x[$],$t=y[$],bn=x[K],ln=y[K],Kt=at-xe;U?(N==="pixels"?(on.y=te,on.t=Ae*bn,on.b=Ae*ln):(on.t=on.b=0,on.yt=te+I*bn,on.yb=te-I*ln),B==="pixels"?(on.x=Z,on.l=at*Ht,on.r=at*$t):(on.l=Kt*Ht,on.r=Kt*$t,on.xl=Z-W*Ht,on.xr=Z+W*$t)):(N==="pixels"?(on.x=Z,on.l=Ae*Ht,on.r=Ae*$t):(on.l=on.r=0,on.xl=Z+I*Ht,on.xr=Z-I*$t),B==="pixels"?(on.y=1-te,on.t=at*bn,on.b=at*ln):(on.t=Kt*bn,on.b=Kt*ln,on.yt=te-W*bn,on.yb=te+W*ln));var fn=P.y<.5?"b":"t",en=P.x<.5?"l":"r";F._fullLayout._reservedMargin[P._id]={};var un={r:ce.width-it-St,l:it+on.r,b:ce.height-kt-wt,t:kt+on.b};se&&oe?r.autoMargin(F,P._id,on):se?F._fullLayout._reservedMargin[P._id][fn]=un[fn]:oe||U?F._fullLayout._reservedMargin[P._id][en]=un[en]:F._fullLayout._reservedMargin[P._id][fn]=un[fn]}],F)}(E,k,d);L&&L.then&&(d._promises||[]).push(L),d._context.edits.colorbarPosition&&function(O,P,F){var U,I,N,W=P.orientation==="v",B=F._fullLayout._size;c.init({element:O.node(),gd:F,prepFn:function(){U=O.attr("transform"),n(O)},moveFn:function(V,q){O.attr("transform",U+t(V,q)),I=c.align((W?P._uFrac:P._vFrac)+V/B.w,W?P._thickFrac:P._lenFrac,0,1,P.xanchor),N=c.align((W?P._vFrac:1-P._uFrac)-q/B.h,W?P._lenFrac:P._thickFrac,0,1,P.yanchor);var ne=c.getCursor(I,N,P.xanchor,P.yanchor);n(O,ne)},doneFn:function(){if(n(O),I!==void 0&&N!==void 0){var V={};V[P._propPrefix+"x"]=I,V[P._propPrefix+"y"]=N,P._traceIndex!==void 0?w.call("_guiRestyle",F,V,P._traceIndex):w.call("_guiRelayout",F,V)}}})}(E,k,d)}),S.exit().each(function(k){r.autoMargin(d,k._id)}).remove(),S.order()}}},90553:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T){return _.isPlainObject(T.colorbar)}},55080:function(R,C,e){"use strict";R.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(R,C,e){"use strict";var _=e(42996),T=e(53756).counter,r=e(95376),w=e(88304).scales;function b(c){return"`"+c+"`"}r(w),R.exports=function(c,o){c=c||"";var t,i=(o=o||{}).cLetter||"c",n=("onlyIfNumerical"in o&&o.onlyIfNumerical,"noScale"in o?o.noScale:c==="marker.line"),a="showScaleDflt"in o?o.showScaleDflt:i==="z",s=typeof o.colorscaleDflt=="string"?w[o.colorscaleDflt]:null,l=o.editTypeOverride||"",u=c?c+".":"";"colorAttr"in o?(t=o.colorAttr,o.colorAttr):b(u+(t={z:"z",c:"color"}[i]));var p=i+"auto",f=i+"min",m=i+"max",h=i+"mid",g=(b(u+p),b(u+f),b(u+m),{});g[f]=g[m]=void 0;var v={};v[p]=!1;var x={};return t==="color"&&(x.color={valType:"color",arrayOk:!0,editType:l||"style"},o.anim&&(x.color.anim=!0)),x[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},x[f]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},x[m]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},x[h]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},x.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:o.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(x.showscale={valType:"boolean",dflt:a,editType:"calc"},x.colorbar=_),o.noColorAxis||(x.coloraxis={valType:"subplotid",regex:T("coloraxis"),dflt:null,editType:"calc"}),x}},47128:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(94288).extractOpts;R.exports=function(w,b,c){var o,t=w._fullLayout,i=c.vals,n=c.containerStr,a=n?T.nestedProperty(b,n).get():b,s=r(a),l=s.auto!==!1,u=s.min,p=s.max,f=s.mid,m=function(){return T.aggNums(Math.min,null,i)},h=function(){return T.aggNums(Math.max,null,i)};u===void 0?u=m():l&&(u=a._colorAx&&_(u)?Math.min(u,m()):m()),p===void 0?p=h():l&&(p=a._colorAx&&_(p)?Math.max(p,h()):h()),l&&f!==void 0&&(p-f>f-u?u=f-(p-f):p-f<f-u&&(p=f+(f-u))),u===p&&(u-=.5,p+=.5),s._sync("min",u),s._sync("max",p),s.autocolorscale&&(o=u*p<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,s._sync("colorscale",o))}},95504:function(R,C,e){"use strict";var _=e(3400),T=e(94288).hasColorscale,r=e(94288).extractOpts;R.exports=function(w,b){function c(l,u){var p=l["_"+u];p!==void 0&&(l[u]=p)}function o(l,u){var p=u.container?_.nestedProperty(l,u.container).get():l;if(p)if(p.coloraxis)p._colorAx=b[p.coloraxis];else{var f=r(p),m=f.auto;(m||f.min===void 0)&&c(p,u.min),(m||f.max===void 0)&&c(p,u.max),f.autocolorscale&&c(p,"colorscale")}}for(var t=0;t<w.length;t++){var i=w[t],n=i._module.colorbar;if(n)if(Array.isArray(n))for(var a=0;a<n.length;a++)o(i,n[a]);else o(i,n);T(i,"marker.line")&&o(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in b._colorAxes)o(b[s],{min:"cmin",max:"cmax"})}},27260:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(90553),w=e(64013),b=e(88304).isValid,c=e(24040).traceIs;function o(t,i){var n=i.slice(0,i.length-1);return i?T.nestedProperty(t,n).get()||{}:t}R.exports=function t(i,n,a,s,l){var u=l.prefix,p=l.cLetter,f="_module"in n,m=o(i,u),h=o(n,u),g=o(n._template||{},u)||{},v=function(){return delete i.coloraxis,delete n.coloraxis,t(i,n,a,s,l)};if(f){var x=a._colorAxes||{},y=s(u+"coloraxis");if(y){var A=c(n,"contour")&&T.nestedProperty(n,"contours.coloring").get()||"heatmap",d=x[y];return void(d?(d[2].push(v),d[0]!==A&&(d[0]=!1,T.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[y]=[A,n,[v]])}}var S=m[p+"min"],k=m[p+"max"],E=_(S)&&_(k)&&S<k;s(u+p+"auto",!E)?s(u+p+"mid"):(s(u+p+"min"),s(u+p+"max"));var L,O,P=m.colorscale,F=g.colorscale;P!==void 0&&(L=!b(P)),F!==void 0&&(L=!b(F)),s(u+"autocolorscale",L),s(u+"colorscale"),s(u+"reversescale"),u!=="marker.line."&&(u&&f&&(O=r(m)),s(u+"showscale",O)&&(u&&g&&(h._template=g),w(m,h,a)))}},94288:function(R,C,e){"use strict";var _=e(33428),T=e(49760),r=e(38248),w=e(3400),b=e(76308),c=e(88304).isValid,o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var p,f,m,h=u._colorAx,g=h||u,v={};for(f=0;f<o.length;f++)v[m=o[f]]=g[m];if(h)for(p="c",f=0;f<t.length;f++)v[m=t[f]]=g["c"+m];else{var x;for(f=0;f<t.length;f++)((x="c"+(m=t[f]))in g||(x="z"+m)in g)&&(v[m]=g[x]);p=x.charAt(0)}return v._sync=function(y,A){var d=t.indexOf(y)!==-1?p+y:y;g[d]=g["_"+d]=A},v}function n(u){for(var p=i(u),f=p.min,m=p.max,h=p.reversescale?a(p.colorscale):p.colorscale,g=h.length,v=new Array(g),x=new Array(g),y=0;y<g;y++){var A=h[y];v[y]=f+A[0]*(m-f),x[y]=A[1]}return{domain:v,range:x}}function a(u){for(var p=u.length,f=new Array(p),m=p-1,h=0;m>=0;m--,h++){var g=u[m];f[h]=[1-g[0],g[1]]}return f}function s(u,p){p=p||{};for(var f=u.domain,m=u.range,h=m.length,g=new Array(h),v=0;v<h;v++){var x=T(m[v]).toRgb();g[v]=[x.r,x.g,x.b,x.a]}var y,A=_.scale.linear().domain(f).range(g).clamp(!0),d=p.noNumericCheck,S=p.returnArray;return(y=d&&S?A:d?function(k){return l(A(k))}:S?function(k){return r(k)?A(k):T(k).isValid()?k:b.defaultLine}:function(k){return r(k)?l(A(k)):T(k).isValid()?k:b.defaultLine}).domain=A.domain,y.range=function(){return m},y}function l(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return T(p).toRgbString()}R.exports={hasColorscale:function(u,p,f){var m=p?w.nestedProperty(u,p).get()||{}:u,h=m[f||"color"];h&&h._inputArray&&(h=h._inputArray);var g=!1;if(w.isArrayOrTypedArray(h)){for(var v=0;v<h.length;v++)if(r(h[v])){g=!0;break}}return w.isPlainObject(m)&&(g||m.showscale===!0||r(m.cmin)&&r(m.cmax)||c(m.colorscale)||w.isPlainObject(m.colorbar))},extractOpts:i,extractScale:n,flipScale:a,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(u,p){return s(n(u),p)}}},8932:function(R,C,e){"use strict";var _=e(88304),T=e(94288);R.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:_.scales,defaultScale:_.defaultScale,getScale:_.get,isValidScale:_.isValid,hasColorscale:T.hasColorscale,extractOpts:T.extractOpts,extractScale:T.extractScale,flipScale:T.flipScale,makeColorScaleFunc:T.makeColorScaleFunc,makeColorScaleFuncFromTrace:T.makeColorScaleFuncFromTrace}},92332:function(R,C,e){"use strict";var _=e(92880).extendFlat,T=e(49084),r=e(88304).scales;R.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:r.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:r.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:r.RdBu,editType:"calc"}},coloraxis:_({_isSubplotObj:!0,editType:"calc"},T("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(R,C,e){"use strict";var _=e(3400),T=e(31780),r=e(92332),w=e(27260);R.exports=function(b,c){function o(p,f){return _.coerce(b,c,r,p,f)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var t,i,n=c._colorAxes;function a(p,f){return _.coerce(t,i,r.coloraxis,p,f)}for(var s in n){var l=n[s];if(l[0])t=b[s]||{},(i=T.newContainer(c,s,"coloraxis"))._name=s,w(t,i,c,a,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete c._colorAxes[s]}}}},88304:function(R,C,e){"use strict";var _=e(49760),T={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},r=T.RdBu;function w(b){var c=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var o=0;o<b.length;o++){var t=b[o];if(t.length!==2||+t[0]<c||!_(t[1]).isValid())return!1;c=+t[0]}return!0}R.exports={scales:T,defaultScale:r,get:function(b,c){if(c||(c=r),!b)return c;function o(){try{b=T[b]||JSON.parse(b)}catch{b=c}}return typeof b=="string"&&(o(),typeof b=="string"&&o()),w(b)?b:c},isValid:function(b){return T[b]!==void 0||w(b)}}},78316:function(R){"use strict";R.exports=function(C,e,_,T,r){var w=(C-_)/(T-_),b=w+e/(T-_),c=(w+b)/2;return r==="left"||r==="bottom"?w:r==="center"||r==="middle"?c:r==="right"||r==="top"?b:w<.6666666666666666-c?w:b>1.3333333333333333-c?b:c}},67416:function(R,C,e){"use strict";var _=e(3400),T=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];R.exports=function(r,w,b,c){return r=b==="left"?0:b==="center"?1:b==="right"?2:_.constrain(Math.floor(3*r),0,2),w=c==="bottom"?0:c==="middle"?1:c==="top"?2:_.constrain(Math.floor(3*w),0,2),T[w][r]}},72760:function(R,C){"use strict";C.selectMode=function(e){return e==="lasso"||e==="select"},C.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},C.openMode=function(e){return e==="drawline"||e==="drawopenpath"},C.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},C.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},C.selectingOrDrawing=function(e){return C.freeMode(e)||C.rectMode(e)}},86476:function(R,C,e){"use strict";var _=e(29128),T=e(52264),r=e(89184),w=e(3400).removeElement,b=e(33816),c=R.exports={};c.align=e(78316),c.getCursor=e(67416);var o=e(2616);function t(){var n=document.createElement("div");n.className="dragcover";var a=n.style;return a.position="fixed",a.left=0,a.right=0,a.top=0,a.bottom=0,a.zIndex=999999999,a.background="none",document.body.appendChild(n),n}function i(n){return _(n.changedTouches?n.changedTouches[0]:n,document.body)}c.unhover=o.wrapped,c.unhoverRaw=o.raw,c.init=function(n){var a,s,l,u,p,f,m,h,g=n.gd,v=1,x=g._context.doubleClickDelay,y=n.element;g._mouseDownTime||(g._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=d,r?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=d,y.addEventListener("touchstart",d,{passive:!1})):y.ontouchstart=d;var A=n.clampFn||function(E,L,O){return Math.abs(E)<O&&(E=0),Math.abs(L)<O&&(L=0),[E,L]};function d(E){g._dragged=!1,g._dragging=!0;var L=i(E);a=L[0],s=L[1],m=E.target,f=E,h=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=a,E.clientY=s),(l=new Date().getTime())-g._mouseDownTime<x?v+=1:(v=1,g._mouseDownTime=l),n.prepFn&&n.prepFn(E,a,s),T&&!h?(p=t()).style.cursor=window.getComputedStyle(y).cursor:T||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var L=i(E),O=n.minDrag||b.MINDRAG,P=A(L[0]-a,L[1]-s,O),F=P[0],U=P[1];(F||U)&&(g._dragged=!0,c.unhover(g,E)),g._dragged&&n.moveFn&&!h&&(g._dragdata={element:y,dx:F,dy:U},n.moveFn(F,U))}function k(E){if(delete g._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),T?w(p):u&&(p.documentElement.style.cursor=u,u=null),g._dragging){if(g._dragging=!1,new Date().getTime()-g._mouseDownTime>x&&(v=Math.max(v-1,1)),g._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(v,f),!h){var L;try{L=new MouseEvent("click",E)}catch{var O=i(E);(L=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,O[0],O[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}m.dispatchEvent(L)}g._dragging=!1,g._dragged=!1}else g._dragged=!1}},c.coverSlip=t},2616:function(R,C,e){"use strict";var _=e(95924),T=e(91200),r=e(52200).getGraphDiv,w=e(92456),b=R.exports={};b.wrapped=function(c,o,t){(c=r(c))._fullLayout&&T.clear(c._fullLayout._uid+w.HOVERID),b.raw(c,o,t)},b.raw=function(c,o){var t=c._fullLayout,i=c._hoverdata;o||(o={}),o.target&&!c._dragged&&_.triggerHandler(c,"plotly_beforehover",o)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),c._hoverdata=void 0,o.target&&i&&c.emit("plotly_unhover",{event:o,points:i}))}},98192:function(R,C){"use strict";C.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},C.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.numberFormat,w=e(38248),b=e(49760),c=e(24040),o=e(76308),t=e(8932),i=T.strTranslate,n=e(72736),a=e(9616),s=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,u=e(43028),p=e(7152),f=e(10624).appendArrayPointValue,m=R.exports={};function h(de){return de==="none"?void 0:de}m.font=function(de,ae){var re=ae.variant,he=ae.style,Se=ae.weight,xe=ae.color,Te=ae.size,Ae=ae.family,Pe=ae.shadow,De=ae.lineposition,ve=ae.textcase;Ae&&de.style("font-family",Ae),Te+1&&de.style("font-size",Te+"px"),xe&&de.call(o.fill,xe),Se&&de.style("font-weight",Se),he&&de.style("font-style",he),re&&de.style("font-variant",re),ve&&de.style("text-transform",h(function(we){return g[we]}(ve))),Pe&&de.style("text-shadow",Pe==="auto"?n.makeTextShadow(o.contrast(xe)):h(Pe)),De&&de.style("text-decoration-line",h(function(we){return we.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}(De)))};var g={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function v(de,ae,re,he){var Se=ae.fillpattern,xe=ae.fillgradient,Te=Se&&m.getPatternAttr(Se.shape,0,"");if(Te){var Ae=m.getPatternAttr(Se.bgcolor,0,null),Pe=m.getPatternAttr(Se.fgcolor,0,null),De=Se.fgopacity,ve=m.getPatternAttr(Se.size,0,8),we=m.getPatternAttr(Se.solidity,0,.3),Ee=ae.uid;m.pattern(de,"point",re,Ee,Te,ve,we,void 0,Se.fillmode,Ae,Pe,De)}else if(xe&&xe.type!=="none"){var Fe,Le,je=xe.type,Ge="scatterfill-"+ae.uid;he&&(Ge="legendfill-"+ae.uid),he||xe.start===void 0&&xe.stop===void 0?(je==="horizontal"&&(je+="reversed"),de.call(m.gradient,re,Ge,je,xe.colorscale,"fill")):(je==="horizontal"?(Fe={x:xe.start,y:0},Le={x:xe.stop,y:0}):je==="vertical"&&(Fe={x:0,y:xe.start},Le={x:0,y:xe.stop}),Fe.x=ae._xA.c2p(Fe.x===void 0?ae._extremes.x.min[0].val:Fe.x,!0),Fe.y=ae._yA.c2p(Fe.y===void 0?ae._extremes.y.min[0].val:Fe.y,!0),Le.x=ae._xA.c2p(Le.x===void 0?ae._extremes.x.max[0].val:Le.x,!0),Le.y=ae._yA.c2p(Le.y===void 0?ae._extremes.y.max[0].val:Le.y,!0),de.call(k,re,Ge,"linear",xe.colorscale,"fill",Fe,Le,!0,!1))}else ae.fillcolor&&de.call(o.fill,ae.fillcolor)}m.setPosition=function(de,ae,re){de.attr("x",ae).attr("y",re)},m.setSize=function(de,ae,re){de.attr("width",ae).attr("height",re)},m.setRect=function(de,ae,re,he,Se){de.call(m.setPosition,ae,re).call(m.setSize,he,Se)},m.translatePoint=function(de,ae,re,he){var Se=re.c2p(de.x),xe=he.c2p(de.y);return!!(w(Se)&&w(xe)&&ae.node())&&(ae.node().nodeName==="text"?ae.attr("x",Se).attr("y",xe):ae.attr("transform",i(Se,xe)),!0)},m.translatePoints=function(de,ae,re){de.each(function(he){var Se=_.select(this);m.translatePoint(he,Se,ae,re)})},m.hideOutsideRangePoint=function(de,ae,re,he,Se,xe){ae.attr("display",re.isPtWithinRange(de,Se)&&he.isPtWithinRange(de,xe)?null:"none")},m.hideOutsideRangePoints=function(de,ae){if(ae._hasClipOnAxisFalse){var re=ae.xaxis,he=ae.yaxis;de.each(function(Se){var xe=Se[0].trace,Te=xe.xcalendar,Ae=xe.ycalendar,Pe=c.traceIs(xe,"bar-like")?".bartext":".point,.textpoint";de.selectAll(Pe).each(function(De){m.hideOutsideRangePoint(De,_.select(this),re,he,Te,Ae)})})}},m.crispRound=function(de,ae,re){return ae&&w(ae)?de._context.staticPlot?ae:ae<1?1:Math.round(ae):re||0},m.singleLineStyle=function(de,ae,re,he,Se){ae.style("fill","none");var xe=(((de||[])[0]||{}).trace||{}).line||{},Te=re||xe.width||0,Ae=Se||xe.dash||"";o.stroke(ae,he||xe.color),m.dashLine(ae,Ae,Te)},m.lineGroupStyle=function(de,ae,re,he){de.style("fill","none").each(function(Se){var xe=(((Se||[])[0]||{}).trace||{}).line||{},Te=ae||xe.width||0,Ae=he||xe.dash||"";_.select(this).call(o.stroke,re||xe.color).call(m.dashLine,Ae,Te)})},m.dashLine=function(de,ae,re){re=+re||0,ae=m.dashStyle(ae,re),de.style({"stroke-dasharray":ae,"stroke-width":re+"px"})},m.dashStyle=function(de,ae){ae=+ae||1;var re=Math.max(ae,3);return de==="solid"?de="":de==="dot"?de=re+"px,"+re+"px":de==="dash"?de=3*re+"px,"+3*re+"px":de==="longdash"?de=5*re+"px,"+5*re+"px":de==="dashdot"?de=3*re+"px,"+re+"px,"+re+"px,"+re+"px":de==="longdashdot"&&(de=5*re+"px,"+2*re+"px,"+re+"px,"+2*re+"px"),de},m.singleFillStyle=function(de,ae){var re=_.select(de.node());v(de,((re.data()[0]||[])[0]||{}).trace||{},ae,!1)},m.fillGroupStyle=function(de,ae,re){de.style("stroke-width",0).each(function(he){var Se=_.select(this);he[0].trace&&v(Se,he[0].trace,ae,re)})};var x=e(71984);m.symbolNames=[],m.symbolFuncs=[],m.symbolBackOffs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(x).forEach(function(de){var ae=x[de],re=ae.n;m.symbolList.push(re,String(re),de,re+100,String(re+100),de+"-open"),m.symbolNames[re]=de,m.symbolFuncs[re]=ae.f,m.symbolBackOffs[re]=ae.backoff||0,ae.needLine&&(m.symbolNeedLines[re]=!0),ae.noDot?m.symbolNoDot[re]=!0:m.symbolList.push(re+200,String(re+200),de+"-dot",re+300,String(re+300),de+"-open-dot"),ae.noFill&&(m.symbolNoFill[re]=!0)});var y=m.symbolNames.length;function A(de,ae,re,he){var Se=de%100;return m.symbolFuncs[Se](ae,re,he)+(de>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(de){if(w(de))de=+de;else if(typeof de=="string"){var ae=0;de.indexOf("-open")>0&&(ae=100,de=de.replace("-open","")),de.indexOf("-dot")>0&&(ae+=200,de=de.replace("-dot","")),(de=m.symbolNames.indexOf(de))>=0&&(de+=ae)}return de%100>=y||de>=400?0:Math.floor(Math.max(de,0))};var d=r("~f"),S={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function k(de,ae,re,he,Se,xe,Te,Ae,Pe,De){var ve,we=Se.length;he==="linear"?ve={node:"linearGradient",attrs:{x1:Te.x,y1:Te.y,x2:Ae.x,y2:Ae.y,gradientUnits:Pe?"userSpaceOnUse":"objectBoundingBox"},reversed:De}:he==="radial"&&(ve={node:"radialGradient",reversed:De});for(var Ee=new Array(we),Fe=0;Fe<we;Fe++)ve.reversed?Ee[we-1-Fe]=[d(100*(1-Se[Fe][0])),Se[Fe][1]]:Ee[Fe]=[d(100*Se[Fe][0]),Se[Fe][1]];var Le=ae._fullLayout,je="g"+Le._uid+"-"+re,Ge=Le._defs.select(".gradients").selectAll("#"+je).data([he+Ee.join(";")],T.identity);Ge.exit().remove(),Ge.enter().append(ve.node).each(function(){var Je=_.select(this);ve.attrs&&Je.attr(ve.attrs),Je.attr("id",je);var rt=Je.selectAll("stop").data(Ee);rt.exit().remove(),rt.enter().append("stop"),rt.each(function(ot){var yt=b(ot[1]);_.select(this).attr({offset:ot[0]+"%","stop-color":o.tinyRGB(yt),"stop-opacity":yt.getAlpha()})})}),de.style(xe,K(je,ae)).style(xe+"-opacity",null),de.classed("gradient_filled",!0)}m.gradient=function(de,ae,re,he,Se,xe){var Te=S[he];return k(de,ae,re,Te.type,Se,xe,Te.start,Te.stop,!1,Te.reversed)},m.pattern=function(de,ae,re,he,Se,xe,Te,Ae,Pe,De,ve,we){var Ee=ae==="legend";Ae&&(Pe==="overlay"?(De=Ae,ve=o.contrast(De)):(De=void 0,ve=Ae));var Fe,Le,je,Ge,Je,rt,ot,yt,_t,mt=re._fullLayout,tt="p"+mt._uid+"-"+he,Qe={},Dt=b(ve),zt=o.tinyRGB(Dt),pt=we*Dt.getAlpha();switch(Se){case"/":Fe=xe*Math.sqrt(2),Le=xe*Math.sqrt(2),rt="path",Qe={d:je="M-"+Fe/4+","+Le/4+"l"+Fe/2+",-"+Le/2+"M0,"+Le+"L"+Fe+",0M"+Fe/4*3+","+Le/4*5+"l"+Fe/2+",-"+Le/2,opacity:pt,stroke:zt,"stroke-width":(Ge=Te*xe)+"px"};break;case"\\":Fe=xe*Math.sqrt(2),Le=xe*Math.sqrt(2),rt="path",Qe={d:je="M"+Fe/4*3+",-"+Le/4+"l"+Fe/2+","+Le/2+"M0,0L"+Fe+","+Le+"M-"+Fe/4+","+Le/4*3+"l"+Fe/2+","+Le/2,opacity:pt,stroke:zt,"stroke-width":(Ge=Te*xe)+"px"};break;case"x":Fe=xe*Math.sqrt(2),Le=xe*Math.sqrt(2),je="M-"+Fe/4+","+Le/4+"l"+Fe/2+",-"+Le/2+"M0,"+Le+"L"+Fe+",0M"+Fe/4*3+","+Le/4*5+"l"+Fe/2+",-"+Le/2+"M"+Fe/4*3+",-"+Le/4+"l"+Fe/2+","+Le/2+"M0,0L"+Fe+","+Le+"M-"+Fe/4+","+Le/4*3+"l"+Fe/2+","+Le/2,Ge=xe-xe*Math.sqrt(1-Te),rt="path",Qe={d:je,opacity:pt,stroke:zt,"stroke-width":Ge+"px"};break;case"|":rt="path",rt="path",Qe={d:je="M"+(Fe=xe)/2+",0L"+Fe/2+","+(Le=xe),opacity:pt,stroke:zt,"stroke-width":(Ge=Te*xe)+"px"};break;case"-":rt="path",rt="path",Qe={d:je="M0,"+(Le=xe)/2+"L"+(Fe=xe)+","+Le/2,opacity:pt,stroke:zt,"stroke-width":(Ge=Te*xe)+"px"};break;case"+":rt="path",je="M"+(Fe=xe)/2+",0L"+Fe/2+","+(Le=xe)+"M0,"+Le/2+"L"+Fe+","+Le/2,Ge=xe-xe*Math.sqrt(1-Te),rt="path",Qe={d:je,opacity:pt,stroke:zt,"stroke-width":Ge+"px"};break;case".":Fe=xe,Le=xe,Te<Math.PI/4?Je=Math.sqrt(Te*xe*xe/Math.PI):(ot=Te,yt=Math.PI/4,Je=(_t=xe/2)+(xe/Math.sqrt(2)-_t)*(ot-yt)/(1-yt)),rt="circle",Qe={cx:Fe/2,cy:Le/2,r:Je,opacity:pt,fill:zt}}var vt=[Se||"noSh",De||"noBg",ve||"noFg",xe,Te].join(";"),We=mt._defs.select(".patterns").selectAll("#"+tt).data([vt],T.identity);We.exit().remove(),We.enter().append("pattern").each(function(){var Ze=_.select(this);if(Ze.attr({id:tt,width:Fe+"px",height:Le+"px",patternUnits:"userSpaceOnUse",patternTransform:Ee?"scale(0.8)":""}),De){var Ne=b(De),Xe=o.tinyRGB(Ne),st=Ne.getAlpha(),lt=Ze.selectAll("rect").data([0]);lt.exit().remove(),lt.enter().append("rect").attr({width:Fe+"px",height:Le+"px",fill:Xe,"fill-opacity":st})}var xt=Ze.selectAll(rt).data([0]);xt.exit().remove(),xt.enter().append(rt).attr(Qe)}),de.style("fill",K(tt,re)).style("fill-opacity",null),de.classed("pattern_filled",!0)},m.initGradients=function(de){var ae=de._fullLayout;T.ensureSingle(ae._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),_.select(de).selectAll(".gradient_filled").classed("gradient_filled",!1)},m.initPatterns=function(de){var ae=de._fullLayout;T.ensureSingle(ae._defs,"g","patterns").selectAll("pattern").remove(),_.select(de).selectAll(".pattern_filled").classed("pattern_filled",!1)},m.getPatternAttr=function(de,ae,re){return de&&T.isArrayOrTypedArray(de)?ae<de.length?de[ae]:re:de},m.pointStyle=function(de,ae,re,he){if(de.size()){var Se=m.makePointStyleFns(ae);de.each(function(xe){m.singlePointStyle(xe,_.select(this),ae,Se,re,he)})}},m.singlePointStyle=function(de,ae,re,he,Se,xe){var Te=re.marker,Ae=Te.line;if(xe&&xe.i>=0&&de.i===void 0&&(de.i=xe.i),ae.style("opacity",he.selectedOpacityFn?he.selectedOpacityFn(de):de.mo===void 0?Te.opacity:de.mo),he.ms2mrc){var Pe;Pe=de.ms==="various"||Te.size==="various"?3:he.ms2mrc(de.ms),de.mrc=Pe,he.selectedSizeFn&&(Pe=de.mrc=he.selectedSizeFn(de));var De=m.symbolNumber(de.mx||Te.symbol)||0;de.om=De%200>=100;var ve=Ce(de,re),we=Z(de,re);ae.attr("d",A(De,Pe,ve,we))}var Ee,Fe,Le,je=!1;if(de.so)Le=Ae.outlierwidth,Fe=Ae.outliercolor,Ee=Te.outliercolor;else{var Ge=(Ae||{}).width;Le=(de.mlw+1||Ge+1||(de.trace?(de.trace.marker.line||{}).width:0)+1)-1||0,Fe="mlc"in de?de.mlcc=he.lineScale(de.mlc):T.isArrayOrTypedArray(Ae.color)?o.defaultLine:Ae.color,T.isArrayOrTypedArray(Te.color)&&(Ee=o.defaultLine,je=!0),Ee="mc"in de?de.mcc=he.markerScale(de.mc):Te.color||Te.colors||"rgba(0,0,0,0)",he.selectedColorFn&&(Ee=he.selectedColorFn(de))}if(de.om)ae.call(o.stroke,Ee).style({"stroke-width":(Le||1)+"px",fill:"none"});else{ae.style("stroke-width",(de.isBlank?0:Le)+"px");var Je=Te.gradient,rt=de.mgt;rt?je=!0:rt=Je&&Je.type,T.isArrayOrTypedArray(rt)&&(rt=rt[0],S[rt]||(rt=0));var ot=Te.pattern,yt=ot&&m.getPatternAttr(ot.shape,de.i,"");if(rt&&rt!=="none"){var _t=de.mgc;_t?je=!0:_t=Je.color;var mt=re.uid;je&&(mt+="-"+de.i),m.gradient(ae,Se,mt,rt,[[0,_t],[1,Ee]],"fill")}else if(yt){var tt=!1,Qe=ot.fgcolor;!Qe&&xe&&xe.color&&(Qe=xe.color,tt=!0);var Dt=m.getPatternAttr(Qe,de.i,xe&&xe.color||null),zt=m.getPatternAttr(ot.bgcolor,de.i,null),pt=ot.fgopacity,vt=m.getPatternAttr(ot.size,de.i,8),We=m.getPatternAttr(ot.solidity,de.i,.3);tt=tt||de.mcc||T.isArrayOrTypedArray(ot.shape)||T.isArrayOrTypedArray(ot.bgcolor)||T.isArrayOrTypedArray(ot.fgcolor)||T.isArrayOrTypedArray(ot.size)||T.isArrayOrTypedArray(ot.solidity);var Ze=re.uid;tt&&(Ze+="-"+de.i),m.pattern(ae,"point",Se,Ze,yt,vt,We,de.mcc,ot.fillmode,zt,Dt,pt)}else T.isArrayOrTypedArray(Ee)?o.fill(ae,Ee[de.i]):o.fill(ae,Ee);Le&&o.stroke(ae,Fe)}},m.makePointStyleFns=function(de){var ae={},re=de.marker;return ae.markerScale=m.tryColorscale(re,""),ae.lineScale=m.tryColorscale(re,"line"),c.traceIs(de,"symbols")&&(ae.ms2mrc=u.isBubble(de)?p(de):function(){return(re.size||6)/2}),de.selectedpoints&&T.extendFlat(ae,m.makeSelectedPointStyleFns(de)),ae},m.makeSelectedPointStyleFns=function(de){var ae={},re=de.selected||{},he=de.unselected||{},Se=de.marker||{},xe=re.marker||{},Te=he.marker||{},Ae=Se.opacity,Pe=xe.opacity,De=Te.opacity,ve=Pe!==void 0,we=De!==void 0;(T.isArrayOrTypedArray(Ae)||ve||we)&&(ae.selectedOpacityFn=function(yt){var _t=yt.mo===void 0?Se.opacity:yt.mo;return yt.selected?ve?Pe:_t:we?De:l*_t});var Ee=Se.color,Fe=xe.color,Le=Te.color;(Fe||Le)&&(ae.selectedColorFn=function(yt){var _t=yt.mcc||Ee;return yt.selected?Fe||_t:Le||_t});var je=Se.size,Ge=xe.size,Je=Te.size,rt=Ge!==void 0,ot=Je!==void 0;return c.traceIs(de,"symbols")&&(rt||ot)&&(ae.selectedSizeFn=function(yt){var _t=yt.mrc||je/2;return yt.selected?rt?Ge/2:_t:ot?Je/2:_t}),ae},m.makeSelectedTextStyleFns=function(de){var ae={},re=de.selected||{},he=de.unselected||{},Se=de.textfont||{},xe=re.textfont||{},Te=he.textfont||{},Ae=Se.color,Pe=xe.color,De=Te.color;return ae.selectedTextColorFn=function(ve){var we=ve.tc||Ae;return ve.selected?Pe||we:De||(Pe?we:o.addOpacity(we,l))},ae},m.selectedPointStyle=function(de,ae){if(de.size()&&ae.selectedpoints){var re=m.makeSelectedPointStyleFns(ae),he=ae.marker||{},Se=[];re.selectedOpacityFn&&Se.push(function(xe,Te){xe.style("opacity",re.selectedOpacityFn(Te))}),re.selectedColorFn&&Se.push(function(xe,Te){o.fill(xe,re.selectedColorFn(Te))}),re.selectedSizeFn&&Se.push(function(xe,Te){var Ae=Te.mx||he.symbol||0,Pe=re.selectedSizeFn(Te);xe.attr("d",A(m.symbolNumber(Ae),Pe,Ce(Te,ae),Z(Te,ae))),Te.mrc2=Pe}),Se.length&&de.each(function(xe){for(var Te=_.select(this),Ae=0;Ae<Se.length;Ae++)Se[Ae](Te,xe)})}},m.tryColorscale=function(de,ae){var re=ae?T.nestedProperty(de,ae).get():de;if(re){var he=re.color;if((re.colorscale||re._colorAx)&&T.isArrayOrTypedArray(he))return t.makeColorScaleFuncFromTrace(re)}return T.identity};var E,L,O={start:1,end:-1,middle:0,bottom:1,top:-1};function P(de,ae,re,he,Se){var xe=_.select(de.node().parentNode),Te=ae.indexOf("top")!==-1?"top":ae.indexOf("bottom")!==-1?"bottom":"middle",Ae=ae.indexOf("left")!==-1?"end":ae.indexOf("right")!==-1?"start":"middle",Pe=he?he/.8+1:0,De=(n.lineCount(de)-1)*s+1,ve=O[Ae]*Pe,we=.75*re+O[Te]*Pe+(O[Te]-1)*De*re/2;de.attr("text-anchor",Ae),Se||xe.attr("transform",i(ve,we))}function F(de,ae){var re=de.ts||ae.textfont.size;return w(re)&&re>0?re:0}function U(de,ae,re){return re&&(de=q(de)),ae?N(de[1]):I(de[0])}function I(de){var ae=_.round(de,2);return E=ae,ae}function N(de){var ae=_.round(de,2);return L=ae,ae}function W(de,ae,re,he){var Se=de[0]-ae[0],xe=de[1]-ae[1],Te=re[0]-ae[0],Ae=re[1]-ae[1],Pe=Math.pow(Se*Se+xe*xe,.25),De=Math.pow(Te*Te+Ae*Ae,.25),ve=(De*De*Se-Pe*Pe*Te)*he,we=(De*De*xe-Pe*Pe*Ae)*he,Ee=3*De*(Pe+De),Fe=3*Pe*(Pe+De);return[[I(ae[0]+(Ee&&ve/Ee)),N(ae[1]+(Ee&&we/Ee))],[I(ae[0]-(Fe&&ve/Fe)),N(ae[1]-(Fe&&we/Fe))]]}m.textPointStyle=function(de,ae,re){if(de.size()){var he;if(ae.selectedpoints){var Se=m.makeSelectedTextStyleFns(ae);he=Se.selectedTextColorFn}var xe=ae.texttemplate,Te=re._fullLayout;de.each(function(Ae){var Pe=_.select(this),De=xe?T.extractOption(Ae,ae,"txt","texttemplate"):T.extractOption(Ae,ae,"tx","text");if(De||De===0){if(xe){var ve=ae._module.formatLabels,we=ve?ve(Ae,ae,Te):{},Ee={};f(Ee,ae,Ae.i);var Fe=ae._meta||{};De=T.texttemplateString(De,we,Te._d3locale,Ee,Ae,Fe)}var Le=Ae.tp||ae.textposition,je=F(Ae,ae),Ge=he?he(Ae):Ae.tc||ae.textfont.color;Pe.call(m.font,{family:Ae.tf||ae.textfont.family,weight:Ae.tw||ae.textfont.weight,style:Ae.ty||ae.textfont.style,variant:Ae.tv||ae.textfont.variant,textcase:Ae.tC||ae.textfont.textcase,lineposition:Ae.tE||ae.textfont.lineposition,shadow:Ae.tS||ae.textfont.shadow,size:je,color:Ge}).text(De).call(n.convertToTspans,re).call(P,Le,je,Ae.mrc)}else Pe.remove()})}},m.selectedTextStyle=function(de,ae){if(de.size()&&ae.selectedpoints){var re=m.makeSelectedTextStyleFns(ae);de.each(function(he){var Se=_.select(this),xe=re.selectedTextColorFn(he),Te=he.tp||ae.textposition,Ae=F(he,ae);o.fill(Se,xe);var Pe=c.traceIs(ae,"bar-like");P(Se,Te,Ae,he.mrc2||he.mrc,Pe)})}},m.smoothopen=function(de,ae){if(de.length<3)return"M"+de.join("L");var re,he="M"+de[0],Se=[];for(re=1;re<de.length-1;re++)Se.push(W(de[re-1],de[re],de[re+1],ae));for(he+="Q"+Se[0][0]+" "+de[1],re=2;re<de.length-1;re++)he+="C"+Se[re-2][1]+" "+Se[re-1][0]+" "+de[re];return he+"Q"+Se[de.length-3][1]+" "+de[de.length-1]},m.smoothclosed=function(de,ae){if(de.length<3)return"M"+de.join("L")+"Z";var re,he="M"+de[0],Se=de.length-1,xe=[W(de[Se],de[0],de[1],ae)];for(re=1;re<Se;re++)xe.push(W(de[re-1],de[re],de[re+1],ae));for(xe.push(W(de[Se-1],de[Se],de[0],ae)),re=1;re<=Se;re++)he+="C"+xe[re-1][1]+" "+xe[re][0]+" "+de[re];return he+"C"+xe[Se][1]+" "+xe[0][0]+" "+de[0]+"Z"};var B={hv:function(de,ae,re){return"H"+I(ae[0])+"V"+U(ae,1,re)},vh:function(de,ae,re){return"V"+N(ae[1])+"H"+U(ae,0,re)},hvh:function(de,ae,re){return"H"+I((de[0]+ae[0])/2)+"V"+N(ae[1])+"H"+U(ae,0,re)},vhv:function(de,ae,re){return"V"+N((de[1]+ae[1])/2)+"H"+I(ae[0])+"V"+U(ae,1,re)}},V=function(de,ae,re){return"L"+U(ae,0,re)+","+U(ae,1,re)};function q(de,ae){var re=de.backoff,he=de.trace,Se=de.d,xe=de.i;if(re&&he&&he.marker&&he.marker.angle%360==0&&he.line&&he.line.shape!=="spline"){var Te=T.isArrayOrTypedArray(re),Ae=de,Pe=ae?ae[0]:E||0,De=ae?ae[1]:L||0,ve=Ae[0],we=Ae[1],Ee=ve-Pe,Fe=we-De,Le=Math.atan2(Fe,Ee),je=Te?re[xe]:re;if(je==="auto"){var Ge=Ae.i;he.type==="scatter"&&Ge--;var Je=Ae.marker,rt=Je.symbol;T.isArrayOrTypedArray(rt)&&(rt=rt[Ge]);var ot=Je.size;T.isArrayOrTypedArray(ot)&&(ot=ot[Ge]),je=Je?m.symbolBackOffs[m.symbolNumber(rt)]*ot:0,je+=m.getMarkerStandoff(Se[Ge],he)||0}var yt=ve-je*Math.cos(Le),_t=we-je*Math.sin(Le);(yt<=ve&&yt>=Pe||yt>=ve&&yt<=Pe)&&(_t<=we&&_t>=De||_t>=we&&_t<=De)&&(de=[yt,_t])}return de}m.steps=function(de){var ae=B[de]||V;return function(re){for(var he="M"+I(re[0][0])+","+N(re[0][1]),Se=re.length,xe=1;xe<Se;xe++)he+=ae(re[xe-1],re[xe],xe===Se-1);return he}},m.applyBackoff=q,m.makeTester=function(){var de=T.ensureSingleById(_.select("body"),"svg","js-plotly-tester",function(re){re.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ae=T.ensureSingle(de,"path","js-reference-point",function(re){re.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=de,m.testref=ae},m.savedBBoxes={};var ne=0;function $(de){var ae=de.getAttribute("data-unformatted");if(ae!==null)return ae+de.getAttribute("data-math")+de.getAttribute("text-anchor")+de.getAttribute("style")}function K(de,ae){if(!de)return null;var re=ae._context,he=re._exportedPlot?"":re._baseUrl||"";return he?"url('"+he+"#"+de+"')":"url(#"+de+")"}m.bBox=function(de,ae,re){var he,Se,xe;if(re||(re=$(de)),re){if(he=m.savedBBoxes[re])return T.extendFlat({},he)}else if(de.childNodes.length===1){var Te=de.childNodes[0];if(re=$(Te)){var Ae=+Te.getAttribute("x")||0,Pe=+Te.getAttribute("y")||0,De=Te.getAttribute("transform");if(!De){var ve=m.bBox(Te,!1,re);return Ae&&(ve.left+=Ae,ve.right+=Ae),Pe&&(ve.top+=Pe,ve.bottom+=Pe),ve}if(re+="~"+Ae+"~"+Pe+"~"+De,he=m.savedBBoxes[re])return T.extendFlat({},he)}}ae?Se=de:(xe=m.tester.node(),Se=de.cloneNode(!0),xe.appendChild(Se)),_.select(Se).attr("transform",null).call(n.positionText,0,0);var we=Se.getBoundingClientRect(),Ee=m.testref.node().getBoundingClientRect();ae||xe.removeChild(Se);var Fe={height:we.height,width:we.width,left:we.left-Ee.left,top:we.top-Ee.top,right:we.right-Ee.left,bottom:we.bottom-Ee.top};return ne>=1e4&&(m.savedBBoxes={},ne=0),re&&(m.savedBBoxes[re]=Fe),ne++,T.extendFlat({},Fe)},m.setClipUrl=function(de,ae,re){de.attr("clip-path",K(ae,re))},m.getTranslate=function(de){var ae=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(re,he,Se){return[he,Se].join(" ")}).split(" ");return{x:+ae[0]||0,y:+ae[1]||0}},m.setTranslate=function(de,ae,re){var he=de.attr?"attr":"getAttribute",Se=de.attr?"attr":"setAttribute",xe=de[he]("transform")||"";return ae=ae||0,re=re||0,xe=xe.replace(/(\btranslate\(.*?\);?)/,"").trim(),xe=(xe+=i(ae,re)).trim(),de[Se]("transform",xe),xe},m.getScale=function(de){var ae=(de[de.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(re,he,Se){return[he,Se].join(" ")}).split(" ");return{x:+ae[0]||1,y:+ae[1]||1}},m.setScale=function(de,ae,re){var he=de.attr?"attr":"getAttribute",Se=de.attr?"attr":"setAttribute",xe=de[he]("transform")||"";return ae=ae||1,re=re||1,xe=xe.replace(/(\bscale\(.*?\);?)/,"").trim(),xe=(xe+="scale("+ae+","+re+")").trim(),de[Se]("transform",xe),xe};var ee=/\s*sc.*/;m.setPointGroupScale=function(de,ae,re){if(ae=ae||1,re=re||1,de){var he=ae===1&&re===1?"":"scale("+ae+","+re+")";de.each(function(){var Se=(this.getAttribute("transform")||"").replace(ee,"");Se=(Se+=he).trim(),this.setAttribute("transform",Se)})}};var J=/translate\([^)]*\)\s*$/;function Z(de,ae){var re;return de&&(re=de.mf),re===void 0&&(re=ae.marker&&ae.marker.standoff||0),ae._geo||ae._xA?re:-re}m.setTextPointsScale=function(de,ae,re){de&&de.each(function(){var he,Se=_.select(this),xe=Se.select("text");if(xe.node()){var Te=parseFloat(xe.attr("x")||0),Ae=parseFloat(xe.attr("y")||0),Pe=(Se.attr("transform")||"").match(J);he=ae===1&&re===1?[]:[i(Te,Ae),"scale("+ae+","+re+")",i(-Te,-Ae)],Pe&&he.push(Pe),Se.attr("transform",he.join(""))}})},m.getMarkerStandoff=Z;var te,oe,se,ce,ye,me,fe=Math.atan2,pe=Math.cos,ge=Math.sin;function ke(de,ae){var re=ae[0],he=ae[1];return[re*pe(de)-he*ge(de),re*ge(de)+he*pe(de)]}function Ce(de,ae){var re,he,Se=de.ma;Se===void 0&&((Se=ae.marker.angle)&&!T.isArrayOrTypedArray(Se)||(Se=0));var xe=ae.marker.angleref;if(xe==="previous"||xe==="north"){if(ae._geo){var Te=ae._geo.project(de.lonlat);re=Te[0],he=Te[1]}else{var Ae=ae._xA,Pe=ae._yA;if(!Ae||!Pe)return 90;re=Ae.c2p(de.x),he=Pe.c2p(de.y)}if(ae._geo){var De,ve=de.lonlat[0],we=de.lonlat[1],Ee=ae._geo.project([ve,we+1e-5]),Fe=ae._geo.project([ve+1e-5,we]),Le=fe(Fe[1]-he,Fe[0]-re),je=fe(Ee[1]-he,Ee[0]-re);if(xe==="north")De=Se/180*Math.PI;else if(xe==="previous"){var Ge=ve/180*Math.PI,Je=we/180*Math.PI,rt=te/180*Math.PI,ot=oe/180*Math.PI,yt=rt-Ge,_t=pe(ot)*ge(yt),mt=ge(ot)*pe(Je)-pe(ot)*ge(Je)*pe(yt);De=-fe(_t,mt)-Math.PI,te=ve,oe=we}var tt=ke(Le,[pe(De),0]),Qe=ke(je,[ge(De),0]);Se=fe(tt[1]+Qe[1],tt[0]+Qe[0])/Math.PI*180,xe!=="previous"||me===ae.uid&&de.i===ye+1||(Se=null)}if(xe==="previous"&&!ae._geo)if(me===ae.uid&&de.i===ye+1&&w(re)&&w(he)){var Dt=re-se,zt=he-ce,pt=ae.line&&ae.line.shape||"",vt=pt.slice(pt.length-1);vt==="h"&&(zt=0),vt==="v"&&(Dt=0),Se+=fe(zt,Dt)/Math.PI*180+90}else Se=null}return se=re,ce=he,ye=de.i,me=ae.uid,Se}m.getMarkerAngle=Ce},71984:function(R,C,e){"use strict";var _,T,r,w,b=e(21984),c=e(33428).round,o="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),n=Math.PI,a=Math.cos,s=Math.sin;function l(p){return p===null}function u(p,f,m){if(!(p&&p%360!=0||f))return m;if(r===p&&w===f&&_===m)return T;function h(F,U){var I=a(F),N=s(F),W=U[0],B=U[1]+(f||0);return[W*I-B*N,W*N+B*I]}r=p,w=f,_=m;for(var g=p/180*n,v=0,x=0,y=b(m),A="",d=0;d<y.length;d++){var S=y[d],k=S[0],E=v,L=x;if(k==="M"||k==="L")v=+S[1],x=+S[2];else if(k==="m"||k==="l")v+=+S[1],x+=+S[2];else if(k==="H")v=+S[1];else if(k==="h")v+=+S[1];else if(k==="V")x=+S[1];else if(k==="v")x+=+S[1];else if(k==="A"){v=+S[1],x=+S[2];var O=h(g,[+S[6],+S[7]]);S[6]=O[0],S[7]=O[1],S[3]=+S[3]+p}k!=="H"&&k!=="V"||(k="L"),k!=="h"&&k!=="v"||(k="l"),k!=="m"&&k!=="l"||(v-=E,x-=L);var P=h(g,[v,x]);k!=="H"&&k!=="V"||(k="L"),k!=="M"&&k!=="L"&&k!=="m"&&k!=="l"||(S[1]=P[0],S[2]=P[1]),S[0]=k,A+=S[0]+S.slice(1).join(",")}return T=A,A}R.exports={circle:{n:0,f:function(p,f,m){if(l(f))return o;var h=c(p,2),g="M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z";return m?u(f,m,g):g}},square:{n:1,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")}},diamond:{n:2,f:function(p,f,m){if(l(f))return o;var h=c(1.3*p,2);return u(f,m,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"Z")}},cross:{n:3,f:function(p,f,m){if(l(f))return o;var h=c(.4*p,2),g=c(1.2*p,2);return u(f,m,"M"+g+","+h+"H"+h+"V"+g+"H-"+h+"V"+h+"H-"+g+"V-"+h+"H-"+h+"V-"+g+"H"+h+"V-"+h+"H"+g+"Z")}},x:{n:4,f:function(p,f,m){if(l(f))return o;var h=c(.8*p/t,2),g="l"+h+","+h,v="l"+h+",-"+h,x="l-"+h+",-"+h,y="l-"+h+","+h;return u(f,m,"M0,"+h+g+v+x+v+x+y+x+y+g+y+g+"Z")}},"triangle-up":{n:5,f:function(p,f,m){if(l(f))return o;var h=c(2*p/i,2);return u(f,m,"M-"+h+","+c(p/2,2)+"H"+h+"L0,-"+c(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,f,m){if(l(f))return o;var h=c(2*p/i,2);return u(f,m,"M-"+h+",-"+c(p/2,2)+"H"+h+"L0,"+c(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,f,m){if(l(f))return o;var h=c(2*p/i,2);return u(f,m,"M"+c(p/2,2)+",-"+h+"V"+h+"L-"+c(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,f,m){if(l(f))return o;var h=c(2*p/i,2);return u(f,m,"M-"+c(p/2,2)+",-"+h+"V"+h+"L"+c(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,f,m){if(l(f))return o;var h=c(.6*p,2),g=c(1.2*p,2);return u(f,m,"M-"+g+",-"+h+"H"+h+"V"+g+"Z")}},"triangle-se":{n:10,f:function(p,f,m){if(l(f))return o;var h=c(.6*p,2),g=c(1.2*p,2);return u(f,m,"M"+h+",-"+g+"V"+h+"H-"+g+"Z")}},"triangle-sw":{n:11,f:function(p,f,m){if(l(f))return o;var h=c(.6*p,2),g=c(1.2*p,2);return u(f,m,"M"+g+","+h+"H-"+h+"V-"+g+"Z")}},"triangle-nw":{n:12,f:function(p,f,m){if(l(f))return o;var h=c(.6*p,2),g=c(1.2*p,2);return u(f,m,"M-"+h+","+g+"V-"+h+"H"+g+"Z")}},pentagon:{n:13,f:function(p,f,m){if(l(f))return o;var h=c(.951*p,2),g=c(.588*p,2),v=c(-p,2),x=c(-.309*p,2);return u(f,m,"M"+h+","+x+"L"+g+","+c(.809*p,2)+"H-"+g+"L-"+h+","+x+"L0,"+v+"Z")}},hexagon:{n:14,f:function(p,f,m){if(l(f))return o;var h=c(p,2),g=c(p/2,2),v=c(p*i/2,2);return u(f,m,"M"+v+",-"+g+"V"+g+"L0,"+h+"L-"+v+","+g+"V-"+g+"L0,-"+h+"Z")}},hexagon2:{n:15,f:function(p,f,m){if(l(f))return o;var h=c(p,2),g=c(p/2,2),v=c(p*i/2,2);return u(f,m,"M-"+g+","+v+"H"+g+"L"+h+",0L"+g+",-"+v+"H-"+g+"L-"+h+",0Z")}},octagon:{n:16,f:function(p,f,m){if(l(f))return o;var h=c(.924*p,2),g=c(.383*p,2);return u(f,m,"M-"+g+",-"+h+"H"+g+"L"+h+",-"+g+"V"+g+"L"+g+","+h+"H-"+g+"L-"+h+","+g+"V-"+g+"Z")}},star:{n:17,f:function(p,f,m){if(l(f))return o;var h=1.4*p,g=c(.225*h,2),v=c(.951*h,2),x=c(.363*h,2),y=c(.588*h,2),A=c(-h,2),d=c(-.309*h,2),S=c(.118*h,2),k=c(.809*h,2);return u(f,m,"M"+g+","+d+"H"+v+"L"+x+","+S+"L"+y+","+k+"L0,"+c(.382*h,2)+"L-"+y+","+k+"L-"+x+","+S+"L-"+v+","+d+"H-"+g+"L0,"+A+"Z")}},hexagram:{n:18,f:function(p,f,m){if(l(f))return o;var h=c(.66*p,2),g=c(.38*p,2),v=c(.76*p,2);return u(f,m,"M-"+v+",0l-"+g+",-"+h+"h"+v+"l"+g+",-"+h+"l"+g+","+h+"h"+v+"l-"+g+","+h+"l"+g+","+h+"h-"+v+"l-"+g+","+h+"l-"+g+",-"+h+"h-"+v+"Z")}},"star-triangle-up":{n:19,f:function(p,f,m){if(l(f))return o;var h=c(p*i*.8,2),g=c(.8*p,2),v=c(1.6*p,2),x=c(4*p,2),y="A "+x+","+x+" 0 0 1 ";return u(f,m,"M-"+h+","+g+y+h+","+g+y+"0,-"+v+y+"-"+h+","+g+"Z")}},"star-triangle-down":{n:20,f:function(p,f,m){if(l(f))return o;var h=c(p*i*.8,2),g=c(.8*p,2),v=c(1.6*p,2),x=c(4*p,2),y="A "+x+","+x+" 0 0 1 ";return u(f,m,"M"+h+",-"+g+y+"-"+h+",-"+g+y+"0,"+v+y+h+",-"+g+"Z")}},"star-square":{n:21,f:function(p,f,m){if(l(f))return o;var h=c(1.1*p,2),g=c(2*p,2),v="A "+g+","+g+" 0 0 1 ";return u(f,m,"M-"+h+",-"+h+v+"-"+h+","+h+v+h+","+h+v+h+",-"+h+v+"-"+h+",-"+h+"Z")}},"star-diamond":{n:22,f:function(p,f,m){if(l(f))return o;var h=c(1.4*p,2),g=c(1.9*p,2),v="A "+g+","+g+" 0 0 1 ";return u(f,m,"M-"+h+",0"+v+"0,"+h+v+h+",0"+v+"0,-"+h+v+"-"+h+",0Z")}},"diamond-tall":{n:23,f:function(p,f,m){if(l(f))return o;var h=c(.7*p,2),g=c(1.4*p,2);return u(f,m,"M0,"+g+"L"+h+",0L0,-"+g+"L-"+h+",0Z")}},"diamond-wide":{n:24,f:function(p,f,m){if(l(f))return o;var h=c(1.4*p,2),g=c(.7*p,2);return u(f,m,"M0,"+g+"L"+h+",0L0,-"+g+"L-"+h+",0Z")}},hourglass:{n:25,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"H-"+h+"L"+h+",-"+h+"H-"+h+"Z")},noDot:!0},bowtie:{n:26,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"V-"+h+"L-"+h+","+h+"V-"+h+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,f,m){if(l(f))return o;var h=c(p,2),g=c(p/t,2);return u(f,m,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,f,m){if(l(f))return o;var h=c(1.3*p,2);return u(f,m,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM0,-"+h+"V"+h+"M-"+h+",0H"+h)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,f,m){if(l(f))return o;var h=c(1.3*p,2),g=c(.65*p,2);return u(f,m,"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM-"+g+",-"+g+"L"+g+","+g+"M-"+g+","+g+"L"+g+",-"+g)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,f,m){if(l(f))return o;var h=c(1.4*p,2);return u(f,m,"M0,"+h+"V-"+h+"M"+h+",0H-"+h)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,f,m){if(l(f))return o;var h=c(1.2*p,2),g=c(.85*p,2);return u(f,m,"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,f,m){if(l(f))return o;var h=c(p/2,2),g=c(p,2);return u(f,m,"M"+h+","+g+"V-"+g+"M"+(h-g)+",-"+g+"V"+g+"M"+g+","+h+"H-"+g+"M-"+g+","+(h-g)+"H"+g)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,f,m){if(l(f))return o;var h=c(1.2*p,2),g=c(1.6*p,2),v=c(.8*p,2);return u(f,m,"M-"+h+","+v+"L0,0M"+h+","+v+"L0,0M0,-"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,f,m){if(l(f))return o;var h=c(1.2*p,2),g=c(1.6*p,2),v=c(.8*p,2);return u(f,m,"M-"+h+",-"+v+"L0,0M"+h+",-"+v+"L0,0M0,"+g+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,f,m){if(l(f))return o;var h=c(1.2*p,2),g=c(1.6*p,2),v=c(.8*p,2);return u(f,m,"M"+v+","+h+"L0,0M"+v+",-"+h+"L0,0M-"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,f,m){if(l(f))return o;var h=c(1.2*p,2),g=c(1.6*p,2),v=c(.8*p,2);return u(f,m,"M-"+v+","+h+"L0,0M-"+v+",-"+h+"L0,0M"+g+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,f,m){if(l(f))return o;var h=c(1.4*p,2);return u(f,m,"M"+h+",0H-"+h)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,f,m){if(l(f))return o;var h=c(1.4*p,2);return u(f,m,"M0,"+h+"V-"+h)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M"+h+","+h+"L-"+h+",-"+h)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M0,0L-"+h+","+c(2*p,2)+"H"+h+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M0,0L-"+h+",-"+c(2*p,2)+"H"+h+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,f,m){if(l(f))return o;var h=c(2*p,2),g=c(p,2);return u(f,m,"M0,0L"+h+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,f,m){if(l(f))return o;var h=c(2*p,2),g=c(p,2);return u(f,m,"M0,0L-"+h+",-"+g+"V"+g+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M-"+h+",0H"+h+"M0,0L-"+h+","+c(2*p,2)+"H"+h+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,f,m){if(l(f))return o;var h=c(p,2);return u(f,m,"M-"+h+",0H"+h+"M0,0L-"+h+",-"+c(2*p,2)+"H"+h+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,f,m){if(l(f))return o;var h=c(2*p,2),g=c(p,2);return u(f,m,"M0,-"+g+"V"+g+"M0,0L"+h+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,f,m){if(l(f))return o;var h=c(2*p,2),g=c(p,2);return u(f,m,"M0,-"+g+"V"+g+"M0,0L-"+h+",-"+g+"V"+g+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,f,m){if(l(f))return o;var h=n/2.5,g=2*p*a(h),v=2*p*s(h);return u(f,m,"M0,0L"+-g+","+v+"L"+g+","+v+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,f,m){if(l(f))return o;var h=n/4,g=2*p*a(h),v=2*p*s(h);return u(f,m,"M0,0L"+-g+","+v+"A "+2*p+","+2*p+" 0 0 1 "+g+","+v+"Z")},backoff:.4,noDot:!0}}},97644:function(R){"use strict";R.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(R,C,e){"use strict";var _=e(38248),T=e(24040),r=e(54460),w=e(3400),b=e(93792);function c(o,t,i,n){var a=t["error_"+n]||{},s=[];if(a.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=b(a),u=0;u<o.length;u++){var p=o[u],f=p.i;if(f===void 0)f=u;else if(f===null)continue;var m=p[n];if(_(i.c2l(m))){var h=l(m,f);if(_(h[0])&&_(h[1])){var g=p[n+"s"]=m-h[0],v=p[n+"h"]=m+h[1];s.push(g,v)}}}var x=i._id,y=t._extremes[x],A=r.findExtremes(i,s,w.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(A.min),y.max=y.max.concat(A.max)}}R.exports=function(o){for(var t=o.calcdata,i=0;i<t.length;i++){var n=t[i],a=n[0].trace;if(a.visible===!0&&T.traceIs(a,"errorBarsOK")){var s=r.getFromId(o,a.xaxis),l=r.getFromId(o,a.yaxis);c(n,a,s,"x"),c(n,a,l,"y")}}}},93792:function(R){"use strict";function C(e,_){return e==="percent"?function(T){return Math.abs(T*_/100)}:e==="constant"?function(){return Math.abs(_)}:e==="sqrt"?function(T){return Math.sqrt(Math.abs(T))}:void 0}R.exports=function(e){var _=e.type,T=e.symmetric;if(_==="data"){var r=e.array||[];if(T)return function(o,t){var i=+r[t];return[i,i]};var w=e.arrayminus||[];return function(o,t){var i=+r[t],n=+w[t];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var b=C(_,e.value),c=C(_,e.valueminus);return T||e.valueminus===void 0?function(o){var t=b(o);return[t,t]}:function(o){return[c(o),b(o)]}}},65200:function(R,C,e){"use strict";var _=e(38248),T=e(24040),r=e(3400),w=e(31780),b=e(97644);R.exports=function(c,o,t,i){var n="error_"+i.axis,a=w.newContainer(o,n),s=c[n]||{};function l(m,h){return r.coerce(s,a,b,m,h)}if(l("visible",s.array!==void 0||s.value!==void 0||s.type==="sqrt")!==!1){var u=l("type","array"in s?"data":"percent"),p=!0;u!=="sqrt"&&(p=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in s))),u==="data"?(l("array"),l("traceref"),p||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),p||l("valueminus"));var f="copy_"+i.inherit+"style";i.inherit&&(o["error_"+i.inherit]||{}).visible&&l(f,!(s.color||_(s.thickness)||_(s.width))),i.inherit&&a[f]||(l("color",t),l("thickness"),l("width",T.traceIs(o,"gl3d")?0:4))}}},64968:function(R,C,e){"use strict";var _=e(3400),T=e(67824).overrideAll,r=e(97644),w={error_x:_.extendFlat({},r),error_y:_.extendFlat({},r)};delete w.error_x.copy_zstyle,delete w.error_y.copy_zstyle,delete w.error_y.copy_ystyle;var b={error_x:_.extendFlat({},r),error_y:_.extendFlat({},r),error_z:_.extendFlat({},r)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,R.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:w,bar:w,histogram:w,scatter3d:T(b,"calc","nested"),scattergl:T(w,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(c,o,t){(o.error_y||{}).visible&&(t.yerr=c.yh-c.y,o.error_y.symmetric||(t.yerrneg=c.y-c.ys)),(o.error_x||{}).visible&&(t.xerr=c.xh-c.x,o.error_x.symmetric||(t.xerrneg=c.x-c.xs))}}},78512:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(43616),w=e(43028);R.exports=function(b,c,o,t){var i=o.xaxis,n=o.yaxis,a=t&&t.duration>0,s=b._context.staticPlot;c.each(function(l){var u,p=l[0].trace,f=p.error_x||{},m=p.error_y||{};p.ids&&(u=function(x){return x.id});var h=w.hasMarkers(p)&&p.marker.maxdisplayed>0;m.visible||f.visible||(l=[]);var g=_.select(this).selectAll("g.errorbar").data(l,u);if(g.exit().remove(),l.length){f.visible||g.selectAll("path.xerror").remove(),m.visible||g.selectAll("path.yerror").remove(),g.style("opacity",1);var v=g.enter().append("g").classed("errorbar",!0);a&&v.style("opacity",0).transition().duration(t.duration).style("opacity",1),r.setClipUrl(g,o.layerClipId,b),g.each(function(x){var y=_.select(this),A=function(O,P,F){var U={x:P.c2p(O.x),y:F.c2p(O.y)};return O.yh!==void 0&&(U.yh=F.c2p(O.yh),U.ys=F.c2p(O.ys),T(U.ys)||(U.noYS=!0,U.ys=F.c2p(O.ys,!0))),O.xh!==void 0&&(U.xh=P.c2p(O.xh),U.xs=P.c2p(O.xs),T(U.xs)||(U.noXS=!0,U.xs=P.c2p(O.xs,!0))),U}(x,i,n);if(!h||x.vis){var d,S=y.select("path.yerror");if(m.visible&&T(A.x)&&T(A.yh)&&T(A.ys)){var k=m.width;d="M"+(A.x-k)+","+A.yh+"h"+2*k+"m-"+k+",0V"+A.ys,A.noYS||(d+="m-"+k+",0h"+2*k),S.size()?a&&(S=S.transition().duration(t.duration).ease(t.easing)):S=y.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",d)}else S.remove();var E=y.select("path.xerror");if(f.visible&&T(A.y)&&T(A.xh)&&T(A.xs)){var L=(f.copy_ystyle?m:f).width;d="M"+A.xh+","+(A.y-L)+"v"+2*L+"m0,-"+L+"H"+A.xs,A.noXS||(d+="m0,-"+L+"v"+2*L),E.size()?a&&(E=E.transition().duration(t.duration).ease(t.easing)):E=y.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",d)}else E.remove()}})}})}},92036:function(R,C,e){"use strict";var _=e(33428),T=e(76308);R.exports=function(r){r.each(function(w){var b=w[0].trace,c=b.error_y||{},o=b.error_x||{},t=_.select(this);t.selectAll("path.yerror").style("stroke-width",c.thickness+"px").call(T.stroke,c.color),o.copy_ystyle&&(o=c),t.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(T.stroke,o.color)})}},55756:function(R,C,e){"use strict";var _=e(25376),T=e(65460).hoverlabel,r=e(92880).extendFlat;R.exports={hoverlabel:{bgcolor:r({},T.bgcolor,{arrayOk:!0}),bordercolor:r({},T.bordercolor,{arrayOk:!0}),font:_({arrayOk:!0,editType:"none"}),align:r({},T.align,{arrayOk:!0}),namelength:r({},T.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(R,C,e){"use strict";var _=e(3400),T=e(24040);function r(w,b,c,o){o=o||_.identity,Array.isArray(w)&&(b[0][c]=o(w))}R.exports=function(w){var b=w.calcdata,c=w._fullLayout;function o(s){return function(l){return _.coerceHoverinfo({hoverinfo:l},{_module:s._module},c)}}for(var t=0;t<b.length;t++){var i=b[t],n=i[0].trace;if(!T.traceIs(n,"pie-like")){var a=T.traceIs(n,"2dMap")?r:_.fillArray;a(n.hoverinfo,i,"hi",o(n)),n.hovertemplate&&a(n.hovertemplate,i,"ht"),n.hoverlabel&&(a(n.hoverlabel.bgcolor,i,"hbg"),a(n.hoverlabel.bordercolor,i,"hbc"),a(n.hoverlabel.font.size,i,"hts"),a(n.hoverlabel.font.color,i,"htc"),a(n.hoverlabel.font.family,i,"htf"),a(n.hoverlabel.font.weight,i,"htw"),a(n.hoverlabel.font.style,i,"hty"),a(n.hoverlabel.font.variant,i,"htv"),a(n.hoverlabel.namelength,i,"hnl"),a(n.hoverlabel.align,i,"hta"))}}}},62376:function(R,C,e){"use strict";var _=e(24040),T=e(83292).hover;R.exports=function(r,w,b){var c=_.getComponentMethod("annotations","onClick")(r,r._hoverdata);function o(){r.emit("plotly_click",{points:r._hoverdata,event:w})}b!==void 0&&T(r,w,b,!0),r._hoverdata&&w&&w.target&&(c&&c.then?c.then(o):o(),w.stopImmediatePropagation&&w.stopImmediatePropagation())}},92456:function(R){"use strict";R.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(R,C,e){"use strict";var _=e(3400),T=e(55756),r=e(16132);R.exports=function(w,b,c,o){var t=_.extendFlat({},o.hoverlabel);b.hovertemplate&&(t.namelength=-1),r(w,b,function(i,n){return _.coerce(w,b,T,i,n)},t)}},10624:function(R,C,e){"use strict";var _=e(3400);C.getSubplot=function(o){return o.subplot||o.xaxis+o.yaxis||o.geo},C.isTraceInSubplots=function(o,t){if(o.type==="splom"){for(var i=o.xaxes||[],n=o.yaxes||[],a=0;a<i.length;a++)for(var s=0;s<n.length;s++)if(t.indexOf(i[a]+n[s])!==-1)return!0;return!1}return t.indexOf(C.getSubplot(o))!==-1},C.flat=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=t;return i},C.p2c=function(o,t){for(var i=new Array(o.length),n=0;n<o.length;n++)i[n]=o[n].p2c(t);return i},C.getDistanceFunction=function(o,t,i,n){return o==="closest"?n||C.quadrature(t,i):o.charAt(0)==="x"?t:i},C.getClosest=function(o,t,i){if(i.index!==!1)i.index>=0&&i.index<o.length?i.distance=0:i.index=!1;else for(var n=0;n<o.length;n++){var a=t(o[n]);a<=i.distance&&(i.index=n,i.distance=a)}return i},C.inbox=function(o,t,i){return o*t<0||o===0?i:1/0},C.quadrature=function(o,t){return function(i){var n=o(i),a=t(i);return Math.sqrt(n*n+a*a)}},C.makeEventData=function(o,t,i){var n="index"in o?o.index:o.pointNumber,a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var s=t._indexToPoints[n];s.length===1?a.pointIndex=s[0]:a.pointIndices=s}else a.pointIndex=n;return t._module.eventData?a=t._module.eventData(a,o,t,i,n):("xVal"in o?a.x=o.xVal:"x"in o&&(a.x=o.x),"yVal"in o?a.y=o.yVal:"y"in o&&(a.y=o.y),o.xa&&(a.xaxis=o.xa),o.ya&&(a.yaxis=o.ya),o.zLabelVal!==void 0&&(a.z=o.zLabelVal)),C.appendArrayPointValue(a,t,n),a},C.appendArrayPointValue=function(o,t,i){var n=t._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var s=n[a],l=r(s);if(o[l]===void 0){var u=w(_.nestedProperty(t,s).get(),i);u!==void 0&&(o[l]=u)}}},C.appendArrayMultiPointValues=function(o,t,i){var n=t._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var s=n[a],l=r(s);if(o[l]===void 0){for(var u=_.nestedProperty(t,s).get(),p=new Array(i.length),f=0;f<i.length;f++)p[f]=w(u,i[f]);o[l]=p}}};var T={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function r(o){return T[o]||o}function w(o,t){return Array.isArray(t)?Array.isArray(o)&&Array.isArray(o[t[0]])?o[t[0]][t[1]]:void 0:o[t]}var b={x:!0,y:!0},c={"x unified":!0,"y unified":!0};C.isUnifiedHover=function(o){return typeof o=="string"&&!!c[o]},C.isXYhover=function(o){return typeof o=="string"&&!!b[o]}},83292:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(49760),w=e(3400),b=w.pushUnique,c=w.strTranslate,o=w.strRotate,t=e(95924),i=e(72736),n=e(72213),a=e(43616),s=e(76308),l=e(86476),u=e(54460),p=e(33816).zindexSeparator,f=e(24040),m=e(10624),h=e(92456),g=e(77864),v=e(31140),x=h.YANGLE,y=Math.PI*x/180,A=1/Math.sin(y),d=Math.cos(y),S=Math.sin(y),k=h.HOVERARROWSIZE,E=h.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(te,oe){return te.distance-oe.distance}function F(te){return[te.trace.index,te.index,te.x0,te.y0,te.name,te.attr,te.xa?te.xa._id:"",te.ya?te.ya._id:""].join(",")}C.hover=function(te,oe,se,ce){te=w.getGraphDiv(te);var ye=oe.target;w.throttle(te._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){(function(me,fe,pe,ge,ke){pe||(pe="xy"),typeof pe=="string"&&(pe=pe.split(p)[0]);var Ce,de,ae,re=Array.isArray(pe)?pe:[pe],he=me._fullLayout,Se=he.hoversubplots,xe=he._plots||[],Te=xe[pe],Ae=he._has("cartesian"),Pe=fe.hovermode||he.hovermode,De=(Pe||"").charAt(0)==="x",ve=(Pe||"").charAt(0)==="y";if(Ae&&(De||ve)&&Se==="axis"){for(var we=re.length,Ee=0;Ee<we;Ee++)if(xe[Ce=re[Ee]]){de=u.getFromId(me,Ce,"x"),ae=u.getFromId(me,Ce,"y");var Fe=(De?de:ae)._subplotsWith;if(Fe&&Fe.length)for(var Le=0;Le<Fe.length;Le++)b(re,Fe[Le])}}if(Te&&Se!=="single"){var je=Te.overlays.map(function(Wt){return Wt.id});re=re.concat(je)}for(var Ge=re.length,Je=new Array(Ge),rt=new Array(Ge),ot=!1,yt=0;yt<Ge;yt++)if(xe[Ce=re[yt]])ot=!0,Je[yt]=xe[Ce].xaxis,rt[yt]=xe[Ce].yaxis;else{if(!he[Ce]||!he[Ce]._subplot)return void w.warn("Unrecognized subplot: "+Ce);var _t=he[Ce]._subplot;Je[yt]=_t.xaxis,rt[yt]=_t.yaxis}if(Pe&&!ot&&(Pe="closest"),["x","y","closest","x unified","y unified"].indexOf(Pe)===-1||!me.calcdata||me.querySelector(".zoombox")||me._dragging)return l.unhoverRaw(me,fe);var mt=he.hoverdistance;mt===-1&&(mt=1/0);var tt=he.spikedistance;tt===-1&&(tt=1/0);var Qe,Dt,zt,pt,vt,We,Ze,Ne,Xe,st,lt,xt,bt,Ve=[],Be=[],at={hLinePoint:null,vLinePoint:null},ht=!1;if(Array.isArray(fe))for(Pe="array",zt=0;zt<fe.length;zt++)(vt=me.calcdata[fe[zt].curveNumber||0])&&(We=vt[0].trace,vt[0].trace.hoverinfo!=="skip"&&(Be.push(vt),We.orientation==="h"&&(ht=!0)));else{var dt,it,kt=me.calcdata.slice();for(kt.sort(function(Wt,gn){return(Wt[0].trace.zorder||0)-(gn[0].trace.zorder||0)}),pt=0;pt<kt.length;pt++)vt=kt[pt],(We=vt[0].trace).hoverinfo!=="skip"&&m.isTraceInSubplots(We,re)&&(Be.push(vt),We.orientation==="h"&&(ht=!0));if(ke){if(t.triggerHandler(me,"plotly_beforehover",fe)===!1)return;var Tt=ke.getBoundingClientRect();dt=fe.clientX-Tt.left,it=fe.clientY-Tt.top,he._calcInverseTransform(me);var St=w.apply3DTransform(he._invTransform)(dt,it);if(dt=St[0],it=St[1],dt<0||dt>Je[0]._length||it<0||it>rt[0]._length)return l.unhoverRaw(me,fe)}else dt="xpx"in fe?fe.xpx:Je[0]._length/2,it="ypx"in fe?fe.ypx:rt[0]._length/2;if(fe.pointerX=dt+Je[0]._offset,fe.pointerY=it+rt[0]._offset,Qe="xval"in fe?m.flat(re,fe.xval):m.p2c(Je,dt),Dt="yval"in fe?m.flat(re,fe.yval):m.p2c(rt,it),!T(Qe[0])||!T(Dt[0]))return w.warn("Fx.hover failed",fe,me),l.unhoverRaw(me,fe)}var wt=1/0;function At(Wt,gn){for(pt=0;pt<Be.length;pt++)if((vt=Be[pt])&&vt[0]&&vt[0].trace&&(We=vt[0].trace).visible===!0&&We._length!==0&&["carpet","contourcarpet"].indexOf(We._module.name)===-1){if(Xe=Pe,m.isUnifiedHover(Xe)&&(Xe=Xe.charAt(0)),We.type==="splom"?Ze=re[Ne=0]:(Ze=m.getSubplot(We),Ne=re.indexOf(Ze)),xt={cd:vt,trace:We,xa:Je[Ne],ya:rt[Ne],maxHoverDistance:mt,maxSpikeDistance:tt,index:!1,distance:Math.min(wt,mt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:We.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[Ze]&&(xt.subplot=he[Ze]._subplot),he._splomScenes&&he._splomScenes[We.uid]&&(xt.scene=he._splomScenes[We.uid]),Xe==="array"){var pn=fe[pt];"pointNumber"in pn?(xt.index=pn.pointNumber,Xe="closest"):(Xe="","xval"in pn&&(st=pn.xval,Xe="x"),"yval"in pn&&(lt=pn.yval,Xe=Xe?"closest":"y"))}else Wt!==void 0&&gn!==void 0?(st=Wt,lt=gn):(st=Qe[Ne],lt=Dt[Ne]);if(bt=Ve.length,mt!==0)if(We._module&&We._module.hoverPoints){var kn=We._module.hoverPoints(xt,st,lt,Xe,{finiteRange:!0,hoverLayer:he._hoverlayer,hoversubplots:Se,gd:me});if(kn)for(var vn,cn=0;cn<kn.length;cn++)vn=kn[cn],T(vn.x0)&&T(vn.y0)&&Ve.push(V(vn,Pe))}else w.log("Unrecognized trace type in hover:",We);if(Pe==="closest"&&Ve.length>bt&&(Ve.splice(0,bt),wt=Ve[0].distance),Ae&&tt!==0&&Ve.length===0){xt.distance=tt,xt.index=!1;var qt=We._module.hoverPoints(xt,st,lt,"closest",{hoverLayer:he._hoverlayer});if(qt&&(qt=qt.filter(function(Pn){return Pn.spikeDistance<=tt})),qt&&qt.length){var Nt,tn=qt.filter(function(Pn){return Pn.xa.showspikes&&Pn.xa.spikesnap!=="hovered data"});if(tn.length){var _n=tn[0];T(_n.x0)&&T(_n.y0)&&(Nt=jt(_n),(!at.vLinePoint||at.vLinePoint.spikeDistance>Nt.spikeDistance)&&(at.vLinePoint=Nt))}var Fn=qt.filter(function(Pn){return Pn.ya.showspikes&&Pn.ya.spikesnap!=="hovered data"});if(Fn.length){var zn=Fn[0];T(zn.x0)&&T(zn.y0)&&(Nt=jt(zn),(!at.hLinePoint||at.hLinePoint.spikeDistance>Nt.spikeDistance)&&(at.hLinePoint=Nt))}}}}}function Ft(Wt,gn,pn){for(var kn,vn=null,cn=1/0,qt=0;qt<Wt.length;qt++)de&&de._id!==Wt[qt].xa._id||ae&&ae._id!==Wt[qt].ya._id||(kn=Wt[qt].spikeDistance,pn&&qt===0&&(kn=-1/0),kn<=cn&&kn<=gn&&(vn=Wt[qt],cn=kn));return vn}function jt(Wt){return Wt?{xa:Wt.xa,ya:Wt.ya,x:Wt.xSpike!==void 0?Wt.xSpike:(Wt.x0+Wt.x1)/2,y:Wt.ySpike!==void 0?Wt.ySpike:(Wt.y0+Wt.y1)/2,distance:Wt.distance,spikeDistance:Wt.spikeDistance,curveNumber:Wt.trace.index,color:Wt.color,pointNumber:Wt.index}:null}At();var rn={fullLayout:he,container:he._hoverlayer,event:fe},nn=me._spikepoints,on={vLinePoint:at.vLinePoint,hLinePoint:at.hLinePoint};me._spikepoints=on;var Ht=function(){var Wt=Ve.filter(function(pn){return de&&de._id===pn.xa._id&&ae&&ae._id===pn.ya._id}),gn=Ve.filter(function(pn){return!(de&&de._id===pn.xa._id&&ae&&ae._id===pn.ya._id)});Wt.sort(P),gn.sort(P),Ve=function(pn,kn){for(var vn=kn.charAt(0),cn=[],qt=[],Nt=[],tn=0;tn<pn.length;tn++){var _n=pn[tn];f.traceIs(_n.trace,"bar-like")||f.traceIs(_n.trace,"box-violin")?Nt.push(_n):_n.trace[vn+"period"]?qt.push(_n):cn.push(_n)}return cn.concat(qt).concat(Nt)}(Ve=Wt.concat(gn),Pe)};Ht();var $t=Pe.charAt(0),bn=($t==="x"||$t==="y")&&Ve[0]&&O[Ve[0].trace.type];if(Ae&&tt!==0&&Ve.length!==0){var ln=Ft(Ve.filter(function(Wt){return Wt.ya.showspikes}),tt,bn);at.hLinePoint=jt(ln);var Kt=Ft(Ve.filter(function(Wt){return Wt.xa.showspikes}),tt,bn);at.vLinePoint=jt(Kt)}if(Ve.length===0){var fn=l.unhoverRaw(me,fe);return!Ae||at.hLinePoint===null&&at.vLinePoint===null||ne(nn)&&q(me,at,rn),fn}if(Ae&&ne(nn)&&q(me,at,rn),m.isXYhover(Xe)&&Ve[0].length!==0&&Ve[0].trace.type!=="splom"){var en=Ve[0],un=(Ve=L[en.trace.type]?Ve.filter(function(Wt){return Wt.trace.index===en.trace.index}):[en]).length;At(K("x",en,he),K("y",en,he));var An,wn=[],On={},Tn=0,Cn=function(Wt){var gn=L[Wt.trace.type]?F(Wt):Wt.trace.index;if(On[gn]){var pn=On[gn]-1,kn=wn[pn];pn>0&&Math.abs(Wt.distance)<Math.abs(kn.distance)&&(wn[pn]=Wt)}else Tn++,On[gn]=Tn,wn.push(Wt)};for(An=0;An<un;An++)Cn(Ve[An]);for(An=Ve.length-1;An>un-1;An--)Cn(Ve[An]);Ve=wn,Ht()}var Bn=me._hoverdata,Xn=[],cr=ee(me),Yn=J(me);for(zt=0;zt<Ve.length;zt++){var jn=Ve[zt],Kn=m.makeEventData(jn,jn.trace,jn.cd);if(jn.hovertemplate!==!1){var or=!1;jn.cd[jn.index]&&jn.cd[jn.index].ht&&(or=jn.cd[jn.index].ht),jn.hovertemplate=or||jn.trace.hovertemplate||!1}if(jn.xa&&jn.ya){var Qt=jn.x0+jn.xa._offset,an=jn.x1+jn.xa._offset,Dn=jn.y0+jn.ya._offset,yn=jn.y1+jn.ya._offset,Ln=Math.min(Qt,an),Vn=Math.max(Qt,an),Un=Math.min(Dn,yn),er=Math.max(Dn,yn);Kn.bbox={x0:Ln+Yn,x1:Vn+Yn,y0:Un+cr,y1:er+cr}}jn.eventData=[Kn],Xn.push(Kn)}me._hoverdata=Xn;var fr=Pe==="y"&&(Be.length>1||Ve.length>1)||Pe==="closest"&&ht&&Ve.length>1,Xt=s.combine(he.plot_bgcolor||s.background,he.paper_bgcolor),mn=I(Ve,{gd:me,hovermode:Pe,rotateLabels:fr,bgColor:Xt,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance}),Pt=mn.hoverLabels;if(m.isUnifiedHover(Pe)||(function(Wt,gn,pn,kn){var vn,cn,qt,Nt,tn,_n,Fn,zn=gn?"xa":"ya",Pn=gn?"ya":"xa",$n=0,Wn=1,tr=Wt.size(),qn=new Array(tr),Jn=0,sr=kn.minX,wr=kn.maxX,pr=kn.minY,rr=kn.maxY,yr=function(Rr){return Rr*pn._invScaleX},kr=function(Rr){return Rr*pn._invScaleY};function Nr(Rr){var aa=Rr[0],da=Rr[Rr.length-1];if(cn=aa.pmin-aa.pos-aa.dp+aa.size,qt=da.pos+da.dp+da.size-aa.pmax,cn>.01){for(tn=Rr.length-1;tn>=0;tn--)Rr[tn].dp+=cn;vn=!1}if(!(qt<.01)){if(cn<-.01){for(tn=Rr.length-1;tn>=0;tn--)Rr[tn].dp-=qt;vn=!1}if(vn){var Vi=0;for(Nt=0;Nt<Rr.length;Nt++)(_n=Rr[Nt]).pos+_n.dp+_n.size>aa.pmax&&Vi++;for(Nt=Rr.length-1;Nt>=0&&!(Vi<=0);Nt--)(_n=Rr[Nt]).pos>aa.pmax-1&&(_n.del=!0,Vi--);for(Nt=0;Nt<Rr.length&&!(Vi<=0);Nt++)if((_n=Rr[Nt]).pos<aa.pmin+1)for(_n.del=!0,Vi--,qt=2*_n.size,tn=Rr.length-1;tn>=0;tn--)Rr[tn].dp-=qt;for(Nt=Rr.length-1;Nt>=0&&!(Vi<=0);Nt--)(_n=Rr[Nt]).pos+_n.dp+_n.size>aa.pmax&&(_n.del=!0,Vi--)}}}for(Wt.each(function(Rr){var aa=Rr[zn],da=Rr[Pn],Vi=aa._id.charAt(0)==="x",Vo=aa.range;Jn===0&&Vo&&Vo[0]>Vo[1]!==Vi&&(Wn=-1);var ba=0,po=Vi?pn.width:pn.height;if(pn.hovermode==="x"||pn.hovermode==="y"){var vo,go,za=W(Rr,gn),Qa=Rr.anchor,yo=Qa==="end"?-1:1;if(Qa==="middle")go=(vo=Rr.crossPos+(Vi?kr(za.y-Rr.by/2):yr(Rr.bx/2+Rr.tx2width/2)))+(Vi?kr(Rr.by):yr(Rr.bx));else if(Vi)go=(vo=Rr.crossPos+kr(k+za.y)-kr(Rr.by/2-k))+kr(Rr.by);else{var ai=yr(yo*k+za.x),Fi=ai+yr(yo*Rr.bx);vo=Rr.crossPos+Math.min(ai,Fi),go=Rr.crossPos+Math.max(ai,Fi)}Vi?pr!==void 0&&rr!==void 0&&Math.min(go,rr)-Math.max(vo,pr)>1&&(da.side==="left"?(ba=da._mainLinePosition,po=pn.width):po=da._mainLinePosition):sr!==void 0&&wr!==void 0&&Math.min(go,wr)-Math.max(vo,sr)>1&&(da.side==="top"?(ba=da._mainLinePosition,po=pn.height):po=da._mainLinePosition)}qn[Jn++]=[{datum:Rr,traceIndex:Rr.trace.index,dp:0,pos:Rr.pos,posref:Rr.posref,size:Rr.by*(Vi?A:1)/2,pmin:ba,pmax:po}]}),qn.sort(function(Rr,aa){return Rr[0].posref-aa[0].posref||Wn*(aa[0].traceIndex-Rr[0].traceIndex)});!vn&&$n<=tr;){for($n++,vn=!0,Nt=0;Nt<qn.length-1;){var ti=qn[Nt],mi=qn[Nt+1],Wi=ti[ti.length-1],ui=mi[0];if((cn=Wi.pos+Wi.dp+Wi.size-ui.pos-ui.dp+ui.size)>.01){for(tn=mi.length-1;tn>=0;tn--)mi[tn].dp+=cn;for(ti.push.apply(ti,mi),qn.splice(Nt+1,1),Fn=0,tn=ti.length-1;tn>=0;tn--)Fn+=ti[tn].dp;for(qt=Fn/ti.length,tn=ti.length-1;tn>=0;tn--)ti[tn].dp-=qt;vn=!1}else Nt++}qn.forEach(Nr)}for(Nt=qn.length-1;Nt>=0;Nt--){var Di=qn[Nt];for(tn=Di.length-1;tn>=0;tn--){var pa=Di[tn],Da=pa.datum;Da.offset=pa.dp,Da.del=pa.del}}}(Pt,fr,he,mn.commonLabelBoundingBox),B(Pt,fr,he._invScaleX,he._invScaleY)),ke&&ke.tagName){var Zt=f.getComponentMethod("annotations","hasClickToShow")(me,Xn);n(_.select(ke),Zt?"pointer":"")}ke&&!ge&&function(Wt,gn,pn){if(!pn||pn.length!==Wt._hoverdata.length)return!0;for(var kn=pn.length-1;kn>=0;kn--){var vn=pn[kn],cn=Wt._hoverdata[kn];if(vn.curveNumber!==cn.curveNumber||String(vn.pointNumber)!==String(cn.pointNumber)||String(vn.pointNumbers)!==String(cn.pointNumbers))return!0}return!1}(me,0,Bn)&&(Bn&&me.emit("plotly_unhover",{event:fe,points:Bn}),me.emit("plotly_hover",{event:fe,points:me._hoverdata,xaxes:Je,yaxes:rt,xvals:Qe,yvals:Dt}))})(te,oe,se,ce,ye)})},C.loneHover=function(te,oe){var se=!0;Array.isArray(te)||(se=!1,te=[te]);var ce=oe.gd,ye=ee(ce),me=J(ce),fe=I(te.map(function(ke){var Ce=ke._x0||ke.x0||ke.x||0,de=ke._x1||ke.x1||ke.x||0,ae=ke._y0||ke.y0||ke.y||0,re=ke._y1||ke.y1||ke.y||0,he=ke.eventData;if(he){var Se=Math.min(Ce,de),xe=Math.max(Ce,de),Te=Math.min(ae,re),Ae=Math.max(ae,re),Pe=ke.trace;if(f.traceIs(Pe,"gl3d")){var De=ce._fullLayout[Pe.scene]._scene.container,ve=De.offsetLeft,we=De.offsetTop;Se+=ve,xe+=ve,Te+=we,Ae+=we}he.bbox={x0:Se+me,x1:xe+me,y0:Te+ye,y1:Ae+ye},oe.inOut_bbox&&oe.inOut_bbox.push(he.bbox)}else he=!1;return{color:ke.color||s.defaultLine,x0:ke.x0||ke.x||0,x1:ke.x1||ke.x||0,y0:ke.y0||ke.y||0,y1:ke.y1||ke.y||0,xLabel:ke.xLabel,yLabel:ke.yLabel,zLabel:ke.zLabel,text:ke.text,name:ke.name,idealAlign:ke.idealAlign,borderColor:ke.borderColor,fontFamily:ke.fontFamily,fontSize:ke.fontSize,fontColor:ke.fontColor,fontWeight:ke.fontWeight,fontStyle:ke.fontStyle,fontVariant:ke.fontVariant,nameLength:ke.nameLength,textAlign:ke.textAlign,trace:ke.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ke.hovertemplate||!1,hovertemplateLabels:ke.hovertemplateLabels||!1,eventData:he}}),{gd:ce,hovermode:"closest",rotateLabels:!1,bgColor:oe.bgColor||s.background,container:_.select(oe.container),outerContainer:oe.outerContainer||oe.container}).hoverLabels,pe=0,ge=0;return fe.sort(function(ke,Ce){return ke.y0-Ce.y0}).each(function(ke,Ce){var de=ke.y0-ke.by/2;ke.offset=de-5<pe?pe-de+5:0,pe=de+ke.by+ke.offset,Ce===oe.anchorIndex&&(ge=ke.offset)}).each(function(ke){ke.offset-=ge}),B(fe,!1,ce._fullLayout._invScaleX,ce._fullLayout._invScaleY),se?fe:fe.node()};var U=/<extra>([\s\S]*)<\/extra>/;function I(te,oe){var se=oe.gd,ce=se._fullLayout,ye=oe.hovermode,me=oe.rotateLabels,fe=oe.bgColor,pe=oe.container,ge=oe.outerContainer,ke=oe.commonLabelOpts||{};if(te.length===0)return[[]];var Ce=oe.fontFamily||h.HOVERFONT,de=oe.fontSize||h.HOVERFONTSIZE,ae=oe.fontWeight||ce.font.weight,re=oe.fontStyle||ce.font.style,he=oe.fontVariant||ce.font.variant,Se=oe.fontTextcase||ce.font.textcase,xe=oe.fontLineposition||ce.font.lineposition,Te=oe.fontShadow||ce.font.shadow,Ae=te[0],Pe=Ae.xa,De=Ae.ya,ve=ye.charAt(0),we=ve+"Label",Ee=Ae[we];if(Ee===void 0&&Pe.type==="multicategory")for(var Fe=0;Fe<te.length&&(Ee=te[Fe][we])===void 0;Fe++);var Le=Z(se,ge),je=Le.top,Ge=Le.width,Je=Le.height,rt=Ee!==void 0&&Ae.distance<=oe.hoverdistance&&(ye==="x"||ye==="y");if(rt){var ot,yt,_t=!0;for(ot=0;ot<te.length;ot++)if(_t&&te[ot].zLabel===void 0&&(_t=!1),yt=te[ot].hoverinfo||te[ot].trace.hoverinfo){var mt=Array.isArray(yt)?yt:yt.split("+");if(mt.indexOf("all")===-1&&mt.indexOf(ye)===-1){rt=!1;break}}_t&&(rt=!1)}var tt=pe.selectAll("g.axistext").data(rt?[0]:[]);tt.enter().append("g").classed("axistext",!0),tt.exit().remove();var Qe={minX:0,maxX:0,minY:0,maxY:0};if(tt.each(function(){var $t=_.select(this),bn=w.ensureSingle($t,"path","",function(Ln){Ln.style({"stroke-width":"1px"})}),ln=w.ensureSingle($t,"text","",function(Ln){Ln.attr("data-notex",1)}),Kt=ke.bgcolor||s.defaultLine,fn=ke.bordercolor||s.contrast(Kt),en=s.contrast(Kt),un=ke.font,An={weight:un.weight||ae,style:un.style||re,variant:un.variant||he,textcase:un.textcase||Se,lineposition:un.lineposition||xe,shadow:un.shadow||Te,family:un.family||Ce,size:un.size||de,color:un.color||en};bn.style({fill:Kt,stroke:fn}),ln.text(Ee).call(a.font,An).call(i.positionText,0,0).call(i.convertToTspans,se),$t.attr("transform","");var wn,On,Tn=Z(se,ln.node());if(ye==="x"){var Cn=Pe.side==="top"?"-":"";ln.attr("text-anchor","middle").call(i.positionText,0,Pe.side==="top"?je-Tn.bottom-k-E:je-Tn.top+k+E),wn=Pe._offset+(Ae.x0+Ae.x1)/2,On=De._offset+(Pe.side==="top"?0:De._length);var Bn=Tn.width/2+E,Xn=wn;wn<Bn?Xn=Bn:wn>ce.width-Bn&&(Xn=ce.width-Bn),bn.attr("d","M"+(wn-Xn)+",0L"+(wn-Xn+k)+","+Cn+k+"H"+Bn+"v"+Cn+(2*E+Tn.height)+"H"+-Bn+"V"+Cn+k+"H"+(wn-Xn-k)+"Z"),wn=Xn,Qe.minX=wn-Bn,Qe.maxX=wn+Bn,Pe.side==="top"?(Qe.minY=On-(2*E+Tn.height),Qe.maxY=On-E):(Qe.minY=On+E,Qe.maxY=On+(2*E+Tn.height))}else{var cr,Yn,jn;De.side==="right"?(cr="start",Yn=1,jn="",wn=Pe._offset+Pe._length):(cr="end",Yn=-1,jn="-",wn=Pe._offset),On=De._offset+(Ae.y0+Ae.y1)/2,ln.attr("text-anchor",cr),bn.attr("d","M0,0L"+jn+k+","+k+"V"+(E+Tn.height/2)+"h"+jn+(2*E+Tn.width)+"V-"+(E+Tn.height/2)+"H"+jn+k+"V-"+k+"Z"),Qe.minY=On-(E+Tn.height/2),Qe.maxY=On+(E+Tn.height/2),De.side==="right"?(Qe.minX=wn+k,Qe.maxX=wn+k+(2*E+Tn.width)):(Qe.minX=wn-k-(2*E+Tn.width),Qe.maxX=wn-k);var Kn,or=Tn.height/2,Qt=je-Tn.top-or,an="clip"+ce._uid+"commonlabel"+De._id;if(wn<Tn.width+2*E+k){Kn="M-"+(k+E)+"-"+or+"h-"+(Tn.width-E)+"V"+or+"h"+(Tn.width-E)+"Z";var Dn=Tn.width-wn+E;i.positionText(ln,Dn,Qt),cr==="end"&&ln.selectAll("tspan").each(function(){var Ln=_.select(this),Vn=a.tester.append("text").text(Ln.text()).call(a.font,An),Un=Z(se,Vn.node());Math.round(Un.width)<Math.round(Tn.width)&&Ln.attr("x",Dn-Un.width),Vn.remove()})}else i.positionText(ln,Yn*(E+k),Qt),Kn=null;var yn=ce._topclips.selectAll("#"+an).data(Kn?[0]:[]);yn.enter().append("clipPath").attr("id",an).append("path"),yn.exit().remove(),yn.select("path").attr("d",Kn),a.setClipUrl(ln,Kn?an:null,se)}$t.attr("transform",c(wn,On))}),m.isUnifiedHover(ye)){pe.selectAll("g.hovertext").remove();var Dt=te.filter(function($t){return $t.hoverinfo!=="none"});if(Dt.length===0)return[];var zt=ce.hoverlabel,pt=zt.font,vt={showlegend:!0,legend:{title:{text:Ee,font:pt},font:pt,bgcolor:zt.bgcolor,bordercolor:zt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ce.legend?ce.legend.traceorder:void 0,orientation:"v"}},We={font:pt};g(vt,We,se._fullData);var Ze=We.legend;Ze.entries=[];for(var Ne=0;Ne<Dt.length;Ne++){var Xe=Dt[Ne];if(Xe.hoverinfo!=="none"){var st=N(Xe,!0,ye,ce,Ee),lt=st[0],xt=st[1];Xe.name=xt,Xe.text=xt!==""?xt+" : "+lt:lt;var bt=Xe.cd[Xe.index];bt&&(bt.mc&&(Xe.mc=bt.mc),bt.mcc&&(Xe.mc=bt.mcc),bt.mlc&&(Xe.mlc=bt.mlc),bt.mlcc&&(Xe.mlc=bt.mlcc),bt.mlw&&(Xe.mlw=bt.mlw),bt.mrc&&(Xe.mrc=bt.mrc),bt.dir&&(Xe.dir=bt.dir)),Xe._distinct=!0,Ze.entries.push([Xe])}}Ze.entries.sort(function($t,bn){return $t[0].trace.index-bn[0].trace.index}),Ze.layer=pe,Ze._inHover=!0,Ze._groupTitleFont=zt.grouptitlefont,v(se,Ze);var Ve,Be,at,ht,dt=pe.select("g.legend"),it=Z(se,dt.node()),kt=it.width+2*E,Tt=it.height+2*E,St=Dt[0],wt=(St.x0+St.x1)/2,At=(St.y0+St.y1)/2,Ft=!(f.traceIs(St.trace,"bar-like")||f.traceIs(St.trace,"box-violin"));ve==="y"?Ft?(Be=At-E,Ve=At+E):(Be=Math.min.apply(null,Dt.map(function($t){return Math.min($t.y0,$t.y1)})),Ve=Math.max.apply(null,Dt.map(function($t){return Math.max($t.y0,$t.y1)}))):Be=Ve=w.mean(Dt.map(function($t){return($t.y0+$t.y1)/2}))-Tt/2,ve==="x"?Ft?(at=wt+E,ht=wt-E):(at=Math.max.apply(null,Dt.map(function($t){return Math.max($t.x0,$t.x1)})),ht=Math.min.apply(null,Dt.map(function($t){return Math.min($t.x0,$t.x1)}))):at=ht=w.mean(Dt.map(function($t){return($t.x0+$t.x1)/2}))-kt/2;var jt,rn,nn=Pe._offset,on=De._offset;return ht+=nn-kt,Be+=on-Tt,jt=(at+=nn)+kt<Ge&&at>=0?at:ht+kt<Ge&&ht>=0?ht:nn+kt<Ge?nn:at-wt<wt-ht+kt?Ge-kt:0,jt+=E,rn=(Ve+=on)+Tt<Je&&Ve>=0?Ve:Be+Tt<Je&&Be>=0?Be:on+Tt<Je?on:Ve-At<At-Be+Tt?Je-Tt:0,rn+=E,dt.attr("transform",c(jt-1,rn-1)),dt}var Ht=pe.selectAll("g.hovertext").data(te,function($t){return F($t)});return Ht.enter().append("g").classed("hovertext",!0).each(function(){var $t=_.select(this);$t.append("rect").call(s.fill,s.addOpacity(fe,.8)),$t.append("text").classed("name",!0),$t.append("path").style("stroke-width","1px"),$t.append("text").classed("nums",!0).call(a.font,{weight:ae,style:re,variant:he,textcase:Se,lineposition:xe,shadow:Te,family:Ce,size:de})}),Ht.exit().remove(),Ht.each(function($t){var bn=_.select(this).attr("transform",""),ln=$t.color;Array.isArray(ln)&&(ln=ln[$t.eventData[0].pointNumber]);var Kt=$t.bgcolor||ln,fn=s.combine(s.opacity(Kt)?Kt:s.defaultLine,fe),en=s.combine(s.opacity(ln)?ln:s.defaultLine,fe),un=$t.borderColor||s.contrast(fn),An=N($t,rt,ye,ce,Ee,bn),wn=An[0],On=An[1],Tn=bn.select("text.nums").call(a.font,{family:$t.fontFamily||Ce,size:$t.fontSize||de,color:$t.fontColor||un,weight:$t.fontWeight||ae,style:$t.fontStyle||re,variant:$t.fontVariant||he,textcase:$t.fontTextcase||Se,lineposition:$t.fontLineposition||xe,shadow:$t.fontShadow||Te}).text(wn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se),Cn=bn.select("text.name"),Bn=0,Xn=0;if(On&&On!==wn){Cn.call(a.font,{family:$t.fontFamily||Ce,size:$t.fontSize||de,color:en,weight:$t.fontWeight||ae,style:$t.fontStyle||re,variant:$t.fontVariant||he,textcase:$t.fontTextcase||Se,lineposition:$t.fontLineposition||xe,shadow:$t.fontShadow||Te}).text(On).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,se);var cr=Z(se,Cn.node());Bn=cr.width+2*E,Xn=cr.height+2*E}else Cn.remove(),bn.select("rect").remove();bn.select("path").style({fill:fn,stroke:un});var Yn=$t.xa._offset+($t.x0+$t.x1)/2,jn=$t.ya._offset+($t.y0+$t.y1)/2,Kn=Math.abs($t.x1-$t.x0),or=Math.abs($t.y1-$t.y0),Qt=Z(se,Tn.node()),an=Qt.width/ce._invScaleX,Dn=Qt.height/ce._invScaleY;$t.ty0=(je-Qt.top)/ce._invScaleY,$t.bx=an+2*E,$t.by=Math.max(Dn+2*E,Xn),$t.anchor="start",$t.txwidth=an,$t.tx2width=Bn,$t.offset=0;var yn,Ln,Vn=(an+k+E+Bn)*ce._invScaleX;if(me)$t.pos=Yn,yn=jn+or/2+Vn<=Je,Ln=jn-or/2-Vn>=0,$t.idealAlign!=="top"&&yn||!Ln?yn?(jn+=or/2,$t.anchor="start"):$t.anchor="middle":(jn-=or/2,$t.anchor="end"),$t.crossPos=jn;else{if($t.pos=jn,yn=Yn+Kn/2+Vn<=Ge,Ln=Yn-Kn/2-Vn>=0,$t.idealAlign!=="left"&&yn||!Ln)if(yn)Yn+=Kn/2,$t.anchor="start";else{$t.anchor="middle";var Un=Vn/2,er=Yn+Un-Ge,fr=Yn-Un;er>0&&(Yn-=er),fr<0&&(Yn+=-fr)}else Yn-=Kn/2,$t.anchor="end";$t.crossPos=Yn}Tn.attr("text-anchor",$t.anchor),Bn&&Cn.attr("text-anchor",$t.anchor),bn.attr("transform",c(Yn,jn)+(me?o(x):""))}),{hoverLabels:Ht,commonLabelBoundingBox:Qe}}function N(te,oe,se,ce,ye,me){var fe="",pe="";te.nameOverride!==void 0&&(te.name=te.nameOverride),te.name&&(te.trace._meta&&(te.name=w.templateString(te.name,te.trace._meta)),fe=$(te.name,te.nameLength));var ge=se.charAt(0),ke=ge==="x"?"y":"x";te.zLabel!==void 0?(te.xLabel!==void 0&&(pe+="x: "+te.xLabel+"<br>"),te.yLabel!==void 0&&(pe+="y: "+te.yLabel+"<br>"),te.trace.type!=="choropleth"&&te.trace.type!=="choroplethmapbox"&&(pe+=(pe?"z: ":"")+te.zLabel)):oe&&te[ge+"Label"]===ye?pe=te[ke+"Label"]||"":te.xLabel===void 0?te.yLabel!==void 0&&te.trace.type!=="scattercarpet"&&(pe=te.yLabel):pe=te.yLabel===void 0?te.xLabel:"("+te.xLabel+", "+te.yLabel+")",!te.text&&te.text!==0||Array.isArray(te.text)||(pe+=(pe?"<br>":"")+te.text),te.extraText!==void 0&&(pe+=(pe?"<br>":"")+te.extraText),me&&pe===""&&!te.hovertemplate&&(fe===""&&me.remove(),pe=fe);var Ce=te.hovertemplate||!1;if(Ce){var de=te.hovertemplateLabels||te;te[ge+"Label"]!==ye&&(de[ge+"other"]=de[ge+"Val"],de[ge+"otherLabel"]=de[ge+"Label"]),pe=(pe=w.hovertemplateString(Ce,de,ce._d3locale,te.eventData[0]||{},te.trace._meta)).replace(U,function(ae,re){return fe=$(re,te.nameLength),""})}return[pe,fe]}function W(te,oe){var se=0,ce=te.offset;return oe&&(ce*=-S,se=te.offset*d),{x:se,y:ce}}function B(te,oe,se,ce){var ye=function(fe){return fe*se},me=function(fe){return fe*ce};te.each(function(fe){var pe=_.select(this);if(fe.del)return pe.remove();var ge,ke,Ce,de,ae=pe.select("text.nums"),re=fe.anchor,he=re==="end"?-1:1,Se=(de=(Ce=(ke={start:1,end:-1,middle:0}[(ge=fe).anchor])*(k+E))+ke*(ge.txwidth+E),ge.anchor==="middle"&&(Ce-=ge.tx2width/2,de+=ge.txwidth/2+E),{alignShift:ke,textShiftX:Ce,text2ShiftX:de}),xe=W(fe,oe),Te=xe.x,Ae=xe.y,Pe=re==="middle";pe.select("path").attr("d",Pe?"M-"+ye(fe.bx/2+fe.tx2width/2)+","+me(Ae-fe.by/2)+"h"+ye(fe.bx)+"v"+me(fe.by)+"h-"+ye(fe.bx)+"Z":"M0,0L"+ye(he*k+Te)+","+me(k+Ae)+"v"+me(fe.by/2-k)+"h"+ye(he*fe.bx)+"v-"+me(fe.by)+"H"+ye(he*k+Te)+"V"+me(Ae-k)+"Z");var De=Te+Se.textShiftX,ve=Ae+fe.ty0-fe.by/2+E,we=fe.textAlign||"auto";we!=="auto"&&(we==="left"&&re!=="start"?(ae.attr("text-anchor","start"),De=Pe?-fe.bx/2-fe.tx2width/2+E:-fe.bx-E):we==="right"&&re!=="end"&&(ae.attr("text-anchor","end"),De=Pe?fe.bx/2-fe.tx2width/2-E:fe.bx+E)),ae.call(i.positionText,ye(De),me(ve)),fe.tx2width&&(pe.select("text.name").call(i.positionText,ye(Se.text2ShiftX+Se.alignShift*E+Te),me(Ae+fe.ty0-fe.by/2+E)),pe.select("rect").call(a.setRect,ye(Se.text2ShiftX+(Se.alignShift-1)*fe.tx2width/2+Te),me(Ae-fe.by/2-1),ye(fe.tx2width),me(fe.by+2)))})}function V(te,oe){var se=te.index,ce=te.trace||{},ye=te.cd[0],me=te.cd[se]||{};function fe(ae){return ae||T(ae)&&ae===0}var pe=Array.isArray(se)?function(ae,re){var he=w.castOption(ye,se,ae);return fe(he)?he:w.extractOption({},ce,"",re)}:function(ae,re){return w.extractOption(me,ce,ae,re)};function ge(ae,re,he){var Se=pe(re,he);fe(Se)&&(te[ae]=Se)}if(ge("hoverinfo","hi","hoverinfo"),ge("bgcolor","hbg","hoverlabel.bgcolor"),ge("borderColor","hbc","hoverlabel.bordercolor"),ge("fontFamily","htf","hoverlabel.font.family"),ge("fontSize","hts","hoverlabel.font.size"),ge("fontColor","htc","hoverlabel.font.color"),ge("fontWeight","htw","hoverlabel.font.weight"),ge("fontStyle","hty","hoverlabel.font.style"),ge("fontVariant","htv","hoverlabel.font.variant"),ge("nameLength","hnl","hoverlabel.namelength"),ge("textAlign","hta","hoverlabel.align"),te.posref=oe==="y"||oe==="closest"&&ce.orientation==="h"?te.xa._offset+(te.x0+te.x1)/2:te.ya._offset+(te.y0+te.y1)/2,te.x0=w.constrain(te.x0,0,te.xa._length),te.x1=w.constrain(te.x1,0,te.xa._length),te.y0=w.constrain(te.y0,0,te.ya._length),te.y1=w.constrain(te.y1,0,te.ya._length),te.xLabelVal!==void 0&&(te.xLabel="xLabel"in te?te.xLabel:u.hoverLabelText(te.xa,te.xLabelVal,ce.xhoverformat),te.xVal=te.xa.c2d(te.xLabelVal)),te.yLabelVal!==void 0&&(te.yLabel="yLabel"in te?te.yLabel:u.hoverLabelText(te.ya,te.yLabelVal,ce.yhoverformat),te.yVal=te.ya.c2d(te.yLabelVal)),te.zLabelVal!==void 0&&te.zLabel===void 0&&(te.zLabel=String(te.zLabelVal)),!(isNaN(te.xerr)||te.xa.type==="log"&&te.xerr<=0)){var ke=u.tickText(te.xa,te.xa.c2l(te.xerr),"hover").text;te.xerrneg!==void 0?te.xLabel+=" +"+ke+" / -"+u.tickText(te.xa,te.xa.c2l(te.xerrneg),"hover").text:te.xLabel+=" \xB1 "+ke,oe==="x"&&(te.distance+=1)}if(!(isNaN(te.yerr)||te.ya.type==="log"&&te.yerr<=0)){var Ce=u.tickText(te.ya,te.ya.c2l(te.yerr),"hover").text;te.yerrneg!==void 0?te.yLabel+=" +"+Ce+" / -"+u.tickText(te.ya,te.ya.c2l(te.yerrneg),"hover").text:te.yLabel+=" \xB1 "+Ce,oe==="y"&&(te.distance+=1)}var de=te.hoverinfo||te.trace.hoverinfo;return de&&de!=="all"&&((de=Array.isArray(de)?de:de.split("+")).indexOf("x")===-1&&(te.xLabel=void 0),de.indexOf("y")===-1&&(te.yLabel=void 0),de.indexOf("z")===-1&&(te.zLabel=void 0),de.indexOf("text")===-1&&(te.text=void 0),de.indexOf("name")===-1&&(te.name=void 0)),te}function q(te,oe,se){var ce,ye,me=se.container,fe=se.fullLayout,pe=fe._size,ge=se.event,ke=!!oe.hLinePoint,Ce=!!oe.vLinePoint;if(me.selectAll(".spikeline").remove(),Ce||ke){var de=s.combine(fe.plot_bgcolor,fe.paper_bgcolor);if(ke){var ae,re,he=oe.hLinePoint;ce=he&&he.xa,(ye=he&&he.ya).spikesnap==="cursor"?(ae=ge.pointerX,re=ge.pointerY):(ae=ce._offset+he.x,re=ye._offset+he.y);var Se,xe,Te=r.readability(he.color,de)<1.5?s.contrast(de):he.color,Ae=ye.spikemode,Pe=ye.spikethickness,De=ye.spikecolor||Te,ve=u.getPxPosition(te,ye);if(Ae.indexOf("toaxis")!==-1||Ae.indexOf("across")!==-1){if(Ae.indexOf("toaxis")!==-1&&(Se=ve,xe=ae),Ae.indexOf("across")!==-1){var we=ye._counterDomainMin,Ee=ye._counterDomainMax;ye.anchor==="free"&&(we=Math.min(we,ye.position),Ee=Math.max(Ee,ye.position)),Se=pe.l+we*pe.w,xe=pe.l+Ee*pe.w}me.insert("line",":first-child").attr({x1:Se,x2:xe,y1:re,y2:re,"stroke-width":Pe,stroke:De,"stroke-dasharray":a.dashStyle(ye.spikedash,Pe)}).classed("spikeline",!0).classed("crisp",!0),me.insert("line",":first-child").attr({x1:Se,x2:xe,y1:re,y2:re,"stroke-width":Pe+2,stroke:de}).classed("spikeline",!0).classed("crisp",!0)}Ae.indexOf("marker")!==-1&&me.insert("circle",":first-child").attr({cx:ve+(ye.side!=="right"?Pe:-Pe),cy:re,r:Pe,fill:De}).classed("spikeline",!0)}if(Ce){var Fe,Le,je=oe.vLinePoint;ce=je&&je.xa,ye=je&&je.ya,ce.spikesnap==="cursor"?(Fe=ge.pointerX,Le=ge.pointerY):(Fe=ce._offset+je.x,Le=ye._offset+je.y);var Ge,Je,rt=r.readability(je.color,de)<1.5?s.contrast(de):je.color,ot=ce.spikemode,yt=ce.spikethickness,_t=ce.spikecolor||rt,mt=u.getPxPosition(te,ce);if(ot.indexOf("toaxis")!==-1||ot.indexOf("across")!==-1){if(ot.indexOf("toaxis")!==-1&&(Ge=mt,Je=Le),ot.indexOf("across")!==-1){var tt=ce._counterDomainMin,Qe=ce._counterDomainMax;ce.anchor==="free"&&(tt=Math.min(tt,ce.position),Qe=Math.max(Qe,ce.position)),Ge=pe.t+(1-Qe)*pe.h,Je=pe.t+(1-tt)*pe.h}me.insert("line",":first-child").attr({x1:Fe,x2:Fe,y1:Ge,y2:Je,"stroke-width":yt,stroke:_t,"stroke-dasharray":a.dashStyle(ce.spikedash,yt)}).classed("spikeline",!0).classed("crisp",!0),me.insert("line",":first-child").attr({x1:Fe,x2:Fe,y1:Ge,y2:Je,"stroke-width":yt+2,stroke:de}).classed("spikeline",!0).classed("crisp",!0)}ot.indexOf("marker")!==-1&&me.insert("circle",":first-child").attr({cx:Fe,cy:mt-(ce.side!=="top"?yt:-yt),r:yt,fill:_t}).classed("spikeline",!0)}}}function ne(te,oe){return!oe||oe.vLinePoint!==te._spikepoints.vLinePoint||oe.hLinePoint!==te._spikepoints.hLinePoint}function $(te,oe){return i.plainText(te||"",{len:oe,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function K(te,oe,se){var ce=oe[te+"a"],ye=oe[te+"Val"],me=oe.cd[0];if(ce.type==="category"||ce.type==="multicategory")ye=ce._categoriesMap[ye];else if(ce.type==="date"){var fe=oe.trace[te+"periodalignment"];if(fe){var pe=oe.cd[oe.index],ge=pe[te+"Start"];ge===void 0&&(ge=pe[te]);var ke=pe[te+"End"];ke===void 0&&(ke=pe[te]);var Ce=ke-ge;fe==="end"?ye+=Ce:fe==="middle"&&(ye+=Ce/2)}ye=ce.d2c(ye)}return me&&me.t&&me.t.posLetter===ce._id&&(se.boxmode!=="group"&&se.violinmode!=="group"||(ye+=me.t.dPos)),ye}function ee(te){return te.offsetTop+te.clientTop}function J(te){return te.offsetLeft+te.clientLeft}function Z(te,oe){var se=te._fullLayout,ce=oe.getBoundingClientRect(),ye=ce.left,me=ce.top,fe=ye+ce.width,pe=me+ce.height,ge=w.apply3DTransform(se._invTransform)(ye,me),ke=w.apply3DTransform(se._invTransform)(fe,pe),Ce=ge[0],de=ge[1],ae=ke[0],re=ke[1];return{x:Ce,y:de,width:ae-Ce,height:re-de,top:Math.min(de,re),left:Math.min(Ce,ae),right:Math.max(Ce,ae),bottom:Math.max(de,re)}}},16132:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(10624).isUnifiedHover;R.exports=function(w,b,c,o){o=o||{};var t=b.legend;function i(n){o.font[n]||(o.font[n]=t?b.legend.font[n]:b.font[n])}b&&r(b.hovermode)&&(o.font||(o.font={}),i("size"),i("family"),i("color"),i("weight"),i("style"),i("variant"),t?(o.bgcolor||(o.bgcolor=T.combine(b.legend.bgcolor,b.paper_bgcolor)),o.bordercolor||(o.bordercolor=b.legend.bordercolor)):o.bgcolor||(o.bgcolor=b.paper_bgcolor)),c("hoverlabel.bgcolor",o.bgcolor),c("hoverlabel.bordercolor",o.bordercolor),c("hoverlabel.namelength",o.namelength),_.coerceFont(c,"hoverlabel.font",o.font),c("hoverlabel.align",o.align)}},41008:function(R,C,e){"use strict";var _=e(3400),T=e(65460);R.exports=function(r,w){function b(c,o){return w[c]!==void 0?w[c]:_.coerce(r,w,T,c,o)}return b("clickmode"),b("hoversubplots"),b("hovermode")}},93024:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(86476),w=e(10624),b=e(65460),c=e(83292);R.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:w.getDistanceFunction,getClosest:w.getClosest,inbox:w.inbox,quadrature:w.quadrature,appendArrayPointValue:w.appendArrayPointValue,castHoverOption:function(o,t,i){return T.castOption(o,t,"hoverlabel."+i)},castHoverinfo:function(o,t,i){return T.castOption(o,i,"hoverinfo",function(n){return T.coerceHoverinfo({hoverinfo:n},{_module:o._module},t)})},hover:c.hover,unhover:r.unhover,loneHover:c.loneHover,loneUnhover:function(o){var t=T.isD3Selection(o)?o:_.select(o);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(R,C,e){"use strict";var _=e(92456),T=e(25376),r=T({editType:"none"});r.family.dflt=_.HOVERFONT,r.size.dflt=_.HOVERFONTSIZE,R.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:r,grouptitlefont:T({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(R,C,e){"use strict";var _=e(3400),T=e(65460),r=e(41008),w=e(16132);R.exports=function(b,c){function o(a,s){return _.coerce(b,c,T,a,s)}r(b,c)&&(o("hoverdistance"),o("spikedistance")),o("dragmode")==="select"&&o("selectdirection");var t=c._has("mapbox"),i=c._has("geo"),n=c._basePlotModules.length;c.dragmode==="zoom"&&((t||i)&&n===1||t&&i&&n===2)&&(c.dragmode="pan"),w(b,c,o),_.coerceFont(o,"hoverlabel.grouptitlefont",c.hoverlabel.font)}},81976:function(R,C,e){"use strict";var _=e(3400),T=e(16132),r=e(65460);R.exports=function(w,b){T(w,b,function(c,o){return _.coerce(w,b,r,c,o)})}},12704:function(R,C,e){"use strict";var _=e(3400),T=e(53756).counter,r=e(86968).u,w=e(33816).idRegex,b=e(31780),c={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[T("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[w.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:r({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function o(n,a,s){var l=a[s+"axes"],u=Object.keys((n._splomAxes||{})[s]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(n,a,s,l,u,p){var f=a(n+"gap",s),m=a("domain."+n);a(n+"side",l);for(var h=new Array(u),g=m[0],v=(m[1]-g)/(u-f),x=v*(1-f),y=0;y<u;y++){var A=g+v*y;h[p?u-1-y:y]=[A,A+x]}return h}function i(n,a,s,l,u){var p,f=new Array(s);function m(h,g){a.indexOf(g)!==-1&&l[g]===void 0?(f[h]=g,l[g]=h):f[h]=""}if(Array.isArray(n))for(p=0;p<s;p++)m(p,n[p]);else for(m(0,u),p=1;p<s;p++)m(p,u+(p+1));return f}R.exports={moduleType:"component",name:"grid",schema:{layout:{grid:c}},layoutAttributes:c,sizeDefaults:function(n,a){var s=n.grid||{},l=o(a,s,"x"),u=o(a,s,"y");if(n.grid||l||u){var p,f,m=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),h=Array.isArray(l),g=Array.isArray(u),v=h&&l!==s.xaxes&&g&&u!==s.yaxes;m?(p=s.subplots.length,f=s.subplots[0].length):(g&&(p=u.length),h&&(f=l.length));var x=b.newContainer(a,"grid"),y=O("rows",p),A=O("columns",f);if(y*A>1){m||h||g||O("pattern")==="independent"&&(m=!0),x._hasSubplotGrid=m;var d,S,k=O("roworder")==="top to bottom",E=m?.2:.1,L=m?.3:.1;v&&a._splomGridDflt&&(d=a._splomGridDflt.xside,S=a._splomGridDflt.yside),x._domains={x:t("x",O,E,d,A),y:t("y",O,L,S,y,k)}}else delete a.grid}function O(P,F){return _.coerce(s,x,c,P,F)}},contentDefaults:function(n,a){var s=a.grid;if(s&&s._domains){var l,u,p,f,m,h,g,v=n.grid||{},x=a._subplots,y=s._hasSubplotGrid,A=s.rows,d=s.columns,S=s.pattern==="independent",k=s._axisMap={};if(y){var E=v.subplots||[];h=s.subplots=new Array(A);var L=1;for(l=0;l<A;l++){var O=h[l]=new Array(d),P=E[l]||[];for(u=0;u<d;u++)if(S?(m=L===1?"xy":"x"+L+"y"+L,L++):m=P[u],O[u]="",x.cartesian.indexOf(m)!==-1){if(g=m.indexOf("y"),p=m.slice(0,g),f=m.slice(g),k[p]!==void 0&&k[p]!==u||k[f]!==void 0&&k[f]!==l)continue;O[u]=m,k[p]=u,k[f]=l}}}else{var F=o(a,v,"x"),U=o(a,v,"y");s.xaxes=i(F,x.xaxis,d,k,"x"),s.yaxes=i(U,x.yaxis,A,k,"y")}var I=s._anchors={},N=s.roworder==="top to bottom";for(var W in k){var B,V,q,ne=W.charAt(0),$=s[ne+"side"];if($.length<8)I[W]="free";else if(ne==="x"){if($.charAt(0)==="t"===N?(B=0,V=1,q=A):(B=A-1,V=-1,q=-1),y){var K=k[W];for(l=B;l!==q;l+=V)if((m=h[l][K])&&(g=m.indexOf("y"),m.slice(0,g)===W)){I[W]=m.slice(g);break}}else for(l=B;l!==q;l+=V)if(f=s.yaxes[l],x.cartesian.indexOf(W+f)!==-1){I[W]=f;break}}else if($.charAt(0)==="l"?(B=0,V=1,q=d):(B=d-1,V=-1,q=-1),y){var ee=k[W];for(l=B;l!==q;l+=V)if((m=h[ee][l])&&(g=m.indexOf("y"),m.slice(g)===W)){I[W]=m.slice(0,g);break}}else for(l=B;l!==q;l+=V)if(p=s.xaxes[l],x.cartesian.indexOf(p+W)!==-1){I[W]=p;break}}}}}},65760:function(R,C,e){"use strict";var _=e(33816),T=e(31780).templatedArray;e(36208),R.exports=T("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",_.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",_.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(R,C,e){"use strict";var _=e(38248),T=e(36896);R.exports=function(r,w,b,c){w=w||{};var o=b==="log"&&w.type==="linear",t=b==="linear"&&w.type==="log";if(o||t){for(var i,n,a=r._fullLayout.images,s=w._id.charAt(0),l=0;l<a.length;l++)if(n="images["+l+"].",(i=a[l])[s+"ref"]===w._id){var u=i[s],p=i["size"+s],f=null,m=null;if(o){f=T(u,w.range);var h=p/Math.pow(10,f)/2;m=2*Math.log(h+Math.sqrt(1+h*h))/Math.LN10}else m=(f=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));_(f)?_(m)||(m=null):(f=null,m=null),c(n+s,f),c(n+"size"+s,m)}}}},25024:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(51272),w=e(65760);function b(c,o,t){function i(f,m){return _.coerce(c,o,w,f,m)}var n=i("source");if(!i("visible",!!n))return o;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var a={_fullLayout:t},s=["x","y"],l=0;l<2;l++){var u=s[l],p=T.coerceRef(c,o,a,u,"paper",void 0);p!=="paper"&&T.getFromId(a,p)._imgIndices.push(o._index),T.coercePosition(o,a,i,p,u,0)}return o}R.exports=function(c,o){r(c,o,{name:"images",handleItemDefaults:b})}},60963:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(54460),w=e(79811),b=e(9616);R.exports=function(c){var o,t,i=c._fullLayout,n=[],a={},s=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=w.ref2id(l.xref)+w.ref2id(l.yref);var u=i._plots[o];if(!u){s.push(l);continue}u.mainplot&&(o=u.mainplot.id),a[o]||(a[o]=[]),a[o].push(l)}else l.layer==="above"?n.push(l):s.push(l)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},f={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(d){var S=_.select(this);if(this._imgSrc!==d.source)if(S.attr("xmlns",b.svg),d.source&&d.source.slice(0,5)==="data:")S.attr("xlink:href",d.source),this._imgSrc=d.source;else{var k=new Promise((function(E){var L=new Image;function O(){S.remove(),E()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=O,L.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var F=P.toDataURL("image/png");S.attr("xlink:href",F),E()},S.on("error",O),L.src=d.source,this._imgSrc=d.source}).bind(this));c._promises.push(k)}}function h(d){var S,k,E=_.select(this),L=r.getFromId(c,d.xref),O=r.getFromId(c,d.yref),P=r.getRefType(d.xref)==="domain",F=r.getRefType(d.yref)==="domain",U=i._size;S=L!==void 0?typeof d.xref=="string"&&P?L._length*d.sizex:Math.abs(L.l2p(d.sizex)-L.l2p(0)):d.sizex*U.w,k=O!==void 0?typeof d.yref=="string"&&F?O._length*d.sizey:Math.abs(O.l2p(d.sizey)-O.l2p(0)):d.sizey*U.h;var I,N,W=S*p[d.xanchor].offset,B=k*f[d.yanchor].offset,V=p[d.xanchor].sizing+f[d.yanchor].sizing;switch(I=L!==void 0?typeof d.xref=="string"&&P?L._length*d.x+L._offset:L.r2p(d.x)+L._offset:d.x*U.w+U.l,I+=W,N=O!==void 0?typeof d.yref=="string"&&F?O._length*(1-d.y)+O._offset:O.r2p(d.y)+O._offset:U.h-d.y*U.h+U.t,N+=B,d.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:I,y:N,width:S,height:k,preserveAspectRatio:V,opacity:d.opacity});var q=(L&&r.getRefType(d.xref)!=="domain"?L._id:"")+(O&&r.getRefType(d.yref)!=="domain"?O._id:"");T.setClipUrl(E,q?"clip"+i._uid+q:null,c)}var g=i._imageLowerLayer.selectAll("image").data(s),v=i._imageUpperLayer.selectAll("image").data(n);g.enter().append("image"),v.enter().append("image"),g.exit().remove(),v.exit().remove(),g.each(function(d){m.bind(this)(d),h.bind(this)(d)}),v.each(function(d){m.bind(this)(d),h.bind(this)(d)});var x=Object.keys(i._plots);for(t=0;t<x.length;t++){o=x[t];var y=i._plots[o];if(y.imagelayer){var A=y.imagelayer.selectAll("image").data(a[o]||[]);A.enter().append("image"),A.exit().remove(),A.each(function(d){m.bind(this)(d),h.bind(this)(d)})}}}},7402:function(R,C,e){"use strict";R.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(R,C,e){"use strict";var _=e(25376),T=e(22548);R.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:_({editType:"legend"}),grouptitlefont:_({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:_({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(R){"use strict";R.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(31780),w=e(45464),b=e(3800),c=e(64859),o=e(42451);function t(i,n,a,s){var l=n[i]||{},u=r.newContainer(a,i);function p(V,q){return T.coerce(l,u,b,V,q)}var f=T.coerceFont(p,"font",a.font);if(p("bgcolor",a.paper_bgcolor),p("bordercolor"),p("visible")){for(var m,h=function(V,q){var ne=m._input,$=m;return T.coerce(ne,$,w,V,q)},g=a.font||{},v=T.coerceFont(p,"grouptitlefont",g,{overrideDflt:{size:Math.round(1.1*g.size)}}),x=0,y=!1,A="normal",d=(a.shapes||[]).filter(function(V){return V.showlegend}),S=s.concat(d).filter(function(V){return i===(V.legend||"legend")}),k=0;k<S.length;k++)if((m=S[k]).visible){var E=m._isShape;(m.showlegend||m._dfltShowLegend&&!(m._module&&m._module.attributes&&m._module.attributes.showlegend&&m._module.attributes.showlegend.dflt===!1))&&(x++,m.showlegend&&(y=!0,(!E&&_.traceIs(m,"pie-like")||m._input.showlegend===!0)&&x++),T.coerceFont(h,"legendgrouptitle.font",v)),(!E&&_.traceIs(m,"bar")&&a.barmode==="stack"||["tonextx","tonexty"].indexOf(m.fill)!==-1)&&(A=o.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),m.legendgroup!==void 0&&m.legendgroup!==""&&(A=o.isReversed({traceorder:A})?"reversed+grouped":"grouped")}var L=T.coerce(n,a,c,"showlegend",y&&x>(i==="legend"?1:0));if(L===!1&&(a[i]=void 0),(L!==!1||l.uirevision)&&(p("uirevision",a.uirevision),L!==!1)){p("borderwidth");var O,P,F,U=p("orientation")==="h",I=p("yref")==="paper",N=p("xref")==="paper",W="left";if(U?(O=0,_.getComponentMethod("rangeslider","isVisible")(n.xaxis)?I?(P=1.1,F="bottom"):(P=1,F="top"):I?(P=-.1,F="top"):(P=0,F="bottom")):(P=1,F="auto",N?O=1.02:(O=1,W="right")),T.coerce(l,u,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:O}},"x"),T.coerce(l,u,{y:{valType:"number",editType:"legend",min:I?-2:0,max:I?3:1,dflt:P}},"y"),p("traceorder",A),o.isGrouped(a[i])&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("indentation"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",W),p("yanchor",F),p("valign"),T.noneOrAll(l,u,["x","y"]),p("title.text")){p("title.side",U?"left":"top");var B=T.extendFlat({},f,{size:T.bigFont(f.size)});T.coerceFont(p,"title.font",B)}}}}R.exports=function(i,n,a){var s,l=a.slice(),u=n.shapes;if(u)for(s=0;s<u.length;s++){var p=u[s];if(p.showlegend){var f={_input:p._input,visible:p.visible,showlegend:p.showlegend,legend:p.legend};l.push(f)}}var m=["legend"];for(s=0;s<l.length;s++)T.pushUnique(m,l[s].legend);for(n._legends=[],s=0;s<m.length;s++){var h=m[s];t(h,i,n,l),n[h]&&n[h].visible&&(n[h]._id=h),n._legends.push(h)}}},31140:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(7316),w=e(24040),b=e(95924),c=e(86476),o=e(43616),t=e(76308),i=e(72736),n=e(33048),a=e(65196),s=e(84284),l=s.LINE_SPACING,u=s.FROM_TL,p=s.FROM_BR,f=e(35456),m=e(2012),h=e(42451),g=1,v=/^legend[0-9]*$/;function x(F,U){var I,N,W=U||{},B=F._fullLayout,V=P(W),q=W._inHover;if(q?(N=W.layer,I="hover"):(N=B._infolayer,I=V),N){var ne;if(I+=B._uid,F._legendMouseDownTime||(F._legendMouseDownTime=0),q){if(!W.entries)return;ne=f(W.entries,W)}else{for(var $=(F.calcdata||[]).slice(),K=B.shapes,ee=0;ee<K.length;ee++){var J=K[ee];if(J.showlegend){var Z={_isShape:!0,_fullInput:J,index:J._index,name:J.name||J.label.text||"shape "+J._index,legend:J.legend,legendgroup:J.legendgroup,legendgrouptitle:J.legendgrouptitle,legendrank:J.legendrank,legendwidth:J.legendwidth,showlegend:J.showlegend,visible:J.visible,opacity:J.opacity,mode:J.type==="line"?"lines":"markers",line:J.line,marker:{line:J.line,color:J.fillcolor,size:12,symbol:J.type==="rect"?"square":J.type==="circle"?"circle":"hexagon2"}};$.push([{trace:Z}])}}ne=B.showlegend&&f($,W,B._legends.length>1)}var te=B.hiddenlabels||[];if(!(q||B.showlegend&&ne.length))return N.selectAll("."+V).remove(),B._topdefs.select("#"+I).remove(),r.autoMargin(F,V);var oe=T.ensureSingle(N,"g",V,function(Ce){q||Ce.attr("pointer-events","all")}),se=T.ensureSingleById(B._topdefs,"clipPath",I,function(Ce){Ce.append("rect")}),ce=T.ensureSingle(oe,"rect","bg",function(Ce){Ce.attr("shape-rendering","crispEdges")});ce.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var ye,me=T.ensureSingle(oe,"g","scrollbox"),fe=W.title;W._titleWidth=0,W._titleHeight=0,fe.text?((ye=T.ensureSingle(me,"text",V+"titletext")).attr("text-anchor","start").call(o.font,fe.font).text(fe.text),E(ye,me,F,W,g)):me.selectAll("."+V+"titletext").remove();var pe=T.ensureSingle(oe,"rect","scrollbar",function(Ce){Ce.attr(a.scrollBarEnterAttrs).call(t.fill,a.scrollBarColor)}),ge=me.selectAll("g.groups").data(ne);ge.enter().append("g").attr("class","groups"),ge.exit().remove();var ke=ge.selectAll("g.traces").data(T.identity);ke.enter().append("g").attr("class","traces"),ke.exit().remove(),ke.style("opacity",function(Ce){var de=Ce[0].trace;return w.traceIs(de,"pie-like")?te.indexOf(Ce[0].label)!==-1?.5:1:de.visible==="legendonly"?.5:1}).each(function(){_.select(this).call(d,F,W)}).call(m,F,W).each(function(){q||_.select(this).call(k,F,V)}),T.syncOrAsync([r.previousPromises,function(){return function(Ce,de,ae,re){var he=Ce._fullLayout,Se=P(re);re||(re=he[Se]);var xe=he._size,Te=h.isVertical(re),Ae=h.isGrouped(re),Pe=re.entrywidthmode==="fraction",De=re.borderwidth,ve=2*De,we=a.itemGap,Ee=re.indentation+re.itemwidth+2*we,Fe=2*(De+we),Le=O(re),je=re.y<0||re.y===0&&Le==="top",Ge=re.y>1||re.y===1&&Le==="bottom",Je=re.tracegroupgap,rt={};re._maxHeight=Math.max(je||Ge?he.height/2:xe.h,30);var ot=0;re._width=0,re._height=0;var yt=function(ht){var dt=0,it=0,kt=ht.title.side;return kt&&(kt.indexOf("left")!==-1&&(dt=ht._titleWidth),kt.indexOf("top")!==-1&&(it=ht._titleHeight)),[dt,it]}(re);if(Te)ae.each(function(ht){var dt=ht[0].height;o.setTranslate(this,De+yt[0],De+yt[1]+re._height+dt/2+we),re._height+=dt,re._width=Math.max(re._width,ht[0].width)}),ot=Ee+re._width,re._width+=we+Ee+ve,re._height+=Fe,Ae&&(de.each(function(ht,dt){o.setTranslate(this,0,dt*re.tracegroupgap)}),re._height+=(re._lgroupsLength-1)*re.tracegroupgap);else{var _t=L(re),mt=re.x<0||re.x===0&&_t==="right",tt=re.x>1||re.x===1&&_t==="left",Qe=Ge||je,Dt=he.width/2;re._maxWidth=Math.max(mt?Qe&&_t==="left"?xe.l+xe.w:Dt:tt?Qe&&_t==="right"?xe.r+xe.w:Dt:xe.w,2*Ee);var zt=0,pt=0;ae.each(function(ht){var dt=y(ht,re,Ee);zt=Math.max(zt,dt),pt+=dt}),ot=null;var vt=0;if(Ae){var We=0,Ze=0,Ne=0;de.each(function(){var ht=0,dt=0;_.select(this).selectAll("g.traces").each(function(kt){var Tt=y(kt,re,Ee),St=kt[0].height;o.setTranslate(this,yt[0],yt[1]+De+we+St/2+dt),dt+=St,ht=Math.max(ht,Tt),rt[kt[0].trace.legendgroup]=ht});var it=ht+we;Ze>0&&it+De+Ze>re._maxWidth?(vt=Math.max(vt,Ze),Ze=0,Ne+=We+Je,We=dt):We=Math.max(We,dt),o.setTranslate(this,Ze,Ne),Ze+=it}),re._width=Math.max(vt,Ze)+De,re._height=Ne+We+Fe}else{var Xe=ae.size(),st=pt+ve+(Xe-1)*we<re._maxWidth,lt=0,xt=0,bt=0,Ve=0;ae.each(function(ht){var dt=ht[0].height,it=y(ht,re,Ee),kt=st?it:zt;Pe||(kt+=we),kt+De+xt-we>=re._maxWidth&&(vt=Math.max(vt,Ve),xt=0,bt+=lt,re._height+=lt,lt=0),o.setTranslate(this,yt[0]+De+xt,yt[1]+De+bt+dt/2+we),Ve=xt+it+we,xt+=kt,lt=Math.max(lt,dt)}),st?(re._width=xt+ve,re._height=lt+Fe):(re._width=Math.max(vt,Ve)+ve,re._height+=lt+Fe)}}re._width=Math.ceil(Math.max(re._width+yt[0],re._titleWidth+2*(De+a.titlePad))),re._height=Math.ceil(Math.max(re._height+yt[1],re._titleHeight+2*(De+a.itemGap))),re._effHeight=Math.min(re._height,re._maxHeight);var Be=Ce._context.edits,at=Be.legendText||Be.legendPosition;ae.each(function(ht){var dt=_.select(this).select("."+Se+"toggle"),it=ht[0].height,kt=ht[0].trace.legendgroup,Tt=y(ht,re,Ee);Ae&&kt!==""&&(Tt=rt[kt]);var St=at?Ee:ot||Tt;Te||Pe||(St+=we/2),o.setRect(dt,0,-it/2,St,it)})}(F,ge,ke,W)},function(){var Ce,de,ae,re,he=B._size,Se=W.borderwidth,xe=W.xref==="paper",Te=W.yref==="paper";if(fe.text&&function(Qe,Dt,zt){if(Dt.title.side==="top center"||Dt.title.side==="top right"){var pt=Dt.title.font.size*l,vt=0,We=Qe.node(),Ze=o.bBox(We).width;Dt.title.side==="top center"?vt=.5*(Dt._width-2*zt-2*a.titlePad-Ze):Dt.title.side==="top right"&&(vt=Dt._width-2*zt-2*a.titlePad-Ze),i.positionText(Qe,zt+a.titlePad+vt,zt+pt)}}(ye,W,Se),!q){var Ae,Pe;Ae=xe?he.l+he.w*W.x-u[L(W)]*W._width:B.width*W.x-u[L(W)]*W._width,Pe=Te?he.t+he.h*(1-W.y)-u[O(W)]*W._effHeight:B.height*(1-W.y)-u[O(W)]*W._effHeight;var De=function(Qe,Dt,zt,pt){var vt=Qe._fullLayout,We=vt[Dt],Ze=L(We),Ne=O(We),Xe=We.xref==="paper",st=We.yref==="paper";Qe._fullLayout._reservedMargin[Dt]={};var lt=We.y<.5?"b":"t",xt=We.x<.5?"l":"r",bt={r:vt.width-zt,l:zt+We._width,b:vt.height-pt,t:pt+We._effHeight};if(Xe&&st)return r.autoMargin(Qe,Dt,{x:We.x,y:We.y,l:We._width*u[Ze],r:We._width*p[Ze],b:We._effHeight*p[Ne],t:We._effHeight*u[Ne]});Xe?Qe._fullLayout._reservedMargin[Dt][lt]=bt[lt]:st||We.orientation==="v"?Qe._fullLayout._reservedMargin[Dt][xt]=bt[xt]:Qe._fullLayout._reservedMargin[Dt][lt]=bt[lt]}(F,V,Ae,Pe);if(De)return;if(B.margin.autoexpand){var ve=Ae,we=Pe;Ae=xe?T.constrain(Ae,0,B.width-W._width):ve,Pe=Te?T.constrain(Pe,0,B.height-W._effHeight):we,Ae!==ve&&T.log("Constrain "+V+".x to make legend fit inside graph"),Pe!==we&&T.log("Constrain "+V+".y to make legend fit inside graph")}o.setTranslate(oe,Ae,Pe)}if(pe.on(".drag",null),oe.on("wheel",null),q||W._height<=W._maxHeight||F._context.staticPlot){var Ee=W._effHeight;q&&(Ee=W._height),ce.attr({width:W._width-Se,height:Ee-Se,x:Se/2,y:Se/2}),o.setTranslate(me,0,0),se.select("rect").attr({width:W._width-2*Se,height:Ee-2*Se,x:Se,y:Se}),o.setClipUrl(me,I,F),o.setRect(pe,0,0,0,0),delete W._scrollY}else{var Fe,Le,je,Ge=Math.max(a.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Je=W._effHeight-Ge-2*a.scrollBarMargin,rt=W._height-W._effHeight,ot=Je/rt,yt=Math.min(W._scrollY||0,rt);ce.attr({width:W._width-2*Se+a.scrollBarWidth+a.scrollBarMargin,height:W._effHeight-Se,x:Se/2,y:Se/2}),se.select("rect").attr({width:W._width-2*Se+a.scrollBarWidth+a.scrollBarMargin,height:W._effHeight-2*Se,x:Se,y:Se+yt}),o.setClipUrl(me,I,F),tt(yt,Ge,ot),oe.on("wheel",function(){tt(yt=T.constrain(W._scrollY+_.event.deltaY/Je*rt,0,rt),Ge,ot),yt!==0&&yt!==rt&&_.event.preventDefault()});var _t=_.behavior.drag().on("dragstart",function(){var Qe=_.event.sourceEvent;Fe=Qe.type==="touchstart"?Qe.changedTouches[0].clientY:Qe.clientY,je=yt}).on("drag",function(){var Qe=_.event.sourceEvent;Qe.buttons===2||Qe.ctrlKey||(Le=Qe.type==="touchmove"?Qe.changedTouches[0].clientY:Qe.clientY,yt=function(Dt,zt,pt){var vt=(pt-zt)/ot+Dt;return T.constrain(vt,0,rt)}(je,Fe,Le),tt(yt,Ge,ot))});pe.call(_t);var mt=_.behavior.drag().on("dragstart",function(){var Qe=_.event.sourceEvent;Qe.type==="touchstart"&&(Fe=Qe.changedTouches[0].clientY,je=yt)}).on("drag",function(){var Qe=_.event.sourceEvent;Qe.type==="touchmove"&&(Le=Qe.changedTouches[0].clientY,yt=function(Dt,zt,pt){var vt=(zt-pt)/ot+Dt;return T.constrain(vt,0,rt)}(je,Fe,Le),tt(yt,Ge,ot))});me.call(mt)}function tt(Qe,Dt,zt){W._scrollY=F._fullLayout[V]._scrollY=Qe,o.setTranslate(me,0,-Qe),o.setRect(pe,W._width,a.scrollBarMargin+Qe*zt,a.scrollBarWidth,Dt),se.select("rect").attr("y",Se+Qe)}F._context.edits.legendPosition&&(oe.classed("cursor-move",!0),c.init({element:oe.node(),gd:F,prepFn:function(Qe){if(Qe.target!==pe.node()){var Dt=o.getTranslate(oe);ae=Dt.x,re=Dt.y}},moveFn:function(Qe,Dt){if(ae!==void 0&&re!==void 0){var zt=ae+Qe,pt=re+Dt;o.setTranslate(oe,zt,pt),Ce=c.align(zt,W._width,he.l,he.l+he.w,W.xanchor),de=c.align(pt+W._height,-W._height,he.t+he.h,he.t,W.yanchor)}},doneFn:function(){if(Ce!==void 0&&de!==void 0){var Qe={};Qe[V+".x"]=Ce,Qe[V+".y"]=de,w.call("_guiRelayout",F,Qe)}},clickFn:function(Qe,Dt){var zt=N.selectAll("g.traces").filter(function(){var pt=this.getBoundingClientRect();return Dt.clientX>=pt.left&&Dt.clientX<=pt.right&&Dt.clientY>=pt.top&&Dt.clientY<=pt.bottom});zt.size()>0&&A(F,oe,zt,Qe,Dt)}}))}],F)}}function y(F,U,I){var N=F[0],W=N.width,B=U.entrywidthmode,V=N.trace.legendwidth||U.entrywidth;return B==="fraction"?U._maxWidth*V:I+(V||W)}function A(F,U,I,N,W){var B=I.data()[0][0].trace,V={event:W,node:I.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:F.data,layout:F.layout,frames:F._transitionData._frames,config:F._context,fullData:F._fullData,fullLayout:F._fullLayout};B._group&&(V.group=B._group),w.traceIs(B,"pie-like")&&(V.label=I.datum()[0].label);var q=b.triggerHandler(F,"plotly_legendclick",V);if(N===1){if(q===!1)return;U._clickTimeout=setTimeout(function(){F._fullLayout&&n(I,F,N)},F._context.doubleClickDelay)}else N===2&&(U._clickTimeout&&clearTimeout(U._clickTimeout),F._legendMouseDownTime=0,b.triggerHandler(F,"plotly_legenddoubleclick",V)!==!1&&q!==!1&&n(I,F,N))}function d(F,U,I){var N,W,B=P(I),V=F.data()[0][0],q=V.trace,ne=w.traceIs(q,"pie-like"),$=!I._inHover&&U._context.edits.legendText&&!ne,K=I._maxNameLength;V.groupTitle?(N=V.groupTitle.text,W=V.groupTitle.font):(W=I.font,I.entries?N=V.text:(N=ne?V.label:q.name,q._meta&&(N=T.templateString(N,q._meta))));var ee=T.ensureSingle(F,"text",B+"text");ee.attr("text-anchor","start").call(o.font,W).text($?S(N,K):N);var J=I.indentation+I.itemwidth+2*a.itemGap;i.positionText(ee,J,0),$?ee.call(i.makeEditable,{gd:U,text:N}).call(E,F,U,I).on("edit",function(Z){this.text(S(Z,K)).call(E,F,U,I);var te=V.trace._fullInput||{},oe={};if(w.hasTransform(te,"groupby")){var se=w.getTransformIndices(te,"groupby"),ce=se[se.length-1],ye=T.keyedContainer(te,"transforms["+ce+"].styles","target","value.name");ye.set(V.trace._group,Z),oe=ye.constructUpdate()}else oe.name=Z;return te._isShape?w.call("_guiRelayout",U,"shapes["+q.index+"].name",oe.name):w.call("_guiRestyle",U,oe,q.index)}):E(ee,F,U,I)}function S(F,U){var I=Math.max(4,U);if(F&&F.trim().length>=I/2)return F;for(var N=I-(F=F||"").length;N>0;N--)F+=" ";return F}function k(F,U,I){var N,W=U._context.doubleClickDelay,B=1,V=T.ensureSingle(F,"rect",I+"toggle",function(q){U._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(t.fill,"rgba(0,0,0,0)")});U._context.staticPlot||(V.on("mousedown",function(){(N=new Date().getTime())-U._legendMouseDownTime<W?B+=1:(B=1,U._legendMouseDownTime=N)}),V.on("mouseup",function(){if(!U._dragged&&!U._editing){var q=U._fullLayout[I];new Date().getTime()-U._legendMouseDownTime>W&&(B=Math.max(B-1,1)),A(U,q,F,B,_.event)}}))}function E(F,U,I,N,W){N._inHover&&F.attr("data-notex",!0),i.convertToTspans(F,I,function(){(function(B,V,q,ne){var $=B.data()[0][0];if(q._inHover||!$||$.trace.showlegend){var K=B.select("g[class*=math-group]"),ee=K.node(),J=P(q);q||(q=V._fullLayout[J]);var Z,te,oe=q.borderwidth,se=(ne===g?q.title.font:$.groupTitle?$.groupTitle.font:q.font).size*l;if(ee){var ce=o.bBox(ee);Z=ce.height,te=ce.width,ne===g?o.setTranslate(K,oe,oe+.75*Z):o.setTranslate(K,0,.25*Z)}else{var ye="."+J+(ne===g?"title":"")+"text",me=B.select(ye),fe=i.lineCount(me),pe=me.node();if(Z=se*fe,te=pe?o.bBox(pe).width:0,ne===g)q.title.side==="left"&&(te+=2*a.itemGap),i.positionText(me,oe+a.titlePad,oe+se);else{var ge=2*a.itemGap+q.indentation+q.itemwidth;$.groupTitle&&(ge=a.itemGap,te-=q.indentation+q.itemwidth),i.positionText(me,ge,-se*((fe-1)/2-.3))}}ne===g?(q._titleWidth=te,q._titleHeight=Z):($.lineHeight=se,$.height=Math.max(Z,16)+3,$.width=te)}else B.remove()})(U,I,N,W)})}function L(F){return T.isRightAnchor(F)?"right":T.isCenterAnchor(F)?"center":"left"}function O(F){return T.isBottomAnchor(F)?"bottom":T.isMiddleAnchor(F)?"middle":"top"}function P(F){return F._id||"legend"}R.exports=function(F,U){if(U)x(F,U);else{var I=F._fullLayout,N=I._legends;I._infolayer.selectAll('[class^="legend"]').each(function(){var V=_.select(this),q=V.attr("class").split(" ")[0];q.match(v)&&N.indexOf(q)===-1&&V.remove()});for(var W=0;W<N.length;W++){var B=N[W];x(F,F._fullLayout[B])}}}},35456:function(R,C,e){"use strict";var _=e(24040),T=e(42451);R.exports=function(r,w,b){var c,o,t=w._inHover,i=T.isGrouped(w),n=T.isReversed(w),a={},s=[],l=!1,u={},p=0,f=0;function m(N,W,B){if(w.visible!==!1&&(!b||N===w._id))if(W!==""&&T.isGrouped(w))s.indexOf(W)===-1?(s.push(W),l=!0,a[W]=[B]):a[W].push(B);else{var V="~~i"+p;s.push(V),a[V]=[B],p++}}for(c=0;c<r.length;c++){var h=r[c],g=h[0],v=g.trace,x=v.legend,y=v.legendgroup;if(t||v.visible&&v.showlegend)if(_.traceIs(v,"pie-like"))for(u[y]||(u[y]={}),o=0;o<h.length;o++){var A=h[o].label;u[y][A]||(m(x,y,{label:A,color:h[o].color,i:h[o].i,trace:v,pts:h[o].pts}),u[y][A]=!0,f=Math.max(f,(A||"").length))}else m(x,y,g),f=Math.max(f,(v.name||"").length)}if(!s.length)return[];var d=!l||!i,S=[];for(c=0;c<s.length;c++){var k=a[s[c]];d?S.push(k[0]):S.push(k)}for(d&&(S=[S]),c=0;c<S.length;c++){var E=1/0;for(o=0;o<S[c].length;o++){var L=S[c][o].trace.legendrank;E>L&&(E=L)}S[c][0]._groupMinRank=E,S[c][0]._preGroupSort=c}var O=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),c=0;c<S.length;c++){S[c].forEach(function(N,W){N._preSort=W}),S[c].sort(O);var P=S[c][0].trace,F=null;for(o=0;o<S[c].length;o++){var U=S[c][o].trace.legendgrouptitle;if(U&&U.text){F=U,t&&(U.font=w._groupTitleFont);break}}if(n&&S[c].reverse(),F){var I=!1;for(o=0;o<S[c].length;o++)if(_.traceIs(S[c][o].trace,"pie-like")){I=!0;break}S[c].unshift({i:-1,groupTitle:F,noClick:I,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:w.groupclick==="toggleitem"||P.visible}})}for(o=0;o<S[c].length;o++)S[c][o]=[S[c][o]]}return w._lgroupsLength=S.length,w._maxNameLength=f,S}},33048:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=T.pushUnique,w=!0;R.exports=function(b,c,o){var t=c._fullLayout;if(!c._dragged&&!c._editing){var i,n=t.legend.itemclick,a=t.legend.itemdoubleclick,s=t.legend.groupclick;if(o===1&&n==="toggle"&&a==="toggleothers"&&w&&c.data&&c._context.showTips&&T.notifier(T._(c,"Double-click on legend to isolate one trace"),"long"),w=!1,o===1?i=n:o===2&&(i=a),i){var l=s==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],p=b.data()[0][0];if(!p.groupTitle||!p.noClick){var f=c._fullData,m=(t.shapes||[]).filter(function(de){return de.showlegend}),h=f.concat(m),g=p.trace;g._isShape&&(g=g._fullInput);var v,x,y,A,d,S=g.legendgroup,k={},E=[],L=[],O=[],P=(t.shapes||[]).map(function(de){return de._input}),F=!1,U=g.legend,I=g._fullInput;if(I&&I._isShape||!_.traceIs(g,"pie-like")){var N,W=S&&S.length,B=[];if(W)for(v=0;v<h.length;v++)(N=h[v]).visible&&N.legendgroup===S&&B.push(v);if(i==="toggle"){var V;switch(g.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(W)if(l)for(v=0;v<h.length;v++){var q=h[v];q.visible!==!1&&q.legendgroup===S&&Ce(q,V)}else Ce(g,V);else Ce(g,V)}else if(i==="toggleothers"){var ne,$,K,ee,J=!0;for(v=0;v<h.length;v++)if(ne=(ee=h[v])===g,$=ee.showlegend!==!0,!(ne||$||W&&ee.legendgroup===S||ee.legend!==U||ee.visible!==!0||_.traceIs(ee,"notLegendIsolatable"))){J=!1;break}for(v=0;v<h.length;v++)if((ee=h[v]).visible!==!1&&ee.legend===U&&!_.traceIs(ee,"notLegendIsolatable"))switch(g.visible){case"legendonly":Ce(ee,!0);break;case!0:K=!!J||"legendonly",ne=ee===g,$=ee.showlegend!==!0&&!ee.legendgroup,Ce(ee,!!(ne||W&&ee.legendgroup===S||$)||K)}}for(v=0;v<L.length;v++)if(y=L[v]){var Z=y.constructUpdate(),te=Object.keys(Z);for(x=0;x<te.length;x++)A=te[x],(k[A]=k[A]||[])[O[v]]=Z[A]}for(d=Object.keys(k),v=0;v<d.length;v++)for(A=d[v],x=0;x<E.length;x++)k[A].hasOwnProperty(x)||(k[A][x]=void 0);F?_.call("_guiUpdate",c,k,{shapes:P},E):_.call("_guiRestyle",c,k,E)}else{var oe=p.label,se=u.indexOf(oe);if(i==="toggle")se===-1?u.push(oe):u.splice(se,1);else if(i==="toggleothers"){var ce=se!==-1,ye=[];for(v=0;v<c.calcdata.length;v++){var me=c.calcdata[v];for(x=0;x<me.length;x++){var fe=me[x].label;U===me[0].trace.legend&&oe!==fe&&(u.indexOf(fe)===-1&&(ce=!0),r(u,fe),ye.push(fe))}}if(!ce)for(var pe=0;pe<ye.length;pe++){var ge=u.indexOf(ye[pe]);ge!==-1&&u.splice(ge,1)}}_.call("_guiRelayout",c,"hiddenlabels",u)}}}}function ke(de,ae){var re=E.indexOf(de),he=k.visible;return he||(he=k.visible=[]),E.indexOf(de)===-1&&(E.push(de),re=E.length-1),he[re]=ae,re}function Ce(de,ae){if(!p.groupTitle||l){var re,he=de._fullInput||de,Se=he._isShape,xe=he.index;if(xe===void 0&&(xe=he._index),_.hasTransform(he,"groupby")){var Te=L[xe];if(!Te){var Ae=_.getTransformIndices(he,"groupby"),Pe=Ae[Ae.length-1];Te=T.keyedContainer(he,"transforms["+Pe+"].styles","target","value.visible"),L[xe]=Te}var De=Te.get(de._group);De===void 0&&(De=!0),De!==!1&&Te.set(de._group,ae),O[xe]=ke(xe,he.visible!==!1)}else{var ve=he.visible!==!1&&ae;Se?(re=ve,P[xe].visible=re,F=!0):ke(xe,ve)}}}}},42451:function(R,C){"use strict";C.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},C.isVertical=function(e){return e.orientation!=="h"},C.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(R,C,e){"use strict";R.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(3400),w=r.strTranslate,b=e(43616),c=e(76308),o=e(94288).extractOpts,t=e(43028),i=e(10528),n=e(69656).castOption,a=e(65196);function s(p,f){return(f?"radial":"horizontal")+(p?"":"reversed")}function l(p){var f=p[0].trace,m=f.contours,h=t.hasLines(f),g=t.hasMarkers(f),v=f.visible&&f.fill&&f.fill!=="none",x=!1,y=!1;if(m){var A=m.coloring;A==="lines"?x=!0:h=A==="none"||A==="heatmap"||m.showlines,m.type==="constraint"?v=m._operation!=="=":A!=="fill"&&A!=="heatmap"||(y=!0)}return{showMarker:g,showLine:h,showFill:v,showGradientLine:x,showGradientFill:y,anyLine:h||x,anyFill:v||y}}function u(p,f,m){return p&&r.isArrayOrTypedArray(p)?f:p>m?m:p}R.exports=function(p,f,m){var h=f._fullLayout;m||(m=h.legend);var g=m.itemsizing==="constant",v=m.itemwidth,x=(v+2*a.itemGap)/2,y=w(x,0),A=function(k,E,L,O){var P;if(k+1)P=k;else{if(!(E&&E.width>0))return 0;P=E.width}return g?O:Math.min(P,L)};function d(k,E,L){var O=k[0].trace,P=O.marker||{},F=P.line||{},U=P.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",I=L?O.visible&&O.type===L:T.traceIs(O,"bar"),N=_.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(I?[k]:[]);N.enter().append("path").classed("legend"+L,!0).attr("d",U).attr("transform",y),N.exit().remove(),N.each(function(W){var B=_.select(this),V=W[0],q=A(V.mlw,P.line,5,2);B.style("stroke-width",q+"px");var ne=V.mcc;if(!m._inHover&&"mc"in V){var $=o(P),K=$.mid;K===void 0&&(K=($.max+$.min)/2),ne=b.tryColorscale(P,"")(K)}var ee=ne||V.mc||P.color,J=P.pattern,Z=J&&b.getPatternAttr(J.shape,0,"");if(Z){var te=b.getPatternAttr(J.bgcolor,0,null),oe=b.getPatternAttr(J.fgcolor,0,null),se=J.fgopacity,ce=u(J.size,8,10),ye=u(J.solidity,.5,1),me="legend-"+O.uid;B.call(b.pattern,"legend",f,me,Z,ce,ye,ne,J.fillmode,te,oe,se)}else B.call(c.fill,ee);q&&c.stroke(B,V.mlc||F.color)})}function S(k,E,L){var O=k[0],P=O.trace,F=L?P.visible&&P.type===L:T.traceIs(P,L),U=_.select(E).select("g.legendpoints").selectAll("path.legend"+L).data(F?[k]:[]);if(U.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),U.exit().remove(),U.size()){var I=P.marker||{},N=A(n(I.line.width,O.pts),I.line,5,2),W="pieLike",B=r.minExtend(P,{marker:{line:{width:N}}},W),V=r.minExtend(O,{trace:B},W);i(U,V,B,f)}}p.each(function(k){var E=_.select(this),L=r.ensureSingle(E,"g","layers");L.style("opacity",k[0].trace.opacity);var O=m.indentation,P=m.valign,F=k[0].lineHeight,U=k[0].height;if(P==="middle"&&O===0||!F||!U)L.attr("transform",null);else{var I={top:1,bottom:-1}[P]*(.5*(F-U+3))||0,N=m.indentation;L.attr("transform",w(N,I))}L.selectAll("g.legendfill").data([k]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([k]).enter().append("g").classed("legendlines",!0);var W=L.selectAll("g.legendsymbols").data([k]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([k]).enter().append("g").classed("legendpoints",!0)}).each(function(k){var E,L=k[0].trace,O=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":O=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":O=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":O=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":O=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":O=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":O=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":O=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var P=_.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(O);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(F,U){var I,N=_.select(this),W=o(L),B=W.colorscale,V=W.reversescale;if(B){if(!E){var q=B.length;I=U===0?B[V?q-1:0][1]:U===1?B[V?0:q-1][1]:B[Math.floor((q-1)/2)][1]}}else{var ne=L.vertexcolor||L.facecolor||L.color;I=r.isArrayOrTypedArray(ne)?ne[U]||ne[0]:ne}N.attr("d",F[0]),I?N.call(c.fill,I):N.call(function($){if($.size()){var K="legendfill-"+L.uid;b.gradient($,f,K,s(V,E==="radial"),B,"fill")}})})}).each(function(k){var E=k[0].trace,L=E.type==="waterfall";if(k[0]._distinct&&L){var O=k[0].trace[k[0].dir].marker;return k[0].mc=O.color,k[0].mlw=O.line.width,k[0].mlc=O.line.color,d(k,this,"waterfall")}var P=[];E.visible&&L&&(P=k[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var F=_.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);F.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(U){var I=_.select(this),N=E[U[0]].marker,W=A(void 0,N.line,5,2);I.attr("d",U[1]).style("stroke-width",W+"px").call(c.fill,N.color),W&&I.call(c.stroke,N.line.color)})}).each(function(k){d(k,this,"funnel")}).each(function(k){d(k,this)}).each(function(k){var E=k[0].trace,L=_.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&T.traceIs(E,"box-violin")?[k]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),L.exit().remove(),L.each(function(){var O=_.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||c.opacity(E.fillcolor)!==0||c.opacity((E.line||{}).color)!==0){var P=A(void 0,E.line,5,2);O.style("stroke-width",P+"px").call(c.fill,E.fillcolor),P&&c.stroke(O,E.line.color)}else{var F=r.minExtend(E,{marker:{size:g?12:r.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(b.pointStyle,F,f)}})}).each(function(k){S(k,this,"funnelarea")}).each(function(k){S(k,this,"pie")}).each(function(k){var E,L,O=l(k),P=O.showFill,F=O.showLine,U=O.showGradientLine,I=O.showGradientFill,N=O.anyFill,W=O.anyLine,B=k[0],V=B.trace,q=o(V),ne=q.colorscale,$=q.reversescale,K=t.hasMarkers(V)||!N?"M5,0":W?"M5,-2":"M5,-3",ee=_.select(this),J=ee.select(".legendfill").selectAll("path").data(P||I?[k]:[]);if(J.enter().append("path").classed("js-fill",!0),J.exit().remove(),J.attr("d",K+"h"+v+"v6h-"+v+"z").call(function(oe){if(oe.size())if(P)b.fillGroupStyle(oe,f,!0);else{var se="legendfill-"+V.uid;b.gradient(oe,f,se,s($),ne,"fill")}}),F||U){var Z=A(void 0,V.line,10,5);L=r.minExtend(V,{line:{width:Z}}),E=[r.minExtend(B,{trace:L})]}var te=ee.select(".legendlines").selectAll("path").data(F||U?[E]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",K+(U?"l"+v+",0.0001":"h"+v)).call(F?b.lineGroupStyle:function(oe){if(oe.size()){var se="legendline-"+V.uid;b.lineGroupStyle(oe),b.gradient(oe,f,se,s($),ne,"stroke")}})}).each(function(k){var E,L,O=l(k),P=O.anyFill,F=O.anyLine,U=O.showLine,I=O.showMarker,N=k[0],W=N.trace,B=!I&&!F&&!P&&t.hasText(W);function V(te,oe,se,ce){var ye=r.nestedProperty(W,te).get(),me=r.isArrayOrTypedArray(ye)&&oe?oe(ye):ye;if(g&&me&&ce!==void 0&&(me=ce),se){if(me<se[0])return se[0];if(me>se[1])return se[1]}return me}function q(te){return N._distinct&&N.index&&te[N.index]?te[N.index]:te[0]}if(I||B||U){var ne={},$={};if(I){ne.mc=V("marker.color",q),ne.mx=V("marker.symbol",q),ne.mo=V("marker.opacity",r.mean,[.2,1]),ne.mlc=V("marker.line.color",q),ne.mlw=V("marker.line.width",r.mean,[0,5],2),$.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var K=V("marker.size",r.mean,[2,16],12);ne.ms=K,$.marker.size=K}U&&($.line={width:V("line.width",q,[0,10],5)}),B&&(ne.tx="Aa",ne.tp=V("textposition",q),ne.ts=10,ne.tc=V("textfont.color",q),ne.tf=V("textfont.family",q),ne.tw=V("textfont.weight",q),ne.ty=V("textfont.style",q),ne.tv=V("textfont.variant",q),ne.tC=V("textfont.textcase",q),ne.tE=V("textfont.lineposition",q),ne.tS=V("textfont.shadow",q)),E=[r.minExtend(N,ne)],(L=r.minExtend(W,$)).selectedpoints=null,L.texttemplate=null}var ee=_.select(this).select("g.legendpoints"),J=ee.selectAll("path.scatterpts").data(I?E:[]);J.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),J.exit().remove(),J.call(b.pointStyle,L,f),I&&(E[0].mrc=3);var Z=ee.selectAll("g.pointtext").data(B?E:[]);Z.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),Z.exit().remove(),Z.selectAll("text").call(b.textPointStyle,L,f)}).each(function(k){var E=k[0].trace,L=_.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[k,k]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(O,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(O,P){var F=_.select(this),U=E[P?"increasing":"decreasing"],I=A(void 0,U.line,5,2);F.style("stroke-width",I+"px").call(c.fill,U.fillcolor),I&&c.stroke(F,U.line.color)})}).each(function(k){var E=k[0].trace,L=_.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[k,k]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(O,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(O,P){var F=_.select(this),U=E[P?"increasing":"decreasing"],I=A(void 0,U.line,5,2);F.style("fill","none").call(b.dashLine,U.line.dash,I),I&&c.stroke(F,U.line.color)})})}},66540:function(R,C,e){"use strict";e(76052),R.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(R,C,e){"use strict";var _=e(24040),T=e(7316),r=e(79811),w=e(9224),b=e(4016).eraseActiveShape,c=e(3400),o=c._,t=R.exports={};function i(h,g){var v,x,y=g.currentTarget,A=y.getAttribute("data-attr"),d=y.getAttribute("data-val")||!0,S=h._fullLayout,k={},E=r.list(h,null,!0),L=S._cartesianSpikesEnabled;if(A==="zoom"){var O,P=d==="in"?.5:2,F=(1+P)/2,U=(1-P)/2;for(x=0;x<E.length;x++)if(!(v=E[x]).fixedrange)if(O=v._name,d==="auto")k[O+".autorange"]=!0;else if(d==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?k[O+".autorange"]=!0:v._rangeInitial0===void 0?(k[O+".autorange"]=v._autorangeInitial,k[O+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(k[O+".range"]=[v._rangeInitial0,null],k[O+".autorange"]=v._autorangeInitial):k[O+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(k[O+".showspikes"]=v._showSpikeInitial,L!=="on"||v._showSpikeInitial||(L="off"));else{var I=[v.r2l(v.range[0]),v.r2l(v.range[1])],N=[F*I[0]+U*I[1],F*I[1]+U*I[0]];k[O+".range[0]"]=v.l2r(N[0]),k[O+".range[1]"]=v.l2r(N[1])}}else A!=="hovermode"||d!=="x"&&d!=="y"||(d=S._isHoriz?"y":"x",y.setAttribute("data-val",d)),k[A]=d;S._cartesianSpikesEnabled=L,_.call("_guiRelayout",h,k)}function n(h,g){for(var v=g.currentTarget,x=v.getAttribute("data-attr"),y=v.getAttribute("data-val")||!0,A=h._fullLayout._subplots.gl3d||[],d={},S=x.split("."),k=0;k<A.length;k++)d[A[k]+"."+S[1]]=y;var E=y==="pan"?y:"zoom";d.dragmode=E,_.call("_guiRelayout",h,d)}function a(h,g){for(var v=g.currentTarget.getAttribute("data-attr"),x=v==="resetLastSave",y=v==="resetDefault",A=h._fullLayout,d=A._subplots.gl3d||[],S={},k=0;k<d.length;k++){var E,L=d[k],O=L+".camera",P=L+".aspectratio",F=L+".aspectmode",U=A[L]._scene;x?(S[O+".up"]=U.viewInitial.up,S[O+".eye"]=U.viewInitial.eye,S[O+".center"]=U.viewInitial.center,E=!0):y&&(S[O+".up"]=null,S[O+".eye"]=null,S[O+".center"]=null,E=!0),E&&(S[P+".x"]=U.viewInitial.aspectratio.x,S[P+".y"]=U.viewInitial.aspectratio.y,S[P+".z"]=U.viewInitial.aspectratio.z,S[F]=U.viewInitial.aspectmode)}_.call("_guiRelayout",h,S)}function s(h,g){var v=g.currentTarget,x=v._previousVal,y=h._fullLayout,A=y._subplots.gl3d||[],d=["xaxis","yaxis","zaxis"],S={},k={};if(x)k=x,v._previousVal=null;else{for(var E=0;E<A.length;E++){var L=A[E],O=y[L],P=L+".hovermode";S[P]=O.hovermode,k[P]=!1;for(var F=0;F<3;F++){var U=d[F],I=L+"."+U+".showspikes";k[I]=!1,S[I]=O[U].showspikes}}v._previousVal=S}return k}function l(h,g){for(var v=g.currentTarget,x=v.getAttribute("data-attr"),y=v.getAttribute("data-val")||!0,A=h._fullLayout,d=A._subplots.geo||[],S=0;S<d.length;S++){var k=d[S],E=A[k];if(x==="zoom"){var L=E.projection.scale,O=y==="in"?2*L:.5*L;_.call("_guiRelayout",h,k+".projection.scale",O)}}x==="reset"&&m(h,"geo")}function u(h){var g=h._fullLayout;return!g.hovermode&&(g._has("cartesian")?g._isHoriz?"y":"x":"closest")}function p(h){var g=u(h);_.call("_guiRelayout",h,"hovermode",g)}function f(h,g){for(var v=g.currentTarget.getAttribute("data-val"),x=h._fullLayout,y=x._subplots.mapbox||[],A={},d=0;d<y.length;d++){var S=y[d],k=x[S].zoom,E=v==="in"?1.05*k:k/1.05;A[S+".zoom"]=E}_.call("_guiRelayout",h,A)}function m(h,g){for(var v=h._fullLayout,x=v._subplots[g]||[],y={},A=0;A<x.length;A++)for(var d=x[A],S=v[d]._subplot.viewInitial,k=Object.keys(S),E=0;E<k.length;E++){var L=k[E];y[d+"."+L]=S[L]}_.call("_guiRelayout",h,y)}t.toImage={name:"toImage",title:function(h){var g=(h._context.toImageButtonOptions||{}).format||"png";return o(h,g==="png"?"Download plot as a png":"Download plot")},icon:w.camera,click:function(h){var g=h._context.toImageButtonOptions,v={format:g.format||"png"};c.notifier(o(h,"Taking snapshot - this may take a few seconds"),"long"),v.format!=="svg"&&c.isIE()&&(c.notifier(o(h,"IE only supports svg.  Changing format to svg."),"long"),v.format="svg"),["filename","width","height","scale"].forEach(function(x){x in g&&(v[x]=g[x])}),_.call("downloadImage",h,v).then(function(x){c.notifier(o(h,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){c.notifier(o(h,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(h){return o(h,"Edit in Chart Studio")},icon:w.disk,click:function(h){T.sendDataToCloud(h)}},t.editInChartStudio={name:"editInChartStudio",title:function(h){return o(h,"Edit in Chart Studio")},icon:w.pencil,click:function(h){T.sendDataToCloud(h)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(h){return o(h,"Zoom")},attr:"dragmode",val:"zoom",icon:w.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(h){return o(h,"Pan")},attr:"dragmode",val:"pan",icon:w.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(h){return o(h,"Box Select")},attr:"dragmode",val:"select",icon:w.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(h){return o(h,"Lasso Select")},attr:"dragmode",val:"lasso",icon:w.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(h){return o(h,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:w.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(h){return o(h,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:w.drawopenpath,click:i},t.drawline={name:"drawline",title:function(h){return o(h,"Draw line")},attr:"dragmode",val:"drawline",icon:w.drawline,click:i},t.drawrect={name:"drawrect",title:function(h){return o(h,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:w.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(h){return o(h,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:w.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(h){return o(h,"Erase active shape")},icon:w.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(h){return o(h,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(h){return o(h,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(h){return o(h,"Autoscale")},attr:"zoom",val:"auto",icon:w.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(h){return o(h,"Reset axes")},attr:"zoom",val:"reset",icon:w.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(h){return o(h,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(h){return o(h,"Compare data on hover")},attr:"hovermode",val:function(h){return h._fullLayout._isHoriz?"y":"x"},icon:w.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(h){return o(h,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:w.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(h){return o(h,"Pan")},attr:"scene.dragmode",val:"pan",icon:w.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(h){return o(h,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:w["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(h){return o(h,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:w["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(h){return o(h,"Reset camera to default")},attr:"resetDefault",icon:w.home,click:a},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(h){return o(h,"Reset camera to last save")},attr:"resetLastSave",icon:w.movie,click:a},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(h){return o(h,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(h,g){var v=s(h,g);_.call("_guiRelayout",h,v)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(h){return o(h,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(h){return o(h,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(h){return o(h,"Reset")},attr:"reset",val:null,icon:w.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(h){return o(h,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:p},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(h){return o(h,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:p},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(h){return o(h,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:w.tooltip_basic,gravity:"ne",click:p},t.resetViewSankey={name:"resetSankeyGroup",title:function(h){return o(h,"Reset view")},icon:w.home,click:function(h){for(var g={"node.groups":[],"node.x":[],"node.y":[]},v=0;v<h._fullData.length;v++){var x=h._fullData[v]._viewInitial;g["node.groups"].push(x.node.groups.slice()),g["node.x"].push(x.node.x.slice()),g["node.y"].push(x.node.y.slice())}_.call("restyle",h,g)}},t.toggleHover={name:"toggleHover",title:function(h){return o(h,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:w.tooltip_basic,gravity:"ne",click:function(h,g){var v=s(h,g);v.hovermode=u(h),_.call("_guiRelayout",h,v)}},t.resetViews={name:"resetViews",title:function(h){return o(h,"Reset views")},icon:w.home,click:function(h,g){var v=g.currentTarget;v.setAttribute("data-attr","zoom"),v.setAttribute("data-val","reset"),i(h,g),v.setAttribute("data-attr","resetLastSave"),a(h,g),m(h,"geo"),m(h,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(h){return o(h,"Toggle Spike Lines")},icon:w.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(h){var g=h._fullLayout,v=g._cartesianSpikesEnabled;g._cartesianSpikesEnabled=v==="on"?"off":"on",_.call("_guiRelayout",h,function(x){for(var y=x._fullLayout._cartesianSpikesEnabled==="on",A=r.list(x,null,!0),d={},S=0;S<A.length;S++){var k=A[S];d[k._name+".showspikes"]=!!y||k._showSpikeInitial}return d}(h))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(h){return o(h,"Reset view")},attr:"reset",icon:w.home,click:function(h){m(h,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(h){return o(h,"Zoom in")},attr:"zoom",val:"in",icon:w.zoom_plus,click:f},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(h){return o(h,"Zoom out")},attr:"zoom",val:"out",icon:w.zoom_minus,click:f}},76052:function(R,C,e){"use strict";var _=e(44248),T=Object.keys(_),r=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],w=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(r),b=[];T.forEach(function(c){(function(o){if(w.indexOf(o._cat||o.name)===-1){var t=o.name,i=(o._cat||o.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(_[c])}),b.sort(),R.exports={DRAW_MODES:r,backButtons:w,foreButtons:b}},90824:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(31780),w=e(66540);R.exports=function(b,c){var o=b.modebar||{},t=r.newContainer(c,"modebar");function i(a,s){return _.coerce(o,t,w,a,s)}i("orientation"),i("bgcolor",T.addOpacity(c.paper_bgcolor,.5));var n=T.contrast(T.rgb(c.modebar.bgcolor));i("color",T.addOpacity(n,.3)),i("activecolor",T.addOpacity(n,.7)),i("uirevision",c.uirevision),i("add"),i("remove")}},45460:function(R,C,e){"use strict";R.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(R,C,e){"use strict";var _=e(79811),T=e(43028),r=e(24040),w=e(10624).isUnifiedHover,b=e(66400),c=e(44248),o=e(76052).DRAW_MODES,t=e(3400).extendDeep;R.exports=function(i){var n=i._fullLayout,a=i._context,s=n._modeBar;if(a.displayModeBar||a.watermark){if(!Array.isArray(a.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(a.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=a.modeBarButtons;l=Array.isArray(u)&&u.length?function(p){for(var f=t([],p),m=0;m<f.length;m++)for(var h=f[m],g=0;g<h.length;g++){var v=h[g];if(typeof v=="string"){if(c[v]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));f[m][g]=c[v]}}return f}(u):!a.displayModeBar&&a.watermark?[]:function(p){var f=p._fullLayout,m=p._fullData,h=p._context;function g(ye,me){if(typeof me=="string"){if(me.toLowerCase()===ye.toLowerCase())return!0}else{var fe=me.name,pe=me._cat||me.name;if(fe===ye||pe===ye.toLowerCase())return!0}return!1}var v=f.modebar.add;typeof v=="string"&&(v=[v]);var x=f.modebar.remove;typeof x=="string"&&(x=[x]);var y=h.modeBarButtonsToAdd.concat(v.filter(function(ye){for(var me=0;me<h.modeBarButtonsToRemove.length;me++)if(g(ye,h.modeBarButtonsToRemove[me]))return!1;return!0})),A=h.modeBarButtonsToRemove.concat(x.filter(function(ye){for(var me=0;me<h.modeBarButtonsToAdd.length;me++)if(g(ye,h.modeBarButtonsToAdd[me]))return!1;return!0})),d=f._has("cartesian"),S=f._has("gl3d"),k=f._has("geo"),E=f._has("pie"),L=f._has("funnelarea"),O=f._has("gl2d"),P=f._has("ternary"),F=f._has("mapbox"),U=f._has("polar"),I=f._has("smith"),N=f._has("sankey"),W=function(ye){for(var me=_.list({_fullLayout:ye},null,!0),fe=0;fe<me.length;fe++)if(!me[fe].fixedrange)return!1;return!0}(f),B=w(f.hovermode),V=[];function q(ye){if(ye.length){for(var me=[],fe=0;fe<ye.length;fe++){for(var pe=ye[fe],ge=c[pe],ke=ge.name.toLowerCase(),Ce=(ge._cat||ge.name).toLowerCase(),de=!1,ae=0;ae<A.length;ae++){var re=A[ae].toLowerCase();if(re===ke||re===Ce){de=!0;break}}de||me.push(c[pe])}V.push(me)}}var ne=["toImage"];h.showEditInChartStudio?ne.push("editInChartStudio"):h.showSendToCloud&&ne.push("sendDataToCloud"),q(ne);var $=[],K=[],ee=[],J=[];(d||O||E||L||P)+k+S+F+U+I>1?(K=["toggleHover"],ee=["resetViews"]):k?($=["zoomInGeo","zoomOutGeo"],K=["hoverClosestGeo"],ee=["resetGeo"]):S?(K=["hoverClosest3d"],ee=["resetCameraDefault3d","resetCameraLastSave3d"]):F?($=["zoomInMapbox","zoomOutMapbox"],K=["toggleHover"],ee=["resetViewMapbox"]):O?K=["hoverClosestGl2d"]:E?K=["hoverClosestPie"]:N?(K=["hoverClosestCartesian","hoverCompareCartesian"],ee=["resetViewSankey"]):K=["toggleHover"],d&&K.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(function(ye){for(var me=0;me<ye.length;me++)if(!r.traceIs(ye[me],"noHover"))return!1;return!0}(m)||B)&&(K=[]),!d&&!O||W||($=["zoomIn2d","zoomOut2d","autoScale2d"],ee[0]!=="resetViews"&&(ee=["resetScale2d"])),S?J=["zoom3d","pan3d","orbitRotation","tableRotation"]:(d||O)&&!W||P?J=["zoom2d","pan2d"]:F||k?J=["pan2d"]:U&&(J=["zoom2d"]),function(ye){for(var me=!1,fe=0;fe<ye.length&&!me;fe++){var pe=ye[fe];pe._module&&pe._module.selectPoints&&(r.traceIs(pe,"scatter-like")?(T.hasMarkers(pe)||T.hasText(pe))&&(me=!0):r.traceIs(pe,"box-violin")&&pe.boxpoints!=="all"&&pe.points!=="all"||(me=!0))}return me}(m)&&J.push("select2d","lasso2d");var Z=[],te=function(ye){Z.indexOf(ye)===-1&&K.indexOf(ye)!==-1&&Z.push(ye)};if(Array.isArray(y)){for(var oe=[],se=0;se<y.length;se++){var ce=y[se];typeof ce=="string"?(ce=ce.toLowerCase(),o.indexOf(ce)!==-1?(f._has("mapbox")||f._has("cartesian"))&&J.push(ce):ce==="togglespikelines"?te("toggleSpikelines"):ce==="togglehover"?te("toggleHover"):ce==="hovercompare"?te("hoverCompareCartesian"):ce==="hoverclosest"?(te("hoverClosestCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie")):ce==="v1hovermode"&&(te("hoverClosestCartesian"),te("hoverCompareCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie"))):oe.push(ce)}y=oe}return q(J),q($.concat(ee)),q(Z),function(ye,me){if(me.length)if(Array.isArray(me[0]))for(var fe=0;fe<me.length;fe++)ye.push(me[fe]);else ye.push(me);return ye}(V,y)}(i),s?s.update(i,l):n._modeBar=b(i,l)}else s&&(s.destroy(),delete n._modeBar)}},66400:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(3400),w=e(9224),b=e(25788).version,c=new DOMParser;function o(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=o.prototype;t.update=function(i,n){this.graphInfo=i;var a=this.graphInfo._context,s=this.graphInfo._fullLayout,l="modebar-"+s._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",a.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=s.modebar,p=a.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";r.deleteRelatedStyleRule(l),r.addRelatedStyleRule(l,p+"#"+l+" .modebar-group","background-color: "+u.bgcolor),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),r.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var f=!this.hasButtons(n),m=this.hasLogo!==a.displaylogo,h=this.locale!==a.locale;if(this.locale=a.locale,(f||m||h)&&(this.removeAllButtons(),this.updateButtons(n),a.watermark||a.displaylogo)){var g=this.getLogo();a.watermark&&(g.className=g.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(g,this.element.childNodes[0]):this.element.appendChild(g),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var s=n.createGroup();a.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var p=n.createButton(l);n.buttonElements.push(p),s.appendChild(p)}),n.element.appendChild(s)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,a=document.createElement("a");a.setAttribute("rel","tooltip"),a.className="modebar-btn";var s=i.title;s===void 0?s=i.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&a.setAttribute("data-title",s),i.attr!==void 0&&a.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),a.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");a.addEventListener("click",function(p){i.click(n.graphInfo,p),n.updateActiveButton(p.currentTarget)}),a.setAttribute("data-toggle",i.toggle||!1),i.toggle&&_.select(a).classed("active",!0);var u=i.icon;return typeof u=="function"?a.appendChild(u()):a.appendChild(this.createIcon(u||w.question)),a.setAttribute("data-gravity",i.gravity||"n"),a},t.createIcon=function(i){var n,a=T(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,a].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(s,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(l)}return i.svg&&(n=c.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,a=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var l=s.getAttribute("data-val")||!0,u=s.getAttribute("data-attr"),p=s.getAttribute("data-toggle")==="true",f=_.select(s);if(p)u===a&&f.classed("active",!f.classed("active"));else{var m=u===null?u:r.nestedProperty(n,u).get();f.classed("active",m===l)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var a=0;a<i.length;++a){if(i[a].length!==n[a].length)return!1;for(var s=0;s<i[a].length;s++)if(i[a][s].name!==n[a][s].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",r._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(w.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){r.removeElement(this.container.querySelector(".modebar")),r.deleteRelatedStyleRule(this._uid)},R.exports=function(i,n){var a=i._fullLayout,s=new o({graphInfo:i,container:a._modebardiv.node(),buttons:n});return a._privateplot&&_.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},26680:function(R,C,e){"use strict";var _=e(25376),T=e(22548),r=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});R.exports={visible:{valType:"boolean",editType:"plot"},buttons:r,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:_({editType:"plot"}),bgcolor:{valType:"color",dflt:T.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(R){"use strict";R.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(31780),w=e(51272),b=e(26680),c=e(85984);function o(t,i,n,a){var s=a.calendar;function l(p,f){return _.coerce(t,i,b.buttons,p,f)}if(l("visible")){var u=l("step");u!=="all"&&(!s||s==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}R.exports=function(t,i,n,a,s){var l=t.rangeselector||{},u=r.newContainer(i,"rangeselector");function p(h,g){return _.coerce(l,u,b,h,g)}if(p("visible",w(l,u,{name:"buttons",handleItemDefaults:o,calendar:s}).length>0)){var f=function(h,g,v){for(var x=v.filter(function(S){return g[S].anchor===h._id}),y=0,A=0;A<x.length;A++){var d=g[x[A]].domain;d&&(y=Math.max(d[1],y))}return[h.domain[0],y+c.yPad]}(i,n,a);p("x",f[0]),p("y",f[1]),_.noneOrAll(t,i,["x","y"]),p("xanchor"),p("yanchor"),_.coerceFont(p,"font",n.font);var m=p("bgcolor");p("activecolor",T.contrast(m,c.lightAmount,c.darkAmount)),p("bordercolor"),p("borderwidth")}}},50216:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(7316),w=e(76308),b=e(43616),c=e(3400),o=c.strTranslate,t=e(72736),i=e(79811),n=e(84284),a=n.LINE_SPACING,s=n.FROM_TL,l=n.FROM_BR,u=e(85984),p=e(48040);function f(g){return g._id}function m(g,v,x){var y=c.ensureSingle(g,"rect","selector-rect",function(A){A.attr("shape-rendering","crispEdges")});y.attr({rx:u.rx,ry:u.ry}),y.call(w.stroke,v.bordercolor).call(w.fill,function(A,d){return d._isActive||d._isHovered?A.activecolor:A.bgcolor}(v,x)).style("stroke-width",v.borderwidth+"px")}function h(g,v,x,y){var A,d;c.ensureSingle(g,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,v.font).text((A=x,d=y._fullLayout._meta,A.label?d?c.templateString(A.label,d):A.label:A.step==="all"?"all":A.count+A.step.charAt(0))).call(function(S){t.convertToTspans(S,y)})}R.exports=function(g){var v=g._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var y=i.list(x,"x",!0),A=[],d=0;d<y.length;d++){var S=y[d];S.rangeselector&&S.rangeselector.visible&&A.push(S)}return A}(g),f);v.enter().append("g").classed("rangeselector",!0),v.exit().remove(),v.style({cursor:"pointer","pointer-events":"all"}),v.each(function(x){var y=_.select(this),A=x,d=A.rangeselector,S=y.selectAll("g.button").data(c.filterVisible(d.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(k){var E=_.select(this),L=p(A,k);k._isActive=function(O,P,F){if(P.step==="all")return O.autorange===!0;var U=Object.keys(F);return O.range[0]===F[U[0]]&&O.range[1]===F[U[1]]}(A,k,L),E.call(m,d,k),E.call(h,d,k,g),E.on("click",function(){g._dragged||T.call("_guiRelayout",g,L)}),E.on("mouseover",function(){k._isHovered=!0,E.call(m,d,k)}),E.on("mouseout",function(){k._isHovered=!1,E.call(m,d,k)})}),function(k,E,L,O,P){var F=0,U=0,I=L.borderwidth;E.each(function(){var ne=_.select(this).select(".selector-text"),$=L.font.size*a,K=Math.max($*t.lineCount(ne),16)+3;U=Math.max(U,K)}),E.each(function(){var ne=_.select(this),$=ne.select(".selector-rect"),K=ne.select(".selector-text"),ee=K.node()&&b.bBox(K.node()).width,J=L.font.size*a,Z=t.lineCount(K),te=Math.max(ee+10,u.minButtonWidth);ne.attr("transform",o(I+F,I)),$.attr({x:0,y:0,width:te,height:U}),t.positionText(K,te/2,U/2-(Z-1)*J/2+3),F+=te+5});var N=k._fullLayout._size,W=N.l+N.w*L.x,B=N.t+N.h*(1-L.y),V="left";c.isRightAnchor(L)&&(W-=F,V="right"),c.isCenterAnchor(L)&&(W-=F/2,V="center");var q="top";c.isBottomAnchor(L)&&(B-=U,q="bottom"),c.isMiddleAnchor(L)&&(B-=U/2,q="middle"),F=Math.ceil(F),U=Math.ceil(U),W=Math.round(W),B=Math.round(B),r.autoMargin(k,O+"-range-selector",{x:L.x,y:L.y,l:F*s[V],r:F*l[V],b:U*l[q],t:U*s[q]}),P.attr("transform",o(W,B))}(g,S,d,A._name,y)})}},48040:function(R,C,e){"use strict";var _=e(73220),T=e(3400).titleCase;R.exports=function(r,w){var b=r._name,c={};if(w.step==="all")c[b+".autorange"]=!0;else{var o=function(t,i){var n,a=t.range,s=new Date(t.r2l(a[1])),l=i.step,u=_["utc"+T(l)],p=i.count;switch(i.stepmode){case"backward":n=t.l2r(+u.offset(s,-p));break;case"todate":var f=u.offset(s,-p);n=t.l2r(+u.ceil(f))}return[n,a[1]]}(r,w);c[b+".range[0]"]=o[0],c[b+".range[1]"]=o[1]}return c}},41152:function(R,C,e){"use strict";R.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(R,C,e){"use strict";var _=e(22548);R.exports={bgcolor:{valType:"color",dflt:_.background,editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(R,C,e){"use strict";var _=e(79811).list,T=e(19280).getAutoRange,r=e(74636);R.exports=function(w){for(var b=_(w,"x",!0),c=0;c<b.length;c++){var o=b[c],t=o[r.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=T(w,o))}}},74636:function(R){"use strict";R.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(R,C,e){"use strict";var _=e(3400),T=e(31780),r=e(79811),w=e(11200),b=e(10936);R.exports=function(c,o,t){var i=c[t],n=o[t];if(i.rangeslider||o._requestRangeslider[n._id]){_.isPlainObject(i.rangeslider)||(i.rangeslider={});var a,s,l=i.rangeslider,u=T.newContainer(n,"rangeslider");if(y("visible")){y("bgcolor",o.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!n.isValidRange(l.range)),y("range");var p=o._subplots;if(p)for(var f=p.cartesian.filter(function(d){return d.substr(0,d.indexOf("y"))===r.name2id(t)}).map(function(d){return d.substr(d.indexOf("y"),d.length)}),m=_.simpleMap(f,r.id2name),h=0;h<m.length;h++){var g=m[h];a=l[g]||{},s=T.newContainer(u,g,"yaxis");var v,x=o[g];a.range&&x.isValidRange(a.range)&&(v="fixed"),A("rangemode",v)!=="match"&&A("range",x.range.slice())}u._input=l}}function y(d,S){return _.coerce(l,u,w,d,S)}function A(d,S){return _.coerce(a,s,b,d,S)}}},20060:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(7316),w=e(3400),b=w.strTranslate,c=e(43616),o=e(76308),t=e(81668),i=e(57952),n=e(79811),a=e(86476),s=e(93972),l=e(74636);function u(x){return typeof x.clientX=="number"?x.clientX:x.touches&&x.touches.length>0?x.touches[0].clientX:0}function p(x,y,A,d){var S=w.ensureSingle(x,"rect",l.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),k=d.borderwidth%2==0?d.borderwidth:d.borderwidth-1,E=-d._offsetShift,L=c.crispRound(y,d.borderwidth);S.attr({width:d._width+k,height:d._height+k,transform:b(E,E),"stroke-width":L}).call(o.stroke,d.bordercolor).call(o.fill,d.bgcolor)}function f(x,y,A,d){var S=y._fullLayout;w.ensureSingleById(S._topdefs,"clipPath",d._clipId,function(k){k.append("rect").attr({x:0,y:0})}).select("rect").attr({width:d._width,height:d._height})}function m(x,y,A,d){var S,k=y.calcdata,E=x.selectAll("g."+l.rangePlotClassName).data(A._subplotsWith,w.identity);E.enter().append("g").attr("class",function(L){return l.rangePlotClassName+" "+L}).call(c.setClipUrl,d._clipId,y),E.order(),E.exit().remove(),E.each(function(L,O){var P=_.select(this),F=O===0,U=n.getFromId(y,L,"y"),I=U._name,N=d[I],W={data:[],layout:{xaxis:{type:A.type,domain:[0,1],range:d.range.slice(),calendar:A.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};A.rangebreaks&&(W.layout.xaxis.rangebreaks=A.rangebreaks),W.layout[I]={type:U.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(W.layout[I].rangebreaks=U.rangebreaks),r.supplyDefaults(W);var B=W._fullLayout.xaxis,V=W._fullLayout[I];B.clearCalc(),B.setScale(),V.clearCalc(),V.setScale();var q={id:L,plotgroup:P,xaxis:B,yaxis:V,isRangePlot:!0};F?S=q:(q.mainplot="xy",q.mainplotinfo=S),i.rangePlot(y,q,function(ne,$){for(var K=[],ee=0;ee<ne.length;ee++){var J=ne[ee],Z=J[0].trace;Z.xaxis+Z.yaxis===$&&K.push(J)}return K}(k,L))})}function h(x,y,A,d,S){w.ensureSingle(x,"rect",l.maskMinClassName,function(k){k.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(o.fill,l.maskColor),w.ensureSingle(x,"rect",l.maskMaxClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(o.fill,l.maskColor),S.rangemode!=="match"&&(w.ensureSingle(x,"rect",l.maskMinOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).call(o.fill,l.maskOppAxisColor),w.ensureSingle(x,"rect",l.maskMaxOppAxisClassName,function(k){k.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).style("border-top",l.maskOppBorder).call(o.fill,l.maskOppAxisColor))}function g(x,y,A,d){y._context.staticPlot||w.ensureSingle(x,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:d._height,fill:l.slideBoxFill})}function v(x,y,A,d){var S=w.ensureSingle(x,"g",l.grabberMinClassName),k=w.ensureSingle(x,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},L={y:Math.round(d._height/4),height:Math.round(d._height/2)};w.ensureSingle(S,"rect",l.handleMinClassName,function(P){P.attr(E)}).attr(L),w.ensureSingle(k,"rect",l.handleMaxClassName,function(P){P.attr(E)}).attr(L);var O={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:y._context.staticPlot?void 0:l.grabAreaCursor};w.ensureSingle(S,"rect",l.grabAreaMinClassName,function(P){P.attr(O)}).attr("height",d._height),w.ensureSingle(k,"rect",l.grabAreaMaxClassName,function(P){P.attr(O)}).attr("height",d._height)}R.exports=function(x){for(var y=x._fullLayout,A=y._rangeSliderData,d=0;d<A.length;d++){var S=A[d][l.name];S._clipId=S._id+"-"+y._uid}var k=y._infolayer.selectAll("g."+l.containerClassName).data(A,function(E){return E._name});k.exit().each(function(E){var L=E[l.name];y._topdefs.select("#"+L._clipId).remove()}).remove(),A.length!==0&&(k.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),k.each(function(E){var L=_.select(this),O=E[l.name],P=y[n.id2name(E.anchor)],F=O[n.id2name(E.anchor)];if(O.range){var U,I=w.simpleMap(O.range,E.r2l),N=w.simpleMap(E.range,E.r2l);U=N[0]<N[1]?[Math.min(I[0],N[0]),Math.max(I[1],N[1])]:[Math.max(I[0],N[0]),Math.min(I[1],N[1])],O.range=O._input.range=w.simpleMap(U,E.l2r)}E.cleanRange("rangeslider.range");var W=y._size,B=E.domain;O._width=W.w*(B[1]-B[0]);var V=Math.round(W.l+W.w*B[0]),q=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+O._offsetShift+l.extraPad);L.attr("transform",b(V,q)),O._rl=w.simpleMap(O.range,E.r2l);var ne=O._rl[0],$=O._rl[1],K=$-ne;if(O.p2d=function(me){return me/O._width*K+ne},O.d2p=function(me){return(me-ne)/K*O._width},E.rangebreaks){var ee=E.locateBreaks(ne,$);if(ee.length){var J,Z,te=0;for(J=0;J<ee.length;J++)te+=(Z=ee[J]).max-Z.min;var oe=O._width/($-ne-te),se=[-oe*ne];for(J=0;J<ee.length;J++)Z=ee[J],se.push(se[se.length-1]-oe*(Z.max-Z.min));for(O.d2p=function(me){for(var fe=se[0],pe=0;pe<ee.length;pe++){var ge=ee[pe];if(me>=ge.max)fe=se[pe+1];else if(me<ge.min)break}return fe+oe*me},J=0;J<ee.length;J++)(Z=ee[J]).pmin=O.d2p(Z.min),Z.pmax=O.d2p(Z.max);O.p2d=function(me){for(var fe=se[0],pe=0;pe<ee.length;pe++){var ge=ee[pe];if(me>=ge.pmax)fe=se[pe+1];else if(me<ge.pmin)break}return(me-fe)/oe}}}if(F.rangemode!=="match"){var ce=P.r2l(F.range[0]),ye=P.r2l(F.range[1])-ce;O.d2pOppAxis=function(me){return(me-ce)/ye*O._height}}L.call(p,x,E,O).call(f,x,E,O).call(m,x,E,O).call(h,x,E,O,F).call(g,x,E,O).call(v,x,E,O),function(me,fe,pe,ge){if(!fe._context.staticPlot){var ke=me.select("rect."+l.slideBoxClassName).node(),Ce=me.select("rect."+l.grabAreaMinClassName).node(),de=me.select("rect."+l.grabAreaMaxClassName).node();me.on("mousedown",ae),me.on("touchstart",ae)}function ae(){var re=_.event,he=re.target,Se=u(re),xe=Se-me.node().getBoundingClientRect().left,Te=ge.d2p(pe._rl[0]),Ae=ge.d2p(pe._rl[1]),Pe=a.coverSlip();function De(we){var Ee,Fe,Le,je=+u(we)-Se;switch(he){case ke:if(Le="ew-resize",Te+je>pe._length||Ae+je<0)return;Ee=Te+je,Fe=Ae+je;break;case Ce:if(Le="col-resize",Te+je>pe._length)return;Ee=Te+je,Fe=Ae;break;case de:if(Le="col-resize",Ae+je<0)return;Ee=Te,Fe=Ae+je;break;default:Le="ew-resize",Ee=xe,Fe=xe+je}if(Fe<Ee){var Ge=Fe;Fe=Ee,Ee=Ge}ge._pixelMin=Ee,ge._pixelMax=Fe,s(_.select(Pe),Le),function(Je,rt,ot,yt){function _t(Qe){return ot.l2r(w.constrain(Qe,yt._rl[0],yt._rl[1]))}var mt=_t(yt.p2d(yt._pixelMin)),tt=_t(yt.p2d(yt._pixelMax));window.requestAnimationFrame(function(){T.call("_guiRelayout",rt,ot._name+".range",[mt,tt])})}(0,fe,pe,ge)}function ve(){Pe.removeEventListener("mousemove",De),Pe.removeEventListener("mouseup",ve),this.removeEventListener("touchmove",De),this.removeEventListener("touchend",ve),w.removeElement(Pe)}this.addEventListener("touchmove",De),this.addEventListener("touchend",ve),Pe.addEventListener("mousemove",De),Pe.addEventListener("mouseup",ve)}}(L,x,E,O),function(me,fe,pe,ge,ke,Ce){var de=l.handleWidth/2;function ae(we){return w.constrain(we,0,ge._width)}function re(we){return w.constrain(we,0,ge._height)}function he(we){return w.constrain(we,-de,ge._width+de)}var Se=ae(ge.d2p(pe._rl[0])),xe=ae(ge.d2p(pe._rl[1]));if(me.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",xe-Se),me.select("rect."+l.maskMinClassName).attr("width",Se),me.select("rect."+l.maskMaxClassName).attr("x",xe).attr("width",ge._width-xe),Ce.rangemode!=="match"){var Te=ge._height-re(ge.d2pOppAxis(ke._rl[1])),Ae=ge._height-re(ge.d2pOppAxis(ke._rl[0]));me.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",Te).attr("width",xe-Se),me.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Ae).attr("height",ge._height-Ae).attr("width",xe-Se),me.select("rect."+l.slideBoxClassName).attr("y",Te).attr("height",Ae-Te)}var Pe=.5,De=Math.round(he(Se-de))-Pe,ve=Math.round(he(xe-de))+Pe;me.select("g."+l.grabberMinClassName).attr("transform",b(De,Pe)),me.select("g."+l.grabberMaxClassName).attr("transform",b(ve,Pe))}(L,0,E,O,P,F),E.side==="bottom"&&t.draw(x,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:y._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:q+O._height+O._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(R,C,e){"use strict";var _=e(79811),T=e(72736),r=e(74636),w=e(84284).LINE_SPACING,b=r.name;function c(o){var t=o&&o[b];return t&&t.visible}C.isVisible=c,C.makeData=function(o){var t=_.list({_fullLayout:o},"x",!0),i=o.margin,n=[];if(!o._has("gl2d"))for(var a=0;a<t.length;a++){var s=t[a];if(c(s)){n.push(s);var l=s[b];l._id=b+s._id,l._height=(o.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}o._rangeSliderData=n},C.autoMarginOpts=function(o,t){var i=o._fullLayout,n=t[b],a=t._id.charAt(0),s=0,l=0;return t.side==="bottom"&&(s=t._depth,t.title.text!==i._dfltTitle[a]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(T.BR_TAG_ALL)||[]).length*t.title.font.size*w)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+s+Math.max(i.margin.b,l),pad:r.extraPad+2*n._offsetShift}}},49692:function(R,C,e){"use strict";var _=e(3400),T=e(11200),r=e(10936),w=e(97944);R.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_.extendFlat({},T,{yaxis:r})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:w.isVisible,makeData:w.makeData,autoMarginOpts:w.autoMarginOpts}},10936:function(R){"use strict";R.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(R,C,e){"use strict";var _=e(13916),T=e(52904).line,r=e(98192).u,w=e(92880).extendFlat,b=e(67824).overrideAll,c=e(31780).templatedArray;e(36208),R.exports=b(c("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:w({},_.xref,{}),yref:w({},_.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:T.color,width:w({},T.width,{min:1,dflt:1}),dash:w({},r,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(R){"use strict";R.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(51272),w=e(93956),b=e(65152);function c(o,t,i){function n(E,L){return _.coerce(o,t,w,E,L)}var a=n("path"),s=n("type",a?"path":"rect")!=="path";s&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],u=0;u<2;u++){var p,f,m,h=l[u],g={_fullLayout:i},v=T.coerceRef(o,t,g,h);if((p=T.getFromId(g,v))._selectionIndices.push(t._index),m=b.rangeToShapePosition(p),f=b.shapePositionToRange(p),s){var x=h+"0",y=h+"1",A=o[x],d=o[y];o[x]=f(o[x],!0),o[y]=f(o[y],!0),T.coercePosition(t,g,n,v,x),T.coercePosition(t,g,n,v,y);var S=t[x],k=t[y];S!==void 0&&k!==void 0&&(t[x]=m(S),t[y]=m(k),o[x]=A,o[y]=d)}}s&&_.noneOrAll(o,t,["x0","x1","y0","y1"])}R.exports=function(o,t){r(o,t,{name:"selections",handleItemDefaults:c});for(var i=t.selections,n=0;n<i.length;n++){var a=i[n];a&&a.path===void 0&&(a.x0!==void 0&&a.x1!==void 0&&a.y0!==void 0&&a.y1!==void 0||(t.selections[n]=null))}}},23640:function(R,C,e){"use strict";var _=e(9856).readPaths,T=e(55496),r=e(1936).clearOutlineControllers,w=e(76308),b=e(43616),c=e(31780).arrayEditor,o=e(65152),t=o.getPathString;function i(u){var p=u._fullLayout;for(var f in r(u),p._selectionLayer.selectAll("path").remove(),p._plots){var m=p._plots[f].selectionLayer;m&&m.selectAll("path").remove()}for(var h=0;h<p.selections.length;h++)a(u,h)}function n(u){return u._context.editSelection}function a(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var f=o.makeSelectionsOptionsAndPlotinfo(u,p),m=f.options,h=f.plotinfo;m._input&&function(g){var v=t(u,m),x={"data-index":p,"fill-rule":"evenodd",d:v},y=m.opacity,A="rgba(0,0,0,0)",d=m.line.color||w.contrast(u._fullLayout.plot_bgcolor),S=m.line.width,k=m.line.dash;S||(S=5,k="solid");var E=n(u)&&u._fullLayout._activeSelectionIndex===p;E&&(A=u._fullLayout.activeselection.fillcolor,y=u._fullLayout.activeselection.opacity);for(var L=[],O=1;O>=0;O--){var P=g.append("path").attr(x).style("opacity",O?.1:y).call(w.stroke,d).call(w.fill,A).call(b.dashLine,O?"solid":k,O?4+S:S);if(s(P,u,m),E){var F=c(u.layout,"selections",m);P.style({cursor:"move"});var U={element:P.node(),plotinfo:h,gd:u,editHelpers:F,isActiveSelection:!0},I=_(v,u);T(I,P,U)}else P.style("pointer-events",O?"all":"none");L[O]=P}var N=L[0];L[1].node().addEventListener("click",function(){return function(W,B){if(n(W)){var V=+B.node().getAttribute("data-index");if(V>=0){if(V===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=V,W._fullLayout._deactivateSelection=l,i(W)}}}(u,N)})}(u._fullLayout._selectionLayer)}function s(u,p,f){var m=f.xref+f.yref;b.setClipUrl(u,"clip"+p._fullLayout._uid+m,p)}function l(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(r(u),delete u._fullLayout._activeSelectionIndex,i(u))}R.exports={draw:i,drawOne:a,activateLastSelection:function(u){if(n(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=l,i(u)}}}},34200:function(R,C,e){"use strict";var _=e(98192).u,T=e(92880).extendFlat;R.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:T({},_,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(R){"use strict";R.exports=function(C,e,_){_("newselection.mode"),_("newselection.line.width")&&(_("newselection.line.color"),_("newselection.line.dash")),_("activeselection.fillcolor"),_("activeselection.opacity")}},5968:function(R,C,e){"use strict";var _=e(72760).selectMode,T=e(1936).clearOutline,r=e(9856),w=r.readPaths,b=r.writePaths,c=r.fixDatesForPaths;R.exports=function(o,t){if(o.length){var i=o[0][0];if(i){var n=i.getAttribute("d"),a=t.gd,s=a._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,p=l.yaxis,f=t.isActiveSelection,m=t.dragmode,h=(a.layout||{}).selections||[];if(!_(m)&&f!==void 0){var g=a._fullLayout._activeSelectionIndex;if(g<h.length)switch(a._fullLayout.selections[g].type){case"rect":m="select";break;case"path":m="lasso"}}var v,x=w(n,a,l,f),y={xref:u._id,yref:p._id,opacity:s.opacity,line:{color:s.line.color,width:s.line.width,dash:s.line.dash}};x.length===1&&(v=x[0]),v&&v.length===5&&m==="select"?(y.type="rect",y.x0=v[0][1],y.y0=v[0][2],y.x1=v[2][1],y.y1=v[2][2]):(y.type="path",u&&p&&c(x,u,p),y.path=b(x),v=null),T(a);for(var A=t.editHelpers,d=(A||{}).modifyItem,S=[],k=0;k<h.length;k++){var E=a._fullLayout.selections[k];if(E){if(S[k]=E._input,f!==void 0&&k===a._fullLayout._activeSelectionIndex){var L=y;switch(E.type){case"rect":d("x0",L.x0),d("x1",L.x1),d("y0",L.y0),d("y1",L.y1);break;case"path":d("path",L.path)}}}else S[k]=E}return f===void 0?(S.push(y),S):A?A.getUpdateObj():{}}}}},5840:function(R,C,e){"use strict";var _=e(3400).strTranslate;function T(r,w){switch(r.type){case"log":return r.p2d(w);case"date":return r.p2r(w,0,r.calendar);default:return r.p2r(w)}}R.exports={p2r:T,r2p:function(r,w){switch(r.type){case"log":return r.d2p(w);case"date":return r.r2p(w,0,r.calendar);default:return r.r2p(w)}},axValue:function(r){var w=r._id.charAt(0)==="y"?1:0;return function(b){return T(r,b[w])}},getTransform:function(r){return _(r.xaxis._offset,r.yaxis._offset)}}},22676:function(R,C,e){"use strict";var _=e(23640),T=e(43156);R.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:_.draw,drawOne:_.drawOne,reselect:T.reselect,prepSelect:T.prepSelect,clearOutline:T.clearOutline,clearSelectionsCache:T.clearSelectionsCache,selectOnClick:T.selectOnClick}},43156:function(R,C,e){"use strict";var _=e(14756),T=e(61456),r=e(24040),w=e(43616).dashStyle,b=e(76308),c=e(93024),o=e(10624).makeEventData,t=e(72760),i=t.freeMode,n=t.rectMode,a=t.drawMode,s=t.openMode,l=t.selectMode,u=e(65152),p=e(85448),f=e(55496),m=e(1936).clearOutline,h=e(9856),g=h.handleEllipse,v=h.readPaths,x=e(93940).newShapes,y=e(5968),A=e(23640).activateLastSelection,d=e(3400),S=d.sorterAsc,k=e(92065),E=e(91200),L=e(79811).getFromId,O=e(73696),P=e(39172).redrawReglTraces,F=e(83280),U=F.MINSELECT,I=k.filter,N=k.tester,W=e(5840),B=W.p2r,V=W.axValue,q=W.getTransform;function ne(De){return De.subplot!==void 0}function $(De,ve,we,Ee,Fe,Le,je){var Ge,Je,rt,ot,yt,_t,mt,tt,Qe,Dt=ve._hoverdata,zt=ve._fullLayout.clickmode.indexOf("event")>-1,pt=[];if(function(Xe){return Xe&&Array.isArray(Xe)&&Xe[0].hoverOnBox!==!0}(Dt)){Z(De,ve,Le);var vt=function(Xe,st){var lt,xt,bt=Xe[0],Ve=-1,Be=[];for(xt=0;xt<st.length;xt++)if(lt=st[xt],bt.fullData._expandedIndex===lt.cd[0].trace._expandedIndex){if(bt.hoverOnBox===!0)break;bt.pointNumber!==void 0?Ve=bt.pointNumber:bt.binNumber!==void 0&&(Ve=bt.binNumber,Be=bt.pointNumbers);break}return{pointNumber:Ve,pointNumbers:Be,searchInfo:lt}}(Dt,Ge=se(ve,we,Ee,Fe));if(vt.pointNumbers.length>0?function(Xe,st){var lt,xt,bt,Ve=[];for(bt=0;bt<Xe.length;bt++)(lt=Xe[bt]).cd[0].trace.selectedpoints&&lt.cd[0].trace.selectedpoints.length>0&&Ve.push(lt);if(Ve.length===1&&Ve[0]===st.searchInfo&&(xt=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(bt=0;bt<st.pointNumbers.length;bt++)if(xt.selectedpoints.indexOf(st.pointNumbers[bt])<0)return!1;return!0}return!1}(Ge,vt):function(Xe){var st,lt,xt=0;for(lt=0;lt<Xe.length;lt++)if((st=Xe[lt].cd[0].trace).selectedpoints&&(st.selectedpoints.length>1||(xt+=st.selectedpoints.length)>1))return!1;return xt===1}(Ge)&&(_t=ye(vt))){for(je&&je.remove(),Qe=0;Qe<Ge.length;Qe++)(Je=Ge[Qe])._module.selectPoints(Je,!1);me(ve,Ge),te(Le),zt&&Pe(ve)}else{for(mt=De.shiftKey&&(_t!==void 0?_t:ye(vt)),rt=function(Xe,st,lt){return{pointNumber:Xe,searchInfo:st,subtract:!!lt}}(vt.pointNumber,vt.searchInfo,mt),ot=J(Le.selectionDefs.concat([rt])),Qe=0;Qe<Ge.length;Qe++)if(yt=pe(Ge[Qe]._module.selectPoints(Ge[Qe],ot),Ge[Qe]),pt.length)for(var We=0;We<yt.length;We++)pt.push(yt[We]);else pt=yt;if(me(ve,Ge,tt={points:pt}),rt&&Le&&Le.selectionDefs.push(rt),je){var Ze=Le.mergedPolygons,Ne=s(Le.dragmode);f(ge(Ze,Ne),je,Le)}zt&&Ae(ve,tt)}}}function K(De){return"pointNumber"in De&&"searchInfo"in De}function ee(De){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ve,we,Ee,Fe){var Le=De.searchInfo.cd[0].trace._expandedIndex;return Fe.cd[0].trace._expandedIndex===Le&&Ee===De.pointNumber},isRect:!1,degenerate:!1,subtract:!!De.subtract}}function J(De){if(De.length){for(var ve=[],we=K(De[0])?0:De[0][0][0],Ee=we,Fe=K(De[0])?0:De[0][0][1],Le=Fe,je=0;je<De.length;je++)if(K(De[je]))ve.push(ee(De[je]));else{var Ge=N(De[je]);Ge.subtract=!!De[je].subtract,ve.push(Ge),we=Math.min(we,Ge.xmin),Ee=Math.max(Ee,Ge.xmax),Fe=Math.min(Fe,Ge.ymin),Le=Math.max(Le,Ge.ymax)}return{xmin:we,xmax:Ee,ymin:Fe,ymax:Le,pts:[],contains:function(Je,rt,ot,yt){for(var _t=!1,mt=0;mt<ve.length;mt++)ve[mt].contains(Je,rt,ot,yt)&&(_t=!ve[mt].subtract);return _t},isRect:!1,degenerate:!1}}}function Z(De,ve,we){var Ee=ve._fullLayout,Fe=we.plotinfo,Le=we.dragmode,je=Ee._lastSelectedSubplot&&Ee._lastSelectedSubplot===Fe.id,Ge=(De.shiftKey||De.altKey)&&!(a(Le)&&s(Le));je&&Ge&&Fe.selection&&Fe.selection.selectionDefs&&!we.selectionDefs?(we.selectionDefs=Fe.selection.selectionDefs,we.mergedPolygons=Fe.selection.mergedPolygons):Ge&&Fe.selection||te(we),je||(m(ve),Ee._lastSelectedSubplot=Fe.id)}function te(De,ve){var we=De.dragmode,Ee=De.plotinfo,Fe=De.gd;(function(yt){return yt._fullLayout._activeShapeIndex>=0})(Fe)&&Fe._fullLayout._deactivateShape(Fe),function(yt){return yt._fullLayout._activeSelectionIndex>=0}(Fe)&&Fe._fullLayout._deactivateSelection(Fe);var Le=Fe._fullLayout._zoomlayer,je=a(we),Ge=l(we);if(je||Ge){var Je,rt,ot=Le.selectAll(".select-outline-"+Ee.id);ot&&Fe._fullLayout._outlining&&(je&&(Je=x(ot,De)),Je&&r.call("_guiRelayout",Fe,{shapes:Je}),Ge&&!ne(De)&&(rt=y(ot,De)),rt&&(Fe._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",Fe,{selections:rt}).then(function(){ve&&A(Fe)})),Fe._fullLayout._outlining=!1)}Ee.selection={},Ee.selection.selectionDefs=De.selectionDefs=[],Ee.selection.mergedPolygons=De.mergedPolygons=[]}function oe(De){return De._id}function se(De,ve,we,Ee){if(!De.calcdata)return[];var Fe,Le,je,Ge=[],Je=ve.map(oe),rt=we.map(oe);for(je=0;je<De.calcdata.length;je++)if((Le=(Fe=De.calcdata[je])[0].trace).visible===!0&&Le._module&&Le._module.selectPoints)if(!ne({subplot:Ee})||Le.subplot!==Ee&&Le.geo!==Ee)if(Le.type==="splom"){if(Le._xaxes[Je[0]]&&Le._yaxes[rt[0]]){var ot=ce(Le._module,Fe,ve[0],we[0]);ot.scene=De._fullLayout._splomScenes[Le.uid],Ge.push(ot)}}else if(Le.type==="sankey"){var yt=ce(Le._module,Fe,ve[0],we[0]);Ge.push(yt)}else{if(!(Je.indexOf(Le.xaxis)!==-1||Le._xA&&Le._xA.overlaying)||!(rt.indexOf(Le.yaxis)!==-1||Le._yA&&Le._yA.overlaying))continue;Ge.push(ce(Le._module,Fe,L(De,Le.xaxis),L(De,Le.yaxis)))}else Ge.push(ce(Le._module,Fe,ve[0],we[0]));return Ge}function ce(De,ve,we,Ee){return{_module:De,cd:ve,xaxis:we,yaxis:Ee}}function ye(De){var ve=De.searchInfo.cd[0].trace,we=De.pointNumber,Ee=De.pointNumbers,Fe=Ee.length>0?Ee[0]:we;return!!ve.selectedpoints&&ve.selectedpoints.indexOf(Fe)>-1}function me(De,ve,we){var Ee,Fe;for(Ee=0;Ee<ve.length;Ee++){var Le=ve[Ee].cd[0].trace._fullInput,je=De._fullLayout._tracePreGUI[Le.uid]||{};je.selectedpoints===void 0&&(je.selectedpoints=Le._input.selectedpoints||null)}if(we){var Ge=we.points||[];for(Ee=0;Ee<ve.length;Ee++)(Fe=ve[Ee].cd[0].trace)._input.selectedpoints=Fe._fullInput.selectedpoints=[],Fe._fullInput!==Fe&&(Fe.selectedpoints=[]);for(var Je=0;Je<Ge.length;Je++){var rt=Ge[Je],ot=rt.data,yt=rt.fullData,_t=rt.pointIndex,mt=rt.pointIndices;mt?([].push.apply(ot.selectedpoints,mt),Fe._fullInput!==Fe&&[].push.apply(yt.selectedpoints,mt)):(ot.selectedpoints.push(_t),Fe._fullInput!==Fe&&yt.selectedpoints.push(_t))}}else for(Ee=0;Ee<ve.length;Ee++)delete(Fe=ve[Ee].cd[0].trace).selectedpoints,delete Fe._input.selectedpoints,Fe._fullInput!==Fe&&delete Fe._fullInput.selectedpoints;(function(tt,Qe){for(var Dt=!1,zt=0;zt<Qe.length;zt++){var pt=Qe[zt],vt=pt.cd;r.traceIs(vt[0].trace,"regl")&&(Dt=!0);var We=pt._module,Ze=We.styleOnSelect||We.style;Ze&&(Ze(tt,vt,vt[0].node3),vt[0].nodeRangePlot3&&Ze(tt,vt,vt[0].nodeRangePlot3))}Dt&&(O(tt),P(tt))})(De,ve)}function fe(De,ve,we){for(var Ee=(we?_.difference:_.union)({regions:De},{regions:[ve]}).regions.reverse(),Fe=0;Fe<Ee.length;Fe++){var Le=Ee[Fe];Le.subtract=he(Le,Ee.slice(0,Fe))}return Ee}function pe(De,ve){if(Array.isArray(De))for(var we=ve.cd,Ee=ve.cd[0].trace,Fe=0;Fe<De.length;Fe++)De[Fe]=o(De[Fe],Ee,we);return De}function ge(De,ve){for(var we=[],Ee=0;Ee<De.length;Ee++){we[Ee]=[];for(var Fe=0;Fe<De[Ee].length;Fe++){we[Ee][Fe]=[],we[Ee][Fe][0]=Fe?"L":"M";for(var Le=0;Le<De[Ee][Fe].length;Le++)we[Ee][Fe].push(De[Ee][Fe][Le])}ve||we[Ee].push(["Z",we[Ee][0][1],we[Ee][0][2]])}return we}function ke(De,ve){for(var we,Ee,Fe=[],Le=[],je=0;je<ve.length;je++){var Ge=ve[je];Ee=Ge._module.selectPoints(Ge,De),Le.push(Ee),we=pe(Ee,Ge),Fe=Fe.concat(we)}return Fe}function Ce(De,ve,we,Ee,Fe){var Le,je,Ge,Je=!!Ee;Fe&&(Le=Fe.plotinfo,je=Fe.xaxes[0]._id,Ge=Fe.yaxes[0]._id);var rt=[],ot=[],yt=re(De),_t=De._fullLayout;if(Le){var mt=_t._zoomlayer,tt=_t.dragmode,Qe=a(tt),Dt=l(tt);if(Qe||Dt){var zt=L(De,je,"x"),pt=L(De,Ge,"y");if(zt&&pt){var vt=mt.selectAll(".select-outline-"+Le.id);if(vt&&De._fullLayout._outlining&&vt.length){for(var We=vt[0][0].getAttribute("d"),Ze=v(We,De,Le),Ne=[],Xe=0;Xe<Ze.length;Xe++){for(var st=Ze[Xe],lt=[],xt=0;xt<st.length;xt++)lt.push([Se(zt,st[xt][1]),Se(pt,st[xt][2])]);lt.xref=je,lt.yref=Ge,lt.subtract=he(lt,Ne),Ne.push(lt)}yt=yt.concat(Ne)}}}}var bt=je&&Ge?[je+Ge]:_t._subplots.cartesian;(function(On){var Tn=On.calcdata;if(Tn)for(var Cn=0;Cn<Tn.length;Cn++){var Bn=Tn[Cn][0].trace,Xn=On._fullLayout._splomScenes;if(Xn){var cr=Xn[Bn.uid];cr&&(cr.selectBatch=[])}}})(De);for(var Ve={},Be=0;Be<bt.length;Be++){var at=bt[Be],ht=at.indexOf("y"),dt=at.slice(0,ht),it=at.slice(ht),kt=je&&Ge?we:void 0;if(kt=ae(yt,dt,it,kt)){var Tt=Ee;if(!Je){var St=L(De,dt,"x"),wt=L(De,it,"y");Tt=se(De,[St],[wt],at);for(var At=0;At<Tt.length;At++){var Ft=Tt[At],jt=Ft.cd[0],rn=jt.trace;if(Ft._module.name==="scattergl"&&!jt.t.xpx){var nn=rn.x,on=rn.y,Ht=rn._length;jt.t.xpx=[],jt.t.ypx=[];for(var $t=0;$t<Ht;$t++)jt.t.xpx[$t]=St.c2p(nn[$t]),jt.t.ypx[$t]=wt.c2p(on[$t])}Ft._module.name==="splom"&&(Ve[rn.uid]||(Ve[rn.uid]=!0))}}var bn=ke(kt,Tt);rt=rt.concat(bn),ot=ot.concat(Tt)}}var ln={points:rt};me(De,ot,ln);var Kt=_t.clickmode.indexOf("event")>-1&&ve;if(!Le&&ve){var fn=re(De,!0);if(fn.length){var en=fn[0].xref,un=fn[0].yref;if(en&&un){var An=xe(fn);Te([L(De,en,"x"),L(De,un,"y")])(ln,An)}}De._fullLayout._noEmitSelectedAtStart?De._fullLayout._noEmitSelectedAtStart=!1:Kt&&Ae(De,ln),_t._reselect=!1}if(!Le&&_t._deselect){var wn=_t._deselect;(function(On,Tn,Cn){for(var Bn=0;Bn<Cn.length;Bn++){var Xn=Cn[Bn];if(Xn.xaxis&&Xn.xaxis._id===On&&Xn.yaxis&&Xn.yaxis._id===Tn)return!0}return!1})(je=wn.xref,Ge=wn.yref,ot)||de(De,je,Ge,Ee),Kt&&(ln.points.length?Ae(De,ln):Pe(De)),_t._deselect=!1}return{eventData:ln,selectionTesters:we}}function de(De,ve,we,Ee){Ee=se(De,[L(De,ve,"x")],[L(De,we,"y")],ve+we);for(var Fe=0;Fe<Ee.length;Fe++){var Le=Ee[Fe];Le._module.selectPoints(Le,!1)}me(De,Ee)}function ae(De,ve,we,Ee){for(var Fe,Le=0;Le<De.length;Le++){var je=De[Le];ve===je.xref&&we===je.yref&&(Fe?Ee=J(Fe=fe(Fe,je,!!je.subtract)):(Fe=[je],Ee=N(je)))}return Ee}function re(De,ve){for(var we=[],Ee=De._fullLayout,Fe=Ee.selections,Le=Fe.length,je=0;je<Le;je++)if(!ve||je===Ee._activeSelectionIndex){var Ge=Fe[je];if(Ge){var Je,rt,ot,yt,_t,mt=Ge.xref,tt=Ge.yref,Qe=L(De,mt,"x"),Dt=L(De,tt,"y");if(Ge.type==="rect"){_t=[];var zt=Se(Qe,Ge.x0),pt=Se(Qe,Ge.x1),vt=Se(Dt,Ge.y0),We=Se(Dt,Ge.y1);_t=[[zt,vt],[zt,We],[pt,We],[pt,vt]],Je=Math.min(zt,pt),rt=Math.max(zt,pt),ot=Math.min(vt,We),yt=Math.max(vt,We),_t.xmin=Je,_t.xmax=rt,_t.ymin=ot,_t.ymax=yt,_t.xref=mt,_t.yref=tt,_t.subtract=!1,_t.isRect=!0,we.push(_t)}else if(Ge.type==="path")for(var Ze=Ge.path.split("Z"),Ne=[],Xe=0;Xe<Ze.length;Xe++){var st=Ze[Xe];if(st){st+="Z";var lt=u.extractPathCoords(st,p.paramIsX,"raw"),xt=u.extractPathCoords(st,p.paramIsY,"raw");Je=1/0,rt=-1/0,ot=1/0,yt=-1/0,_t=[];for(var bt=0;bt<lt.length;bt++){var Ve=Se(Qe,lt[bt]),Be=Se(Dt,xt[bt]);_t.push([Ve,Be]),Je=Math.min(Ve,Je),rt=Math.max(Ve,rt),ot=Math.min(Be,ot),yt=Math.max(Be,yt)}_t.xmin=Je,_t.xmax=rt,_t.ymin=ot,_t.ymax=yt,_t.xref=mt,_t.yref=tt,_t.subtract=he(_t,Ne),Ne.push(_t),we.push(_t)}}}}return we}function he(De,ve){for(var we=!1,Ee=0;Ee<ve.length;Ee++)for(var Fe=ve[Ee],Le=0;Le<De.length;Le++)if(T(De[Le],Fe)){we=!we;break}return we}function Se(De,ve){return De.type==="date"&&(ve=ve.replace("_"," ")),De.type==="log"?De.c2p(ve):De.r2p(ve,null,De.calendar)}function xe(De){for(var ve=De.length,we=[],Ee=0;Ee<ve;Ee++){var Fe=De[Ee];we=(we=we.concat(Fe)).concat([Fe[0]])}return(Le=we).isRect=Le.length===5&&Le[0][0]===Le[4][0]&&Le[0][1]===Le[4][1]&&Le[0][0]===Le[1][0]&&Le[2][0]===Le[3][0]&&Le[0][1]===Le[3][1]&&Le[1][1]===Le[2][1]||Le[0][1]===Le[1][1]&&Le[2][1]===Le[3][1]&&Le[0][0]===Le[3][0]&&Le[1][0]===Le[2][0],Le.isRect&&(Le.xmin=Math.min(Le[0][0],Le[2][0]),Le.xmax=Math.max(Le[0][0],Le[2][0]),Le.ymin=Math.min(Le[0][1],Le[2][1]),Le.ymax=Math.max(Le[0][1],Le[2][1])),Le;var Le}function Te(De){return function(ve,we){for(var Ee,Fe,Le=0;Le<De.length;Le++){var je=De[Le],Ge=je._id,Je=Ge.charAt(0);if(we.isRect){Ee||(Ee={});var rt=we[Je+"min"],ot=we[Je+"max"];rt!==void 0&&ot!==void 0&&(Ee[Ge]=[B(je,rt),B(je,ot)].sort(S))}else Fe||(Fe={}),Fe[Ge]=we.map(V(je))}Ee&&(ve.range=Ee),Fe&&(ve.lassoPoints=Fe)}}function Ae(De,ve){ve&&(ve.selections=(De.layout||{}).selections||[]),De.emit("plotly_selected",ve)}function Pe(De){De.emit("plotly_deselect",null)}R.exports={reselect:Ce,prepSelect:function(De,ve,we,Ee,Fe){var Le=!ne(Ee),je=i(Fe),Ge=n(Fe),Je=s(Fe),rt=a(Fe),ot=l(Fe),yt=Fe==="drawcircle",_t=Fe==="drawline"||yt,mt=Ee.gd,tt=mt._fullLayout,Qe=ot&&tt.newselection.mode==="immediate"&&Le,Dt=tt._zoomlayer,zt=Ee.element.getBoundingClientRect(),pt=Ee.plotinfo,vt=q(pt),We=ve-zt.left,Ze=we-zt.top;tt._calcInverseTransform(mt);var Ne=d.apply3DTransform(tt._invTransform)(We,Ze);We=Ne[0],Ze=Ne[1];var Xe,st,lt,xt,bt,Ve,Be,at=tt._invScaleX,ht=tt._invScaleY,dt=We,it=Ze,kt="M"+We+","+Ze,Tt=Ee.xaxes[0],St=Ee.yaxes[0],wt=Tt._length,At=St._length,Ft=De.altKey&&!(a(Fe)&&Je);Z(De,mt,Ee),je&&(Xe=I([[We,Ze]],F.BENDPX));var jt=Dt.selectAll("path.select-outline-"+pt.id).data([1]),rn=rt?tt.newshape:tt.newselection;rt&&(Ee.hasText=rn.label.text||rn.label.texttemplate);var nn=rt&&!Je?rn.fillcolor:"rgba(0,0,0,0)",on=rn.line.color||(Le?b.contrast(mt._fullLayout.plot_bgcolor):"#7f7f7f");jt.enter().append("path").attr("class","select-outline select-outline-"+pt.id).style({opacity:rt?rn.opacity/2:1,"stroke-dasharray":w(rn.line.dash,rn.line.width),"stroke-width":rn.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,on).call(b.fill,nn).attr("fill-rule","evenodd").classed("cursor-move",!!rt).attr("transform",vt).attr("d",kt+"Z");var Ht=Dt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",vt).attr("d","M0,0Z");if(rt&&Ee.hasText){var $t=Dt.select(".label-temp");$t.empty()&&($t=Dt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var bn=tt._uid+F.SELECTID,ln=[],Kt=se(mt,Ee.xaxes,Ee.yaxes,Ee.subplot);Qe&&!De.shiftKey&&(Ee._clearSubplotSelections=function(){if(Le){var en=Tt._id,un=St._id;de(mt,en,un,Kt);for(var An=(mt.layout||{}).selections||[],wn=[],On=!1,Tn=0;Tn<An.length;Tn++){var Cn=tt.selections[Tn];Cn.xref!==en||Cn.yref!==un?wn.push(An[Tn]):On=!0}On&&(mt._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",mt,{selections:wn}))}});var fn=function(en){return en.plotinfo.fillRangeItems||Te(en.xaxes.concat(en.yaxes))}(Ee);Ee.moveFn=function(en,un){Ee._clearSubplotSelections&&(Ee._clearSubplotSelections(),Ee._clearSubplotSelections=void 0),dt=Math.max(0,Math.min(wt,at*en+We)),it=Math.max(0,Math.min(At,ht*un+Ze));var An=Math.abs(dt-We),wn=Math.abs(it-Ze);if(Ge){var On,Tn,Cn;if(ot){var Bn=tt.selectdirection;switch(On=Bn==="any"?wn<Math.min(.6*An,U)?"h":An<Math.min(.6*wn,U)?"v":"d":Bn){case"h":Tn=yt?At/2:0,Cn=At;break;case"v":Tn=yt?wt/2:0,Cn=wt}}if(rt)switch(tt.newshape.drawdirection){case"vertical":On="h",Tn=yt?At/2:0,Cn=At;break;case"horizontal":On="v",Tn=yt?wt/2:0,Cn=wt;break;case"ortho":An<wn?(On="h",Tn=Ze,Cn=it):(On="v",Tn=We,Cn=dt);break;default:On="d"}On==="h"?((xt=_t?g(yt,[dt,Tn],[dt,Cn]):[[We,Tn],[We,Cn],[dt,Cn],[dt,Tn]]).xmin=_t?dt:Math.min(We,dt),xt.xmax=_t?dt:Math.max(We,dt),xt.ymin=Math.min(Tn,Cn),xt.ymax=Math.max(Tn,Cn),Ht.attr("d","M"+xt.xmin+","+(Ze-U)+"h-4v"+2*U+"h4ZM"+(xt.xmax-1)+","+(Ze-U)+"h4v"+2*U+"h-4Z")):On==="v"?((xt=_t?g(yt,[Tn,it],[Cn,it]):[[Tn,Ze],[Tn,it],[Cn,it],[Cn,Ze]]).xmin=Math.min(Tn,Cn),xt.xmax=Math.max(Tn,Cn),xt.ymin=_t?it:Math.min(Ze,it),xt.ymax=_t?it:Math.max(Ze,it),Ht.attr("d","M"+(We-U)+","+xt.ymin+"v-4h"+2*U+"v4ZM"+(We-U)+","+(xt.ymax-1)+"v4h"+2*U+"v-4Z")):On==="d"&&((xt=_t?g(yt,[We,Ze],[dt,it]):[[We,Ze],[We,it],[dt,it],[dt,Ze]]).xmin=Math.min(We,dt),xt.xmax=Math.max(We,dt),xt.ymin=Math.min(Ze,it),xt.ymax=Math.max(Ze,it),Ht.attr("d","M0,0Z"))}else je&&(Xe.addPt([dt,it]),xt=Xe.filtered);if(Ee.selectionDefs&&Ee.selectionDefs.length?(lt=fe(Ee.mergedPolygons,xt,Ft),xt.subtract=Ft,st=J(Ee.selectionDefs.concat([xt]))):(lt=[xt],st=N(xt)),f(ge(lt,Je),jt,Ee),ot){var Xn,cr=Ce(mt,!1),Yn=cr.eventData?cr.eventData.points.slice():[];cr=Ce(mt,!1,st,Kt,Ee),st=cr.selectionTesters,Be=cr.eventData,Xn=Xe?Xe.filtered:xe(lt),E.throttle(bn,F.SELECTDELAY,function(){for(var jn=(ln=ke(st,Kt)).slice(),Kn=0;Kn<Yn.length;Kn++){for(var or=Yn[Kn],Qt=!1,an=0;an<jn.length;an++)if(jn[an].curveNumber===or.curveNumber&&jn[an].pointNumber===or.pointNumber){Qt=!0;break}Qt||jn.push(or)}jn.length&&(Be||(Be={}),Be.points=jn),fn(Be,Xn),function(Dn,yn){Dn.emit("plotly_selecting",yn)}(mt,Be)})}},Ee.clickFn=function(en,un){if(Ht.remove(),mt._fullLayout._activeShapeIndex>=0)mt._fullLayout._deactivateShape(mt);else if(!rt){var An=tt.clickmode;E.done(bn).then(function(){if(E.clear(bn),en===2){for(jt.remove(),bt=0;bt<Kt.length;bt++)(Ve=Kt[bt])._module.selectPoints(Ve,!1);if(me(mt,Kt),te(Ee),Pe(mt),Kt.length){var wn=Kt[0].xaxis,On=Kt[0].yaxis;if(wn&&On){for(var Tn=[],Cn=mt._fullLayout.selections,Bn=0;Bn<Cn.length;Bn++){var Xn=Cn[Bn];Xn&&(Xn.xref===wn._id&&Xn.yref===On._id||Tn.push(Xn))}Tn.length<Cn.length&&(mt._fullLayout._noEmitSelectedAtStart=!0,r.call("_guiRelayout",mt,{selections:Tn}))}}}else An.indexOf("select")>-1&&$(un,mt,Ee.xaxes,Ee.yaxes,Ee.subplot,Ee,jt),An==="event"&&Ae(mt,void 0);c.click(mt,un,pt.id)}).catch(d.error)}},Ee.doneFn=function(){Ht.remove(),E.done(bn).then(function(){E.clear(bn),!Qe&&xt&&Ee.selectionDefs&&(xt.subtract=Ft,Ee.selectionDefs.push(xt),Ee.mergedPolygons.length=0,[].push.apply(Ee.mergedPolygons,lt)),(Qe||rt)&&te(Ee,Qe),Ee.doneFnCompleted&&Ee.doneFnCompleted(ln),ot&&Ae(mt,Be)}).catch(d.error)}},clearOutline:m,clearSelectionsCache:te,selectOnClick:$}},46056:function(R,C,e){"use strict";var _=e(13916),T=e(25376),r=e(52904).line,w=e(98192).u,b=e(92880).extendFlat,c=e(31780).templatedArray,o=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);R.exports=c("shape",{visible:b({},o.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},o.legend,{editType:"calc+arraydraw"}),legendgroup:b({},o.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},o.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:T({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},o.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},o.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:b({},_.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:b({},_.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},r.color,{editType:"arraydraw"}),width:b({},r.width,{editType:"calc+arraydraw"}),dash:b({},w,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:T({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(85448),w=e(65152);function b(i){return o(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function c(i){return o(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function o(i,n,a,s,l,u){var p=i/2,f=u;if(n==="pixel"){var m=l?w.extractPathCoords(l,u?r.paramIsY:r.paramIsX):[a,s],h=_.aggNums(Math.max,null,m),g=_.aggNums(Math.min,null,m),v=g<0?Math.abs(g)+p:p,x=h>0?h+p:p;return{ppad:p,ppadplus:f?v:x,ppadminus:f?x:v}}return{ppad:p}}function t(i,n,a){var s,l,u=i._id.charAt(0)==="x"?"x":"y",p=i.type==="category"||i.type==="multicategory",f=0,m=0,h=p?i.r2c:i.d2c;if(n[u+"sizemode"]==="scaled"?(s=n[u+"0"],l=n[u+"1"],p&&(f=n[u+"0shift"],m=n[u+"1shift"])):(s=n[u+"anchor"],l=n[u+"anchor"]),s!==void 0)return[h(s)+f,h(l)+m];if(n.path){var g,v,x,y,A=1/0,d=-1/0,S=n.path.match(r.segmentRE);for(i.type==="date"&&(h=w.decodeDate(h)),g=0;g<S.length;g++)(v=a[S[g].charAt(0)].drawn)!==void 0&&(!(x=S[g].substr(1).match(r.paramRE))||x.length<v||((y=h(x[v]))<A&&(A=y),y>d&&(d=y)));return d>=A?[A,d]:void 0}}R.exports=function(i){var n=i._fullLayout,a=_.filterVisible(n.shapes);if(a.length&&i._fullData.length)for(var s=0;s<a.length;s++){var l,u,p=a[s];p._extremes={};var f=T.getRefType(p.xref),m=T.getRefType(p.yref);p.xref!=="paper"&&f!=="domain"&&(u=t(l=T.getFromId(i,p.xref),p,r.paramIsX))&&(p._extremes[l._id]=T.findExtremes(l,u,b(p))),p.yref!=="paper"&&m!=="domain"&&(u=t(l=T.getFromId(i,p.yref),p,r.paramIsY))&&(p._extremes[l._id]=T.findExtremes(l,u,c(p)))}}},85448:function(R){"use strict";R.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(51272),w=e(46056),b=e(65152);function c(o,t,i){function n(W,B){return _.coerce(o,t,w,W,B)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),_.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var a=n("path"),s=n("type",a?"path":"rect"),l=s!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),p=n("ysizemode"),f=["x","y"],m=0;m<2;m++){var h,g,v,x=f[m],y=x+"anchor",A=x==="x"?u:p,d={_fullLayout:i},S=T.coerceRef(o,t,d,x,void 0,"paper");if(T.getRefType(S)==="range"?((h=T.getFromId(d,S))._shapeIndices.push(t._index),v=b.rangeToShapePosition(h),g=b.shapePositionToRange(h),h.type!=="category"&&h.type!=="multicategory"||(n(x+"0shift"),n(x+"1shift"))):g=v=_.identity,l){var k=x+"0",E=x+"1",L=o[k],O=o[E];o[k]=g(o[k],!0),o[E]=g(o[E],!0),A==="pixel"?(n(k,0),n(E,10)):(T.coercePosition(t,d,n,S,k,.25),T.coercePosition(t,d,n,S,E,.75)),t[k]=v(t[k]),t[E]=v(t[E]),o[k]=L,o[E]=O}if(A==="pixel"){var P=o[y];o[y]=g(o[y],!0),T.coercePosition(t,d,n,S,y,.25),t[y]=v(t[y]),o[y]=P}}l&&_.noneOrAll(o,t,["x0","x1","y0","y1"]);var F,U,I=s==="line";if(l&&(F=n("label.texttemplate")),F||(U=n("label.text")),U||F){n("label.textangle");var N=n("label.textposition",I?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(W,B){return W?"bottom":B.indexOf("top")!==-1?"top":B.indexOf("bottom")!==-1?"bottom":"middle"}(I,N)),n("label.padding"),_.coerceFont(n,"label.font",i.font)}}}R.exports=function(o,t){r(o,t,{name:"shapes",handleItemDefaults:c})}},60728:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(72736),w=e(43616),b=e(9856).readPaths,c=e(65152),o=c.getPathString,t=e(97728),i=e(84284).FROM_TL;R.exports=function(n,a,s,l){if(l.selectAll(".shape-label").remove(),s.label.text||s.label.texttemplate){var u;if(s.label.texttemplate){var p={};if(s.type!=="path"){var f=T.getFromId(n,s.xref),m=T.getFromId(n,s.yref);for(var h in t){var g=t[h](s,f,m);g!==void 0&&(p[h]=g)}}u=_.texttemplateStringForShapes(s.label.texttemplate,{},n._fullLayout._d3locale,p)}else u=s.label.text;var v,x,y,A,d={"data-index":a},S=s.label.font,k=l.append("g").attr(d).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(s.path){var E=o(n,s),L=b(E,n);v=1/0,y=1/0,x=-1/0,A=-1/0;for(var O=0;O<L.length;O++)for(var P=0;P<L[O].length;P++)for(var F=L[O][P],U=1;U<F.length;U+=2){var I=F[U],N=F[U+1];v=Math.min(v,I),x=Math.max(x,I),y=Math.min(y,N),A=Math.max(A,N)}}else{var W=T.getFromId(n,s.xref),B=s.x0shift,V=s.x1shift,q=T.getRefType(s.xref),ne=T.getFromId(n,s.yref),$=s.y0shift,K=s.y1shift,ee=T.getRefType(s.yref),J=function(me,fe){return c.getDataToPixel(n,W,fe,!1,q)(me)},Z=function(me,fe){return c.getDataToPixel(n,ne,fe,!0,ee)(me)};v=J(s.x0,B),x=J(s.x1,V),y=Z(s.y0,$),A=Z(s.y1,K)}var te=s.label.textangle;te==="auto"&&(te=s.type==="line"?function(me,fe,pe,ge){var ke,Ce;return Ce=Math.abs(pe-me),ke=pe>=me?fe-ge:ge-fe,-180/Math.PI*Math.atan2(ke,Ce)}(v,y,x,A):0),k.call(function(me){return me.call(w.font,S).attr({}),r.convertToTspans(me,n),me});var oe=function(me,fe,pe,ge,ke,Ce,de){var ae,re,he,Se,xe=ke.label.textposition,Te=ke.label.textangle,Ae=ke.label.padding,Pe=ke.type,De=Math.PI/180*Ce,ve=Math.sin(De),we=Math.cos(De),Ee=ke.label.xanchor,Fe=ke.label.yanchor;if(Pe==="line"){xe==="start"?(ae=me,re=fe):xe==="end"?(ae=pe,re=ge):(ae=(me+pe)/2,re=(fe+ge)/2),Ee==="auto"&&(Ee=xe==="start"?Te==="auto"?pe>me?"left":pe<me?"right":"center":pe>me?"right":pe<me?"left":"center":xe==="end"?Te==="auto"?pe>me?"right":pe<me?"left":"center":pe>me?"left":pe<me?"right":"center":"center");var Le={bottom:-1,middle:0,top:1};if(Te==="auto"){var je=Le[Fe];he=-Ae*ve*je,Se=Ae*we*je}else he=Ae*{left:1,center:0,right:-1}[Ee],Se=Ae*Le[Fe];ae+=he,re+=Se}else he=Ae+3,xe.indexOf("right")!==-1?(ae=Math.max(me,pe)-he,Ee==="auto"&&(Ee="right")):xe.indexOf("left")!==-1?(ae=Math.min(me,pe)+he,Ee==="auto"&&(Ee="left")):(ae=(me+pe)/2,Ee==="auto"&&(Ee="center")),re=xe.indexOf("top")!==-1?Math.min(fe,ge):xe.indexOf("bottom")!==-1?Math.max(fe,ge):(fe+ge)/2,Se=Ae,Fe==="bottom"?re-=Se:Fe==="top"&&(re+=Se);var Ge=i[Fe],Je=ke.label.font.size,rt=de.height;return{textx:ae+(rt*Ge-Je)*ve,texty:re+-(rt*Ge-Je)*we,xanchor:Ee}}(v,y,x,A,s,te,w.bBox(k.node())),se=oe.textx,ce=oe.texty,ye=oe.xanchor;k.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ye],y:ce,x:se,transform:"rotate("+te+","+se+","+ce+")"}).call(r.positionText,se,ce)}}},55496:function(R,C,e){"use strict";var _=e(3400).strTranslate,T=e(86476),r=e(72760),w=r.drawMode,b=r.selectMode,c=e(24040),o=e(76308),t=e(7e3),i=t.i000,n=t.i090,a=t.i180,s=t.i270,l=e(1936).clearOutlineControllers,u=e(9856),p=u.pointsOnRectangle,f=u.pointsOnEllipse,m=u.writePaths,h=e(93940).newShapes,g=e(93940).createShapeObj,v=e(5968),x=e(60728);function y(A,d){var S,k,E,L=A[d][1],O=A[d][2],P=A.length;return k=A[S=(d+1)%P][1],E=A[S][2],k===L&&E===O&&(k=A[S=(d+2)%P][1],E=A[S][2]),[S,k,E]}R.exports=function A(d,S,k,E){E||(E=0);var L=k.gd;function O(){A(d,S,k,E++),(f(d[0])||k.hasText)&&P({redrawing:!0})}function P(me){var fe={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,fe=h(S,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,fe=v(S,k),L._fullLayout._reselect=!0),Object.keys(fe).length&&c.call((me||{}).redrawing?"relayout":"_guiRelayout",L,fe)}var F,U,I,N,W,B=L._fullLayout._zoomlayer,V=k.dragmode,q=w(V),ne=b(V);if((q||ne)&&(L._fullLayout._outlining=!0),l(L),S.attr("d",m(d)),E||!k.isActiveShape&&!k.isActiveSelection||(W=function(me,fe){for(var pe=0;pe<fe.length;pe++){var ge=fe[pe];me[pe]=[];for(var ke=0;ke<ge.length;ke++){me[pe][ke]=[];for(var Ce=0;Ce<ge[ke].length;Ce++)me[pe][ke][Ce]=ge[ke][Ce]}}return me}([],d),function(me){F=[];for(var fe=0;fe<d.length;fe++){var pe=d[fe],ge=p(pe),ke=!ge&&f(pe);F[fe]=[];for(var Ce=pe.length,de=0;de<Ce;de++)if(pe[de][0]!=="Z"&&(!ke||de===i||de===n||de===a||de===s)){var ae,re=ge&&k.isActiveSelection;re&&(ae=y(pe,de));var he=pe[de][1],Se=pe[de][2],xe=me.append(re?"rect":"circle").attr("data-i",fe).attr("data-j",de).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(re){var Te=ae[1]-he,Ae=ae[2]-Se,Pe=Ae?5:Math.max(Math.min(25,Math.abs(Te)-5),5),De=Te?5:Math.max(Math.min(25,Math.abs(Ae)-5),5);xe.classed(Ae?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Pe).attr("height",De).attr("x",he-Pe/2).attr("y",Se-De/2).attr("transform",_(Te/2,Ae/2))}else xe.classed("cursor-grab",!0).attr("r",5).attr("cx",he).attr("cy",Se);F[fe][de]={element:xe.node(),gd:L,prepFn:ee,doneFn:Z,clickFn:te},T.init(F[fe][de])}}}(B.append("g").attr("class","outline-controllers")),function(){U=[],d.length&&(U[0]={element:S[0][0],gd:L,prepFn:se,doneFn:ce,clickFn:ye},T.init(U[0]))}()),q&&k.hasText){var $=B.select(".label-temp"),K=g(S,k,k.dragmode);x(L,"label-temp",K,$)}function ee(me){I=+me.srcElement.getAttribute("data-i"),N=+me.srcElement.getAttribute("data-j"),F[I][N].moveFn=J}function J(me,fe){if(d.length){var pe=W[I][N][1],ge=W[I][N][2],ke=d[I],Ce=ke.length;if(p(ke)){var de=me,ae=fe;k.isActiveSelection&&(y(ke,N)[1]===ke[N][1]?ae=0:de=0);for(var re=0;re<Ce;re++)if(re!==N){var he=ke[re];he[1]===ke[N][1]&&(he[1]=pe+de),he[2]===ke[N][2]&&(he[2]=ge+ae)}if(ke[N][1]=pe+de,ke[N][2]=ge+ae,!p(ke))for(var Se=0;Se<Ce;Se++)for(var xe=0;xe<ke[Se].length;xe++)ke[Se][xe]=W[I][Se][xe]}else ke[N][1]=pe+me,ke[N][2]=ge+fe;O()}}function Z(){P()}function te(me,fe){if(me===2){I=+fe.srcElement.getAttribute("data-i"),N=+fe.srcElement.getAttribute("data-j");var pe=d[I];p(pe)||f(pe)||function(){if(d.length&&d[I]&&d[I].length){for(var ge=[],ke=0;ke<d[I].length;ke++)ke!==N&&ge.push(d[I][ke]);ge.length>1&&(ge.length!==2||ge[1][0]!=="Z")&&(N===0&&(ge[0][0]="M"),d[I]=ge,O(),P())}}()}}function oe(me,fe){(function(pe,ge){if(d.length)for(var ke=0;ke<d.length;ke++)for(var Ce=0;Ce<d[ke].length;Ce++)for(var de=0;de+2<d[ke][Ce].length;de+=2)d[ke][Ce][de+1]=W[ke][Ce][de+1]+pe,d[ke][Ce][de+2]=W[ke][Ce][de+2]+ge})(me,fe),O()}function se(me){(I=+me.srcElement.getAttribute("data-i"))||(I=0),U[I].moveFn=oe}function ce(){P()}function ye(me){me===2&&function(fe){if(b(fe._fullLayout.dragmode)){l(fe);var pe=fe._fullLayout._activeSelectionIndex,ge=(fe.layout||{}).selections||[];if(pe<ge.length){for(var ke=[],Ce=0;Ce<ge.length;Ce++)Ce!==pe&&ke.push(ge[Ce]);delete fe._fullLayout._activeSelectionIndex;var de=fe._fullLayout.selections[pe];fe._fullLayout._deselect={xref:de.xref,yref:de.yref},c.call("_guiRelayout",fe,{selections:ke})}}}(L)}}},4016:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(3400),w=e(54460),b=e(9856).readPaths,c=e(55496),o=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),n=e(43616),a=e(31780).arrayEditor,s=e(86476),l=e(93972),u=e(85448),p=e(65152),f=p.getPathString;function m(d){var S=d._fullLayout;for(var k in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[k].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var L=0;L<S.shapes.length;L++)S.shapes[L].visible===!0&&v(d,L)}function h(d){return!!d._fullLayout._outlining}function g(d){return!d._context.edits.shapePosition}function v(d,S){d._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=p.makeShapesOptionsAndPlotinfo(d,S),E=k.options,L=k.plotinfo;function O(P){var F=f(d,E),U={"data-index":S,"fill-rule":E.fillrule,d:F},I=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",B=E.line.width,V=E.line.dash;B||E.editable!==!0||(B=5,V="solid");var q=F[F.length-1]!=="Z",ne=g(d)&&E.editable&&d._fullLayout._activeShapeIndex===S;ne&&(N=q?"rgba(0,0,0,0)":d._fullLayout.activeshape.fillcolor,I=d._fullLayout.activeshape.opacity);var $,K=P.append("g").classed("shape-group",!0).attr({"data-index":S}),ee=K.append("path").attr(U).style("opacity",I).call(i.stroke,W).call(i.fill,N).call(n.dashLine,V,B);if(x(K,d,E),o(d,S,E,K),(ne||d._context.edits.shapePosition)&&($=a(d.layout,"shapes",E)),ne){ee.style({cursor:"move"});var J={element:ee.node(),plotinfo:L,gd:d,editHelpers:$,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},Z=b(F,d);c(Z,ee,J)}else d._context.edits.shapePosition?function(te,oe,se,ce,ye,me){var fe,pe,ge,ke,Ce,de,ae,re,he,Se,xe,Te,Ae,Pe,De,ve,we=10,Ee=10,Fe=se.xsizemode==="pixel",Le=se.ysizemode==="pixel",je=se.type==="line",Ge=se.type==="path",Je=me.modifyItem,rt=_.select(oe.node().parentNode),ot=w.getFromId(te,se.xref),yt=w.getRefType(se.xref),_t=w.getFromId(te,se.yref),mt=w.getRefType(se.yref),tt=se.x0shift,Qe=se.x1shift,Dt=se.y0shift,zt=se.y1shift,pt=function(Be,at){return p.getDataToPixel(te,ot,at,!1,yt)(Be)},vt=function(Be,at){return p.getDataToPixel(te,_t,at,!0,mt)(Be)},We=p.getPixelToData(te,ot,!1,yt),Ze=p.getPixelToData(te,_t,!0,mt),Ne=je?function(){var Be=10,at=Math.max(se.line.width,Be),ht=ye.append("g").attr("data-index",ce).attr("drag-helper",!0);ht.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":at,"stroke-opacity":"0"});var dt={"fill-opacity":"0"},it=Math.max(at/2,Be);return ht.append("circle").attr({"data-line-point":"start-point",cx:Fe?pt(se.xanchor)+se.x0:pt(se.x0,tt),cy:Le?vt(se.yanchor)-se.y0:vt(se.y0,Dt),r:it}).style(dt).classed("cursor-grab",!0),ht.append("circle").attr({"data-line-point":"end-point",cx:Fe?pt(se.xanchor)+se.x1:pt(se.x1,Qe),cy:Le?vt(se.yanchor)-se.y1:vt(se.y1,zt),r:it}).style(dt).classed("cursor-grab",!0),ht}():oe,Xe={element:Ne.node(),gd:te,prepFn:function(Be){h(te)||(Fe&&(Ce=pt(se.xanchor)),Le&&(de=vt(se.yanchor)),se.type==="path"?De=se.path:(fe=Fe?se.x0:pt(se.x0),pe=Le?se.y0:vt(se.y0),ge=Fe?se.x1:pt(se.x1),ke=Le?se.y1:vt(se.y1)),fe<ge?(he=fe,Ae="x0",Se=ge,Pe="x1"):(he=ge,Ae="x1",Se=fe,Pe="x0"),!Le&&pe<ke||Le&&pe>ke?(ae=pe,xe="y0",re=ke,Te="y1"):(ae=ke,xe="y1",re=pe,Te="y0"),st(Be),bt(ye,se),function(at,ht,dt){var it=ht.xref,kt=ht.yref,Tt=w.getFromId(dt,it),St=w.getFromId(dt,kt),wt="";it==="paper"||Tt.autorange||(wt+=it),kt==="paper"||St.autorange||(wt+=kt),n.setClipUrl(at,wt?"clip"+dt._fullLayout._uid+wt:null,dt)}(oe,se,te),Xe.moveFn=ve==="move"?lt:xt,Xe.altKey=Be.altKey)},doneFn:function(){h(te)||(l(oe),Ve(ye),x(oe,te,se),T.call("_guiRelayout",te,me.getUpdateObj()))},clickFn:function(){h(te)||Ve(ye)}};function st(Be){if(h(te))ve=null;else if(je)ve=Be.target.tagName==="path"?"move":Be.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var at=Xe.element.getBoundingClientRect(),ht=at.right-at.left,dt=at.bottom-at.top,it=Be.clientX-at.left,kt=Be.clientY-at.top,Tt=!Ge&&ht>we&&dt>Ee&&!Be.shiftKey?s.getCursor(it/ht,1-kt/dt):"move";l(oe,Tt),ve=Tt.split("-")[0]}}function lt(Be,at){if(se.type==="path"){var ht=function(kt){return kt},dt=ht,it=ht;Fe?Je("xanchor",se.xanchor=We(Ce+Be)):(dt=function(kt){return We(pt(kt)+Be)},ot&&ot.type==="date"&&(dt=p.encodeDate(dt))),Le?Je("yanchor",se.yanchor=Ze(de+at)):(it=function(kt){return Ze(vt(kt)+at)},_t&&_t.type==="date"&&(it=p.encodeDate(it))),Je("path",se.path=y(De,dt,it))}else Fe?Je("xanchor",se.xanchor=We(Ce+Be)):(Je("x0",se.x0=We(fe+Be)),Je("x1",se.x1=We(ge+Be))),Le?Je("yanchor",se.yanchor=Ze(de+at)):(Je("y0",se.y0=Ze(pe+at)),Je("y1",se.y1=Ze(ke+at)));oe.attr("d",f(te,se)),bt(ye,se),o(te,ce,se,rt)}function xt(Be,at){if(Ge){var ht=function(ln){return ln},dt=ht,it=ht;Fe?Je("xanchor",se.xanchor=We(Ce+Be)):(dt=function(ln){return We(pt(ln)+Be)},ot&&ot.type==="date"&&(dt=p.encodeDate(dt))),Le?Je("yanchor",se.yanchor=Ze(de+at)):(it=function(ln){return Ze(vt(ln)+at)},_t&&_t.type==="date"&&(it=p.encodeDate(it))),Je("path",se.path=y(De,dt,it))}else if(je){if(ve==="resize-over-start-point"){var kt=fe+Be,Tt=Le?pe-at:pe+at;Je("x0",se.x0=Fe?kt:We(kt)),Je("y0",se.y0=Le?Tt:Ze(Tt))}else if(ve==="resize-over-end-point"){var St=ge+Be,wt=Le?ke-at:ke+at;Je("x1",se.x1=Fe?St:We(St)),Je("y1",se.y1=Le?wt:Ze(wt))}}else{var At=function(ln){return ve.indexOf(ln)!==-1},Ft=At("n"),jt=At("s"),rn=At("w"),nn=At("e"),on=Ft?ae+at:ae,Ht=jt?re+at:re,$t=rn?he+Be:he,bn=nn?Se+Be:Se;Le&&(Ft&&(on=ae-at),jt&&(Ht=re-at)),(!Le&&Ht-on>Ee||Le&&on-Ht>Ee)&&(Je(xe,se[xe]=Le?on:Ze(on)),Je(Te,se[Te]=Le?Ht:Ze(Ht))),bn-$t>we&&(Je(Ae,se[Ae]=Fe?$t:We($t)),Je(Pe,se[Pe]=Fe?bn:We(bn)))}oe.attr("d",f(te,se)),bt(ye,se),o(te,ce,se,rt)}function bt(Be,at){(Fe||Le)&&function(){var ht=at.type!=="path",dt=Be.selectAll(".visual-cue").data([0]);dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var it=pt(Fe?at.xanchor:r.midRange(ht?[at.x0,at.x1]:p.extractPathCoords(at.path,u.paramIsX))),kt=vt(Le?at.yanchor:r.midRange(ht?[at.y0,at.y1]:p.extractPathCoords(at.path,u.paramIsY)));if(it=p.roundPositionForSharpStrokeRendering(it,1),kt=p.roundPositionForSharpStrokeRendering(kt,1),Fe&&Le){var Tt="M"+(it-1-1)+","+(kt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";dt.attr("d",Tt)}else if(Fe){var St="M"+(it-1-1)+","+(kt-9-1)+"v18 h2 v-18 Z";dt.attr("d",St)}else{var wt="M"+(it-9-1)+","+(kt-1-1)+"h18 v2 h-18 Z";dt.attr("d",wt)}}()}function Ve(Be){Be.selectAll(".visual-cue").remove()}s.init(Xe),Ne.node().onmousemove=st}(d,ee,E,S,P,$):E.editable===!0&&ee.style("pointer-events",q||i.opacity(N)*I<=.5?"stroke":"all");ee.node().addEventListener("click",function(){return function(te,oe){if(g(te)){var se=+oe.node().getAttribute("data-index");if(se>=0){if(se===te._fullLayout._activeShapeIndex)return void A(te);te._fullLayout._activeShapeIndex=se,te._fullLayout._deactivateShape=A,m(te)}}}(d,ee)})}E._input&&E.visible===!0&&(E.layer==="above"?O(d._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?O(d._fullLayout._shapeLowerLayer):E.layer==="between"?O(L.shapelayerBetween):L._hadPlotinfo?O((L.mainplotinfo||L).shapelayer):O(d._fullLayout._shapeLowerLayer))}function x(d,S,k){var E=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(d,E?"clip"+S._fullLayout._uid+E:null,S)}function y(d,S,k){return d.replace(u.segmentRE,function(E){var L=0,O=E.charAt(0),P=u.paramIsX[O],F=u.paramIsY[O],U=u.numParams[O];return O+E.substr(1).replace(u.paramRE,function(I){return L>=U||(P[L]?I=S(I):F[L]&&(I=k(I)),L++),I})})}function A(d){g(d)&&d._fullLayout._activeShapeIndex>=0&&(t(d),delete d._fullLayout._activeShapeIndex,m(d))}R.exports={draw:m,drawOne:v,eraseActiveShape:function(d){if(g(d)){t(d);var S=d._fullLayout._activeShapeIndex,k=(d.layout||{}).shapes||[];if(S<k.length){for(var E=[],L=0;L<k.length;L++)L!==S&&E.push(k[L]);return delete d._fullLayout._activeShapeIndex,T.call("_guiRelayout",d,{shapes:E})}}},drawLabel:o}},92872:function(R,C,e){"use strict";var _=e(67824).overrideAll,T=e(45464),r=e(25376),w=e(98192).u,b=e(92880).extendFlat,c=e(21776).ye,o=e(97728);R.exports=_({newshape:{visible:b({},T.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},T.legend,{}),legendgroup:b({},T.legendgroup,{}),legendgrouptitle:{text:b({},T.legendgrouptitle.text,{}),font:r({})},legendrank:b({},T.legendrank,{}),legendwidth:b({},T.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},w,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},T.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:c({newshape:!0},{keys:Object.keys(o)}),font:r({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(R){"use strict";R.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(R,C,e){"use strict";var _=e(76308),T=e(3400);R.exports=function(r,w,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),T.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var c=(r||{}).plot_bgcolor||"#FFF";b("newshape.line.color",_.contrast(c)),b("newshape.line.dash")}var o=r.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var n=b("newshape.label.textposition",o?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(a,s){return a?"bottom":s.indexOf("top")!==-1?"top":s.indexOf("bottom")!==-1?"bottom":"middle"}(o,n)),b("newshape.label.padding"),T.coerceFont(b,"newshape.label.font",w.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(R,C,e){"use strict";var _=e(21984),T=e(7e3),r=T.CIRCLE_SIDES,w=T.SQRT2,b=e(5840),c=b.p2r,o=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function n(s,l){return Math.abs(s-l)<=1e-6}function a(s,l){var u=l[1]-s[1],p=l[2]-s[2];return Math.sqrt(u*u+p*p)}C.writePaths=function(s){var l=s.length;if(!l)return"M0,0Z";for(var u="",p=0;p<l;p++)for(var f=s[p].length,m=0;m<f;m++){var h=s[p][m][0];if(h==="Z")u+="Z";else for(var g=s[p][m].length,v=0;v<g;v++){var x=v;h==="Q"||h==="S"?x=i[v]:h==="C"&&(x=t[v]),u+=s[p][m][x],v>0&&v<g-1&&(u+=",")}}return u},C.readPaths=function(s,l,u,p){var f,m,h,g=_(s),v=[],x=-1,y=0,A=0,d=function(){m=y,h=A};d();for(var S=0;S<g.length;S++){var k,E,L,O,P=[],F=g[S][0],U=F;switch(F){case"M":v[++x]=[],y=+g[S][1],A=+g[S][2],P.push([U,y,A]),d();break;case"Q":case"S":k=+g[S][1],L=+g[S][2],y=+g[S][3],A=+g[S][4],P.push([U,y,A,k,L]);break;case"C":k=+g[S][1],L=+g[S][2],E=+g[S][3],O=+g[S][4],y=+g[S][5],A=+g[S][6],P.push([U,y,A,k,L,E,O]);break;case"T":case"L":y=+g[S][1],A=+g[S][2],P.push([U,y,A]);break;case"H":U="L",y=+g[S][1],P.push([U,y,A]);break;case"V":U="L",A=+g[S][1],P.push([U,y,A]);break;case"A":U="L";var I=+g[S][1],N=+g[S][2];+g[S][4]||(I=-I,N=-N);var W=y-I,B=A;for(f=1;f<=r/2;f++){var V=2*Math.PI*f/r;P.push([U,W+I*Math.cos(V),B+N*Math.sin(V)])}break;case"Z":y===m&&A===h||(y=m,A=h,P.push([U,y,A]))}for(var q=(u||{}).domain,ne=l._fullLayout._size,$=u&&u.xsizemode==="pixel",K=u&&u.ysizemode==="pixel",ee=p===!1,J=0;J<P.length;J++){for(f=0;f+2<7;f+=2){var Z=P[J][f+1],te=P[J][f+2];Z!==void 0&&te!==void 0&&(y=Z,A=te,u&&(u.xaxis&&u.xaxis.p2r?(ee&&(Z-=u.xaxis._offset),Z=$?o(u.xaxis,u.xanchor)+Z:c(u.xaxis,Z)):(ee&&(Z-=ne.l),q?Z=q.x[0]+Z/ne.w:Z/=ne.w),u.yaxis&&u.yaxis.p2r?(ee&&(te-=u.yaxis._offset),te=K?o(u.yaxis,u.yanchor)-te:c(u.yaxis,te)):(ee&&(te-=ne.t),te=q?q.y[1]-te/ne.h:1-te/ne.h)),P[J][f+1]=Z,P[J][f+2]=te)}v[x].push(P[J].slice())}}return v},C.pointsOnRectangle=function(s){if(s.length!==5)return!1;for(var l=1;l<3;l++)if(!n(s[0][l]-s[1][l],s[3][l]-s[2][l])||!n(s[0][l]-s[3][l],s[1][l]-s[2][l]))return!1;return!(!n(s[0][1],s[1][1])&&!n(s[0][1],s[3][1])||!(a(s[0],s[1])*a(s[0],s[3])))},C.pointsOnEllipse=function(s){var l=s.length;if(l!==r+1)return!1;l=r;for(var u=0;u<l;u++){var p=(2*l-u)%l,f=(l/2+p)%l,m=(l/2+u)%l;if(!n(a(s[u],s[m]),a(s[p],s[f])))return!1}return!0},C.handleEllipse=function(s,l,u){if(!s)return[l,u];var p=C.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),f=(p.x1+p.x0)/2,m=(p.y1+p.y0)/2,h=(p.x1-p.x0)/2,g=(p.y1-p.y0)/2;h||(h=g/=w),g||(g=h/=w);for(var v=[],x=0;x<r;x++){var y=2*x*Math.PI/r;v.push([f+h*Math.cos(y),m+g*Math.sin(y)])}return v},C.ellipseOver=function(s){var l=s.x0,u=s.y0,p=s.x1,f=s.y1,m=p-l,h=f-u,g=((l-=m)+p)/2,v=((u-=h)+f)/2;return{x0:g-(m*=w),y0:v-(h*=w),x1:g+m,y1:v+h}},C.fixDatesForPaths=function(s,l,u){var p=l.type==="date",f=u.type==="date";if(!p&&!f)return s;for(var m=0;m<s.length;m++)for(var h=0;h<s[m].length;h++)for(var g=0;g+2<s[m][h].length;g+=2)p&&(s[m][h][g+1]=s[m][h][g+1].replace(" ","_")),f&&(s[m][h][g+2]=s[m][h][g+2].replace(" ","_"));return s}},93940:function(R,C,e){"use strict";var _=e(72760),T=_.drawMode,r=_.openMode,w=e(7e3),b=w.i000,c=w.i090,o=w.i180,t=w.i270,i=w.cos45,n=w.sin45,a=e(5840),s=a.p2r,l=a.r2p,u=e(1936).clearOutline,p=e(9856),f=p.readPaths,m=p.writePaths,h=p.ellipseOver,g=p.fixDatesForPaths;function v(x,y,A){var d,S=x[0][0],k=y.gd,E=S.getAttribute("d"),L=k._fullLayout.newshape,O=y.plotinfo,P=y.isActiveShape,F=O.xaxis,U=O.yaxis,I=!!O.domain||!O.xaxis,N=!!O.domain||!O.yaxis,W=r(A),B=f(E,k,O,P),V={editable:!0,visible:L.visible,name:L.name,showlegend:L.showlegend,legend:L.legend,legendwidth:L.legendwidth,legendgroup:L.legendgroup,legendgrouptitle:{text:L.legendgrouptitle.text,font:L.legendgrouptitle.font},legendrank:L.legendrank,label:L.label,xref:I?"paper":F._id,yref:N?"paper":U._id,layer:L.layer,opacity:L.opacity,line:{color:L.line.color,width:L.line.width,dash:L.line.dash}};if(W||(V.fillcolor=L.fillcolor,V.fillrule=L.fillrule),B.length===1&&(d=B[0]),d&&d.length===5&&A==="drawrect")V.type="rect",V.x0=d[0][1],V.y0=d[0][2],V.x1=d[2][1],V.y1=d[2][2];else if(d&&A==="drawline")V.type="line",V.x0=d[0][1],V.y0=d[0][2],V.x1=d[1][1],V.y1=d[1][2];else if(d&&A==="drawcircle"){V.type="circle";var q=d[b][1],ne=d[c][1],$=d[o][1],K=d[t][1],ee=d[b][2],J=d[c][2],Z=d[o][2],te=d[t][2],oe=O.xaxis&&(O.xaxis.type==="date"||O.xaxis.type==="log"),se=O.yaxis&&(O.yaxis.type==="date"||O.yaxis.type==="log");oe&&(q=l(O.xaxis,q),ne=l(O.xaxis,ne),$=l(O.xaxis,$),K=l(O.xaxis,K)),se&&(ee=l(O.yaxis,ee),J=l(O.yaxis,J),Z=l(O.yaxis,Z),te=l(O.yaxis,te));var ce=(ne+K)/2,ye=(ee+Z)/2,me=h({x0:ce,y0:ye,x1:ce+(K-ne+$-q)/2*i,y1:ye+(te-J+Z-ee)/2*n});oe&&(me.x0=s(O.xaxis,me.x0),me.x1=s(O.xaxis,me.x1)),se&&(me.y0=s(O.yaxis,me.y0),me.y1=s(O.yaxis,me.y1)),V.x0=me.x0,V.y0=me.y0,V.x1=me.x1,V.y1=me.y1}else V.type="path",F&&U&&g(B,F,U),V.path=m(B),d=null;return V}R.exports={newShapes:function(x,y){if(x.length&&x[0][0]){var A=y.gd,d=y.isActiveShape,S=y.dragmode,k=(A.layout||{}).shapes||[];if(!T(S)&&d!==void 0){var E=A._fullLayout._activeShapeIndex;if(E<k.length)switch(A._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var L=k[E].path||"";S=L[L.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var O=v(x,y,S);u(A);for(var P=y.editHelpers,F=(P||{}).modifyItem,U=[],I=0;I<k.length;I++){var N=A._fullLayout.shapes[I];if(U[I]=N._input,d!==void 0&&I===A._fullLayout._activeShapeIndex){var W=O;switch(N.type){case"line":case"rect":case"circle":F("x0",W.x0-(N.x0shift||0)),F("x1",W.x1-(N.x1shift||0)),F("y0",W.y0-(N.y0shift||0)),F("y1",W.y1-(N.y1shift||0));break;case"path":F("path",W.path)}}}return d===void 0?(U.push(O),U):P?P.getUpdateObj():{}}},createShapeObj:v}},1936:function(R){"use strict";R.exports={clearOutlineControllers:function(C){var e=C._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(C){var e=C._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),C._fullLayout._outlining=!1}}},65152:function(R,C,e){"use strict";var _=e(85448),T=e(3400),r=e(54460);function w(b,c){var o=0;return(c=c||0)&&b&&(b.type==="category"||b.type==="multicategory")&&(o=(b.r2p(1)-b.r2p(0))*c),o}C.rangeToShapePosition=function(b){return b.type==="log"?b.r2d:function(c){return c}},C.shapePositionToRange=function(b){return b.type==="log"?b.d2r:function(c){return c}},C.decodeDate=function(b){return function(c){return c.replace&&(c=c.replace("_"," ")),b(c)}},C.encodeDate=function(b){return function(c){return b(c).replace(" ","_")}},C.extractPathCoords=function(b,c,o){var t=[];return b.match(_.segmentRE).forEach(function(i){var n=c[i.charAt(0)].drawn;if(n!==void 0){var a=i.substr(1).match(_.paramRE);if(a&&!(a.length<n)){var s=a[n],l=o?s:T.cleanNumber(s);t.push(l)}}}),t},C.getDataToPixel=function(b,c,o,t,i){var n,a=b._fullLayout._size;if(c)if(i==="domain")n=function(l){return c._length*(t?1-l:l)+c._offset};else{var s=C.shapePositionToRange(c);n=function(l){var u=w(c,o);return c._offset+c.r2p(s(l,!0))+u},c.type==="date"&&(n=C.decodeDate(n))}else n=t?function(l){return a.t+a.h*(1-l)}:function(l){return a.l+a.w*l};return n},C.getPixelToData=function(b,c,o,t){var i,n=b._fullLayout._size;if(c)if(t==="domain")i=function(s){var l=(s-c._offset)/c._length;return o?1-l:l};else{var a=C.rangeToShapePosition(c);i=function(s){return a(c.p2r(s-c._offset))}}else i=o?function(s){return 1-(s-n.t)/n.h}:function(s){return(s-n.l)/n.w};return i},C.roundPositionForSharpStrokeRendering=function(b,c){var o=Math.round(c%2)===1,t=Math.round(b);return o?t+.5:t},C.makeShapesOptionsAndPlotinfo=function(b,c){var o=b._fullLayout.shapes[c]||{},t=b._fullLayout._plots[o.xref+o.yref];return t?t._hadPlotinfo=!0:(t={},o.xref&&o.xref!=="paper"&&(t.xaxis=b._fullLayout[o.xref+"axis"]),o.yref&&o.yref!=="paper"&&(t.yaxis=b._fullLayout[o.yref+"axis"])),t.xsizemode=o.xsizemode,t.ysizemode=o.ysizemode,t.xanchor=o.xanchor,t.yanchor=o.yanchor,{options:o,plotinfo:t}},C.makeSelectionsOptionsAndPlotinfo=function(b,c){var o=b._fullLayout.selections[c]||{},t=b._fullLayout._plots[o.xref+o.yref];return t?t._hadPlotinfo=!0:(t={},o.xref&&(t.xaxis=b._fullLayout[o.xref+"axis"]),o.yref&&(t.yaxis=b._fullLayout[o.yref+"axis"])),{options:o,plotinfo:t}},C.getPathString=function(b,c){var o,t,i,n,a,s,l,u,p=c.type,f=r.getRefType(c.xref),m=r.getRefType(c.yref),h=r.getFromId(b,c.xref),g=r.getFromId(b,c.yref),v=b._fullLayout._size,x=w(h,c.x0shift),y=w(h,c.x1shift),A=w(g,c.y0shift),d=w(g,c.y1shift);if(h?f==="domain"?t=function(I){return h._offset+h._length*I}:(o=C.shapePositionToRange(h),t=function(I){return h._offset+h.r2p(o(I,!0))}):t=function(I){return v.l+v.w*I},g?m==="domain"?n=function(I){return g._offset+g._length*(1-I)}:(i=C.shapePositionToRange(g),n=function(I){return g._offset+g.r2p(i(I,!0))}):n=function(I){return v.t+v.h*(1-I)},p==="path")return h&&h.type==="date"&&(t=C.decodeDate(t)),g&&g.type==="date"&&(n=C.decodeDate(n)),function(I,N,W){var B=I.path,V=I.xsizemode,q=I.ysizemode,ne=I.xanchor,$=I.yanchor;return B.replace(_.segmentRE,function(K){var ee=0,J=K.charAt(0),Z=_.paramIsX[J],te=_.paramIsY[J],oe=_.numParams[J],se=K.substr(1).replace(_.paramRE,function(ce){return Z[ee]?ce=V==="pixel"?N(ne)+Number(ce):N(ce):te[ee]&&(ce=q==="pixel"?W($)-Number(ce):W(ce)),++ee>oe&&(ce="X"),ce});return ee>oe&&(se=se.replace(/[\s,]*X.*/,""),T.log("Ignoring extra params in segment "+K)),J+se})}(c,t,n);if(c.xsizemode==="pixel"){var S=t(c.xanchor);a=S+c.x0+x,s=S+c.x1+y}else a=t(c.x0)+x,s=t(c.x1)+y;if(c.ysizemode==="pixel"){var k=n(c.yanchor);l=k-c.y0+A,u=k-c.y1+d}else l=n(c.y0)+A,u=n(c.y1)+d;if(p==="line")return"M"+a+","+l+"L"+s+","+u;if(p==="rect")return"M"+a+","+l+"H"+s+"V"+u+"H"+a+"Z";var E=(a+s)/2,L=(l+u)/2,O=Math.abs(E-a),P=Math.abs(L-l),F="A"+O+","+P,U=E+O+","+L;return"M"+U+F+" 0 1,1 "+E+","+(L-P)+F+" 0 0,1 "+U+"Z"}},41592:function(R,C,e){"use strict";var _=e(4016);R.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:_.draw,drawOne:_.drawOne}},97728:function(R){"use strict";function C(o,t){return t?t.d2l(o):o}function e(o,t){return t?t.l2d(o):o}function _(o){return o.x0shift||0}function T(o){return o.x1shift||0}function r(o){return o.y0shift||0}function w(o){return o.y1shift||0}function b(o,t){return C(o.x1,t)+T(o)-C(o.x0,t)-_(o)}function c(o,t,i){return C(o.y1,i)+w(o)-C(o.y0,i)-r(o)}R.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,t,i){return o.type!=="line"?void 0:c(o,0,i)/b(o,t)},dx:b,dy:c,width:function(o,t){return Math.abs(b(o,t))},height:function(o,t,i){return Math.abs(c(o,0,i))},length:function(o,t,i){return o.type!=="line"?void 0:Math.sqrt(Math.pow(b(o,t),2)+Math.pow(c(o,0,i),2))},xcenter:function(o,t){return e((C(o.x1,t)+T(o)+C(o.x0,t)+_(o))/2,t)},ycenter:function(o,t,i){return e((C(o.y1,i)+w(o)+C(o.y0,i)+r(o))/2,i)}}},89861:function(R,C,e){"use strict";var _=e(25376),T=e(66741),r=e(92880).extendDeepAll,w=e(67824).overrideAll,b=e(85656),c=e(31780).templatedArray,o=e(60876),t=c("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});R.exports=w(c("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:r(T({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:_({})},font:_({}),activebgcolor:{valType:"color",dflt:o.gripBgActiveColor},bgcolor:{valType:"color",dflt:o.railBgColor},bordercolor:{valType:"color",dflt:o.railBorderColor},borderwidth:{valType:"number",min:0,dflt:o.railBorderWidth},ticklen:{valType:"number",min:0,dflt:o.tickLength},tickcolor:{valType:"color",dflt:o.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:o.minorTickLength}}),"arraydraw","from-root")},60876:function(R){"use strict";R.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(R,C,e){"use strict";var _=e(3400),T=e(51272),r=e(89861),w=e(60876).name,b=r.steps;function c(t,i,n){function a(f,m){return _.coerce(t,i,r,f,m)}for(var s=T(t,i,{name:"steps",handleItemDefaults:o}),l=0,u=0;u<s.length;u++)s[u].visible&&l++;if(l<2?i.visible=!1:a("visible")){i._stepCount=l;var p=i._visibleSteps=_.filterVisible(s);(s[a("active")]||{}).visible||(i.active=p[0]._index),a("x"),a("y"),_.noneOrAll(t,i,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),_.coerceFont(a,"font",n.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),_.coerceFont(a,"currentvalue.font",i.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function o(t,i){function n(s,l){return _.coerce(t,i,b,s,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):i.visible=!1){n("method"),n("args");var a=n("label","step-"+i._index);n("value",a),n("execute")}}R.exports=function(t,i){T(t,i,{name:w,handleItemDefaults:c})}},79664:function(R,C,e){"use strict";var _=e(33428),T=e(7316),r=e(76308),w=e(43616),b=e(3400),c=b.strTranslate,o=e(72736),t=e(31780).arrayEditor,i=e(60876),n=e(84284),a=n.LINE_SPACING,s=n.FROM_TL,l=n.FROM_BR;function u(P){return i.autoMarginIdRoot+P._index}function p(P){return P._index}function f(P,F){var U=w.tester.selectAll("g."+i.labelGroupClass).data(F._visibleSteps);U.enter().append("g").classed(i.labelGroupClass,!0);var I=0,N=0;U.each(function(J){var Z=g(_.select(this),{step:J},F).node();if(Z){var te=w.bBox(Z);N=Math.max(N,te.height),I=Math.max(I,te.width)}}),U.remove();var W=F._dims={};W.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var B=P._fullLayout._size;W.lx=B.l+B.w*F.x,W.ly=B.t+B.h*(1-F.y),F.lenmode==="fraction"?W.outerLength=Math.round(B.w*F.len):W.outerLength=F.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-F.pad.l-F.pad.r);var V=(W.inputAreaLength-2*i.stepInset)/(F._stepCount-1),q=I+i.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(q/V)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,F.currentvalue.visible){var ne=w.tester.append("g");U.each(function(J){var Z=m(ne,F,J.label),te=Z.node()&&w.bBox(Z.node())||{width:0,height:0},oe=o.lineCount(Z);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(te.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(te.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,oe)}),W.currentValueTotalHeight=W.currentValueHeight+F.currentvalue.offset,ne.remove()}W.height=W.currentValueTotalHeight+i.tickOffset+F.ticklen+i.labelOffset+W.labelHeight+F.pad.t+F.pad.b;var $="left";b.isRightAnchor(F)&&(W.lx-=W.outerLength,$="right"),b.isCenterAnchor(F)&&(W.lx-=W.outerLength/2,$="center");var K="top";b.isBottomAnchor(F)&&(W.ly-=W.height,K="bottom"),b.isMiddleAnchor(F)&&(W.ly-=W.height/2,K="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var ee={y:F.y,b:W.height*l[K],t:W.height*s[K]};F.lenmode==="fraction"?(ee.l=0,ee.xl=F.x-F.len*s[$],ee.r=0,ee.xr=F.x+F.len*l[$]):(ee.x=F.x,ee.l=W.outerLength*s[$],ee.r=W.outerLength*l[$]),T.autoMargin(P,u(F),ee)}function m(P,F,U){if(F.currentvalue.visible){var I,N,W=F._dims;switch(F.currentvalue.xanchor){case"right":I=W.inputAreaLength-i.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":I=.5*W.inputAreaLength,N="middle";break;default:I=i.currentValueInset,N="left"}var B=b.ensureSingle(P,"text",i.labelClass,function(ee){ee.attr({"text-anchor":N,"data-notex":1})}),V=F.currentvalue.prefix?F.currentvalue.prefix:"";if(typeof U=="string")V+=U;else{var q=F.steps[F.active].label,ne=F._gd._fullLayout._meta;ne&&(q=b.templateString(q,ne)),V+=q}F.currentvalue.suffix&&(V+=F.currentvalue.suffix),B.call(w.font,F.currentvalue.font).text(V).call(o.convertToTspans,F._gd);var $=o.lineCount(B),K=(W.currentValueMaxLines+1-$)*F.currentvalue.font.size*a;return o.positionText(B,I,K),B}}function h(P,F,U){b.ensureSingle(P,"rect",i.gripRectClass,function(I){I.call(A,F,P,U).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(r.stroke,U.bordercolor).call(r.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function g(P,F,U){var I=b.ensureSingle(P,"text",i.labelClass,function(B){B.attr({"text-anchor":"middle","data-notex":1})}),N=F.step.label,W=U._gd._fullLayout._meta;return W&&(N=b.templateString(N,W)),I.call(w.font,U.font).text(N).call(o.convertToTspans,U._gd),I}function v(P,F){var U=b.ensureSingle(P,"g",i.labelsClass),I=F._dims,N=U.selectAll("g."+i.labelGroupClass).data(I.labelSteps);N.enter().append("g").classed(i.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var B=_.select(this);B.call(g,W,F),w.setTranslate(B,k(F,W.fraction),i.tickOffset+F.ticklen+F.font.size*a+i.labelOffset+I.currentValueTotalHeight)})}function x(P,F,U,I,N){var W=Math.round(I*(U._stepCount-1)),B=U._visibleSteps[W]._index;B!==U.active&&y(P,F,U,B,!0,N)}function y(P,F,U,I,N,W){var B=U.active;U.active=I,t(P.layout,i.name,U).applyUpdate("active",I);var V=U.steps[U.active];F.call(S,U,W),F.call(m,U),P.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:N,previousActive:B}),V&&V.method&&N&&(F._nextMethod?(F._nextMethod.step=V,F._nextMethod.doCallback=N,F._nextMethod.doTransition=W):(F._nextMethod={step:V,doCallback:N,doTransition:W},F._nextMethodRaf=window.requestAnimationFrame(function(){var q=F._nextMethod.step;q.method&&(q.execute&&T.executeAPICommand(P,q.method,q.args),F._nextMethod=null,F._nextMethodRaf=null)})))}function A(P,F,U){if(!F._context.staticPlot){var I=U.node(),N=_.select(F);P.on("mousedown",B),P.on("touchstart",B)}function W(){return U.data()[0]}function B(){var V=W();F.emit("plotly_sliderstart",{slider:V});var q=U.select("."+i.gripRectClass);_.event.stopPropagation(),_.event.preventDefault(),q.call(r.fill,V.activebgcolor);var ne=E(V,_.mouse(I)[0]);function $(){var ee=W(),J=E(ee,_.mouse(I)[0]);x(F,U,ee,J,!1)}function K(){var ee=W();ee._dragging=!1,q.call(r.fill,ee.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),F.emit("plotly_sliderend",{slider:ee,step:ee.steps[ee.active]})}x(F,U,V,ne,!0),V._dragging=!0,N.on("mousemove",$),N.on("touchmove",$),N.on("mouseup",K),N.on("touchend",K)}}function d(P,F){var U=P.selectAll("rect."+i.tickRectClass).data(F._visibleSteps),I=F._dims;U.enter().append("rect").classed(i.tickRectClass,!0),U.exit().remove(),U.attr({width:F.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(N,W){var B=W%I.labelStride==0,V=_.select(this);V.attr({height:B?F.ticklen:F.minorticklen}).call(r.fill,F.tickcolor),w.setTranslate(V,k(F,W/(F._stepCount-1))-.5*F.tickwidth,(B?i.tickOffset:i.minorTickOffset)+I.currentValueTotalHeight)})}function S(P,F,U){for(var I=P.select("rect."+i.gripRectClass),N=0,W=0;W<F._stepCount;W++)if(F._visibleSteps[W]._index===F.active){N=W;break}var B=k(F,N/(F._stepCount-1));if(!F._invokingCommand){var V=I;U&&F.transition.duration>0&&(V=V.transition().duration(F.transition.duration).ease(F.transition.easing)),V.attr("transform",c(B-.5*i.gripWidth,F._dims.currentValueTotalHeight))}}function k(P,F){var U=P._dims;return U.inputAreaStart+i.stepInset+(U.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,F))}function E(P,F){var U=P._dims;return Math.min(1,Math.max(0,(F-i.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*i.stepInset-2*U.inputAreaStart)))}function L(P,F,U){var I=U._dims,N=b.ensureSingle(P,"rect",i.railTouchRectClass,function(W){W.call(A,F,P,U).style("pointer-events","all")});N.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,i.tickOffset+U.ticklen+I.labelHeight)}).call(r.fill,U.bgcolor).attr("opacity",0),w.setTranslate(N,0,I.currentValueTotalHeight)}function O(P,F){var U=F._dims,I=U.inputAreaLength-2*i.railInset,N=b.ensureSingle(P,"rect",i.railRectClass);N.attr({width:I,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(r.stroke,F.bordercolor).call(r.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px"),w.setTranslate(N,i.railInset,.5*(U.inputAreaWidth-i.railWidth)+U.currentValueTotalHeight)}R.exports=function(P){var F=P._context.staticPlot,U=P._fullLayout,I=function(ne,$){for(var K=ne[i.name],ee=[],J=0;J<K.length;J++){var Z=K[J];Z.visible&&(Z._gd=$,ee.push(Z))}return ee}(U,P),N=U._infolayer.selectAll("g."+i.containerClassName).data(I.length>0?[0]:[]);function W(ne){ne._commandObserver&&(ne._commandObserver.remove(),delete ne._commandObserver),T.autoMargin(P,u(ne))}if(N.enter().append("g").classed(i.containerClassName,!0).style("cursor",F?null:"ew-resize"),N.exit().each(function(){_.select(this).selectAll("g."+i.groupClassName).each(W)}).remove(),I.length!==0){var B=N.selectAll("g."+i.groupClassName).data(I,p);B.enter().append("g").classed(i.groupClassName,!0),B.exit().each(W).remove();for(var V=0;V<I.length;V++){var q=I[V];f(P,q)}B.each(function(ne){var $=_.select(this);(function(K){var ee=K._dims;ee.labelSteps=[];for(var J=K._stepCount,Z=0;Z<J;Z+=ee.labelStride)ee.labelSteps.push({fraction:Z/(J-1),step:K._visibleSteps[Z]})})(ne),T.manageCommandObserver(P,ne,ne._visibleSteps,function(K){var ee=$.data()[0];ee.active!==K.index&&(ee._dragging||y(P,$,ee,K.index,!1,!0))}),function(K,ee,J){(J.steps[J.active]||{}).visible||(J.active=J._visibleSteps[0]._index),ee.call(m,J).call(O,J).call(v,J).call(d,J).call(L,K,J).call(h,K,J);var Z=J._dims;w.setTranslate(ee,Z.lx+J.pad.l,Z.ly+J.pad.t),ee.call(S,J,!1),ee.call(m,J)}(P,_.select(this),ne)})}}},97544:function(R,C,e){"use strict";var _=e(60876);R.exports={moduleType:"component",name:_.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(7316),w=e(24040),b=e(3400),c=b.strTranslate,o=e(43616),t=e(76308),i=e(72736),n=e(13448),a=e(84284).OPPOSITE_SIDE,s=/ [XY][0-9]* /;R.exports={draw:function(l,u,p){var f,m=l._fullLayout,h=p.propContainer,g=p.propName,v=p.placeholder,x=p.traceIndex,y=p.avoid||{},A=p.attributes,d=p.transform,S=p.containerGroup,k=1,E=h.title,L=(E&&E.text?E.text:"").trim(),O=!1,P=E&&E.font?E.font:{},F=P.family,U=P.size,I=P.color,N=P.weight,W=P.style,B=P.variant,V=P.textcase,q=P.lineposition,ne=P.shadow,$=!!p.subtitlePropName,K=p.subtitlePlaceholder,ee=(h.title||{}).subtitle||{text:"",font:{}},J=ee.text.trim(),Z=!1,te=1,oe=ee.font,se=oe.family,ce=oe.size,ye=oe.color,me=oe.weight,fe=oe.style,pe=oe.variant,ge=oe.textcase,ke=oe.lineposition,Ce=oe.shadow;g==="title.text"?f="titleText":g.indexOf("axis")!==-1?f="axisTitleText":g.indexOf(!0)&&(f="colorbarTitleText");var de=l._context.edits[f];function ae(Le,je){return Le!==void 0&&je!==void 0&&Le.replace(s," % ")===je.replace(s," % ")}L===""?k=0:ae(L,v)&&(de||(L=""),k=.2,O=!0),$&&(J===""?te=0:ae(J,K)&&(de||(J=""),te=.2,Z=!0)),p._meta?L=b.templateString(L,p._meta):m._meta&&(L=b.templateString(L,m._meta));var re,he=L||J||de;S||(S=b.ensureSingle(m._infolayer,"g","g-"+u),re=m._hColorbarMoveTitle);var Se=S.selectAll("text."+u).data(he?[0]:[]);Se.enter().append("text"),Se.text(L).attr("class",u),Se.exit().remove();var xe=null,Te=u+"-subtitle",Ae=J||de;if($&&Ae&&((xe=S.selectAll("text."+Te).data(Ae?[0]:[])).enter().append("text"),xe.text(J).attr("class",Te),xe.exit().remove()),!he)return S;function Pe(Le,je){b.syncOrAsync([De,ve],{title:Le,subtitle:je})}function De(Le){var je,Ge=Le.title,Je=Le.subtitle;if(!d&&re&&(d={}),d?(je="",d.rotate&&(je+="rotate("+[d.rotate,A.x,A.y]+")"),(d.offset||re)&&(je+=c(0,(d.offset||0)-(re||0)))):je=null,Ge.attr("transform",je),Ge.style("opacity",k*t.opacity(I)).call(o.font,{color:t.rgb(I),size:_.round(U,2),family:F,weight:N,style:W,variant:B,textcase:V,shadow:ne,lineposition:q}).attr(A).call(i.convertToTspans,l,function(tt){if(tt){var Qe=_.select(tt.node().parentNode).select("."+Te);if(!Qe.empty()){var Dt=tt.node().getBBox();if(Dt.height){var zt=Dt.y+Dt.height+1.6*ce;Qe.attr("y",zt)}}}}),Je){var rt=S.select("."+u+"-math-group"),ot=Ge.node().getBBox(),yt=rt.node()?rt.node().getBBox():void 0,_t=yt?yt.y+yt.height+1.6*ce:ot.y+ot.height+1.6*ce,mt=b.extendFlat({},A,{y:_t});Je.attr("transform",je),Je.style("opacity",te*t.opacity(ye)).call(o.font,{color:t.rgb(ye),size:_.round(ce,2),family:se,weight:me,style:fe,variant:pe,textcase:ge,shadow:Ce,lineposition:ke}).attr(mt).call(i.convertToTspans,l)}return r.previousPromises(l)}function ve(Le){var je=Le.title,Ge=_.select(je.node().parentNode);if(y&&y.selection&&y.side&&L){Ge.attr("transform",null);var Je=a[y.side],rt=y.side==="left"||y.side==="top"?-1:1,ot=T(y.pad)?y.pad:2,yt=o.bBox(Ge.node()),_t={t:0,b:0,l:0,r:0},mt=l._fullLayout._reservedMargin;for(var tt in mt)for(var Qe in mt[tt]){var Dt=mt[tt][Qe];_t[Qe]=Math.max(_t[Qe],Dt)}var zt={left:_t.l,top:_t.t,right:m.width-_t.r,bottom:m.height-_t.b},pt=y.maxShift||rt*(zt[y.side]-yt[y.side]),vt=0;if(pt<0)vt=pt;else{var We=y.offsetLeft||0,Ze=y.offsetTop||0;yt.left-=We,yt.right-=We,yt.top-=Ze,yt.bottom-=Ze,y.selection.each(function(){var Xe=o.bBox(this);b.bBoxIntersect(yt,Xe,ot)&&(vt=Math.max(vt,rt*(Xe[y.side]-yt[Je])+ot))}),vt=Math.min(pt,vt),h._titleScoot=Math.abs(vt)}if(vt>0||pt<0){var Ne={left:[-vt,0],right:[vt,0],top:[0,-vt],bottom:[0,vt]}[y.side];Ge.attr("transform",c(Ne[0],Ne[1]))}}}function we(Le,je){Le.text(je).on("mouseover.opacity",function(){_.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){_.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})}if(Se.call(Pe,xe),de&&(L?Se.on(".opacity",null):(we(Se,v),O=!0),Se.call(i.makeEditable,{gd:l}).on("edit",function(Le){x!==void 0?w.call("_guiRestyle",l,g,Le,x):w.call("_guiRelayout",l,g,Le)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Pe)}).on("input",function(Le){this.text(Le||" ").call(i.positionText,A.x,A.y)}),$)){if($&&!L){var Ee=Se.node().getBBox(),Fe=Ee.y+Ee.height+1.6*ce;xe.attr("y",Fe)}J?xe.on(".opacity",null):(we(xe,K),Z=!0),xe.call(i.makeEditable,{gd:l}).on("edit",function(Le){w.call("_guiRelayout",l,"title.subtitle.text",Le)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Pe)}).on("input",function(Le){this.text(Le||" ").call(i.positionText,xe.attr("x"),xe.attr("y"))})}return Se.classed("js-placeholder",O),xe&&xe.classed("js-placeholder",Z),S},SUBTITLE_PADDING_EM:1.6,SUBTITLE_PADDING_MATHJAX_EM:1.6}},88444:function(R,C,e){"use strict";var _=e(25376),T=e(22548),r=e(92880).extendFlat,w=e(67824).overrideAll,b=e(66741),c=e(31780).templatedArray,o=c("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});R.exports=w(c("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:o,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:r(b({editType:"arraydraw"}),{}),font:_({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:T.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(R){"use strict";R.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(R,C,e){"use strict";var _=e(3400),T=e(51272),r=e(88444),w=e(73712).name,b=r.buttons;function c(t,i,n){function a(s,l){return _.coerce(t,i,r,s,l)}a("visible",T(t,i,{name:"buttons",handleItemDefaults:o}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),_.noneOrAll(t,i,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),_.coerceFont(a,"font",n.font),a("bgcolor",n.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function o(t,i){function n(a,s){return _.coerce(t,i,b,a,s)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}R.exports=function(t,i){T(t,i,{name:w,handleItemDefaults:c})}},14420:function(R,C,e){"use strict";var _=e(33428),T=e(7316),r=e(76308),w=e(43616),b=e(3400),c=e(72736),o=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),n=e(37400);function a(k){return k._index}function s(k,E){return+k.attr(i.menuIndexAttrName)===E._index}function l(k,E,L,O,P,F,U,I){E.active=U,o(k.layout,i.name,E).applyUpdate("active",U),E.type==="buttons"?p(k,O,null,null,E):E.type==="dropdown"&&(P.attr(i.menuIndexAttrName,"-1"),u(k,O,P,F,E),I||p(k,O,P,F,E))}function u(k,E,L,O,P){var F=b.ensureSingle(E,"g",i.headerClassName,function(V){V.style("pointer-events","all")}),U=P._dims,I=P.active,N=P.buttons[I]||i.blankHeaderOpts,W={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},B={width:U.headerWidth,height:U.headerHeight};F.call(f,P,N,k).call(d,P,W,B),b.ensureSingle(E,"text",i.headerArrowClassName,function(V){V.attr("text-anchor","end").call(w.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:U.headerWidth-i.arrowOffsetX+P.pad.l,y:U.headerHeight/2+i.textOffsetY+P.pad.t}),F.on("click",function(){L.call(S,String(s(L,P)?-1:P._index)),p(k,E,L,O,P)}),F.on("mouseover",function(){F.call(v)}),F.on("mouseout",function(){F.call(x,P)}),w.setTranslate(E,U.lx,U.ly)}function p(k,E,L,O,P){L||(L=E).attr("pointer-events","all");var F=function(ee){return+ee.attr(i.menuIndexAttrName)==-1}(L)&&P.type!=="buttons"?[]:P.buttons,U=P.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,I=L.selectAll("g."+U).data(b.filterVisible(F)),N=I.enter().append("g").classed(U,!0),W=I.exit();P.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var B=0,V=0,q=P._dims,ne=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(ne?V=q.headerHeight+i.gapButtonHeader:B=q.headerWidth+i.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(V=-i.gapButtonHeader+i.gapButton-q.openHeight),P.type==="dropdown"&&P.direction==="left"&&(B=-i.gapButtonHeader+i.gapButton-q.openWidth);var $={x:q.lx+B+P.pad.l,y:q.ly+V+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},K={l:$.x+P.borderwidth,t:$.y+P.borderwidth};I.each(function(ee,J){var Z=_.select(this);Z.call(f,P,ee,k).call(d,P,$),Z.on("click",function(){_.event.defaultPrevented||(ee.execute&&(ee.args2&&P.active===J?(l(k,P,0,E,L,O,-1),T.executeAPICommand(k,ee.method,ee.args2)):(l(k,P,0,E,L,O,J),T.executeAPICommand(k,ee.method,ee.args))),k.emit("plotly_buttonclicked",{menu:P,button:ee,active:P.active}))}),Z.on("mouseover",function(){Z.call(v)}),Z.on("mouseout",function(){Z.call(x,P),I.call(g,P)})}),I.call(g,P),ne?(K.w=Math.max(q.openWidth,q.headerWidth),K.h=$.y-K.t):(K.w=$.x-K.l,K.h=Math.max(q.openHeight,q.headerHeight)),K.direction=P.direction,O&&(I.size()?function(ee,J,Z,te,oe,se){var ce,ye,me,fe=oe.direction,pe=fe==="up"||fe==="down",ge=oe._dims,ke=oe.active;if(pe)for(ye=0,me=0;me<ke;me++)ye+=ge.heights[me]+i.gapButton;else for(ce=0,me=0;me<ke;me++)ce+=ge.widths[me]+i.gapButton;te.enable(se,ce,ye),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,O,P,K):function(ee){var J=!!ee.hbar,Z=!!ee.vbar;J&&ee.hbar.transition().attr("opacity","0").each("end",function(){J=!1,Z||ee.disable()}),Z&&ee.vbar.transition().attr("opacity","0").each("end",function(){Z=!1,J||ee.disable()})}(O))}function f(k,E,L,O){k.call(m,E).call(h,E,L,O)}function m(k,E){b.ensureSingle(k,"rect",i.itemRectClassName,function(L){L.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(r.stroke,E.bordercolor).call(r.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function h(k,E,L,O){var P=b.ensureSingle(k,"text",i.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),F=L.label,U=O._fullLayout._meta;U&&(F=b.templateString(F,U)),P.call(w.font,E.font).text(F).call(c.convertToTspans,O)}function g(k,E){var L=E.active;k.each(function(O,P){var F=_.select(this);P===L&&E.showactive&&F.select("rect."+i.itemRectClassName).call(r.fill,i.activeColor)})}function v(k){k.select("rect."+i.itemRectClassName).call(r.fill,i.hoverColor)}function x(k,E){k.select("rect."+i.itemRectClassName).call(r.fill,E.bgcolor)}function y(k,E){var L=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},O=w.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));O.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=["up","down"].indexOf(E.direction)!==-1;O.each(function(B,V){var q=_.select(this);q.call(f,E,B,k);var ne=q.select("."+i.itemTextClassName),$=ne.node()&&w.bBox(ne.node()).width,K=Math.max($+i.textPadX,i.minWidth),ee=E.font.size*t,J=c.lineCount(ne),Z=Math.max(ee*J,i.minHeight)+i.textOffsetY;Z=Math.ceil(Z),K=Math.ceil(K),L.widths[V]=K,L.heights[V]=Z,L.height1=Math.max(L.height1,Z),L.width1=Math.max(L.width1,K),P?(L.totalWidth=Math.max(L.totalWidth,K),L.openWidth=L.totalWidth,L.totalHeight+=Z+i.gapButton,L.openHeight+=Z+i.gapButton):(L.totalWidth+=K+i.gapButton,L.openWidth+=K+i.gapButton,L.totalHeight=Math.max(L.totalHeight,Z),L.openHeight=L.totalHeight)}),P?L.totalHeight-=i.gapButton:L.totalWidth-=i.gapButton,L.headerWidth=L.width1+i.arrowPadX,L.headerHeight=L.height1,E.type==="dropdown"&&(P?(L.width1+=i.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=i.arrowPadX),O.remove();var F=L.totalWidth+E.pad.l+E.pad.r,U=L.totalHeight+E.pad.t+E.pad.b,I=k._fullLayout._size;L.lx=I.l+I.w*E.x,L.ly=I.t+I.h*(1-E.y);var N="left";b.isRightAnchor(E)&&(L.lx-=F,N="right"),b.isCenterAnchor(E)&&(L.lx-=F/2,N="center");var W="top";b.isBottomAnchor(E)&&(L.ly-=U,W="bottom"),b.isMiddleAnchor(E)&&(L.ly-=U/2,W="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),T.autoMargin(k,A(E),{x:E.x,y:E.y,l:F*({right:1,center:.5}[N]||0),r:F*({left:1,center:.5}[N]||0),b:U*({top:1,middle:.5}[W]||0),t:U*({bottom:1,middle:.5}[W]||0)})}function A(k){return i.autoMarginIdRoot+k._index}function d(k,E,L,O){O=O||{};var P=k.select("."+i.itemRectClassName),F=k.select("."+i.itemTextClassName),U=E.borderwidth,I=L.index,N=E._dims;w.setTranslate(k,U+L.x,U+L.y);var W=["up","down"].indexOf(E.direction)!==-1,B=O.height||(W?N.heights[I]:N.height1);P.attr({x:0,y:0,width:O.width||(W?N.width1:N.widths[I]),height:B});var V=E.font.size*t,q=(c.lineCount(F)-1)*V/2;c.positionText(F,i.textOffsetX,B/2-q+i.textOffsetY),W?L.y+=N.heights[I]+L.yPad:L.x+=N.widths[I]+L.xPad,L.index++}function S(k,E){k.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}R.exports=function(k){var E=k._fullLayout,L=b.filterVisible(E[i.name]);function O(V){T.autoMargin(k,A(V))}var P=E._menulayer.selectAll("g."+i.containerClassName).data(L.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){_.select(this).selectAll("g."+i.headerGroupClassName).each(O)}).remove(),L.length!==0){var F=P.selectAll("g."+i.headerGroupClassName).data(L,a);F.enter().append("g").classed(i.headerGroupClassName,!0);for(var U=b.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),I=0;I<L.length;I++){var N=L[I];y(k,N)}var W="updatemenus"+E._uid,B=new n(k,U,W);F.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(S)),F.exit().each(function(V){U.call(S),O(V)}).remove(),F.each(function(V){var q=_.select(this),ne=V.type==="dropdown"?U:null;T.manageCommandObserver(k,V,V.buttons,function($){l(k,V,V.buttons[$.index],q,ne,B,$.index,!0)}),V.type==="dropdown"?(u(k,q,U,B,V),s(U,V)&&p(k,q,U,B,V)):p(k,q,null,null,V)})}}},76908:function(R,C,e){"use strict";var _=e(73712);R.exports={moduleType:"component",name:_.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(R,C,e){"use strict";R.exports=b;var _=e(33428),T=e(76308),r=e(43616),w=e(3400);function b(c,o,t){this.gd=c,this.container=o,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(c,o,t){var i=this.gd._fullLayout,n=i.width,a=i.height;this.position=c;var s,l,u,p,f=this.position.l,m=this.position.w,h=this.position.t,g=this.position.h,v=this.position.direction,x=v==="down",y=v==="left",A=v==="up",d=m,S=g;x||y||v==="right"||A||(this.position.direction="down",x=!0),x||A?(l=(s=f)+d,x?(u=h,S=(p=Math.min(u+S,a))-u):S=(p=h+S)-(u=Math.max(p-S,0))):(p=(u=h)+S,y?d=(l=f+d)-(s=Math.max(l-d,0)):(s=f,d=(l=Math.min(s+d,n))-s)),this._box={l:s,t:u,w:d,h:S};var k=m>d,E=b.barLength+2*b.barPad,L=b.barWidth+2*b.barPad,O=f,P=h+g;P+L>a&&(P=a-L);var F=this.container.selectAll("rect.scrollbar-horizontal").data(k?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-horizontal",!0).call(T.fill,b.barColor),k?(this.hbar=F.attr({rx:b.barRadius,ry:b.barRadius,x:O,y:P,width:E,height:L}),this._hbarXMin=O+E/2,this._hbarTranslateMax=d-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=g>S,I=b.barWidth+2*b.barPad,N=b.barLength+2*b.barPad,W=f+m,B=h;W+I>n&&(W=n-I);var V=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(T.fill,b.barColor),U?(this.vbar=V.attr({rx:b.barRadius,ry:b.barRadius,x:W,y:B,width:I,height:N}),this._vbarYMin=B+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var q=this.id,ne=s-.5,$=U?l+I+.5:l+.5,K=u-.5,ee=k?p+L+.5:p+.5,J=i._topdefs.selectAll("#"+q).data(k||U?[0]:[]);if(J.exit().remove(),J.enter().append("clipPath").attr("id",q).append("rect"),k||U?(this._clipRect=J.select("rect").attr({x:Math.floor(ne),y:Math.floor(K),width:Math.ceil($)-Math.floor(ne),height:Math.ceil(ee)-Math.floor(K)}),this.container.call(r.setClipUrl,q,this.gd),this.bg.attr({x:f,y:h,width:m,height:g})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(r.setClipUrl,null),delete this._clipRect),k||U){var Z=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(Z);var te=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault(),_.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));k&&this.hbar.on(".drag",null).call(te),U&&this.vbar.on(".drag",null).call(te)}this.setTranslate(o,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(r.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var c=this.translateX,o=this.translateY;this.hbar&&(c-=_.event.dx),this.vbar&&(o-=_.event.dy),this.setTranslate(c,o)},b.prototype._onBoxWheel=function(){var c=this.translateX,o=this.translateY;this.hbar&&(c+=_.event.deltaY),this.vbar&&(o+=_.event.deltaY),this.setTranslate(c,o)},b.prototype._onBarDrag=function(){var c=this.translateX,o=this.translateY;if(this.hbar){var t=c+this._hbarXMin,i=t+this._hbarTranslateMax;c=(w.constrain(_.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var n=o+this._vbarYMin,a=n+this._vbarTranslateMax;o=(w.constrain(_.event.y,n,a)-n)/(a-n)*(this.position.h-this._box.h)}this.setTranslate(c,o)},b.prototype.setTranslate=function(c,o){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(c=w.constrain(c||0,0,t),o=w.constrain(o||0,0,i),this.translateX=c,this.translateY=o,this.container.call(r.setTranslate,this._box.l-this.position.l-c,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+c-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var n=c/t;this.hbar.call(r.setTranslate,c+n*this._hbarTranslateMax,o)}if(this.vbar){var a=o/i;this.vbar.call(r.setTranslate,c,o+a*this._vbarTranslateMax)}}},84284:function(R){"use strict";R.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(R){"use strict";R.exports={axisRefDescription:function(C,e,_){return["If set to a",C,"axis id (e.g. *"+C+"* or","*"+C+"2*), the `"+C+"` position refers to a",C,"coordinate. If set to *paper*, the `"+C+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+_+"). If set to a",C,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+C+"2 domain* refers to the domain of the second",C," axis and a",C,"position of 0.5 refers to the","point between the",e,"and the",_,"of the domain of the","second",C,"axis."].join(" ")}}},48164:function(R){"use strict";R.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(R){"use strict";R.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(R){"use strict";R.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(R){"use strict";R.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(R){"use strict";R.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(R){"use strict";R.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(R){"use strict";R.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(R,C){"use strict";C.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],C.STYLE=C.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(R,C){"use strict";C.xmlns="http://www.w3.org/2000/xmlns/",C.svg="http://www.w3.org/2000/svg",C.xlink="http://www.w3.org/1999/xlink",C.svgAttrs={xmlns:C.svg,"xmlns:xlink":C.xlink}},64884:function(R,C,e){"use strict";C.version=e(25788).version,e(88324),e(79288);for(var _=e(24040),T=C.register=_.register,r=e(22448),w=Object.keys(r),b=0;b<w.length;b++){var c=w[b];c.charAt(0)!=="_"&&(C[c]=r[c]),T({moduleType:"apiMethod",name:c,fn:r[c]})}T(e(65875)),T([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),T([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(T(window.PlotlyLocales),delete window.PlotlyLocales),C.Icons=e(9224);var o=e(93024),t=e(7316);C.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},C.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},C.Snapshot=e(78904),C.PlotSchema=e(73060)},9224:function(R){"use strict";R.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(R,C){"use strict";C.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},C.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},C.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},C.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},C.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},C.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(R,C,e){"use strict";var _=e(20435),T=_.mod,r=_.modHalf,w=Math.PI,b=2*w;function c(n){return Math.abs(n[1]-n[0])>b-1e-14}function o(n,a){return r(a-n,b)}function t(n,a){if(c(a))return!0;var s,l;a[0]<a[1]?(s=a[0],l=a[1]):(s=a[1],l=a[0]),(s=T(s,b))>(l=T(l,b))&&(l+=b);var u=T(n,b),p=u+b;return u>=s&&u<=l||p>=s&&p<=l}function i(n,a,s,l,u,p,f){u=u||0,p=p||0;var m,h,g,v,x,y=c([s,l]);function A(E,L){return[E*Math.cos(L)+u,p-E*Math.sin(L)]}y?(m=0,h=w,g=b):s<l?(m=s,g=l):(m=l,g=s),n<a?(v=n,x=a):(v=a,x=n);var d,S=Math.abs(g-m)<=w?0:1;function k(E,L,O){return"A"+[E,E]+" "+[0,S,O]+" "+A(E,L)}return y?d=v===null?"M"+A(x,m)+k(x,h,0)+k(x,g,0)+"Z":"M"+A(v,m)+k(v,h,0)+k(v,g,0)+"ZM"+A(x,m)+k(x,h,1)+k(x,g,1)+"Z":v===null?(d="M"+A(x,m)+k(x,g,0),f&&(d+="L0,0Z")):d="M"+A(v,m)+"L"+A(x,m)+k(x,g,0)+"L"+A(v,g)+k(v,m,1)+"Z",d}R.exports={deg2rad:function(n){return n/180*w},rad2deg:function(n){return n/w*180},angleDelta:o,angleDist:function(n,a){return Math.abs(o(n,a))},isFullCircle:c,isAngleInsideSector:t,isPtInsideSector:function(n,a,s,l){return!!t(a,l)&&(s[0]<s[1]?(u=s[0],p=s[1]):(u=s[1],p=s[0]),n>=u&&n<=p);var u,p},pathArc:function(n,a,s,l,u){return i(null,n,a,s,l,u,0)},pathSector:function(n,a,s,l,u){return i(null,n,a,s,l,u,1)},pathAnnulus:function(n,a,s,l,u,p){return i(n,a,s,l,u,p,1)}}},38116:function(R,C,e){"use strict";var _=e(83160).decode,T=e(63620),r=Array.isArray,w=ArrayBuffer,b=DataView;function c(a){return w.isView(a)&&!(a instanceof b)}function o(a){return r(a)||c(a)}C.isTypedArray=c,C.isArrayOrTypedArray=o,C.isArray1D=function(a){return!o(a[0])},C.ensureArray=function(a,s){return r(a)||(a=[]),a.length=s,a};var t={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};function i(a){return a.constructor===ArrayBuffer}function n(a,s,l){if(o(a)){if(o(a[0])){for(var u=l,p=0;p<a.length;p++)u=s(u,a[p].length);return u}return a.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,C.isArrayBuffer=i,C.decodeTypedArraySpec=function(a){var s=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(a),u=l.dtype,p=t[u];if(!p)throw new Error('Error in dtype: "'+u+'"');var f=p.BYTES_PER_ELEMENT,m=l.bdata;i(m)||(m=_(m));var h=l.shape===void 0?[m.byteLength/f]:(""+l.shape).split(",");h.reverse();var g,v,x=h.length,y=+h[0],A=f*y,d=0;if(x===1)s=new p(m);else if(x===2)for(g=+h[1],v=0;v<g;v++)s[v]=new p(m,d,y),d+=A;else{if(x!==3)throw new Error("ndim: "+x+'is not supported with the shape:"'+l.shape+'"');g=+h[1];for(var S=+h[2],k=0;k<S;k++)for(s[k]=[],v=0;v<g;v++)s[k][v]=new p(m,d,y),d+=A}return s.bdata=l.bdata,s.dtype=l.dtype,s.shape=h.reverse().join(","),a._inputArray=s,s},C.isTypedArraySpec=function(a){return T(a)&&a.hasOwnProperty("dtype")&&typeof a.dtype=="string"&&a.hasOwnProperty("bdata")&&(typeof a.bdata=="string"||i(a.bdata))&&(a.shape===void 0||a.hasOwnProperty("shape")&&(typeof a.shape=="string"||typeof a.shape=="number"))},C.concat=function(){var a,s,l,u,p,f,m,h,g=[],v=!0,x=0;for(l=0;l<arguments.length;l++)(f=(u=arguments[l]).length)&&(s?g.push(u):(s=u,p=f),r(u)?a=!1:(v=!1,x?a!==u.constructor&&(a=!1):a=u.constructor),x+=f);if(!x)return[];if(!g.length)return s;if(v)return s.concat.apply(s,g);if(a){for((m=new a(x)).set(s),l=0;l<g.length;l++)u=g[l],m.set(u,p),p+=u.length;return m}for(m=new Array(x),h=0;h<s.length;h++)m[h]=s[h];for(l=0;l<g.length;l++){for(u=g[l],h=0;h<u.length;h++)m[p+h]=u[h];p+=h}return m},C.maxRowLength=function(a){return n(a,Math.max,0)},C.minRowLength=function(a){return n(a,Math.min,1/0)}},54037:function(R,C,e){"use strict";var _=e(38248),T=e(39032).BADNUM,r=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;R.exports=function(w){return typeof w=="string"&&(w=w.replace(r,"")),_(w)?Number(w):T}},73696:function(R){"use strict";R.exports=function(C){var e=C._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(_){_.regl&&_.regl.clear({color:!0,depth:!0})})}},75352:function(R){"use strict";R.exports=function(C){C._responsiveChartHandler&&(window.removeEventListener("resize",C._responsiveChartHandler),delete C._responsiveChartHandler)}},63064:function(R,C,e){"use strict";var _=e(38248),T=e(49760),r=e(92880).extendFlat,w=e(45464),b=e(88304),c=e(76308),o=e(13448).DESELECTDIM,t=e(22296),i=e(53756).counter,n=e(20435).modHalf,a=e(38116).isArrayOrTypedArray,s=e(38116).isTypedArraySpec,l=e(38116).decodeTypedArraySpec;function u(p,f){var m=C.valObjectMeta[f.valType];if(f.arrayOk&&a(p))return!0;if(m.validateFunction)return m.validateFunction(p,f);var h={},g=h,v={set:function(x){g=x}};return m.coerceFunction(p,v,h,f),g!==h}C.valObjectMeta={data_array:{coerceFunction:function(p,f,m){f.set(a(p)?p:s(p)?l(p):m)}},enumerated:{coerceFunction:function(p,f,m,h){h.coerceNumber&&(p=+p),h.values.indexOf(p)===-1?f.set(m):f.set(p)},validateFunction:function(p,f){f.coerceNumber&&(p=+p);for(var m=f.values,h=0;h<m.length;h++){var g=String(m[h]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){if(new RegExp(g.substr(1,g.length-2)).test(p))return!0}else if(p===m[h])return!0}return!1}},boolean:{coerceFunction:function(p,f,m){p===!0||p===!1?f.set(p):f.set(m)}},number:{coerceFunction:function(p,f,m,h){s(p)&&(p=l(p)),!_(p)||h.min!==void 0&&p<h.min||h.max!==void 0&&p>h.max?f.set(m):f.set(+p)}},integer:{coerceFunction:function(p,f,m,h){(h.extras||[]).indexOf(p)===-1?(s(p)&&(p=l(p)),p%1||!_(p)||h.min!==void 0&&p<h.min||h.max!==void 0&&p>h.max?f.set(m):f.set(+p)):f.set(p)}},string:{coerceFunction:function(p,f,m,h){if(typeof p!="string"){var g=typeof p=="number";h.strict!==!0&&g?f.set(String(p)):f.set(m)}else h.noBlank&&!p?f.set(m):f.set(p)}},color:{coerceFunction:function(p,f,m){s(p)&&(p=l(p)),T(p).isValid()?f.set(p):f.set(m)}},colorlist:{coerceFunction:function(p,f,m){Array.isArray(p)&&p.length&&p.every(function(h){return T(h).isValid()})?f.set(p):f.set(m)}},colorscale:{coerceFunction:function(p,f,m){f.set(b.get(p,m))}},angle:{coerceFunction:function(p,f,m){s(p)&&(p=l(p)),p==="auto"?f.set("auto"):_(p)?f.set(n(+p,360)):f.set(m)}},subplotid:{coerceFunction:function(p,f,m,h){var g=h.regex||i(m);typeof p=="string"&&g.test(p)?f.set(p):f.set(m)},validateFunction:function(p,f){var m=f.dflt;return p===m||typeof p=="string"&&!!i(m).test(p)}},flaglist:{coerceFunction:function(p,f,m,h){if((h.extras||[]).indexOf(p)===-1)if(typeof p=="string"){for(var g=p.split("+"),v=0;v<g.length;){var x=g[v];h.flags.indexOf(x)===-1||g.indexOf(x)<v?g.splice(v,1):v++}g.length?f.set(g.join("+")):f.set(m)}else f.set(m);else f.set(p)}},any:{coerceFunction:function(p,f,m){p===void 0?f.set(m):f.set(s(p)?l(p):p)}},info_array:{coerceFunction:function(p,f,m,h){function g(I,N,W){var B,V={set:function(q){B=q}};return W===void 0&&(W=N.dflt),C.valObjectMeta[N.valType].coerceFunction(I,V,W,N),B}if(s(p)&&(p=l(p)),a(p)){var v,x,y,A,d,S,k=h.dimensions===2||h.dimensions==="1-2"&&Array.isArray(p)&&a(p[0]),E=h.items,L=[],O=Array.isArray(E),P=O&&k&&a(E[0]),F=k&&O&&!P,U=O&&!F?E.length:p.length;if(m=Array.isArray(m)?m:[],k)for(v=0;v<U;v++)for(L[v]=[],y=a(p[v])?p[v]:[],d=F?E.length:O?E[v].length:y.length,x=0;x<d;x++)A=F?E[x]:O?E[v][x]:E,(S=g(y[x],A,(m[v]||[])[x]))!==void 0&&(L[v][x]=S);else for(v=0;v<U;v++)(S=g(p[v],O?E[v]:E,m[v]))!==void 0&&(L[v]=S);f.set(L)}else f.set(m)},validateFunction:function(p,f){if(!a(p))return!1;var m=f.items,h=Array.isArray(m),g=f.dimensions===2;if(!f.freeLength&&p.length!==m.length)return!1;for(var v=0;v<p.length;v++)if(g){if(!a(p[v])||!f.freeLength&&p[v].length!==m[v].length)return!1;for(var x=0;x<p[v].length;x++)if(!u(p[v][x],h?m[v][x]:m))return!1}else if(!u(p[v],h?m[v]:m))return!1;return!0}}},C.coerce=function(p,f,m,h,g){var v=t(m,h).get(),x=t(p,h),y=t(f,h),A=x.get(),d=f._template;if(A===void 0&&d&&(A=t(d,h).get(),d=0),g===void 0&&(g=v.dflt),v.arrayOk){if(a(A))return y.set(A),A;if(s(A))return A=l(A),y.set(A),A}var S=C.valObjectMeta[v.valType].coerceFunction;S(A,y,g,v);var k=y.get();return d&&k===g&&!u(A,v)&&(S(A=t(d,h).get(),y,g,v),k=y.get()),k},C.coerce2=function(p,f,m,h,g){var v=t(p,h),x=C.coerce(p,f,m,h,g);return v.get()!=null&&x},C.coerceFont=function(p,f,m,h){h||(h={}),m=r({},m);var g={family:p(f+".family",(m=r(m,h.overrideDflt||{})).family),size:p(f+".size",m.size),color:p(f+".color",m.color),weight:p(f+".weight",m.weight),style:p(f+".style",m.style)};if(h.noFontVariant||(g.variant=p(f+".variant",m.variant)),h.noFontLineposition||(g.lineposition=p(f+".lineposition",m.lineposition)),h.noFontTextcase||(g.textcase=p(f+".textcase",m.textcase)),!h.noFontShadow){var v=m.shadow;v==="none"&&h.autoShadowDflt&&(v="auto"),g.shadow=p(f+".shadow",v)}return g},C.coercePattern=function(p,f,m,h){if(p(f+".shape")){p(f+".solidity"),p(f+".size");var g=p(f+".fillmode")==="overlay";if(!h){var v=p(f+".bgcolor",g?m:void 0);p(f+".fgcolor",g?c.contrast(v):m)}p(f+".fgopacity",g?.5:1)}},C.coerceHoverinfo=function(p,f,m){var h,g=f._module.attributes,v=g.hoverinfo?g:w,x=v.hoverinfo;if(m._dataLength===1){var y=x.dflt==="all"?x.flags.slice():x.dflt.split("+");y.splice(y.indexOf("name"),1),h=y.join("+")}return C.coerce(p,f,v,"hoverinfo",h)},C.coerceSelectionMarkerOpacity=function(p,f){if(p.marker){var m,h,g=p.marker.opacity;g!==void 0&&(a(g)||p.selected||p.unselected||(m=g,h=o*g),f("selected.marker.opacity",m),f("unselected.marker.opacity",h))}},C.validate=u},67555:function(R,C,e){"use strict";var _,T,r=e(94336).Yn,w=e(38248),b=e(24248),c=e(20435).mod,o=e(39032),t=o.BADNUM,i=o.ONEDAY,n=o.ONEHOUR,a=o.ONEMIN,s=o.ONESEC,l=o.EPOCHJD,u=e(24040),p=e(94336).E9,f=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=new Date().getFullYear()-70;function g(F){return F&&u.componentsRegistry.calendars&&typeof F=="string"&&F!=="gregorian"}function v(F,U){return String(F+Math.pow(10,U)).substr(1)}C.dateTick0=function(F,U){var I=function(W,B){return g(W)?B?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:u.getComponentMethod("calendars","CANONICAL_TICK")[W]:B?"2000-01-02":"2000-01-01"}(F,!!U);if(U<2)return I;var N=C.dateTime2ms(I,F);return N+=i*(U-1),C.ms2DateTime(N,0,F)},C.dfltRange=function(F){return g(F)?u.getComponentMethod("calendars","DFLTRANGE")[F]:["2000-01-01","2001-01-01"]},C.isJSDate=function(F){return typeof F=="object"&&F!==null&&typeof F.getTime=="function"},C.dateTime2ms=function(F,U){if(C.isJSDate(F)){var I=F.getTimezoneOffset()*a,N=(F.getUTCMinutes()-F.getMinutes())*a+(F.getUTCSeconds()-F.getSeconds())*s+(F.getUTCMilliseconds()-F.getMilliseconds());if(N){var W=3*a;I=I-W/2+c(N-I+W/2,W)}return(F=Number(F)-I)>=_&&F<=T?F:t}if(typeof F!="string"&&typeof F!="number")return t;F=String(F);var B=g(U),V=F.charAt(0);!B||V!=="G"&&V!=="g"||(F=F.substr(1),U="");var q=B&&U.substr(0,7)==="chinese",ne=F.match(q?m:f);if(!ne)return t;var $=ne[1],K=ne[3]||"1",ee=Number(ne[5]||1),J=Number(ne[7]||0),Z=Number(ne[9]||0),te=Number(ne[11]||0);if(B){if($.length===2)return t;var oe;$=Number($);try{var se=u.getComponentMethod("calendars","getCal")(U);if(q){var ce=K.charAt(K.length-1)==="i";K=parseInt(K,10),oe=se.newDate($,se.toMonthIndex($,K,ce),ee)}else oe=se.newDate($,Number(K),ee)}catch{return t}return oe?(oe.toJD()-l)*i+J*n+Z*a+te*s:t}$=$.length===2?(Number($)+2e3-h)%100+h:Number($),K-=1;var ye=new Date(Date.UTC(2e3,K,ee,J,Z));return ye.setUTCFullYear($),ye.getUTCMonth()!==K||ye.getUTCDate()!==ee?t:ye.getTime()+te*s},_=C.MIN_MS=C.dateTime2ms("-9999"),T=C.MAX_MS=C.dateTime2ms("9999-12-31 23:59:59.9999"),C.isDateTime=function(F,U){return C.dateTime2ms(F,U)!==t};var x=90*i,y=3*n,A=5*a;function d(F,U,I,N,W){if((U||I||N||W)&&(F+=" "+v(U,2)+":"+v(I,2),(N||W)&&(F+=":"+v(N,2),W))){for(var B=4;W%10==0;)B-=1,W/=10;F+="."+v(W,B)}return F}C.ms2DateTime=function(F,U,I){if(typeof F!="number"||!(F>=_&&F<=T))return t;U||(U=0);var N,W,B,V,q,ne,$=Math.floor(10*c(F+.05,1)),K=Math.round(F-$/10);if(g(I)){var ee=Math.floor(K/i)+l,J=Math.floor(c(F,i));try{N=u.getComponentMethod("calendars","getCal")(I).fromJD(ee).formatDate("yyyy-mm-dd")}catch{N=p("G%Y-%m-%d")(new Date(K))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=U<x?Math.floor(J/n):0,B=U<x?Math.floor(J%n/a):0,V=U<y?Math.floor(J%a/s):0,q=U<A?J%s*10+$:0}else ne=new Date(K),N=p("%Y-%m-%d")(ne),W=U<x?ne.getUTCHours():0,B=U<x?ne.getUTCMinutes():0,V=U<y?ne.getUTCSeconds():0,q=U<A?10*ne.getUTCMilliseconds()+$:0;return d(N,W,B,V,q)},C.ms2DateTimeLocal=function(F){if(!(F>=_+i&&F<=T-i))return t;var U=Math.floor(10*c(F+.05,1)),I=new Date(Math.round(F-U/10));return d(r("%Y-%m-%d")(I),I.getHours(),I.getMinutes(),I.getSeconds(),10*I.getUTCMilliseconds()+U)},C.cleanDate=function(F,U,I){if(F===t)return U;if(C.isJSDate(F)||typeof F=="number"&&isFinite(F)){if(g(I))return b.error("JS Dates and milliseconds are incompatible with world calendars",F),U;if(!(F=C.ms2DateTimeLocal(+F))&&U!==void 0)return U}else if(!C.isDateTime(F,I))return b.error("unrecognized date",F),U;return F};var S=/%\d?f/g,k=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function L(F,U,I,N){F=F.replace(S,function(B){var V=Math.min(+B.charAt(1)||6,6);return(U/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(U+.05));if(F=F.replace(k,function(){return E[I("%q")(W)]}),g(N))try{F=u.getComponentMethod("calendars","worldCalFmt")(F,U,N)}catch{return"Invalid"}return I(F)(W)}var O=[59,59.9,59.99,59.999,59.9999];C.formatDate=function(F,U,I,N,W,B){if(W=g(W)&&W,!U)if(I==="y")U=B.year;else if(I==="m")U=B.month;else{if(I!=="d")return function(V,q){var ne=c(V+.05,i),$=v(Math.floor(ne/n),2)+":"+v(c(Math.floor(ne/a),60),2);if(q!=="M"){w(q)||(q=0);var K=(100+Math.min(c(V/s,60),O[q])).toFixed(q).substr(1);q>0&&(K=K.replace(/0+$/,"").replace(/[\.]$/,"")),$+=":"+K}return $}(F,I)+`
`+L(B.dayMonthYear,F,N,W);U=B.dayMonth+`
`+B.year}return L(U,F,N,W)};var P=3*i;C.incrementMonth=function(F,U,I){I=g(I)&&I;var N=c(F,i);if(F=Math.round(F-N),I)try{var W=Math.round(F/i)+l,B=u.getComponentMethod("calendars","getCal")(I),V=B.fromJD(W);return U%12?B.add(V,U,"m"):B.add(V,U/12,"y"),(V.toJD()-l)*i+N}catch{b.error("invalid ms "+F+" in calendar "+I)}var q=new Date(F+P);return q.setUTCMonth(q.getUTCMonth()+U)+N-P},C.findExactDates=function(F,U){for(var I,N,W=0,B=0,V=0,q=0,ne=g(U)&&u.getComponentMethod("calendars","getCal")(U),$=0;$<F.length;$++)if(N=F[$],w(N)){if(!(N%i))if(ne)try{(I=ne.fromJD(N/i+l)).day()===1?I.month()===1?W++:B++:V++}catch{}else(I=new Date(N)).getUTCDate()===1?I.getUTCMonth()===0?W++:B++:V++}else q++;V+=B+=W;var K=F.length-q;return{exactYears:W/K,exactMonths:B/K,exactDays:V/K}}},52200:function(R,C,e){"use strict";var _=e(33428),T=e(24248),r=e(52248),w=e(36524);function b(n){var a=n&&n.parentNode;a&&a.removeChild(n)}function c(n,a,s){var l="plotly.js-style-"+n,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(a+"{"+s+"}",0):p.addRule?p.addRule(a,s,0):T.warn("addStyleRule failed")}function o(n){var a=window.getComputedStyle(n,null),s=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("-moz-transform")||a.getPropertyValue("-ms-transform")||a.getPropertyValue("-o-transform")||a.getPropertyValue("transform");return s==="none"?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var a=[];i(n);)a.push(n),n=n.parentNode,typeof ShadowRoot=="function"&&n instanceof ShadowRoot&&(n=n.host);return a}function i(n){return n&&(n instanceof Element||n instanceof HTMLElement)}R.exports={getGraphDiv:function(n){var a;if(typeof n=="string"){if((a=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return a}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var a=_.select(n);return a.node()instanceof HTMLElement&&a.size()&&a.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(n,a){c("global",n,a)},addRelatedStyleRule:c,deleteRelatedStyleRule:function(n){var a="plotly.js-style-"+n,s=document.getElementById(a);s&&b(s)},getFullTransformMatrix:function(n){var a=t(n),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return a.forEach(function(l){var u=o(l);if(u){var p=r.convertCssMatrix(u);s=w.multiply(s,s,p)}}),s},getElementTransformMatrix:o,getElementAndAncestors:t,equalDomRects:function(n,a){return n&&a&&n.top===a.top&&n.left===a.left&&n.right===a.right&&n.bottom===a.bottom}}},95924:function(R,C,e){"use strict";var _=e(61252).EventEmitter,T={init:function(r){if(r._ev instanceof _)return r;var w=new _,b=new _;return r._ev=w,r._internalEv=b,r.on=w.on.bind(w),r.once=w.once.bind(w),r.removeListener=w.removeListener.bind(w),r.removeAllListeners=w.removeAllListeners.bind(w),r._internalOn=b.on.bind(b),r._internalOnce=b.once.bind(b),r._removeInternalListener=b.removeListener.bind(b),r._removeAllInternalListeners=b.removeAllListeners.bind(b),r.emit=function(c,o){typeof jQuery<"u"&&jQuery(r).trigger(c,o),w.emit(c,o),b.emit(c,o)},r},triggerHandler:function(r,w,b){var c,o;typeof jQuery<"u"&&(c=jQuery(r).triggerHandler(w,b));var t=r._ev;if(!t)return c;var i,n=t._events[w];if(!n)return c;function a(s){return s.listener?(t.removeListener(w,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(t,[b]))):s.apply(t,[b])}for(n=Array.isArray(n)?n:[n],i=0;i<n.length-1;i++)a(n[i]);return o=a(n[i]),c!==void 0?c:o},purge:function(r){return delete r._ev,delete r.on,delete r.once,delete r.removeListener,delete r.removeAllListeners,delete r.emit,delete r._ev,delete r._internalEv,delete r._internalOn,delete r._internalOnce,delete r._removeInternalListener,delete r._removeAllInternalListeners,r}};R.exports=T},92880:function(R,C,e){"use strict";var _=e(63620),T=Array.isArray;function r(w,b,c,o){var t,i,n,a,s,l,u,p=w[0],f=w.length;if(f===2&&T(p)&&T(w[1])&&p.length===0){if(u=function(h,g){var v,x;for(v=0;v<h.length;v++){if((x=h[v])!==null&&typeof x=="object")return!1;x!==void 0&&(g[v]=x)}return!0}(w[1],p),u)return p;p.splice(0,p.length)}for(var m=1;m<f;m++)for(i in t=w[m])n=p[i],a=t[i],o&&T(a)?p[i]=a:b&&a&&(_(a)||(s=T(a)))?(s?(s=!1,l=n&&T(n)?n:[]):l=n&&_(n)?n:{},p[i]=r([l,a],b,c,o)):(a!==void 0||c)&&(p[i]=a);return p}C.extendFlat=function(){return r(arguments,!1,!1,!1)},C.extendDeep=function(){return r(arguments,!0,!1,!1)},C.extendDeepAll=function(){return r(arguments,!0,!0,!1)},C.extendDeepNoArrays=function(){return r(arguments,!0,!1,!0)}},68944:function(R){"use strict";R.exports=function(C){for(var e={},_=[],T=0,r=0;r<C.length;r++){var w=C[r];e[w]!==1&&(e[w]=1,_[T++]=w)}return _}},43880:function(R){"use strict";function C(_){return _.visible===!0}function e(_){var T=_[0].trace;return T.visible===!0&&T._length!==0}R.exports=function(_){for(var T,r=(T=_,Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace?e:C),w=[],b=0;b<_.length;b++){var c=_[b];r(c)&&w.push(c)}return w}},27144:function(R,C,e){"use strict";var _=e(33428),T=e(36116),r=e(40440),w=e(77844),b=e(42428),c=e(35536),o=e(24248),t=e(63620),i=e(22296),n=e(92065),a=Object.keys(T),s={"ISO-3":c,"USA-states":c,"country names":function(u){for(var p=0;p<a.length;p++){var f=a[p];if(new RegExp(T[f]).test(u.trim().toLowerCase()))return f}return o.log("Unrecognized country name: "+u+"."),!1}};function l(u){var p=u.geojson,f=window.PlotlyGeoAssets||{},m=typeof p=="string"?f[p]:p;return t(m)?m:(o.error("Oops ... something went wrong when fetching "+p),!1)}R.exports={locationToFeature:function(u,p,f){if(!p||typeof p!="string")return!1;var m,h,g,v=s[u](p);if(v){if(u==="USA-states")for(m=[],g=0;g<f.length;g++)(h=f[g]).properties&&h.properties.gu&&h.properties.gu==="USA"&&m.push(h);else m=f;for(g=0;g<m.length;g++)if((h=m[g]).id===v)return h;o.log(["Location with id",v,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,f,m,h,g=u.geometry,v=g.coordinates,x=u.id,y=[];function A(d){for(var S=0;S<d.length-1;S++)if(d[S][0]>0&&d[S+1][0]<0)return S;return null}switch(p=x==="RUS"||x==="FJI"?function(d){var S;if(A(d)===null)S=d;else for(S=new Array(d.length),h=0;h<d.length;h++)S[h]=[d[h][0]<0?d[h][0]+360:d[h][0],d[h][1]];y.push(n.tester(S))}:x==="ATA"?function(d){var S=A(d);if(S===null)return y.push(n.tester(d));var k=new Array(d.length+1),E=0;for(h=0;h<d.length;h++)h>S?k[E++]=[d[h][0]+360,d[h][1]]:h===S?(k[E++]=d[h],k[E++]=[d[h][0],-90]):k[E++]=d[h];var L=n.tester(k);L.pts.pop(),y.push(L)}:function(d){y.push(n.tester(d))},g.type){case"MultiPolygon":for(f=0;f<v.length;f++)for(m=0;m<v[f].length;m++)p(v[f][m]);break;case"Polygon":for(f=0;f<v.length;f++)p(v[f])}return y},getTraceGeojson:l,extractTraceFeature:function(u){var p=u[0].trace,f=l(p);if(!f)return!1;var m,h={},g=[];for(m=0;m<p._length;m++){var v=u[m];(v.loc||v.loc===0)&&(h[v.loc]=v)}function x(d){var S=i(d,p.featureidkey||"id").get(),k=h[S];if(k){var E=d.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var L={type:"Feature",id:S,geometry:E,properties:{}};L.properties.ct=function(O){var P,F=O.geometry;if(F.type==="MultiPolygon")for(var U=F.coordinates,I=0,N=0;N<U.length;N++){var W={type:"Polygon",coordinates:U[N]},B=r.default(W);B>I&&(I=B,P=W)}else P=F;return w.default(P).geometry.coordinates}(L),k.fIn=d,k.fOut=L,g.push(L)}else o.log(["Location",k.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete h[S]}switch(f.type){case"FeatureCollection":var y=f.features;for(m=0;m<y.length;m++)x(y[m]);break;case"Feature":x(f);break;default:return o.warn(["Invalid GeoJSON type",(f.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var A in h)o.log(["Location *"+A+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return g},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},f=[];function m(x){return new Promise(function(y,A){_.json(x,function(d,S){if(d){delete p[x];var k=d.status===404?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x;return A(new Error(k))}return p[x]=S,y(S)})})}function h(x){return new Promise(function(y,A){var d=0,S=setInterval(function(){return p[x]&&p[x]!=="pending"?(clearInterval(S),y(p[x])):d>100?(clearInterval(S),A("Unexpected error while fetching from "+x)):void d++},50)})}for(var g=0;g<u.length;g++){var v=u[g][0].trace.geojson;typeof v=="string"&&(p[v]?p[v]==="pending"&&f.push(h(v)):(p[v]="pending",f.push(m(v))))}return f},computeBbox:function(u){return b.default(u)}}},44808:function(R,C,e){"use strict";var _=e(39032).BADNUM;C.calcTraceToLineCoords=function(T){for(var r=T[0].trace.connectgaps,w=[],b=[],c=0;c<T.length;c++){var o=T[c].lonlat;o[0]!==_?b.push(o):!r&&b.length>0&&(w.push(b),b=[])}return b.length>0&&w.push(b),w},C.makeLine=function(T){return T.length===1?{type:"LineString",coordinates:T[0]}:{type:"MultiLineString",coordinates:T}},C.makePolygon=function(T){if(T.length===1)return{type:"Polygon",coordinates:T};for(var r=new Array(T.length),w=0;w<T.length;w++)r[w]=[T[w]];return{type:"MultiPolygon",coordinates:r}},C.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(R,C,e){"use strict";var _,T,r,w=e(20435).mod;function b(o,t,i,n,a,s,l,u){var p=i-o,f=a-o,m=l-a,h=n-t,g=s-t,v=u-s,x=p*v-m*h;if(x===0)return null;var y=(f*v-m*g)/x,A=(f*h-p*g)/x;return A<0||A>1||y<0||y>1?null:{x:o+p*y,y:t+h*y}}function c(o,t,i,n,a){var s=n*o+a*t;if(s<0)return n*n+a*a;if(s>i){var l=n-o,u=a-t;return l*l+u*u}var p=n*t-a*o;return p*p/i}C.segmentsIntersect=b,C.segmentDistance=function(o,t,i,n,a,s,l,u){if(b(o,t,i,n,a,s,l,u))return 0;var p=i-o,f=n-t,m=l-a,h=u-s,g=p*p+f*f,v=m*m+h*h,x=Math.min(c(p,f,g,a-o,s-t),c(p,f,g,l-o,u-t),c(m,h,v,o-a,t-s),c(m,h,v,i-a,n-s));return Math.sqrt(x)},C.getTextLocation=function(o,t,i,n){if(o===T&&n===r||(_={},T=o,r=n),_[i])return _[i];var a=o.getPointAtLength(w(i-n/2,t)),s=o.getPointAtLength(w(i+n/2,t)),l=Math.atan((s.y-a.y)/(s.x-a.x)),u=o.getPointAtLength(w(i,t)),p={x:(4*u.x+a.x+s.x)/6,y:(4*u.y+a.y+s.y)/6,theta:l};return _[i]=p,p},C.clearLocationCache=function(){T=null},C.getVisibleSegment=function(o,t,i){var n,a,s=t.left,l=t.right,u=t.top,p=t.bottom,f=0,m=o.getTotalLength(),h=m;function g(x){var y=o.getPointAtLength(x);x===0?n=y:x===m&&(a=y);var A=y.x<s?s-y.x:y.x>l?y.x-l:0,d=y.y<u?u-y.y:y.y>p?y.y-p:0;return Math.sqrt(A*A+d*d)}for(var v=g(f);v;){if((f+=v+i)>h)return;v=g(f)}for(v=g(h);v;){if(f>(h-=v+i))return;v=g(h)}return{min:f,max:h,len:h-f,total:m,isClosed:f===0&&h===m&&Math.abs(n.x-a.x)<.1&&Math.abs(n.y-a.y)<.1}},C.findPointOnPath=function(o,t,i,n){for(var a,s,l,u=(n=n||{}).pathLength||o.getTotalLength(),p=n.tolerance||.001,f=n.iterationLimit||30,m=o.getPointAtLength(0)[i]>o.getPointAtLength(u)[i]?-1:1,h=0,g=0,v=u;h<f;){if(a=(g+v)/2,l=(s=o.getPointAtLength(a))[i]-t,Math.abs(l)<p)return s;m*l>0?v=a:g=a,h++}return s}},33040:function(R,C,e){"use strict";var _=e(38248),T=e(49760),r=e(72160),w=e(8932),b=e(22548).defaultLine,c=e(38116).isArrayOrTypedArray,o=r(b);function t(a,s){var l=a;return l[3]*=s,l}function i(a){if(_(a))return o;var s=r(a);return s.length?s:o}function n(a){return _(a)?a:1}R.exports={formatColor:function(a,s,l){var u=a.color;u&&u._inputArray&&(u=u._inputArray);var p,f,m,h,g,v=c(u),x=c(s),y=w.extractOpts(a),A=[];if(p=y.colorscale!==void 0?w.makeColorScaleFuncFromTrace(a):i,f=v?function(S,k){return S[k]===void 0?o:r(p(S[k]))}:i,m=x?function(S,k){return S[k]===void 0?1:n(S[k])}:n,v||x)for(var d=0;d<l;d++)h=f(u,d),g=m(s,d),A[d]=t(h,g);else A=t(r(u),s);return A},parseColorScale:function(a){var s=w.extractOpts(a),l=s.colorscale;return s.reversescale&&(l=w.flipScale(s.colorscale)),l.map(function(u){var p=u[0],f=T(u[1]).toRgb();return{index:p,rgb:[f.r,f.g,f.b,f.a]}})}}},71688:function(R,C,e){"use strict";var _=e(35536);function T(r){return[r]}R.exports={keyFun:function(r){return r.key},repeat:T,descend:_,wrap:T,unwrap:function(r){return r[0]}}},35536:function(R){"use strict";R.exports=function(C){return C}},1396:function(R){"use strict";R.exports=function(C,e){if(!e)return C;var _=1/Math.abs(e),T=_>1?(_*C+_*e)/_:C+e,r=String(T).length;if(r>16){var w=String(e).length;if(r>=String(C).length+w){var b=parseFloat(T).toPrecision(12);b.indexOf("e+")===-1&&(T=+b)}}return T}},3400:function(R,C,e){"use strict";var _=e(33428),T=e(94336).E9,r=e(57624).E9,w=e(38248),b=e(39032),c=b.FP_SAFE,o=-c,t=b.BADNUM,i=R.exports={};i.adjustFormat=function(J){return!J||/^\d[.]\df/.test(J)||/[.]\d%/.test(J)?J:J==="0.f"?"~f":/^\d%/.test(J)?"~%":/^\ds/.test(J)?"~s":!/^[~,.0$]/.test(J)&&/[&fps]/.test(J)?"~"+J:J};var n={};i.warnBadFormat=function(J){var Z=String(J);n[Z]||(n[Z]=1,i.warn('encountered bad format: "'+Z+'"'))},i.noFormat=function(J){return String(J)},i.numberFormat=function(J){var Z;try{Z=r(i.adjustFormat(J))}catch{return i.warnBadFormat(J),i.noFormat}return Z},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var a=e(38116);i.isArrayBuffer=a.isArrayBuffer,i.isTypedArray=a.isTypedArray,i.isArrayOrTypedArray=a.isArrayOrTypedArray,i.isArray1D=a.isArray1D,i.ensureArray=a.ensureArray,i.concat=a.concat,i.maxRowLength=a.maxRowLength,i.minRowLength=a.minRowLength;var s=e(20435);i.mod=s.mod,i.modHalf=s.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var u=e(67555);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var p=e(14952);i.findBin=p.findBin,i.sorterAsc=p.sorterAsc,i.sorterDes=p.sorterDes,i.distinctVals=p.distinctVals,i.roundUp=p.roundUp,i.sort=p.sort,i.findIndexOfMin=p.findIndexOfMin,i.sortObjectKeys=e(95376);var f=e(63084);i.aggNums=f.aggNums,i.len=f.len,i.mean=f.mean,i.geometricMean=f.geometricMean,i.median=f.median,i.midRange=f.midRange,i.variance=f.variance,i.stdev=f.stdev,i.interp=f.interp;var m=e(52248);i.init2dArray=m.init2dArray,i.transposeRagged=m.transposeRagged,i.dot=m.dot,i.translationMatrix=m.translationMatrix,i.rotationMatrix=m.rotationMatrix,i.rotationXYMatrix=m.rotationXYMatrix,i.apply3DTransform=m.apply3DTransform,i.apply2DTransform=m.apply2DTransform,i.apply2DTransform2=m.apply2DTransform2,i.convertCssMatrix=m.convertCssMatrix,i.inverseTransformMatrix=m.inverseTransformMatrix;var h=e(11864);i.deg2rad=h.deg2rad,i.rad2deg=h.rad2deg,i.angleDelta=h.angleDelta,i.angleDist=h.angleDist,i.isFullCircle=h.isFullCircle,i.isAngleInsideSector=h.isAngleInsideSector,i.isPtInsideSector=h.isPtInsideSector,i.pathArc=h.pathArc,i.pathSector=h.pathSector,i.pathAnnulus=h.pathAnnulus;var g=e(98308);i.isLeftAnchor=g.isLeftAnchor,i.isCenterAnchor=g.isCenterAnchor,i.isRightAnchor=g.isRightAnchor,i.isTopAnchor=g.isTopAnchor,i.isMiddleAnchor=g.isMiddleAnchor,i.isBottomAnchor=g.isBottomAnchor;var v=e(92348);i.segmentsIntersect=v.segmentsIntersect,i.segmentDistance=v.segmentDistance,i.getTextLocation=v.getTextLocation,i.clearLocationCache=v.clearLocationCache,i.getVisibleSegment=v.getVisibleSegment,i.findPointOnPath=v.findPointOnPath;var x=e(92880);i.extendFlat=x.extendFlat,i.extendDeep=x.extendDeep,i.extendDeepAll=x.extendDeepAll,i.extendDeepNoArrays=x.extendDeepNoArrays;var y=e(24248);i.log=y.log,i.warn=y.warn,i.error=y.error;var A=e(53756);i.counterRegex=A.counter;var d=e(91200);i.throttle=d.throttle,i.throttleDone=d.done,i.clearThrottle=d.clear;var S=e(52200);function k(J){var Z={};for(var te in J)for(var oe=J[te],se=0;se<oe.length;se++)Z[oe[se]]=+te;return Z}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(J){return w(J)?(J=Number(J))>c||J<o?t:J:t},i.isIndex=function(J,Z){return!(Z!==void 0&&J>=Z)&&w(J)&&J>=0&&J%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(J,Z){for(var te=new Array(Z),oe=0;oe<Z;oe++)te[oe]=J;return te},i.swapAttrs=function(J,Z,te,oe){te||(te="x"),oe||(oe="y");for(var se=0;se<Z.length;se++){var ce=Z[se],ye=i.nestedProperty(J,ce.replace("?",te)),me=i.nestedProperty(J,ce.replace("?",oe)),fe=ye.get();ye.set(me.get()),me.set(fe)}},i.raiseToTop=function(J){J.parentNode.appendChild(J)},i.cancelTransition=function(J){return J.transition().duration(0)},i.constrain=function(J,Z,te){return Z>te?Math.max(te,Math.min(Z,J)):Math.max(Z,Math.min(te,J))},i.bBoxIntersect=function(J,Z,te){return te=te||0,J.left<=Z.right+te&&Z.left<=J.right+te&&J.top<=Z.bottom+te&&Z.top<=J.bottom+te},i.simpleMap=function(J,Z,te,oe,se){for(var ce=J.length,ye=new Array(ce),me=0;me<ce;me++)ye[me]=Z(J[me],te,oe,se);return ye},i.randstr=function J(Z,te,oe,se){if(oe||(oe=16),te===void 0&&(te=24),te<=0)return"0";var ce,ye,me=Math.log(Math.pow(2,te))/Math.log(oe),fe="";for(ce=2;me===1/0;ce*=2)me=Math.log(Math.pow(2,te/ce))/Math.log(oe)*ce;var pe=me-Math.floor(me);for(ce=0;ce<Math.floor(me);ce++)fe=Math.floor(Math.random()*oe).toString(oe)+fe;pe&&(ye=Math.pow(oe,pe),fe=Math.floor(Math.random()*ye).toString(oe)+fe);var ge=parseInt(fe,oe);return Z&&Z[fe]||ge!==1/0&&ge>=Math.pow(2,te)?se>10?(i.warn("randstr failed uniqueness"),fe):J(Z,te,oe,(se||0)+1):fe},i.OptionControl=function(J,Z){J||(J={}),Z||(Z="opt");var te={optionList:[],_newoption:function(oe){oe[Z]=J,te[oe.name]=oe,te.optionList.push(oe)}};return te["_"+Z]=J,te},i.smooth=function(J,Z){if((Z=Math.round(Z)||0)<2)return J;var te,oe,se,ce,ye=J.length,me=2*ye,fe=2*Z-1,pe=new Array(fe),ge=new Array(ye);for(te=0;te<fe;te++)pe[te]=(1-Math.cos(Math.PI*(te+1)/Z))/(2*Z);for(te=0;te<ye;te++){for(ce=0,oe=0;oe<fe;oe++)(se=te+oe+1-Z)<-ye?se-=me*Math.round(se/me):se>=me&&(se-=me*Math.floor(se/me)),se<0?se=-1-se:se>=ye&&(se=me-1-se),ce+=J[se]*pe[oe];ge[te]=ce}return ge},i.syncOrAsync=function(J,Z,te){var oe;function se(){return i.syncOrAsync(J,Z,te)}for(;J.length;)if((oe=(0,J.splice(0,1)[0])(Z))&&oe.then)return oe.then(se);return te&&te(Z)},i.stripTrailingSlash=function(J){return J.substr(-1)==="/"?J.substr(0,J.length-1):J},i.noneOrAll=function(J,Z,te){if(J){var oe,se=!1,ce=!0;for(oe=0;oe<te.length;oe++)J[te[oe]]!=null?se=!0:ce=!1;if(se&&!ce)for(oe=0;oe<te.length;oe++)J[te[oe]]=Z[te[oe]]}},i.mergeArray=function(J,Z,te,oe){var se=typeof oe=="function";if(i.isArrayOrTypedArray(J))for(var ce=Math.min(J.length,Z.length),ye=0;ye<ce;ye++){var me=J[ye];Z[ye][te]=se?oe(me):me}},i.mergeArrayCastPositive=function(J,Z,te){return i.mergeArray(J,Z,te,function(oe){var se=+oe;return isFinite(se)&&se>0?se:0})},i.fillArray=function(J,Z,te,oe){if(oe=oe||i.identity,i.isArrayOrTypedArray(J))for(var se=0;se<Z.length;se++)Z[se][te]=oe(J[se])},i.castOption=function(J,Z,te,oe){oe=oe||i.identity;var se=i.nestedProperty(J,te).get();return i.isArrayOrTypedArray(se)?Array.isArray(Z)&&i.isArrayOrTypedArray(se[Z[0]])?oe(se[Z[0]][Z[1]]):oe(se[Z]):se},i.extractOption=function(J,Z,te,oe){if(te in J)return J[te];var se=i.nestedProperty(Z,oe).get();return Array.isArray(se)?void 0:se},i.tagSelected=function(J,Z,te){var oe,se,ce=Z.selectedpoints,ye=Z._indexToPoints;ye&&(oe=k(ye));for(var me=0;me<ce.length;me++){var fe=ce[me];if(i.isIndex(fe)||i.isArrayOrTypedArray(fe)&&i.isIndex(fe[0])&&i.isIndex(fe[1])){var pe=oe?oe[fe]:fe,ge=te?te[pe]:pe;(se=ge)!==void 0&&se<J.length&&(J[ge].selected=1)}}},i.selIndices2selPoints=function(J){var Z=J.selectedpoints,te=J._indexToPoints;if(te){for(var oe=k(te),se=[],ce=0;ce<Z.length;ce++){var ye=Z[ce];if(i.isIndex(ye)){var me=oe[ye];i.isIndex(me)&&se.push(me)}}return se}return Z},i.getTargetArray=function(J,Z){var te=Z.target;if(typeof te=="string"&&te){var oe=i.nestedProperty(J,te).get();return!!i.isArrayOrTypedArray(oe)&&oe}return!!i.isArrayOrTypedArray(te)&&te},i.minExtend=function J(Z,te,oe){var se={};typeof te!="object"&&(te={});var ce,ye,me,fe=oe==="pieLike"?-1:3,pe=Object.keys(Z);for(ce=0;ce<pe.length;ce++)me=Z[ye=pe[ce]],ye.charAt(0)!=="_"&&typeof me!="function"&&(ye==="module"?se[ye]=me:Array.isArray(me)?se[ye]=ye==="colorscale"||fe===-1?me.slice():me.slice(0,fe):i.isTypedArray(me)?se[ye]=fe===-1?me.subarray():me.subarray(0,fe):se[ye]=me&&typeof me=="object"?J(Z[ye],te[ye],oe):me);for(pe=Object.keys(te),ce=0;ce<pe.length;ce++)typeof(me=te[ye=pe[ce]])=="object"&&ye in se&&typeof se[ye]=="object"||(se[ye]=me);return se},i.titleCase=function(J){return J.charAt(0).toUpperCase()+J.substr(1)},i.containsAny=function(J,Z){for(var te=0;te<Z.length;te++)if(J.indexOf(Z[te])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;i.isIOS=function(){return L.test(window.navigator.userAgent)};var O=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var J=O.exec(window.navigator.userAgent);if(J&&J.length===2){var Z=parseInt(J[1]);if(!isNaN(Z))return Z}return null},i.isD3Selection=function(J){return J instanceof _.selection},i.ensureSingle=function(J,Z,te,oe){var se=J.select(Z+(te?"."+te:""));if(se.size())return se;var ce=J.append(Z);return te&&ce.classed(te,!0),oe&&ce.call(oe),ce},i.ensureSingleById=function(J,Z,te,oe){var se=J.select(Z+"#"+te);if(se.size())return se;var ce=J.append(Z).attr("id",te);return oe&&ce.call(oe),ce},i.objectFromPath=function(J,Z){for(var te,oe=J.split("."),se=te={},ce=0;ce<oe.length;ce++){var ye=oe[ce],me=null,fe=oe[ce].match(/(.*)\[([0-9]+)\]/);fe?(ye=fe[1],me=fe[2],te=te[ye]=[],ce===oe.length-1?te[me]=Z:te[me]={},te=te[me]):(ce===oe.length-1?te[ye]=Z:te[ye]={},te=te[ye])}return se};var P=/^([^\[\.]+)\.(.+)?/,F=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function U(J){return J.slice(0,2)==="__"}i.expandObjectPaths=function(J){var Z,te,oe,se,ce,ye,me;if(typeof J=="object"&&!Array.isArray(J)){for(te in J)if(J.hasOwnProperty(te))if(Z=te.match(P)){if(se=J[te],U(oe=Z[1]))continue;delete J[te],J[oe]=i.extendDeepNoArrays(J[oe]||{},i.objectFromPath(te,i.expandObjectPaths(se))[oe])}else if(Z=te.match(F)){if(se=J[te],U(oe=Z[1]))continue;if(ce=parseInt(Z[2]),delete J[te],J[oe]=J[oe]||[],Z[3]===".")me=Z[4],ye=J[oe][ce]=J[oe][ce]||{},i.extendDeepNoArrays(ye,i.objectFromPath(me,i.expandObjectPaths(se)));else{if(U(oe))continue;J[oe][ce]=i.expandObjectPaths(se)}}else{if(U(te))continue;J[te]=i.expandObjectPaths(J[te])}}return J},i.numSeparate=function(J,Z,te){if(te||(te=!1),typeof Z!="string"||Z.length===0)throw new Error("Separator string required for formatting!");typeof J=="number"&&(J=String(J));var oe=/(\d+)(\d{3})/,se=Z.charAt(0),ce=Z.charAt(1),ye=J.split("."),me=ye[0],fe=ye.length>1?se+ye[1]:"";if(ce&&(ye.length>1||me.length>4||te))for(;oe.test(me);)me=me.replace(oe,"$1"+ce+"$2");return me+fe},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;i.templateString=function(J,Z){var te={};return J.replace(i.TEMPLATE_STRING_REGEX,function(oe,se){var ce;return I.test(se)?ce=Z[se]:(te[se]=te[se]||i.nestedProperty(Z,se).get,ce=te[se]()),i.isValidTextValue(ce)?ce:""})};var N={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return ne.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return ne.apply(W,arguments)};var B=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return ne.apply(V,arguments)};var q=/^[:|\|]/;function ne(J,Z,te){var oe=this,se=arguments;Z||(Z={});var ce={};return J.replace(i.TEMPLATE_STRING_REGEX,function(ye,me,fe){var pe=me==="_xother"||me==="_yother",ge=me==="_xother_"||me==="_yother_",ke=me==="xother_"||me==="yother_",Ce=me==="xother"||me==="yother"||pe||ke||ge,de=me;(pe||ge)&&(de=de.substring(1)),(ke||ge)&&(de=de.substring(0,de.length-1));var ae,re,he,Se=null,xe=null;if(oe.parseMultDiv){var Te=function(ve){var we=ve.match(B);return we?{key:we[1],op:we[2],number:Number(we[3])}:{key:ve,op:null,number:null}}(de);de=Te.key,Se=Te.op,xe=Te.number}if(Ce){if((ae=Z[de])===void 0)return""}else for(he=3;he<se.length;he++)if(re=se[he]){if(re.hasOwnProperty(de)){ae=re[de];break}if(I.test(de)||(ae=i.nestedProperty(re,de).get(),(ae=ce[de]||i.nestedProperty(re,de).get())&&(ce[de]=ae)),ae!==void 0)break}if(ae!==void 0&&(Se==="*"&&(ae*=xe),Se==="/"&&(ae/=xe)),ae===void 0&&oe)return oe.count<oe.max&&(i.warn("Variable '"+de+"' in "+oe.name+" could not be found!"),ae=ye),oe.count===oe.max&&i.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,ye;if(fe){var Ae;if(fe[0]===":"&&(Ae=te?te.numberFormat:i.numberFormat,ae!==""&&(ae=Ae(fe.replace(q,""))(ae))),fe[0]==="|"){Ae=te?te.timeFormat:T;var Pe=i.dateTime2ms(ae);ae=i.formatDate(Pe,fe.replace(q,""),!1,Ae)}}else{var De=de+"Label";Z.hasOwnProperty(De)&&(ae=Z[De])}return Ce&&(ae="("+ae+")",(pe||ge)&&(ae=" "+ae),(ke||ge)&&(ae+=" ")),ae})}i.subplotSort=function(J,Z){for(var te=Math.min(J.length,Z.length)+1,oe=0,se=0,ce=0;ce<te;ce++){var ye=J.charCodeAt(ce)||0,me=Z.charCodeAt(ce)||0,fe=ye>=48&&ye<=57,pe=me>=48&&me<=57;if(fe&&(oe=10*oe+ye-48),pe&&(se=10*se+me-48),!fe||!pe){if(oe!==se)return oe-se;if(ye!==me)return ye-me}}return se-oe};var $=2e9;i.seedPseudoRandom=function(){$=2e9},i.pseudoRandom=function(){var J=$;return $=(69069*$+1)%4294967296,Math.abs($-J)<429496729?i.pseudoRandom():$/4294967296},i.fillText=function(J,Z,te){var oe=Array.isArray(te)?function(ye){te.push(ye)}:function(ye){te.text=ye},se=i.extractOption(J,Z,"htx","hovertext");if(i.isValidTextValue(se))return oe(se);var ce=i.extractOption(J,Z,"tx","text");return i.isValidTextValue(ce)?oe(ce):void 0},i.isValidTextValue=function(J){return J||J===0},i.formatPercent=function(J,Z){Z=Z||0;for(var te=(Math.round(100*J*Math.pow(10,Z))*Math.pow(.1,Z)).toFixed(Z)+"%",oe=0;oe<Z;oe++)te.indexOf(".")!==-1&&(te=(te=te.replace("0%","%")).replace(".%","%"));return te},i.isHidden=function(J){var Z=window.getComputedStyle(J).display;return!Z||Z==="none"},i.strTranslate=function(J,Z){return J||Z?"translate("+J+","+Z+")":""},i.strRotate=function(J){return J?"rotate("+J+")":""},i.strScale=function(J){return J!==1?"scale("+J+")":""},i.getTextTransform=function(J){var Z=J.noCenter,te=J.textX,oe=J.textY,se=J.targetX,ce=J.targetY,ye=J.anchorX||0,me=J.anchorY||0,fe=J.rotate,pe=J.scale;return pe?pe>1&&(pe=1):pe=0,i.strTranslate(se-pe*(te+ye),ce-pe*(oe+me))+i.strScale(pe)+(fe?"rotate("+fe+(Z?"":" "+te+" "+oe)+")":"")},i.setTransormAndDisplay=function(J,Z){J.attr("transform",i.getTextTransform(Z)),J.style("display",Z.scale?null:"none")},i.ensureUniformFontSize=function(J,Z){var te=i.extendFlat({},Z);return te.size=Math.max(Z.size,J._fullLayout.uniformtext.minsize||0),te},i.join2=function(J,Z,te){var oe=J.length;return oe>1?J.slice(0,-1).join(Z)+te+J[oe-1]:J.join(Z)},i.bigFont=function(J){return Math.round(1.2*J)};var K=i.getFirefoxVersion(),ee=K!==null&&K<86;i.getPositionFromD3Event=function(){return ee?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}},63620:function(R){"use strict";R.exports=function(C){return window&&window.process&&window.process.versions?Object.prototype.toString.call(C)==="[object Object]":Object.prototype.toString.call(C)==="[object Object]"&&Object.getPrototypeOf(C).hasOwnProperty("hasOwnProperty")}},37804:function(R,C,e){"use strict";var _=e(22296),T=/^\w*$/;R.exports=function(r,w,b,c){var o,t,i;b=b||"name",c=c||"value";var n={};w&&w.length?(i=_(r,w),t=i.get()):t=r,w=w||"";var a={};if(t)for(o=0;o<t.length;o++)a[t[o][b]]=o;var s=T.test(c),l={set:function(u,p){var f=p===null?4:0;if(!t){if(!i||f===4)return;t=[],i.set(t)}var m=a[u];if(m===void 0){if(f===4)return;f|=3,m=t.length,a[u]=m}else p!==(s?t[m][c]:_(t[m],c).get())&&(f|=2);var h=t[m]=t[m]||{};return h[b]=u,s?h[c]=p:_(h,c).set(p),p!==null&&(f&=-5),n[m]=n[m]|f,l},get:function(u){if(t){var p=a[u];return p===void 0?void 0:s?t[p][c]:_(t[p],c).get()}},rename:function(u,p){var f=a[u];return f===void 0||(n[f]=1|n[f],a[p]=f,delete a[u],t[f][b]=p),l},remove:function(u){var p=a[u];if(p===void 0)return l;var f=t[p];if(Object.keys(f).length>2)return n[p]=2|n[p],l.set(u,null);if(s){for(o=p;o<t.length;o++)n[o]=3|n[o];for(o=p;o<t.length;o++)a[t[o][b]]--;t.splice(p,1),delete a[u]}else _(f,c).set(null),n[p]=6|n[p];return l},constructUpdate:function(){for(var u,p,f={},m=Object.keys(n),h=0;h<m.length;h++)p=m[h],u=w+"["+p+"]",t[p]?(1&n[p]&&(f[u+"."+b]=t[p][b]),2&n[p]&&(f[u+"."+c]=s?4&n[p]?null:t[p][c]:4&n[p]?null:_(t[p],c).get())):f[u]=null;return f}};return l}},98356:function(R,C,e){"use strict";var _=e(24040);R.exports=function(T,r){for(var w=T._context.locale,b=0;b<2;b++){for(var c=T._context.locales,o=0;o<2;o++){var t=(c[w]||{}).dictionary;if(t){var i=t[r];if(i)return i}c=_.localeRegistry}var n=w.split("-")[0];if(n===w)break;w=n}return r}},24248:function(R,C,e){"use strict";var _=e(20556).dfltConfig,T=e(41792),r=R.exports={};r.log=function(){var w;if(_.logging>1){var b=["LOG:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.trace.apply(console,b)}if(_.notifyOnLogging>1){var c=[];for(w=0;w<arguments.length;w++)c.push(arguments[w]);T(c.join("<br>"),"long")}},r.warn=function(){var w;if(_.logging>0){var b=["WARN:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.trace.apply(console,b)}if(_.notifyOnLogging>0){var c=[];for(w=0;w<arguments.length;w++)c.push(arguments[w]);T(c.join("<br>"),"stick")}},r.error=function(){var w;if(_.logging>0){var b=["ERROR:"];for(w=0;w<arguments.length;w++)b.push(arguments[w]);console.error.apply(console,b)}if(_.notifyOnLogging>0){var c=[];for(w=0;w<arguments.length;w++)c.push(arguments[w]);T(c.join("<br>"),"stick")}}},30988:function(R,C,e){"use strict";var _=e(33428);R.exports=function(T,r,w){var b=T.selectAll("g."+w.replace(/\s/g,".")).data(r,function(o){return o[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",w),b.order();var c=T.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(o){o[0][c]=_.select(this)}),b}},52248:function(R,C,e){"use strict";var _=e(36524);C.init2dArray=function(T,r){for(var w=new Array(T),b=0;b<T;b++)w[b]=new Array(r);return w},C.transposeRagged=function(T){var r,w,b=0,c=T.length;for(r=0;r<c;r++)b=Math.max(b,T[r].length);var o=new Array(b);for(r=0;r<b;r++)for(o[r]=new Array(c),w=0;w<c;w++)o[r][w]=T[w][r];return o},C.dot=function(T,r){if(!T.length||!r.length||T.length!==r.length)return null;var w,b,c=T.length;if(T[0].length)for(w=new Array(c),b=0;b<c;b++)w[b]=C.dot(T[b],r);else if(r[0].length){var o=C.transposeRagged(r);for(w=new Array(o.length),b=0;b<o.length;b++)w[b]=C.dot(T,o[b])}else for(w=0,b=0;b<c;b++)w+=T[b]*r[b];return w},C.translationMatrix=function(T,r){return[[1,0,T],[0,1,r],[0,0,1]]},C.rotationMatrix=function(T){var r=T*Math.PI/180;return[[Math.cos(r),-Math.sin(r),0],[Math.sin(r),Math.cos(r),0],[0,0,1]]},C.rotationXYMatrix=function(T,r,w){return C.dot(C.dot(C.translationMatrix(r,w),C.rotationMatrix(T)),C.translationMatrix(-r,-w))},C.apply3DTransform=function(T){return function(){var r=arguments,w=arguments.length===1?r[0]:[r[0],r[1],r[2]||0];return C.dot(T,[w[0],w[1],w[2],1]).slice(0,3)}},C.apply2DTransform=function(T){return function(){var r=arguments;r.length===3&&(r=r[0]);var w=arguments.length===1?r[0]:[r[0],r[1]];return C.dot(T,[w[0],w[1],1]).slice(0,2)}},C.apply2DTransform2=function(T){var r=C.apply2DTransform(T);return function(w){return r(w.slice(0,2)).concat(r(w.slice(2,4)))}},C.convertCssMatrix=function(T){if(T){var r=T.length;if(r===16)return T;if(r===6)return[T[0],T[1],0,0,T[2],T[3],0,0,0,0,1,0,T[4],T[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},C.inverseTransformMatrix=function(T){var r=[];return _.invert(r,T),[[r[0],r[1],r[2],r[3]],[r[4],r[5],r[6],r[7]],[r[8],r[9],r[10],r[11]],[r[12],r[13],r[14],r[15]]]}},20435:function(R){"use strict";R.exports={mod:function(C,e){var _=C%e;return _<0?_+e:_},modHalf:function(C,e){return Math.abs(C)>e/2?C-Math.round(C/e)*e:C}}},22296:function(R,C,e){"use strict";var _=e(38248),T=e(38116).isArrayOrTypedArray;function r(n,a){return function(){var s,l,u,p,f,m=n;for(p=0;p<a.length-1;p++){if((s=a[p])===-1){for(l=!0,u=[],f=0;f<m.length;f++)u[f]=r(m[f],a.slice(p+1))(),u[f]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof s=="number"&&!T(m)||typeof(m=m[s])!="object"||m===null)return}if(typeof m=="object"&&m!==null&&(u=m[a[p]])!==null)return u}}R.exports=function(n,a){if(_(a))a=String(a);else if(typeof a!="string"||a.substr(a.length-4)==="[-1]")throw"bad property string";var s,l,u,p,f=a.split(".");for(p=0;p<f.length;p++)if(String(f[p]).slice(0,2)==="__")throw"bad property string";for(p=0;p<f.length;){if(s=String(f[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])f[p]=s[1];else{if(p!==0)throw"bad property string";f.splice(0,1)}for(l=s[2].substr(1,s[2].length-2).split("]["),u=0;u<l.length;u++)p++,f.splice(p,0,Number(l[u]))}p++}return typeof n!="object"?function(m,h,g){return{set:function(){throw"bad container"},get:function(){},astr:h,parts:g,obj:m}}(n,a,f):{set:c(n,f,a),get:r(n,f),astr:a,parts:f,obj:n}};var w=/(^|\.)args\[/;function b(n,a){return n===void 0||n===null&&!a.match(w)}function c(n,a,s){return function(l){var u,p,f=n,m="",h=[[n,m]],g=b(l,s);for(p=0;p<a.length-1;p++){if(typeof(u=a[p])=="number"&&!T(f))throw"array index but container is not an array";if(u===-1){if(g=!t(f,a.slice(p+1),l,s))break;return}if(!i(f,u,a[p+1],g))break;if(typeof(f=f[u])!="object"||f===null)throw"container is not an object";m=o(m,u),h.push([f,m])}if(g){if(p===a.length-1&&(delete f[a[p]],Array.isArray(f)&&+a[p]==f.length-1))for(;f.length&&f[f.length-1]===void 0;)f.pop()}else f[a[p]]=l}}function o(n,a){var s=a;return _(a)?s="["+a+"]":n&&(s="."+a),n+s}function t(n,a,s,l){var u,p=T(s),f=!0,m=s,h=l.replace("-1",0),g=!p&&b(s,h),v=a[0];for(u=0;u<n.length;u++)h=l.replace("-1",u),p&&(g=b(m=s[u%s.length],h)),g&&(f=!1),i(n,u,v,g)&&c(n[u],a,l.replace("-1",u))(m);return f}function i(n,a,s,l){if(n[a]===void 0){if(l)return!1;n[a]=typeof s=="number"?[]:{}}return!0}},16628:function(R){"use strict";R.exports=function(){}},41792:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=[];R.exports=function(w,b){if(r.indexOf(w)===-1){r.push(w);var c=1e3;T(b)?c=b:b==="long"&&(c=3e3);var o=_.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(r).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var n=_.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var a=n.append("p"),s=i.split(/<br\s*\/?>/g),l=0;l<s.length;l++)l&&a.append("br"),a.append("span").text(s[l]);b==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(c).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(n){var a=r.indexOf(n);a!==-1&&r.splice(a,1),_.select(this).remove()})}}},72213:function(R,C,e){"use strict";var _=e(93972),T="data-savedcursor";R.exports=function(r,w){var b=r.attr(T);if(w){if(!b){for(var c=(r.attr("class")||"").split(" "),o=0;o<c.length;o++){var t=c[o];t.indexOf("cursor-")===0&&r.attr(T,t.substr(7)).classed(t,!1)}r.attr(T)||r.attr(T,"!!")}_(r,w)}else b&&(r.attr(T,null),b==="!!"?_(r):_(r,b))}},92065:function(R,C,e){"use strict";var _=e(52248).dot,T=e(39032).BADNUM,r=R.exports={};r.tester=function(w){var b,c=w.slice(),o=c[0][0],t=o,i=c[0][1],n=i;for(c[c.length-1][0]===c[0][0]&&c[c.length-1][1]===c[0][1]||c.push(c[0]),b=1;b<c.length;b++)o=Math.min(o,c[b][0]),t=Math.max(t,c[b][0]),i=Math.min(i,c[b][1]),n=Math.max(n,c[b][1]);var a,s=!1;c.length===5&&(c[0][0]===c[1][0]?c[2][0]===c[3][0]&&c[0][1]===c[3][1]&&c[1][1]===c[2][1]&&(s=!0,a=function(p){return p[0]===c[0][0]}):c[0][1]===c[1][1]&&c[2][1]===c[3][1]&&c[0][0]===c[3][0]&&c[1][0]===c[2][0]&&(s=!0,a=function(p){return p[1]===c[0][1]}));var l=!0,u=c[0];for(b=1;b<c.length;b++)if(u[0]!==c[b][0]||u[1]!==c[b][1]){l=!1;break}return{xmin:o,xmax:t,ymin:i,ymax:n,pts:c,contains:s?function(p,f){var m=p[0],h=p[1];return!(m===T||m<o||m>t||h===T||h<i||h>n||f&&a(p))}:function(p,f){var m=p[0],h=p[1];if(m===T||m<o||m>t||h===T||h<i||h>n)return!1;var g,v,x,y,A,d=c.length,S=c[0][0],k=c[0][1],E=0;for(g=1;g<d;g++)if(v=S,x=k,S=c[g][0],k=c[g][1],!(m<(y=Math.min(v,S))||m>Math.max(v,S)||h>Math.max(x,k)))if(h<Math.min(x,k))m!==y&&E++;else{if(h===(A=S===v?h:x+(m-v)*(k-x)/(S-v)))return g!==1||!f;h<=A&&m!==y&&E++}return E%2==1},isRect:s,degenerate:l}},r.isSegmentBent=function(w,b,c,o){var t,i,n,a=w[b],s=[w[c][0]-a[0],w[c][1]-a[1]],l=_(s,s),u=Math.sqrt(l),p=[-s[1]/u,s[0]/u];for(t=b+1;t<c;t++)if(i=[w[t][0]-a[0],w[t][1]-a[1]],(n=_(i,s))<0||n>l||Math.abs(_(i,p))>o)return!0;return!1},r.filter=function(w,b){var c=[w[0]],o=0,t=0;function i(n){w.push(n);var a=c.length,s=o;c.splice(t+1);for(var l=s+1;l<w.length;l++)(l===w.length-1||r.isSegmentBent(w,s,l+1,b))&&(c.push(w[l]),c.length<a-2&&(o=l,t=c.length-1),s=l)}return w.length>1&&i(w.pop()),{addPt:i,raw:w,filtered:c}}},5048:function(R,C,e){"use strict";var _=e(16576),T=e(28624);R.exports=function(r,w,b){var c=r._fullLayout,o=!0;return c._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||c._has("parcoords")){try{t.regl=T({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:r._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:w||[],cachedCode:b||{}})}catch{o=!1}t.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(i){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),o||_({container:c._glcontainer.node()}),o}},34296:function(R,C,e){"use strict";var _=e(38248),T=e(25928);R.exports=function(r){var w;if(typeof(w=r&&r.hasOwnProperty("userAgent")?r.userAgent:function(){var a;return typeof navigator<"u"&&(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),a}())!="string")return!0;var b=T({ua:{headers:{"user-agent":w}},tablet:!0,featureDetect:!1});if(!b){for(var c=w.split(" "),o=1;o<c.length;o++)if(c[o].indexOf("Safari")!==-1)for(var t=o-1;t>-1;t--){var i=c[t];if(i.substr(0,8)==="Version/"){var n=i.substr(8).split(".")[0];if(_(n)&&(n=+n),n>=13)return!0}}}return b}},52416:function(R){"use strict";R.exports=function(C,e){if(e instanceof RegExp){for(var _=e.toString(),T=0;T<C.length;T++)if(C[T]instanceof RegExp&&C[T].toString()===_)return C;C.push(e)}else!e&&e!==0||C.indexOf(e)!==-1||C.push(e);return C}},94552:function(R,C,e){"use strict";var _=e(3400),T=e(20556).dfltConfig,r={add:function(w,b,c,o,t){var i,n;w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},n=w.undoQueue.index,w.autoplay?w.undoQueue.inSequence||(w.autoplay=!1):(!w.undoQueue.sequence||w.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},w.undoQueue.queue.splice(n,w.undoQueue.queue.length-n,i),w.undoQueue.index+=1):i=w.undoQueue.queue[n-1],w.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(c),i.redo.calls.push(o),i.redo.args.push(t)),w.undoQueue.queue.length>T.queueLength&&(w.undoQueue.queue.shift(),w.undoQueue.index--))},startSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!0,w.undoQueue.beginSequence=!0},stopSequence:function(w){w.undoQueue=w.undoQueue||{index:0,queue:[],sequence:!1},w.undoQueue.sequence=!1,w.undoQueue.beginSequence=!1},undo:function(w){var b,c;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index<=0)){for(w.undoQueue.index--,b=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,c=0;c<b.undo.calls.length;c++)r.plotDo(w,b.undo.calls[c],b.undo.args[c]);w.undoQueue.inSequence=!1,w.autoplay=!1}},redo:function(w){var b,c;if(!(w.undoQueue===void 0||isNaN(w.undoQueue.index)||w.undoQueue.index>=w.undoQueue.queue.length)){for(b=w.undoQueue.queue[w.undoQueue.index],w.undoQueue.inSequence=!0,c=0;c<b.redo.calls.length;c++)r.plotDo(w,b.redo.calls[c],b.redo.args[c]);w.undoQueue.inSequence=!1,w.autoplay=!1,w.undoQueue.index++}},plotDo:function(w,b,c){w.autoplay=!0,c=function(o,t){for(var i,n=[],a=0;a<t.length;a++)i=t[a],n[a]=i===o?i:typeof i=="object"?Array.isArray(i)?_.extendDeep([],i):_.extendDeepAll({},i):i;return n}(w,c),b.apply(null,c)}};R.exports=r},53756:function(R,C){"use strict";C.counter=function(e,_,T,r){var w=(_||"")+(T?"":"$"),b=r===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+w):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+w)}},23193:function(R){"use strict";var C=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;R.exports=function(_,T){for(;T;){var r=_.match(C);if(r)_=r[1];else{if(!_.match(e))throw new Error("bad relativeAttr call:"+[_,T]);_=""}if(T.charAt(0)!=="^")break;T=T.slice(1)}return _&&T.charAt(0)!=="["?_+"."+T:_+T}},51528:function(R,C,e){"use strict";var _=e(38116).isArrayOrTypedArray,T=e(63620);R.exports=function r(w,b){for(var c in b){var o=b[c],t=w[c];if(t!==o)if(c.charAt(0)==="_"||typeof o=="function"){if(c in w)continue;w[c]=o}else if(_(o)&&_(t)&&T(o[0])){if(c==="customdata"||c==="ids")continue;for(var i=Math.min(o.length,t.length),n=0;n<i;n++)t[n]!==o[n]&&T(o[n])&&T(t[n])&&r(t[n],o[n])}else T(o)&&T(t)&&(r(t,o),Object.keys(t).length||delete w[c])}}},14952:function(R,C,e){"use strict";var _=e(38248),T=e(24248),r=e(35536),w=e(39032).BADNUM,b=1e-9;function c(n,a){return n<a}function o(n,a){return n<=a}function t(n,a){return n>a}function i(n,a){return n>=a}C.findBin=function(n,a,s){if(_(a.start))return s?Math.ceil((n-a.start)/a.size-b)-1:Math.floor((n-a.start)/a.size+b);var l,u,p=0,f=a.length,m=0,h=f>1?(a[f-1]-a[0])/(f-1):1;for(u=h>=0?s?c:o:s?i:t,n+=h*b*(s?-1:1)*(h>=0?1:-1);p<f&&m++<100;)u(a[l=Math.floor((p+f)/2)],n)?p=l+1:f=l;return m>90&&T.log("Long binary search..."),p-1},C.sorterAsc=function(n,a){return n-a},C.sorterDes=function(n,a){return a-n},C.distinctVals=function(n){var a,s=n.slice();for(s.sort(C.sorterAsc),a=s.length-1;a>-1&&s[a]===w;a--);for(var l,u=s[a]-s[0]||1,p=u/(a||1)/1e4,f=[],m=0;m<=a;m++){var h=s[m],g=h-l;l===void 0?(f.push(h),l=h):g>p&&(u=Math.min(u,g),f.push(h),l=h)}return{vals:f,minDiff:u}},C.roundUp=function(n,a,s){for(var l,u=0,p=a.length-1,f=0,m=s?0:1,h=s?1:0,g=s?Math.ceil:Math.floor;u<p&&f++<100;)a[l=g((u+p)/2)]<=n?u=l+m:p=l-h;return a[u]},C.sort=function(n,a){for(var s=0,l=0,u=1;u<n.length;u++){var p=a(n[u],n[u-1]);if(p<0?s=1:p>0&&(l=1),s&&l)return n.sort(a)}return l?n:n.reverse()},C.findIndexOfMin=function(n,a){a=a||r;for(var s,l=1/0,u=0;u<n.length;u++){var p=a(n[u]);p<l&&(l=p,s=u)}return s}},93972:function(R){"use strict";R.exports=function(C,e){(C.attr("class")||"").split(" ").forEach(function(_){_.indexOf("cursor-")===0&&C.classed(_,!1)}),e&&C.classed("cursor-"+e,!0)}},16576:function(R,C,e){"use strict";var _=e(76308),T=function(){};R.exports=function(r){for(var w in r)typeof r[w]=="function"&&(r[w]=T);r.destroy=function(){r.container.parentNode.removeChild(r.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=_.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=_.lightLine,b.style["z-index"]=30;var c=document.createElement("p");return c.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",c.style.position="relative",c.style.top="50%",c.style.left="50%",c.style.height="30%",c.style.width="50%",c.style.margin="-15% 0 0 -25%",b.appendChild(c),r.container.appendChild(b),r.container.style.background="#FFFFFF",r.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(R){"use strict";R.exports=function(C){return Object.keys(C).sort()}},63084:function(R,C,e){"use strict";var _=e(38248),T=e(38116).isArrayOrTypedArray;C.aggNums=function(r,w,b,c){var o,t;if((!c||c>b.length)&&(c=b.length),_(w)||(w=!1),T(b[0])){for(t=new Array(c),o=0;o<c;o++)t[o]=C.aggNums(r,w,b[o]);b=t}for(o=0;o<c;o++)_(w)?_(b[o])&&(w=r(+w,+b[o])):w=b[o];return w},C.len=function(r){return C.aggNums(function(w){return w+1},0,r)},C.mean=function(r,w){return w||(w=C.len(r)),C.aggNums(function(b,c){return b+c},0,r)/w},C.geometricMean=function(r,w){return w||(w=C.len(r)),Math.pow(C.aggNums(function(b,c){return b*c},1,r),1/w)},C.midRange=function(r){if(r!==void 0&&r.length!==0)return(C.aggNums(Math.max,null,r)+C.aggNums(Math.min,null,r))/2},C.variance=function(r,w,b){return w||(w=C.len(r)),_(b)||(b=C.mean(r,w)),C.aggNums(function(c,o){return c+Math.pow(o-b,2)},0,r)/w},C.stdev=function(r,w,b){return Math.sqrt(C.variance(r,w,b))},C.median=function(r){var w=r.slice().sort();return C.interp(w,.5)},C.interp=function(r,w){if(!_(w))throw"n should be a finite number";if((w=w*r.length-.5)<0)return r[0];if(w>r.length-1)return r[r.length-1];var b=w%1;return b*r[Math.ceil(w)]+(1-b)*r[Math.floor(w)]}},43080:function(R,C,e){"use strict";var _=e(72160);R.exports=function(T){return T?_(T):[0,0,0,1]}},9188:function(R,C,e){"use strict";var _=e(2264),T=e(43616),r=e(3400),w=null;R.exports=function(){if(w!==null)return w;w=!1;var b=r.isIE()||r.isSafari()||r.isIOS();if(window.navigator.userAgent&&!b){var c=Array.from(_.CSS_DECLARATIONS).reverse(),o=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof o=="function")w=c.some(function(n){return o.apply(null,n)});else{var t=T.tester.append("image").attr("style",_.STYLE),i=window.getComputedStyle(t.node()).imageRendering;w=c.some(function(n){var a=n[1];return i===a||i===a.toLowerCase()}),t.remove()}}return w}},72736:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.strTranslate,w=e(9616),b=e(84284).LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;C.convertToTspans=function(F,U,I){var N=F.text(),W=!F.attr("data-notex")&&U&&U._context.typesetMath&&typeof MathJax<"u"&&N.match(c),B=_.select(F.node().parentNode);if(!B.empty()){var V=F.attr("class")?F.attr("class").split(" ")[0]:"text";return V+="-math",B.selectAll("svg."+V).remove(),B.selectAll("g."+V+"-group").remove(),F.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(U&&U._promises||[]).push(new Promise(function(ne){F.style("display","none");var $=parseInt(F.node().style.fontSize,10),K={fontSize:$};(function(ee,J,Z){var te,oe,se,ce,ye=parseInt((MathJax.version||"").split(".")[0]);if(ye===2||ye===3){var me=function(){var pe="math-output-"+T.randstr({},64),ge=(ce=_.select("body").append("div").attr({id:pe}).style({visibility:"hidden",position:"absolute","font-size":J.fontSize+"px"}).text(ee.replace(o,"\\lt ").replace(t,"\\gt "))).node();return ye===2?MathJax.Hub.Typeset(ge):MathJax.typeset([ge])},fe=function(){var pe=ce.select(ye===2?".MathJax_SVG":".MathJax"),ge=!pe.empty()&&ce.select("svg").node();if(ge){var ke,Ce=ge.getBoundingClientRect();ke=ye===2?_.select("body").select("#MathJax_SVG_glyphs"):pe.select("defs"),Z(pe,ke,Ce)}else T.log("There was an error in the tex syntax.",ee),Z();ce.remove()};ye===2?MathJax.Hub.Queue(function(){return oe=T.extendDeepAll({},MathJax.Hub.config),se=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((te=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},me,fe,function(){if(te!=="SVG")return MathJax.Hub.setRenderer(te)},function(){return se!==void 0&&(MathJax.Hub.processSectionDelay=se),MathJax.Hub.Config(oe)}):ye===3&&(oe=T.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(te=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){me(),fe(),te!=="svg"&&(MathJax.config.startup.output=te),MathJax.config=oe}))}else T.warn("No MathJax version:",MathJax.version)})(W[2],K,function(ee,J,Z){B.selectAll("svg."+V).remove(),B.selectAll("g."+V+"-group").remove();var te=ee&&ee.select("svg");if(!te||!te.node())return q(),void ne();var oe=B.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});oe.node().appendChild(te.node()),J&&J.node()&&te.node().insertBefore(J.node().cloneNode(!0),te.node().firstChild);var se=Z.width,ce=Z.height;te.attr({class:V,height:ce,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ye=F.node().style.fill||"black",me=te.select("g");me.attr({fill:ye,stroke:ye});var fe=me.node().getBoundingClientRect(),pe=fe.width,ge=fe.height;(pe>se||ge>ce)&&(te.style("overflow","hidden"),pe=(fe=te.node().getBoundingClientRect()).width,ge=fe.height);var ke=+F.attr("x"),Ce=+F.attr("y"),de=-($||F.node().getBoundingClientRect().height)/4;if(V[0]==="y")oe.attr({transform:"rotate("+[-90,ke,Ce]+")"+r(-pe/2,de-ge/2)});else if(V[0]==="l")Ce=de-ge/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)ke=0,Ce=de;else{var ae=F.attr("text-anchor");ke-=pe*(ae==="middle"?.5:ae==="end"?1:0),Ce=Ce+de-ge/2}te.attr({x:ke,y:Ce}),I&&I.call(F,oe),ne(oe)})})):q(),F}function q(){B.empty()||(V=F.attr("class")+"-math",B.select("svg."+V).remove()),F.text("").style("white-space","pre");var ne=function($,K){K=K.replace(p," ");var ee,J=!1,Z=[],te=-1;function oe(){te++;var xe=document.createElementNS(w.svg,"tspan");_.select(xe).attr({class:"line",dy:te*b+"em"}),$.appendChild(xe),ee=xe;var Te=Z;if(Z=[{node:xe}],Te.length>1)for(var Ae=1;Ae<Te.length;Ae++)se(Te[Ae])}function se(xe){var Te,Ae=xe.type,Pe={};if(Ae==="a"){Te="a";var De=xe.target,ve=xe.href,we=xe.popup;ve&&(Pe={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":ve},we&&(Pe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+we+'");return false;'))}else Te="tspan";xe.style&&(Pe.style=xe.style);var Ee=document.createElementNS(w.svg,Te);if(Ae==="sup"||Ae==="sub"){ce(ee,l),ee.appendChild(Ee);var Fe=document.createElementNS(w.svg,"tspan");ce(Fe,l),_.select(Fe).attr("dy",s[Ae]),Pe.dy=a[Ae],ee.appendChild(Ee),ee.appendChild(Fe)}else ee.appendChild(Ee);_.select(Ee).attr(Pe),ee=xe.node=Ee,Z.push(xe)}function ce(xe,Te){xe.appendChild(document.createTextNode(Te))}function ye(xe){if(Z.length!==1){var Te=Z.pop();xe!==Te.type&&T.log("Start tag <"+Te.type+"> doesnt match end tag <"+xe+">. Pretending it did match.",K),ee=Z[Z.length-1].node}else T.log("Ignoring unexpected end tag </"+xe+">.",K)}h.test(K)?oe():(ee=$,Z=[{node:$}]);for(var me=K.split(f),fe=0;fe<me.length;fe++){var pe=me[fe],ge=pe.match(m),ke=ge&&ge[2].toLowerCase(),Ce=n[ke];if(ke==="br")oe();else if(Ce===void 0)ce(ee,E(pe));else if(ge[1])ye(ke);else{var de=ge[4],ae={type:ke},re=A(de,g);if(re?(re=re.replace(d,"$1 fill:"),Ce&&(re+=";"+Ce)):Ce&&(re=Ce),re&&(ae.style=re),ke==="a"){J=!0;var he=A(de,v);if(he){var Se=L(he);Se&&(ae.href=Se,ae.target=A(de,x)||"_blank",ae.popup=A(de,y))}}se(ae)}}return J}(F.node(),N);ne&&F.style("pointer-events","all"),C.positionText(F),I&&I.call(F)}};var o=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},a={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},l="\u200B",u=["http:","https:","mailto:","",void 0,":"],p=C.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,m=/<(\/?)([^ >]*)(\s+(.*))?>/i,h=/<br(\s+.*)?>/i;C.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,v=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function A(F,U){if(!F)return null;var I=F.match(U),N=I&&(I[3]||I[4]);return N&&E(N)}var d=/(^|;)\s*color:/;C.plainText=function(F,U){for(var I=(U=U||{}).len!==void 0&&U.len!==-1?U.len:1/0,N=U.allowedTags!==void 0?U.allowedTags:["br"],W=F.split(f),B=[],V="",q=0,ne=0;ne<W.length;ne++){var $=W[ne],K=$.match(m),ee=K&&K[2].toLowerCase();if(ee)N.indexOf(ee)!==-1&&(B.push($),V=ee);else{var J=$.length;if(q+J<I)B.push($),q+=J;else if(q<I){var Z=I-q;V&&(V!=="br"||Z<=3||J<=3)&&B.pop(),I>3?B.push($.substr(0,Z-3)+"..."):B.push($.substr(0,Z));break}V=""}}return B.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(F){return F.replace(k,function(U,I){return(I.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var B=String.fromCharCode;return N<=65535?B(N):B(55232+(N>>10),N%1024+56320)}}(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):S[I])||U})}function L(F){var U=encodeURI(decodeURI(F)),I=document.createElement("a"),N=document.createElement("a");I.href=F,N.href=U;var W=I.protocol,B=N.protocol;return u.indexOf(W)!==-1&&u.indexOf(B)!==-1?U:""}function O(F,U,I){var N,W,B,V=I.horizontalAlign,q=I.verticalAlign||"top",ne=F.node().getBoundingClientRect(),$=U.node().getBoundingClientRect();return W=q==="bottom"?function(){return ne.bottom-N.height}:q==="middle"?function(){return ne.top+(ne.height-N.height)/2}:function(){return ne.top},B=V==="right"?function(){return ne.right-N.width}:V==="center"?function(){return ne.left+(ne.width-N.width)/2}:function(){return ne.left},function(){N=this.node().getBoundingClientRect();var K=B()-$.left,ee=W()-$.top,J=I.gd||{};if(I.gd){J._fullLayout._calcInverseTransform(J);var Z=T.apply3DTransform(J._fullLayout._invTransform)(K,ee);K=Z[0],ee=Z[1]}return this.style({top:ee+"px",left:K+"px","z-index":1e3}),this}}C.convertEntities=E,C.sanitizeHTML=function(F){F=F.replace(p," ");for(var U=document.createElement("p"),I=U,N=[],W=F.split(f),B=0;B<W.length;B++){var V=W[B],q=V.match(m),ne=q&&q[2].toLowerCase();if(ne in n)if(q[1])N.length&&(I=N.pop());else{var $=q[4],K=A($,g),ee=K?{style:K}:{};if(ne==="a"){var J=A($,v);if(J){var Z=L(J);if(Z){ee.href=Z;var te=A($,x);te&&(ee.target=te)}}}var oe=document.createElement(ne);I.appendChild(oe),_.select(oe).attr(ee),I=oe,N.push(oe)}else I.appendChild(document.createTextNode(E(V)))}return U.innerHTML},C.lineCount=function(F){return F.selectAll("tspan.line").size()||1},C.positionText=function(F,U,I){return F.each(function(){var N=_.select(this);function W(q,ne){return ne===void 0?(ne=N.attr(q))===null&&(N.attr(q,0),ne=0):N.attr(q,ne),ne}var B=W("x",U),V=W("y",I);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:B,y:V})})};var P="1px ";C.makeTextShadow=function(F){return P+P+P+F+", -"+P+"-"+P+P+F+", "+P+"-"+P+P+F+", -"+P+P+P+F},C.makeEditable=function(F,U){var I=U.gd,N=U.delegate,W=_.dispatch("edit","input","cancel"),B=N||F;if(F.style({"pointer-events":N?"none":"all"}),F.size()!==1)throw new Error("boo");function V(){var ne,$,K,ee,J;ne=_.select(I).select(".svg-container"),$=ne.append("div"),K=F.node().style,ee=parseFloat(K.fontSize||12),(J=U.text)===void 0&&(J=F.attr("data-unformatted")),$.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":ee,color:U.fill||K.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ee/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(J).call(O(F,ne,U)).on("blur",function(){I._editing=!1,F.text(this.textContent).style({opacity:1});var oe,se=_.select(this).attr("class");(oe=se?"."+se.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(F.node().parentNode).select(oe).style({opacity:0});var ce=this.textContent;_.select(this).transition().duration(0).remove(),_.select(document).on("mouseup",null),W.edit.call(F,ce)}).on("focus",function(){var oe=this;I._editing=!0,_.select(document).on("mouseup",function(){if(_.event.target===oe)return!1;document.activeElement===$.node()&&$.node().blur()})}).on("keyup",function(){_.event.which===27?(I._editing=!1,F.style({opacity:1}),_.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(F,this.textContent)):(W.input.call(F,this.textContent),_.select(this).call(O(F,ne,U)))}).on("keydown",function(){_.event.which===13&&this.blur()}).call(q),F.style({opacity:0});var Z,te=B.attr("class");(Z=te?"."+te.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(F.node().parentNode).select(Z).style({opacity:0})}function q(ne){var $=ne.node(),K=document.createRange();K.selectNodeContents($);var ee=window.getSelection();ee.removeAllRanges(),ee.addRange(K),$.focus()}return U.immediate?V():B.on("click",V),_.rebind(F,W,"on")}},91200:function(R,C){"use strict";var e={};function _(T){T&&T.timer!==null&&(clearTimeout(T.timer),T.timer=null)}C.throttle=function(T,r,w){var b=e[T],c=Date.now();if(!b){for(var o in e)e[o].ts<c-6e4&&delete e[o];b=e[T]={ts:0,timer:null}}function t(){w(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}_(b),c>b.ts+r?t():b.timer=setTimeout(function(){t(),b.timer=null},r)},C.done=function(T){var r=e[T];return r&&r.timer?new Promise(function(w){var b=r.onDone;r.onDone=function(){b&&b(),w(),r.onDone=null}}):Promise.resolve()},C.clear=function(T){if(T)_(e[T]),delete e[T];else for(var r in e)C.clear(r)}},36896:function(R,C,e){"use strict";var _=e(38248);R.exports=function(T,r){if(T>0)return Math.log(T)/Math.LN10;var w=Math.log(Math.min(r[0],r[1]))/Math.LN10;return _(w)||(w=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),w}},59972:function(R,C,e){"use strict";var _=R.exports={},T=e(79552).locationmodeToLayer,r=e(55712).NO;_.getTopojsonName=function(w){return[w.scope.replace(/ /g,"-"),"_",w.resolution.toString(),"m"].join("")},_.getTopojsonPath=function(w,b){return w+b+".json"},_.getTopojsonFeatures=function(w,b){var c=T[w.locationmode],o=b.objects[c];return r(b,o).features}},11680:function(R){"use strict";R.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(R){"use strict";R.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(R,C,e){"use strict";var _=e(24040);R.exports=function(T){for(var r,w,b=_.layoutArrayContainers,c=_.layoutArrayRegexes,o=T.split("[")[0],t=0;t<c.length;t++)if((w=T.match(c[t]))&&w.index===0){r=w[0];break}if(r||(r=b[b.indexOf(o)]),!r)return!1;var i=T.substr(r.length);return i?!!(w=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:r,index:Number(w[1]),property:w[3]||""}:{array:r,index:"",property:""}}},67824:function(R,C,e){"use strict";var _=e(92880).extendFlat,T=e(63620),r={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},w={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=r.flags.slice().concat(["fullReplot"]),c=w.flags.slice().concat("layoutReplot");function o(n){for(var a={},s=0;s<n.length;s++)a[n[s]]=!1;return a}function t(n,a,s){var l=_({},n);for(var u in l){var p=l[u];T(p)&&(l[u]=i(p,a,0,u))}return s==="from-root"&&(l.editType=a),l}function i(n,a,s,l){if(n.valType){var u=_({},n);if(u.editType=a,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var p=0;p<n.items.length;p++)u.items[p]=i(n.items[p],a)}return u}return t(n,a,l.charAt(0)==="_"?"nested":"from-root")}R.exports={traces:r,layout:w,traceFlags:function(){return o(b)},layoutFlags:function(){return o(c)},update:function(n,a){var s=a.editType;if(s&&s!=="none")for(var l=s.split("+"),u=0;u<l.length;u++)n[l[u]]=!0},overrideAll:t}},93404:function(R,C,e){"use strict";var _=e(38248),T=e(61784),r=e(24040),w=e(3400),b=e(7316),c=e(79811),o=e(76308),t=c.cleanId,i=c.getFromTrace,n=r.traceIs;function a(v,x){var y=v[x],A=x.charAt(0);y&&y!=="paper"&&(v[x]=t(y,A,!0))}function s(v){function x(y,A){var d=v[y],S=v.title&&v.title[A];d&&!S&&(v.title||(v.title={}),v.title[A]=v[y],delete v[y])}v&&(typeof v.title!="string"&&typeof v.title!="number"||(v.title={text:v.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function l(v){if(!w.isPlainObject(v))return!1;var x=v.name;return delete v.name,delete v.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function u(v,x,y,A){if(y&&!A)return v;if(A&&!y||!v.trim())return x;if(!x.trim())return v;var d,S=Math.min(v.length,x.length);for(d=0;d<S&&v.charAt(d)===x.charAt(d);d++);return v.substr(0,d).trim()}function p(v){var x="middle",y="center";return typeof v=="string"&&(v.indexOf("top")!==-1?x="top":v.indexOf("bottom")!==-1&&(x="bottom"),v.indexOf("left")!==-1?y="left":v.indexOf("right")!==-1&&(y="right")),x+" "+y}function f(v,x){return x in v&&typeof v[x]=="object"&&Object.keys(v[x]).length===0}C.clearPromiseQueue=function(v){Array.isArray(v._promises)&&v._promises.length>0&&w.log("Clearing previous rejected promises from queue."),v._promises=[]},C.cleanLayout=function(v){var x,y;v||(v={}),v.xaxis1&&(v.xaxis||(v.xaxis=v.xaxis1),delete v.xaxis1),v.yaxis1&&(v.yaxis||(v.yaxis=v.yaxis1),delete v.yaxis1),v.scene1&&(v.scene||(v.scene=v.scene1),delete v.scene1);var A=(b.subplotsRegistry.cartesian||{}).attrRegex,d=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,k=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(v);for(x=0;x<E.length;x++){var L=E[x];if(A&&A.test(L)){var O=v[L];O.anchor&&O.anchor!=="free"&&(O.anchor=t(O.anchor)),O.overlaying&&(O.overlaying=t(O.overlaying)),O.type||(O.isdate?O.type="date":O.islog?O.type="log":O.isdate===!1&&O.islog===!1&&(O.type="linear")),O.autorange!=="withzero"&&O.autorange!=="tozero"||(O.autorange=!0,O.rangemode="tozero"),O.insiderange&&delete O.range,delete O.islog,delete O.isdate,delete O.categories,f(O,"domain")&&delete O.domain,O.autotick!==void 0&&(O.tickmode===void 0&&(O.tickmode=O.autotick?"auto":"linear"),delete O.autotick),s(O)}else if(d&&d.test(L))s(v[L].radialaxis);else if(S&&S.test(L)){var P=v[L];s(P.aaxis),s(P.baxis),s(P.caxis)}else if(k&&k.test(L)){var F=v[L],U=F.cameraposition;if(Array.isArray(U)&&U[0].length===4){var I=U[0],N=U[1],W=U[2],B=T([],I),V=[];for(y=0;y<3;++y)V[y]=N[y]+W*B[2+4*y];F.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete F.cameraposition}s(F.xaxis),s(F.yaxis),s(F.zaxis)}}var q=Array.isArray(v.annotations)?v.annotations.length:0;for(x=0;x<q;x++){var ne=v.annotations[x];w.isPlainObject(ne)&&(ne.ref&&(ne.ref==="paper"?(ne.xref="paper",ne.yref="paper"):ne.ref==="data"&&(ne.xref="x",ne.yref="y"),delete ne.ref),a(ne,"xref"),a(ne,"yref"))}var $=Array.isArray(v.shapes)?v.shapes.length:0;for(x=0;x<$;x++){var K=v.shapes[x];w.isPlainObject(K)&&(a(K,"xref"),a(K,"yref"))}var ee=Array.isArray(v.images)?v.images.length:0;for(x=0;x<ee;x++){var J=v.images[x];w.isPlainObject(J)&&(a(J,"xref"),a(J,"yref"))}var Z=v.legend;return Z&&(Z.x>3?(Z.x=1.02,Z.xanchor="left"):Z.x<-2&&(Z.x=-.02,Z.xanchor="right"),Z.y>3?(Z.y=1.02,Z.yanchor="bottom"):Z.y<-2&&(Z.y=-.02,Z.yanchor="top")),s(v),v.dragmode==="rotate"&&(v.dragmode="orbit"),o.clean(v),v.template&&v.template.layout&&C.cleanLayout(v.template.layout),v},C.cleanData=function(v){for(var x=0;x<v.length;x++){var y,A=v[x];if(A.type==="histogramy"&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var d=o.defaults,S=A.error_y.color||(n(A,"bar")?o.defaultLine:d[x%d.length]);A.error_y.color=o.addOpacity(o.rgb(S),o.opacity(S)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&(A.bardir!=="h"||!n(A,"bar")&&A.type.substr(0,9)!=="histogram"||(A.orientation="h",C.swapXYData(A)),delete A.bardir),A.type==="histogramy"&&C.swapXYData(A),A.type!=="histogramx"&&A.type!=="histogramy"||(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=t(A.xaxis,"x")),A.yaxis&&(A.yaxis=t(A.yaxis,"y")),n(A,"gl3d")&&A.scene&&(A.scene=b.subplotsRegistry.gl3d.cleanId(A.scene)),!n(A,"pie-like")&&!n(A,"bar-like"))if(Array.isArray(A.textposition))for(y=0;y<A.textposition.length;y++)A.textposition[y]=p(A.textposition[y]);else A.textposition&&(A.textposition=p(A.textposition));var k=r.getModule(A);if(k&&k.colorbar){var E=k.colorbar.container,L=E?A[E]:A;L&&L.colorscale&&(L.colorscale==="YIGnBu"&&(L.colorscale="YlGnBu"),L.colorscale==="YIOrRd"&&(L.colorscale="YlOrRd"))}if(A.type==="surface"&&w.isPlainObject(A.contours)){var O=["x","y","z"];for(y=0;y<O.length;y++){var P=A.contours[O[y]];w.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if(A.type==="candlestick"||A.type==="ohlc"){var F=(A.increasing||{}).showlegend!==!1,U=(A.decreasing||{}).showlegend!==!1,I=l(A.increasing),N=l(A.decreasing);if(I!==!1&&N!==!1){var W=u(I,N,F,U);W&&(A.name=W)}else!I&&!N||A.name||(A.name=I||N)}if(Array.isArray(A.transforms)){var B=A.transforms;for(y=0;y<B.length;y++){var V=B[y];if(w.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var q=V.styles,ne=Object.keys(q);V.styles=[];for(var $=0;$<ne.length;$++)V.styles.push({target:ne[$],value:q[ne[$]]})}}}}f(A,"line")&&delete A.line,"marker"in A&&(f(A.marker,"line")&&delete A.marker.line,f(A,"marker")&&delete A.marker),o.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),s(A),A.colorbar&&s(A.colorbar),A.marker&&A.marker.colorbar&&s(A.marker.colorbar),A.line&&A.line.colorbar&&s(A.line.colorbar),A.aaxis&&s(A.aaxis),A.baxis&&s(A.baxis)}},C.swapXYData=function(v){var x;if(w.swapAttrs(v,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(v.z)&&Array.isArray(v.z[0])&&(v.transpose?delete v.transpose:v.transpose=!0),v.error_x&&v.error_y){var y=v.error_y,A="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);w.swapAttrs(v,["error_?.copy_ystyle"]),A&&w.swapAttrs(v,["error_?.color","error_?.thickness","error_?.width"])}if(typeof v.hoverinfo=="string"){var d=v.hoverinfo.split("+");for(x=0;x<d.length;x++)d[x]==="x"?d[x]="y":d[x]==="y"&&(d[x]="x");v.hoverinfo=d.join("+")}},C.coerceTraceIndices=function(v,x){if(_(x))return[x];if(!Array.isArray(x)||!x.length)return v.data.map(function(d,S){return S});if(Array.isArray(x)){for(var y=[],A=0;A<x.length;A++)w.isIndex(x[A],v.data.length)?y.push(x[A]):w.warn("trace index (",x[A],") is not a number or is out of bounds");return y}return x},C.manageArrayContainers=function(v,x,y){var A=v.obj,d=v.parts,S=d.length,k=d[S-1],E=_(k);if(E&&x===null){var L=d.slice(0,S-1).join(".");w.nestedProperty(A,L).get().splice(k,1)}else E&&v.get()===void 0&&v.get()===void 0&&(y[v.astr]=null),v.set(x)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function h(v){var x=v.search(m);if(x>0)return v.substr(0,x)}C.hasParent=function(v,x){for(var y=h(x);y;){if(y in v)return!0;y=h(y)}return!1};var g=["x","y","z"];C.clearAxisTypes=function(v,x,y){for(var A=0;A<x.length;A++)for(var d=v._fullData[A],S=0;S<3;S++){var k=i(v,d,g[S]);if(k&&k.type!=="log"){var E=k._name,L=k._id.substr(1);if(L.substr(0,5)==="scene"){if(y[L]!==void 0)continue;E=L+"."+E}var O=E+".type";y[E]===void 0&&y[O]===void 0&&w.nestedProperty(v.layout,O).set(null)}}}},22448:function(R,C,e){"use strict";var _=e(36424);C._doPlot=_._doPlot,C.newPlot=_.newPlot,C.restyle=_.restyle,C.relayout=_.relayout,C.redraw=_.redraw,C.update=_.update,C._guiRestyle=_._guiRestyle,C._guiRelayout=_._guiRelayout,C._guiUpdate=_._guiUpdate,C._storeDirectGUIEdit=_._storeDirectGUIEdit,C.react=_.react,C.extendTraces=_.extendTraces,C.prependTraces=_.prependTraces,C.addTraces=_.addTraces,C.deleteTraces=_.deleteTraces,C.moveTraces=_.moveTraces,C.purge=_.purge,C.addFrames=_.addFrames,C.deleteFrames=_.deleteFrames,C.animate=_.animate,C.setPlotConfig=_.setPlotConfig;var T=e(52200).getGraphDiv,r=e(4016).eraseActiveShape;C.deleteActiveShape=function(b){return r(T(b))},C.toImage=e(67024),C.validate=e(21480),C.downloadImage=e(39792);var w=e(94828);C.makeTemplate=w.makeTemplate,C.validateTemplate=w.validateTemplate},17680:function(R,C,e){"use strict";var _=e(63620),T=e(16628),r=e(24248),w=e(14952).sorterAsc,b=e(24040);C.containerArrayMatch=e(69820);var c=C.isAddVal=function(t){return t==="add"||_(t)},o=C.isRemoveVal=function(t){return t===null||t==="remove"};C.applyContainerArrayChanges=function(t,i,n,a,s){var l=i.astr,u=b.getComponentMethod(l,"supplyLayoutDefaults"),p=b.getComponentMethod(l,"draw"),f=b.getComponentMethod(l,"drawOne"),m=a.replot||a.recalc||u===T||p===T,h=t.layout,g=t._fullLayout;if(n[""]){Object.keys(n).length>1&&r.warn("Full array edits are incompatible with other edits",l);var v=n[""][""];if(o(v))i.set(null);else{if(!Array.isArray(v))return r.warn("Unrecognized full array edit value",l,v),!0;i.set(v)}return!m&&(u(h,g),p(t),!0)}var x,y,A,d,S,k,E,L,O=Object.keys(n).map(Number).sort(w),P=i.get(),F=P||[],U=s(g,l).get(),I=[],N=-1,W=F.length;for(x=0;x<O.length;x++)if(d=n[A=O[x]],S=Object.keys(d),k=d[""],E=c(k),A<0||A>F.length-(E?0:1))r.warn("index out of range",l,A);else if(k!==void 0)S.length>1&&r.warn("Insertion & removal are incompatible with edits to the same index.",l,A),o(k)?I.push(A):E?(k==="add"&&(k={}),F.splice(A,0,k),U&&U.splice(A,0,{})):r.warn("Unrecognized full object edit value",l,A,k),N===-1&&(N=A);else for(y=0;y<S.length;y++)L=l+"["+A+"].",s(F[A],S[y],L).set(d[S[y]]);for(x=I.length-1;x>=0;x--)F.splice(I[x],1),U&&U.splice(I[x],1);if(F.length?P||i.set(F):i.set(null),m)return!1;if(u(h,g),f!==T){var B;if(N===-1)B=O;else{for(W=Math.max(F.length,W),B=[],x=0;x<O.length&&!((A=O[x])>=N);x++)B.push(A);for(x=N;x<W;x++)B.push(x)}for(x=0;x<B.length;x++)f(t,B[x])}else p(t);return!0}},36424:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(52264),w=e(3400),b=w.nestedProperty,c=e(95924),o=e(94552),t=e(24040),i=e(73060),n=e(7316),a=e(54460),s=e(96312),l=e(94724),u=e(43616),p=e(76308),f=e(42464).initInteractions,m=e(9616),h=e(22676).clearOutline,g=e(20556).dfltConfig,v=e(17680),x=e(93404),y=e(39172),A=e(67824),d=e(33816).AX_NAME_PATTERN,S=0;function k(xe){var Te=xe._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:xe.emit("plotly_afterplot")}function E(xe,Te){try{xe._fullLayout._paper.style("background",Te)}catch(Ae){w.error(Ae)}}function L(xe,Te){E(xe,p.combine(Te,"white"))}function O(xe,Te){if(!xe._context){xe._context=w.extendDeep({},g);var Ae=_.select("base");xe._context._baseUrl=Ae.size()&&Ae.attr("href")?window.location.href.split("#")[0]:""}var Pe,De,ve,we=xe._context;if(Te){for(De=Object.keys(Te),Pe=0;Pe<De.length;Pe++)(ve=De[Pe])!=="editable"&&ve!=="edits"&&ve in we&&(ve==="setBackground"&&Te[ve]==="opaque"?we[ve]=L:we[ve]=Te[ve]);Te.plot3dPixelRatio&&!we.plotGlPixelRatio&&(we.plotGlPixelRatio=we.plot3dPixelRatio);var Ee=Te.editable;if(Ee!==void 0)for(we.editable=Ee,De=Object.keys(we.edits),Pe=0;Pe<De.length;Pe++)we.edits[De[Pe]]=Ee;if(Te.edits)for(De=Object.keys(Te.edits),Pe=0;Pe<De.length;Pe++)(ve=De[Pe])in we.edits&&(we.edits[ve]=Te.edits[ve]);we._exportedPlot=Te._exportedPlot}we.staticPlot&&(we.editable=!1,we.edits={},we.autosizable=!1,we.scrollZoom=!1,we.doubleClick=!1,we.showTips=!1,we.showLink=!1,we.displayModeBar=!1),we.displayModeBar!=="hover"||r||(we.displayModeBar=!0),we.setBackground!=="transparent"&&typeof we.setBackground=="function"||(we.setBackground=E),we._hasZeroHeight=we._hasZeroHeight||xe.clientHeight===0,we._hasZeroWidth=we._hasZeroWidth||xe.clientWidth===0;var Fe=we.scrollZoom,Le=we._scrollZoom={};if(Fe===!0)Le.cartesian=1,Le.gl3d=1,Le.geo=1,Le.mapbox=1;else if(typeof Fe=="string"){var je=Fe.split("+");for(Pe=0;Pe<je.length;Pe++)Le[je[Pe]]=1}else Fe!==!1&&(Le.gl3d=1,Le.geo=1,Le.mapbox=1)}function P(xe,Te){var Ae,Pe,De=Te+1,ve=[];for(Ae=0;Ae<xe.length;Ae++)(Pe=xe[Ae])<0?ve.push(De+Pe):ve.push(Pe);return ve}function F(xe,Te,Ae){var Pe,De;for(Pe=0;Pe<Te.length;Pe++){if((De=Te[Pe])!==parseInt(De,10))throw new Error("all values in "+Ae+" must be integers");if(De>=xe.data.length||De<-xe.data.length)throw new Error(Ae+" must be valid indices for gd.data.");if(Te.indexOf(De,Pe+1)>-1||De>=0&&Te.indexOf(-xe.data.length+De)>-1||De<0&&Te.indexOf(xe.data.length+De)>-1)throw new Error("each index in "+Ae+" must be unique.")}}function U(xe,Te,Ae){if(!Array.isArray(xe.data))throw new Error("gd.data must be an array.");if(Te===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),F(xe,Te,"currentIndices"),Ae===void 0||Array.isArray(Ae)||(Ae=[Ae]),Ae!==void 0&&F(xe,Ae,"newIndices"),Ae!==void 0&&Te.length!==Ae.length)throw new Error("current and new indices must be of equal length.")}function I(xe,Te,Ae,Pe,De){(function(Je,rt,ot,yt){var _t=w.isPlainObject(yt);if(!Array.isArray(Je.data))throw new Error("gd.data must be an array");if(!w.isPlainObject(rt))throw new Error("update must be a key:value object");if(ot===void 0)throw new Error("indices must be an integer or array of integers");for(var mt in F(Je,ot,"indices"),rt){if(!Array.isArray(rt[mt])||rt[mt].length!==ot.length)throw new Error("attribute "+mt+" must be an array of length equal to indices array length");if(_t&&(!(mt in yt)||!Array.isArray(yt[mt])||yt[mt].length!==rt[mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(xe,Te,Ae,Pe);for(var ve=function(Je,rt,ot,yt){var _t,mt,tt,Qe,Dt,zt=w.isPlainObject(yt),pt=[];for(var vt in Array.isArray(ot)||(ot=[ot]),ot=P(ot,Je.data.length-1),rt)for(var We=0;We<ot.length;We++){if(_t=Je.data[ot[We]],mt=(tt=b(_t,vt)).get(),Qe=rt[vt][We],!w.isArrayOrTypedArray(Qe))throw new Error("attribute: "+vt+" index: "+We+" must be an array");if(!w.isArrayOrTypedArray(mt))throw new Error("cannot extend missing or non-array attribute: "+vt);if(mt.constructor!==Qe.constructor)throw new Error("cannot extend array with an array of a different type: "+vt);Dt=zt?yt[vt][We]:yt,T(Dt)||(Dt=-1),pt.push({prop:tt,target:mt,insert:Qe,maxp:Math.floor(Dt)})}return pt}(xe,Te,Ae,Pe),we={},Ee={},Fe=0;Fe<ve.length;Fe++){var Le=ve[Fe].prop,je=ve[Fe].maxp,Ge=De(ve[Fe].target,ve[Fe].insert,je);Le.set(Ge[0]),Array.isArray(we[Le.astr])||(we[Le.astr]=[]),we[Le.astr].push(Ge[1]),Array.isArray(Ee[Le.astr])||(Ee[Le.astr]=[]),Ee[Le.astr].push(ve[Fe].target.length)}return{update:we,maxPoints:Ee}}function N(xe,Te){var Ae=new xe.constructor(xe.length+Te.length);return Ae.set(xe),Ae.set(Te,xe.length),Ae}function W(xe,Te,Ae,Pe){xe=w.getGraphDiv(xe),x.clearPromiseQueue(xe);var De={};if(typeof Te=="string")De[Te]=Ae;else{if(!w.isPlainObject(Te))return w.warn("Restyle fail.",Te,Ae,Pe),Promise.reject();De=w.extendFlat({},Te),Pe===void 0&&(Pe=Ae)}Object.keys(De).length&&(xe.changed=!0);var ve=x.coerceTraceIndices(xe,Pe),we=ne(xe,De,ve),Ee=we.flags;Ee.calc&&(xe.calcdata=void 0),Ee.clearAxisTypes&&x.clearAxisTypes(xe,ve,{});var Fe=[];Ee.fullReplot?Fe.push(C._doPlot):(Fe.push(n.previousPromises),n.supplyDefaults(xe),Ee.markerSize&&(n.doCalcdata(xe),J(Fe)),Ee.style&&Fe.push(y.doTraceStyle),Ee.colorbars&&Fe.push(y.doColorBars),Fe.push(k)),Fe.push(n.rehover,n.redrag,n.reselect),o.add(xe,W,[xe,we.undoit,we.traces],W,[xe,we.redoit,we.traces]);var Le=w.syncOrAsync(Fe,xe);return Le&&Le.then||(Le=Promise.resolve()),Le.then(function(){return xe.emit("plotly_restyle",we.eventData),xe})}function B(xe){return xe===void 0?null:xe}function V(xe,Te){return Te?function(Ae,Pe,De){var ve=b(Ae,Pe),we=ve.set;return ve.set=function(Ee){q((De||"")+Pe,ve.get(),Ee,xe),we(Ee)},ve}:b}function q(xe,Te,Ae,Pe){if(Array.isArray(Te)||Array.isArray(Ae))for(var De=Array.isArray(Te)?Te:[],ve=Array.isArray(Ae)?Ae:[],we=Math.max(De.length,ve.length),Ee=0;Ee<we;Ee++)q(xe+"["+Ee+"]",De[Ee],ve[Ee],Pe);else if(w.isPlainObject(Te)||w.isPlainObject(Ae)){var Fe=w.isPlainObject(Te)?Te:{},Le=w.isPlainObject(Ae)?Ae:{},je=w.extendFlat({},Fe,Le);for(var Ge in je)q(xe+"."+Ge,Fe[Ge],Le[Ge],Pe)}else Pe[xe]===void 0&&(Pe[xe]=B(Te))}function ne(xe,Te,Ae){var Pe,De=xe._fullLayout,ve=xe._fullData,we=xe.data,Ee=De._guiEditing,Fe=V(De._preGUI,Ee),Le=w.extendDeepAll({},Te);$(Te);var je,Ge=A.traceFlags(),Je={},rt={};function ot(){return Ae.map(function(){})}function yt(nn){var on=a.id2name(nn);je.indexOf(on)===-1&&je.push(on)}function _t(nn){return"LAYOUT"+nn+".autorange"}function mt(nn){return"LAYOUT"+nn+".range"}function tt(nn){for(var on=nn;on<ve.length;on++)if(ve[on]._input===we[nn])return ve[on]}function Qe(nn,on,Ht){if(Array.isArray(nn))nn.forEach(function(ln){Qe(ln,on,Ht)});else if(!(nn in Te)&&!x.hasParent(Te,nn)){var $t;if(nn.substr(0,6)==="LAYOUT")$t=Fe(xe.layout,nn.replace("LAYOUT",""));else{var bn=Ae[Ht];$t=V(De._tracePreGUI[tt(bn)._fullInput.uid],Ee)(we[bn],nn)}nn in rt||(rt[nn]=ot()),rt[nn][Ht]===void 0&&(rt[nn][Ht]=B($t.get())),on!==void 0&&$t.set(on)}}function Dt(nn){return function(on){return ve[on][nn]}}function zt(nn){return function(on,Ht){return on===!1?ve[Ae[Ht]][nn]:null}}for(var pt in Te){if(x.hasParent(Te,pt))throw new Error("cannot set "+pt+" and a parent attribute simultaneously");var vt,We,Ze,Ne,Xe,st,lt=Te[pt];if(pt!=="autobinx"&&pt!=="autobiny"||(pt=pt.charAt(pt.length-1)+"bins",lt=Array.isArray(lt)?lt.map(zt(pt)):lt===!1?Ae.map(Dt(pt)):null),Je[pt]=lt,pt.substr(0,6)!=="LAYOUT"){for(rt[pt]=ot(),Pe=0;Pe<Ae.length;Pe++)if(vt=we[Ae[Pe]],We=tt(Ae[Pe]),Ne=(Ze=V(De._tracePreGUI[We._fullInput.uid],Ee)(vt,pt)).get(),(Xe=Array.isArray(lt)?lt[Pe%lt.length]:lt)!==void 0){var xt=Ze.parts[Ze.parts.length-1],bt=pt.substr(0,pt.length-xt.length-1),Ve=bt?bt+".":"",Be=bt?b(We,bt).get():We;if((st=i.getTraceValObject(We,Ze.parts))&&st.impliedEdits&&Xe!==null)for(var at in st.impliedEdits)Qe(w.relativeAttr(pt,at),st.impliedEdits[at],Pe);else if(xt!=="thicknessmode"&&xt!=="lenmode"||Ne===Xe||Xe!=="fraction"&&Xe!=="pixels"||!Be){if(pt==="type"&&(Xe==="pie"!=(Ne==="pie")||Xe==="funnelarea"!=(Ne==="funnelarea"))){var ht="x",dt="y";Xe!=="bar"&&Ne!=="bar"||vt.orientation!=="h"||(ht="y",dt="x"),w.swapAttrs(vt,["?","?src"],"labels",ht),w.swapAttrs(vt,["d?","?0"],"label",ht),w.swapAttrs(vt,["?","?src"],"values",dt),Ne==="pie"||Ne==="funnelarea"?(b(vt,"marker.color").set(b(vt,"marker.colors").get()),De._pielayer.selectAll("g.trace").remove()):t.traceIs(vt,"cartesian")&&b(vt,"marker.colors").set(b(vt,"marker.color").get())}}else{var it=De._size,kt=Be.orient,Tt=kt==="top"||kt==="bottom";if(xt==="thicknessmode"){var St=Tt?it.h:it.w;Qe(Ve+"thickness",Be.thickness*(Xe==="fraction"?1/St:St),Pe)}else{var wt=Tt?it.w:it.h;Qe(Ve+"len",Be.len*(Xe==="fraction"?1/wt:wt),Pe)}}if(rt[pt][Pe]=B(Ne),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(pt)!==-1){if(pt==="orientation"){Ze.set(Xe);var At=vt.x&&!vt.y?"h":"v";if((Ze.get()||At)===We.orientation)continue}else pt==="orientationaxes"&&(vt.orientation={v:"h",h:"v"}[We.orientation]);x.swapXYData(vt),Ge.calc=Ge.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(Ze.parts[0])!==-1?(x.manageArrayContainers(Ze,Xe,rt),Ge.calc=!0):(st?st.arrayOk&&!t.traceIs(We,"regl")&&(w.isArrayOrTypedArray(Xe)||w.isArrayOrTypedArray(Ne))?Ge.calc=!0:A.update(Ge,st):Ge.calc=!0,Ze.set(Xe))}if(["swapxyaxes","orientationaxes"].indexOf(pt)!==-1&&a.swap(xe,Ae),pt==="orientationaxes"){var Ft=b(xe.layout,"hovermode"),jt=Ft.get();jt==="x"?Ft.set("y"):jt==="y"?Ft.set("x"):jt==="x unified"?Ft.set("y unified"):jt==="y unified"&&Ft.set("x unified")}if(["orientation","type"].indexOf(pt)!==-1){for(je=[],Pe=0;Pe<Ae.length;Pe++){var rn=we[Ae[Pe]];t.traceIs(rn,"cartesian")&&(yt(rn.xaxis||"x"),yt(rn.yaxis||"y"))}Qe(je.map(_t),!0,0),Qe(je.map(mt),[0,1],0)}}else Ze=Fe(xe.layout,pt.replace("LAYOUT","")),rt[pt]=[B(Ze.get())],Ze.set(Array.isArray(lt)?lt[0]:lt),Ge.calc=!0}return(Ge.calc||Ge.plot)&&(Ge.fullReplot=!0),{flags:Ge,undoit:rt,redoit:Je,traces:Ae,eventData:w.extendDeepNoArrays([],[Le,Ae])}}function $(xe){var Te,Ae,Pe,De=w.counterRegex("axis",".title",!1,!1),ve=/colorbar\.title$/,we=Object.keys(xe);for(Te=0;Te<we.length;Te++)Ae=we[Te],Pe=xe[Ae],Ae!=="title"&&!De.test(Ae)&&!ve.test(Ae)||typeof Pe!="string"&&typeof Pe!="number"?Ae.indexOf("titlefont")>-1&&Ae.indexOf("grouptitlefont")===-1?Ee(Ae,Ae.replace("titlefont","title.font")):Ae.indexOf("titleposition")>-1?Ee(Ae,Ae.replace("titleposition","title.position")):Ae.indexOf("titleside")>-1?Ee(Ae,Ae.replace("titleside","title.side")):Ae.indexOf("titleoffset")>-1&&Ee(Ae,Ae.replace("titleoffset","title.offset")):Ee(Ae,Ae.replace("title","title.text"));function Ee(Fe,Le){xe[Le]=xe[Fe],delete xe[Fe]}}function K(xe,Te,Ae){xe=w.getGraphDiv(xe),x.clearPromiseQueue(xe);var Pe={};if(typeof Te=="string")Pe[Te]=Ae;else{if(!w.isPlainObject(Te))return w.warn("Relayout fail.",Te,Ae),Promise.reject();Pe=w.extendFlat({},Te)}Object.keys(Pe).length&&(xe.changed=!0);var De=se(xe,Pe),ve=De.flags;ve.calc&&(xe.calcdata=void 0);var we=[n.previousPromises];ve.layoutReplot?we.push(y.layoutReplot):Object.keys(Pe).length&&(ee(xe,ve,De)||n.supplyDefaults(xe),ve.legend&&we.push(y.doLegend),ve.layoutstyle&&we.push(y.layoutStyles),ve.axrange&&J(we,De.rangesAltered),ve.ticks&&we.push(y.doTicksRelayout),ve.modebar&&we.push(y.doModeBar),ve.camera&&we.push(y.doCamera),ve.colorbars&&we.push(y.doColorBars),we.push(k)),we.push(n.rehover,n.redrag,n.reselect),o.add(xe,K,[xe,De.undoit],K,[xe,De.redoit]);var Ee=w.syncOrAsync(we,xe);return Ee&&Ee.then||(Ee=Promise.resolve(xe)),Ee.then(function(){return xe.emit("plotly_relayout",De.eventData),xe})}function ee(xe,Te,Ae){var Pe,De,ve=xe._fullLayout;if(!Te.axrange)return!1;for(var we in Te)if(we!=="axrange"&&Te[we])return!1;var Ee=function(rt,ot){return w.coerce(Pe,De,l,rt,ot)},Fe={};for(var Le in Ae.rangesAltered){var je=a.id2name(Le);if(Pe=xe.layout[je],De=ve[je],s(Pe,De,Ee,Fe),De._matchGroup){for(var Ge in De._matchGroup)if(Ge!==Le){var Je=ve[a.id2name(Ge)];Je.autorange=De.autorange,Je.range=De.range.slice(),Je._input.range=De.range.slice()}}}return!0}function J(xe,Te){var Ae=Te?function(Pe){var De=[];for(var ve in Te){var we=a.getFromId(Pe,ve);if(De.push(ve),(we.ticklabelposition||"").indexOf("inside")!==-1&&we._anchorAxis&&De.push(we._anchorAxis._id),we._matchGroup)for(var Ee in we._matchGroup)Te[Ee]||De.push(Ee)}return a.draw(Pe,De,{skipTitle:!0})}:function(Pe){return a.draw(Pe,"redraw")};xe.push(h,y.doAutoRangeAndConstraints,Ae,y.drawData,y.finalDraw)}var Z=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,te=/^[xyz]axis[0-9]*\.autorange$/,oe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function se(xe,Te){var Ae,Pe,De,ve=xe.layout,we=xe._fullLayout,Ee=we._guiEditing,Fe=V(we._preGUI,Ee),Le=Object.keys(Te),je=a.list(xe),Ge=w.extendDeepAll({},Te),Je={};for($(Te),Le=Object.keys(Te),Pe=0;Pe<Le.length;Pe++)if(Le[Pe].indexOf("allaxes")===0){for(De=0;De<je.length;De++){var rt=je[De]._id.substr(1),ot=rt.indexOf("scene")!==-1?rt+".":"",yt=Le[Pe].replace("allaxes",ot+je[De]._name);Te[yt]||(Te[yt]=Te[Le[Pe]])}delete Te[Le[Pe]]}var _t=A.layoutFlags(),mt={},tt={};function Qe(ln,Kt){if(Array.isArray(ln))ln.forEach(function(en){Qe(en,Kt)});else if(!(ln in Te)&&!x.hasParent(Te,ln)){var fn=Fe(ve,ln);ln in tt||(tt[ln]=B(fn.get())),Kt!==void 0&&fn.set(Kt)}}var Dt,zt={};function pt(ln){var Kt=a.name2id(ln.split(".")[0]);return zt[Kt]=1,Kt}for(var vt in Te){if(x.hasParent(Te,vt))throw new Error("cannot set "+vt+" and a parent attribute simultaneously");for(var We=Fe(ve,vt),Ze=Te[vt],Ne=We.parts.length-1;Ne>0&&typeof We.parts[Ne]!="string";)Ne--;var Xe=We.parts[Ne],st=We.parts[Ne-1]+"."+Xe,lt=We.parts.slice(0,Ne).join("."),xt=b(xe.layout,lt).get(),bt=b(we,lt).get(),Ve=We.get();if(Ze!==void 0){mt[vt]=Ze,tt[vt]=Xe==="reverse"?Ze:B(Ve);var Be=i.getLayoutValObject(we,We.parts);if(Be&&Be.impliedEdits&&Ze!==null)for(var at in Be.impliedEdits)Qe(w.relativeAttr(vt,at),Be.impliedEdits[at]);if(["width","height"].indexOf(vt)!==-1)if(Ze){Qe("autosize",null);var ht=vt==="height"?"width":"height";Qe(ht,we[ht])}else we[vt]=xe._initialAutoSize[vt];else if(vt==="autosize")Qe("width",Ze?null:we.width),Qe("height",Ze?null:we.height);else if(st.match(Z))pt(st),b(we,lt+"._inputRange").set(null);else if(st.match(te)){pt(st),b(we,lt+"._inputRange").set(null);var dt=b(we,lt).get();dt._inputDomain&&(dt._input.domain=dt._inputDomain.slice())}else st.match(oe)&&b(we,lt+"._inputDomain").set(null);if(Xe==="type"){Dt=xt;var it=bt.type==="linear"&&Ze==="log",kt=bt.type==="log"&&Ze==="linear";if(it||kt){if(Dt&&Dt.range)if(bt.autorange)it&&(Dt.range=Dt.range[1]>Dt.range[0]?[1,2]:[2,1]);else{var Tt=Dt.range[0],St=Dt.range[1];it?(Tt<=0&&St<=0&&Qe(lt+".autorange",!0),Tt<=0?Tt=St/1e6:St<=0&&(St=Tt/1e6),Qe(lt+".range[0]",Math.log(Tt)/Math.LN10),Qe(lt+".range[1]",Math.log(St)/Math.LN10)):(Qe(lt+".range[0]",Math.pow(10,Tt)),Qe(lt+".range[1]",Math.pow(10,St)))}else Qe(lt+".autorange",!0);Array.isArray(we._subplots.polar)&&we._subplots.polar.length&&we[We.parts[0]]&&We.parts[1]==="radialaxis"&&delete we[We.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(xe,bt,Ze,Qe),t.getComponentMethod("images","convertCoords")(xe,bt,Ze,Qe)}else Qe(lt+".autorange",!0),Qe(lt+".range",null);b(we,lt+"._inputRange").set(null)}else if(Xe.match(d)){var wt=b(we,vt).get(),At=(Ze||{}).type;At&&At!=="-"||(At="linear"),t.getComponentMethod("annotations","convertCoords")(xe,wt,At,Qe),t.getComponentMethod("images","convertCoords")(xe,wt,At,Qe)}var Ft=v.containerArrayMatch(vt);if(Ft){Ae=Ft.array,Pe=Ft.index;var jt=Ft.property,rn=Be||{editType:"calc"};Pe!==""&&jt===""&&(v.isAddVal(Ze)?tt[vt]=null:v.isRemoveVal(Ze)?tt[vt]=(b(ve,Ae).get()||[])[Pe]:w.warn("unrecognized full object value",Te)),A.update(_t,rn),Je[Ae]||(Je[Ae]={});var nn=Je[Ae][Pe];nn||(nn=Je[Ae][Pe]={}),nn[jt]=Ze,delete Te[vt]}else Xe==="reverse"?(xt.range?xt.range.reverse():(Qe(lt+".autorange",!0),xt.range=[1,0]),bt.autorange?_t.calc=!0:_t.plot=!0):(vt==="dragmode"&&(Ze===!1&&Ve!==!1||Ze!==!1&&Ve===!1)||we._has("scatter-like")&&we._has("regl")&&vt==="dragmode"&&(Ze==="lasso"||Ze==="select")&&Ve!=="lasso"&&Ve!=="select"||we._has("gl2d")?_t.plot=!0:Be?A.update(_t,Be):_t.calc=!0,We.set(Ze))}}for(Ae in Je)v.applyContainerArrayChanges(xe,Fe(ve,Ae),Je[Ae],_t,Fe)||(_t.plot=!0);for(var on in zt){var Ht=(Dt=a.getFromId(xe,on))&&Dt._constraintGroup;if(Ht)for(var $t in _t.calc=!0,Ht)zt[$t]||(a.getFromId(xe,$t)._constraintShrinkable=!0)}(ce(xe)||Te.height||Te.width)&&(_t.plot=!0);var bn=we.shapes;for(Pe=0;Pe<bn.length;Pe++)if(bn[Pe].showlegend){_t.calc=!0;break}return(_t.plot||_t.calc)&&(_t.layoutReplot=!0),{flags:_t,rangesAltered:zt,undoit:tt,redoit:mt,eventData:Ge}}function ce(xe){var Te=xe._fullLayout,Ae=Te.width,Pe=Te.height;return xe.layout.autosize&&n.plotAutoSize(xe,xe.layout,Te),Te.width!==Ae||Te.height!==Pe}function ye(xe,Te,Ae,Pe){xe=w.getGraphDiv(xe),x.clearPromiseQueue(xe),w.isPlainObject(Te)||(Te={}),w.isPlainObject(Ae)||(Ae={}),Object.keys(Te).length&&(xe.changed=!0),Object.keys(Ae).length&&(xe.changed=!0);var De=x.coerceTraceIndices(xe,Pe),ve=ne(xe,w.extendFlat({},Te),De),we=ve.flags,Ee=se(xe,w.extendFlat({},Ae)),Fe=Ee.flags;(we.calc||Fe.calc)&&(xe.calcdata=void 0),we.clearAxisTypes&&x.clearAxisTypes(xe,De,Ae);var Le=[];Fe.layoutReplot?Le.push(y.layoutReplot):we.fullReplot?Le.push(C._doPlot):(Le.push(n.previousPromises),ee(xe,Fe,Ee)||n.supplyDefaults(xe),we.style&&Le.push(y.doTraceStyle),(we.colorbars||Fe.colorbars)&&Le.push(y.doColorBars),Fe.legend&&Le.push(y.doLegend),Fe.layoutstyle&&Le.push(y.layoutStyles),Fe.axrange&&J(Le,Ee.rangesAltered),Fe.ticks&&Le.push(y.doTicksRelayout),Fe.modebar&&Le.push(y.doModeBar),Fe.camera&&Le.push(y.doCamera),Le.push(k)),Le.push(n.rehover,n.redrag,n.reselect),o.add(xe,ye,[xe,ve.undoit,Ee.undoit,ve.traces],ye,[xe,ve.redoit,Ee.redoit,ve.traces]);var je=w.syncOrAsync(Le,xe);return je&&je.then||(je=Promise.resolve(xe)),je.then(function(){return xe.emit("plotly_update",{data:ve.eventData,layout:Ee.eventData}),xe})}function me(xe){return function(Te){Te._fullLayout._guiEditing=!0;var Ae=xe.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Ae}}var fe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],pe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ge(xe,Te){for(var Ae=0;Ae<Te.length;Ae++){var Pe=Te[Ae],De=xe.match(Pe.pattern);if(De){var ve=De[1]||"";return{head:ve,tail:xe.substr(ve.length+1),attr:Pe.attr}}}}function ke(xe,Te){var Ae=b(Te,xe).get();if(Ae!==void 0)return Ae;var Pe=xe.split(".");for(Pe.pop();Pe.length>1;)if(Pe.pop(),(Ae=b(Te,Pe.join(".")+".uirevision").get())!==void 0)return Ae;return Te.uirevision}function Ce(xe,Te){for(var Ae=0;Ae<Te.length;Ae++)if(Te[Ae]._fullInput.uid===xe)return Ae;return-1}function de(xe,Te,Ae){for(var Pe=0;Pe<Te.length;Pe++)if(Te[Pe].uid===xe)return Pe;return!Te[Ae]||Te[Ae].uid?-1:Ae}function ae(xe,Te){var Ae=w.isPlainObject(xe),Pe=Array.isArray(xe);return Ae||Pe?(Ae&&w.isPlainObject(Te)||Pe&&Array.isArray(Te))&&JSON.stringify(xe)===JSON.stringify(Te):xe===Te}function re(xe,Te,Ae,Pe){var De,ve,we,Ee=Pe.getValObject,Fe=Pe.flags,Le=Pe.immutable,je=Pe.inArray,Ge=Pe.arrayIndex;function Je(){var xt=De.editType;je&&xt.indexOf("arraydraw")!==-1?w.pushUnique(Fe.arrays[je],Ge):(A.update(Fe,De),xt!=="none"&&Fe.nChanges++,Pe.transition&&De.anim&&Fe.nChangesAnim++,(Z.test(we)||te.test(we))&&(Fe.rangesAltered[Ae[0]]=1),oe.test(we)&&b(Te,"_inputDomain").set(null),ve==="datarevision"&&(Fe.newDataRevision=1))}function rt(xt){return xt.valType==="data_array"||xt.arrayOk}for(ve in xe){if(Fe.calc&&!Pe.transition)return;var ot=xe[ve],yt=Te[ve],_t=Ae.concat(ve);if(we=_t.join("."),ve.charAt(0)!=="_"&&typeof ot!="function"&&ot!==yt){if((ve==="tick0"||ve==="dtick")&&Ae[0]!=="geo"){var mt=Te.tickmode;if(mt==="auto"||mt==="array"||!mt)continue}if((ve!=="range"||!Te.autorange)&&(ve!=="zmin"&&ve!=="zmax"||Te.type!=="contourcarpet")&&(De=Ee(_t))&&(!De._compareAsJSON||JSON.stringify(ot)!==JSON.stringify(yt))){var tt,Qe=De.valType,Dt=rt(De),zt=Array.isArray(ot),pt=Array.isArray(yt);if(zt&&pt){var vt="_input_"+ve,We=xe[vt],Ze=Te[vt];if(Array.isArray(We)&&We===Ze)continue}if(yt===void 0)Dt&&zt?Fe.calc=!0:Je();else if(De._isLinkedToArray){var Ne=[],Xe=!1;je||(Fe.arrays[ve]=Ne);var st=Math.min(ot.length,yt.length),lt=Math.max(ot.length,yt.length);if(st!==lt){if(De.editType!=="arraydraw"){Je();continue}Xe=!0}for(tt=0;tt<st;tt++)re(ot[tt],yt[tt],_t.concat(tt),w.extendFlat({inArray:ve,arrayIndex:tt},Pe));if(Xe)for(tt=st;tt<lt;tt++)Ne.push(tt)}else!Qe&&w.isPlainObject(ot)?re(ot,yt,_t,Pe):Dt?zt&&pt?(Le&&(Fe.calc=!0),(Le||Pe.newDataRevision)&&Je()):zt!==pt?Fe.calc=!0:Je():zt&&pt&&ot.length===yt.length&&String(ot)===String(yt)||Je()}}}for(ve in Te)if(!(ve in xe)&&ve.charAt(0)!=="_"&&typeof Te[ve]!="function"){if(rt(De=Ee(Ae.concat(ve)))&&Array.isArray(Te[ve]))return void(Fe.calc=!0);Je()}}function he(xe,Te){var Ae;for(Ae in xe)if(Ae.charAt(0)!=="_"){var Pe=xe[Ae],De=Te[Ae];if(Pe!==De)if(w.isPlainObject(Pe)&&w.isPlainObject(De)){if(he(Pe,De))return!0}else{if(!Array.isArray(Pe)||!Array.isArray(De)||Pe.length!==De.length)return!0;for(var ve=0;ve<Pe.length;ve++)if(Pe[ve]!==De[ve]&&(!w.isPlainObject(Pe[ve])||!w.isPlainObject(De[ve])||he(Pe[ve],De[ve])))return!0}}}function Se(xe){var Te=xe._fullLayout,Ae=xe.getBoundingClientRect();if(!w.equalDomRects(Ae,Te._lastBBox)){var Pe=Te._invTransform=w.inverseTransformMatrix(w.getFullTransformMatrix(xe));Te._invScaleX=Math.sqrt(Pe[0][0]*Pe[0][0]+Pe[0][1]*Pe[0][1]+Pe[0][2]*Pe[0][2]),Te._invScaleY=Math.sqrt(Pe[1][0]*Pe[1][0]+Pe[1][1]*Pe[1][1]+Pe[1][2]*Pe[1][2]),Te._lastBBox=Ae}}C.animate=function(xe,Te,Ae){if(xe=w.getGraphDiv(xe),!w.isPlotDiv(xe))throw new Error("This element is not a Plotly plot: "+xe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Pe=xe._transitionData;Pe._frameQueue||(Pe._frameQueue=[]);var De=(Ae=n.supplyAnimationDefaults(Ae)).transition,ve=Ae.frame;function we(Le){return Array.isArray(De)?Le>=De.length?De[0]:De[Le]:De}function Ee(Le){return Array.isArray(ve)?Le>=ve.length?ve[0]:ve[Le]:ve}function Fe(Le,je){var Ge=0;return function(){if(Le&&++Ge===je)return Le()}}return Pe._frameWaitingCnt===void 0&&(Pe._frameWaitingCnt=0),new Promise(function(Le,je){function Ge(){xe.emit("plotly_animating"),Pe._lastFrameAt=-1/0,Pe._timeToNext=0,Pe._runningTransitions=0,Pe._currentFrame=null;var vt=function(){Pe._animationRaf=window.requestAnimationFrame(vt),Date.now()-Pe._lastFrameAt>Pe._timeToNext&&function(){Pe._currentFrame&&Pe._currentFrame.onComplete&&Pe._currentFrame.onComplete();var We=Pe._currentFrame=Pe._frameQueue.shift();if(We){var Ze=We.name?We.name.toString():null;xe._fullLayout._currentFrame=Ze,Pe._lastFrameAt=Date.now(),Pe._timeToNext=We.frameOpts.duration,n.transition(xe,We.frame.data,We.frame.layout,x.coerceTraceIndices(xe,We.frame.traces),We.frameOpts,We.transitionOpts).then(function(){We.onComplete&&We.onComplete()}),xe.emit("plotly_animatingframe",{name:Ze,frame:We.frame,animation:{frame:We.frameOpts,transition:We.transitionOpts}})}else xe.emit("plotly_animated"),window.cancelAnimationFrame(Pe._animationRaf),Pe._animationRaf=null}()};vt()}var Je,rt,ot=0;function yt(vt){return Array.isArray(De)?ot>=De.length?vt.transitionOpts=De[ot]:vt.transitionOpts=De[0]:vt.transitionOpts=De,ot++,vt}var _t=[],mt=Te==null,tt=Array.isArray(Te);if(mt||tt||!w.isPlainObject(Te)){if(mt||["string","number"].indexOf(typeof Te)!==-1)for(Je=0;Je<Pe._frames.length;Je++)(rt=Pe._frames[Je])&&(mt||String(rt.group)===String(Te))&&_t.push({type:"byname",name:String(rt.name),data:yt({name:rt.name})});else if(tt)for(Je=0;Je<Te.length;Je++){var Qe=Te[Je];["number","string"].indexOf(typeof Qe)!==-1?(Qe=String(Qe),_t.push({type:"byname",name:Qe,data:yt({name:Qe})})):w.isPlainObject(Qe)&&_t.push({type:"object",data:yt(w.extendFlat({},Qe))})}}else _t.push({type:"object",data:yt(w.extendFlat({},Te))});for(Je=0;Je<_t.length;Je++)if((rt=_t[Je]).type==="byname"&&!Pe._frameHash[rt.data.name])return w.warn('animate failure: frame not found: "'+rt.data.name+'"'),void je();["next","immediate"].indexOf(Ae.mode)!==-1&&function(){if(Pe._frameQueue.length!==0){for(;Pe._frameQueue.length;){var vt=Pe._frameQueue.pop();vt.onInterrupt&&vt.onInterrupt()}xe.emit("plotly_animationinterrupted",[])}}(),Ae.direction==="reverse"&&_t.reverse();var Dt=xe._fullLayout._currentFrame;if(Dt&&Ae.fromcurrent){var zt=-1;for(Je=0;Je<_t.length;Je++)if((rt=_t[Je]).type==="byname"&&rt.name===Dt){zt=Je;break}if(zt>0&&zt<_t.length-1){var pt=[];for(Je=0;Je<_t.length;Je++)rt=_t[Je],(_t[Je].type!=="byname"||Je>zt)&&pt.push(rt);_t=pt}}_t.length>0?function(vt){if(vt.length!==0){for(var We=0;We<vt.length;We++){var Ze;Ze=vt[We].type==="byname"?n.computeFrame(xe,vt[We].name):vt[We].data;var Ne=Ee(We),Xe=we(We);Xe.duration=Math.min(Xe.duration,Ne.duration);var st={frame:Ze,name:vt[We].name,frameOpts:Ne,transitionOpts:Xe};We===vt.length-1&&(st.onComplete=Fe(Le,2),st.onInterrupt=je),Pe._frameQueue.push(st)}Ae.mode==="immediate"&&(Pe._lastFrameAt=-1/0),Pe._animationRaf||Ge()}}(_t):(xe.emit("plotly_animated"),Le())})},C.addFrames=function(xe,Te,Ae){if(xe=w.getGraphDiv(xe),Te==null)return Promise.resolve();if(!w.isPlotDiv(xe))throw new Error("This element is not a Plotly plot: "+xe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Pe,De,ve,we,Ee=xe._transitionData._frames,Fe=xe._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var Le=Ee.length+2*Te.length,je=[],Ge={};for(Pe=Te.length-1;Pe>=0;Pe--)if(w.isPlainObject(Te[Pe])){var Je=Te[Pe].name,rt=(Fe[Je]||Ge[Je]||{}).name,ot=Te[Pe].name,yt=Fe[rt]||Ge[rt];rt&&ot&&typeof ot=="number"&&yt&&S<5&&(S++,w.warn('addFrames: overwriting frame "'+(Fe[rt]||Ge[rt]).name+'" with a frame whose name of type "number" also equates to "'+rt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&w.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ge[Je]={name:Je},je.push({frame:n.supplyFrameDefaults(Te[Pe]),index:Ae&&Ae[Pe]!==void 0&&Ae[Pe]!==null?Ae[Pe]:Le+Pe})}je.sort(function(vt,We){return vt.index>We.index?-1:vt.index<We.index?1:0});var _t=[],mt=[],tt=Ee.length;for(Pe=je.length-1;Pe>=0;Pe--){if(typeof(De=je[Pe].frame).name=="number"&&w.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!De.name)for(;Fe[De.name="frame "+xe._transitionData._counter++];);if(Fe[De.name]){for(ve=0;ve<Ee.length&&(Ee[ve]||{}).name!==De.name;ve++);_t.push({type:"replace",index:ve,value:De}),mt.unshift({type:"replace",index:ve,value:Ee[ve]})}else we=Math.max(0,Math.min(je[Pe].index,tt)),_t.push({type:"insert",index:we,value:De}),mt.unshift({type:"delete",index:we}),tt++}var Qe=n.modifyFrames,Dt=n.modifyFrames,zt=[xe,mt],pt=[xe,_t];return o&&o.add(xe,Qe,zt,Dt,pt),n.modifyFrames(xe,_t)},C.deleteFrames=function(xe,Te){if(xe=w.getGraphDiv(xe),!w.isPlotDiv(xe))throw new Error("This element is not a Plotly plot: "+xe);var Ae,Pe,De=xe._transitionData._frames,ve=[],we=[];if(!Te)for(Te=[],Ae=0;Ae<De.length;Ae++)Te.push(Ae);for((Te=Te.slice()).sort(),Ae=Te.length-1;Ae>=0;Ae--)Pe=Te[Ae],ve.push({type:"delete",index:Pe}),we.unshift({type:"insert",index:Pe,value:De[Pe]});var Ee=n.modifyFrames,Fe=n.modifyFrames,Le=[xe,we],je=[xe,ve];return o&&o.add(xe,Ee,Le,Fe,je),n.modifyFrames(xe,ve)},C.addTraces=function xe(Te,Ae,Pe){Te=w.getGraphDiv(Te);var De,ve,we=[],Ee=C.deleteTraces,Fe=xe,Le=[Te,we],je=[Te,Ae];for(function(Ge,Je,rt){var ot,yt;if(!Array.isArray(Ge.data))throw new Error("gd.data must be an array.");if(Je===void 0)throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),ot=0;ot<Je.length;ot++)if(typeof(yt=Je[ot])!="object"||Array.isArray(yt)||yt===null)throw new Error("all values in traces array must be non-array objects");if(rt===void 0||Array.isArray(rt)||(rt=[rt]),rt!==void 0&&rt.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Ae,Pe),Array.isArray(Ae)||(Ae=[Ae]),Ae=Ae.map(function(Ge){return w.extendFlat({},Ge)}),x.cleanData(Ae),De=0;De<Ae.length;De++)Te.data.push(Ae[De]);for(De=0;De<Ae.length;De++)we.push(-Ae.length+De);if(Pe===void 0)return ve=C.redraw(Te),o.add(Te,Ee,Le,Fe,je),ve;Array.isArray(Pe)||(Pe=[Pe]);try{U(Te,we,Pe)}catch(Ge){throw Te.data.splice(Te.data.length-Ae.length,Ae.length),Ge}return o.startSequence(Te),o.add(Te,Ee,Le,Fe,je),ve=C.moveTraces(Te,we,Pe),o.stopSequence(Te),ve},C.deleteTraces=function xe(Te,Ae){Te=w.getGraphDiv(Te);var Pe,De,ve=[],we=C.addTraces,Ee=xe,Fe=[Te,ve,Ae],Le=[Te,Ae];if(Ae===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ae)||(Ae=[Ae]),F(Te,Ae,"indices"),(Ae=P(Ae,Te.data.length-1)).sort(w.sorterDes),Pe=0;Pe<Ae.length;Pe+=1)De=Te.data.splice(Ae[Pe],1)[0],ve.push(De);var je=C.redraw(Te);return o.add(Te,we,Fe,Ee,Le),je},C.extendTraces=function xe(Te,Ae,Pe,De){var ve=I(Te=w.getGraphDiv(Te),Ae,Pe,De,function(Fe,Le,je){var Ge,Je;if(w.isTypedArray(Fe))if(je<0){var rt=new Fe.constructor(0),ot=N(Fe,Le);je<0?(Ge=ot,Je=rt):(Ge=rt,Je=ot)}else if(Ge=new Fe.constructor(je),Je=new Fe.constructor(Fe.length+Le.length-je),je===Le.length)Ge.set(Le),Je.set(Fe);else if(je<Le.length){var yt=Le.length-je;Ge.set(Le.subarray(yt)),Je.set(Fe),Je.set(Le.subarray(0,yt),Fe.length)}else{var _t=je-Le.length,mt=Fe.length-_t;Ge.set(Fe.subarray(mt)),Ge.set(Le,_t),Je.set(Fe.subarray(0,mt))}else Ge=Fe.concat(Le),Je=je>=0&&je<Ge.length?Ge.splice(0,Ge.length-je):[];return[Ge,Je]}),we=C.redraw(Te),Ee=[Te,ve.update,Pe,ve.maxPoints];return o.add(Te,C.prependTraces,Ee,xe,arguments),we},C.moveTraces=function xe(Te,Ae,Pe){var De,ve=[],we=[],Ee=xe,Fe=xe,Le=[Te=w.getGraphDiv(Te),Pe,Ae],je=[Te,Ae,Pe];if(U(Te,Ae,Pe),Ae=Array.isArray(Ae)?Ae:[Ae],Pe===void 0)for(Pe=[],De=0;De<Ae.length;De++)Pe.push(-Ae.length+De);for(Pe=Array.isArray(Pe)?Pe:[Pe],Ae=P(Ae,Te.data.length-1),Pe=P(Pe,Te.data.length-1),De=0;De<Te.data.length;De++)Ae.indexOf(De)===-1&&ve.push(Te.data[De]);for(De=0;De<Ae.length;De++)we.push({newIndex:Pe[De],trace:Te.data[Ae[De]]});for(we.sort(function(Je,rt){return Je.newIndex-rt.newIndex}),De=0;De<we.length;De+=1)ve.splice(we[De].newIndex,0,we[De].trace);Te.data=ve;var Ge=C.redraw(Te);return o.add(Te,Ee,Le,Fe,je),Ge},C.prependTraces=function xe(Te,Ae,Pe,De){var ve=I(Te=w.getGraphDiv(Te),Ae,Pe,De,function(Fe,Le,je){var Ge,Je;if(w.isTypedArray(Fe))if(je<=0){var rt=new Fe.constructor(0),ot=N(Le,Fe);je<0?(Ge=ot,Je=rt):(Ge=rt,Je=ot)}else if(Ge=new Fe.constructor(je),Je=new Fe.constructor(Fe.length+Le.length-je),je===Le.length)Ge.set(Le),Je.set(Fe);else if(je<Le.length){var yt=Le.length-je;Ge.set(Le.subarray(0,yt)),Je.set(Le.subarray(yt)),Je.set(Fe,yt)}else{var _t=je-Le.length;Ge.set(Le),Ge.set(Fe.subarray(0,_t),Le.length),Je.set(Fe.subarray(_t))}else Ge=Le.concat(Fe),Je=je>=0&&je<Ge.length?Ge.splice(je,Ge.length):[];return[Ge,Je]}),we=C.redraw(Te),Ee=[Te,ve.update,Pe,ve.maxPoints];return o.add(Te,C.extendTraces,Ee,xe,arguments),we},C.newPlot=function(xe,Te,Ae,Pe){return xe=w.getGraphDiv(xe),n.cleanPlot([],{},xe._fullData||[],xe._fullLayout||{}),n.purge(xe),C._doPlot(xe,Te,Ae,Pe)},C._doPlot=function(xe,Te,Ae,Pe){var De;if(xe=w.getGraphDiv(xe),c.init(xe),w.isPlainObject(Te)){var ve=Te;Te=ve.data,Ae=ve.layout,Pe=ve.config,De=ve.frames}if(c.triggerHandler(xe,"plotly_beforeplot",[Te,Ae,Pe])===!1)return Promise.reject();Te||Ae||w.isPlotDiv(xe)||w.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",xe),O(xe,Pe),Ae||(Ae={}),_.select(xe).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(xe._promises)||(xe._promises=[]);var we=(xe.data||[]).length===0&&Array.isArray(Te);Array.isArray(Te)&&(x.cleanData(Te),we?xe.data=Te:xe.data.push.apply(xe.data,Te),xe.empty=!1),xe.layout&&!we||(xe.layout=x.cleanLayout(Ae)),n.supplyDefaults(xe);var Ee=xe._fullLayout,Fe=Ee._has("cartesian");Ee._replotting=!0,(we||Ee._shouldCreateBgLayer)&&(function(mt){var tt=_.select(mt),Qe=mt._fullLayout;if(Qe._calcInverseTransform=Se,Qe._calcInverseTransform(mt),Qe._container=tt.selectAll(".plot-container").data([0]),Qe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Qe._paperdiv=Qe._container.selectAll(".svg-container").data([0]),Qe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Qe._glcontainer=Qe._paperdiv.selectAll(".gl-container").data([{}]),Qe._glcontainer.enter().append("div").classed("gl-container",!0),Qe._paperdiv.selectAll(".main-svg").remove(),Qe._paperdiv.select(".modebar-container").remove(),Qe._paper=Qe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Qe._toppaper=Qe._paperdiv.append("svg").classed("main-svg",!0),Qe._modebardiv=Qe._paperdiv.append("div"),delete Qe._modeBar,Qe._hoverpaper=Qe._paperdiv.append("svg").classed("main-svg",!0),!Qe._uid){var Dt={};_.selectAll("defs").each(function(){this.id&&(Dt[this.id.split("-")[1]]=1)}),Qe._uid=w.randstr(Dt)}Qe._paperdiv.selectAll(".main-svg").attr(m.svgAttrs),Qe._defs=Qe._paper.append("defs").attr("id","defs-"+Qe._uid),Qe._clips=Qe._defs.append("g").classed("clips",!0),Qe._topdefs=Qe._toppaper.append("defs").attr("id","topdefs-"+Qe._uid),Qe._topclips=Qe._topdefs.append("g").classed("clips",!0),Qe._bgLayer=Qe._paper.append("g").classed("bglayer",!0),Qe._draggers=Qe._paper.append("g").classed("draglayer",!0);var zt=Qe._paper.append("g").classed("layer-below",!0);Qe._imageLowerLayer=zt.append("g").classed("imagelayer",!0),Qe._shapeLowerLayer=zt.append("g").classed("shapelayer",!0),Qe._cartesianlayer=Qe._paper.append("g").classed("cartesianlayer",!0),Qe._polarlayer=Qe._paper.append("g").classed("polarlayer",!0),Qe._smithlayer=Qe._paper.append("g").classed("smithlayer",!0),Qe._ternarylayer=Qe._paper.append("g").classed("ternarylayer",!0),Qe._geolayer=Qe._paper.append("g").classed("geolayer",!0),Qe._funnelarealayer=Qe._paper.append("g").classed("funnelarealayer",!0),Qe._pielayer=Qe._paper.append("g").classed("pielayer",!0),Qe._iciclelayer=Qe._paper.append("g").classed("iciclelayer",!0),Qe._treemaplayer=Qe._paper.append("g").classed("treemaplayer",!0),Qe._sunburstlayer=Qe._paper.append("g").classed("sunburstlayer",!0),Qe._indicatorlayer=Qe._toppaper.append("g").classed("indicatorlayer",!0),Qe._glimages=Qe._paper.append("g").classed("glimages",!0);var pt=Qe._toppaper.append("g").classed("layer-above",!0);Qe._imageUpperLayer=pt.append("g").classed("imagelayer",!0),Qe._shapeUpperLayer=pt.append("g").classed("shapelayer",!0),Qe._selectionLayer=Qe._toppaper.append("g").classed("selectionlayer",!0),Qe._infolayer=Qe._toppaper.append("g").classed("infolayer",!0),Qe._menulayer=Qe._toppaper.append("g").classed("menulayer",!0),Qe._zoomlayer=Qe._toppaper.append("g").classed("zoomlayer",!0),Qe._hoverlayer=Qe._hoverpaper.append("g").classed("hoverlayer",!0),Qe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),mt.emit("plotly_framework")}(xe),Ee._shouldCreateBgLayer&&delete Ee._shouldCreateBgLayer),u.initGradients(xe),u.initPatterns(xe),we&&a.saveShowSpikeInitial(xe);var Le=!xe.calcdata||xe.calcdata.length!==(xe._fullData||[]).length;Le&&n.doCalcdata(xe);for(var je=0;je<xe.calcdata.length;je++)xe.calcdata[je][0].trace=xe._fullData[je];xe._context.responsive?xe._responsiveChartHandler||(xe._responsiveChartHandler=function(){w.isHidden(xe)||n.resize(xe)},window.addEventListener("resize",xe._responsiveChartHandler)):w.clearResponsive(xe);var Ge=w.extendFlat({},Ee._size),Je=0;function rt(){if(n.clearAutoMarginIds(xe),y.drawMarginPushers(xe),a.allowAutoMargin(xe),xe._fullLayout.title.text&&xe._fullLayout.title.automargin&&n.allowAutoMargin(xe,"title.automargin"),Ee._has("pie"))for(var mt=xe._fullData,tt=0;tt<mt.length;tt++){var Qe=mt[tt];Qe.type==="pie"&&Qe.automargin&&n.allowAutoMargin(xe,"pie."+Qe.uid+".automargin")}return n.doAutoMargin(xe),n.previousPromises(xe)}function ot(){xe._transitioning||(y.doAutoRangeAndConstraints(xe),we&&a.saveRangeInitial(xe),t.getComponentMethod("rangeslider","calcAutorange")(xe))}var yt=[n.previousPromises,function(){if(De)return C.addFrames(xe,De)},function mt(){for(var tt=Ee._basePlotModules,Qe=0;Qe<tt.length;Qe++)tt[Qe].drawFramework&&tt[Qe].drawFramework(xe);!Ee._glcanvas&&Ee._has("gl")&&(Ee._glcanvas=Ee._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(vt){return vt.key}),Ee._glcanvas.enter().append("canvas").attr("class",function(vt){return"gl-canvas gl-canvas-"+vt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Dt=xe._context.plotGlPixelRatio;if(Ee._glcanvas){Ee._glcanvas.attr("width",Ee.width*Dt).attr("height",Ee.height*Dt).style("width",Ee.width+"px").style("height",Ee.height+"px");var zt=Ee._glcanvas.data()[0].regl;if(zt&&(Math.floor(Ee.width*Dt)!==zt._gl.drawingBufferWidth||Math.floor(Ee.height*Dt)!==zt._gl.drawingBufferHeight)){var pt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Je)return w.log(pt+" Clearing graph and plotting again."),n.cleanPlot([],{},xe._fullData,Ee),n.supplyDefaults(xe),Ee=xe._fullLayout,n.doCalcdata(xe),Je++,mt();w.error(pt)}}return Ee.modebar.orientation==="h"?Ee._modebardiv.style("height",null).style("width","100%"):Ee._modebardiv.style("width",null).style("height",Ee.height+"px"),n.previousPromises(xe)},rt,function(){if(n.didMarginChange(Ge,Ee._size))return w.syncOrAsync([rt,y.layoutStyles],xe)}];Fe&&yt.push(function(){if(Le)return w.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),ot],xe);ot()}),yt.push(y.layoutStyles),Fe&&yt.push(function(){return a.draw(xe,we?"":"redraw")},function(mt){var tt=mt._fullLayout._insideTickLabelsUpdaterange;if(tt)return mt._fullLayout._insideTickLabelsUpdaterange=void 0,K(mt,tt).then(function(){a.saveRangeInitial(mt,!0)})}),yt.push(y.drawData,y.finalDraw,f,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var _t=w.syncOrAsync(yt,xe);return _t&&_t.then||(_t=Promise.resolve()),_t.then(function(){return k(xe),xe})},C.purge=function(xe){var Te=(xe=w.getGraphDiv(xe))._fullLayout||{},Ae=xe._fullData||[];return n.cleanPlot([],{},Ae,Te),n.purge(xe),c.purge(xe),Te._container&&Te._container.remove(),delete xe._context,xe},C.react=function(xe,Te,Ae,Pe){var De,ve;xe=w.getGraphDiv(xe),x.clearPromiseQueue(xe);var we=xe._fullData,Ee=xe._fullLayout;if(w.isPlotDiv(xe)&&we&&Ee){if(w.isPlainObject(Te)){var Fe=Te;Te=Fe.data,Ae=Fe.layout,Pe=Fe.config,De=Fe.frames}var Le=!1;if(Pe){var je=w.extendDeep({},xe._context);xe._context=void 0,O(xe,Pe),Le=he(je,xe._context)}xe.data=Te||[],x.cleanData(xe.data),xe.layout=Ae||{},x.cleanLayout(xe.layout),function(lt,xt,bt,Ve){var Be,at,ht,dt,it,kt,Tt,St,wt,At,Ft=Ve._preGUI,jt=[],rn={},nn={};for(Be in Ft){if(it=ge(Be,fe)){if(wt=it.head,At=it.tail,at=it.attr||wt+".uirevision",(dt=(ht=b(Ve,at).get())&&ke(at,xt))&&dt===ht){if((kt=Ft[Be])===null&&(kt=void 0),ae(St=(Tt=b(xt,Be)).get(),kt)){St===void 0&&At==="autorange"&&jt.push(wt),Tt.set(B(b(Ve,Be).get()));continue}if(At==="autorange"||At.substr(0,6)==="range["){var on=Ft[wt+".range[0]"],Ht=Ft[wt+".range[1]"],$t=Ft[wt+".autorange"];if($t||$t===null&&on===null&&Ht===null){if(!(wt in rn)){var bn=b(xt,wt).get();rn[wt]=bn&&(bn.autorange||bn.autorange!==!1&&(!bn.range||bn.range.length!==2))}if(rn[wt]){Tt.set(B(b(Ve,Be).get()));continue}}}}}else w.warn("unrecognized GUI edit: "+Be);delete Ft[Be],it&&it.tail.substr(0,6)==="range["&&(nn[it.head]=1)}for(var ln=0;ln<jt.length;ln++){var Kt=jt[ln];if(nn[Kt]){var fn=b(xt,Kt).get();fn&&delete fn.autorange}}var en=Ve._tracePreGUI;for(var un in en){var An,wn=en[un],On=null;for(Be in wn){if(!On){var Tn=Ce(un,bt);if(Tn<0){delete en[un];break}var Cn=de(un,lt,(An=bt[Tn]._fullInput).index);if(Cn<0){delete en[un];break}On=lt[Cn]}if(it=ge(Be,pe)){if(it.attr?dt=(ht=b(Ve,it.attr).get())&&ke(it.attr,xt):(ht=An.uirevision,(dt=On.uirevision)===void 0&&(dt=xt.uirevision)),dt&&dt===ht&&((kt=wn[Be])===null&&(kt=void 0),ae(St=(Tt=b(On,Be)).get(),kt))){Tt.set(B(b(An,Be).get()));continue}}else w.warn("unrecognized GUI edit: "+Be+" in trace uid "+un);delete wn[Be]}}}(xe.data,xe.layout,we,Ee),n.supplyDefaults(xe,{skipUpdateCalc:!0});var Ge=xe._fullData,Je=xe._fullLayout,rt=Je.datarevision===void 0,ot=Je.transition,yt=function(lt,xt,bt,Ve,Be){var at=A.layoutFlags();return at.arrays={},at.rangesAltered={},at.nChanges=0,at.nChangesAnim=0,re(xt,bt,[],{getValObject:function(ht){return i.getLayoutValObject(bt,ht)},flags:at,immutable:Ve,transition:Be,gd:lt}),(at.plot||at.calc)&&(at.layoutReplot=!0),Be&&at.nChanges&&at.nChangesAnim&&(at.anim=at.nChanges===at.nChangesAnim?"all":"some"),at}(xe,Ee,Je,rt,ot),_t=yt.newDataRevision,mt=function(lt,xt,bt,Ve,Be,at){var ht=xt.length===bt.length;if(!Be&&!ht)return{fullReplot:!0,calc:!0};var dt,it,kt=A.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var Tt={getValObject:function(wt){var At=i.getTraceValObject(it,wt);return!it._module.animatable&&At.anim&&(At.anim=!1),At},flags:kt,immutable:Ve,transition:Be,newDataRevision:at,gd:lt},St={};for(dt=0;dt<xt.length;dt++)if(bt[dt]){if(it=bt[dt]._fullInput,n.hasMakesDataTransform(it)&&(it=bt[dt]),St[it.uid])continue;St[it.uid]=1,re(xt[dt]._fullInput,it,[],Tt)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),Be&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&ht?"all":"some"),kt}(xe,we,Ge,rt,ot,_t);if(ce(xe)&&(yt.layoutReplot=!0),mt.calc||yt.calc){xe.calcdata=void 0;for(var tt=Object.getOwnPropertyNames(Je),Qe=0;Qe<tt.length;Qe++){var Dt=tt[Qe],zt=Dt.substring(0,5);if(zt==="xaxis"||zt==="yaxis"){var pt=Je[Dt]._emptyCategories;pt&&pt()}}}else n.supplyDefaultsUpdateCalc(xe.calcdata,Ge);var vt=[];if(De&&(xe._transitionData={},n.createTransitionData(xe),vt.push(function(){return C.addFrames(xe,De)})),Je.transition&&!Le&&(mt.anim||yt.anim))yt.ticks&&vt.push(y.doTicksRelayout),n.doCalcdata(xe),y.doAutoRangeAndConstraints(xe),vt.push(function(){return n.transitionFromReact(xe,mt,yt,Ee)});else if(mt.fullReplot||yt.layoutReplot||Le)xe._fullLayout._skipDefaults=!0,vt.push(C._doPlot);else{for(var We in yt.arrays){var Ze=yt.arrays[We];if(Ze.length){var Ne=t.getComponentMethod(We,"drawOne");if(Ne!==w.noop)for(var Xe=0;Xe<Ze.length;Xe++)Ne(xe,Ze[Xe]);else{var st=t.getComponentMethod(We,"draw");if(st===w.noop)throw new Error("cannot draw components: "+We);st(xe)}}}vt.push(n.previousPromises),mt.style&&vt.push(y.doTraceStyle),(mt.colorbars||yt.colorbars)&&vt.push(y.doColorBars),yt.legend&&vt.push(y.doLegend),yt.layoutstyle&&vt.push(y.layoutStyles),yt.axrange&&J(vt),yt.ticks&&vt.push(y.doTicksRelayout),yt.modebar&&vt.push(y.doModeBar),yt.camera&&vt.push(y.doCamera),vt.push(k)}vt.push(n.rehover,n.redrag,n.reselect),(ve=w.syncOrAsync(vt,xe))&&ve.then||(ve=Promise.resolve(xe))}else ve=C.newPlot(xe,Te,Ae,Pe);return ve.then(function(){return xe.emit("plotly_react",{data:Te,layout:Ae}),xe})},C.redraw=function(xe){if(xe=w.getGraphDiv(xe),!w.isPlotDiv(xe))throw new Error("This element is not a Plotly plot: "+xe);return x.cleanData(xe.data),x.cleanLayout(xe.layout),xe.calcdata=void 0,C._doPlot(xe).then(function(){return xe.emit("plotly_redraw"),xe})},C.relayout=K,C.restyle=W,C.setPlotConfig=function(xe){return w.extendFlat(g,xe)},C.update=ye,C._guiRelayout=me(K),C._guiRestyle=me(W),C._guiUpdate=me(ye),C._storeDirectGUIEdit=function(xe,Te,Ae){for(var Pe in Ae)q(Pe,b(xe,Pe).get(),Ae[Pe],Te)}},20556:function(R){"use strict";var C={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function _(T,r){for(var w in T){var b=T[w];b.valType?r[w]=b.dflt:(r[w]||(r[w]={}),_(b,r[w]))}})(C,e),R.exports={configAttributes:C,dfltConfig:e}},73060:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(45464),w=e(64859),b=e(16672),c=e(85656),o=e(20556).configAttributes,t=e(67824),i=T.extendDeepAll,n=T.isPlainObject,a=T.isArrayOrTypedArray,s=T.nestedProperty,l=T.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",f="_deprecated",m=[u,p,"_arrayAttrRegexps",f];function h(d,S,k){if(!d)return!1;if(d._isLinkedToArray){if(g(S[k]))k++;else if(k<S.length)return!1}for(;k<S.length;k++){var E=d[S[k]];if(!n(E)||(d=E,k===S.length-1))break;if(d._isLinkedToArray){if(!g(S[++k]))return!1}else if(d.valType==="info_array"){var L=S[++k];if(!g(L))return!1;var O=d.items;if(Array.isArray(O)){if(L>=O.length)return!1;if(d.dimensions===2){if(k++,S.length===k)return d;var P=S[k];if(!g(P))return!1;d=O[L][P]}else d=O[L]}else d=O}}return d}function g(d){return d===Math.round(d)&&d>=0}function v(){var d,S,k={};for(d in i(k,w),_.subplotsRegistry)if((S=_.subplotsRegistry[d]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)y(k,S,S.attr[E]);else y(k,S,S.attr==="subplot"?S.name:S.attr);for(d in _.componentsRegistry){var L=(S=_.componentsRegistry[d]).schema;if(L&&(L.subplots||L.layout)){var O=L.subplots;if(O&&O.xaxis&&!O.yaxis)for(var P in O.xaxis)delete k.yaxis[P];delete k.xaxis.shift,delete k.xaxis.autoshift}else S.name==="colorscale"?i(k,S.layoutAttributes):S.layoutAttributes&&A(k,S.layoutAttributes,S.name)}return{layoutAttributes:x(k)}}function x(d){return function(S){C.crawl(S,function(k,E,L){C.isValObject(k)?k.arrayOk!==!0&&k.valType!=="data_array"||(L[E+"src"]={valType:"string",editType:"none"}):n(k)&&(k.role="object")})}(d),function(S){C.crawl(S,function(k,E,L){if(k){var O=k[p];O&&(delete k[p],L[E]={items:{}},L[E].items[O]=k,L[E].role="object")}})}(d),function(S){(function k(E){for(var L in E)if(n(E[L]))k(E[L]);else if(Array.isArray(E[L]))for(var O=0;O<E[L].length;O++)k(E[L][O]);else E[L]instanceof RegExp&&(E[L]=E[L].toString())})(S)}(d),d}function y(d,S,k){var E=s(d,k),L=i({},S.layoutAttributes);L[u]=!0,E.set(L)}function A(d,S,k){var E=s(d,k);E.set(i(E.get()||{},S))}C.IS_SUBPLOT_OBJ=u,C.IS_LINKED_TO_ARRAY=p,C.DEPRECATED=f,C.UNDERSCORE_ATTRS=m,C.get=function(){var d={};_.allTypes.forEach(function(E){d[E]=function(L){var O,P;P=(O=_.modules[L]._module).basePlotModule;var F={type:null},U=i({},r),I=i({},O.attributes);C.crawl(I,function(B,V,q,ne,$){s(U,$).set(void 0),B===void 0&&s(I,$).set(void 0)}),i(F,U),_.traceIs(L,"noOpacity")&&delete F.opacity,_.traceIs(L,"showLegend")||(delete F.showlegend,delete F.legendgroup),_.traceIs(L,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),O.selectPoints||delete F.selectedpoints,i(F,I),P.attributes&&i(F,P.attributes),F.type=L;var N={meta:O.meta||{},categories:O.categories||{},animatable:!!O.animatable,type:L,attributes:x(F)};if(O.layoutAttributes){var W={};i(W,O.layoutAttributes),N.layoutAttributes=x(W)}return O.animatable||C.crawl(N,function(B){C.isValObject(B)&&"anim"in B&&delete B.anim}),N}(E)});var S,k={};return Object.keys(_.transformsRegistry).forEach(function(E){k[E]=function(L){var O=_.transformsRegistry[L],P=i({},O.attributes);return Object.keys(_.componentsRegistry).forEach(function(F){var U=_.componentsRegistry[F];U.schema&&U.schema.transforms&&U.schema.transforms[L]&&Object.keys(U.schema.transforms[L]).forEach(function(I){A(P,U.schema.transforms[L][I],I)})}),{attributes:x(P)}}(E)}),{defs:{valObjects:l,metaKeys:m.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:d,layout:v(),transforms:k,frames:(S={frames:i({},b)},x(S),S.frames),animation:x(c),config:x(o)}},C.crawl=function(d,S,k,E){var L=k||0;E=E||"",Object.keys(d).forEach(function(O){var P=d[O];if(m.indexOf(O)===-1){var F=(E?E+".":"")+O;S(P,O,d,L,F),C.isValObject(P)||n(P)&&O!=="impliedEdits"&&C.crawl(P,S,L+1,F)}})},C.isValObject=function(d){return d&&d.valType!==void 0},C.findArrayAttributes=function(d){var S,k,E=[],L=[],O=[];function P(B,V,q,ne){L=L.slice(0,ne).concat([V]),O=O.slice(0,ne).concat([B&&B._isLinkedToArray]),B&&(B.valType==="data_array"||B.arrayOk===!0)&&(L[ne-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&F(S,0,"")}function F(B,V,q){var ne=B[L[V]],$=q+L[V];if(V===L.length-1)a(ne)&&E.push(k+$);else if(O[V]){if(Array.isArray(ne))for(var K=0;K<ne.length;K++)n(ne[K])&&F(ne[K],V+1,$+"["+K+"].")}else n(ne)&&F(ne,V+1,$+".")}S=d,k="",C.crawl(r,P),d._module&&d._module.attributes&&C.crawl(d._module.attributes,P);var U=d.transforms;if(U)for(var I=0;I<U.length;I++){var N=U[I],W=N._module;W&&(k="transforms["+I+"].",S=N,C.crawl(W.attributes,P))}return E},C.getTraceValObject=function(d,S){var k,E,L=S[0],O=1;if(L==="transforms"){if(S.length===1)return r.transforms;var P=d.transforms;if(!Array.isArray(P)||!P.length)return!1;var F=S[1];if(!g(F)||F>=P.length)return!1;E=(k=(_.transformsRegistry[P[F].type]||{}).attributes)&&k[S[2]],O=3}else{var U=d._module;if(U||(U=(_.modules[d.type||r.type.dflt]||{})._module),!U)return!1;if(!(E=(k=U.attributes)&&k[L])){var I=U.basePlotModule;I&&I.attributes&&(E=I.attributes[L])}E||(E=r[L])}return h(E,S,O)},C.getLayoutValObject=function(d,S){var k=function(E,L){var O,P,F,U,I=E._basePlotModules;if(I){var N;for(O=0;O<I.length;O++){if((F=I[O]).attrRegex&&F.attrRegex.test(L)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!N&&F.layoutAttributes&&(N=F.layoutAttributes)}var W=F.baseLayoutAttrOverrides;if(W&&L in W)return W[L]}if(N)return N}var B=E._modules;if(B){for(O=0;O<B.length;O++)if((U=B[O].layoutAttributes)&&L in U)return U[L]}for(P in _.componentsRegistry){if((F=_.componentsRegistry[P]).name==="colorscale"&&L.indexOf("coloraxis")===0)return F.layoutAttributes[L];if(!F.schema&&L===F.name)return F.layoutAttributes}return L in w&&w[L]}(d,S[0]);return h(k,S,1)}},31780:function(R,C,e){"use strict";var _=e(3400),T=e(45464),r="templateitemname",w={name:{valType:"string",editType:"none"}};function b(o){return o&&typeof o=="string"}function c(o){var t=o.length-1;return o.charAt(t)!=="s"&&_.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}w[r]={valType:"string",editType:"calc"},C.templatedArray=function(o,t){return t._isLinkedToArray=o,t.name=w.name,t[r]=w[r],t},C.traceTemplater=function(o){var t,i,n={};for(t in o)i=o[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(a){var s={type:t=_.coerce(a,{},T,"type"),_template:null};if(t in n){i=o[t];var l=n[t]%i.length;n[t]++,s._template=i[l]}return s}}},C.newContainer=function(o,t,i){var n=o._template,a=n&&(n[t]||i&&n[i]);return _.isPlainObject(a)||(a=null),o[t]={_template:a}},C.arrayTemplater=function(o,t,i){var n=o._template,a=n&&n[c(t)],s=n&&n[t];Array.isArray(s)&&s.length||(s=[]);var l={};return{newItem:function(u){var p={name:u.name,_input:u},f=p[r]=u[r];if(!b(f))return p._template=a,p;for(var m=0;m<s.length;m++){var h=s[m];if(h.name===f)return l[f]=1,p._template=h,p}return p[i]=u[i]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<s.length;p++){var f=s[p],m=f.name;if(b(m)&&!l[m]){var h={_template:f,name:m,_input:{_templateitemname:m}};h[r]=f[r],u.push(h),l[m]=1}}return u}}},C.arrayDefaultKey=c,C.arrayEditor=function(o,t,i){var n=(_.nestedProperty(o,t).get()||[]).length,a=i._index,s=a>=n&&(i._input||{})._templateitemname;s&&(a=n);var l,u=t+"["+a+"]";function p(){l={},s&&(l[u]={},l[u][r]=s)}function f(h,g){s?_.nestedProperty(l[u],h).set(g):l[u+"."+h]=g}function m(){var h=l;return p(),h}return p(),{modifyBase:function(h,g){l[h]=g},modifyItem:f,getUpdateObj:m,applyUpdate:function(h,g){h&&f(h,g);var v=m();for(var x in v)_.nestedProperty(o,x).set(v[x])}}}},39172:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(7316),w=e(3400),b=e(72736),c=e(73696),o=e(76308),t=e(43616),i=e(81668),n=e(45460),a=e(54460),s=e(84284),l=e(71888),u=l.enforce,p=l.clean,f=e(19280).doAutoRange,m="start",h=e(33816).zindexSeparator;function g(S,k,E){for(var L=0;L<E.length;L++){var O=E[L][0],P=E[L][1];if(!(O[0]>=S[1]||O[1]<=S[0])&&P[0]<k[1]&&P[1]>k[0])return!0}return!1}function v(S){var k,E,L,O,P,F,U=S._fullLayout,I=U._size,N=I.p,W=a.list(S,"",!0);if(U._paperdiv.style({width:S._context.responsive&&U.autosize&&!S._context._hasZeroWidth&&!S.layout.width?"100%":U.width+"px",height:S._context.responsive&&U.autosize&&!S._context._hasZeroHeight&&!S.layout.height?"100%":U.height+"px"}).selectAll(".main-svg").call(t.setSize,U.width,U.height),S._context.setBackground(S,U.paper_bgcolor),C.drawMainTitle(S),n.manage(S),!U._has("cartesian"))return r.previousPromises(S);function B(Ge,Je,rt){var ot=Ge._lw/2;return Ge._id.charAt(0)==="x"?Je?rt==="top"?Je._offset-N-ot:Je._offset+Je._length+N+ot:I.t+I.h*(1-(Ge.position||0))+ot%1:Je?rt==="right"?Je._offset+Je._length+N+ot:Je._offset-N-ot:I.l+I.w*(Ge.position||0)+ot%1}for(k=0;k<W.length;k++){var V=(O=W[k])._anchorAxis;O._linepositions={},O._lw=t.crispRound(S,O.linewidth,1),O._mainLinePosition=B(O,V,O.side),O._mainMirrorPosition=O.mirror&&V?B(O,V,s.OPPOSITE_SIDE[O.side]):null}var q=[],ne=[],$=[],K=o.opacity(U.paper_bgcolor)===1&&o.opacity(U.plot_bgcolor)===1&&U.paper_bgcolor===U.plot_bgcolor;for(E in U._plots)if((L=U._plots[E]).mainplot)L.bg&&L.bg.remove(),L.bg=void 0;else{var ee=L.xaxis.domain,J=L.yaxis.domain,Z=L.plotgroup;if(g(ee,J,$)&&E.indexOf(h)===-1){var te=Z.node(),oe=L.bg=w.ensureSingle(Z,"rect","bg");te.insertBefore(oe.node(),te.childNodes[0]),ne.push(E)}else Z.select("rect.bg").remove(),$.push([ee,J]),K||(q.push(E),ne.push(E))}var se,ce,ye,me,fe,pe,ge,ke,Ce,de,ae,re,he,Se=U._bgLayer.selectAll(".bg").data(q);for(Se.enter().append("rect").classed("bg",!0),Se.exit().remove(),Se.each(function(Ge){U._plots[Ge].bg=_.select(this)}),k=0;k<ne.length;k++)L=U._plots[ne[k]],P=L.xaxis,F=L.yaxis,L.bg&&P._offset!==void 0&&F._offset!==void 0&&L.bg.call(t.setRect,P._offset-N,F._offset-N,P._length+2*N,F._length+2*N).call(o.fill,U.plot_bgcolor).style("stroke-width",0);if(!U._hasOnlyLargeSploms)for(E in U._plots){L=U._plots[E],P=L.xaxis,F=L.yaxis;var xe,Te,Ae=L.clipId="clip"+U._uid+E+"plot",Pe=w.ensureSingleById(U._clips,"clipPath",Ae,function(Ge){Ge.classed("plotclip",!0).append("rect")});L.clipRect=Pe.select("rect").attr({width:P._length,height:F._length}),t.setTranslate(L.plot,P._offset,F._offset),L._hasClipOnAxisFalse?(xe=null,Te=Ae):(xe=Ae,Te=null),t.setClipUrl(L.plot,xe,S),L.layerClipId=Te}function De(Ge){return"M"+se+","+Ge+"H"+ce}function ve(Ge){return"M"+P._offset+","+Ge+"h"+P._length}function we(Ge){return"M"+Ge+","+ke+"V"+ge}function Ee(Ge){return F._shift!==void 0&&(Ge+=F._shift),"M"+Ge+","+F._offset+"v"+F._length}function Fe(Ge,Je,rt){if(!Ge.showline||E!==Ge._mainSubplot)return"";if(!Ge._anchorAxis)return rt(Ge._mainLinePosition);var ot=Je(Ge._mainLinePosition);return Ge.mirror&&(ot+=Je(Ge._mainMirrorPosition)),ot}for(E in U._plots){L=U._plots[E],P=L.xaxis,F=L.yaxis;var Le="M0,0";x(P,E)&&(fe=A(P,"left",F,W),se=P._offset-(fe?N+fe:0),pe=A(P,"right",F,W),ce=P._offset+P._length+(pe?N+pe:0),ye=B(P,F,"bottom"),me=B(P,F,"top"),!(he=!P._anchorAxis||E!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[E]=[ye,me]),Le=Fe(P,De,ve),he&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Le+=De(ye)+De(me)),L.xlines.style("stroke-width",P._lw+"px").call(o.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),L.xlines.attr("d",Le);var je="M0,0";x(F,E)&&(ae=A(F,"bottom",P,W),ge=F._offset+F._length+(ae?N:0),re=A(F,"top",P,W),ke=F._offset-(re?N:0),Ce=B(F,P,"left"),de=B(F,P,"right"),!(he=!F._anchorAxis||E!==F._mainSubplot)||F.mirror!=="allticks"&&F.mirror!=="all"||(F._linepositions[E]=[Ce,de]),je=Fe(F,we,Ee),he&&F.showline&&(F.mirror==="all"||F.mirror==="allticks")&&(je+=we(Ce)+we(de)),L.ylines.style("stroke-width",F._lw+"px").call(o.stroke,F.showline?F.linecolor:"rgba(0,0,0,0)")),L.ylines.attr("d",je)}return a.makeClipPaths(S),r.previousPromises(S)}function x(S,k){return(S.ticks||S.showline)&&(k===S._mainSubplot||S.mirror==="all"||S.mirror==="allticks")}function y(S,k,E){if(!E.showline||!E._lw)return!1;if(E.mirror==="all"||E.mirror==="allticks")return!0;var L=E._anchorAxis;if(!L)return!1;var O=s.FROM_BL[k];return E.side===k?L.domain[O]===S.domain[O]:E.mirror&&L.domain[1-O]===S.domain[1-O]}function A(S,k,E,L){if(y(S,k,E))return E._lw;for(var O=0;O<L.length;O++){var P=L[O];if(P._mainAxis===E._mainAxis&&y(S,k,P))return P._lw}return 0}function d(S){return S==="top"?s.CAP_SHIFT+.3+"em":S==="bottom"?"-0.3em":s.MID_SHIFT+"em"}C.layoutStyles=function(S){return w.syncOrAsync([r.doAutoMargin,v],S)},C.drawMainTitle=function(S){var k=S._fullLayout.title,E=S._fullLayout,L=function($){var K=$.title,ee="middle";return w.isRightAnchor(K)?ee="end":w.isLeftAnchor(K)&&(ee=m),ee}(E),O=function($){var K=$.title,ee="0em";return w.isTopAnchor(K)?ee=s.CAP_SHIFT+"em":w.isMiddleAnchor(K)&&(ee=s.MID_SHIFT+"em"),ee}(E),P=function($,K){var ee=$.title,J=$._size,Z=0;return K!=="0em"&&K?K===s.CAP_SHIFT+"em"&&(Z=ee.pad.t):Z=-ee.pad.b,ee.y==="auto"?J.t/2:ee.yref==="paper"?J.t+J.h-J.h*ee.y+Z:$.height-$.height*ee.y+Z}(E,O),F=function($,K){var ee=$.title,J=$._size,Z=0;return K===m?Z=ee.pad.l:K==="end"&&(Z=-ee.pad.r),ee.xref==="paper"?J.l+J.w*ee.x+Z:$.width*ee.x+Z}(E,L);if(i.draw(S,"gtitle",{propContainer:E,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:E._dfltTitle.plot,subtitlePlaceholder:E._dfltTitle.subtitle,attributes:{x:F,y:P,"text-anchor":L,dy:O}}),k.text&&k.automargin){var U=_.selectAll(".gtitle"),I=t.bBox(_.selectAll(".g-gtitle").node()).height,N=function($,K,ee){var J=K.y,Z=K.yanchor,te=J>.5?"t":"b",oe=$._fullLayout.margin[te],se=0;return K.yref==="paper"?se=ee+K.pad.t+K.pad.b:K.yref==="container"&&(se=function(ce,ye,me,fe,pe){var ge=0;return me==="middle"&&(ge+=pe/2),ce==="t"?(me==="top"&&(ge+=pe),ge+=fe-ye*fe):(me==="bottom"&&(ge+=pe),ge+=ye*fe),ge}(te,J,Z,$._fullLayout.height,ee)+K.pad.t+K.pad.b),se>oe?se:0}(S,k,I);if(N>0){(function($,K,ee,J){var Z="title.automargin",te=$._fullLayout.title,oe=te.y>.5?"t":"b",se={x:te.x,y:te.y,t:0,b:0},ce={};te.yref==="paper"&&function(ye,me,fe,pe,ge){var ke=me.yref==="paper"?ye._fullLayout._size.h:ye._fullLayout.height,Ce=w.isTopAnchor(me)?pe:pe-ge,de=fe==="b"?ke-Ce:Ce;return!(w.isTopAnchor(me)&&fe==="t"||w.isBottomAnchor(me)&&fe==="b")&&de<ge}($,te,oe,K,J)?se[oe]=ee:te.yref==="container"&&(ce[oe]=ee,$._fullLayout._reservedMargin[Z]=ce),r.allowAutoMargin($,Z),r.autoMargin($,Z,se)})(S,P,N,I),U.attr({x:F,y:P,"text-anchor":L,dy:d(k.yanchor)}).call(b.positionText,F,P);var W=(k.text.match(b.BR_TAG_ALL)||[]).length;if(W){var B=s.LINE_SPACING*W+s.MID_SHIFT;k.y===0&&(B=-B),U.selectAll(".line").each(function(){var $=+this.getAttribute("dy").slice(0,-2)-B+"em";this.setAttribute("dy",$)})}var V=_.selectAll(".gtitle-subtitle");if(V.node()){var q=U.node().getBBox(),ne=q.y+q.height+i.SUBTITLE_PADDING_EM*k.subtitle.font.size;V.attr({x:F,y:ne,"text-anchor":L,dy:d(k.yanchor)}).call(b.positionText,F,ne)}}}},C.doTraceStyle=function(S){var k,E=S.calcdata,L=[];for(k=0;k<E.length;k++){var O=E[k],P=O[0]||{},F=P.trace||{},U=F._module||{},I=U.arraysToCalcdata;I&&I(O,F);var N=U.editStyle;N&&L.push({fn:N,cd0:P})}if(L.length){for(k=0;k<L.length;k++){var W=L[k];W.fn(S,W.cd0)}c(S),C.redrawReglTraces(S)}return r.style(S),T.getComponentMethod("legend","draw")(S),r.previousPromises(S)},C.doColorBars=function(S){return T.getComponentMethod("colorbar","draw")(S),r.previousPromises(S)},C.layoutReplot=function(S){var k=S.layout;return S.layout=void 0,T.call("_doPlot",S,"",k)},C.doLegend=function(S){return T.getComponentMethod("legend","draw")(S),r.previousPromises(S)},C.doTicksRelayout=function(S){return a.draw(S,"redraw"),S._fullLayout._hasOnlyLargeSploms&&(T.subplotsRegistry.splom.updateGrid(S),c(S),C.redrawReglTraces(S)),C.drawMainTitle(S),r.previousPromises(S)},C.doModeBar=function(S){var k=S._fullLayout;n.manage(S);for(var E=0;E<k._basePlotModules.length;E++){var L=k._basePlotModules[E].updateFx;L&&L(S)}return r.previousPromises(S)},C.doCamera=function(S){for(var k=S._fullLayout,E=k._subplots.gl3d,L=0;L<E.length;L++){var O=k[E[L]];O._scene.setViewport(O)}},C.drawData=function(S){var k=S._fullLayout;c(S);for(var E=k._basePlotModules,L=0;L<E.length;L++)E[L].plot(S);return C.redrawReglTraces(S),r.style(S),T.getComponentMethod("selections","draw")(S),T.getComponentMethod("shapes","draw")(S),T.getComponentMethod("annotations","draw")(S),T.getComponentMethod("images","draw")(S),k._replotting=!1,r.previousPromises(S)},C.redrawReglTraces=function(S){var k=S._fullLayout;if(k._has("regl")){var E,L,O=S._fullData,P=[],F=[];for(k._hasOnlyLargeSploms&&k._splomGrid.draw(),E=0;E<O.length;E++){var U=O[E];U.visible===!0&&U._length!==0&&(U.type==="splom"?k._splomScenes[U.uid].draw():U.type==="scattergl"?w.pushUnique(P,U.xaxis+U.yaxis):U.type==="scatterpolargl"&&w.pushUnique(F,U.subplot))}for(E=0;E<P.length;E++)(L=k._plots[P[E]])._scene&&L._scene.draw();for(E=0;E<F.length;E++)(L=k[F[E]]._subplot)._scene&&L._scene.draw()}},C.doAutoRangeAndConstraints=function(S){for(var k,E=a.list(S,"",!0),L={},O=0;O<E.length;O++)if(!L[(k=E[O])._id]){L[k._id]=1,p(S,k),f(S,k);var P=k._matchGroup;if(P)for(var F in P){var U=a.getFromId(S,F);f(S,U,k.range),L[F]=1}}u(S)},C.finalDraw=function(S){T.getComponentMethod("rangeslider","draw")(S),T.getComponentMethod("rangeselector","draw")(S)},C.drawMarginPushers=function(S){T.getComponentMethod("legend","draw")(S),T.getComponentMethod("rangeselector","draw")(S),T.getComponentMethod("sliders","draw")(S),T.getComponentMethod("updatemenus","draw")(S),T.getComponentMethod("colorbar","draw")(S)}},94828:function(R,C,e){"use strict";var _=e(3400),T=_.isPlainObject,r=e(73060),w=e(7316),b=e(45464),c=e(31780),o=e(20556).dfltConfig;function t(f,m){f=_.extendDeep({},f);var h,g,v=Object.keys(f).sort();function x(k,E,L){if(T(E)&&T(k))t(k,E);else if(Array.isArray(E)&&Array.isArray(k)){var O=c.arrayTemplater({_template:f},L);for(g=0;g<E.length;g++){var P=E[g],F=O.newItem(P)._template;F&&t(F,P)}var U=O.defaultItems();for(g=0;g<U.length;g++)E.push(U[g]._template);for(g=0;g<E.length;g++)delete E[g].templateitemname}}for(h=0;h<v.length;h++){var y=v[h],A=f[y];if(y in m?x(A,m[y],y):m[y]=A,i(y)===y)for(var d in m){var S=i(d);d===S||S!==y||d in f||x(A,m[d],y)}}}function i(f){return f.replace(/[0-9]+$/,"")}function n(f,m,h,g,v){var x=v&&h(v);for(var y in f){var A=f[y],d=l(f,y,g),S=l(f,y,v),k=h(S);if(!k){var E=i(y);E!==y&&(k=h(S=l(f,E,v)))}if(!(x&&x===k||!k||k._noTemplating||k.valType==="data_array"||k.arrayOk&&Array.isArray(A)))if(!k.valType&&T(A))n(A,m,h,d,S);else if(k._isLinkedToArray&&Array.isArray(A))for(var L=!1,O=0,P={},F=0;F<A.length;F++){var U=A[F];if(T(U)){var I=U.name;if(I)P[I]||(n(U,m,h,l(A,O,d),l(A,O,S)),O++,P[I]=1);else if(!L){var N=l(f,c.arrayDefaultKey(y),g),W=l(A,O,d);n(U,m,h,W,l(A,O,S));var B=_.nestedProperty(m,W);_.nestedProperty(m,N).set(B.get()),B.set(null),L=!0}}}else _.nestedProperty(m,d).set(A)}}function a(f,m){return r.getLayoutValObject(f,_.nestedProperty({},m).parts)}function s(f,m){return r.getTraceValObject(f,_.nestedProperty({},m).parts)}function l(f,m,h){return h?Array.isArray(f)?h+"["+m+"]":h+"."+m:m}function u(f){for(var m=0;m<f.length;m++)if(T(f[m]))return!0}function p(f){var m;switch(f.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=f.path?"There are no templates for item "+f.path+" with name "+f.templateitemname:"There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":m=f.path?"The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?"Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":"The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type."}return f.msg=m,f}C.makeTemplate=function(f){f=_.isPlainObject(f)?f:_.getGraphDiv(f),f=_.extendDeep({_context:o},{data:f.data,layout:f.layout}),w.supplyDefaults(f);var m=f.data||[],h=f.layout||{};h._basePlotModules=f._fullLayout._basePlotModules,h._modules=f._fullLayout._modules;var g={data:{},layout:{}};m.forEach(function(O){var P={};n(O,P,s.bind(null,O));var F=_.coerce(O,{},b,"type"),U=g.data[F];U||(U=g.data[F]=[]),U.push(P)}),n(h,g.layout,a.bind(null,h)),delete g.layout.template;var v=h.template;if(T(v)){var x,y,A,d,S,k,E=v.layout;T(E)&&t(E,g.layout);var L=v.data;if(T(L)){for(y in g.data)if(A=L[y],Array.isArray(A)){for(k=(S=g.data[y]).length,d=A.length,x=0;x<k;x++)t(A[x%d],S[x]);for(x=k;x<d;x++)S.push(_.extendDeep({},A[x]))}for(y in L)y in g.data||(g.data[y]=_.extendDeep([],L[y]))}}return g},C.validateTemplate=function(f,m){var h=_.extendDeep({},{_context:o,data:f.data,layout:f.layout}),g=h.layout||{};T(m)||(m=g.template||{});var v=m.layout,x=m.data,y=[];h.layout=g,h.layout.template=m,w.supplyDefaults(h);var A=h._fullLayout,d=h._fullData,S={};if(T(v)?(function U(I,N){for(var W in I)if(W.charAt(0)!=="_"&&T(I[W])){var B,V=i(W),q=[];for(B=0;B<N.length;B++)q.push(l(I,W,N[B])),V!==W&&q.push(l(I,V,N[B]));for(B=0;B<q.length;B++)S[q[B]]=1;U(I[W],q)}}(A,["layout"]),function U(I,N){for(var W in I)if(W.indexOf("defaults")===-1&&T(I[W])){var B=l(I,W,N);S[B]?U(I[W],B):y.push({code:"unused",path:B})}}(v,"layout")):y.push({code:"layout"}),T(x)){for(var k,E={},L=0;L<d.length;L++){var O=d[L];E[k=O.type]=(E[k]||0)+1,O._fullInput._template||y.push({code:"missing",index:O._fullInput.index,traceType:k})}for(k in x){var P=x[k].length,F=E[k]||0;P>F?y.push({code:"unused",traceType:k,templateCount:P,dataCount:F}):F>P&&y.push({code:"reused",traceType:k,templateCount:P,dataCount:F})}}else y.push({code:"data"});if(function U(I,N){for(var W in I)if(W.charAt(0)!=="_"){var B=I[W],V=l(I,W,N);T(B)?(Array.isArray(I)&&B._template===!1&&B.templateitemname&&y.push({code:"missing",path:V,templateitemname:B.templateitemname}),U(B,V)):Array.isArray(B)&&u(B)&&U(B,V)}}({data:d,layout:A},""),y.length)return y.map(p)}},67024:function(R,C,e){"use strict";var _=e(38248),T=e(36424),r=e(7316),w=e(3400),b=e(81792),c=e(37164),o=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};R.exports=function(n,a){var s,l,u,p;function f(F){return!(F in a)||w.validate(a[F],i[F])}if(a=a||{},w.isPlainObject(n)?(s=n.data||[],l=n.layout||{},u=n.config||{},p={}):(n=w.getGraphDiv(n),s=w.extendDeep([],n.data),l=w.extendDeep({},n.layout),u=n._context,p=n._fullLayout||{}),!f("width")&&a.width!==null||!f("height")&&a.height!==null)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Export format is not "+w.join2(i.format.values,", "," or ")+".");var m={};function h(F,U){return w.coerce(a,m,i,F,U)}var g=h("format"),v=h("width"),x=h("height"),y=h("scale"),A=h("setBackground"),d=h("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var k=w.extendFlat({},l);v?k.width=v:a.width===null&&_(p.width)&&(k.width=p.width),x?k.height=x:a.height===null&&_(p.height)&&(k.height=p.height);var E=w.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:A}),L=b.getRedrawFunc(S);function O(){return new Promise(function(F){setTimeout(F,b.getDelay(S._fullLayout))})}function P(){return new Promise(function(F,U){var I=c(S,g,y),N=S._fullLayout.width,W=S._fullLayout.height;function B(){T.purge(S),document.body.removeChild(S)}if(g==="full-json"){var V=r.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=t,V=JSON.stringify(V),B(),F(d?V:b.encodeJSON(V))}if(B(),g==="svg")return F(d?I:b.encodeSVG(I));var q=document.createElement("canvas");q.id=w.randstr(),o({format:g,width:N,height:W,scale:y,canvas:q,svg:I,promise:!0}).then(F).catch(U)})}return new Promise(function(F,U){T.newPlot(S,s,k,E).then(L).then(O).then(P).then(function(I){F(function(N){return d?N.replace(b.IMAGE_URL_PREFIX,""):N}(I))}).catch(function(I){U(I)})})}},21480:function(R,C,e){"use strict";var _=e(3400),T=e(7316),r=e(73060),w=e(20556).dfltConfig,b=_.isPlainObject,c=Array.isArray,o=_.isArrayOrTypedArray;function t(f,m,h,g,v,x){x=x||[];for(var y=Object.keys(f),A=0;A<y.length;A++){var d=y[A];if(d!=="transforms"){var S=x.slice();S.push(d);var k=f[d],E=m[d],L=l(h,d),O=(L||{}).valType,P=O==="info_array",F=O==="colorscale",U=(L||{}).items;if(s(h,d))if(b(k)&&b(E)&&O!=="any")t(k,E,L,g,v,S);else if(P&&c(k)){k.length>E.length&&g.push(a("unused",v,S.concat(E.length)));var I,N,W,B,V,q=E.length,ne=Array.isArray(U);if(ne&&(q=Math.min(q,U.length)),L.dimensions===2)for(N=0;N<q;N++)if(c(k[N])){k[N].length>E[N].length&&g.push(a("unused",v,S.concat(N,E[N].length)));var $=E[N].length;for(I=0;I<(ne?Math.min($,U[N].length):$);I++)W=ne?U[N][I]:U,B=k[N][I],V=E[N][I],_.validate(B,W)?V!==B&&V!==+B&&g.push(a("dynamic",v,S.concat(N,I),B,V)):g.push(a("value",v,S.concat(N,I),B))}else g.push(a("array",v,S.concat(N),k[N]));else for(N=0;N<q;N++)W=ne?U[N]:U,B=k[N],V=E[N],_.validate(B,W)?V!==B&&V!==+B&&g.push(a("dynamic",v,S.concat(N),B,V)):g.push(a("value",v,S.concat(N),B))}else if(L.items&&!P&&c(k)){var K,ee,J=U[Object.keys(U)[0]],Z=[];for(K=0;K<E.length;K++){var te=E[K]._index||K;if((ee=S.slice()).push(te),b(k[te])&&b(E[K])){Z.push(te);var oe=k[te],se=E[K];b(oe)&&oe.visible!==!1&&se.visible===!1?g.push(a("invisible",v,ee)):t(oe,se,J,g,v,ee)}}for(K=0;K<k.length;K++)(ee=S.slice()).push(K),b(k[K])?Z.indexOf(K)===-1&&g.push(a("unused",v,ee)):g.push(a("object",v,ee,k[K]))}else!b(k)&&b(E)?g.push(a("object",v,S,k)):o(k)||!o(E)||P||F?d in m?_.validate(k,L)?L.valType==="enumerated"&&(L.coerceNumber&&k!==+E||k!==E)&&g.push(a("dynamic",v,S,k,E)):g.push(a("value",v,S,k)):g.push(a("unused",v,S,k)):g.push(a("array",v,S,k));else g.push(a("schema",v,S))}}return g}R.exports=function(f,m){f===void 0&&(f=[]),m===void 0&&(m={});var h,g,v=r.get(),x=[],y={_context:_.extendFlat({},w)};c(f)?(y.data=_.extendDeep([],f),h=f):(y.data=[],h=[],x.push(a("array","data"))),b(m)?(y.layout=_.extendDeep({},m),g=m):(y.layout={},g={},arguments.length>1&&x.push(a("object","layout"))),T.supplyDefaults(y);for(var A=y._fullData,d=h.length,S=0;S<d;S++){var k=h[S],E=["data",S];if(b(k)){var L=A[S],O=L.type,P=v.traces[O].attributes;P.type={valType:"enumerated",values:[O]},L.visible===!1&&k.visible!==!1&&x.push(a("invisible",E)),t(k,L,P,x,E);var F=k.transforms,U=L.transforms;if(F){c(F)||x.push(a("array",E,["transforms"])),E.push("transforms");for(var I=0;I<F.length;I++){var N=["transforms",I],W=F[I].type;if(b(F[I])){var B=v.transforms[W]?v.transforms[W].attributes:{};B.type={valType:"enumerated",values:Object.keys(v.transforms)},t(F[I],U[I],B,x,E,N)}else x.push(a("object",E,N))}}}else x.push(a("object",E))}var V=y._fullLayout,q=function(ne,$){for(var K=ne.layout.layoutAttributes,ee=0;ee<$.length;ee++){var J=$[ee],Z=ne.traces[J.type],te=Z.layoutAttributes;te&&(J.subplot?_.extendFlat(K[Z.attributes.subplot.dflt],te):_.extendFlat(K,te))}return K}(v,A);return t(g,V,q,x,"layout"),x.length===0?void 0:x};var i={object:function(f,m){return(f==="layout"&&m===""?"The layout argument":f[0]==="data"&&m===""?"Trace "+f[1]+" in the data argument":n(f)+"key "+m)+" must be linked to an object container"},array:function(f,m){return(f==="data"?"The data argument":n(f)+"key "+m)+" must be linked to an array container"},schema:function(f,m){return n(f)+"key "+m+" is not part of the schema"},unused:function(f,m,h){var g=b(h)?"container":"key";return n(f)+g+" "+m+" did not get coerced"},dynamic:function(f,m,h,g){return[n(f)+"key",m,"(set to '"+h+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(f,m){return(m?n(f)+"item "+m:"Trace "+f[1])+" got defaulted to be not visible"},value:function(f,m,h){return[n(f)+"key "+m,"is set to an invalid value ("+h+")"].join(" ")}};function n(f){return c(f)?"In data trace "+f[1]+", ":"In "+f+", "}function a(f,m,h,g,v){var x,y;h=h||"",c(m)?(x=m[0],y=m[1]):(x=m,y=null);var A=function(S){if(!c(S))return String(S);for(var k="",E=0;E<S.length;E++){var L=S[E];typeof L=="number"?k=k.substr(0,k.length-1)+"["+L+"]":k+=L,E<S.length-1&&(k+=".")}return k}(h),d=i[f](m,A,g,v);return _.log(d),{code:f,container:x,trace:y,path:h,astr:A,msg:d}}function s(f,m){var h=p(m),g=h.keyMinusId,v=h.id;return!!(g in f&&f[g]._isSubplotObj&&v)||m in f}function l(f,m){return m in f?f[m]:f[p(m).keyMinusId]}var u=_.counterRegex("([a-z]+)");function p(f){var m=f.match(u);return{keyMinusId:m&&m[1],id:m&&m[2]}}},85656:function(R){"use strict";R.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(R,C,e){"use strict";var _=e(3400),T=e(31780);R.exports=function(r,w,b){var c,o,t=b.name,i=b.inclusionAttr||"visible",n=w[t],a=_.isArrayOrTypedArray(r[t])?r[t]:[],s=w[t]=[],l=T.arrayTemplater(w,t,i);for(c=0;c<a.length;c++){var u=a[c];_.isPlainObject(u)?o=l.newItem(u):(o=l.newItem({}))[i]=!1,o._index=c,o[i]!==!1&&b.handleItemDefaults(u,o,w,b),s.push(o)}var p=l.defaultItems();for(c=0;c<p.length;c++)(o=p[c])._index=s.length,b.handleItemDefaults({},o,w,b,{}),s.push(o);if(_.isArrayOrTypedArray(n)){var f=Math.min(n.length,s.length);for(c=0;c<f;c++)_.relinkPrivateKeys(s[c],n[c])}return s}},45464:function(R,C,e){"use strict";var _=e(25376),T=e(55756);R.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:_({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:T.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=T.dateTime2ms,w=T.incrementMonth,b=e(39032).ONEAVGMONTH;R.exports=function(c,o,t,i){if(o.type!=="date")return{vals:i};var n=c[t+"periodalignment"];if(!n)return{vals:i};var a,s=c[t+"period"];if(_(s)){if((s=+s)<=0)return{vals:i}}else if(typeof s=="string"&&s.charAt(0)==="M"){var l=+s.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};a=l}for(var u=o.calendar,p=n==="start",f=n==="end",m=c[t+"period0"],h=r(m,u)||0,g=[],v=[],x=[],y=i.length,A=0;A<y;A++){var d,S,k,E=i[A];if(a){for(d=Math.round((E-h)/(a*b)),k=w(h,a*d,u);k>E;)k=w(k,-a,u);for(;k<=E;)k=w(k,a,u);S=w(k,-a,u)}else{for(k=h+(d=Math.round((E-h)/s))*s;k>E;)k-=s;for(;k<=E;)k+=s;S=k-s}g[A]=p?S:f?k:(S+k)/2,v[A]=S,x[A]=k}return{vals:g,starts:v,ends:x}}},26720:function(R){"use strict";R.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(3400),w=e(39032).FP_SAFE,b=e(24040),c=e(43616),o=e(79811),t=o.getFromId,i=o.isLinked;function n(A,d){var S,k,E=[],L=A._fullLayout,O=s(L,d,0),P=s(L,d,1),F=u(A,d),U=F.min,I=F.max;if(U.length===0||I.length===0)return r.simpleMap(d.range,d.r2l);var N=U[0].val,W=I[0].val;for(S=1;S<U.length&&N===W;S++)N=Math.min(N,U[S].val);for(S=1;S<I.length&&N===W;S++)W=Math.max(W,I[S].val);var B=d.autorange,V=B==="reversed"||B==="min reversed"||B==="max reversed";if(!V&&d.range){var q=r.simpleMap(d.range,d.r2l);V=q[1]<q[0]}d.autorange==="reversed"&&(d.autorange=!0);var ne,$,K,ee,J,Z,te=d.rangemode,oe=te==="tozero",se=te==="nonnegative",ce=d._length,ye=ce/10,me=0;for(S=0;S<U.length;S++)for(ne=U[S],k=0;k<I.length;k++)(Z=($=I[k]).val-ne.val-a(d,ne.val,$.val))>0&&((J=ce-O(ne)-P($))>ye?Z/J>me&&(K=ne,ee=$,me=Z/J):Z/ce>me&&(K={val:ne.val,nopad:1},ee={val:$.val,nopad:1},me=Z/ce));if(N===W){var fe=N-1,pe=N+1;if(oe)if(N===0)E=[0,1];else{var ge=(N>0?I:U).reduce(function(Ce,de){return Math.max(Ce,P(de))},0),ke=N/(1-Math.min(.5,ge/ce));E=N>0?[0,ke]:[ke,0]}else E=se?[Math.max(0,fe),Math.max(1,pe)]:[fe,pe]}else oe?(K.val>=0&&(K={val:0,nopad:1}),ee.val<=0&&(ee={val:0,nopad:1})):se&&(K.val-me*O(K)<0&&(K={val:0,nopad:1}),ee.val<=0&&(ee={val:1,nopad:1})),me=(ee.val-K.val-a(d,ne.val,$.val))/(ce-O(K)-P(ee)),E=[K.val-me*O(K),ee.val+me*P(ee)];return E=y(E,d),d.limitRange&&d.limitRange(),V&&E.reverse(),r.simpleMap(E,d.l2r||Number)}function a(A,d,S){var k=0;if(A.rangebreaks)for(var E=A.locateBreaks(d,S),L=0;L<E.length;L++){var O=E[L];k+=O.max-O.min}return k}function s(A,d,S){var k=.05*d._length,E=d._anchorAxis||{};if((d.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var L=d.isReversed();if(!L){var O=r.simpleMap(d.range,d.r2l);L=O[1]<O[0]}L&&(S=!S)}var P=0;return i(A,d._id)||(P=function(F,U,I){var N=0,W=U._id.charAt(0)==="x";for(var B in F._plots){var V=F._plots[B];if(U._id===V.xaxis._id||U._id===V.yaxis._id){var q=(W?V.yaxis:V.xaxis)||{};if((q.ticklabelposition||"").indexOf("inside")!==-1&&(!I&&(q.side==="left"||q.side==="bottom")||I&&(q.side==="top"||q.side==="right"))){if(q._vals){var ne=r.deg2rad(q._tickAngles[q._id+"tick"]||0),$=Math.abs(Math.cos(ne)),K=Math.abs(Math.sin(ne));if(!q._vals[0].bb){var ee=q._id+"tick";q._selections[ee].each(function(se){var ce=_.select(this);ce.select(".text-math-group").empty()&&(se.bb=c.bBox(ce.node()))})}for(var J=0;J<q._vals.length;J++){var Z=q._vals[J].bb;if(Z){var te=2*l+Z.width,oe=2*l+Z.height;N=Math.max(N,W?Math.max(te*$,oe*K):Math.max(oe*$,te*K))}}}q.ticks==="inside"&&q.ticklabelposition==="inside"&&(N+=q.ticklen||0)}}}return N}(A,d,S)),k=Math.max(P,k),d.constrain==="domain"&&d._inputDomain&&(k*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0])),function(F){return F.nopad?0:F.pad+(F.extrapad?k:P)}}R.exports={applyAutorangeOptions:y,getAutoRange:n,makePadFn:s,doAutoRange:function(A,d,S){if(d.setScale(),d.autorange){d.range=S?S.slice():n(A,d),d._r=d.range.slice(),d._rl=r.simpleMap(d._r,d.r2l);var k=d._input,E={};E[d._attr+".range"]=d.range,E[d._attr+".autorange"]=d.autorange,b.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,E),k.range=d.range.slice(),k.autorange=d.autorange}var L=d._anchorAxis;if(L&&L.rangeslider){var O=L.rangeslider[d._name];O&&O.rangemode==="auto"&&(O.range=n(A,d)),L._input.rangeslider[d._name]=r.extendFlat({},O)}},findExtremes:function(A,d,S){S||(S={}),A._m||A.setScale();var k,E,L,O,P,F,U,I,N,W=[],B=[],V=d.length,q=S.padded||!1,ne=S.tozero&&(A.type==="linear"||A.type==="-"),$=A.type==="log",K=!1,ee=S.vpadLinearized||!1;function J(fe){if(Array.isArray(fe))return K=!0,function(ge){return Math.max(Number(fe[ge]||0),0)};var pe=Math.max(Number(fe||0),0);return function(){return pe}}var Z=J((A._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),te=J((A._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),oe=J(S.vpadplus||S.vpad),se=J(S.vpadminus||S.vpad);if(!K){if(I=1/0,N=-1/0,$)for(k=0;k<V;k++)(E=d[k])<I&&E>0&&(I=E),E>N&&E<w&&(N=E);else for(k=0;k<V;k++)(E=d[k])<I&&E>-w&&(I=E),E>N&&E<w&&(N=E);d=[I,N],V=2}var ce={tozero:ne,extrapad:q};function ye(fe){L=d[fe],T(L)&&(F=Z(fe),U=te(fe),ee?(O=A.c2l(L)-se(fe),P=A.c2l(L)+oe(fe)):(I=L-se(fe),N=L+oe(fe),$&&I<N/10&&(I=N/10),O=A.c2l(I),P=A.c2l(N)),ne&&(O=Math.min(0,O),P=Math.max(0,P)),h(O)&&p(W,O,U,ce),h(P)&&f(B,P,F,ce))}var me=Math.min(6,V);for(k=0;k<me;k++)ye(k);for(k=V-1;k>=me;k--)ye(k);return{min:W,max:B,opts:S}},concatExtremes:u};var l=3;function u(A,d,S){var k,E,L,O=d._id,P=A._fullData,F=A._fullLayout,U=[],I=[];function N(ne,$){for(k=0;k<$.length;k++){var K=ne[$[k]],ee=(K._extremes||{})[O];if(K.visible===!0&&ee){for(E=0;E<ee.min.length;E++)L=ee.min[E],p(U,L.val,L.pad,{extrapad:L.extrapad});for(E=0;E<ee.max.length;E++)L=ee.max[E],f(I,L.val,L.pad,{extrapad:L.extrapad})}}}if(N(P,d._traceIndices),N(F.annotations||[],d._annIndices||[]),N(F.shapes||[],d._shapeIndices||[]),d._matchGroup&&!S){for(var W in d._matchGroup)if(W!==d._id){var B=t(A,W),V=u(A,B,!0),q=d._length/B._length;for(E=0;E<V.min.length;E++)L=V.min[E],p(U,L.val,L.pad*q,{extrapad:L.extrapad});for(E=0;E<V.max.length;E++)L=V.max[E],f(I,L.val,L.pad*q,{extrapad:L.extrapad})}}return{min:U,max:I}}function p(A,d,S,k){m(A,d,S,k,g)}function f(A,d,S,k){m(A,d,S,k,v)}function m(A,d,S,k,E){for(var L=k.tozero,O=k.extrapad,P=!0,F=0;F<A.length&&P;F++){var U=A[F];if(E(U.val,d)&&U.pad>=S&&(U.extrapad||!O)){P=!1;break}E(d,U.val)&&U.pad<=S&&(O||!U.extrapad)&&(A.splice(F,1),F--)}if(P){var I=L&&d===0;A.push({val:d,pad:I?0:S,extrapad:!I&&O})}}function h(A){return T(A)&&Math.abs(A)<w}function g(A,d){return A<=d}function v(A,d){return A>=d}function x(A,d,S){return d===void 0||S===void 0||(d=A.d2l(d))<A.d2l(S)}function y(A,d){if(!d||!d.autorangeoptions)return A;var S=A[0],k=A[1],E=d.autorangeoptions.include;if(E!==void 0){var L=d.d2l(S),O=d.d2l(k);r.isArrayOrTypedArray(E)||(E=[E]);for(var P=0;P<E.length;P++){var F=d.d2l(E[P]);L>=F&&(L=F,S=F),O<=F&&(O=F,k=F)}}return S=function(U,I){var N=I.autorangeoptions;return N&&N.minallowed!==void 0&&x(I,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&x(I,N.clipmin,N.clipmax)?Math.max(U,I.d2l(N.clipmin)):U}(S,d),k=function(U,I){var N=I.autorangeoptions;return N&&N.maxallowed!==void 0&&x(I,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&x(I,N.clipmin,N.clipmax)?Math.min(U,I.d2l(N.clipmax)):U}(k,d),[S,k]}},76808:function(R){"use strict";R.exports=function(C,e,_){var T,r;if(_){var w=e==="reversed"||e==="min reversed"||e==="max reversed";T=_[w?1:0],r=_[w?0:1]}var b=C("autorangeoptions.minallowed",r===null?T:void 0),c=C("autorangeoptions.maxallowed",T===null?r:void 0);b===void 0&&C("autorangeoptions.clipmin"),c===void 0&&C("autorangeoptions.clipmax"),C("autorangeoptions.include")}},54460:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(7316),w=e(24040),b=e(3400),c=b.strTranslate,o=e(72736),t=e(81668),i=e(76308),n=e(43616),a=e(94724),s=e(98728),l=e(39032),u=l.ONEMAXYEAR,p=l.ONEAVGYEAR,f=l.ONEMINYEAR,m=l.ONEMAXQUARTER,h=l.ONEAVGQUARTER,g=l.ONEMINQUARTER,v=l.ONEMAXMONTH,x=l.ONEAVGMONTH,y=l.ONEMINMONTH,A=l.ONEWEEK,d=l.ONEDAY,S=d/2,k=l.ONEHOUR,E=l.ONEMIN,L=l.ONESEC,O=l.ONEMILLI,P=l.ONEMICROSEC,F=l.MINUS_SIGN,U=l.BADNUM,I={K:"zeroline"},N={K:"gridline",L:"path"},W={K:"minor-gridline",L:"path"},B={K:"tick",L:"path"},V={K:"tick",L:"text"},q={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},ne=e(84284),$=ne.MID_SHIFT,K=ne.CAP_SHIFT,ee=ne.LINE_SPACING,J=ne.OPPOSITE_SIDE,Z=R.exports={};Z.setConvert=e(78344);var te=e(52976),oe=e(79811),se=oe.idSort,ce=oe.isLinked;Z.id2name=oe.id2name,Z.name2id=oe.name2id,Z.cleanId=oe.cleanId,Z.list=oe.list,Z.listIds=oe.listIds,Z.getFromId=oe.getFromId,Z.getFromTrace=oe.getFromTrace;var ye=e(19280);Z.getAutoRange=ye.getAutoRange,Z.findExtremes=ye.findExtremes;var me=1e-4;function fe(Ve){var Be=(Ve[1]-Ve[0])*me;return[Ve[0]-Be,Ve[1]+Be]}Z.coerceRef=function(Ve,Be,at,ht,dt,it){var kt=ht.charAt(ht.length-1),Tt=at._fullLayout._subplots[kt+"axis"],St=ht+"ref",wt={};return dt||(dt=Tt[0]||(typeof it=="string"?it:it[0])),it||(it=dt),Tt=Tt.concat(Tt.map(function(At){return At+" domain"})),wt[St]={valType:"enumerated",values:Tt.concat(it?typeof it=="string"?[it]:it:[]),dflt:dt},b.coerce(Ve,Be,wt,St)},Z.getRefType=function(Ve){return Ve===void 0?Ve:Ve==="paper"?"paper":Ve==="pixel"?"pixel":/( domain)$/.test(Ve)?"domain":"range"},Z.coercePosition=function(Ve,Be,at,ht,dt,it){var kt,Tt;if(Z.getRefType(ht)!=="range")kt=b.ensureNumber,Tt=at(dt,it);else{var St=Z.getFromId(Be,ht);Tt=at(dt,it=St.fraction2r(it)),kt=St.cleanPos}Ve[dt]=kt(Tt)},Z.cleanPosition=function(Ve,Be,at){return(at==="paper"||at==="pixel"?b.ensureNumber:Z.getFromId(Be,at).cleanPos)(Ve)},Z.redrawComponents=function(Ve,Be){Be=Be||Z.listIds(Ve);var at=Ve._fullLayout;function ht(dt,it,kt,Tt){for(var St=w.getComponentMethod(dt,it),wt={},At=0;At<Be.length;At++)for(var Ft=at[Z.id2name(Be[At])][kt],jt=0;jt<Ft.length;jt++){var rn=Ft[jt];if(!wt[rn]&&(St(Ve,rn),wt[rn]=1,Tt))return}}ht("annotations","drawOne","_annIndices"),ht("shapes","drawOne","_shapeIndices"),ht("images","draw","_imgIndices",!0),ht("selections","drawOne","_selectionIndices")};var pe=Z.getDataConversions=function(Ve,Be,at,ht){var dt,it=at==="x"||at==="y"||at==="z"?at:ht;if(b.isArrayOrTypedArray(it)){if(dt={type:te(ht,void 0,{autotypenumbers:Ve._fullLayout.autotypenumbers}),_categories:[]},Z.setConvert(dt),dt.type==="category")for(var kt=0;kt<ht.length;kt++)dt.d2c(ht[kt])}else dt=Z.getFromTrace(Ve,Be,it);return dt?{d2c:dt.d2c,c2d:dt.c2d}:it==="ids"?{d2c:ke,c2d:ke}:{d2c:ge,c2d:ge}};function ge(Ve){return+Ve}function ke(Ve){return String(Ve)}function Ce(Ve,Be){return Math.abs((Ve/Be+.5)%1-.5)<.001}function de(Ve,Be){return Math.abs(Ve/Be-1)<.001}function ae(Ve){return+Ve.substring(1)}function re(Ve,Be){return Ve.rangebreaks&&(Be=Be.filter(function(at){return Ve.maskBreaks(at.x)!==U})),Be}function he(Ve){var Be=Ve._mainAxis,at=[];if(Be._vals){for(var ht=0;ht<Be._vals.length;ht++)if(!Be._vals[ht].noTick){var dt=Be.l2p(Be._vals[ht].x),it=Ve.p2l(dt),kt=Z.tickText(Ve,it);Be._vals[ht].minor&&(kt.minor=!0,kt.text=""),at.push(kt)}}return re(Ve,at)}function Se(Ve,Be){var at=fe(b.simpleMap(Ve.range,Ve.r2l)),ht=Math.min(at[0],at[1]),dt=Math.max(at[0],at[1]),it=Ve.type==="category"?Ve.d2l_noadd:Ve.d2l;Ve.type==="log"&&String(Ve.dtick).charAt(0)!=="L"&&(Ve.dtick="L"+Math.pow(10,Math.floor(Math.min(Ve.range[0],Ve.range[1]))-1));for(var kt=[],Tt=0;Tt<=1;Tt++)if((Be===void 0||!(Be&&Tt||Be===!1&&!Tt))&&(!Tt||Ve.minor)){var St=Tt?Ve.minor.tickvals:Ve.tickvals,wt=Tt?[]:Ve.ticktext;if(St){b.isArrayOrTypedArray(wt)||(wt=[]);for(var At=0;At<St.length;At++){var Ft=it(St[At]);if(Ft>ht&&Ft<dt){var jt=Z.tickText(Ve,Ft,!1,String(wt[At]));Tt&&(jt.minor=!0,jt.text=""),kt.push(jt)}}}}return re(Ve,kt)}Z.getDataToCoordFunc=function(Ve,Be,at,ht){return pe(Ve,Be,at,ht).d2c},Z.counterLetter=function(Ve){var Be=Ve.charAt(0);return Be==="x"?"y":Be==="y"?"x":void 0},Z.minDtick=function(Ve,Be,at,ht){["log","category","multicategory"].indexOf(Ve.type)===-1&&ht?Ve._minDtick===void 0?(Ve._minDtick=Be,Ve._forceTick0=at):Ve._minDtick&&((Ve._minDtick/Be+1e-6)%1<2e-6&&((at-Ve._forceTick0)/Be%1+1.000001)%1<2e-6?(Ve._minDtick=Be,Ve._forceTick0=at):((Be/Ve._minDtick+1e-6)%1>2e-6||((at-Ve._forceTick0)/Ve._minDtick%1+1.000001)%1>2e-6)&&(Ve._minDtick=0)):Ve._minDtick=0},Z.saveRangeInitial=function(Ve,Be){for(var at=Z.list(Ve,"",!0),ht=!1,dt=0;dt<at.length;dt++){var it=at[dt],kt=it._rangeInitial0===void 0&&it._rangeInitial1===void 0,Tt=kt||it.range[0]!==it._rangeInitial0||it.range[1]!==it._rangeInitial1,St=it.autorange;(kt&&St!==!0||Be&&Tt)&&(it._rangeInitial0=St==="min"||St==="max reversed"?void 0:it.range[0],it._rangeInitial1=St==="max"||St==="min reversed"?void 0:it.range[1],it._autorangeInitial=St,ht=!0)}return ht},Z.saveShowSpikeInitial=function(Ve,Be){for(var at=Z.list(Ve,"",!0),ht=!1,dt="on",it=0;it<at.length;it++){var kt=at[it],Tt=kt._showSpikeInitial===void 0,St=Tt||kt.showspikes!==kt._showspikes;(Tt||Be&&St)&&(kt._showSpikeInitial=kt.showspikes,ht=!0),dt!=="on"||kt.showspikes||(dt="off")}return Ve._fullLayout._cartesianSpikesEnabled=dt,ht},Z.autoBin=function(Ve,Be,at,ht,dt,it){var kt,Tt=b.aggNums(Math.min,null,Ve),St=b.aggNums(Math.max,null,Ve);if(Be.type==="category"||Be.type==="multicategory")return{start:Tt-.5,end:St+.5,size:Math.max(1,Math.round(it)||1),_dataSpan:St-Tt};if(dt||(dt=Be.calendar),kt=Be.type==="log"?{type:"linear",range:[Tt,St]}:{type:Be.type,range:b.simpleMap([Tt,St],Be.c2r,0,dt),calendar:dt},Z.setConvert(kt),it=it&&s.dtick(it,kt.type))kt.dtick=it,kt.tick0=s.tick0(void 0,kt.type,dt);else{var wt;if(at)wt=(St-Tt)/at;else{var At=b.distinctVals(Ve),Ft=Math.pow(10,Math.floor(Math.log(At.minDiff)/Math.LN10)),jt=Ft*b.roundUp(At.minDiff/Ft,[.9,1.9,4.9,9.9],!0);wt=Math.max(jt,2*b.stdev(Ve)/Math.pow(Ve.length,ht?.25:.4)),T(wt)||(wt=1)}Z.autoTicks(kt,wt)}var rn,nn=kt.dtick,on=Z.tickIncrement(Z.tickFirst(kt),nn,"reverse",dt);if(typeof nn=="number")on=function(Ht,$t,bn,ln,Kt){var fn=0,en=0,un=0,An=0;function wn(Bn){return(1+100*(Bn-Ht)/bn.dtick)%100<2}for(var On=0;On<$t.length;On++)$t[On]%1==0?un++:T($t[On])||An++,wn($t[On])&&fn++,wn($t[On]+bn.dtick/2)&&en++;var Tn=$t.length-An;if(un===Tn&&bn.type!=="date")bn.dtick<1?Ht=ln-.5*bn.dtick:(Ht-=.5)+bn.dtick<ln&&(Ht+=bn.dtick);else if(en<.1*Tn&&(fn>.3*Tn||wn(ln)||wn(Kt))){var Cn=bn.dtick/2;Ht+=Ht+Cn<ln?Cn:-Cn}return Ht}(on,Ve,kt,Tt,St),rn=on+(1+Math.floor((St-on)/nn))*nn;else for(kt.dtick.charAt(0)==="M"&&(on=function(Ht,$t,bn,ln,Kt){var fn=b.findExactDates($t,Kt);if(fn.exactDays>.8){var en=Number(bn.substr(1));fn.exactYears>.8&&en%12==0?Ht=Z.tickIncrement(Ht,"M6","reverse")+1.5*d:fn.exactMonths>.8?Ht=Z.tickIncrement(Ht,"M1","reverse")+15.5*d:Ht-=S;var un=Z.tickIncrement(Ht,bn);if(un<=ln)return un}return Ht}(on,Ve,nn,Tt,dt)),rn=on;rn<=St;)rn=Z.tickIncrement(rn,nn,!1,dt);return{start:Be.c2r(on,0,dt),end:Be.c2r(rn,0,dt),size:nn,_dataSpan:St-Tt}},Z.prepMinorTicks=function(Ve,Be,at){if(!Be.minor.dtick){delete Ve.dtick;var ht,dt=Be.dtick&&T(Be._tmin);if(dt){var it=Z.tickIncrement(Be._tmin,Be.dtick,!0);ht=[Be._tmin,.99*it+.01*Be._tmin]}else{var kt=b.simpleMap(Be.range,Be.r2l);ht=[kt[0],.8*kt[0]+.2*kt[1]]}if(Ve.range=b.simpleMap(ht,Be.l2r),Ve._isMinor=!0,Z.prepTicks(Ve,at),dt){var Tt=T(Be.dtick),St=T(Ve.dtick),wt=Tt?Be.dtick:+Be.dtick.substring(1),At=St?Ve.dtick:+Ve.dtick.substring(1);Tt&&St?Ce(wt,At)?wt===2*A&&At===2*d&&(Ve.dtick=A):wt===2*A&&At===3*d?Ve.dtick=A:wt!==A||(Be._input.minor||{}).nticks?de(wt/At,2.5)?Ve.dtick=wt/2:Ve.dtick=wt:Ve.dtick=d:String(Be.dtick).charAt(0)==="M"?St?Ve.dtick="M1":Ce(wt,At)?wt>=12&&At===2&&(Ve.dtick="M3"):Ve.dtick=Be.dtick:String(Ve.dtick).charAt(0)==="L"?String(Be.dtick).charAt(0)==="L"?Ce(wt,At)||(Ve.dtick=de(wt/At,2.5)?Be.dtick/2:Be.dtick):Ve.dtick="D1":Ve.dtick==="D2"&&+Be.dtick>1&&(Ve.dtick=1)}Ve.range=Be.range}Be.minor._tick0Init===void 0&&(Ve.tick0=Be.tick0)},Z.prepTicks=function(Ve,Be){var at=b.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Be);if(Ve.tickmode==="auto"||!Ve.dtick){var ht,dt=Ve.nticks;dt||(Ve.type==="category"||Ve.type==="multicategory"?(ht=Ve.tickfont?b.bigFont(Ve.tickfont.size||12):15,dt=Ve._length/ht):(ht=Ve._id.charAt(0)==="y"?40:80,dt=b.constrain(Ve._length/ht,4,9)+1),Ve._name==="radialaxis"&&(dt*=2)),Ve.minor&&Ve.minor.tickmode!=="array"||Ve.tickmode==="array"&&(dt*=100),Ve._roughDTick=Math.abs(at[1]-at[0])/dt,Z.autoTicks(Ve,Ve._roughDTick),Ve._minDtick>0&&Ve.dtick<2*Ve._minDtick&&(Ve.dtick=Ve._minDtick,Ve.tick0=Ve.l2r(Ve._forceTick0))}Ve.ticklabelmode==="period"&&function(it){var kt;function Tt(){return!(T(it.dtick)||it.dtick.charAt(0)!=="M")}var St=Tt(),wt=Z.getTickFormat(it);if(wt){var At=it._dtickInit!==it.dtick;/%[fLQsSMX]/.test(wt)||(/%[HI]/.test(wt)?(kt=k,At&&!St&&it.dtick<k&&(it.dtick=k)):/%p/.test(wt)?(kt=S,At&&!St&&it.dtick<S&&(it.dtick=S)):/%[Aadejuwx]/.test(wt)?(kt=d,At&&!St&&it.dtick<d&&(it.dtick=d)):/%[UVW]/.test(wt)?(kt=A,At&&!St&&it.dtick<A&&(it.dtick=A)):/%[Bbm]/.test(wt)?(kt=x,At&&(St?ae(it.dtick)<1:it.dtick<y)&&(it.dtick="M1")):/%[q]/.test(wt)?(kt=h,At&&(St?ae(it.dtick)<3:it.dtick<g)&&(it.dtick="M3")):/%[Yy]/.test(wt)&&(kt=p,At&&(St?ae(it.dtick)<12:it.dtick<f)&&(it.dtick="M12")))}(St=Tt())&&it.tick0===it._dowTick0&&(it.tick0=it._rawTick0),it._definedDelta=kt}(Ve),Ve.tick0||(Ve.tick0=Ve.type==="date"?"2000-01-01":0),Ve.type==="date"&&Ve.dtick<.1&&(Ve.dtick=.1),Fe(Ve)},Z.calcTicks=function(Ve,Be){for(var at,ht,dt,it,kt=Ve.type,Tt=Ve.calendar,St=Ve.ticklabelstep,wt=Ve.ticklabelmode==="period",At=Ve.range[0]>Ve.range[1],Ft=!Ve.ticklabelindex||b.isArrayOrTypedArray(Ve.ticklabelindex)?Ve.ticklabelindex:[Ve.ticklabelindex],jt=b.simpleMap(Ve.range,Ve.r2l,void 0,void 0,Be),rn=jt[1]<jt[0],nn=Math.min(jt[0],jt[1]),on=Math.max(jt[0],jt[1]),Ht=Math.max(1e3,Ve._length||0),$t=[],bn=[],ln=[],Kt=[],fn=[],en=Ve.minor&&(Ve.minor.ticks||Ve.minor.showgrid),un=1;un>=(en?0:1);un--){var An=!un;un?(Ve._dtickInit=Ve.dtick,Ve._tick0Init=Ve.tick0):(Ve.minor._dtickInit=Ve.minor.dtick,Ve.minor._tick0Init=Ve.minor.tick0);var wn=un?Ve:b.extendFlat({},Ve,Ve.minor);if(An?Z.prepMinorTicks(wn,Ve,Be):Z.prepTicks(wn,Be),wn.tickmode!=="array")if(wn.tickmode!=="sync"){var On=fe(jt),Tn=On[0],Cn=On[1],Bn=T(wn.dtick),Xn=kt==="log"&&!(Bn||wn.dtick.charAt(0)==="L"),cr=Z.tickFirst(wn,Be);if(un){if(Ve._tmin=cr,cr<Tn!==rn)break;kt!=="category"&&kt!=="multicategory"||(Cn=rn?Math.max(-.5,Cn):Math.min(Ve._categories.length-.5,Cn))}var Yn,jn,Kn=null,or=cr;un&&(Bn?jn=Ve.dtick:kt==="date"?typeof Ve.dtick=="string"&&Ve.dtick.charAt(0)==="M"&&(jn=x*Ve.dtick.substring(1)):jn=Ve._roughDTick,Yn=Math.round((Ve.r2l(or)-Ve.r2l(Ve.tick0))/jn)-1);var Qt=wn.dtick;for(wn.rangebreaks&&wn._tick0Init!==wn.tick0&&(or=st(or,Ve),rn||(or=Z.tickIncrement(or,Qt,!rn,Tt))),un&&wt&&(or=Z.tickIncrement(or,Qt,!rn,Tt),Yn--);rn?or>=Cn:or<=Cn;or=Z.tickIncrement(or,Qt,rn,Tt)){if(un&&Yn++,wn.rangebreaks&&!rn){if(or<Tn)continue;if(wn.maskBreaks(or)===U&&st(or,wn)>=on)break}if(ln.length>Ht||or===Kn)break;Kn=or;var an={value:or};un?(Xn&&or!==(0|or)&&(an.simpleLabel=!0),St>1&&Yn%St&&(an.skipLabel=!0),ln.push(an)):(an.minor=!0,Kt.push(an))}}else ln=[],$t=he(Ve);else un?(ln=[],$t=Se(Ve,!An)):(Kt=[],bn=Se(Ve,!An))}if(!Kt||Kt.length<2?Ft=!1:(at=(Kt[1].value-Kt[0].value)*(At?-1:1),ht=Ve.tickformat,(/%f/.test(ht)?at>=P:/%L/.test(ht)?at>=O:/%[SX]/.test(ht)?at>=L:/%M/.test(ht)?at>=E:/%[HI]/.test(ht)?at>=k:/%p/.test(ht)?at>=S:/%[Aadejuwx]/.test(ht)?at>=d:/%[UVW]/.test(ht)?at>=A:/%[Bbm]/.test(ht)?at>=y:/%[q]/.test(ht)?at>=g:!/%[Yy]/.test(ht)||at>=f)||(Ft=!1)),Ft){var Dn=ln.concat(Kt);wt&&ln.length&&(Dn=Dn.slice(1)),(Dn=Dn.sort(function(qt,Nt){return qt.value-Nt.value}).filter(function(qt,Nt,tn){return Nt===0||qt.value!==tn[Nt-1].value})).map(function(qt,Nt){return qt.minor!==void 0||qt.skipLabel?null:Nt}).filter(function(qt){return qt!==null}).forEach(function(qt){Ft.map(function(Nt){var tn=qt+Nt;tn>=0&&tn<Dn.length&&b.pushUnique(fn,Dn[tn])})})}else fn=ln;if(en&&!(Ve.minor.ticks==="inside"&&Ve.ticks==="outside"||Ve.minor.ticks==="outside"&&Ve.ticks==="inside")){for(var yn=ln.map(function(qt){return qt.value}),Ln=[],Vn=0;Vn<Kt.length;Vn++){var Un=Kt[Vn],er=Un.value;if(yn.indexOf(er)===-1){for(var fr=!1,Xt=0;!fr&&Xt<ln.length;Xt++)1e7+ln[Xt].value===1e7+er&&(fr=!0);fr||Ln.push(Un)}}Kt=Ln}if(wt&&function(qt,Nt,tn){for(var _n=0;_n<qt.length;_n++){var Fn=qt[_n].value,zn=_n,Pn=_n+1;_n<qt.length-1?(zn=_n,Pn=_n+1):_n>0?(zn=_n-1,Pn=_n):(zn=_n,Pn=_n);var $n,Wn=qt[zn].value,tr=qt[Pn].value,qn=Math.abs(tr-Wn),Jn=tn||qn,sr=0;Jn>=f?sr=qn>=f&&qn<=u?qn:p:tn===h&&Jn>=g?sr=qn>=g&&qn<=m?qn:h:Jn>=y?sr=qn>=y&&qn<=v?qn:x:tn===A&&Jn>=A?sr=A:Jn>=d?sr=d:tn===S&&Jn>=S?sr=S:tn===k&&Jn>=k&&(sr=k),sr>=qn&&(sr=qn,$n=!0);var wr=Fn+sr;if(Nt.rangebreaks&&sr>0){for(var pr=0,rr=0;rr<84;rr++){var yr=(rr+.5)/84;Nt.maskBreaks(Fn*(1-yr)+yr*wr)!==U&&pr++}(sr*=pr/84)||(qt[_n].drop=!0),$n&&qn>A&&(sr=qn)}(sr>0||_n===0)&&(qt[_n].periodX=Fn+sr/2)}}(fn,Ve,Ve._definedDelta),Ve.rangebreaks){var mn=Ve._id.charAt(0)==="y",Pt=1;Ve.tickmode==="auto"&&(Pt=Ve.tickfont?Ve.tickfont.size:12);var Zt=NaN;for(dt=ln.length-1;dt>-1;dt--)if(ln[dt].drop)ln.splice(dt,1);else{ln[dt].value=st(ln[dt].value,Ve);var Wt=Ve.c2p(ln[dt].value);(mn?Zt>Wt-Pt:Zt<Wt+Pt)?ln.splice(rn?dt+1:dt,1):Zt=Wt}}Xe(Ve)&&Math.abs(jt[1]-jt[0])===360&&ln.pop(),Ve._tmax=(ln[ln.length-1]||{}).value,Ve._prevDateHead="",Ve._inCalcTicks=!0;var gn,pn=function(qt){qt.text="",Ve._prevDateHead=it};function kn(qt,Nt){var tn=Z.tickText(qt,Nt.value,!1,Nt.simpleLabel),_n=Nt.periodX;return _n!==void 0&&(tn.periodX=_n,(_n>on||_n<nn)&&(_n>on&&(tn.periodX=on),_n<nn&&(tn.periodX=nn),pn(tn))),tn}for(ln=ln.concat(Kt),dt=0;dt<ln.length;dt++){var vn=ln[dt].minor,cn=ln[dt].value;vn?((gn=Ft&&fn.indexOf(ln[dt])!==-1?kn(Ve,ln[dt]):{x:cn}).minor=!0,bn.push(gn)):(it=Ve._prevDateHead,gn=kn(Ve,ln[dt]),(ln[dt].skipLabel||Ft&&fn.indexOf(ln[dt])===-1)&&pn(gn),$t.push(gn))}return $t=$t.concat(bn),Ve._inCalcTicks=!1,wt&&$t.length&&($t[0].noTick=!0),$t};var xe=[2,5,10],Te=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Pe=[1,2,3,7,14],De=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ve=[-.301,0,.301,.699,1],we=[15,30,45,90,180];function Ee(Ve,Be,at){return Be*b.roundUp(Ve/Be,at)}function Fe(Ve){var Be=Ve.dtick;if(Ve._tickexponent=0,T(Be)||typeof Be=="string"||(Be=1),Ve.type!=="category"&&Ve.type!=="multicategory"||(Ve._tickround=null),Ve.type==="date"){var at=Ve.r2l(Ve.tick0),ht=Ve.l2r(at).replace(/(^-|i)/g,""),dt=ht.length;if(String(Be).charAt(0)==="M")dt>10||ht.substr(5)!=="01-01"?Ve._tickround="d":Ve._tickround=+Be.substr(1)%12==0?"y":"m";else if(Be>=d&&dt<=10||Be>=15*d)Ve._tickround="d";else if(Be>=E&&dt<=16||Be>=k)Ve._tickround="M";else if(Be>=L&&dt<=19||Be>=E)Ve._tickround="S";else{var it=Ve.l2r(at+Be).replace(/^-/,"").length;Ve._tickround=Math.max(dt,it)-20,Ve._tickround<0&&(Ve._tickround=4)}}else if(T(Be)||Be.charAt(0)==="L"){var kt=Ve.range.map(Ve.r2d||Number);T(Be)||(Be=Number(Be.substr(1))),Ve._tickround=2-Math.floor(Math.log(Be)/Math.LN10+.01);var Tt=Math.max(Math.abs(kt[0]),Math.abs(kt[1])),St=Math.floor(Math.log(Tt)/Math.LN10+.01),wt=Ve.minexponent===void 0?3:Ve.minexponent;Math.abs(St)>wt&&(Ge(Ve.exponentformat)&&!Je(St)?Ve._tickexponent=3*Math.round((St-1)/3):Ve._tickexponent=St)}else Ve._tickround=null}function Le(Ve,Be,at){var ht=Ve.tickfont||{};return{x:Be,dx:0,dy:0,text:at||"",fontSize:ht.size,font:ht.family,fontWeight:ht.weight,fontStyle:ht.style,fontVariant:ht.variant,fontTextcase:ht.textcase,fontLineposition:ht.lineposition,fontShadow:ht.shadow,fontColor:ht.color}}Z.autoTicks=function(Ve,Be,at){var ht;function dt(Ft){return Math.pow(Ft,Math.floor(Math.log(Be)/Math.LN10))}if(Ve.type==="date"){Ve.tick0=b.dateTick0(Ve.calendar,0);var it=2*Be;if(it>p)Be/=p,ht=dt(10),Ve.dtick="M"+12*Ee(Be,ht,xe);else if(it>x)Be/=x,Ve.dtick="M"+Ee(Be,1,Te);else if(it>d){if(Ve.dtick=Ee(Be,d,Ve._hasDayOfWeekBreaks?[1,2,7,14]:Pe),!at){var kt=Z.getTickFormat(Ve),Tt=Ve.ticklabelmode==="period";Tt&&(Ve._rawTick0=Ve.tick0),/%[uVW]/.test(kt)?Ve.tick0=b.dateTick0(Ve.calendar,2):Ve.tick0=b.dateTick0(Ve.calendar,1),Tt&&(Ve._dowTick0=Ve.tick0)}}else it>k?Ve.dtick=Ee(Be,k,Te):it>E?Ve.dtick=Ee(Be,E,Ae):it>L?Ve.dtick=Ee(Be,L,Ae):(ht=dt(10),Ve.dtick=Ee(Be,ht,xe))}else if(Ve.type==="log"){Ve.tick0=0;var St=b.simpleMap(Ve.range,Ve.r2l);if(Ve._isMinor&&(Be*=1.5),Be>.7)Ve.dtick=Math.ceil(Be);else if(Math.abs(St[1]-St[0])<1){var wt=1.5*Math.abs((St[1]-St[0])/Be);Be=Math.abs(Math.pow(10,St[1])-Math.pow(10,St[0]))/wt,ht=dt(10),Ve.dtick="L"+Ee(Be,ht,xe)}else Ve.dtick=Be>.3?"D2":"D1"}else Ve.type==="category"||Ve.type==="multicategory"?(Ve.tick0=0,Ve.dtick=Math.ceil(Math.max(Be,1))):Xe(Ve)?(Ve.tick0=0,ht=1,Ve.dtick=Ee(Be,ht,we)):(Ve.tick0=0,ht=dt(10),Ve.dtick=Ee(Be,ht,xe));if(Ve.dtick===0&&(Ve.dtick=1),!T(Ve.dtick)&&typeof Ve.dtick!="string"){var At=Ve.dtick;throw Ve.dtick=1,"ax.dtick error: "+String(At)}},Z.tickIncrement=function(Ve,Be,at,ht){var dt=at?-1:1;if(T(Be))return b.increment(Ve,dt*Be);var it=Be.charAt(0),kt=dt*Number(Be.substr(1));if(it==="M")return b.incrementMonth(Ve,kt,ht);if(it==="L")return Math.log(Math.pow(10,Ve)+kt)/Math.LN10;if(it==="D"){var Tt=Be==="D2"?ve:De,St=Ve+.01*dt,wt=b.roundUp(b.mod(St,1),Tt,at);return Math.floor(St)+Math.log(_.round(Math.pow(10,wt),1))/Math.LN10}throw"unrecognized dtick "+String(Be)},Z.tickFirst=function(Ve,Be){var at=Ve.r2l||Number,ht=b.simpleMap(Ve.range,at,void 0,void 0,Be),dt=ht[1]<ht[0],it=dt?Math.floor:Math.ceil,kt=fe(ht)[0],Tt=Ve.dtick,St=at(Ve.tick0);if(T(Tt)){var wt=it((kt-St)/Tt)*Tt+St;return Ve.type!=="category"&&Ve.type!=="multicategory"||(wt=b.constrain(wt,0,Ve._categories.length-1)),wt}var At=Tt.charAt(0),Ft=Number(Tt.substr(1));if(At==="M"){for(var jt,rn,nn,on=0,Ht=St;on<10;){if(((jt=Z.tickIncrement(Ht,Tt,dt,Ve.calendar))-kt)*(Ht-kt)<=0)return dt?Math.min(Ht,jt):Math.max(Ht,jt);rn=(kt-(Ht+jt)/2)/(jt-Ht),nn=At+(Math.abs(Math.round(rn))||1)*Ft,Ht=Z.tickIncrement(Ht,nn,rn<0?!dt:dt,Ve.calendar),on++}return b.error("tickFirst did not converge",Ve),Ht}if(At==="L")return Math.log(it((Math.pow(10,kt)-St)/Ft)*Ft+St)/Math.LN10;if(At==="D"){var $t=Tt==="D2"?ve:De,bn=b.roundUp(b.mod(kt,1),$t,dt);return Math.floor(kt)+Math.log(_.round(Math.pow(10,bn),1))/Math.LN10}throw"unrecognized dtick "+String(Tt)},Z.tickText=function(Ve,Be,at,ht){var dt,it=Le(Ve,Be),kt=Ve.tickmode==="array",Tt=at||kt,St=Ve.type,wt=St==="category"?Ve.d2l_noadd:Ve.d2l,At=function(Ht){var $t=Ve.l2p(Ht);return $t>=0&&$t<=Ve._length?Ht:null};if(kt&&b.isArrayOrTypedArray(Ve.ticktext)){var Ft=b.simpleMap(Ve.range,Ve.r2l),jt=(Math.abs(Ft[1]-Ft[0])-(Ve._lBreaks||0))/1e4;for(dt=0;dt<Ve.ticktext.length&&!(Math.abs(Be-wt(Ve.tickvals[dt]))<jt);dt++);if(dt<Ve.ticktext.length)return it.text=String(Ve.ticktext[dt]),it.xbnd=[At(it.x-.5),At(it.x+Ve.dtick-.5)],it}function rn(Ht){if(Ht===void 0)return!0;if(at)return Ht==="none";var $t={first:Ve._tmin,last:Ve._tmax}[Ht];return Ht!=="all"&&Be!==$t}var nn=at?"never":Ve.exponentformat!=="none"&&rn(Ve.showexponent)?"hide":"";if(St==="date"?function(Ht,$t,bn,ln){var Kt=Ht._tickround,fn=bn&&Ht.hoverformat||Z.getTickFormat(Ht);(ln=!fn&&ln)&&(Kt=T(Kt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Kt]);var en,un=b.formatDate($t.x,fn,Kt,Ht._dateFormat,Ht.calendar,Ht._extraFormat),An=un.indexOf(`
`);if(An!==-1&&(en=un.substr(An+1),un=un.substr(0,An)),ln&&(en===void 0||un!=="00:00:00"&&un!=="00:00"?un.length===8&&(un=un.replace(/:00$/,"")):(un=en,en="")),en)if(bn)Kt==="d"?un+=", "+en:un=en+(un?", "+un:"");else if(Ht._inCalcTicks&&Ht._prevDateHead===en){var wn=lt(Ht),On=Ht._trueSide||Ht.side;(!wn&&On==="top"||wn&&On==="bottom")&&(un+="<br> ")}else Ht._prevDateHead=en,un+="<br>"+en;$t.text=un}(Ve,it,at,Tt):St==="log"?function(Ht,$t,bn,ln,Kt){var fn=Ht.dtick,en=$t.x,un=Ht.tickformat,An=typeof fn=="string"&&fn.charAt(0);if(Kt==="never"&&(Kt=""),ln&&An!=="L"&&(fn="L3",An="L"),un||An==="L")$t.text=rt(Math.pow(10,en),Ht,Kt,ln);else if(T(fn)||An==="D"&&b.mod(en+.01,1)<.1){var wn=Math.round(en),On=Math.abs(wn),Tn=Ht.exponentformat;Tn==="power"||Ge(Tn)&&Je(wn)?($t.text=wn===0?1:wn===1?"10":"10<sup>"+(wn>1?"":F)+On+"</sup>",$t.fontSize*=1.25):(Tn==="e"||Tn==="E")&&On>2?$t.text="1"+Tn+(wn>0?"+":F)+On:($t.text=rt(Math.pow(10,en),Ht,"","fakehover"),fn==="D1"&&Ht._id.charAt(0)==="y"&&($t.dy-=$t.fontSize/6))}else{if(An!=="D")throw"unrecognized dtick "+String(fn);$t.text=String(Math.round(Math.pow(10,b.mod(en,1)))),$t.fontSize*=.75}if(Ht.dtick==="D1"){var Cn=String($t.text).charAt(0);Cn!=="0"&&Cn!=="1"||(Ht._id.charAt(0)==="y"?$t.dx-=$t.fontSize/4:($t.dy+=$t.fontSize/2,$t.dx+=(Ht.range[1]>Ht.range[0]?1:-1)*$t.fontSize*(en<0?.5:.25)))}}(Ve,it,0,Tt,nn):St==="category"?function(Ht,$t){var bn=Ht._categories[Math.round($t.x)];bn===void 0&&(bn=""),$t.text=String(bn)}(Ve,it):St==="multicategory"?function(Ht,$t,bn){var ln=Math.round($t.x),Kt=Ht._categories[ln]||[],fn=Kt[1]===void 0?"":String(Kt[1]),en=Kt[0]===void 0?"":String(Kt[0]);bn?$t.text=en+" - "+fn:($t.text=fn,$t.text2=en)}(Ve,it,at):Xe(Ve)?function(Ht,$t,bn,ln,Kt){if(Ht.thetaunit!=="radians"||bn)$t.text=rt($t.x,Ht,Kt,ln);else{var fn=$t.x/180;if(fn===0)$t.text="0";else{var en=function(An){function wn(Bn,Xn){return Math.abs(Bn-Xn)<=1e-6}var On=function(Bn){for(var Xn=1;!wn(Math.round(Bn*Xn)/Xn,Bn);)Xn*=10;return Xn}(An),Tn=An*On,Cn=Math.abs(function Bn(Xn,cr){return wn(cr,0)?Xn:Bn(cr,Xn%cr)}(Tn,On));return[Math.round(Tn/Cn),Math.round(On/Cn)]}(fn);if(en[1]>=100)$t.text=rt(b.deg2rad($t.x),Ht,Kt,ln);else{var un=$t.x<0;en[1]===1?en[0]===1?$t.text="\u03C0":$t.text=en[0]+"\u03C0":$t.text=["<sup>",en[0],"</sup>","\u2044","<sub>",en[1],"</sub>","\u03C0"].join(""),un&&($t.text=F+$t.text)}}}}(Ve,it,at,Tt,nn):function(Ht,$t,bn,ln,Kt){Kt==="never"?Kt="":Ht.showexponent==="all"&&Math.abs($t.x/Ht.dtick)<1e-6&&(Kt="hide"),$t.text=rt($t.x,Ht,Kt,ln)}(Ve,it,0,Tt,nn),ht||(Ve.tickprefix&&!rn(Ve.showtickprefix)&&(it.text=Ve.tickprefix+it.text),Ve.ticksuffix&&!rn(Ve.showticksuffix)&&(it.text+=Ve.ticksuffix)),Ve.labelalias&&Ve.labelalias.hasOwnProperty(it.text)){var on=Ve.labelalias[it.text];typeof on=="string"&&(it.text=on)}return(Ve.tickson==="boundaries"||Ve.showdividers)&&(it.xbnd=[At(it.x-.5),At(it.x+Ve.dtick-.5)]),it},Z.hoverLabelText=function(Ve,Be,at){at&&(Ve=b.extendFlat({},Ve,{hoverformat:at}));var ht=b.isArrayOrTypedArray(Be)?Be[0]:Be,dt=b.isArrayOrTypedArray(Be)?Be[1]:void 0;if(dt!==void 0&&dt!==ht)return Z.hoverLabelText(Ve,ht,at)+" - "+Z.hoverLabelText(Ve,dt,at);var it=Ve.type==="log"&&ht<=0,kt=Z.tickText(Ve,Ve.c2l(it?-ht:ht),"hover").text;return it?ht===0?"0":F+kt:kt};var je=["f","p","n","\u03BC","m","","k","M","G","T"];function Ge(Ve){return Ve==="SI"||Ve==="B"}function Je(Ve){return Ve>14||Ve<-15}function rt(Ve,Be,at,ht){var dt=Ve<0,it=Be._tickround,kt=at||Be.exponentformat||"B",Tt=Be._tickexponent,St=Z.getTickFormat(Be),wt=Be.separatethousands;if(ht){var At={exponentformat:kt,minexponent:Be.minexponent,dtick:Be.showexponent==="none"?Be.dtick:T(Ve)&&Math.abs(Ve)||1,range:Be.showexponent==="none"?Be.range.map(Be.r2d):[0,Ve||1]};Fe(At),it=(Number(At._tickround)||0)+4,Tt=At._tickexponent,Be.hoverformat&&(St=Be.hoverformat)}if(St)return Be._numFormat(St)(Ve).replace(/-/g,F);var Ft,jt=Math.pow(10,-it)/2;if(kt==="none"&&(Tt=0),(Ve=Math.abs(Ve))<jt)Ve="0",dt=!1;else{if(Ve+=jt,Tt&&(Ve*=Math.pow(10,-Tt),it+=Tt),it===0)Ve=String(Math.floor(Ve));else if(it<0){Ve=(Ve=String(Math.round(Ve))).substr(0,Ve.length+it);for(var rn=it;rn<0;rn++)Ve+="0"}else{var nn=(Ve=String(Ve)).indexOf(".")+1;nn&&(Ve=Ve.substr(0,nn+it).replace(/\.?0+$/,""))}Ve=b.numSeparate(Ve,Be._separators,wt)}return Tt&&kt!=="hide"&&(Ge(kt)&&Je(Tt)&&(kt="power"),Ft=Tt<0?F+-Tt:kt!=="power"?"+"+Tt:String(Tt),kt==="e"||kt==="E"?Ve+=kt+Ft:kt==="power"?Ve+="\xD710<sup>"+Ft+"</sup>":kt==="B"&&Tt===9?Ve+="B":Ge(kt)&&(Ve+=je[Tt/3+5])),dt?F+Ve:Ve}function ot(Ve,Be){if(Ve){var at=Object.keys(q).reduce(function(ht,dt){return Be.indexOf(dt)!==-1&&q[dt].forEach(function(it){ht[it]=1}),ht},{});Object.keys(Ve).forEach(function(ht){at[ht]||(ht.length===1?Ve[ht]=0:delete Ve[ht])})}}function yt(Ve,Be){for(var at=[],ht={},dt=0;dt<Be.length;dt++){var it=Be[dt];ht[it.text2]?ht[it.text2].push(it.x):ht[it.text2]=[it.x]}for(var kt in ht)at.push(Le(Ve,b.interp(ht[kt],.5),kt));return at}function _t(Ve){return Ve.periodX!==void 0?Ve.periodX:Ve.x}function mt(Ve){return[Ve.text,Ve.x,Ve.axInfo,Ve.font,Ve.fontSize,Ve.fontColor].join("_")}function tt(Ve){var Be=Ve.title.font.size,at=(Ve.title.text.match(o.BR_TAG_ALL)||[]).length;return Ve.title.hasOwnProperty("standoff")?Be*(K+at*ee):at?Be*(at+1)*ee:Be}function Qe(Ve,Be){var at=Ve.l2p(Be);return at>1&&at<Ve._length-1}function Dt(Ve){var Be=_.select(Ve),at=Be.select(".text-math-group");return at.empty()?Be.select("text"):at}function zt(Ve){return Ve._id+".automargin"}function pt(Ve){return zt(Ve)+".mirror"}function vt(Ve){return Ve._id+".rangeslider"}function We(Ve,Be){for(var at=0;at<Be.length;at++)Ve.indexOf(Be[at])===-1&&Ve.push(Be[at])}function Ze(Ve,Be,at){var ht,dt,it=[],kt=[],Tt=Ve.layout;for(ht=0;ht<Be.length;ht++)it.push(Z.getFromId(Ve,Be[ht]));for(ht=0;ht<at.length;ht++)kt.push(Z.getFromId(Ve,at[ht]));var St=Object.keys(a),wt=["anchor","domain","overlaying","position","side","tickangle","editType"],At=["linear","log"];for(ht=0;ht<St.length;ht++){var Ft=St[ht],jt=it[0][Ft],rn=kt[0][Ft],nn=!0,on=!1,Ht=!1;if(Ft.charAt(0)!=="_"&&typeof jt!="function"&&wt.indexOf(Ft)===-1){for(dt=1;dt<it.length&&nn;dt++){var $t=it[dt][Ft];Ft==="type"&&At.indexOf(jt)!==-1&&At.indexOf($t)!==-1&&jt!==$t?on=!0:$t!==jt&&(nn=!1)}for(dt=1;dt<kt.length&&nn;dt++){var bn=kt[dt][Ft];Ft==="type"&&At.indexOf(rn)!==-1&&At.indexOf(bn)!==-1&&rn!==bn?Ht=!0:kt[dt][Ft]!==rn&&(nn=!1)}nn&&(on&&(Tt[it[0]._name].type="linear"),Ht&&(Tt[kt[0]._name].type="linear"),Ne(Tt,Ft,it,kt,Ve._fullLayout._dfltTitle))}}for(ht=0;ht<Ve._fullLayout.annotations.length;ht++){var ln=Ve._fullLayout.annotations[ht];Be.indexOf(ln.xref)!==-1&&at.indexOf(ln.yref)!==-1&&b.swapAttrs(Tt.annotations[ht],["?"])}}function Ne(Ve,Be,at,ht,dt){var it,kt=b.nestedProperty,Tt=kt(Ve[at[0]._name],Be).get(),St=kt(Ve[ht[0]._name],Be).get();for(Be==="title"&&(Tt&&Tt.text===dt.x&&(Tt.text=dt.y),St&&St.text===dt.y&&(St.text=dt.x)),it=0;it<at.length;it++)kt(Ve,at[it]._name+"."+Be).set(St);for(it=0;it<ht.length;it++)kt(Ve,ht[it]._name+"."+Be).set(Tt)}function Xe(Ve){return Ve._id==="angularaxis"}function st(Ve,Be){for(var at=Be._rangebreaks.length,ht=0;ht<at;ht++){var dt=Be._rangebreaks[ht];if(Ve>=dt.min&&Ve<dt.max)return dt.max}return Ve}function lt(Ve){return(Ve.ticklabelposition||"").indexOf("inside")!==-1}function xt(Ve,Be){lt(Ve._anchorAxis||{})&&Ve._hideCounterAxisInsideTickLabels&&Ve._hideCounterAxisInsideTickLabels(Be)}function bt(Ve,Be,at,ht){var dt,it=Ve.anchor==="free"||Ve.overlaying!==void 0&&Ve.overlaying!==!1?Ve.overlaying:Ve._id;dt=ht?Ve.side==="right"?Be:-Be:Be,it in at||(at[it]={}),Ve.side in at[it]||(at[it][Ve.side]=0),at[it][Ve.side]+=dt}Z.getTickFormat=function(Ve){var Be,at,ht,dt,it,kt,Tt,St;function wt(jt){return typeof jt!="string"?jt:Number(jt.replace("M",""))*x}function At(jt,rn){var nn=["L","D"];if(typeof jt==typeof rn){if(typeof jt=="number")return jt-rn;var on=nn.indexOf(jt.charAt(0)),Ht=nn.indexOf(rn.charAt(0));return on===Ht?Number(jt.replace(/(L|D)/g,""))-Number(rn.replace(/(L|D)/g,"")):on-Ht}return typeof jt=="number"?1:-1}function Ft(jt,rn){var nn=rn[0]===null,on=rn[1]===null,Ht=At(jt,rn[0])>=0,$t=At(jt,rn[1])<=0;return(nn||Ht)&&(on||$t)}if(Ve.tickformatstops&&Ve.tickformatstops.length>0)switch(Ve.type){case"date":case"linear":for(Be=0;Be<Ve.tickformatstops.length;Be++)if((ht=Ve.tickformatstops[Be]).enabled&&(dt=Ve.dtick,it=ht.dtickrange,kt=void 0,Tt=void 0,St=void 0,kt=wt||function(jt){return jt},Tt=it[0],St=it[1],(!Tt&&typeof Tt!="number"||kt(Tt)<=kt(dt))&&(!St&&typeof St!="number"||kt(St)>=kt(dt)))){at=ht;break}break;case"log":for(Be=0;Be<Ve.tickformatstops.length;Be++)if((ht=Ve.tickformatstops[Be]).enabled&&Ft(Ve.dtick,ht.dtickrange)){at=ht;break}}return at?at.value:Ve.tickformat},Z.getSubplots=function(Ve,Be){var at=Ve._fullLayout._subplots,ht=at.cartesian.concat(at.gl2d||[]),dt=Be?Z.findSubplotsWithAxis(ht,Be):ht;return dt.sort(function(it,kt){var Tt=it.substr(1).split("y"),St=kt.substr(1).split("y");return Tt[0]===St[0]?+Tt[1]-+St[1]:+Tt[0]-+St[0]}),dt},Z.findSubplotsWithAxis=function(Ve,Be){for(var at=new RegExp(Be._id.charAt(0)==="x"?"^"+Be._id+"y":Be._id+"$"),ht=[],dt=0;dt<Ve.length;dt++){var it=Ve[dt];at.test(it)&&ht.push(it)}return ht},Z.makeClipPaths=function(Ve){var Be=Ve._fullLayout;if(!Be._hasOnlyLargeSploms){var at,ht,dt={_offset:0,_length:Be.width,_id:""},it={_offset:0,_length:Be.height,_id:""},kt=Z.list(Ve,"x",!0),Tt=Z.list(Ve,"y",!0),St=[];for(at=0;at<kt.length;at++)for(St.push({x:kt[at],y:it}),ht=0;ht<Tt.length;ht++)at===0&&St.push({x:dt,y:Tt[ht]}),St.push({x:kt[at],y:Tt[ht]});var wt=Be._clips.selectAll(".axesclip").data(St,function(At){return At.x._id+At.y._id});wt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(At){return"clip"+Be._uid+At.x._id+At.y._id}).append("rect"),wt.exit().remove(),wt.each(function(At){_.select(this).select("rect").attr({x:At.x._offset||0,y:At.y._offset||0,width:At.x._length||1,height:At.y._length||1})})}},Z.draw=function(Ve,Be,at){var ht=Ve._fullLayout;Be==="redraw"&&ht._paper.selectAll("g.subplot").each(function(Tt){var St=Tt[0],wt=ht._plots[St];if(wt){var At=wt.xaxis,Ft=wt.yaxis;wt.xaxislayer.selectAll("."+At._id+"tick").remove(),wt.yaxislayer.selectAll("."+Ft._id+"tick").remove(),wt.xaxislayer.selectAll("."+At._id+"tick2").remove(),wt.yaxislayer.selectAll("."+Ft._id+"tick2").remove(),wt.xaxislayer.selectAll("."+At._id+"divider").remove(),wt.yaxislayer.selectAll("."+Ft._id+"divider").remove(),wt.minorGridlayer&&wt.minorGridlayer.selectAll("path").remove(),wt.gridlayer&&wt.gridlayer.selectAll("path").remove(),wt.zerolinelayer&&wt.zerolinelayer.selectAll("path").remove(),ht._infolayer.select(".g-"+At._id+"title").remove(),ht._infolayer.select(".g-"+Ft._id+"title").remove()}});var dt=Be&&Be!=="redraw"?Be:Z.listIds(Ve),it=Z.list(Ve).filter(function(Tt){return Tt.autoshift}).map(function(Tt){return Tt.overlaying});dt.map(function(Tt){var St=Z.getFromId(Ve,Tt);if(St.tickmode==="sync"&&St.overlaying){var wt=dt.findIndex(function(At){return At===St.overlaying});wt>=0&&dt.unshift(dt.splice(wt,1).shift())}});var kt={false:{left:0,right:0}};return b.syncOrAsync(dt.map(function(Tt){return function(){if(Tt){var St=Z.getFromId(Ve,Tt);at||(at={}),at.axShifts=kt,at.overlayingShiftedAx=it;var wt=Z.drawOne(Ve,St,at);return St._shiftPusher&&bt(St,St._fullDepth||0,kt,!0),St._r=St.range.slice(),St._rl=b.simpleMap(St._r,St.r2l),wt}}}))},Z.drawOne=function(Ve,Be,at){var ht,dt,it,kt=(at=at||{}).axShifts||{},Tt=at.overlayingShiftedAx||[];Be.setScale();var St=Ve._fullLayout,wt=Be._id,At=wt.charAt(0),Ft=Z.counterLetter(wt),jt=St._plots[Be._mainSubplot];if(jt){if(Be._shiftPusher=Be.autoshift||Tt.indexOf(Be._id)!==-1||Tt.indexOf(Be.overlaying)!==-1,Be._shiftPusher&Be.anchor==="free"){var rn=Be.linewidth/2||0;Be.ticks==="inside"&&(rn+=Be.ticklen),bt(Be,rn,kt,!0),bt(Be,Be.shift||0,kt,!1)}at.skipTitle===!0&&Be._shift!==void 0||(Be._shift=function(qt,Nt){return qt.autoshift?Nt[qt.overlaying][qt.side]:qt.shift||0}(Be,kt));var nn=jt[At+"axislayer"],on=Be._mainLinePosition,Ht=on+=Be._shift,$t=Be._mainMirrorPosition,bn=Be._vals=Z.calcTicks(Be),ln=[Be.mirror,Ht,$t].join("_");for(ht=0;ht<bn.length;ht++)bn[ht].axInfo=ln;Be._selections={},Be._tickAngles&&(Be._prevTickAngles=Be._tickAngles),Be._tickAngles={},Be._depth=null;var Kt={};if(Be.visible){var fn,en,un=Z.makeTransTickFn(Be),An=Z.makeTransTickLabelFn(Be),wn=Be.ticks==="inside",On=Be.ticks==="outside";if(Be.tickson==="boundaries"){var Tn=function(qt,Nt){var tn,_n=[],Fn=function(zn,Pn){var $n=zn.xbnd[Pn];$n!==null&&_n.push(b.extendFlat({},zn,{x:$n}))};if(Nt.length){for(tn=0;tn<Nt.length;tn++)Fn(Nt[tn],0);Fn(Nt[tn-1],1)}return _n}(0,bn);en=Z.clipEnds(Be,Tn),fn=wn?en:Tn}else en=Z.clipEnds(Be,bn),fn=wn&&Be.ticklabelmode!=="period"?en:bn;var Cn,Bn=Be._gridVals=en,Xn=function(qt,Nt){var tn,_n,Fn=[],zn=Nt.length&&Nt[Nt.length-1].x<Nt[0].x,Pn=function(Wn,tr){var qn=Wn.xbnd[tr];qn!==null&&Fn.push(b.extendFlat({},Wn,{x:qn}))};if(qt.showdividers&&Nt.length){for(tn=0;tn<Nt.length;tn++){var $n=Nt[tn];$n.text2!==_n&&Pn($n,zn?1:0),_n=$n.text2}Pn(Nt[tn-1],zn?0:1)}return Fn}(Be,bn);if(!St._hasOnlyLargeSploms){var cr=Be._subplotsWith,Yn={};for(ht=0;ht<cr.length;ht++){dt=cr[ht];var jn=(it=St._plots[dt])[Ft+"axis"],Kn=jn._mainAxis._id;if(!Yn[Kn]){Yn[Kn]=1;var or=At==="x"?"M0,"+jn._offset+"v"+jn._length:"M"+jn._offset+",0h"+jn._length;Z.drawGrid(Ve,Be,{vals:Bn,counterAxis:jn,layer:it.gridlayer.select("."+wt),minorLayer:it.minorGridlayer.select("."+wt),path:or,transFn:un}),Z.drawZeroLine(Ve,Be,{counterAxis:jn,layer:it.zerolinelayer,path:or,transFn:un})}}}var Qt=Z.getTickSigns(Be),an=Z.getTickSigns(Be,"minor");if(Be.ticks||Be.minor&&Be.minor.ticks){var Dn,yn,Ln,Vn,Un=Z.makeTickPath(Be,Ht,Qt[2]),er=Z.makeTickPath(Be,Ht,an[2],{minor:!0});if(Be._anchorAxis&&Be.mirror&&Be.mirror!==!0?(Dn=Z.makeTickPath(Be,$t,Qt[3]),yn=Z.makeTickPath(Be,$t,an[3],{minor:!0}),Ln=Un+Dn,Vn=er+yn):(Dn="",yn="",Ln=Un,Vn=er),Be.showdividers&&On&&Be.tickson==="boundaries"){var fr={};for(ht=0;ht<Xn.length;ht++)fr[Xn[ht].x]=1;Cn=function(qt){return fr[qt.x]?Dn:Ln}}else Cn=function(qt){return qt.minor?Vn:Ln}}if(Z.drawTicks(Ve,Be,{vals:fn,layer:nn,path:Cn,transFn:un}),Be.mirror==="allticks"){var Xt=Object.keys(Be._linepositions||{});for(ht=0;ht<Xt.length;ht++){dt=Xt[ht],it=St._plots[dt];var mn=Be._linepositions[dt]||[],Pt=mn[0],Zt=mn[1],Wt=mn[2],gn=Z.makeTickPath(Be,Pt,Wt?Qt[0]:an[0],{minor:Wt})+Z.makeTickPath(Be,Zt,Wt?Qt[1]:an[1],{minor:Wt});Z.drawTicks(Ve,Be,{vals:fn,layer:it[At+"axislayer"],path:gn,transFn:un})}}var pn=[];if(pn.push(function(){return Z.drawLabels(Ve,Be,{vals:bn,layer:nn,plotinfo:it,transFn:An,labelFns:Z.makeLabelFns(Be,Ht)})}),Be.type==="multicategory"){var kn={x:2,y:10}[At];pn.push(function(){var qt={x:"height",y:"width"}[At],Nt=cn()[qt]+kn+(Be._tickAngles[wt+"tick"]?Be.tickfont.size*ee:0);return Z.drawLabels(Ve,Be,{vals:yt(Be,bn),layer:nn,cls:wt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:un,labelFns:Z.makeLabelFns(Be,Ht+Nt*Qt[4])})}),pn.push(function(){return Be._depth=Qt[4]*(cn("tick2")[Be.side]-Ht),function(qt,Nt,tn){var _n=Nt._id+"divider",Fn=tn.vals,zn=tn.layer.selectAll("path."+_n).data(Fn,mt);zn.exit().remove(),zn.enter().insert("path",":first-child").classed(_n,1).classed("crisp",1).call(i.stroke,Nt.dividercolor).style("stroke-width",n.crispRound(qt,Nt.dividerwidth,1)+"px"),zn.attr("transform",tn.transFn).attr("d",tn.path)}(Ve,Be,{vals:Xn,layer:nn,path:Z.makeTickPath(Be,Ht,Qt[4],{len:Be._depth}),transFn:un})})}else Be.title.hasOwnProperty("standoff")&&pn.push(function(){Be._depth=Qt[4]*(cn()[Be.side]-Ht)});var vn=w.getComponentMethod("rangeslider","isVisible")(Be);return at.skipTitle||vn&&Be.side==="bottom"||pn.push(function(){return function(qt,Nt){var tn,_n=qt._fullLayout,Fn=Nt._id,zn=Fn.charAt(0),Pn=Nt.title.font.size,$n=(Nt.title.text.match(o.BR_TAG_ALL)||[]).length;if(Nt.title.hasOwnProperty("standoff"))Nt.side==="bottom"||Nt.side==="right"?tn=Nt._depth+Nt.title.standoff+Pn*K:Nt.side!=="top"&&Nt.side!=="left"||(tn=Nt._depth+Nt.title.standoff+Pn*($+$n*ee));else{var Wn=lt(Nt);if(Nt.type==="multicategory")tn=Nt._depth;else{var tr=1.5*Pn;Wn&&(tr=.5*Pn,Nt.ticks==="outside"&&(tr+=Nt.ticklen)),tn=10+tr+(Nt.linewidth?Nt.linewidth-1:0)}Wn||(tn+=zn==="x"?Nt.side==="top"?Pn*(Nt.showticklabels?1:0):Pn*(Nt.showticklabels?1.5:.5):Nt.side==="right"?Pn*(Nt.showticklabels?1:.5):Pn*(Nt.showticklabels?.5:0))}var qn,Jn,sr,wr,pr=Z.getPxPosition(qt,Nt);if(zn==="x"?(Jn=Nt._offset+Nt._length/2,sr=Nt.side==="top"?pr-tn:pr+tn):(sr=Nt._offset+Nt._length/2,Jn=Nt.side==="right"?pr+tn:pr-tn,qn={rotate:"-90",offset:0}),Nt.type!=="multicategory"){var rr=Nt._selections[Nt._id+"tick"];if(wr={selection:rr,side:Nt.side},rr&&rr.node()&&rr.node().parentNode){var yr=n.getTranslate(rr.node().parentNode);wr.offsetLeft=yr.x,wr.offsetTop=yr.y}Nt.title.hasOwnProperty("standoff")&&(wr.pad=0)}return Nt._titleStandoff=tn,t.draw(qt,Fn+"title",{propContainer:Nt,propName:Nt._name+".title.text",placeholder:_n._dfltTitle[zn],avoid:wr,transform:qn,attributes:{x:Jn,y:sr,"text-anchor":"middle"}})}(Ve,Be)}),pn.push(function(){var qt,Nt,tn,_n,Fn=Be.side.charAt(0),zn=J[Be.side].charAt(0),Pn=Z.getPxPosition(Ve,Be),$n=On?Be.ticklen:0;(Be.automargin||vn||Be._shiftPusher)&&(Be.type==="multicategory"?qt=cn("tick2"):(qt=cn(),At==="x"&&Fn==="b"&&(Be._depth=Math.max(qt.width>0?qt.bottom-Pn:0,$n))));var Wn=0,tr=0;if(Be._shiftPusher&&(Wn=Math.max($n,qt.height>0?Fn==="l"?Pn-qt.left:qt.right-Pn:0),Be.title.text!==St._dfltTitle[At]&&(tr=(Be._titleStandoff||0)+(Be._titleScoot||0),Fn==="l"&&(tr+=tt(Be))),Be._fullDepth=Math.max(Wn,tr)),Be.automargin){Nt={x:0,y:0,r:0,l:0,t:0,b:0};var qn=[0,1],Jn=typeof Be._shift=="number"?Be._shift:0;if(At==="x"){if(Fn==="b"?Nt[Fn]=Be._depth:(Nt[Fn]=Be._depth=Math.max(qt.width>0?Pn-qt.top:0,$n),qn.reverse()),qt.width>0){var sr=qt.right-(Be._offset+Be._length);sr>0&&(Nt.xr=1,Nt.r=sr);var wr=Be._offset-qt.left;wr>0&&(Nt.xl=0,Nt.l=wr)}}else if(Fn==="l"?(Be._depth=Math.max(qt.height>0?Pn-qt.left:0,$n),Nt[Fn]=Be._depth-Jn):(Be._depth=Math.max(qt.height>0?qt.right-Pn:0,$n),Nt[Fn]=Be._depth+Jn,qn.reverse()),qt.height>0){var pr=qt.bottom-(Be._offset+Be._length);pr>0&&(Nt.yb=0,Nt.b=pr);var rr=Be._offset-qt.top;rr>0&&(Nt.yt=1,Nt.t=rr)}Nt[Ft]=Be.anchor==="free"?Be.position:Be._anchorAxis.domain[qn[0]],Be.title.text!==St._dfltTitle[At]&&(Nt[Fn]+=tt(Be)+(Be.title.standoff||0)),Be.mirror&&Be.anchor!=="free"&&((tn={x:0,y:0,r:0,l:0,t:0,b:0})[zn]=Be.linewidth,Be.mirror&&Be.mirror!==!0&&(tn[zn]+=$n),Be.mirror===!0||Be.mirror==="ticks"?tn[Ft]=Be._anchorAxis.domain[qn[1]]:Be.mirror!=="all"&&Be.mirror!=="allticks"||(tn[Ft]=[Be._counterDomainMin,Be._counterDomainMax][qn[1]]))}vn&&(_n=w.getComponentMethod("rangeslider","autoMarginOpts")(Ve,Be)),typeof Be.automargin=="string"&&(ot(Nt,Be.automargin),ot(tn,Be.automargin)),r.autoMargin(Ve,zt(Be),Nt),r.autoMargin(Ve,pt(Be),tn),r.autoMargin(Ve,vt(Be),_n)}),b.syncOrAsync(pn)}}function cn(qt){var Nt=wt+(qt||"tick");return Kt[Nt]||(Kt[Nt]=function(tn,_n,Fn){var zn,Pn,$n,Wn;if(tn._selections[_n].size())zn=1/0,Pn=-1/0,$n=1/0,Wn=-1/0,tn._selections[_n].each(function(){var qn=Dt(this),Jn=n.bBox(qn.node().parentNode);zn=Math.min(zn,Jn.top),Pn=Math.max(Pn,Jn.bottom),$n=Math.min($n,Jn.left),Wn=Math.max(Wn,Jn.right)});else{var tr=Z.makeLabelFns(tn,Fn);zn=Pn=tr.yFn({dx:0,dy:0,fontSize:0}),$n=Wn=tr.xFn({dx:0,dy:0,fontSize:0})}return{top:zn,bottom:Pn,left:$n,right:Wn,height:Pn-zn,width:Wn-$n}}(Be,Nt,Ht)),Kt[Nt]}},Z.getTickSigns=function(Ve,Be){var at=Ve._id.charAt(0),ht={x:"top",y:"right"}[at],dt=Ve.side===ht?1:-1,it=[-1,1,dt,-dt];return(Be?(Ve.minor||{}).ticks:Ve.ticks)!=="inside"==(at==="x")&&(it=it.map(function(kt){return-kt})),Ve.side&&it.push({l:-1,t:-1,r:1,b:1}[Ve.side.charAt(0)]),it},Z.makeTransTickFn=function(Ve){return Ve._id.charAt(0)==="x"?function(Be){return c(Ve._offset+Ve.l2p(Be.x),0)}:function(Be){return c(0,Ve._offset+Ve.l2p(Be.x))}},Z.makeTransTickLabelFn=function(Ve){var Be=function(At){var Ft=At.ticklabelposition||"",jt=function(un){return Ft.indexOf(un)!==-1},rn=jt("top"),nn=jt("left"),on=jt("right"),Ht=jt("bottom"),$t=jt("inside"),bn=Ht||nn||rn||on;if(!bn&&!$t)return[0,0];var ln=At.side,Kt=bn?(At.tickwidth||0)/2:0,fn=3,en=At.tickfont?At.tickfont.size:12;return(Ht||rn)&&(Kt+=en*K,fn+=(At.linewidth||0)/2),(nn||on)&&(Kt+=(At.linewidth||0)/2,fn+=3),$t&&ln==="top"&&(fn-=en*(1-K)),(nn||rn)&&(Kt=-Kt),ln!=="bottom"&&ln!=="right"||(fn=-fn),[bn?Kt:0,$t?fn:0]}(Ve),at=Ve.ticklabelshift||0,ht=Ve.ticklabelstandoff||0,dt=Be[0],it=Be[1],kt=Ve.range[0]>Ve.range[1],Tt=Ve.ticklabelposition&&Ve.ticklabelposition.indexOf("inside")!==-1,St=!Tt;if(at&&(at*=kt?-1:1),ht){var wt=Ve.side;ht*=Tt&&(wt==="top"||wt==="left")||St&&(wt==="bottom"||wt==="right")?1:-1}return Ve._id.charAt(0)==="x"?function(At){return c(dt+Ve._offset+Ve.l2p(_t(At))+at,it+ht)}:function(At){return c(it+ht,dt+Ve._offset+Ve.l2p(_t(At))+at)}},Z.makeTickPath=function(Ve,Be,at,ht){ht||(ht={});var dt=ht.minor;if(dt&&!Ve.minor)return"";var it=ht.len!==void 0?ht.len:dt?Ve.minor.ticklen:Ve.ticklen,kt=Ve._id.charAt(0),Tt=(Ve.linewidth||1)/2;return kt==="x"?"M0,"+(Be+Tt*at)+"v"+it*at:"M"+(Be+Tt*at)+",0h"+it*at},Z.makeLabelFns=function(Ve,Be,at){var ht=Ve.ticklabelposition||"",dt=function(Tn){return ht.indexOf(Tn)!==-1},it=dt("top"),kt=dt("left"),Tt=dt("right"),St=dt("bottom")||kt||it||Tt,wt=dt("inside"),At=ht==="inside"&&Ve.ticks==="inside"||!wt&&Ve.ticks==="outside"&&Ve.tickson!=="boundaries",Ft=0,jt=0,rn=At?Ve.ticklen:0;if(wt?rn*=-1:St&&(rn=0),At&&(Ft+=rn,at)){var nn=b.deg2rad(at);Ft=rn*Math.cos(nn)+1,jt=rn*Math.sin(nn)}Ve.showticklabels&&(At||Ve.showline)&&(Ft+=.2*Ve.tickfont.size);var on,Ht,$t,bn,ln,Kt={labelStandoff:Ft+=(Ve.linewidth||1)/2*(wt?-1:1),labelShift:jt},fn=0,en=Ve.side,un=Ve._id.charAt(0),An=Ve.tickangle;if(un==="x")bn=(ln=!wt&&en==="bottom"||wt&&en==="top")?1:-1,wt&&(bn*=-1),on=jt*bn,Ht=Be+Ft*bn,$t=ln?1:-.2,Math.abs(An)===90&&(wt?$t+=$:$t=An===-90&&en==="bottom"?K:An===90&&en==="top"?$:.5,fn=$/2*(An/90)),Kt.xFn=function(Tn){return Tn.dx+on+fn*Tn.fontSize},Kt.yFn=function(Tn){return Tn.dy+Ht+Tn.fontSize*$t},Kt.anchorFn=function(Tn,Cn){if(St){if(kt)return"end";if(Tt)return"start"}return T(Cn)&&Cn!==0&&Cn!==180?Cn*bn<0!==wt?"end":"start":"middle"},Kt.heightFn=function(Tn,Cn,Bn){return Cn<-60||Cn>60?-.5*Bn:Ve.side==="top"!==wt?-Bn:0};else if(un==="y"){if(bn=(ln=!wt&&en==="left"||wt&&en==="right")?1:-1,wt&&(bn*=-1),on=Ft,Ht=jt*bn,$t=0,wt||Math.abs(An)!==90||($t=An===-90&&en==="left"||An===90&&en==="right"?K:.5),wt){var wn=T(An)?+An:0;if(wn!==0){var On=b.deg2rad(wn);fn=Math.abs(Math.sin(On))*K*bn,$t=0}}Kt.xFn=function(Tn){return Tn.dx+Be-(on+Tn.fontSize*$t)*bn+fn*Tn.fontSize},Kt.yFn=function(Tn){return Tn.dy+Ht+Tn.fontSize*$},Kt.anchorFn=function(Tn,Cn){return T(Cn)&&Math.abs(Cn)===90?"middle":ln?"end":"start"},Kt.heightFn=function(Tn,Cn,Bn){return Ve.side==="right"&&(Cn*=-1),Cn<-30?-Bn:Cn<30?-.5*Bn:0}}return Kt},Z.drawTicks=function(Ve,Be,at){at=at||{};var ht=Be._id+"tick",dt=[].concat(Be.minor&&Be.minor.ticks?at.vals.filter(function(kt){return kt.minor&&!kt.noTick}):[]).concat(Be.ticks?at.vals.filter(function(kt){return!kt.minor&&!kt.noTick}):[]),it=at.layer.selectAll("path."+ht).data(dt,mt);it.exit().remove(),it.enter().append("path").classed(ht,1).classed("ticks",1).classed("crisp",at.crisp!==!1).each(function(kt){return i.stroke(_.select(this),kt.minor?Be.minor.tickcolor:Be.tickcolor)}).style("stroke-width",function(kt){return n.crispRound(Ve,kt.minor?Be.minor.tickwidth:Be.tickwidth,1)+"px"}).attr("d",at.path).style("display",null),xt(Be,[B]),it.attr("transform",at.transFn)},Z.drawGrid=function(Ve,Be,at){if(at=at||{},Be.tickmode!=="sync"){var ht=Be._id+"grid",dt=Be.minor&&Be.minor.showgrid,it=dt?at.vals.filter(function($t){return $t.minor}):[],kt=Be.showgrid?at.vals.filter(function($t){return!$t.minor}):[],Tt=at.counterAxis;if(Tt&&Z.shouldShowZeroLine(Ve,Be,Tt))for(var St=Be.tickmode==="array",wt=0;wt<kt.length;wt++){var At=kt[wt].x;if(St?!At:Math.abs(At)<Be.dtick/100){if(kt=kt.slice(0,wt).concat(kt.slice(wt+1)),!St)break;wt--}}Be._gw=n.crispRound(Ve,Be.gridwidth,1);for(var Ft=dt?n.crispRound(Ve,Be.minor.gridwidth,1):0,jt=at.layer,rn=at.minorLayer,nn=1;nn>=0;nn--){var on=nn?jt:rn;if(on){var Ht=on.selectAll("path."+ht).data(nn?kt:it,mt);Ht.exit().remove(),Ht.enter().append("path").classed(ht,1).classed("crisp",at.crisp!==!1),Ht.attr("transform",at.transFn).attr("d",at.path).each(function($t){return i.stroke(_.select(this),$t.minor?Be.minor.gridcolor:Be.gridcolor||"#ddd")}).style("stroke-dasharray",function($t){return n.dashStyle($t.minor?Be.minor.griddash:Be.griddash,$t.minor?Be.minor.gridwidth:Be.gridwidth)}).style("stroke-width",function($t){return($t.minor?Ft:Be._gw)+"px"}).style("display",null),typeof at.path=="function"&&Ht.attr("d",at.path)}}xt(Be,[N,W])}},Z.drawZeroLine=function(Ve,Be,at){at=at||at;var ht=Be._id+"zl",dt=Z.shouldShowZeroLine(Ve,Be,at.counterAxis),it=at.layer.selectAll("path."+ht).data(dt?[{x:0,id:Be._id}]:[]);it.exit().remove(),it.enter().append("path").classed(ht,1).classed("zl",1).classed("crisp",at.crisp!==!1).each(function(){at.layer.selectAll("path").sort(function(kt,Tt){return se(kt.id,Tt.id)})}),it.attr("transform",at.transFn).attr("d",at.path).call(i.stroke,Be.zerolinecolor||i.defaultLine).style("stroke-width",n.crispRound(Ve,Be.zerolinewidth,Be._gw||1)+"px").style("display",null),xt(Be,[I])},Z.drawLabels=function(Ve,Be,at){at=at||{};var ht=Ve._fullLayout,dt=Be._id,it=at.cls||dt+"tick",kt=at.vals.filter(function(Yn){return Yn.text}),Tt=at.labelFns,St=at.secondary?0:Be.tickangle,wt=(Be._prevTickAngles||{})[it],At=at.layer.selectAll("g."+it).data(Be.showticklabels?kt:[],mt),Ft=[];function jt(Yn,jn){Yn.each(function(Kn){var or=_.select(this),Qt=or.select(".text-math-group"),an=Tt.anchorFn(Kn,jn),Dn=at.transFn.call(or.node(),Kn)+(T(jn)&&+jn!=0?" rotate("+jn+","+Tt.xFn(Kn)+","+(Tt.yFn(Kn)-Kn.fontSize/2)+")":""),yn=o.lineCount(or),Ln=ee*Kn.fontSize,Vn=Tt.heightFn(Kn,T(jn)?+jn:0,(yn-1)*Ln);if(Vn&&(Dn+=c(0,Vn)),Qt.empty()){var Un=or.select("text");Un.attr({transform:Dn,"text-anchor":an}),Un.style("opacity",1),Be._adjustTickLabelsOverflow&&Be._adjustTickLabelsOverflow()}else{var er=n.bBox(Qt.node()).width*{end:-.5,start:.5}[an];Qt.attr("transform",Dn+c(er,0))}})}At.enter().append("g").classed(it,1).append("text").attr("text-anchor","middle").each(function(Yn){var jn=_.select(this),Kn=Ve._promises.length;jn.call(o.positionText,Tt.xFn(Yn),Tt.yFn(Yn)).call(n.font,{family:Yn.font,size:Yn.fontSize,color:Yn.fontColor,weight:Yn.fontWeight,style:Yn.fontStyle,variant:Yn.fontVariant,textcase:Yn.fontTextcase,lineposition:Yn.fontLineposition,shadow:Yn.fontShadow}).text(Yn.text).call(o.convertToTspans,Ve),Ve._promises[Kn]?Ft.push(Ve._promises.pop().then(function(){jt(jn,St)})):jt(jn,St)}),xt(Be,[V]),At.exit().remove(),at.repositionOnUpdate&&At.each(function(Yn){_.select(this).select("text").call(o.positionText,Tt.xFn(Yn),Tt.yFn(Yn))}),Be._adjustTickLabelsOverflow=function(){var Yn=Be.ticklabeloverflow;if(Yn&&Yn!=="allow"){var jn=Yn.indexOf("hide")!==-1,Kn=Be._id.charAt(0)==="x",or=0,Qt=Kn?Ve._fullLayout.width:Ve._fullLayout.height;if(Yn.indexOf("domain")!==-1){var an=b.simpleMap(Be.range,Be.r2l);or=Be.l2p(an[0])+Be._offset,Qt=Be.l2p(an[1])+Be._offset}var Dn=Math.min(or,Qt),yn=Math.max(or,Qt),Ln=Be.side,Vn=1/0,Un=-1/0;for(var er in At.each(function(mn){var Pt=_.select(this);if(Pt.select(".text-math-group").empty()){var Zt=n.bBox(Pt.node()),Wt=0;Kn?(Zt.right>yn||Zt.left<Dn)&&(Wt=1):(Zt.bottom>yn||Zt.top+(Be.tickangle?0:mn.fontSize/4)<Dn)&&(Wt=1);var gn=Pt.select("text");Wt?jn&&gn.style("opacity",0):(gn.style("opacity",1),Vn=Ln==="bottom"||Ln==="right"?Math.min(Vn,Kn?Zt.top:Zt.left):-1/0,Un=Ln==="top"||Ln==="left"?Math.max(Un,Kn?Zt.bottom:Zt.right):1/0)}}),ht._plots){var fr=ht._plots[er];if(Be._id===fr.xaxis._id||Be._id===fr.yaxis._id){var Xt=Kn?fr.yaxis:fr.xaxis;Xt&&(Xt["_visibleLabelMin_"+Be._id]=Vn,Xt["_visibleLabelMax_"+Be._id]=Un)}}}},Be._hideCounterAxisInsideTickLabels=function(Yn){var jn=Be._id.charAt(0)==="x",Kn=[];for(var or in ht._plots){var Qt=ht._plots[or];Be._id!==Qt.xaxis._id&&Be._id!==Qt.yaxis._id||Kn.push(jn?Qt.yaxis:Qt.xaxis)}Kn.forEach(function(an,Dn){an&&lt(an)&&(Yn||[I,W,N,B,V]).forEach(function(yn){var Ln=yn.K==="tick"&&yn.L==="text"&&Be.ticklabelmode==="period",Vn=ht._plots[Be._mainSubplot];(yn.K===I.K?Vn.zerolinelayer.selectAll("."+Be._id+"zl"):yn.K===W.K?Vn.minorGridlayer.selectAll("."+Be._id):yn.K===N.K?Vn.gridlayer.selectAll("."+Be._id):Vn[Be._id.charAt(0)+"axislayer"]).each(function(){var Un=_.select(this);yn.L&&(Un=Un.selectAll(yn.L)),Un.each(function(er){var fr=Be.l2p(Ln?_t(er):er.x)+Be._offset,Xt=_.select(this);fr<Be["_visibleLabelMax_"+an._id]&&fr>Be["_visibleLabelMin_"+an._id]?Xt.style("display","none"):yn.K!=="tick"||Dn||Xt.style("display",null)})})})})},jt(At,wt+1?wt:St);var rn=null;Be._selections&&(Be._selections[it]=At);var nn=[function(){return Ft.length&&Promise.all(Ft)}];Be.automargin&&ht._redrawFromAutoMarginCount&&wt===90?(rn=wt,nn.push(function(){jt(At,wt)})):nn.push(function(){if(jt(At,St),kt.length&&Be.autotickangles&&(Be.type!=="log"||String(Be.dtick).charAt(0)!=="D")){rn=Be.autotickangles[0];var Yn,jn=0,Kn=[],or=1;At.each(function(cn){jn=Math.max(jn,cn.fontSize);var qt=Be.l2p(cn.x),Nt=Dt(this),tn=n.bBox(Nt.node());or=Math.max(or,o.lineCount(Nt)),Kn.push({top:0,bottom:10,height:10,left:qt-tn.width/2,right:qt+tn.width/2+2,width:tn.width+2})});var Qt=(Be.tickson==="boundaries"||Be.showdividers)&&!at.secondary,an=kt.length,Dn=Math.abs((kt[an-1].x-kt[0].x)*Be._m)/(an-1),yn=Qt?Dn/2:Dn,Ln=Qt?Be.ticklen:1.25*jn*or,Vn=yn/Math.sqrt(Math.pow(yn,2)+Math.pow(Ln,2)),Un=Be.autotickangles.map(function(cn){return cn*Math.PI/180}),er=Un.find(function(cn){return Math.abs(Math.cos(cn))<=Vn});er===void 0&&(er=Un.reduce(function(cn,qt){return Math.abs(Math.cos(cn))<Math.abs(Math.cos(qt))?cn:qt},Un[0]));var fr=er*(180/Math.PI);if(Qt){var Xt=2;for(Be.ticks&&(Xt+=Be.tickwidth/2),Yn=0;Yn<Kn.length;Yn++){var mn=kt[Yn].xbnd,Pt=Kn[Yn];if(mn[0]!==null&&Pt.left-Be.l2p(mn[0])<Xt||mn[1]!==null&&Be.l2p(mn[1])-Pt.right<Xt){rn=fr;break}}}else{var Zt=Be.ticklabelposition||"",Wt=function(cn){return Zt.indexOf(cn)!==-1},gn=Wt("top"),pn=Wt("left"),kn=Wt("right"),vn=Wt("bottom")||pn||gn||kn?(Be.tickwidth||0)+6:0;for(Yn=0;Yn<Kn.length-1;Yn++)if(b.bBoxIntersect(Kn[Yn],Kn[Yn+1],vn)){rn=fr;break}}rn&&jt(At,rn)}}),Be._tickAngles&&nn.push(function(){Be._tickAngles[it]=rn===null?T(St)?St:0:rn});var on=function(){var Yn=0,jn=0;return At.each(function(Kn,or){var Qt,an=Dt(this);an.select(".text-math-group").empty()&&(Be._vals[or]&&(Qt=Be._vals[or].bb||n.bBox(an.node()),Be._vals[or].bb=Qt),Yn=Math.max(Yn,Qt.width),jn=Math.max(jn,Qt.height))}),{labelsMaxW:Yn,labelsMaxH:jn}},Ht=Be._anchorAxis;if(Ht&&(Ht.autorange||Ht.insiderange)&&lt(Be)&&!ce(ht,Be._id)&&(ht._insideTickLabelsUpdaterange||(ht._insideTickLabelsUpdaterange={}),Ht.autorange&&(ht._insideTickLabelsUpdaterange[Ht._name+".autorange"]=Ht.autorange,nn.push(on)),Ht.insiderange)){var $t=on(),bn=Be._id.charAt(0)==="y"?$t.labelsMaxW:$t.labelsMaxH;bn+=6,Be.ticklabelposition==="inside"&&(bn+=Be.ticklen||0);var ln=Be.side==="right"||Be.side==="top"?1:-1,Kt=ln===1?1:0,fn=ln===1?0:1,en=[];en[fn]=Ht.range[fn];var un=Ht.range,An=Ht.r2p(un[Kt]),wn=Ht.r2p(un[fn]),On=ht._insideTickLabelsUpdaterange[Ht._name+".range"];if(On){var Tn=Ht.r2p(On[Kt]),Cn=Ht.r2p(On[fn]),Bn=ln*(Be._id.charAt(0)==="y"?1:-1);Bn*An<Bn*Tn&&(An=Tn,en[Kt]=un[Kt]=On[Kt]),Bn*wn>Bn*Cn&&(wn=Cn,en[fn]=un[fn]=On[fn])}var Xn=Math.abs(wn-An);Xn-bn>0?bn*=1+bn/(Xn-=bn):bn=0,Be._id.charAt(0)!=="y"&&(bn=-bn),en[Kt]=Ht.p2r(Ht.r2p(un[Kt])+ln*bn),Ht.autorange==="min"||Ht.autorange==="max reversed"?(en[0]=null,Ht._rangeInitial0=void 0,Ht._rangeInitial1=void 0):Ht.autorange!=="max"&&Ht.autorange!=="min reversed"||(en[1]=null,Ht._rangeInitial0=void 0,Ht._rangeInitial1=void 0),ht._insideTickLabelsUpdaterange[Ht._name+".range"]=en}var cr=b.syncOrAsync(nn);return cr&&cr.then&&Ve._promises.push(cr),cr},Z.getPxPosition=function(Ve,Be){var at,ht=Ve._fullLayout._size,dt=Be._id.charAt(0),it=Be.side;return Be.anchor!=="free"?at=Be._anchorAxis:dt==="x"?at={_offset:ht.t+(1-(Be.position||0))*ht.h,_length:0}:dt==="y"&&(at={_offset:ht.l+(Be.position||0)*ht.w+Be._shift,_length:0}),it==="top"||it==="left"?at._offset:it==="bottom"||it==="right"?at._offset+at._length:void 0},Z.shouldShowZeroLine=function(Ve,Be,at){var ht=b.simpleMap(Be.range,Be.r2l);return ht[0]*ht[1]<=0&&Be.zeroline&&(Be.type==="linear"||Be.type==="-")&&!(Be.rangebreaks&&Be.maskBreaks(0)===U)&&(Qe(Be,0)||!function(dt,it,kt,Tt){var St=kt._mainAxis;if(St){var wt=dt._fullLayout,At=it._id.charAt(0),Ft=Z.counterLetter(it._id),jt=it._offset+(Math.abs(Tt[0])<Math.abs(Tt[1])==(At==="x")?0:it._length),rn=wt._plots[kt._mainSubplot];if(!(rn.mainplotinfo||rn).overlays.length)return $t(kt);for(var nn=Z.list(dt,Ft),on=0;on<nn.length;on++){var Ht=nn[on];if(Ht._mainAxis===St&&$t(Ht))return!0}}function $t(bn){if(!bn.showline||!bn.linewidth)return!1;var ln=Math.max((bn.linewidth+it.zerolinewidth)/2,1);function Kt(un){return typeof un=="number"&&Math.abs(un-jt)<ln}if(Kt(bn._mainLinePosition)||Kt(bn._mainMirrorPosition))return!0;var fn=bn._linepositions||{};for(var en in fn)if(Kt(fn[en][0])||Kt(fn[en][1]))return!0}}(Ve,Be,at,ht)||function(dt,it){for(var kt=dt._fullData,Tt=it._mainSubplot,St=it._id.charAt(0),wt=0;wt<kt.length;wt++){var At=kt[wt];if(At.visible===!0&&At.xaxis+At.yaxis===Tt&&(w.traceIs(At,"bar-like")&&At.orientation==={x:"h",y:"v"}[St]||At.fill&&At.fill.charAt(At.fill.length-1)===St))return!0}return!1}(Ve,Be))},Z.clipEnds=function(Ve,Be){return Be.filter(function(at){return Qe(Ve,at.x)})},Z.allowAutoMargin=function(Ve){for(var Be=Z.list(Ve,"",!0),at=0;at<Be.length;at++){var ht=Be[at];ht.automargin&&(r.allowAutoMargin(Ve,zt(ht)),ht.mirror&&r.allowAutoMargin(Ve,pt(ht))),w.getComponentMethod("rangeslider","isVisible")(ht)&&r.allowAutoMargin(Ve,vt(ht))}},Z.swap=function(Ve,Be){for(var at=function(dt,it){var kt,Tt,St=[];for(kt=0;kt<it.length;kt++){var wt=[],At=dt._fullData[it[kt]].xaxis,Ft=dt._fullData[it[kt]].yaxis;if(At&&Ft){for(Tt=0;Tt<St.length;Tt++)St[Tt].x.indexOf(At)===-1&&St[Tt].y.indexOf(Ft)===-1||wt.push(Tt);if(wt.length){var jt,rn=St[wt[0]];if(wt.length>1)for(Tt=1;Tt<wt.length;Tt++)jt=St[wt[Tt]],We(rn.x,jt.x),We(rn.y,jt.y);We(rn.x,[At]),We(rn.y,[Ft])}else St.push({x:[At],y:[Ft]})}}return St}(Ve,Be),ht=0;ht<at.length;ht++)Ze(Ve,at[ht].x,at[ht].y)}},52976:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(39032).BADNUM,w=T.isArrayOrTypedArray,b=T.isDateTime,c=T.cleanNumber,o=Math.round;function t(n,a){return a?_(n):typeof n=="number"}function i(n){return Math.max(1,(n-1)/1e3)}R.exports=function(n,a,s){var l=n,u=s.noMultiCategory;if(w(l)&&!l.length)return"-";if(!u&&function(g){return w(g[0])&&w(g[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var p=[],f=0;f<l.length;f++)if(w(l[f]))for(var m=0;m<l[f].length;m++)p.push(l[f][m]);l=p}if(function(g,v){for(var x=g.length,y=i(x),A=0,d=0,S={},k=0;k<x;k+=y){var E=g[o(k)],L=String(E);S[L]||(S[L]=1,b(E,v)&&A++,_(E)&&d++)}return A>2*d}(l,a))return"date";var h=s.autotypenumbers!=="strict";return function(g,v){for(var x=g.length,y=i(x),A=0,d=0,S={},k=0;k<x;k+=y){var E=g[o(k)],L=String(E);if(!S[L]){S[L]=1;var O=typeof E;O==="boolean"?d++:(v?c(E)!==r:O==="number")?A++:O==="string"&&d++}}return d>2*A}(l,h)?"category":function(g,v){for(var x=g.length,y=0;y<x;y++)if(t(g[y],v))return!0;return!1}(l,h)?"linear":"-"}},28336:function(R,C,e){"use strict";var _=e(38248),T=e(24040),r=e(3400),w=e(31780),b=e(51272),c=e(94724),o=e(26332),t=e(25404),i=e(95936),n=e(42568),a=e(22416),s=e(42136),l=e(96312),u=e(78344),p=e(33816).WEEKDAY_PATTERN,f=e(33816).HOUR_PATTERN;function m(v,x,y){function A(F,U){return r.coerce(v,x,c.rangebreaks,F,U)}if(A("enabled")){var d=A("bounds");if(d&&d.length>=2){var S,k,E="";if(d.length===2){for(S=0;S<2;S++)if(k=g(d[S])){E=p;break}}var L=A("pattern",E);if(L===p)for(S=0;S<2;S++)(k=g(d[S]))&&(x.bounds[S]=d[S]=k-1);if(L)for(S=0;S<2;S++)switch(k=d[S],L){case p:if(!_(k)||(k=+k)!==Math.floor(k)||k<0||k>=7)return void(x.enabled=!1);x.bounds[S]=d[S]=k;break;case f:if(!_(k)||(k=+k)<0||k>24)return void(x.enabled=!1);x.bounds[S]=d[S]=k}if(y.autorange===!1){var O=y.range;if(O[0]<O[1]){if(d[0]<O[0]&&d[1]>O[1])return void(x.enabled=!1)}else if(d[0]>O[0]&&d[1]<O[1])return void(x.enabled=!1)}}else{var P=A("values");if(!P||!P.length)return void(x.enabled=!1);A("dvalue")}}}R.exports=function(v,x,y,A,d){var S,k=A.letter,E=A.font||{},L=A.splomStash||{},O=y("visible",!A.visibleDflt),P=x._template||{},F=x.type||P.type||"-";F==="date"&&(T.getComponentMethod("calendars","handleDefaults")(v,x,"calendar",A.calendar),A.noTicklabelmode||(S=y("ticklabelmode"))),A.noTicklabelindex||F!=="date"&&F!=="linear"||y("ticklabelindex");var U="";A.noTicklabelposition&&F!=="multicategory"||(U=r.coerce(v,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:k==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),A.noTicklabeloverflow||y("ticklabeloverflow",U.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),u(x,d),l(v,x,y,A),a(v,x,y,A),F==="category"||A.noHover||y("hoverformat");var I=y("color"),N=I!==c.color.dflt?I:E.color,W=L.label||d._dfltTitle[k];if(n(v,x,y,F,A),!O)return x;y("title.text",W),r.coerceFont(y,"title.font",E,{overrideDflt:{size:r.bigFont(E.size),color:N}}),o(v,x,y,F);var B=A.hasMinor;if(B&&(w.newContainer(x,"minor"),o(v,x,y,F,{isMinor:!0})),i(v,x,y,F,A),t(v,x,y,A),B){var V=A.isMinor;A.isMinor=!0,t(v,x,y,A),A.isMinor=V}s(v,x,y,{dfltColor:I,bgColor:A.bgColor,showGrid:A.showGrid,hasMinor:B,attributes:c}),!B||x.minor.ticks||x.minor.showgrid||delete x.minor,(x.showline||x.ticks)&&y("mirror");var q,ne=F==="multicategory";if(A.noTickson||F!=="category"&&!ne||!x.ticks&&!x.showgrid||(ne&&(q="boundaries"),y("tickson",q)==="boundaries"&&delete x.ticklabelposition),ne&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),F==="date")if(b(v,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:m}),x.rangebreaks.length){for(var $=0;$<x.rangebreaks.length;$++)if(x.rangebreaks[$].pattern===p){x._hasDayOfWeekBreaks=!0;break}if(u(x,d),d._has("scattergl")||d._has("splom"))for(var K=0;K<A.data.length;K++){var ee=A.data[K];ee.type!=="scattergl"&&ee.type!=="splom"||(ee.visible=!1,r.warn(ee.type+" traces do not work on axes with rangebreaks. Setting trace "+ee.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var h={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(v){if(typeof v=="string")return h[v.substr(0,3).toLowerCase()]}},29736:function(R,C,e){"use strict";var _=e(26880),T=_.FORMAT_LINK,r=_.DATE_FORMAT_LINK;function w(c,o){return["Sets the "+c+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+T+"."].join(" ")}function b(c,o){return w(c,o)+[" And for dates see: "+r+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}R.exports={axisHoverFormat:function(c,o){return{valType:"string",dflt:"",editType:"none",description:(o?w:b)("hover text",c)+["By default the values are formatted using "+(o?"generic number format":"`"+c+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:w,descriptionWithDates:b}},79811:function(R,C,e){"use strict";var _=e(24040),T=e(33816);function r(w,b){if(b&&b.length){for(var c=0;c<b.length;c++)if(b[c][w])return!0}return!1}C.id2name=function(w){if(typeof w=="string"&&w.match(T.AX_ID_PATTERN)){var b=w.split(" ")[0].substr(1);return b==="1"&&(b=""),w.charAt(0)+"axis"+b}},C.name2id=function(w){if(w.match(T.AX_NAME_PATTERN)){var b=w.substr(5);return b==="1"&&(b=""),w.charAt(0)+b}},C.cleanId=function(w,b,c){var o=/( domain)$/.test(w);if(typeof w=="string"&&w.match(T.AX_ID_PATTERN)&&(!b||w.charAt(0)===b)&&(!o||c)){var t=w.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),w.charAt(0)+t+(o&&c?" domain":"")}},C.list=function(w,b,c){var o=w._fullLayout;if(!o)return[];var t,i=C.listIds(w,b),n=new Array(i.length);for(t=0;t<i.length;t++){var a=i[t];n[t]=o[a.charAt(0)+"axis"+a.substr(1)]}if(!c){var s=o._subplots.gl3d||[];for(t=0;t<s.length;t++){var l=o[s[t]];b?n.push(l[b+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},C.listIds=function(w,b){var c=w._fullLayout;if(!c)return[];var o=c._subplots;return b?o[b+"axis"]:o.xaxis.concat(o.yaxis)},C.getFromId=function(w,b,c){var o=w._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),c==="x"?b=b.replace(/y[0-9]*/,""):c==="y"&&(b=b.replace(/x[0-9]*/,"")),o[C.id2name(b)]},C.getFromTrace=function(w,b,c){var o=w._fullLayout,t=null;if(_.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=o[i][c+"axis"])}else t=C.getFromId(w,b[c+"axis"]||c);return t},C.idSort=function(w,b){var c=w.charAt(0),o=b.charAt(0);return c!==o?c>o?1:-1:+(w.substr(1)||1)-+(b.substr(1)||1)},C.ref2id=function(w){return!!/^[xyz]/.test(w)&&w.split(" ")[0]},C.isLinked=function(w,b){return r(b,w._axisMatchGroups)||r(b,w._axisConstraintGroups)}},22416:function(R,C,e){"use strict";var _=e(38116).isTypedArraySpec;R.exports=function(T,r,w,b){if(r.type==="category"){var c,o=T.categoryarray,t=Array.isArray(o)&&o.length>0||_(o);t&&(c="array");var i,n=w("categoryorder",c);n==="array"&&(i=w("categoryarray")),t||n!=="array"||(n=r.categoryorder="trace"),n==="trace"?r._initialCategories=[]:n==="array"?r._initialCategories=i.slice():(i=function(a,s){var l,u,p,f=s.dataAttr||a._id.charAt(0),m={};if(s.axData)l=s.axData;else for(l=[],u=0;u<s.data.length;u++){var h=s.data[u];h[f+"axis"]===a._id&&l.push(h)}for(u=0;u<l.length;u++){var g=l[u][f];for(p=0;p<g.length;p++){var v=g[p];v!=null&&(m[v]=1)}}return Object.keys(m)}(r,b).sort(),n==="category ascending"?r._initialCategories=i:n==="category descending"&&(r._initialCategories=i.reverse()))}}},98728:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(39032),w=r.ONEDAY,b=r.ONEWEEK;C.dtick=function(c,o){var t=o==="log",i=o==="date",n=o==="category",a=i?w:1;if(!c)return a;if(_(c))return(c=Number(c))<=0?a:n?Math.max(1,Math.round(c)):i?Math.max(.1,c):c;if(typeof c!="string"||!i&&!t)return a;var s=c.charAt(0),l=c.substr(1);return(l=_(l)?Number(l):0)<=0||!(i&&s==="M"&&l===Math.round(l)||t&&s==="L"||t&&s==="D"&&(l===1||l===2))?a:c},C.tick0=function(c,o,t,i){return o==="date"?T.cleanDate(c,T.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?_(c)?Number(c):0:void 0}},33816:function(R,C,e){"use strict";var _=e(53756).counter;R.exports={idRegex:{x:_("x","( domain)?"),y:_("y","( domain)?")},attrRegex:_("[xy]axis"),xAxisMatch:_("xaxis"),yAxisMatch:_("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}},71888:function(R,C,e){"use strict";var _=e(3400),T=e(19280),r=e(79811).id2name,w=e(94724),b=e(21160),c=e(78344),o=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(f,m,h){var g=h.axIds,v=h.layoutOut,x=h.hasImage,y=v._axisConstraintGroups,A=v._axisMatchGroups,d=m._id,S=d.charAt(0),k=((v._splomAxes||{})[S]||{})[d]||{},E=m._id,L=E.charAt(0)==="x";function O(J,Z){return _.coerce(f,m,w,J,Z)}m._matchGroup=null,m._constraintGroup=null,O("constrain",x?"domain":"range"),_.coerce(f,m,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var P,F,U=m.type,I=[];for(P=0;P<g.length;P++)(F=g[P])!==E&&v[r(F)].type===U&&I.push(F);var N=a(y,E);if(N){var W=[];for(P=0;P<I.length;P++)N[F=I[P]]||W.push(F);I=W}var B,V,q=I.length;q&&(f.matches||k.matches)&&(B=_.coerce(f,m,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(k.matches)!==-1?k.matches:void 0}},"matches"));var ne=x&&!L?m.anchor:void 0;if(q&&!B&&(f.scaleanchor||ne)&&(V=_.coerce(f,m,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",ne)),B){m._matchGroup=s(A,E,B,1);var $=v[r(B)],K=n(v,m)/n(v,$);L!==(B.charAt(0)==="x")&&(K=(L?"x":"y")+K),s(y,E,B,K)}else f.matches&&g.indexOf(f.matches)!==-1&&_.warn("ignored "+m._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(V){var ee=O("scaleratio");ee||(ee=m.scaleratio=1),s(y,E,V,ee)}else f.scaleanchor&&g.indexOf(f.scaleanchor)!==-1&&_.warn("ignored "+m._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(f,m){var h=m.domain;return h||(h=f[r(m.overlaying)].domain),h[1]-h[0]}function a(f,m){for(var h=0;h<f.length;h++)if(f[h][m])return f[h];return null}function s(f,m,h,g){var v,x,y,A,d,S=a(f,m);S===null?((S={})[m]=1,d=f.length,f.push(S)):d=f.indexOf(S);var k=Object.keys(S);for(v=0;v<f.length;v++)if(y=f[v],v!==d&&y[h]){var E=y[h];for(x=0;x<k.length;x++)y[A=k[x]]=l(E,l(g,S[A]));return void f.splice(d,1)}if(g!==1)for(x=0;x<k.length;x++){var L=k[x];S[L]=l(g,S[L])}S[h]=1}function l(f,m){var h,g,v="",x="";typeof f=="string"&&(h=(v=f.match(/^[xy]*/)[0]).length,f=+f.substr(h)),typeof m=="string"&&(g=(x=m.match(/^[xy]*/)[0]).length,m=+m.substr(g));var y=f*m;return h||g?h&&g&&v.charAt(0)!==x.charAt(0)?h===g?y:(h>g?v.substr(g):x.substr(h))+y:v+x+f*m:y}function u(f,m){for(var h=m._size,g=h.h/h.w,v={},x=Object.keys(f),y=0;y<x.length;y++){var A=x[y],d=f[A];if(typeof d=="string"){var S=d.match(/^[xy]*/)[0],k=S.length;d=+d.substr(k);for(var E=S.charAt(0)==="y"?g:1/g,L=0;L<k;L++)d*=E}v[A]=d}return v}function p(f,m){var h=f._inputDomain,g=t[f.constraintoward],v=h[0]+(h[1]-h[0])*g;f.domain=f._input.domain=[v+(h[0]-v)/m,v+(h[1]-v)/m],f.setScale()}C.handleDefaults=function(f,m,h){var g,v,x,y,A,d,S,k,E=h.axIds,L=h.axHasImage,O=m._axisConstraintGroups=[],P=m._axisMatchGroups=[];for(g=0;g<E.length;g++)i(A=f[y=r(E[g])],d=m[y],{axIds:E,layoutOut:m,hasImage:L[y]});function F($,K){for(g=0;g<$.length;g++)for(x in v=$[g])m[r(x)][K]=v}for(F(P,"_matchGroup"),g=0;g<O.length;g++)for(x in v=O[g])if((d=m[r(x)]).fixedrange){for(var U in v){var I=r(U);(f[I]||{}).fixedrange===!1&&_.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),m[I].fixedrange=!0}break}for(g=0;g<O.length;){for(x in v=O[g]){(d=m[r(x)])._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(v).length&&(O.splice(g,1),g--);break}g++}F(O,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,B=!1;function V(){k=d[S],S==="rangebreaks"&&(B=d._hasDayOfWeekBreaks)}for(g=0;g<P.length;g++){v=P[g];for(var q=0;q<N.length;q++){var ne;for(x in S=N[q],k=null,v)if(A=f[y=r(x)],d=m[y],S in d){if(!d.matches&&(ne=d,S in A)){V();break}k===null&&S in A&&V()}if(S==="range"&&k&&A.range&&A.range.length===2&&A.range[0]!==null&&A.range[1]!==null&&(W=!0),S==="autorange"&&k===null&&W&&(k=!1),k===null&&S in ne&&(k=ne[S]),k!==null)for(x in v)(d=m[r(x)])[S]=S==="range"?k.slice():k,S==="rangebreaks"&&(d._hasDayOfWeekBreaks=B,c(d,m))}}},C.enforce=function(f){var m,h,g,v,x,y,A,d,S=f._fullLayout,k=S._axisConstraintGroups||[];for(m=0;m<k.length;m++){g=u(k[m],S);var E=Object.keys(g),L=1/0,O=0,P=1/0,F={},U={},I=!1;for(h=0;h<E.length;h++)U[v=E[h]]=x=S[r(v)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),F[v]=y=Math.abs(x._m)/g[v],L=Math.min(L,y),x.constrain!=="domain"&&x._constraintShrinkable||(P=Math.min(P,y)),delete x._constraintShrinkable,O=Math.max(O,y),x.constrain==="domain"&&(I=!0);if(!(L>o*O)||I){for(h=0;h<E.length;h++)if(y=F[v=E[h]],A=(x=U[v]).constrain,y!==P||A==="domain")if(d=y/P,A==="range")b(x,d);else{var N=x._inputDomain,W=(x.domain[1]-x.domain[0])/(N[1]-N[0]),B=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((d/=W)*B<1){x.domain=x._input.domain=N.slice(),b(x,d);continue}if(B<1&&(x.range=x._input.range=x._inputRange.slice(),d*=B),x.autorange){var V=x.r2l(x.range[0]),q=x.r2l(x.range[1]),ne=(V+q)/2,$=ne,K=ne,ee=Math.abs(q-ne),J=ne-ee*d*1.0001,Z=ne+ee*d*1.0001,te=T.makePadFn(S,x,0),oe=T.makePadFn(S,x,1);p(x,d);var se,ce,ye=Math.abs(x._m),me=T.concatExtremes(f,x),fe=me.min,pe=me.max;for(ce=0;ce<fe.length;ce++)(se=fe[ce].val-te(fe[ce])/ye)>J&&se<$&&($=se);for(ce=0;ce<pe.length;ce++)(se=pe[ce].val+oe(pe[ce])/ye)<Z&&se>K&&(K=se);d/=(K-$)/(2*ee),$=x.l2r($),K=x.l2r(K),x.range=x._input.range=V<q?[$,K]:[K,$]}p(x,d)}}}},C.getAxisGroup=function(f,m){for(var h=f._axisMatchGroups,g=0;g<h.length;g++)if(h[g][m])return"g"+g;return m},C.clean=function(f,m){if(m._inputDomain){for(var h=!1,g=m._id,v=f._fullLayout._axisConstraintGroups,x=0;x<v.length;x++)if(v[x][g]){h=!0;break}h&&m.constrain==="domain"||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},51184:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.numberFormat,w=e(49760),b=e(89184),c=e(24040),o=T.strTranslate,t=e(72736),i=e(76308),n=e(43616),a=e(93024),s=e(54460),l=e(93972),u=e(86476),p=e(72760),f=p.selectingOrDrawing,m=p.freeMode,h=e(84284).FROM_TL,g=e(73696),v=e(39172).redrawReglTraces,x=e(7316),y=e(79811).getFromId,A=e(22676).prepSelect,d=e(22676).clearOutline,S=e(22676).selectOnClick,k=e(21160),E=e(33816),L=E.MINDRAG,O=E.MINZOOM,P=!0;function F(se,ce,ye,me){var fe=T.ensureSingle(se.draglayer,ce,ye,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return fe.call(l,me),fe.node()}function U(se,ce,ye,me,fe,pe,ge){var ke=F(se,"rect",ce,ye);return _.select(ke).call(n.setRect,me,fe,pe,ge),ke}function I(se,ce){for(var ye=0;ye<se.length;ye++)if(!se[ye].fixedrange)return ce;return""}function N(se,ce,ye,me,fe){for(var pe=0;pe<se.length;pe++){var ge=se[pe];if(!ge.fixedrange)if(ge.rangebreaks){var ke=ge._id.charAt(0)==="y",Ce=ke?1-ce:ce,de=ke?1-ye:ye;me[ge._name+".range[0]"]=ge.l2r(ge.p2l(Ce*ge._length)),me[ge._name+".range[1]"]=ge.l2r(ge.p2l(de*ge._length))}else{var ae=ge._rl[0],re=ge._rl[1]-ae;me[ge._name+".range[0]"]=ge.l2r(ae+re*ce),me[ge._name+".range[1]"]=ge.l2r(ae+re*ye)}}if(fe&&fe.length){var he=(ce+(1-ye))/2;N(fe,he,1-he,me,[])}}function W(se,ce){for(var ye=0;ye<se.length;ye++){var me=se[ye];if(!me.fixedrange){if(me.rangebreaks){var fe=me._length,pe=(me.p2l(0+ce)-me.p2l(0)+(me.p2l(fe+ce)-me.p2l(fe)))/2;me.range=[me.l2r(me._rl[0]-pe),me.l2r(me._rl[1]-pe)]}else me.range=[me.l2r(me._rl[0]-ce/me._m),me.l2r(me._rl[1]-ce/me._m)];me.limitRange&&me.limitRange()}}}function B(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function V(se,ce,ye,me,fe){return se.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",o(ye,me)).attr("d",fe+"Z")}function q(se,ce,ye){return se.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",o(ce,ye)).attr("d","M0,0Z")}function ne(se,ce,ye,me,fe,pe){se.attr("d",me+"M"+ye.l+","+ye.t+"v"+ye.h+"h"+ye.w+"v-"+ye.h+"h-"+ye.w+"Z"),$(se,ce,fe,pe)}function $(se,ce,ye,me){ye||(se.transition().style("fill",me>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function K(se){_.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ee(se){P&&se.data&&se._context.showTips&&(T.notifier(T._(se,"Double-click to zoom back out"),"long"),P=!1)}function J(se){var ce=Math.floor(Math.min(se.b-se.t,se.r-se.l,O)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function Z(se,ce,ye,me,fe){for(var pe,ge,ke,Ce,de=!1,ae={},re={},he=(fe||{}).xaHash,Se=(fe||{}).yaHash,xe=0;xe<ce.length;xe++){var Te=ce[xe];for(pe in ye)if(Te[pe]){for(ke in Te)fe&&(he[ke]||Se[ke])||(ke.charAt(0)==="x"?ye:me)[ke]||(ae[ke]=pe);for(ge in me)fe&&(he[ge]||Se[ge])||!Te[ge]||(de=!0)}for(ge in me)if(Te[ge])for(Ce in Te)fe&&(he[Ce]||Se[Ce])||(Ce.charAt(0)==="x"?ye:me)[Ce]||(re[Ce]=ge)}de&&(T.extendFlat(ae,re),re={});var Ae={},Pe=[];for(ke in ae){var De=y(se,ke);Pe.push(De),Ae[De._id]=De}var ve={},we=[];for(Ce in re){var Ee=y(se,Ce);we.push(Ee),ve[Ee._id]=Ee}return{xaHash:Ae,yaHash:ve,xaxes:Pe,yaxes:we,xLinks:ae,yLinks:re,isSubplotConstrained:de}}function te(se,ce){if(b){var ye=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(ye,se._onwheel),se._onwheel=ce,se.addEventListener(ye,ce,{passive:!1})}else se.onwheel!==void 0?se.onwheel=ce:se.onmousewheel!==void 0?se.onmousewheel=ce:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ce,{passive:!1}))}function oe(se){var ce=[];for(var ye in se)ce.push(se[ye]);return ce}R.exports={makeDragBox:function(se,ce,ye,me,fe,pe,ge,ke){var Ce,de,ae,re,he,Se,xe,Te,Ae,Pe,De,ve,we,Ee,Fe,Le,je,Ge,Je,rt,ot,yt,_t,mt=se._fullLayout._zoomlayer,tt=ge+ke==="nsew",Qe=(ge+ke).length===1;function Dt(){if(Ce=ce.xaxis,de=ce.yaxis,Ae=Ce._length,Pe=de._length,xe=Ce._offset,Te=de._offset,(ae={})[Ce._id]=Ce,(re={})[de._id]=de,ge&&ke)for(var Kt=ce.overlays,fn=0;fn<Kt.length;fn++){var en=Kt[fn].xaxis;ae[en._id]=en;var un=Kt[fn].yaxis;re[un._id]=un}he=oe(ae),Se=oe(re),we=I(he,ke),Ee=I(Se,ge),Fe=!Ee&&!we,ve=Z(se,se._fullLayout._axisMatchGroups,ae,re);var An=(De=Z(se,se._fullLayout._axisConstraintGroups,ae,re,ve)).isSubplotConstrained||ve.isSubplotConstrained;Le=ke||An,je=ge||An;var wn=se._fullLayout;Ge=wn._has("scattergl"),Je=wn._has("splom"),rt=wn._has("svg")}ye+=ce.yaxis._shift,Dt();var zt=function(Kt,fn,en){return Kt?Kt==="nsew"?en?"":fn==="pan"?"move":"crosshair":Kt.toLowerCase()+"-resize":"pointer"}(Ee+we,se._fullLayout.dragmode,tt),pt=U(ce,ge+ke+"drag",zt,ye,me,fe,pe);if(Fe&&!tt)return pt.onmousedown=null,pt.style.pointerEvents="none",pt;var vt,We,Ze,Ne,Xe,st,lt,xt,bt,Ve,Be={element:pt,gd:se,plotinfo:ce};function at(){Be.plotinfo.selection=!1,d(se)}function ht(Kt,fn){var en=Be.gd;if(en._fullLayout._activeShapeIndex>=0)en._fullLayout._deactivateShape(en);else{var un=en._fullLayout.clickmode;if(K(en),Kt!==2||Qe||nn(),tt)un.indexOf("select")>-1&&S(fn,en,he,Se,ce.id,Be),un.indexOf("event")>-1&&a.click(en,fn,ce.id);else if(Kt===1&&Qe){var An=ge?de:Ce,wn=ge==="s"||ke==="w"?0:1,On=An._name+".range["+wn+"]",Tn=function(Xn,cr){var Yn,jn=Xn.range[cr],Kn=Math.abs(jn-Xn.range[1-cr]);return Xn.type==="date"?jn:Xn.type==="log"?(Yn=Math.ceil(Math.max(0,-Math.log(Kn)/Math.LN10))+3,r("."+Yn+"g")(Math.pow(10,jn))):(Yn=Math.floor(Math.log(Math.abs(jn))/Math.LN10)-Math.floor(Math.log(Kn)/Math.LN10)+4,r("."+String(Yn)+"g")(jn))}(An,wn),Cn="left",Bn="middle";if(An.fixedrange)return;ge?(Bn=ge==="n"?"top":"bottom",An.side==="right"&&(Cn="right")):ke==="e"&&(Cn="right"),en._context.showAxisRangeEntryBoxes&&_.select(pt).call(t.makeEditable,{gd:en,immediate:!0,background:en._fullLayout.paper_bgcolor,text:String(Tn),fill:An.tickfont?An.tickfont.color:"#444",horizontalAlign:Cn,verticalAlign:Bn}).on("edit",function(Xn){var cr=An.d2r(Xn);cr!==void 0&&c.call("_guiRelayout",en,On,cr)})}}}function dt(Kt,fn){if(se._transitioningWithDuration)return!1;var en=Math.max(0,Math.min(Ae,yt*Kt+vt)),un=Math.max(0,Math.min(Pe,_t*fn+We)),An=Math.abs(en-vt),wn=Math.abs(un-We);function On(){lt="",Ze.r=Ze.l,Ze.t=Ze.b,bt.attr("d","M0,0Z")}if(Ze.l=Math.min(vt,en),Ze.r=Math.max(vt,en),Ze.t=Math.min(We,un),Ze.b=Math.max(We,un),De.isSubplotConstrained)An>O||wn>O?(lt="xy",An/Ae>wn/Pe?(wn=An*Pe/Ae,We>un?Ze.t=We-wn:Ze.b=We+wn):(An=wn*Ae/Pe,vt>en?Ze.l=vt-An:Ze.r=vt+An),bt.attr("d",J(Ze))):On();else if(ve.isSubplotConstrained)if(An>O||wn>O){lt="xy";var Tn=Math.min(Ze.l/Ae,(Pe-Ze.b)/Pe),Cn=Math.max(Ze.r/Ae,(Pe-Ze.t)/Pe);Ze.l=Tn*Ae,Ze.r=Cn*Ae,Ze.b=(1-Tn)*Pe,Ze.t=(1-Cn)*Pe,bt.attr("d",J(Ze))}else On();else!Ee||wn<Math.min(Math.max(.6*An,L),O)?An<L||!we?On():(Ze.t=0,Ze.b=Pe,lt="x",bt.attr("d",function(Bn,Xn){return"M"+(Bn.l-.5)+","+(Xn-O-.5)+"h-3v"+(2*O+1)+"h3ZM"+(Bn.r+.5)+","+(Xn-O-.5)+"h3v"+(2*O+1)+"h-3Z"}(Ze,We))):!we||An<Math.min(.6*wn,O)?(Ze.l=0,Ze.r=Ae,lt="y",bt.attr("d",function(Bn,Xn){return"M"+(Xn-O-.5)+","+(Bn.t-.5)+"v-3h"+(2*O+1)+"v3ZM"+(Xn-O-.5)+","+(Bn.b+.5)+"v3h"+(2*O+1)+"v-3Z"}(Ze,vt))):(lt="xy",bt.attr("d",J(Ze)));Ze.w=Ze.r-Ze.l,Ze.h=Ze.b-Ze.t,lt&&(Ve=!0),se._dragged=Ve,ne(xt,bt,Ze,Xe,st,Ne),it(),se.emit("plotly_relayouting",ot),st=!0}function it(){ot={},lt!=="xy"&&lt!=="x"||(N(he,Ze.l/Ae,Ze.r/Ae,ot,De.xaxes),jt("x",ot)),lt!=="xy"&&lt!=="y"||(N(Se,(Pe-Ze.b)/Pe,(Pe-Ze.t)/Pe,ot,De.yaxes),jt("y",ot))}function kt(){it(),K(se),on(),ee(se)}Be.prepFn=function(Kt,fn,en){var un=Be.dragmode,An=se._fullLayout.dragmode;An!==un&&(Be.dragmode=An),Dt(),yt=se._fullLayout._invScaleX,_t=se._fullLayout._invScaleY,Fe||(tt?Kt.shiftKey?An==="pan"?An="zoom":f(An)||(An="pan"):Kt.ctrlKey&&(An="pan"):An="pan"),m(An)?Be.minDrag=1:Be.minDrag=void 0,f(An)?(Be.xaxes=he,Be.yaxes=Se,A(Kt,fn,en,Be,An)):(Be.clickFn=ht,f(un)&&at(),Fe||(An==="zoom"?(Be.moveFn=dt,Be.doneFn=kt,Be.minDrag=1,function(wn,On,Tn){var Cn=pt.getBoundingClientRect();vt=On-Cn.left,We=Tn-Cn.top,se._fullLayout._calcInverseTransform(se);var Bn=T.apply3DTransform(se._fullLayout._invTransform)(vt,We);vt=Bn[0],We=Bn[1],Ze={l:vt,r:vt,w:0,t:We,b:We,h:0},Ne=se._hmpixcount?se._hmlumcount/se._hmpixcount:w(se._fullLayout.plot_bgcolor).getLuminance(),st=!1,lt="xy",Ve=!1,xt=V(mt,Ne,xe,Te,Xe="M0,0H"+Ae+"V"+Pe+"H0V0"),bt=q(mt,xe,Te)}(0,fn,en)):An==="pan"&&(Be.moveFn=Ft,Be.doneFn=on))),se._fullLayout._redrag=function(){var wn=se._dragdata;if(wn&&wn.element===pt){var On=se._fullLayout.dragmode;f(On)||(Dt(),Ht([0,0,Ae,Pe]),Be.moveFn(wn.dx,wn.dy))}}},u.init(Be);var Tt=[0,0,Ae,Pe],St=null,wt=E.REDRAWDELAY,At=ce.mainplot?se._fullLayout._plots[ce.mainplot]:ce;function Ft(Kt,fn){if(Kt*=yt,fn*=_t,!se._transitioningWithDuration){if(se._fullLayout._replotting=!0,we==="ew"||Ee==="ns"){var en=we?-Kt:0,un=Ee?-fn:0;if(ve.isSubplotConstrained){if(we&&Ee){var An=(Kt/Ae-fn/Pe)/2;en=-(Kt=An*Ae),un=-(fn=-An*Pe)}Ee?en=-un*Ae/Pe:un=-en*Pe/Ae}return we&&(W(he,Kt),jt("x")),Ee&&(W(Se,fn),jt("y")),Ht([en,un,Ae,Pe]),rn(),void se.emit("plotly_relayouting",ot)}var wn,On,Tn=we==="w"==(Ee==="n")?1:-1;if(we&&Ee&&(De.isSubplotConstrained||ve.isSubplotConstrained)){var Cn=(Kt/Ae+Tn*fn/Pe)/2;Kt=Cn*Ae,fn=Tn*Cn*Pe}if(we==="w"?Kt=Yn(he,0,Kt):we==="e"?Kt=Yn(he,1,-Kt):we||(Kt=0),Ee==="n"?fn=Yn(Se,1,fn):Ee==="s"?fn=Yn(Se,0,-fn):Ee||(fn=0),wn=we==="w"?Kt:0,On=Ee==="n"?fn:0,De.isSubplotConstrained&&!ve.isSubplotConstrained||ve.isSubplotConstrained&&we&&Ee&&Tn>0){var Bn;if(ve.isSubplotConstrained||!we&&Ee.length===1){for(Bn=0;Bn<he.length;Bn++)he[Bn].range=he[Bn]._r.slice(),k(he[Bn],1-fn/Pe);wn=(Kt=fn*Ae/Pe)/2}if(ve.isSubplotConstrained||!Ee&&we.length===1){for(Bn=0;Bn<Se.length;Bn++)Se[Bn].range=Se[Bn]._r.slice(),k(Se[Bn],1-Kt/Ae);On=(fn=Kt*Pe/Ae)/2}}ve.isSubplotConstrained&&Ee||jt("x"),ve.isSubplotConstrained&&we||jt("y");var Xn=Ae-Kt,cr=Pe-fn;!ve.isSubplotConstrained||we&&Ee||(we?(On=wn?0:Kt*Pe/Ae,cr=Xn*Pe/Ae):(wn=On?0:fn*Ae/Pe,Xn=cr*Ae/Pe)),Ht([wn,On,Xn,cr]),rn(),se.emit("plotly_relayouting",ot)}function Yn(jn,Kn,or){for(var Qt,an,Dn=1-Kn,yn=0;yn<jn.length;yn++){var Ln=jn[yn];if(!Ln.fixedrange){Qt=Ln,an=Ln._rl[Dn]+(Ln._rl[Kn]-Ln._rl[Dn])/B(or/Ln._length);var Vn=Ln.l2r(an);Vn!==!1&&Vn!==void 0&&(Ln.range[Kn]=Vn)}}return Qt._length*(Qt._rl[Kn]-an)/(Qt._rl[Kn]-Qt._rl[Dn])}}function jt(Kt,fn){for(var en=ve.isSubplotConstrained?{x:Se,y:he}[Kt]:ve[Kt+"axes"],un=ve.isSubplotConstrained?{x:he,y:Se}[Kt]:[],An=0;An<en.length;An++){var wn=en[An],On=wn._id,Tn=ve.xLinks[On]||ve.yLinks[On],Cn=un[0]||ae[Tn]||re[Tn];Cn&&(fn?(fn[wn._name+".range[0]"]=fn[Cn._name+".range[0]"],fn[wn._name+".range[1]"]=fn[Cn._name+".range[1]"]):wn.range=Cn.range.slice())}}function rn(){var Kt,fn=[];function en(On){for(Kt=0;Kt<On.length;Kt++)On[Kt].fixedrange||fn.push(On[Kt]._id)}function un(On,Tn){for(Kt=0;Kt<On.length;Kt++){var Cn=On[Kt],Bn=Cn[Tn];Cn.fixedrange||Bn.tickmode!=="sync"||fn.push(Bn._id)}}for(Le&&(en(he),en(De.xaxes),en(ve.xaxes),un(ce.overlays,"xaxis")),je&&(en(Se),en(De.yaxes),en(ve.yaxes),un(ce.overlays,"yaxis")),ot={},Kt=0;Kt<fn.length;Kt++){var An=fn[Kt],wn=y(se,An);s.drawOne(se,wn,{skipTitle:!0}),ot[wn._name+".range[0]"]=wn.range[0],ot[wn._name+".range[1]"]=wn.range[1]}s.redrawComponents(se,fn)}function nn(){if(!se._transitioningWithDuration){var Kt=se._context.doubleClick,fn=[];we&&(fn=fn.concat(he)),Ee&&(fn=fn.concat(Se)),ve.xaxes&&(fn=fn.concat(ve.xaxes)),ve.yaxes&&(fn=fn.concat(ve.yaxes));var en,un,An={};if(Kt==="reset+autosize")for(Kt="autosize",un=0;un<fn.length;un++){var wn=(en=fn[un])._rangeInitial0,On=en._rangeInitial1,Tn=wn!==void 0||On!==void 0;if(Tn&&(wn!==void 0&&wn!==en.range[0]||On!==void 0&&On!==en.range[1])||!Tn&&en.autorange!==!0){Kt="reset";break}}if(Kt==="autosize")for(un=0;un<fn.length;un++)(en=fn[un]).fixedrange||(An[en._name+".autorange"]=!0);else if(Kt==="reset"){for((we||De.isSubplotConstrained)&&(fn=fn.concat(De.xaxes)),Ee&&!De.isSubplotConstrained&&(fn=fn.concat(De.yaxes)),De.isSubplotConstrained&&(we?Ee||(fn=fn.concat(Se)):fn=fn.concat(he)),un=0;un<fn.length;un++)if(!(en=fn[un]).fixedrange){var Cn=en._name,Bn=en._autorangeInitial;en._rangeInitial0===void 0&&en._rangeInitial1===void 0?An[Cn+".autorange"]=!0:en._rangeInitial0===void 0?(An[Cn+".autorange"]=Bn,An[Cn+".range"]=[null,en._rangeInitial1]):en._rangeInitial1===void 0?(An[Cn+".range"]=[en._rangeInitial0,null],An[Cn+".autorange"]=Bn):An[Cn+".range"]=[en._rangeInitial0,en._rangeInitial1]}}se.emit("plotly_doubleclick",null),c.call("_guiRelayout",se,An)}}function on(){Ht([0,0,Ae,Pe]),T.syncOrAsync([x.previousPromises,function(){se._fullLayout._replotting=!1,c.call("_guiRelayout",se,ot)}],se)}function Ht(Kt){var fn,en,un,An,wn=se._fullLayout,On=wn._plots,Tn=wn._subplots.cartesian;if(Je&&c.subplotsRegistry.splom.drag(se),Ge){for(fn=0;fn<Tn.length;fn++)if(un=(en=On[Tn[fn]]).xaxis,An=en.yaxis,en._scene){un.limitRange&&un.limitRange(),An.limitRange&&An.limitRange();var Cn=T.simpleMap(un.range,un.r2l),Bn=T.simpleMap(An.range,An.r2l);en._scene.update({range:[Cn[0],Bn[0],Cn[1],Bn[1]]})}}if((Je||Ge)&&(g(se),v(se)),rt){var Xn=Kt[2]/Ce._length,cr=Kt[3]/de._length;for(fn=0;fn<Tn.length;fn++){un=(en=On[Tn[fn]]).xaxis,An=en.yaxis;var Yn,jn,Kn,or,Qt=(Le||ve.isSubplotConstrained)&&!un.fixedrange&&ae[un._id],an=(je||ve.isSubplotConstrained)&&!An.fixedrange&&re[An._id];if(Qt?(Yn=Xn,Kn=ke||ve.isSubplotConstrained?Kt[0]:ln(un,Yn)):ve.xaHash[un._id]?(Yn=Xn,Kn=Kt[0]*un._length/Ce._length):ve.yaHash[un._id]?(Yn=cr,Kn=Ee==="ns"?-Kt[1]*un._length/de._length:ln(un,Yn,{n:"top",s:"bottom"}[Ee])):Kn=bn(un,Yn=$t(un,Xn,cr)),Yn>1&&(un.maxallowed!==void 0&&Le===(un.range[0]<un.range[1]?"e":"w")||un.minallowed!==void 0&&Le===(un.range[0]<un.range[1]?"w":"e"))&&(Yn=1,Kn=0),an?(jn=cr,or=ge||ve.isSubplotConstrained?Kt[1]:ln(An,jn)):ve.yaHash[An._id]?(jn=cr,or=Kt[1]*An._length/de._length):ve.xaHash[An._id]?(jn=Xn,or=we==="ew"?-Kt[0]*An._length/Ce._length:ln(An,jn,{e:"right",w:"left"}[we])):or=bn(An,jn=$t(An,Xn,cr)),jn>1&&(An.maxallowed!==void 0&&je===(An.range[0]<An.range[1]?"n":"s")||An.minallowed!==void 0&&je===(An.range[0]<An.range[1]?"s":"n"))&&(jn=1,or=0),Yn||jn){Yn||(Yn=1),jn||(jn=1);var Dn=un._offset-Kn/Yn,yn=An._offset-or/jn;en.clipRect.call(n.setTranslate,Kn,or).call(n.setScale,Yn,jn),en.plot.call(n.setTranslate,Dn,yn).call(n.setScale,1/Yn,1/jn),Yn===en.xScaleFactor&&jn===en.yScaleFactor||(n.setPointGroupScale(en.zoomScalePts,Yn,jn),n.setTextPointsScale(en.zoomScaleTxt,Yn,jn)),n.hideOutsideRangePoints(en.clipOnAxisFalseTraces,en),en.xScaleFactor=Yn,en.yScaleFactor=jn}}}}function $t(Kt,fn,en){return Kt.fixedrange?0:Le&&De.xaHash[Kt._id]?fn:je&&(De.isSubplotConstrained?De.xaHash:De.yaHash)[Kt._id]?en:0}function bn(Kt,fn){return fn?(Kt.range=Kt._r.slice(),k(Kt,fn),ln(Kt,fn)):0}function ln(Kt,fn,en){return Kt._length*(1-fn)*h[en||Kt.constraintoward||"middle"]}return ge.length*ke.length!=1&&te(pt,function(Kt){if(se._context._scrollZoom.cartesian||se._fullLayout._enablescrollzoom){if(at(),se._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();Dt(),clearTimeout(St);var fn=-Kt.deltaY;if(isFinite(fn)||(fn=Kt.wheelDelta/10),isFinite(fn)){var en,un=Math.exp(-Math.min(Math.max(fn,-20),20)/200),An=At.draglayer.select(".nsewdrag").node().getBoundingClientRect(),wn=(Kt.clientX-An.left)/An.width,On=(An.bottom-Kt.clientY)/An.height;if(Le){for(ke||(wn=.5),en=0;en<he.length;en++)Tn(he[en],wn,un);jt("x"),Tt[2]*=un,Tt[0]+=Tt[2]*wn*(1/un-1)}if(je){for(ge||(On=.5),en=0;en<Se.length;en++)Tn(Se[en],On,un);jt("y"),Tt[3]*=un,Tt[1]+=Tt[3]*(1-On)*(1/un-1)}Ht(Tt),rn(),se.emit("plotly_relayouting",ot),St=setTimeout(function(){se._fullLayout&&(Tt=[0,0,Ae,Pe],on())},wt),Kt.preventDefault()}else T.log("Did not find wheel motion attributes: ",Kt)}function Tn(Cn,Bn,Xn){if(!Cn.fixedrange){var cr=T.simpleMap(Cn.range,Cn.r2l),Yn=cr[0]+(cr[1]-cr[0])*Bn;Cn.range=cr.map(function(jn){return Cn.l2r(Yn+(jn-Yn)*Xn)})}}}),pt},makeDragger:F,makeRectDragger:U,makeZoombox:V,makeCorners:q,updateZoombox:ne,xyCorners:J,transitionZoombox:$,removeZoombox:K,showDoubleClickNotifier:ee,attachWheelEventHandler:te}},42464:function(R,C,e){"use strict";var _=e(33428),T=e(93024),r=e(86476),w=e(93972),b=e(51184).makeDragBox,c=e(33816).DRAGGERSIZE;C.initInteractions=function(o){var t=o._fullLayout;if(o._context.staticPlot)_.select(o).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,a){if((t._plots[n].mainplot&&!0)===(t._plots[a].mainplot&&!0)){var s=n.split("y"),l=a.split("y");return s[0]===l[0]?Number(s[1]||1)-Number(l[1]||1):Number(s[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var a=t._plots[n],s=a.xaxis,l=a.yaxis;if(!a.mainplot){var u=b(o,a,s._offset,l._offset,s._length,l._length,"ns","ew");u.onmousemove=function(m){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===n&&o._fullLayout._plots[n]&&T.hover(o,m,n)},T.hover(o,m,n),o._fullLayout._lasthover=u,o._fullLayout._hoversubplot=n},u.onmouseout=function(m){o._dragging||(o._fullLayout._hoversubplot=null,r.unhover(o,m))},o._context.showAxisDragHandles&&(b(o,a,s._offset-c,l._offset-c,c,c,"n","w"),b(o,a,s._offset+s._length,l._offset-c,c,c,"n","e"),b(o,a,s._offset-c,l._offset+l._length,c,c,"s","w"),b(o,a,s._offset+s._length,l._offset+l._length,c,c,"s","e"))}if(o._context.showAxisDragHandles){if(n===s._mainSubplot){var p=s._mainLinePosition;s.side==="top"&&(p-=c),b(o,a,s._offset+.1*s._length,p,.8*s._length,c,"","ew"),b(o,a,s._offset,p,.1*s._length,c,"","w"),b(o,a,s._offset+.9*s._length,p,.1*s._length,c,"","e")}if(n===l._mainSubplot){var f=l._mainLinePosition;l.side!=="right"&&(f-=c),b(o,a,f,l._offset+.1*l._length,c,.8*l._length,"ns",""),b(o,a,f,l._offset+.9*l._length,c,.1*l._length,"s",""),b(o,a,f,l._offset,c,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(n){n.target=o._fullLayout._lasthover,T.hover(o,n,t._hoversubplot)},i.onclick=function(n){n.target=o._fullLayout._lasthover,T.click(o,n)},i.onmousedown=function(n){o._fullLayout._lasthover.onmousedown(n)},C.updateFx(o)}},C.updateFx=function(o){var t=o._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";w(t._draggers,i)}},36632:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(79811);R.exports=function(w){return function(b,c){var o=b[w];if(Array.isArray(o))for(var t=_.subplotsRegistry.cartesian,i=t.idRegex,n=c._subplots,a=n.xaxis,s=n.yaxis,l=n.cartesian,u=c._has("cartesian")||c._has("gl2d"),p=0;p<o.length;p++){var f=o[p];if(T.isPlainObject(f)){var m=r.cleanId(f.xref,"x",!1),h=r.cleanId(f.yref,"y",!1),g=i.x.test(m),v=i.y.test(h);if(g||v){u||T.pushUnique(c._basePlotModules,t);var x=!1;g&&a.indexOf(m)===-1&&(a.push(m),x=!0),v&&s.indexOf(h)===-1&&(s.push(h),x=!0),x&&g&&v&&l.push(m+h)}}}}}},57952:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(3400),w=e(7316),b=e(43616),c=e(84888)._M,o=e(79811),t=e(33816),i=e(9616),n=r.ensureSingle;function a(m,h,g){return r.ensureSingle(m,h,g,function(v){v.datum(g)})}var s=t.zindexSeparator;function l(m,h,g,v,x){for(var y,A,d,S=t.traceLayerClasses,k=m._fullLayout,E=k._zindices,L=k._modules,O=[],P=[],F=0;F<E.length;F++)for(var U=E[F],I=0;I<L.length;I++){var N=(y=L[I]).name,W=T.modules[N].categories;if(W.svg){var B=y.layerName||N+"layer",V=B+(F?Number(F)+1:""),q=y.plot;d=(A=c(g,q,U))[0],g=A[1],d.length&&O.push({i:S.indexOf(B),zorder:F,className:V,plotMethod:q,cdModule:d}),W.zoomScale&&P.push("."+V)}}O.sort(function(K,ee){return(K.zorder||0)-(ee.zorder||0)||K.i-ee.i});var ne=h.plot.selectAll("g.mlayer").data(O,function(K){return K.className});if(ne.enter().append("g").attr("class",function(K){return K.className}).classed("mlayer",!0).classed("rangeplot",h.isRangePlot),ne.exit().remove(),ne.order(),ne.each(function(K){var ee=_.select(this),J=K.className;K.plotMethod(m,h,K.cdModule,ee,v,x),t.clipOnAxisFalseQuery.indexOf("."+J)===-1&&b.setClipUrl(ee,h.layerClipId,m)}),k._has("scattergl")&&(y=T.getModule("scattergl"),d=c(g,y)[0],y.plot(m,h,d)),!m._context.staticPlot&&(h._hasClipOnAxisFalse&&(h.clipOnAxisFalseTraces=h.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var $=h.plot.selectAll(P.join(",")).selectAll(".trace");h.zoomScalePts=$.selectAll("path.point"),h.zoomScaleTxt=$.selectAll(".textpoint")}}function u(m,h){var g=h.plotgroup,v=h.id,x=v.indexOf(s)!==-1,y=t.layerValue2layerClass[h.xaxis.layer],A=t.layerValue2layerClass[h.yaxis.layer],d=m._fullLayout._hasOnlyLargeSploms;if(h.mainplot){var S=h.mainplotinfo,k=S.plotgroup,E=v+"-x",L=v+"-y";h.minorGridlayer=S.minorGridlayer,h.gridlayer=S.gridlayer,h.zerolinelayer=S.zerolinelayer,n(S.overlinesBelow,"path",E),n(S.overlinesBelow,"path",L),n(S.overaxesBelow,"g",E),n(S.overaxesBelow,"g",L),h.plot=n(S.overplot,"g",v),n(S.overlinesAbove,"path",E),n(S.overlinesAbove,"path",L),n(S.overaxesAbove,"g",E),n(S.overaxesAbove,"g",L),h.xlines=k.select(".overlines-"+y).select("."+E),h.ylines=k.select(".overlines-"+A).select("."+L),h.xaxislayer=k.select(".overaxes-"+y).select("."+E),h.yaxislayer=k.select(".overaxes-"+A).select("."+L)}else if(d)h.xlines=n(g,"path","xlines-above"),h.ylines=n(g,"path","ylines-above"),h.xaxislayer=n(g,"g","xaxislayer-above"),h.yaxislayer=n(g,"g","yaxislayer-above");else{if(!x){var O=n(g,"g","layer-subplot");h.shapelayer=n(O,"g","shapelayer"),h.imagelayer=n(O,"g","imagelayer"),h.minorGridlayer=n(g,"g","minor-gridlayer"),h.gridlayer=n(g,"g","gridlayer"),h.zerolinelayer=n(g,"g","zerolinelayer");var P=n(g,"g","layer-between");h.shapelayerBetween=n(P,"g","shapelayer"),h.imagelayerBetween=n(P,"g","imagelayer"),n(g,"path","xlines-below"),n(g,"path","ylines-below"),h.overlinesBelow=n(g,"g","overlines-below"),n(g,"g","xaxislayer-below"),n(g,"g","yaxislayer-below"),h.overaxesBelow=n(g,"g","overaxes-below")}h.overplot=n(g,"g","overplot"),h.plot=n(h.overplot,"g",v),x||(h.xlines=n(g,"path","xlines-above"),h.ylines=n(g,"path","ylines-above"),h.overlinesAbove=n(g,"g","overlines-above"),n(g,"g","xaxislayer-above"),n(g,"g","yaxislayer-above"),h.overaxesAbove=n(g,"g","overaxes-above"),h.xlines=g.select(".xlines-"+y),h.ylines=g.select(".ylines-"+A),h.xaxislayer=g.select(".xaxislayer-"+y),h.yaxislayer=g.select(".yaxislayer-"+A))}x||(d||(a(h.minorGridlayer,"g",h.xaxis._id),a(h.minorGridlayer,"g",h.yaxis._id),h.minorGridlayer.selectAll("g").map(function(F){return F[0]}).sort(o.idSort),a(h.gridlayer,"g",h.xaxis._id),a(h.gridlayer,"g",h.yaxis._id),h.gridlayer.selectAll("g").map(function(F){return F[0]}).sort(o.idSort)),h.xlines.style("fill","none").classed("crisp",!0),h.ylines.style("fill","none").classed("crisp",!0))}function p(m,h){if(m){var g={};for(var v in m.each(function(d){var S=d[0];_.select(this).remove(),f(S,h),g[S]=!0}),h._plots)for(var x=h._plots[v].overlays||[],y=0;y<x.length;y++){var A=x[y];g[A.id]&&A.plot.selectAll(".trace").remove()}}}function f(m,h){h._draggers.selectAll("g."+m).remove(),h._defs.select("#clip"+h._uid+m+"plot").remove()}C.name="cartesian",C.attr=["xaxis","yaxis"],C.idRoot=["x","y"],C.idRegex=t.idRegex,C.attrRegex=t.attrRegex,C.attributes=e(26720),C.layoutAttributes=e(94724),C.supplyLayoutDefaults=e(67352),C.transitionAxes=e(73736),C.finalizeSubplots=function(m,h){var g,v,x,y=h._subplots,A=y.xaxis,d=y.yaxis,S=y.cartesian,k=S.concat(y.gl2d||[]),E={},L={};for(g=0;g<k.length;g++){var O=k[g].split("y");E[O[0]]=1,L["y"+O[1]]=1}for(g=0;g<A.length;g++)E[v=A[g]]||(x=(m[o.id2name(v)]||{}).anchor,t.idRegex.y.test(x)||(x="y"),S.push(v+x),k.push(v+x),L[x]||(L[x]=1,r.pushUnique(d,x)));for(g=0;g<d.length;g++)L[x=d[g]]||(v=(m[o.id2name(x)]||{}).anchor,t.idRegex.x.test(v)||(v="x"),S.push(v+x),k.push(v+x),E[v]||(E[v]=1,r.pushUnique(A,v)));if(!k.length){for(var P in v="",x="",m)t.attrRegex.test(P)&&(P.charAt(0)==="x"?(!v||+P.substr(5)<+v.substr(5))&&(v=P):(!x||+P.substr(5)<+x.substr(5))&&(x=P));v=v?o.name2id(v):"x",x=x?o.name2id(x):"y",A.push(v),d.push(x),S.push(v+x)}},C.plot=function(m,h,g,v){var x,y=m._fullLayout,A=y._subplots.cartesian,d=m.calcdata;if(!Array.isArray(h))for(h=[],x=0;x<d.length;x++)h.push(x);for(var S=y._zindices,k=0;k<S.length;k++){var E=S[k];for(x=0;x<A.length;x++){var L=A[x],O=y._plots[L];if(k>0){var P=O.id;if(P.indexOf(s)!==-1)continue;P+=s+(k+1),O=r.extendFlat({},O,{id:P,plot:y._cartesianlayer.selectAll(".subplot").select("."+P)})}for(var F,U=[],I=0;I<d.length;I++){var N=d[I],W=N[0].trace;E===(W.zorder||0)&&W.xaxis+W.yaxis===L&&((h.indexOf(W.index)!==-1||W.carpet)&&(F&&F[0].trace.xaxis+F[0].trace.yaxis===L&&["tonextx","tonexty","tonext"].indexOf(W.fill)!==-1&&U.indexOf(F)===-1&&U.push(F),U.push(N)),F=N)}l(m,O,U,g,v)}}},C.clean=function(m,h,g,v){var x,y,A,d=v._plots||{},S=h._plots||{},k=v._subplots||{};if(v._hasOnlyLargeSploms&&!h._hasOnlyLargeSploms)for(A in d)(x=d[A]).plotgroup&&x.plotgroup.remove();var E=v._has&&v._has("gl"),L=h._has&&h._has("gl");if(E&&!L)for(A in d)(x=d[A])._scene&&x._scene.destroy();if(k.xaxis&&k.yaxis){var O=o.listIds({_fullLayout:v});for(y=0;y<O.length;y++){var P=O[y];h[o.id2name(P)]||v._infolayer.selectAll(".g-"+P+"title").remove()}}var F=v._has&&v._has("cartesian"),U=h._has&&h._has("cartesian");if(F&&!U)p(v._cartesianlayer.selectAll(".subplot"),v),v._defs.selectAll(".axesclip").remove(),delete v._axisConstraintGroups,delete v._axisMatchGroups;else if(k.cartesian)for(y=0;y<k.cartesian.length;y++){var I=k.cartesian[y];if(I.indexOf(s)===-1&&!S[I]){var N="."+I+",."+I+"-x,."+I+"-y";v._cartesianlayer.selectAll(N).remove(),f(I,v)}}},C.drawFramework=function(m){var h,g=m._fullLayout,v=m.calcdata,x={};for(h=0;h<v.length;h++){var y=v[h][0],A=y.trace.zorder||0;x[A]||(x[A]=[]),x[A].push(y)}var d=Object.keys(x).map(Number).sort(r.sorterAsc);d.length||(d=[0]),g._zindices=d;var S=function(F){var U,I,N,W,B,V,q=F._fullLayout,ne=q._zindices.length,$=q._subplots.cartesian,K=$.length,ee=[],J=[];for(U=0;U<K;U++){N=$[U],B=(W=q._plots[N]).xaxis,V=W.yaxis;var Z=B._mainAxis,te=V._mainAxis,oe=Z._id+te._id,se=q._plots[oe];W.overlays=[],oe!==N&&se?(W.mainplot=oe,W.mainplotinfo=se,J.push(N)):(W.mainplot=void 0,W.mainplotinfo=void 0,ee.push(N))}for(U=0;U<J.length;U++)N=J[U],(W=q._plots[N]).mainplotinfo.overlays.push(W);var ce=ee.concat(J),ye=[];for(U=0;U<K;U++){N=ce[U],B=(W=q._plots[N]).xaxis,V=W.yaxis;for(var me=[],fe=1;fe<=ne;fe++){var pe="";for(fe>1&&(pe+=s+fe),me.push(N+pe),I=0;I<W.overlays.length;I++)me.push(W.overlays[I].id+pe)}me=me.concat([B.layer,V.layer,B.overlaying||"",V.overlaying||""]),ye.push(me)}return ye}(m),k=S.length,E=[];for(h=0;h<k;h++)E[h]=S[h].slice();for(var L=1;L<d.length;L++){var O=[];for(h=0;h<k;h++)O[h]=S[h].slice(),O[h][0]+=s+(L+1);E=E.concat(O)}var P=g._cartesianlayer.selectAll(".subplot").data(E,String);P.enter().append("g").attr("class",function(F){return"subplot "+F[0]}),P.order(),P.exit().call(p,g),P.each(function(F){var U=F[0],I=U.indexOf(s),N=I!==-1,W=N?U.slice(0,I):U,B=g._plots[U];B||(B=r.extendFlat({},g._plots[W]))&&(B.id=U,g._plots[U]=B,g._subplots.cartesian.push(U)),B&&(B.plotgroup=_.select(this),u(m,B),N||(B.draglayer=n(g._draggers,"g",U)))})},C.rangePlot=function(m,h,g){u(m,h),l(m,h,g),w.style(m)},C.toSVG=function(m){var h=m._fullLayout._glimages,g=_.select(m).selectAll(".svg-container");g.filter(function(v,x){return x===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var v=this,x=v.toDataURL("image/png");h.append("svg:image").attr({xmlns:i.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})})},C.updateFx=e(42464).updateFx},94724:function(R,C,e){"use strict";var _=e(25376),T=e(22548),r=e(98192).u,w=e(92880).extendFlat,b=e(31780).templatedArray,c=e(29736).descriptionWithDates,o=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,a={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},s=w({},a,{values:a.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},m={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function h(S){var k={valType:"number",min:0,editType:"ticks"};return S||(k.dflt=5),k}function g(S){var k={valType:"number",min:0,editType:"ticks"};return S||(k.dflt=1),k}var v={valType:"color",dflt:T.defaultLine,editType:"ticks"},x={valType:"color",dflt:T.lightLine,editType:"ticks"};function y(S){var k={valType:"number",min:0,editType:"ticks"};return S||(k.dflt=1),k}var A=w({},r,{editType:"ticks"}),d={valType:"boolean",editType:"ticks"};R.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:T.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:_({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:o},editType:"calc"}),tickmode:s,nticks:l(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:m,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:h(),tickwidth:g(),tickcolor:v,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:w({},r,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:_({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:c("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:c("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:T.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:d,gridcolor:x,gridwidth:y(),griddash:A,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:T.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:T.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:a,nticks:l("minor"),tick0:u,dtick:p,tickvals:f,ticks:m,ticklen:h("minor"),tickwidth:g("minor"),tickcolor:v,gridcolor:x,gridwidth:y("minor"),griddash:A,showgrid:d,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:_({editType:"ticks"})}}},67352:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(10624).isUnifiedHover,w=e(41008),b=e(31780),c=e(64859),o=e(94724),t=e(14944),i=e(28336),n=e(71888),a=e(37668),s=e(79811),l=s.id2name,u=s.name2id,p=e(33816).AX_ID_PATTERN,f=e(24040),m=f.traceIs,h=f.getComponentMethod;function g(v,x,y){Array.isArray(v[x])?v[x].push(y):v[x]=[y]}R.exports=function(v,x,y){var A,d,S=x.autotypenumbers,k={},E={},L={},O={},P={},F={},U={},I={},N={},W={};for(A=0;A<y.length;A++){var B=y[A];if(m(B,"cartesian")||m(B,"gl2d")){var V,q;if(B.xaxis)V=l(B.xaxis),g(k,V,B);else if(B.xaxes)for(d=0;d<B.xaxes.length;d++)g(k,l(B.xaxes[d]),B);if(B.yaxis)q=l(B.yaxis),g(k,q,B);else if(B.yaxes)for(d=0;d<B.yaxes.length;d++)g(k,l(B.yaxes[d]),B);B.type==="funnel"?B.orientation==="h"?(V&&(E[V]=!0),q&&(U[q]=!0)):q&&(L[q]=!0):B.type==="image"?(q&&(I[q]=!0),V&&(I[V]=!0)):(q&&(P[q]=!0,F[q]=!0),m(B,"carpet")&&(B.type!=="carpet"||B._cheater)||V&&(O[V]=!0)),B.type==="carpet"&&B._cheater&&V&&(E[V]=!0),m(B,"2dMap")&&(N[V]=!0,N[q]=!0),m(B,"oriented")&&(W[B.orientation==="h"?q:V]=!0)}}var ne=x._subplots,$=ne.xaxis,K=ne.yaxis,ee=_.simpleMap($,l),J=_.simpleMap(K,l),Z=ee.concat(J),te=T.background;$.length&&K.length&&(te=_.coerce(v,x,c,"plot_bgcolor"));var oe,se,ce,ye,me,fe=T.combine(te,x.paper_bgcolor);function pe(){var Qe=k[oe]||[];me._traceIndices=Qe.map(function(Dt){return Dt._expandedIndex}),me._annIndices=[],me._shapeIndices=[],me._selectionIndices=[],me._imgIndices=[],me._subplotsWith=[],me._counterAxes=[],me._name=me._attr=oe,me._id=se}function ge(Qe,Dt){return _.coerce(ye,me,o,Qe,Dt)}function ke(Qe,Dt){return _.coerce2(ye,me,o,Qe,Dt)}function Ce(Qe){return Qe==="x"?K:$}function de(Qe,Dt){for(var zt=Qe==="x"?ee:J,pt=[],vt=0;vt<zt.length;vt++){var We=zt[vt];We===Dt||(v[We]||{}).overlaying||pt.push(u(We))}return pt}var ae={x:Ce("x"),y:Ce("y")},re=ae.x.concat(ae.y),he={},Se=[];function xe(){var Qe=ye.matches;p.test(Qe)&&re.indexOf(Qe)===-1&&(he[Qe]=ye.type,Se=Object.keys(he))}var Te=w(v,x),Ae=r(Te);for(A=0;A<Z.length;A++){oe=Z[A],se=u(oe),ce=oe.charAt(0),_.isPlainObject(v[oe])||(v[oe]={}),ye=v[oe],me=b.newContainer(x,oe,ce+"axis"),pe();var Pe=ce==="x"&&!O[oe]&&E[oe]||ce==="y"&&!P[oe]&&L[oe],De=ce==="y"&&(!F[oe]&&U[oe]||I[oe]),ve={hasMinor:!0,letter:ce,font:x.font,outerTicks:N[oe],showGrid:!W[oe],data:k[oe]||[],bgColor:fe,calendar:x.calendar,automargin:!0,visibleDflt:Pe,reverseDflt:De,autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[ce]||{})[se],noAutotickangles:ce==="y"};ge("uirevision",x.uirevision),t(ye,me,ge,ve),i(ye,me,ge,ve,x);var we=Ae&&ce===Te.charAt(0),Ee=ke("spikecolor",Ae?me.color:void 0),Fe=ke("spikethickness",Ae?1.5:void 0),Le=ke("spikedash",Ae?"dot":void 0),je=ke("spikemode",Ae?"across":void 0),Ge=ke("spikesnap");ge("showspikes",!!(we||Ee||Fe||Le||je||Ge))||(delete me.spikecolor,delete me.spikethickness,delete me.spikedash,delete me.spikemode,delete me.spikesnap);var Je=l(ye.overlaying),rt=[0,1];if(x[Je]!==void 0){var ot=l(x[Je].anchor);x[ot]!==void 0&&(rt=x[ot].domain)}a(ye,me,ge,{letter:ce,counterAxes:ae[ce],overlayableAxes:de(ce,oe),grid:x.grid,overlayingDomain:rt}),ge("title.standoff"),xe(),me._input=ye}for(A=0;A<Se.length;){se=Se[A++],ce=(oe=l(se)).charAt(0),_.isPlainObject(v[oe])||(v[oe]={}),ye=v[oe],me=b.newContainer(x,oe,ce+"axis"),pe();var yt={letter:ce,font:x.font,outerTicks:N[oe],showGrid:!W[oe],data:[],bgColor:fe,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((x._splomAxes||{})[ce]||{})[se]};ge("uirevision",x.uirevision),me.type=he[se]||"linear",i(ye,me,ge,yt,x),a(ye,me,ge,{letter:ce,counterAxes:ae[ce],overlayableAxes:de(ce,oe),grid:x.grid}),ge("fixedrange"),xe(),me._input=ye}var _t=h("rangeslider","handleDefaults"),mt=h("rangeselector","handleDefaults");for(A=0;A<ee.length;A++)oe=ee[A],ye=v[oe],me=x[oe],_t(v,x,oe),me.type==="date"&&mt(ye,me,x,J,me.calendar),ge("fixedrange");for(A=0;A<J.length;A++){oe=J[A],ye=v[oe],me=x[oe];var tt=x[l(me.anchor)];ge("fixedrange",h("rangeslider","isVisible")(tt))}n.handleDefaults(v,x,{axIds:re.concat(Se).sort(s.idSort),axHasImage:I})}},42136:function(R,C,e){"use strict";var _=e(49760).mix,T=e(22548),r=e(3400);R.exports=function(w,b,c,o){var t=(o=o||{}).dfltColor;function i(v,x){return r.coerce2(w,b,o.attributes,v,x)}var n=i("linecolor",t),a=i("linewidth");c("showline",o.showLine||!!n||!!a)||(delete b.linecolor,delete b.linewidth);var s=i("gridcolor",_(t,o.bgColor,o.blend||T.lightFraction).toRgbString()),l=i("gridwidth"),u=i("griddash");if(c("showgrid",o.showGrid||!!s||!!l||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),o.hasMinor){var p=i("minor.gridcolor",_(b.gridcolor,o.bgColor,67).toRgbString()),f=i("minor.gridwidth",b.gridwidth||1),m=i("minor.griddash",b.griddash||"solid");c("minor.showgrid",!!p||!!f||!!m)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!o.noZeroLine){var h=i("zerolinecolor",t),g=i("zerolinewidth");c("zeroline",o.showGrid||!!h||!!g)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(R,C,e){"use strict";var _=e(38248),T=e(3400);R.exports=function(r,w,b,c){var o,t,i,n,a,s,l=c.counterAxes||[],u=c.overlayableAxes||[],p=c.letter,f=c.grid,m=c.overlayingDomain;f&&(t=f._domains[p][f._axisMap[w._id]],o=f._anchors[w._id],t&&(i=f[p+"side"].split(" ")[0],n=f.domain[p][i==="right"||i==="top"?1:0])),t=t||[0,1],o=o||(_(r.position)?"free":l[0]||"free"),i=i||(p==="x"?"bottom":"left"),n=n||0,a=0,s=!1;var h=T.coerce(r,w,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:o}},"anchor"),g=T.coerce(r,w,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");h==="free"&&(p==="y"&&(b("autoshift")&&(n=g==="left"?m[0]:m[1],s=!w.automargin||w.automargin,a=g==="left"?-3:3),b("shift",a)),b("position",n)),b("automargin",s);var v=!1;if(u.length&&(v=T.coerce(r,w,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!v){var x=b("domain",t);x[0]>x[1]-.000244140625&&(w.domain=t),T.noneOrAll(r.domain,w.domain,t),w.tickmode==="sync"&&(w.tickmode="auto")}return b("layer"),w}},42568:function(R,C,e){"use strict";var _=e(85024);R.exports=function(T,r,w,b,c){c||(c={});var o=c.tickSuffixDflt,t=_(T);w("tickprefix")&&w("showtickprefix",t),w("ticksuffix",o)&&w("showticksuffix",t)}},96312:function(R,C,e){"use strict";var _=e(76808);R.exports=function(T,r,w,b){var c=r._template||{},o=r.type||c.type||"-";w("minallowed"),w("maxallowed");var t,i=w("range");i||b.noInsiderange||o==="log"||(!(t=w("insiderange"))||t[0]!==null&&t[1]!==null||(r.insiderange=!1,t=void 0),t&&(i=w("range",t)));var n,a=r.getAutorangeDflt(i,b),s=w("autorange",a);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||s!=="reversed"&&s!==!0)&&(i[0]===null||s!=="min"&&s!=="max reversed")&&(i[1]===null||s!=="max"&&s!=="min reversed")||(i=void 0,delete r.range,r.autorange=!0,n=!0),n||(s=w("autorange",a=r.getAutorangeDflt(i,b))),s&&(_(w,s,i),o!=="linear"&&o!=="-"||w("rangemode")),r.cleanRange()}},21160:function(R,C,e){"use strict";var _=e(84284).FROM_BL;R.exports=function(T,r,w){w===void 0&&(w=_[T.constraintoward||"center"]);var b=[T.r2l(T.range[0]),T.r2l(T.range[1])],c=b[0]+(b[1]-b[0])*w;T.range=T._input.range=[T.l2r(c+(b[0]-c)*r),T.l2r(c+(b[1]-c)*r)],T.setScale()}},78344:function(R,C,e){"use strict";var _=e(33428),T=e(94336).E9,r=e(3400),w=r.numberFormat,b=e(38248),c=r.cleanNumber,o=r.ms2DateTime,t=r.dateTime2ms,i=r.ensureNumber,n=r.isArrayOrTypedArray,a=e(39032),s=a.FP_SAFE,l=a.BADNUM,u=a.LOG_CLIP,p=a.ONEWEEK,f=a.ONEDAY,m=a.ONEHOUR,h=a.ONEMIN,g=a.ONESEC,v=e(79811),x=e(33816),y=x.HOUR_PATTERN,A=x.WEEKDAY_PATTERN;function d(k){return Math.pow(10,k)}function S(k){return k!=null}R.exports=function(k,E){E=E||{};var L=k._id||"x",O=L.charAt(0);function P(Z,te){if(Z>0)return Math.log(Z)/Math.LN10;if(Z<=0&&te&&k.range&&k.range.length===2){var oe=k.range[0],se=k.range[1];return .5*(oe+se-2*u*Math.abs(oe-se))}return l}function F(Z,te,oe,se){if((se||{}).msUTC&&b(Z))return+Z;var ce=t(Z,oe||k.calendar);if(ce===l){if(!b(Z))return l;Z=+Z;var ye=Math.floor(10*r.mod(Z+.05,1)),me=Math.round(Z-ye/10);ce=t(new Date(me))+ye/10}return ce}function U(Z,te,oe){return o(Z,te,oe||k.calendar)}function I(Z){return k._categories[Math.round(Z)]}function N(Z){if(S(Z)){if(k._categoriesMap===void 0&&(k._categoriesMap={}),k._categoriesMap[Z]!==void 0)return k._categoriesMap[Z];k._categories.push(typeof Z=="number"?String(Z):Z);var te=k._categories.length-1;return k._categoriesMap[Z]=te,te}return l}function W(Z){if(k._categoriesMap)return k._categoriesMap[Z]}function B(Z){var te=W(Z);return te!==void 0?te:b(Z)?+Z:void 0}function V(Z){return b(Z)?+Z:W(Z)}function q(Z,te,oe){return _.round(oe+te*Z,2)}function ne(Z,te,oe){return(Z-oe)/te}var $=function(Z){return b(Z)?q(Z,k._m,k._b):l},K=function(Z){return ne(Z,k._m,k._b)};if(k.rangebreaks){var ee=O==="y";$=function(Z){if(!b(Z))return l;var te=k._rangebreaks.length;if(!te)return q(Z,k._m,k._b);var oe=ee;k.range[0]>k.range[1]&&(oe=!oe);for(var se=oe?-1:1,ce=se*Z,ye=0,me=0;me<te;me++){var fe=se*k._rangebreaks[me].min,pe=se*k._rangebreaks[me].max;if(ce<fe)break;if(!(ce>pe)){ye=ce<(fe+pe)/2?me:me+1;break}ye=me+1}var ge=k._B[ye]||0;return isFinite(ge)?q(Z,k._m2,ge):0},K=function(Z){var te=k._rangebreaks.length;if(!te)return ne(Z,k._m,k._b);for(var oe=0,se=0;se<te&&!(Z<k._rangebreaks[se].pmin);se++)Z>k._rangebreaks[se].pmax&&(oe=se+1);return ne(Z,k._m2,k._B[oe])}}k.c2l=k.type==="log"?P:i,k.l2c=k.type==="log"?d:i,k.l2p=$,k.p2l=K,k.c2p=k.type==="log"?function(Z,te){return $(P(Z,te))}:$,k.p2c=k.type==="log"?function(Z){return d(K(Z))}:K,["linear","-"].indexOf(k.type)!==-1?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=c,k.c2d=k.c2r=k.l2d=k.l2r=i,k.d2p=k.r2p=function(Z){return k.l2p(c(Z))},k.p2d=k.p2r=K,k.cleanPos=i):k.type==="log"?(k.d2r=k.d2l=function(Z,te){return P(c(Z),te)},k.r2d=k.r2c=function(Z){return d(c(Z))},k.d2c=k.r2l=c,k.c2d=k.l2r=i,k.c2r=P,k.l2d=d,k.d2p=function(Z,te){return k.l2p(k.d2r(Z,te))},k.p2d=function(Z){return d(K(Z))},k.r2p=function(Z){return k.l2p(c(Z))},k.p2r=K,k.cleanPos=i):k.type==="date"?(k.d2r=k.r2d=r.identity,k.d2c=k.r2c=k.d2l=k.r2l=F,k.c2d=k.c2r=k.l2d=k.l2r=U,k.d2p=k.r2p=function(Z,te,oe){return k.l2p(F(Z,0,oe))},k.p2d=k.p2r=function(Z,te,oe){return U(K(Z),te,oe)},k.cleanPos=function(Z){return r.cleanDate(Z,l,k.calendar)}):k.type==="category"?(k.d2c=k.d2l=N,k.r2d=k.c2d=k.l2d=I,k.d2r=k.d2l_noadd=B,k.r2c=function(Z){var te=V(Z);return te!==void 0?te:k.fraction2r(.5)},k.l2r=k.c2r=i,k.r2l=V,k.d2p=function(Z){return k.l2p(k.r2c(Z))},k.p2d=function(Z){return I(K(Z))},k.r2p=k.d2p,k.p2r=K,k.cleanPos=function(Z){return typeof Z=="string"&&Z!==""?Z:i(Z)}):k.type==="multicategory"&&(k.r2d=k.c2d=k.l2d=I,k.d2r=k.d2l_noadd=B,k.r2c=function(Z){var te=B(Z);return te!==void 0?te:k.fraction2r(.5)},k.r2c_just_indices=W,k.l2r=k.c2r=i,k.r2l=B,k.d2p=function(Z){return k.l2p(k.r2c(Z))},k.p2d=function(Z){return I(K(Z))},k.r2p=k.d2p,k.p2r=K,k.cleanPos=function(Z){return Array.isArray(Z)||typeof Z=="string"&&Z!==""?Z:i(Z)},k.setupMultiCategory=function(Z){var te,oe,se=k._traceIndices,ce=k._matchGroup;if(ce&&k._categories.length===0){for(var ye in ce)if(ye!==L){var me=E[v.id2name(ye)];se=se.concat(me._traceIndices)}}var fe=[[0,{}],[0,{}]],pe=[];for(te=0;te<se.length;te++){var ge=Z[se[te]];if(O in ge){var ke=ge[O],Ce=ge._length||r.minRowLength(ke);if(n(ke[0])&&n(ke[1]))for(oe=0;oe<Ce;oe++){var de=ke[0][oe],ae=ke[1][oe];S(de)&&S(ae)&&(pe.push([de,ae]),de in fe[0][1]||(fe[0][1][de]=fe[0][0]++),ae in fe[1][1]||(fe[1][1][ae]=fe[1][0]++))}}}for(pe.sort(function(re,he){var Se=fe[0][1],xe=Se[re[0]]-Se[he[0]];if(xe)return xe;var Te=fe[1][1];return Te[re[1]]-Te[he[1]]}),te=0;te<pe.length;te++)N(pe[te])}),k.fraction2r=function(Z){var te=k.r2l(k.range[0]),oe=k.r2l(k.range[1]);return k.l2r(te+Z*(oe-te))},k.r2fraction=function(Z){var te=k.r2l(k.range[0]),oe=k.r2l(k.range[1]);return(k.r2l(Z)-te)/(oe-te)},k.limitRange=function(Z){var te=k.minallowed,oe=k.maxallowed;if(te!==void 0||oe!==void 0){Z||(Z="range");var se=r.nestedProperty(k,Z).get(),ce=r.simpleMap(se,k.r2l),ye=ce[1]<ce[0];ye&&ce.reverse();var me=r.simpleMap([te,oe],k.r2l);if(te!==void 0&&ce[0]<me[0]&&(se[ye?1:0]=te),oe!==void 0&&ce[1]>me[1]&&(se[ye?0:1]=oe),se[0]===se[1]){var fe=k.l2r(te),pe=k.l2r(oe);if(te!==void 0){var ge=fe+1;oe!==void 0&&(ge=Math.min(ge,pe)),se[ye?1:0]=ge}if(oe!==void 0){var ke=pe+1;te!==void 0&&(ke=Math.max(ke,fe)),se[ye?0:1]=ke}}}},k.cleanRange=function(Z,te){k._cleanRange(Z,te),k.limitRange(Z)},k._cleanRange=function(Z,te){te||(te={}),Z||(Z="range");var oe,se,ce=r.nestedProperty(k,Z).get();if(se=(se=k.type==="date"?r.dfltRange(k.calendar):O==="y"?x.DFLTRANGEY:k._name==="realaxis"?[0,1]:te.dfltRange||x.DFLTRANGEX).slice(),k.rangemode!=="tozero"&&k.rangemode!=="nonnegative"||(se[0]=0),ce&&ce.length===2){var ye=ce[0]===null,me=ce[1]===null;for(k.type!=="date"||k.autorange||(ce[0]=r.cleanDate(ce[0],l,k.calendar),ce[1]=r.cleanDate(ce[1],l,k.calendar)),oe=0;oe<2;oe++)if(k.type==="date"){if(!r.isDateTime(ce[oe],k.calendar)){k[Z]=se;break}if(k.r2l(ce[0])===k.r2l(ce[1])){var fe=r.constrain(k.r2l(ce[0]),r.MIN_MS+1e3,r.MAX_MS-1e3);ce[0]=k.l2r(fe-1e3),ce[1]=k.l2r(fe+1e3);break}}else{if(!b(ce[oe])){if(ye||me||!b(ce[1-oe])){k[Z]=se;break}ce[oe]=ce[1-oe]*(oe?10:.1)}if(ce[oe]<-s?ce[oe]=-s:ce[oe]>s&&(ce[oe]=s),ce[0]===ce[1]){var pe=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=pe,ce[1]+=pe}}}else r.nestedProperty(k,Z).set(se)},k.setScale=function(Z){var te=E._size;if(k.overlaying){var oe=v.getFromId({_fullLayout:E},k.overlaying);k.domain=oe.domain}var se=Z&&k._r?"_r":"range",ce=k.calendar;k.cleanRange(se);var ye,me,fe=k.r2l(k[se][0],ce),pe=k.r2l(k[se][1],ce),ge=O==="y";if(ge?(k._offset=te.t+(1-k.domain[1])*te.h,k._length=te.h*(k.domain[1]-k.domain[0]),k._m=k._length/(fe-pe),k._b=-k._m*pe):(k._offset=te.l+k.domain[0]*te.w,k._length=te.w*(k.domain[1]-k.domain[0]),k._m=k._length/(pe-fe),k._b=-k._m*fe),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks&&(k._rangebreaks=k.locateBreaks(Math.min(fe,pe),Math.max(fe,pe)),k._rangebreaks.length)){for(ye=0;ye<k._rangebreaks.length;ye++)me=k._rangebreaks[ye],k._lBreaks+=Math.abs(me.max-me.min);var ke=ge;fe>pe&&(ke=!ke),ke&&k._rangebreaks.reverse();var Ce=ke?-1:1;for(k._m2=Ce*k._length/(Math.abs(pe-fe)-k._lBreaks),k._B.push(-k._m2*(ge?pe:fe)),ye=0;ye<k._rangebreaks.length;ye++)me=k._rangebreaks[ye],k._B.push(k._B[k._B.length-1]-Ce*k._m2*(me.max-me.min));for(ye=0;ye<k._rangebreaks.length;ye++)(me=k._rangebreaks[ye]).pmin=$(me.min),me.pmax=$(me.max)}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(Z){var te,oe,se,ce,ye,me=k.rangebreaks||[];me._cachedPatterns||(me._cachedPatterns=me.map(function(de){return de.enabled&&de.bounds?r.simpleMap(de.bounds,de.pattern?c:k.d2c):null})),me._cachedValues||(me._cachedValues=me.map(function(de){return de.enabled&&de.values?r.simpleMap(de.values,k.d2c).sort(r.sorterAsc):null}));for(var fe=0;fe<me.length;fe++){var pe=me[fe];if(pe.enabled){if(pe.bounds){var ge=pe.pattern;switch(oe=(te=me._cachedPatterns[fe])[0],se=te[1],ge){case A:ce=(ye=new Date(Z)).getUTCDay(),oe>se&&(se+=7,ce<oe&&(ce+=7));break;case y:ce=(ye=new Date(Z)).getUTCHours()+(ye.getUTCMinutes()/60+ye.getUTCSeconds()/3600+ye.getUTCMilliseconds()/36e5),oe>se&&(se+=24,ce<oe&&(ce+=24));break;case"":ce=Z}if(ce>=oe&&ce<se)return l}else for(var ke=me._cachedValues[fe],Ce=0;Ce<ke.length;Ce++)if(se=(oe=ke[Ce])+pe.dvalue,Z>=oe&&Z<se)return l}}return Z},k.locateBreaks=function(Z,te){var oe,se,ce,ye,me=[];if(!k.rangebreaks)return me;var fe=k.rangebreaks.slice().sort(function(Te,Ae){return Te.pattern===A&&Ae.pattern===y?-1:Ae.pattern===A&&Te.pattern===y?1:0}),pe=function(Te,Ae){if((Te=r.constrain(Te,Z,te))!==(Ae=r.constrain(Ae,Z,te))){for(var Pe=!0,De=0;De<me.length;De++){var ve=me[De];Te<ve.max&&Ae>=ve.min&&(Te<ve.min&&(ve.min=Te),Ae>ve.max&&(ve.max=Ae),Pe=!1)}Pe&&me.push({min:Te,max:Ae})}};for(oe=0;oe<fe.length;oe++){var ge=fe[oe];if(ge.enabled)if(ge.bounds){var ke=Z,Ce=te;ge.pattern&&(ke=Math.floor(ke)),ce=(se=r.simpleMap(ge.bounds,ge.pattern?c:k.r2l))[0],ye=se[1];var de,ae,re=new Date(ke);switch(ge.pattern){case A:ae=p,de=(ye-ce+(ye<ce?7:0))*f,ke+=ce*f-(re.getUTCDay()*f+re.getUTCHours()*m+re.getUTCMinutes()*h+re.getUTCSeconds()*g+re.getUTCMilliseconds());break;case y:ae=f,de=(ye-ce+(ye<ce?24:0))*m,ke+=ce*m-(re.getUTCHours()*m+re.getUTCMinutes()*h+re.getUTCSeconds()*g+re.getUTCMilliseconds());break;default:ke=Math.min(se[0],se[1]),de=ae=(Ce=Math.max(se[0],se[1]))-ke}for(var he=ke;he<Ce;he+=ae)pe(he,he+de)}else for(var Se=r.simpleMap(ge.values,k.d2c),xe=0;xe<Se.length;xe++)pe(ce=Se[xe],ye=ce+ge.dvalue)}return me.sort(function(Te,Ae){return Te.min-Ae.min}),me},k.makeCalcdata=function(Z,te,oe){var se,ce,ye,me,fe=k.type,pe=fe==="date"&&Z[te+"calendar"];if(te in Z){if(se=Z[te],me=Z._length||r.minRowLength(se),r.isTypedArray(se)&&(fe==="linear"||fe==="log")){if(me===se.length)return se;if(se.subarray)return se.subarray(0,me)}if(fe==="multicategory")return function(Ce,de){for(var ae=new Array(de),re=0;re<de;re++){var he=(Ce[0]||[])[re],Se=(Ce[1]||[])[re];ae[re]=W([he,Se])}return ae}(se,me);for(ce=new Array(me),ye=0;ye<me;ye++)ce[ye]=k.d2c(se[ye],0,pe,oe)}else{var ge=te+"0"in Z?k.d2c(Z[te+"0"],0,pe):0,ke=Z["d"+te]?Number(Z["d"+te]):1;for(se=Z[{x:"y",y:"x"}[te]],me=Z._length||se.length,ce=new Array(me),ye=0;ye<me;ye++)ce[ye]=ge+ye*ke}if(k.rangebreaks)for(ye=0;ye<me;ye++)ce[ye]=k.maskBreaks(ce[ye]);return ce},k.isValidRange=function(Z,te){return Array.isArray(Z)&&Z.length===2&&(te&&Z[0]===null||b(k.r2l(Z[0])))&&(te&&Z[1]===null||b(k.r2l(Z[1])))},k.getAutorangeDflt=function(Z,te){var oe=!k.isValidRange(Z,"nullOk");return oe&&te&&te.reverseDflt?oe="reversed":Z&&(Z[0]===null&&Z[1]===null?oe=!0:Z[0]===null&&Z[1]!==null?oe="min":Z[0]!==null&&Z[1]===null&&(oe="max")),oe},k.isReversed=function(){var Z=k.autorange;return Z==="reversed"||Z==="min reversed"||Z==="max reversed"},k.isPtWithinRange=function(Z,te){var oe=k.c2l(Z[O],null,te),se=k.r2l(k.range[0]),ce=k.r2l(k.range[1]);return se<ce?se<=oe&&oe<=ce:ce<=oe&&oe<=se},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var Z=k._matchGroup;if(Z){var te=null,oe=null;for(var se in Z){var ce=E[v.id2name(se)];if(ce._categories){te=ce._categories,oe=ce._categoriesMap;break}}te&&oe?(k._categories=te,k._categoriesMap=oe):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var ye=0;ye<k._initialCategories.length;ye++)N(k._initialCategories[ye])},k.sortByInitialCategories=function(){var Z=[];if(k._emptyCategories(),k._initialCategories)for(var te=0;te<k._initialCategories.length;te++)N(k._initialCategories[te]);Z=Z.concat(k._traceIndices);var oe=k._matchGroup;for(var se in oe)if(L!==se){var ce=E[v.id2name(se)];ce._categories=k._categories,ce._categoriesMap=k._categoriesMap,Z=Z.concat(ce._traceIndices)}return Z};var J=E._d3locale;k.type==="date"&&(k._dateFormat=J?J.timeFormat:T,k._extraFormat=E._extraFormat),k._separators=E.separators,k._numFormat=J?J.numberFormat:w,delete k._minDtick,delete k._forceTick0}},85024:function(R){"use strict";R.exports=function(C){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(_){return C[_]!==void 0});if(e.every(function(_){return C[_]===C[e[0]]})||e.length===1)return C[e[0]]}},95936:function(R,C,e){"use strict";var _=e(3400),T=e(76308).contrast,r=e(94724),w=e(85024),b=e(51272);function c(o,t){function i(n,a){return _.coerce(o,t,r.tickformatstops,n,a)}i("enabled")&&(i("dtickrange"),i("value"))}R.exports=function(o,t,i,n,a){a||(a={});var s=i("labelalias");_.isPlainObject(s)||delete t.labelalias;var l=w(o);if(i("showticklabels")){a.noTicklabelshift||i("ticklabelshift"),a.noTicklabelstandoff||i("ticklabelstandoff");var u=a.font||{},p=t.color,f=(t.ticklabelposition||"").indexOf("inside")!==-1?T(a.bgColor):p&&p!==r.color.dflt?p:u.color;if(_.coerceFont(i,"tickfont",u,{overrideDflt:{color:f}}),a.noTicklabelstep||n==="multicategory"||n==="log"||i("ticklabelstep"),!a.noAng){var m=i("tickangle");a.noAutotickangles||m!=="auto"||i("autotickangles")}if(n!=="category"){var h=i("tickformat");b(o,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:c}),t.tickformatstops.length||delete t.tickformatstops,a.noExp||h||n==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(R,C,e){"use strict";var _=e(3400),T=e(94724);R.exports=function(r,w,b,c){var o=c.isMinor,t=o?r.minor||{}:r,i=o?w.minor:w,n=o?T.minor:T,a=o?"minor.":"",s=_.coerce2(t,i,n,"ticklen",o?.6*(w.ticklen||5):void 0),l=_.coerce2(t,i,n,"tickwidth",o?w.tickwidth||1:void 0),u=_.coerce2(t,i,n,"tickcolor",(o?w.tickcolor:void 0)||i.color);b(a+"ticks",!o&&c.outerTicks||s||l||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(R,C,e){"use strict";var _=e(98728),T=e(3400).isArrayOrTypedArray,r=e(38116).isTypedArraySpec,w=e(38116).decodeTypedArraySpec;R.exports=function(b,c,o,t,i){i||(i={});var n=i.isMinor,a=n?b.minor||{}:b,s=n?c.minor:c,l=n?"minor.":"";function u(v){var x=a[v];return r(x)&&(x=w(x)),x!==void 0?x:(s._template||{})[v]}var p=u("tick0"),f=u("dtick"),m=u("tickvals"),h=o(l+"tickmode",T(m)?"array":f?"linear":"auto");if(h==="auto"||h==="sync")o(l+"nticks");else if(h==="linear"){var g=s.dtick=_.dtick(f,t);s.tick0=_.tick0(p,t,c.calendar,g)}else t!=="multicategory"&&(o(l+"tickvals")===void 0?s.tickmode="auto":n||o("ticktext"))}},73736:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(3400),w=e(43616),b=e(54460);R.exports=function(c,o,t,i){var n=c._fullLayout;if(o.length!==0){var a,s,l,u;i&&(a=i());var p=_.ease(t.easing);return c._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var h={},g=0;g<o.length;g++){var v=o[g],x=v.plotinfo.xaxis,y=v.plotinfo.yaxis;v.xr0&&(h[x._name+".range"]=v.xr0.slice()),v.yr0&&(h[y._name+".range"]=v.yr0.slice())}return T.call("relayout",c,h).then(function(){for(var A=0;A<o.length;A++)f(o[A].plotinfo)})}()}),s=Date.now(),u=window.requestAnimationFrame(function h(){l=Date.now();for(var g=Math.min(1,(l-s)/t.duration),v=p(g),x=0;x<o.length;x++)m(o[x],v);l-s>t.duration?(function(){for(var y={},A=0;A<o.length;A++){var d=o[A],S=d.plotinfo.xaxis,k=d.plotinfo.yaxis;d.xr1&&(y[S._name+".range"]=d.xr1.slice()),d.yr1&&(y[k._name+".range"]=d.yr1.slice())}a&&a(),T.call("relayout",c,y).then(function(){for(var E=0;E<o.length;E++)f(o[E].plotinfo)})}(),u=window.cancelAnimationFrame(h)):u=window.requestAnimationFrame(h)}),Promise.resolve()}function f(h){var g=h.xaxis,v=h.yaxis;n._defs.select("#"+h.clipId+"> rect").call(w.setTranslate,0,0).call(w.setScale,1,1),h.plot.call(w.setTranslate,g._offset,v._offset).call(w.setScale,1,1);var x=h.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(w.setPointGroupScale,1,1),x.selectAll(".textpoint").call(w.setTextPointsScale,1,1),x.call(w.hideOutsideRangePoints,h)}function m(h,g){var v=h.plotinfo,x=v.xaxis,y=v.yaxis,A=x._length,d=y._length,S=!!h.xr1,k=!!h.yr1,E=[];if(S){var L=r.simpleMap(h.xr0,x.r2l),O=r.simpleMap(h.xr1,x.r2l),P=L[1]-L[0],F=O[1]-O[0];E[0]=(L[0]*(1-g)+g*O[0]-L[0])/(L[1]-L[0])*A,E[2]=A*(1-g+g*F/P),x.range[0]=x.l2r(L[0]*(1-g)+g*O[0]),x.range[1]=x.l2r(L[1]*(1-g)+g*O[1])}else E[0]=0,E[2]=A;if(k){var U=r.simpleMap(h.yr0,y.r2l),I=r.simpleMap(h.yr1,y.r2l),N=U[1]-U[0],W=I[1]-I[0];E[1]=(U[1]*(1-g)+g*I[1]-U[1])/(U[0]-U[1])*d,E[3]=d*(1-g+g*W/N),y.range[0]=x.l2r(U[0]*(1-g)+g*I[0]),y.range[1]=y.l2r(U[1]*(1-g)+g*I[1])}else E[1]=0,E[3]=d;b.drawOne(c,x,{skipTitle:!0}),b.drawOne(c,y,{skipTitle:!0}),b.redrawComponents(c,[x._id,y._id]);var B=S?A/E[2]:1,V=k?d/E[3]:1,q=S?E[0]:0,ne=k?E[1]:0,$=S?E[0]/E[2]*A:0,K=k?E[1]/E[3]*d:0,ee=x._offset-$,J=y._offset-K;v.clipRect.call(w.setTranslate,q,ne).call(w.setScale,1/B,1/V),v.plot.call(w.setTranslate,ee,J).call(w.setScale,B,V),w.setPointGroupScale(v.zoomScalePts,1/B,1/V),w.setTextPointsScale(v.zoomScaleTxt,1/B,1/V)}b.redrawComponents(c)}},14944:function(R,C,e){"use strict";var _=e(24040).traceIs,T=e(52976);function r(b){return{v:"x",h:"y"}[b.orientation||"v"]}function w(b,c){var o=r(b),t=_(b,"box-violin"),i=_(b._fullInput||{},"candlestick");return t&&!i&&c===o&&b[o]===void 0&&b[o+"0"]===void 0}R.exports=function(b,c,o,t){o("autotypenumbers",t.autotypenumbersDflt),o("type",(t.splomStash||{}).type)==="-"&&(function(i,n){if(i.type==="-"){var a,s=i._id,l=s.charAt(0);s.indexOf("scene")!==-1&&(s=l);var u=function(y,A,d){for(var S=0;S<y.length;S++){var k=y[S];if(k.type==="splom"&&k._length>0&&(k["_"+d+"axes"]||{})[A]||(k[d+"axis"]||d)===A&&(w(k,d)||(k[d]||[]).length||k[d+"0"]))return k}}(n,s,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var p=l+"calendar",f=u[p],m={noMultiCategory:!_(u,"cartesian")||_(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=i.autotypenumbers,w(u,l)){var h=r(u),g=[];for(a=0;a<n.length;a++){var v=n[a];_(v,"box-violin")&&(v[l+"axis"]||l)===s&&(v[h]!==void 0?g.push(v[h][0]):v.name!==void 0?g.push(v.name):g.push("text"),v[p]!==f&&(f=void 0))}i.type=T(g,f,m)}else if(u.type==="splom"){var x=u.dimensions[u._axesDim[s]];x.visible&&(i.type=T(x.values,f,m))}else i.type=T(u[l]||[u[l+"0"]],f,m)}else i.type="linear"}}(c,t.data),c.type==="-"?c.type="linear":b.type=c.type)}},62460:function(R,C,e){"use strict";var _=e(24040),T=e(3400);function r(o,t,i){var n,a,s,l=!1;if(t.type==="data")n=o._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=o._fullLayout}return a=T.nestedProperty(n,t.prop).get(),(s=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&s[t.prop]!==a&&(l=!0),s[t.prop]=a,{changed:l,value:a}}function w(o,t){var i=[],n=t[0],a={};if(typeof n=="string")a[n]=t[1];else{if(!T.isPlainObject(n))return i;a=n}return c(a,function(s,l,u){i.push({type:"layout",prop:s,value:u})},"",0),i}function b(o,t){var i,n,a,s,l=[];if(n=t[0],a=t[1],i=t[2],s={},typeof n=="string")s[n]=a;else{if(!T.isPlainObject(n))return l;s=n,i===void 0&&(i=a)}return i===void 0&&(i=null),c(s,function(u,p,f){var m,h;if(Array.isArray(f)){h=f.slice();var g=Math.min(h.length,o.data.length);i&&(g=Math.min(g,i.length)),m=[];for(var v=0;v<g;v++)m[v]=i?i[v]:v}else h=f,m=i?i.slice():null;if(m===null)Array.isArray(h)&&(h=h[0]);else if(Array.isArray(m)){if(!Array.isArray(h)){var x=h;h=[];for(var y=0;y<m.length;y++)h[y]=x}h.length=Math.min(m.length,h.length)}l.push({type:"data",prop:u,traces:m,value:h})},"",0),l}function c(o,t,i,n){Object.keys(o).forEach(function(a){var s=o[a];if(a[0]!=="_"){var l=i+(n>0?".":"")+a;T.isPlainObject(s)?c(s,t,l,n+1):t(l,a,s)}})}C.manageCommandObserver=function(o,t,i,n){var a={},s=!0;t&&t._commandObserver&&(a=t._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var l=C.hasSimpleAPICommandBindings(o,i,a.lookupTable);if(t&&t._commandObserver){if(l)return a;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,a}if(l){r(o,l,a.cache),a.check=function(){if(s){var f=r(o,l,a.cache);return f.changed&&n&&a.lookupTable[f.value]!==void 0&&(a.disable(),Promise.resolve(n({value:f.value,type:l.type,prop:l.prop,traces:l.traces,index:a.lookupTable[f.value]})).then(a.enable,a.enable)),f.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)o._internalOn(u[p],a.check);a.remove=function(){for(var f=0;f<u.length;f++)o._removeInternalListener(u[f],a.check)}}else T.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){s=!1},a.enable=function(){s=!0},t&&(t._commandObserver=a),a},C.hasSimpleAPICommandBindings=function(o,t,i){var n,a,s=t.length;for(n=0;n<s;n++){var l,u=t[n],p=u.method,f=u.args;if(Array.isArray(f)||(f=[]),!p)return!1;var m=C.computeAPICommandBindings(o,p,f);if(m.length!==1)return!1;if(a){if((l=m[0]).type!==a.type||l.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var h=0;h<a.traces.length;h++)if(a.traces[h]!==l.traces[h])return!1}else if(l.prop!==a.prop)return!1}else a=m[0],Array.isArray(a.traces)&&a.traces.sort();var g=(l=m[0]).value;if(Array.isArray(g)){if(g.length!==1)return!1;g=g[0]}i&&(i[g]=n)}return a},C.executeAPICommand=function(o,t,i){if(t==="skip")return Promise.resolve();var n=_.apiMethodRegistry[t],a=[o];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)a.push(i[s]);return n.apply(null,a).catch(function(l){return T.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},C.computeAPICommandBindings=function(o,t,i){var n;switch(Array.isArray(i)||(i=[]),t){case"restyle":n=b(o,i);break;case"relayout":n=w(0,i);break;case"update":n=b(o,[i[0],i[2]]).concat(w(0,[i[1]]));break;case"animate":n=function(a,s){return Array.isArray(s[0])&&s[0].length===1&&["string","number"].indexOf(typeof s[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}},86968:function(R,C,e){"use strict";var _=e(92880).extendFlat;C.u=function(T,r){r=r||{};var w={valType:"info_array",editType:(T=T||{}).editType,items:[{valType:"number",min:0,max:1,editType:T.editType},{valType:"number",min:0,max:1,editType:T.editType}],dflt:[0,1]},b=(T.name&&T.name,T.trace,r.description&&r.description,{x:_({},w,{}),y:_({},w,{}),editType:T.editType});return T.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:T.editType},b.column={valType:"integer",min:0,dflt:0,editType:T.editType}),b},C.Q=function(T,r,w,b){var c=b&&b.x||[0,1],o=b&&b.y||[0,1],t=r.grid;if(t){var i=w("domain.column");i!==void 0&&(i<t.columns?c=t._domains.x[i]:delete T.domain.column);var n=w("domain.row");n!==void 0&&(n<t.rows?o=t._domains.y[n]:delete T.domain.row)}var a=w("domain.x",c),s=w("domain.y",o);a[0]<a[1]||(T.domain.x=c.slice()),s[0]<s[1]||(T.domain.y=o.slice())}},25376:function(R){"use strict";R.exports=function(C){var e=C.variantValues,_=C.editType,T=C.colorEditType;T===void 0&&(T=_);var r={editType:_,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};C.noNumericWeightValues&&(r.valType="enumerated",r.values=r.extras,r.extras=void 0,r.min=void 0,r.max=void 0);var w={family:{valType:"string",noBlank:!0,strict:!0,editType:_},size:{valType:"number",min:1,editType:_},color:{valType:"color",editType:T},weight:r,style:{editType:_,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:C.noFontVariant?void 0:{editType:_,valType:"enumerated",values:e||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:C.noFontTextcase?void 0:{editType:_,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:C.noFontLineposition?void 0:{editType:_,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:C.noFontShadow?void 0:{editType:_,valType:"string",dflt:C.autoShadowDflt?"auto":"none"},editType:_};return C.autoSize&&(w.size.dflt="auto"),C.autoColor&&(w.color.dflt="auto"),C.arrayOk&&(w.family.arrayOk=!0,w.weight.arrayOk=!0,w.style.arrayOk=!0,C.noFontVariant||(w.variant.arrayOk=!0),C.noFontTextcase||(w.textcase.arrayOk=!0),C.noFontLineposition||(w.lineposition.arrayOk=!0),C.noFontShadow||(w.shadow.arrayOk=!0),w.size.arrayOk=!0,w.color.arrayOk=!0),w}},16672:function(R){"use strict";R.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(R,C){"use strict";C.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},C.axesNames=["lonaxis","lataxis"],C.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},C.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},C.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},C.clipPad=.001,C.precision=.1,C.landColor="#F0DC82",C.waterColor="#3399FF",C.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},C.sphereSVG={type:"Sphere"},C.fillLayers={ocean:1,land:1,lakes:1},C.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},C.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],C.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],C.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(R,C,e){"use strict";var _=e(33428),T=e(83356),r=T.geoPath,w=T.geoDistance,b=e(87108),c=e(24040),o=e(3400),t=o.strTranslate,i=e(76308),n=e(43616),a=e(93024),s=e(7316),l=e(54460),u=e(19280).getAutoRange,p=e(86476),f=e(22676).prepSelect,m=e(22676).clearOutline,h=e(22676).selectOnClick,g=e(79248),v=e(79552),x=e(27144),y=e(59972),A=e(55712).NO;function d(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=d.prototype;function k(E,L){var O=v.clipPad,P=E[0]+O,F=E[1]-O,U=L[0]+O,I=L[1]-O;P>0&&F<0&&(F+=360);var N=(F-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,I],[P+N,I],[P+2*N,I],[P+3*N,I],[F,I],[F,U],[F-N,U],[F-2*N,U],[F-3*N,U],[P,U]]]}}R.exports=function(E){return new d(E)},S.plot=function(E,L,O,P){var F=this;if(P)return F.update(E,L,!0);F._geoCalcData=E,F._fullLayout=L;var U=L[this.id],I=[],N=!1;for(var W in v.layerNameToAdjective)if(W!=="frame"&&U["show"+W]){N=!0;break}for(var B=!1,V=0;V<E.length;V++){var q=E[0][0].trace;q._geo=F,q.locationmode&&(N=!0);var ne=q.marker;if(ne){var $=ne.angle,K=ne.angleref;($||K==="north"||K==="previous")&&(B=!0)}}if(this._hasMarkerAngles=B,N){var ee=y.getTopojsonName(U);F.topojson!==null&&ee===F.topojsonName||(F.topojsonName=ee,PlotlyGeoAssets.topojson[F.topojsonName]===void 0&&I.push(F.fetchTopojson()))}I=I.concat(x.fetchTraceGeoData(E)),O.push(new Promise(function(J,Z){Promise.all(I).then(function(){F.topojson=PlotlyGeoAssets.topojson[F.topojsonName],F.update(E,L),J()}).catch(Z)}))},S.fetchTopojson=function(){var E=this,L=y.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(O,P){_.json(L,function(F,U){if(F)return F.status===404?P(new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=U,O()})})},S.update=function(E,L,O){var P=L[this.id];this.hasChoropleth=!1;for(var F=0;F<E.length;F++){var U=E[F],I=U[0].trace;I.type==="choropleth"&&(this.hasChoropleth=!0),I.visible===!0&&I._length>0&&I._module.calcGeoJSON(U,L)}if(!O){if(this.updateProjection(E,L))return;this.viewInitial&&this.scope===P.scope||this.saveViewInitial(P)}this.scope=P.scope,this.updateBaseLayers(L,P),this.updateDims(L,P),this.updateFx(L,P),s.generalUpdatePerTraceModule(this.graphDiv,this,E,P);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,L){var O=this.graphDiv,P=L[this.id],F=L._size,U=P.domain,I=P.projection,N=P.lonaxis,W=P.lataxis,B=N._ax,V=W._ax,q=this.projection=function(re){var he=re.projection,Se=he.type,xe=v.projNames[Se];xe="geo"+o.titleCase(xe);for(var Te=(T[xe]||b[xe])(),Ae=re._isSatellite?180*Math.acos(1/he.distance)/Math.PI:re._isClipped?v.lonaxisSpan[Se]/2:null,Pe=["center","rotate","parallels","clipExtent"],De=function(Ee){return Ee?Te:[]},ve=0;ve<Pe.length;ve++){var we=Pe[ve];typeof Te[we]!="function"&&(Te[we]=De)}return Te.isLonLatOverEdges=function(Ee){if(Te(Ee)===null)return!0;if(Ae){var Fe=Te.rotate();return w(Ee,[-Fe[0],-Fe[1]])>Ae*Math.PI/180}return!1},Te.getPath=function(){return r().projection(Te)},Te.getBounds=function(Ee){return Te.getPath().bounds(Ee)},Te.precision(v.precision),re._isSatellite&&Te.tilt(he.tilt).distance(he.distance),Ae&&Te.clipAngle(Ae-v.clipPad),Te}(P),ne=[[F.l+F.w*U.x[0],F.t+F.h*(1-U.y[1])],[F.l+F.w*U.x[1],F.t+F.h*(1-U.y[0])]],$=P.center||{},K=I.rotation||{},ee=N.range||[],J=W.range||[];if(P.fitbounds){B._length=ne[1][0]-ne[0][0],V._length=ne[1][1]-ne[0][1],B.range=u(O,B),V.range=u(O,V);var Z=(B.range[0]+B.range[1])/2,te=(V.range[0]+V.range[1])/2;if(P._isScoped)$={lon:Z,lat:te};else if(P._isClipped){$={lon:Z,lat:te},K={lon:Z,lat:te,roll:K.roll};var oe=I.type,se=v.lonaxisSpan[oe]/2||180,ce=v.lataxisSpan[oe]/2||90;ee=[Z-se,Z+se],J=[te-ce,te+ce]}else $={lon:Z,lat:te},K={lon:Z,lat:K.lat,roll:K.roll}}q.center([$.lon-K.lon,$.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(I.parallels);var ye=k(ee,J);q.fitExtent(ne,ye);var me=this.bounds=q.getBounds(ye),fe=this.fitScale=q.scale(),pe=q.translate();if(P.fitbounds){var ge=q.getBounds(k(B.range,V.range)),ke=Math.min((me[1][0]-me[0][0])/(ge[1][0]-ge[0][0]),(me[1][1]-me[0][1])/(ge[1][1]-ge[0][1]));isFinite(ke)?q.scale(ke*fe):o.warn("Something went wrong during"+this.id+"fitbounds computations.")}else q.scale(I.scale*fe);var Ce=this.midPt=[(me[0][0]+me[1][0])/2,(me[0][1]+me[1][1])/2];if(q.translate([pe[0]+(Ce[0]-pe[0]),pe[1]+(Ce[1]-pe[1])]).clipExtent(me),P._isAlbersUsa){var de=q([$.lon,$.lat]),ae=q.translate();q.translate([ae[0]-(de[0]-ae[0]),ae[1]-(de[1]-ae[1])])}},S.updateBaseLayers=function(E,L){var O=this,P=O.topojson,F=O.layers,U=O.basePaths;function I(q){return q==="lonaxis"||q==="lataxis"}function N(q){return!!v.lineLayers[q]}function W(q){return!!v.fillLayers[q]}var B=(this.hasChoropleth?v.layersForChoropleth:v.layers).filter(function(q){return N(q)||W(q)?L["show"+q]:!I(q)||L[q].showgrid}),V=O.framework.selectAll(".layer").data(B,String);V.exit().each(function(q){delete F[q],delete U[q],_.select(this).remove()}),V.enter().append("g").attr("class",function(q){return"layer "+q}).each(function(q){var ne=F[q]=_.select(this);q==="bg"?O.bgRect=ne.append("rect").style("pointer-events","all"):I(q)?U[q]=ne.append("path").style("fill","none"):q==="backplot"?ne.append("g").classed("choroplethlayer",!0):q==="frontplot"?ne.append("g").classed("scatterlayer",!0):N(q)?U[q]=ne.append("path").style("fill","none").style("stroke-miterlimit",2):W(q)&&(U[q]=ne.append("path").style("stroke","none"))}),V.order(),V.each(function(q){var ne=U[q],$=v.layerNameToAdjective[q];q==="frame"?ne.datum(v.sphereSVG):N(q)||W(q)?ne.datum(A(P,P.objects[q])):I(q)&&ne.datum(function(K,ee,J){var Z,te,oe,se=ee[K],ce=v.scopeDefaults[ee.scope];K==="lonaxis"?(Z=ce.lonaxisRange,te=ce.lataxisRange,oe=function(ae,re){return[ae,re]}):K==="lataxis"&&(Z=ce.lataxisRange,te=ce.lonaxisRange,oe=function(ae,re){return[re,ae]});var ye={type:"linear",range:[Z[0],Z[1]-1e-6],tick0:se.tick0,dtick:se.dtick};l.setConvert(ye,J);var me=l.calcTicks(ye);ee.isScoped||K!=="lonaxis"||me.pop();for(var fe=me.length,pe=new Array(fe),ge=0;ge<fe;ge++)for(var ke=me[ge].x,Ce=pe[ge]=[],de=te[0];de<te[1]+2.5;de+=2.5)Ce.push(oe(ke,de));return{type:"MultiLineString",coordinates:pe}}(q,L,E)).call(i.stroke,L[q].gridcolor).call(n.dashLine,L[q].griddash,L[q].gridwidth),N(q)?ne.call(i.stroke,L[$+"color"]).call(n.dashLine,"",L[$+"width"]):W(q)&&ne.call(i.fill,L[$+"color"])})},S.updateDims=function(E,L){var O=this.bounds,P=(L.framewidth||0)/2,F=O[0][0]-P,U=O[0][1]-P,I=O[1][0]-F+P,N=O[1][1]-U+P;n.setRect(this.clipRect,F,U,I,N),this.bgRect.call(n.setRect,F,U,I,N).call(i.fill,L.bgcolor),this.xaxis._offset=F,this.xaxis._length=I,this.yaxis._offset=U,this.yaxis._length=N},S.updateFx=function(E,L){var O=this,P=O.graphDiv,F=O.bgRect,U=E.dragmode,I=E.clickmode;if(!O.isStatic){var N={element:O.bgRect.node(),gd:P,plotinfo:{id:O.id,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:function(B,V){V.isRect?(B.range={})[O.id]=[W([V.xmin,V.ymin]),W([V.xmax,V.ymax])]:(B.lassoPoints={})[O.id]=V.map(W)}},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id,clickFn:function(B){B===2&&m(P)}};U==="pan"?(F.node().onmousedown=null,F.call(g(O,L)),F.on("dblclick.zoom",function(){var B=O.viewInitial,V={};for(var q in B)V[O.id+"."+q]=B[q];c.call("_guiRelayout",P,V),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||F.on("wheel.zoom",null)):U!=="select"&&U!=="lasso"||(F.on(".zoom",null),N.prepFn=function(B,V,q){f(B,V,q,N,U)},p.init(N)),F.on("mousemove",function(){var B=O.projection.invert(o.getPositionFromD3Event());if(!B)return p.unhover(P,_.event);O.xaxis.p2c=function(){return B[0]},O.yaxis.p2c=function(){return B[1]},a.hover(P,_.event,O.id)}),F.on("mouseout",function(){P._dragging||p.unhover(P,_.event)}),F.on("click",function(){U!=="select"&&U!=="lasso"&&(I.indexOf("select")>-1&&h(_.event,P,[O.xaxis],[O.yaxis],O.id,N),I.indexOf("event")>-1&&a.click(P,_.event))})}function W(B){return O.projection.invert([B[0]+O.xaxis._offset,B[1]+O.yaxis._offset])}},S.makeFramework=function(){var E=this,L=E.graphDiv,O=L._fullLayout,P="clip"+O._uid+E.id;E.clipDef=O._clips.append("clipPath").attr("id",P),E.clipRect=E.clipDef.append("rect"),E.framework=_.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,P,L),E.project=function(F){var U=E.projection(F);return U?[U[0]-E.xaxis._offset,U[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(F){return E.project(F)[0]}},E.yaxis={_id:"y",c2p:function(F){return E.project(F)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,O)},S.saveViewInitial=function(E){var L,O=E.center||{},P=E.projection,F=P.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":P.scale},L=E._isScoped?{"center.lon":O.lon,"center.lat":O.lat}:E._isClipped?{"projection.rotation.lon":F.lon,"projection.rotation.lat":F.lat}:{"center.lon":O.lon,"center.lat":O.lat,"projection.rotation.lon":F.lon},o.extendFlat(this.viewInitial,L)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,L=this.projection,O=L.getPath();function P(U){var I=L(U.lonlat);return I?t(I[0],I[1]):null}function F(U){return L.isLonLatOverEdges(U.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",O);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(U){return O(U.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",F).attr("transform",P)}},10816:function(R,C,e){"use strict";var _=e(84888).KY,T=e(3400).counterRegex,r=e(43520),w="geo",b=T(w),c={};c[w]={valType:"subplotid",dflt:w,editType:"calc"},R.exports={attr:w,name:w,idRoot:w,idRegex:b,attrRegex:b,attributes:c,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(o){for(var t=o._fullLayout,i=o.calcdata,n=t._subplots[w],a=0;a<n.length;a++){var s=n[a],l=_(i,w,s),u=t[s]._subplot;u||(u=r({id:s,graphDiv:o,container:t._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),t[s]._subplot=u),u.plot(l,t,o._promises)}},updateFx:function(o){for(var t=o._fullLayout,i=t._subplots[w],n=0;n<i.length;n++){var a=t[i[n]];a._subplot.updateFx(t,a)}},clean:function(o,t,i,n){for(var a=n._subplots[w]||[],s=0;s<a.length;s++){var l=a[s],u=n[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(R,C,e){"use strict";var _=e(22548),T=e(86968).u,r=e(98192).u,w=e(79552),b=e(67824).overrideAll,c=e(95376),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:_.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:r};(R.exports=b({domain:T({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:c(w.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:c(w.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:_.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:w.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:w.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:w.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:w.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:_.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:_.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:_.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:_.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(R,C,e){"use strict";var _=e(3400),T=e(168),r=e(84888).op,w=e(79552),b=e(40384),c=w.axesNames;function o(t,i,n,a){var s=r(a.fullData,"geo",a.id).map(function(K){return K._expandedIndex}),l=n("resolution"),u=n("scope"),p=w.scopeDefaults[u],f=n("projection.type",p.projType),m=i._isAlbersUsa=f==="albers usa";m&&(u=i.scope="usa");var h=i._isScoped=u!=="world",g=i._isSatellite=f==="satellite",v=i._isConic=f.indexOf("conic")!==-1||f==="albers",x=i._isClipped=!!w.lonaxisSpan[f];if(t.visible===!1){var y=_.extendDeep({},i._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),i._template=y}for(var A=n("visible"),d=0;d<c.length;d++){var S,k=c[d],E=[30,10][d];if(h)S=p[k+"Range"];else{var L=w[k+"Span"],O=(L[f]||L["*"])/2,P=n("projection.rotation."+k.substr(0,3),p.projRotate[d]);S=[P-O,P+O]}var F=n(k+".range",S);n(k+".tick0"),n(k+".dtick",E),n(k+".showgrid",!!A&&void 0)&&(n(k+".gridcolor"),n(k+".gridwidth"),n(k+".griddash")),i[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:s,setScale:_.identity,c2l:_.identity,r2l:_.identity,autorange:!0,range:F.slice(),_m:1,_input:{}}}var U=i.lonaxis.range,I=i.lataxis.range,N=U[0],W=U[1];N>0&&W<0&&(W+=360);var B,V,q,ne=(N+W)/2;if(!m){var $=h?p.projRotate:[ne,0,0];B=n("projection.rotation.lon",$[0]),n("projection.rotation.lat",$[1]),n("projection.rotation.roll",$[2]),n("showcoastlines",!h&&A)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!A&&void 0)&&n("oceancolor")}m?(V=-96.6,q=38.7):(V=h?ne:B,q=(I[0]+I[1])/2),n("center.lon",V),n("center.lat",q),g&&(n("projection.tilt"),n("projection.distance")),v&&n("projection.parallels",p.projParallels||[0,60]),n("projection.scale"),n("showland",!!A&&void 0)&&n("landcolor"),n("showlakes",!!A&&void 0)&&n("lakecolor"),n("showrivers",!!A&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",h&&u!=="usa"&&A)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(n("showsubunits",A),n("subunitcolor"),n("subunitwidth")),h||n("showframe",A)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete i.projection.scale,h?(delete i.center.lon,delete i.center.lat):x?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}R.exports=function(t,i,n){T(t,i,n,{type:"geo",attributes:b,handleDefaults:o,fullData:n,partition:"y"})}},79248:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(24040),w=Math.PI/180,b=180/Math.PI,c={cursor:"pointer"},o={cursor:"auto"};function t(h,g){return _.behavior.zoom().translate(g.translate()).scale(g.scale())}function i(h,g,v){var x=h.id,y=h.graphDiv,A=y.layout,d=A[x],S=y._fullLayout,k=S[x],E={},L={};function O(P,F){E[x+"."+P]=T.nestedProperty(d,P).get(),r.call("_storeDirectGUIEdit",A,S._preGUI,E);var U=T.nestedProperty(k,P);U.get()!==F&&(U.set(F),T.nestedProperty(d,P).set(F),L[x+"."+P]=F)}v(O),O("projection.scale",g.scale()/h.fitScale),O("fitbounds",!1),y.emit("plotly_relayout",L)}function n(h,g){var v=t(0,g);function x(y){var A=g.invert(h.midPt);y("center.lon",A[0]),y("center.lat",A[1])}return v.on("zoomstart",function(){_.select(this).style(c)}).on("zoom",function(){g.scale(_.event.scale).translate(_.event.translate),h.render(!0);var y=g.invert(h.midPt);h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/h.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){_.select(this).style(o),i(h,g,x)}),v}function a(h,g){var v,x,y,A,d,S,k,E,L,O=t(0,g);function P(U){return g.invert(U)}function F(U){var I=g.rotate(),N=g.invert(h.midPt);U("projection.rotation.lon",-I[0]),U("center.lon",N[0]),U("center.lat",N[1])}return O.on("zoomstart",function(){_.select(this).style(c),v=_.mouse(this),x=g.rotate(),y=g.translate(),A=x,d=P(v)}).on("zoom",function(){if(S=_.mouse(this),function(N){var W=P(N);if(!W)return!0;var B=g(W);return Math.abs(B[0]-N[0])>2||Math.abs(B[1]-N[1])>2}(v))return O.scale(g.scale()),void O.translate(g.translate());g.scale(_.event.scale),g.translate([y[0],_.event.translate[1]]),d?P(S)&&(E=P(S),k=[A[0]+(E[0]-d[0]),x[1],x[2]],g.rotate(k),A=k):d=P(v=S),L=!0,h.render(!0);var U=g.rotate(),I=g.invert(h.midPt);h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/h.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1],"geo.projection.rotation.lon":-U[0]})}).on("zoomend",function(){_.select(this).style(o),L&&i(h,g,F)}),O}function s(h,g){var v,x={r:g.rotate(),k:g.scale()},y=t(0,g),A=function(E){for(var L=0,O=arguments.length,P=[];++L<O;)P.push(arguments[L]);var F=_.dispatch.apply(null,P);return F.of=function(U,I){return function(N){var W;try{W=N.sourceEvent=_.event,N.target=E,_.event=N,F[N.type].apply(U,I)}finally{_.event=W}}},F}(y,"zoomstart","zoom","zoomend"),d=0,S=y.on;function k(E){var L=g.rotate();E("projection.rotation.lon",-L[0]),E("projection.rotation.lat",-L[1])}return y.on("zoomstart",function(){_.select(this).style(c);var E,L,O,P,F,U,I,N,W,B,V,q=_.mouse(this),ne=g.rotate(),$=ne,K=g.translate(),ee=(L=.5*(E=ne)[0]*w,O=.5*E[1]*w,P=.5*E[2]*w,F=Math.sin(L),U=Math.cos(L),I=Math.sin(O),N=Math.cos(O),W=Math.sin(P),[U*N*(B=Math.cos(P))+F*I*W,F*N*B-U*I*W,U*I*B+F*N*W,U*N*W-F*I*B]);v=l(g,q),S.call(y,"zoom",function(){var J,Z,te,oe,se,ce,ye,me,fe,pe,ge=_.mouse(this);if(g.scale(x.k=_.event.scale),v){if(l(g,ge)){g.rotate(ne).translate(K);var ke=l(g,ge),Ce=function(re,he){if(re&&he){var Se=function(Pe,De){return[Pe[1]*De[2]-Pe[2]*De[1],Pe[2]*De[0]-Pe[0]*De[2],Pe[0]*De[1]-Pe[1]*De[0]]}(re,he),xe=Math.sqrt(m(Se,Se)),Te=.5*Math.acos(Math.max(-1,Math.min(1,m(re,he)))),Ae=Math.sin(Te)/xe;return xe&&[Math.cos(Te),Se[2]*Ae,-Se[1]*Ae,Se[0]*Ae]}}(v,ke),de=function(re){return[Math.atan2(2*(re[0]*re[1]+re[2]*re[3]),1-2*(re[1]*re[1]+re[2]*re[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(re[0]*re[2]-re[3]*re[1]))))*b,Math.atan2(2*(re[0]*re[3]+re[1]*re[2]),1-2*(re[2]*re[2]+re[3]*re[3]))*b]}((te=(J=ee)[0],oe=J[1],se=J[2],ce=J[3],[te*(ye=(Z=Ce)[0])-oe*(me=Z[1])-se*(fe=Z[2])-ce*(pe=Z[3]),te*me+oe*ye+se*pe-ce*fe,te*fe-oe*pe+se*ye+ce*me,te*pe+oe*fe-se*me+ce*ye])),ae=x.r=function(re,he,Se){var xe=f(he,2,re[0]);xe=f(xe,1,re[1]),xe=f(xe,0,re[2]-Se[2]);var Te,Ae,Pe=he[0],De=he[1],ve=he[2],we=xe[0],Ee=xe[1],Fe=xe[2],Le=Math.atan2(De,Pe)*b,je=Math.sqrt(Pe*Pe+De*De);Math.abs(Ee)>je?(Ae=(Ee>0?90:-90)-Le,Te=0):(Ae=Math.asin(Ee/je)*b-Le,Te=Math.sqrt(je*je-Ee*Ee));var Ge=180-Ae-2*Le,Je=(Math.atan2(Fe,we)-Math.atan2(ve,Te))*b,rt=(Math.atan2(Fe,we)-Math.atan2(ve,-Te))*b;return u(Se[0],Se[1],Ae,Je)<=u(Se[0],Se[1],Ge,rt)?[Ae,Je,Se[2]]:[Ge,rt,Se[2]]}(de,v,$);isFinite(ae[0])&&isFinite(ae[1])&&isFinite(ae[2])||(ae=$),g.rotate(ae),$=ae}}else v=l(g,q=ge);A.of(this,arguments)({type:"zoom"})}),V=A.of(this,arguments),d++||V({type:"zoomstart"})}).on("zoomend",function(){var E;_.select(this).style(o),S.call(y,"zoom",null),E=A.of(this,arguments),--d||E({type:"zoomend"}),i(h,g,k)}).on("zoom.redraw",function(){h.render(!0);var E=g.rotate();h.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":g.scale()/h.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),_.rebind(y,A,"on")}function l(h,g){var v=h.invert(g);return v&&isFinite(v[0])&&isFinite(v[1])&&function(x){var y=x[0]*w,A=x[1]*w,d=Math.cos(A);return[d*Math.cos(y),d*Math.sin(y),Math.sin(A)]}(v)}function u(h,g,v,x){var y=p(v-h),A=p(x-g);return Math.sqrt(y*y+A*A)}function p(h){return(h%360+540)%360-180}function f(h,g,v){var x=v*w,y=h.slice(),A=g===0?1:0,d=g===2?1:2,S=Math.cos(x),k=Math.sin(x);return y[A]=h[A]*S-h[d]*k,y[d]=h[d]*S+h[A]*k,y}function m(h,g){for(var v=0,x=0,y=h.length;x<y;++x)v+=h[x]*g[x];return v}R.exports=function(h,g){var v=h.projection;return(g._isScoped?n:g._isClipped?s:a)(h,v)}},84888:function(R,C,e){"use strict";var _=e(24040),T=e(33816).SUBPLOT_PATTERN;C.KY=function(r,w,b){var c=_.subplotsRegistry[w];if(!c)return[];for(var o=c.attr,t=[],i=0;i<r.length;i++){var n=r[i];n[0].trace[o]===b&&t.push(n)}return t},C._M=function(r,w,b){var c,o=[],t=[];if(!(c=typeof w=="string"?_.getModule(w).plot:typeof w=="function"?w:w.plot))return[o,r];for(var i=b,n=0;n<r.length;n++){var a=r[n],s=a[0].trace,l=s.zorder!==void 0;s.visible===!0&&s._length!==0&&(!s._module||s._module.plot!==c||l&&s.zorder!==i?t.push(a):o.push(a))}return[o,t]},C.op=function(r,w,b){if(!_.subplotsRegistry[w])return[];var c,o,t,i=_.subplotsRegistry[w].attr,n=[];if(w==="gl2d"){var a=b.match(T);o="x"+a[1],t="y"+a[2]}for(var s=0;s<r.length;s++)c=r[s],w==="gl2d"&&_.traceIs(c,"gl2d")?c[i[0]]===o&&c[i[1]]===t&&n.push(c):c[i]===b&&n.push(c);return n}},2428:function(R,C,e){"use strict";var _=e(62644),T=e(97264),r=e(29128),w=e(33816),b=e(89184);function c(o,t){this.element=o,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}R.exports=function(o){var t=o.mouseContainer,i=o.glplot,n=new c(t,i);function a(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function s(l,u,p){var f,m,h=o.calcDataBox(),g=i.viewBox,v=n.lastPos[0],x=n.lastPos[1],y=w.MINDRAG*i.pixelRatio,A=w.MINZOOM*i.pixelRatio;function d(P,F,U){var I=Math.min(F,U),N=Math.max(F,U);I!==N?(h[P]=I,h[P+2]=N,n.dataBox=h,o.setRanges(h)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(u*=i.pixelRatio,p*=i.pixelRatio,p=g[3]-g[1]-p,o.fullLayout.dragmode){case"zoom":if(l){var S=u/(g[2]-g[0])*(h[2]-h[0])+h[0],k=p/(g[3]-g[1])*(h[3]-h[1])+h[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=k,n.dragStart[0]=u,n.dragStart[1]=p),n.boxEnd[0]=S,n.boxEnd[1]=k,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-u)<A,L=Math.abs(n.dragStart[1]-p)<A;if(!function(){for(var P=o.graphDiv._fullLayout._axisConstraintGroups,F=o.xaxis._id,U=o.yaxis._id,I=0;I<P.length;I++)if(P[I][F]!==-1){if(P[I][U]!==-1)return!0;break}return!1}()||E&&L)E&&(n.boxEnd[0]=n.boxStart[0]),L&&(n.boxEnd[1]=n.boxStart[1]);else{f=n.boxEnd[0]-n.boxStart[0],m=n.boxEnd[1]-n.boxStart[1];var O=(h[3]-h[1])/(h[2]-h[0]);Math.abs(f*O)>Math.abs(m)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(f)*O*(m>=0?1:-1),n.boxEnd[1]<h[1]?(n.boxEnd[1]=h[1],n.boxEnd[0]=n.boxStart[0]+(h[1]-n.boxStart[1])/Math.abs(O)):n.boxEnd[1]>h[3]&&(n.boxEnd[1]=h[3],n.boxEnd[0]=n.boxStart[0]+(h[3]-n.boxStart[1])/Math.abs(O))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(m)/O*(f>=0?1:-1),n.boxEnd[0]<h[0]?(n.boxEnd[0]=h[0],n.boxEnd[1]=n.boxStart[1]+(h[0]-n.boxStart[0])*Math.abs(O)):n.boxEnd[0]>h[2]&&(n.boxEnd[0]=h[2],n.boxEnd[1]=n.boxStart[1]+(h[2]-n.boxStart[0])*Math.abs(O)))}}else n.boxEnabled?(f=n.boxStart[0]!==n.boxEnd[0],m=n.boxStart[1]!==n.boxEnd[1],f||m?(f&&(d(0,n.boxStart[0],n.boxEnd[0]),o.xaxis.autorange=!1),m&&(d(1,n.boxStart[1],n.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=p),Math.abs(n.dragStart[0]-u)<y&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-p)<y&&(p=n.dragStart[1]),f=(v-u)*(h[2]-h[0])/(i.viewBox[2]-i.viewBox[0]),m=(x-p)*(h[3]-h[1])/(i.viewBox[3]-i.viewBox[1]),h[0]+=f,h[2]+=f,h[1]+=m,h[3]+=m,o.setRanges(h),n.panning=!0,n.lastInputTime=Date.now(),a(),o.cameraChanged(),o.handleAnnotations()):n.panning&&(n.panning=!1,o.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=p}return n.mouseListener=_(t,s),t.addEventListener("touchstart",function(l){var u=r(l.changedTouches[0],t);s(0,u[0],u[1]),s(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=r(l.changedTouches[0],t);s(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){s(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),n.wheelListener=T(t,function(l,u){if(!o.scrollZoom)return!1;var p=o.calcDataBox(),f=i.viewBox,m=n.lastPos[0],h=n.lastPos[1],g=Math.exp(5*u/(f[3]-f[1])),v=m/(f[2]-f[0])*(p[2]-p[0])+p[0],x=h/(f[3]-f[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-v)*g+v,p[2]=(p[2]-v)*g+v,p[1]=(p[1]-x)*g+x,p[3]=(p[3]-x)*g+x,o.setRanges(p),n.lastInputTime=Date.now(),a(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),n}},92568:function(R,C,e){"use strict";var _=e(54460),T=e(43080);function r(c){this.scene=c,this.gl=c.gl,this.pixelRatio=c.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var w=r.prototype,b=["xaxis","yaxis"];w.merge=function(c){var o,t,i,n,a,s,l,u,p,f,m;for(this.titleEnable=!1,this.backgroundColor=T(c.plot_bgcolor),f=0;f<2;++f){var h=(o=b[f]).charAt(0);for(i=(t=c[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[h]?"":t.title.text,m=0;m<=2;m+=2)this.labelEnable[f+m]=!1,this.labels[f+m]=i,this.labelColor[f+m]=T(t.title.font.color),this.labelFont[f+m]=t.title.font.family,this.labelSize[f+m]=t.title.font.size,this.labelPad[f+m]=this.getLabelPad(o,t),this.tickEnable[f+m]=!1,this.tickColor[f+m]=T((t.tickfont||{}).color),this.tickAngle[f+m]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[f+m]=this.getTickPad(t),this.tickMarkLength[f+m]=0,this.tickMarkWidth[f+m]=t.tickwidth||0,this.tickMarkColor[f+m]=T(t.tickcolor),this.borderLineEnable[f+m]=!1,this.borderLineColor[f+m]=T(t.linecolor),this.borderLineWidth[f+m]=t.linewidth||0;l=this.hasSharedAxis(t),a=this.hasAxisInDfltPos(o,t)&&!l,s=this.hasAxisInAltrPos(o,t)&&!l,n=t.mirror||!1,u=l?String(n).indexOf("all")!==-1:!!n,p=l?n==="allticks":String(n).indexOf("ticks")!==-1,a?this.labelEnable[f]=!0:s&&(this.labelEnable[f+2]=!0),a?this.tickEnable[f]=t.showticklabels:s&&(this.tickEnable[f+2]=t.showticklabels),(a||u)&&(this.borderLineEnable[f]=t.showline),(s||u)&&(this.borderLineEnable[f+2]=t.showline),(a||p)&&(this.tickMarkLength[f]=this.getTickMarkLength(t)),(s||p)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(t)),this.gridLineEnable[f]=t.showgrid,this.gridLineColor[f]=T(t.gridcolor),this.gridLineWidth[f]=t.gridwidth,this.zeroLineEnable[f]=t.zeroline,this.zeroLineColor[f]=T(t.zerolinecolor),this.zeroLineWidth[f]=t.zerolinewidth}},w.hasSharedAxis=function(c){var o=this.scene,t=o.fullLayout._subplots.gl2d;return _.findSubplotsWithAxis(t,c).indexOf(o.id)!==0},w.hasAxisInDfltPos=function(c,o){var t=o.side;return c==="xaxis"?t==="bottom":c==="yaxis"?t==="left":void 0},w.hasAxisInAltrPos=function(c,o){var t=o.side;return c==="xaxis"?t==="top":c==="yaxis"?t==="right":void 0},w.getLabelPad=function(c,o){var t=1.5,i=o.title.font.size,n=o.showticklabels;return c==="xaxis"?o.side==="top"?i*(t+(n?1:0))-10:i*(t+(n?.5:0))-10:c==="yaxis"?o.side==="right"?10+i*(t+(n?1:.5)):10+i*(t+(n?.5:0)):void 0},w.getTickPad=function(c){return c.ticks==="outside"?10+c.ticklen:15},w.getTickMarkLength=function(c){if(!c.ticks)return 0;var o=c.ticklen;return c.ticks==="inside"?-o:o},R.exports=function(c){return new r(c)}},39952:function(R,C,e){"use strict";var _=e(67824).overrideAll,T=e(17188),r=e(64859),w=e(9616),b=e(33816),c=e(57952),o=e(65460),t=e(84888).op;C.name="gl2d",C.attr=["xaxis","yaxis"],C.idRoot=["x","y"],C.idRegex=b.idRegex,C.attrRegex=b.attrRegex,C.attributes=e(26720),C.supplyLayoutDefaults=function(i,n,a){n._has("cartesian")||c.supplyLayoutDefaults(i,n,a)},C.layoutAttrOverrides=_(c.layoutAttributes,"plot","from-root"),C.baseLayoutAttrOverrides=_({plot_bgcolor:r.plot_bgcolor,hoverlabel:o.hoverlabel},"plot","nested"),C.plot=function(i){for(var n=i._fullLayout,a=i._fullData,s=n._subplots.gl2d,l=0;l<s.length;l++){var u=s[l],p=n._plots[u],f=t(a,"gl2d",u),m=p._scene2d;m===void 0&&(m=new T({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},n),p._scene2d=m),m.plot(f,i.calcdata,n,i.layout)}},C.clean=function(i,n,a,s){for(var l=s._subplots.gl2d||[],u=0;u<l.length;u++){var p=l[u],f=s._plots[p];f._scene2d&&t(i,"gl2d",p).length===0&&(f._scene2d.destroy(),delete s._plots[p])}c.clean.apply(this,arguments)},C.drawFramework=function(i){i._context.staticPlot||c.drawFramework(i)},C.toSVG=function(i){for(var n=i._fullLayout,a=n._subplots.gl2d,s=0;s<a.length;s++){var l=n._plots[a[s]]._scene2d,u=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:w.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},C.updateFx=function(i){for(var n=i._fullLayout,a=n._subplots.gl2d,s=0;s<a.length;s++)n._plots[a[s]]._scene2d.updateFx(n.dragmode)}},17188:function(R,C,e){"use strict";var _,T,r=e(24040),w=e(54460),b=e(93024),c=e(67792).gl_plot2d,o=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),n=e(92568),a=e(2428),s=e(16576),l=e(71888),u=l.enforce,p=l.clean,f=e(19280).doAutoRange,m=e(72760),h=m.drawMode,g=m.selectMode,v=["xaxis","yaxis"],x=e(33816).SUBPLOT_PATTERN;function y(d,S){this.container=d.container,this.graphDiv=d.graphDiv,this.pixelRatio=d.plotGlPixelRatio||window.devicePixelRatio,this.id=d.id,this.staticPlot=!!d.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=c(this.glplotOptions),this.camera=a(this),this.traces={},this.spikes=o(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}R.exports=y;var A=y.prototype;A.makeFramework=function(){if(this.staticPlot){if(!(T||(_=document.createElement("canvas"),T=i({canvas:_,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=_,this.gl=T}else{var d=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:d,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return s(this),void(this.stopped=!0);this.canvas=d,this.gl=S}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var O=this.container;O.appendChild(E),O.appendChild(L);var P=this;L.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),L.addEventListener("mouseover",function(){P.isMouseOver=!0})},A.toImage=function(d){d||(d="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(_),this.updateSize(this.canvas);var S=this.glplot.gl,k=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var L=new Uint8Array(k*E*4);S.readPixels(0,0,k,E,S.RGBA,S.UNSIGNED_BYTE,L);for(var O=0,P=E-1;O<P;++O,--P)for(var F=0;F<k;++F)for(var U=0;U<4;++U){var I=L[4*(k*O+F)+U];L[4*(k*O+F)+U]=L[4*(k*P+F)+U],L[4*(k*P+F)+U]=I}var N=document.createElement("canvas");N.width=k,N.height=E;var W,B=N.getContext("2d",{willReadFrequently:!0}),V=B.createImageData(k,E);switch(V.data.set(L),B.putImageData(V,0,0),d){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(_),W},A.updateSize=function(d){d||(d=this.canvas);var S=this.pixelRatio,k=this.fullLayout,E=k.width,L=k.height,O=0|Math.ceil(S*E),P=0|Math.ceil(S*L);return d.width===O&&d.height===P||(d.width=O,d.height=P),d},A.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var d=[w.calcTicks(this.xaxis),w.calcTicks(this.yaxis)],S=0;S<2;++S)for(var k=0;k<d[S].length;++k)d[S][k].text=d[S][k].text+"";return d},A.updateRefs=function(d){this.fullLayout=d;var S=this.id.match(x),k="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[k],this.yaxis=this.fullLayout[E]},A.relayoutCallback=function(){var d=this.graphDiv,S=this.xaxis,k=this.yaxis,E=d.layout,L={},O=L[S._name+".range"]=S.range.slice(),P=L[k._name+".range"]=k.range.slice();L[S._name+".autorange"]=S.autorange,L[k._name+".autorange"]=k.autorange,r.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,L);var F=E[S._name];F.range=O,F.autorange=S.autorange;var U=E[k._name];U.range=P,U.autorange=k.autorange,L.lastInputTime=this.camera.lastInputTime,d.emit("plotly_relayout",L)},A.cameraChanged=function(){var d=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(k,E){for(var L=0;L<2;++L){var O=k[L],P=E[L];if(O.length!==P.length)return!0;for(var F=0;F<O.length;++F)if(O[F].x!==P[F].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=d.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},A.handleAnnotations=function(){for(var d=this.graphDiv,S=this.fullLayout.annotations,k=0;k<S.length;k++){var E=S[k];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&r.getComponentMethod("annotations","drawOne")(d,k)}},A.destroy=function(){if(this.glplot){var d=this.traces;d&&Object.keys(d).map(function(S){d[S].dispose(),delete d[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},A.plot=function(d,S,k){var E=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(d,S),this.updateFx(k.dragmode);var L=k.width,O=k.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(k),P.screenBox=[0,0,L,O];var F={_fullLayout:{_axisConstraintGroups:k._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:k._size}};p(F,this.xaxis),p(F,this.yaxis);var U,I,N=k._size,W=this.xaxis.domain,B=this.yaxis.domain;for(P.viewBox=[N.l+W[0]*N.w,N.b+B[0]*N.h,L-N.r-(1-W[1])*N.w,O-N.t-(1-B[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(B[1]-B[0])+"px",this.mouseContainer.height=N.h*(B[1]-B[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-B[1])*N.h+"px",I=0;I<2;++I)(U=this[v[I]])._length=P.viewBox[I+2]-P.viewBox[I],f(this.graphDiv,U),U.setScale();u(F),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(k),E.update(P),this.glplot.draw()},A.calcDataBox=function(){var d=this.xaxis,S=this.yaxis,k=d.range,E=S.range,L=d.r2l,O=S.r2l;return[L(k[0]),O(E[0]),L(k[1]),O(E[1])]},A.setRanges=function(d){var S=this.xaxis,k=this.yaxis,E=S.l2r,L=k.l2r;S.range=[E(d[0]),E(d[2])],k.range=[L(d[1]),L(d[3])]},A.updateTraces=function(d,S){var k,E,L,O=Object.keys(this.traces);this.fullData=d;e:for(k=0;k<O.length;k++){var P=O[k],F=this.traces[P];for(E=0;E<d.length;E++)if((L=d[E]).uid===P&&L.type===F.type)continue e;F.dispose(),delete this.traces[P]}for(k=0;k<d.length;k++){L=d[k];var U=S[k],I=this.traces[L.uid];I?I.update(L,U):(I=L._module.plot(this,L,U),this.traces[L.uid]=I)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},A.updateFx=function(d){g(d)||h(d)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=d==="pan"?"move":d==="zoom"?"crosshair":null},A.emitPointAction=function(d,S){for(var k,E=d.trace.uid,L=d.pointIndex,O=0;O<this.fullData.length;O++)this.fullData[O].uid===E&&(k=this.fullData[O]);var P={x:d.traceCoord[0],y:d.traceCoord[1],curveNumber:k.index,pointNumber:L,data:k._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(P,k,L),this.graphDiv.emit(S,{points:[P]})},A.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var d=this.glplot,S=this.camera,k=S.mouseListener,E=this.lastButtonState===1&&k.buttons===0,L=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var O,P=k.x*d.pixelRatio,F=this.canvas.height-d.pixelRatio*k.y;if(S.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var U=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],I=0;I<2;I++)S.boxStart[I]===S.boxEnd[I]&&(U[I]=d.dataBox[I],U[I+2]=d.dataBox[I+2]);d.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=L._size,W=this.xaxis.domain,B=this.yaxis.domain,V=(O=d.pick(P/d.pixelRatio+N.l+W[0]*N.w,F/d.pixelRatio-(N.t+(1-B[1])*N.h)))&&O.object._trace.handlePick(O);if(V&&E&&this.emitPointAction(V,"plotly_click"),O&&O.object._trace.hoverinfo!=="skip"&&L.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var q=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:O.dataCoord}),q.screenCoord=[((d.viewBox[2]-d.viewBox[0])*(O.dataCoord[0]-d.dataBox[0])/(d.dataBox[2]-d.dataBox[0])+d.viewBox[0])/d.pixelRatio,(this.canvas.height-(d.viewBox[3]-d.viewBox[1])*(O.dataCoord[1]-d.dataBox[1])/(d.dataBox[3]-d.dataBox[1])-d.viewBox[1])/d.pixelRatio],this.emitPointAction(V,"plotly_hover");var ne=this.fullData[q.trace.index]||{},$=q.pointIndex,K=b.castHoverinfo(ne,L,$);if(K&&K!=="all"){var ee=K.split("+");ee.indexOf("x")===-1&&(q.traceCoord[0]=void 0),ee.indexOf("y")===-1&&(q.traceCoord[1]=void 0),ee.indexOf("z")===-1&&(q.traceCoord[2]=void 0),ee.indexOf("text")===-1&&(q.textLabel=void 0),ee.indexOf("name")===-1&&(q.name=void 0)}b.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:b.castHoverOption(ne,$,"bgcolor")||q.color,borderColor:b.castHoverOption(ne,$,"bordercolor"),fontFamily:b.castHoverOption(ne,$,"font.family"),fontSize:b.castHoverOption(ne,$,"font.size"),fontColor:b.castHoverOption(ne,$,"font.color"),nameLength:b.castHoverOption(ne,$,"namelength"),textAlign:b.castHoverOption(ne,$,"align")},{container:this.svgContainer,gd:this.graphDiv})}}O||this.unhover(),d.draw()}},A.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},A.hoverFormatter=function(d,S){if(S!==void 0){var k=this[d];return w.tickText(k,k.c2l(S),"hover").text}}},12536:function(R,C,e){"use strict";var _=e(67824).overrideAll,T=e(65460),r=e(98432),w=e(84888).op,b=e(3400),c=e(9616),o="gl3d",t="scene";C.name=o,C.attr=t,C.idRoot=t,C.idRegex=C.attrRegex=b.counterRegex("scene"),C.attributes=e(6636),C.layoutAttributes=e(346),C.baseLayoutAttrOverrides=_({hoverlabel:T.hoverlabel},"plot","nested"),C.supplyLayoutDefaults=e(5208),C.plot=function(i){for(var n=i._fullLayout,a=i._fullData,s=n._subplots[o],l=0;l<s.length;l++){var u=s[l],p=w(a,o,u),f=n[u],m=f.camera,h=f._scene;h||(h=new r({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:m},n),f._scene=h),h.viewInitial||(h.viewInitial={up:{x:m.up.x,y:m.up.y,z:m.up.z},eye:{x:m.eye.x,y:m.eye.y,z:m.eye.z},center:{x:m.center.x,y:m.center.y,z:m.center.z}}),h.plot(p,n,i.layout)}},C.clean=function(i,n,a,s){for(var l=s._subplots[o]||[],u=0;u<l.length;u++){var p=l[u];!n[p]&&s[p]._scene&&(s[p]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+p).remove())}},C.toSVG=function(i){for(var n=i._fullLayout,a=n._subplots[o],s=n._size,l=0;l<a.length;l++){var u=n[a[l]],p=u.domain,f=u._scene,m=f.toImage("png");n._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":m,x:s.l+s.w*p.x[0],y:s.t+s.h*(1-p.y[1]),width:s.w*(p.x[1]-p.x[0]),height:s.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),f.destroy()}},C.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var n=i.substr(5);return n==="1"&&(n=""),t+n}},C.updateFx=function(i){for(var n=i._fullLayout,a=n._subplots[o],s=0;s<a.length;s++)n[a[s]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(R){"use strict";R.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(R,C,e){"use strict";var _=e(76308),T=e(94724),r=e(92880).extendFlat,w=e(67824).overrideAll;R.exports=w({visible:T.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:_.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:T.color,categoryorder:T.categoryorder,categoryarray:T.categoryarray,title:{text:T.title.text,font:T.title.font},type:r({},T.type,{values:["-","linear","log","date","category"]}),autotypenumbers:T.autotypenumbers,autorange:T.autorange,autorangeoptions:{minallowed:T.autorangeoptions.minallowed,maxallowed:T.autorangeoptions.maxallowed,clipmin:T.autorangeoptions.clipmin,clipmax:T.autorangeoptions.clipmax,include:T.autorangeoptions.include,editType:"plot"},rangemode:T.rangemode,minallowed:T.minallowed,maxallowed:T.maxallowed,range:r({},T.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,mirror:T.mirror,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,showticklabels:T.showticklabels,labelalias:T.labelalias,tickfont:T.tickfont,tickangle:T.tickangle,tickprefix:T.tickprefix,showtickprefix:T.showtickprefix,ticksuffix:T.ticksuffix,showticksuffix:T.showticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickformat:T.tickformat,tickformatstops:T.tickformatstops,hoverformat:T.hoverformat,showline:T.showline,linecolor:T.linecolor,linewidth:T.linewidth,showgrid:T.showgrid,gridcolor:r({},T.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:T.gridwidth,zeroline:T.zeroline,zerolinecolor:T.zerolinecolor,zerolinewidth:T.zerolinewidth,_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}},"plot","from-root")},64380:function(R,C,e){"use strict";var _=e(49760).mix,T=e(3400),r=e(31780),w=e(86140),b=e(14944),c=e(28336),o=["xaxis","yaxis","zaxis"];R.exports=function(t,i,n){var a,s;function l(f,m){return T.coerce(a,s,w,f,m)}for(var u=0;u<o.length;u++){var p=o[u];a=t[p]||{},(s=r.newContainer(i,p))._id=p[0]+n.scene,s._name=p,b(a,s,l,n),c(a,s,l,{font:n.font,letter:p[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",_(s.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",p[0]),s.setScale=T.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",s.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(R,C,e){"use strict";var _=e(43080),T=e(3400),r=["xaxis","yaxis","zaxis"];function w(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}w.prototype.merge=function(b,c){for(var o=this,t=0;t<3;++t){var i=c[r[t]];i.visible?(o.labels[t]=b._meta?T.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(o.labelColor[t]=_(i.title.font.color)),i.title.font.family&&(o.labelFont[t]=i.title.font.family),i.title.font.size&&(o.labelSize[t]=i.title.font.size),i.title.font.weight&&(o.labelFontWeight[t]=i.title.font.weight),i.title.font.style&&(o.labelFontStyle[t]=i.title.font.style),i.title.font.variant&&(o.labelFontVariant[t]=i.title.font.variant)),"showline"in i&&(o.lineEnable[t]=i.showline),"linecolor"in i&&(o.lineColor[t]=_(i.linecolor)),"linewidth"in i&&(o.lineWidth[t]=i.linewidth),"showgrid"in i&&(o.gridEnable[t]=i.showgrid),"gridcolor"in i&&(o.gridColor[t]=_(i.gridcolor)),"gridwidth"in i&&(o.gridWidth[t]=i.gridwidth),i.type==="log"?o.zeroEnable[t]=!1:"zeroline"in i&&(o.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(o.zeroLineColor[t]=_(i.zerolinecolor)),"zerolinewidth"in i&&(o.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?o.lineTickEnable[t]=!0:o.lineTickEnable[t]=!1,"ticklen"in i&&(o.lineTickLength[t]=o._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(o.lineTickColor[t]=_(i.tickcolor)),"tickwidth"in i&&(o.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(o.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(o.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(o.tickColor[t]=_(i.tickfont.color)),i.tickfont.family&&(o.tickFont[t]=i.tickfont.family),i.tickfont.size&&(o.tickSize[t]=i.tickfont.size),i.tickfont.weight&&(o.tickFontWeight[t]=i.tickfont.weight),i.tickfont.style&&(o.tickFontStyle[t]=i.tickfont.style),i.tickfont.variant&&(o.tickFontVariant[t]=i.tickfont.variant)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(o.lineTickMirror[t]=!0,o.lineMirror[t]=!0):i.mirror===!0?(o.lineTickMirror[t]=!1,o.lineMirror[t]=!0):(o.lineTickMirror[t]=!1,o.lineMirror[t]=!1):o.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(o.backgroundEnable[t]=!0,o.backgroundColor[t]=_(i.backgroundcolor)):o.backgroundEnable[t]=!1):(o.tickEnable[t]=!1,o.labelEnable[t]=!1,o.lineEnable[t]=!1,o.lineTickEnable[t]=!1,o.gridEnable[t]=!1,o.zeroEnable[t]=!1,o.backgroundEnable[t]=!1)}},R.exports=function(b,c){var o=new w;return o.merge(b,c),o}},5208:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(24040),w=e(168),b=e(64380),c=e(346),o=e(84888).op,t="gl3d";function i(n,a,s,l){for(var u=s("bgcolor"),p=T.combine(u,l.paper_bgcolor),f=["up","center","eye"],m=0;m<f.length;m++)s("camera."+f[m]+".x"),s("camera."+f[m]+".y"),s("camera."+f[m]+".z");s("camera.projection.type");var h=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),g=s("aspectmode",h?"manual":"auto");h||(n.aspectratio=a.aspectratio={x:1,y:1,z:1},g==="manual"&&(a.aspectmode="auto"),n.aspectmode=a.aspectmode);var v=o(l.fullData,t,l.id);b(n,a,{font:l.font,scene:l.id,data:v,bgColor:p,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),r.getComponentMethod("annotations3d","handleDefaults")(n,a,l);var x=l.getDfltFromLayout("dragmode");if(x!==!1&&!x)if(x="orbit",n.camera&&n.camera.up){var y=n.camera.up.x,A=n.camera.up.y,d=n.camera.up.z;d!==0&&(y&&A&&d?d/Math.sqrt(y*y+A*A+d*d)>.999&&(x="turntable"):x="turntable")}else x="turntable";s("dragmode",x),s("hovermode",l.getDfltFromLayout("hovermode"))}R.exports=function(n,a,s){var l=a._basePlotModules.length>1;w(n,a,s,{type:t,attributes:c,handleDefaults:i,fullLayout:a,font:a.font,fullData:s,getDfltFromLayout:function(u){if(!l)return _.validate(n[u],c[u])?n[u]:void 0},autotypenumbersDflt:a.autotypenumbers,paper_bgcolor:a.paper_bgcolor,calendar:a.calendar})}},346:function(R,C,e){"use strict";var _=e(86140),T=e(86968).u,r=e(92880).extendFlat,w=e(3400).counterRegex;function b(c,o,t){return{x:{valType:"number",dflt:c,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}R.exports={_arrayAttrRegexps:[w("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:r(b(0,0,1),{}),center:r(b(0,0,0),{}),eye:r(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:T({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:_,yaxis:_,zaxis:_,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(R,C,e){"use strict";var _=e(43080),T=["xaxis","yaxis","zaxis"];function r(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}r.prototype.merge=function(w){for(var b=0;b<3;++b){var c=w[T[b]];c.visible?(this.enabled[b]=c.showspikes,this.colors[b]=_(c.spikecolor),this.drawSides[b]=c.spikesides,this.lineWidth[b]=c.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},R.exports=function(w){var b=new r;return b.merge(w),b}},87152:function(R,C,e){"use strict";R.exports=function(b){for(var c=b.axesOptions,o=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],n=0;n<3;++n){var a=t[r[n]];if(a._length=(o[n].hi-o[n].lo)*o[n].pixelsPerDataUnit/b.dataScale[n],Math.abs(a._length)===1/0||isNaN(a._length))i[n]=[];else{a._input_range=a.range.slice(),a.range[0]=o[n].lo/b.dataScale[n],a.range[1]=o[n].hi/b.dataScale[n],a._m=1/(b.dataScale[n]*o[n].pixelsPerDataUnit),a.range[0]===a.range[1]&&(a.range[0]-=1,a.range[1]+=1);var s=a.tickmode;if(a.tickmode==="auto"){a.tickmode="linear";var l=a.nticks||T.constrain(a._length/40,4,9);_.autoTicks(a,Math.abs(a.range[1]-a.range[0])/l)}for(var u=_.calcTicks(a,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*b.dataScale[n],a.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));i[n]=u,a.tickmode=s}}for(c.ticks=i,n=0;n<3;++n)for(w[n]=.5*(b.glplot.bounds[0][n]+b.glplot.bounds[1][n]),p=0;p<2;++p)c.bounds[p][n]=b.glplot.bounds[p][n];b.contourLevels=function(f){for(var m=new Array(3),h=0;h<3;++h){for(var g=f[h],v=new Array(g.length),x=0;x<g.length;++x)v[x]=g[x].x;m[h]=v}return m}(i)};var _=e(54460),T=e(3400),r=["xaxis","yaxis","zaxis"],w=[0,0,0]},94424:function(R){"use strict";function C(e,_){var T,r,w=[0,0,0,0];for(T=0;T<4;++T)for(r=0;r<4;++r)w[r]+=e[4*T+r]*_[T];return w}R.exports=function(e,_){return C(e.projection,C(e.view,C(e.model,[_[0],_[1],_[2],1])))}},98432:function(R,C,e){"use strict";var _,T,r=e(67792).gl_plot3d,w=r.createCamera,b=r.createScene,c=e(5408),o=e(89184),t=e(24040),i=e(3400),n=i.preserveDrawingBuffer(),a=e(54460),s=e(93024),l=e(43080),u=e(16576),p=e(94424),f=e(44728),m=e(9020),h=e(87152),g=e(19280).applyAutorangeOptions,v=!1;function x(k,E){var L=document.createElement("div"),O=k.container;this.graphDiv=k.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",L.appendChild(P),this.svgContainer=P,L.id=k.id,L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",O.appendChild(L),this.fullLayout=E,this.id=k.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=f(E,E[this.id]),this.spikeOptions=m(E[this.id]),this.container=L,this.staticMode=!!k.staticPlot,this.pixelRatio=this.pixelRatio||k.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=x.prototype;y.prepareOptions=function(){var k=this,E={canvas:k.canvas,gl:k.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:k.container,axes:k.axesOptions,spikes:k.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:k.camera,pixelRatio:k.pixelRatio};if(k.staticMode){if(!(T||(_=document.createElement("canvas"),T=c({canvas:_,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=T,E.canvas=_}return E};var A=!0;y.tryCreatePlot=function(){var k=this,E=k.prepareOptions(),L=!0;try{k.glplot=b(E)}catch{if(k.staticMode||!A||n)L=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,k.glplot=b(E)}catch{n=E.glOptions.preserveDrawingBuffer=!1,L=!1}}}return A=!1,L},y.initializeGLCamera=function(){var k=this,E=k.fullSceneLayout.camera,L=E.projection.type==="orthographic";k.camera=w(k.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:L,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var k=this;if(k.initializeGLCamera(),!k.tryCreatePlot())return u(k);k.traces={},k.make4thDimension();var E=k.graphDiv,L=E.layout,O=function(){var F={};return k.isCameraChanged(L)&&(F[k.id+".camera"]=k.getCamera()),k.isAspectChanged(L)&&(F[k.id+".aspectratio"]=k.glplot.getAspectratio(),L[k.id].aspectmode!=="manual"&&(k.fullSceneLayout.aspectmode=L[k.id].aspectmode=F[k.id+".aspectmode"]="manual")),F},P=function(F){if(F.fullSceneLayout.dragmode!==!1){var U=O();F.saveLayout(L),F.graphDiv.emit("plotly_relayout",U)}};return k.glplot.canvas&&(k.glplot.canvas.addEventListener("mouseup",function(){P(k)}),k.glplot.canvas.addEventListener("touchstart",function(){v=!0}),k.glplot.canvas.addEventListener("wheel",function(F){if(E._context._scrollZoom.gl3d){if(k.camera._ortho){var U=F.deltaX>F.deltaY?1.1:.9090909090909091,I=k.glplot.getAspectratio();k.glplot.setAspectratio({x:U*I.x,y:U*I.y,z:U*I.z})}P(k)}},!!o&&{passive:!1}),k.glplot.canvas.addEventListener("mousemove",function(){if(k.fullSceneLayout.dragmode!==!1&&k.camera.mouseListener.buttons!==0){var F=O();k.graphDiv.emit("plotly_relayouting",F)}}),k.staticMode||k.glplot.canvas.addEventListener("webglcontextlost",function(F){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:F,layer:k.id})},!1)),k.glplot.oncontextloss=function(){k.recoverContext()},k.glplot.onrender=function(){k.render()},!0},y.render=function(){var k,E=this,L=E.graphDiv,O=E.svgContainer,P=E.container.getBoundingClientRect();L._fullLayout._calcInverseTransform(L);var F=L._fullLayout._invScaleX,U=L._fullLayout._invScaleY,I=P.width*F,N=P.height*U;O.setAttributeNS(null,"viewBox","0 0 "+I+" "+N),O.setAttributeNS(null,"width",I),O.setAttributeNS(null,"height",N),h(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),B=null,V=E.glplot.selection,q=0;q<W.length;++q)(k=E.traces[W[q]]).data.hoverinfo!=="skip"&&k.handlePick(V)&&(B=k),k.setContourLevels&&k.setContourLevels();function ne(pe,ge,ke){var Ce=E.fullSceneLayout[pe+"axis"];return Ce.type!=="log"&&(ge=Ce.d2l(ge)),a.hoverLabelText(Ce,ge,ke)}if(B!==null){var $=p(E.glplot.cameraParams,V.dataCoordinate);k=B.data;var K,ee=L._fullData[k.index],J=V.index,Z={xLabel:ne("x",V.traceCoordinate[0],k.xhoverformat),yLabel:ne("y",V.traceCoordinate[1],k.yhoverformat),zLabel:ne("z",V.traceCoordinate[2],k.zhoverformat)},te=s.castHoverinfo(ee,E.fullLayout,J),oe=(te||"").split("+"),se=te&&te==="all";ee.hovertemplate||se||(oe.indexOf("x")===-1&&(Z.xLabel=void 0),oe.indexOf("y")===-1&&(Z.yLabel=void 0),oe.indexOf("z")===-1&&(Z.zLabel=void 0),oe.indexOf("text")===-1&&(V.textLabel=void 0),oe.indexOf("name")===-1&&(B.name=void 0));var ce=[];k.type==="cone"||k.type==="streamtube"?(Z.uLabel=ne("x",V.traceCoordinate[3],k.uhoverformat),(se||oe.indexOf("u")!==-1)&&ce.push("u: "+Z.uLabel),Z.vLabel=ne("y",V.traceCoordinate[4],k.vhoverformat),(se||oe.indexOf("v")!==-1)&&ce.push("v: "+Z.vLabel),Z.wLabel=ne("z",V.traceCoordinate[5],k.whoverformat),(se||oe.indexOf("w")!==-1)&&ce.push("w: "+Z.wLabel),Z.normLabel=V.traceCoordinate[6].toPrecision(3),(se||oe.indexOf("norm")!==-1)&&ce.push("norm: "+Z.normLabel),k.type==="streamtube"&&(Z.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(se||oe.indexOf("divergence")!==-1)&&ce.push("divergence: "+Z.divergenceLabel)),V.textLabel&&ce.push(V.textLabel),K=ce.join("<br>")):k.type==="isosurface"||k.type==="volume"?(Z.valueLabel=a.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),k.valuehoverformat),ce.push("value: "+Z.valueLabel),V.textLabel&&ce.push(V.textLabel),K=ce.join("<br>")):K=V.textLabel;var ye={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:ee._input,fullData:ee,curveNumber:ee.index,pointNumber:J};s.appendArrayPointValue(ye,ee,J),k._module.eventData&&(ye=ee._module.eventData(ye,V,ee,{},J));var me={points:[ye]};if(E.fullSceneLayout.hovermode){var fe=[];s.loneHover({trace:ee,x:(.5+.5*$[0]/$[3])*I,y:(.5-.5*$[1]/$[3])*N,xLabel:Z.xLabel,yLabel:Z.yLabel,zLabel:Z.zLabel,text:K,name:B.name,color:s.castHoverOption(ee,J,"bgcolor")||B.color,borderColor:s.castHoverOption(ee,J,"bordercolor"),fontFamily:s.castHoverOption(ee,J,"font.family"),fontSize:s.castHoverOption(ee,J,"font.size"),fontColor:s.castHoverOption(ee,J,"font.color"),nameLength:s.castHoverOption(ee,J,"namelength"),textAlign:s.castHoverOption(ee,J,"align"),hovertemplate:i.castOption(ee,J,"hovertemplate"),hovertemplateLabels:i.extendFlat({},ye,Z),eventData:[ye]},{container:O,gd:L,inOut_bbox:fe}),ye.bbox=fe[0]}V.distance<5&&(V.buttons||v)?L.emit("plotly_click",me):L.emit("plotly_hover",me),this.oldEventData=me}else s.loneUnhover(O),this.oldEventData&&L.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},y.recoverContext=function(){var k=this;k.glplot.dispose();var E=function(){k.glplot.gl.isContextLost()?requestAnimationFrame(E):k.initializeGLPlot()?k.plot.apply(k,k.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var d=["xaxis","yaxis","zaxis"];function S(k,E,L){for(var O=k.fullSceneLayout,P=0;P<3;P++){var F=d[P],U=F.charAt(0),I=O[F],N=E[U],W=E[U+"calendar"],B=E["_"+U+"length"];if(i.isArrayOrTypedArray(N))for(var V,q=0;q<(B||N.length);q++)if(i.isArrayOrTypedArray(N[q]))for(var ne=0;ne<N[q].length;++ne)V=I.d2l(N[q][ne],0,W),!isNaN(V)&&isFinite(V)&&(L[0][P]=Math.min(L[0][P],V),L[1][P]=Math.max(L[1][P],V));else V=I.d2l(N[q],0,W),!isNaN(V)&&isFinite(V)&&(L[0][P]=Math.min(L[0][P],V),L[1][P]=Math.max(L[1][P],V));else L[0][P]=Math.min(L[0][P],0),L[1][P]=Math.max(L[1][P],B-1)}}y.plot=function(k,E,L){var O=this;if(O.plotArgs=[k,E,L],!O.glplot.contextLost){var P,F,U,I,N,W,B=E[O.id],V=L[O.id];O.fullLayout=E,O.fullSceneLayout=B,O.axesOptions.merge(E,B),O.spikeOptions.merge(B),O.setViewport(B),O.updateFx(B.dragmode,B.hovermode),O.camera.enableWheel=O.graphDiv._context._scrollZoom.gl3d,O.glplot.setClearColor(l(B.bgcolor)),O.setConvert(N),k?Array.isArray(k)||(k=[k]):k=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<k.length;++U)(P=k[U]).visible===!0&&P._length!==0&&S(this,P,q);(function(Ae,Pe){for(var De=Ae.fullSceneLayout,ve=De.annotations||[],we=0;we<3;we++)for(var Ee=d[we],Fe=Ee.charAt(0),Le=De[Ee],je=0;je<ve.length;je++){var Ge=ve[je];if(Ge.visible){var Je=Le.r2l(Ge[Fe]);!isNaN(Je)&&isFinite(Je)&&(Pe[0][we]=Math.min(Pe[0][we],Je),Pe[1][we]=Math.max(Pe[1][we],Je))}}})(this,q);var ne=[1,1,1];for(I=0;I<3;++I)q[1][I]===q[0][I]?ne[I]=1:ne[I]=1/(q[1][I]-q[0][I]);for(O.dataScale=ne,O.convertAnnotations(this),U=0;U<k.length;++U)(P=k[U]).visible===!0&&P._length!==0&&((F=O.traces[P.uid])?F.data.type===P.type?F.update(P):(F.dispose(),F=P._module.plot(this,P),O.traces[P.uid]=F):(F=P._module.plot(this,P),O.traces[P.uid]=F),F.name=P.name);var $=Object.keys(O.traces);e:for(U=0;U<$.length;++U){for(I=0;I<k.length;++I)if(k[I].uid===$[U]&&k[I].visible===!0&&k[I]._length!==0)continue e;(F=O.traces[$[U]]).dispose(),delete O.traces[$[U]]}O.glplot.objects.sort(function(Ae,Pe){return Ae._trace.data.index-Pe._trace.data.index});var K,ee=[[0,0,0],[0,0,0]],J=[],Z={};for(U=0;U<3;++U){var te;if((W=(N=B[d[U]]).type)in Z?(Z[W].acc*=ne[U],Z[W].count+=1):Z[W]={acc:ne[U],count:1},N.autorange){ee[0][U]=1/0,ee[1][U]=-1/0;var oe=O.glplot.objects,se=O.fullSceneLayout.annotations||[],ce=N._name.charAt(0);for(I=0;I<oe.length;I++){var ye=oe[I],me=ye.bounds,fe=ye._trace.data._pad||0;ye.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?ee[0][U]=Math.min(ee[0][U],N._lowerLogErrorBound):ee[0][U]=Math.min(ee[0][U],me[0][U]/ne[U]-fe),ee[1][U]=Math.max(ee[1][U],me[1][U]/ne[U]+fe)}for(I=0;I<se.length;I++){var pe=se[I];if(pe.visible){var ge=N.r2l(pe[ce]);ee[0][U]=Math.min(ee[0][U],ge),ee[1][U]=Math.max(ee[1][U],ge)}}if("rangemode"in N&&N.rangemode==="tozero"&&(ee[0][U]=Math.min(ee[0][U],0),ee[1][U]=Math.max(ee[1][U],0)),ee[0][U]>ee[1][U])ee[0][U]=-1,ee[1][U]=1;else{var ke=ee[1][U]-ee[0][U];ee[0][U]-=ke/32,ee[1][U]+=ke/32}if(te=[ee[0][U],ee[1][U]],te=g(te,N),ee[0][U]=te[0],ee[1][U]=te[1],N.isReversed()){var Ce=ee[0][U];ee[0][U]=ee[1][U],ee[1][U]=Ce}}else te=N.range,ee[0][U]=N.r2l(te[0]),ee[1][U]=N.r2l(te[1]);ee[0][U]===ee[1][U]&&(ee[0][U]-=1,ee[1][U]+=1),J[U]=ee[1][U]-ee[0][U],N.range=[ee[0][U],ee[1][U]],N.limitRange(),O.glplot.setBounds(U,{min:N.range[0]*ne[U],max:N.range[1]*ne[U]})}var de=B.aspectmode;if(de==="cube")K=[1,1,1];else if(de==="manual"){var ae=B.aspectratio;K=[ae.x,ae.y,ae.z]}else{if(de!=="auto"&&de!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var re=[1,1,1];for(U=0;U<3;++U){var he=Z[W=(N=B[d[U]]).type];re[U]=Math.pow(he.acc,1/he.count)/ne[U]}K=de==="data"||Math.max.apply(null,re)/Math.min.apply(null,re)<=4?re:[1,1,1]}B.aspectratio.x=V.aspectratio.x=K[0],B.aspectratio.y=V.aspectratio.y=K[1],B.aspectratio.z=V.aspectratio.z=K[2],O.glplot.setAspectratio(B.aspectratio),O.viewInitial.aspectratio||(O.viewInitial.aspectratio={x:B.aspectratio.x,y:B.aspectratio.y,z:B.aspectratio.z}),O.viewInitial.aspectmode||(O.viewInitial.aspectmode=B.aspectmode);var Se=B.domain||null,xe=E._size||null;if(Se&&xe){var Te=O.container.style;Te.position="absolute",Te.left=xe.l+Se.x[0]*xe.w+"px",Te.top=xe.t+(1-Se.y[1])*xe.h+"px",Te.width=xe.w*(Se.x[1]-Se.x[0])+"px",Te.height=xe.h*(Se.y[1]-Se.y[0])+"px"}O.glplot.redraw()}},y.destroy=function(){var k=this;k.glplot&&(k.camera.mouseListener.enabled=!1,k.container.removeEventListener("wheel",k.camera.wheelListener),k.camera=null,k.glplot.dispose(),k.container.parentNode.removeChild(k.container),k.glplot=null)},y.getCamera=function(){var k,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(k=E.camera).up[0],y:k.up[1],z:k.up[2]},center:{x:k.center[0],y:k.center[1],z:k.center[2]},eye:{x:k.eye[0],y:k.eye[1],z:k.eye[2]},projection:{type:k._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(k){var E,L=this,O=k.camera;L.camera.lookAt.apply(this,[[(E=O).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),L.glplot.setAspectratio(k.aspectratio),O.projection.type==="orthographic"!==L.camera._ortho&&(L.glplot.redraw(),L.glplot.clearRGBA(),L.glplot.dispose(),L.initializeGLPlot())},y.isCameraChanged=function(k){var E=this.getCamera(),L=i.nestedProperty(k,this.id+".camera").get();function O(I,N,W,B){var V=["up","center","eye"],q=["x","y","z"];return N[V[W]]&&I[V[W]][q[B]]===N[V[W]][q[B]]}var P=!1;if(L===void 0)P=!0;else{for(var F=0;F<3;F++)for(var U=0;U<3;U++)if(!O(E,L,F,U)){P=!0;break}(!L.projection||E.projection&&E.projection.type!==L.projection.type)&&(P=!0)}return P},y.isAspectChanged=function(k){var E=this.glplot.getAspectratio(),L=i.nestedProperty(k,this.id+".aspectratio").get();return L===void 0||L.x!==E.x||L.y!==E.y||L.z!==E.z},y.saveLayout=function(k){var E,L,O,P,F,U,I=this,N=I.fullLayout,W=I.isCameraChanged(k),B=I.isAspectChanged(k),V=W||B;if(V){var q={};W&&(E=I.getCamera(),O=(L=i.nestedProperty(k,I.id+".camera")).get(),q[I.id+".camera"]=O),B&&(P=I.glplot.getAspectratio(),U=(F=i.nestedProperty(k,I.id+".aspectratio")).get(),q[I.id+".aspectratio"]=U),t.call("_storeDirectGUIEdit",k,N._preGUI,q),W&&(L.set(E),i.nestedProperty(N,I.id+".camera").set(E)),B&&(F.set(P),i.nestedProperty(N,I.id+".aspectratio").set(P),I.glplot.redraw())}return V},y.updateFx=function(k,E){var L=this,O=L.camera;if(O)if(k==="orbit")O.mode="orbit",O.keyBindingMode="rotate";else if(k==="turntable"){O.up=[0,0,1],O.mode="turntable",O.keyBindingMode="rotate";var P=L.graphDiv,F=P._fullLayout,U=L.fullSceneLayout.camera,I=U.up.x,N=U.up.y,W=U.up.z;if(W/Math.sqrt(I*I+N*N+W*W)<.999){var B=L.id+".camera.up",V={x:0,y:0,z:1},q={};q[B]=V;var ne=P.layout;t.call("_storeDirectGUIEdit",ne,F._preGUI,q),U.up=V,i.nestedProperty(ne,B).set(V)}}else O.keyBindingMode=k;L.fullSceneLayout.hovermode=E},y.toImage=function(k){var E=this;k||(k="png"),E.staticMode&&E.container.appendChild(_),E.glplot.redraw();var L=E.glplot.gl,O=L.drawingBufferWidth,P=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var F=new Uint8Array(O*P*4);L.readPixels(0,0,O,P,L.RGBA,L.UNSIGNED_BYTE,F),function(B,V,q){for(var ne=0,$=q-1;ne<$;++ne,--$)for(var K=0;K<V;++K)for(var ee=0;ee<4;++ee){var J=4*(V*ne+K)+ee,Z=4*(V*$+K)+ee,te=B[J];B[J]=B[Z],B[Z]=te}}(F,O,P),function(B,V,q){for(var ne=0;ne<q;++ne)for(var $=0;$<V;++$){var K=4*(V*ne+$),ee=B[K+3];if(ee>0)for(var J=255/ee,Z=0;Z<3;++Z)B[K+Z]=Math.min(J*B[K+Z],255)}}(F,O,P);var U=document.createElement("canvas");U.width=O,U.height=P;var I,N=U.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(O,P);switch(W.data.set(F),N.putImageData(W,0,0),k){case"jpeg":I=U.toDataURL("image/jpeg");break;case"webp":I=U.toDataURL("image/webp");break;default:I=U.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(_),I},y.setConvert=function(){for(var k=0;k<3;k++){var E=this.fullSceneLayout[d[k]];a.setConvert(E,this.fullLayout),E.setScale=i.noop}},y.make4thDimension=function(){var k=this,E=k.graphDiv._fullLayout;k._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},a.setConvert(k._mockAxis,E)},R.exports=x},52094:function(R){"use strict";R.exports=function(C,e,_,T){T=T||C.length;for(var r=new Array(T),w=0;w<T;w++)r[w]=[C[w],e[w],_[w]];return r}},64859:function(R,C,e){"use strict";var _=e(25376),T=e(85656),r=e(22548),w=e(92872),b=e(34200),c=e(66741),o=e(92880).extendFlat,t=_({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=r.defaultLine,R.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(c({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:r.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:r.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:r.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:w.newshape,activeshape:w.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},T.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:_({editType:"layoutstyle"})}}},47552:function(R,C,e){"use strict";var _=e(95376),T="1.13.4",r='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',w=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',r].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),c={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:r,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:w,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},o=_(c);R.exports={requiredVersion:T,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:c,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+T+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){var w=T.split(" "),b=w[0],c=w[1],o=_.isArrayOrTypedArray(r)?_.mean(r):r,t=.5+o/100,i=1.5+o/100,n=["",""],a=[0,0];switch(b){case"top":n[0]="top",a[1]=-i;break;case"bottom":n[0]="bottom",a[1]=i}switch(c){case"left":n[1]="right",a[0]=-t;break;case"right":n[1]="left",a[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:a}}},33688:function(R,C,e){"use strict";var _=e(3480),T=e(3400),r=T.strTranslate,w=T.strScale,b=e(84888).KY,c=e(9616),o=e(33428),t=e(43616),i=e(72736),n=e(14440),a="mapbox",s=C.constants=e(47552);function l(u){return typeof u=="string"&&(s.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}C.name=a,C.attr="subplot",C.idRoot=a,C.idRegex=C.attrRegex=T.counterRegex(a),C.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},C.layoutAttributes=e(5232),C.supplyLayoutDefaults=e(5976),C.plot=function(u){var p=u._fullLayout,f=u.calcdata,m=p._subplots[a];if(_.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var h=function(d,S){var k=d._fullLayout;if(d._context.mapboxAccessToken==="")return"";for(var E=[],L=[],O=!1,P=!1,F=0;F<S.length;F++){var U=k[S[F]],I=U.accesstoken;l(U.style)&&(I?T.pushUnique(E,I):(l(U._input.style)&&(T.error("Uses Mapbox map style, but did not set an access token."),O=!0),P=!0)),I&&T.pushUnique(L,I)}if(P){var N=O?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw T.error(N),new Error(N)}return E.length?(E.length>1&&T.warn(s.multipleTokensErrorMsg),E[0]):(L.length&&T.log(["Listed mapbox access token(s)",L.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,m);_.accessToken=h;for(var g=0;g<m.length;g++){var v=m[g],x=b(f,a,v),y=p[v],A=y._subplot;A||(A=new n(u,v),p[v]._subplot=A),A.viewInitial||(A.viewInitial={center:T.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),A.plot(x,p,u._promises)}},C.clean=function(u,p,f,m){for(var h=m._subplots[a]||[],g=0;g<h.length;g++){var v=h[g];!p[v]&&m[v]._subplot&&m[v]._subplot.destroy()}},C.toSVG=function(u){for(var p=u._fullLayout,f=p._subplots[a],m=p._size,h=0;h<f.length;h++){var g=p[f[h]],v=g.domain,x=g._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:c.svg,"xlink:href":x,x:m.l+m.w*v.x[0],y:m.t+m.h*(1-v.y[1]),width:m.w*(v.x[1]-v.x[0]),height:m.h*(v.y[1]-v.y[0]),preserveAspectRatio:"none"});var y=o.select(g._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var A=p._glimages.append("g");A.attr("transform",r(m.l+m.w*v.x[0]+10,m.t+m.h*(1-v.y[0])-31)),A.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),A.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),A.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),A.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var d=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=p._glimages.append("g"),k=S.append("text");k.text(d).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":d});var E=t.bBox(k.node()),L=m.w*(v.x[1]-v.x[0]);if(E.width>L/2){var O=d.split("|").join("<br>");k.text(O).attr("data-unformatted",O).call(i.convertToTspans,u),E=t.bBox(k.node())}k.attr("transform",r(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var P=1;E.width+6>L&&(P=L/(E.width+6));var F=[m.l+m.w*v.x[1],m.t+m.h*(1-v.y[0])];S.attr("transform",r(F[0],F[1])+w(P))}},C.updateFx=function(u){for(var p=u._fullLayout,f=p._subplots[a],m=0;m<f.length;m++)p[f[m]]._subplot.updateFx(p)}},22360:function(R,C,e){"use strict";var _=e(3400),T=e(72736).sanitizeHTML,r=e(89032),w=e(47552);function b(i,n){this.subplot=i,this.uid=i.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=w.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var c=b.prototype;function o(i){if(!i.visible)return!1;var n=i.source;if(Array.isArray(n)&&n.length>0){for(var a=0;a<n.length;a++)if(typeof n[a]!="string"||n[a].length===0)return!1;return!0}return _.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(i){var n={},a={};switch(i.type){case"circle":_.extendFlat(a,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":_.extendFlat(a,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":_.extendFlat(a,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,l=r(s.textposition,s.iconsize);_.extendFlat(n,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":s.placement}),_.extendFlat(a,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":_.extendFlat(a,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:n,paint:a}}c.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=o(i)},c.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},c.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},c.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},c.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},c.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},c.updateSource=function(i){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,o(i)){var a=function(s){var l,u=s.sourcetype,p=s.source,f={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof p=="string"?"url":"tiles":u==="raster"?(l="tiles",f.tileSize=256):u==="image"&&(l="url",f.coordinates=s.coordinates),f[l]=p,s.sourceattribution&&(f.attribution=T(s.sourceattribution)),f}(i);n.addSource(this.idSource,a)}},c.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var n=this.subplot.getMapLayers(),a=0;a<n.length;a++){var s=n[a].id;if(typeof s=="string"&&s.indexOf(w.traceLayerPrefix)===0){i=s;break}}return i},c.updateLayer=function(i){var n=this.subplot,a=t(i),s=this.lookupBelow(),l=this.findFollowingMapboxLayerId(s);this.removeLayer(),o(i)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:a.layout,paint:a.paint},l),this.layerType=i.type,this.below=s},c.updateStyle=function(i){if(o(i)){var n=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},c.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},c.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},R.exports=function(i,n,a){var s=new b(i,n);return s.update(a),s}},5232:function(R,C,e){"use strict";var _=e(3400),T=e(76308).defaultLine,r=e(86968).u,w=e(25376),b=e(52904).textposition,c=e(67824).overrideAll,o=e(31780).templatedArray,t=e(47552),i=w({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(R.exports=c({_arrayAttrRegexps:[_.counterRegex("mapbox",".layers",!0)],domain:r({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:o("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:T},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:T}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:_.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(R,C,e){"use strict";var _=e(3400),T=e(168),r=e(51272),w=e(5232);function b(o,t,i,n){i("accesstoken",n.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var a=i("bounds.west"),s=i("bounds.east"),l=i("bounds.south"),u=i("bounds.north");a!==void 0&&s!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,r(o,t,{name:"layers",handleItemDefaults:c}),t._input=o}function c(o,t){function i(u,p){return _.coerce(o,t,w.layers,u,p)}if(i("visible")){var n,a=i("sourcetype"),s=a==="raster"||a==="image";i("source"),i("sourceattribution"),a==="vector"&&i("sourcelayer"),a==="image"&&i("coordinates"),s&&(n="raster");var l=i("type",n);s&&l!=="raster"&&(l=t.type="raster",_.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),_.coerceFont(i,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),i("symbol.textposition"),i("symbol.placement"))}}R.exports=function(o,t,i){T(o,t,i,{type:"mapbox",attributes:w,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(R,C,e){"use strict";var _=e(3480),T=e(3400),r=e(27144),w=e(24040),b=e(54460),c=e(86476),o=e(93024),t=e(72760),i=t.drawMode,n=t.selectMode,a=e(22676).prepSelect,s=e(22676).clearOutline,l=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,p=e(47552),f=e(22360);function m(A,d){this.id=d,this.gd=A;var S=A._fullLayout,k=A._context;this.container=S._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var h=m.prototype;h.plot=function(A,d,S){var k,E=this,L=d[E.id];E.map&&L.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),k=E.map?new Promise(function(O,P){E.updateMap(A,d,O,P)}):new Promise(function(O,P){E.createMap(A,d,O,P)}),S.push(k)},h.createMap=function(A,d,S,k){var E=this,L=d[E.id],O=E.styleObj=v(L.style,d);E.accessToken=L.accesstoken;var P=L.bounds,F=P?[[P.west,P.south],[P.east,P.north]]:null,U=E.map=new _.Map({container:E.div,style:O.style,center:y(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,maxBounds:F,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new _.AttributionControl({compact:!0}));U._canvas.style.left="0px",U._canvas.style.top="0px",E.rejectOnError(k),E.isStatic||E.initFx(A,d);var I=[];I.push(new Promise(function(N){U.once("load",N)})),I=I.concat(r.fetchTraceGeoData(A)),Promise.all(I).then(function(){E.fillBelowLookup(A,d),E.updateData(A),E.updateLayout(d),E.resolveOnRender(S)}).catch(k)},h.updateMap=function(A,d,S,k){var E=this,L=E.map,O=d[this.id];E.rejectOnError(k);var P=[],F=v(O.style,d);JSON.stringify(E.styleObj)!==JSON.stringify(F)&&(E.styleObj=F,L.setStyle(F.style),E.traceHash={},P.push(new Promise(function(U){L.once("styledata",U)}))),P=P.concat(r.fetchTraceGeoData(A)),Promise.all(P).then(function(){E.fillBelowLookup(A,d),E.updateData(A),E.updateLayout(d),E.resolveOnRender(S)}).catch(k)},h.fillBelowLookup=function(A,d){var S,k,E=d[this.id].layers,L=this.belowLookup={},O=!1;for(S=0;S<A.length;S++){var P=A[S][0].trace,F=P._module;typeof P.below=="string"?k=P.below:F.getBelow&&(k=F.getBelow(P,this)),k===""&&(O=!0),L["trace-"+P.uid]=k||""}for(S=0;S<E.length;S++){var U=E[S];k=typeof U.below=="string"?U.below:O?"traces":"",L["layout-"+S]=k}var I,N,W={};for(I in L)W[k=L[I]]?W[k].push(I):W[k]=[I];for(k in W){var B=W[k];if(B.length>1)for(S=0;S<B.length;S++)(I=B[S]).indexOf("trace-")===0?(N=I.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):I.indexOf("layout-")===0&&(N=I.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function v(A,d){var S={};if(T.isPlainObject(A))S.id=A.id,S.style=A;else if(typeof A=="string")if(S.id=A,p.styleValuesMapbox.indexOf(A)!==-1)S.style=x(A);else if(p.stylesNonMapbox[A]){S.style=p.stylesNonMapbox[A];var k=S.style.sources["plotly-"+A],E=k?k.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=d._mapboxAccessToken)}else S.style=A;else S.id=p.styleValueDflt,S.style=x(p.styleValueDflt);return S.transition={duration:0,delay:0},S}function x(A){return p.styleUrlPrefix+A+"-"+p.styleUrlSuffix}function y(A){return[A.lon,A.lat]}h.updateData=function(A){var d,S,k,E,L=this.traceHash,O=A.slice().sort(function(N,W){return g[N[0].trace.type]-g[W[0].trace.type]});for(k=0;k<O.length;k++){var P=O[k],F=!1;(d=L[(S=P[0].trace).uid])&&(d.type===S.type?(d.update(P),F=!0):d.dispose()),!F&&S._module&&(L[S.uid]=S._module.plot(this,P))}var U=Object.keys(L);e:for(k=0;k<U.length;k++){var I=U[k];for(E=0;E<A.length;E++)if(I===(S=A[E][0].trace).uid)continue e;(d=L[I]).dispose(),delete L[I]}},h.updateLayout=function(A){var d=this.map,S=A[this.id];this.dragging||this.wheeling||(d.setCenter(y(S.center)),d.setZoom(S.zoom),d.setBearing(S.bearing),d.setPitch(S.pitch)),this.updateLayers(A),this.updateFramework(A),this.updateFx(A),this.map.resize(),this.gd._context._scrollZoom.mapbox?d.scrollZoom.enable():d.scrollZoom.disable()},h.resolveOnRender=function(A){var d=this.map;d.on("render",function S(){d.loaded()&&(d.off("render",S),setTimeout(A,10))})},h.rejectOnError=function(A){var d=this.map;function S(){A(new Error(p.mapOnErrorMsg))}d.once("error",S),d.once("style.error",S),d.once("source.error",S),d.once("tile.error",S),d.once("layer.error",S)},h.createFramework=function(A){var d=this,S=d.div=document.createElement("div");S.id=d.uid,S.style.position="absolute",d.container.appendChild(S),d.xaxis={_id:"x",c2p:function(k){return d.project(k).x}},d.yaxis={_id:"y",c2p:function(k){return d.project(k).y}},d.updateFramework(A),d.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(d.mockAxis,A)},h.initFx=function(A,d){var S=this,k=S.gd,E=S.map;function L(){o.loneUnhover(d._hoverlayer)}function O(){var P=S.getView();k.emit("plotly_relayouting",S.getViewEditsWithDerived(P))}E.on("moveend",function(P){if(S.map){var F=k._fullLayout;if(P.originalEvent||S.wheeling){var U=F[S.id];w.call("_storeDirectGUIEdit",k.layout,F._preGUI,S.getViewEdits(U));var I=S.getView();U._input.center=U.center=I.center,U._input.zoom=U.zoom=I.zoom,U._input.bearing=U.bearing=I.bearing,U._input.pitch=U.pitch=I.pitch,k.emit("plotly_relayout",S.getViewEditsWithDerived(I))}P.originalEvent&&P.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),F._rehover&&F._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(P){var F=S.div.getBoundingClientRect(),U=[P.originalEvent.offsetX,P.originalEvent.offsetY];P.target.getBoundingClientRect=function(){return F},S.xaxis.p2c=function(){return E.unproject(U).lng},S.yaxis.p2c=function(){return E.unproject(U).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===S.id&&k._fullLayout[S.id]&&o.hover(k,P,S.id)},o.hover(k,P,S.id),k._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,L()}),E.on("zoomstart",L),E.on("mouseout",function(){k._fullLayout._hoversubplot=null}),E.on("drag",O),E.on("zoom",O),E.on("dblclick",function(){var P=k._fullLayout[S.id];w.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,S.getViewEdits(P));var F=S.viewInitial;E.setCenter(y(F.center)),E.setZoom(F.zoom),E.setBearing(F.bearing),E.setPitch(F.pitch);var U=S.getView();P._input.center=P.center=U.center,P._input.zoom=P.zoom=U.zoom,P._input.bearing=P.bearing=U.bearing,P._input.pitch=P.pitch=U.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",S.getViewEditsWithDerived(U))}),S.clearOutline=function(){l(S.dragOptions),s(S.dragOptions.gd)},S.onClickInPanFn=function(P){return function(F){var U=k._fullLayout.clickmode;U.indexOf("select")>-1&&u(F.originalEvent,k,[S.xaxis],[S.yaxis],S.id,P),U.indexOf("event")>-1&&o.click(k,F.originalEvent)}}},h.updateFx=function(A){var d=this,S=d.map,k=d.gd;if(!d.isStatic){var E,L=A.dragmode;E=function(F,U){U.isRect?(F.range={})[d.id]=[P([U.xmin,U.ymin]),P([U.xmax,U.ymax])]:(F.lassoPoints={})[d.id]=U.map(P)};var O=d.dragOptions;d.dragOptions=T.extendDeep(O||{},{dragmode:A.dragmode,element:d.div,gd:k,plotinfo:{id:d.id,domain:A[d.id].domain,xaxis:d.xaxis,yaxis:d.yaxis,fillRangeItems:E},xaxes:[d.xaxis],yaxes:[d.yaxis],subplot:d.id}),S.off("click",d.onClickInPanHandler),n(L)||i(L)?(S.dragPan.disable(),S.on("zoomstart",d.clearOutline),d.dragOptions.prepFn=function(F,U,I){a(F,U,I,d.dragOptions,L)},c.init(d.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",d.clearOutline),d.div.onmousedown=null,d.div.ontouchstart=null,d.div.removeEventListener("touchstart",d.div._ontouchstart),d.onClickInPanHandler=d.onClickInPanFn(d.dragOptions),S.on("click",d.onClickInPanHandler))}function P(F){var U=d.map.unproject(F);return[U.lng,U.lat]}},h.updateFramework=function(A){var d=A[this.id].domain,S=A._size,k=this.div.style;k.width=S.w*(d.x[1]-d.x[0])+"px",k.height=S.h*(d.y[1]-d.y[0])+"px",k.left=S.l+d.x[0]*S.w+"px",k.top=S.t+(1-d.y[1])*S.h+"px",this.xaxis._offset=S.l+d.x[0]*S.w,this.xaxis._length=S.w*(d.x[1]-d.x[0]),this.yaxis._offset=S.t+(1-d.y[1])*S.h,this.yaxis._length=S.h*(d.y[1]-d.y[0])},h.updateLayers=function(A){var d,S=A[this.id].layers,k=this.layerList;if(S.length!==k.length){for(d=0;d<k.length;d++)k[d].dispose();for(k=this.layerList=[],d=0;d<S.length;d++)k.push(f(this,d,S[d]))}else for(d=0;d<S.length;d++)k[d].update(S[d])},h.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},h.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},h.setOptions=function(A,d,S){for(var k in S)this.map[d](A,k,S[k])},h.getMapLayers=function(){return this.map.getStyle().layers},h.addLayer=function(A,d){var S=this.map;if(typeof d=="string"){if(d==="")return void S.addLayer(A,d);for(var k=this.getMapLayers(),E=0;E<k.length;E++)if(d===k[E].id)return void S.addLayer(A,d);T.warn(["Trying to add layer with *below* value",d,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(A)},h.project=function(A){return this.map.project(new _.LngLat(A[0],A[1]))},h.getView=function(){var A=this.map,d=A.getCenter(),S={lon:d.lng,lat:d.lat},k=A.getCanvas(),E=parseInt(k.style.width),L=parseInt(k.style.height);return{center:S,zoom:A.getZoom(),bearing:A.getBearing(),pitch:A.getPitch(),_derived:{coordinates:[A.unproject([0,0]).toArray(),A.unproject([E,0]).toArray(),A.unproject([E,L]).toArray(),A.unproject([0,L]).toArray()]}}},h.getViewEdits=function(A){for(var d=this.id,S=["center","zoom","bearing","pitch"],k={},E=0;E<S.length;E++){var L=S[E];k[d+"."+L]=A[L]}return k},h.getViewEditsWithDerived=function(A){var d=this.id,S=this.getViewEdits(A);return S[d+"._derived"]=A._derived,S},R.exports=m},66741:function(R){"use strict";R.exports=function(C){var e=C.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(R,C,e){"use strict";var _=e(33428),T=e(94336).m_,r=e(57624).SO,w=e(38248),b=e(83160),c=e(24040),o=e(73060),t=e(31780),i=e(3400),n=e(76308),a=e(39032).BADNUM,s=e(79811),l=e(1936).clearOutline,u=e(55308),p=e(85656),f=e(16672),m=e(84888)._M,h=i.relinkPrivateKeys,g=i._,v=R.exports={};i.extendFlat(v,c),v.attributes=e(45464),v.attributes.type.values=v.allTypes,v.fontAttrs=e(25376),v.layoutAttributes=e(64859);var x=v.transformsRegistry,y=e(62460);v.executeAPICommand=y.executeAPICommand,v.computeAPICommandBindings=y.computeAPICommandBindings,v.manageCommandObserver=y.manageCommandObserver,v.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,v.redrawText=function(B){return B=i.getGraphDiv(B),new Promise(function(V){setTimeout(function(){B._fullLayout&&(c.getComponentMethod("annotations","draw")(B),c.getComponentMethod("legend","draw")(B),c.getComponentMethod("colorbar","draw")(B),V(v.previousPromises(B)))},300)})},v.resize=function(B){var V;B=i.getGraphDiv(B);var q=new Promise(function(ne,$){B&&!i.isHidden(B)||$(new Error("Resize must be passed a displayed plot div element.")),B._redrawTimer&&clearTimeout(B._redrawTimer),B._resolveResize&&(V=B._resolveResize),B._resolveResize=ne,B._redrawTimer=setTimeout(function(){if(!B.layout||B.layout.width&&B.layout.height||i.isHidden(B))ne(B);else{delete B.layout.width,delete B.layout.height;var K=B.changed;B.autoplay=!0,c.call("relayout",B,{autosize:!0}).then(function(){B.changed=K,B._resolveResize===ne&&(delete B._resolveResize,ne(B))})}},100)});return V&&V(q),q},v.previousPromises=function(B){if((B._promises||[]).length)return Promise.all(B._promises).then(function(){B._promises=[]})},v.addLinks=function(B){if(B._context.showLink||B._context.showSources){var V=B._fullLayout,q=i.ensureSingle(V._paper,"text","js-plot-link-container",function(Z){Z.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var te=_.select(this);te.append("tspan").classed("js-link-to-tool",!0),te.append("tspan").classed("js-link-spacer",!0),te.append("tspan").classed("js-sourcelinks",!0)})}),ne=q.node(),$={y:V._paper.attr("height")-9};document.body.contains(ne)&&ne.getComputedTextLength()>=V.width-20?($["text-anchor"]="start",$.x=5):($["text-anchor"]="end",$.x=V._paper.attr("width")-7),q.attr($);var K=q.select(".js-link-to-tool"),ee=q.select(".js-link-spacer"),J=q.select(".js-sourcelinks");B._context.showSources&&B._context.showSources(B),B._context.showLink&&function(Z,te){te.text("");var oe=te.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" \xBB");if(Z._context.sendData)oe.on("click",function(){v.sendDataToCloud(Z)});else{var se=window.location.pathname.split("/"),ce=window.location.search;oe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+se[2].split(".")[0]+"/"+se[1]+ce})}}(B,K),ee.text(K.text()&&J.text()?" - ":"")}},v.sendDataToCloud=function(B){var V=(window.PLOTLYENV||{}).BASE_URL||B._context.plotlyServerURL;if(V){B.emit("plotly_beforeexport");var q=_.select(B).append("div").attr("id","hiddenform").style("display","none"),ne=q.append("form").attr({action:V+"/external",method:"post",target:"_blank"});return ne.append("input").attr({type:"text",name:"data"}).node().value=v.graphJson(B,!1,"keepdata"),ne.node().submit(),q.remove(),B.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],d=["year","month","dayMonth","dayMonthYear"];function S(B,V){var q=B._context.locale;q||(q="en-US");var ne=!1,$={};function K(se){for(var ce=!0,ye=0;ye<V.length;ye++){var me=V[ye];$[me]||(se[me]?$[me]=se[me]:ce=!1)}ce&&(ne=!0)}for(var ee=0;ee<2;ee++){for(var J=B._context.locales,Z=0;Z<2;Z++){var te=(J[q]||{}).format;if(te&&(K(te),ne))break;J=c.localeRegistry}var oe=q.split("-")[0];if(ne||oe===q)break;q=oe}return ne||K(c.localeRegistry.en.format),$}function k(B,V){var q={_fullLayout:V},ne=B._id.charAt(0)==="x",$=B._mainAxis._anchorAxis,K="",ee="",J="";if($&&(J=$._mainAxis._id,K=ne?B._id+J:J+B._id),!K||!V._plots[K]){K="";for(var Z=B._counterAxes,te=0;te<Z.length;te++){var oe=Z[te],se=ne?B._id+oe:oe+B._id;ee||(ee=se);var ce=s.getFromId(q,oe);if(J&&ce.overlaying===J){K=se;break}}}return K||ee}function E(B){var V=B.transforms;if(Array.isArray(V)&&V.length)for(var q=0;q<V.length;q++){var ne=V[q],$=ne._module||x[ne.type];if($&&$.makesData)return!0}return!1}function L(B,V,q,ne){for(var $=B.transforms,K=[B],ee=0;ee<$.length;ee++){var J=$[ee],Z=x[J.type];Z&&Z.transform&&(K=Z.transform(K,{transform:J,fullTrace:B,fullData:V,layout:q,fullLayout:ne,transformIndex:ee}))}return K}function O(B){return typeof B=="string"&&B.substr(B.length-2)==="px"&&parseFloat(B)}function P(B){var V=B.margin;if(!B._size){var q=B._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),p:Math.round(V.pad)};q.w=Math.round(B.width)-q.l-q.r,q.h=Math.round(B.height)-q.t-q.b}B._pushmargin||(B._pushmargin={}),B._pushmarginIds||(B._pushmarginIds={}),B._reservedMargin||(B._reservedMargin={})}v.supplyDefaults=function(B,V){var q=V&&V.skipUpdateCalc,ne=B._fullLayout||{};if(ne._skipDefaults)delete ne._skipDefaults;else{var $,K=B._fullLayout={},ee=B.layout||{},J=B._fullData||[],Z=B._fullData=[],te=B.data||[],oe=B.calcdata||[],se=B._context||{};B._transitionData||v.createTransitionData(B),K._dfltTitle={plot:g(B,"Click to enter Plot title"),subtitle:g(B,"Click to enter Plot subtitle"),x:g(B,"Click to enter X axis title"),y:g(B,"Click to enter Y axis title"),colorbar:g(B,"Click to enter Colorscale title"),annotation:g(B,"new text")},K._traceWord=g(B,"trace");var ce=S(B,A);if(K._mapboxAccessToken=se.mapboxAccessToken,ne._initialAutoSizeIsDone){var ye=ne.width,me=ne.height;v.supplyLayoutGlobalDefaults(ee,K,ce),ee.width||(K.width=ye),ee.height||(K.height=me),v.sanitizeMargins(K)}else{v.supplyLayoutGlobalDefaults(ee,K,ce);var fe=!ee.width||!ee.height,pe=K.autosize,ge=se.autosizable;fe&&(pe||ge)?v.plotAutoSize(B,ee,K):fe&&v.sanitizeMargins(K),!pe&&fe&&(ee.width=K.width,ee.height=K.height)}K._d3locale=function(Le,je){return Le.decimal=je.charAt(0),Le.thousands=je.charAt(1),{numberFormat:function(Ge){try{Ge=r(Le).format(i.adjustFormat(Ge))}catch{return i.warnBadFormat(Ge),i.noFormat}return Ge},timeFormat:T(Le).utcFormat}}(ce,K.separators),K._extraFormat=S(B,d),K._initialAutoSizeIsDone=!0,K._dataLength=te.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var ke=K._subplots=function(){var Le,je,Ge=c.collectableSubplotTypes,Je={};if(!Ge){Ge=[];var rt=c.subplotsRegistry;for(var ot in rt){var yt=rt[ot].attr;if(yt&&(Ge.push(ot),Array.isArray(yt)))for(je=0;je<yt.length;je++)i.pushUnique(Ge,yt[je])}}for(Le=0;Le<Ge.length;Le++)Je[Ge[Le]]=[];return Je}(),Ce=K._splomAxes={x:{},y:{}},de=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=function(Le,je){var Ge,Je,rt=je.length,ot=[];for(Ge=0;Ge<Le.length;Ge++){var yt=Le[Ge]._fullInput;yt!==Je&&ot.push(yt),Je=yt}var _t=ot.length,mt=new Array(rt),tt={};function Qe(pt,vt){mt[vt]=pt,tt[pt]=1}function Dt(pt,vt){if(pt&&typeof pt=="string"&&!tt[pt])return Qe(pt,vt),!0}for(Ge=0;Ge<rt;Ge++){var zt=je[Ge].uid;typeof zt=="number"&&(zt=String(zt)),Dt(zt,Ge)||Ge<_t&&Dt(ot[Ge].uid,Ge)||Qe(i.randstr(tt),Ge)}return mt}(J,te),K._globalTransforms=(B._context||{}).globalTransforms,v.supplyDataDefaults(te,Z,ee,K);var ae=Object.keys(Ce.x),re=Object.keys(Ce.y);if(ae.length>1&&re.length>1){for(c.getComponentMethod("grid","sizeDefaults")(ee,K),$=0;$<ae.length;$++)i.pushUnique(ke.xaxis,ae[$]);for($=0;$<re.length;$++)i.pushUnique(ke.yaxis,re[$]);for(var he in de)i.pushUnique(ke.cartesian,he)}if(K._has=v._hasPlotType.bind(K),J.length===Z.length)for($=0;$<Z.length;$++)h(Z[$],J[$]);v.supplyLayoutModuleDefaults(ee,K,Z,B._transitionData);var Se=K._visibleModules,xe=[];for($=0;$<Se.length;$++){var Te=Se[$].crossTraceDefaults;Te&&i.pushUnique(xe,Te)}for($=0;$<xe.length;$++)xe[$](Z,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&ae.length>15&&re.length>15&&K.shapes.length===0&&K.images.length===0,v.linkSubplots(Z,K,J,ne),v.cleanPlot(Z,K,J,ne);var Ae=!(!ne._has||!ne._has("gl2d")),Pe=!(!K._has||!K._has("gl2d")),De=!(!ne._has||!ne._has("cartesian"))||Ae,ve=!(!K._has||!K._has("cartesian"))||Pe;De&&!ve?ne._bgLayer.remove():ve&&!De&&(K._shouldCreateBgLayer=!0),ne._zoomlayer&&!B._dragging&&l({_fullLayout:ne}),function(Le,je){var Ge,Je=[];je.meta&&(Ge=je._meta={meta:je.meta,layout:{meta:je.meta}});for(var rt=0;rt<Le.length;rt++){var ot=Le[rt];ot.meta?Je[ot.index]=ot._meta={meta:ot.meta}:je.meta&&(ot._meta={meta:je.meta}),je.meta&&(ot._meta.layout={meta:je.meta})}Je.length&&(Ge||(Ge=je._meta={}),Ge.data=Je)}(Z,K),h(K,ne),c.getComponentMethod("colorscale","crossTraceDefaults")(Z,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var we,Ee=K._tracePreGUI,Fe={};for(we in Ee)Fe[we]="old";for($=0;$<Z.length;$++)Fe[we=Z[$]._fullInput.uid]||(Ee[we]={}),Fe[we]="new";for(we in Fe)Fe[we]==="old"&&delete Ee[we];P(K),c.getComponentMethod("rangeslider","makeData")(K),q||oe.length!==Z.length||v.supplyDefaultsUpdateCalc(oe,Z)}},v.supplyDefaultsUpdateCalc=function(B,V){for(var q=0;q<V.length;q++){var ne=V[q],$=(B[q]||[])[0];if($&&$.trace){var K=$.trace;if(K._hasCalcTransform){var ee,J,Z,te=K._arrayAttrs;for(ee=0;ee<te.length;ee++)J=te[ee],Z=i.nestedProperty(K,J).get().slice(),i.nestedProperty(ne,J).set(Z)}$.trace=ne}}},v.createTransitionData=function(B){B._transitionData||(B._transitionData={}),B._transitionData._frames||(B._transitionData._frames=[]),B._transitionData._frameHash||(B._transitionData._frameHash={}),B._transitionData._counter||(B._transitionData._counter=0),B._transitionData._interruptCallbacks||(B._transitionData._interruptCallbacks=[])},v._hasPlotType=function(B){var V,q=this._basePlotModules||[];for(V=0;V<q.length;V++)if(q[V].name===B)return!0;var ne=this._modules||[];for(V=0;V<ne.length;V++){var $=ne[V].name;if($===B)return!0;var K=c.modules[$];if(K&&K.categories[B])return!0}return!1},v.cleanPlot=function(B,V,q,ne){var $,K,ee=ne._basePlotModules||[];for($=0;$<ee.length;$++){var J=ee[$];J.clean&&J.clean(B,V,q,ne)}var Z=ne._has&&ne._has("gl"),te=V._has&&V._has("gl");Z&&!te&&ne._glcontainer!==void 0&&(ne._glcontainer.selectAll(".gl-canvas").remove(),ne._glcontainer.selectAll(".no-webgl").remove(),ne._glcanvas=null);var oe=!!ne._infolayer;e:for($=0;$<q.length;$++){var se=q[$].uid;for(K=0;K<B.length;K++)if(se===B[K].uid)continue e;oe&&ne._infolayer.select(".cb"+se).remove()}},v.linkSubplots=function(B,V,q,ne){var $,K,ee=ne._plots||{},J=V._plots={},Z=V._subplots,te={_fullData:B,_fullLayout:V},oe=Z.cartesian.concat(Z.gl2d||[]);for($=0;$<oe.length;$++){var se,ce=oe[$],ye=ee[ce],me=s.getFromId(te,ce,"x"),fe=s.getFromId(te,ce,"y");for(ye?se=J[ce]=ye:(se=J[ce]={}).id=ce,me._counterAxes.push(fe._id),fe._counterAxes.push(me._id),me._subplotsWith.push(ce),fe._subplotsWith.push(ce),se.xaxis=me,se.yaxis=fe,se._hasClipOnAxisFalse=!1,K=0;K<B.length;K++){var pe=B[K];if(pe.xaxis===se.xaxis._id&&pe.yaxis===se.yaxis._id&&pe.cliponaxis===!1){se._hasClipOnAxisFalse=!0;break}}}var ge,ke=s.list(te,null,!0);for($=0;$<ke.length;$++){var Ce=null;(ge=ke[$]).overlaying&&(Ce=s.getFromId(te,ge.overlaying))&&Ce.overlaying&&(ge.overlaying=!1,Ce=null),ge._mainAxis=Ce||ge,Ce&&(ge.domain=Ce.domain.slice()),ge._anchorAxis=ge.anchor==="free"?null:s.getFromId(te,ge.anchor)}for($=0;$<ke.length;$++)if((ge=ke[$])._counterAxes.sort(s.idSort),ge._subplotsWith.sort(i.subplotSort),ge._mainSubplot=k(ge,V),ge._counterAxes.length&&(ge.spikemode&&ge.spikemode.indexOf("across")!==-1||ge.automargin&&ge.mirror&&ge.anchor!=="free"||c.getComponentMethod("rangeslider","isVisible")(ge))){var de=1,ae=0;for(K=0;K<ge._counterAxes.length;K++){var re=s.getFromId(te,ge._counterAxes[K]);de=Math.min(de,re.domain[0]),ae=Math.max(ae,re.domain[1])}de<ae&&(ge._counterDomainMin=de,ge._counterDomainMax=ae)}},v.clearExpandedTraceDefaultColors=function(B){var V,q,ne;for(q=[],(V=B._module._colorAttrs)||(B._module._colorAttrs=V=[],o.crawl(B._module.attributes,function($,K,ee,J){q[J]=K,q.length=J+1,$.valType==="color"&&$.dflt===void 0&&V.push(q.join("."))})),ne=0;ne<V.length;ne++)i.nestedProperty(B,"_input."+V[ne]).get()||i.nestedProperty(B,V[ne]).set(null)},v.supplyDataDefaults=function(B,V,q,ne){var $,K,ee,J=ne._modules,Z=ne._visibleModules,te=ne._basePlotModules,oe=0,se=0;function ce(he){V.push(he);var Se=he._module;Se&&(i.pushUnique(J,Se),he.visible===!0&&i.pushUnique(Z,Se),i.pushUnique(te,he._module.basePlotModule),oe++,he._input.visible!==!1&&se++)}ne._transformModules=[];var ye={},me=[],fe=(q.template||{}).data||{},pe=t.traceTemplater(fe);for($=0;$<B.length;$++){if(ee=B[$],(K=pe.newTrace(ee)).uid=ne._traceUids[$],v.supplyTraceDefaults(ee,K,se,ne,$),K.index=$,K._input=ee,K._expandedIndex=oe,K.transforms&&K.transforms.length)for(var ge=ee.visible!==!1&&K.visible===!1,ke=L(K,V,q,ne),Ce=0;Ce<ke.length;Ce++){var de=ke[Ce],ae={_template:K._template,type:K.type,uid:K.uid+Ce};ge&&de.visible===!1&&delete de.visible,v.supplyTraceDefaults(de,ae,oe,ne,$),h(ae,de),ae.index=$,ae._input=ee,ae._fullInput=K,ae._expandedIndex=oe,ae._expandedInput=de,ce(ae)}else K._fullInput=K,K._expandedInput=K,ce(K);c.traceIs(K,"carpetAxis")&&(ye[K.carpet]=K),c.traceIs(K,"carpetDependent")&&me.push($)}for($=0;$<me.length;$++)if((K=V[me[$]]).visible){var re=ye[K.carpet];K._carpet=re,re&&re.visible?(K.xaxis=re.xaxis,K.yaxis=re.yaxis):K.visible=!1}},v.supplyAnimationDefaults=function(B){var V;B=B||{};var q={};function ne($,K){return i.coerce(B||{},q,p,$,K)}if(ne("mode"),ne("direction"),ne("fromcurrent"),Array.isArray(B.frame))for(q.frame=[],V=0;V<B.frame.length;V++)q.frame[V]=v.supplyAnimationFrameDefaults(B.frame[V]||{});else q.frame=v.supplyAnimationFrameDefaults(B.frame||{});if(Array.isArray(B.transition))for(q.transition=[],V=0;V<B.transition.length;V++)q.transition[V]=v.supplyAnimationTransitionDefaults(B.transition[V]||{});else q.transition=v.supplyAnimationTransitionDefaults(B.transition||{});return q},v.supplyAnimationFrameDefaults=function(B){var V={};function q(ne,$){return i.coerce(B||{},V,p.frame,ne,$)}return q("duration"),q("redraw"),V},v.supplyAnimationTransitionDefaults=function(B){var V={};function q(ne,$){return i.coerce(B||{},V,p.transition,ne,$)}return q("duration"),q("easing"),V},v.supplyFrameDefaults=function(B){var V={};function q(ne,$){return i.coerce(B,V,f,ne,$)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),V},v.supplyTraceDefaults=function(B,V,q,ne,$){var K,ee=ne.colorway||n.defaults,J=ee[q%ee.length];function Z(Ce,de){return i.coerce(B,V,v.attributes,Ce,de)}var te=Z("visible");Z("type"),Z("name",ne._traceWord+" "+$),Z("uirevision",ne.uirevision);var oe=v.getModule(V);if(V._module=oe,oe){var se=oe.basePlotModule,ce=se.attr,ye=se.attributes;if(ce&&ye){var me=ne._subplots,fe="";if(te||se.name!=="gl2d"){if(Array.isArray(ce))for(K=0;K<ce.length;K++){var pe=ce[K],ge=i.coerce(B,V,ye,pe);me[pe]&&i.pushUnique(me[pe],ge),fe+=ge}else fe=i.coerce(B,V,ye,ce);me[se.name]&&i.pushUnique(me[se.name],fe)}}}if(te){if(Z("customdata"),Z("ids"),Z("meta"),c.traceIs(V,"showLegend")?(i.coerce(B,V,oe.attributes.showlegend?oe.attributes:v.attributes,"showlegend"),Z("legend"),Z("legendwidth"),Z("legendgroup"),Z("legendgrouptitle.text"),Z("legendrank"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,oe&&oe.supplyDefaults(B,V,J,ne),c.traceIs(V,"noOpacity")||Z("opacity"),c.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),c.traceIs(V,"noHover")||(V.hovertemplate||i.coerceHoverinfo(B,V,ne),V.type!=="parcats"&&c.getComponentMethod("fx","supplyDefaults")(B,V,J,ne)),oe&&oe.selectPoints){var ke=Z("selectedpoints");i.isTypedArray(ke)&&(V.selectedpoints=Array.from(ke))}v.supplyTransformDefaults(B,V,ne)}return V},v.hasMakesDataTransform=E,v.supplyTransformDefaults=function(B,V,q){if(V._length||E(B)){var ne=q._globalTransforms||[],$=q._transformModules||[];if(Array.isArray(B.transforms)||ne.length!==0)for(var K=B.transforms||[],ee=ne.concat(K),J=V.transforms=[],Z=0;Z<ee.length;Z++){var te,oe=ee[Z],se=oe.type,ce=x[se],ye=!(oe._module&&oe._module===ce),me=ce&&typeof ce.transform=="function";ce||i.warn("Unrecognized transform type "+se+"."),ce&&ce.supplyDefaults&&(ye||me)?((te=ce.supplyDefaults(oe,V,q,B)).type=se,te._module=ce,i.pushUnique($,ce)):te=i.extendFlat({},oe),J.push(te)}}},v.supplyLayoutGlobalDefaults=function(B,V,q){function ne(oe,se){return i.coerce(B,V,v.layoutAttributes,oe,se)}var $=B.template;i.isPlainObject($)&&(V.template=$,V._template=$.layout,V._dataTemplate=$.data),ne("autotypenumbers");var K=i.coerceFont(ne,"font"),ee=K.size;i.coerceFont(ne,"title.font",K,{overrideDflt:{size:Math.round(1.4*ee)}}),ne("title.text",V._dfltTitle.plot),ne("title.xref");var J=ne("title.yref");ne("title.pad.t"),ne("title.pad.r"),ne("title.pad.b"),ne("title.pad.l");var Z=ne("title.automargin");ne("title.x"),ne("title.xanchor"),ne("title.y"),ne("title.yanchor"),ne("title.subtitle.text",V._dfltTitle.subtitle),i.coerceFont(ne,"title.subtitle.font",K,{overrideDflt:{size:Math.round(.7*V.title.font.size)}}),Z&&(J==="paper"&&(V.title.y!==0&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y===0?"top":"bottom")),J==="container"&&(V.title.y==="auto"&&(V.title.y=1),V.title.yanchor==="auto"&&(V.title.yanchor=V.title.y<.5?"bottom":"top"))),ne("uniformtext.mode")&&ne("uniformtext.minsize"),ne("autosize",!(B.width&&B.height)),ne("width"),ne("height"),ne("minreducedwidth"),ne("minreducedheight"),ne("margin.l"),ne("margin.r"),ne("margin.t"),ne("margin.b"),ne("margin.pad"),ne("margin.autoexpand"),B.width&&B.height&&v.sanitizeMargins(V),c.getComponentMethod("grid","sizeDefaults")(B,V),ne("paper_bgcolor"),ne("separators",q.decimal+q.thousands),ne("hidesources"),ne("colorway"),ne("datarevision");var te=ne("uirevision");ne("editrevision",te),ne("selectionrevision",te),c.getComponentMethod("modebar","supplyLayoutDefaults")(B,V),c.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(B,V,ne),c.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(B,V,ne),ne("meta"),i.isPlainObject(B.transition)&&(ne("transition.duration"),ne("transition.easing"),ne("transition.ordering")),c.getComponentMethod("calendars","handleDefaults")(B,V,"calendar"),c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(B,V,ne),i.coerce(B,V,u,"scattermode")},v.plotAutoSize=function(B,V,q){var ne,$,K=B._context||{},ee=K.frameMargins,J=i.isPlotDiv(B);if(J&&B.emit("plotly_autosize"),K.fillFrame)ne=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var Z=J?window.getComputedStyle(B):{};if(ne=O(Z.width)||O(Z.maxWidth)||q.width,$=O(Z.height)||O(Z.maxHeight)||q.height,w(ee)&&ee>0){var te=1-2*ee;ne=Math.round(te*ne),$=Math.round(te*$)}}var oe=v.layoutAttributes.width.min,se=v.layoutAttributes.height.min;ne<oe&&(ne=oe),$<se&&($=se);var ce=!V.width&&Math.abs(q.width-ne)>1,ye=!V.height&&Math.abs(q.height-$)>1;(ye||ce)&&(ce&&(q.width=ne),ye&&(q.height=$)),B._initialAutoSize||(B._initialAutoSize={width:ne,height:$}),v.sanitizeMargins(q)},v.supplyLayoutModuleDefaults=function(B,V,q,ne){var $,K,ee,J=c.componentsRegistry,Z=V._basePlotModules,te=c.subplotsRegistry.cartesian;for($ in J)(ee=J[$]).includeBasePlot&&ee.includeBasePlot(B,V);for(var oe in Z.length||Z.push(te),V._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(B,V),te.finalizeSubplots(B,V)),V._subplots)V._subplots[oe].sort(i.subplotSort);for(K=0;K<Z.length;K++)(ee=Z[K]).supplyLayoutDefaults&&ee.supplyLayoutDefaults(B,V,q);var se=V._modules;for(K=0;K<se.length;K++)(ee=se[K]).supplyLayoutDefaults&&ee.supplyLayoutDefaults(B,V,q);var ce=V._transformModules;for(K=0;K<ce.length;K++)(ee=ce[K]).supplyLayoutDefaults&&ee.supplyLayoutDefaults(B,V,q,ne);for($ in J)(ee=J[$]).supplyLayoutDefaults&&ee.supplyLayoutDefaults(B,V,q)},v.purge=function(B){var V=B._fullLayout||{};V._glcontainer!==void 0&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null),V._modeBar&&V._modeBar.destroy(),B._transitionData&&(B._transitionData._interruptCallbacks&&(B._transitionData._interruptCallbacks.length=0),B._transitionData._animationRaf&&window.cancelAnimationFrame(B._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(B),delete B.data,delete B.layout,delete B._fullData,delete B._fullLayout,delete B.calcdata,delete B.empty,delete B.fid,delete B.undoqueue,delete B.undonum,delete B.autoplay,delete B.changed,delete B._promises,delete B._redrawTimer,delete B._hmlumcount,delete B._hmpixcount,delete B._transitionData,delete B._transitioning,delete B._initialAutoSize,delete B._transitioningWithDuration,delete B._dragging,delete B._dragged,delete B._dragdata,delete B._hoverdata,delete B._snapshotInProgress,delete B._editing,delete B._mouseDownTime,delete B._legendMouseDownTime,B.removeAllListeners&&B.removeAllListeners()},v.style=function(B){var V,q=B._fullLayout._visibleModules,ne=[];for(V=0;V<q.length;V++){var $=q[V];$.style&&i.pushUnique(ne,$.style)}for(V=0;V<ne.length;V++)ne[V](B)},v.sanitizeMargins=function(B){if(B&&B.margin){var V,q=B.width,ne=B.height,$=B.margin,K=q-($.l+$.r),ee=ne-($.t+$.b);K<0&&(V=(q-1)/($.l+$.r),$.l=Math.floor(V*$.l),$.r=Math.floor(V*$.r)),ee<0&&(V=(ne-1)/($.t+$.b),$.t=Math.floor(V*$.t),$.b=Math.floor(V*$.b))}},v.clearAutoMarginIds=function(B){B._fullLayout._pushmarginIds={}},v.allowAutoMargin=function(B,V){B._fullLayout._pushmarginIds[V]=1},v.autoMargin=function(B,V,q){var ne=B._fullLayout,$=ne.width,K=ne.height,ee=ne.margin,J=ne.minreducedwidth,Z=ne.minreducedheight,te=i.constrain($-ee.l-ee.r,2,J),oe=i.constrain(K-ee.t-ee.b,2,Z),se=Math.max(0,$-te),ce=Math.max(0,K-oe),ye=ne._pushmargin,me=ne._pushmarginIds;if(ee.autoexpand!==!1){if(q){var fe=q.pad;if(fe===void 0&&(fe=Math.min(12,ee.l,ee.r,ee.t,ee.b)),se){var pe=(q.l+q.r)/se;pe>1&&(q.l/=pe,q.r/=pe)}if(ce){var ge=(q.t+q.b)/ce;ge>1&&(q.t/=ge,q.b/=ge)}var ke=q.xl!==void 0?q.xl:q.x,Ce=q.xr!==void 0?q.xr:q.x,de=q.yt!==void 0?q.yt:q.y,ae=q.yb!==void 0?q.yb:q.y;ye[V]={l:{val:ke,size:q.l+fe},r:{val:Ce,size:q.r+fe},b:{val:ae,size:q.b+fe},t:{val:de,size:q.t+fe}},me[V]=1}else delete ye[V],delete me[V];if(!ne._replotting)return v.doAutoMargin(B)}},v.doAutoMargin=function(B){var V=B._fullLayout,q=V.width,ne=V.height;V._size||(V._size={}),P(V);var $=V._size,K=V.margin,ee={t:0,b:0,l:0,r:0},J=i.extendFlat({},$),Z=K.l,te=K.r,oe=K.t,se=K.b,ce=V._pushmargin,ye=V._pushmarginIds,me=V.minreducedwidth,fe=V.minreducedheight;if(K.autoexpand!==!1){for(var pe in ce)ye[pe]||delete ce[pe];var ge=B._fullLayout._reservedMargin;for(var ke in ge)for(var Ce in ge[ke]){var de=ge[ke][Ce];ee[Ce]=Math.max(ee[Ce],de)}for(var ae in ce.base={l:{val:0,size:Z},r:{val:1,size:te},t:{val:1,size:oe},b:{val:0,size:se}},ee){var re=0;for(var he in ce)he!=="base"&&w(ce[he][ae].size)&&(re=ce[he][ae].size>re?ce[he][ae].size:re);var Se=Math.max(0,K[ae]-re);ee[ae]=Math.max(0,ee[ae]-Se)}for(var xe in ce){var Te=ce[xe].l||{},Ae=ce[xe].b||{},Pe=Te.val,De=Te.size,ve=Ae.val,we=Ae.size,Ee=q-ee.r-ee.l,Fe=ne-ee.t-ee.b;for(var Le in ce){if(w(De)&&ce[Le].r){var je=ce[Le].r.val,Ge=ce[Le].r.size;if(je>Pe){var Je=(De*je+(Ge-Ee)*Pe)/(je-Pe),rt=(Ge*(1-Pe)+(De-Ee)*(1-je))/(je-Pe);Je+rt>Z+te&&(Z=Je,te=rt)}}if(w(we)&&ce[Le].t){var ot=ce[Le].t.val,yt=ce[Le].t.size;if(ot>ve){var _t=(we*ot+(yt-Fe)*ve)/(ot-ve),mt=(yt*(1-ve)+(we-Fe)*(1-ot))/(ot-ve);_t+mt>se+oe&&(se=_t,oe=mt)}}}}}var tt=i.constrain(q-K.l-K.r,2,me),Qe=i.constrain(ne-K.t-K.b,2,fe),Dt=Math.max(0,q-tt),zt=Math.max(0,ne-Qe);if(Dt){var pt=(Z+te)/Dt;pt>1&&(Z/=pt,te/=pt)}if(zt){var vt=(se+oe)/zt;vt>1&&(se/=vt,oe/=vt)}if($.l=Math.round(Z)+ee.l,$.r=Math.round(te)+ee.r,$.t=Math.round(oe)+ee.t,$.b=Math.round(se)+ee.b,$.p=Math.round(K.pad),$.w=Math.round(q)-$.l-$.r,$.h=Math.round(ne)-$.t-$.b,!V._replotting&&(v.didMarginChange(J,$)||function(Ze){if("_redrawFromAutoMarginCount"in Ze._fullLayout)return!1;var Ne=s.list(Ze,"",!0);for(var Xe in Ne)if(Ne[Xe].autoshift||Ne[Xe].shift)return!0;return!1}(B))){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;var We=3*(1+Object.keys(ye).length);if(V._redrawFromAutoMarginCount<We)return c.call("_doPlot",B);V._size=J,i.warn("Too many auto-margin redraws.")}(function(Ze){var Ne=s.list(Ze,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Xe){for(var st=0;st<Ne.length;st++){var lt=Ne[st][Xe];lt&&lt()}})})(B)};var F=["l","r","t","b","p","w","h"];function U(B,V,q){var ne=!1,$=[v.previousPromises,function(){if(B._transitionData)return B._transitioning=!1,function(ee){var J=Promise.resolve();if(!ee)return J;for(;ee.length;)J=J.then(ee.shift());return J}(B._transitionData._interruptCallbacks)},q.prepareFn,v.rehover,v.reselect,function(){return B.emit("plotly_transitioning",[]),new Promise(function(ee){B._transitioning=!0,V.duration>0&&(B._transitioningWithDuration=!0),B._transitionData._interruptCallbacks.push(function(){ne=!0}),q.redraw&&B._transitionData._interruptCallbacks.push(function(){return c.call("redraw",B)}),B._transitionData._interruptCallbacks.push(function(){B.emit("plotly_transitioninterrupted",[])});var J=0,Z=0;function te(){return J++,function(){var oe;Z++,ne||Z!==J||(oe=ee,B._transitionData&&(function(se){if(se)for(;se.length;)se.shift()}(B._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return c.call("redraw",B)}).then(function(){B._transitioning=!1,B._transitioningWithDuration=!1,B.emit("plotly_transitioned",[])}).then(oe)))}}q.runFn(te),setTimeout(te())})}],K=i.syncOrAsync($,B);return K&&K.then||(K=Promise.resolve()),K.then(function(){return B})}v.didMarginChange=function(B,V){for(var q=0;q<F.length;q++){var ne=F[q],$=B[ne],K=V[ne];if(!w($)||Math.abs(K-$)>1)return!0}return!1},v.graphJson=function(B,V,q,ne,$,K){($&&V&&!B._fullData||$&&!V&&!B._fullLayout)&&v.supplyDefaults(B);var ee=$?B._fullData:B.data,J=$?B._fullLayout:B.layout,Z=(B._transitionData||{})._frames;function te(ce,ye){if(typeof ce=="function")return ye?"_function_":null;if(i.isPlainObject(ce)){var me,fe={};return Object.keys(ce).sort().forEach(function(Ce){if(["_","["].indexOf(Ce.charAt(0))===-1)if(typeof ce[Ce]!="function"){if(q==="keepdata"){if(Ce.substr(Ce.length-3)==="src")return}else if(q==="keepstream"){if(typeof(me=ce[Ce+"src"])=="string"&&me.indexOf(":")>0&&!i.isPlainObject(ce.stream))return}else if(q!=="keepall"&&typeof(me=ce[Ce+"src"])=="string"&&me.indexOf(":")>0)return;fe[Ce]=te(ce[Ce],ye)}else ye&&(fe[Ce]="_function")}),fe}var pe=Array.isArray(ce),ge=i.isTypedArray(ce);if((pe||ge)&&ce.dtype&&ce.shape){var ke=ce.bdata;return te({dtype:ce.dtype,shape:ce.shape,bdata:i.isArrayBuffer(ke)?b.encode(ke):ke},ye)}return pe?ce.map(function(Ce){return te(Ce,ye)}):ge?i.simpleMap(ce,i.identity):i.isJSDate(ce)?i.ms2DateTimeLocal(+ce):ce}var oe={data:(ee||[]).map(function(ce){var ye=te(ce);return V&&delete ye.fit,ye})};if(!V&&(oe.layout=te(J),$)){var se=J._size;oe.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return Z&&(oe.frames=te(Z)),K&&(oe.config=te(B._context,!0)),ne==="object"?oe:JSON.stringify(oe)},v.modifyFrames=function(B,V){var q,ne,$,K=B._transitionData._frames,ee=B._transitionData._frameHash;for(q=0;q<V.length;q++)switch((ne=V[q]).type){case"replace":$=ne.value;var J=(K[ne.index]||{}).name,Z=$.name;K[ne.index]=ee[Z]=$,Z!==J&&(delete ee[J],ee[Z]=$);break;case"insert":ee[($=ne.value).name]=$,K.splice(ne.index,0,$);break;case"delete":delete ee[($=K[ne.index]).name],K.splice(ne.index,1)}return Promise.resolve()},v.computeFrame=function(B,V){var q,ne,$,K,ee=B._transitionData._frameHash;if(!V)throw new Error("computeFrame must be given a string frame name");var J=ee[V.toString()];if(!J)return!1;for(var Z=[J],te=[J.name];J.baseframe&&(J=ee[J.baseframe.toString()])&&te.indexOf(J.name)===-1;)Z.push(J),te.push(J.name);for(var oe={};J=Z.pop();)if(J.layout&&(oe.layout=v.extendLayout(oe.layout,J.layout)),J.data){if(oe.data||(oe.data=[]),!(ne=J.traces))for(ne=[],q=0;q<J.data.length;q++)ne[q]=q;for(oe.traces||(oe.traces=[]),q=0;q<J.data.length;q++)($=ne[q])!=null&&((K=oe.traces.indexOf($))===-1&&(K=oe.data.length,oe.traces[K]=$),oe.data[K]=v.extendTrace(oe.data[K],J.data[q]))}return oe},v.recomputeFrameHash=function(B){for(var V=B._transitionData._frameHash={},q=B._transitionData._frames,ne=0;ne<q.length;ne++){var $=q[ne];$&&$.name&&(V[$.name]=$)}},v.extendObjectWithContainers=function(B,V,q){var ne,$,K,ee,J,Z,te,oe=i.extendDeepNoArrays({},V||{}),se=i.expandObjectPaths(oe),ce={};if(q&&q.length)for(K=0;K<q.length;K++)($=(ne=i.nestedProperty(se,q[K])).get())===void 0?i.nestedProperty(ce,q[K]).set(null):(ne.set(null),i.nestedProperty(ce,q[K]).set($));if(B=i.extendDeepNoArrays(B||{},se),q&&q.length){for(K=0;K<q.length;K++)if(Z=i.nestedProperty(ce,q[K]).get()){for(te=(J=i.nestedProperty(B,q[K])).get(),Array.isArray(te)||(te=[],J.set(te)),ee=0;ee<Z.length;ee++){var ye=Z[ee];te[ee]=ye===null?null:v.extendObjectWithContainers(te[ee],ye)}J.set(te)}}return B},v.dataArrayContainers=["transforms","dimensions"],v.layoutArrayContainers=c.layoutArrayContainers,v.extendTrace=function(B,V){return v.extendObjectWithContainers(B,V,v.dataArrayContainers)},v.extendLayout=function(B,V){return v.extendObjectWithContainers(B,V,v.layoutArrayContainers)},v.transition=function(B,V,q,ne,$,K){var ee={redraw:$.redraw},J={},Z=[];return ee.prepareFn=function(){for(var te=Array.isArray(V)?V.length:0,oe=ne.slice(0,te),se=0;se<oe.length;se++){var ce=oe[se],ye=B._fullData[ce]._module;if(ye){if(ye.animatable){var me=ye.basePlotModule.name;J[me]||(J[me]=[]),J[me].push(ce)}B.data[oe[se]]=v.extendTrace(B.data[oe[se]],V[se])}}var fe=i.expandObjectPaths(i.extendDeepNoArrays({},q)),pe=/^[xy]axis[0-9]*$/;for(var ge in fe)pe.test(ge)&&delete fe[ge].range;v.extendLayout(B.layout,fe),delete B.calcdata,v.supplyDefaults(B),v.doCalcdata(B);var ke=i.expandObjectPaths(q);if(ke){var Ce=B._fullLayout._plots;for(var de in Ce){var ae=Ce[de],re=ae.xaxis,he=ae.yaxis,Se=re.range.slice(),xe=he.range.slice(),Te=null,Ae=null,Pe=null,De=null;Array.isArray(ke[re._name+".range"])?Te=ke[re._name+".range"].slice():Array.isArray((ke[re._name]||{}).range)&&(Te=ke[re._name].range.slice()),Array.isArray(ke[he._name+".range"])?Ae=ke[he._name+".range"].slice():Array.isArray((ke[he._name]||{}).range)&&(Ae=ke[he._name].range.slice()),Se&&Te&&(re.r2l(Se[0])!==re.r2l(Te[0])||re.r2l(Se[1])!==re.r2l(Te[1]))&&(Pe={xr0:Se,xr1:Te}),xe&&Ae&&(he.r2l(xe[0])!==he.r2l(Ae[0])||he.r2l(xe[1])!==he.r2l(Ae[1]))&&(De={yr0:xe,yr1:Ae}),(Pe||De)&&Z.push(i.extendFlat({plotinfo:ae},Pe,De))}}return Promise.resolve()},ee.runFn=function(te){var oe,se,ce=B._fullLayout._basePlotModules,ye=Z.length;if(q)for(se=0;se<ce.length;se++)ce[se].transitionAxes&&ce[se].transitionAxes(B,Z,K,te);for(var me in ye?((oe=i.extendFlat({},K)).duration=0,delete J.cartesian):oe=K,J){var fe=J[me];B._fullData[fe[0]]._module.basePlotModule.plot(B,fe,oe,te)}},U(B,K,ee)},v.transitionFromReact=function(B,V,q,ne){var $=B._fullLayout,K=$.transition,ee={},J=[];return ee.prepareFn=function(){var Z=$._plots;for(var te in ee.redraw=!1,V.anim==="some"&&(ee.redraw=!0),q.anim==="some"&&(ee.redraw=!0),Z){var oe=Z[te],se=oe.xaxis,ce=oe.yaxis,ye=ne[se._name].range.slice(),me=ne[ce._name].range.slice(),fe=se.range.slice(),pe=ce.range.slice();se.setScale(),ce.setScale();var ge=null,ke=null;se.r2l(ye[0])===se.r2l(fe[0])&&se.r2l(ye[1])===se.r2l(fe[1])||(ge={xr0:ye,xr1:fe}),ce.r2l(me[0])===ce.r2l(pe[0])&&ce.r2l(me[1])===ce.r2l(pe[1])||(ke={yr0:me,yr1:pe}),(ge||ke)&&J.push(i.extendFlat({plotinfo:oe},ge,ke))}return Promise.resolve()},ee.runFn=function(Z){for(var te,oe,se,ce=B._fullData,ye=B._fullLayout._basePlotModules,me=[],fe=0;fe<ce.length;fe++)me.push(fe);function pe(){if(B._fullLayout)for(var ke=0;ke<ye.length;ke++)ye[ke].transitionAxes&&ye[ke].transitionAxes(B,J,te,Z)}function ge(){if(B._fullLayout)for(var ke=0;ke<ye.length;ke++)ye[ke].plot(B,se,oe,Z)}J.length&&V.anim?K.ordering==="traces first"?(te=i.extendFlat({},K,{duration:0}),se=me,oe=K,setTimeout(pe,K.duration),ge()):(te=K,se=null,oe=i.extendFlat({},K,{duration:0}),setTimeout(ge,te.duration),pe()):J.length?(te=K,pe()):V.anim&&(se=me,oe=K,ge())},U(B,K,ee)},v.doCalcdata=function(B,V){var q,ne,$,K,ee=s.list(B),J=B._fullData,Z=B._fullLayout,te=new Array(J.length),oe=(B.calcdata||[]).slice();for(B.calcdata=te,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},B._hmpixcount=0,B._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},$=0;$<J.length;$++)Array.isArray(V)&&V.indexOf($)===-1&&(te[$]=oe[$]);for($=0;$<J.length;$++)(q=J[$])._arrayAttrs=o.findArrayAttributes(q),q._extremes={};var se=Z._subplots.polar||[];for($=0;$<se.length;$++)ee.push(Z[se[$]].radialaxis,Z[se[$]].angularaxis);for(var ce in Z._colorAxes){var ye=Z[ce];ye.cauto!==!1&&(delete ye.cmin,delete ye.cmax)}var me=!1;function fe(ke){if(q=J[ke],ne=q._module,q.visible===!0&&q.transforms){if(ne&&ne.calc){var Ce=ne.calc(B,q);Ce[0]&&Ce[0].t&&Ce[0].t._scene&&delete Ce[0].t._scene.dirty}for(K=0;K<q.transforms.length;K++){var de=q.transforms[K];(ne=x[de.type])&&ne.calcTransform&&(q._hasCalcTransform=!0,me=!0,ne.calcTransform(B,q,de))}}}function pe(ke,Ce){if(q=J[ke],!!(ne=q._module).isContainer===Ce){var de=[];if(q.visible===!0&&q._length!==0){delete q._indexToPoints;var ae=q.transforms||[];for(K=ae.length-1;K>=0;K--)if(ae[K].enabled){q._indexToPoints=ae[K]._indexToPoints;break}ne&&ne.calc&&(de=ne.calc(B,q))}Array.isArray(de)&&de[0]||(de=[{x:a,y:a}]),de[0].t||(de[0].t={}),de[0].trace=q,te[ke]=de}}for(N(ee,J,Z),$=0;$<J.length;$++)pe($,!0);for($=0;$<J.length;$++)fe($);for(me&&N(ee,J,Z),$=0;$<J.length;$++)pe($,!0);for($=0;$<J.length;$++)pe($,!1);W(B);var ge=function(ke,Ce){var de,ae,re,he,Se,xe=[];function Te(Xe,st,lt){var xt=st._id.charAt(0);if(Xe==="histogram2dcontour"){var bt=st._counterAxes[0],Ve=s.getFromId(Ce,bt),Be=xt==="x"||bt==="x"&&Ve.type==="category",at=xt==="y"||bt==="y"&&Ve.type==="category";return function(ht,dt){return ht===0||dt===0||Be&&ht===lt[dt].length-1||at&&dt===lt.length-1?-1:(xt==="y"?dt:ht)-1}}return function(ht,dt){return xt==="y"?dt:ht}}var Ae={min:function(Xe){return i.aggNums(Math.min,null,Xe)},max:function(Xe){return i.aggNums(Math.max,null,Xe)},sum:function(Xe){return i.aggNums(function(st,lt){return st+lt},null,Xe)},total:function(Xe){return i.aggNums(function(st,lt){return st+lt},null,Xe)},mean:function(Xe){return i.mean(Xe)},"geometric mean":function(Xe){return i.geometricMean(Xe)},median:function(Xe){return i.median(Xe)}};function Pe(Xe,st){return Xe[1]-st[1]}function De(Xe,st){return st[1]-Xe[1]}for(de=0;de<ke.length;de++){var ve=ke[de];if(ve.type==="category"){var we=ve.categoryorder.match(I);if(we){var Ee=we[1],Fe=we[2],Le=ve._id.charAt(0),je=Le==="x",Ge=[];for(ae=0;ae<ve._categories.length;ae++)Ge.push([ve._categories[ae],[]]);for(ae=0;ae<ve._traceIndices.length;ae++){var Je=ve._traceIndices[ae],rt=Ce._fullData[Je];if(rt.visible===!0){var ot=rt.type;c.traceIs(rt,"histogram")&&(delete rt._xautoBinFinished,delete rt._yautoBinFinished);var yt=ot==="splom",_t=ot==="scattergl",mt=Ce.calcdata[Je];for(re=0;re<mt.length;re++){var tt,Qe,Dt=mt[re];if(yt){var zt=rt._axesDim[ve._id];if(!je){var pt=rt._diag[zt][0];pt&&(ve=Ce._fullLayout[s.id2name(pt)])}var vt=Dt.trace.dimensions[zt].values;for(he=0;he<vt.length;he++)for(tt=ve._categoriesMap[vt[he]],Se=0;Se<Dt.trace.dimensions.length;Se++)if(Se!==zt){var We=Dt.trace.dimensions[Se];Ge[tt][1].push(We.values[he])}}else if(_t){for(he=0;he<Dt.t.x.length;he++)je?(tt=Dt.t.x[he],Qe=Dt.t.y[he]):(tt=Dt.t.y[he],Qe=Dt.t.x[he]),Ge[tt][1].push(Qe);Dt.t&&Dt.t._scene&&delete Dt.t._scene.dirty}else if(Dt.hasOwnProperty("z")){Qe=Dt.z;var Ze=Te(rt.type,ve,Qe);for(he=0;he<Qe.length;he++)for(Se=0;Se<Qe[he].length;Se++)(tt=Ze(Se,he))+1&&Ge[tt][1].push(Qe[he][Se])}else for((tt=Dt.p)===void 0&&(tt=Dt[Le]),(Qe=Dt.s)===void 0&&(Qe=Dt.v),Qe===void 0&&(Qe=je?Dt.y:Dt.x),Array.isArray(Qe)||(Qe=Qe===void 0?[]:[Qe]),he=0;he<Qe.length;he++)Ge[tt][1].push(Qe[he])}}}ve._categoriesValue=Ge;var Ne=[];for(ae=0;ae<Ge.length;ae++)Ne.push([Ge[ae][0],Ae[Ee](Ge[ae][1])]);Ne.sort(Fe==="descending"?De:Pe),ve._categoriesAggregatedValue=Ne,ve._initialCategories=Ne.map(function(Xe){return Xe[0]}),xe=xe.concat(ve.sortByInitialCategories())}}}return xe}(ee,B);if(ge.length){for(Z._numBoxes=0,Z._numViolins=0,$=0;$<ge.length;$++)pe(ge[$],!0);for($=0;$<ge.length;$++)pe(ge[$],!1);W(B)}c.getComponentMethod("fx","calc")(B),c.getComponentMethod("errorbars","calc")(B)};var I=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function N(B,V,q){var ne={};function $(Z){Z.clearCalc(),Z.type==="multicategory"&&Z.setupMultiCategory(V),ne[Z._id]=1}i.simpleMap(B,$);for(var K=q._axisMatchGroups||[],ee=0;ee<K.length;ee++)for(var J in K[ee])ne[J]||$(q[s.id2name(J)])}function W(B){var V,q,ne,$=B._fullLayout,K=$._visibleModules,ee={};for(q=0;q<K.length;q++){var J=K[q],Z=J.crossTraceCalc;if(Z){var te=J.basePlotModule.name;ee[te]?i.pushUnique(ee[te],Z):ee[te]=[Z]}}for(ne in ee){var oe=ee[ne],se=$._subplots[ne];if(Array.isArray(se))for(V=0;V<se.length;V++){var ce=se[V],ye=ne==="cartesian"?$._plots[ce]:$[ce];for(q=0;q<oe.length;q++)oe[q](B,ye,ce)}else for(q=0;q<oe.length;q++)oe[q](B)}}v.rehover=function(B){B._fullLayout._rehover&&B._fullLayout._rehover()},v.redrag=function(B){B._fullLayout._redrag&&B._fullLayout._redrag()},v.reselect=function(B){var V=B._fullLayout,q=(B.layout||{}).selections,ne=V._previousSelections;V._previousSelections=q;var $=V._reselect||JSON.stringify(q)!==JSON.stringify(ne);c.getComponentMethod("selections","reselect")(B,$)},v.generalUpdatePerTraceModule=function(B,V,q,ne){var $,K=V.traceHash,ee={};for($=0;$<q.length;$++){var J=q[$],Z=J[0].trace;Z.visible&&(ee[Z.type]=ee[Z.type]||[],ee[Z.type].push(J))}for(var te in K)if(!ee[te]){var oe=K[te][0];oe[0].trace.visible=!1,ee[te]=[oe]}for(var se in ee){var ce=ee[se];ce[0][0].trace._module.plot(B,V,i.filterVisible(ce),ne)}V.traceHash=ee},v.plotBasePlot=function(B,V,q,ne,$){var K=c.getModule(B),ee=m(V.calcdata,K)[0];K.plot(V,ee,ne,$)},v.cleanBasePlot=function(B,V,q,ne,$){var K=$._has&&$._has(B),ee=q._has&&q._has(B);K&&!ee&&$["_"+B+"layer"].selectAll("g.trace").remove()}},39360:function(R){"use strict";R.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(R,C,e){"use strict";var _=e(3400),T=e(92065).tester,r=_.findIndexOfMin,w=_.isAngleInsideSector,b=_.angleDelta,c=_.angleDist;function o(a,s,l,u){var p,f,m=u[0],h=u[1],g=i(Math.sin(s)-Math.sin(a)),v=i(Math.cos(s)-Math.cos(a)),x=Math.tan(l),y=i(1/x),A=g/v,d=h-A*m;return y?g&&v?f=x*(p=d/(x-A)):v?(p=h*y,f=h):(p=m,f=m*x):g&&v?(p=0,f=d):v?(p=0,f=h):p=f=NaN,[p,f]}function t(a,s,l,u){return _.isFullCircle([s,l])?function(p,f){var m,h=f.length,g=new Array(h+1);for(m=0;m<h;m++){var v=f[m];g[m]=[p*Math.cos(v),p*Math.sin(v)]}return g[m]=g[0].slice(),g}(a,u):function(p,f,m,h){var g,v,x=h.length,y=[];function A(U){return[p*Math.cos(U),p*Math.sin(U)]}function d(U,I,N){return o(U,I,N,A(U))}function S(U){return _.mod(U,x)}function k(U){return w(U,[f,m])}var E=r(h,function(U){return k(U)?c(U,f):1/0}),L=d(h[E],h[S(E-1)],f);for(y.push(L),g=E,v=0;v<x;g++,v++){var O=h[S(g)];if(!k(O))break;y.push(A(O))}var P=r(h,function(U){return k(U)?c(U,m):1/0}),F=d(h[P],h[S(P+1)],m);return y.push(F),y.push([0,0]),y.push(y[0].slice()),y}(a,s,l,u)}function i(a){return Math.abs(a)>1e-10?a:0}function n(a,s,l){s=s||0,l=l||0;for(var u=a.length,p=new Array(u),f=0;f<u;f++){var m=a[f];p[f]=[s+m[0],l-m[1]]}return p}R.exports={isPtInsidePolygon:function(a,s,l,u,p){if(!w(s,u))return!1;var f,m;l[0]<l[1]?(f=l[0],m=l[1]):(f=l[1],m=l[0]);var h=T(t(f,u[0],u[1],p)),g=T(t(m,u[0],u[1],p)),v=[a*Math.cos(s),a*Math.sin(s)];return g.contains(v)&&!h.contains(v)},findPolygonOffset:function(a,s,l,u){for(var p=1/0,f=1/0,m=t(a,s,l,u),h=0;h<m.length;h++){var g=m[h];p=Math.min(p,g[0]),f=Math.min(f,-g[1])}return[p,f]},findEnclosingVertexAngles:function(a,s){var l=r(s,function(p){var f=b(p,a);return f>0?f:1/0}),u=_.mod(l+1,s.length);return[s[l],s[u]]},findIntersectionXY:o,findXYatLength:function(a,s,l,u){var p=-s*l,f=s*s+1,m=2*(s*p-l),h=p*p+l*l-a*a,g=Math.sqrt(m*m-4*f*h),v=(-m+g)/(2*f),x=(-m-g)/(2*f);return[[v,s*v+p+u],[x,s*x+p+u]]},clampTiny:i,pathPolygon:function(a,s,l,u,p,f){return"M"+n(t(a,s,l,u),p,f).join("L")},pathPolygonAnnulus:function(a,s,l,u,p,f,m){var h,g;a<s?(h=a,g=s):(h=s,g=a);var v=n(t(h,l,u,p),f,m);return"M"+n(t(g,l,u,p),f,m).reverse().join("L")+"M"+v.join("L")}}},40872:function(R,C,e){"use strict";var _=e(84888).KY,T=e(3400).counterRegex,r=e(62400),w=e(39360),b=w.attr,c=w.name,o=T(c),t={};t[b]={valType:"subplotid",dflt:c,editType:"calc"},R.exports={attr:b,name:c,idRoot:c,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var n=i._fullLayout,a=i.calcdata,s=n._subplots[c],l=0;l<s.length;l++){var u=s[l],p=_(a,c,u),f=n[u]._subplot;f||(f=r(i,u),n[u]._subplot=f),f.plot(p,n,i._promises)}},clean:function(i,n,a,s){for(var l=s._subplots[c]||[],u=s._has&&s._has("gl"),p=n._has&&n._has("gl"),f=u&&!p,m=0;m<l.length;m++){var h=l[m],g=s[h]._subplot;if(!n[h]&&g)for(var v in g.framework.remove(),g.layers["radial-axis-title"].remove(),g.clipPaths)g.clipPaths[v].remove();f&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:e(57952).toSVG}},95300:function(R,C,e){"use strict";var _=e(22548),T=e(94724),r=e(86968).u,w=e(3400).extendFlat,b=e(67824).overrideAll,c=b({color:T.color,showline:w({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:w({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,griddash:T.griddash},"plot","from-root"),o=b({tickmode:T.minor.tickmode,nticks:T.nticks,tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,labelalias:T.labelalias,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickfont:T.tickfont,tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,layer:T.layer},"plot","from-root"),t={visible:w({},T.visible,{dflt:!0}),type:w({},T.type,{values:["-","linear","log","date","category"]}),autotypenumbers:T.autotypenumbers,autorangeoptions:{minallowed:T.autorangeoptions.minallowed,maxallowed:T.autorangeoptions.maxallowed,clipmin:T.autorangeoptions.clipmin,clipmax:T.autorangeoptions.clipmax,include:T.autorangeoptions.include,editType:"plot"},autorange:w({},T.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:w({},T.minallowed,{editType:"plot"}),maxallowed:w({},T.maxallowed,{editType:"plot"}),range:w({},T.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:T.categoryorder,categoryarray:T.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:T.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:w({},T.title.text,{editType:"plot",dflt:""}),font:w({},T.title.font,{editType:"plot"}),editType:"plot"},hoverformat:T.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}};w(t,c,o);var i={visible:w({},T.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:T.autotypenumbers,categoryorder:T.categoryorder,categoryarray:T.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:T.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};w(i,c,o),R.exports={domain:r({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:_.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(31780),w=e(168),b=e(84888).op,c=e(26332),o=e(25404),t=e(95936),i=e(42568),n=e(22416),a=e(42136),s=e(76808),l=e(52976),u=e(95300),p=e(57696),f=e(39360),m=f.axisNames;function h(v,x,y,A){var d=y("bgcolor");A.bgColor=T.combine(d,A.paper_bgcolor);var S=y("sector");y("hole");var k,E=b(A.fullData,f.name,A.id),L=A.layoutOut;function O(ge,ke){return y(k+"."+ge,ke)}for(var P=0;P<m.length;P++){k=m[P],_.isPlainObject(v[k])||(v[k]={});var F=v[k],U=r.newContainer(x,k);U._id=U._name=k,U._attr=A.id+"."+k,U._traceIndices=E.map(function(ge){return ge._expandedIndex});var I=f.axisName2dataArray[k],N=g(F,U,O,E,I,A);n(F,U,O,{axData:E,dataAttr:I});var W=O("visible");switch(p(U,x,L),O("uirevision",x.uirevision),U._m=1,k){case"radialaxis":O("minallowed"),O("maxallowed");var B,V=O("range"),q=U.getAutorangeDflt(V),ne=O("autorange",q);!V||(V[0]!==null||V[1]!==null)&&(V[0]!==null&&V[1]!==null||ne!=="reversed"&&ne!==!0)&&(V[0]===null||ne!=="min"&&ne!=="max reversed")&&(V[1]===null||ne!=="max"&&ne!=="min reversed")||(V=void 0,delete U.range,U.autorange=!0,B=!0),B||(ne=O("autorange",q=U.getAutorangeDflt(V))),F.autorange=ne,ne&&(s(O,ne,V),N!=="linear"&&N!=="-"||O("rangemode"),U.isReversed()&&(U._m=-1)),U.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){_.log("Polar plots do not support date angular axes yet.");for(var $=0;$<E.length;$++)E[$].visible=!1;N=F.type=U.type="linear"}O(N==="linear"?"thetaunit":"period");var K=O("direction");O("rotation",{counterclockwise:0,clockwise:90}[K])}if(i(F,U,O,U.type,{tickSuffixDflt:U.thetaunit==="degrees"?"\xB0":void 0}),W){var ee,J,Z,te,oe,se,ce,ye,me,fe,pe=A.font||{};J=(ee=O("color"))===F.color?ee:pe.color,Z=pe.size,te=pe.family,oe=pe.weight,se=pe.style,ce=pe.variant,ye=pe.textcase,me=pe.lineposition,fe=pe.shadow,c(F,U,O,U.type),t(F,U,O,U.type,{font:{weight:oe,style:se,variant:ce,textcase:ye,lineposition:me,shadow:fe,color:J,size:Z,family:te},noAutotickangles:k==="angularaxis",noTicklabelshift:!0,noTicklabelstandoff:!0}),o(F,U,O,{outerTicks:!0}),a(F,U,O,{dfltColor:ee,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[k]}),O("layer"),k==="radialaxis"&&(O("side"),O("angle",S[0]),O("title.text"),_.coerceFont(O,"title.font",{weight:oe,style:se,variant:ce,textcase:ye,lineposition:me,shadow:fe,color:J,size:_.bigFont(Z),family:te}))}N!=="category"&&O("hoverformat"),U._input=F}x.angularaxis.type==="category"&&y("gridshape")}function g(v,x,y,A,d,S){var k=y("autotypenumbers",S.autotypenumbersDflt);if(y("type")==="-"){for(var E,L=0;L<A.length;L++)if(A[L].visible){E=A[L];break}E&&E[d]&&(x.type=l(E[d],"gregorian",{noMultiCategory:!0,autotypenumbers:k})),x.type==="-"?x.type="linear":v.type=x.type}return x.type}R.exports=function(v,x,y){w(v,x,y,{type:f.name,attributes:u,handleDefaults:h,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:y,layoutOut:x})}},62400:function(R,C,e){"use strict";var _=e(33428),T=e(49760),r=e(24040),w=e(3400),b=w.strRotate,c=w.strTranslate,o=e(76308),t=e(43616),i=e(7316),n=e(54460),a=e(78344),s=e(57696),l=e(19280).doAutoRange,u=e(51184),p=e(86476),f=e(93024),m=e(81668),h=e(22676).prepSelect,g=e(22676).selectOnClick,v=e(22676).clearOutline,x=e(93972),y=e(73696),A=e(39172).redrawReglTraces,d=e(84284).MID_SHIFT,S=e(39360),k=e(57384),E=e(36416),L=E.smith,O=E.reactanceArc,P=E.resistanceArc,F=E.smithTransform,U=w._,I=w.mod,N=w.deg2rad,W=w.rad2deg;function B(K,ee,J){this.isSmith=J||!1,this.id=ee,this.gd=K,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Z=K._fullLayout,te="clip"+Z._uid+ee;this.clipIds.forTraces=te+"-for-traces",this.clipPaths.forTraces=Z._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Z["_"+(J?"smith":"polar")+"layer"].append("g").attr("class",ee),this.getHole=function(oe){return this.isSmith?0:oe.hole},this.getSector=function(oe){return this.isSmith?[0,360]:oe.sector},this.getRadial=function(oe){return this.isSmith?oe.realaxis:oe.radialaxis},this.getAngular=function(oe){return this.isSmith?oe.imaginaryaxis:oe.angularaxis},J||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=B.prototype;function q(K){var ee=K.ticks+String(K.ticklen)+String(K.showticklabels);return"side"in K&&(ee+=K.side),ee}function ne(K,ee){return ee[w.findIndexOfMin(ee,function(J){return w.angleDist(K,J)})]}function $(K,ee,J){return ee?(K.attr("display",null),K.attr(J)):K&&K.attr("display","none"),K}R.exports=function(K,ee,J){return new B(K,ee,J)},V.plot=function(K,ee){for(var J=this,Z=ee[J.id],te=!1,oe=0;oe<K.length;oe++)if(K[oe][0].trace.cliponaxis===!1){te=!0;break}J._hasClipOnAxisFalse=te,J.updateLayers(ee,Z),J.updateLayout(ee,Z),i.generalUpdatePerTraceModule(J.gd,J,K,Z),J.updateFx(ee,Z),J.isSmith&&(delete Z.realaxis.range,delete Z.imaginaryaxis.range)},V.updateLayers=function(K,ee){var J=this,Z=J.isSmith,te=J.layers,oe=J.getRadial(ee),se=J.getAngular(ee),ce=S.layerNames,ye=ce.indexOf("frontplot"),me=ce.slice(0,ye),fe=se.layer==="below traces",pe=oe.layer==="below traces";fe&&me.push("angular-line"),pe&&me.push("radial-line"),fe&&me.push("angular-axis"),pe&&me.push("radial-axis"),me.push("frontplot"),fe||me.push("angular-line"),pe||me.push("radial-line"),fe||me.push("angular-axis"),pe||me.push("radial-axis");var ge=(Z?"smith":"polar")+"sublayer",ke=J.framework.selectAll("."+ge).data(me,String);ke.enter().append("g").attr("class",function(Ce){return ge+" "+Ce}).each(function(Ce){var de=te[Ce]=_.select(this);switch(Ce){case"frontplot":Z||de.append("g").classed("barlayer",!0),de.append("g").classed("scatterlayer",!0);break;case"backplot":de.append("g").classed("maplayer",!0);break;case"plotbg":te.bg=de.append("path");break;case"radial-grid":case"angular-grid":de.style("fill","none");break;case"radial-line":de.append("line").style("fill","none");break;case"angular-line":de.append("path").style("fill","none")}}),ke.order()},V.updateLayout=function(K,ee){var J=this,Z=J.layers,te=K._size,oe=J.getRadial(ee),se=J.getAngular(ee),ce=ee.domain.x,ye=ee.domain.y;J.xOffset=te.l+te.w*ce[0],J.yOffset=te.t+te.h*(1-ye[1]);var me=J.xLength=te.w*(ce[1]-ce[0]),fe=J.yLength=te.h*(ye[1]-ye[0]),pe=J.getSector(ee);J.sectorInRad=pe.map(N);var ge,ke,Ce,de,ae,re=J.sectorBBox=function(rt){var ot,yt=rt[0],_t=rt[1]-yt,mt=I(yt,360),tt=mt+_t,Qe=Math.cos(N(mt)),Dt=Math.sin(N(mt)),zt=Math.cos(N(tt)),pt=Math.sin(N(tt));return ot=mt<=90&&tt>=90||mt>90&&tt>=450?1:Dt<=0&&pt<=0?0:Math.max(Dt,pt),[mt<=180&&tt>=180||mt>180&&tt>=540?-1:Qe>=0&&zt>=0?0:Math.min(Qe,zt),mt<=270&&tt>=270||mt>270&&tt>=630?-1:Dt>=0&&pt>=0?0:Math.min(Dt,pt),tt>=360?1:Qe<=0&&zt<=0?0:Math.max(Qe,zt),ot]}(pe),he=re[2]-re[0],Se=re[3]-re[1],xe=fe/me,Te=Math.abs(Se/he);xe>Te?(ge=me,ae=(fe-(ke=me*Te))/te.h/2,Ce=[ce[0],ce[1]],de=[ye[0]+ae,ye[1]-ae]):(ke=fe,ae=(me-(ge=fe/Te))/te.w/2,Ce=[ce[0]+ae,ce[1]-ae],de=[ye[0],ye[1]]),J.xLength2=ge,J.yLength2=ke,J.xDomain2=Ce,J.yDomain2=de;var Ae,Pe=J.xOffset2=te.l+te.w*Ce[0],De=J.yOffset2=te.t+te.h*(1-de[1]),ve=J.radius=ge/he,we=J.innerRadius=J.getHole(ee)*ve,Ee=J.cx=Pe-ve*re[0],Fe=J.cy=De+ve*re[3],Le=J.cxx=Ee-Pe,je=J.cyy=Fe-De,Ge=oe.side;Ge==="counterclockwise"?(Ae=Ge,Ge="top"):Ge==="clockwise"&&(Ae=Ge,Ge="bottom"),J.radialAxis=J.mockAxis(K,ee,oe,{_id:"x",side:Ge,_trueSide:Ae,domain:[we/te.w,ve/te.w]}),J.angularAxis=J.mockAxis(K,ee,se,{side:"right",domain:[0,Math.PI],autorange:!1}),J.doAutoRange(K,ee),J.updateAngularAxis(K,ee),J.updateRadialAxis(K,ee),J.updateRadialAxisTitle(K,ee),J.xaxis=J.mockCartesianAxis(K,ee,{_id:"x",domain:Ce}),J.yaxis=J.mockCartesianAxis(K,ee,{_id:"y",domain:de});var Je=J.pathSubplot();J.clipPaths.forTraces.select("path").attr("d",Je).attr("transform",c(Le,je)),Z.frontplot.attr("transform",c(Pe,De)).call(t.setClipUrl,J._hasClipOnAxisFalse?null:J.clipIds.forTraces,J.gd),Z.bg.attr("d",Je).attr("transform",c(Ee,Fe)).call(o.fill,ee.bgcolor)},V.mockAxis=function(K,ee,J,Z){var te=w.extendFlat({},J,Z);return s(te,ee,K),te},V.mockCartesianAxis=function(K,ee,J){var Z=this,te=Z.isSmith,oe=J._id,se=w.extendFlat({type:"linear"},J);a(se,K);var ce={x:[0,2],y:[1,3]};return se.setRange=function(){var ye=Z.sectorBBox,me=ce[oe],fe=Z.radialAxis._rl,pe=(fe[1]-fe[0])/(1-Z.getHole(ee));se.range=[ye[me[0]]*pe,ye[me[1]]*pe]},se.isPtWithinRange=oe!=="x"||te?function(){return!0}:function(ye){return Z.isPtInside(ye)},se.setRange(),se.setScale(),se},V.doAutoRange=function(K,ee){var J=this,Z=J.gd,te=J.radialAxis,oe=J.getRadial(ee);l(Z,te);var se=te.range;if(oe.range=se.slice(),oe._input.range=se.slice(),te._rl=[te.r2l(se[0],null,"gregorian"),te.r2l(se[1],null,"gregorian")],te.minallowed!==void 0){var ce=te.r2l(te.minallowed);te._rl[0]>te._rl[1]?te._rl[1]=Math.max(te._rl[1],ce):te._rl[0]=Math.max(te._rl[0],ce)}if(te.maxallowed!==void 0){var ye=te.r2l(te.maxallowed);te._rl[0]<te._rl[1]?te._rl[1]=Math.min(te._rl[1],ye):te._rl[0]=Math.min(te._rl[0],ye)}},V.updateRadialAxis=function(K,ee){var J=this,Z=J.gd,te=J.layers,oe=J.radius,se=J.innerRadius,ce=J.cx,ye=J.cy,me=J.getRadial(ee),fe=I(J.getSector(ee)[0],360),pe=J.radialAxis,ge=se<oe,ke=J.isSmith;ke||(J.fillViewInitialKey("radialaxis.angle",me.angle),J.fillViewInitialKey("radialaxis.range",pe.range.slice()),pe.setGeometry()),pe.tickangle==="auto"&&fe>90&&fe<=270&&(pe.tickangle=180);var Ce=ke?function(De){var ve=F(J,L([De.x,0]));return c(ve[0]-ce,ve[1]-ye)}:function(De){return c(pe.l2p(De.x)+se,0)},de=ke?function(De){return P(J,De.x,-1/0,1/0)}:function(De){return J.pathArc(pe.r2p(De.x)+se)},ae=q(me);if(J.radialTickLayout!==ae&&(te["radial-axis"].selectAll(".xtick").remove(),J.radialTickLayout=ae),ge){pe.setScale();var re=0,he=ke?(pe.tickvals||[]).filter(function(De){return De>=0}).map(function(De){return n.tickText(pe,De,!0,!1)}):n.calcTicks(pe),Se=ke?he:n.clipEnds(pe,he),xe=n.getTickSigns(pe)[2];ke&&((pe.ticks==="top"&&pe.side==="bottom"||pe.ticks==="bottom"&&pe.side==="top")&&(xe=-xe),pe.ticks==="top"&&pe.side==="top"&&(re=-pe.ticklen),pe.ticks==="bottom"&&pe.side==="bottom"&&(re=pe.ticklen)),n.drawTicks(Z,pe,{vals:he,layer:te["radial-axis"],path:n.makeTickPath(pe,0,xe),transFn:Ce,crisp:!1}),n.drawGrid(Z,pe,{vals:Se,layer:te["radial-grid"],path:de,transFn:w.noop,crisp:!1}),n.drawLabels(Z,pe,{vals:he,layer:te["radial-axis"],transFn:Ce,labelFns:n.makeLabelFns(pe,re)})}var Te=J.radialAxisAngle=J.vangles?W(ne(N(me.angle),J.vangles)):me.angle,Ae=c(ce,ye),Pe=Ae+b(-Te);$(te["radial-axis"],ge&&(me.showticklabels||me.ticks),{transform:Pe}),$(te["radial-grid"],ge&&me.showgrid,{transform:ke?"":Ae}),$(te["radial-line"].select("line"),ge&&me.showline,{x1:ke?-oe:se,y1:0,x2:oe,y2:0,transform:Pe}).attr("stroke-width",me.linewidth).call(o.stroke,me.linecolor)},V.updateRadialAxisTitle=function(K,ee,J){if(!this.isSmith){var Z=this,te=Z.gd,oe=Z.radius,se=Z.cx,ce=Z.cy,ye=Z.getRadial(ee),me=Z.id+"title",fe=0;if(ye.title){var pe=t.bBox(Z.layers["radial-axis"].node()).height,ge=ye.title.font.size,ke=ye.side;fe=ke==="top"?ge:ke==="counterclockwise"?-(pe+.4*ge):pe+.8*ge}var Ce=J!==void 0?J:Z.radialAxisAngle,de=N(Ce),ae=Math.cos(de),re=Math.sin(de),he=se+oe/2*ae+fe*re,Se=ce-oe/2*re+fe*ae;Z.layers["radial-axis-title"]=m.draw(te,me,{propContainer:ye,propName:Z.id+".radialaxis.title",placeholder:U(te,"Click to enter radial axis title"),attributes:{x:he,y:Se,"text-anchor":"middle"},transform:{rotate:-Ce}})}},V.updateAngularAxis=function(K,ee){var J=this,Z=J.gd,te=J.layers,oe=J.radius,se=J.innerRadius,ce=J.cx,ye=J.cy,me=J.getAngular(ee),fe=J.angularAxis,pe=J.isSmith;pe||(J.fillViewInitialKey("angularaxis.rotation",me.rotation),fe.setGeometry(),fe.setScale());var ge=pe?function(De){var ve=F(J,L([0,De.x]));return Math.atan2(ve[0]-ce,ve[1]-ye)-Math.PI/2}:function(De){return fe.t2g(De.x)};fe.type==="linear"&&fe.thetaunit==="radians"&&(fe.tick0=W(fe.tick0),fe.dtick=W(fe.dtick));var ke=function(De){return c(ce+oe*Math.cos(De),ye-oe*Math.sin(De))},Ce=pe?function(De){var ve=F(J,L([0,De.x]));return c(ve[0],ve[1])}:function(De){return ke(ge(De))},de=pe?function(De){var ve=F(J,L([0,De.x])),we=Math.atan2(ve[0]-ce,ve[1]-ye)-Math.PI/2;return c(ve[0],ve[1])+b(-W(we))}:function(De){var ve=ge(De);return ke(ve)+b(-W(ve))},ae=pe?function(De){return O(J,De.x,0,1/0)}:function(De){var ve=ge(De),we=Math.cos(ve),Ee=Math.sin(ve);return"M"+[ce+se*we,ye-se*Ee]+"L"+[ce+oe*we,ye-oe*Ee]},re=n.makeLabelFns(fe,0).labelStandoff,he={xFn:function(De){var ve=ge(De);return Math.cos(ve)*re},yFn:function(De){var ve=ge(De),we=Math.sin(ve)>0?.2:1;return-Math.sin(ve)*(re+De.fontSize*we)+Math.abs(Math.cos(ve))*(De.fontSize*d)},anchorFn:function(De){var ve=ge(De),we=Math.cos(ve);return Math.abs(we)<.1?"middle":we>0?"start":"end"},heightFn:function(De,ve,we){var Ee=ge(De);return-.5*(1+Math.sin(Ee))*we}},Se=q(me);J.angularTickLayout!==Se&&(te["angular-axis"].selectAll("."+fe._id+"tick").remove(),J.angularTickLayout=Se);var xe,Te=pe?[1/0].concat(fe.tickvals||[]).map(function(De){return n.tickText(fe,De,!0,!1)}):n.calcTicks(fe);if(pe&&(Te[0].text="\u221E",Te[0].fontSize*=1.75),ee.gridshape==="linear"?(xe=Te.map(ge),w.angleDelta(xe[0],xe[1])<0&&(xe=xe.slice().reverse())):xe=null,J.vangles=xe,fe.type==="category"&&(Te=Te.filter(function(De){return w.isAngleInsideSector(ge(De),J.sectorInRad)})),fe.visible){var Ae=fe.ticks==="inside"?-1:1,Pe=(fe.linewidth||1)/2;n.drawTicks(Z,fe,{vals:Te,layer:te["angular-axis"],path:"M"+Ae*Pe+",0h"+Ae*fe.ticklen,transFn:de,crisp:!1}),n.drawGrid(Z,fe,{vals:Te,layer:te["angular-grid"],path:ae,transFn:w.noop,crisp:!1}),n.drawLabels(Z,fe,{vals:Te,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:Ce,labelFns:he})}$(te["angular-line"].select("path"),me.showline,{d:J.pathSubplot(),transform:c(ce,ye)}).attr("stroke-width",me.linewidth).call(o.stroke,me.linecolor)},V.updateFx=function(K,ee){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(K),this.updateRadialDrag(K,ee,0),this.updateRadialDrag(K,ee,1)),this.updateHoverAndMainDrag(K))},V.updateHoverAndMainDrag=function(K){var ee,J,Z=this,te=Z.isSmith,oe=Z.gd,se=Z.layers,ce=K._zoomlayer,ye=S.MINZOOM,me=S.OFFEDGE,fe=Z.radius,pe=Z.innerRadius,ge=Z.cx,ke=Z.cy,Ce=Z.cxx,de=Z.cyy,ae=Z.sectorInRad,re=Z.vangles,he=Z.radialAxis,Se=k.clampTiny,xe=k.findXYatLength,Te=k.findEnclosingVertexAngles,Ae=S.cornerHalfWidth,Pe=S.cornerLen/2,De=u.makeDragger(se,"path","maindrag",K.dragmode===!1?"none":"crosshair");_.select(De).attr("d",Z.pathSubplot()).attr("transform",c(ge,ke)),De.onmousemove=function(lt){f.hover(oe,lt,Z.id),oe._fullLayout._lasthover=De,oe._fullLayout._hoversubplot=Z.id},De.onmouseout=function(lt){oe._dragging||p.unhover(oe,lt)};var ve,we,Ee,Fe,Le,je,Ge,Je,rt,ot={element:De,gd:oe,subplot:Z.id,plotinfo:{id:Z.id,xaxis:Z.xaxis,yaxis:Z.yaxis},xaxes:[Z.xaxis],yaxes:[Z.yaxis]};function yt(lt,xt){return Math.sqrt(lt*lt+xt*xt)}function _t(lt,xt){return yt(lt-Ce,xt-de)}function mt(lt,xt){return Math.atan2(de-xt,lt-Ce)}function tt(lt,xt){return[lt*Math.cos(xt),lt*Math.sin(-xt)]}function Qe(lt,xt){if(lt===0)return Z.pathSector(2*Ae);var bt=Pe/lt,Ve=xt-bt,Be=xt+bt,at=Math.max(0,Math.min(lt,fe)),ht=at-Ae,dt=at+Ae;return"M"+tt(ht,Ve)+"A"+[ht,ht]+" 0,0,0 "+tt(ht,Be)+"L"+tt(dt,Be)+"A"+[dt,dt]+" 0,0,1 "+tt(dt,Ve)+"Z"}function Dt(lt,xt,bt){if(lt===0)return Z.pathSector(2*Ae);var Ve,Be,at=tt(lt,xt),ht=tt(lt,bt),dt=Se((at[0]+ht[0])/2),it=Se((at[1]+ht[1])/2);if(dt&&it){var kt=it/dt,Tt=-1/kt,St=xe(Ae,kt,dt,it);Ve=xe(Pe,Tt,St[0][0],St[0][1]),Be=xe(Pe,Tt,St[1][0],St[1][1])}else{var wt,At;it?(wt=Pe,At=Ae):(wt=Ae,At=Pe),Ve=[[dt-wt,it-At],[dt+wt,it-At]],Be=[[dt-wt,it+At],[dt+wt,it+At]]}return"M"+Ve.join("L")+"L"+Be.reverse().join("L")+"Z"}function zt(lt,xt){return xt=Math.max(Math.min(xt,fe),pe),lt<me?lt=0:fe-lt<me?lt=fe:xt<me?xt=0:fe-xt<me&&(xt=fe),Math.abs(xt-lt)>ye?(lt<xt?(Ee=lt,Fe=xt):(Ee=xt,Fe=lt),!0):(Ee=null,Fe=null,!1)}function pt(lt,xt){lt=lt||Le,xt=xt||"M0,0Z",Je.attr("d",lt),rt.attr("d",xt),u.transitionZoombox(Je,rt,je,Ge),je=!0;var bt={};Xe(bt),oe.emit("plotly_relayouting",bt)}function vt(lt,xt){var bt,Ve,Be=ve+(lt*=ee),at=we+(xt*=J),ht=_t(ve,we),dt=Math.min(_t(Be,at),fe),it=mt(ve,we);zt(ht,dt)&&(bt=Le+Z.pathSector(Fe),Ee&&(bt+=Z.pathSector(Ee)),Ve=Qe(Ee,it)+Qe(Fe,it)),pt(bt,Ve)}function We(lt,xt,bt,Ve){var Be=k.findIntersectionXY(bt,Ve,bt,[lt-Ce,de-xt]);return yt(Be[0],Be[1])}function Ze(lt,xt){var bt,Ve,Be=ve+lt,at=we+xt,ht=mt(ve,we),dt=mt(Be,at),it=Te(ht,re),kt=Te(dt,re);zt(We(ve,we,it[0],it[1]),Math.min(We(Be,at,kt[0],kt[1]),fe))&&(bt=Le+Z.pathSector(Fe),Ee&&(bt+=Z.pathSector(Ee)),Ve=[Dt(Ee,it[0],it[1]),Dt(Fe,it[0],it[1])].join(" ")),pt(bt,Ve)}function Ne(){if(u.removeZoombox(oe),Ee!==null&&Fe!==null){var lt={};Xe(lt),u.showDoubleClickNotifier(oe),r.call("_guiRelayout",oe,lt)}}function Xe(lt){var xt=he._rl,bt=(xt[1]-xt[0])/(1-pe/fe)/fe,Ve=[xt[0]+(Ee-pe)*bt,xt[0]+(Fe-pe)*bt];lt[Z.id+".radialaxis.range"]=Ve}function st(lt,xt){var bt=oe._fullLayout.clickmode;if(u.removeZoombox(oe),lt===2){var Ve={};for(var Be in Z.viewInitial)Ve[Z.id+"."+Be]=Z.viewInitial[Be];oe.emit("plotly_doubleclick",null),r.call("_guiRelayout",oe,Ve)}bt.indexOf("select")>-1&&lt===1&&g(xt,oe,[Z.xaxis],[Z.yaxis],Z.id,ot),bt.indexOf("event")>-1&&f.click(oe,xt,Z.id)}ot.prepFn=function(lt,xt,bt){var Ve=oe._fullLayout.dragmode,Be=De.getBoundingClientRect();oe._fullLayout._calcInverseTransform(oe);var at=oe._fullLayout._invTransform;ee=oe._fullLayout._invScaleX,J=oe._fullLayout._invScaleY;var ht=w.apply3DTransform(at)(xt-Be.left,bt-Be.top);if(ve=ht[0],we=ht[1],re){var dt=k.findPolygonOffset(fe,ae[0],ae[1],re);ve+=Ce+dt[0],we+=de+dt[1]}switch(Ve){case"zoom":ot.clickFn=st,te||(ot.moveFn=re?Ze:vt,ot.doneFn=Ne,function(){Ee=null,Fe=null,Le=Z.pathSubplot(),je=!1;var it=oe._fullLayout[Z.id];Ge=T(it.bgcolor).getLuminance(),(Je=u.makeZoombox(ce,Ge,ge,ke,Le)).attr("fill-rule","evenodd"),rt=u.makeCorners(ce,ge,ke),v(oe)}());break;case"select":case"lasso":h(lt,xt,bt,ot,Ve)}},p.init(ot)},V.updateRadialDrag=function(K,ee,J){var Z=this,te=Z.gd,oe=Z.layers,se=Z.radius,ce=Z.innerRadius,ye=Z.cx,me=Z.cy,fe=Z.radialAxis,pe=S.radialDragBoxSize,ge=pe/2;if(fe.visible){var ke,Ce,de,ae=N(Z.radialAxisAngle),re=fe._rl,he=re[0],Se=re[1],xe=re[J],Te=.75*(re[1]-re[0])/(1-Z.getHole(ee))/se;J?(ke=ye+(se+ge)*Math.cos(ae),Ce=me-(se+ge)*Math.sin(ae),de="radialdrag"):(ke=ye+(ce-ge)*Math.cos(ae),Ce=me-(ce-ge)*Math.sin(ae),de="radialdrag-inner");var Ae,Pe,De,ve=u.makeRectDragger(oe,de,"crosshair",-ge,-ge,pe,pe),we={element:ve,gd:te};K.dragmode===!1&&(we.dragmode=!1),$(_.select(ve),fe.visible&&ce<se,{transform:c(ke,Ce)}),we.prepFn=function(){Ae=null,Pe=null,De=null,we.moveFn=Ee,we.doneFn=Fe,v(te)},we.clampFn=function(Ge,Je){return Math.sqrt(Ge*Ge+Je*Je)<S.MINDRAG&&(Ge=0,Je=0),[Ge,Je]},p.init(we)}function Ee(Ge,Je){if(Ae)Ae(Ge,Je);else{var rt=[Ge,-Je],ot=[Math.cos(ae),Math.sin(ae)],yt=Math.abs(w.dot(rt,ot)/Math.sqrt(w.dot(rt,rt)));isNaN(yt)||(Ae=yt<.5?Le:je)}var _t={};(function(mt){Pe!==null?mt[Z.id+".radialaxis.angle"]=Pe:De!==null&&(mt[Z.id+".radialaxis.range["+J+"]"]=De)})(_t),te.emit("plotly_relayouting",_t)}function Fe(){Pe!==null?r.call("_guiRelayout",te,Z.id+".radialaxis.angle",Pe):De!==null&&r.call("_guiRelayout",te,Z.id+".radialaxis.range["+J+"]",De)}function Le(Ge,Je){if(J!==0){var rt=ke+Ge,ot=Ce+Je;Pe=Math.atan2(me-ot,rt-ye),Z.vangles&&(Pe=ne(Pe,Z.vangles)),Pe=W(Pe);var yt=c(ye,me)+b(-Pe);oe["radial-axis"].attr("transform",yt),oe["radial-line"].select("line").attr("transform",yt);var _t=Z.gd._fullLayout,mt=_t[Z.id];Z.updateRadialAxisTitle(_t,mt,Pe)}}function je(Ge,Je){var rt=w.dot([Ge,-Je],[Math.cos(ae),Math.sin(ae)]);if(De=xe-Te*rt,Te>0==(J?De>he:De<Se)){var ot=te._fullLayout,yt=ot[Z.id];fe.range[J]=De,fe._rl[J]=De,Z.updateRadialAxis(ot,yt),Z.xaxis.setRange(),Z.xaxis.setScale(),Z.yaxis.setRange(),Z.yaxis.setScale();var _t=!1;for(var mt in Z.traceHash){var tt=Z.traceHash[mt],Qe=w.filterVisible(tt);tt[0][0].trace._module.plot(te,Z,Qe,yt),r.traceIs(mt,"gl")&&Qe.length&&(_t=!0)}_t&&(y(te),A(te))}else De=null}},V.updateAngularDrag=function(K){var ee=this,J=ee.gd,Z=ee.layers,te=ee.radius,oe=ee.angularAxis,se=ee.cx,ce=ee.cy,ye=ee.cxx,me=ee.cyy,fe=S.angularDragBoxSize,pe=u.makeDragger(Z,"path","angulardrag",K.dragmode===!1?"none":"move"),ge={element:pe,gd:J};function ke(we,Ee){return Math.atan2(me+fe-Ee,we-ye-fe)}K.dragmode===!1?ge.dragmode=!1:_.select(pe).attr("d",ee.pathAnnulus(te,te+fe)).attr("transform",c(se,ce)).call(x,"move");var Ce,de,ae,re,he,Se,xe=Z.frontplot.select(".scatterlayer").selectAll(".trace"),Te=xe.selectAll(".point"),Ae=xe.selectAll(".textpoint");function Pe(we,Ee){var Fe=ee.gd._fullLayout,Le=Fe[ee.id],je=ke(Ce+we*K._invScaleX,de+Ee*K._invScaleY),Ge=W(je-Se);if(re=ae+Ge,Z.frontplot.attr("transform",c(ee.xOffset2,ee.yOffset2)+b([-Ge,ye,me])),ee.vangles){he=ee.radialAxisAngle+Ge;var Je=c(se,ce)+b(-Ge),rt=c(se,ce)+b(-he);Z.bg.attr("transform",Je),Z["radial-grid"].attr("transform",Je),Z["radial-axis"].attr("transform",rt),Z["radial-line"].select("line").attr("transform",rt),ee.updateRadialAxisTitle(Fe,Le,he)}else ee.clipPaths.forTraces.select("path").attr("transform",c(ye,me)+b(Ge));Te.each(function(){var Qe=_.select(this),Dt=t.getTranslate(Qe);Qe.attr("transform",c(Dt.x,Dt.y)+b([Ge]))}),Ae.each(function(){var Qe=_.select(this),Dt=Qe.select("text"),zt=t.getTranslate(Qe);Qe.attr("transform",b([Ge,Dt.attr("x"),Dt.attr("y")])+c(zt.x,zt.y))}),oe.rotation=w.modHalf(re,360),ee.updateAngularAxis(Fe,Le),ee._hasClipOnAxisFalse&&!w.isFullCircle(ee.sectorInRad)&&xe.call(t.hideOutsideRangePoints,ee);var ot=!1;for(var yt in ee.traceHash)if(r.traceIs(yt,"gl")){var _t=ee.traceHash[yt],mt=w.filterVisible(_t);_t[0][0].trace._module.plot(J,ee,mt,Le),mt.length&&(ot=!0)}ot&&(y(J),A(J));var tt={};De(tt),J.emit("plotly_relayouting",tt)}function De(we){we[ee.id+".angularaxis.rotation"]=re,ee.vangles&&(we[ee.id+".radialaxis.angle"]=he)}function ve(){Ae.select("text").attr("transform",null);var we={};De(we),r.call("_guiRelayout",J,we)}ge.prepFn=function(we,Ee,Fe){var Le=K[ee.id];ae=Le.angularaxis.rotation;var je=pe.getBoundingClientRect();Ce=Ee-je.left,de=Fe-je.top,J._fullLayout._calcInverseTransform(J);var Ge=w.apply3DTransform(K._invTransform)(Ce,de);Ce=Ge[0],de=Ge[1],Se=ke(Ce,de),ge.moveFn=Pe,ge.doneFn=ve,v(J)},ee.vangles&&!w.isFullCircle(ee.sectorInRad)&&(ge.prepFn=w.noop,x(_.select(pe),null)),p.init(ge)},V.isPtInside=function(K){if(this.isSmith)return!0;var ee=this.sectorInRad,J=this.vangles,Z=this.angularAxis.c2g(K.theta),te=this.radialAxis,oe=te.c2l(K.r),se=te._rl;return(J?k.isPtInsidePolygon:w.isPtInsideSector)(oe,Z,se,ee,J)},V.pathArc=function(K){var ee=this.sectorInRad,J=this.vangles;return(J?k.pathPolygon:w.pathArc)(K,ee[0],ee[1],J)},V.pathSector=function(K){var ee=this.sectorInRad,J=this.vangles;return(J?k.pathPolygon:w.pathSector)(K,ee[0],ee[1],J)},V.pathAnnulus=function(K,ee){var J=this.sectorInRad,Z=this.vangles;return(Z?k.pathPolygonAnnulus:w.pathAnnulus)(K,ee,J[0],J[1],Z)},V.pathSubplot=function(){var K=this.innerRadius,ee=this.radius;return K?this.pathAnnulus(K,ee):this.pathSector(ee)},V.fillViewInitialKey=function(K,ee){K in this.viewInitial||(this.viewInitial[K]=ee)}},57696:function(R,C,e){"use strict";var _=e(3400),T=e(78344),r=_.deg2rad,w=_.rad2deg;R.exports=function(b,c,o){switch(T(b,o),b._id){case"x":case"radialaxis":(function(t,i){var n=i._subplot;t.setGeometry=function(){var a=t._rl[0],s=t._rl[1],l=n.innerRadius,u=(n.radius-l)/(s-a),p=l/u,f=a>s?function(m){return m<=0}:function(m){return m>=0};t.c2g=function(m){var h=t.c2l(m)-a;return(f(h)?h:0)+p},t.g2c=function(m){return t.l2c(m+a-p)},t.g2p=function(m){return m*u},t.c2p=function(m){return t.g2p(t.c2g(m))}}})(b,c);break;case"angularaxis":(function(t,i){var n=t.type;if(n==="linear"){var a=t.d2c,s=t.c2d;t.d2c=function(l,u){return function(p,f){return f==="degrees"?r(p):p}(a(l),u)},t.c2d=function(l,u){return s(function(p,f){return f==="degrees"?w(p):p}(l,u))}}t.makeCalcdata=function(l,u){var p,f,m=l[u],h=l._length,g=function(d){return t.d2c(d,l.thetaunit)};if(m)for(p=new Array(h),f=0;f<h;f++)p[f]=g(m[f]);else{var v=u+"0",x="d"+u,y=v in l?g(l[v]):0,A=l[x]?g(l[x]):(t.period||2*Math.PI)/h;for(p=new Array(h),f=0;f<h;f++)p[f]=y+f*A}return p},t.setGeometry=function(){var l,u,p,f,m=i.sector,h=m.map(r),g={clockwise:-1,counterclockwise:1}[t.direction],v=r(t.rotation),x=function(S){return g*S+v},y=function(S){return(S-v)/g};switch(n){case"linear":u=l=_.identity,f=r,p=w,t.range=_.isFullCircle(h)?[m[0],m[0]+360]:h.map(y).map(w);break;case"category":var A=t._categories.length,d=t.period?Math.max(t.period,A):A;d===0&&(d=1),u=f=function(S){return 2*S*Math.PI/d},l=p=function(S){return S*d/Math.PI/2},t.range=[0,d]}t.c2g=function(S){return x(u(S))},t.g2c=function(S){return l(y(S))},t.t2g=function(S){return x(f(S))},t.g2t=function(S){return p(y(S))}}})(b,c)}}},55012:function(R){"use strict";R.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(R){"use strict";function C(r){return r<0?-1:r>0?1:0}function e(r){var w=r[0],b=r[1];if(!isFinite(w)||!isFinite(b))return[1,0];var c=(w+1)*(w+1)+b*b;return[(w*w+b*b-1)/c,2*b/c]}function _(r,w){var b=w[0],c=w[1];return[b*r.radius+r.cx,-c*r.radius+r.cy]}function T(r,w){return w*r.radius}R.exports={smith:e,reactanceArc:function(r,w,b,c){var o=_(r,e([b,w])),t=o[0],i=o[1],n=_(r,e([c,w])),a=n[0],s=n[1];if(w===0)return["M"+t+","+i,"L"+a+","+s].join(" ");var l=T(r,1/Math.abs(w));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(w<0?1:0)+" "+a+","+s].join(" ")},resistanceArc:function(r,w,b,c){var o=T(r,1/(w+1)),t=_(r,e([w,b])),i=t[0],n=t[1],a=_(r,e([w,c])),s=a[0],l=a[1];if(C(b)!==C(c)){var u=_(r,e([w,0]));return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+o+","+o+" 0 0,"+(c<0?0:1)+s+","+l].join(" ")}return["M"+i+","+n,"A"+o+","+o+" 0 0,"+(c<b?0:1)+" "+s+","+l].join(" ")},smithTransform:_}},47788:function(R,C,e){"use strict";var _=e(84888).KY,T=e(3400).counterRegex,r=e(62400),w=e(55012),b=w.attr,c=w.name,o=T(c),t={};t[b]={valType:"subplotid",dflt:c,editType:"calc"},R.exports={attr:b,name:c,idRoot:c,idRegex:o,attrRegex:o,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var n=i._fullLayout,a=i.calcdata,s=n._subplots[c],l=0;l<s.length;l++){var u=s[l],p=_(a,c,u),f=n[u]._subplot;f||(f=r(i,u,!0),n[u]._subplot=f),f.plot(p,n,i._promises)}},clean:function(i,n,a,s){for(var l=s._subplots[c]||[],u=0;u<l.length;u++){var p=l[u],f=s[p]._subplot;if(!n[p]&&f)for(var m in f.framework.remove(),f.clipPaths)f.clipPaths[m].remove()}},toSVG:e(57952).toSVG}},6183:function(R,C,e){"use strict";var _=e(22548),T=e(94724),r=e(86968).u,w=e(3400).extendFlat,b=e(67824).overrideAll,c=b({color:T.color,showline:w({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:w({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,griddash:T.griddash},"plot","from-root"),o=b({ticklen:T.ticklen,tickwidth:w({},T.tickwidth,{dflt:2}),tickcolor:T.tickcolor,showticklabels:T.showticklabels,labelalias:T.labelalias,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,tickfont:T.tickfont,tickformat:T.tickformat,hoverformat:T.hoverformat,layer:T.layer},"plot","from-root"),t=w({visible:w({},T.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:w({},T.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},c,o),i=w({visible:w({},T.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:T.ticks,editType:"calc"},c,o);R.exports={domain:r({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:_.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(R,C,e){"use strict";var _,T,r,w=e(3400),b=e(76308),c=e(31780),o=e(168),t=e(84888).op,i=e(42568),n=e(95936),a=e(42136),s=e(78344),l=e(6183),u=e(55012),p=u.axisNames,f=(_=function(h){return w.isTypedArray(h)&&(h=Array.from(h)),h.slice().reverse().map(function(g){return-g}).concat([0]).concat(h)},T=String,r={},function(h){var g=T?T(h):h;if(g in r)return r[g];var v=_(h);return r[g]=v,v});function m(h,g,v,x){var y=v("bgcolor");x.bgColor=b.combine(y,x.paper_bgcolor);var A,d=t(x.fullData,u.name,x.id),S=x.layoutOut;function k(V,q){return v(A+"."+V,q)}for(var E=0;E<p.length;E++){A=p[E],w.isPlainObject(h[A])||(h[A]={});var L=h[A],O=c.newContainer(g,A);O._id=O._name=A,O._attr=x.id+"."+A,O._traceIndices=d.map(function(V){return V._expandedIndex});var P=k("visible");if(O.type="linear",s(O,S),i(L,O,k,O.type),P){var F,U,I,N,W=A==="realaxis";W&&k("side"),W?k("tickvals"):k("tickvals",f(g.realaxis.tickvals||l.realaxis.tickvals.dflt)),w.isTypedArray(O.tickvals)&&(O.tickvals=Array.from(O.tickvals));var B=x.font||{};P&&(U=(F=k("color"))===L.color?F:B.color,I=B.size,N=B.family),n(L,O,k,O.type,{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:U,size:I,family:N}}),w.coerce2(h,g,l,A+".ticklen"),w.coerce2(h,g,l,A+".tickwidth"),w.coerce2(h,g,l,A+".tickcolor",g.color),k("ticks")||(delete g[A].ticklen,delete g[A].tickwidth,delete g[A].tickcolor),a(L,O,k,{dfltColor:F,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[A]}),k("layer")}k("hoverformat"),delete O.type,O._input=L}}R.exports=function(h,g,v){o(h,g,v,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:m,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:v,layoutOut:g})}},168:function(R,C,e){"use strict";var _=e(3400),T=e(31780),r=e(86968).Q;R.exports=function(w,b,c,o){var t,i,n=o.type,a=o.attributes,s=o.handleDefaults,l=o.partition||"x",u=b._subplots[n],p=u.length,f=p&&u[0].replace(/\d+$/,"");function m(x,y){return _.coerce(t,i,a,x,y)}for(var h=0;h<p;h++){var g=u[h];t=w[g]?w[g]:w[g]={},i=T.newContainer(b,g,f),o.noUirevision||m("uirevision",b.uirevision);var v={};v[l]=[h/p,(h+1)/p],r(i,b,m,v),o.id=g,s(t,i,m,o)}}},21776:function(R,C,e){"use strict";var _=e(26880);function T(r){var w=r.description?" "+r.description:"",b=r.keys||[];if(b.length>0){for(var c=[],o=0;o<b.length;o++)c[o]="`"+b[o]+"`";w+="Finally, the template string has access to ",w=b.length===1?w+"variable "+c[0]:w+"variables "+c.slice(0,-1).join(", ")+" and "+c.slice(-1)+"."}return w}_.FORMAT_LINK,_.DATE_FORMAT_LINK,C.Ks=function(r,w){r=r||{},T(w=w||{});var b={valType:"string",dflt:"",editType:r.editType||"none"};return r.arrayOk!==!1&&(b.arrayOk=!0),b},C.Gw=function(r,w){r=r||{},T(w=w||{});var b={valType:"string",dflt:"",editType:r.editType||"calc"};return r.arrayOk!==!1&&(b.arrayOk=!0),b},C.ye=function(r,w){return w=w||{},(r=r||{}).newshape,T(w),{valType:"string",dflt:"",editType:r.editType||"arraydraw"}}},19352:function(R,C,e){"use strict";var _=e(24696),T=e(84888).KY,r=e(3400).counterRegex,w="ternary";C.name=w;var b=C.attr="subplot";C.idRoot=w,C.idRegex=C.attrRegex=r(w),(C.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},C.layoutAttributes=e(86379),C.supplyLayoutDefaults=e(38536),C.plot=function(c){for(var o=c._fullLayout,t=c.calcdata,i=o._subplots[w],n=0;n<i.length;n++){var a=i[n],s=T(t,w,a),l=o[a]._subplot;l||(l=new _({id:a,graphDiv:c,container:o._ternarylayer.node()},o),o[a]._subplot=l),l.plot(s,o,c._promises)}},C.clean=function(c,o,t,i){for(var n=i._subplots[w]||[],a=0;a<n.length;a++){var s=n[a],l=i[s]._subplot;!o[s]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(R,C,e){"use strict";var _=e(22548),T=e(86968).u,r=e(94724),w=e(67824).overrideAll,b=e(92880).extendFlat,c={title:{text:r.title.text,font:r.title.font},color:r.color,tickmode:r.minor.tickmode,nticks:b({},r.nticks,{dflt:6,min:1}),tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,labelalias:r.labelalias,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,hoverformat:r.hoverformat,showline:b({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:b({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth,griddash:r.griddash,layer:r.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}},o=R.exports=w({domain:T({name:"ternary"}),bgcolor:{valType:"color",dflt:_.background},sum:{valType:"number",dflt:1,min:0},aaxis:c,baxis:c,caxis:c},"plot","from-root");o.uirevision={valType:"any",editType:"none"},o.aaxis.uirevision=o.baxis.uirevision=o.caxis.uirevision={valType:"any",editType:"none"}},38536:function(R,C,e){"use strict";var _=e(76308),T=e(31780),r=e(3400),w=e(168),b=e(95936),c=e(42568),o=e(25404),t=e(26332),i=e(42136),n=e(86379),a=["aaxis","baxis","caxis"];function s(u,p,f,m){var h,g,v,x=f("bgcolor"),y=f("sum");m.bgColor=_.combine(x,m.paper_bgcolor);for(var A=0;A<a.length;A++)g=u[h=a[A]]||{},(v=T.newContainer(p,h))._name=h,l(g,v,m,p);var d=p.aaxis,S=p.baxis,k=p.caxis;d.min+S.min+k.min>=y&&(d.min=0,S.min=0,k.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,p,f,m){var h=n[p._name];function g(S,k){return r.coerce(u,p,h,S,k)}g("uirevision",m.uirevision),p.type="linear";var v=g("color"),x=v!==h.color.dflt?v:f.font.color,y=p._name.charAt(0).toUpperCase(),A="Component "+y,d=g("title.text",A);p._hovertitle=d===A?d:y,r.coerceFont(g,"title.font",f.font,{overrideDflt:{size:r.bigFont(f.font.size),color:x}}),g("min"),t(u,p,g,"linear"),c(u,p,g,"linear"),b(u,p,g,"linear",{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0}),o(u,p,g,{outerTicks:!0}),g("showticklabels")&&(r.coerceFont(g,"tickfont",f.font,{overrideDflt:{color:x}}),g("tickangle"),g("tickformat")),i(u,p,g,{dfltColor:v,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h}),g("hoverformat"),g("layer")}R.exports=function(u,p,f){w(u,p,f,{type:"ternary",attributes:n,handleDefaults:s,font:p.font,paper_bgcolor:p.paper_bgcolor})}},24696:function(R,C,e){"use strict";var _=e(33428),T=e(49760),r=e(24040),w=e(3400),b=w.strTranslate,c=w._,o=e(76308),t=e(43616),i=e(78344),n=e(92880).extendFlat,a=e(7316),s=e(54460),l=e(86476),u=e(93024),p=e(72760),f=p.freeMode,m=p.rectMode,h=e(81668),g=e(22676).prepSelect,v=e(22676).selectOnClick,x=e(22676).clearOutline,y=e(22676).clearSelectionsCache,A=e(33816);function d(I,N){this.id=I.id,this.graphDiv=I.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}R.exports=d;var S=d.prototype;S.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},S.plot=function(I,N){var W=this,B=N[W.id],V=N._size;W._hasClipOnAxisFalse=!1;for(var q=0;q<I.length;q++)if(I[q][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(B),W.adjustLayout(B,V),a.generalUpdatePerTraceModule(W.graphDiv,W,I,B),W.layers.plotbg.select("path").call(o.fill,B.bgcolor)},S.makeFramework=function(I){var N=this,W=N.graphDiv,B=I[N.id],V=N.clipId="clip"+N.layoutId+N.id,q=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=w.ensureSingleById(I._clips,"clipPath",V,function(ne){ne.append("path").attr("d","M0,0Z")}),N.clipDefRelative=w.ensureSingleById(I._clips,"clipPath",q,function(ne){ne.append("path").attr("d","M0,0Z")}),N.plotContainer=w.ensureSingle(N.container,"g",N.id),N.updateLayers(B),t.setClipUrl(N.layers.backplot,V,W),t.setClipUrl(N.layers.grids,V,W)},S.updateLayers=function(I){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&W.push("aaxis","aline"),I.baxis.layer==="below traces"&&W.push("baxis","bline"),I.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),I.aaxis.layer==="above traces"&&W.push("aaxis","aline"),I.baxis.layer==="above traces"&&W.push("baxis","bline"),I.caxis.layer==="above traces"&&W.push("caxis","cline");var B=this.plotContainer.selectAll("g.toplevel").data(W,String),V=["agrid","bgrid","cgrid"];B.enter().append("g").attr("class",function(q){return"toplevel "+q}).each(function(q){var ne=_.select(this);N[q]=ne,q==="frontplot"?ne.append("g").classed("scatterlayer",!0):q==="backplot"?ne.append("g").classed("maplayer",!0):q==="plotbg"?ne.append("path").attr("d","M0,0Z"):q==="aline"||q==="bline"||q==="cline"?ne.append("path"):q==="grids"&&V.forEach(function($){N[$]=ne.append("g").classed("grid "+$,!0)})}),B.order()};var k=Math.sqrt(4/3);S.adjustLayout=function(I,N){var W,B,V,q,ne,$,K=this,ee=I.domain,J=(ee.x[0]+ee.x[1])/2,Z=(ee.y[0]+ee.y[1])/2,te=ee.x[1]-ee.x[0],oe=ee.y[1]-ee.y[0],se=te*N.w,ce=oe*N.h,ye=I.sum,me=I.aaxis.min,fe=I.baxis.min,pe=I.caxis.min;se>k*ce?V=(q=ce)*k:q=(V=se)/k,ne=te*V/se,$=oe*q/ce,W=N.l+N.w*J-V/2,B=N.t+N.h*(1-Z)-q/2,K.x0=W,K.y0=B,K.w=V,K.h=q,K.sum=ye,K.xaxis={type:"linear",range:[me+2*pe-ye,ye-me-2*fe],domain:[J-ne/2,J+ne/2],_id:"x"},i(K.xaxis,K.graphDiv._fullLayout),K.xaxis.setScale(),K.xaxis.isPtWithinRange=function(Ae){return Ae.a>=K.aaxis.range[0]&&Ae.a<=K.aaxis.range[1]&&Ae.b>=K.baxis.range[1]&&Ae.b<=K.baxis.range[0]&&Ae.c>=K.caxis.range[1]&&Ae.c<=K.caxis.range[0]},K.yaxis={type:"linear",range:[me,ye-fe-pe],domain:[Z-$/2,Z+$/2],_id:"y"},i(K.yaxis,K.graphDiv._fullLayout),K.yaxis.setScale(),K.yaxis.isPtWithinRange=function(){return!0};var ge=K.yaxis.domain[0],ke=K.aaxis=n({},I.aaxis,{range:[me,ye-fe-pe],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[ge,ge+$*k],anchor:"free",position:0,_id:"y",_length:V});i(ke,K.graphDiv._fullLayout),ke.setScale();var Ce=K.baxis=n({},I.baxis,{range:[ye-me-pe,fe],side:"bottom",domain:K.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});i(Ce,K.graphDiv._fullLayout),Ce.setScale();var de=K.caxis=n({},I.caxis,{range:[ye-me-fe,pe],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[ge,ge+$*k],anchor:"free",position:0,_id:"y",_length:V});i(de,K.graphDiv._fullLayout),de.setScale();var ae="M"+W+","+(B+q)+"h"+V+"l-"+V/2+",-"+q+"Z";K.clipDef.select("path").attr("d",ae),K.layers.plotbg.select("path").attr("d",ae);var re="M0,"+q+"h"+V+"l-"+V/2+",-"+q+"Z";K.clipDefRelative.select("path").attr("d",re);var he=b(W,B);K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he),K.clipDefRelative.select("path").attr("transform",null);var Se=b(W-Ce._offset,B+q);K.layers.baxis.attr("transform",Se),K.layers.bgrid.attr("transform",Se);var xe=b(W+V/2,B)+"rotate(30)"+b(0,-ke._offset);K.layers.aaxis.attr("transform",xe),K.layers.agrid.attr("transform",xe);var Te=b(W+V/2,B)+"rotate(-30)"+b(0,-de._offset);K.layers.caxis.attr("transform",Te),K.layers.cgrid.attr("transform",Te),K.drawAxes(!0),K.layers.aline.select("path").attr("d",ke.showline?"M"+W+","+(B+q)+"l"+V/2+",-"+q:"M0,0").call(o.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),K.layers.bline.select("path").attr("d",Ce.showline?"M"+W+","+(B+q)+"h"+V:"M0,0").call(o.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),K.layers.cline.select("path").attr("d",de.showline?"M"+(W+V/2)+","+B+"l"+V/2+","+q:"M0,0").call(o.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),K.graphDiv._context.staticPlot||K.initInteractions(),t.setClipUrl(K.layers.frontplot,K._hasClipOnAxisFalse?null:K.clipId,K.graphDiv)},S.drawAxes=function(I){var N=this,W=N.graphDiv,B=N.id.substr(7)+"title",V=N.layers,q=N.aaxis,ne=N.baxis,$=N.caxis;if(N.drawAx(q),N.drawAx(ne),N.drawAx($),I){var K=Math.max(q.showticklabels?q.tickfont.size/2:0,($.showticklabels?.75*$.tickfont.size:0)+($.ticks==="outside"?.87*$.ticklen:0)),ee=(ne.showticklabels?ne.tickfont.size:0)+(ne.ticks==="outside"?ne.ticklen:0)+3;V["a-title"]=h.draw(W,"a"+B,{propContainer:q,propName:N.id+".aaxis.title",placeholder:c(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-q.title.font.size/3-K,"text-anchor":"middle"}}),V["b-title"]=h.draw(W,"b"+B,{propContainer:ne,propName:N.id+".baxis.title",placeholder:c(W,"Click to enter Component B title"),attributes:{x:N.x0-ee,y:N.y0+N.h+.83*ne.title.font.size+ee,"text-anchor":"middle"}}),V["c-title"]=h.draw(W,"c"+B,{propContainer:$,propName:N.id+".caxis.title",placeholder:c(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+ee,y:N.y0+N.h+.83*$.title.font.size+ee,"text-anchor":"middle"}})}},S.drawAx=function(I){var N,W=this,B=W.graphDiv,V=I._name,q=V.charAt(0),ne=I._id,$=W.layers[V],K=q+"tickLayout",ee=(N=I).ticks+String(N.ticklen)+String(N.showticklabels);W[K]!==ee&&($.selectAll("."+ne+"tick").remove(),W[K]=ee),I.setScale();var J=s.calcTicks(I),Z=s.clipEnds(I,J),te=s.makeTransTickFn(I),oe=s.getTickSigns(I)[2],se=w.deg2rad(30),ce=oe*(I.linewidth||1)/2,ye=oe*I.ticklen,me=W.w,fe=W.h,pe=q==="b"?"M0,"+ce+"l"+Math.sin(se)*ye+","+Math.cos(se)*ye:"M"+ce+",0l"+Math.cos(se)*ye+","+-Math.sin(se)*ye,ge={a:"M0,0l"+fe+",-"+me/2,b:"M0,0l-"+me/2+",-"+fe,c:"M0,0l-"+fe+","+me/2}[q];s.drawTicks(B,I,{vals:I.ticks==="inside"?Z:J,layer:$,path:pe,transFn:te,crisp:!1}),s.drawGrid(B,I,{vals:Z,layer:W.layers[q+"grid"],path:ge,transFn:te,crisp:!1}),s.drawLabels(B,I,{vals:J,layer:$,transFn:te,labelFns:s.makeLabelFns(I,0,30)})};var E=A.MINZOOM/2+.87,L="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",O="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",P="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",F=!0;function U(I){_.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){y(this.dragOptions),x(this.dragOptions.gd)},S.initInteractions=function(){var I,N,W,B,V,q,ne,$,K,ee,J,Z,te=this,oe=te.layers.plotbg.select("path").node(),se=te.graphDiv,ce=se._fullLayout._zoomlayer;function ye(re){var he={};return he[te.id+".aaxis.min"]=re.a,he[te.id+".baxis.min"]=re.b,he[te.id+".caxis.min"]=re.c,he}function me(re,he){var Se=se._fullLayout.clickmode;U(se),re===2&&(se.emit("plotly_doubleclick",null),r.call("_guiRelayout",se,ye({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&re===1&&v(he,se,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Se.indexOf("event")>-1&&u.click(se,he,te.id)}function fe(re,he){return 1-he/te.h}function pe(re,he){return 1-(re+(te.h-he)/Math.sqrt(3))/te.w}function ge(re,he){return(re-(te.h-he)/Math.sqrt(3))/te.w}function ke(re,he){var Se=W+re*I,xe=B+he*N,Te=Math.max(0,Math.min(1,fe(0,B),fe(0,xe))),Ae=Math.max(0,Math.min(1,pe(W,B),pe(Se,xe))),Pe=Math.max(0,Math.min(1,ge(W,B),ge(Se,xe))),De=(Te/2+Pe)*te.w,ve=(1-Te/2-Ae)*te.w,we=(De+ve)/2,Ee=ve-De,Fe=(1-Te)*te.h,Le=Fe-Ee/k;Ee<A.MINZOOM?(ne=V,J.attr("d",K),Z.attr("d","M0,0Z")):(ne={a:V.a+Te*q,b:V.b+Ae*q,c:V.c+Pe*q},J.attr("d",K+"M"+De+","+Fe+"H"+ve+"L"+we+","+Le+"L"+De+","+Fe+"Z"),Z.attr("d","M"+W+","+B+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+De+","+Fe+L+"M"+ve+","+Fe+O+"M"+we+","+Le+P)),ee||(J.transition().style("fill",$>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Z.transition().style("opacity",1).duration(200),ee=!0),se.emit("plotly_relayouting",ye(ne))}function Ce(){U(se),ne!==V&&(r.call("_guiRelayout",se,ye(ne)),F&&se.data&&se._context.showTips&&(w.notifier(c(se,"Double-click to zoom back out"),"long"),F=!1))}function de(re,he){var Se=re/te.xaxis._m,xe=he/te.yaxis._m,Te=[(ne={a:V.a-xe,b:V.b+(Se+xe)/2,c:V.c-(Se-xe)/2}).a,ne.b,ne.c].sort(w.sorterAsc),Ae=Te.indexOf(ne.a),Pe=Te.indexOf(ne.b),De=Te.indexOf(ne.c);Te[0]<0&&(Te[1]+Te[0]/2<0?(Te[2]+=Te[0]+Te[1],Te[0]=Te[1]=0):(Te[2]+=Te[0]/2,Te[1]+=Te[0]/2,Te[0]=0),ne={a:Te[Ae],b:Te[Pe],c:Te[De]},he=(V.a-ne.a)*te.yaxis._m,re=(V.c-ne.c-V.b+ne.b)*te.xaxis._m);var ve=b(te.x0+re,te.y0+he);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ve);var we=b(-re,-he);te.clipDefRelative.select("path").attr("transform",we),te.aaxis.range=[ne.a,te.sum-ne.b-ne.c],te.baxis.range=[te.sum-ne.a-ne.c,ne.b],te.caxis.range=[te.sum-ne.a-ne.b,ne.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,te),se.emit("plotly_relayouting",ye(ne))}function ae(){r.call("_guiRelayout",se,ye(ne))}this.dragOptions={element:oe,gd:se,plotinfo:{id:te.id,domain:se._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(re,he,Se){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],I=se._fullLayout._invScaleX,N=se._fullLayout._invScaleY;var xe=te.dragOptions.dragmode=se._fullLayout.dragmode;f(xe)?te.dragOptions.minDrag=1:te.dragOptions.minDrag=void 0,xe==="zoom"?(te.dragOptions.moveFn=ke,te.dragOptions.clickFn=me,te.dragOptions.doneFn=Ce,function(Te,Ae,Pe){var De=oe.getBoundingClientRect();W=Ae-De.left,B=Pe-De.top,se._fullLayout._calcInverseTransform(se);var ve=se._fullLayout._invTransform,we=w.apply3DTransform(ve)(W,B);W=we[0],B=we[1],V={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},ne=V,q=te.aaxis.range[1]-V.a,$=T(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),K="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",ee=!1,J=ce.append("path").attr("class","zoombox").attr("transform",b(te.x0,te.y0)).style({fill:$>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",K),Z=ce.append("path").attr("class","zoombox-corners").attr("transform",b(te.x0,te.y0)).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearOutline(se)}(0,he,Se)):xe==="pan"?(te.dragOptions.moveFn=de,te.dragOptions.clickFn=me,te.dragOptions.doneFn=ae,V={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},ne=V,te.clearOutline(se)):(m(xe)||f(xe))&&g(re,he,Se,te.dragOptions,xe)}},oe.onmousemove=function(re){u.hover(se,re,te.id),se._fullLayout._lasthover=oe,se._fullLayout._hoversubplot=te.id},oe.onmouseout=function(re){se._dragging||l.unhover(se,re)},l.init(this.dragOptions)}},24040:function(R,C,e){"use strict";var _=e(24248),T=e(16628),r=e(52416),w=e(63620),b=e(52200).addStyleRule,c=e(92880),o=e(45464),t=e(64859),i=c.extendFlat,n=c.extendDeepAll;function a(v){var x=v.name,y=v.categories,A=v.meta;if(C.modules[x])_.log("Type "+x+" already registered");else{C.subplotsRegistry[v.basePlotModule.name]||function(F){var U=F.name;if(C.subplotsRegistry[U])_.log("Plot type "+U+" already registered.");else for(var I in p(F),C.subplotsRegistry[U]=F,C.componentsRegistry)h(I,F.name)}(v.basePlotModule);for(var d={},S=0;S<y.length;S++)d[y[S]]=!0,C.allCategories[y[S]]=!0;for(var k in C.modules[x]={_module:v,categories:d},A&&Object.keys(A).length&&(C.modules[x].meta=A),C.allTypes.push(x),C.componentsRegistry)f(k,x);v.layoutAttributes&&i(C.traceLayoutAttributes,v.layoutAttributes);var E=v.basePlotModule,L=E.name;if(L==="mapbox"){var O=E.constants.styleRules;for(var P in O)b(".js-plotly-plot .plotly .mapboxgl-"+P,O[P])}L!=="geo"&&L!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function s(v){if(typeof v.name!="string")throw new Error("Component module *name* must be a string.");var x=v.name;for(var y in C.componentsRegistry[x]=v,v.layoutAttributes&&(v.layoutAttributes._isLinkedToArray&&r(C.layoutArrayContainers,x),p(v)),C.modules)f(x,y);for(var A in C.subplotsRegistry)h(x,A);for(var d in C.transformsRegistry)m(x,d);v.schema&&v.schema.layout&&n(t,v.schema.layout)}function l(v){if(typeof v.name!="string")throw new Error("Transform module *name* must be a string.");var x="Transform module "+v.name,y=typeof v.transform=="function",A=typeof v.calcTransform=="function";if(!y&&!A)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var d in y&&A&&_.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),w(v.attributes)||_.log(x+" registered without an *attributes* object."),typeof v.supplyDefaults!="function"&&_.log(x+" registered without a *supplyDefaults* method."),C.transformsRegistry[v.name]=v,C.componentsRegistry)m(d,v.name)}function u(v){var x=v.name,y=x.split("-")[0],A=v.dictionary,d=v.format,S=A&&Object.keys(A).length,k=d&&Object.keys(d).length,E=C.localeRegistry,L=E[x];if(L||(E[x]=L={}),y!==x){var O=E[y];O||(E[y]=O={}),S&&O.dictionary===L.dictionary&&(O.dictionary=A),k&&O.format===L.format&&(O.format=d)}S&&(L.dictionary=A),k&&(L.format=d)}function p(v){if(v.layoutAttributes){var x=v.layoutAttributes._arrayAttrRegexps;if(x)for(var y=0;y<x.length;y++)r(C.layoutArrayRegexes,x[y])}}function f(v,x){var y=C.componentsRegistry[v].schema;if(y&&y.traces){var A=y.traces[x];A&&n(C.modules[x]._module.attributes,A)}}function m(v,x){var y=C.componentsRegistry[v].schema;if(y&&y.transforms){var A=y.transforms[x];A&&n(C.transformsRegistry[x].attributes,A)}}function h(v,x){var y=C.componentsRegistry[v].schema;if(y&&y.subplots){var A=C.subplotsRegistry[x],d=A.layoutAttributes,S=A.attr==="subplot"?A.name:A.attr;Array.isArray(S)&&(S=S[0]);var k=y.subplots[S];d&&k&&n(d,k)}}function g(v){return typeof v=="object"&&(v=v.type),v}C.modules={},C.allCategories={},C.allTypes=[],C.subplotsRegistry={},C.transformsRegistry={},C.componentsRegistry={},C.layoutArrayContainers=[],C.layoutArrayRegexes=[],C.traceLayoutAttributes={},C.localeRegistry={},C.apiMethodRegistry={},C.collectableSubplotTypes=null,C.register=function(v){if(C.collectableSubplotTypes=null,!v)throw new Error("No argument passed to Plotly.register.");v&&!Array.isArray(v)&&(v=[v]);for(var x=0;x<v.length;x++){var y=v[x];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":a(y);break;case"transform":l(y);break;case"component":s(y);break;case"locale":u(y);break;case"apiMethod":var A=y.name;C.apiMethodRegistry[A]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},C.getModule=function(v){var x=C.modules[g(v)];return!!x&&x._module},C.traceIs=function(v,x){if((v=g(v))==="various")return!1;var y=C.modules[v];return y||(v&&_.log("Unrecognized trace type "+v+"."),y=C.modules[o.type.dflt]),!!y.categories[x]},C.getTransformIndices=function(v,x){for(var y=[],A=v.transforms||[],d=0;d<A.length;d++)A[d].type===x&&y.push(d);return y},C.hasTransform=function(v,x){for(var y=v.transforms||[],A=0;A<y.length;A++)if(y[A].type===x)return!0;return!1},C.getComponentMethod=function(v,x){var y=C.componentsRegistry[v];return y&&y[x]||T},C.call=function(){var v=arguments[0],x=[].slice.call(arguments,1);return C.apiMethodRegistry[v].apply(null,x)}},91536:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=T.extendFlat,w=T.extendDeep;function b(c){var o;switch(c){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}R.exports=function(c,o){var t,i,n=c.data,a=c.layout,s=w([],n),l=w({},a,b(o.tileClass)),u=c._context||{};if(o.width&&(l.width=o.width),o.height&&(l.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){l.annotations=[];var p=Object.keys(l);for(t=0;t<p.length;t++)i=p[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[p[t]].title={text:""});for(t=0;t<s.length;t++){var f=s[t];f.showscale=!1,f.marker&&(f.marker.showscale=!1),_.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(o.annotations))for(t=0;t<o.annotations.length;t++)l.annotations.push(o.annotations[t]);var m=Object.keys(l).filter(function(y){return y.match(/^scene\d*$/)});if(m.length){var h={};for(o.tileClass==="thumbnail"&&(h={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<m.length;t++){var g=l[m[t]];g.xaxis||(g.xaxis={}),g.yaxis||(g.yaxis={}),g.zaxis||(g.zaxis={}),r(g.xaxis,h),r(g.yaxis,h),r(g.zaxis,h),g._scene=null}}var v=document.createElement("div");o.tileClass&&(v.className=o.tileClass);var x={gd:v,td:v,layout:l,data:s,config:{staticPlot:o.staticPlot===void 0||o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return o.setBackground!=="transparent"&&(x.config.setBackground=o.setBackground||"opaque"),x.gd.defaultLayout=b(o.tileClass),x}},39792:function(R,C,e){"use strict";var _=e(3400),T=e(67024),r=e(48616),w=e(81792);R.exports=function(b,c){var o;return _.isPlainObject(b)||(o=_.getGraphDiv(b)),(c=c||{}).format=c.format||"png",c.width=c.width||null,c.height=c.height||null,c.imageDataOnly=!0,new Promise(function(t,i){o&&o._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),_.isIE()&&c.format!=="svg"&&i(new Error(w.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var n=T(b,c),a=c.filename||b.fn||"newplot";a+="."+c.format.replace("-","."),n.then(function(s){return o&&(o._snapshotInProgress=!1),r(s,a,c.format)}).then(function(s){t(s)}).catch(function(s){o&&(o._snapshotInProgress=!1),i(s)})})}},48616:function(R,C,e){"use strict";var _=e(3400),T=e(81792);R.exports=function(r,w,b){var c=document.createElement("a"),o="download"in c;return new Promise(function(t,i){var n,a;if(_.isIE())return n=T.createBlob(r,"svg"),window.navigator.msSaveBlob(n,w),n=null,t(w);if(o)return n=T.createBlob(r,b),a=T.createObjectURL(n),c.href=a,c.download=w,document.body.appendChild(c),c.click(),document.body.removeChild(c),T.revokeObjectURL(a),n=null,t(w);if(_.isSafari()){var s=b==="svg"?",":";base64,";return T.octetStream(s+encodeURIComponent(r)),t(w)}i(new Error("download error"))})}},81792:function(R,C,e){"use strict";var _=e(24040);C.getDelay=function(r){return r._has&&(r._has("gl3d")||r._has("gl2d")||r._has("mapbox"))?500:0},C.getRedrawFunc=function(r){return function(){_.getComponentMethod("colorbar","draw")(r)}},C.encodeSVG=function(r){return"data:image/svg+xml,"+encodeURIComponent(r)},C.encodeJSON=function(r){return"data:application/json,"+encodeURIComponent(r)};var T=window.URL||window.webkitURL;C.createObjectURL=function(r){return T.createObjectURL(r)},C.revokeObjectURL=function(r){return T.revokeObjectURL(r)},C.createBlob=function(r,w){if(w==="svg")return new window.Blob([r],{type:"image/svg+xml;charset=utf-8"});if(w==="full-json")return new window.Blob([r],{type:"application/json;charset=utf-8"});var b=function(c){for(var o=c.length,t=new ArrayBuffer(o),i=new Uint8Array(t),n=0;n<o;n++)i[n]=c.charCodeAt(n);return t}(window.atob(r));return new window.Blob([b],{type:"image/"+w})},C.octetStream=function(r){document.location.href="data:application/octet-stream"+r},C.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,C.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(R,C,e){"use strict";var _=e(81792),T={getDelay:_.getDelay,getRedrawFunc:_.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};R.exports=T},63268:function(R,C,e){"use strict";var _=e(3400),T=e(61252).EventEmitter,r=e(81792);R.exports=function(w){var b=w.emitter||new T,c=new Promise(function(o,t){var i=window.Image,n=w.svg,a=w.format||"png";if(_.isIE()&&a!=="svg"){var s=new Error(r.MSG_IE_BAD_FORMAT);return t(s),w.promise?c:b.emit("error",s)}var l,u,p=w.canvas,f=w.scale||1,m=w.width||300,h=w.height||150,g=f*m,v=f*h,x=p.getContext("2d",{willReadFrequently:!0}),y=new i;a==="svg"||_.isSafari()?u=r.encodeSVG(n):(l=r.createBlob(n,"svg"),u=r.createObjectURL(l)),p.width=g,p.height=v,y.onload=function(){var A;switch(l=null,r.revokeObjectURL(u),a!=="svg"&&x.drawImage(y,0,0,g,v),a){case"jpeg":A=p.toDataURL("image/jpeg");break;case"png":A=p.toDataURL("image/png");break;case"webp":A=p.toDataURL("image/webp");break;case"svg":A=u;break;default:var d="Image format is not jpeg, png, svg or webp.";if(t(new Error(d)),!w.promise)return b.emit("error",d)}o(A),w.promise||b.emit("success",A)},y.onerror=function(A){if(l=null,r.revokeObjectURL(u),t(A),!w.promise)return b.emit("error",A)},y.src=u});return w.promise?c:b}},61808:function(R,C,e){"use strict";var _=e(61252).EventEmitter,T=e(24040),r=e(3400),w=e(81792),b=e(91536),c=e(37164),o=e(63268);R.exports=function(t,i){var n=new _,a=b(t,{format:"png"}),s=a.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var l=w.getRedrawFunc(s);return T.call("_doPlot",s,a.data,a.layout,a.config).then(l).then(function(){var u=w.getDelay(s._fullLayout);setTimeout(function(){var p=c(s),f=document.createElement("canvas");f.id=r.randstr(),(n=o({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:f,emitter:n,svg:p})).clean=function(){s&&document.body.removeChild(s)}},u)}).catch(function(u){n.emit("error",u)}),n}},37164:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(76308),b=e(9616),c=/"/g,o="TOBESTRIPPED",t=new RegExp('("'+o+")|("+o+'")',"g");R.exports=function(i,n,a){var s,l=i._fullLayout,u=l._paper,p=l._toppaper,f=l.width,m=l.height;u.insert("rect",":first-child").call(r.setRect,0,0,f,m).call(w.fill,l.paper_bgcolor);var h=l._basePlotModules||[];for(s=0;s<h.length;s++){var g=h[s];g.toSVG&&g.toSVG(i)}if(p){var v=p.node().childNodes,x=Array.prototype.slice.call(v);for(s=0;s<x.length;s++){var y=x[s];y.childNodes.length&&u.node().appendChild(y)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var d=_.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){d.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&d.style("font-family",S.replace(c,o));var k=this.style.fontWeight;!k||k!=="normal"&&k!=="400"||d.style("font-weight",void 0);var E=this.style.fontStyle;E&&E==="normal"&&d.style("font-style",void 0);var L=this.style.fontVariant;L&&L==="normal"&&d.style("font-variant",void 0)}else d.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var d=_.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&d.style("fill",S.replace(c,o));var k=this.style.stroke;k&&k.indexOf("url(")!==-1&&d.style("stroke",k.replace(c,o))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),n==="svg"&&a&&(u.attr("width",a*f),u.attr("height",a*m),u.attr("viewBox","0 0 "+f+" "+m));var A=new window.XMLSerializer().serializeToString(u.node());return A=(A=(A=function(d){var S=_.select("body").append("div").style({display:"none"}).html(""),k=d.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),k}(A)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),T.isIE()&&(A=(A=(A=A.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),A}},84664:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){for(var w=0;w<T.length;w++)T[w].i=w;_.mergeArray(r.text,T,"tx"),_.mergeArray(r.hovertext,T,"htx");var b=r.marker;if(b){_.mergeArray(b.opacity,T,"mo",!0),_.mergeArray(b.color,T,"mc");var c=b.line;c&&(_.mergeArray(c.color,T,"mlc"),_.mergeArrayCastPositive(c.width,T,"mlw"))}}},20832:function(R,C,e){"use strict";var _=e(52904),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(21776).Gw,b=e(49084),c=e(25376),o=e(78048),t=e(98192).c,i=e(92880).extendFlat,n=c({editType:"calc",arrayOk:!0,colorEditType:"style"}),a=i({},_.marker.line.width,{dflt:0}),s=i({width:a,editType:"calc"},b("marker.line")),l=i({line:s,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});R.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:_.text,texttemplate:w({editType:"plot"},{keys:o.eventDataKeys}),hovertext:_.hovertext,hovertemplate:r({},{keys:o.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},n,{}),insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},_.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:{marker:{opacity:_.selected.marker.opacity,color:_.selected.marker.color,editType:"style"},textfont:_.selected.textfont,editType:"style"},unselected:{marker:{opacity:_.unselected.marker.opacity,color:_.unselected.marker.color,editType:"style"},textfont:_.unselected.textfont,editType:"style"},zorder:_.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(R,C,e){"use strict";var _=e(54460),T=e(1220),r=e(94288).hasColorscale,w=e(47128),b=e(84664),c=e(4500);R.exports=function(o,t){var i,n,a,s,l,u,p=_.getFromId(o,t.xaxis||"x"),f=_.getFromId(o,t.yaxis||"y"),m={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=p.makeCalcdata(t,"x",m),a=f.makeCalcdata(t,"y"),s=T(t,f,"y",a),l=!!t.yperiodalignment,u="y"):(i=f.makeCalcdata(t,"y",m),a=p.makeCalcdata(t,"x"),s=T(t,p,"x",a),l=!!t.xperiodalignment,u="x"),n=s.vals;for(var h=Math.min(n.length,i.length),g=new Array(h),v=0;v<h;v++)g[v]={p:n[v],s:i[v]},l&&(g[v].orig_p=a[v],g[v][u+"End"]=s.ends[v],g[v][u+"Start"]=s.starts[v]),t.ids&&(g[v].id=String(t.ids[v]));return r(t,"marker")&&w(o,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&w(o,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(g,t),c(g,t),g}},78048:function(R){"use strict";R.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(R,C,e){"use strict";var _=e(38248),T=e(3400).isArrayOrTypedArray,r=e(39032).BADNUM,w=e(24040),b=e(54460),c=e(71888).getAxisGroup,o=e(72592);function t(h,g,v,x,y){if(x.length){var A,d,S,k;switch(function(E,L){var O,P;for(O=0;O<L.length;O++){var F,U=L[O],I=U[0].trace,N=I.type==="funnel"?I._base:I.base,W=I.orientation==="h"?I.xcalendar:I.ycalendar,B=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(T(N)){for(P=0;P<Math.min(N.length,U.length);P++)F=B(N[P],0,W),_(F)?(U[P].b=+F,U[P].hasB=1):U[P].b=0;for(;P<U.length;P++)U[P].b=0}else{F=B(N,0,W);var V=_(F);for(F=V?F:0,P=0;P<U.length;P++)U[P].b=F,V&&(U[P].hasB=1)}}}(v,x),y.mode){case"overlay":i(g,v,x,y);break;case"group":for(A=[],d=[],S=0;S<x.length;S++)(k=x[S])[0].trace.offset===void 0?d.push(k):A.push(k);d.length&&function(E,L,O,P,F){var U=new o(P,{posAxis:L,sepNegVal:!1,overlapNoMerge:!F.norm});(function(I,N,W,B){for(var V=I._fullLayout,q=W.positions,ne=W.distinctPositions,$=W.minDiff,K=W.traces,ee=K.length,J=q.length!==ne.length,Z=$*(1-B.gap),te=c(V,N._id)+K[0][0].trace.orientation,oe=V._alignmentOpts[te]||{},se=0;se<ee;se++){var ce,ye,me=K[se],fe=me[0].trace,pe=oe[fe.alignmentgroup]||{},ge=Object.keys(pe.offsetGroups||{}).length,ke=(ce=ge?Z/ge:J?Z/ee:Z)*(1-(B.groupgap||0));ye=ge?((2*fe._offsetIndex+1-ge)*ce-ke)/2:J?((2*se+1-ee)*ce-ke)/2:-ke/2;var Ce=me[0].t;Ce.barwidth=ke,Ce.poffset=ye,Ce.bargroupwidth=Z,Ce.bardelta=$}W.binWidth=K[0][0].t.barwidth/100,a(W),s(N,W),l(N,W,J)})(E,L,U,F),function(I,N){for(var W=I.traces,B=0;B<W.length;B++){var V=W[B];if(V[0].trace.base===void 0)for(var q=new o([V],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),ne=0;ne<V.length;ne++){var $=V[ne];if($.p!==r){var K=q.put($.p,$.b+$.s);K&&($.b=K)}}}}(U,L),F.norm?(p(U),f(O,U,F)):u(O,U)}(h,g,v,d,y),A.length&&i(g,v,A,y);break;case"stack":case"relative":for(A=[],d=[],S=0;S<x.length;S++)(k=x[S])[0].trace.base===void 0?d.push(k):A.push(k);(function(E){if(!(E.length<2)){var L,O,P,F,U,I;for(L=0;L<E.length&&(F=(O=E[L][0].trace).marker?O.marker.cornerradius:void 0)===void 0;L++);if(F!==void 0)for(U=_(F)?+F:+F.slice(0,-1),I=_(F)?"px":"%",L=0;L<E.length;L++)(P=E[L][0].t).cornerradiusvalue=U,P.cornerradiusform=I}})(d),d.length&&function(E,L,O,P,F){var U=new o(P,{posAxis:L,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});n(L,U,F),function(V,q,ne){var $,K,ee,J,Z,te,oe=m(V),se=q.traces;for(J=0;J<se.length;J++)if((K=($=se[J])[0].trace).type==="funnel")for(Z=0;Z<$.length;Z++)(te=$[Z]).s!==r&&q.put(te.p,-.5*te.s);for(J=0;J<se.length;J++){ee=(K=($=se[J])[0].trace).type==="funnel";var ce=[];for(Z=0;Z<$.length;Z++)if((te=$[Z]).s!==r){var ye;ye=ee?te.s:te.s+te.b;var me=q.put(te.p,ye),fe=me+ye;te.b=me,te[oe]=fe,ne.norm||(ce.push(fe),te.hasB&&ce.push(me))}ne.norm||(K._extremes[V._id]=b.findExtremes(V,ce,{tozero:!0,padded:!0}))}}(O,U,F);for(var I=0;I<P.length;I++)for(var N=P[I],W=0;W<N.length;W++){var B=N[W];B.s!==r&&B.b+B.s===U.get(B.p,B.s)&&(B._outmost=!0)}F.norm&&f(O,U,F)}(0,g,v,d,y),A.length&&i(g,v,A,y)}(function(E){var L,O,P,F,U,I,N;for(L=0;L<E.length;L++)P=(O=E[L])[0].trace,(F=O[0].t).cornerradiusvalue===void 0&&(U=P.marker?P.marker.cornerradius:void 0)!==void 0&&(I=_(U)?+U:+U.slice(0,-1),N=_(U)?"px":"%",F.cornerradiusvalue=I,F.cornerradiusform=N)})(x),function(E,L){var O,P,F,U=m(L),I={},N=1/0,W=-1/0;for(O=0;O<E.length;O++)for(F=E[O],P=0;P<F.length;P++){var B=F[P].p;_(B)&&(N=Math.min(N,B),W=Math.max(W,B))}var V=1e4/(W-N),q=I.round=function(fe){return String(Math.round(V*(fe-N)))},ne={},$={},K=E.some(function(fe){var pe=fe[0].trace;return"marker"in pe&&pe.marker.cornerradius});for(O=0;O<E.length;O++){(F=E[O])[0].t.extents=I;var ee=F[0].t.poffset,J=T(ee);for(P=0;P<F.length;P++){var Z=F[P],te=Z[U]-Z.w/2;if(_(te)){var oe=Z[U]+Z.w/2,se=q(Z.p);I[se]?I[se]=[Math.min(te,I[se][0]),Math.max(oe,I[se][1])]:I[se]=[te,oe]}if(Z.p0=Z.p+(J?ee[P]:ee),Z.p1=Z.p0+Z.w,Z.s0=Z.b,Z.s1=Z.s0+Z.s,K){var ce=Math.min(Z.s0,Z.s1)||0,ye=Math.max(Z.s0,Z.s1)||0,me=Z[U];ne[me]=me in ne?Math.min(ne[me],ce):ce,$[me]=me in $?Math.max($[me],ye):ye}}}K&&function(fe,pe,ge,ke){for(var Ce=m(ke),de=0;de<fe.length;de++)for(var ae=fe[de],re=0;re<ae.length;re++){var he=ae[re],Se=he[Ce];he._sMin=pe[Se],he._sMax=ge[Se]}}(E,ne,$,L)}(x,g)}}function i(h,g,v,x){for(var y=0;y<v.length;y++){var A=v[y],d=new o([A],{posAxis:h,sepNegVal:!1,overlapNoMerge:!x.norm});n(h,d,x),x.norm?(p(d),f(g,d,x)):u(g,d)}}function n(h,g,v){for(var x=g.minDiff,y=g.traces,A=x*(1-v.gap),d=A*(1-(v.groupgap||0)),S=-d/2,k=0;k<y.length;k++){var E=y[k][0].t;E.barwidth=d,E.poffset=S,E.bargroupwidth=A,E.bardelta=x}g.binWidth=y[0][0].t.barwidth/100,a(g),s(h,g),l(h,g)}function a(h){var g,v,x=h.traces;for(g=0;g<x.length;g++){var y,A=x[g],d=A[0],S=d.trace,k=d.t,E=S._offset||S.offset,L=k.poffset;if(T(E)){for(y=Array.prototype.slice.call(E,0,A.length),v=0;v<y.length;v++)_(y[v])||(y[v]=L);for(v=y.length;v<A.length;v++)y.push(L);k.poffset=y}else E!==void 0&&(k.poffset=E);var O=S._width||S.width,P=k.barwidth;if(T(O)){var F=Array.prototype.slice.call(O,0,A.length);for(v=0;v<F.length;v++)_(F[v])||(F[v]=P);for(v=F.length;v<A.length;v++)F.push(P);if(k.barwidth=F,E===void 0){for(y=[],v=0;v<A.length;v++)y.push(L+(P-F[v])/2);k.poffset=y}}else O!==void 0&&(k.barwidth=O,E===void 0&&(k.poffset=L+(P-O)/2))}}function s(h,g){for(var v=g.traces,x=m(h),y=0;y<v.length;y++)for(var A=v[y],d=A[0].t,S=d.poffset,k=T(S),E=d.barwidth,L=T(E),O=0;O<A.length;O++){var P=A[O],F=P.w=L?E[O]:E;P.p===void 0&&(P.p=P[x],P["orig_"+x]=P[x]);var U=(k?S[O]:S)+F/2;P[x]=P.p+U}}function l(h,g,v){var x=g.traces,y=g.minDiff/2;b.minDtick(h,g.minDiff,g.distinctPositions[0],v);for(var A=0;A<x.length;A++){var d,S,k,E,L=x[A],O=L[0],P=O.trace,F=[];for(E=0;E<L.length;E++)S=(d=L[E]).p-y,k=d.p+y,F.push(S,k);if(P.width||P.offset){var U=O.t,I=U.poffset,N=U.barwidth,W=T(I),B=T(N);for(E=0;E<L.length;E++){d=L[E];var V=W?I[E]:I,q=B?N[E]:N;k=(S=d.p+V)+q,F.push(S,k)}}P._extremes[h._id]=b.findExtremes(h,F,{padded:!1})}}function u(h,g){for(var v=g.traces,x=m(h),y=0;y<v.length;y++){for(var A=v[y],d=A[0].trace,S=d.type==="scatter",k=d.orientation==="v",E=[],L=!1,O=0;O<A.length;O++){var P=A[O],F=S?0:P.b,U=S?k?P.y:P.x:F+P.s;P[x]=U,E.push(U),P.hasB&&E.push(F),P.hasB&&P.b||(L=!0)}d._extremes[h._id]=b.findExtremes(h,E,{tozero:L,padded:!0})}}function p(h){for(var g=h.traces,v=0;v<g.length;v++)for(var x=g[v],y=0;y<x.length;y++){var A=x[y];A.s!==r&&h.put(A.p,A.b+A.s)}}function f(h,g,v){var x=g.traces,y=m(h),A=v.norm==="fraction"?1:100,d=A/1e9,S=h.l2c(h.c2l(0)),k=v.mode==="stack"?A:S;function E(ne){return _(h.c2l(ne))&&(ne<S-d||ne>k+d||!_(S))}for(var L=0;L<x.length;L++){for(var O=x[L],P=O[0].trace,F=[],U=!1,I=!1,N=0;N<O.length;N++){var W=O[N];if(W.s!==r){var B=Math.abs(A/g.get(W.p,W.s));W.b*=B,W.s*=B;var V=W.b,q=V+W.s;W[y]=q,F.push(q),I=I||E(q),W.hasB&&(F.push(V),I=I||E(V)),W.hasB&&W.b||(U=!0)}}P._extremes[h._id]=b.findExtremes(h,F,{tozero:U,padded:I})}}function m(h){return h._id.charAt(0)}R.exports={crossTraceCalc:function(h,g){for(var v=g.xaxis,x=g.yaxis,y=h._fullLayout,A=h._fullData,d=h.calcdata,S=[],k=[],E=0;E<A.length;E++){var L=A[E];if(L.visible===!0&&w.traceIs(L,"bar")&&L.xaxis===v._id&&L.yaxis===x._id&&(L.orientation==="h"?S.push(d[E]):k.push(d[E]),L._computePh))for(var O=h.calcdata[E],P=0;P<O.length;P++)typeof O[P].ph0=="function"&&(O[P].ph0=O[P].ph0()),typeof O[P].ph1=="function"&&(O[P].ph1=O[P].ph1())}var F={xCat:v.type==="category"||v.type==="multicategory",yCat:x.type==="category"||x.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};t(h,v,x,k,F),t(h,x,v,S,F)},setGroupPositions:t}},31508:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(76308),w=e(24040),b=e(43980),c=e(31147),o=e(55592),t=e(20011),i=e(20832),n=T.coerceFont;function a(l){if(_(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&_(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function s(l,u,p,f,m,h){var g=(h=h||{}).moduleHasSelected!==!1,v=h.moduleHasUnselected!==!1,x=h.moduleHasConstrain!==!1,y=h.moduleHasCliponaxis!==!1,A=h.moduleHasTextangle!==!1,d=h.moduleHasInsideanchor!==!1,S=!!h.hasPathbar,k=Array.isArray(m)||m==="auto",E=k||m==="inside",L=k||m==="outside";if(E||L){var O=n(f,"textfont",p.font),P=T.extendFlat({},O),F=!(l.textfont&&l.textfont.color);if(F&&delete P.color,n(f,"insidetextfont",P),S){var U=T.extendFlat({},O);F&&delete U.color,n(f,"pathbar.textfont",U)}L&&n(f,"outsidetextfont",O),g&&f("selected.textfont.color"),v&&f("unselected.textfont.color"),x&&f("constraintext"),y&&f("cliponaxis"),A&&f("textangle"),f("texttemplate")}E&&d&&f("insidetextanchor")}R.exports={supplyDefaults:function(l,u,p,f){function m(x,y){return T.coerce(l,u,i,x,y)}if(b(l,u,f,m)){c(l,u,f,m),m("xhoverformat"),m("yhoverformat"),m("zorder"),m("orientation",u.x&&!u.y?"h":"v"),m("base"),m("offset"),m("width"),m("text"),m("hovertext"),m("hovertemplate");var h=m("textposition");s(l,0,f,m,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(l,u,m,p,f);var g=(u.marker.line||{}).color,v=w.getComponentMethod("errorbars","supplyDefaults");v(l,u,g||r.defaultLine,{axis:"y"}),v(l,u,g||r.defaultLine,{axis:"x",inherit:"y"}),T.coerceSelectionMarkerOpacity(u,m)}else u.visible=!1},crossTraceDefaults:function(l,u){var p,f;function m(v,x){return T.coerce(f._input,f,i,v,x)}for(var h=0;h<l.length;h++)if((f=l[h]).type==="bar"){p=f._input;var g=m("marker.cornerradius",u.barcornerradius);f.marker&&(f.marker.cornerradius=a(g)),u.barmode==="group"&&t(p,f,u,m)}},handleText:s,validateCornerradius:a}},52160:function(R){"use strict";R.exports=function(C,e,_){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),_.orientation==="h"?(C.label=C.y,C.value=C.x):(C.label=C.x,C.value=C.y),C}},60444:function(R,C,e){"use strict";var _=e(38248),T=e(49760),r=e(3400).isArrayOrTypedArray;C.coerceString=function(w,b,c){if(typeof b=="string"){if(b||!w.noBlank)return b}else if((typeof b=="number"||b===!0)&&!w.strict)return String(b);return c!==void 0?c:w.dflt},C.coerceNumber=function(w,b,c){if(_(b)){b=+b;var o=w.min,t=w.max;if(!(o!==void 0&&b<o||t!==void 0&&b>t))return b}return c!==void 0?c:w.dflt},C.coerceColor=function(w,b,c){return T(b).isValid()?b:c!==void 0?c:w.dflt},C.coerceEnumerated=function(w,b,c){return w.coerceNumber&&(b=+b),w.values.indexOf(b)!==-1?b:c!==void 0?c:w.dflt},C.getValue=function(w,b){var c;return r(w)?b<w.length&&(c=w[b]):c=w,c},C.getLineWidth=function(w,b){return 0<b.mlw?b.mlw:r(w.marker.line.width)?0:w.marker.line.width}},63400:function(R,C,e){"use strict";var _=e(93024),T=e(24040),r=e(76308),w=e(3400).fillText,b=e(60444).getLineWidth,c=e(54460).hoverLabelText,o=e(39032).BADNUM;function t(n,a,s,l,u){var p,f,m,h,g,v,x,y=n.cd,A=y[0].trace,d=y[0].t,S=l==="closest",k=A.type==="waterfall",E=n.maxHoverDistance,L=n.maxSpikeDistance;A.orientation==="h"?(p=s,f=a,m="y",h="x",g=$,v=q):(p=a,f=s,m="x",h="y",v=$,g=q);var O=A[m+"period"],P=S||O;function F(ce){return I(ce,-1)}function U(ce){return I(ce,1)}function I(ce,ye){var me=ce.w;return ce[m]+ye*me/2}function N(ce){return ce[m+"End"]-ce[m+"Start"]}var W=S?F:O?function(ce){return ce.p-N(ce)/2}:function(ce){return Math.min(F(ce),ce.p-d.bardelta/2)},B=S?U:O?function(ce){return ce.p+N(ce)/2}:function(ce){return Math.max(U(ce),ce.p+d.bardelta/2)};function V(ce,ye,me){return u.finiteRange&&(me=0),_.inbox(ce-p,ye-p,me+Math.min(1,Math.abs(ye-ce)/x)-1)}function q(ce){return V(W(ce),B(ce),E)}function ne(ce){var ye=ce[h];if(k){var me=Math.abs(ce.rawS)||0;f>0?ye+=me:f<0&&(ye-=me)}return ye}function $(ce){var ye=f,me=ce.b,fe=ne(ce);return _.inbox(me-ye,fe-ye,E+(fe-ye)/(fe-me)-1)}var K=n[m+"a"],ee=n[h+"a"];x=Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0]));var J=_.getDistanceFunction(l,g,v,function(ce){return(g(ce)+v(ce))/2});if(_.getClosest(y,J,n),n.index!==!1&&y[n.index].p!==o){P||(W=function(ce){return Math.min(F(ce),ce.p-d.bargroupwidth/2)},B=function(ce){return Math.max(U(ce),ce.p+d.bargroupwidth/2)});var Z=y[n.index],te=A.base?Z.b+Z.s:Z.s;n[h+"0"]=n[h+"1"]=ee.c2p(Z[h],!0),n[h+"LabelVal"]=te;var oe=d.extents[d.extents.round(Z.p)];n[m+"0"]=K.c2p(S?W(Z):oe[0],!0),n[m+"1"]=K.c2p(S?B(Z):oe[1],!0);var se=Z.orig_p!==void 0;return n[m+"LabelVal"]=se?Z.orig_p:Z.p,n.labelLabel=c(K,n[m+"LabelVal"],A[m+"hoverformat"]),n.valueLabel=c(ee,n[h+"LabelVal"],A[h+"hoverformat"]),n.baseLabel=c(ee,Z.b,A[h+"hoverformat"]),n.spikeDistance=(function(ce){var ye=f,me=ce.b,fe=ne(ce);return _.inbox(me-ye,fe-ye,L+(fe-ye)/(fe-me)-1)}(Z)+function(ce){return V(F(ce),U(ce),L)}(Z))/2,n[m+"Spike"]=K.c2p(Z.p,!0),w(Z,A,n),n.hovertemplate=A.hovertemplate,n}}function i(n,a){var s=a.mcc||n.marker.color,l=a.mlcc||n.marker.line.color,u=b(n,a);return r.opacity(s)?s:r.opacity(l)&&u?l:void 0}R.exports={hoverPoints:function(n,a,s,l,u){var p=t(n,a,s,l,u);if(p){var f=p.cd,m=f[0].trace,h=f[p.index];return p.color=i(m,h),T.getComponentMethod("errorbars","hoverInfo")(h,m,p),[p]}},hoverOnBars:t,getTraceColor:i}},51132:function(R,C,e){"use strict";R.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(R){"use strict";R.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(R,C,e){"use strict";var _=e(24040),T=e(54460),r=e(3400),w=e(39324),b=e(31508).validateCornerradius;R.exports=function(c,o,t){function i(g,v){return r.coerce(c,o,w,g,v)}for(var n=!1,a=!1,s=!1,l={},u=i("barmode"),p=0;p<t.length;p++){var f=t[p];if(_.traceIs(f,"bar")&&f.visible){if(n=!0,u==="group"){var m=f.xaxis+f.yaxis;l[m]&&(s=!0),l[m]=!0}f.visible&&f.type==="histogram"&&T.getFromId({_fullLayout:o},f[f.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(a=!0)}}if(n){u!=="overlay"&&i("barnorm"),i("bargap",a&&!s?0:.2),i("bargroupgap");var h=i("barcornerradius");o.barcornerradius=b(h)}else delete o.barmode}},98184:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(3400),w=e(72736),b=e(76308),c=e(43616),o=e(24040),t=e(54460).tickText,i=e(82744),n=i.recordMinTextSize,a=i.clearMinTextSize,s=e(60100),l=e(60444),u=e(78048),p=e(20832),f=p.text,m=p.textposition,h=e(10624).appendArrayPointValue,g=u.TEXTPAD;function v(P){return P.id}function x(P){if(P.ids)return v}function y(P){return(P>0)-(P<0)}function A(P,F){return P<F?1:-1}function d(P,F,U,I){var N;return!F.uniformtext.mode&&S(U)?(I&&(N=I()),P.transition().duration(U.duration).ease(U.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):P}function S(P){return P&&P.duration>0}function k(P,F,U,I,N){return!(P<0||F<0)&&(U<=P&&I<=F||U<=F&&I<=P||(N?P>=U*(F/I):F>=I*(P/U)))}function E(P){return P==="auto"?0:P}function L(P,F){var U=Math.PI/180*F,I=Math.abs(Math.sin(U)),N=Math.abs(Math.cos(U));return{x:P.width*N+P.height*I,y:P.width*I+P.height*N}}function O(P,F,U,I,N,W){var B=!!W.isHorizontal,V=!!W.constrained,q=W.angle||0,ne=W.anchor,$=ne==="end",K=ne==="start",ee=((W.leftToRight||0)+1)/2,J=1-ee,Z=W.hasB,te=W.r,oe=W.overhead,se=N.width,ce=N.height,ye=Math.abs(F-P),me=Math.abs(I-U),fe=ye>2*g&&me>2*g?g:0;ye-=2*fe,me-=2*fe;var pe=E(q);q!=="auto"||se<=ye&&ce<=me||!(se>ye||ce>me)||(se>me||ce>ye)&&se<ce==ye<me||(pe+=90);var ge,ke,Ce=L(N,pe);if(te&&te-oe>g){var de=function(De,ve,we,Ee,Fe,Le,je,Ge,Je){var rt,ot,yt,_t,mt=Math.max(0,Math.abs(ve-De)-2*g),tt=Math.max(0,Math.abs(Ee-we)-2*g),Qe=Le-g,Dt=je?Qe-Math.sqrt(Qe*Qe-(Qe-je)*(Qe-je)):Qe,zt=Je?2*Qe:Ge?Qe-je:2*Dt,pt=Je?2*Qe:Ge?2*Dt:Qe-je;return Fe.y/Fe.x>=tt/(mt-zt)?_t=tt/Fe.y:Fe.y/Fe.x<=(tt-pt)/mt?_t=mt/Fe.x:!Je&&Ge?(rt=Fe.x*Fe.x+Fe.y*Fe.y/4,yt=(mt-Qe)*(mt-Qe)+(tt/2-Qe)*(tt/2-Qe)-Qe*Qe,_t=(-(ot=-2*Fe.x*(mt-Qe)-Fe.y*(tt/2-Qe))+Math.sqrt(ot*ot-4*rt*yt))/(2*rt)):Je?(rt=(Fe.x*Fe.x+Fe.y*Fe.y)/4,yt=(mt/2-Qe)*(mt/2-Qe)+(tt/2-Qe)*(tt/2-Qe)-Qe*Qe,_t=(-(ot=-Fe.x*(mt/2-Qe)-Fe.y*(tt/2-Qe))+Math.sqrt(ot*ot-4*rt*yt))/(2*rt)):(rt=Fe.x*Fe.x/4+Fe.y*Fe.y,yt=(mt/2-Qe)*(mt/2-Qe)+(tt-Qe)*(tt-Qe)-Qe*Qe,_t=(-(ot=-Fe.x*(mt/2-Qe)-2*Fe.y*(tt-Qe))+Math.sqrt(ot*ot-4*rt*yt))/(2*rt)),{scale:_t=Math.min(1,_t),pad:Ge?Math.max(0,Qe-Math.sqrt(Math.max(0,Qe*Qe-(Qe-(tt-Fe.y*_t)/2)*(Qe-(tt-Fe.y*_t)/2)))-je):Math.max(0,Qe-Math.sqrt(Math.max(0,Qe*Qe-(Qe-(mt-Fe.x*_t)/2)*(Qe-(mt-Fe.x*_t)/2)))-je)}}(P,F,U,I,Ce,te,oe,B,Z);ge=de.scale,ke=de.pad}else ge=1,V&&(ge=Math.min(1,ye/Ce.x,me/Ce.y)),ke=0;var ae=N.left*J+N.right*ee,re=(N.top+N.bottom)/2,he=(P+g)*J+(F-g)*ee,Se=(U+I)/2,xe=0,Te=0;if(K||$){var Ae=(B?Ce.x:Ce.y)/2;te&&($||Z)&&(fe+=ke);var Pe=B?A(P,F):A(U,I);B?K?(he=P+Pe*fe,xe=-Pe*Ae):(he=F-Pe*fe,xe=Pe*Ae):K?(Se=U+Pe*fe,Te=-Pe*Ae):(Se=I-Pe*fe,Te=Pe*Ae)}return{textX:ae,textY:re,targetX:he,targetY:Se,anchorX:xe,anchorY:Te,scale:ge,rotate:pe}}R.exports={plot:function(P,F,U,I,N,W){var B=F.xaxis,V=F.yaxis,q=P._fullLayout,ne=P._context.staticPlot;N||(N={mode:q.barmode,norm:q.barmode,gap:q.bargap,groupgap:q.bargroupgap},a("bar",q));var $=r.makeTraceGroups(I,U,"trace bars").each(function(K){var ee=_.select(this),J=K[0].trace,Z=K[0].t,te=J.type==="waterfall",oe=J.type==="funnel",se=J.type==="histogram",ce=J.type==="bar",ye=ce||oe,me=0;te&&J.connector.visible&&J.connector.mode==="between"&&(me=J.connector.line.width/2);var fe=J.orientation==="h",pe=S(N),ge=r.ensureSingle(ee,"g","points"),ke=x(J),Ce=ge.selectAll("g.point").data(r.identity,ke);Ce.enter().append("g").classed("point",!0),Ce.exit().remove(),Ce.each(function(ae,re){var he,Se,xe=_.select(this),Te=function(lt,xt,bt,Ve){var Be=[],at=[],ht=Ve?xt:bt,dt=Ve?bt:xt;return Be[0]=ht.c2p(lt.s0,!0),at[0]=dt.c2p(lt.p0,!0),Be[1]=ht.c2p(lt.s1,!0),at[1]=dt.c2p(lt.p1,!0),Ve?[Be,at]:[at,Be]}(ae,B,V,fe),Ae=Te[0][0],Pe=Te[0][1],De=Te[1][0],ve=Te[1][1],we=(fe?Pe-Ae:ve-De)==0;if(we&&ye&&l.getLineWidth(J,ae)&&(we=!1),we||(we=!(T(Ae)&&T(Pe)&&T(De)&&T(ve))),ae.isBlank=we,we&&(fe?Pe=Ae:ve=De),me&&!we&&(fe?(Ae-=A(Ae,Pe)*me,Pe+=A(Ae,Pe)*me):(De-=A(De,ve)*me,ve+=A(De,ve)*me)),J.type==="waterfall"){if(!we){var Ee=J[ae.dir].marker;he=Ee.line.width,Se=Ee.color}}else he=l.getLineWidth(J,ae),Se=ae.mc||J.marker.color;function Fe(lt){var xt=_.round(he/2%1,2);return N.gap===0&&N.groupgap===0?_.round(Math.round(lt)-xt,2):lt}var Le=b.opacity(Se)<1||he>.01?Fe:function(lt,xt,bt){return bt&&lt===xt?lt:Math.abs(lt-xt)>=2?Fe(lt):lt>xt?Math.ceil(lt):Math.floor(lt)};P._context.staticPlot||(Ae=Le(Ae,Pe,fe),Pe=Le(Pe,Ae,fe),De=Le(De,ve,!fe),ve=Le(ve,De,!fe));var je,Ge=fe?B.c2p:V.c2p;je=ae.s0>0?ae._sMax:ae.s0<0?ae._sMin:ae.s1>0?ae._sMax:ae._sMin;var Je,rt,ot=ce||se?function(lt,xt){if(!lt)return 0;var bt,Ve=Math.abs(fe?ve-De:Pe-Ae),Be=Math.abs(fe?Pe-Ae:ve-De),at=Le(Math.abs(Ge(je,!0)-Ge(0,!0))),ht=ae.hasB?Math.min(Ve/2,Be/2):Math.min(Ve/2,at);return bt=xt==="%"?Ve*(Math.min(50,lt)/100):lt,Le(Math.max(Math.min(bt,ht),0))}(Z.cornerradiusvalue,Z.cornerradiusform):0,yt="M"+Ae+","+De+"V"+ve+"H"+Pe+"V"+De+"Z",_t=0;if(ot&&ae.s){var mt=y(ae.s0)===0||y(ae.s)===y(ae.s0)?ae.s1:ae.s0;if((_t=Le(ae.hasB?0:Math.abs(Ge(je,!0)-Ge(mt,!0))))<ot){var tt=A(Ae,Pe),Qe=A(De,ve),Dt=tt===-Qe?1:0;if(fe)if(ae.hasB)Je="M"+(Ae+ot*tt)+","+De+"A "+ot+","+ot+" 0 0 "+Dt+" "+Ae+","+(De+ot*Qe)+"V"+(ve-ot*Qe)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Ae+ot*tt)+","+ve+"H"+(Pe-ot*tt)+"A "+ot+","+ot+" 0 0 "+Dt+" "+Pe+","+(ve-ot*Qe)+"V"+(De+ot*Qe)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Pe-ot*tt)+","+De+"Z";else{var zt=(rt=Math.abs(Pe-Ae)+_t)<ot?ot-Math.sqrt(rt*(2*ot-rt)):0,pt=_t>0?Math.sqrt(_t*(2*ot-_t)):0,vt=tt>0?Math.max:Math.min;Je="M"+Ae+","+De+"V"+(ve-zt*Qe)+"H"+vt(Pe-(ot-_t)*tt,Ae)+"A "+ot+","+ot+" 0 0 "+Dt+" "+Pe+","+(ve-ot*Qe-pt)+"V"+(De+ot*Qe+pt)+"A "+ot+","+ot+" 0 0 "+Dt+" "+vt(Pe-(ot-_t)*tt,Ae)+","+(De+zt*Qe)+"Z"}else if(ae.hasB)Je="M"+(Ae+ot*tt)+","+De+"A "+ot+","+ot+" 0 0 "+Dt+" "+Ae+","+(De+ot*Qe)+"V"+(ve-ot*Qe)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Ae+ot*tt)+","+ve+"H"+(Pe-ot*tt)+"A "+ot+","+ot+" 0 0 "+Dt+" "+Pe+","+(ve-ot*Qe)+"V"+(De+ot*Qe)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Pe-ot*tt)+","+De+"Z";else{var We=(rt=Math.abs(ve-De)+_t)<ot?ot-Math.sqrt(rt*(2*ot-rt)):0,Ze=_t>0?Math.sqrt(_t*(2*ot-_t)):0,Ne=Qe>0?Math.max:Math.min;Je="M"+(Ae+We*tt)+","+De+"V"+Ne(ve-(ot-_t)*Qe,De)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Ae+ot*tt-Ze)+","+ve+"H"+(Pe-ot*tt+Ze)+"A "+ot+","+ot+" 0 0 "+Dt+" "+(Pe-We*tt)+","+Ne(ve-(ot-_t)*Qe,De)+"V"+De+"Z"}}else Je=yt}else Je=yt;var Xe=d(r.ensureSingle(xe,"path"),q,N,W);if(Xe.style("vector-effect",ne?"none":"non-scaling-stroke").attr("d",isNaN((Pe-Ae)*(ve-De))||we&&P._context.staticPlot?"M0,0Z":Je).call(c.setClipUrl,F.layerClipId,P),!q.uniformtext.mode&&pe){var st=c.makePointStyleFns(J);c.singlePointStyle(ae,Xe,J,st,P)}(function(lt,xt,bt,Ve,Be,at,ht,dt,it,kt,Tt,St,wt){var At,Ft=xt.xaxis,jt=xt.yaxis,rn=lt._fullLayout;function nn(fr,Xt,mn){return r.ensureSingle(fr,"text").text(Xt).attr({class:"bartext bartext-"+At,"text-anchor":"middle","data-notex":1}).call(c.font,mn).call(w.convertToTspans,lt)}var on=Ve[0].trace,Ht=on.orientation==="h",$t=function(fr,Xt,mn,Pt,Zt){var Wt,gn=Xt[0].trace;return Wt=gn.texttemplate?function(pn,kn,vn,cn,qt){var Nt=kn[0].trace,tn=r.castOption(Nt,vn,"texttemplate");if(!tn)return"";var _n,Fn,zn,Pn,$n=Nt.type==="histogram",Wn=Nt.type==="waterfall",tr=Nt.type==="funnel",qn=Nt.orientation==="h";function Jn(Nr){return t(Pn,Pn.c2l(Nr),!0).text}qn?(_n="y",Fn=qt,zn="x",Pn=cn):(_n="x",Fn=cn,zn="y",Pn=qt);var sr,wr=kn[vn],pr={};pr.label=wr.p,pr.labelLabel=pr[_n+"Label"]=(sr=wr.p,t(Fn,Fn.c2l(sr),!0).text);var rr=r.castOption(Nt,wr.i,"text");(rr===0||rr)&&(pr.text=rr),pr.value=wr.s,pr.valueLabel=pr[zn+"Label"]=Jn(wr.s);var yr={};h(yr,Nt,wr.i),($n||yr.x===void 0)&&(yr.x=qn?pr.value:pr.label),($n||yr.y===void 0)&&(yr.y=qn?pr.label:pr.value),($n||yr.xLabel===void 0)&&(yr.xLabel=qn?pr.valueLabel:pr.labelLabel),($n||yr.yLabel===void 0)&&(yr.yLabel=qn?pr.labelLabel:pr.valueLabel),Wn&&(pr.delta=+wr.rawS||wr.s,pr.deltaLabel=Jn(pr.delta),pr.final=wr.v,pr.finalLabel=Jn(pr.final),pr.initial=pr.final-pr.delta,pr.initialLabel=Jn(pr.initial)),tr&&(pr.value=wr.s,pr.valueLabel=Jn(pr.value),pr.percentInitial=wr.begR,pr.percentInitialLabel=r.formatPercent(wr.begR),pr.percentPrevious=wr.difR,pr.percentPreviousLabel=r.formatPercent(wr.difR),pr.percentTotal=wr.sumR,pr.percenTotalLabel=r.formatPercent(wr.sumR));var kr=r.castOption(Nt,wr.i,"customdata");return kr&&(pr.customdata=kr),r.texttemplateString(tn,pr,pn._d3locale,yr,pr,Nt._meta||{})}(fr,Xt,mn,Pt,Zt):gn.textinfo?function(pn,kn,vn,cn){var qt=pn[0].trace,Nt=qt.orientation==="h",tn=qt.type==="waterfall",_n=qt.type==="funnel";function Fn(kr){return t(Nt?vn:cn,+kr,!0).text}var zn,Pn,$n=qt.textinfo,Wn=pn[kn],tr=$n.split("+"),qn=[],Jn=function(kr){return tr.indexOf(kr)!==-1};if(Jn("label")&&qn.push((Pn=pn[kn].p,t(Nt?cn:vn,Pn,!0).text)),Jn("text")&&((zn=r.castOption(qt,Wn.i,"text"))===0||zn)&&qn.push(zn),tn){var sr=+Wn.rawS||Wn.s,wr=Wn.v,pr=wr-sr;Jn("initial")&&qn.push(Fn(pr)),Jn("delta")&&qn.push(Fn(sr)),Jn("final")&&qn.push(Fn(wr))}if(_n){Jn("value")&&qn.push(Fn(Wn.s));var rr=0;Jn("percent initial")&&rr++,Jn("percent previous")&&rr++,Jn("percent total")&&rr++;var yr=rr>1;Jn("percent initial")&&(zn=r.formatPercent(Wn.begR),yr&&(zn+=" of initial"),qn.push(zn)),Jn("percent previous")&&(zn=r.formatPercent(Wn.difR),yr&&(zn+=" of previous"),qn.push(zn)),Jn("percent total")&&(zn=r.formatPercent(Wn.sumR),yr&&(zn+=" of total"),qn.push(zn))}return qn.join("<br>")}(Xt,mn,Pt,Zt):l.getValue(gn.text,mn),l.coerceString(f,Wt)}(rn,Ve,Be,Ft,jt);At=function(fr,Xt){var mn=l.getValue(fr.textposition,Xt);return l.coerceEnumerated(m,mn)}(on,Be);var bn=St.mode==="stack"||St.mode==="relative",ln=Ve[Be],Kt=!bn||ln._outmost,fn=ln.hasB,en=kt&&kt-Tt>g;if($t&&At!=="none"&&(!ln.isBlank&&at!==ht&&dt!==it||At!=="auto"&&At!=="inside")){var un=rn.font,An=s.getBarColor(Ve[Be],on),wn=s.getInsideTextFont(on,Be,un,An),On=s.getOutsideTextFont(on,Be,un),Tn=on.insidetextanchor||"end",Cn=bt.datum();Ht?Ft.type==="log"&&Cn.s0<=0&&(at=Ft.range[0]<Ft.range[1]?0:Ft._length):jt.type==="log"&&Cn.s0<=0&&(dt=jt.range[0]<jt.range[1]?jt._length:0);var Bn,Xn,cr,Yn,jn,Kn=Math.abs(ht-at),or=Math.abs(it-dt),Qt=Kn-2*g,an=or-2*g;if(At==="outside"&&(Kt||ln.hasB||(At="inside")),At==="auto")if(Kt){At="inside",Bn=nn(bt,$t,jn=r.ensureUniformFontSize(lt,wn)),cr=(Xn=c.bBox(Bn.node())).width,Yn=Xn.height;var Dn,yn=cr>0&&Yn>0;Dn=en?fn?k(Qt-2*kt,an,cr,Yn,Ht)||k(Qt,an-2*kt,cr,Yn,Ht):Ht?k(Qt-(kt-Tt),an,cr,Yn,Ht)||k(Qt,an-2*(kt-Tt),cr,Yn,Ht):k(Qt,an-(kt-Tt),cr,Yn,Ht)||k(Qt-2*(kt-Tt),an,cr,Yn,Ht):k(Qt,an,cr,Yn,Ht),yn&&Dn?At="inside":(At="outside",Bn.remove(),Bn=null)}else At="inside";if(!Bn){var Ln=(Bn=nn(bt,$t,jn=r.ensureUniformFontSize(lt,At==="outside"?On:wn))).attr("transform");if(Bn.attr("transform",""),cr=(Xn=c.bBox(Bn.node())).width,Yn=Xn.height,Bn.attr("transform",Ln),cr<=0||Yn<=0)return void Bn.remove()}var Vn,Un=on.textangle;Vn=At==="outside"?function(fr,Xt,mn,Pt,Zt,Wt){var gn,pn=!!Wt.isHorizontal,kn=!!Wt.constrained,vn=Wt.angle||0,cn=Zt.width,qt=Zt.height,Nt=Math.abs(Xt-fr),tn=Math.abs(Pt-mn);gn=pn?tn>2*g?g:0:Nt>2*g?g:0;var _n=1;kn&&(_n=pn?Math.min(1,tn/qt):Math.min(1,Nt/cn));var Fn=E(vn),zn=L(Zt,Fn),Pn=(pn?zn.x:zn.y)/2,$n=(Zt.left+Zt.right)/2,Wn=(Zt.top+Zt.bottom)/2,tr=(fr+Xt)/2,qn=(mn+Pt)/2,Jn=0,sr=0,wr=pn?A(Xt,fr):A(mn,Pt);return pn?(tr=Xt-wr*gn,Jn=wr*Pn):(qn=Pt+wr*gn,sr=-wr*Pn),{textX:$n,textY:Wn,targetX:tr,targetY:qn,anchorX:Jn,anchorY:sr,scale:_n,rotate:Fn}}(at,ht,dt,it,Xn,{isHorizontal:Ht,constrained:on.constraintext==="both"||on.constraintext==="outside",angle:Un}):O(at,ht,dt,it,Xn,{isHorizontal:Ht,constrained:on.constraintext==="both"||on.constraintext==="inside",angle:Un,anchor:Tn,hasB:fn,r:kt,overhead:Tt}),Vn.fontSize=jn.size,n(on.type==="histogram"?"bar":on.type,Vn,rn),ln.transform=Vn;var er=d(Bn,rn,St,wt);r.setTransormAndDisplay(er,Vn)}else bt.select("text").remove()})(P,F,xe,K,re,Ae,Pe,De,ve,ot,_t,N,W),F.layerClipId&&c.hideOutsideRangePoint(ae,xe.select("text"),B,V,J.xcalendar,J.ycalendar)});var de=J.cliponaxis===!1;c.setClipUrl(ee,de?null:F.layerClipId,P)});o.getComponentMethod("errorbars","plot")(P,$,F,N)},toMoveInsideBar:O}},45784:function(R){"use strict";function C(e,_,T,r,w){var b=_.c2p(r?e.s0:e.p0,!0),c=_.c2p(r?e.s1:e.p1,!0),o=T.c2p(r?e.p0:e.s0,!0),t=T.c2p(r?e.p1:e.s1,!0);return w?[(b+c)/2,(o+t)/2]:r?[c,(o+t)/2]:[(b+c)/2,t]}R.exports=function(e,_){var T,r=e.cd,w=e.xaxis,b=e.yaxis,c=r[0].trace,o=c.type==="funnel",t=c.orientation==="h",i=[];if(_===!1)for(T=0;T<r.length;T++)r[T].selected=0;else for(T=0;T<r.length;T++){var n=r[T],a="ct"in n?n.ct:C(n,w,b,t,o);_.contains(a,!1,T,e)?(i.push({pointNumber:T,x:w.c2d(n.x),y:b.c2d(n.y)}),n.selected=1):n.selected=0}return i}},72592:function(R,C,e){"use strict";R.exports=T;var _=e(3400).distinctVals;function T(r,w){this.traces=r,this.sepNegVal=w.sepNegVal,this.overlapNoMerge=w.overlapNoMerge;for(var b=1/0,c=w.posAxis._id.charAt(0),o=[],t=0;t<r.length;t++){for(var i=r[t],n=0;n<i.length;n++){var a=i[n],s=a.p;s===void 0&&(s=a[c]),s!==void 0&&o.push(s)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=o;var l=_(o);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var u=(w.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}T.prototype.put=function(r,w){var b=this.getLabel(r,w),c=this.bins[b]||0;return this.bins[b]=c+w,c},T.prototype.get=function(r,w){var b=this.getLabel(r,w);return this.bins[b]||0},T.prototype.getLabel=function(r,w){return(w<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?r:Math.round(r/this.binWidth))}},60100:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(43616),w=e(3400),b=e(24040),c=e(82744).resizeText,o=e(20832),t=o.textfont,i=o.insidetextfont,n=o.outsidetextfont,a=e(60444);function s(v,x,y){r.pointStyle(v.selectAll("path"),x,y),l(v,x,y)}function l(v,x,y){v.selectAll("text").each(function(A){var d=_.select(this),S=w.ensureUniformFontSize(y,u(d,A,x,y));r.font(d,S)})}function u(v,x,y,A){var d=A._fullLayout.font,S=y.textfont;if(v.classed("bartext-inside")){var k=g(x,y);S=f(y,x.i,d,k)}else v.classed("bartext-outside")&&(S=m(y,x.i,d));return S}function p(v,x,y){return h(t,v.textfont,x,y)}function f(v,x,y,A){var d=p(v,x,y);return(v._input.textfont===void 0||v._input.textfont.color===void 0||Array.isArray(v.textfont.color)&&v.textfont.color[x]===void 0)&&(d={color:T.contrast(A),family:d.family,size:d.size,weight:d.weight,style:d.style,variant:d.variant,textcase:d.textcase,lineposition:d.lineposition,shadow:d.shadow}),h(i,v.insidetextfont,x,d)}function m(v,x,y){var A=p(v,x,y);return h(n,v.outsidetextfont,x,A)}function h(v,x,y,A){x=x||{};var d=a.getValue(x.family,y),S=a.getValue(x.size,y),k=a.getValue(x.color,y),E=a.getValue(x.weight,y),L=a.getValue(x.style,y),O=a.getValue(x.variant,y),P=a.getValue(x.textcase,y),F=a.getValue(x.lineposition,y),U=a.getValue(x.shadow,y);return{family:a.coerceString(v.family,d,A.family),size:a.coerceNumber(v.size,S,A.size),color:a.coerceColor(v.color,k,A.color),weight:a.coerceString(v.weight,E,A.weight),style:a.coerceString(v.style,L,A.style),variant:a.coerceString(v.variant,O,A.variant),textcase:a.coerceString(v.variant,P,A.textcase),lineposition:a.coerceString(v.variant,F,A.lineposition),shadow:a.coerceString(v.variant,U,A.shadow)}}function g(v,x){return x.type==="waterfall"?x[v.dir].marker.color:v.mcc||v.mc||x.marker.color}R.exports={style:function(v){var x=_.select(v).selectAll('g[class^="barlayer"]').selectAll("g.trace");c(v,x,"bar");var y=x.size(),A=v._fullLayout;x.style("opacity",function(d){return d[0].trace.opacity}).each(function(d){(A.barmode==="stack"&&y>1||A.bargap===0&&A.bargroupgap===0&&!d[0].trace.marker.line.width)&&_.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(d){s(_.select(this),d[0].trace,v)}),b.getComponentMethod("errorbars","style")(x)},styleTextPoints:l,styleOnSelect:function(v,x,y){var A=x[0].trace;A.selectedpoints?function(d,S,k){r.selectedPointStyle(d.selectAll("path"),S),function(E,L,O){E.each(function(P){var F,U=_.select(this);if(P.selected){F=w.ensureUniformFontSize(O,u(U,P,L,O));var I=L.selected.textfont&&L.selected.textfont.color;I&&(F.color=I),r.font(U,F)}else r.selectedTextStyle(U,L)})}(d.selectAll("text"),S,k)}(y,A,v):(s(y,A,v),b.getComponentMethod("errorbars","style")(y))},getInsideTextFont:f,getOutsideTextFont:m,getBarColor:g,resizeText:c}},55592:function(R,C,e){"use strict";var _=e(76308),T=e(94288).hasColorscale,r=e(27260),w=e(3400).coercePattern;R.exports=function(b,c,o,t,i){var n=o("marker.color",t),a=T(b,"marker");a&&r(b,c,i,o,{prefix:"marker.",cLetter:"c"}),o("marker.line.color",_.defaultLine),T(b,"marker.line")&&r(b,c,i,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width"),o("marker.opacity"),w(o,"marker.pattern",n,a),o("selected.marker.color"),o("unselected.marker.color")}},82744:function(R,C,e){"use strict";var _=e(33428),T=e(3400);function r(w){return"_"+w+"Text_minsize"}R.exports={recordMinTextSize:function(w,b,c){if(c.uniformtext.mode){var o=r(w),t=c.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,c[o]=c[o]||1/0,b.hide||(c[o]=Math.min(c[o],Math.max(i,t)))}},clearMinTextSize:function(w,b){b[r(w)]=void 0},resizeText:function(w,b,c){var o=w._fullLayout,t=o["_"+c+"Text_minsize"];if(t){var i,n=o.uniformtext.mode==="hide";switch(c){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(a){var s=a.transform;if(s){s.scale=n&&s.hide?0:t/s.fontSize;var l=_.select(this).select("text");T.setTransormAndDisplay(l,s)}})}}}},78100:function(R,C,e){"use strict";var _,T=e(21776).Ks,r=e(92880).extendFlat,w=e(8319),b=e(20832);R.exports={r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,base:r({},b.base,{}),offset:r({},b.offset,{}),width:r({},b.width,{}),text:r({},b.text,{}),hovertext:r({},b.hovertext,{}),marker:(_=r({},b.marker),delete _.cornerradius,_),hoverinfo:w.hoverinfo,hovertemplate:T(),selected:b.selected,unselected:b.unselected}},47056:function(R,C,e){"use strict";var _=e(94288).hasColorscale,T=e(47128),r=e(3400).isArrayOrTypedArray,w=e(84664),b=e(96376).setGroupPositions,c=e(4500),o=e(24040).traceIs,t=e(3400).extendFlat;R.exports={calc:function(i,n){for(var a=i._fullLayout,s=n.subplot,l=a[s].radialaxis,u=a[s].angularaxis,p=l.makeCalcdata(n,"r"),f=u.makeCalcdata(n,"theta"),m=n._length,h=new Array(m),g=p,v=f,x=0;x<m;x++)h[x]={p:v[x],s:g[x]};function y(A){var d=n[A];d!==void 0&&(n["_"+A]=r(d)?u.makeCalcdata(n,A):u.d2c(d,n.thetaunit))}return u.type==="linear"&&(y("width"),y("offset")),_(n,"marker")&&T(i,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),_(n,"marker.line")&&T(i,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),w(h,n),c(h,n),h},crossTraceCalc:function(i,n,a){for(var s=i.calcdata,l=[],u=0;u<s.length;u++){var p=s[u],f=p[0].trace;f.visible===!0&&o(f,"bar")&&f.subplot===a&&l.push(p)}var m=t({},n.radialaxis,{_id:"x"}),h=n.angularaxis;b(i,h,m,l,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(R,C,e){"use strict";var _=e(3400),T=e(85968).handleRThetaDefaults,r=e(55592),w=e(78100);R.exports=function(b,c,o,t){function i(n,a){return _.coerce(b,c,w,n,a)}T(b,c,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),r(b,c,i,o,t),_.coerceSelectionMarkerOpacity(c,i)):c.visible=!1}},68896:function(R,C,e){"use strict";var _=e(93024),T=e(3400),r=e(63400).getTraceColor,w=T.fillText,b=e(8504).makeHoverPointText,c=e(57384).isPtInsidePolygon;R.exports=function(o,t,i){var n=o.cd,a=n[0].trace,s=o.subplot,l=s.radialAxis,u=s.angularAxis,p=s.vangles,f=p?c:T.isPtInsideSector,m=o.maxHoverDistance,h=u._period||2*Math.PI,g=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),v=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(v+=Math.PI),_.getClosest(n,function(A){return f(g,v,[A.rp0,A.rp1],[A.thetag0,A.thetag1],p)?m+Math.min(1,Math.abs(A.thetag1-A.thetag0)/h)-1+(A.rp1-g)/(A.rp1-A.rp0)-1:1/0},o),o.index!==!1){var x=n[o.index];o.x0=o.x1=x.ct[0],o.y0=o.y1=x.ct[1];var y=T.extendFlat({},x,{r:x.s,theta:x.p});return w(x,a,o),b(y,a,s,o),o.hovertemplate=a.hovertemplate,o.color=r(a,x),o.xLabelVal=o.yLabelVal=void 0,x.s<0&&(o.idealAlign="left"),[o]}}},94456:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(R){"use strict";R.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(R,C,e){"use strict";var _=e(3400),T=e(9320);R.exports=function(r,w,b){var c,o={};function t(a,s){return _.coerce(r[c]||{},w[c],T,a,s)}for(var i=0;i<b.length;i++){var n=b[i];n.type==="barpolar"&&n.visible===!0&&(o[c=n.subplot]||(t("barmode"),t("bargap"),o[c]=1))}}},42040:function(R,C,e){"use strict";var _=e(33428),T=e(38248),r=e(3400),w=e(43616),b=e(57384);R.exports=function(c,o,t){var i=c._context.staticPlot,n=o.xaxis,a=o.yaxis,s=o.radialAxis,l=o.angularAxis,u=function(f){var m=f.cxx,h=f.cyy;return f.vangles?function(g,v,x,y){var A,d;r.angleDelta(x,y)>0?(A=x,d=y):(A=y,d=x);var S=[b.findEnclosingVertexAngles(A,f.vangles)[0],(A+d)/2,b.findEnclosingVertexAngles(d,f.vangles)[1]];return b.pathPolygonAnnulus(g,v,A,d,S,m,h)}:function(g,v,x,y){return r.pathAnnulus(g,v,x,y,m,h)}}(o),p=o.layers.frontplot.select("g.barlayer");r.makeTraceGroups(p,t,"trace bars").each(function(){var f=_.select(this),m=r.ensureSingle(f,"g","points").selectAll("g.point").data(r.identity);m.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),m.exit().remove(),m.each(function(h){var g,v=_.select(this),x=h.rp0=s.c2p(h.s0),y=h.rp1=s.c2p(h.s1),A=h.thetag0=l.c2g(h.p0),d=h.thetag1=l.c2g(h.p1);if(T(x)&&T(y)&&T(A)&&T(d)&&x!==y&&A!==d){var S=s.c2g(h.s1),k=(A+d)/2;h.ct=[n.c2p(S*Math.cos(k)),a.c2p(S*Math.sin(k))],g=u(x,y,A,d)}else g="M0,0Z";r.ensureSingle(v,"path").attr("d",g)}),w.setClipUrl(f,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,c)})}},63188:function(R,C,e){"use strict";var _=e(98304),T=e(52904),r=e(20832),w=e(22548),b=e(29736).axisHoverFormat,c=e(21776).Ks,o=e(92880).extendFlat,t=T.marker,i=t.line;R.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:o({},t.angle,{arrayOk:!1,editType:"calc"}),size:o({},t.size,{arrayOk:!1,editType:"calc"}),color:o({},t.color,{arrayOk:!1,editType:"style"}),line:{color:o({},i.color,{arrayOk:!1,dflt:w.defaultLine,editType:"style"}),width:o({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:T.selected.marker,editType:"style"},unselected:{marker:T.unselected.marker,editType:"style"},text:o({},T.text,{}),hovertext:o({},T.hovertext,{}),hovertemplate:c({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:T.zorder}},62555:function(R,C,e){"use strict";var _=e(38248),T=e(54460),r=e(1220),w=e(3400),b=e(39032).BADNUM,c=w._;R.exports=function(f,m){var h,g,v,x,y,A,d,S=f._fullLayout,k=T.getFromId(f,m.xaxis||"x"),E=T.getFromId(f,m.yaxis||"y"),L=[],O=m.type==="violin"?"_numViolins":"_numBoxes";m.orientation==="h"?(v=k,x="x",y=E,A="y",d=!!m.yperiodalignment):(v=E,x="y",y=k,A="x",d=!!m.xperiodalignment);var P,F,U,I,N,W,B=function(Fe,Le,je,Ge){var Je,rt=Le+"0"in Fe;if(Le in Fe||rt&&"d"+Le in Fe){var ot=je.makeCalcdata(Fe,Le);return[r(Fe,je,Le,ot).vals,ot]}Je=rt?Fe[Le+"0"]:"name"in Fe&&(je.type==="category"||_(Fe.name)&&["linear","log"].indexOf(je.type)!==-1||w.isDateTime(Fe.name)&&je.type==="date")?Fe.name:Ge;for(var yt=je.type==="multicategory"?je.r2c_just_indices(Je):je.d2c(Je,0,Fe[Le+"calendar"]),_t=Fe._length,mt=new Array(_t),tt=0;tt<_t;tt++)mt[tt]=yt;return[mt]}(m,A,y,S[O]),V=B[0],q=B[1],ne=w.distinctVals(V,y),$=ne.vals,K=ne.minDiff/2,ee=(m.boxpoints||m.points)==="all"?w.identity:function(Fe){return Fe.v<P.lf||Fe.v>P.uf};if(m._hasPreCompStats){var J=m[x],Z=function(Fe){return v.d2c((m[Fe]||[])[h])},te=1/0,oe=-1/0;for(h=0;h<m._length;h++){var se=V[h];if(_(se)){if((P={}).pos=P[A]=se,d&&q&&(P.orig_p=q[h]),P.q1=Z("q1"),P.med=Z("median"),P.q3=Z("q3"),F=[],J&&w.isArrayOrTypedArray(J[h]))for(g=0;g<J[h].length;g++)(W=v.d2c(J[h][g]))!==b&&(t(N={v:W,i:[h,g]},m,[h,g]),F.push(N));if(P.pts=F.sort(i),I=(U=P[x]=F.map(n)).length,P.med!==b&&P.q1!==b&&P.q3!==b&&P.med>=P.q1&&P.q3>=P.med){var ce=Z("lowerfence");P.lf=ce!==b&&ce<=P.q1?ce:a(P,U,I);var ye=Z("upperfence");P.uf=ye!==b&&ye>=P.q3?ye:s(P,U,I);var me=Z("mean");P.mean=me!==b?me:I?w.mean(U,I):(P.q1+P.q3)/2;var fe=Z("sd");P.sd=me!==b&&fe>=0?fe:I?w.stdev(U,I,P.mean):P.q3-P.q1,P.lo=l(P),P.uo=u(P);var pe=Z("notchspan");pe=pe!==b&&pe>0?pe:p(P,I),P.ln=P.med-pe,P.un=P.med+pe;var ge=P.lf,ke=P.uf;m.boxpoints&&U.length&&(ge=Math.min(ge,U[0]),ke=Math.max(ke,U[I-1])),m.notched&&(ge=Math.min(ge,P.ln),ke=Math.max(ke,P.un)),P.min=ge,P.max=ke}else{var Ce;w.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join(`
`)),Ce=P.med!==b?P.med:P.q1!==b?P.q3!==b?(P.q1+P.q3)/2:P.q1:P.q3!==b?P.q3:0,P.med=Ce,P.q1=P.q3=Ce,P.lf=P.uf=Ce,P.mean=P.sd=Ce,P.ln=P.un=Ce,P.min=P.max=Ce}te=Math.min(te,P.min),oe=Math.max(oe,P.max),P.pts2=F.filter(ee),L.push(P)}}m._extremes[v._id]=T.findExtremes(v,[te,oe],{padded:!0})}else{var de=v.makeCalcdata(m,x),ae=function(Fe,Le){for(var je=Fe.length,Ge=new Array(je+1),Je=0;Je<je;Je++)Ge[Je]=Fe[Je]-Le;return Ge[je]=Fe[je-1]+Le,Ge}($,K),re=$.length,he=function(Fe){for(var Le=new Array(Fe),je=0;je<Fe;je++)Le[je]=[];return Le}(re);for(h=0;h<m._length;h++)if(W=de[h],_(W)){var Se=w.findBin(V[h],ae);Se>=0&&Se<re&&(t(N={v:W,i:h},m,h),he[Se].push(N))}var xe=1/0,Te=-1/0,Ae=m.quartilemethod,Pe=Ae==="exclusive",De=Ae==="inclusive";for(h=0;h<re;h++)if(he[h].length>0){var ve,we;(P={}).pos=P[A]=$[h],F=P.pts=he[h].sort(i),I=(U=P[x]=F.map(n)).length,P.min=U[0],P.max=U[I-1],P.mean=w.mean(U,I),P.sd=w.stdev(U,I,P.mean)*m.sdmultiple,P.med=w.interp(U,.5),I%2&&(Pe||De)?(Pe?(ve=U.slice(0,I/2),we=U.slice(I/2+1)):De&&(ve=U.slice(0,I/2+1),we=U.slice(I/2)),P.q1=w.interp(ve,.5),P.q3=w.interp(we,.5)):(P.q1=w.interp(U,.25),P.q3=w.interp(U,.75)),P.lf=a(P,U,I),P.uf=s(P,U,I),P.lo=l(P),P.uo=u(P);var Ee=p(P,I);P.ln=P.med-Ee,P.un=P.med+Ee,xe=Math.min(xe,P.ln),Te=Math.max(Te,P.un),P.pts2=F.filter(ee),L.push(P)}m.notched&&w.isTypedArray(de)&&(de=Array.from(de)),m._extremes[v._id]=T.findExtremes(v,m.notched?de.concat([xe,Te]):de,{padded:!0})}return function(Fe,Le){if(w.isArrayOrTypedArray(Le.selectedpoints))for(var je=0;je<Fe.length;je++){for(var Ge=Fe[je].pts||[],Je={},rt=0;rt<Ge.length;rt++)Je[Ge[rt].i]=rt;w.tagSelected(Ge,Le,Je)}}(L,m),L.length>0?(L[0].t={num:S[O],dPos:K,posLetter:A,valLetter:x,labels:{med:c(f,"median:"),min:c(f,"min:"),q1:c(f,"q1:"),q3:c(f,"q3:"),max:c(f,"max:"),mean:m.boxmean==="sd"||m.sizemode==="sd"?c(f,"mean \xB1 \u03C3:").replace("\u03C3",m.sdmultiple===1?"\u03C3":m.sdmultiple+"\u03C3"):c(f,"mean:"),lf:c(f,"lower fence:"),uf:c(f,"upper fence:")}},S[O]++,L):[{t:{empty:!0}}]};var o={text:"tx",hovertext:"htx"};function t(f,m,h){for(var g in o)w.isArrayOrTypedArray(m[g])&&(Array.isArray(h)?w.isArrayOrTypedArray(m[g][h[0]])&&(f[o[g]]=m[g][h[0]][h[1]]):f[o[g]]=m[g][h])}function i(f,m){return f.v-m.v}function n(f){return f.v}function a(f,m,h){return h===0?f.q1:Math.min(f.q1,m[Math.min(w.findBin(2.5*f.q1-1.5*f.q3,m,!0)+1,h-1)])}function s(f,m,h){return h===0?f.q3:Math.max(f.q3,m[Math.max(w.findBin(2.5*f.q3-1.5*f.q1,m),0)])}function l(f){return 4*f.q1-3*f.q3}function u(f){return 4*f.q3-3*f.q1}function p(f,m){return m===0?0:1.57*(f.q3-f.q1)/Math.sqrt(m)}},96404:function(R,C,e){"use strict";var _=e(54460),T=e(3400),r=e(71888).getAxisGroup,w=["v","h"];function b(c,o,t,i){var n,a,s,l=o.calcdata,u=o._fullLayout,p=i._id,f=p.charAt(0),m=[],h=0;for(n=0;n<t.length;n++)for(s=l[t[n]],a=0;a<s.length;a++)m.push(i.c2l(s[a].pos,!0)),h+=(s[a].pts2||[]).length;if(m.length){var g=T.distinctVals(m);i.type!=="category"&&i.type!=="multicategory"||(g.minDiff=1);var v=g.minDiff/2;_.minDtick(i,g.minDiff,g.vals[0],!0);var x=u[c==="violin"?"_numViolins":"_numBoxes"],y=u[c+"mode"]==="group"&&x>1,A=1-u[c+"gap"],d=1-u[c+"groupgap"];for(n=0;n<t.length;n++){var S,k,E,L,O,P,F=(s=l[t[n]])[0].trace,U=s[0].t,I=F.width,N=F.side;if(I)S=k=L=I/2,E=0;else if(S=v,y){var W=r(u,i._id)+F.orientation,B=(u._alignmentOpts[W]||{})[F.alignmentgroup]||{},V=Object.keys(B.offsetGroups||{}).length,q=V||x;k=S*A*d/q,E=2*S*(((V?F._offsetIndex:U.num)+.5)/q-.5)*A,L=S*A/q}else k=S*A*d,E=0,L=S;U.dPos=S,U.bPos=E,U.bdPos=k,U.wHover=L;var ne,$,K,ee,J,Z,te=E+k,oe=!!I;if(N==="positive"?(O=S*(I?1:.5),ne=te,P=ne=E):N==="negative"?(O=ne=E,P=S*(I?1:.5),$=te):(O=P=S,ne=$=te),(F.boxpoints||F.points)&&h>0){var se=F.pointpos,ce=F.jitter,ye=F.marker.size/2,me=0;se+ce>=0&&((me=te*(se+ce))>O?(oe=!0,J=ye,K=me):me>ne&&(J=ye,K=O)),me<=O&&(K=O);var fe=0;se-ce<=0&&((fe=-te*(se-ce))>P?(oe=!0,Z=ye,ee=fe):fe>$&&(Z=ye,ee=P)),fe<=P&&(ee=P)}else K=O,ee=P;var pe=new Array(s.length);for(a=0;a<s.length;a++)pe[a]=s[a].pos;F._extremes[p]=_.findExtremes(i,pe,{padded:oe,vpadminus:ee,vpadplus:K,vpadLinearized:!0,ppadminus:{x:Z,y:J}[f],ppadplus:{x:J,y:Z}[f]})}}}R.exports={crossTraceCalc:function(c,o){for(var t=c.calcdata,i=o.xaxis,n=o.yaxis,a=0;a<w.length;a++){for(var s=w[a],l=s==="h"?n:i,u=[],p=0;p<t.length;p++){var f=t[p],m=f[0].t,h=f[0].trace;h.visible!==!0||h.type!=="box"&&h.type!=="candlestick"||m.empty||(h.orientation||"v")!==s||h.xaxis!==i._id||h.yaxis!==n._id||u.push(p)}b("box",c,u,l)}},setPositionOffset:b}},90624:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(76308),w=e(31147),b=e(20011),c=e(52976),o=e(63188);function t(n,a,s,l){function u(N){var W=0;return N&&N.length&&(W+=1,_.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function p(N){return _.validate(n[N],o[N])}var f,m=s("y"),h=s("x");if(a.type==="box"){var g=s("q1"),v=s("median"),x=s("q3");a._hasPreCompStats=g&&g.length&&v&&v.length&&x&&x.length,f=Math.min(_.minRowLength(g),_.minRowLength(v),_.minRowLength(x))}var y,A,d=u(m),S=u(h),k=d&&_.minRowLength(m),E=S&&_.minRowLength(h),L=l.calendar,O={autotypenumbers:l.autotypenumbers};if(a._hasPreCompStats)switch(String(S)+String(d)){case"00":var P=p("x0")||p("dx");y=!p("y0")&&!p("dy")||P?"v":"h",A=f;break;case"10":y="v",A=Math.min(f,E);break;case"20":y="h",A=Math.min(f,h.length);break;case"01":y="h",A=Math.min(f,k);break;case"02":y="v",A=Math.min(f,m.length);break;case"12":y="v",A=Math.min(f,E,m.length);break;case"21":y="h",A=Math.min(f,h.length,k);break;case"11":A=0;break;case"22":var F,U=!1;for(F=0;F<h.length;F++)if(c(h[F],L,O)==="category"){U=!0;break}if(U)y="v",A=Math.min(f,E,m.length);else{for(F=0;F<m.length;F++)if(c(m[F],L,O)==="category"){U=!0;break}U?(y="h",A=Math.min(f,h.length,k)):(y="v",A=Math.min(f,E,m.length))}}else d>0?(y="v",A=S>0?Math.min(E,k):Math.min(k)):S>0?(y="h",A=Math.min(E)):A=0;if(A){a._length=A;var I=s("orientation",y);a._hasPreCompStats?I==="v"&&S===0?(s("x0",0),s("dx",1)):I==="h"&&d===0&&(s("y0",0),s("dy",1)):I==="v"&&S===0?s("x0"):I==="h"&&d===0&&s("y0"),T.getComponentMethod("calendars","handleTraceDefaults")(n,a,["x","y"],l)}else a.visible=!1}function i(n,a,s,l){var u=l.prefix,p=_.coerce2(n,a,o,"marker.outliercolor"),f=s("marker.line.outliercolor"),m="outliers";a._hasPreCompStats?m="all":(p||f)&&(m="suspectedoutliers");var h=s(u+"points",m);h?(s("jitter",h==="all"?.3:0),s("pointpos",h==="all"?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.angle"),s("marker.color",a.line.color),s("marker.line.color"),s("marker.line.width"),h==="suspectedoutliers"&&(s("marker.line.outliercolor",a.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete a.marker;var g=s("hoveron");g!=="all"&&g.indexOf("points")===-1||s("hovertemplate"),_.coerceSelectionMarkerOpacity(a,s)}R.exports={supplyDefaults:function(n,a,s,l){function u(A,d){return _.coerce(n,a,o,A,d)}if(t(n,a,u,l),a.visible!==!1){w(n,a,l,u),u("xhoverformat"),u("yhoverformat");var p=a._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||s),u("line.width"),u("fillcolor",r.addOpacity(a.line.color,.5));var f=!1;if(p){var m=u("mean"),h=u("sd");m&&m.length&&(f=!0,h&&h.length&&(f="sd"))}u("whiskerwidth");var g,v=u("sizemode");v==="quartiles"&&(g=u("boxmean",f)),u("showwhiskers",v==="quartiles"),v!=="sd"&&g!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var x=!1;if(p){var y=u("notchspan");y&&y.length&&(x=!0)}else _.validate(n.notchwidth,o.notchwidth)&&(x=!0);u("notched",x)&&u("notchwidth"),i(n,a,u,{prefix:"box"}),u("zorder")}},crossTraceDefaults:function(n,a){var s,l;function u(m){return _.coerce(l._input,l,o,m)}for(var p=0;p<n.length;p++){var f=(l=n[p]).type;f!=="box"&&f!=="violin"||(s=l._input,a[f+"mode"]==="group"&&b(s,l,a,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(R){"use strict";R.exports=function(C,e){return e.hoverOnBox&&(C.hoverOnBox=e.hoverOnBox),"xVal"in e&&(C.x=e.xVal),"yVal"in e&&(C.y=e.yVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},27576:function(R,C,e){"use strict";var _=e(54460),T=e(3400),r=e(93024),w=e(76308),b=T.fillText;function c(t,i,n,a){var s,l,u,p,f,m,h,g,v,x,y,A,d,S,k=t.cd,E=t.xa,L=t.ya,O=k[0].trace,P=k[0].t,F=O.type==="violin",U=P.bdPos,I=P.wHover,N=function(Ce){return u.c2l(Ce.pos)+P.bPos-u.c2l(m)};F&&O.side!=="both"?(O.side==="positive"&&(v=function(Ce){var de=N(Ce);return r.inbox(de,de+I,x)},A=U,d=0),O.side==="negative"&&(v=function(Ce){var de=N(Ce);return r.inbox(de-I,de,x)},A=0,d=U)):(v=function(Ce){var de=N(Ce);return r.inbox(de-I,de+I,x)},A=d=U),S=F?function(Ce){return r.inbox(Ce.span[0]-f,Ce.span[1]-f,x)}:function(Ce){return r.inbox(Ce.min-f,Ce.max-f,x)},O.orientation==="h"?(f=i,m=n,h=S,g=v,s="y",u=L,l="x",p=E):(f=n,m=i,h=v,g=S,s="x",u=E,l="y",p=L);var W=Math.min(1,U/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function B(Ce){return(h(Ce)+g(Ce))/2}x=t.maxHoverDistance-W,y=t.maxSpikeDistance-W;var V=r.getDistanceFunction(a,h,g,B);if(r.getClosest(k,V,t),t.index===!1)return[];var q=k[t.index],ne=O.line.color,$=(O.marker||{}).color;w.opacity(ne)&&O.line.width?t.color=ne:w.opacity($)&&O.boxpoints?t.color=$:t.color=O.fillcolor,t[s+"0"]=u.c2p(q.pos+P.bPos-d,!0),t[s+"1"]=u.c2p(q.pos+P.bPos+A,!0),t[s+"LabelVal"]=q.orig_p!==void 0?q.orig_p:q.pos;var K=s+"Spike";t.spikeDistance=B(q)*y/x,t[K]=u.c2p(q.pos,!0);var ee=O.boxmean||O.sizemode==="sd"||(O.meanline||{}).visible,J=O.boxpoints||O.points,Z=J&&ee?["max","uf","q3","med","mean","q1","lf","min"]:J&&!ee?["max","uf","q3","med","q1","lf","min"]:!J&&ee?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],te=p.range[1]<p.range[0];O.orientation===(te?"v":"h")&&Z.reverse();for(var oe=t.spikeDistance,se=t[K],ce=[],ye=0;ye<Z.length;ye++){var me=Z[ye];if(me in q){var fe=q[me],pe=p.c2p(fe,!0),ge=T.extendFlat({},t);ge.attr=me,ge[l+"0"]=ge[l+"1"]=pe,ge[l+"LabelVal"]=fe,ge[l+"Label"]=(P.labels?P.labels[me]+" ":"")+_.hoverLabelText(p,fe,O[l+"hoverformat"]),ge.hoverOnBox=!0,me!=="mean"||!("sd"in q)||O.boxmean!=="sd"&&O.sizemode!=="sd"||(ge[l+"err"]=q.sd),ge.hovertemplate=!1,ce.push(ge)}}t.name="",t.spikeDistance=void 0,t[K]=void 0;for(var ke=0;ke<ce.length;ke++)ce[ke].attr!=="med"?(ce[ke].name="",ce[ke].spikeDistance=void 0,ce[ke][K]=void 0):(ce[ke].spikeDistance=oe,ce[ke][K]=se);return ce}function o(t,i,n){for(var a,s,l,u=t.cd,p=t.xa,f=t.ya,m=u[0].trace,h=p.c2p(i),g=f.c2p(n),v=r.quadrature(function(F){var U=Math.max(3,F.mrc||0);return Math.max(Math.abs(p.c2p(F.x)-h)-U,1-3/U)},function(F){var U=Math.max(3,F.mrc||0);return Math.max(Math.abs(f.c2p(F.y)-g)-U,1-3/U)}),x=!1,y=0;y<u.length;y++){s=u[y];for(var A=0;A<(s.pts||[]).length;A++){var d=v(l=s.pts[A]);d<=t.distance&&(t.distance=d,x=[y,A])}}if(!x)return!1;l=(s=u[x[0]]).pts[x[1]];var S=p.c2p(l.x,!0),k=f.c2p(l.y,!0),E=l.mrc||1;a=T.extendFlat({},t,{index:l.i,color:(m.marker||{}).color,name:m.name,x0:S-E,x1:S+E,y0:k-E,y1:k+E,spikeDistance:t.distance,hovertemplate:m.hovertemplate});var L,O=s.orig_p,P=O!==void 0?O:s.pos;return m.orientation==="h"?(L=f,a.xLabelVal=l.x,a.yLabelVal=P):(L=p,a.xLabelVal=P,a.yLabelVal=l.y),a[L._id.charAt(0)+"Spike"]=L.c2p(s.pos,!0),b(l,m,a),a}R.exports={hoverPoints:function(t,i,n,a){var s,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(c(t,i,n,a))),l.indexOf("points")!==-1&&(s=o(t,i,n)),a==="closest"?s?[s]:u:(s&&u.push(s),u)},hoverOnBoxes:c,hoverOnPoints:o}},67244:function(R,C,e){"use strict";R.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(R){"use strict";R.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(16560);function w(b,c,o,t,i){for(var n=i+"Layout",a=!1,s=0;s<o.length;s++){var l=o[s];if(_.traceIs(l,n)){a=!0;break}}a&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}R.exports={supplyLayoutDefaults:function(b,c,o){w(0,0,o,function(t,i){return T.coerce(b,c,r,t,i)},"box")},_supply:w}},18728:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616);function w(o,t,i,n,a){var s,l,u=i.orientation==="h",p=t.val,f=t.pos,m=!!f.rangebreaks,h=n.bPos,g=n.wdPos||0,v=n.bPosPxOffset||0,x=i.whiskerwidth||0,y=i.showwhiskers!==!1,A=i.notched||!1,d=A?1-2*i.notchwidth:1;Array.isArray(n.bdPos)?(s=n.bdPos[0],l=n.bdPos[1]):(s=n.bdPos,l=n.bdPos);var S=o.selectAll("path.box").data(i.type!=="violin"||i.box.visible?T.identity:[]);S.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(k){if(k.empty)return _.select(this).attr("d","M0,0Z");var E=f.c2l(k.pos+h,!0),L=f.l2p(E-s)+v,O=f.l2p(E+l)+v,P=m?(L+O)/2:f.l2p(E)+v,F=i.whiskerwidth,U=m?L*F+(1-F)*P:f.l2p(E-g)+v,I=m?O*F+(1-F)*P:f.l2p(E+g)+v,N=f.l2p(E-s*d)+v,W=f.l2p(E+l*d)+v,B=i.sizemode==="sd",V=p.c2p(B?k.mean-k.sd:k.q1,!0),q=B?p.c2p(k.mean+k.sd,!0):p.c2p(k.q3,!0),ne=T.constrain(B?p.c2p(k.mean,!0):p.c2p(k.med,!0),Math.min(V,q)+1,Math.max(V,q)-1),$=k.lf===void 0||i.boxpoints===!1||B,K=p.c2p($?k.min:k.lf,!0),ee=p.c2p($?k.max:k.uf,!0),J=p.c2p(k.ln,!0),Z=p.c2p(k.un,!0);u?_.select(this).attr("d","M"+ne+","+N+"V"+W+"M"+V+","+L+"V"+O+(A?"H"+J+"L"+ne+","+W+"L"+Z+","+O:"")+"H"+q+"V"+L+(A?"H"+Z+"L"+ne+","+N+"L"+J+","+L:"")+"Z"+(y?"M"+V+","+P+"H"+K+"M"+q+","+P+"H"+ee+(x===0?"":"M"+K+","+U+"V"+I+"M"+ee+","+U+"V"+I):"")):_.select(this).attr("d","M"+N+","+ne+"H"+W+"M"+L+","+V+"H"+O+(A?"V"+J+"L"+W+","+ne+"L"+O+","+Z:"")+"V"+q+"H"+L+(A?"V"+Z+"L"+N+","+ne+"L"+L+","+J:"")+"Z"+(y?"M"+P+","+V+"V"+K+"M"+P+","+q+"V"+ee+(x===0?"":"M"+U+","+K+"H"+I+"M"+U+","+ee+"H"+I):""))})}function b(o,t,i,n){var a=t.x,s=t.y,l=n.bdPos,u=n.bPos,p=i.boxpoints||i.points;T.seedPseudoRandom();var f=o.selectAll("g.points").data(p?function(h){return h.forEach(function(g){g.t=n,g.trace=i}),h}:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var m=f.selectAll("path").data(function(h){var g,v,x=h.pts2,y=Math.max((h.max-h.min)/10,h.q3-h.q1),A=1e-9*y,d=.01*y,S=[],k=0;if(i.jitter){if(y===0)for(k=1,S=new Array(x.length),g=0;g<x.length;g++)S[g]=1;else for(g=0;g<x.length;g++){var E=Math.max(0,g-5),L=x[E].v,O=Math.min(x.length-1,g+5),P=x[O].v;p!=="all"&&(x[g].v<h.lf?P=Math.min(P,h.lf):L=Math.max(L,h.uf));var F=Math.sqrt(d*(O-E)/(P-L+A))||0;F=T.constrain(Math.abs(F),0,1),S.push(F),k=Math.max(F,k)}v=2*i.jitter/(k||1)}for(g=0;g<x.length;g++){var U=x[g],I=U.v,N=i.jitter?v*S[g]*(T.pseudoRandom()-.5):0,W=h.pos+u+l*(i.pointpos+N);i.orientation==="h"?(U.y=W,U.x=I):(U.x=W,U.y=I),p==="suspectedoutliers"&&I<h.uo&&I>h.lo&&(U.so=!0)}return x});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(r.translatePoints,a,s)}function c(o,t,i,n){var a,s,l=t.val,u=t.pos,p=!!u.rangebreaks,f=n.bPos,m=n.bPosPxOffset||0,h=i.boxmean||(i.meanline||{}).visible;Array.isArray(n.bdPos)?(a=n.bdPos[0],s=n.bdPos[1]):(a=n.bdPos,s=n.bdPos);var g=o.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?T.identity:[]);g.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),g.exit().remove(),g.each(function(v){var x=u.c2l(v.pos+f,!0),y=u.l2p(x-a)+m,A=u.l2p(x+s)+m,d=p?(y+A)/2:u.l2p(x)+m,S=l.c2p(v.mean,!0),k=l.c2p(v.mean-v.sd,!0),E=l.c2p(v.mean+v.sd,!0);i.orientation==="h"?_.select(this).attr("d","M"+S+","+y+"V"+A+(h==="sd"?"m0,0L"+k+","+d+"L"+S+","+y+"L"+E+","+d+"Z":"")):_.select(this).attr("d","M"+y+","+S+"H"+A+(h==="sd"?"m0,0L"+d+","+k+"L"+y+","+S+"L"+d+","+E+"Z":""))})}R.exports={plot:function(o,t,i,n){var a=o._context.staticPlot,s=t.xaxis,l=t.yaxis;T.makeTraceGroups(n,i,"trace boxes").each(function(u){var p,f,m=_.select(this),h=u[0],g=h.t,v=h.trace;g.wdPos=g.bdPos*v.whiskerwidth,v.visible!==!0||g.empty?m.remove():(v.orientation==="h"?(p=l,f=s):(p=s,f=l),w(m,{pos:p,val:f},v,g,a),b(m,{x:s,y:l},v,g),c(m,{pos:p,val:f},v,g))})},plotBoxAndWhiskers:w,plotPoints:b,plotBoxMean:c}},8264:function(R){"use strict";R.exports=function(C,e){var _,T,r=C.cd,w=C.xaxis,b=C.yaxis,c=[];if(e===!1)for(_=0;_<r.length;_++)for(T=0;T<(r[_].pts||[]).length;T++)r[_].pts[T].selected=0;else for(_=0;_<r.length;_++)for(T=0;T<(r[_].pts||[]).length;T++){var o=r[_].pts[T],t=w.c2p(o.x),i=b.c2p(o.y);e.contains([t,i],null,o.i,C)?(c.push({pointNumber:o.i,x:w.c2d(o.x),y:b.c2d(o.y)}),o.selected=1):o.selected=0}return c}},25776:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(43616);R.exports={style:function(w,b,c){var o=c||_.select(w).selectAll("g.trace.boxes");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=_.select(this),n=t[0].trace,a=n.line.width;function s(p,f,m,h){p.style("stroke-width",f+"px").call(T.stroke,m).call(T.fill,h)}var l=i.selectAll("path.box");if(n.type==="candlestick")l.each(function(p){if(!p.empty){var f=_.select(this),m=n[p.dir];s(f,m.line.width,m.line.color,m.fillcolor),f.style("opacity",n.selectedpoints&&!p.selected?.3:1)}});else{s(l,a,n.line.color,n.fillcolor),i.selectAll("path.mean").style({"stroke-width":a,"stroke-dasharray":2*a+"px,"+a+"px"}).call(T.stroke,n.line.color);var u=i.selectAll("path.point");r.pointStyle(u,n,w)}})},styleOnSelect:function(w,b,c){var o=b[0].trace,t=c.selectAll("path.point");o.selectedpoints?r.selectedPointStyle(t,o):r.pointStyle(t,o,w)}}},64216:function(R,C,e){"use strict";var _=e(3400).extendFlat,T=e(29736).axisHoverFormat,r=e(20279),w=e(63188);function b(c){return{line:{color:_({},w.line.color,{dflt:c}),width:w.line.width,editType:"style"},fillcolor:w.fillcolor,editType:"style"}}R.exports={xperiod:r.xperiod,xperiod0:r.xperiod0,xperiodalignment:r.xperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),x:r.x,open:r.open,high:r.high,low:r.low,close:r.close,line:{width:_({},w.line.width,{}),editType:"style"},increasing:b(r.increasing.line.color.dflt),decreasing:b(r.decreasing.line.color.dflt),text:r.text,hovertext:r.hovertext,whiskerwidth:_({},w.whiskerwidth,{dflt:0}),hoverlabel:r.hoverlabel,zorder:w.zorder}},46283:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(1220),w=e(42812).calcCommon;function b(c,o,t,i){return{min:t,q1:Math.min(c,i),med:i,q3:Math.max(c,i),max:o}}R.exports=function(c,o){var t=c._fullLayout,i=T.getFromId(c,o.xaxis),n=T.getFromId(c,o.yaxis),a=i.makeCalcdata(o,"x"),s=r(o,i,"x",a).vals,l=w(c,o,a,s,n,b);return l.length?(_.extendFlat(l[0].t,{num:t._numBoxes,dPos:_.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(52744),w=e(31147),b=e(64216);function c(o,t,i,n){var a=i(n+".line.color");i(n+".line.width",t.line.width),i(n+".fillcolor",T.addOpacity(a,.5))}R.exports=function(o,t,i,n){function a(s,l){return _.coerce(o,t,b,s,l)}r(o,t,a,n)?(w(o,t,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),c(0,t,a,"increasing"),c(0,t,a,"decreasing"),a("text"),a("hovertext"),a("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0,a("zorder")):t.visible=!1}},61712:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(R,C,e){"use strict";var _=e(63856),T=e(31780);R.exports=function(r,w,b,c,o){c("a")||(c("da"),c("a0")),c("b")||(c("db"),c("b0")),function(t,i,n,a){["aaxis","baxis"].forEach(function(s){var l=s.charAt(0),u=t[s]||{},p=T.newContainer(i,s),f={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:s,data:t[l],calendar:i.calendar,dfltColor:a,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};_(u,p,f),p._categories=p._categories||[],t[s]||u.type==="-"||(t[s]={type:u.type})})}(r,w,b,o)}},51676:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray;function T(r,w){if(!_(r)||w>=10)return null;for(var b=1/0,c=-1/0,o=r.length,t=0;t<o;t++){var i=r[t];if(_(i)){var n=T(i,w+1);n&&(b=Math.min(n[0],b),c=Math.max(n[1],c))}else b=Math.min(i,b),c=Math.max(i,c)}return[b,c]}R.exports=function(r){return T(r,0)}},85720:function(R,C,e){"use strict";var _=e(25376),T=e(98692),r=e(22548),w=_({editType:"calc"}),b=e(52904).zorder;w.family.dflt='"Open Sans", verdana, arial, sans-serif',w.size.dflt=12,w.color.dflt=r.defaultLine,R.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:T,baxis:T,font:w,color:{valType:"color",dflt:r.defaultLine,editType:"plot"},transforms:void 0,zorder:b}},77712:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray;R.exports=function(T,r,w,b){var c,o,t,i,n,a,s,l,u,p,f,m,h,g=_(w)?"a":"b",v=(g==="a"?T.aaxis:T.baxis).smoothing,x=g==="a"?T.a2i:T.b2j,y=g==="a"?w:b,A=g==="a"?b:w,d=g==="a"?r.a.length:r.b.length,S=g==="a"?r.b.length:r.a.length,k=Math.floor(g==="a"?T.b2j(A):T.a2i(A)),E=g==="a"?function(ne){return T.evalxy([],ne,k)}:function(ne){return T.evalxy([],k,ne)};v&&(t=Math.max(0,Math.min(S-2,k)),i=k-t,o=g==="a"?function(ne,$){return T.dxydi([],ne,t,$,i)}:function(ne,$){return T.dxydj([],t,ne,i,$)});var L=x(y[0]),O=x(y[1]),P=L<O?1:-1,F=1e-8*(O-L),U=P>0?Math.floor:Math.ceil,I=P>0?Math.ceil:Math.floor,N=P>0?Math.min:Math.max,W=P>0?Math.max:Math.min,B=U(L+F),V=I(O-F),q=[[s=E(L)]];for(c=B;c*P<V*P;c+=P)n=[],f=W(L,c),h=(m=N(O,c+P))-f,a=Math.max(0,Math.min(d-2,Math.floor(.5*(f+m)))),l=E(m),v&&(u=o(a,f-a),p=o(a,m-a),n.push([s[0]+u[0]/3*h,s[1]+u[1]/3*h]),n.push([l[0]-p[0]/3*h,l[1]-p[1]/3*h])),n.push(l),q.push(n),s=l;return q}},98692:function(R,C,e){"use strict";var _=e(25376),T=e(22548),r=e(94724),w=e(29736).descriptionWithDates,b=e(67824).overrideAll,c=e(98192).u,o=e(92880).extendFlat;R.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:_({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:r.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:o({},r.labelalias,{editType:"calc"}),tickfont:_({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:w("tick label")},tickformatstops:b(r.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:T.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:o({},c,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:o({},c,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:T.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:_({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(R,C,e){"use strict";var _=e(85720),T=e(76308).addOpacity,r=e(24040),w=e(3400),b=e(26332),c=e(95936),o=e(42568),t=e(22416),i=e(78344),n=e(52976);R.exports=function(a,s,l){var u=l.letter,p=l.font||{},f=_[u+"axis"];function m(P,F){return w.coerce(a,s,f,P,F)}function h(P,F){return w.coerce2(a,s,f,P,F)}l.name&&(s._name=l.name,s._id=l.name),m("autotypenumbers",l.autotypenumbersDflt);var g=m("type");g==="-"&&(l.data&&function(P,F){if(P.type==="-"){var U=P._id.charAt(0),I=P[U+"calendar"];P.type=n(F,I,{autotypenumbers:P.autotypenumbers})}}(s,l.data),s.type==="-"?s.type="linear":g=a.type=s.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",u+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),s.tickmode==="array"&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),s._hovertitle=u,g==="date"&&r.getComponentMethod("calendars","handleDefaults")(a,s,"calendar",l.calendar),i(s,l.fullLayout),s.c2p=w.identity;var v=m("color",l.dfltColor),x=v===a.color?v:p.color;m("title.text")&&(w.coerceFont(m,"title.font",p,{overrideDflt:{size:w.bigFont(p.size),color:x}}),m("title.offset")),m("tickangle"),m("autorange",!s.isValidRange(a.range))&&m("rangemode"),m("range"),s.cleanRange(),m("fixedrange"),b(a,s,m,g),o(a,s,m,g,l),c(a,s,m,g,l),t(a,s,m,{data:l.data,dataAttr:u});var y=h("gridcolor",T(v,.3)),A=h("gridwidth"),d=h("griddash"),S=m("showgrid");S||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var k=h("startlinecolor",v),E=h("startlinewidth",A);m("startline",s.showgrid||!!k||!!E)||(delete s.startlinecolor,delete s.startlinewidth);var L=h("endlinecolor",v),O=h("endlinewidth",A);return m("endline",s.showgrid||!!L||!!O)||(delete s.endlinecolor,delete s.endlinewidth),S?(m("minorgridcount"),m("minorgridwidth",A),m("minorgriddash",d),m("minorgridcolor",T(y,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),s.showticklabels==="none"&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,m("tickmode"),s}},58744:function(R,C,e){"use strict";var _=e(54460),T=e(3400).isArray1D,r=e(60776),w=e(51676),b=e(19216),c=e(14724),o=e(24944),t=e(26136),i=e(51512),n=e(2872),a=e(81e3);R.exports=function(s,l){var u=_.getFromId(s,l.xaxis),p=_.getFromId(s,l.yaxis),f=l.aaxis,m=l.baxis,h=l.x,g=l.y,v=[];h&&T(h)&&v.push("x"),g&&T(g)&&v.push("y"),v.length&&n(l,f,m,"a","b",v);var x=l._a=l._a||l.a,y=l._b=l._b||l.b;h=l._x||l.x,g=l._y||l.y;var A={};if(l._cheater){var d=f.cheatertype==="index"?x.length:x,S=m.cheatertype==="index"?y.length:y;h=r(d,S,l.cheaterslope)}l._x=h=t(h),l._y=g=t(g),i(h,x,y),i(g,x,y),a(l),l.setScale();var k=w(h),E=w(g),L=.5*(k[1]-k[0]),O=.5*(k[1]+k[0]),P=.5*(E[1]-E[0]),F=.5*(E[1]+E[0]),U=1.3;return k=[O-L*U,O+L*U],E=[F-P*U,F+P*U],l._extremes[u._id]=_.findExtremes(u,k,{padded:!0}),l._extremes[p._id]=_.findExtremes(p,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),c(l,f),c(l,m),A.clipsegments=o(l._xctrl,l._yctrl,f,m),A.x=h,A.y=g,A.a=x,A.b=y,[A]}},24944:function(R){"use strict";R.exports=function(C,e,_,T){var r,w,b,c=[],o=!!_.smoothing,t=!!T.smoothing,i=C[0].length-1,n=C.length-1;for(r=0,w=[],b=[];r<=i;r++)w[r]=C[0][r],b[r]=e[0][r];for(c.push({x:w,y:b,bicubic:o}),r=0,w=[],b=[];r<=n;r++)w[r]=C[r][i],b[r]=e[r][i];for(c.push({x:w,y:b,bicubic:t}),r=i,w=[],b=[];r>=0;r--)w[i-r]=C[n][r],b[i-r]=e[n][r];for(c.push({x:w,y:b,bicubic:o}),r=n,w=[],b=[];r>=0;r--)w[n-r]=C[r][0],b[n-r]=e[r][0];return c.push({x:w,y:b,bicubic:t}),c}},19216:function(R,C,e){"use strict";var _=e(54460),T=e(92880).extendFlat;R.exports=function(r,w,b){var c,o,t,i,n,a,s,l,u,p,f,m,h,g,v=r["_"+w],x=r[w+"axis"],y=x._gridlines=[],A=x._minorgridlines=[],d=x._boundarylines=[],S=r["_"+b],k=r[b+"axis"];x.tickmode==="array"&&(x.tickvals=v.slice());var E=r._xctrl,L=r._yctrl,O=E[0].length,P=E.length,F=r._a.length,U=r._b.length;_.prepTicks(x),x.tickmode==="array"&&delete x.tickvals;var I=x.smoothing?3:1;function N(B){var V,q,ne,$,K,ee,J,Z,te,oe,se,ce,ye=[],me=[],fe={};if(w==="b")for(q=r.b2j(B),ne=Math.floor(Math.max(0,Math.min(U-2,q))),$=q-ne,fe.length=U,fe.crossLength=F,fe.xy=function(pe){return r.evalxy([],pe,q)},fe.dxy=function(pe,ge){return r.dxydi([],pe,ne,ge,$)},V=0;V<F;V++)ee=Math.min(F-2,V),J=V-ee,Z=r.evalxy([],V,q),k.smoothing&&V>0&&(te=r.dxydi([],V-1,ne,0,$),ye.push(K[0]+te[0]/3),me.push(K[1]+te[1]/3),oe=r.dxydi([],V-1,ne,1,$),ye.push(Z[0]-oe[0]/3),me.push(Z[1]-oe[1]/3)),ye.push(Z[0]),me.push(Z[1]),K=Z;else for(V=r.a2i(B),ee=Math.floor(Math.max(0,Math.min(F-2,V))),J=V-ee,fe.length=F,fe.crossLength=U,fe.xy=function(pe){return r.evalxy([],V,pe)},fe.dxy=function(pe,ge){return r.dxydj([],ee,pe,J,ge)},q=0;q<U;q++)ne=Math.min(U-2,q),$=q-ne,Z=r.evalxy([],V,q),k.smoothing&&q>0&&(se=r.dxydj([],ee,q-1,J,0),ye.push(K[0]+se[0]/3),me.push(K[1]+se[1]/3),ce=r.dxydj([],ee,q-1,J,1),ye.push(Z[0]-ce[0]/3),me.push(Z[1]-ce[1]/3)),ye.push(Z[0]),me.push(Z[1]),K=Z;return fe.axisLetter=w,fe.axis=x,fe.crossAxis=k,fe.value=B,fe.constvar=b,fe.index=l,fe.x=ye,fe.y=me,fe.smoothing=k.smoothing,fe}function W(B){var V,q,ne,$,K,ee=[],J=[],Z={};if(Z.length=v.length,Z.crossLength=S.length,w==="b")for(ne=Math.max(0,Math.min(U-2,B)),K=Math.min(1,Math.max(0,B-ne)),Z.xy=function(te){return r.evalxy([],te,B)},Z.dxy=function(te,oe){return r.dxydi([],te,ne,oe,K)},V=0;V<O;V++)ee[V]=E[B*I][V],J[V]=L[B*I][V];else for(q=Math.max(0,Math.min(F-2,B)),$=Math.min(1,Math.max(0,B-q)),Z.xy=function(te){return r.evalxy([],B,te)},Z.dxy=function(te,oe){return r.dxydj([],q,te,$,oe)},V=0;V<P;V++)ee[V]=E[V][B*I],J[V]=L[V][B*I];return Z.axisLetter=w,Z.axis=x,Z.crossAxis=k,Z.value=v[B],Z.constvar=b,Z.index=B,Z.x=ee,Z.y=J,Z.smoothing=k.smoothing,Z}if(x.tickmode==="array"){for(i=5e-15,a=(n=[Math.floor((v.length-1-x.arraytick0)/x.arraydtick*(1+i)),Math.ceil(-x.arraytick0/x.arraydtick/(1+i))].sort(function(B,V){return B-V}))[0]-1,s=n[1]+1,l=a;l<s;l++)(o=x.arraytick0+x.arraydtick*l)<0||o>v.length-1||y.push(T(W(o),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(l=a;l<s;l++)if(t=x.arraytick0+x.arraydtick*l,f=Math.min(t+x.arraydtick,v.length-1),!(t<0||t>v.length-1||f<0||f>v.length-1))for(m=v[t],h=v[f],c=0;c<x.minorgridcount;c++)(g=f-t)<=0||(p=m+(h-m)*(c+1)/(x.minorgridcount+1)*(x.arraydtick/g))<v[0]||p>v[v.length-1]||A.push(T(N(p),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&d.push(T(W(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&d.push(T(W(v.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(i=5e-15,a=(n=[Math.floor((v[v.length-1]-x.tick0)/x.dtick*(1+i)),Math.ceil((v[0]-x.tick0)/x.dtick/(1+i))].sort(function(B,V){return B-V}))[0],s=n[1],l=a;l<=s;l++)u=x.tick0+x.dtick*l,y.push(T(N(u),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(l=a-1;l<s+1;l++)for(u=x.tick0+x.dtick*l,c=0;c<x.minorgridcount;c++)(p=u+x.dtick*(c+1)/(x.minorgridcount+1))<v[0]||p>v[v.length-1]||A.push(T(N(p),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&d.push(T(N(v[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&d.push(T(N(v[v.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},14724:function(R,C,e){"use strict";var _=e(54460),T=e(92880).extendFlat;R.exports=function(r,w){var b,c,o,t=w._labels=[],i=w._gridlines;for(b=0;b<i.length;b++)o=i[b],["start","both"].indexOf(w.showticklabels)!==-1&&(c=_.tickText(w,o.value),T(c,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(c)),["end","both"].indexOf(w.showticklabels)!==-1&&(c=_.tickText(w,o.value),T(c,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(c))}},62284:function(R){"use strict";R.exports=function(C,e,_,T){var r=C[0]-e[0],w=C[1]-e[1],b=_[0]-e[0],c=_[1]-e[1],o=Math.pow(r*r+w*w,.25),t=Math.pow(b*b+c*c,.25),i=(t*t*r-o*o*b)*T,n=(t*t*w-o*o*c)*T,a=t*(o+t)*3,s=o*(o+t)*3;return[[e[0]+(a&&i/a),e[1]+(a&&n/a)],[e[0]-(s&&i/s),e[1]-(s&&n/s)]]}},60776:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray;R.exports=function(T,r,w){var b,c,o,t,i,n,a=[],s=_(T)?T.length:T,l=_(r)?r.length:r,u=_(T)?T:null,p=_(r)?r:null;u&&(o=(u.length-1)/(u[u.length-1]-u[0])/(s-1)),p&&(t=(p.length-1)/(p[p.length-1]-p[0])/(l-1));var f=1/0,m=-1/0;for(c=0;c<l;c++)for(a[c]=[],i=p?(p[c]-p[0])*t:c/(l-1),b=0;b<s;b++)n=(u?(u[b]-u[0])*o:b/(s-1))-i*w,f=Math.min(n,f),m=Math.max(n,m),a[c][b]=n;var h=1/(m-f),g=-f*h;for(c=0;c<l;c++)for(b=0;b<s;b++)a[c][b]=h*a[c][b]+g;return a}},30180:function(R,C,e){"use strict";var _=e(62284),T=e(3400).ensureArray;function r(w,b,c){var o=-.5*c[0]+1.5*b[0],t=-.5*c[1]+1.5*b[1];return[(2*o+w[0])/3,(2*t+w[1])/3]}R.exports=function(w,b,c,o,t,i){var n,a,s,l,u,p,f,m,h,g,v=c[0].length,x=c.length,y=t?3*v-2:v,A=i?3*x-2:x;for(w=T(w,A),b=T(b,A),s=0;s<A;s++)w[s]=T(w[s],y),b[s]=T(b[s],y);for(a=0,l=0;a<x;a++,l+=i?3:1)for(u=w[l],p=b[l],f=c[a],m=o[a],n=0,s=0;n<v;n++,s+=t?3:1)u[s]=f[n],p[s]=m[n];if(t)for(a=0,l=0;a<x;a++,l+=i?3:1){for(n=1,s=3;n<v-1;n++,s+=3)h=_([c[a][n-1],o[a][n-1]],[c[a][n],o[a][n]],[c[a][n+1],o[a][n+1]],t),w[l][s-1]=h[0][0],b[l][s-1]=h[0][1],w[l][s+1]=h[1][0],b[l][s+1]=h[1][1];g=r([w[l][0],b[l][0]],[w[l][2],b[l][2]],[w[l][3],b[l][3]]),w[l][1]=g[0],b[l][1]=g[1],g=r([w[l][y-1],b[l][y-1]],[w[l][y-3],b[l][y-3]],[w[l][y-4],b[l][y-4]]),w[l][y-2]=g[0],b[l][y-2]=g[1]}if(i)for(s=0;s<y;s++){for(l=3;l<A-3;l+=3)h=_([w[l-3][s],b[l-3][s]],[w[l][s],b[l][s]],[w[l+3][s],b[l+3][s]],i),w[l-1][s]=h[0][0],b[l-1][s]=h[0][1],w[l+1][s]=h[1][0],b[l+1][s]=h[1][1];g=r([w[0][s],b[0][s]],[w[2][s],b[2][s]],[w[3][s],b[3][s]]),w[1][s]=g[0],b[1][s]=g[1],g=r([w[A-1][s],b[A-1][s]],[w[A-3][s],b[A-3][s]],[w[A-4][s],b[A-4][s]]),w[A-2][s]=g[0],b[A-2][s]=g[1]}if(t&&i)for(l=1;l<A;l+=(l+1)%3==0?2:1){for(s=3;s<y-3;s+=3)h=_([w[l][s-3],b[l][s-3]],[w[l][s],b[l][s]],[w[l][s+3],b[l][s+3]],t),w[l][s-1]=.5*(w[l][s-1]+h[0][0]),b[l][s-1]=.5*(b[l][s-1]+h[0][1]),w[l][s+1]=.5*(w[l][s+1]+h[1][0]),b[l][s+1]=.5*(b[l][s+1]+h[1][1]);g=r([w[l][0],b[l][0]],[w[l][2],b[l][2]],[w[l][3],b[l][3]]),w[l][1]=.5*(w[l][1]+g[0]),b[l][1]=.5*(b[l][1]+g[1]),g=r([w[l][y-1],b[l][y-1]],[w[l][y-3],b[l][y-3]],[w[l][y-4],b[l][y-4]]),w[l][y-2]=.5*(w[l][y-2]+g[0]),b[l][y-2]=.5*(b[l][y-2]+g[1])}return[w,b]}},24588:function(R){"use strict";R.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(R){"use strict";R.exports=function(C,e,_){return e&&_?function(T,r,w,b,c){var o,t,i,n,a,s;T||(T=[]),r*=3,w*=3;var l=b*b,u=1-b,p=u*u,f=u*b*2,m=-3*p,h=3*(p-f),g=3*(f-l),v=3*l,x=c*c,y=x*c,A=1-c,d=A*A,S=d*A;for(s=0;s<C.length;s++)o=m*(a=C[s])[w][r]+h*a[w][r+1]+g*a[w][r+2]+v*a[w][r+3],t=m*a[w+1][r]+h*a[w+1][r+1]+g*a[w+1][r+2]+v*a[w+1][r+3],i=m*a[w+2][r]+h*a[w+2][r+1]+g*a[w+2][r+2]+v*a[w+2][r+3],n=m*a[w+3][r]+h*a[w+3][r+1]+g*a[w+3][r+2]+v*a[w+3][r+3],T[s]=S*o+3*(d*c*t+A*x*i)+y*n;return T}:e?function(T,r,w,b,c){var o,t,i,n;T||(T=[]),r*=3;var a=b*b,s=1-b,l=s*s,u=s*b*2,p=-3*l,f=3*(l-u),m=3*(u-a),h=3*a,g=1-c;for(i=0;i<C.length;i++)o=p*(n=C[i])[w][r]+f*n[w][r+1]+m*n[w][r+2]+h*n[w][r+3],t=p*n[w+1][r]+f*n[w+1][r+1]+m*n[w+1][r+2]+h*n[w+1][r+3],T[i]=g*o+c*t;return T}:_?function(T,r,w,b,c){var o,t,i,n,a,s;T||(T=[]),w*=3;var l=c*c,u=l*c,p=1-c,f=p*p,m=f*p;for(a=0;a<C.length;a++)o=(s=C[a])[w][r+1]-s[w][r],t=s[w+1][r+1]-s[w+1][r],i=s[w+2][r+1]-s[w+2][r],n=s[w+3][r+1]-s[w+3][r],T[a]=m*o+3*(f*c*t+p*l*i)+u*n;return T}:function(T,r,w,b,c){var o,t,i,n;T||(T=[]);var a=1-c;for(i=0;i<C.length;i++)o=(n=C[i])[w][r+1]-n[w][r],t=n[w+1][r+1]-n[w+1][r],T[i]=a*o+c*t;return T}}},24464:function(R){"use strict";R.exports=function(C,e,_){return e&&_?function(T,r,w,b,c){var o,t,i,n,a,s;T||(T=[]),r*=3,w*=3;var l=b*b,u=l*b,p=1-b,f=p*p,m=f*p,h=c*c,g=1-c,v=g*g,x=g*c*2,y=-3*v,A=3*(v-x),d=3*(x-h),S=3*h;for(s=0;s<C.length;s++)o=y*(a=C[s])[w][r]+A*a[w+1][r]+d*a[w+2][r]+S*a[w+3][r],t=y*a[w][r+1]+A*a[w+1][r+1]+d*a[w+2][r+1]+S*a[w+3][r+1],i=y*a[w][r+2]+A*a[w+1][r+2]+d*a[w+2][r+2]+S*a[w+3][r+2],n=y*a[w][r+3]+A*a[w+1][r+3]+d*a[w+2][r+3]+S*a[w+3][r+3],T[s]=m*o+3*(f*b*t+p*l*i)+u*n;return T}:e?function(T,r,w,b,c){var o,t,i,n,a,s;T||(T=[]),r*=3;var l=c*c,u=l*c,p=1-c,f=p*p,m=f*p;for(a=0;a<C.length;a++)o=(s=C[a])[w+1][r]-s[w][r],t=s[w+1][r+1]-s[w][r+1],i=s[w+1][r+2]-s[w][r+2],n=s[w+1][r+3]-s[w][r+3],T[a]=m*o+3*(f*c*t+p*l*i)+u*n;return T}:_?function(T,r,w,b,c){var o,t,i,n;T||(T=[]),w*=3;var a=1-b,s=c*c,l=1-c,u=l*l,p=l*c*2,f=-3*u,m=3*(u-p),h=3*(p-s),g=3*s;for(i=0;i<C.length;i++)o=f*(n=C[i])[w][r]+m*n[w+1][r]+h*n[w+2][r]+g*n[w+3][r],t=f*n[w][r+1]+m*n[w+1][r+1]+h*n[w+2][r+1]+g*n[w+3][r+1],T[i]=a*o+b*t;return T}:function(T,r,w,b,c){var o,t,i,n;T||(T=[]);var a=1-b;for(i=0;i<C.length;i++)o=(n=C[i])[w+1][r]-n[w][r],t=n[w+1][r+1]-n[w][r+1],T[i]=a*o+b*t;return T}}},29056:function(R){"use strict";R.exports=function(C,e,_,T,r){var w=e-2,b=_-2;return T&&r?function(c,o,t){var i,n,a,s,l,u;c||(c=[]);var p=Math.max(0,Math.min(Math.floor(o),w)),f=Math.max(0,Math.min(Math.floor(t),b)),m=Math.max(0,Math.min(1,o-p)),h=Math.max(0,Math.min(1,t-f));p*=3,f*=3;var g=m*m,v=g*m,x=1-m,y=x*x,A=y*x,d=h*h,S=d*h,k=1-h,E=k*k,L=E*k;for(u=0;u<C.length;u++)i=A*(l=C[u])[f][p]+3*(y*m*l[f][p+1]+x*g*l[f][p+2])+v*l[f][p+3],n=A*l[f+1][p]+3*(y*m*l[f+1][p+1]+x*g*l[f+1][p+2])+v*l[f+1][p+3],a=A*l[f+2][p]+3*(y*m*l[f+2][p+1]+x*g*l[f+2][p+2])+v*l[f+2][p+3],s=A*l[f+3][p]+3*(y*m*l[f+3][p+1]+x*g*l[f+3][p+2])+v*l[f+3][p+3],c[u]=L*i+3*(E*h*n+k*d*a)+S*s;return c}:T?function(c,o,t){c||(c=[]);var i,n,a,s,l,u,p=Math.max(0,Math.min(Math.floor(o),w)),f=Math.max(0,Math.min(Math.floor(t),b)),m=Math.max(0,Math.min(1,o-p)),h=Math.max(0,Math.min(1,t-f));p*=3;var g=m*m,v=g*m,x=1-m,y=x*x,A=y*x,d=1-h;for(l=0;l<C.length;l++)i=d*(u=C[l])[f][p]+h*u[f+1][p],n=d*u[f][p+1]+h*u[f+1][p+1],a=d*u[f][p+2]+h*u[f+1][p+1],s=d*u[f][p+3]+h*u[f+1][p+1],c[l]=A*i+3*(y*m*n+x*g*a)+v*s;return c}:r?function(c,o,t){c||(c=[]);var i,n,a,s,l,u,p=Math.max(0,Math.min(Math.floor(o),w)),f=Math.max(0,Math.min(Math.floor(t),b)),m=Math.max(0,Math.min(1,o-p)),h=Math.max(0,Math.min(1,t-f));f*=3;var g=h*h,v=g*h,x=1-h,y=x*x,A=y*x,d=1-m;for(l=0;l<C.length;l++)i=d*(u=C[l])[f][p]+m*u[f][p+1],n=d*u[f+1][p]+m*u[f+1][p+1],a=d*u[f+2][p]+m*u[f+2][p+1],s=d*u[f+3][p]+m*u[f+3][p+1],c[l]=A*i+3*(y*h*n+x*g*a)+v*s;return c}:function(c,o,t){c||(c=[]);var i,n,a,s,l=Math.max(0,Math.min(Math.floor(o),w)),u=Math.max(0,Math.min(Math.floor(t),b)),p=Math.max(0,Math.min(1,o-l)),f=Math.max(0,Math.min(1,t-u)),m=1-f,h=1-p;for(a=0;a<C.length;a++)i=h*(s=C[a])[u][l]+p*s[u][l+1],n=h*s[u+1][l]+p*s[u+1][l+1],c[a]=m*i+f*n;return c}}},38356:function(R,C,e){"use strict";var _=e(3400),T=e(86411),r=e(93504),w=e(85720),b=e(22548);R.exports=function(c,o,t,i){function n(s,l){return _.coerce(c,o,w,s,l)}o._clipPathId="clip"+o.uid+"carpet";var a=n("color",b.defaultLine);_.coerceFont(n,"font",i.font),n("carpet"),r(c,o,i,n,a),o.a&&o.b?(o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),T(c,o,n)||(o.visible=!1),o._cheater&&n("cheaterslope"),n("zorder")):o.visible=!1}},95856:function(R,C,e){"use strict";R.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(R){"use strict";R.exports=function(C,e){for(var _,T=C._fullData.length,r=0;r<T;r++){var w=C._fullData[r];if(w.index!==e.index&&w.type==="carpet"&&(_||(_=w),w.carpet===e.carpet))return w}return _}},53416:function(R){"use strict";R.exports=function(C,e,_){if(C.length===0)return"";var T,r=[],w=_?3:1;for(T=0;T<C.length;T+=w)r.push(C[T]+","+e[T]),_&&T<C.length-w&&(r.push("C"),r.push([C[T+1]+","+e[T+1],C[T+2]+","+e[T+2]+" "].join(" ")));return r.join(_?"":"L")}},87072:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray;R.exports=function(T,r,w){var b;for(_(T)?T.length>r.length&&(T=T.slice(0,r.length)):T=[],b=0;b<r.length;b++)T[b]=w(r[b]);return T}},15584:function(R){"use strict";R.exports=function(C,e,_,T,r,w){var b=r[0]*C.dpdx(e),c=r[1]*C.dpdy(_),o=1,t=1;if(w){var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(w[0]*w[0]+w[1]*w[1]),a=(r[0]*w[0]+r[1]*w[1])/i/n;t=Math.max(0,a)}var s=180*Math.atan2(c,b)/Math.PI;return s<-90?(s+=180,o=-o):s>90&&(s-=180,o=-o),{angle:s,flip:o,p:C.c2p(T,e,_),offsetMultplier:t}}},164:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(87072),w=e(53416),b=e(15584),c=e(72736),o=e(3400),t=o.strRotate,i=o.strTranslate,n=e(84284);function a(f,m,h,g,v,x,y){var A="const-"+v+"-lines",d=h.selectAll("."+A).data(x);d.enter().append("path").classed(A,!0).style("vector-effect",y?"none":"non-scaling-stroke"),d.each(function(S){var k=S,E=k.x,L=k.y,O=r([],E,f.c2p),P=r([],L,m.c2p),F="M"+w(O,P,k.smoothing);_.select(this).attr("d",F).style("stroke-width",k.width).style("stroke",k.color).style("stroke-dasharray",T.dashStyle(k.dash,k.width)).style("fill","none")}),d.exit().remove()}function s(f,m,h,g,v,x,y,A){var d=x.selectAll("text."+A).data(y);d.enter().append("text").classed(A,!0);var S=0,k={};return d.each(function(E,L){var O;if(E.axis.tickangle==="auto")O=b(g,m,h,E.xy,E.dxy);else{var P=(E.axis.tickangle+180)*Math.PI/180;O=b(g,m,h,E.xy,[Math.cos(P),Math.sin(P)])}L||(k={angle:O.angle,flip:O.flip});var F=(E.endAnchor?-1:1)*O.flip,U=_.select(this).attr({"text-anchor":F>0?"start":"end","data-notex":1}).call(T.font,E.font).text(E.text).call(c.convertToTspans,f),I=T.bBox(this);U.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(E.axis.labelpadding*F,.3*I.height)),S=Math.max(S,I.width+E.axis.labelpadding)}),d.exit().remove(),k.maxExtent=S,k}R.exports=function(f,m,h,g){var v=f._context.staticPlot,x=m.xaxis,y=m.yaxis,A=f._fullLayout._clips;o.makeTraceGroups(g,h,"trace").each(function(d){var S=_.select(this),k=d[0],E=k.trace,L=E.aaxis,O=E.baxis,P=o.ensureSingle(S,"g","minorlayer"),F=o.ensureSingle(S,"g","majorlayer"),U=o.ensureSingle(S,"g","boundarylayer"),I=o.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),a(x,y,F,0,"a",L._gridlines,!0),a(x,y,F,0,"b",O._gridlines,!0),a(x,y,P,0,"a",L._minorgridlines,!0),a(x,y,P,0,"b",O._minorgridlines,!0),a(x,y,U,0,"a-boundary",L._boundarylines,v),a(x,y,U,0,"b-boundary",O._boundarylines,v);var N=s(f,x,y,E,0,I,L._labels,"a-label"),W=s(f,x,y,E,0,I,O._labels,"b-label");(function(B,V,q,ne,$,K,ee,J){var Z,te,oe,se,ce=o.aggNums(Math.min,null,q.a),ye=o.aggNums(Math.max,null,q.a),me=o.aggNums(Math.min,null,q.b),fe=o.aggNums(Math.max,null,q.b);Z=.5*(ce+ye),te=me,oe=q.ab2xy(Z,te,!0),se=q.dxyda_rough(Z,te),ee.angle===void 0&&o.extendFlat(ee,b(q,$,K,oe,q.dxydb_rough(Z,te))),p(B,V,q,0,oe,se,q.aaxis,$,K,ee,"a-title"),Z=ce,te=.5*(me+fe),oe=q.ab2xy(Z,te,!0),se=q.dxydb_rough(Z,te),J.angle===void 0&&o.extendFlat(J,b(q,$,K,oe,q.dxyda_rough(Z,te))),p(B,V,q,0,oe,se,q.baxis,$,K,J,"b-title")})(f,I,E,0,x,y,N,W),function(B,V,q,ne,$){var K,ee,J,Z,te=q.select("#"+B._clipPathId);te.size()||(te=q.append("clipPath").classed("carpetclip",!0));var oe=o.ensureSingle(te,"path","carpetboundary"),se=V.clipsegments,ce=[];for(Z=0;Z<se.length;Z++)K=se[Z],ee=r([],K.x,ne.c2p),J=r([],K.y,$.c2p),ce.push(w(ee,J,K.bicubic));var ye="M"+ce.join("L")+"Z";te.attr("id",B._clipPathId),oe.attr("d",ye)}(E,k,A,x,y)})};var l=n.LINE_SPACING,u=(1-n.MID_SHIFT)/l+1;function p(f,m,h,g,v,x,y,A,d,S,k){var E=[];y.title.text&&E.push(y.title.text);var L=m.selectAll("text."+k).data(E),O=S.maxExtent;L.enter().append("text").classed(k,!0),L.each(function(){var P=b(h,A,d,v,x);["start","both"].indexOf(y.showticklabels)===-1&&(O=0);var F=y.title.font.size;O+=F+y.title.offset;var U=(S.angle+(S.flip<0?180:0)-P.angle+450)%360,I=U>90&&U<270,N=_.select(this);N.text(y.title.text).call(c.convertToTspans,f),I&&(O=(-c.lineCount(N)+u)*l*F-O),N.attr("transform",i(P.p[0],P.p[1])+t(P.angle)+i(0,O)).attr("text-anchor","middle").call(T.font,y.title.font)}),L.exit().remove()}},81e3:function(R,C,e){"use strict";var _=e(24588),T=e(14952).findBin,r=e(30180),w=e(29056),b=e(26435),c=e(24464);R.exports=function(o){var t=o._a,i=o._b,n=t.length,a=i.length,s=o.aaxis,l=o.baxis,u=t[0],p=t[n-1],f=i[0],m=i[a-1],h=t[t.length-1]-t[0],g=i[i.length-1]-i[0],v=h*_.RELATIVE_CULL_TOLERANCE,x=g*_.RELATIVE_CULL_TOLERANCE;u-=v,p+=v,f-=x,m+=x,o.isVisible=function(y,A){return y>u&&y<p&&A>f&&A<m},o.isOccluded=function(y,A){return y<u||y>p||A<f||A>m},o.setScale=function(){var y=o._x,A=o._y,d=r(o._xctrl,o._yctrl,y,A,s.smoothing,l.smoothing);o._xctrl=d[0],o._yctrl=d[1],o.evalxy=w([o._xctrl,o._yctrl],n,a,s.smoothing,l.smoothing),o.dxydi=b([o._xctrl,o._yctrl],s.smoothing,l.smoothing),o.dxydj=c([o._xctrl,o._yctrl],s.smoothing,l.smoothing)},o.i2a=function(y){var A=Math.max(0,Math.floor(y[0]),n-2),d=y[0]-A;return(1-d)*t[A]+d*t[A+1]},o.j2b=function(y){var A=Math.max(0,Math.floor(y[1]),n-2),d=y[1]-A;return(1-d)*i[A]+d*i[A+1]},o.ij2ab=function(y){return[o.i2a(y[0]),o.j2b(y[1])]},o.a2i=function(y){var A=Math.max(0,Math.min(T(y,t),n-2)),d=t[A],S=t[A+1];return Math.max(0,Math.min(n-1,A+(y-d)/(S-d)))},o.b2j=function(y){var A=Math.max(0,Math.min(T(y,i),a-2)),d=i[A],S=i[A+1];return Math.max(0,Math.min(a-1,A+(y-d)/(S-d)))},o.ab2ij=function(y){return[o.a2i(y[0]),o.b2j(y[1])]},o.i2c=function(y,A){return o.evalxy([],y,A)},o.ab2xy=function(y,A,d){if(!d&&(y<t[0]||y>t[n-1]|A<i[0]||A>i[a-1]))return[!1,!1];var S=o.a2i(y),k=o.b2j(A),E=o.evalxy([],S,k);if(d){var L,O,P,F,U=0,I=0,N=[];y<t[0]?(L=0,O=0,U=(y-t[0])/(t[1]-t[0])):y>t[n-1]?(L=n-2,O=1,U=(y-t[n-1])/(t[n-1]-t[n-2])):O=S-(L=Math.max(0,Math.min(n-2,Math.floor(S)))),A<i[0]?(P=0,F=0,I=(A-i[0])/(i[1]-i[0])):A>i[a-1]?(P=a-2,F=1,I=(A-i[a-1])/(i[a-1]-i[a-2])):F=k-(P=Math.max(0,Math.min(a-2,Math.floor(k)))),U&&(o.dxydi(N,L,P,O,F),E[0]+=N[0]*U,E[1]+=N[1]*U),I&&(o.dxydj(N,L,P,O,F),E[0]+=N[0]*I,E[1]+=N[1]*I)}return E},o.c2p=function(y,A,d){return[A.c2p(y[0]),d.c2p(y[1])]},o.p2x=function(y,A,d){return[A.p2c(y[0]),d.p2c(y[1])]},o.dadi=function(y){var A=Math.max(0,Math.min(t.length-2,y));return t[A+1]-t[A]},o.dbdj=function(y){var A=Math.max(0,Math.min(i.length-2,y));return i[A+1]-i[A]},o.dxyda=function(y,A,d,S){var k=o.dxydi(null,y,A,d,S),E=o.dadi(y,d);return[k[0]/E,k[1]/E]},o.dxydb=function(y,A,d,S){var k=o.dxydj(null,y,A,d,S),E=o.dbdj(A,S);return[k[0]/E,k[1]/E]},o.dxyda_rough=function(y,A,d){var S=h*(d||.1),k=o.ab2xy(y+S,A,!0),E=o.ab2xy(y-S,A,!0);return[.5*(k[0]-E[0])/S,.5*(k[1]-E[1])/S]},o.dxydb_rough=function(y,A,d){var S=g*(d||.1),k=o.ab2xy(y,A+S,!0),E=o.ab2xy(y,A-S,!0);return[.5*(k[0]-E[0])/S,.5*(k[1]-E[1])/S]},o.dpdx=function(y){return y._m},o.dpdy=function(y){return y._m}}},51512:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r,w){var b,c,o,t=[],i=[],n=T[0].length,a=T.length;function s(B,V){var q,ne=0,$=0;return B>0&&(q=T[V][B-1])!==void 0&&($++,ne+=q),B<n-1&&(q=T[V][B+1])!==void 0&&($++,ne+=q),V>0&&(q=T[V-1][B])!==void 0&&($++,ne+=q),V<a-1&&(q=T[V+1][B])!==void 0&&($++,ne+=q),ne/Math.max(1,$)}var l,u,p,f,m,h,g,v,x,y,A,d=0;for(b=0;b<n;b++)for(c=0;c<a;c++)T[c][b]===void 0&&(t.push(b),i.push(c),T[c][b]=s(b,c)),d=Math.max(d,Math.abs(T[c][b]));if(!t.length)return T;var S=0,k=0,E=t.length;do{for(S=0,o=0;o<E;o++){b=t[o],c=i[o];var L,O,P,F,U,I,N=0,W=0;b===0?(P=r[U=Math.min(n-1,2)],F=r[1],L=T[c][U],W+=(O=T[c][1])+(O-L)*(r[0]-F)/(F-P),N++):b===n-1&&(P=r[U=Math.max(0,n-3)],F=r[n-2],L=T[c][U],W+=(O=T[c][n-2])+(O-L)*(r[n-1]-F)/(F-P),N++),(b===0||b===n-1)&&c>0&&c<a-1&&(l=w[c+1]-w[c],W+=((u=w[c]-w[c-1])*T[c+1][b]+l*T[c-1][b])/(u+l),N++),c===0?(P=w[I=Math.min(a-1,2)],F=w[1],L=T[I][b],W+=(O=T[1][b])+(O-L)*(w[0]-F)/(F-P),N++):c===a-1&&(P=w[I=Math.max(0,a-3)],F=w[a-2],L=T[I][b],W+=(O=T[a-2][b])+(O-L)*(w[a-1]-F)/(F-P),N++),(c===0||c===a-1)&&b>0&&b<n-1&&(l=r[b+1]-r[b],W+=((u=r[b]-r[b-1])*T[c][b+1]+l*T[c][b-1])/(u+l),N++),N?W/=N:(p=r[b+1]-r[b],f=r[b]-r[b-1],v=(m=w[c+1]-w[c])*(h=w[c]-w[c-1])*(m+h),W=((g=p*f*(p+f))*(h*T[c+1][b]+m*T[c-1][b])+v*(f*T[c][b+1]+p*T[c][b-1]))/(v*(f+p)+g*(h+m))),S+=(y=(x=W-T[c][b])/d)*y,A=N?0:.85,T[c][b]+=x*(1+A)}S=Math.sqrt(S)}while(k++<100&&S>1e-5);return _.log("Smoother converged to",S,"after",k,"iterations"),T}},86411:function(R,C,e){"use strict";var _=e(3400).isArray1D;R.exports=function(T,r,w){var b=w("x"),c=b&&b.length,o=w("y"),t=o&&o.length;if(!c&&!t)return!1;if(r._cheater=!b,c&&!_(b)||t&&!_(o))r._length=null;else{var i=c?b.length:1/0;t&&(i=Math.min(i,o.length)),r.a&&r.a.length&&(i=Math.min(i,r.a.length)),r.b&&r.b.length&&(i=Math.min(i,r.b.length)),r._length=i}return!0}},83372:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(6096),r=e(49084),w=e(45464),b=e(22548).defaultLine,c=e(92880).extendFlat,o=T.marker.line;R.exports=c({locations:{valType:"data_array",editType:"calc"},locationmode:T.locationmode,z:{valType:"data_array",editType:"calc"},geojson:c({},T.geojson,{}),featureidkey:T.featureidkey,text:c({},T.text,{}),hovertext:c({},T.hovertext,{}),marker:{line:{color:c({},o.color,{dflt:b}),width:c({},o.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:T.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:T.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:c({},w.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:_(),showlegend:c({},w.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(R,C,e){"use strict";var _=e(38248),T=e(39032).BADNUM,r=e(47128),w=e(20148),b=e(4500);function c(o){return o&&typeof o=="string"}R.exports=function(o,t){var i,n=t._length,a=new Array(n);i=t.geojson?function(f){return c(f)||_(f)}:c;for(var s=0;s<n;s++){var l=a[s]={},u=t.locations[s],p=t.z[s];i(u)&&_(p)?(l.loc=u,l.z=p):(l.loc=null,l.z=T),l.index=s}return w(a,t),r(o,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(a,t),a}},30972:function(R,C,e){"use strict";var _=e(3400),T=e(27260),r=e(83372);R.exports=function(w,b,c,o){function t(l,u){return _.coerce(w,b,r,l,u)}var i=t("locations"),n=t("z");if(i&&i.length&&_.isArrayOrTypedArray(n)&&n.length){b._length=Math.min(i.length,n.length);var a,s=t("geojson");(typeof s=="string"&&s!==""||_.isPlainObject(s))&&(a="geojson-id"),t("locationmode",a)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),T(w,b,o,t,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(R){"use strict";R.exports=function(C,e,_,T,r){C.location=e.location,C.z=e.z;var w=T[r];return w.fIn&&w.fIn.properties&&(C.properties=w.fIn.properties),C.ct=w.ct,C}},69224:function(R,C,e){"use strict";var _=e(54460),T=e(83372),r=e(3400).fillText;R.exports=function(w,b,c){var o,t,i,n,a=w.cd,s=a[0].trace,l=w.subplot,u=[b,c],p=[b+360,c];for(t=0;t<a.length;t++)if(n=!1,(o=a[t])._polygons){for(i=0;i<o._polygons.length;i++)o._polygons[i].contains(u)&&(n=!n),o._polygons[i].contains(p)&&(n=!n);if(n)break}if(n&&o)return w.x0=w.x1=w.xa.c2p(o.ct),w.y0=w.y1=w.ya.c2p(o.ct),w.index=o.index,w.location=o.loc,w.z=o.z,w.zLabel=_.tickText(l.mockAxis,l.mockAxis.c2l(o.z),"hover").text,w.hovertemplate=o.hovertemplate,function(f,m,h){if(!m.hovertemplate){var g=h.hi||m.hoverinfo,v=String(h.loc),x=g==="all"?T.hoverinfo.flags:g.split("+"),y=x.indexOf("name")!==-1,A=x.indexOf("location")!==-1,d=x.indexOf("z")!==-1,S=x.indexOf("text")!==-1,k=[];!y&&A?f.nameOverride=v:(y&&(f.nameOverride=m.name),A&&k.push(v)),d&&k.push(f.zLabel),S&&r(h,m,k),f.extraText=k.join("<br>")}}(w,s,o),[w]}},54272:function(R,C,e){"use strict";R.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(27144),w=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,c=e(7947).style;R.exports={calcGeoJSON:function(o,t){for(var i=o[0].trace,n=t[i.geo],a=n._subplot,s=i.locationmode,l=i._length,u=s==="geojson-id"?r.extractTraceFeature(o):w(i,a.topojson),p=[],f=[],m=0;m<l;m++){var h=o[m],g=s==="geojson-id"?h.fOut:r.locationToFeature(s,h.loc,u);if(g){h.geojson=g,h.ct=g.properties.ct,h._polygons=r.feature2polygons(g);var v=r.computeBbox(g);p.push(v[0],v[2]),f.push(v[1],v[3])}else h.geojson=null}if(n.fitbounds==="geojson"&&s==="geojson-id"){var x=r.computeBbox(r.getTraceGeojson(i));p=[x[0],x[2]],f=[x[1],x[3]]}var y={padded:!0};i._extremes.lon=b(n.lonaxis._ax,p,y),i._extremes.lat=b(n.lataxis._ax,f,y)},plot:function(o,t,i){var n=t.layers.backplot.select(".choroplethlayer");T.makeTraceGroups(n,i,"trace choropleth").each(function(a){var s=_.select(this).selectAll("path.choroplethlocation").data(T.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),c(o,a)})}}},17328:function(R){"use strict";R.exports=function(C,e){var _,T,r,w,b,c=C.cd,o=C.xaxis,t=C.yaxis,i=[];if(e===!1)for(_=0;_<c.length;_++)c[_].selected=0;else for(_=0;_<c.length;_++)(r=(T=c[_]).ct)&&(w=o.c2p(r),b=t.c2p(r),e.contains([w,b],null,_,C)?(i.push({pointNumber:_,lon:r[0],lat:r[1]}),T.selected=1):T.selected=0);return i}},7947:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(43616),w=e(8932);function b(c,o){var t=o[0].trace,i=o[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},a=n.line||{},s=w.makeColorScaleFuncFromTrace(t);i.each(function(l){_.select(this).attr("fill",s(l.z)).call(T.stroke,l.mlc||a.color).call(r.dashLine,"",l.mlw||a.width||0).style("opacity",n.opacity)}),r.selectedPointStyle(i,t)}R.exports={style:function(c,o){o&&b(0,o)},styleOnSelect:function(c,o){var t=o[0].node3,i=o[0].trace;i.selectedpoints?r.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,o)}}},45608:function(R,C,e){"use strict";var _=e(83372),T=e(49084),r=e(21776).Ks,w=e(45464),b=e(92880).extendFlat;R.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},_.featureidkey,{}),below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,marker:{line:{color:b({},_.marker.line.color,{editType:"plot"}),width:b({},_.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},_.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},_.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},_.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:_.hoverinfo,hovertemplate:r({},{keys:["properties"]}),showlegend:b({},w.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(8932),w=e(43616),b=e(44808).makeBlank,c=e(27144);function o(t){var i,n=t[0].trace,a=n._opts;if(n.selectedpoints){for(var s=w.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=s.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=T.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return T.extendFlat(a.fill.paint,{"fill-opacity":i}),T.extendFlat(a.line.paint,{"line-opacity":i}),a}R.exports={convert:function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,a={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},l=i._opts={fill:a,line:s,geojson:b()};if(!n)return l;var u=c.extractTraceFeature(t);if(!u)return l;var p,f,m,h=r.makeColorScaleFuncFromTrace(i),g=i.marker,v=g.line||{};T.isArrayOrTypedArray(g.opacity)&&(p=function(k){var E=k.mo;return _(E)?+T.constrain(E,0,1):0}),T.isArrayOrTypedArray(v.color)&&(f=function(k){return k.mlc}),T.isArrayOrTypedArray(v.width)&&(m=function(k){return k.mlw});for(var x=0;x<t.length;x++){var y=t[x],A=y.fOut;if(A){var d=A.properties;d.fc=h(y.z),p&&(d.mo=p(y)),f&&(d.mlc=f(y)),m&&(d.mlw=m(y)),y.ct=d.ct,y._polygons=c.feature2polygons(A)}}var S=p?{type:"identity",property:"mo"}:g.opacity;return T.extendFlat(a.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),T.extendFlat(s.paint,{"line-color":f?{type:"identity",property:"mlc"}:v.color,"line-width":m?{type:"identity",property:"mlw"}:v.width,"line-opacity":S}),a.layout.visibility="visible",s.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},o(t),l},convertOnSelect:o}},9352:function(R,C,e){"use strict";var _=e(3400),T=e(27260),r=e(45608);R.exports=function(w,b,c,o){function t(s,l){return _.coerce(w,b,r,s,l)}var i=t("locations"),n=t("z"),a=t("geojson");_.isArrayOrTypedArray(i)&&i.length&&_.isArrayOrTypedArray(n)&&n.length&&(typeof a=="string"&&a!==""||_.isPlainObject(a))?(t("featureidkey"),b._length=Math.min(i.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),T(w,b,o,t,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(R,C,e){"use strict";R.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(_,T){T&&T[0].trace._glTrace.updateOnSelect(T)},getBelow:function(_,T){for(var r=T.getMapLayers(),w=r.length-2;w>=0;w--){var b=r[w].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var c=w+1;c<r.length;c++)if(typeof(b=r[c].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(R,C,e){"use strict";var _=e(13504).convert,T=e(13504).convertOnSelect,r=e(47552).traceLayerPrefix;function w(c,o){this.type="choroplethmapbox",this.subplot=c,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",r+o+"-fill"],["line",r+o+"-line"]],this.below=null}var b=w.prototype;b.update=function(c){this._update(_(c)),c[0].trace._glTrace=this},b.updateOnSelect=function(c){this._update(T(c))},b._update=function(c){var o=this.subplot,t=this.layerList,i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(c.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(c,i),this.below=i);for(var n=0;n<t.length;n++){var a=t[n],s=a[0],l=a[1],u=c[s];o.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&o.setOptions(l,"setPaintProperty",u.paint)}},b._addLayers=function(c,o){for(var t=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var s=i[a],l=s[0],u=c[l];t.addLayer({type:l,id:s[1],source:n,layout:u.layout,paint:u.paint},o)}},b._removeLayers=function(){for(var c=this.subplot.map,o=this.layerList,t=o.length-1;t>=0;t--)c.removeLayer(o[t][1])},b.dispose=function(){var c=this.subplot.map;this._removeLayers(),c.removeSource(this.sourceId)},R.exports=function(c,o){var t=o[0].trace,i=new w(c,t.uid),n=i.sourceId,a=_(o),s=i.below=c.belowLookup["trace-"+t.uid];return c.map.addSource(n,{type:"geojson",data:a.geojson}),i._addLayers(a,s),o[0].trace._glTrace=i,i}},86040:function(R,C,e){"use strict";var _=e(49084),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(52948),b=e(45464),c=e(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["norm"]}),uhoverformat:T("u",1),vhoverformat:T("v",1),whoverformat:T("w",1),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),showlegend:c({},b.showlegend,{dflt:!1})};c(o,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=w[t]}),o.hoverinfo=c({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,R.exports=o},83344:function(R,C,e){"use strict";var _=e(47128);R.exports=function(T,r){for(var w=r.u,b=r.v,c=r.w,o=Math.min(r.x.length,r.y.length,r.z.length,w.length,b.length,c.length),t=-1/0,i=1/0,n=0;n<o;n++){var a=w[n],s=b[n],l=c[n],u=Math.sqrt(a*a+s*s+l*l);t=Math.max(t,u),i=Math.min(i,u)}r._len=o,r._normMax=t,_(T,r,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(R,C,e){"use strict";var _=e(67792).gl_cone3d,T=e(67792).gl_cone3d.createConeMesh,r=e(3400).simpleMap,w=e(33040).parseColorScale,b=e(8932).extractOpts,c=e(3400).isArrayOrTypedArray,o=e(52094);function t(u,p){this.scene=u,this.uid=p,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(u){if(u.object===this.mesh){var p=u.index=u.data.index,f=this.data.x[p],m=this.data.y[p],h=this.data.z[p],g=this.data.u[p],v=this.data.v[p],x=this.data.w[p];u.traceCoordinate=[f,m,h,g,v,x,Math.sqrt(g*g+v*v+x*x)];var y=this.data.hovertext||this.data.text;return c(y)&&y[p]!==void 0?u.textLabel=y[p]:y&&(u.textLabel=y),!0}};var n={xaxis:0,yaxis:1,zaxis:2},a={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function l(u,p){var f=u.fullSceneLayout,m=u.dataScale,h={};function g(d,S){var k=f[S],E=m[n[S]];return r(d,function(L){return k.d2l(L)*E})}h.vectors=o(g(p.u,"xaxis"),g(p.v,"yaxis"),g(p.w,"zaxis"),p._len),h.positions=o(g(p.x,"xaxis"),g(p.y,"yaxis"),g(p.z,"zaxis"),p._len);var v=b(p);h.colormap=w(p),h.vertexIntensityBounds=[v.min/p._normMax,v.max/p._normMax],h.coneOffset=a[p.anchor];var x=p.sizemode;x==="scaled"?h.coneSize=p.sizeref||.5:x==="absolute"?h.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5:x==="raw"&&(h.coneSize=p.sizeref),h.coneSizemode=x;var y=_(h),A=p.lightposition;return y.lightPosition=[A.x,A.y,A.z],y.ambient=p.lighting.ambient,y.diffuse=p.lighting.diffuse,y.specular=p.lighting.specular,y.roughness=p.lighting.roughness,y.fresnel=p.lighting.fresnel,y.opacity=p.opacity,p._pad=s[p.anchor]*y.vectorScale*y.coneScale*p._normMax,y}i.update=function(u){this.data=u;var p=l(this.scene,u);this.mesh.update(p)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},R.exports=function(u,p){var f=u.glplot.gl,m=l(u,p),h=T(f,m),g=new t(u,p.uid);return g.mesh=h,g.data=p,h._trace=g,u.glplot.add(h),g}},86096:function(R,C,e){"use strict";var _=e(3400),T=e(27260),r=e(86040);R.exports=function(w,b,c,o){function t(f,m){return _.coerce(w,b,r,f,m)}var i=t("u"),n=t("v"),a=t("w"),s=t("x"),l=t("y"),u=t("z");if(i&&i.length&&n&&n.length&&a&&a.length&&s&&s.length&&l&&l.length&&u&&u.length){var p=t("sizemode");t("sizeref",p==="raw"?1:.5),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),T(w,b,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null}else b.visible=!1}},26048:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(_,T){return _.norm=T.traceCoordinate[6],_},meta:{}}},67104:function(R,C,e){"use strict";var _=e(83328),T=e(52904),r=e(29736),w=r.axisHoverFormat,b=r.descriptionOnlyNumbers,c=e(49084),o=e(98192).u,t=e(25376),i=e(92880).extendFlat,n=e(69104),a=n.COMPARISON_OPS2,s=n.INTERVAL_OPS,l=T.line;R.exports=i({z:_.z,x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,text:_.text,hovertext:_.hovertext,transpose:_.transpose,xtype:_.xtype,ytype:_.ytype,xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:_.hovertemplate,texttemplate:i({},_.texttemplate,{}),textfont:i({},_.textfont,{}),hoverongaps:_.hoverongaps,connectgaps:i({},_.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(a).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:o,smoothing:i({},l.smoothing,{}),editType:"plot"},zorder:T.zorder},c("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(R,C,e){"use strict";var _=e(8932),T=e(19512),r=e(54444),w=e(46960);R.exports=function(b,c){var o=T(b,c),t=o[0].z;r(c,t);var i,n=c.contours,a=_.extractOpts(c);if(n.coloring==="heatmap"&&a.auto&&c.autocontour===!1){var s=n.start,l=w(n),u=n.size||1,p=Math.floor((l-s)/u)+1;isFinite(u)||(u=1,p=1);var f=s-u/2;i=[f,f+p*u]}else i=t;return _.calc(b,c,{vals:i,cLetter:"z"}),o}},56008:function(R){"use strict";R.exports=function(C,e){var _,T=C[0],r=T.z;switch(e.type){case"levels":var w=Math.min(r[0][0],r[0][1]);for(_=0;_<C.length;_++){var b=C[_];b.prefixBoundary=!b.edgepaths.length&&(w>b.level||b.starts.length&&w===b.level)}break;case"constraint":if(T.prefixBoundary=!1,T.edgepaths.length)return;var c=T.x.length,o=T.y.length,t=-1/0,i=1/0;for(_=0;_<o;_++)i=Math.min(i,r[_][0]),i=Math.min(i,r[_][c-1]),t=Math.max(t,r[_][0]),t=Math.max(t,r[_][c-1]);for(_=1;_<c-1;_++)i=Math.min(i,r[0][_]),i=Math.min(i,r[o-1][_]),t=Math.max(t,r[0][_]),t=Math.max(t,r[o-1][_]);var n,a,s=e.value;switch(e._operation){case">":s>t&&(T.prefixBoundary=!0);break;case"<":(s<i||T.starts.length&&s===i)&&(T.prefixBoundary=!0);break;case"[]":n=Math.min(s[0],s[1]),((a=Math.max(s[0],s[1]))<i||n>t||T.starts.length&&a===i)&&(T.prefixBoundary=!0);break;case"][":n=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]),n<i&&a>t&&(T.prefixBoundary=!0)}}}},55296:function(R,C,e){"use strict";var _=e(8932),T=e(41076),r=e(46960);R.exports={min:"zmin",max:"zmax",calc:function(w,b,c){var o=b.contours,t=b.line,i=o.size||1,n=o.coloring,a=T(b,{isColorbar:!0});if(n==="heatmap"){var s=_.extractOpts(b);c._fillgradient=s.reversescale?_.flipScale(s.colorscale):s.colorscale,c._zrange=[s.min,s.max]}else n==="fill"&&(c._fillcolor=a);c._line={color:n==="lines"?a:t.color,width:o.showlines!==!1?t.width:0,dash:t.dash},c._levels={start:o.start,end:r(o),size:i}}}},93252:function(R){"use strict";R.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(R,C,e){"use strict";var _=e(38248),T=e(17428),r=e(76308),w=r.addOpacity,b=r.opacity,c=e(69104),o=e(3400).isArrayOrTypedArray,t=c.CONSTRAINT_REDUCTION,i=c.COMPARISON_OPS2;R.exports=function(n,a,s,l,u,p){var f,m,h,g=a.contours,v=s("contours.operation");g._operation=t[v],function(x,y){var A;i.indexOf(y.operation)===-1?(x("contours.value",[0,1]),o(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(A=parseFloat(y.value[0]),y.value=[A,A+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:_(y.value)&&(A=parseFloat(y.value),y.value=[A,A+1])):(x("contours.value",0),_(y.value)||(o(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(s,g),v==="="?f=g.showlines=!0:(f=s("contours.showlines"),h=s("fillcolor",w((n.line||{}).color||u,.5))),f&&(m=s("line.color",h&&b(h)?w(a.fillcolor,1):u),s("line.width",2),s("line.dash")),s("line.smoothing"),T(s,l,m,p)}},3212:function(R,C,e){"use strict";var _=e(69104),T=e(38248);function r(c,o){var t,i=Array.isArray(o);function n(a){return T(a)?+a:null}return _.COMPARISON_OPS2.indexOf(c)!==-1?t=n(i?o[0]:o):_.INTERVAL_OPS.indexOf(c)!==-1?t=i?[n(o[0]),n(o[1])]:[n(o),n(o)]:_.SET_OPS.indexOf(c)!==-1&&(t=i?o.map(n):[n(o)]),t}function w(c){return function(o){o=r(c,o);var t=Math.min(o[0],o[1]),i=Math.max(o[0],o[1]);return{start:t,end:i,size:i-t}}}function b(c){return function(o){return{start:o=r(c,o),end:1/0,size:1/0}}}R.exports={"[]":w("[]"),"][":w("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(R){"use strict";R.exports=function(C,e,_,T){var r=T("contours.start"),w=T("contours.end"),b=r===!1||w===!1,c=_("contours.size");!(b?e.autocontour=!0:_("autocontour",!1))&&c||_("ncontours")}},82172:function(R,C,e){"use strict";var _=e(3400);function T(r){return _.extendFlat({},r,{edgepaths:_.extendDeep([],r.edgepaths),paths:_.extendDeep([],r.paths),starts:_.extendDeep([],r.starts)})}R.exports=function(r,w){var b,c,o,t=function(a){return a.reverse()},i=function(a){return a};switch(w){case"=":case"<":return r;case">":for(r.length!==1&&_.warn("Contour data invalid for the specified inequality operation."),c=r[0],b=0;b<c.edgepaths.length;b++)c.edgepaths[b]=t(c.edgepaths[b]);for(b=0;b<c.paths.length;b++)c.paths[b]=t(c.paths[b]);for(b=0;b<c.starts.length;b++)c.starts[b]=t(c.starts[b]);return r;case"][":var n=t;t=i,i=n;case"[]":for(r.length!==2&&_.warn("Contour data invalid for the specified inequality range operation."),c=T(r[0]),o=T(r[1]),b=0;b<c.edgepaths.length;b++)c.edgepaths[b]=t(c.edgepaths[b]);for(b=0;b<c.paths.length;b++)c.paths[b]=t(c.paths[b]);for(b=0;b<c.starts.length;b++)c.starts[b]=t(c.starts[b]);for(;o.edgepaths.length;)c.edgepaths.push(i(o.edgepaths.shift()));for(;o.paths.length;)c.paths.push(i(o.paths.shift()));for(;o.starts.length;)c.starts.push(i(o.starts.shift()));return[c]}}},57004:function(R,C,e){"use strict";var _=e(3400),T=e(51264),r=e(31147),w=e(95536),b=e(84952),c=e(97680),o=e(39096),t=e(67104);R.exports=function(i,n,a,s){function l(p,f){return _.coerce(i,n,t,p,f)}if(T(i,n,l,s)){r(i,n,s,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",_.isArray1D(n.z)),u?w(i,n,l,s,a):(b(i,n,l,function(p){return _.coerce2(i,n,t,p)}),c(i,n,l,s)),n.contours&&n.contours.coloring==="heatmap"&&o(l,s),l("zorder")}else n.visible=!1}},61512:function(R,C,e){"use strict";var _=e(3400),T=e(3212),r=e(46960);R.exports=function(w,b,c){for(var o=w.type==="constraint"?T[w._operation](w.value):w,t=o.size,i=[],n=r(o),a=c.trace._carpetTrace,s=a?{xaxis:a.aaxis,yaxis:a.baxis,x:c.a,y:c.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:c.x,y:c.y},l=o.start;l<n;l+=t)if(i.push(_.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:c.z,smoothing:c.trace.line.smoothing},s)),i.length>1e3){_.warn("Too many contours, clipping at 1000",w);break}return i}},46960:function(R){"use strict";R.exports=function(C){return C.end+C.size/1e6}},88748:function(R,C,e){"use strict";var _=e(3400),T=e(93252);function r(c,o,t,i){return Math.abs(c[0]-o[0])<t&&Math.abs(c[1]-o[1])<i}function w(c,o,t,i,n){var a,s=o.join(","),l=c.crossings[s],u=function(te,oe,se){var ce=0,ye=0;return te>20&&oe?te===208||te===1114?ce=se[0]===0?1:-1:ye=se[1]===0?1:-1:T.BOTTOMSTART.indexOf(te)!==-1?ye=1:T.LEFTSTART.indexOf(te)!==-1?ce=1:T.TOPSTART.indexOf(te)!==-1?ye=-1:ce=-1,[ce,ye]}(l,t,o),p=[b(c,o,[-u[0],-u[1]])],f=c.z.length,m=c.z[0].length,h=o.slice(),g=u.slice();for(a=0;a<1e4;a++){if(l>20?(l=T.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],c.crossings[s]=T.SADDLEREMAINDER[l]):delete c.crossings[s],!(u=T.NEWDELTA[l])){_.log("Found bad marching index:",l,o,c.level);break}p.push(b(c,o,u)),o[0]+=u[0],o[1]+=u[1],s=o.join(","),r(p[p.length-1],p[p.length-2],i,n)&&p.pop();var v=u[0]&&(o[0]<0||o[0]>m-2)||u[1]&&(o[1]<0||o[1]>f-2);if(o[0]===h[0]&&o[1]===h[1]&&u[0]===g[0]&&u[1]===g[1]||t&&v)break;l=c.crossings[s]}a===1e4&&_.log("Infinite loop in contour?");var x,y,A,d,S,k,E,L,O,P,F,U,I,N,W,B=r(p[0],p[p.length-1],i,n),V=0,q=.2*c.smoothing,ne=[],$=0;for(a=1;a<p.length;a++)U=p[a],I=p[a-1],N=U[2]-I[2],W=U[3]-I[3],V+=E=Math.sqrt(N*N+W*W),ne.push(E);var K=V/ne.length*q;function ee(te){return p[te%p.length]}for(a=p.length-2;a>=$;a--)if((x=ne[a])<K){for(A=0,y=a-1;y>=$&&x+ne[y]<K;y--)x+=ne[y];if(B&&a===p.length-2)for(A=0;A<y&&x+ne[A]<K;A++)x+=ne[A];S=a-y+A+1,k=Math.floor((a+y+A+2)/2),d=B||a!==p.length-2?B||y!==-1?S%2?ee(k):[(ee(k)[0]+ee(k+1)[0])/2,(ee(k)[1]+ee(k+1)[1])/2]:p[0]:p[p.length-1],p.splice(y+1,a-y+1,d),a=y+1,A&&($=A),B&&(a===p.length-2?p[A]=p[p.length-1]:a===0&&(p[p.length-1]=p[0]))}for(p.splice(0,$),a=0;a<p.length;a++)p[a].length=2;if(!(p.length<2))if(B)p.pop(),c.paths.push(p);else{t||_.log("Unclosed interior contour?",c.level,h.join(","),p.join("L"));var J=!1;for(L=0;L<c.edgepaths.length;L++)if(P=c.edgepaths[L],!J&&r(P[0],p[p.length-1],i,n)){p.pop(),J=!0;var Z=!1;for(O=0;O<c.edgepaths.length;O++)if(r((F=c.edgepaths[O])[F.length-1],p[0],i,n)){Z=!0,p.shift(),c.edgepaths.splice(L,1),O===L?c.paths.push(p.concat(F)):(O>L&&O--,c.edgepaths[O]=F.concat(p,P));break}Z||(c.edgepaths[L]=p.concat(P))}for(L=0;L<c.edgepaths.length&&!J;L++)r((P=c.edgepaths[L])[P.length-1],p[0],i,n)&&(p.shift(),c.edgepaths[L]=P.concat(p),J=!0);J||c.edgepaths.push(p)}}function b(c,o,t){var i=o[0]+Math.max(t[0],0),n=o[1]+Math.max(t[1],0),a=c.z[n][i],s=c.xaxis,l=c.yaxis;if(t[1]){var u=(c.level-a)/(c.z[n][i+1]-a),p=(u!==1?(1-u)*s.c2l(c.x[i]):0)+(u!==0?u*s.c2l(c.x[i+1]):0);return[s.c2p(s.l2c(p),!0),l.c2p(c.y[n],!0),i+u,n]}var f=(c.level-a)/(c.z[n+1][i]-a),m=(f!==1?(1-f)*l.c2l(c.y[n]):0)+(f!==0?f*l.c2l(c.y[n+1]):0);return[s.c2p(c.x[i],!0),l.c2p(l.l2c(m),!0),i,n+f]}R.exports=function(c,o,t){var i,n,a,s;for(o=o||.01,t=t||.01,n=0;n<c.length;n++){for(a=c[n],s=0;s<a.starts.length;s++)w(a,a.starts[s],"edge",o,t);for(i=0;Object.keys(a.crossings).length&&i<1e4;)i++,w(a,Object.keys(a.crossings)[0].split(",").map(Number),void 0,o,t);i===1e4&&_.log("Infinite loop in contour?")}}},38200:function(R,C,e){"use strict";var _=e(76308),T=e(55512);R.exports=function(r,w,b,c,o){o||(o={}),o.isContour=!0;var t=T(r,w,b,c,o);return t&&t.forEach(function(i){var n=i.trace;n.contours.type==="constraint"&&(n.fillcolor&&_.opacity(n.fillcolor)?i.color=_.addOpacity(n.fillcolor,1):n.contours.showlines&&_.opacity(n.line.color)&&(i.color=_.addOpacity(n.line.color,1)))}),t}},66240:function(R,C,e){"use strict";R.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r,w,b){if(b||(b={}),T("contours.showlabels")){var c=r.font;_.coerceFont(T,"contours.labelfont",c,{overrideDflt:{color:w}}),T("contours.labelformat")}b.hasHover!==!1&&T("zhoverformat")}},41076:function(R,C,e){"use strict";var _=e(33428),T=e(8932),r=e(46960);R.exports=function(w){var b=w.contours,c=b.start,o=r(b),t=b.size||1,i=Math.floor((o-c)/t)+1,n=b.coloring==="lines"?0:1,a=T.extractOpts(w);isFinite(t)||(t=1,i=1);var s,l,u=a.reversescale?T.flipScale(a.colorscale):a.colorscale,p=u.length,f=new Array(p),m=new Array(p),h=a.min,g=a.max;if(b.coloring==="heatmap"){for(l=0;l<p;l++)s=u[l],f[l]=s[0]*(g-h)+h,m[l]=s[1];var v=_.extent([h,g,b.start,b.start+t*(i-1)]),x=v[h<g?0:1],y=v[h<g?1:0];x!==h&&(f.splice(0,0,x),m.splice(0,0,m[0])),y!==g&&(f.push(y),m.push(m[m.length-1]))}else{var A=w._input&&typeof w._input.zmin=="number"&&typeof w._input.zmax=="number";for(A&&(c<=h||o>=g)&&(c<=h&&(c=h),o>=g&&(o=g),i=Math.floor((o-c)/t)+1,n=0),l=0;l<p;l++)s=u[l],f[l]=(s[0]*(i+n-1)-n/2)*t+c,m[l]=s[1];(A||w.autocontour)&&(f[0]>h&&(f.unshift(h),m.unshift(m[0])),f[f.length-1]<g&&(f.push(g),m.push(m[m.length-1])))}return T.makeColorScaleFunc({domain:f,range:m},{noNumericCheck:!0})}},72424:function(R,C,e){"use strict";var _=e(93252);function T(r,w){var b=(w[0][0]>r?0:1)+(w[0][1]>r?0:2)+(w[1][1]>r?0:4)+(w[1][0]>r?0:8);return b===5||b===10?r>(w[0][0]+w[0][1]+w[1][0]+w[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}R.exports=function(r){var w,b,c,o,t,i,n,a,s,l=r[0].z,u=l.length,p=l[0].length,f=u===2||p===2;for(b=0;b<u-1;b++)for(o=[],b===0&&(o=o.concat(_.BOTTOMSTART)),b===u-2&&(o=o.concat(_.TOPSTART)),w=0;w<p-1;w++)for(c=o.slice(),w===0&&(c=c.concat(_.LEFTSTART)),w===p-2&&(c=c.concat(_.RIGHTSTART)),t=w+","+b,i=[[l[b][w],l[b][w+1]],[l[b+1][w],l[b+1][w+1]]],s=0;s<r.length;s++)(n=T((a=r[s]).level,i))&&(a.crossings[t]=n,c.indexOf(n)!==-1&&(a.starts.push([w,b]),f&&c.indexOf(n,c.indexOf(n)+1)!==-1&&a.starts.push([w,b])))}},23676:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(8932),b=e(72736),c=e(54460),o=e(78344),t=e(41420),i=e(72424),n=e(88748),a=e(61512),s=e(82172),l=e(56008),u=e(93252),p=u.LABELOPTIMIZER;function f(g,v){var x,y,A,d,S,k,E,L="",O=0,P=g.edgepaths.map(function(B,V){return V}),F=!0;function U(B){return Math.abs(B[1]-v[2][1])<.01}function I(B){return Math.abs(B[0]-v[0][0])<.01}function N(B){return Math.abs(B[0]-v[2][0])<.01}for(;P.length;){for(k=r.smoothopen(g.edgepaths[O],g.smoothing),L+=F?k:k.replace(/^M/,"L"),P.splice(P.indexOf(O),1),x=g.edgepaths[O][g.edgepaths[O].length-1],d=-1,A=0;A<4;A++){if(!x){T.log("Missing end?",O,g);break}for(E=x,Math.abs(E[1]-v[0][1])<.01&&!N(x)?y=v[1]:I(x)?y=v[0]:U(x)?y=v[3]:N(x)&&(y=v[2]),S=0;S<g.edgepaths.length;S++){var W=g.edgepaths[S][0];Math.abs(x[0]-y[0])<.01?Math.abs(x[0]-W[0])<.01&&(W[1]-x[1])*(y[1]-W[1])>=0&&(y=W,d=S):Math.abs(x[1]-y[1])<.01?Math.abs(x[1]-W[1])<.01&&(W[0]-x[0])*(y[0]-W[0])>=0&&(y=W,d=S):T.log("endpt to newendpt is not vert. or horz.",x,y,W)}if(x=y,d>=0)break;L+="L"+y}if(d===g.edgepaths.length){T.log("unclosed perimeter path");break}O=d,(F=P.indexOf(O)===-1)&&(O=P[0],L+="Z")}for(O=0;O<g.paths.length;O++)L+=r.smoothclosed(g.paths[O],g.smoothing);return L}function m(g,v,x,y){var A=v.width/2,d=v.height/2,S=g.x,k=g.y,E=g.theta,L=Math.cos(E)*A,O=Math.sin(E)*A,P=(S>y.center?y.right-S:S-y.left)/(L+Math.abs(Math.sin(E)*d)),F=(k>y.middle?y.bottom-k:k-y.top)/(Math.abs(O)+Math.cos(E)*d);if(P<1||F<1)return 1/0;var U=p.EDGECOST*(1/(P-1)+1/(F-1));U+=p.ANGLECOST*E*E;for(var I=S-L,N=k-O,W=S+L,B=k+O,V=0;V<x.length;V++){var q=x[V],ne=Math.cos(q.theta)*q.width/2,$=Math.sin(q.theta)*q.width/2,K=2*T.segmentDistance(I,N,W,B,q.x-ne,q.y-$,q.x+ne,q.y+$)/(v.height+q.height),ee=q.level===v.level,J=ee?p.SAMELEVELDISTANCE:1;if(K<=J)return 1/0;U+=p.NEIGHBORCOST*(ee?p.SAMELEVELFACTOR:1)/(K-J)}return U}function h(g){var v,x,y=g.trace._emptypoints,A=[],d=g.z.length,S=g.z[0].length,k=[];for(v=0;v<S;v++)k.push(1);for(v=0;v<d;v++)A.push(k.slice());for(v=0;v<y.length;v++)A[(x=y[v])[0]][x[1]]=0;return g.zmask=A,A}C.plot=function(g,v,x,y){var A=v.xaxis,d=v.yaxis;T.makeTraceGroups(y,x,"contour").each(function(S){var k=_.select(this),E=S[0],L=E.trace,O=E.x,P=E.y,F=L.contours,U=a(F,v,E),I=T.ensureSingle(k,"g","heatmapcoloring"),N=[];F.coloring==="heatmap"&&(N=[S]),t(g,v,N,I),i(U),n(U);var W=A.c2p(O[0],!0),B=A.c2p(O[O.length-1],!0),V=d.c2p(P[0],!0),q=d.c2p(P[P.length-1],!0),ne=[[W,q],[B,q],[B,V],[W,V]],$=U;F.type==="constraint"&&($=s(U,F._operation)),function(K,ee,J){var Z=T.ensureSingle(K,"g","contourbg").selectAll("path").data(J.coloring==="fill"?[0]:[]);Z.enter().append("path"),Z.exit().remove(),Z.attr("d","M"+ee.join("L")+"Z").style("stroke","none")}(k,ne,F),function(K,ee,J,Z){var te=Z.coloring==="fill"||Z.type==="constraint"&&Z._operation!=="=",oe="M"+J.join("L")+"Z";te&&l(ee,Z);var se=T.ensureSingle(K,"g","contourfill").selectAll("path").data(te?ee:[]);se.enter().append("path"),se.exit().remove(),se.each(function(ce){var ye=(ce.prefixBoundary?oe:"")+f(ce,J);ye?_.select(this).attr("d",ye).style("stroke","none"):_.select(this).remove()})}(k,$,ne,F),function(K,ee,J,Z,te){var oe=J._context.staticPlot,se=T.ensureSingle(K,"g","contourlines"),ce=te.showlines!==!1,ye=te.showlabels,me=ce&&ye,fe=C.createLines(se,ce||ye,ee,oe),pe=C.createLineClip(se,me,J,Z.trace.uid),ge=K.selectAll("g.contourlabels").data(ye?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),ye){var ke=[],Ce=[];T.clearLocationCache();var de=C.labelFormatter(J,Z),ae=r.tester.append("text").attr("data-notex",1).call(r.font,te.labelfont),re=ee[0].xaxis,he=ee[0].yaxis,Se=re._length,xe=he._length,Te=re.range,Ae=he.range,Pe=T.aggNums(Math.min,null,Z.x),De=T.aggNums(Math.max,null,Z.x),ve=T.aggNums(Math.min,null,Z.y),we=T.aggNums(Math.max,null,Z.y),Ee=Math.max(re.c2p(Pe,!0),0),Fe=Math.min(re.c2p(De,!0),Se),Le=Math.max(he.c2p(we,!0),0),je=Math.min(he.c2p(ve,!0),xe),Ge={};Te[0]<Te[1]?(Ge.left=Ee,Ge.right=Fe):(Ge.left=Fe,Ge.right=Ee),Ae[0]<Ae[1]?(Ge.top=Le,Ge.bottom=je):(Ge.top=je,Ge.bottom=Le),Ge.middle=(Ge.top+Ge.bottom)/2,Ge.center=(Ge.left+Ge.right)/2,ke.push([[Ge.left,Ge.top],[Ge.right,Ge.top],[Ge.right,Ge.bottom],[Ge.left,Ge.bottom]]);var Je=Math.sqrt(Se*Se+xe*xe),rt=u.LABELDISTANCE*Je/Math.max(1,ee.length/u.LABELINCREASE);fe.each(function(ot){var yt=C.calcTextOpts(ot.level,de,ae,J);_.select(this).selectAll("path").each(function(){var _t=T.getVisibleSegment(this,Ge,yt.height/2);if(_t&&!(_t.len<(yt.width+yt.height)*u.LABELMIN))for(var mt=Math.min(Math.ceil(_t.len/rt),u.LABELMAX),tt=0;tt<mt;tt++){var Qe=C.findBestTextLocation(this,_t,yt,Ce,Ge);if(!Qe)break;C.addLabelData(Qe,yt,Ce,ke)}})}),ae.remove(),C.drawLabels(ge,Ce,J,pe,me?ke:null)}ye&&!ce&&fe.remove()}(k,U,g,E,F),function(K,ee,J,Z,te){var oe=Z.trace,se=J._fullLayout._clips,ce="clip"+oe.uid,ye=se.selectAll("#"+ce).data(oe.connectgaps?[]:[0]);if(ye.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),ye.exit().remove(),oe.connectgaps===!1){var me={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:ee.xaxis,yaxis:ee.yaxis,x:Z.x,y:Z.y,z:h(Z),smoothing:0};i([me]),n([me]),l([me],{type:"levels"}),T.ensureSingle(ye,"path","").attr("d",(me.prefixBoundary?"M"+te.join("L")+"Z":"")+f(me,te))}else ce=null;r.setClipUrl(K,ce,J)}(k,v,g,E,ne)})},C.createLines=function(g,v,x,y){var A=x[0].smoothing,d=g.selectAll("g.contourlevel").data(v?x:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlevel",!0),v){var S=d.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return r.smoothopen(E,A)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var k=d.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});k.exit().remove(),k.enter().append("path").classed("closedline",!0),k.attr("d",function(E){return r.smoothclosed(E,A)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return d},C.createLineClip=function(g,v,x,y){var A=v?"clipline"+y:null,d=x._fullLayout._clips.selectAll("#"+A).data(v?[0]:[]);return d.exit().remove(),d.enter().append("clipPath").classed("contourlineclip",!0).attr("id",A),r.setClipUrl(g,A,x),d},C.labelFormatter=function(g,v){var x=g._fullLayout,y=v.trace,A=y.contours,d={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(A.labelformat)d.tickformat=A.labelformat,o(d,x);else{var S=w.extractOpts(y);if(S&&S.colorbar&&S.colorbar._axis)d=S.colorbar._axis;else{if(A.type==="constraint"){var k=A.value;T.isArrayOrTypedArray(k)?d.range=[k[0],k[k.length-1]]:d.range=[k,k]}else d.range=[A.start,A.end],d.nticks=(A.end-A.start)/A.size;d.range[0]===d.range[1]&&(d.range[1]+=d.range[0]||1),d.nticks||(d.nticks=1e3),o(d,x),c.prepTicks(d),d._tmin=null,d._tmax=null}}return function(E){return c.tickText(d,E).text}},C.calcTextOpts=function(g,v,x,y){var A=v(g);x.text(A).call(b.convertToTspans,y);var d=x.node(),S=r.bBox(d,!0);return{text:A,width:S.width,height:S.height,fontSize:+d.style["font-size"].replace("px",""),level:g,dy:(S.top+S.bottom)/2}},C.findBestTextLocation=function(g,v,x,y,A){var d,S,k,E,L,O=x.width;v.isClosed?(S=v.len/p.INITIALSEARCHPOINTS,d=v.min+S/2,k=v.max):(S=(v.len-O)/(p.INITIALSEARCHPOINTS+1),d=v.min+S+O/2,k=v.max-(S+O)/2);for(var P=1/0,F=0;F<p.ITERATIONS;F++){for(var U=d;U<k;U+=S){var I=T.getTextLocation(g,v.total,U,O),N=m(I,x,y,A);N<P&&(P=N,L=I,E=U)}if(P>2*p.MAXCOST)break;F&&(S/=2),k=(d=E-S/2)+1.5*S}if(P<=p.MAXCOST)return L},C.addLabelData=function(g,v,x,y){var A=v.fontSize,d=v.width+A/3,S=Math.max(0,v.height-A/3),k=g.x,E=g.y,L=g.theta,O=Math.sin(L),P=Math.cos(L),F=function(I,N){return[k+I*P-N*O,E+I*O+N*P]},U=[F(-d/2,-S/2),F(-d/2,S/2),F(d/2,S/2),F(d/2,-S/2)];x.push({text:v.text,x:k,y:E,dy:v.dy,theta:L,level:v.level,width:d,height:S}),y.push(U)},C.drawLabels=function(g,v,x,y,A){var d=g.selectAll("text").data(v,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(d.exit().remove(),d.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var L=E.x+Math.sin(E.theta)*E.dy,O=E.y-Math.cos(E.theta)*E.dy;_.select(this).text(E.text).attr({x:L,y:O,transform:"rotate("+180*E.theta/Math.PI+" "+L+" "+O+")"}).call(b.convertToTspans,x)}),A){for(var S="",k=0;k<A.length;k++)S+="M"+A[k].join("L")+"Z";T.ensureSingle(y,"path","").attr("d",S)}}},54444:function(R,C,e){"use strict";var _=e(54460),T=e(3400);function r(w,b,c){var o={type:"linear",range:[w,b]};return _.autoTicks(o,(b-w)/(c||15)),o}R.exports=function(w,b){var c=w.contours;if(w.autocontour){var o=w.zmin,t=w.zmax;(w.zauto||o===void 0)&&(o=T.aggNums(Math.min,null,b)),(w.zauto||t===void 0)&&(t=T.aggNums(Math.max,null,b));var i=r(o,t,w.ncontours);c.size=i.dtick,c.start=_.tickFirst(i),i.range.reverse(),c.end=_.tickFirst(i),c.start===o&&(c.start+=c.size),c.end===t&&(c.end-=c.size),c.start>c.end&&(c.start=c.end=(c.start+c.end)/2),w._input.contours||(w._input.contours={}),T.extendFlat(w._input.contours,{start:c.start,end:c.end,size:c.size}),w._input.autocontour=!0}else if(c.type!=="constraint"){var n,a=c.start,s=c.end,l=w._input.contours;a>s&&(c.start=l.start=s,s=c.end=l.end=a,a=c.start),c.size>0||(n=a===s?1:r(a,s,w.ncontours).dtick,l.size=c.size=n)}}},52440:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(41648),w=e(41076);R.exports=function(b){var c=_.select(b).selectAll("g.contour");c.style("opacity",function(o){return o[0].trace.opacity}),c.each(function(o){var t=_.select(this),i=o[0].trace,n=i.contours,a=i.line,s=n.size||1,l=n.start,u=n.type==="constraint",p=!u&&n.coloring==="lines",f=!u&&n.coloring==="fill",m=p||f?w(i):null;t.selectAll("g.contourlevel").each(function(v){_.select(this).selectAll("path").call(T.lineGroupStyle,a.width,p?m(v.level):a.color,a.dash)});var h=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(v){T.font(_.select(this),{weight:h.weight,style:h.style,variant:h.variant,textcase:h.textcase,lineposition:h.lineposition,shadow:h.shadow,family:h.family,size:h.size,color:h.color||(p?m(v.level):a.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(f){var g;t.selectAll("g.contourfill path").style("fill",function(v){return g===void 0&&(g=v.level),m(v.level+.5*s)}),g===void 0&&(g=l),t.selectAll("g.contourbg path").style("fill",m(g-.5*s))}}),r(b)}},97680:function(R,C,e){"use strict";var _=e(27260),T=e(17428);R.exports=function(r,w,b,c,o){var t,i=b("contours.coloring"),n="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(n=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(r.showlegend!==!0&&(w.showlegend=!1),w._dfltShowLegend=!1,_(r,w,c,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),T(b,c,n,o)}},37960:function(R,C,e){"use strict";var _=e(83328),T=e(67104),r=e(49084),w=e(92880).extendFlat,b=T.contours;R.exports=w({carpet:{valType:"string",editType:"calc"},z:_.z,a:_.x,a0:_.x0,da:_.dx,b:_.y,b0:_.y0,db:_.dy,text:_.text,hovertext:_.hovertext,transpose:_.transpose,atype:_.xtype,btype:_.ytype,fillcolor:T.fillcolor,autocontour:T.autocontour,ncontours:T.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:T.line.color,width:T.line.width,dash:T.line.dash,smoothing:T.line.smoothing,editType:"plot"},zorder:T.zorder,transforms:void 0},r("",{cLetter:"z",autoColorDflt:!1}))},30572:function(R,C,e){"use strict";var _=e(47128),T=e(3400),r=e(2872),w=e(26136),b=e(70448),c=e(11240),o=e(35744),t=e(3252),i=e(50948),n=e(54444);R.exports=function(a,s){var l=s._carpetTrace=i(a,s);if(l&&l.visible&&l.visible!=="legendonly"){if(!s.a||!s.b){var u=a.data[l.index],p=a.data[s.index];p.a||(p.a=u.a),p.b||(p.b=u.b),t(p,s,s._defaultColor,a._fullLayout)}var f=function(m,h){var g,v,x,y,A,d,S,k=h._carpetTrace,E=k.aaxis,L=k.baxis;E._minDtick=0,L._minDtick=0,T.isArray1D(h.z)&&r(h,E,L,"a","b",["z"]),g=h._a=h._a||h.a,y=h._b=h._b||h.b,g=g?E.makeCalcdata(h,"_a"):[],y=y?L.makeCalcdata(h,"_b"):[],v=h.a0||0,x=h.da||1,A=h.b0||0,d=h.db||1,S=h._z=w(h._z||h.z,h.transpose),h._emptypoints=c(S),b(S,h._emptypoints);var O=T.maxRowLength(S),P=h.xtype==="scaled"?"":g,F=o(h,P,v,x,O,E),U=h.ytype==="scaled"?"":y,I={a:F,b:o(h,U,A,d,S.length,L),z:S};return h.contours.type==="levels"&&h.contours.coloring!=="none"&&_(m,h,{vals:S,containerStr:"",cLetter:"z"}),[I]}(a,s);return n(s,s._z),f}}},3252:function(R,C,e){"use strict";var _=e(3400),T=e(51264),r=e(37960),w=e(95536),b=e(84952),c=e(97680);R.exports=function(o,t,i,n){function a(s,l){return _.coerce(o,t,r,s,l)}if(a("carpet"),o.a&&o.b){if(!T(o,t,a,n,"a","b"))return void(t.visible=!1);a("text"),a("contours.type")==="constraint"?w(o,t,a,n,i,{hasHover:!1}):(b(o,t,a,function(s){return _.coerce2(o,t,r,s)}),c(o,t,a,n,{hasHover:!1}))}else t._defaultColor=i,t._length=null;a("zorder")}},40448:function(R,C,e){"use strict";R.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(R,C,e){"use strict";var _=e(33428),T=e(87072),r=e(53416),w=e(43616),b=e(3400),c=e(72424),o=e(88748),t=e(23676),i=e(93252),n=e(82172),a=e(61512),s=e(56008),l=e(50948),u=e(77712);function p(h,g,v){var x=h.getPointAtLength(g),y=h.getPointAtLength(v),A=y.x-x.x,d=y.y-x.y,S=Math.sqrt(A*A+d*d);return[A/S,d/S]}function f(h){var g=Math.sqrt(h[0]*h[0]+h[1]*h[1]);return[h[0]/g,h[1]/g]}function m(h,g){var v=Math.abs(h[0]*g[0]+h[1]*g[1]);return Math.sqrt(1-v*v)/v}R.exports=function(h,g,v,x){var y=g.xaxis,A=g.yaxis;b.makeTraceGroups(x,v,"contour").each(function(d){var S=_.select(this),k=d[0],E=k.trace,L=E._carpetTrace=l(h,E),O=h.calcdata[L.index][0];if(L.visible&&L.visible!=="legendonly"){var P=k.a,F=k.b,U=E.contours,I=a(U,g,k),N=U.type==="constraint",W=U._operation,B=N?W==="="?"lines":"fill":U.coloring,V=[[P[0],F[F.length-1]],[P[P.length-1],F[F.length-1]],[P[P.length-1],F[0]],[P[0],F[0]]];c(I);var q=1e-8*(P[P.length-1]-P[0]),ne=1e-8*(F[F.length-1]-F[0]);o(I,q,ne);var $,K,ee,J,Z=I;U.type==="constraint"&&(Z=n(I,W)),function(ce,ye){var me,fe,pe,ge,ke,Ce,de,ae,re;for(me=0;me<ce.length;me++){for(ke=(ge=ce[me]).pedgepaths=[],Ce=ge.ppaths=[],fe=0;fe<ge.edgepaths.length;fe++){for(re=ge.edgepaths[fe],de=[],pe=0;pe<re.length;pe++)de[pe]=ye(re[pe]);ke.push(de)}for(fe=0;fe<ge.paths.length;fe++){for(re=ge.paths[fe],ae=[],pe=0;pe<re.length;pe++)ae[pe]=ye(re[pe]);Ce.push(ae)}}}(I,se);var te=[];for(J=O.clipsegments.length-1;J>=0;J--)$=O.clipsegments[J],K=T([],$.x,y.c2p),ee=T([],$.y,A.c2p),K.reverse(),ee.reverse(),te.push(r(K,ee,$.bicubic));var oe="M"+te.join("L")+"Z";(function(ce,ye,me,fe,pe,ge){var ke,Ce,de,ae,re=b.ensureSingle(ce,"g","contourbg").selectAll("path").data(ge!=="fill"||pe?[]:[0]);re.enter().append("path"),re.exit().remove();var he=[];for(ae=0;ae<ye.length;ae++)ke=ye[ae],Ce=T([],ke.x,me.c2p),de=T([],ke.y,fe.c2p),he.push(r(Ce,de,ke.bicubic));re.attr("d","M"+he.join("L")+"Z").style("stroke","none")})(S,O.clipsegments,y,A,N,B),function(ce,ye,me,fe,pe,ge,ke,Ce,de,ae,re){var he=ae==="fill";he&&s(pe,ce.contours);var Se=b.ensureSingle(ye,"g","contourfill").selectAll("path").data(he?pe:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(xe){var Te=(xe.prefixBoundary?re:"")+function(Ae,Pe,De,ve,we,Ee,Fe,Le){var je,Ge,Je,rt,ot,yt,_t,mt="",tt=Pe.edgepaths.map(function(lt,xt){return xt}),Qe=!0,Dt=1e-4*Math.abs(De[0][0]-De[2][0]),zt=1e-4*Math.abs(De[0][1]-De[2][1]);function pt(lt){return Math.abs(lt[1]-De[0][1])<zt}function vt(lt){return Math.abs(lt[1]-De[2][1])<zt}function We(lt){return Math.abs(lt[0]-De[0][0])<Dt}function Ze(lt){return Math.abs(lt[0]-De[2][0])<Dt}function Ne(lt,xt){var bt,Ve,Be,at,ht="";for(pt(lt)&&!Ze(lt)||vt(lt)&&!We(lt)?(at=we.aaxis,Be=u(we,Ee,[lt[0],xt[0]],.5*(lt[1]+xt[1]))):(at=we.baxis,Be=u(we,Ee,.5*(lt[0]+xt[0]),[lt[1],xt[1]])),bt=1;bt<Be.length;bt++)for(ht+=at.smoothing?"C":"L",Ve=0;Ve<Be[bt].length;Ve++){var dt=Be[bt][Ve];ht+=[Fe.c2p(dt[0]),Le.c2p(dt[1])]+" "}return ht}for(je=0,Ge=null;tt.length;){var Xe=Pe.edgepaths[je][0];for(Ge&&(mt+=Ne(Ge,Xe)),_t=w.smoothopen(Pe.edgepaths[je].map(ve),Pe.smoothing),mt+=Qe?_t:_t.replace(/^M/,"L"),tt.splice(tt.indexOf(je),1),Ge=Pe.edgepaths[je][Pe.edgepaths[je].length-1],ot=-1,rt=0;rt<4;rt++){if(!Ge){b.log("Missing end?",je,Pe);break}for(pt(Ge)&&!Ze(Ge)?Je=De[1]:We(Ge)?Je=De[0]:vt(Ge)?Je=De[3]:Ze(Ge)&&(Je=De[2]),yt=0;yt<Pe.edgepaths.length;yt++){var st=Pe.edgepaths[yt][0];Math.abs(Ge[0]-Je[0])<Dt?Math.abs(Ge[0]-st[0])<Dt&&(st[1]-Ge[1])*(Je[1]-st[1])>=0&&(Je=st,ot=yt):Math.abs(Ge[1]-Je[1])<zt?Math.abs(Ge[1]-st[1])<zt&&(st[0]-Ge[0])*(Je[0]-st[0])>=0&&(Je=st,ot=yt):b.log("endpt to newendpt is not vert. or horz.",Ge,Je,st)}if(ot>=0)break;mt+=Ne(Ge,Je),Ge=Je}if(ot===Pe.edgepaths.length){b.log("unclosed perimeter path");break}je=ot,(Qe=tt.indexOf(je)===-1)&&(je=tt[0],mt+=Ne(Ge,Je)+"Z",Ge=null)}for(je=0;je<Pe.paths.length;je++)mt+=w.smoothclosed(Pe.paths[je].map(ve),Pe.smoothing);return mt}(0,xe,ge,ke,Ce,de,me,fe);Te?_.select(this).attr("d",Te).style("stroke","none"):_.select(this).remove()})}(E,S,y,A,Z,V,se,L,O,B,oe),function(ce,ye,me,fe,pe,ge,ke){var Ce=me._context.staticPlot,de=b.ensureSingle(ce,"g","contourlines"),ae=pe.showlines!==!1,re=pe.showlabels,he=ae&&re,Se=t.createLines(de,ae||re,ye,Ce),xe=t.createLineClip(de,he,me,fe.trace.uid),Te=ce.selectAll("g.contourlabels").data(re?[0]:[]);if(Te.exit().remove(),Te.enter().append("g").classed("contourlabels",!0),re){var Ae=ge.xaxis,Pe=ge.yaxis,De=Ae._length,ve=Pe._length,we=[[[0,0],[De,0],[De,ve],[0,ve]]],Ee=[];b.clearLocationCache();var Fe=t.labelFormatter(me,fe),Le=w.tester.append("text").attr("data-notex",1).call(w.font,pe.labelfont),je={left:0,right:De,center:De/2,top:0,bottom:ve,middle:ve/2},Ge=Math.sqrt(De*De+ve*ve),Je=i.LABELDISTANCE*Ge/Math.max(1,ye.length/i.LABELINCREASE);Se.each(function(rt){var ot=t.calcTextOpts(rt.level,Fe,Le,me);_.select(this).selectAll("path").each(function(yt){var _t=this,mt=b.getVisibleSegment(_t,je,ot.height/2);if(mt&&(function(zt,pt,vt,We,Ze,Ne){for(var Xe,st=0;st<vt.pedgepaths.length;st++)pt===vt.pedgepaths[st]&&(Xe=vt.edgepaths[st]);if(Xe){var lt=Ze.a[0],xt=Ze.a[Ze.a.length-1],bt=Ze.b[0],Ve=Ze.b[Ze.b.length-1],Be=p(zt,0,1),at=p(zt,We.total,We.total-1),ht=it(Xe[0],Be),dt=We.total-it(Xe[Xe.length-1],at);We.min<ht&&(We.min=ht),We.max>dt&&(We.max=dt),We.len=We.max-We.min}function it(kt,Tt){var St,wt=0,At=.1;return(Math.abs(kt[0]-lt)<At||Math.abs(kt[0]-xt)<At)&&(St=f(Ze.dxydb_rough(kt[0],kt[1],At)),wt=Math.max(wt,Ne*m(Tt,St)/2)),(Math.abs(kt[1]-bt)<At||Math.abs(kt[1]-Ve)<At)&&(St=f(Ze.dxyda_rough(kt[0],kt[1],At)),wt=Math.max(wt,Ne*m(Tt,St)/2)),wt}}(_t,yt,rt,mt,ke,ot.height),!(mt.len<(ot.width+ot.height)*i.LABELMIN)))for(var tt=Math.min(Math.ceil(mt.len/Je),i.LABELMAX),Qe=0;Qe<tt;Qe++){var Dt=t.findBestTextLocation(_t,mt,ot,Ee,je);if(!Dt)break;t.addLabelData(Dt,ot,Ee,we)}})}),Le.remove(),t.drawLabels(Te,Ee,me,xe,he?we:null)}re&&!ae&&Se.remove()}(S,I,h,k,U,g,L),w.setClipUrl(S,L._clipPathId,h)}function se(ce){var ye=L.ab2xy(ce[0],ce[1],!0);return[y.c2p(ye[0]),A.c2p(ye[1])]}})}},33928:function(R,C,e){"use strict";var _=e(49084),T=e(21776).Ks,r=e(45464),w=e(31512),b=e(92880).extendFlat;R.exports=b({lon:w.lon,lat:w.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,hoverinfo:b({},r.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:T(),showlegend:b({},r.showlegend,{dflt:!1})},_("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(R,C,e){"use strict";var _=e(38248),T=e(3400).isArrayOrTypedArray,r=e(39032).BADNUM,w=e(47128),b=e(3400)._;R.exports=function(c,o){for(var t=o._length,i=new Array(t),n=o.z,a=T(n)&&n.length,s=0;s<t;s++){var l=i[s]={},u=o.lon[s],p=o.lat[s];if(l.lonlat=_(u)&&_(p)?[+u,+p]:[r,r],a){var f=n[s];l.z=_(f)?f:r}}return w(c,o,{vals:a?n:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(c,"lat:")+" ",lon:b(c,"lon:")+" "}}),i}},4629:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(76308),w=e(8932),b=e(39032).BADNUM,c=e(44808).makeBlank;R.exports=function(o){var t=o[0].trace,i=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:c()};if(!i)return n;var a,s=[],l=t.z,u=t.radius,p=T.isArrayOrTypedArray(l)&&l.length,f=T.isArrayOrTypedArray(u);for(a=0;a<o.length;a++){var m=o[a],h=m.lonlat;if(h[0]!==b){var g={};if(p){var v=m.z;g.z=v!==b?v:0}f&&(g.r=_(u[a])&&u[a]>0?+u[a]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:h},properties:g})}}var x=w.extractOpts(t),y=x.reversescale?w.flipScale(x.colorscale):x.colorscale,A=y[0][1],d=["interpolate",["linear"],["heatmap-density"],0,r.opacity(A)<1?A:r.addOpacity(A,0)];for(a=1;a<y.length;a++)d.push(y[a][0],y[a][1]);var S=["interpolate",["linear"],["get","z"],x.min,0,x.max,1];return T.extendFlat(n.heatmap.paint,{"heatmap-weight":p?S:1/(x.max-x.min),"heatmap-color":d,"heatmap-radius":f?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:s},n.heatmap.layout.visibility="visible",n}},97664:function(R,C,e){"use strict";var _=e(3400),T=e(27260),r=e(33928);R.exports=function(w,b,c,o){function t(s,l){return _.coerce(w,b,r,s,l)}var i=t("lon")||[],n=t("lat")||[],a=Math.min(i.length,n.length);a?(b._length=a,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),T(w,b,o,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(R){"use strict";R.exports=function(C,e){return C.lon=e.lon,C.lat=e.lat,C.z=e.z,C}},25336:function(R,C,e){"use strict";var _=e(54460),T=e(63312).hoverPoints,r=e(63312).getExtraText;R.exports=function(w,b,c){var o=T(w,b,c);if(o){var t=o[0],i=t.cd,n=i[0].trace,a=i[t.index];if(delete t.color,"z"in a){var s=t.subplot.mockAxis;t.z=a.z,t.zLabel=_.tickText(s,s.c2l(a.z),"hover").text}return t.extraText=r(n,a,i[0].t.labels),[t]}}},15088:function(R,C,e){"use strict";R.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(_,T){for(var r=T.getMapLayers(),w=0;w<r.length;w++){var b=r[w],c=b.id;if(b.type==="symbol"&&typeof c=="string"&&c.indexOf("plotly-")===-1)return c}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(R,C,e){"use strict";var _=e(4629),T=e(47552).traceLayerPrefix;function r(b,c){this.type="densitymapbox",this.subplot=b,this.uid=c,this.sourceId="source-"+c,this.layerList=[["heatmap",T+c+"-heatmap"]],this.below=null}var w=r.prototype;w.update=function(b){var c=this.subplot,o=this.layerList,t=_(b),i=c.belowLookup["trace-"+this.uid];c.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var n=0;n<o.length;n++){var a=o[n],s=a[0],l=a[1],u=t[s];c.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&c.setOptions(l,"setPaintProperty",u.paint)}},w._addLayers=function(b,c){for(var o=this.subplot,t=this.layerList,i=this.sourceId,n=0;n<t.length;n++){var a=t[n],s=a[0],l=b[s];o.addLayer({type:s,id:a[1],source:i,layout:l.layout,paint:l.paint},c)}},w._removeLayers=function(){for(var b=this.subplot.map,c=this.layerList,o=c.length-1;o>=0;o--)b.removeLayer(c[o][1])},w.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},R.exports=function(b,c){var o=c[0].trace,t=new r(b,o.uid),i=t.sourceId,n=_(c),a=t.below=b.belowLookup["trace-"+o.uid];return b.map.addSource(i,{type:"geojson",data:n.geojson}),t._addLayers(n,a),t}},74248:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){for(var w=0;w<T.length;w++)T[w].i=w;_.mergeArray(r.text,T,"tx"),_.mergeArray(r.hovertext,T,"htx");var b=r.marker;if(b){_.mergeArray(b.opacity,T,"mo"),_.mergeArray(b.color,T,"mc");var c=b.line;c&&(_.mergeArray(c.color,T,"mlc"),_.mergeArrayCastPositive(c.width,T,"mlw"))}}},20088:function(R,C,e){"use strict";var _,T=e(20832),r=e(52904).line,w=e(45464),b=e(29736).axisHoverFormat,c=e(21776).Ks,o=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,n=e(76308);R.exports={x:T.x,x0:T.x0,dx:T.dx,y:T.y,y0:T.y0,dy:T.dy,xperiod:T.xperiod,yperiod:T.yperiod,xperiod0:T.xperiod0,yperiod0:T.yperiod0,xperiodalignment:T.xperiodalignment,yperiodalignment:T.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:T.hovertext,hovertemplate:c({},{keys:t.eventDataKeys}),hoverinfo:i({},w.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:T.text,textposition:T.textposition,insidetextanchor:i({},T.insidetextanchor,{dflt:"middle"}),textangle:i({},T.textangle,{dflt:0}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:T.outsidetextfont,constraintext:T.constraintext,cliponaxis:T.cliponaxis,orientation:i({},T.orientation,{}),offset:i({},T.offset,{arrayOk:!1}),width:i({},T.width,{arrayOk:!1}),marker:(_=i({},T.marker),delete _.pattern,delete _.cornerradius,_),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},r.color,{dflt:n.defaultLine}),width:i({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:T.offsetgroup,alignmentgroup:T.alignmentgroup,zorder:T.zorder}},23096:function(R,C,e){"use strict";var _=e(54460),T=e(1220),r=e(74248),w=e(4500),b=e(39032).BADNUM;function c(o){return o===b?0:o}R.exports=function(o,t){var i,n,a,s,l,u,p,f,m=_.getFromId(o,t.xaxis||"x"),h=_.getFromId(o,t.yaxis||"y");t.orientation==="h"?(i=m.makeCalcdata(t,"x"),a=h.makeCalcdata(t,"y"),s=T(t,h,"y",a),l=!!t.yperiodalignment,u="y"):(i=h.makeCalcdata(t,"y"),a=m.makeCalcdata(t,"x"),s=T(t,m,"x",a),l=!!t.xperiodalignment,u="x"),n=s.vals;var g,v=Math.min(n.length,i.length),x=new Array(v);for(t._base=[],p=0;p<v;p++){i[p]<0&&(i[p]=b);var y=!1;i[p]!==b&&p+1<v&&i[p+1]!==b&&(y=!0),f=x[p]={p:n[p],s:i[p],cNext:y},t._base[p]=-.5*f.s,l&&(x[p].orig_p=a[p],x[p][u+"End"]=s.ends[p],x[p][u+"Start"]=s.starts[p]),t.ids&&(f.id=String(t.ids[p])),p===0&&(x[0].vTotal=0),x[0].vTotal+=c(f.s),f.begR=c(f.s)/c(x[0].s)}for(p=0;p<v;p++)(f=x[p]).s!==b&&(f.sumR=f.s/x[0].vTotal,f.difR=g!==void 0?f.s/g:1,g=f.s);return r(x,t),w(x,t),x}},74732:function(R){"use strict";R.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(R,C,e){"use strict";var _=e(96376).setGroupPositions;R.exports=function(T,r){var w,b,c=T._fullLayout,o=T._fullData,t=T.calcdata,i=r.xaxis,n=r.yaxis,a=[],s=[],l=[];for(b=0;b<o.length;b++){var u=o[b],p=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="funnel"&&(w=t[b],p?l.push(w):s.push(w),a.push(w))}var f={mode:c.funnelmode,norm:c.funnelnorm,gap:c.funnelgap,groupgap:c.funnelgroupgap};for(_(T,i,n,s,f),_(T,n,i,l,f),b=0;b<a.length;b++){w=a[b];for(var m=0;m<w.length;m++)m+1<w.length&&(w[m].nextP0=w[m+1].p0,w[m].nextS0=w[m+1].s0,w[m].nextP1=w[m+1].p1,w[m].nextS1=w[m+1].s1)}}},45432:function(R,C,e){"use strict";var _=e(3400),T=e(20011),r=e(31508).handleText,w=e(43980),b=e(31147),c=e(20088),o=e(76308);R.exports={supplyDefaults:function(t,i,n,a){function s(f,m){return _.coerce(t,i,c,f,m)}if(w(t,i,a,s)){b(t,i,a,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var l=s("text");s("hovertext"),s("hovertemplate");var u=s("textposition");r(t,i,a,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||s("textinfo",_.isArrayOrTypedArray(l)?"text+value":"value");var p=s("marker.color",n);s("marker.line.color",o.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",function(f){var m=_.isArrayOrTypedArray(f)?"#000":f;return o.addOpacity(m,.5*o.opacity(m))}(p)),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash"))),s("zorder")}else i.visible=!1},crossTraceDefaults:function(t,i){var n,a;function s(u){return _.coerce(a._input,a,c,u)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)n=(a=t[l])._input,T(n,a,i,s)}}},34580:function(R){"use strict";R.exports=function(C,e){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(C.percentInitial=e.percentInitial),"percentPrevious"in e&&(C.percentPrevious=e.percentPrevious),"percentTotal"in e&&(C.percentTotal=e.percentTotal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},31488:function(R,C,e){"use strict";var _=e(76308).opacity,T=e(63400).hoverOnBars,r=e(3400).formatPercent;R.exports=function(w,b,c,o,t){var i=T(w,b,c,o,t);if(i){var n=i.cd,a=n[0].trace,s=a.orientation==="h",l=n[i.index];i[(s?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=r(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=r(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=r(l.sumR,1);var u=l.hi||a.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var f=u==="all",m=u.split("+"),h=function(g){return f||m.indexOf(g)!==-1};h("percent initial")&&p.push(i.percentInitialLabel+" of initial"),h("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),h("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=function(g,v){var x=g.marker,y=v.mc||x.color,A=v.mlc||x.line.color,d=v.mlw||x.line.width;return _(y)?y:_(A)&&d?A:void 0}(a,l),[i]}}},94704:function(R,C,e){"use strict";R.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(R){"use strict";R.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(R,C,e){"use strict";var _=e(3400),T=e(7076);R.exports=function(r,w,b){var c=!1;function o(n,a){return _.coerce(r,w,T,n,a)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){c=!0;break}}c&&(o("funnelmode"),o("funnelgap",.2),o("funnelgroupgap"))}},42200:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(39032).BADNUM,b=e(98184),c=e(82744).clearMinTextSize;function o(t,i,n,a){var s=[],l=[],u=a?i:n,p=a?n:i;return s[0]=u.c2p(t.s0,!0),l[0]=p.c2p(t.p0,!0),s[1]=u.c2p(t.s1,!0),l[1]=p.c2p(t.p1,!0),s[2]=u.c2p(t.nextS0,!0),l[2]=p.c2p(t.nextP0,!0),s[3]=u.c2p(t.nextS1,!0),l[3]=p.c2p(t.nextP1,!0),a?[s,l]:[l,s]}R.exports=function(t,i,n,a){var s=t._fullLayout;c("funnel",s),function(l,u,p,f){var m=u.xaxis,h=u.yaxis;T.makeTraceGroups(f,p,"trace bars").each(function(g){var v=_.select(this),x=g[0].trace,y=T.ensureSingle(v,"g","regions");if(x.connector&&x.connector.visible){var A=x.orientation==="h",d=y.selectAll("g.region").data(T.identity);d.enter().append("g").classed("region",!0),d.exit().remove();var S=d.size();d.each(function(k,E){if(E===S-1||k.cNext){var L=o(k,m,h,A),O=L[0],P=L[1],F="";O[0]!==w&&P[0]!==w&&O[1]!==w&&P[1]!==w&&O[2]!==w&&P[2]!==w&&O[3]!==w&&P[3]!==w&&(F+=A?"M"+O[0]+","+P[1]+"L"+O[2]+","+P[2]+"H"+O[3]+"L"+O[1]+","+P[1]+"Z":"M"+O[1]+","+P[1]+"L"+O[2]+","+P[3]+"V"+P[2]+"L"+O[1]+","+P[0]+"Z"),F===""&&(F="M0,0Z"),T.ensureSingle(_.select(this),"path").attr("d",F).call(r.setClipUrl,u.layerClipId,l)}})}else y.remove()})}(t,i,n,a),function(l,u,p,f){var m=u.xaxis,h=u.yaxis;T.makeTraceGroups(f,p,"trace bars").each(function(g){var v=_.select(this),x=g[0].trace,y=T.ensureSingle(v,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var A=x.orientation==="h",d=y.selectAll("g.line").data(T.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(k,E){if(E===S-1||k.cNext){var L=o(k,m,h,A),O=L[0],P=L[1],F="";O[3]!==void 0&&P[3]!==void 0&&(A?(F+="M"+O[0]+","+P[1]+"L"+O[2]+","+P[2],F+="M"+O[1]+","+P[1]+"L"+O[3]+","+P[2]):(F+="M"+O[1]+","+P[1]+"L"+O[2]+","+P[3],F+="M"+O[1]+","+P[0]+"L"+O[2]+","+P[2])),F===""&&(F="M0,0Z"),T.ensureSingle(_.select(this),"path").attr("d",F).call(r.setClipUrl,u.layerClipId,l)}})}else y.remove()})}(t,i,n,a),b.plot(t,i,n,a,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},44544:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(76308),w=e(13448).DESELECTDIM,b=e(60100),c=e(82744).resizeText,o=b.styleTextPoints;R.exports={style:function(t,i,n){var a=n||_.select(t).selectAll('g[class^="funnellayer"]').selectAll("g.trace");c(t,a,"funnel"),a.style("opacity",function(s){return s[0].trace.opacity}),a.each(function(s){var l=_.select(this),u=s[0].trace;l.selectAll(".point > path").each(function(p){if(!p.isBlank){var f=u.marker;_.select(this).call(r.fill,p.mc||f.color).call(r.stroke,p.mlc||f.line.color).call(T.dashLine,f.line.dash,p.mlw||f.line.width).style("opacity",u.selectedpoints&&!p.selected?w:1)}}),o(l,u,t),l.selectAll(".regions").each(function(){_.select(this).selectAll("path").style("stroke-width",0).call(r.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var p=u.connector.line;T.lineGroupStyle(_.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},22332:function(R,C,e){"use strict";var _=e(74996),T=e(45464),r=e(86968).u,w=e(21776).Ks,b=e(21776).Gw,c=e(92880).extendFlat;R.exports={labels:_.labels,label0:_.label0,dlabel:_.dlabel,values:_.values,marker:{colors:_.marker.colors,line:{color:c({},_.marker.line.color,{dflt:null}),width:c({},_.marker.line.width,{dflt:1}),editType:"calc"},pattern:_.marker.pattern,editType:"calc"},text:_.text,hovertext:_.hovertext,scalegroup:c({},_.scalegroup,{}),textinfo:c({},_.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:c({},T.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:w({},{keys:["label","color","value","text","percent"]}),textposition:c({},_.textposition,{values:["inside","none"],dflt:"inside"}),textfont:_.textfont,insidetextfont:_.insidetextfont,title:{text:_.title.text,font:_.title.font,position:c({},_.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:r({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(R,C,e){"use strict";var _=e(7316);C.name="funnelarea",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},54e3:function(R,C,e){"use strict";var _=e(45768);R.exports={calc:function(T,r){return _.calc(T,r)},crossTraceCalc:function(T){_.crossTraceCalc(T,{type:"funnelarea"})}}},92688:function(R,C,e){"use strict";var _=e(3400),T=e(22332),r=e(86968).Q,w=e(31508).handleText,b=e(74174).handleLabelsAndValues,c=e(74174).handleMarkerDefaults;R.exports=function(o,t,i,n){function a(v,x){return _.coerce(o,t,T,v,x)}var s=a("labels"),l=a("values"),u=b(s,l),p=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(a("label0"),a("dlabel")),p){t._length=p,c(o,t,n,a),a("scalegroup");var f,m=a("text"),h=a("texttemplate");if(h||(f=a("textinfo",Array.isArray(m)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),h||f&&f!=="none"){var g=a("textposition");w(o,t,n,a,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else f==="none"&&a("textposition","none");r(t,n,a),a("title.text")&&(a("title.position"),_.coerceFont(a,"title.font",n.font)),a("aspectratio"),a("baseratio")}else t.visible=!1}},62396:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(R,C,e){"use strict";var _=e(85204).hiddenlabels;R.exports={hiddenlabels:_,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(R,C,e){"use strict";var _=e(3400),T=e(61280);R.exports=function(r,w){function b(c,o){return _.coerce(r,w,T,c,o)}b("hiddenlabels"),b("funnelareacolorway",w.colorway),b("extendfunnelareacolors")}},39472:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(3400),w=r.strScale,b=r.strTranslate,c=e(72736),o=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,n=t.clearMinTextSize,a=e(69656),s=e(37820),l=s.attachFxHandlers,u=s.determineInsideTextFont,p=s.layoutAreas,f=s.prerenderTitles,m=s.positionTitleOutside,h=s.formatSliceLabel;function g(v,x){return"l"+(x[0]-v[0])+","+(x[1]-v[1])}R.exports=function(v,x){var y=v._context.staticPlot,A=v._fullLayout;n("funnelarea",A),f(x,v),p(x,A._size),r.makeTraceGroups(A._funnelarealayer,x,"trace").each(function(d){var S=_.select(this),k=d[0],E=k.trace;(function(L){if(L.length){var O=L[0],P=O.trace,F=P.aspectratio,U=P.baseratio;U>.999&&(U=.999);var I,N,W,B=Math.pow(U,2),V=O.vTotal,q=V,ne=V*B/(1-B)/V,$=[];for($.push(de()),N=L.length-1;N>-1;N--)if(!(W=L[N]).hidden){var K=W.v/q;ne+=K,$.push(de())}var ee=1/0,J=-1/0;for(N=0;N<$.length;N++)I=$[N],ee=Math.min(ee,I[1]),J=Math.max(J,I[1]);for(N=0;N<$.length;N++)$[N][1]-=(J+ee)/2;var Z=$[$.length-1][0],te=O.r,oe=(J-ee)/2,se=te/Z,ce=te/oe*F;for(O.r=ce*oe,N=0;N<$.length;N++)$[N][0]*=se,$[N][1]*=ce;var ye,me,fe=[-(I=$[0])[0],I[1]],pe=[I[0],I[1]],ge=0;for(N=L.length-1;N>-1;N--)if(!(W=L[N]).hidden){var ke=$[ge+=1][0],Ce=$[ge][1];W.TL=[-ke,Ce],W.TR=[ke,Ce],W.BL=fe,W.BR=pe,W.pxmid=(ye=W.TR,me=W.BR,[.5*(ye[0]+me[0]),.5*(ye[1]+me[1])]),fe=W.TL,pe=W.TR}}function de(){var ae,re={x:ae=Math.sqrt(ne),y:-ae};return[re.x,re.y]}})(d),S.each(function(){var L=_.select(this).selectAll("g.slice").data(d);L.enter().append("g").classed("slice",!0),L.exit().remove(),L.each(function(P,F){if(P.hidden)_.select(this).selectAll("path,g").remove();else{P.pointNumber=P.i,P.curveNumber=E.index;var U=k.cx,I=k.cy,N=_.select(this),W=N.selectAll("path.surface").data([P]);W.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),N.call(l,v,d);var B="M"+(U+P.TR[0])+","+(I+P.TR[1])+g(P.TR,P.BR)+g(P.BR,P.BL)+g(P.BL,P.TL)+"Z";W.attr("d",B),h(v,P,k);var V=a.castOption(E.textposition,P.pts),q=N.selectAll("g.slicetext").data(P.text&&V!=="none"?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var ne=r.ensureSingle(_.select(this),"text","",function(se){se.attr("data-notex",1)}),$=r.ensureUniformFontSize(v,u(E,P,A.font));ne.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(T.font,$).call(c.convertToTspans,v);var K,ee,J,Z=T.bBox(ne.node()),te=Math.min(P.BL[1],P.BR[1])+I,oe=Math.max(P.TL[1],P.TR[1])+I;ee=Math.max(P.TL[0],P.BL[0])+U,J=Math.min(P.TR[0],P.BR[0])+U,(K=o(ee,J,te,oe,Z,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=$.size,i(E.type,K,A),d[F].transform=K,r.setTransormAndDisplay(ne,K)})}});var O=_.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var P=r.ensureSingle(_.select(this),"text","",function(I){I.attr("data-notex",1)}),F=E.title.text;E._meta&&(F=r.templateString(F,E._meta)),P.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(T.font,E.title.font).call(c.convertToTspans,v);var U=m(k,A._size);P.attr("transform",b(U.x,U.y)+w(Math.min(1,U.scale))+b(U.tx,U.ty))})})})}},62096:function(R,C,e){"use strict";var _=e(33428),T=e(10528),r=e(82744).resizeText;R.exports=function(w){var b=w._fullLayout._funnelarealayer.selectAll(".trace");r(w,b,"funnelarea"),b.each(function(c){var o=c[0].trace,t=_.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){_.select(this).call(T,i,o,w)})})}},83328:function(R,C,e){"use strict";var _=e(52904),T=e(45464),r=e(25376),w=e(29736).axisHoverFormat,b=e(21776).Ks,c=e(21776).Gw,o=e(49084),t=e(92880).extendFlat;R.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},_.x,{impliedEdits:{xtype:"array"}}),x0:t({},_.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},_.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},_.y,{impliedEdits:{ytype:"array"}}),y0:t({},_.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},_.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},_.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},_.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},_.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},_.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},_.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},_.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:b(),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:r({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},T.showlegend,{dflt:!1}),zorder:_.zorder},{transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},19512:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(54460),w=e(1220),b=e(55480),c=e(47128),o=e(2872),t=e(26136),i=e(70448),n=e(11240),a=e(35744),s=e(39032).BADNUM;function l(u){for(var p=[],f=u.length,m=0;m<f;m++){var h=u[m];h!==s&&p.push(h)}return p}R.exports=function(u,p){var f,m,h,g,v,x,y,A,d,S,k,E=r.getFromId(u,p.xaxis||"x"),L=r.getFromId(u,p.yaxis||"y"),O=_.traceIs(p,"contour"),P=_.traceIs(p,"histogram"),F=_.traceIs(p,"gl2d"),U=O?"best":p.zsmooth;if(E._minDtick=0,L._minDtick=0,P)g=(k=b(u,p)).orig_x,f=k.x,m=k.x0,h=k.dx,A=k.orig_y,v=k.y,x=k.y0,y=k.dy,d=k.z;else{var I=p.z;T.isArray1D(I)?(o(p,E,L,"x","y",["z"]),f=p._x,v=p._y,I=p._z):(g=p.x?E.makeCalcdata(p,"x"):[],A=p.y?L.makeCalcdata(p,"y"):[],f=w(p,E,"x",g).vals,v=w(p,L,"y",A).vals,p._x=f,p._y=v),m=p.x0,h=p.dx,x=p.y0,y=p.dy,d=t(I,p,E,L)}function N(J){U=p._input.zsmooth=p.zsmooth=!1,T.warn('cannot use zsmooth: "fast": '+J)}function W(J){if(J.length>1){var Z=(J[J.length-1]-J[0])/(J.length-1),te=Math.abs(Z/100);for(S=0;S<J.length-1;S++)if(Math.abs(J[S+1]-J[S]-Z)>te)return!1}return!0}(E.rangebreaks||L.rangebreaks)&&(d=function(J,Z,te){for(var oe=[],se=-1,ce=0;ce<te.length;ce++)if(Z[ce]!==s){oe[++se]=[];for(var ye=0;ye<te[ce].length;ye++)J[ye]!==s&&oe[se].push(te[ce][ye])}return oe}(f,v,d),P||(f=l(f),v=l(v),p._x=f,p._y=v)),P||!O&&!p.connectgaps||(p._emptypoints=n(d),i(d,p._emptypoints)),p._islinear=!1,E.type==="log"||L.type==="log"?U==="fast"&&N("log axis found"):W(f)?W(v)?p._islinear=!0:U==="fast"&&N("y scale is not linear"):U==="fast"&&N("x scale is not linear");var B=T.maxRowLength(d),V=p.xtype==="scaled"?"":f,q=a(p,V,m,h,B,E),ne=p.ytype==="scaled"?"":v,$=a(p,ne,x,y,d.length,L);F||(p._extremes[E._id]=r.findExtremes(E,q),p._extremes[L._id]=r.findExtremes(L,$));var K={x:q,y:$,z:d,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&g&&(K.orig_x=g),p.yperiodalignment&&A&&(K.orig_y=A),V&&V.length===q.length-1&&(K.xCenter=V),ne&&ne.length===$.length-1&&(K.yCenter=ne),P&&(K.xRanges=k.xRanges,K.yRanges=k.yRanges,K.pts=k.pts),O||c(u,p,{vals:d,cLetter:"z"}),O&&p.contours&&p.contours.coloring==="heatmap"){var ee={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};K.xfill=a(ee,V,m,h,B,E),K.yfill=a(ee,ne,x,y,d.length,L)}return[K]}},26136:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(39032).BADNUM;R.exports=function(w,b,c,o){var t,i,n,a,s,l;function u(v){if(_(v))return+v}if(b&&b.transpose){for(t=0,s=0;s<w.length;s++)t=Math.max(t,w[s].length);if(t===0)return!1;n=function(v){return v.length},a=function(v,x,y){return(v[y]||[])[x]}}else t=w.length,n=function(v,x){return v[x].length},a=function(v,x,y){return(v[x]||[])[y]};var p=function(v,x,y){return x===r||y===r?r:a(v,x,y)};function f(v){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&v&&v.type==="category"&&b["_"+v._id.charAt(0)].length){var x=v._id.charAt(0),y={},A=b["_"+x+"CategoryMap"]||b[x];for(s=0;s<A.length;s++)y[A[s]]=s;return function(d){var S=y[v._categories[d]];return S+1?S:r}}return T.identity}var m=f(c),h=f(o);o&&o.type==="category"&&(t=o._categories.length);var g=new Array(t);for(s=0;s<t;s++)for(i=c&&c.type==="category"?c._categories.length:n(w,s),g[s]=new Array(i),l=0;l<i;l++)g[s][l]=u(p(w,h(s),m(l)));return g}},96288:function(R){"use strict";R.exports={min:"zmin",max:"zmax"}},2872:function(R,C,e){"use strict";var _=e(3400),T=e(39032).BADNUM,r=e(1220);R.exports=function(w,b,c,o,t,i){var n=w._length,a=b.makeCalcdata(w,o),s=c.makeCalcdata(w,t);a=r(w,b,o,a).vals,s=r(w,c,t,s).vals;var l,u,p,f,m=w.text,h=m!==void 0&&_.isArray1D(m),g=w.hovertext,v=g!==void 0&&_.isArray1D(g),x=_.distinctVals(a),y=x.vals,A=_.distinctVals(s),d=A.vals,S=[],k=d.length,E=y.length;for(l=0;l<i.length;l++)S[l]=_.init2dArray(k,E);h&&(p=_.init2dArray(k,E)),v&&(f=_.init2dArray(k,E));var L=_.init2dArray(k,E);for(l=0;l<n;l++)if(a[l]!==T&&s[l]!==T){var O=_.findBin(a[l]+x.minDiff/2,y),P=_.findBin(s[l]+A.minDiff/2,d);for(u=0;u<i.length;u++){var F=w[i[u]];S[u][P][O]=F[l],L[P][O]=l}h&&(p[P][O]=m[l]),v&&(f[P][O]=g[l])}for(w["_"+o]=y,w["_"+t]=d,u=0;u<i.length;u++)w["_"+i[u]]=S[u];h&&(w._text=p),v&&(w._hovertext=f),b&&b.type==="category"&&(w["_"+o+"CategoryMap"]=y.map(function(U){return b._categories[U]})),c&&c.type==="category"&&(w["_"+t+"CategoryMap"]=d.map(function(U){return c._categories[U]})),w._after2before=L}},24480:function(R,C,e){"use strict";var _=e(3400),T=e(51264),r=e(39096),w=e(31147),b=e(82748),c=e(27260),o=e(83328);R.exports=function(t,i,n,a){function s(l,u){return _.coerce(t,i,o,l,u)}T(t,i,s,a)?(w(t,i,a,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),r(s,a),b(t,i,s,a),s("hoverongaps"),s("connectgaps",_.isArray1D(i.z)&&i.zsmooth!==!1),c(t,i,a,s,{prefix:"",cLetter:"z"}),s("zorder")):i.visible=!1}},11240:function(R,C,e){"use strict";var _=e(3400).maxRowLength;R.exports=function(T){var r,w,b,c,o,t,i,n,a=[],s={},l=[],u=T[0],p=[],f=[0,0,0],m=_(T);for(w=0;w<T.length;w++)for(r=p,p=u,u=T[w+1]||[],b=0;b<m;b++)p[b]===void 0&&((t=(p[b-1]!==void 0?1:0)+(p[b+1]!==void 0?1:0)+(r[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(w===0&&t++,b===0&&t++,w===T.length-1&&t++,b===p.length-1&&t++,t<4&&(s[[w,b]]=[w,b,t]),a.push([w,b,t])):l.push([w,b]));for(;l.length;){for(i={},n=!1,o=l.length-1;o>=0;o--)(t=((s[[(w=(c=l[o])[0])-1,b=c[1]]]||f)[2]+(s[[w+1,b]]||f)[2]+(s[[w,b-1]]||f)[2]+(s[[w,b+1]]||f)[2])/20)&&(i[c]=[w,b,t],l.splice(o,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(c in i)s[c]=i[c],a.push(i[c])}return a.sort(function(h,g){return g[2]-h[2]})}},55512:function(R,C,e){"use strict";var _=e(93024),T=e(3400),r=T.isArrayOrTypedArray,w=e(54460),b=e(8932).extractOpts;R.exports=function(c,o,t,i,n){n||(n={});var a,s,l,u,p=n.isContour,f=c.cd[0],m=f.trace,h=c.xa,g=c.ya,v=f.x,x=f.y,y=f.z,A=f.xCenter,d=f.yCenter,S=f.zmask,k=m.zhoverformat,E=v,L=x;if(c.index!==!1){try{l=Math.round(c.index[1]),u=Math.round(c.index[0])}catch{return void T.error("Error hovering on heatmap, pointNumber must be [row,col], found:",c.index)}if(l<0||l>=y[0].length||u<0||u>y.length)return}else{if(_.inbox(o-v[0],o-v[v.length-1],0)>0||_.inbox(t-x[0],t-x[x.length-1],0)>0)return;if(p){var O;for(E=[2*v[0]-v[1]],O=1;O<v.length;O++)E.push((v[O]+v[O-1])/2);for(E.push([2*v[v.length-1]-v[v.length-2]]),L=[2*x[0]-x[1]],O=1;O<x.length;O++)L.push((x[O]+x[O-1])/2);L.push([2*x[x.length-1]-x[x.length-2]])}l=Math.max(0,Math.min(E.length-2,T.findBin(o,E))),u=Math.max(0,Math.min(L.length-2,T.findBin(t,L)))}var P,F,U=h.c2p(v[l]),I=h.c2p(v[l+1]),N=g.c2p(x[u]),W=g.c2p(x[u+1]);p?(P=f.orig_x||v,F=f.orig_y||x,I=U,a=P[l],W=N,s=F[u]):(P=f.orig_x||A||v,F=f.orig_y||d||x,a=A?P[l]:(P[l]+P[l+1])/2,s=d?F[u]:(F[u]+F[u+1])/2,h&&h.type==="category"&&(a=v[l]),g&&g.type==="category"&&(s=x[u]),m.zsmooth&&(U=I=h.c2p(a),N=W=g.c2p(s)));var B=y[u][l];if(S&&!S[u][l]&&(B=void 0),B!==void 0||m.hoverongaps){var V;r(f.hovertext)&&r(f.hovertext[u])?V=f.hovertext[u][l]:r(f.text)&&r(f.text[u])&&(V=f.text[u][l]);var q=b(m),ne={type:"linear",range:[q.min,q.max],hoverformat:k,_separators:h._separators,_numFormat:h._numFormat},$=w.tickText(ne,B,"hover").text;return[T.extendFlat(c,{index:m._after2before?m._after2before[u][l]:[u,l],distance:c.maxHoverDistance,spikeDistance:c.maxSpikeDistance,x0:U,x1:I,y0:N,y1:W,xLabelVal:a,yLabelVal:s,zLabelVal:B,zLabel:$,text:V})]}}},81932:function(R,C,e){"use strict";R.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(R,C,e){"use strict";var _=e(3400),T=[[-1,0],[1,0],[0,-1],[0,1]];function r(b){return .5-.25*Math.min(1,.5*b)}function w(b,c,o){var t,i,n,a,s,l,u,p,f,m,h,g,v,x=0;for(a=0;a<c.length;a++){for(i=(t=c[a])[0],n=t[1],h=b[i][n],m=0,f=0,s=0;s<4;s++)(u=b[i+(l=T[s])[0]])&&(p=u[n+l[1]])!==void 0&&(m===0?g=v=p:(g=Math.min(g,p),v=Math.max(v,p)),f++,m+=p);if(f===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][n]=m/f,h===void 0?f<4&&(x=1):(b[i][n]=(1+o)*b[i][n]-o*h,v>g&&(x=Math.max(x,Math.abs(b[i][n]-h)/(v-g))))}return x}R.exports=function(b,c){var o,t=1;for(w(b,c),o=0;o<c.length&&!(c[o][2]<4);o++);for(c=c.slice(o),o=0;o<100&&t>.01;o++)t=w(b,c,r(t));return t>.01&&_.log("interp2d didn't converge quickly",t),b}},39096:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){T("texttemplate");var w=_.extendFlat({},r.font,{color:"auto",size:"auto"});_.coerceFont(T,"textfont",w)}},35744:function(R,C,e){"use strict";var _=e(24040),T=e(3400).isArrayOrTypedArray;R.exports=function(r,w,b,c,o,t){var i,n,a,s=[],l=_.traceIs(r,"contour"),u=_.traceIs(r,"histogram"),p=_.traceIs(r,"gl2d");if(T(w)&&w.length>1&&!u&&t.type!=="category"){var f=w.length;if(!(f<=o))return l?w.slice(0,o):w.slice(0,o+1);if(l||p)s=Array.from(w).slice(0,o);else if(o===1)s=t.type==="log"?[.5*w[0],2*w[0]]:[w[0]-.5,w[0]+.5];else if(t.type==="log"){for(s=[Math.pow(w[0],1.5)/Math.pow(w[1],.5)],a=1;a<f;a++)s.push(Math.sqrt(w[a-1]*w[a]));s.push(Math.pow(w[f-1],1.5)/Math.pow(w[f-2],.5))}else{for(s=[1.5*w[0]-.5*w[1]],a=1;a<f;a++)s.push(.5*(w[a-1]+w[a]));s.push(1.5*w[f-1]-.5*w[f-2])}if(f<o){var m,h=s[s.length-1];if(t.type==="log")for(m=h/s[s.length-2],a=f;a<o;a++)h*=m,s.push(h);else for(m=h-s[s.length-2],a=f;a<o;a++)h+=m,s.push(h)}}else{var g=r[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(b,0,g):T(w)&&w.length===1?w[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,g),n=c||1,a=l||p?0:-.5;a<o;a++)s.push(i+n*a)}return s}},41420:function(R,C,e){"use strict";var _=e(33428),T=e(49760),r=e(24040),w=e(43616),b=e(54460),c=e(3400),o=e(72736),t=e(76688),i=e(76308),n=e(8932).extractOpts,a=e(8932).makeColorScaleFuncFromTrace,s=e(9616),l=e(84284).LINE_SPACING,u=e(9188),p=e(2264).STYLE,f="heatmap-label";function m(y){return y.selectAll("g."+f)}function h(y){m(y).remove()}function g(y,A){var d=A.length-2,S=c.constrain(c.findBin(y,A),0,d),k=A[S],E=A[S+1],L=c.constrain(S+(y-k)/(E-k)-.5,0,d),O=Math.round(L),P=Math.abs(L-O);return L&&L!==d&&P?{bin0:O,frac:P,bin1:Math.round(O+P/(L-O))}:{bin0:O,bin1:O,frac:0}}function v(y,A){var d=A.length-1,S=c.constrain(c.findBin(y,A),0,d),k=A[S],E=(y-k)/(A[S+1]-k)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function x(y,A,d){y[A]=d[0],y[A+1]=d[1],y[A+2]=d[2],y[A+3]=Math.round(255*d[3])}R.exports=function(y,A,d,S){var k=A.xaxis,E=A.yaxis;c.makeTraceGroups(S,d,"hm").each(function(L){var O,P,F,U,I,N,W,B,V=_.select(this),q=L[0],ne=q.trace,$=ne.xgap||0,K=ne.ygap||0,ee=q.z,J=q.x,Z=q.y,te=q.xCenter,oe=q.yCenter,se=r.traceIs(ne,"contour"),ce=se?"best":ne.zsmooth,ye=ee.length,me=c.maxRowLength(ee),fe=!1,pe=!1;for(N=0;O===void 0&&N<J.length-1;)O=k.c2p(J[N]),N++;for(N=J.length-1;P===void 0&&N>0;)P=k.c2p(J[N]),N--;for(P<O&&(F=P,P=O,O=F,fe=!0),N=0;U===void 0&&N<Z.length-1;)U=E.c2p(Z[N]),N++;for(N=Z.length-1;I===void 0&&N>0;)I=E.c2p(Z[N]),N--;I<U&&(F=U,U=I,I=F,pe=!0),se&&(te=J,oe=Z,J=q.xfill,Z=q.yfill);var ge="default";if(ce?ge=ce==="best"?"smooth":"fast":ne._islinear&&$===0&&K===0&&u()&&(ge="fast"),ge!=="fast"){var ke=ce==="best"?0:.5;O=Math.max(-ke*k._length,O),P=Math.min((1+ke)*k._length,P),U=Math.max(-ke*E._length,U),I=Math.min((1+ke)*E._length,I)}var Ce,de,ae=Math.round(P-O),re=Math.round(I-U);if(O>=k._length||P<=0||U>=E._length||I<=0)return V.selectAll("image").data([]).exit().remove(),void h(V);ge==="fast"?(Ce=me,de=ye):(Ce=ae,de=re);var he=document.createElement("canvas");he.width=Ce,he.height=de;var Se,xe,Te=he.getContext("2d",{willReadFrequently:!0}),Ae=a(ne,{noNumericCheck:!0,returnArray:!0});ge==="fast"?(Se=fe?function(or){return me-1-or}:c.identity,xe=pe?function(or){return ye-1-or}:c.identity):(Se=function(or){return c.constrain(Math.round(k.c2p(J[or])-O),0,ae)},xe=function(or){return c.constrain(Math.round(E.c2p(Z[or])-U),0,re)});var Pe,De,ve,we,Ee=xe(0),Fe=[Ee,Ee],Le=fe?0:1,je=pe?0:1,Ge=0,Je=0,rt=0,ot=0;function yt(or,Qt){if(or!==void 0){var an=Ae(or);return an[0]=Math.round(an[0]),an[1]=Math.round(an[1]),an[2]=Math.round(an[2]),Ge+=Qt,Je+=an[0]*Qt,rt+=an[1]*Qt,ot+=an[2]*Qt,an}return[0,0,0,0]}function _t(or,Qt,an,Dn){var yn=or[an.bin0];if(yn===void 0)return yt(void 0,1);var Ln,Vn=or[an.bin1],Un=Qt[an.bin0],er=Qt[an.bin1],fr=Vn-yn||0,Xt=Un-yn||0;return Ln=Vn===void 0?er===void 0?0:Un===void 0?2*(er-yn):2*(2*er-Un-yn)/3:er===void 0?Un===void 0?0:2*(2*yn-Vn-Un)/3:Un===void 0?2*(2*er-Vn-yn)/3:er+yn-Vn-Un,yt(yn+an.frac*fr+Dn.frac*(Xt+an.frac*Ln))}if(ge!=="default"){var mt,tt=0;try{mt=new Uint8Array(Ce*de*4)}catch{mt=new Array(Ce*de*4)}if(ge==="smooth"){var Qe,Dt,zt,pt=te||J,vt=oe||Z,We=new Array(pt.length),Ze=new Array(vt.length),Ne=new Array(ae),Xe=te?v:g,st=oe?v:g;for(N=0;N<pt.length;N++)We[N]=Math.round(k.c2p(pt[N])-O);for(N=0;N<vt.length;N++)Ze[N]=Math.round(E.c2p(vt[N])-U);for(N=0;N<ae;N++)Ne[N]=Xe(N,We);for(W=0;W<re;W++)for(Dt=ee[(Qe=st(W,Ze)).bin0],zt=ee[Qe.bin1],N=0;N<ae;N++,tt+=4)x(mt,tt,we=_t(Dt,zt,Ne[N],Qe))}else for(W=0;W<ye;W++)for(ve=ee[W],Fe=xe(W),N=0;N<me;N++)we=yt(ve[N],1),x(mt,tt=4*(Fe*me+Se(N)),we);var lt=Te.createImageData(Ce,de);try{lt.data.set(mt)}catch{var xt=lt.data,bt=xt.length;for(W=0;W<bt;W++)xt[W]=mt[W]}Te.putImageData(lt,0,0)}else{var Ve=Math.floor($/2),Be=Math.floor(K/2);for(W=0;W<ye;W++)if(ve=ee[W],Fe.reverse(),Fe[je]=xe(W+1),Fe[0]!==Fe[1]&&Fe[0]!==void 0&&Fe[1]!==void 0)for(Pe=[De=Se(0),De],N=0;N<me;N++)Pe.reverse(),Pe[Le]=Se(N+1),Pe[0]!==Pe[1]&&Pe[0]!==void 0&&Pe[1]!==void 0&&(we=yt(ve[N],(Pe[1]-Pe[0])*(Fe[1]-Fe[0])),Te.fillStyle="rgba("+we.join(",")+")",Te.fillRect(Pe[0]+Ve,Fe[0]+Be,Pe[1]-Pe[0]-$,Fe[1]-Fe[0]-K))}Je=Math.round(Je/Ge),rt=Math.round(rt/Ge),ot=Math.round(ot/Ge);var at=T("rgb("+Je+","+rt+","+ot+")");y._hmpixcount=(y._hmpixcount||0)+Ge,y._hmlumcount=(y._hmlumcount||0)+Ge*at.getLuminance();var ht=V.selectAll("image").data(L);ht.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),ht.attr({height:re,width:ae,x:O,y:U,"xlink:href":he.toDataURL("image/png")}),ge!=="fast"||ce||ht.attr("style",p),h(V);var dt=ne.texttemplate;if(dt){var it=n(ne),kt={type:"linear",range:[it.min,it.max],_separators:k._separators,_numFormat:k._numFormat},Tt=ne.type==="histogram2dcontour",St=ne.type==="contour",wt=St?ye-1:ye,At=St?1:0,Ft=St?me-1:me,jt=[];for(N=St?1:0;N<wt;N++){var rn;if(St)rn=q.y[N];else if(Tt){if(N===0||N===ye-1)continue;rn=q.y[N]}else if(q.yCenter)rn=q.yCenter[N];else{if(N+1===ye&&q.y[N+1]===void 0)continue;rn=(q.y[N]+q.y[N+1])/2}var nn=Math.round(E.c2p(rn));if(!(0>nn||nn>E._length))for(W=At;W<Ft;W++){var on;if(St)on=q.x[W];else if(Tt){if(W===0||W===me-1)continue;on=q.x[W]}else if(q.xCenter)on=q.xCenter[W];else{if(W+1===me&&q.x[W+1]===void 0)continue;on=(q.x[W]+q.x[W+1])/2}var Ht=Math.round(k.c2p(on));if(!(0>Ht||Ht>k._length)){var $t=t({x:on,y:rn},ne,y._fullLayout);$t.x=on,$t.y=rn;var bn=q.z[N][W];bn===void 0?($t.z="",$t.zLabel=""):($t.z=bn,$t.zLabel=b.tickText(kt,bn,"hover").text);var ln=q.text&&q.text[N]&&q.text[N][W];ln!==void 0&&ln!==!1||(ln=""),$t.text=ln;var Kt=c.texttemplateString(dt,$t,y._fullLayout._d3locale,$t,ne._meta||{});if(Kt){var fn=Kt.split("<br>"),en=fn.length,un=0;for(B=0;B<en;B++)un=Math.max(un,fn[B].length);jt.push({l:en,c:un,t:Kt,x:Ht,y:nn,z:bn})}}}}var An=ne.textfont,wn=An.size,On=y._fullLayout.font.size;if(!wn||wn==="auto"){var Tn=1/0,Cn=1/0,Bn=0,Xn=0;for(B=0;B<jt.length;B++){var cr=jt[B];if(Bn=Math.max(Bn,cr.l),Xn=Math.max(Xn,cr.c),B<jt.length-1){var Yn=jt[B+1],jn=Math.abs(Yn.x-cr.x),Kn=Math.abs(Yn.y-cr.y);jn&&(Tn=Math.min(Tn,jn)),Kn&&(Cn=Math.min(Cn,Kn))}}isFinite(Tn)&&isFinite(Cn)?(Tn-=$,Cn-=K,Tn/=Xn,Cn/=Bn,Tn/=l/2,Cn/=l,wn=Math.min(Math.floor(Tn),Math.floor(Cn),On)):wn=On}if(wn<=0||!isFinite(wn))return;m(V).data(jt).enter().append("g").classed(f,1).append("text").attr("text-anchor","middle").each(function(or){var Qt=_.select(this),an=An.color;an&&an!=="auto"||(an=i.contrast(or.z===void 0?y._fullLayout.plot_bgcolor:"rgba("+Ae(or.z).join()+")")),Qt.attr("data-notex",1).call(o.positionText,function(Dn){return Dn.x}(or),function(Dn){return Dn.y-wn*(Dn.l*l/2-1)}(or)).call(w.font,{family:An.family,size:wn,color:an,weight:An.weight,style:An.style,variant:An.variant,textcase:An.textcase,lineposition:An.lineposition,shadow:An.shadow}).text(or.t).call(o.convertToTspans,y)})}})}},41648:function(R,C,e){"use strict";var _=e(33428);R.exports=function(T){_.select(T).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}},82748:function(R){"use strict";R.exports=function(C,e,_){_("zsmooth")===!1&&(_("xgap"),_("ygap")),_("zhoverformat")}},51264:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(24040);function w(b,c){var o=c(b);return(o?c(b+"type","array"):"scaled")==="scaled"&&(c(b+"0"),c("d"+b)),o}R.exports=function(b,c,o,t,i,n){var a,s,l=o("z");if(i=i||"x",n=n||"y",l===void 0||!l.length)return 0;if(T.isArray1D(l)){a=o(i),s=o(n);var u=T.minRowLength(a),p=T.minRowLength(s);if(u===0||p===0)return 0;c._length=Math.min(u,p,l.length)}else{if(a=w(i,o),s=w(n,o),!function(f){for(var m,h=!0,g=!1,v=!1,x=0;x<f.length;x++){if(m=f[x],!T.isArrayOrTypedArray(m)){h=!1;break}m.length>0&&(g=!0);for(var y=0;y<m.length;y++)if(_(m[y])){v=!0;break}}return h&&g&&v}(l))return 0;o("transpose"),c._length=null}return b.type==="heatmapgl"||r.getComponentMethod("calendars","handleTraceDefaults")(b,c,[i,n],t),!0}},74512:function(R,C,e){"use strict";for(var _=e(83328),T=e(49084),r=e(92880).extendFlat,w=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],c={},o=0;o<b.length;o++){var t=b[o];c[t]=_[t]}c.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},r(c,T("",{cLetter:"z",autoColorDflt:!1})),R.exports=w(c,"calc","nested")},84656:function(R,C,e){"use strict";var _=e(67792).gl_heatmap2d,T=e(54460),r=e(43080);function w(c,o){this.scene=c,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=_(c.glplot,this.options),this.heatmap._trace=this}var b=w.prototype;b.handlePick=function(c){var o=this.options,t=o.shape,i=c.pointId,n=i%t[0],a=Math.floor(i/t[0]),s=i;return{trace:this,dataCoord:c.dataCoord,traceCoord:[o.x[n],o.y[a],o.z[s]],textLabel:this.textLabels[i],name:this.name,pointIndex:[a,n],hoverinfo:this.hoverinfo}},b.update=function(c,o){var t=o[0];this.index=c.index,this.name=c.name,this.hoverinfo=c.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var n=i[0].length,a=i.length;this.options.shape=[n,a],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=c.zsmooth;var s=function(m){for(var h=m.colorscale,g=m.zmin,v=m.zmax,x=h.length,y=new Array(x),A=new Array(4*x),d=0;d<x;d++){var S=h[d],k=r(S[1]);y[d]=g+S[0]*(v-g);for(var E=0;E<4;E++)A[4*d+E]=k[E]}return{colorLevels:y,colorValues:A}}(c);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],c.text),this.heatmap.update(this.options);var l,u,p=this.scene.xaxis,f=this.scene.yaxis;c.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),c._extremes[p._id]=T.findExtremes(p,t.x,l),c._extremes[f._id]=T.findExtremes(f,t.y,u)},b.dispose=function(){this.heatmap.dispose()},R.exports=function(c,o,t){var i=new w(c,o.uid);return i.update(o,t),i}},86464:function(R,C,e){"use strict";var _=e(3400),T=e(51264),r=e(27260),w=e(74512);R.exports=function(b,c,o,t){function i(n,a){return _.coerce(b,c,w,n,a)}T(b,c,i,t)?(i("text"),i("zsmooth"),r(b,c,t,i,{prefix:"",cLetter:"z"})):c.visible=!1}},45536:function(R,C,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),R.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(R,C,e){"use strict";var _=e(20832),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(21776).Gw,b=e(25376),c=e(11120),o=e(73316),t=e(92880).extendFlat;R.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:T("x"),yhoverformat:T("y"),text:t({},_.text,{}),hovertext:t({},_.hovertext,{}),orientation:_.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:c("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:c("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({},{keys:o.eventDataKeys}),texttemplate:w({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},_.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:_.insidetextanchor,textangle:_.textangle,cliponaxis:_.cliponaxis,constraintext:_.constraintext,marker:_.marker,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,_deprecated:{bardir:_._deprecated.bardir},zorder:_.zorder}},2e3:function(R){"use strict";R.exports=function(C,e){for(var _=C.length,T=0,r=0;r<_;r++)e[r]?(C[r]/=e[r],T+=C[r]):C[r]=null;return T}},11120:function(R){"use strict";R.exports=function(C,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(R,C,e){"use strict";var _=e(38248);R.exports={count:function(T,r,w){return w[T]++,1},sum:function(T,r,w,b){var c=b[r];return _(c)?(c=Number(c),w[T]+=c,c):0},avg:function(T,r,w,b,c){var o=b[r];return _(o)&&(o=Number(o),w[T]+=o,c[T]++),0},min:function(T,r,w,b){var c=b[r];if(_(c)){if(c=Number(c),!_(w[T]))return w[T]=c,c;if(w[T]>c){var o=c-w[T];return w[T]=c,o}}return 0},max:function(T,r,w,b){var c=b[r];if(_(c)){if(c=Number(c),!_(w[T]))return w[T]=c,c;if(w[T]<c){var o=c-w[T];return w[T]=c,o}}return 0}}},67712:function(R,C,e){"use strict";var _=e(39032),T=_.ONEAVGYEAR,r=_.ONEAVGMONTH,w=_.ONEDAY,b=_.ONEHOUR,c=_.ONEMIN,o=_.ONESEC,t=e(54460).tickIncrement;function i(l,u,p,f){if(l*u<=0)return 1/0;for(var m=Math.abs(u-l),h=p.type==="date",g=n(m,h),v=0;v<10;v++){var x=n(80*g,h);if(g===x||!a(x,l,u,h,p,f))break;g=x}return g}function n(l,u){return u&&l>o?l>w?l>1.1*T?T:l>1.1*r?r:w:l>b?b:l>c?c:o:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function a(l,u,p,f,m,h){if(f&&l>w){var g=s(u,m,h),v=s(p,m,h),x=l===T?0:1;return g[x]!==v[x]}return Math.floor(p/l)-Math.floor(u/l)>.1}function s(l,u,p){var f=u.c2d(l,T,p).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}R.exports=function(l,u,p,f,m){var h,g,v=-1.1*u,x=-.1*u,y=l-x,A=p[0],d=p[1],S=Math.min(i(A+x,A+y,f,m),i(d+x,d+y,f,m)),k=Math.min(i(A+v,A+x,f,m),i(d+v,d+x,f,m));if(S>k&&k<Math.abs(d-A)/4e3?(h=S,g=!1):(h=Math.min(S,k),g=!0),f.type==="date"&&h>w){var E=h===T?1:6,L=h===T?"M12":"M1";return function(O,P){var F=f.c2d(O,T,m),U=F.indexOf("-",E);U>0&&(F=F.substr(0,U));var I=f.d2c(F,0,m);if(I<O){var N=t(I,L,!1,m);(I+N)/2<O+l&&(I=N)}return P&&g?t(I,L,!0,m):I}}return function(O,P){var F=h*Math.round(O/h);return F+h/10<O&&F+.9*h<O+l&&(F+=h),P&&g&&(F-=h),F}}},35852:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(24040),w=e(54460),b=e(84664),c=e(16964),o=e(10648),t=e(2e3),i=e(67712);function n(a,s,l,u,p){var f,m,h,g,v,x,y,A=u+"bins",d=a._fullLayout,S=s["_"+u+"bingroup"],k=d._histogramBinOpts[S],E=d.barmode==="overlay",L=function(pe){return l.r2c(pe,0,g)},O=function(pe){return l.c2r(pe,0,g)},P=l.type==="date"?function(pe){return pe||pe===0?T.cleanDate(pe,null,g):null}:function(pe){return _(pe)?Number(pe):null};function F(pe,ge,ke){ge[pe+"Found"]?(ge[pe]=P(ge[pe]),ge[pe]===null&&(ge[pe]=ke[pe])):(x[pe]=ge[pe]=ke[pe],T.nestedProperty(m[0],A+"."+pe).set(ke[pe]))}if(s["_"+u+"autoBinFinished"])delete s["_"+u+"autoBinFinished"];else{m=k.traces;var U=[],I=!0,N=!1,W=!1;for(f=0;f<m.length;f++)if((h=m[f]).visible){var B=k.dirs[f];v=h["_"+B+"pos0"]=l.makeCalcdata(h,B),U=T.concat(U,v),delete h["_"+u+"autoBinFinished"],s.visible===!0&&(I?I=!1:(delete h._autoBin,h["_"+u+"autoBinFinished"]=1),r.traceIs(h,"2dMap")&&(N=!0),h.type==="histogram2dcontour"&&(W=!0))}g=m[0][u+"calendar"];var V=w.autoBin(U,l,k.nbins,N,g,k.sizeFound&&k.size),q=m[0]._autoBin={};if(x=q[k.dirs[0]]={},W&&(k.size||(V.start=O(w.tickIncrement(L(V.start),V.size,!0,g))),k.end===void 0&&(V.end=O(w.tickIncrement(L(V.end),V.size,!1,g)))),E&&!r.traceIs(s,"2dMap")&&V._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&s.bingroup===""&&s.xbins===void 0){if(p)return[V,v,!0];V=function(pe,ge,ke,Ce,de){var ae,re,he,Se=pe._fullLayout,xe=function(Je,rt){for(var ot=rt.xaxis,yt=rt.yaxis,_t=rt.orientation,mt=[],tt=Je._fullData,Qe=0;Qe<tt.length;Qe++){var Dt=tt[Qe];Dt.type==="histogram"&&Dt.visible===!0&&Dt.orientation===_t&&Dt.xaxis===ot&&Dt.yaxis===yt&&mt.push(Dt)}return mt}(pe,ge),Te=!1,Ae=1/0,Pe=[ge];for(ae=0;ae<xe.length;ae++)if((re=xe[ae])===ge)Te=!0;else if(Te){var De=n(pe,re,ke,Ce,!0),ve=De[0],we=De[2];re["_"+Ce+"autoBinFinished"]=1,re["_"+Ce+"pos0"]=De[1],we?Pe.push(re):Ae=Math.min(Ae,ve.size)}else he=Se._histogramBinOpts[re["_"+Ce+"bingroup"]],Ae=Math.min(Ae,he.size||re[de].size);var Ee=new Array(Pe.length);for(ae=0;ae<Pe.length;ae++)for(var Fe=Pe[ae]["_"+Ce+"pos0"],Le=0;Le<Fe.length;Le++)if(Fe[Le]!==void 0){Ee[ae]=Fe[Le];break}for(isFinite(Ae)||(Ae=T.distinctVals(Ee).minDiff),ae=0;ae<Pe.length;ae++){var je=(re=Pe[ae])[Ce+"calendar"],Ge={start:ke.c2r(Ee[ae]-Ae/2,0,je),end:ke.c2r(Ee[ae]+Ae/2,0,je),size:Ae};re._input[de]=re[de]=Ge,(he=Se._histogramBinOpts[re["_"+Ce+"bingroup"]])&&T.extendFlat(he,Ge)}return ge[de]}(a,s,l,u,A)}(y=h.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?V.start=O(w.tickIncrement(L(V.start),V.size,!0,g)):V.end=O(w.tickIncrement(L(V.end),V.size,!1,g))),k.size=V.size,k.sizeFound||(x.size=V.size,T.nestedProperty(m[0],A+".size").set(V.size)),F("start",k,V),F("end",k,V)}v=s["_"+u+"pos0"],delete s["_"+u+"pos0"];var ne=s._input[A]||{},$=T.extendFlat({},k),K=k.start,ee=l.r2l(ne.start),J=ee!==void 0;if((k.startFound||J)&&ee!==l.r2l(K)){var Z=J?ee:T.aggNums(Math.min,null,v),te={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:k.size,tick0:K,calendar:g,range:[Z,w.tickIncrement(Z,k.size,!1,g)].map(l.l2r)},oe=w.tickFirst(te);oe>l.r2l(Z)&&(oe=w.tickIncrement(oe,k.size,!0,g)),$.start=l.l2r(oe),J||T.nestedProperty(s,A+".start").set($.start)}var se=k.end,ce=l.r2l(ne.end),ye=ce!==void 0;if((k.endFound||ye)&&ce!==l.r2l(se)){var me=ye?ce:T.aggNums(Math.max,null,v);$.end=l.l2r(me),ye||T.nestedProperty(s,A+".start").set($.end)}var fe="autobin"+u;return s._input[fe]===!1&&(s._input[A]=T.extendFlat({},s[A]||{}),delete s._input[fe],delete s[fe]),[$,v]}R.exports={calc:function(a,s){var l,u,p,f,m=[],h=[],g=s.orientation==="h",v=w.getFromId(a,g?s.yaxis:s.xaxis),x=g?"y":"x",y={x:"y",y:"x"}[x],A=s[x+"calendar"],d=s.cumulative,S=n(a,s,v,x),k=S[0],E=S[1],L=typeof k.size=="string",O=[],P=L?O:k,F=[],U=[],I=[],N=0,W=s.histnorm,B=s.histfunc,V=W.indexOf("density")!==-1;d.enabled&&V&&(W=W.replace(/ ?density$/,""),V=!1);var q,ne=B==="max"||B==="min"?null:0,$=c.count,K=o[W],ee=!1,J=function(re){return v.r2c(re,0,A)};for(T.isArrayOrTypedArray(s[y])&&B!=="count"&&(q=s[y],ee=B==="avg",$=c[B]),l=J(k.start),p=J(k.end)+(l-w.tickIncrement(l,k.size,!1,A))/1e6;l<p&&m.length<1e6&&(u=w.tickIncrement(l,k.size,!1,A),m.push((l+u)/2),h.push(ne),I.push([]),O.push(l),V&&F.push(1/(u-l)),ee&&U.push(0),!(u<=l));)l=u;O.push(l),L||v.type!=="date"||(P={start:J(P.start),end:J(P.end),size:P.size}),a._fullLayout._roundFnOpts||(a._fullLayout._roundFnOpts={});var Z=s["_"+x+"bingroup"],te={leftGap:1/0,rightGap:1/0};Z&&(a._fullLayout._roundFnOpts[Z]||(a._fullLayout._roundFnOpts[Z]=te),te=a._fullLayout._roundFnOpts[Z]);var oe,se=h.length,ce=!0,ye=te.leftGap,me=te.rightGap,fe={};for(l=0;l<E.length;l++){var pe=E[l];(f=T.findBin(pe,P))>=0&&f<se&&(N+=$(f,l,h,q,U),ce&&I[f].length&&pe!==E[I[f][0]]&&(ce=!1),I[f].push(l),fe[l]=f,ye=Math.min(ye,pe-O[f]),me=Math.min(me,O[f+1]-pe))}te.leftGap=ye,te.rightGap=me,ce||(oe=function(re,he){return function(){var Se=a._fullLayout._roundFnOpts[Z];return i(Se.leftGap,Se.rightGap,O,v,A)(re,he)}}),ee&&(N=t(h,U)),K&&K(h,N,F),d.enabled&&function(re,he,Se){var xe,Te,Ae;function Pe(ve){Ae=re[ve],re[ve]/=2}function De(ve){Te=re[ve],re[ve]=Ae+Te/2,Ae+=Te}if(Se==="half")if(he==="increasing")for(Pe(0),xe=1;xe<re.length;xe++)De(xe);else for(Pe(re.length-1),xe=re.length-2;xe>=0;xe--)De(xe);else if(he==="increasing"){for(xe=1;xe<re.length;xe++)re[xe]+=re[xe-1];Se==="exclude"&&(re.unshift(0),re.pop())}else{for(xe=re.length-2;xe>=0;xe--)re[xe]+=re[xe+1];Se==="exclude"&&(re.push(0),re.shift())}}(h,d.direction,d.currentbin);var ge=Math.min(m.length,h.length),ke=[],Ce=0,de=ge-1;for(l=0;l<ge;l++)if(h[l]){Ce=l;break}for(l=ge-1;l>=Ce;l--)if(h[l]){de=l;break}for(l=Ce;l<=de;l++)if(_(m[l])&&_(h[l])){var ae={p:m[l],s:h[l],b:0};d.enabled||(ae.pts=I[l],ce?ae.ph0=ae.ph1=I[l].length?E[I[l][0]]:m[l]:(s._computePh=!0,ae.ph0=oe(O[l]),ae.ph1=oe(O[l+1],!0))),ke.push(ae)}return ke.length===1&&(ke[0].width1=w.tickIncrement(ke[0].p,k.size,!1,A)-ke[0].p),b(ke,s),T.isArrayOrTypedArray(s.selectedpoints)&&T.tagSelected(ke,s,fe),ke},calcAllAutoBins:n}},73316:function(R){"use strict";R.exports={eventDataKeys:["binNumber"]}},80536:function(R,C,e){"use strict";var _=e(3400),T=e(79811),r=e(24040).traceIs,w=e(20011),b=e(31508).validateCornerradius,c=_.nestedProperty,o=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];R.exports=function(n,a){var s,l,u,p,f,m,h,g=a._histogramBinOpts={},v=[],x={},y=[];function A(ne,$){return _.coerce(s._input,s,s._module.attributes,ne,$)}function d(ne){return ne.orientation==="v"?"x":"y"}function S(ne,$,K){var ee=ne.uid+"__"+K;$||($=ee);var J=function(se,ce){return T.getFromTrace({_fullLayout:a},se,ce).type}(ne,K),Z=ne[K+"calendar"]||"",te=g[$],oe=!0;te&&(J===te.axType&&Z===te.calendar?(oe=!1,te.traces.push(ne),te.dirs.push(K)):($=ee,J!==te.axType&&_.warn(["Attempted to group the bins of trace",ne.index,"set on a","type:"+J,"axis","with bins on","type:"+te.axType,"axis."].join(" ")),Z!==te.calendar&&_.warn(["Attempted to group the bins of trace",ne.index,"set with a",Z,"calendar","with bins",te.calendar?"on a "+te.calendar+" calendar":"w/o a set calendar"].join(" ")))),oe&&(g[$]={traces:[ne],dirs:[K],axType:J,calendar:ne[K+"calendar"]||""}),ne["_"+K+"bingroup"]=$}for(f=0;f<n.length;f++)if(s=n[f],r(s,"histogram")){if(v.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,s.type==="histogram"){var k=A("marker.cornerradius",a.barcornerradius);s.marker&&(s.marker.cornerradius=b(k))}r(s,"2dMap")||w(s._input,s,a,A)}var E=a._alignmentOpts||{};for(f=0;f<v.length;f++){if(s=v[f],u="",!r(s,"2dMap")){if(p=d(s),a.barmode==="group"&&s.alignmentgroup){var L=s[p+"axis"],O=o(a,L)+s.orientation;(E[O]||{})[s.alignmentgroup]&&(u=O)}u||a.barmode==="overlay"||(u=o(a,s.xaxis)+o(a,s.yaxis)+d(s))}u?(x[u]||(x[u]=[]),x[u].push(s)):y.push(s)}for(u in x)if((l=x[u]).length!==1){var P=!1;for(l.length&&(s=l[0],P=A("bingroup")),u=P||u,f=0;f<l.length;f++){var F=(s=l[f])._input.bingroup;F&&F!==u&&_.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",F,"setting."].join(" ")),s.bingroup=u,S(s,u,d(s))}}else y.push(l[0]);for(f=0;f<y.length;f++){s=y[f];var U=A("bingroup");if(r(s,"2dMap"))for(h=0;h<2;h++){var I=A((p=i[h])+"bingroup",U?U+"__"+p:null);S(s,I,p)}else S(s,U,d(s))}for(u in g){var N=g[u];for(l=N.traces,m=0;m<t.length;m++){var W,B,V=t[m],q=V.name;if(q!=="nbins"||!N.sizeFound){for(f=0;f<l.length;f++){if(s=l[f],p=N.dirs[f],W=V.aStr[p],c(s._input,W).get()!==void 0){N[q]=A(W),N[q+"Found"]=!0;break}(B=(s._autoBin||{})[p]||{})[q]&&c(s,W).set(B[q])}if(q==="start"||q==="end")for(;f<l.length;f++)(s=l[f])["_"+p+"bingroup"]&&A(W,(B=(s._autoBin||{})[p]||{})[q]);q!=="nbins"||N.sizeFound||N.nbinsFound||(s=l[0],N[q]=A(W))}}}}},6616:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(76308),w=e(31508).handleText,b=e(55592),c=e(40196);R.exports=function(o,t,i,n){function a(x,y){return T.coerce(o,t,c,x,y)}var s=a("x"),l=a("y");a("cumulative.enabled")&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text");var u=a("textposition");w(o,t,n,a,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var p=a("orientation",l&&!s?"h":"v"),f=p==="v"?"x":"y",m=p==="v"?"y":"x",h=s&&l?Math.min(T.minRowLength(s)&&T.minRowLength(l)):T.minRowLength(t[f]||[]);if(h){t._length=h,_.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y"],n),t[m]&&a("histfunc"),a("histnorm"),a("autobin"+f),b(o,t,a,i,n),T.coerceSelectionMarkerOpacity(t,a);var g=(t.marker.line||{}).color,v=_.getComponentMethod("errorbars","supplyDefaults");v(o,t,g||r.defaultLine,{axis:"y"}),v(o,t,g||r.defaultLine,{axis:"x",inherit:"y"}),a("zorder")}else t.visible=!1}},84980:function(R){"use strict";R.exports=function(C,e,_,T,r){if(C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(C.z=e.zLabelVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),!(_.cumulative||{}).enabled){var w,b=Array.isArray(r)?T[0].pts[r[0]][r[1]]:T[r].pts;if(C.pointNumbers=b,C.binNumber=C.pointNumber,delete C.pointNumber,delete C.pointIndex,_._indexToPoints){w=[];for(var c=0;c<b.length;c++)w=w.concat(_._indexToPoints[b[c]])}else w=b;C.pointIndices=w}return C}},43339:function(R,C,e){"use strict";var _=e(63400).hoverPoints,T=e(54460).hoverLabelText;R.exports=function(r,w,b,c,o){var t=_(r,w,b,c,o);if(t){var i=(r=t[0]).cd[r.index],n=r.cd[0].trace;if(!n.cumulative.enabled){var a=n.orientation==="h"?"y":"x";r[a+"Label"]=T(r[a+"a"],[i.ph0,i.ph1],n[a+"hoverformat"])}return t}}},42600:function(R,C,e){"use strict";R.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(R){"use strict";R.exports={percent:function(C,e){for(var _=C.length,T=100/e,r=0;r<_;r++)C[r]*=T},probability:function(C,e){for(var _=C.length,T=0;T<_;T++)C[T]/=e},density:function(C,e,_,T){var r=C.length;T=T||1;for(var w=0;w<r;w++)C[w]*=_[w]*T},"probability density":function(C,e,_,T){var r=C.length;T&&(e/=T);for(var w=0;w<r;w++)C[w]*=_[w]/e}}},37008:function(R,C,e){"use strict";var _=e(40196),T=e(11120),r=e(83328),w=e(45464),b=e(29736).axisHoverFormat,c=e(21776).Ks,o=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;R.exports=i({x:_.x,y:_.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:T("x"),nbinsy:_.nbinsy,ybins:T("y"),autobinx:_.autobinx,autobiny:_.autobiny,bingroup:i({},_.bingroup,{}),xbingroup:i({},_.bingroup,{}),ybingroup:i({},_.bingroup,{}),xgap:r.xgap,ygap:r.ygap,zsmooth:r.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:c({},{keys:"z"}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:r.textfont,showlegend:i({},w.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(16964),w=e(10648),b=e(2e3),c=e(67712),o=e(35852).calcAllAutoBins;function t(a,s,l,u){var p,f=new Array(a);if(u)for(p=0;p<a;p++)f[p]=1/(s[p+1]-s[p]);else{var m=1/l;for(p=0;p<a;p++)f[p]=m}return f}function i(a,s){return{start:a(s.start),end:a(s.end),size:s.size}}function n(a,s,l,u,p,f){var m,h=a.length-1,g=new Array(h),v=c(l,u,a,p,f);for(m=0;m<h;m++){var x=(s||[])[m];g[m]=x===void 0?[v(a[m]),v(a[m+1],!0)]:[x,x]}return g}R.exports=function(a,s){var l,u,p,f,m=T.getFromId(a,s.xaxis),h=T.getFromId(a,s.yaxis),g=s.xcalendar,v=s.ycalendar,x=function(yt){return m.r2c(yt,0,g)},y=function(yt){return h.r2c(yt,0,v)},A=o(a,s,m,"x"),d=A[0],S=A[1],k=o(a,s,h,"y"),E=k[0],L=k[1],O=s._length;S.length>O&&S.splice(O,S.length-O),L.length>O&&L.splice(O,L.length-O);var P=[],F=[],U=[],I=typeof d.size=="string",N=typeof E.size=="string",W=[],B=[],V=I?W:d,q=N?B:E,ne=0,$=[],K=[],ee=s.histnorm,J=s.histfunc,Z=ee.indexOf("density")!==-1,te=J==="max"||J==="min"?null:0,oe=r.count,se=w[ee],ce=!1,ye=[],me=[],fe="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";fe&&J!=="count"&&(ce=J==="avg",oe=r[J]);var pe=d.size,ge=x(d.start),ke=x(d.end)+(ge-T.tickIncrement(ge,pe,!1,g))/1e6;for(l=ge;l<ke;l=T.tickIncrement(l,pe,!1,g))F.push(te),W.push(l),ce&&U.push(0);W.push(l);var Ce,de=F.length,ae=(l-ge)/de,re=(Ce=ge+ae/2,m.c2r(Ce,0,g)),he=E.size,Se=y(E.start),xe=y(E.end)+(Se-T.tickIncrement(Se,he,!1,v))/1e6;for(l=Se;l<xe;l=T.tickIncrement(l,he,!1,v)){P.push(F.slice()),B.push(l);var Te=new Array(de);for(u=0;u<de;u++)Te[u]=[];K.push(Te),ce&&$.push(U.slice())}B.push(l);var Ae=P.length,Pe=(l-Se)/Ae,De=function(yt){return h.c2r(yt,0,v)}(Se+Pe/2);Z&&(ye=t(F.length,V,ae,I),me=t(P.length,q,Pe,N)),I||m.type!=="date"||(V=i(x,V)),N||h.type!=="date"||(q=i(y,q));var ve=!0,we=!0,Ee=new Array(de),Fe=new Array(Ae),Le=1/0,je=1/0,Ge=1/0,Je=1/0;for(l=0;l<O;l++){var rt=S[l],ot=L[l];p=_.findBin(rt,V),f=_.findBin(ot,q),p>=0&&p<de&&f>=0&&f<Ae&&(ne+=oe(p,l,P[f],fe,$[f]),K[f][p].push(l),ve&&(Ee[p]===void 0?Ee[p]=rt:Ee[p]!==rt&&(ve=!1)),we&&(Fe[f]===void 0?Fe[f]=ot:Fe[f]!==ot&&(we=!1)),Le=Math.min(Le,rt-W[p]),je=Math.min(je,W[p+1]-rt),Ge=Math.min(Ge,ot-B[f]),Je=Math.min(Je,B[f+1]-ot))}if(ce)for(f=0;f<Ae;f++)ne+=b(P[f],$[f]);if(se)for(f=0;f<Ae;f++)se(P[f],ne,ye,me[f]);return{x:S,xRanges:n(W,ve&&Ee,Le,je,m,g),x0:re,dx:ae,y:L,yRanges:n(B,we&&Fe,Ge,Je,h,v),y0:De,dy:Pe,z:P,pts:K}}},99784:function(R,C,e){"use strict";var _=e(3400),T=e(56408),r=e(82748),w=e(27260),b=e(39096),c=e(37008);R.exports=function(o,t,i,n){function a(s,l){return _.coerce(o,t,c,s,l)}T(o,t,a,n),t.visible!==!1&&(r(o,t,a,n),w(o,t,n,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),b(a,n),a("xhoverformat"),a("yhoverformat"))}},59576:function(R,C,e){"use strict";var _=e(55512),T=e(54460).hoverLabelText;R.exports=function(r,w,b,c,o){var t=_(r,w,b,c,o);if(t){var i=(r=t[0]).index,n=i[0],a=i[1],s=r.cd[0],l=s.trace,u=s.xRanges[a],p=s.yRanges[n];return r.xLabel=T(r.xa,[u[0],u[1]],l.xhoverformat),r.yLabel=T(r.ya,[p[0],p[1]],l.yhoverformat),t}}},21536:function(R,C,e){"use strict";R.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(R,C,e){"use strict";var _=e(24040),T=e(3400);R.exports=function(r,w,b,c){var o=b("x"),t=b("y"),i=T.minRowLength(o),n=T.minRowLength(t);i&&n?(w._length=Math.min(i,n),_.getComponentMethod("calendars","handleTraceDefaults")(r,w,["x","y"],c),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):w.visible=!1}},81220:function(R,C,e){"use strict";var _=e(37008),T=e(67104),r=e(49084),w=e(29736).axisHoverFormat,b=e(92880).extendFlat;R.exports=b({x:_.x,y:_.y,z:_.z,marker:_.marker,histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:_.xbins,nbinsy:_.nbinsy,ybins:_.ybins,autobinx:_.autobinx,autobiny:_.autobiny,bingroup:_.bingroup,xbingroup:_.xbingroup,ybingroup:_.ybingroup,autocontour:T.autocontour,ncontours:T.ncontours,contours:T.contours,line:{color:T.line.color,width:b({},T.line.width,{dflt:.5}),dash:T.line.dash,smoothing:T.line.smoothing,editType:"plot"},xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z",1),hovertemplate:_.hovertemplate,texttemplate:T.texttemplate,textfont:T.textfont},r("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(R,C,e){"use strict";var _=e(3400),T=e(56408),r=e(84952),w=e(97680),b=e(39096),c=e(81220);R.exports=function(o,t,i,n){function a(s,l){return _.coerce(o,t,c,s,l)}T(o,t,a,n),t.visible!==!1&&(r(o,t,a,function(s){return _.coerce2(o,t,c,s)}),w(o,t,a,n),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(a,n))}},65664:function(R,C,e){"use strict";R.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(49084),w=e(86968).u,b=e(74996),c=e(424),o=e(40516),t=e(32984),i=e(92880).extendFlat,n=e(98192).c;R.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:o.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:c.marker.colors,line:c.marker.line,pattern:n,editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),leaf:c.leaf,pathbar:o.pathbar,text:b.text,textinfo:c.textinfo,texttemplate:T({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:c.hoverinfo,hovertemplate:_({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:o.outsidetextfont,textposition:o.textposition,sort:b.sort,root:c.root,domain:w({name:"icicle",trace:!0,editType:"calc"})}},59564:function(R,C,e){"use strict";var _=e(7316);C.name="icicle",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},73876:function(R,C,e){"use strict";var _=e(3776);C.r=function(T,r){return _.calc(T,r)},C.q=function(T){return _._runCrossTraceCalc("icicle",T)}},7045:function(R,C,e){"use strict";var _=e(3400),T=e(97376),r=e(76308),w=e(86968).Q,b=e(31508).handleText,c=e(78048).TEXTPAD,o=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;R.exports=function(a,s,l,u){function p(y,A){return _.coerce(a,s,T,y,A)}var f=p("labels"),m=p("parents");if(f&&f.length&&m&&m.length){var h=p("values");h&&h.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var g=p("text");p("texttemplate"),s.texttemplate||p("textinfo",_.isArrayOrTypedArray(g)?"text+label":"label"),p("hovertext"),p("hovertemplate");var v=p("pathbar.visible");b(a,s,u,p,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),o(a,s,u,p);var x=s._hasColorscale=i(a,"marker","colors")||(a.marker||{}).coloraxis;x&&n(a,s,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",x?1:.7),s._hovered={marker:{line:{width:2,color:r.contrast(u.paper_bgcolor)}}},v&&(p("pathbar.thickness",s.pathbar.textfont.size+2*c),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),w(s,u,p),s._length=null}else s.visible=!1}},67880:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(72736),b=e(25132),c=e(47192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,a=!1;R.exports=function(s,l,u,p,f){var m=f.width,h=f.height,g=f.viewX,v=f.viewY,x=f.pathSlice,y=f.toMoveInsideSlice,A=f.strTransform,d=f.hasTransition,S=f.handleSlicesExit,k=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,O=s._context.staticPlot,P=s._fullLayout,F=l[0].trace,U=F.textposition.indexOf("left")!==-1,I=F.textposition.indexOf("right")!==-1,N=F.textposition.indexOf("bottom")!==-1,W=b(u,[m,h],{flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,orientation:F.tiling.orientation,pad:{inner:F.tiling.pad},maxDepth:F._maxDepth}).descendants(),B=1/0,V=-1/0;W.forEach(function(ee){var J=ee.depth;J>=F._maxDepth?(ee.x0=ee.x1=(ee.x0+ee.x1)/2,ee.y0=ee.y1=(ee.y0+ee.y1)/2):(B=Math.min(B,J),V=Math.max(V,J))}),p=p.data(W,t.getPtId),F._maxVisibleLayers=isFinite(V)?V-B+1:0,p.enter().append("g").classed("slice",!0),S(p,a,{},[m,h],x),p.order();var q=null;if(d&&L){var ne=t.getPtId(L);p.each(function(ee){q===null&&t.getPtId(ee)===ne&&(q={x0:ee.x0,x1:ee.x1,y0:ee.y0,y1:ee.y1})})}var $=function(){return q||{x0:0,x1:m,y0:0,y1:h}},K=p;return d&&(K=K.transition().each("end",function(){var ee=_.select(this);t.setSliceCursor(ee,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(ee){ee._x0=g(ee.x0),ee._x1=g(ee.x1),ee._y0=v(ee.y0),ee._y1=v(ee.y1),ee._hoverX=g(ee.x1-F.tiling.pad),ee._hoverY=v(N?ee.y1-F.tiling.pad/2:ee.y0+F.tiling.pad/2);var J=_.select(this),Z=T.ensureSingle(J,"path","surface",function(ce){ce.style("pointer-events",O?"none":"all")});d?Z.transition().attrTween("d",function(ce){var ye=k(ce,a,$(),[m,h],{orientation:F.tiling.orientation,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1});return function(me){return x(ye(me))}}):Z.attr("d",x),J.call(i,u,s,l,{styleOne:c,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,s,{isTransitioning:s._transitioning}),Z.call(c,ee,F,s,{hovered:!1}),ee.x0===ee.x1||ee.y0===ee.y1?ee._text="":ee._text=n(ee,u,F,l,P)||"";var te=T.ensureSingle(J,"g","slicetext"),oe=T.ensureSingle(te,"text","",function(ce){ce.attr("data-notex",1)}),se=T.ensureUniformFontSize(s,t.determineTextFont(F,ee,P.font));oe.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":U?"start":"middle").call(r.font,se).call(w.convertToTspans,s),ee.textBB=r.bBox(oe.node()),ee.transform=y(ee,{fontSize:se.size}),ee.transform.fontSize=se.size,d?oe.transition().attrTween("transform",function(ce){var ye=E(ce,a,$(),[m,h]);return function(me){return A(ye(me))}}):oe.attr("transform",A(ee))}),q}},29044:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(R){"use strict";R.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(R,C,e){"use strict";var _=e(3400),T=e(90676);R.exports=function(r,w){function b(c,o){return _.coerce(r,w,T,c,o)}b("iciclecolorway",w.colorway),b("extendiciclecolors")}},25132:function(R,C,e){"use strict";var _=e(74148),T=e(83024);R.exports=function(r,w,b){var c=b.flipX,o=b.flipY,t=b.orientation==="h",i=b.maxDepth,n=w[0],a=w[1];i&&(n=(r.height+1)*w[0]/Math.min(r.height+1,i),a=(r.height+1)*w[1]/Math.min(r.height+1,i));var s=_.partition().padding(b.pad.inner).size(t?[w[1],n]:[w[0],a])(r);return(t||c||o)&&T(s,w,{swapXY:t,flipX:c,flipY:o}),s}},38364:function(R,C,e){"use strict";var _=e(95808),T=e(67880);R.exports=function(r,w,b,c){return _(r,w,b,c,{type:"icicle",drawDescendants:T})}},47192:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(3400),w=e(82744).resizeText,b=e(60404);function c(o,t,i,n){var a=t.data.data,s=!t.children,l=a.i,u=r.castOption(i,l,"marker.line.color")||T.defaultLine,p=r.castOption(i,l,"marker.line.width")||0;o.call(b,t,i,n).style("stroke-width",p).call(T.stroke,u).style("opacity",s?i.leaf.opacity:null)}R.exports={style:function(o){var t=o._fullLayout._iciclelayer.selectAll(".trace");w(o,t,"icicle"),t.each(function(i){var n=_.select(this),a=i[0].trace;n.style("opacity",a.opacity),n.selectAll("path.surface").each(function(s){_.select(this).call(c,s,a,o)})})},styleOne:c}},95188:function(R,C,e){"use strict";for(var _=e(45464),T=e(52904).zorder,r=e(21776).Ks,w=e(92880).extendFlat,b=e(47797).colormodel,c=["rgb","rgba","rgba256","hsl","hsla"],o=[],t=[],i=0;i<c.length;i++){var n=b[c[i]];o.push("For the `"+c[i]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+c[i]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}R.exports=w({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:c,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:w({},_.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:r({},{keys:["z","color","colormodel"]}),zorder:T,transforms:void 0})},93336:function(R,C,e){"use strict";var _=e(3400),T=e(47797),r=e(38248),w=e(54460),b=e(3400).maxRowLength,c=e(18712).i;function o(i,n,a,s){return function(l){return _.constrain((l-i)*n,a,s)}}function t(i,n){return function(a){return _.constrain(a,i,n)}}R.exports=function(i,n){var a,s;if(n._hasZ)a=n.z.length,s=b(n.z);else if(n._hasSource){var l=c(n.source);a=l.height,s=l.width}var u,p=w.getFromId(i,n.xaxis||"x"),f=w.getFromId(i,n.yaxis||"y"),m=p.d2c(n.x0)-n.dx/2,h=f.d2c(n.y0)-n.dy/2,g=[m,m+s*n.dx],v=[h,h+a*n.dy];if(p&&p.type==="log")for(u=0;u<s;u++)g.push(m+u*n.dx);if(f&&f.type==="log")for(u=0;u<a;u++)v.push(h+u*n.dy);return n._extremes[p._id]=w.findExtremes(p,g),n._extremes[f._id]=w.findExtremes(f,v),n._scaler=function(x){var y=T.colormodel[x.colormodel],A=(y.colormodel||x.colormodel).length;x._sArray=[];for(var d=0;d<A;d++)y.min[d]!==x.zmin[d]||y.max[d]!==x.zmax[d]?x._sArray.push(o(x.zmin[d],(y.max[d]-y.min[d])/(x.zmax[d]-x.zmin[d]),y.min[d],y.max[d])):x._sArray.push(t(y.min[d],y.max[d]));return function(S){for(var k=S.slice(0,A),E=0;E<A;E++){var L=k[E];if(!r(L))return!1;k[E]=x._sArray[E](L)}return k}}(n),[{x0:m,y0:h,z:n.z,w:s,h:a}]}},47797:function(R){"use strict";R.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(C){return C.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(C){return C.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(C){return C.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(C){var e=C.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(C){var e=C.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%",""]}}}},13188:function(R,C,e){"use strict";var _=e(3400),T=e(95188),r=e(47797),w=e(81792).IMAGE_URL_PREFIX;R.exports=function(b,c){function o(n,a){return _.coerce(b,c,T,n,a)}o("source"),c.source&&!c.source.match(w)&&delete c.source,c._hasSource=!!c.source;var t,i=o("z");c._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),c._hasZ||c._hasSource?(o("x0"),o("y0"),o("dx"),o("dy"),c._hasZ?(o("colormodel","rgb"),o("zmin",(t=r.colormodel[c.colormodel]).zminDflt||t.min),o("zmax",t.zmaxDflt||t.max)):c._hasSource&&(c.colormodel="rgba256",t=r.colormodel[c.colormodel],c.zmin=t.zminDflt,c.zmax=t.zmaxDflt),o("zsmooth"),o("text"),o("hovertext"),o("hovertemplate"),c._length=null,o("zorder")):c.visible=!1}},79972:function(R){"use strict";R.exports=function(C,e){return"xVal"in e&&(C.x=e.xVal),"yVal"in e&&(C.y=e.yVal),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C.color=e.color,C.colormodel=e.trace.colormodel,C.z||(C.z=e.color),C}},18712:function(R,C,e){"use strict";var _=e(19480),T=e(81792).IMAGE_URL_PREFIX,r=e(33576).Buffer;C.i=function(w){var b=w.replace(T,""),c=new r(b,"base64");return _(c)}},24892:function(R,C,e){"use strict";var _=e(93024),T=e(3400),r=T.isArrayOrTypedArray,w=e(47797);R.exports=function(b,c,o){var t=b.cd[0],i=t.trace,n=b.xa,a=b.ya;if(!(_.inbox(c-t.x0,c-(t.x0+t.w*i.dx),0)>0||_.inbox(o-t.y0,o-(t.y0+t.h*i.dy),0)>0)){var s,l=Math.floor((c-t.x0)/i.dx),u=Math.floor(Math.abs(o-t.y0)/i.dy);if(i._hasZ?s=t.z[u][l]:i._hasSource&&(s=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),s){var p,f=t.hi||i.hoverinfo;if(f){var m=f.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(p=!0)}var h,g=w.colormodel[i.colormodel],v=g.colormodel||i.colormodel,x=v.length,y=i._scaler(s),A=g.suffix,d=[];(i.hovertemplate||p)&&(d.push("["+[y[0]+A[0],y[1]+A[1],y[2]+A[2]].join(", ")),x===4&&d.push(", "+y[3]+A[3]),d.push("]"),d=d.join(""),b.extraText=v.toUpperCase()+": "+d),r(i.hovertext)&&r(i.hovertext[u])?h=i.hovertext[u][l]:r(i.text)&&r(i.text[u])&&(h=i.text[u][l]);var S=a.c2p(t.y0+(u+.5)*i.dy),k=t.x0+(l+.5)*i.dx,E=t.y0+(u+.5)*i.dy,L="["+s.slice(0,i.colormodel.length).join(", ")+"]";return[T.extendFlat(b,{index:[u,l],x0:n.c2p(t.x0+l*i.dx),x1:n.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:y,xVal:k,xLabelVal:k,yVal:E,yLabelVal:E,zLabelVal:L,text:h,hovertemplateLabels:{zLabel:L,colorLabel:d,"color[0]Label":y[0]+A[0],"color[1]Label":y[1]+A[1],"color[2]Label":y[2]+A[2],"color[3]Label":y[3]+A[3]}})]}}}},48928:function(R,C,e){"use strict";R.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.strTranslate,w=e(9616),b=e(47797),c=e(9188),o=e(2264).STYLE;R.exports=function(t,i,n,a){var s=i.xaxis,l=i.yaxis,u=!t._context._exportedPlot&&c();T.makeTraceGroups(a,n,"im").each(function(p){var f=_.select(this),m=p[0],h=m.trace,g=(h.zsmooth==="fast"||h.zsmooth===!1&&u)&&!h._hasZ&&h._hasSource&&s.type==="linear"&&l.type==="linear";h._realImage=g;var v,x,y,A,d,S,k=m.z,E=m.x0,L=m.y0,O=m.w,P=m.h,F=h.dx,U=h.dy;for(S=0;v===void 0&&S<O;)v=s.c2p(E+S*F),S++;for(S=O;x===void 0&&S>0;)x=s.c2p(E+S*F),S--;for(S=0;A===void 0&&S<P;)A=l.c2p(L+S*U),S++;for(S=P;d===void 0&&S>0;)d=l.c2p(L+S*U),S--;x<v&&(y=x,x=v,v=y),d<A&&(y=A,A=d,d=y),g||(v=Math.max(-.5*s._length,v),x=Math.min(1.5*s._length,x),A=Math.max(-.5*l._length,A),d=Math.min(1.5*l._length,d));var I=Math.round(x-v),N=Math.round(d-A);if(I<=0||N<=0)f.selectAll("image").data([]).exit().remove();else{var W=f.selectAll("image").data([p]);W.enter().append("svg:image").attr({xmlns:w.svg,preserveAspectRatio:"none"}),W.exit().remove();var B=h.zsmooth===!1?o:"";if(g){var V=T.simpleMap(s.range,s.r2l),q=T.simpleMap(l.range,l.r2l),ne=V[1]<V[0],$=q[1]>q[0];if(ne||$){var K=v+I/2,ee=A+N/2;B+="transform:"+r(K+"px",ee+"px")+"scale("+(ne?-1:1)+","+($?-1:1)+")"+r(-K+"px",-ee+"px")+";"}}W.attr("style",B);var J=new Promise(function(te){if(h._hasZ)te();else if(h._hasSource)if(h._canvas&&h._canvas.el.width===O&&h._canvas.el.height===P&&h._canvas.source===h.source)te();else{var oe=document.createElement("canvas");oe.width=O,oe.height=P;var se=oe.getContext("2d",{willReadFrequently:!0});h._image=h._image||new Image;var ce=h._image;ce.onload=function(){se.drawImage(ce,0,0),h._canvas={el:oe,source:h.source},te()},ce.setAttribute("src",h.source)}}).then(function(){var te,oe;if(h._hasZ)oe=Z(function(ce,ye){var me=k[ye][ce];return T.isTypedArray(me)&&(me=Array.from(me)),me}),te=oe.toDataURL("image/png");else if(h._hasSource)if(g)te=h.source;else{var se=h._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,O,P).data;oe=Z(function(ce,ye){var me=4*(ye*O+ce);return[se[me],se[me+1],se[me+2],se[me+3]]}),te=oe.toDataURL("image/png")}W.attr({"xlink:href":te,height:N,width:I,x:v,y:A})});t._promises.push(J)}function Z(te){var oe=document.createElement("canvas");oe.width=I,oe.height=N;var se,ce=oe.getContext("2d",{willReadFrequently:!0}),ye=function(he){return T.constrain(Math.round(s.c2p(E+he*F)-v),0,I)},me=function(he){return T.constrain(Math.round(l.c2p(L+he*U)-A),0,N)},fe=b.colormodel[h.colormodel],pe=fe.colormodel||h.colormodel,ge=fe.fmt;for(S=0;S<m.w;S++){var ke=ye(S),Ce=ye(S+1);if(Ce!==ke&&!isNaN(Ce)&&!isNaN(ke))for(var de=0;de<m.h;de++){var ae=me(de),re=me(de+1);re===ae||isNaN(re)||isNaN(ae)||!te(S,de)||(se=h._scaler(te(S,de)),ce.fillStyle=se?pe+"("+ge(se).join(",")+")":"rgba(0,0,0,0)",ce.fillRect(ke,ae,Ce-ke,re-ae))}}return oe}})}},28576:function(R,C,e){"use strict";var _=e(33428);R.exports=function(T){_.select(T).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}},89864:function(R,C,e){"use strict";var _=e(92880).extendFlat,T=e(92880).extendDeep,r=e(67824).overrideAll,w=e(25376),b=e(22548),c=e(86968).u,o=e(94724),t=e(31780).templatedArray,i=e(48164),n=e(29736).descriptionOnlyNumbers,a=w({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",T({},s,{range:l}));R.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:c({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:_({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:_({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:_({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:T({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:r({range:l,visible:_({},o.visible,{dflt:!0}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:_({},o.ticks,{dflt:"outside"}),ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:w({}),tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,separatethousands:o.separatethousands,exponentformat:o.exponentformat,minexponent:o.minexponent,showexponent:o.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:_({},s.line.color,{}),width:_({},s.line.width,{dflt:1}),editType:"plot"},thickness:_({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(R,C,e){"use strict";var _=e(7316);C.name="indicator",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},79136:function(R){"use strict";R.exports={calc:function(C,e){var _=[],T=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var r=e._lastValue,w=r;return e._hasDelta&&typeof e.delta.reference=="number"&&(w=e.delta.reference),_[0]={y:T,lastY:r,delta:T-w,relativeDelta:(T-w)/w},_}}},12096:function(R){"use strict";R.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(R,C,e){"use strict";var _=e(3400),T=e(89864),r=e(86968).Q,w=e(31780),b=e(51272),c=e(12096),o=e(26332),t=e(25404),i=e(95936),n=e(42568);function a(s,l){function u(p,f){return _.coerce(s,l,T.gauge.steps,p,f)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}R.exports={supplyDefaults:function(s,l,u,p){function f(F,U){return _.coerce(s,l,T,F,U)}r(l,p,f),f("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var m=f("value");l._range=[0,typeof m=="number"?1.5*m:1];var h,g,v=new Array(2);if(l._hasNumber){f("number.valueformat");var x=_.extendFlat({},p.font);x.size=void 0,_.coerceFont(f,"number.font",x),l.number.font.size===void 0&&(l.number.font.size=c.defaultNumberFontSize,v[0]=!0),f("number.prefix"),f("number.suffix"),h=l.number.font.size}if(l._hasDelta){var y=_.extendFlat({},p.font);y.size=void 0,_.coerceFont(f,"delta.font",y),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(h||c.defaultNumberFontSize),v[1]=!0),f("delta.reference",l.value),f("delta.relative"),f("delta.valueformat",l.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),f("delta.prefix"),f("delta.suffix"),g=l.delta.font.size}l._scaleNumbers=(!l._hasNumber||v[0])&&(!l._hasDelta||v[1])||!1;var A,d,S,k,E=_.extendFlat({},p.font);function L(F,U){return _.coerce(A,d,T.gauge,F,U)}function O(F,U){return _.coerce(S,k,T.gauge.axis,F,U)}if(E.size=.25*(h||g||c.defaultNumberFontSize),_.coerceFont(f,"title.font",E),f("title.text"),l._hasGauge){(A=s.gauge)||(A={}),d=w.newContainer(l,"gauge"),L("shape"),(l._isBullet=l.gauge.shape==="bullet")||f("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||f("align","center"),L("bgcolor",p.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",c.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(A,d,{name:"steps",handleItemDefaults:a}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),S={},A&&(S=A.axis||{}),k=w.newContainer(d,"axis"),O("visible"),l._range=O("range",l._range);var P={font:p.font,noAutotickangles:!0,outerTicks:!0,noTicklabelshift:!0,noTicklabelstandoff:!0};o(S,k,O,"linear"),n(S,k,O,"linear",P),i(S,k,O,"linear",P),t(S,k,O,P)}else f("title.align","center"),f("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(R,C,e){"use strict";var _=e(33428),T=e(67756).qy,r=e(67756).Gz,w=e(3400),b=w.strScale,c=w.strTranslate,o=w.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),n=e(12096),a=e(72736),s=e(54460),l=e(28336),u=e(37668),p=e(94724),f=e(76308),m={left:"start",center:"middle",right:"end"},h={left:0,center:.5,right:1},g=/[yzafpnµmkMGTPEZY]/;function v(k){return k&&k.duration>0}function x(k){k.each(function(E){f.stroke(_.select(this),E.line.color)}).each(function(E){f.fill(_.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function y(k,E,L){var O=k._fullLayout,P=w.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},E),F={type:"linear",_id:"x"+E._id},U={letter:"x",font:O.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function I(N,W){return w.coerce(P,F,p,N,W)}return l(P,F,I,U,O),u(P,F,I,U),F}function A(k,E,L){return[Math.min(E/k.width,L/k.height),k,E+"x"+L]}function d(k,E,L,O){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),F=_.select(P);return F.text(k).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",k).call(a.convertToTspans,O).call(i.font,E),i.bBox(F.node())}function S(k,E,L,O,P,F){var U="_cache"+E;k[U]&&k[U].key===P||(k[U]={key:P,value:L});var I=w.aggNums(F,null,[k[U].value,O],2);return k[U].value=I,I}R.exports=function(k,E,L,O){var P,F=k._fullLayout;v(L)&&O&&(P=O()),w.makeTraceGroups(F._indicatorlayer,E,"trace").each(function(U){var I,N,W,B,V,q=U[0].trace,ne=_.select(this),$=q._hasGauge,K=q._isAngular,ee=q._isBullet,J=q.domain,Z={w:F._size.w*(J.x[1]-J.x[0]),h:F._size.h*(J.y[1]-J.y[0]),l:F._size.l+F._size.w*J.x[0],r:F._size.r+F._size.w*(1-J.x[1]),t:F._size.t+F._size.h*(1-J.y[1]),b:F._size.b+F._size.h*J.y[0]},te=Z.l+Z.w/2,oe=Z.t+Z.h/2,se=Math.min(Z.w/2,Z.h),ce=n.innerRadius*se,ye=q.align||"center";if(N=oe,$){if(K&&(I=te,N=oe+se/2,W=function(ae){return function(re,he){return[he/Math.sqrt(re.width/2*(re.width/2)+re.height*re.height),re,he]}(ae,.9*ce)}),ee){var me=n.bulletPadding,fe=1-n.bulletNumberDomainSize+me;I=Z.l+(fe+(1-fe)*h[ye])*Z.w,W=function(ae){return A(ae,(n.bulletNumberDomainSize-me)*Z.w,Z.h)}}}else I=Z.l+h[ye]*Z.w,W=function(ae){return A(ae,Z.w,Z.h)};(function(ae,re,he,Se){var xe,Te,Ae,Pe=he[0].trace,De=Se.numbersX,ve=Se.numbersY,we=Pe.align||"center",Ee=m[we],Fe=Se.transitionOpts,Le=Se.onComplete,je=w.ensureSingle(re,"g","numbers"),Ge=[];Pe._hasNumber&&Ge.push("number"),Pe._hasDelta&&(Ge.push("delta"),Pe.delta.position==="left"&&Ge.reverse());var Je=je.selectAll("text").data(Ge);function rt(zt,pt,vt,We){if(!zt.match("s")||vt>=0==We>=0||pt(vt).slice(-1).match(g)||pt(We).slice(-1).match(g))return pt;var Ze=zt.slice().replace("s","f").replace(/\d+/,function(Xe){return parseInt(Xe)-1}),Ne=y(ae,{tickformat:Ze});return function(Xe){return Math.abs(Xe)<1?s.tickText(Ne,Xe).text:pt(Xe)}}Je.enter().append("text"),Je.attr("text-anchor",function(){return Ee}).attr("class",function(zt){return zt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Je.exit().remove();var ot,yt=Pe.mode+Pe.align;if(Pe._hasDelta&&(ot=function(){var zt=y(ae,{tickformat:Pe.delta.valueformat},Pe._range);zt.setScale(),s.prepTicks(zt);var pt=function(xt){return s.tickText(zt,xt).text},vt=Pe.delta.suffix,We=Pe.delta.prefix,Ze=function(xt){return Pe.delta.relative?xt.relativeDelta:xt.delta},Ne=function(xt,bt){return xt===0||typeof xt!="number"||isNaN(xt)?"-":(xt>0?Pe.delta.increasing.symbol:Pe.delta.decreasing.symbol)+We+bt(xt)+vt},Xe=function(xt){return xt.delta>=0?Pe.delta.increasing.color:Pe.delta.decreasing.color};Pe._deltaLastValue===void 0&&(Pe._deltaLastValue=Ze(he[0]));var st=je.select("text.delta");function lt(){st.text(Ne(Ze(he[0]),pt)).call(f.fill,Xe(he[0])).call(a.convertToTspans,ae)}return st.call(i.font,Pe.delta.font).call(f.fill,Xe({delta:Pe._deltaLastValue})),v(Fe)?st.transition().duration(Fe.duration).ease(Fe.easing).tween("text",function(){var xt=_.select(this),bt=Ze(he[0]),Ve=Pe._deltaLastValue,Be=rt(Pe.delta.valueformat,pt,Ve,bt),at=r(Ve,bt);return Pe._deltaLastValue=bt,function(ht){xt.text(Ne(at(ht),Be)),xt.call(f.fill,Xe({delta:at(ht)}))}}).each("end",function(){lt(),Le&&Le()}).each("interrupt",function(){lt(),Le&&Le()}):lt(),Te=d(Ne(Ze(he[0]),pt),Pe.delta.font,Ee,ae),st}(),yt+=Pe.delta.position+Pe.delta.font.size+Pe.delta.font.family+Pe.delta.valueformat,yt+=Pe.delta.increasing.symbol+Pe.delta.decreasing.symbol,Ae=Te),Pe._hasNumber&&(function(){var zt=y(ae,{tickformat:Pe.number.valueformat},Pe._range);zt.setScale(),s.prepTicks(zt);var pt=function(Xe){return s.tickText(zt,Xe).text},vt=Pe.number.suffix,We=Pe.number.prefix,Ze=je.select("text.number");function Ne(){var Xe=typeof he[0].y=="number"?We+pt(he[0].y)+vt:"-";Ze.text(Xe).call(i.font,Pe.number.font).call(a.convertToTspans,ae)}v(Fe)?Ze.transition().duration(Fe.duration).ease(Fe.easing).each("end",function(){Ne(),Le&&Le()}).each("interrupt",function(){Ne(),Le&&Le()}).attrTween("text",function(){var Xe=_.select(this),st=r(he[0].lastY,he[0].y);Pe._lastValue=he[0].y;var lt=rt(Pe.number.valueformat,pt,he[0].lastY,he[0].y);return function(xt){Xe.text(We+lt(st(xt))+vt)}}):Ne(),xe=d(We+pt(he[0].y)+vt,Pe.number.font,Ee,ae)}(),yt+=Pe.number.font.size+Pe.number.font.family+Pe.number.valueformat+Pe.number.suffix+Pe.number.prefix,Ae=xe),Pe._hasDelta&&Pe._hasNumber){var _t,mt,tt=[(xe.left+xe.right)/2,(xe.top+xe.bottom)/2],Qe=[(Te.left+Te.right)/2,(Te.top+Te.bottom)/2],Dt=.75*Pe.delta.font.size;Pe.delta.position==="left"&&(_t=S(Pe,"deltaPos",0,-1*(xe.width*h[Pe.align]+Te.width*(1-h[Pe.align])+Dt),yt,Math.min),mt=tt[1]-Qe[1],Ae={width:xe.width+Te.width+Dt,height:Math.max(xe.height,Te.height),left:Te.left+_t,right:xe.right,top:Math.min(xe.top,Te.top+mt),bottom:Math.max(xe.bottom,Te.bottom+mt)}),Pe.delta.position==="right"&&(_t=S(Pe,"deltaPos",0,xe.width*(1-h[Pe.align])+Te.width*h[Pe.align]+Dt,yt,Math.max),mt=tt[1]-Qe[1],Ae={width:xe.width+Te.width+Dt,height:Math.max(xe.height,Te.height),left:xe.left,right:Te.right+_t,top:Math.min(xe.top,Te.top+mt),bottom:Math.max(xe.bottom,Te.bottom+mt)}),Pe.delta.position==="bottom"&&(_t=null,mt=Te.height,Ae={width:Math.max(xe.width,Te.width),height:xe.height+Te.height,left:Math.min(xe.left,Te.left),right:Math.max(xe.right,Te.right),top:xe.bottom-xe.height,bottom:xe.bottom+Te.height}),Pe.delta.position==="top"&&(_t=null,mt=xe.top,Ae={width:Math.max(xe.width,Te.width),height:xe.height+Te.height,left:Math.min(xe.left,Te.left),right:Math.max(xe.right,Te.right),top:xe.bottom-xe.height-Te.height,bottom:xe.bottom}),ot.attr({dx:_t,dy:mt})}(Pe._hasNumber||Pe._hasDelta)&&je.attr("transform",function(){var zt=Se.numbersScaler(Ae);yt+=zt[2];var pt,vt=S(Pe,"numbersScale",1,zt[0],yt,Math.min);Pe._scaleNumbers||(vt=1),pt=Pe._isAngular?ve-vt*Ae.bottom:ve-vt*(Ae.top+Ae.bottom)/2,Pe._numbersTop=vt*Ae.top+pt;var We=Ae[we];we==="center"&&(We=(Ae.left+Ae.right)/2);var Ze=De-vt*We;return Ze=S(Pe,"numbersTranslate",0,Ze,yt,Math.max),c(Ze,pt)+b(vt)})})(k,ne,U,{numbersX:I,numbersY:N,numbersScaler:W,transitionOpts:L,onComplete:P}),$&&(B={range:q.gauge.axis.range,color:q.gauge.bgcolor,line:{color:q.gauge.bordercolor,width:0},thickness:1},V={range:q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:q.gauge.bordercolor,width:q.gauge.borderwidth},thickness:1});var pe=ne.selectAll("g.angular").data(K?U:[]);pe.exit().remove();var ge=ne.selectAll("g.angularaxis").data(K?U:[]);ge.exit().remove(),K&&function(ae,re,he,Se){var xe,Te,Ae,Pe,De=he[0].trace,ve=Se.size,we=Se.radius,Ee=Se.innerRadius,Fe=Se.gaugeBg,Le=Se.gaugeOutline,je=[ve.l+ve.w/2,ve.t+ve.h/2+we/2],Ge=Se.gauge,Je=Se.layer,rt=Se.transitionOpts,ot=Se.onComplete,yt=Math.PI/2;function _t(ht){var dt=De.gauge.axis.range[0],it=(ht-dt)/(De.gauge.axis.range[1]-dt)*Math.PI-yt;return it<-yt?-yt:it>yt?yt:it}function mt(ht){return _.svg.arc().innerRadius((Ee+we)/2-ht/2*(we-Ee)).outerRadius((Ee+we)/2+ht/2*(we-Ee)).startAngle(-yt)}function tt(ht){ht.attr("d",function(dt){return mt(dt.thickness).startAngle(_t(dt.range[0])).endAngle(_t(dt.range[1]))()})}Ge.enter().append("g").classed("angular",!0),Ge.attr("transform",c(je[0],je[1])),Je.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Je.selectAll("g.xangularaxistick,path,text").remove(),(xe=y(ae,De.gauge.axis)).type="linear",xe.range=De.gauge.axis.range,xe._id="xangularaxis",xe.ticklabeloverflow="allow",xe.setScale();var Qe=function(ht){return(xe.range[0]-ht.x)/(xe.range[1]-xe.range[0])*Math.PI+Math.PI},Dt={},zt=s.makeLabelFns(xe,0).labelStandoff;Dt.xFn=function(ht){var dt=Qe(ht);return Math.cos(dt)*zt},Dt.yFn=function(ht){var dt=Qe(ht),it=Math.sin(dt)>0?.2:1;return-Math.sin(dt)*(zt+ht.fontSize*it)+Math.abs(Math.cos(dt))*(ht.fontSize*t)},Dt.anchorFn=function(ht){var dt=Qe(ht),it=Math.cos(dt);return Math.abs(it)<.1?"middle":it>0?"start":"end"},Dt.heightFn=function(ht,dt,it){var kt=Qe(ht);return-.5*(1+Math.sin(kt))*it};var pt=function(ht){return c(je[0]+we*Math.cos(ht),je[1]-we*Math.sin(ht))};if(Ae=function(ht){return pt(Qe(ht))},Te=s.calcTicks(xe),Pe=s.getTickSigns(xe)[2],xe.visible){Pe=xe.ticks==="inside"?-1:1;var vt=(xe.linewidth||1)/2;s.drawTicks(ae,xe,{vals:Te,layer:Je,path:"M"+Pe*vt+",0h"+Pe*xe.ticklen,transFn:function(ht){var dt=Qe(ht);return pt(dt)+"rotate("+-o(dt)+")"}}),s.drawLabels(ae,xe,{vals:Te,layer:Je,transFn:Ae,labelFns:Dt})}var We=[Fe].concat(De.gauge.steps),Ze=Ge.selectAll("g.bg-arc").data(We);Ze.enter().append("g").classed("bg-arc",!0).append("path"),Ze.select("path").call(tt).call(x),Ze.exit().remove();var Ne=mt(De.gauge.bar.thickness),Xe=Ge.selectAll("g.value-arc").data([De.gauge.bar]);Xe.enter().append("g").classed("value-arc",!0).append("path");var st,lt,xt,bt=Xe.select("path");v(rt)?(bt.transition().duration(rt.duration).ease(rt.easing).each("end",function(){ot&&ot()}).each("interrupt",function(){ot&&ot()}).attrTween("d",(st=Ne,lt=_t(he[0].lastY),xt=_t(he[0].y),function(){var ht=T(lt,xt);return function(dt){return st.endAngle(ht(dt))()}})),De._lastValue=he[0].y):bt.attr("d",typeof he[0].y=="number"?Ne.endAngle(_t(he[0].y)):"M0,0Z"),bt.call(x),Xe.exit().remove(),We=[];var Ve=De.gauge.threshold.value;(Ve||Ve===0)&&We.push({range:[Ve,Ve],color:De.gauge.threshold.color,line:{color:De.gauge.threshold.line.color,width:De.gauge.threshold.line.width},thickness:De.gauge.threshold.thickness});var Be=Ge.selectAll("g.threshold-arc").data(We);Be.enter().append("g").classed("threshold-arc",!0).append("path"),Be.select("path").call(tt).call(x),Be.exit().remove();var at=Ge.selectAll("g.gauge-outline").data([Le]);at.enter().append("g").classed("gauge-outline",!0).append("path"),at.select("path").call(tt).call(x),at.exit().remove()}(k,0,U,{radius:se,innerRadius:ce,gauge:pe,layer:ge,size:Z,gaugeBg:B,gaugeOutline:V,transitionOpts:L,onComplete:P});var ke=ne.selectAll("g.bullet").data(ee?U:[]);ke.exit().remove();var Ce=ne.selectAll("g.bulletaxis").data(ee?U:[]);Ce.exit().remove(),ee&&function(ae,re,he,Se){var xe,Te,Ae,Pe,De,ve=he[0].trace,we=Se.gauge,Ee=Se.layer,Fe=Se.gaugeBg,Le=Se.gaugeOutline,je=Se.size,Ge=ve.domain,Je=Se.transitionOpts,rt=Se.onComplete;we.enter().append("g").classed("bullet",!0),we.attr("transform",c(je.l,je.t)),Ee.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ee.selectAll("g.xbulletaxistick,path,text").remove();var ot=je.h,yt=ve.gauge.bar.thickness*ot,_t=Ge.x[0],mt=Ge.x[0]+(Ge.x[1]-Ge.x[0])*(ve._hasNumber||ve._hasDelta?1-n.bulletNumberDomainSize:1);function tt(Ze){Ze.attr("width",function(Ne){return Math.max(0,xe.c2p(Ne.range[1])-xe.c2p(Ne.range[0]))}).attr("x",function(Ne){return xe.c2p(Ne.range[0])}).attr("y",function(Ne){return .5*(1-Ne.thickness)*ot}).attr("height",function(Ne){return Ne.thickness*ot})}(xe=y(ae,ve.gauge.axis))._id="xbulletaxis",xe.domain=[_t,mt],xe.setScale(),Te=s.calcTicks(xe),Ae=s.makeTransTickFn(xe),Pe=s.getTickSigns(xe)[2],De=je.t+je.h,xe.visible&&(s.drawTicks(ae,xe,{vals:xe.ticks==="inside"?s.clipEnds(xe,Te):Te,layer:Ee,path:s.makeTickPath(xe,De,Pe),transFn:Ae}),s.drawLabels(ae,xe,{vals:Te,layer:Ee,transFn:Ae,labelFns:s.makeLabelFns(xe,De)}));var Qe=[Fe].concat(ve.gauge.steps),Dt=we.selectAll("g.bg-bullet").data(Qe);Dt.enter().append("g").classed("bg-bullet",!0).append("rect"),Dt.select("rect").call(tt).call(x),Dt.exit().remove();var zt=we.selectAll("g.value-bullet").data([ve.gauge.bar]);zt.enter().append("g").classed("value-bullet",!0).append("rect"),zt.select("rect").attr("height",yt).attr("y",(ot-yt)/2).call(x),v(Je)?zt.select("rect").transition().duration(Je.duration).ease(Je.easing).each("end",function(){rt&&rt()}).each("interrupt",function(){rt&&rt()}).attr("width",Math.max(0,xe.c2p(Math.min(ve.gauge.axis.range[1],he[0].y)))):zt.select("rect").attr("width",typeof he[0].y=="number"?Math.max(0,xe.c2p(Math.min(ve.gauge.axis.range[1],he[0].y))):0),zt.exit().remove();var pt=he.filter(function(){return ve.gauge.threshold.value||ve.gauge.threshold.value===0}),vt=we.selectAll("g.threshold-bullet").data(pt);vt.enter().append("g").classed("threshold-bullet",!0).append("line"),vt.select("line").attr("x1",xe.c2p(ve.gauge.threshold.value)).attr("x2",xe.c2p(ve.gauge.threshold.value)).attr("y1",(1-ve.gauge.threshold.thickness)/2*ot).attr("y2",(1-(1-ve.gauge.threshold.thickness)/2)*ot).call(f.stroke,ve.gauge.threshold.line.color).style("stroke-width",ve.gauge.threshold.line.width),vt.exit().remove();var We=we.selectAll("g.gauge-outline").data([Le]);We.enter().append("g").classed("gauge-outline",!0).append("rect"),We.select("rect").call(tt).call(x),We.exit().remove()}(k,0,U,{gauge:ke,layer:Ce,size:Z,gaugeBg:B,gaugeOutline:V,transitionOpts:L,onComplete:P});var de=ne.selectAll("text.title").data(U);de.exit().remove(),de.enter().append("text").classed("title",!0),de.attr("text-anchor",function(){return ee?m.right:m[q.title.align]}).text(q.title.text).call(i.font,q.title.font).call(a.convertToTspans,k),de.attr("transform",function(){var ae,re=Z.l+Z.w*h[q.title.align],he=n.titlePadding,Se=i.bBox(de.node());return $?(K&&(ae=q.gauge.axis.visible?i.bBox(ge.node()).top-he-Se.bottom:Z.t+Z.h/2-se/2-Se.bottom-he),ee&&(ae=N-(Se.top+Se.bottom)/2,re=Z.l-n.bulletPadding*Z.w)):ae=q._numbersTop-he-Se.bottom,c(re,ae)})})}},50048:function(R,C,e){"use strict";var _=e(49084),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(52948),b=e(45464),c=e(92880).extendFlat,o=e(67824).overrideAll,t=R.exports=o(c({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:r(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),valuehoverformat:T("value",1),showlegend:c({},b.showlegend,{dflt:!1})},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,lightposition:w.lightposition,lighting:w.lighting,flatshading:w.flatshading,contour:w.contour,hoverinfo:c({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(R,C,e){"use strict";var _=e(47128),T=e(3832).processGrid,r=e(3832).filter;R.exports=function(w,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=r(b.x,b._len),b._y=r(b.y,b._len),b._z=r(b.z,b._len),b._value=r(b.value,b._len);var c=T(b);b._gridFill=c.fill,b._Xs=c.Xs,b._Ys=c.Ys,b._Zs=c.Zs,b._len=c.len;for(var o=1/0,t=-1/0,i=0;i<b._len;i++){var n=b._value[i];o=Math.min(o,n),t=Math.max(t,n)}b._minValues=o,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?o:b.isomin,b._vMax=b.isomax===void 0||b.isomax===null?t:b.isomax,_(w,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(R,C,e){"use strict";var _=e(67792).gl_mesh3d,T=e(33040).parseColorScale,r=e(3400).isArrayOrTypedArray,w=e(43080),b=e(8932).extractOpts,c=e(52094),o=function(s,l){for(var u=l.length-1;u>0;u--){var p=Math.min(l[u],l[u-1]),f=Math.max(l[u],l[u-1]);if(f>p&&p<s&&s<=f)return{id:u,distRatio:(f-s)/(f-p)}}return{id:0,distRatio:0}};function t(s,l,u){this.scene=s,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(s){if(s.object===this.mesh){var l=s.data.index,u=this.data._meshX[l],p=this.data._meshY[l],f=this.data._meshZ[l],m=this.data._Ys.length,h=this.data._Zs.length,g=o(u,this.data._Xs).id,v=o(p,this.data._Ys).id,x=o(f,this.data._Zs).id,y=s.index=x+h*v+h*m*g;s.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var A=this.data.hovertext||this.data.text;return r(A)&&A[y]!==void 0?s.textLabel=A[y]:A&&(s.textLabel=A),!0}},i.update=function(s){var l=this.scene,u=l.fullSceneLayout;function p(h,g,v,x){return g.map(function(y){return h.d2l(y,0,x)*v})}this.data=a(s);var f={positions:c(p(u.xaxis,s._meshX,l.dataScale[0],s.xcalendar),p(u.yaxis,s._meshY,l.dataScale[1],s.ycalendar),p(u.zaxis,s._meshZ,l.dataScale[2],s.zcalendar)),cells:c(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:w(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},m=b(s);f.vertexIntensity=s._meshIntensity,f.vertexIntensityBounds=[m.min,m.max],f.colormap=T(s),this.mesh.update(f)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function a(s){s._meshI=[],s._meshJ=[],s._meshK=[];var l,u,p,f,m,h,g,v=s.surface.show,x=s.spaceframe.show,y=s.surface.fill,A=s.spaceframe.fill,d=!1,S=!1,k=0,E=s._Xs,L=s._Ys,O=s._Zs,P=E.length,F=L.length,U=O.length,I=n.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Ee,Fe,Le){switch(I){case 5:return Le+U*Fe+U*F*Ee;case 4:return Le+U*Ee+U*P*Fe;case 3:return Fe+F*Le+F*U*Ee;case 2:return Fe+F*Ee+F*P*Le;case 1:return Ee+P*Le+P*U*Fe;default:return Ee+P*Fe+P*F*Le}},W=s._minValues,B=s._maxValues,V=s._vMin,q=s._vMax;function ne(Ee,Fe,Le){for(var je=h.length,Ge=u;Ge<je;Ge++)if(Ee===p[Ge]&&Fe===f[Ge]&&Le===m[Ge])return Ge;return-1}function $(){u=l}function K(){p=[],f=[],m=[],h=[],l=0,$()}function ee(Ee,Fe,Le,je){return p.push(Ee),f.push(Fe),m.push(Le),h.push(je),++l-1}function J(Ee,Fe,Le){for(var je=[],Ge=0;Ge<Ee.length;Ge++)je[Ge]=Ee[Ge]*(1-Le)+Le*Fe[Ge];return je}function Z(Ee){g=Ee}function te(Ee,Fe){return Ee==="all"||Ee===null||Ee.indexOf(Fe)>-1}function oe(Ee,Fe){return Ee===null?Fe:Ee}function se(Ee,Fe,Le){$();var je,Ge,Je,rt=[Fe],ot=[Le];if(g>=1)rt=[Fe],ot=[Le];else if(g>0){var yt=function(We,Ze){var Ne=We[0],Xe=We[1],st=We[2],lt=function(it,kt,Tt){for(var St=[],wt=0;wt<it.length;wt++)St[wt]=(it[wt]+kt[wt]+Tt[wt])/3;return St}(Ne,Xe,st),xt=Math.sqrt(1-g),bt=J(lt,Ne,xt),Ve=J(lt,Xe,xt),Be=J(lt,st,xt),at=Ze[0],ht=Ze[1],dt=Ze[2];return{xyzv:[[Ne,Xe,Ve],[Ve,bt,Ne],[Xe,st,Be],[Be,Ve,Xe],[st,Ne,bt],[bt,Be,st]],abc:[[at,ht,-1],[-1,-1,at],[ht,dt,-1],[-1,-1,ht],[dt,at,-1],[-1,-1,dt]]}}(Fe,Le);rt=yt.xyzv,ot=yt.abc}for(var _t=0;_t<rt.length;_t++){Fe=rt[_t],Le=ot[_t];for(var mt=[],tt=0;tt<3;tt++){var Qe=Fe[tt][0],Dt=Fe[tt][1],zt=Fe[tt][2],pt=Fe[tt][3],vt=Le[tt]>-1?Le[tt]:ne(Qe,Dt,zt);mt[tt]=vt>-1?vt:ee(Qe,Dt,zt,oe(Ee,pt))}je=mt[0],Ge=mt[1],Je=mt[2],s._meshI.push(je),s._meshJ.push(Ge),s._meshK.push(Je),++k}}function ce(Ee,Fe,Le,je){var Ge=Ee[3];Ge<Le&&(Ge=Le),Ge>je&&(Ge=je);for(var Je=(Ee[3]-Ge)/(Ee[3]-Fe[3]+1e-9),rt=[],ot=0;ot<4;ot++)rt[ot]=(1-Je)*Ee[ot]+Je*Fe[ot];return rt}function ye(Ee,Fe,Le){return Ee>=Fe&&Ee<=Le}function me(Ee){var Fe=.001*(q-V);return Ee>=V-Fe&&Ee<=q+Fe}function fe(Ee){for(var Fe=[],Le=0;Le<4;Le++){var je=Ee[Le];Fe.push([s._x[je],s._y[je],s._z[je],s._value[je]])}return Fe}var pe=3;function ge(Ee,Fe,Le,je,Ge,Je){Je||(Je=1),Le=[-1,-1,-1];var rt=!1,ot=[ye(Fe[0][3],je,Ge),ye(Fe[1][3],je,Ge),ye(Fe[2][3],je,Ge)];if(!ot[0]&&!ot[1]&&!ot[2])return!1;var yt=function(mt,tt,Qe){return me(tt[0][3])&&me(tt[1][3])&&me(tt[2][3])?(se(mt,tt,Qe),!0):Je<pe&&ge(mt,tt,Qe,V,q,++Je)};if(ot[0]&&ot[1]&&ot[2])return yt(Ee,Fe,Le)||rt;var _t=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(mt){if(ot[mt[0]]&&ot[mt[1]]&&!ot[mt[2]]){var tt=Fe[mt[0]],Qe=Fe[mt[1]],Dt=Fe[mt[2]],zt=ce(Dt,tt,je,Ge),pt=ce(Dt,Qe,je,Ge);rt=yt(Ee,[pt,zt,tt],[-1,-1,Le[mt[0]]])||rt,rt=yt(Ee,[tt,Qe,pt],[Le[mt[0]],Le[mt[1]],-1])||rt,_t=!0}}),_t||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(mt){if(ot[mt[0]]&&!ot[mt[1]]&&!ot[mt[2]]){var tt=Fe[mt[0]],Qe=Fe[mt[1]],Dt=Fe[mt[2]],zt=ce(Qe,tt,je,Ge),pt=ce(Dt,tt,je,Ge);rt=yt(Ee,[pt,zt,tt],[-1,-1,Le[mt[0]]])||rt,_t=!0}}),rt}function ke(Ee,Fe,Le,je){var Ge=!1,Je=fe(Fe),rt=[ye(Je[0][3],Le,je),ye(Je[1][3],Le,je),ye(Je[2][3],Le,je),ye(Je[3][3],Le,je)];if(!(rt[0]||rt[1]||rt[2]||rt[3]))return Ge;if(rt[0]&&rt[1]&&rt[2]&&rt[3])return S&&(Ge=function(yt,_t,mt){var tt=function(Qe,Dt,zt){se(yt,[_t[Qe],_t[Dt],_t[zt]],[mt[Qe],mt[Dt],mt[zt]])};tt(0,1,2),tt(3,0,1),tt(2,3,0),tt(1,2,3)}(Ee,Je,Fe)||Ge),Ge;var ot=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(yt){if(rt[yt[0]]&&rt[yt[1]]&&rt[yt[2]]&&!rt[yt[3]]){var _t=Je[yt[0]],mt=Je[yt[1]],tt=Je[yt[2]],Qe=Je[yt[3]];if(S)Ge=se(Ee,[_t,mt,tt],[Fe[yt[0]],Fe[yt[1]],Fe[yt[2]]])||Ge;else{var Dt=ce(Qe,_t,Le,je),zt=ce(Qe,mt,Le,je),pt=ce(Qe,tt,Le,je);Ge=se(null,[Dt,zt,pt],[-1,-1,-1])||Ge}ot=!0}}),ot||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(yt){if(rt[yt[0]]&&rt[yt[1]]&&!rt[yt[2]]&&!rt[yt[3]]){var _t=Je[yt[0]],mt=Je[yt[1]],tt=Je[yt[2]],Qe=Je[yt[3]],Dt=ce(tt,_t,Le,je),zt=ce(tt,mt,Le,je),pt=ce(Qe,mt,Le,je),vt=ce(Qe,_t,Le,je);S?(Ge=se(Ee,[_t,vt,Dt],[Fe[yt[0]],-1,-1])||Ge,Ge=se(Ee,[mt,zt,pt],[Fe[yt[1]],-1,-1])||Ge):Ge=function(We,Ze,Ne){var Xe=function(st,lt,xt){se(null,[Ze[st],Ze[lt],Ze[xt]],[Ne[st],Ne[lt],Ne[xt]])};Xe(0,1,2),Xe(2,3,0)}(0,[Dt,zt,pt,vt],[-1,-1,-1,-1])||Ge,ot=!0}}),ot||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(yt){if(rt[yt[0]]&&!rt[yt[1]]&&!rt[yt[2]]&&!rt[yt[3]]){var _t=Je[yt[0]],mt=Je[yt[1]],tt=Je[yt[2]],Qe=Je[yt[3]],Dt=ce(mt,_t,Le,je),zt=ce(tt,_t,Le,je),pt=ce(Qe,_t,Le,je);S?(Ge=se(Ee,[_t,Dt,zt],[Fe[yt[0]],-1,-1])||Ge,Ge=se(Ee,[_t,zt,pt],[Fe[yt[0]],-1,-1])||Ge,Ge=se(Ee,[_t,pt,Dt],[Fe[yt[0]],-1,-1])||Ge):Ge=se(null,[Dt,zt,pt],[-1,-1,-1])||Ge,ot=!0}})),Ge}function Ce(Ee,Fe,Le,je,Ge,Je,rt,ot,yt,_t,mt){var tt=!1;return d&&(te(Ee,"A")&&(tt=ke(null,[Fe,Le,je,Je],_t,mt)||tt),te(Ee,"B")&&(tt=ke(null,[Le,je,Ge,yt],_t,mt)||tt),te(Ee,"C")&&(tt=ke(null,[Le,Je,rt,yt],_t,mt)||tt),te(Ee,"D")&&(tt=ke(null,[je,Je,ot,yt],_t,mt)||tt),te(Ee,"E")&&(tt=ke(null,[Le,je,Je,yt],_t,mt)||tt)),S&&(tt=ke(Ee,[Le,je,Je,yt],_t,mt)||tt),tt}function de(Ee,Fe,Le,je,Ge,Je,rt,ot){return[ot[0]===!0||ge(Ee,fe([Fe,Le,je]),[Fe,Le,je],Je,rt),ot[1]===!0||ge(Ee,fe([je,Ge,Fe]),[je,Ge,Fe],Je,rt)]}function ae(Ee,Fe,Le,je,Ge,Je,rt,ot,yt){return ot?de(Ee,Fe,Le,Ge,je,Je,rt,yt):de(Ee,Le,Ge,je,Fe,Je,rt,yt)}function re(Ee,Fe,Le,je,Ge,Je,rt){var ot,yt,_t,mt,tt=!1,Qe=function(){tt=ge(Ee,[ot,yt,_t],[-1,-1,-1],Ge,Je)||tt,tt=ge(Ee,[_t,mt,ot],[-1,-1,-1],Ge,Je)||tt},Dt=rt[0],zt=rt[1],pt=rt[2];return Dt&&(ot=J(fe([N(Fe,Le-0,je-0)])[0],fe([N(Fe-1,Le-0,je-0)])[0],Dt),yt=J(fe([N(Fe,Le-0,je-1)])[0],fe([N(Fe-1,Le-0,je-1)])[0],Dt),_t=J(fe([N(Fe,Le-1,je-1)])[0],fe([N(Fe-1,Le-1,je-1)])[0],Dt),mt=J(fe([N(Fe,Le-1,je-0)])[0],fe([N(Fe-1,Le-1,je-0)])[0],Dt),Qe()),zt&&(ot=J(fe([N(Fe-0,Le,je-0)])[0],fe([N(Fe-0,Le-1,je-0)])[0],zt),yt=J(fe([N(Fe-0,Le,je-1)])[0],fe([N(Fe-0,Le-1,je-1)])[0],zt),_t=J(fe([N(Fe-1,Le,je-1)])[0],fe([N(Fe-1,Le-1,je-1)])[0],zt),mt=J(fe([N(Fe-1,Le,je-0)])[0],fe([N(Fe-1,Le-1,je-0)])[0],zt),Qe()),pt&&(ot=J(fe([N(Fe-0,Le-0,je)])[0],fe([N(Fe-0,Le-0,je-1)])[0],pt),yt=J(fe([N(Fe-0,Le-1,je)])[0],fe([N(Fe-0,Le-1,je-1)])[0],pt),_t=J(fe([N(Fe-1,Le-1,je)])[0],fe([N(Fe-1,Le-1,je-1)])[0],pt),mt=J(fe([N(Fe-1,Le-0,je)])[0],fe([N(Fe-1,Le-0,je-1)])[0],pt),Qe()),tt}function he(Ee,Fe,Le,je,Ge,Je,rt,ot,yt,_t,mt,tt){var Qe=Ee;return tt?(d&&Ee==="even"&&(Qe=null),Ce(Qe,Fe,Le,je,Ge,Je,rt,ot,yt,_t,mt)):(d&&Ee==="odd"&&(Qe=null),Ce(Qe,yt,ot,rt,Je,Ge,je,Le,Fe,_t,mt))}function Se(Ee,Fe,Le,je,Ge){for(var Je=[],rt=0,ot=0;ot<Fe.length;ot++)for(var yt=Fe[ot],_t=1;_t<U;_t++)for(var mt=1;mt<F;mt++)Je.push(ae(Ee,N(yt,mt-1,_t-1),N(yt,mt-1,_t),N(yt,mt,_t-1),N(yt,mt,_t),Le,je,(yt+mt+_t)%2,Ge&&Ge[rt]?Ge[rt]:[])),rt++;return Je}function xe(Ee,Fe,Le,je,Ge){for(var Je=[],rt=0,ot=0;ot<Fe.length;ot++)for(var yt=Fe[ot],_t=1;_t<P;_t++)for(var mt=1;mt<U;mt++)Je.push(ae(Ee,N(_t-1,yt,mt-1),N(_t,yt,mt-1),N(_t-1,yt,mt),N(_t,yt,mt),Le,je,(_t+yt+mt)%2,Ge&&Ge[rt]?Ge[rt]:[])),rt++;return Je}function Te(Ee,Fe,Le,je,Ge){for(var Je=[],rt=0,ot=0;ot<Fe.length;ot++)for(var yt=Fe[ot],_t=1;_t<F;_t++)for(var mt=1;mt<P;mt++)Je.push(ae(Ee,N(mt-1,_t-1,yt),N(mt-1,_t,yt),N(mt,_t-1,yt),N(mt,_t,yt),Le,je,(mt+_t+yt)%2,Ge&&Ge[rt]?Ge[rt]:[])),rt++;return Je}function Ae(Ee,Fe,Le){for(var je=1;je<U;je++)for(var Ge=1;Ge<F;Ge++)for(var Je=1;Je<P;Je++)he(Ee,N(Je-1,Ge-1,je-1),N(Je-1,Ge-1,je),N(Je-1,Ge,je-1),N(Je-1,Ge,je),N(Je,Ge-1,je-1),N(Je,Ge-1,je),N(Je,Ge,je-1),N(Je,Ge,je),Fe,Le,(Je+Ge+je)%2)}function Pe(Ee,Fe,Le,je,Ge,Je){for(var rt=[],ot=0,yt=0;yt<Fe.length;yt++)for(var _t=Fe[yt],mt=1;mt<U;mt++)for(var tt=1;tt<F;tt++)rt.push(re(Ee,_t,tt,mt,Le,je,Ge[yt],Je&&Je[ot]&&Je[ot])),ot++;return rt}function De(Ee,Fe,Le,je,Ge,Je){for(var rt=[],ot=0,yt=0;yt<Fe.length;yt++)for(var _t=Fe[yt],mt=1;mt<P;mt++)for(var tt=1;tt<U;tt++)rt.push(re(Ee,mt,_t,tt,Le,je,Ge[yt],Je&&Je[ot]&&Je[ot])),ot++;return rt}function ve(Ee,Fe,Le,je,Ge,Je){for(var rt=[],ot=0,yt=0;yt<Fe.length;yt++)for(var _t=Fe[yt],mt=1;mt<F;mt++)for(var tt=1;tt<P;tt++)rt.push(re(Ee,tt,mt,_t,Le,je,Ge[yt],Je&&Je[ot]&&Je[ot])),ot++;return rt}function we(Ee,Fe){for(var Le=[],je=Ee;je<Fe;je++)Le.push(je);return Le}return function(){K(),function(){for(var yt=0;yt<P;yt++)for(var _t=0;_t<F;_t++)for(var mt=0;mt<U;mt++){var tt=N(yt,_t,mt);ee(s._x[tt],s._y[tt],s._z[tt],s._value[tt])}}();var Ee=null;if(x&&A&&(Z(A),S=!0,Ae(Ee,V,q),S=!1),v&&y){Z(y);for(var Fe=s.surface.pattern,Le=s.surface.count,je=0;je<Le;je++){var Ge=Le===1?.5:je/(Le-1),Je=(1-Ge)*V+Ge*q,rt=Math.abs(Je-W)>Math.abs(Je-B)?[W,Je]:[Je,B];d=!0,Ae(Fe,rt[0],rt[1]),d=!1}}var ot=[[Math.min(V,B),Math.max(V,B)],[Math.min(W,q),Math.max(W,q)]];["x","y","z"].forEach(function(yt){for(var _t=[],mt=0;mt<ot.length;mt++){var tt=0,Qe=ot[mt][0],Dt=ot[mt][1],zt=s.slices[yt];if(zt.show&&zt.fill){Z(zt.fill);var pt=[],vt=[],We=[];if(zt.locations.length)for(var Ze=0;Ze<zt.locations.length;Ze++){var Ne=o(zt.locations[Ze],yt==="x"?E:yt==="y"?L:O);Ne.distRatio===0?pt.push(Ne.id):Ne.id>0&&(vt.push(Ne.id),yt==="x"?We.push([Ne.distRatio,0,0]):yt==="y"?We.push([0,Ne.distRatio,0]):We.push([0,0,Ne.distRatio]))}else pt=we(1,yt==="x"?P-1:yt==="y"?F-1:U-1);vt.length>0&&(_t[tt]=yt==="x"?Pe(Ee,vt,Qe,Dt,We,_t[tt]):yt==="y"?De(Ee,vt,Qe,Dt,We,_t[tt]):ve(Ee,vt,Qe,Dt,We,_t[tt]),tt++),pt.length>0&&(_t[tt]=yt==="x"?Se(Ee,pt,Qe,Dt,_t[tt]):yt==="y"?xe(Ee,pt,Qe,Dt,_t[tt]):Te(Ee,pt,Qe,Dt,_t[tt]),tt++)}var Xe=s.caps[yt];Xe.show&&Xe.fill&&(Z(Xe.fill),_t[tt]=yt==="x"?Se(Ee,[0,P-1],Qe,Dt,_t[tt]):yt==="y"?xe(Ee,[0,F-1],Qe,Dt,_t[tt]):Te(Ee,[0,U-1],Qe,Dt,_t[tt]),tt++)}}),k===0&&K(),s._meshX=p,s._meshY=f,s._meshZ=m,s._meshIntensity=h,s._Xs=E,s._Ys=L,s._Zs=O}(),s}R.exports={findNearestOnAxis:o,generateIsoMeshes:a,createIsosurfaceTrace:function(s,l){var u=s.glplot.gl,p=_({gl:u}),f=new t(s,p,l.uid);return p._trace=f,f.update(l),s.glplot.add(p),f}}},70548:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(50048),w=e(27260);function b(c,o,t,i,n){var a=n("isomin"),s=n("isomax");s!=null&&a!=null&&a>s&&(o.isomin=null,o.isomax=null);var l=n("x"),u=n("y"),p=n("z"),f=n("value");l&&l.length&&u&&u.length&&p&&p.length&&f&&f.length?(T.getComponentMethod("calendars","handleTraceDefaults")(c,o,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(m){n(m+"hoverformat");var h="caps."+m;n(h+".show")&&n(h+".fill");var g="slices."+m;n(g+".show")&&(n(g+".fill"),n(g+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){n(m)}),w(c,o,i,n,{prefix:"",cLetter:"c"}),o._length=null):o.visible=!1}R.exports={supplyDefaults:function(c,o,t,i){b(c,o,0,i,function(n,a){return _.coerce(c,o,r,n,a)})},supplyIsoDefaults:b}},6296:function(R,C,e){"use strict";R.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(R,C,e){"use strict";var _=e(49084),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(16716),b=e(45464),c=e(92880).extendFlat;R.exports=c({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"}),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},_("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:w.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:c({},w.contours.x.show,{}),color:w.contours.x.color,width:w.contours.x.width,editType:"calc"},lightposition:{x:c({},w.lightposition.x,{dflt:1e5}),y:c({},w.lightposition.y,{dflt:1e5}),z:c({},w.lightposition.z,{dflt:0}),editType:"calc"},lighting:c({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},w.lighting),hoverinfo:c({},b.hoverinfo,{editType:"calc"}),showlegend:c({},b.showlegend,{dflt:!1})})},1876:function(R,C,e){"use strict";var _=e(47128);R.exports=function(T,r){r.intensity&&_(T,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}},576:function(R,C,e){"use strict";var _=e(67792).gl_mesh3d,T=e(67792).delaunay_triangulate,r=e(67792).alpha_shape,w=e(67792).convex_hull,b=e(33040).parseColorScale,c=e(3400).isArrayOrTypedArray,o=e(43080),t=e(8932).extractOpts,i=e(52094);function n(f,m,h){this.scene=f,this.uid=h,this.mesh=m,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var a=n.prototype;function s(f){for(var m=[],h=f.length,g=0;g<h;g++)m[g]=o(f[g]);return m}function l(f,m,h,g){for(var v=[],x=m.length,y=0;y<x;y++)v[y]=f.d2l(m[y],0,g)*h;return v}function u(f){for(var m=[],h=f.length,g=0;g<h;g++)m[g]=Math.round(f[g]);return m}function p(f,m){for(var h=f.length,g=0;g<h;g++)if(f[g]<=-.5||f[g]>=m-.5)return!1;return!0}a.handlePick=function(f){if(f.object===this.mesh){var m=f.index=f.data.index;f.data._cellCenter?f.traceCoordinate=f.data.dataCoordinate:f.traceCoordinate=[this.data.x[m],this.data.y[m],this.data.z[m]];var h=this.data.hovertext||this.data.text;return c(h)&&h[m]!==void 0?f.textLabel=h[m]:h&&(f.textLabel=h),!0}},a.update=function(f){var m=this.scene,h=m.fullSceneLayout;this.data=f;var g,v=f.x.length,x=i(l(h.xaxis,f.x,m.dataScale[0],f.xcalendar),l(h.yaxis,f.y,m.dataScale[1],f.ycalendar),l(h.zaxis,f.z,m.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!p(f.i,v)||!p(f.j,v)||!p(f.k,v))return;g=i(u(f.i),u(f.j),u(f.k))}else g=f.alphahull===0?w(x):f.alphahull>0?r(f.alphahull,x):function(S,k){for(var E=["x","y","z"].indexOf(S),L=[],O=k.length,P=0;P<O;P++)L[P]=[k[P][(E+1)%3],k[P][(E+2)%3]];return T(L)}(f.delaunayaxis,x);var y={positions:x,cells:g,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:o(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var A=t(f);this.color="#fff";var d=f.intensitymode;y[d+"Intensity"]=f.intensity,y[d+"IntensityBounds"]=[A.min,A.max],y.colormap=b(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],y.vertexColors=s(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],y.cellColors=s(f.facecolor)):(this.color=f.color,y.meshColor=o(f.color));this.mesh.update(y)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},R.exports=function(f,m){var h=f.glplot.gl,g=_({gl:h}),v=new n(f,g,m.uid);return g._trace=v,v.update(m),f.glplot.add(g),v}},74212:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(27260),w=e(52948);R.exports=function(b,c,o,t){function i(a,s){return T.coerce(b,c,w,a,s)}function n(a){var s=a.map(function(l){var u=i(l);return u&&T.isArrayOrTypedArray(u)?u:null});return s.every(function(l){return l&&l.length===s[0].length})&&s}n(["x","y","z"])?(n(["i","j","k"]),(!c.i||c.j&&c.k)&&(!c.j||c.k&&c.i)&&(!c.k||c.i&&c.j)?(_.getComponentMethod("calendars","handleTraceDefaults")(b,c,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){i(a)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),r(b,c,t,i,{prefix:"",cLetter:"c"})):(c.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",o)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),c._length=null):c.visible=!1):c.visible=!1}},7404:function(R,C,e){"use strict";R.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(R,C,e){"use strict";var _=e(3400).extendFlat,T=e(52904),r=e(29736).axisHoverFormat,w=e(98192).u,b=e(55756),c=e(48164),o=c.INCREASING.COLOR,t=c.DECREASING.COLOR,i=T.line;function n(a){return{line:{color:_({},i.color,{dflt:a}),width:i.width,dash:w,editType:"style"},editType:"style"}}R.exports={xperiod:T.xperiod,xperiod0:T.xperiod0,xperiodalignment:T.xperiodalignment,xhoverformat:r("x"),yhoverformat:r("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:_({},i.width,{}),dash:_({},w,{}),editType:"style"},increasing:n(o),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:_({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:T.zorder}},42812:function(R,C,e){"use strict";var _=e(3400),T=_._,r=e(54460),w=e(1220),b=e(39032).BADNUM;function c(t,i,n,a){return{o:t,h:i,l:n,c:a}}function o(t,i,n,a,s,l){for(var u=s.makeCalcdata(i,"open"),p=s.makeCalcdata(i,"high"),f=s.makeCalcdata(i,"low"),m=s.makeCalcdata(i,"close"),h=_.isArrayOrTypedArray(i.text),g=_.isArrayOrTypedArray(i.hovertext),v=!0,x=null,y=!!i.xperiodalignment,A=[],d=0;d<a.length;d++){var S=a[d],k=u[d],E=p[d],L=f[d],O=m[d];if(S!==b&&k!==b&&E!==b&&L!==b&&O!==b){O===k?x!==null&&O!==x&&(v=O>x):v=O>k,x=O;var P=l(k,E,L,O);P.pos=S,P.yc=(k+O)/2,P.i=d,P.dir=v?"increasing":"decreasing",P.x=P.pos,P.y=[L,E],y&&(P.orig_p=n[d]),h&&(P.tx=i.text[d]),g&&(P.htx=i.hovertext[d]),A.push(P)}else A.push({pos:S,empty:!0})}return i._extremes[s._id]=r.findExtremes(s,_.concat(f,p),{padded:!0}),A.length&&(A[0].t={labels:{open:T(t,"open:")+" ",high:T(t,"high:")+" ",low:T(t,"low:")+" ",close:T(t,"close:")+" "}}),A}R.exports={calc:function(t,i){var n=r.getFromId(t,i.xaxis),a=r.getFromId(t,i.yaxis),s=function(m,h,g){var v=g._minDiff;if(!v){var x,y=m._fullData,A=[];for(v=1/0,x=0;x<y.length;x++){var d=y[x];if(d.type==="ohlc"&&d.visible===!0&&d.xaxis===h._id){A.push(d);var S=h.makeCalcdata(d,"x");d._origX=S;var k=w(g,h,"x",S).vals;d._xcalc=k;var E=_.distinctVals(k).minDiff;E&&isFinite(E)&&(v=Math.min(v,E))}}for(v===1/0&&(v=1),x=0;x<A.length;x++)A[x]._minDiff=v}return v*g.tickwidth}(t,n,i),l=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var p=i._xcalc;i._xcalc=null;var f=o(t,i,u,p,a,c);return i._extremes[n._id]=r.findExtremes(n,p,{vpad:l/2}),f.length?(_.extendFlat(f[0].t,{wHover:l/2,tickLen:s}),f):[{t:{empty:!0}}]},calcCommon:o}},23860:function(R,C,e){"use strict";var _=e(3400),T=e(52744),r=e(31147),w=e(20279);function b(c,o,t,i){t(i+".line.color"),t(i+".line.width",o.line.width),t(i+".line.dash",o.line.dash)}R.exports=function(c,o,t,i){function n(a,s){return _.coerce(c,o,w,a,s)}T(c,o,n,i)?(r(c,o,i,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),b(0,o,n,"increasing"),b(0,o,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),i._requestRangeslider[o.xaxis]=!0,n("zorder")):o.visible=!1}},18720:function(R,C,e){"use strict";var _=e(54460),T=e(3400),r=e(93024),w=e(76308),b=e(3400).fillText,c=e(48164),o={increasing:c.INCREASING.SYMBOL,decreasing:c.DECREASING.SYMBOL};function t(a,s,l,u){var p,f,m=a.cd,h=a.xa,g=m[0].trace,v=m[0].t,x=g.type,y=x==="ohlc"?"l":"min",A=x==="ohlc"?"h":"max",d=v.bPos||0,S=function(B){return B.pos+d-s},k=v.bdPos||v.tickLen,E=v.wHover,L=Math.min(1,k/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));function O(B){var V=S(B);return r.inbox(V-E,V+E,p)}function P(B){var V=B[y],q=B[A];return V===q||r.inbox(V-l,q-l,p)}function F(B){return(O(B)+P(B))/2}p=a.maxHoverDistance-L,f=a.maxSpikeDistance-L;var U=r.getDistanceFunction(u,O,P,F);if(r.getClosest(m,U,a),a.index===!1)return null;var I=m[a.index];if(I.empty)return null;var N=g[I.dir],W=N.line.color;return w.opacity(W)&&N.line.width?a.color=W:a.color=N.fillcolor,a.x0=h.c2p(I.pos+d-k,!0),a.x1=h.c2p(I.pos+d+k,!0),a.xLabelVal=I.orig_p!==void 0?I.orig_p:I.pos,a.spikeDistance=F(I)*f/p,a.xSpike=h.c2p(I.pos,!0),a}function i(a,s,l,u){var p=a.cd,f=a.ya,m=p[0].trace,h=p[0].t,g=[],v=t(a,s,l,u);if(!v)return[];var x=p[v.index].hi||m.hoverinfo,y=x.split("+");if(x!=="all"&&y.indexOf("y")===-1)return[];for(var A=["high","open","close","low"],d={},S=0;S<A.length;S++){var k,E=A[S],L=m[E][v.index],O=f.c2p(L,!0);L in d?(k=d[L]).yLabel+="<br>"+h.labels[E]+_.hoverLabelText(f,L,m.yhoverformat):((k=T.extendFlat({},v)).y0=k.y1=O,k.yLabelVal=L,k.yLabel=h.labels[E]+_.hoverLabelText(f,L,m.yhoverformat),k.name="",g.push(k),d[L]=k)}return g}function n(a,s,l,u){var p=a.cd,f=a.ya,m=p[0].trace,h=p[0].t,g=t(a,s,l,u);if(!g)return[];var v=p[g.index],x=g.index=v.i,y=v.dir;function A(P){return h.labels[P]+_.hoverLabelText(f,m[P][x],m.yhoverformat)}var d=v.hi||m.hoverinfo,S=d.split("+"),k=d==="all",E=k||S.indexOf("y")!==-1,L=k||S.indexOf("text")!==-1,O=E?[A("open"),A("high"),A("low"),A("close")+"  "+o[y]]:[];return L&&b(v,m,O),g.extraText=O.join("<br>"),g.y0=g.y1=f.c2p(v.yc,!0),[g]}R.exports={hoverPoints:function(a,s,l,u){return a.cd[0].trace.hoverlabel.split?i(a,s,l,u):n(a,s,l,u)},hoverSplit:i,hoverOnPoints:n}},65456:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(R,C,e){"use strict";var _=e(24040),T=e(3400);R.exports=function(r,w,b,c){var o=b("x"),t=b("open"),i=b("high"),n=b("low"),a=b("close");if(b("hoverlabel.split"),_.getComponentMethod("calendars","handleTraceDefaults")(r,w,["x"],c),t&&i&&n&&a){var s=Math.min(t.length,i.length,n.length,a.length);return o&&(s=Math.min(s,T.minRowLength(o))),w._length=s,s}}},36664:function(R,C,e){"use strict";var _=e(33428),T=e(3400);R.exports=function(r,w,b,c){var o=w.yaxis,t=w.xaxis,i=!!t.rangebreaks;T.makeTraceGroups(c,b,"trace ohlc").each(function(n){var a=_.select(this),s=n[0],l=s.t;if(s.trace.visible!==!0||l.empty)a.remove();else{var u=l.tickLen,p=a.selectAll("path").data(T.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(f){if(f.empty)return"M0,0Z";var m=t.c2p(f.pos-u,!0),h=t.c2p(f.pos+u,!0),g=i?(m+h)/2:t.c2p(f.pos,!0);return"M"+m+","+o.c2p(f.o,!0)+"H"+g+"M"+g+","+o.c2p(f.h,!0)+"V"+o.c2p(f.l,!0)+"M"+h+","+o.c2p(f.c,!0)+"H"+g})}})}},97384:function(R){"use strict";R.exports=function(C,e){var _,T=C.cd,r=C.xaxis,w=C.yaxis,b=[],c=T[0].t.bPos||0;if(e===!1)for(_=0;_<T.length;_++)T[_].selected=0;else for(_=0;_<T.length;_++){var o=T[_];e.contains([r.c2p(o.pos+c),w.c2p(o.yc)],null,o.i,C)?(b.push({pointNumber:o.i,x:r.c2d(o.pos),y:w.c2d(o.yc)}),o.selected=1):o.selected=0}return b}},14008:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(76308);R.exports=function(w,b,c){var o=c||_.select(w).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(t){return t[0].trace.opacity}),o.each(function(t){var i=t[0].trace;_.select(this).selectAll("path").each(function(n){if(!n.empty){var a=i[n.dir].line;_.select(this).style("fill","none").call(r.stroke,a.color).call(T.dashLine,a.dash,a.width).style("opacity",i.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(R,C,e){"use strict";var _=e(92880).extendFlat,T=e(45464),r=e(25376),w=e(49084),b=e(21776).Ks,c=e(86968).u,o=_({editType:"calc"},w("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});R.exports={domain:c({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:_({},T.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:r({editType:"calc"}),tickfont:r({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:o,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(R,C,e){"use strict";var _=e(84888)._M,T=e(60268),r="parcats";C.name=r,C.plot=function(w,b,c,o){var t=_(w.calcdata,r);if(t.length){var i=t[0];T(w,i,c,o)}},C.clean=function(w,b,c,o){var t=o._has&&o._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&o._paperdiv.selectAll(".parcats").remove()}},69136:function(R,C,e){"use strict";var _=e(71688).wrap,T=e(94288).hasColorscale,r=e(47128),w=e(68944),b=e(43616),c=e(3400),o=e(38248);function t(a,s,l){a.valueInds.push(s),a.count+=l}function i(a,s,l){return{categoryInds:a,color:s,rawColor:l,valueInds:[],count:0}}function n(a,s,l){a.valueInds.push(s),a.count+=l}R.exports=function(a,s){var l=c.filterVisible(s.dimensions);if(l.length===0)return[];var u,p,f,m=l.map(function(q){var ne;if(q.categoryorder==="trace")ne=null;else if(q.categoryorder==="array")ne=q.categoryarray;else{ne=w(q.values);for(var $=!0,K=0;K<ne.length;K++)if(!o(ne[K])){$=!1;break}ne.sort($?c.sorterAsc:void 0),q.categoryorder==="category descending"&&(ne=ne.reverse())}return function(ee,J){J=J==null?[]:J.map(function(fe){return fe});var Z={},te={},oe=[];J.forEach(function(fe,pe){Z[fe]=0,te[fe]=pe});for(var se=0;se<ee.length;se++){var ce,ye=ee[se];Z[ye]===void 0?(Z[ye]=1,ce=J.push(ye)-1,te[ye]=ce):(Z[ye]++,ce=te[ye]),oe.push(ce)}var me=J.map(function(fe){return Z[fe]});return{uniqueValues:J,uniqueCounts:me,inds:oe}}(q.values,ne)});u=c.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(q){var ne,$=q.map(function(K){return K.displayindex});if(function(K){for(var ee=new Array(K.length),J=0;J<K.length;J++){if(K[J]<0||K[J]>=K.length||ee[K[J]]!==void 0)return!1;ee[K[J]]=!0}return!0}($))for(ne=0;ne<q.length;ne++)q[ne]._displayindex=q[ne].displayindex;else for(ne=0;ne<q.length;ne++)q[ne]._displayindex=ne}(l),l.forEach(function(q,ne){(function($,K){$._categoryarray=K.uniqueValues,$.ticktext===null||$.ticktext===void 0?$._ticktext=[]:$._ticktext=$.ticktext.slice();for(var ee=$._ticktext.length;ee<K.uniqueValues.length;ee++)$._ticktext.push(K.uniqueValues[ee])})(q,m[ne])});var h,g=s.line;g?(T(s,"line")&&r(a,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),h=b.tryColorscale(g)):h=c.identity;var v,x,y,A,d,S=l[0].values.length,k={},E=m.map(function(q){return q.inds});for(f=0,v=0;v<S;v++){var L=[];for(x=0;x<E.length;x++)L.push(E[x][v]);p=u[v%u.length],f+=p;var O=(y=v,A=void 0,d=void 0,c.isArrayOrTypedArray(g.color)?d=A=g.color[y%g.color.length]:A=g.color,{color:h(A),rawColor:d}),P=L+"-"+O.rawColor;k[P]===void 0&&(k[P]=i(L,O.color,O.rawColor)),n(k[P],v,p)}var F,U=l.map(function(q,ne){return function($,K,ee,J,Z){return{dimensionInd:$,containerInd:K,displayInd:ee,dimensionLabel:J,count:Z,categories:[],dragX:null}}(ne,q._index,q._displayindex,q.label,f)});for(v=0;v<S;v++)for(p=u[v%u.length],x=0;x<U.length;x++){var I=U[x].containerInd,N=m[x].inds[v],W=U[x].categories;if(W[N]===void 0){var B=s.dimensions[I]._categoryarray[N],V=s.dimensions[I]._ticktext[N];W[N]={dimensionInd:x,categoryInd:F=N,categoryValue:B,displayInd:F,categoryLabel:V,valueInds:[],count:0,dragY:null}}t(W[N],v,p)}return _(function(q,ne,$){var K=q.map(function(ee){return ee.categories.length}).reduce(function(ee,J){return Math.max(ee,J)});return{dimensions:q,paths:ne,trace:void 0,maxCats:K,count:$}}(U,k,f))}},76671:function(R,C,e){"use strict";var _=e(3400),T=e(94288).hasColorscale,r=e(27260),w=e(86968).Q,b=e(51272),c=e(72140),o=e(26284),t=e(38116).isTypedArraySpec;function i(n,a){function s(g,v){return _.coerce(n,a,c.dimensions,g,v)}var l=s("values"),u=s("visible");if(l&&l.length||(u=a.visible=!1),u){s("label"),s("displayindex",a._index);var p,f=n.categoryarray,m=_.isArrayOrTypedArray(f)&&f.length>0||t(f);m&&(p="array");var h=s("categoryorder",p);h==="array"?(s("categoryarray"),s("ticktext")):(delete n.categoryarray,delete n.ticktext),m||h!=="array"||(a.categoryorder="trace")}}R.exports=function(n,a,s,l){function u(h,g){return _.coerce(n,a,c,h,g)}var p=b(n,a,{name:"dimensions",handleItemDefaults:i}),f=function(h,g,v,x,y){y("line.shape"),y("line.hovertemplate");var A=y("line.color",x.colorway[0]);if(T(h,"line")&&_.isArrayOrTypedArray(A)){if(A.length)return y("line.colorscale"),r(h,g,x,y,{prefix:"line.",cLetter:"c"}),A.length;g.line.color=v}return 1/0}(n,a,s,l,u);w(a,l,u),Array.isArray(p)&&p.length||(a.visible=!1),o(a,p,"values",f),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var m=l.font;_.coerceFont(u,"labelfont",m,{overrideDflt:{size:Math.round(m.size)}}),_.coerceFont(u,"tickfont",m,{autoShadowDflt:!0,overrideDflt:{size:Math.round(m.size/1.2)}})}},22020:function(R,C,e){"use strict";R.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(R,C,e){"use strict";var _=e(33428),T=e(67756).Gz,r=e(36424),w=e(93024),b=e(3400),c=b.strTranslate,o=e(43616),t=e(49760),i=e(72736);function n($,K,ee,J){var Z=K._context.staticPlot,te=$.map(W.bind(0,K,ee)),oe=J.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",Z?"none":"all");var se=oe.selectAll("g.trace.parcats").data(te,a),ce=se.enter().append("g").attr("class","trace parcats");se.attr("transform",function(de){return c(de.x,de.y)}),ce.append("g").attr("class","paths");var ye=se.select("g.paths").selectAll("path.path").data(function(de){return de.paths},a);ye.attr("fill",function(de){return de.model.color});var me=ye.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(de){return de.model.color}).attr("fill-opacity",0);g(me),ye.attr("d",function(de){return de.svgD}),me.empty()||ye.sort(l),ye.exit().remove(),ye.on("mouseover",u).on("mouseout",p).on("click",h),ce.append("g").attr("class","dimensions");var fe=se.select("g.dimensions").selectAll("g.dimension").data(function(de){return de.dimensions},a);fe.enter().append("g").attr("class","dimension"),fe.attr("transform",function(de){return c(de.x,0)}),fe.exit().remove();var pe=fe.selectAll("g.category").data(function(de){return de.categories},a),ge=pe.enter().append("g").attr("class","category");pe.attr("transform",function(de){return c(0,de.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),pe.select("rect.catrect").attr("fill","none").attr("width",function(de){return de.width}).attr("height",function(de){return de.height}),x(ge);var ke=pe.selectAll("rect.bandrect").data(function(de){return de.bands},a);ke.each(function(){b.raiseToTop(this)}),ke.attr("fill",function(de){return de.color});var Ce=ke.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(de){return de.color}).attr("fill-opacity",0);ke.attr("fill",function(de){return de.color}).attr("width",function(de){return de.width}).attr("height",function(de){return de.height}).attr("y",function(de){return de.y}).attr("cursor",function(de){return de.parcatsViewModel.arrangement==="fixed"?"default":de.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(Ce),ke.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none"),pe.select("text.catlabel").attr("text-anchor",function(de){return s(de)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(de){return s(de)?de.width+5:-5}).attr("y",function(de){return de.height/2}).text(function(de){return de.model.categoryLabel}).each(function(de){o.font(_.select(this),de.parcatsViewModel.categorylabelfont),i.convertToTspans(_.select(this),K)}),ge.append("text").attr("class","dimlabel"),pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(de){return de.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(de){return de.width/2}).attr("y",-5).text(function(de,ae){return ae===0?de.parcatsViewModel.model.dimensions[de.model.dimensionInd].dimensionLabel:null}).each(function(de){o.font(_.select(this),de.parcatsViewModel.labelfont)}),pe.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",L),pe.exit().remove(),fe.call(_.behavior.drag().origin(function(de){return{x:de.x,y:0}}).on("dragstart",O).on("drag",P).on("dragend",F)),se.each(function(de){de.traceSelection=_.select(this),de.pathSelection=_.select(this).selectAll("g.paths").selectAll("path.path"),de.dimensionSelection=_.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),se.exit().remove()}function a($){return $.key}function s($){var K=$.parcatsViewModel.dimensions.length,ee=$.parcatsViewModel.dimensions[K-1].model.dimensionInd;return $.model.dimensionInd===ee}function l($,K){return $.model.rawColor>K.model.rawColor?1:$.model.rawColor<K.model.rawColor?-1:0}function u($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),v(_.select(this));var K=f($),ee=m($);if($.parcatsViewModel.graphDiv.emit("plotly_hover",{points:K,event:_.event,constraints:ee}),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var J,Z,te,oe=_.mouse(this)[0],se=$.parcatsViewModel.graphDiv,ce=$.parcatsViewModel.trace,ye=se._fullLayout,me=ye._paperdiv.node().getBoundingClientRect(),fe=$.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<$.leftXs.length-1;te++)if($.leftXs[te]+$.dimWidths[te]-2<=oe&&oe<=$.leftXs[te+1]+2){var pe=$.parcatsViewModel.dimensions[te],ge=$.parcatsViewModel.dimensions[te+1];J=(pe.x+pe.width+ge.x)/2,Z=($.topYs[te]+$.topYs[te+1]+$.height)/2;break}var ke=$.parcatsViewModel.x+J,Ce=$.parcatsViewModel.y+Z,de=t.mostReadable($.model.color,["black","white"]),ae=$.model.count,re=ae/$.parcatsViewModel.model.count,he={countLabel:ae,probabilityLabel:re.toFixed(3)},Se=[];$.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",he.countLabel].join(" ")),$.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",he.probabilityLabel].join(" "));var xe=Se.join("<br>"),Te=_.mouse(se)[0];w.loneHover({trace:ce,x:ke-me.left+fe.left,y:Ce-me.top+fe.top,text:xe,color:$.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:de,idealAlign:Te<ke?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:he,eventData:[{data:ce._input,fullData:ce,count:ae,probability:re}]},{container:ye._hoverlayer.node(),outerContainer:ye._paper.node(),gd:se})}}}function p($){if(!$.parcatsViewModel.dragDimension&&(g(_.select(this)),w.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),$.parcatsViewModel.pathSelection.sort(l),$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var K=f($),ee=m($);$.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:K,event:_.event,constraints:ee})}}function f($){for(var K=[],ee=U($.parcatsViewModel),J=0;J<$.model.valueInds.length;J++){var Z=$.model.valueInds[J];K.push({curveNumber:ee,pointNumber:Z})}return K}function m($){for(var K={},ee=$.parcatsViewModel.model.dimensions,J=0;J<ee.length;J++){var Z=ee[J],te=Z.categories[$.model.categoryInds[J]];K[Z.containerInd]=te.categoryValue}return $.model.rawColor!==void 0&&(K.color=$.model.rawColor),K}function h($){if($.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var K=f($),ee=m($);$.parcatsViewModel.graphDiv.emit("plotly_click",{points:K,event:_.event,constraints:ee})}}function g($){$.attr("fill",function(K){return K.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function v($){$.attr("fill-opacity",.8).attr("stroke",function(K){return t.mostReadable(K.model.color,["black","white"])}).attr("stroke-width",.3)}function x($){$.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y($){$.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function A($){var K=$.parcatsViewModel.pathSelection,ee=$.categoryViewModel.model.dimensionInd,J=$.categoryViewModel.model.categoryInd;return K.filter(function(Z){return Z.model.categoryInds[ee]===J&&Z.model.color===$.color})}function d($,K,ee){var J=_.select($).datum(),Z=J.categoryViewModel.model,te=J.parcatsViewModel.graphDiv,oe=_.select($.parentNode).selectAll("rect.bandrect"),se=[];oe.each(function(ye){A(ye).each(function(me){Array.prototype.push.apply(se,f(me))})});var ce={};ce[Z.dimensionInd]=Z.categoryValue,te.emit(K,{points:se,event:ee,constraints:ce})}function S($,K,ee){var J=_.select($).datum(),Z=J.categoryViewModel.model,te=J.parcatsViewModel.graphDiv,oe=A(J),se=[];oe.each(function(ye){Array.prototype.push.apply(se,f(ye))});var ce={};ce[Z.dimensionInd]=Z.categoryValue,J.rawColor!==void 0&&(ce.color=J.rawColor),te.emit(K,{points:se,event:ee,constraints:ce})}function k($,K,ee){$._fullLayout._calcInverseTransform($);var J,Z,te=$._fullLayout._invScaleX,oe=$._fullLayout._invScaleY,se=_.select(ee.parentNode).select("rect.catrect"),ce=se.node().getBoundingClientRect(),ye=se.datum(),me=ye.parcatsViewModel,fe=me.model.dimensions[ye.model.dimensionInd],pe=me.trace,ge=ce.top+ce.height/2;me.dimensions.length>1&&fe.displayInd===me.dimensions.length-1?(J=ce.left,Z="left"):(J=ce.left+ce.width,Z="right");var ke=ye.model.count,Ce=ye.model.categoryLabel,de=ke/ye.parcatsViewModel.model.count,ae={countLabel:ke,categoryLabel:Ce,probabilityLabel:de.toFixed(3)},re=[];ye.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&re.push(["Count:",ae.countLabel].join(" ")),ye.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&re.push(["P("+ae.categoryLabel+"):",ae.probabilityLabel].join(" "));var he=re.join("<br>");return{trace:pe,x:te*(J-K.left),y:oe*(ge-K.top),text:he,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Z,hovertemplate:pe.hovertemplate,hovertemplateLabels:ae,eventData:[{data:pe._input,fullData:pe,count:ke,category:Ce,probability:de}]}}function E($){if(!$.parcatsViewModel.dragDimension&&$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(_.mouse(this)[1]<-1)return;var K,ee=$.parcatsViewModel.graphDiv,J=ee._fullLayout,Z=J._paperdiv.node().getBoundingClientRect(),te=$.parcatsViewModel.hoveron,oe=this;te==="color"?(function(se){var ce=_.select(se).datum(),ye=A(ce);v(ye),ye.each(function(){b.raiseToTop(this)}),_.select(se.parentNode).selectAll("rect.bandrect").filter(function(me){return me.color===ce.color}).each(function(){b.raiseToTop(this),_.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(oe),S(oe,"plotly_hover",_.event)):(function(se){_.select(se.parentNode).selectAll("rect.bandrect").each(function(ce){var ye=A(ce);v(ye),ye.each(function(){b.raiseToTop(this)})}),_.select(se.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(oe),d(oe,"plotly_hover",_.event)),$.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(te==="category"?K=k(ee,Z,oe):te==="color"?K=function(se,ce,ye){se._fullLayout._calcInverseTransform(se);var me,fe,pe=se._fullLayout._invScaleX,ge=se._fullLayout._invScaleY,ke=ye.getBoundingClientRect(),Ce=_.select(ye).datum(),de=Ce.categoryViewModel,ae=de.parcatsViewModel,re=ae.model.dimensions[de.model.dimensionInd],he=ae.trace,Se=ke.y+ke.height/2;ae.dimensions.length>1&&re.displayInd===ae.dimensions.length-1?(me=ke.left,fe="left"):(me=ke.left+ke.width,fe="right");var xe=de.model.categoryLabel,Te=Ce.parcatsViewModel.model.count,Ae=0;Ce.categoryViewModel.bands.forEach(function(Je){Je.color===Ce.color&&(Ae+=Je.count)});var Pe=de.model.count,De=0;ae.pathSelection.each(function(Je){Je.model.color===Ce.color&&(De+=Je.model.count)});var ve=Ae/Te,we=Ae/De,Ee=Ae/Pe,Fe={countLabel:Ae,categoryLabel:xe,probabilityLabel:ve.toFixed(3)},Le=[];de.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",Fe.countLabel].join(" ")),de.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Le.push("P(color \u2229 "+xe+"): "+Fe.probabilityLabel),Le.push("P("+xe+" | color): "+we.toFixed(3)),Le.push("P(color | "+xe+"): "+Ee.toFixed(3)));var je=Le.join("<br>"),Ge=t.mostReadable(Ce.color,["black","white"]);return{trace:he,x:pe*(me-ce.left),y:ge*(Se-ce.top),text:je,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ge,fontSize:10,idealAlign:fe,hovertemplate:he.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:he._input,fullData:he,category:xe,count:Te,probability:ve,categorycount:Pe,colorcount:De,bandcolorcount:Ae}]}}(ee,Z,oe):te==="dimension"&&(K=function(se,ce,ye){var me=[];return _.select(ye.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){me.push(k(se,ce,this))}),me}(ee,Z,oe)),K&&w.loneHover(K,{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:ee}))}}function L($){var K=$.parcatsViewModel;K.dragDimension||(g(K.pathSelection),x(K.dimensionSelection.selectAll("g.category")),y(K.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),w.loneUnhover(K.graphDiv._fullLayout._hoverlayer.node()),K.pathSelection.sort(l),K.hoverinfoItems.indexOf("skip")!==-1)||($.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",_.event):d(this,"plotly_unhover",_.event))}function O($){$.parcatsViewModel.arrangement!=="fixed"&&($.dragDimensionDisplayInd=$.model.displayInd,$.initialDragDimensionDisplayInds=$.parcatsViewModel.model.dimensions.map(function(K){return K.displayInd}),$.dragHasMoved=!1,$.dragCategoryDisplayInd=null,_.select(this).selectAll("g.category").select("rect.catrect").each(function(K){var ee=_.mouse(this)[0],J=_.mouse(this)[1];-2<=ee&&ee<=K.width+2&&-2<=J&&J<=K.height+2&&($.dragCategoryDisplayInd=K.model.displayInd,$.initialDragCategoryDisplayInds=$.model.categories.map(function(Z){return Z.displayInd}),K.model.dragY=K.y,b.raiseToTop(this.parentNode),_.select(this.parentNode).selectAll("rect.bandrect").each(function(Z){Z.y<J&&J<=Z.y+Z.height&&($.potentialClickBand=this)}))}),$.parcatsViewModel.dragDimension=$,w.loneUnhover($.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P($){if($.parcatsViewModel.arrangement!=="fixed"&&($.dragHasMoved=!0,$.dragDimensionDisplayInd!==null)){var K=$.dragDimensionDisplayInd,ee=K-1,J=K+1,Z=$.parcatsViewModel.dimensions[K];if($.dragCategoryDisplayInd!==null){var te=Z.categories[$.dragCategoryDisplayInd];te.model.dragY+=_.event.dy;var oe=te.model.dragY,se=te.model.displayInd,ce=Z.categories,ye=ce[se-1],me=ce[se+1];ye!==void 0&&oe<ye.y+ye.height/2&&(te.model.displayInd=ye.model.displayInd,ye.model.displayInd=se),me!==void 0&&oe+te.height>me.y+me.height/2&&(te.model.displayInd=me.model.displayInd,me.model.displayInd=se),$.dragCategoryDisplayInd=te.model.displayInd}if($.dragCategoryDisplayInd===null||$.parcatsViewModel.arrangement==="freeform"){Z.model.dragX=_.event.x;var fe=$.parcatsViewModel.dimensions[ee],pe=$.parcatsViewModel.dimensions[J];fe!==void 0&&Z.model.dragX<fe.x+fe.width&&(Z.model.displayInd=fe.model.displayInd,fe.model.displayInd=K),pe!==void 0&&Z.model.dragX+Z.width>pe.x&&(Z.model.displayInd=pe.model.displayInd,pe.model.displayInd=$.dragDimensionDisplayInd),$.dragDimensionDisplayInd=Z.model.displayInd}q($.parcatsViewModel),V($.parcatsViewModel),N($.parcatsViewModel),I($.parcatsViewModel)}}function F($){if($.parcatsViewModel.arrangement!=="fixed"&&$.dragDimensionDisplayInd!==null){_.select(this).selectAll("text").attr("font-weight","normal");var K={},ee=U($.parcatsViewModel),J=$.parcatsViewModel.model.dimensions.map(function(me){return me.displayInd}),Z=$.initialDragDimensionDisplayInds.some(function(me,fe){return me!==J[fe]});Z&&J.forEach(function(me,fe){var pe=$.parcatsViewModel.model.dimensions[fe].containerInd;K["dimensions["+pe+"].displayindex"]=me});var te=!1;if($.dragCategoryDisplayInd!==null){var oe=$.model.categories.map(function(me){return me.displayInd});if(te=$.initialDragCategoryDisplayInds.some(function(me,fe){return me!==oe[fe]})){var se=$.model.categories.slice().sort(function(me,fe){return me.displayInd-fe.displayInd}),ce=se.map(function(me){return me.categoryValue}),ye=se.map(function(me){return me.categoryLabel});K["dimensions["+$.model.containerInd+"].categoryarray"]=[ce],K["dimensions["+$.model.containerInd+"].ticktext"]=[ye],K["dimensions["+$.model.containerInd+"].categoryorder"]="array"}}$.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!$.dragHasMoved&&$.potentialClickBand&&($.parcatsViewModel.hoveron==="color"?S($.potentialClickBand,"plotly_click",_.event.sourceEvent):d($.potentialClickBand,"plotly_click",_.event.sourceEvent)),$.model.dragX=null,$.dragCategoryDisplayInd!==null&&($.parcatsViewModel.dimensions[$.dragDimensionDisplayInd].categories[$.dragCategoryDisplayInd].model.dragY=null,$.dragCategoryDisplayInd=null),$.dragDimensionDisplayInd=null,$.parcatsViewModel.dragDimension=null,$.dragHasMoved=null,$.potentialClickBand=null,q($.parcatsViewModel),V($.parcatsViewModel),_.transition().duration(300).ease("cubic-in-out").each(function(){N($.parcatsViewModel,!0),I($.parcatsViewModel,!0)}).each("end",function(){(Z||te)&&r.restyle($.parcatsViewModel.graphDiv,K,[ee])})}}function U($){for(var K,ee=$.graphDiv._fullData,J=0;J<ee.length;J++)if($.key===ee[J].uid){K=J;break}return K}function I($,K){var ee;K===void 0&&(K=!1),$.pathSelection.data(function(J){return J.paths},a),(ee=$.pathSelection,K?ee.transition():ee).attr("d",function(J){return J.svgD})}function N($,K){function ee(oe){return K?oe.transition():oe}K===void 0&&(K=!1),$.dimensionSelection.data(function(oe){return oe.dimensions},a);var J=$.dimensionSelection.selectAll("g.category").data(function(oe){return oe.categories},a);ee($.dimensionSelection).attr("transform",function(oe){return c(oe.x,0)}),ee(J).attr("transform",function(oe){return c(0,oe.y)}),J.select(".dimlabel").text(function(oe,se){return se===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null}),J.select(".catlabel").attr("text-anchor",function(oe){return s(oe)?"start":"end"}).attr("x",function(oe){return s(oe)?oe.width+5:-5}).each(function(oe){var se,ce;s(oe)?(se=oe.width+5,ce="start"):(se=-5,ce="end"),_.select(this).selectAll("tspan").attr("x",se).attr("text-anchor",ce)});var Z=J.selectAll("rect.bandrect").data(function(oe){return oe.bands},a),te=Z.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);Z.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}),y(te),Z.each(function(){b.raiseToTop(this)}),Z.exit().remove()}function W($,K,ee){var J,Z=ee[0],te=K.margin||{l:80,r:80,t:100,b:80},oe=Z.trace,se=oe.domain,ce=K.width,ye=K.height,me=Math.floor(ce*(se.x[1]-se.x[0])),fe=Math.floor(ye*(se.y[1]-se.y[0])),pe=se.x[0]*ce+te.l,ge=K.height-se.y[1]*K.height+te.t,ke=oe.line.shape;J=oe.hoverinfo==="all"?["count","probability"]:(oe.hoverinfo||"").split("+");var Ce={trace:oe,key:oe.uid,model:Z,x:pe,y:ge,width:me,height:fe,hoveron:oe.hoveron,hoverinfoItems:J,arrangement:oe.arrangement,bundlecolors:oe.bundlecolors,sortpaths:oe.sortpaths,labelfont:oe.labelfont,categorylabelfont:oe.tickfont,pathShape:ke,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:$,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(q(Ce),V(Ce)),Ce}function B($,K,ee,J,Z){var te,oe,se=[],ce=[];for(oe=0;oe<ee.length-1;oe++)te=T(ee[oe]+$[oe],$[oe+1]),se.push(te(Z)),ce.push(te(1-Z));var ye="M "+$[0]+","+K[0];for(ye+="l"+ee[0]+",0 ",oe=1;oe<ee.length;oe++)ye+="C"+se[oe-1]+","+K[oe-1]+" "+ce[oe-1]+","+K[oe]+" "+$[oe]+","+K[oe],ye+="l"+ee[oe]+",0 ";for(ye+="l0,"+J+" ",ye+="l -"+ee[ee.length-1]+",0 ",oe=ee.length-2;oe>=0;oe--)ye+="C"+ce[oe]+","+(K[oe+1]+J)+" "+se[oe]+","+(K[oe]+J)+" "+($[oe]+ee[oe])+","+(K[oe]+J),ye+="l-"+ee[oe]+",0 ";return ye+"Z"}function V($){var K=$.dimensions,ee=$.model,J=K.map(function(Fe){return Fe.categories.map(function(Le){return Le.y})}),Z=$.model.dimensions.map(function(Fe){return Fe.categories.map(function(Le){return Le.displayInd})}),te=$.model.dimensions.map(function(Fe){return Fe.displayInd}),oe=$.dimensions.map(function(Fe){return Fe.model.dimensionInd}),se=K.map(function(Fe){return Fe.x}),ce=K.map(function(Fe){return Fe.width}),ye=[];for(var me in ee.paths)ee.paths.hasOwnProperty(me)&&ye.push(ee.paths[me]);function fe(Fe){var Le=Fe.categoryInds.map(function(je,Ge){return Z[Ge][je]});return oe.map(function(je){return Le[je]})}ye.sort(function(Fe,Le){var je=fe(Fe),Ge=fe(Le);return $.sortpaths==="backward"&&(je.reverse(),Ge.reverse()),je.push(Fe.valueInds[0]),Ge.push(Le.valueInds[0]),$.bundlecolors&&(je.unshift(Fe.rawColor),Ge.unshift(Le.rawColor)),je<Ge?-1:je>Ge?1:0});for(var pe=new Array(ye.length),ge=K[0].model.count,ke=K[0].categories.map(function(Fe){return Fe.height}).reduce(function(Fe,Le){return Fe+Le}),Ce=0;Ce<ye.length;Ce++){var de,ae=ye[Ce];de=ge>0?ke*(ae.count/ge):0;for(var re,he=new Array(J.length),Se=0;Se<ae.categoryInds.length;Se++){var xe=ae.categoryInds[Se],Te=Z[Se][xe],Ae=te[Se];he[Ae]=J[Ae][Te],J[Ae][Te]+=de;var Pe=$.dimensions[Ae].categories[Te],De=Pe.bands.length,ve=Pe.bands[De-1];if(ve===void 0||ae.rawColor!==ve.rawColor){var we=ve===void 0?0:ve.y+ve.height;Pe.bands.push({key:we,color:ae.color,rawColor:ae.rawColor,height:de,width:Pe.width,count:ae.count,y:we,categoryViewModel:Pe,parcatsViewModel:$})}else{var Ee=Pe.bands[De-1];Ee.height+=de,Ee.count+=ae.count}}re=$.pathShape==="hspline"?B(se,he,ce,de,.5):B(se,he,ce,de,0),pe[Ce]={key:ae.valueInds[0],model:ae,height:de,leftXs:se,topYs:he,dimWidths:ce,svgD:re,parcatsViewModel:$}}$.paths=pe}function q($){var K=$.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});K.sort(function(oe,se){return oe.displayInd-se.displayInd});var ee=[];for(var J in K){var Z=K[J].dimensionInd,te=$.model.dimensions[Z];ee.push(ne($,te))}$.dimensions=ee}function ne($,K){var ee,J=$.model.dimensions.length,Z=K.displayInd;ee=40+(J>1?($.width-80-16)/(J-1):0)*Z;var te,oe,se,ce,ye,me=[],fe=$.model.maxCats,pe=K.categories.length,ge=K.count,ke=$.height-8*(fe-1),Ce=8*(fe-pe)/2,de=K.categories.map(function(ae){return{displayInd:ae.displayInd,categoryInd:ae.categoryInd}});for(de.sort(function(ae,re){return ae.displayInd-re.displayInd}),ye=0;ye<pe;ye++)ce=de[ye].categoryInd,oe=K.categories[ce],te=ge>0?oe.count/ge*ke:0,se={key:oe.valueInds[0],model:oe,width:16,height:te,y:oe.dragY!==null?oe.dragY:Ce,bands:[],parcatsViewModel:$},Ce=Ce+te+8,me.push(se);return{key:K.dimensionInd,x:K.dragX!==null?K.dragX:ee,y:0,width:16,model:K,categories:me,parcatsViewModel:$,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}R.exports=function($,K,ee,J){n(ee,$,J,K)}},60268:function(R,C,e){"use strict";var _=e(51036);R.exports=function(T,r,w,b){var c=T._fullLayout,o=c._paper,t=c._size;_(T,o,r,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},w,b)}},82296:function(R,C,e){"use strict";var _=e(49084),T=e(94724),r=e(25376),w=e(86968).u,b=e(92880).extendFlat,c=e(31780).templatedArray;R.exports={domain:w({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:r({editType:"plot"}),tickfont:r({autoShadowDflt:!0,editType:"plot"}),rangefont:r({editType:"plot"}),dimensions:c("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},T.tickvals,{editType:"plot"}),ticktext:b({},T.ticktext,{editType:"plot"}),tickformat:b({},T.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},_("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(R,C,e){"use strict";var _=e(30140),T=e(33428),r=e(71688).keyFun,w=e(71688).repeat,b=e(3400).sorterAsc,c=e(3400).strTranslate,o=_.bar.snapRatio;function t(k,E){return k*(1-o)+E*o}var i=_.bar.snapClose;function n(k,E){return k*(1-i)+E*i}function a(k,E,L,O){if(function(ne,$){for(var K=0;K<$.length;K++)if(ne>=$[K][0]&&ne<=$[K][1])return!0;return!1}(L,O))return L;var P=k?-1:1,F=0,U=E.length-1;if(P<0){var I=F;F=U,U=I}for(var N=E[F],W=N,B=F;P*B<P*U;B+=P){var V=B+P,q=E[V];if(P*L<P*n(N,q))return t(N,W);if(P*L<P*q||V===U)return t(q,N);W=N,N=q}}function s(k){k.attr("x",-_.bar.captureWidth/2).attr("width",_.bar.captureWidth)}function l(k){k.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(k){if(!k.brush.filterSpecified)return"0,"+k.height;for(var E,L,O,P=p(k.brush.filter.getConsolidated(),k.height),F=[0],U=P.length?P[0][0]:null,I=0;I<P.length;I++)L=(E=P[I])[1]-E[0],F.push(U),F.push(L),(O=I+1)<P.length&&(U=P[O][0]-E[1]);return F.push(k.height),F}function p(k,E){return k.map(function(L){return L.map(function(O){return Math.max(0,O*E)}).sort(b)})}function f(){T.select(document.body).style("cursor",null)}function m(k){k.attr("stroke-dasharray",u)}function h(k,E){var L=T.select(k).selectAll(".highlight, .highlight-shadow");m(E?L.transition().duration(_.bar.snapDuration).each("end",E):L)}function g(k,E){var L,O=k.brush,P=NaN,F={};if(O.filterSpecified){var U=k.height,I=O.filter.getConsolidated(),N=p(I,U),W=NaN,B=NaN,V=NaN;for(L=0;L<=N.length;L++){var q=N[L];if(q&&q[0]<=E&&E<=q[1]){W=L;break}if(B=L?L-1:NaN,q&&q[0]>E){V=L;break}}if(P=W,isNaN(P)&&(P=isNaN(B)||isNaN(V)?isNaN(B)?V:B:E-N[B][1]<N[V][0]-E?B:V),!isNaN(P)){var ne=N[P],$=function(Z,te){var oe=_.bar.handleHeight;if(!(te>Z[1]+oe||te<Z[0]-oe))return te>=.9*Z[1]+.1*Z[0]?"n":te<=.9*Z[0]+.1*Z[1]?"s":"ns"}(ne,E);$&&(F.interval=I[P],F.intervalPix=ne,F.region=$)}}if(k.ordinal&&!F.region){var K=k.unitTickvals,ee=k.unitToPaddedPx.invert(E);for(L=0;L<K.length;L++){var J=[.25*K[Math.max(L-1,0)]+.75*K[L],.25*K[Math.min(L+1,K.length-1)]+.75*K[L]];if(ee>=J[0]&&ee<=J[1]){F.clickableOrdinalRange=J;break}}}return F}function v(k,E){T.event.sourceEvent.stopPropagation();var L=E.height-T.mouse(k)[1]-2*_.verticalPadding,O=E.brush.svgBrush;O.wasDragged=!0,O._dragging=!0,O.grabbingBar?O.newExtent=[L-O.grabPoint,L+O.barLength-O.grabPoint].map(E.unitToPaddedPx.invert):O.newExtent=[O.startExtent,E.unitToPaddedPx.invert(L)].sort(b),E.brush.filterSpecified=!0,O.extent=O.stayingIntervals.concat([O.newExtent]),O.brushCallback(E),h(k.parentNode)}function x(k,E){var L=g(E,E.height-T.mouse(k)[1]-2*_.verticalPadding),O="crosshair";L.clickableOrdinalRange?O="pointer":L.region&&(O=L.region+"-resize"),T.select(document.body).style("cursor",O)}function y(k){k.on("mousemove",function(E){T.event.preventDefault(),E.parent.inBrushDrag||x(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||f()}).call(T.behavior.drag().on("dragstart",function(E){(function(L,O){T.event.sourceEvent.stopPropagation();var P=O.height-T.mouse(L)[1]-2*_.verticalPadding,F=O.unitToPaddedPx.invert(P),U=O.brush,I=g(O,P),N=I.interval,W=U.svgBrush;if(W.wasDragged=!1,W.grabbingBar=I.region==="ns",W.grabbingBar){var B=N.map(O.unitToPaddedPx);W.grabPoint=P-B[0]-_.verticalPadding,W.barLength=B[1]-B[0]}W.clickableOrdinalRange=I.clickableOrdinalRange,W.stayingIntervals=O.multiselect&&U.filterSpecified?U.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(V){return V[0]!==N[0]&&V[1]!==N[1]})),W.startExtent=I.region?N[I.region==="s"?1:0]:F,O.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){v(this,E)}).on("dragend",function(E){(function(L,O){var P=O.brush,F=P.filter,U=P.svgBrush;U._dragging||(x(L,O),v(L,O),O.brush.svgBrush.wasDragged=!1),U._dragging=!1,T.event.sourceEvent.stopPropagation();var I=U.grabbingBar;if(U.grabbingBar=!1,U.grabLocation=void 0,O.parent.inBrushDrag=!1,f(),!U.wasDragged)return U.wasDragged=void 0,U.clickableOrdinalRange?P.filterSpecified&&O.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],P.filterSpecified=!0):I?(U.extent=U.stayingIntervals,U.extent.length===0&&d(P)):d(P),U.brushCallback(O),h(L.parentNode),void U.brushEndCallback(P.filterSpecified?F.getConsolidated():[]);var N=function(){F.set(F.getConsolidated())};if(O.ordinal){var W=O.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),U.newExtent=[a(0,W,U.newExtent[0],U.stayingIntervals),a(1,W,U.newExtent[1],U.stayingIntervals)];var B=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(B?[U.newExtent]:[]),U.extent.length||d(P),U.brushCallback(O),B?h(L.parentNode,N):(N(),h(L.parentNode))}else N();U.brushEndCallback(P.filterSpecified?F.getConsolidated():[])})(this,E)}))}function A(k,E){return k[0]-E[0]}function d(k){k.filterSpecified=!1,k.svgBrush.extent=[[-1/0,1/0]]}function S(k){for(var E,L=k.slice(),O=[],P=L.shift();P;){for(E=P.slice();(P=L.shift())&&P[0]<=E[1];)E[1]=Math.max(E[1],P[1]);O.push(E)}return O.length===1&&O[0][0]>O[0][1]&&(O=[]),O}R.exports={makeBrush:function(k,E,L,O,P,F){var U,I=function(){var N,W,B=[];return{set:function(V){(B=V.map(function(q){return q.slice().sort(b)}).sort(A)).length===1&&B[0][0]===-1/0&&B[0][1]===1/0&&(B=[[0,-1]]),N=S(B),W=B.reduce(function(q,ne){return[Math.min(q[0],ne[0]),Math.max(q[1],ne[1])]},[1/0,-1/0])},get:function(){return B.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return I.set(L),{filter:I,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:O,brushCallback:(U=P,function(N){var W=N.brush,B=function(q){return q.svgBrush.extent.map(function(ne){return ne.slice()})}(W),V=B.slice();W.filter.set(V),U()}),brushEndCallback:F}}},ensureAxisBrush:function(k,E,L){var O=k.selectAll("."+_.cn.axisBrush).data(w,r);O.enter().append("g").classed(_.cn.axisBrush,!0),function(P,F,U){var I=U._context.staticPlot,N=P.selectAll(".background").data(w);N.enter().append("rect").classed("background",!0).call(s).call(l).style("pointer-events",I?"none":"auto").attr("transform",c(0,_.verticalPadding)),N.call(y).attr("height",function(V){return V.height-_.verticalPadding});var W=P.selectAll(".highlight-shadow").data(w);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width+_.bar.strokeWidth).attr("stroke",F).attr("opacity",_.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(V){return V.height}).call(m);var B=P.selectAll(".highlight").data(w);B.enter().append("line").classed("highlight",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width-_.bar.strokeWidth).attr("stroke",_.bar.fillColor).attr("opacity",_.bar.fillOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(V){return V.height}).call(m)}(O,E,L)},cleanRanges:function(k,E){if(Array.isArray(k[0])?(k=k.map(function(O){return O.sort(b)}),k=E.multiselect?S(k.sort(A)):[k[0]]):k=[k.sort(b)],E.tickvals){var L=E.tickvals.slice().sort(b);if(!(k=k.map(function(O){var P=[a(0,L,O[0],[]),a(1,L,O[1],[])];if(P[1]>P[0])return P}).filter(function(O){return O})).length)return}return k.length>1?k:k[0]}}},61664:function(R,C,e){"use strict";R.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(R,C,e){"use strict";var _=e(33428),T=e(84888)._M,r=e(24196),w=e(9616);C.name="parcoords",C.plot=function(b){var c=T(b.calcdata,"parcoords")[0];c.length&&r(b,c)},C.clean=function(b,c,o,t){var i=t._has&&t._has("parcoords"),n=c._has&&c._has("parcoords");i&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},C.toSVG=function(b){var c=b._fullLayout._glimages,o=_.select(b).selectAll(".svg-container");o.filter(function(t,i){return i===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");c.append("svg:image").attr({xmlns:w.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){_.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray,T=e(8932),r=e(71688).wrap;R.exports=function(w,b){var c,o;return T.hasColorscale(b,"line")&&_(b.line.color)?(c=b.line.color,o=T.extractOpts(b.line).colorscale,T.calc(w,b,{vals:c,containerStr:"line",cLetter:"c"})):(c=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=.5;return i}(b._length),o=[[0,b.line.color],[1,b.line.color]]),r({lineColor:c,cscale:o})}},30140:function(R){"use strict";R.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(R,C,e){"use strict";var _=e(3400),T=e(94288).hasColorscale,r=e(27260),w=e(86968).Q,b=e(51272),c=e(54460),o=e(82296),t=e(71864),i=e(30140).maxDimensionCount,n=e(26284);function a(s,l,u,p){function f(x,y){return _.coerce(s,l,o.dimensions,x,y)}var m=f("values"),h=f("visible");if(m&&m.length||(h=l.visible=!1),h){f("label"),f("tickvals"),f("ticktext"),f("tickformat");var g=f("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:g},c.setConvert(l._ax,p.layout),f("multiselect");var v=f("constraintrange");v&&(l.constraintrange=t.cleanRanges(v,l))}}R.exports=function(s,l,u,p){function f(x,y){return _.coerce(s,l,o,x,y)}var m=s.dimensions;Array.isArray(m)&&m.length>i&&(_.log("parcoords traces support up to "+i+" dimensions at the moment"),m.splice(i));var h=b(s,l,{name:"dimensions",layout:p,handleItemDefaults:a}),g=function(x,y,A,d,S){var k=S("line.color",A);if(T(x,"line")&&_.isArrayOrTypedArray(k)){if(k.length)return S("line.colorscale"),r(x,y,d,S,{prefix:"line.",cLetter:"c"}),k.length;y.line.color=A}return 1/0}(s,l,u,p,f);w(l,p,f),Array.isArray(h)&&h.length||(l.visible=!1),n(l,h,"values",g);var v=_.extendFlat({},p.font,{size:Math.round(p.font.size/1.2)});_.coerceFont(f,"labelfont",v),_.coerceFont(f,"tickfont",v,{autoShadowDflt:!0}),_.coerceFont(f,"rangefont",v),f("labelangle"),f("labelside"),f("unselected.line.color"),f("unselected.line.opacity")}},95724:function(R,C,e){"use strict";var _=e(3400).isTypedArray;C.convertTypedArray=function(T){return _(T)?Array.prototype.slice.call(T):T},C.isOrdinal=function(T){return!!T.tickvals},C.isVisible=function(T){return T.visible||!("visible"in T)}},29928:function(R,C,e){"use strict";var _=e(61664);_.plot=e(24196),R.exports=_},51352:function(R,C,e){"use strict";var _=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),T=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),r=e(30140).maxDimensionCount,w=e(3400),b=1e-6,c=new Uint8Array(4),o=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(h,g,v,x,y){var A=h._gl;A.enable(A.SCISSOR_TEST),A.scissor(g,v,x,y),h.clear({color:[0,0,0,0],depth:1})}function n(h,g,v,x,y,A){var d=A.key;v.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:c})}(h),v.drawCompleted=!0),function S(k){var E=Math.min(x,y-k*x);k===0&&(window.cancelAnimationFrame(v.currentRafs[d]),delete v.currentRafs[d],i(h,A.scissorX,A.scissorY,A.scissorWidth,A.viewBoxSize[1])),v.clearOnly||(A.count=2*E,A.offset=2*k*x,g(A),k*x+E<y&&(v.currentRafs[d]=window.requestAnimationFrame(function(){S(k+1)})),v.drawCompleted=!1)}(0)}function a(h,g){for(var v=new Array(256),x=0;x<256;x++)v[x]=h(x/255).concat(g);return v}function s(h,g){return(h>>>8*g)%256/255}function l(h,g,v){for(var x=new Array(8*g),y=0,A=0;A<g;A++)for(var d=0;d<2;d++)for(var S=0;S<4;S++){var k=4*h+S,E=v[64*A+k];k===63&&d===0&&(E*=-1),x[y++]=E}return x}function u(h){var g="0"+h;return g.substr(g.length-2)}function p(h){return h<r?"p"+u(h+1)+"_"+u(h+4):"colors"}function f(h,g,v,x,y,A,d,S,k,E,L,O,P,F){for(var U=[[],[]],I=0;I<64;I++)U[0][I]=I===y?1:0,U[1][I]=I===A?1:0;d*=F,S*=F,k*=F,E*=F;var N=h.lines.canvasOverdrag*F,W=h.domain,B=h.canvasWidth*F,V=h.canvasHeight*F,q=h.pad.l*F,ne=h.pad.b*F,$=h.layoutHeight*F,K=h.layoutWidth*F,ee=h.deselectedLines.color,J=h.deselectedLines.opacity;return w.extendFlat({key:L,resolution:[B,V],viewBoxPos:[d+N,S],viewBoxSize:[k,E],i0:y,i1:A,dim0A:U[0].slice(0,16),dim0B:U[0].slice(16,32),dim0C:U[0].slice(32,48),dim0D:U[0].slice(48,64),dim1A:U[1].slice(0,16),dim1B:U[1].slice(16,32),dim1C:U[1].slice(32,48),dim1D:U[1].slice(48,64),drwLayer:O,contextColor:[ee[0]/255,ee[1]/255,ee[2]/255,J!=="auto"?ee[3]*J:Math.max(.00392156862745098,Math.pow(1/h.lines.color.length,.3333333333333333))],scissorX:(x===g?0:d+N)+(q-N)+K*W.x[0],scissorWidth:(x===v?B-d+N:k+.5)+(x===g?d+N:0),scissorY:S+ne+$*W.y[0],scissorHeight:E,viewportX:q-N+K*W.x[0],viewportY:ne+$*W.y[0],viewportWidth:B,viewportHeight:V},P)}function m(h){var g=2047,v=Math.max(0,Math.floor(h[0]*g),0),x=Math.min(g,Math.ceil(h[1]*g),g);return[Math.min(v,x),Math.max(v,x)]}R.exports=function(h,g){var v,x,y,A,d,S=g.context,k=g.pick,E=g.regl,L=E._gl,O=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),P=Math.max(O[0],Math.min(O[1],g.viewModel.plotGlPixelRatio)),F={currentRafs:{},drawCompleted:!0,clearOnly:!1},U=function(V){for(var q={},ne=0;ne<=r;ne+=4)q[p(ne)]=V.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return q}(E),I=E.texture(t),N=[];B(g);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:_,frag:T,primitive:"lines",lineWidth:P,attributes:U,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:I,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function B(V){v=V.model,x=V.viewModel,y=x.dimensions.slice(),A=y[0]?y[0].values.length:0;var q=v.lines,ne=k?q.color.map(function(K,ee){return ee/q.color.length}):q.color,$=function(K,ee,J){for(var Z,te=new Array(K*(r+4)),oe=0,se=0;se<K;se++){for(var ce=0;ce<r;ce++)te[oe++]=ce<ee.length?ee[ce].paddedUnitValues[se]:.5;te[oe++]=s(se,2),te[oe++]=s(se,1),te[oe++]=s(se,0),te[oe++]=(Z=J[se],Math.max(b,Math.min(.999999,Z)))}return te}(A,y,ne);(function(K,ee,J){for(var Z=0;Z<=r;Z+=4)K[p(Z)](l(Z/4,ee,J))})(U,A,$),S||k||(I=E.texture(w.extendFlat({data:a(v.unitToColor,255)},t)))}return{render:function(V,q,ne){var $,K,ee,J=V.length,Z=1/0,te=-1/0;for($=0;$<J;$++)V[$].dim0.canvasX<Z&&(Z=V[$].dim0.canvasX,K=$),V[$].dim1.canvasX>te&&(te=V[$].dim1.canvasX,ee=$);J===0&&i(E,0,0,v.canvasWidth,v.canvasHeight);var oe=function(de){var ae,re,he,Se=[[],[]];for(he=0;he<64;he++){var xe=!de&&he<y.length?y[he].brush.filter.getBounds():[-1/0,1/0];Se[0][he]=xe[0],Se[1][he]=xe[1]}var Te=new Array(16384);for(ae=0;ae<16384;ae++)Te[ae]=255;if(!de)for(ae=0;ae<y.length;ae++){var Ae=ae%8,Pe=(ae-Ae)/8,De=Math.pow(2,Ae),ve=y[ae].brush.filter.get();if(!(ve.length<2)){var we=m(ve[0])[1];for(re=1;re<ve.length;re++){var Ee=m(ve[re]);for(he=we+1;he<Ee[0];he++)Te[8*he+Pe]&=~De;we=Math.max(we,Ee[1])}}}var Fe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Te};return d?d(Fe):d=E.texture(Fe),{maskTexture:d,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for($=0;$<J;$++){var se=V[$],ce=se.dim0.crossfilterDimensionIndex,ye=se.dim1.crossfilterDimensionIndex,me=se.canvasX,fe=se.canvasY,pe=me+se.panelSizeX,ge=se.plotGlPixelRatio;if(q||!N[ce]||N[ce][0]!==me||N[ce][1]!==pe){N[ce]=[me,pe];var ke=f(v,K,ee,$,ce,ye,me,fe,se.panelSizeX,se.panelSizeY,se.dim0.crossfilterDimensionIndex,S?0:k?2:1,oe,ge);F.clearOnly=ne;var Ce=q?v.lines.blockLineCount:A;n(E,W,F,Ce,A,ke)}}},readPixel:function(V,q){return E.read({x:V,y:q,width:1,height:1,data:o}),o},readPixels:function(V,q,ne,$){var K=new Uint8Array(4*ne*$);return E.read({x:V,y:q,width:ne,height:$,data:K}),K},destroy:function(){for(var V in h.style["pointer-events"]="none",I.destroy(),d&&d.destroy(),U)U[V].destroy()},update:B}}},26284:function(R){"use strict";R.exports=function(C,e,_,T){var r,w;for(T||(T=1/0),r=0;r<e.length;r++)(w=e[r]).visible&&(T=Math.min(T,w[_].length));for(T===1/0&&(T=0),C._length=T,r=0;r<e.length;r++)(w=e[r]).visible&&(w._length=T);return T}},36336:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.isArrayOrTypedArray,w=T.numberFormat,b=e(96824),c=e(54460),o=T.strRotate,t=T.strTranslate,i=e(72736),n=e(43616),a=e(8932),s=e(71688),l=s.keyFun,u=s.repeat,p=s.unwrap,f=e(95724),m=e(30140),h=e(71864),g=e(51352);function v(W,B,V){return T.aggNums(W,null,B,V)}function x(W,B){return A(v(Math.min,W,B),v(Math.max,W,B))}function y(W){var B=W.range;return B?A(B[0],B[1]):x(W.values,W._length)}function A(W,B){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(B)&&isFinite(B)||(B=0),W===B&&(W===0?(W-=1,B+=1):(W*=.9,B*=1.1)),[W,B]}function d(W,B,V,q,ne){var $,K,ee=y(V);return q?_.scale.ordinal().domain(q.map(($=w(V.tickformat),K=ne,K?function(J,Z){var te=K[Z];return te??$(J)}:$))).range(q.map(function(J){var Z=(J-ee[0])/(ee[1]-ee[0]);return W-B+Z*(2*B-W)})):_.scale.linear().domain(ee).range([W-B,B])}function S(W){if(W.tickvals){var B=y(W);return _.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(V){return(V-B[0])/(B[1]-B[0])}))}}function k(W){var B=W.map(function(ne){return ne[0]}),V=W.map(function(ne){var $=b(ne[1]);return _.rgb("rgb("+$[0]+","+$[1]+","+$[2]+")")}),q="rgb".split("").map(function(ne){return _.scale.linear().clamp(!0).domain(B).range(V.map(($=ne,function(K){return K[$]})));var $});return function(ne){return q.map(function($){return $(ne)})}}function E(W){return W.dimensions.some(function(B){return B.brush.filterSpecified})}function L(W,B,V){var q=p(B),ne=q.trace,$=f.convertTypedArray(q.lineColor),K=ne.line,ee={color:b(ne.unselected.line.color),opacity:ne.unselected.line.opacity},J=a.extractOpts(K),Z=J.reversescale?a.flipScale(q.cscale):q.cscale,te=ne.domain,oe=ne.dimensions,se=W.width,ce=ne.labelangle,ye=ne.labelside,me=ne.labelfont,fe=ne.tickfont,pe=ne.rangefont,ge=T.extendDeepNoArrays({},K,{color:$.map(_.scale.linear().domain(y({values:$,range:[J.min,J.max],_length:ne._length}))),blockLineCount:m.blockLineCount,canvasOverdrag:m.overdrag*m.canvasPixelRatio}),ke=Math.floor(se*(te.x[1]-te.x[0])),Ce=Math.floor(W.height*(te.y[1]-te.y[0])),de=W.margin||{l:80,r:80,t:100,b:80},ae=ke,re=Ce;return{key:V,colCount:oe.filter(f.isVisible).length,dimensions:oe,tickDistance:m.tickDistance,unitToColor:k(Z),lines:ge,deselectedLines:ee,labelAngle:ce,labelSide:ye,labelFont:me,tickFont:fe,rangeFont:pe,layoutWidth:se,layoutHeight:W.height,domain:te,translateX:te.x[0]*se,translateY:W.height-te.y[1]*W.height,pad:de,canvasWidth:ae*m.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:re*m.canvasPixelRatio,width:ae,height:re,canvasPixelRatio:m.canvasPixelRatio}}function O(W,B,V){var q=V.width,ne=V.height,$=V.dimensions,K=V.canvasPixelRatio,ee=function(se){return q*se/Math.max(1,V.colCount-1)},J=m.verticalPadding/ne,Z=function(se,ce){return _.scale.linear().range([ce,se-ce])}(ne,m.verticalPadding),te={key:V.key,xScale:ee,model:V,inBrushDrag:!1},oe={};return te.dimensions=$.filter(f.isVisible).map(function(se,ce){var ye=function(Ae,Pe){return _.scale.linear().domain(y(Ae)).range([Pe,1-Pe])}(se,J),me=oe[se.label];oe[se.label]=(me||0)+1;var fe=se.label+(me?"__"+me:""),pe=se.constraintrange,ge=pe&&pe.length;ge&&!r(pe[0])&&(pe=[pe]);var ke=ge?pe.map(function(Ae){return Ae.map(ye)}):[[-1/0,1/0]],Ce=se.values;Ce.length>se._length&&(Ce=Ce.slice(0,se._length));var de,ae=se.tickvals;function re(Ae,Pe){return{val:Ae,text:de[Pe]}}function he(Ae,Pe){return Ae.val-Pe.val}if(r(ae)&&ae.length){T.isTypedArray(ae)&&(ae=Array.from(ae)),de=se.ticktext,r(de)&&de.length?de.length>ae.length?de=de.slice(0,ae.length):ae.length>de.length&&(ae=ae.slice(0,de.length)):de=ae.map(w(se.tickformat));for(var Se=1;Se<ae.length;Se++)if(ae[Se]<ae[Se-1]){for(var xe=ae.map(re).sort(he),Te=0;Te<ae.length;Te++)ae[Te]=xe[Te].val,de[Te]=xe[Te].text;break}}else ae=void 0;return Ce=f.convertTypedArray(Ce),{key:fe,label:se.label,tickFormat:se.tickformat,tickvals:ae,ticktext:de,ordinal:f.isOrdinal(se),multiselect:se.multiselect,xIndex:ce,crossfilterDimensionIndex:ce,visibleIndex:se._index,height:ne,values:Ce,paddedUnitValues:Ce.map(ye),unitTickvals:ae&&ae.map(ye),xScale:ee,x:ee(ce),canvasX:ee(ce)*K,unitToPaddedPx:Z,domainScale:d(ne,m.verticalPadding,se,ae,de),ordinalScale:S(se),parent:te,model:V,brush:h.makeBrush(W,ge,ke,function(){W.linePickActive(!1)},function(){var Ae=te;Ae.focusLayer&&Ae.focusLayer.render(Ae.panels,!0);var Pe=E(Ae);!W.contextShown()&&Pe?(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0),W.contextShown(!0)):W.contextShown()&&!Pe&&(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0,!0),W.contextShown(!1))},function(Ae){if(te.focusLayer.render(te.panels,!0),te.pickLayer&&te.pickLayer.render(te.panels,!0),W.linePickActive(!0),B&&B.filterChanged){var Pe=ye.invert,De=Ae.map(function(ve){return ve.map(Pe).sort(T.sorterAsc)}).sort(function(ve,we){return ve[0]-we[0]});B.filterChanged(te.key,se._index,De)}})}}),te}function P(W){W.classed(m.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F(W,B){var V=B==="top"?1:-1,q=W*Math.PI/180;return{dir:V,dx:Math.sin(q),dy:Math.cos(q),degrees:W}}function U(W,B,V){for(var q=B.panels||(B.panels=[]),ne=W.data(),$=0;$<ne.length-1;$++){var K=q[$]||(q[$]={}),ee=ne[$],J=ne[$+1];K.dim0=ee,K.dim1=J,K.canvasX=ee.canvasX,K.panelSizeX=J.canvasX-ee.canvasX,K.panelSizeY=B.model.canvasHeight,K.y=0,K.canvasY=0,K.plotGlPixelRatio=V}}function I(W,B){return c.tickText(W._ax,B,!1).text}function N(W,B){if(W.ordinal)return"";var V=W.domainScale.domain(),q=V[B?V.length-1:0];return I(W.model.dimensions[W.visibleIndex],q)}R.exports=function(W,B,V,q){var ne=W._context.staticPlot,$=W._fullLayout,K=$._toppaper,ee=$._glcontainer,J=W._context.plotGlPixelRatio,Z=W._fullLayout.paper_bgcolor;(function(Ae){for(var Pe=0;Pe<Ae.length;Pe++)for(var De=0;De<Ae[Pe].length;De++)for(var ve=Ae[Pe][De].trace,we=ve.dimensions,Ee=0;Ee<we.length;Ee++){var Fe=we[Ee].values,Le=we[Ee]._ax;Le&&(Le.range?Le.range=A(Le.range[0],Le.range[1]):Le.range=x(Fe,ve._length),Le.dtick||(Le.dtick=.01*(Math.abs(Le.range[1]-Le.range[0])||1)),Le.tickformat=we[Ee].tickformat,c.calcTicks(Le),Le.cleanRange())}})(B);var te,oe,se=(te=!0,oe=!1,{linePickActive:function(Ae){return arguments.length?te=!!Ae:te},contextShown:function(Ae){return arguments.length?oe=!!Ae:oe}}),ce=B.filter(function(Ae){return p(Ae).trace.visible}).map(L.bind(0,V)).map(O.bind(0,se,q));ee.each(function(Ae,Pe){return T.extendFlat(Ae,ce[Pe])});var ye=ee.selectAll(".gl-canvas").each(function(Ae){Ae.viewModel=ce[0],Ae.viewModel.plotGlPixelRatio=J,Ae.viewModel.paperColor=Z,Ae.model=Ae.viewModel?Ae.viewModel.model:null}),me=null;ye.filter(function(Ae){return Ae.pick}).style("pointer-events",ne?"none":"auto").on("mousemove",function(Ae){if(se.linePickActive()&&Ae.lineLayer&&q&&q.hover){var Pe=_.event,De=this.width,ve=this.height,we=_.mouse(this),Ee=we[0],Fe=we[1];if(Ee<0||Fe<0||Ee>=De||Fe>=ve)return;var Le=Ae.lineLayer.readPixel(Ee,ve-1-Fe),je=Le[3]!==0,Ge=je?Le[2]+256*(Le[1]+256*Le[0]):null,Je={x:Ee,y:Fe,clientX:Pe.clientX,clientY:Pe.clientY,dataIndex:Ae.model.key,curveNumber:Ge};Ge!==me&&(je?q.hover(Je):q.unhover&&q.unhover(Je),me=Ge)}}),ye.style("opacity",function(Ae){return Ae.pick?0:1}),K.style("background","rgba(255, 255, 255, 0)");var fe=K.selectAll("."+m.cn.parcoords).data(ce,l);fe.exit().remove(),fe.enter().append("g").classed(m.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),fe.attr("transform",function(Ae){return t(Ae.model.translateX,Ae.model.translateY)});var pe=fe.selectAll("."+m.cn.parcoordsControlView).data(u,l);pe.enter().append("g").classed(m.cn.parcoordsControlView,!0),pe.attr("transform",function(Ae){return t(Ae.model.pad.l,Ae.model.pad.t)});var ge=pe.selectAll("."+m.cn.yAxis).data(function(Ae){return Ae.dimensions},l);ge.enter().append("g").classed(m.cn.yAxis,!0),pe.each(function(Ae){U(ge,Ae,J)}),ye.each(function(Ae){if(Ae.viewModel){!Ae.lineLayer||q?Ae.lineLayer=g(this,Ae):Ae.lineLayer.update(Ae),(Ae.key||Ae.key===0)&&(Ae.viewModel[Ae.key]=Ae.lineLayer);var Pe=!Ae.context||q;Ae.lineLayer.render(Ae.viewModel.panels,Pe)}}),ge.attr("transform",function(Ae){return t(Ae.xScale(Ae.xIndex),0)}),ge.call(_.behavior.drag().origin(function(Ae){return Ae}).on("drag",function(Ae){var Pe=Ae.parent;se.linePickActive(!1),Ae.x=Math.max(-m.overdrag,Math.min(Ae.model.width+m.overdrag,_.event.x)),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,ge.sort(function(De,ve){return De.x-ve.x}).each(function(De,ve){De.xIndex=ve,De.x=Ae===De?De.x:De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio}),U(ge,Pe,J),ge.filter(function(De){return Math.abs(Ae.xIndex-De.xIndex)!==0}).attr("transform",function(De){return t(De.xScale(De.xIndex),0)}),_.select(this).attr("transform",t(Ae.x,0)),ge.each(function(De,ve,we){we===Ae.parent.key&&(Pe.dimensions[ve]=De)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!E(Pe)),Pe.focusLayer.render&&Pe.focusLayer.render(Pe.panels)}).on("dragend",function(Ae){var Pe=Ae.parent;Ae.x=Ae.xScale(Ae.xIndex),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,U(ge,Pe,J),_.select(this).attr("transform",function(De){return t(De.x,0)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!E(Pe)),Pe.focusLayer&&Pe.focusLayer.render(Pe.panels),Pe.pickLayer&&Pe.pickLayer.render(Pe.panels,!0),se.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(Pe.key,Pe.dimensions.map(function(De){return De.crossfilterDimensionIndex}))})),ge.exit().remove();var ke=ge.selectAll("."+m.cn.axisOverlays).data(u,l);ke.enter().append("g").classed(m.cn.axisOverlays,!0),ke.selectAll("."+m.cn.axis).remove();var Ce=ke.selectAll("."+m.cn.axis).data(u,l);Ce.enter().append("g").classed(m.cn.axis,!0),Ce.each(function(Ae){var Pe=Ae.model.height/Ae.model.tickDistance,De=Ae.domainScale,ve=De.domain();_.select(this).call(_.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Pe,Ae.tickFormat).tickValues(Ae.ordinal?ve:null).tickFormat(function(we){return f.isOrdinal(Ae)?we:I(Ae.model.dimensions[Ae.visibleIndex],we)}).scale(De)),n.font(Ce.selectAll("text"),Ae.model.tickFont)}),Ce.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Ce.selectAll("text").style("cursor","default");var de=ke.selectAll("."+m.cn.axisHeading).data(u,l);de.enter().append("g").classed(m.cn.axisHeading,!0);var ae=de.selectAll("."+m.cn.axisTitle).data(u,l);ae.enter().append("text").classed(m.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ne?"none":"auto"),ae.text(function(Ae){return Ae.label}).each(function(Ae){var Pe=_.select(this);n.font(Pe,Ae.model.labelFont),i.convertToTspans(Pe,W)}).attr("transform",function(Ae){var Pe=F(Ae.model.labelAngle,Ae.model.labelSide),De=m.axisTitleOffset;return(Pe.dir>0?"":t(0,2*De+Ae.model.height))+o(Pe.degrees)+t(-De*Pe.dx,-De*Pe.dy)}).attr("text-anchor",function(Ae){var Pe=F(Ae.model.labelAngle,Ae.model.labelSide);return 2*Math.abs(Pe.dx)>Math.abs(Pe.dy)?Pe.dir*Pe.dx<0?"start":"end":"middle"});var re=ke.selectAll("."+m.cn.axisExtent).data(u,l);re.enter().append("g").classed(m.cn.axisExtent,!0);var he=re.selectAll("."+m.cn.axisExtentTop).data(u,l);he.enter().append("g").classed(m.cn.axisExtentTop,!0),he.attr("transform",t(0,-m.axisExtentOffset));var Se=he.selectAll("."+m.cn.axisExtentTopText).data(u,l);Se.enter().append("text").classed(m.cn.axisExtentTopText,!0).call(P),Se.text(function(Ae){return N(Ae,!0)}).each(function(Ae){n.font(_.select(this),Ae.model.rangeFont)});var xe=re.selectAll("."+m.cn.axisExtentBottom).data(u,l);xe.enter().append("g").classed(m.cn.axisExtentBottom,!0),xe.attr("transform",function(Ae){return t(0,Ae.model.height+m.axisExtentOffset)});var Te=xe.selectAll("."+m.cn.axisExtentBottomText).data(u,l);Te.enter().append("text").classed(m.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),Te.text(function(Ae){return N(Ae,!1)}).each(function(Ae){n.font(_.select(this),Ae.model.rangeFont)}),h.ensureAxisBrush(ke,Z,W)}},24196:function(R,C,e){"use strict";var _=e(36336),T=e(5048),r=e(95724).isVisible,w={};function b(c,o,t){var i=o.indexOf(t),n=c.indexOf(i);return n===-1&&(n+=o.length),n}(R.exports=function(c,o){var t=c._fullLayout;if(T(c,[],w)){var i={},n={},a={},s={},l=t._size;o.forEach(function(u,p){var f=u[0].trace;a[p]=f.index;var m=s[p]=f._fullInput.index;i[p]=c.data[m].dimensions,n[p]=c.data[m].dimensions.slice()}),_(c,o,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,p,f){var m=n[u][p],h=f.map(function(d){return d.slice()}),g="dimensions["+p+"].constraintrange",v=t._tracePreGUI[c._fullData[a[u]]._fullInput.uid];if(v[g]===void 0){var x=m.constraintrange;v[g]=x||null}var y=c._fullData[a[u]].dimensions[p];h.length?(h.length===1&&(h=h[0]),m.constraintrange=h,y.constraintrange=h.slice(),h=[h]):(delete m.constraintrange,delete y.constraintrange,h=null);var A={};A[g]=h,c.emit("plotly_restyle",[A,[s[u]]])},hover:function(u){c.emit("plotly_hover",u)},unhover:function(u){c.emit("plotly_unhover",u)},axesMoved:function(u,p){var f=function(m,h){return function(g,v){return b(m,h,g)-b(m,h,v)}}(p,n[u].filter(r));i[u].sort(f),n[u].filter(function(m){return!r(m)}).sort(function(m){return n[u].indexOf(m)}).forEach(function(m){i[u].splice(i[u].indexOf(m),1),i[u].splice(n[u].indexOf(m),0,m)}),c.emit("plotly_restyle",[{dimensions:[i[u]]},[s[u]]])}})}}).reglPrecompiled=w},74996:function(R,C,e){"use strict";var _=e(45464),T=e(86968).u,r=e(25376),w=e(22548),b=e(21776).Ks,c=e(21776).Gw,o=e(92880).extendFlat,t=e(98192).c,i=r({editType:"plot",arrayOk:!0,colorEditType:"plot"});R.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:w.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:o({},_.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:c({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:o({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:o({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:T({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:o({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(R,C,e){"use strict";var _=e(7316);C.name="pie",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},45768:function(R,C,e){"use strict";var _=e(38248),T=e(49760),r=e(76308),w={};function b(o){return function(t,i){return!!t&&!!(t=T(t)).isValid()&&(t=r.addOpacity(t,t.getAlpha()),o[i]||(o[i]=t),t)}}function c(o,t){var i,n=JSON.stringify(o),a=t[n];if(!a){for(a=o.slice(),i=0;i<o.length;i++)a.push(T(o[i]).lighten(20).toHexString());for(i=0;i<o.length;i++)a.push(T(o[i]).darken(20).toHexString());t[n]=a}return a}R.exports={calc:function(o,t){var i,n,a=[],s=o._fullLayout,l=s.hiddenlabels||[],u=t.labels,p=t.marker.colors||[],f=t.values,m=t._length,h=t._hasValues&&m;if(t.dlabel)for(u=new Array(m),i=0;i<m;i++)u[i]=String(t.label0+i*t.dlabel);var g={},v=b(s["_"+t.type+"colormap"]),x=0,y=!1;for(i=0;i<m;i++){var A,d,S;if(h){if(A=f[i],!_(A))continue;A=+A}else A=1;(d=u[i])!==void 0&&d!==""||(d=i);var k=g[d=String(d)];k===void 0?(g[d]=a.length,(S=l.indexOf(d)!==-1)||(x+=A),a.push({v:A,label:d,color:v(p[i],d),i,pts:[i],hidden:S})):(y=!0,(n=a[k]).v+=A,n.pts.push(i),n.hidden||(x+=A),n.color===!1&&p[i]&&(n.color=v(p[i],d)))}return a=a.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?y:t.sort)&&a.sort(function(E,L){return L.v-E.v}),a[0]&&(a[0].vTotal=x),a},crossTraceCalc:function(o,t){var i=(t||{}).type;i||(i="pie");var n=o._fullLayout,a=o.calcdata,s=n[i+"colorway"],l=n["_"+i+"colormap"];n["extend"+i+"colors"]&&(s=c(s,w));for(var u=0,p=0;p<a.length;p++){var f=a[p];if(f[0].trace.type===i)for(var m=0;m<f.length;m++){var h=f[m];h.color===!1&&(l[h.label]?h.color=l[h.label]:(l[h.label]=h.color=s[u%s.length],u++))}}},makePullColorFn:b,generateExtendedColors:c}},74174:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(74996),w=e(86968).Q,b=e(31508).handleText,c=e(3400).coercePattern;function o(i,n){var a=T.isArrayOrTypedArray(i),s=T.isArrayOrTypedArray(n),l=Math.min(a?i.length:1/0,s?n.length:1/0);if(isFinite(l)||(l=0),l&&s){for(var u,p=0;p<l;p++){var f=n[p];if(_(f)&&f>0){u=!0;break}}u||(l=0)}return{hasLabels:a,hasValues:s,len:l}}function t(i,n,a,s,l){s("marker.line.width")&&s("marker.line.color",l?void 0:a.paper_bgcolor);var u=s("marker.colors");c(s,"marker.pattern",u),i.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=i.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=a.paper_bgcolor)}R.exports={handleLabelsAndValues:o,handleMarkerDefaults:t,supplyDefaults:function(i,n,a,s){function l(y,A){return T.coerce(i,n,r,y,A)}var u=o(l("labels"),l("values")),p=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),p){n._length=p,t(i,n,s,l,!0),l("scalegroup");var f,m=l("text"),h=l("texttemplate");if(h||(f=l("textinfo",T.isArrayOrTypedArray(m)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),h||f&&f!=="none"){var g=l("textposition");b(i,n,s,l,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||g==="auto"||g==="outside")&&l("automargin"),(g==="inside"||g==="auto"||Array.isArray(g))&&l("insidetextorientation")}else f==="none"&&l("textposition","none");w(n,s,l);var v=l("hole");if(l("title.text")){var x=l("title.position",v?"middle center":"top center");v||x!=="middle center"||(n.title.position="top center"),T.coerceFont(l,"title.font",s.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},53644:function(R,C,e){"use strict";var _=e(10624).appendArrayMultiPointValues;R.exports=function(T,r){var w={curveNumber:r.index,pointNumbers:T.pts,data:r._input,fullData:r,label:T.label,color:T.color,value:T.v,percent:T.percent,text:T.text,bbox:T.bbox,v:T.v};return T.pts.length===1&&(w.pointNumber=w.i=T.pts[0]),_(w,r,T.pts),r.type==="funnelarea"&&(delete w.v,delete w.i),w}},21552:function(R,C,e){"use strict";var _=e(43616),T=e(76308);R.exports=function(r,w,b,c){var o=b.marker.pattern;o&&o.shape?_.pointStyle(r,b,c,w):T.fill(r,w.color)}},69656:function(R,C,e){"use strict";var _=e(3400);function T(r){return r.indexOf("e")!==-1?r.replace(/[.]?0+e/,"e"):r.indexOf(".")!==-1?r.replace(/[.]?0+$/,""):r}C.formatPiePercent=function(r,w){var b=T((100*r).toPrecision(3));return _.numSeparate(b,w)+"%"},C.formatPieValue=function(r,w){var b=T(r.toPrecision(10));return _.numSeparate(b,w)},C.getFirstFilled=function(r,w){if(_.isArrayOrTypedArray(r))for(var b=0;b<w.length;b++){var c=r[w[b]];if(c||c===0||c==="")return c}},C.castOption=function(r,w){return _.isArrayOrTypedArray(r)?C.getFirstFilled(r,w):r||void 0},C.getRotationAngle=function(r){return(r==="auto"?0:r)*Math.PI/180}},75792:function(R,C,e){"use strict";R.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(R){"use strict";R.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(R,C,e){"use strict";var _=e(3400),T=e(85204);R.exports=function(r,w){function b(c,o){return _.coerce(r,w,T,c,o)}b("hiddenlabels"),b("piecolorway",w.colorway),b("extendpiecolors")}},37820:function(R,C,e){"use strict";var _=e(33428),T=e(7316),r=e(93024),w=e(76308),b=e(43616),c=e(3400),o=c.strScale,t=c.strTranslate,i=e(72736),n=e(82744),a=n.recordMinTextSize,s=n.clearMinTextSize,l=e(78048).TEXTPAD,u=e(69656),p=e(53644),f=e(3400).isValidTextValue;function m(W,B,V){var q=V[0],ne=q.cx,$=q.cy,K=q.trace,ee=K.type==="funnelarea";"_hasHoverLabel"in K||(K._hasHoverLabel=!1),"_hasHoverEvent"in K||(K._hasHoverEvent=!1),W.on("mouseover",function(J){var Z=B._fullLayout,te=B._fullData[K.index];if(!B._dragging&&Z.hovermode!==!1){var oe=te.hoverinfo;if(Array.isArray(oe)&&(oe=r.castHoverinfo({hoverinfo:[u.castOption(oe,J.pts)],_module:K._module},Z,0)),oe==="all"&&(oe="label+text+value+percent+name"),te.hovertemplate||oe!=="none"&&oe!=="skip"&&oe){var se=J.rInscribed||0,ce=ne+J.pxmid[0]*(1-se),ye=$+J.pxmid[1]*(1-se),me=Z.separators,fe=[];if(oe&&oe.indexOf("label")!==-1&&fe.push(J.label),J.text=u.castOption(te.hovertext||te.text,J.pts),oe&&oe.indexOf("text")!==-1){var pe=J.text;c.isValidTextValue(pe)&&fe.push(pe)}J.value=J.v,J.valueLabel=u.formatPieValue(J.v,me),oe&&oe.indexOf("value")!==-1&&fe.push(J.valueLabel),J.percent=J.v/q.vTotal,J.percentLabel=u.formatPiePercent(J.percent,me),oe&&oe.indexOf("percent")!==-1&&fe.push(J.percentLabel);var ge=te.hoverlabel,ke=ge.font,Ce=[];r.loneHover({trace:K,x0:ce-se*q.r,x1:ce+se*q.r,y:ye,_x0:ee?ne+J.TL[0]:ce-se*q.r,_x1:ee?ne+J.TR[0]:ce+se*q.r,_y0:ee?$+J.TL[1]:ye-se*q.r,_y1:ee?$+J.BL[1]:ye+se*q.r,text:fe.join("<br>"),name:te.hovertemplate||oe.indexOf("name")!==-1?te.name:void 0,idealAlign:J.pxmid[0]<0?"left":"right",color:u.castOption(ge.bgcolor,J.pts)||J.color,borderColor:u.castOption(ge.bordercolor,J.pts),fontFamily:u.castOption(ke.family,J.pts),fontSize:u.castOption(ke.size,J.pts),fontColor:u.castOption(ke.color,J.pts),nameLength:u.castOption(ge.namelength,J.pts),textAlign:u.castOption(ge.align,J.pts),hovertemplate:u.castOption(te.hovertemplate,J.pts),hovertemplateLabels:J,eventData:[p(J,te)]},{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:B,inOut_bbox:Ce}),J.bbox=Ce[0],K._hasHoverLabel=!0}K._hasHoverEvent=!0,B.emit("plotly_hover",{points:[p(J,te)],event:_.event})}}),W.on("mouseout",function(J){var Z=B._fullLayout,te=B._fullData[K.index],oe=_.select(this).datum();K._hasHoverEvent&&(J.originalEvent=_.event,B.emit("plotly_unhover",{points:[p(oe,te)],event:_.event}),K._hasHoverEvent=!1),K._hasHoverLabel&&(r.loneUnhover(Z._hoverlayer.node()),K._hasHoverLabel=!1)}),W.on("click",function(J){var Z=B._fullLayout,te=B._fullData[K.index];B._dragging||Z.hovermode===!1||(B._hoverdata=[p(J,te)],r.click(B,_.event))})}function h(W,B,V){var q=u.castOption(W.insidetextfont.color,B.pts);!q&&W._input.textfont&&(q=u.castOption(W._input.textfont.color,B.pts));var ne=u.castOption(W.insidetextfont.family,B.pts)||u.castOption(W.textfont.family,B.pts)||V.family,$=u.castOption(W.insidetextfont.size,B.pts)||u.castOption(W.textfont.size,B.pts)||V.size,K=u.castOption(W.insidetextfont.weight,B.pts)||u.castOption(W.textfont.weight,B.pts)||V.weight,ee=u.castOption(W.insidetextfont.style,B.pts)||u.castOption(W.textfont.style,B.pts)||V.style,J=u.castOption(W.insidetextfont.variant,B.pts)||u.castOption(W.textfont.variant,B.pts)||V.variant,Z=u.castOption(W.insidetextfont.textcase,B.pts)||u.castOption(W.textfont.textcase,B.pts)||V.textcase,te=u.castOption(W.insidetextfont.lineposition,B.pts)||u.castOption(W.textfont.lineposition,B.pts)||V.lineposition,oe=u.castOption(W.insidetextfont.shadow,B.pts)||u.castOption(W.textfont.shadow,B.pts)||V.shadow;return{color:q||w.contrast(B.color),family:ne,size:$,weight:K,style:ee,variant:J,textcase:Z,lineposition:te,shadow:oe}}function g(W,B){for(var V,q,ne=0;ne<W.length;ne++)if((q=(V=W[ne][0]).trace).title.text){var $=q.title.text;q._meta&&($=c.templateString($,q._meta));var K=b.tester.append("text").attr("data-notex",1).text($).call(b.font,q.title.font).call(i.convertToTspans,B),ee=b.bBox(K.node(),!0);V.titleBox={width:ee.width,height:ee.height},K.remove()}}function v(W,B,V){var q=V.r||B.rpx1,ne=B.rInscribed;if(B.startangle===B.stopangle)return{rCenter:1-ne,scale:0,rotate:0,textPosAngle:0};var $,K=B.ring,ee=K===1&&Math.abs(B.startangle-B.stopangle)===2*Math.PI,J=B.halfangle,Z=B.midangle,te=V.trace.insidetextorientation,oe=te==="horizontal",se=te==="tangential",ce=te==="radial",ye=te==="auto",me=[];if(!ye){var fe,pe=function(re,he){if(function(Ae,Pe){var De=Ae.startangle,ve=Ae.stopangle;return De>Pe&&Pe>ve||De<Pe&&Pe<ve}(B,re)){var Se=Math.abs(re-B.startangle),xe=Math.abs(re-B.stopangle),Te=Se<xe?Se:xe;($=he==="tan"?y(W,q,K,Te,0):x(W,q,K,Te,Math.PI/2)).textPosAngle=re,me.push($)}};if(oe||se){for(fe=4;fe>=-4;fe-=2)pe(Math.PI*fe,"tan");for(fe=4;fe>=-4;fe-=2)pe(Math.PI*(fe+1),"tan")}if(oe||ce){for(fe=4;fe>=-4;fe-=2)pe(Math.PI*(fe+1.5),"rad");for(fe=4;fe>=-4;fe-=2)pe(Math.PI*(fe+.5),"rad")}}if(ee||ye||oe){var ge=Math.sqrt(W.width*W.width+W.height*W.height);if(($={scale:ne*q*2/ge,rCenter:1-ne,rotate:0}).textPosAngle=(B.startangle+B.stopangle)/2,$.scale>=1)return $;me.push($)}(ye||ce)&&(($=x(W,q,K,J,Z)).textPosAngle=(B.startangle+B.stopangle)/2,me.push($)),(ye||se)&&(($=y(W,q,K,J,Z)).textPosAngle=(B.startangle+B.stopangle)/2,me.push($));for(var ke=0,Ce=0,de=0;de<me.length;de++){var ae=me[de].scale;if(Ce<ae&&(Ce=ae,ke=de),!ye&&Ce>=1)break}return me[ke]}function x(W,B,V,q,ne){B=Math.max(0,B-2*l);var $=W.width/W.height,K=S($,q,B,V);return{scale:2*K/W.height,rCenter:A($,K/B),rotate:d(ne)}}function y(W,B,V,q,ne){B=Math.max(0,B-2*l);var $=W.height/W.width,K=S($,q,B,V);return{scale:2*K/W.width,rCenter:A($,K/B),rotate:d(ne+Math.PI/2)}}function A(W,B){return Math.cos(B)-W*B}function d(W){return(180/Math.PI*W+720)%180-90}function S(W,B,V,q){var ne=W+1/(2*Math.tan(B));return V*Math.min(1/(Math.sqrt(ne*ne+.5)+ne),q/(Math.sqrt(W*W+q/2)+W))}function k(W,B){return W.v!==B.vTotal||B.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,B){var V=B.pxmid[0],q=B.pxmid[1],ne=W.width/2,$=W.height/2;return V<0&&(ne*=-1),q<0&&($*=-1),{scale:1,rCenter:1,rotate:0,x:ne+Math.abs($)*(ne>0?1:-1)/2,y:$/(1+V*V/(q*q)),outside:!0}}function L(W,B){var V,q,ne,$=W.trace,K={x:W.cx,y:W.cy},ee={tx:0,ty:0};ee.ty+=$.title.font.size,ne=P($),$.title.position.indexOf("top")!==-1?(K.y-=(1+ne)*W.r,ee.ty-=W.titleBox.height):$.title.position.indexOf("bottom")!==-1&&(K.y+=(1+ne)*W.r);var J,Z=W.r/((J=W.trace.aspectratio)===void 0?1:J),te=B.w*($.domain.x[1]-$.domain.x[0])/2;return $.title.position.indexOf("left")!==-1?(te+=Z,K.x-=(1+ne)*Z,ee.tx+=W.titleBox.width/2):$.title.position.indexOf("center")!==-1?te*=2:$.title.position.indexOf("right")!==-1&&(te+=Z,K.x+=(1+ne)*Z,ee.tx-=W.titleBox.width/2),V=te/W.titleBox.width,q=O(W,B)/W.titleBox.height,{x:K.x,y:K.y,scale:Math.min(V,q),tx:ee.tx,ty:ee.ty}}function O(W,B){var V=W.trace,q=B.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(W.titleBox.height,q/2)}function P(W){var B,V=W.pull;if(!V)return 0;if(c.isArrayOrTypedArray(V))for(V=0,B=0;B<W.pull.length;B++)W.pull[B]>V&&(V=W.pull[B]);return V}function F(W,B){for(var V=[],q=0;q<W.length;q++){var ne=W[q][0],$=ne.trace,K=$.domain,ee=B.w*(K.x[1]-K.x[0]),J=B.h*(K.y[1]-K.y[0]);$.title.text&&$.title.position!=="middle center"&&(J-=O(ne,B));var Z=ee/2,te=J/2;$.type!=="funnelarea"||$.scalegroup||(te/=$.aspectratio),ne.r=Math.min(Z,te)/(1+P($)),ne.cx=B.l+B.w*($.domain.x[1]+$.domain.x[0])/2,ne.cy=B.t+B.h*(1-$.domain.y[0])-J/2,$.title.text&&$.title.position.indexOf("bottom")!==-1&&(ne.cy-=O(ne,B)),$.scalegroup&&V.indexOf($.scalegroup)===-1&&V.push($.scalegroup)}(function(oe,se){for(var ce,ye,me,fe=0;fe<se.length;fe++){var pe=1/0,ge=se[fe];for(ye=0;ye<oe.length;ye++)if((me=(ce=oe[ye][0]).trace).scalegroup===ge){var ke;if(me.type==="pie")ke=ce.r*ce.r;else if(me.type==="funnelarea"){var Ce,de;me.aspectratio>1?de=(Ce=ce.r)/me.aspectratio:Ce=(de=ce.r)*me.aspectratio,ke=(Ce*=(1+me.baseratio)/2)*de}pe=Math.min(pe,ke/ce.vTotal)}for(ye=0;ye<oe.length;ye++)if((me=(ce=oe[ye][0]).trace).scalegroup===ge){var ae=pe*ce.vTotal;me.type==="funnelarea"&&(ae/=(1+me.baseratio)/2,ae/=me.aspectratio),ce.r=Math.sqrt(ae)}}})(W,V)}function U(W,B){return[W*Math.sin(B),-W*Math.cos(B)]}function I(W,B,V){var q=W._fullLayout,ne=V.trace,$=ne.texttemplate,K=ne.textinfo;if(!$&&K&&K!=="none"){var ee,J=K.split("+"),Z=function(ke){return J.indexOf(ke)!==-1},te=Z("label"),oe=Z("text"),se=Z("value"),ce=Z("percent"),ye=q.separators;if(ee=te?[B.label]:[],oe){var me=u.getFirstFilled(ne.text,B.pts);f(me)&&ee.push(me)}se&&ee.push(u.formatPieValue(B.v,ye)),ce&&ee.push(u.formatPiePercent(B.v/V.vTotal,ye)),B.text=ee.join("<br>")}if($){var fe=c.castOption(ne,B.i,"texttemplate");if(fe){var pe=function(ke){return{label:ke.label,value:ke.v,valueLabel:u.formatPieValue(ke.v,q.separators),percent:ke.v/V.vTotal,percentLabel:u.formatPiePercent(ke.v/V.vTotal,q.separators),color:ke.color,text:ke.text,customdata:c.castOption(ne,ke.i,"customdata")}}(B),ge=u.getFirstFilled(ne.text,B.pts);(f(ge)||ge==="")&&(pe.text=ge),B.text=c.texttemplateString(fe,pe,W._fullLayout._d3locale,pe,ne._meta||{})}else B.text=""}}function N(W,B){var V=W.rotate*Math.PI/180,q=Math.cos(V),ne=Math.sin(V),$=(B.left+B.right)/2,K=(B.top+B.bottom)/2;W.textX=$*q-K*ne,W.textY=$*ne+K*q,W.noCenter=!0}R.exports={plot:function(W,B){var V=W._context.staticPlot,q=W._fullLayout,ne=q._size;s("pie",q),g(B,W),F(B,ne);var $=c.makeTraceGroups(q._pielayer,B,"trace").each(function(K){var ee=_.select(this),J=K[0],Z=J.trace;(function(te){var oe,se,ce,ye=te[0],me=ye.r,fe=ye.trace,pe=u.getRotationAngle(fe.rotation),ge=2*Math.PI/ye.vTotal,ke="px0",Ce="px1";if(fe.direction==="counterclockwise"){for(oe=0;oe<te.length&&te[oe].hidden;oe++);if(oe===te.length)return;pe+=ge*te[oe].v,ge*=-1,ke="px1",Ce="px0"}for(ce=U(me,pe),oe=0;oe<te.length;oe++)(se=te[oe]).hidden||(se[ke]=ce,se.startangle=pe,pe+=ge*se.v/2,se.pxmid=U(me,pe),se.midangle=pe,ce=U(me,pe+=ge*se.v/2),se.stopangle=pe,se[Ce]=ce,se.largeArc=se.v>ye.vTotal/2?1:0,se.halfangle=Math.PI*Math.min(se.v/ye.vTotal,.5),se.ring=1-fe.hole,se.rInscribed=k(se,ye))})(K),ee.attr("stroke-linejoin","round"),ee.each(function(){var te=_.select(this).selectAll("g.slice").data(K);te.enter().append("g").classed("slice",!0),te.exit().remove();var oe=[[[],[]],[[],[]]],se=!1;te.each(function(Ce,de){if(Ce.hidden)_.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=Z.index,oe[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var ae=J.cx,re=J.cy,he=_.select(this),Se=he.selectAll("path.surface").data([Ce]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),he.call(m,W,K),Z.pull){var xe=+u.castOption(Z.pull,Ce.pts)||0;xe>0&&(ae+=xe*Ce.pxmid[0],re+=xe*Ce.pxmid[1])}Ce.cxFinal=ae,Ce.cyFinal=re;var Te=Z.hole;if(Ce.v===J.vTotal){var Ae="M"+(ae+Ce.px0[0])+","+(re+Ce.px0[1])+Ee(Ce.px0,Ce.pxmid,!0,1)+Ee(Ce.pxmid,Ce.px0,!0,1)+"Z";Te?Se.attr("d","M"+(ae+Te*Ce.px0[0])+","+(re+Te*Ce.px0[1])+Ee(Ce.px0,Ce.pxmid,!1,Te)+Ee(Ce.pxmid,Ce.px0,!1,Te)+"Z"+Ae):Se.attr("d",Ae)}else{var Pe=Ee(Ce.px0,Ce.px1,!0,1);if(Te){var De=1-Te;Se.attr("d","M"+(ae+Te*Ce.px1[0])+","+(re+Te*Ce.px1[1])+Ee(Ce.px1,Ce.px0,!1,Te)+"l"+De*Ce.px0[0]+","+De*Ce.px0[1]+Pe+"Z")}else Se.attr("d","M"+ae+","+re+"l"+Ce.px0[0]+","+Ce.px0[1]+Pe+"Z")}I(W,Ce,J);var ve=u.castOption(Z.textposition,Ce.pts),we=he.selectAll("g.slicetext").data(Ce.text&&ve!=="none"?[0]:[]);we.enter().append("g").classed("slicetext",!0),we.exit().remove(),we.each(function(){var Fe=c.ensureSingle(_.select(this),"text","",function(_t){_t.attr("data-notex",1)}),Le=c.ensureUniformFontSize(W,ve==="outside"?function(_t,mt,tt){return{color:u.castOption(_t.outsidetextfont.color,mt.pts)||u.castOption(_t.textfont.color,mt.pts)||tt.color,family:u.castOption(_t.outsidetextfont.family,mt.pts)||u.castOption(_t.textfont.family,mt.pts)||tt.family,size:u.castOption(_t.outsidetextfont.size,mt.pts)||u.castOption(_t.textfont.size,mt.pts)||tt.size,weight:u.castOption(_t.outsidetextfont.weight,mt.pts)||u.castOption(_t.textfont.weight,mt.pts)||tt.weight,style:u.castOption(_t.outsidetextfont.style,mt.pts)||u.castOption(_t.textfont.style,mt.pts)||tt.style,variant:u.castOption(_t.outsidetextfont.variant,mt.pts)||u.castOption(_t.textfont.variant,mt.pts)||tt.variant,textcase:u.castOption(_t.outsidetextfont.textcase,mt.pts)||u.castOption(_t.textfont.textcase,mt.pts)||tt.textcase,lineposition:u.castOption(_t.outsidetextfont.lineposition,mt.pts)||u.castOption(_t.textfont.lineposition,mt.pts)||tt.lineposition,shadow:u.castOption(_t.outsidetextfont.shadow,mt.pts)||u.castOption(_t.textfont.shadow,mt.pts)||tt.shadow}}(Z,Ce,q.font):h(Z,Ce,q.font));Fe.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Le).call(i.convertToTspans,W);var je,Ge=b.bBox(Fe.node());if(ve==="outside")je=E(Ge,Ce);else if(je=v(Ge,Ce,J),ve==="auto"&&je.scale<1){var Je=c.ensureUniformFontSize(W,Z.outsidetextfont);Fe.call(b.font,Je),je=E(Ge=b.bBox(Fe.node()),Ce)}var rt=je.textPosAngle,ot=rt===void 0?Ce.pxmid:U(J.r,rt);if(je.targetX=ae+ot[0]*je.rCenter+(je.x||0),je.targetY=re+ot[1]*je.rCenter+(je.y||0),N(je,Ge),je.outside){var yt=je.targetY;Ce.yLabelMin=yt-Ge.height/2,Ce.yLabelMid=yt,Ce.yLabelMax=yt+Ge.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,se=!0}je.fontSize=Le.size,a(Z.type,je,q),K[de].transform=je,c.setTransormAndDisplay(Fe,je)})}function Ee(Fe,Le,je,Ge){var Je=Ge*(Le[0]-Fe[0]),rt=Ge*(Le[1]-Fe[1]);return"a"+Ge*J.r+","+Ge*J.r+" 0 "+Ce.largeArc+(je?" 1 ":" 0 ")+Je+","+rt}});var ce=_.select(this).selectAll("g.titletext").data(Z.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Ce,de=c.ensureSingle(_.select(this),"text","",function(re){re.attr("data-notex",1)}),ae=Z.title.text;Z._meta&&(ae=c.templateString(ae,Z._meta)),de.text(ae).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,Z.title.font).call(i.convertToTspans,W),Ce=Z.title.position==="middle center"?function(re){var he=Math.sqrt(re.titleBox.width*re.titleBox.width+re.titleBox.height*re.titleBox.height);return{x:re.cx,y:re.cy,scale:re.trace.hole*re.r*2/he,tx:0,ty:-re.titleBox.height/2+re.trace.title.font.size}}(J):L(J,ne),de.attr("transform",t(Ce.x,Ce.y)+o(Math.min(1,Ce.scale))+t(Ce.tx,Ce.ty))}),se&&function(Ce,de){var ae,re,he,Se,xe,Te,Ae,Pe,De,ve,we,Ee,Fe;function Le(rt,ot){return rt.pxmid[1]-ot.pxmid[1]}function je(rt,ot){return ot.pxmid[1]-rt.pxmid[1]}function Ge(rt,ot){ot||(ot={});var yt,_t,mt,tt,Qe=ot.labelExtraY+(re?ot.yLabelMax:ot.yLabelMin),Dt=re?rt.yLabelMin:rt.yLabelMax,zt=re?rt.yLabelMax:rt.yLabelMin,pt=rt.cyFinal+xe(rt.px0[1],rt.px1[1]),vt=Qe-Dt;if(vt*Ae>0&&(rt.labelExtraY=vt),c.isArrayOrTypedArray(de.pull))for(_t=0;_t<ve.length;_t++)(mt=ve[_t])===rt||(u.castOption(de.pull,rt.pts)||0)>=(u.castOption(de.pull,mt.pts)||0)||((rt.pxmid[1]-mt.pxmid[1])*Ae>0?(vt=mt.cyFinal+xe(mt.px0[1],mt.px1[1])-Dt-rt.labelExtraY)*Ae>0&&(rt.labelExtraY+=vt):(zt+rt.labelExtraY-pt)*Ae>0&&(yt=3*Te*Math.abs(_t-ve.indexOf(rt)),(tt=mt.cxFinal+Se(mt.px0[0],mt.px1[0])+yt-(rt.cxFinal+rt.pxmid[0])-rt.labelExtraX)*Te>0&&(rt.labelExtraX+=tt)))}for(re=0;re<2;re++)for(he=re?Le:je,xe=re?Math.max:Math.min,Ae=re?1:-1,ae=0;ae<2;ae++){for(Se=ae?Math.max:Math.min,Te=ae?1:-1,(Pe=Ce[re][ae]).sort(he),De=Ce[1-re][ae],ve=De.concat(Pe),Ee=[],we=0;we<Pe.length;we++)Pe[we].yLabelMid!==void 0&&Ee.push(Pe[we]);for(Fe=!1,we=0;re&&we<De.length;we++)if(De[we].yLabelMid!==void 0){Fe=De[we];break}for(we=0;we<Ee.length;we++){var Je=we&&Ee[we-1];Fe&&!we&&(Je=Fe),Ge(Ee[we],Je)}}}(oe,Z),function(Ce,de){Ce.each(function(ae){var re=_.select(this);if(ae.labelExtraX||ae.labelExtraY){var he=re.select("g.slicetext text");ae.transform.targetX+=ae.labelExtraX,ae.transform.targetY+=ae.labelExtraY,c.setTransormAndDisplay(he,ae.transform);var Se=ae.cxFinal+ae.pxmid[0],xe="M"+Se+","+(ae.cyFinal+ae.pxmid[1]),Te=(ae.yLabelMax-ae.yLabelMin)*(ae.pxmid[0]<0?-1:1)/4;if(ae.labelExtraX){var Ae=ae.labelExtraX*ae.pxmid[1]/ae.pxmid[0],Pe=ae.yLabelMid+ae.labelExtraY-(ae.cyFinal+ae.pxmid[1]);Math.abs(Ae)>Math.abs(Pe)?xe+="l"+Pe*ae.pxmid[0]/ae.pxmid[1]+","+Pe+"H"+(Se+ae.labelExtraX+Te):xe+="l"+ae.labelExtraX+","+Ae+"v"+(Pe-Ae)+"h"+Te}else xe+="V"+(ae.yLabelMid+ae.labelExtraY)+"h"+Te;c.ensureSingle(re,"path","textline").call(w.stroke,de.outsidetextfont.color).attr({"stroke-width":Math.min(2,de.outsidetextfont.size/8),d:xe,fill:"none"})}else re.select("path.textline").remove()})}(te,Z),se&&Z.automargin){var ye=b.bBox(ee.node()),me=Z.domain,fe=ne.w*(me.x[1]-me.x[0]),pe=ne.h*(me.y[1]-me.y[0]),ge=(.5*fe-J.r)/ne.w,ke=(.5*pe-J.r)/ne.h;T.autoMargin(W,"pie."+Z.uid+".automargin",{xl:me.x[0]-ge,xr:me.x[1]+ge,yb:me.y[0]-ke,yt:me.y[1]+ke,l:Math.max(J.cx-J.r-ye.left,0),r:Math.max(ye.right-(J.cx+J.r),0),b:Math.max(ye.bottom-(J.cy+J.r),0),t:Math.max(J.cy-J.r-ye.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var K=_.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:v,determineInsideTextFont:h,positionTitleOutside:L,prerenderTitles:g,layoutAreas:F,attachFxHandlers:m,computeTransform:N}},22152:function(R,C,e){"use strict";var _=e(33428),T=e(10528),r=e(82744).resizeText;R.exports=function(w){var b=w._fullLayout._pielayer.selectAll(".trace");r(w,b,"pie"),b.each(function(c){var o=c[0].trace,t=_.select(this);t.style({opacity:o.opacity}),t.selectAll("path.surface").each(function(i){_.select(this).call(T,i,o,w)})})}},10528:function(R,C,e){"use strict";var _=e(76308),T=e(69656).castOption,r=e(21552);R.exports=function(w,b,c,o){var t=c.marker.line,i=T(t.color,b.pts)||_.defaultLine,n=T(t.width,b.pts)||0;w.call(r,b,c,o).style("stroke-width",n).call(_.stroke,i)}},35484:function(R,C,e){"use strict";var _=e(52904);R.exports={x:_.x,y:_.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:_.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(R,C,e){"use strict";var _=e(67792).gl_pointcloud2d,T=e(3400).isArrayOrTypedArray,r=e(43080),w=e(19280).findExtremes,b=e(44928);function c(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=_(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=c.prototype;o.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:T(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},o.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},o.updateFast=function(t){var i,n,a,s,l,u,p=this.xData=this.pickXData=t.x,f=this.yData=this.pickYData=t.y,m=this.pickXYData=t.xy,h=t.xbounds&&t.ybounds,g=t.indices,v=this.bounds;if(m){if(a=m,i=m.length>>>1,h)v[0]=t.xbounds[0],v[2]=t.xbounds[1],v[1]=t.ybounds[0],v[3]=t.ybounds[1];else for(u=0;u<i;u++)s=a[2*u],l=a[2*u+1],s<v[0]&&(v[0]=s),s>v[2]&&(v[2]=s),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);if(g)n=g;else for(n=new Int32Array(i),u=0;u<i;u++)n[u]=u}else for(i=p.length,a=new Float32Array(2*i),n=new Int32Array(i),u=0;u<i;u++)s=p[u],l=f[u],n[u]=u,a[2*u]=s,a[2*u+1]=l,s<v[0]&&(v[0]=s),s>v[2]&&(v[2]=s),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=a;var x=r(t.marker.color),y=r(t.marker.border.color),A=t.opacity*t.marker.opacity;x[3]*=A,this.pointcloudOptions.color=x;var d=t.marker.blend;d===null&&(d=p.length<100||f.length<100),this.pointcloudOptions.blend=d,y[3]*=A,this.pointcloudOptions.borderColor=y;var S=t.marker.sizemin,k=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=k,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,L=this.scene.yaxis,O=k/2||.5;t._extremes[E._id]=w(E,[v[0],v[2]],{ppad:O}),t._extremes[L._id]=w(L,[v[1],v[3]],{ppad:O})},o.dispose=function(){this.pointcloud.dispose()},R.exports=function(t,i){var n=new c(t,i.uid);return n.update(i),n}},41904:function(R,C,e){"use strict";var _=e(3400),T=e(35484);R.exports=function(r,w,b){function c(o,t){return _.coerce(r,w,T,o,t)}c("x"),c("y"),c("xbounds"),c("ybounds"),r.xy&&r.xy instanceof Float32Array&&(w.xy=r.xy),r.indices&&r.indices instanceof Int32Array&&(w.indices=r.indices),c("text"),c("marker.color",b),c("marker.opacity"),c("marker.blend"),c("marker.sizemin"),c("marker.sizemax"),c("marker.border.color",b),c("marker.border.arearatio"),w._length=null}},156:function(R,C,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),R.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(R,C,e){"use strict";var _=e(25376),T=e(45464),r=e(22548),w=e(55756),b=e(86968).u,c=e(21776).Ks,o=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,n=e(92880).extendFlat,a=e(67824).overrideAll;(R.exports=a({hoverinfo:n({},T.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:w.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:_({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:c({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:r.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:w.hoverlabel,hovertemplate:c({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(o().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(R,C,e){"use strict";var _=e(67824).overrideAll,T=e(84888)._M,r=e(59596),w=e(65460),b=e(93972),c=e(86476),o=e(22676).prepSelect,t=e(3400),i=e(24040),n="sankey";function a(s,l){var u=s._fullData[l],p=s._fullLayout,f=p.dragmode,m=p.dragmode==="pan"?"move":"crosshair",h=u._bgRect;if(h&&f!=="pan"&&f!=="zoom"){b(h,m);var g={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},v={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},x={gd:s,element:h.node(),plotinfo:{id:l,xaxis:g,yaxis:v,fillRangeItems:t.noop},subplot:l,xaxes:[g],yaxes:[v],doneFnCompleted:function(y){var A,d=s._fullData[l],S=d.node.groups.slice(),k=[];function E(F){for(var U=d._sankey.graph.nodes,I=0;I<U.length;I++)if(U[I].pointNumber===F)return U[I]}for(var L=0;L<y.length;L++){var O=E(y[L].pointNumber);if(O)if(O.group){for(var P=0;P<O.childrenNodes.length;P++)k.push(O.childrenNodes[P].pointNumber);S[O.pointNumber-d.node._count]=!1}else k.push(O.pointNumber)}A=S.filter(Boolean).concat([k]),i.call("_guiRestyle",s,{"node.groups":[A]},l)},prepFn:function(y,A,d){o(y,A,d,x,f)}};c.init(x)}}C.name=n,C.baseLayoutAttrOverrides=_({hoverlabel:w.hoverlabel},"plot","nested"),C.plot=function(s){var l=T(s.calcdata,n)[0];r(s,l),C.updateFx(s)},C.clean=function(s,l,u,p){var f=p._has&&p._has(n),m=l._has&&l._has(n);f&&!m&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},C.updateFx=function(s){for(var l=0;l<s._fullData.length;l++)a(s,l)}},48068:function(R,C,e){"use strict";var _=e(78484),T=e(3400),r=e(71688).wrap,w=T.isArrayOrTypedArray,b=T.isIndex,c=e(8932);R.exports=function(o,t){var i=function(n){var a,s=n.node,l=n.link,u=[],p=w(l.color),f=w(l.hovercolor),m=w(l.customdata),h={},g={},v=l.colorscales.length;for(a=0;a<v;a++){var x=l.colorscales[a],y=c.extractScale(x,{cLetter:"c"}),A=c.makeColorScaleFunc(y);g[x.label]=A}var d=0;for(a=0;a<l.value.length;a++)l.source[a]>d&&(d=l.source[a]),l.target[a]>d&&(d=l.target[a]);var S,k=d+1;n.node._count=k;var E=n.node.groups,L={};for(a=0;a<E.length;a++){var O=E[a];for(S=0;S<O.length;S++){var P=O[S],F=k+a;L.hasOwnProperty(P)?T.warn("Node "+P+" is already part of a group."):L[P]=F}}var U={source:[],target:[]};for(a=0;a<l.value.length;a++){var I=l.value[a],N=l.source[a],W=l.target[a];if(I>0&&b(N,k)&&b(W,k)&&(!L.hasOwnProperty(N)||!L.hasOwnProperty(W)||L[N]!==L[W])){L.hasOwnProperty(W)&&(W=L[W]),L.hasOwnProperty(N)&&(N=L[N]),W=+W,h[N=+N]=h[W]=!0;var B="";l.label&&l.label[a]&&(B=l.label[a]);var V=null;B&&g.hasOwnProperty(B)&&(V=g[B]),u.push({pointNumber:a,label:B,color:p?l.color[a]:l.color,hovercolor:f?l.hovercolor[a]:l.hovercolor,customdata:m?l.customdata[a]:l.customdata,concentrationscale:V,source:N,target:W,value:+I}),U.source.push(N),U.target.push(W)}}var q=k+E.length,ne=w(s.color),$=w(s.customdata),K=[];for(a=0;a<q;a++)if(h[a]){var ee=s.label[a];K.push({group:a>k-1,childrenNodes:[],pointNumber:a,label:ee,color:ne?s.color[a]:s.color,customdata:$?s.customdata[a]:s.customdata})}var J=!1;return function(Z,te,oe){for(var se=T.init2dArray(Z,0),ce=0;ce<Math.min(te.length,oe.length);ce++)if(T.isIndex(te[ce],Z)&&T.isIndex(oe[ce],Z)){if(te[ce]===oe[ce])return!0;se[te[ce]].push(oe[ce])}return _(se).components.some(function(ye){return ye.length>1})}(q,U.source,U.target)&&(J=!0),{circular:J,links:u,nodes:K,groups:E,groupLookup:L}}(t);return r({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(R){"use strict";R.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(R,C,e){"use strict";var _=e(3400),T=e(41440),r=e(76308),w=e(49760),b=e(86968).Q,c=e(16132),o=e(31780),t=e(51272);function i(n,a){function s(l,u){return _.coerce(n,a,T.link.colorscales,l,u)}s("label"),s("cmin"),s("cmax"),s("colorscale")}R.exports=function(n,a,s,l){function u(E,L){return _.coerce(n,a,T,E,L)}var p=_.extendDeep(l.hoverlabel,n.hoverlabel),f=n.node,m=o.newContainer(a,"node");function h(E,L){return _.coerce(f,m,T.node,E,L)}h("label"),h("groups"),h("x"),h("y"),h("pad"),h("thickness"),h("line.color"),h("line.width"),h("hoverinfo",n.hoverinfo),c(f,m,h,p),h("hovertemplate"),h("align");var g=l.colorway;h("color",m.label.map(function(E,L){return r.addOpacity(function(O){return g[O%g.length]}(L),.8)})),h("customdata");var v=n.link||{},x=o.newContainer(a,"link");function y(E,L){return _.coerce(v,x,T.link,E,L)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",n.hoverinfo),c(v,x,y,p),y("hovertemplate");var A,d=w(l.paper_bgcolor).getLuminance()<.333,S=y("color",d?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function k(E){var L=w(E);if(!L.isValid())return E;var O=L.getAlpha();return O<=.8?L.setAlpha(O+.2):L=d?L.brighten():L.darken(),L.toRgbString()}y("hovercolor",Array.isArray(S)?S.map(k):k(S)),y("customdata"),t(v,x,{name:"colorscales",handleItemDefaults:i}),b(a,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),m.x.length&&m.y.length&&(A="freeform"),u("arrangement",A),_.coerceFont(u,"textfont",l.font,{autoShadowDflt:!0}),a._length=null}},45499:function(R,C,e){"use strict";R.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=T.numberFormat,w=e(83248),b=e(93024),c=e(76308),o=e(11820).cn,t=T._;function i(v){return v!==""}function n(v,x){return v.filter(function(y){return y.key===x.traceId})}function a(v,x){_.select(v).select("path").style("fill-opacity",x),_.select(v).select("rect").style("fill-opacity",x)}function s(v){_.select(v).select("text.name").style("fill","black")}function l(v){return function(x){return v.node.sourceLinks.indexOf(x.link)!==-1||v.node.targetLinks.indexOf(x.link)!==-1}}function u(v){return function(x){return x.node.sourceLinks.indexOf(v.link)!==-1||x.node.targetLinks.indexOf(v.link)!==-1}}function p(v,x,y){x&&y&&n(y,x).selectAll("."+o.sankeyLink).filter(l(x)).call(m.bind(0,x,y,!1))}function f(v,x,y){x&&y&&n(y,x).selectAll("."+o.sankeyLink).filter(l(x)).call(h.bind(0,x,y,!1))}function m(v,x,y,A){A.style("fill",function(d){if(!d.link.concentrationscale)return d.tinyColorHoverHue}).style("fill-opacity",function(d){if(!d.link.concentrationscale)return d.tinyColorHoverAlpha}),A.each(function(d){var S=d.link.label;S!==""&&n(x,v).selectAll("."+o.sankeyLink).filter(function(k){return k.link.label===S}).style("fill",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverHue}).style("fill-opacity",function(k){if(!k.link.concentrationscale)return k.tinyColorHoverAlpha})}),y&&n(x,v).selectAll("."+o.sankeyNode).filter(u(v)).call(p)}function h(v,x,y,A){A.style("fill",function(d){return d.tinyColorHue}).style("fill-opacity",function(d){return d.tinyColorAlpha}),A.each(function(d){var S=d.link.label;S!==""&&n(x,v).selectAll("."+o.sankeyLink).filter(function(k){return k.link.label===S}).style("fill",function(k){return k.tinyColorHue}).style("fill-opacity",function(k){return k.tinyColorAlpha})}),y&&n(x,v).selectAll(o.sankeyNode).filter(u(v)).call(f)}function g(v,x){var y=v.hoverlabel||{},A=T.nestedProperty(y,x).get();return!Array.isArray(A)&&A}R.exports=function(v,x){for(var y=v._fullLayout,A=y._paper,d=y._size,S=0;S<v._fullData.length;S++)if(v._fullData[S].visible&&v._fullData[S].type===o.sankey&&!v._fullData[S]._viewInitial){var k=v._fullData[S].node;v._fullData[S]._viewInitial={node:{groups:k.groups.slice(),x:k.x.slice(),y:k.y.slice()}}}var E=t(v,"source:")+" ",L=t(v,"target:")+" ",O=t(v,"concentration:")+" ",P=t(v,"incoming flow count:")+" ",F=t(v,"outgoing flow count:")+" ";w(v,A,x,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(U,I,N){v._fullLayout.hovermode!==!1&&(_.select(U).call(m.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,v.emit("plotly_hover",{event:_.event,points:[I.link]})))},follow:function(U,I){if(v._fullLayout.hovermode!==!1){var N=I.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],B=0,V=0;V<I.flow.links.length;V++){var q=I.flow.links[V];if(v._fullLayout.hovermode!=="closest"||I.link.pointNumber===q.pointNumber){I.link.pointNumber===q.pointNumber&&(B=V),q.fullData=q.trace,N=I.link.trace.link;var ne=K(q),$={valueLabel:r(I.valueFormat)(q.value)+I.valueSuffix};W.push({x:ne[0],y:ne[1],name:$.valueLabel,text:[q.label||"",E+q.source.label,L+q.target.label,q.concentrationscale?O+r("%0.2f")(q.flow.labelConcentration):""].filter(i).join("<br>"),color:g(N,"bgcolor")||c.addOpacity(q.color,1),borderColor:g(N,"bordercolor"),fontFamily:g(N,"font.family"),fontSize:g(N,"font.size"),fontColor:g(N,"font.color"),fontWeight:g(N,"font.weight"),fontStyle:g(N,"font.style"),fontVariant:g(N,"font.variant"),fontTextcase:g(N,"font.textcase"),fontLineposition:g(N,"font.lineposition"),fontShadow:g(N,"font.shadow"),nameLength:g(N,"namelength"),textAlign:g(N,"align"),idealAlign:_.event.x<ne[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:$,eventData:[q]})}}b.loneHover(W,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:v,anchorIndex:B}).each(function(){I.link.concentrationscale||a(this,.65),s(this)})}}function K(ee){var J,Z;ee.circular?(J=(ee.circularPathData.leftInnerExtent+ee.circularPathData.rightInnerExtent)/2,Z=ee.circularPathData.verticalFullExtent):(J=(ee.source.x1+ee.target.x0)/2,Z=(ee.y0+ee.y1)/2);var te=[J,Z];return ee.trace.orientation==="v"&&te.reverse(),te[0]+=I.parent.translateX,te[1]+=I.parent.translateY,te}},unhover:function(U,I,N){v._fullLayout.hovermode!==!1&&(_.select(U).call(h.bind(0,I,N,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,v.emit("plotly_unhover",{event:_.event,points:[I.link]})),b.loneUnhover(y._hoverlayer.node()))},select:function(U,I){var N=I.link;N.originalEvent=_.event,v._hoverdata=[N],b.click(v,{target:!0})}},nodeEvents:{hover:function(U,I,N){v._fullLayout.hovermode!==!1&&(_.select(U).call(p,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,v.emit("plotly_hover",{event:_.event,points:[I.node]})))},follow:function(U,I){if(v._fullLayout.hovermode!==!1){var N=I.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=_.select(U).select("."+o.nodeRect),B=v._fullLayout._paperdiv.node().getBoundingClientRect(),V=W.node().getBoundingClientRect(),q=V.left-2-B.left,ne=V.right+2-B.left,$=V.top+V.height/4-B.top,K={valueLabel:r(I.valueFormat)(I.node.value)+I.valueSuffix};I.node.fullData=I.node.trace,v._fullLayout._calcInverseTransform(v);var ee=v._fullLayout._invScaleX,J=v._fullLayout._invScaleY,Z=b.loneHover({x0:ee*q,x1:ee*ne,y:J*$,name:r(I.valueFormat)(I.node.value)+I.valueSuffix,text:[I.node.label,P+I.node.targetLinks.length,F+I.node.sourceLinks.length].filter(i).join("<br>"),color:g(N,"bgcolor")||I.tinyColorHue,borderColor:g(N,"bordercolor"),fontFamily:g(N,"font.family"),fontSize:g(N,"font.size"),fontColor:g(N,"font.color"),fontWeight:g(N,"font.weight"),fontStyle:g(N,"font.style"),fontVariant:g(N,"font.variant"),fontTextcase:g(N,"font.textcase"),fontLineposition:g(N,"font.lineposition"),fontShadow:g(N,"font.shadow"),nameLength:g(N,"namelength"),textAlign:g(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:K,eventData:[I.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:v});a(Z,.85),s(Z)}}},unhover:function(U,I,N){v._fullLayout.hovermode!==!1&&(_.select(U).call(f,I,N),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,v.emit("plotly_unhover",{event:_.event,points:[I.node]})),b.loneUnhover(y._hoverlayer.node()))},select:function(U,I,N){var W=I.node;W.originalEvent=_.event,v._hoverdata=[W],_.select(U).call(f,I,N),b.click(v,{target:!0})}}})}},83248:function(R,C,e){"use strict";var _=e(49812),T=e(67756).Gz,r=e(33428),w=e(26800),b=e(48932),c=e(11820),o=e(49760),t=e(76308),i=e(43616),n=e(3400),a=n.strTranslate,s=n.strRotate,l=e(71688),u=l.keyFun,p=l.repeat,f=l.unwrap,m=e(72736),h=e(24040),g=e(84284),v=g.CAP_SHIFT,x=g.LINE_SPACING;function y(V,q,ne){var $,K=f(q),ee=K.trace,J=ee.domain,Z=ee.orientation==="h",te=ee.node.pad,oe=ee.node.thickness,se={justify:w.sankeyJustify,left:w.sankeyLeft,right:w.sankeyRight,center:w.sankeyCenter}[ee.node.align],ce=V.width*(J.x[1]-J.x[0]),ye=V.height*(J.y[1]-J.y[0]),me=K._nodes,fe=K._links,pe=K.circular;($=pe?b.sankeyCircular().circularLinkGap(0):w.sankey()).iterations(c.sankeyIterations).size(Z?[ce,ye]:[ye,ce]).nodeWidth(oe).nodePadding(te).nodeId(function(Ae){return Ae.pointNumber}).nodeAlign(se).nodes(me).links(fe);var ge,ke,Ce,de=$();for(var ae in $.nodePadding()<te&&n.warn("node.pad was reduced to ",$.nodePadding()," to fit within the figure."),K._groupLookup){var re,he=parseInt(K._groupLookup[ae]);for(ge=0;ge<de.nodes.length;ge++)if(de.nodes[ge].pointNumber===he){re=de.nodes[ge];break}if(re){var Se={pointNumber:parseInt(ae),x0:re.x0,x1:re.x1,y0:re.y0,y1:re.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};de.nodes.unshift(Se),re.childrenNodes.unshift(Se)}}if(function(){for(ge=0;ge<de.nodes.length;ge++){var Ae,Pe,De=de.nodes[ge],ve={};for(ke=0;ke<De.targetLinks.length;ke++)Ae=(Pe=De.targetLinks[ke]).source.pointNumber+":"+Pe.target.pointNumber,ve.hasOwnProperty(Ae)||(ve[Ae]=[]),ve[Ae].push(Pe);var we=Object.keys(ve);for(ke=0;ke<we.length;ke++){var Ee=ve[Ae=we[ke]],Fe=0,Le={};for(Ce=0;Ce<Ee.length;Ce++)Le[(Pe=Ee[Ce]).label]||(Le[Pe.label]=0),Le[Pe.label]+=Pe.value,Fe+=Pe.value;for(Ce=0;Ce<Ee.length;Ce++)(Pe=Ee[Ce]).flow={value:Fe,labelConcentration:Le[Pe.label]/Fe,concentration:Pe.value/Fe,links:Ee},Pe.concentrationscale&&(Pe.color=o(Pe.concentrationscale(Pe.flow.labelConcentration)))}var je=0;for(ke=0;ke<De.sourceLinks.length;ke++)je+=De.sourceLinks[ke].value;for(ke=0;ke<De.sourceLinks.length;ke++)(Pe=De.sourceLinks[ke]).concentrationOut=Pe.value/je;var Ge=0;for(ke=0;ke<De.targetLinks.length;ke++)Ge+=De.targetLinks[ke].value;for(ke=0;ke<De.targetLinks.length;ke++)(Pe=De.targetLinks[ke]).concenrationIn=Pe.value/Ge}}(),ee.node.x.length&&ee.node.y.length){for(ge=0;ge<Math.min(ee.node.x.length,ee.node.y.length,de.nodes.length);ge++)if(ee.node.x[ge]&&ee.node.y[ge]){var xe=[ee.node.x[ge]*ce,ee.node.y[ge]*ye];de.nodes[ge].x0=xe[0]-oe/2,de.nodes[ge].x1=xe[0]+oe/2;var Te=de.nodes[ge].y1-de.nodes[ge].y0;de.nodes[ge].y0=xe[1]-Te/2,de.nodes[ge].y1=xe[1]+Te/2}ee.arrangement==="snap"&&function(Ae){var Pe,De,ve=Ae.map(function(je,Ge){return{x0:je.x0,index:Ge}}).sort(function(je,Ge){return je.x0-Ge.x0}),we=[],Ee=-1,Fe=-1/0;for(ge=0;ge<ve.length;ge++){var Le=Ae[ve[ge].index];Le.x0>Fe+oe&&(Ee+=1,Pe=Le.x0),Fe=Le.x0,we[Ee]||(we[Ee]=[]),we[Ee].push(Le),De=Pe-Le.x0,Le.x0+=De,Le.x1+=De}return we}(me=de.nodes).forEach(function(Ae){var Pe,De,ve,we=0,Ee=Ae.length;for(Ae.sort(function(Fe,Le){return Fe.y0-Le.y0}),ve=0;ve<Ee;++ve)(Pe=Ae[ve]).y0>=we||(De=we-Pe.y0)>1e-6&&(Pe.y0+=De,Pe.y1+=De),we=Pe.y1+te}),$.update(de)}return{circular:pe,key:ne,trace:ee,guid:n.randstr(),horizontal:Z,width:ce,height:ye,nodePad:ee.node.pad,nodeLineColor:ee.node.line.color,nodeLineWidth:ee.node.line.width,linkLineColor:ee.link.line.color,linkLineWidth:ee.link.line.width,linkArrowLength:ee.link.arrowlen,valueFormat:ee.valueformat,valueSuffix:ee.valuesuffix,textFont:ee.textfont,translateX:J.x[0]*V.width+V.margin.l,translateY:V.height-J.y[1]*V.height+V.margin.t,dragParallel:Z?ye:ce,dragPerpendicular:Z?ce:ye,arrangement:ee.arrangement,sankey:$,graph:de,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function A(V,q,ne){var $=o(q.color),K=o(q.hovercolor),ee=q.source.label+"|"+q.target.label+"__"+ne;return q.trace=V.trace,q.curveNumber=V.trace.index,{circular:V.circular,key:ee,traceId:V.key,pointNumber:q.pointNumber,link:q,tinyColorHue:t.tinyRGB($),tinyColorAlpha:$.getAlpha(),tinyColorHoverHue:t.tinyRGB(K),tinyColorHoverAlpha:K.getAlpha(),linkPath:d,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:q.flow}}function d(){return function(V){var q=V.linkArrowLength;if(V.link.circular)return function(ge,ke){var Ce=ge.width/2,de=ge.circularPathData;return ge.circularLinkType==="top"?"M "+(de.targetX-ke)+" "+(de.targetY+Ce)+" L"+(de.rightInnerExtent-ke)+" "+(de.targetY+Ce)+"A"+(de.rightLargeArcRadius+Ce)+" "+(de.rightSmallArcRadius+Ce)+" 0 0 1 "+(de.rightFullExtent-Ce-ke)+" "+(de.targetY-de.rightSmallArcRadius)+"L"+(de.rightFullExtent-Ce-ke)+" "+de.verticalRightInnerExtent+"A"+(de.rightLargeArcRadius+Ce)+" "+(de.rightLargeArcRadius+Ce)+" 0 0 1 "+(de.rightInnerExtent-ke)+" "+(de.verticalFullExtent-Ce)+"L"+de.leftInnerExtent+" "+(de.verticalFullExtent-Ce)+"A"+(de.leftLargeArcRadius+Ce)+" "+(de.leftLargeArcRadius+Ce)+" 0 0 1 "+(de.leftFullExtent+Ce)+" "+de.verticalLeftInnerExtent+"L"+(de.leftFullExtent+Ce)+" "+(de.sourceY-de.leftSmallArcRadius)+"A"+(de.leftLargeArcRadius+Ce)+" "+(de.leftSmallArcRadius+Ce)+" 0 0 1 "+de.leftInnerExtent+" "+(de.sourceY+Ce)+"L"+de.sourceX+" "+(de.sourceY+Ce)+"L"+de.sourceX+" "+(de.sourceY-Ce)+"L"+de.leftInnerExtent+" "+(de.sourceY-Ce)+"A"+(de.leftLargeArcRadius-Ce)+" "+(de.leftSmallArcRadius-Ce)+" 0 0 0 "+(de.leftFullExtent-Ce)+" "+(de.sourceY-de.leftSmallArcRadius)+"L"+(de.leftFullExtent-Ce)+" "+de.verticalLeftInnerExtent+"A"+(de.leftLargeArcRadius-Ce)+" "+(de.leftLargeArcRadius-Ce)+" 0 0 0 "+de.leftInnerExtent+" "+(de.verticalFullExtent+Ce)+"L"+(de.rightInnerExtent-ke)+" "+(de.verticalFullExtent+Ce)+"A"+(de.rightLargeArcRadius-Ce)+" "+(de.rightLargeArcRadius-Ce)+" 0 0 0 "+(de.rightFullExtent+Ce-ke)+" "+de.verticalRightInnerExtent+"L"+(de.rightFullExtent+Ce-ke)+" "+(de.targetY-de.rightSmallArcRadius)+"A"+(de.rightLargeArcRadius-Ce)+" "+(de.rightSmallArcRadius-Ce)+" 0 0 0 "+(de.rightInnerExtent-ke)+" "+(de.targetY-Ce)+"L"+(de.targetX-ke)+" "+(de.targetY-Ce)+(ke>0?"L"+de.targetX+" "+de.targetY:"")+"Z":"M "+(de.targetX-ke)+" "+(de.targetY-Ce)+" L"+(de.rightInnerExtent-ke)+" "+(de.targetY-Ce)+"A"+(de.rightLargeArcRadius+Ce)+" "+(de.rightSmallArcRadius+Ce)+" 0 0 0 "+(de.rightFullExtent-Ce-ke)+" "+(de.targetY+de.rightSmallArcRadius)+"L"+(de.rightFullExtent-Ce-ke)+" "+de.verticalRightInnerExtent+"A"+(de.rightLargeArcRadius+Ce)+" "+(de.rightLargeArcRadius+Ce)+" 0 0 0 "+(de.rightInnerExtent-ke)+" "+(de.verticalFullExtent+Ce)+"L"+de.leftInnerExtent+" "+(de.verticalFullExtent+Ce)+"A"+(de.leftLargeArcRadius+Ce)+" "+(de.leftLargeArcRadius+Ce)+" 0 0 0 "+(de.leftFullExtent+Ce)+" "+de.verticalLeftInnerExtent+"L"+(de.leftFullExtent+Ce)+" "+(de.sourceY+de.leftSmallArcRadius)+"A"+(de.leftLargeArcRadius+Ce)+" "+(de.leftSmallArcRadius+Ce)+" 0 0 0 "+de.leftInnerExtent+" "+(de.sourceY-Ce)+"L"+de.sourceX+" "+(de.sourceY-Ce)+"L"+de.sourceX+" "+(de.sourceY+Ce)+"L"+de.leftInnerExtent+" "+(de.sourceY+Ce)+"A"+(de.leftLargeArcRadius-Ce)+" "+(de.leftSmallArcRadius-Ce)+" 0 0 1 "+(de.leftFullExtent-Ce)+" "+(de.sourceY+de.leftSmallArcRadius)+"L"+(de.leftFullExtent-Ce)+" "+de.verticalLeftInnerExtent+"A"+(de.leftLargeArcRadius-Ce)+" "+(de.leftLargeArcRadius-Ce)+" 0 0 1 "+de.leftInnerExtent+" "+(de.verticalFullExtent-Ce)+"L"+(de.rightInnerExtent-ke)+" "+(de.verticalFullExtent-Ce)+"A"+(de.rightLargeArcRadius-Ce)+" "+(de.rightLargeArcRadius-Ce)+" 0 0 1 "+(de.rightFullExtent+Ce-ke)+" "+de.verticalRightInnerExtent+"L"+(de.rightFullExtent+Ce-ke)+" "+(de.targetY+de.rightSmallArcRadius)+"A"+(de.rightLargeArcRadius-Ce)+" "+(de.rightSmallArcRadius-Ce)+" 0 0 1 "+(de.rightInnerExtent-ke)+" "+(de.targetY+Ce)+"L"+(de.targetX-ke)+" "+(de.targetY+Ce)+(ke>0?"L"+de.targetX+" "+de.targetY:"")+"Z"}(V.link,q);var ne=Math.abs((V.link.target.x0-V.link.source.x1)/2);q>ne&&(q=ne);var $=V.link.source.x1,K=V.link.target.x0-q,ee=T($,K),J=ee(.5),Z=ee(.5),te=V.link.y0-V.link.width/2,oe=V.link.y0+V.link.width/2,se=V.link.y1-V.link.width/2,ce=V.link.y1+V.link.width/2,ye="M"+$+","+te,me="C"+J+","+te+" "+Z+","+se+" "+K+","+se,fe="C"+Z+","+ce+" "+J+","+oe+" "+$+","+oe,pe=q>0?"L"+(K+q)+","+(se+V.link.width/2):"";return ye+me+(pe+="L"+K+","+ce)+fe+"Z"}}function S(V,q){var ne=o(q.color),$=c.nodePadAcross,K=V.nodePad/2;q.dx=q.x1-q.x0,q.dy=q.y1-q.y0;var ee=q.dx,J=Math.max(.5,q.dy),Z="node_"+q.pointNumber;return q.group&&(Z=n.randstr()),q.trace=V.trace,q.curveNumber=V.trace.index,{index:q.pointNumber,key:Z,partOfGroup:q.partOfGroup||!1,group:q.group,traceId:V.key,trace:V.trace,node:q,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(ee),visibleHeight:J,zoneX:-$,zoneY:-K,zoneWidth:ee+2*$,zoneHeight:J+2*K,labelY:V.horizontal?q.dy/2+1:q.dx/2+1,left:q.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:t.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,Z].join("_"),interactionState:V.interactionState,figure:V}}function k(V){V.attr("transform",function(q){return a(q.node.x0.toFixed(3),q.node.y0.toFixed(3))})}function E(V){V.call(k)}function L(V,q){V.call(E),q.attr("d",d())}function O(V){V.attr("width",function(q){return q.node.x1-q.node.x0}).attr("height",function(q){return q.visibleHeight})}function P(V){return V.link.width>1||V.linkLineWidth>0}function F(V){return a(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(V,q,ne){V.on(".basic",null).on("mouseover.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.hover(this,$,q),$.interactionState.hovered=[this,$])}).on("mousemove.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.follow(this,$),$.interactionState.hovered=[this,$])}).on("mouseout.basic",function($){$.interactionState.dragInProgress||$.partOfGroup||(ne.unhover(this,$,q),$.interactionState.hovered=!1)}).on("click.basic",function($){$.interactionState.hovered&&(ne.unhover(this,$,q),$.interactionState.hovered=!1),$.interactionState.dragInProgress||$.partOfGroup||ne.select(this,$,q)})}function I(V,q,ne,$){var K=r.behavior.drag().origin(function(ee){return{x:ee.node.x0+ee.visibleWidth/2,y:ee.node.y0+ee.visibleHeight/2}}).on("dragstart",function(ee){if(ee.arrangement!=="fixed"&&(n.ensureSingle($._fullLayout._infolayer,"g","dragcover",function(Z){$._fullLayout._dragCover=Z}),n.raiseToTop(this),ee.interactionState.dragInProgress=ee.node,W(ee.node),ee.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,ee.interactionState.hovered),ee.interactionState.hovered=!1),ee.arrangement==="snap")){var J=ee.traceId+"|"+ee.key;ee.forceLayouts[J]?ee.forceLayouts[J].alpha(1):function(Z,te,oe,se){(function(ye){for(var me=0;me<ye.length;me++)ye[me].y=(ye[me].y0+ye[me].y1)/2,ye[me].x=(ye[me].x0+ye[me].x1)/2})(oe.graph.nodes);var ce=oe.graph.nodes.filter(function(ye){return ye.originalX===oe.node.originalX}).filter(function(ye){return!ye.partOfGroup});oe.forceLayouts[te]=_.forceSimulation(ce).alphaDecay(0).force("collide",_.forceCollide().radius(function(ye){return ye.dy/2+oe.nodePad/2}).strength(1).iterations(c.forceIterations)).force("constrain",function(ye,me,fe,pe){return function(){for(var ge=0,ke=0;ke<fe.length;ke++){var Ce=fe[ke];Ce===pe.interactionState.dragInProgress?(Ce.x=Ce.lastDraggedX,Ce.y=Ce.lastDraggedY):(Ce.vx=(Ce.originalX-Ce.x)/c.forceTicksPerFrame,Ce.y=Math.min(pe.size-Ce.dy/2,Math.max(Ce.dy/2,Ce.y))),ge=Math.max(ge,Math.abs(Ce.vx),Math.abs(Ce.vy))}!pe.interactionState.dragInProgress&&ge<.1&&pe.forceLayouts[me].alpha()>0&&pe.forceLayouts[me].alpha(0)}}(0,te,ce,oe)).stop()}(0,J,ee),function(Z,te,oe,se,ce){window.requestAnimationFrame(function ye(){var me;for(me=0;me<c.forceTicksPerFrame;me++)oe.forceLayouts[se].tick();if(function(pe){for(var ge=0;ge<pe.length;ge++)pe[ge].y0=pe[ge].y-pe[ge].dy/2,pe[ge].y1=pe[ge].y0+pe[ge].dy,pe[ge].x0=pe[ge].x-pe[ge].dx/2,pe[ge].x1=pe[ge].x0+pe[ge].dx}(oe.graph.nodes),oe.sankey.update(oe.graph),L(Z.filter(B(oe)),te),oe.forceLayouts[se].alpha()>0)window.requestAnimationFrame(ye);else{var fe=oe.node.originalX;oe.node.x0=fe-oe.visibleWidth/2,oe.node.x1=fe+oe.visibleWidth/2,N(oe,ce)}})}(V,q,ee,J,$)}}).on("drag",function(ee){if(ee.arrangement!=="fixed"){var J=r.event.x,Z=r.event.y;ee.arrangement==="snap"?(ee.node.x0=J-ee.visibleWidth/2,ee.node.x1=J+ee.visibleWidth/2,ee.node.y0=Z-ee.visibleHeight/2,ee.node.y1=Z+ee.visibleHeight/2):(ee.arrangement==="freeform"&&(ee.node.x0=J-ee.visibleWidth/2,ee.node.x1=J+ee.visibleWidth/2),Z=Math.max(0,Math.min(ee.size-ee.visibleHeight/2,Z)),ee.node.y0=Z-ee.visibleHeight/2,ee.node.y1=Z+ee.visibleHeight/2),W(ee.node),ee.arrangement!=="snap"&&(ee.sankey.update(ee.graph),L(V.filter(B(ee)),q))}}).on("dragend",function(ee){if(ee.arrangement!=="fixed"){ee.interactionState.dragInProgress=!1;for(var J=0;J<ee.node.childrenNodes.length;J++)ee.node.childrenNodes[J].x=ee.node.x,ee.node.childrenNodes[J].y=ee.node.y;ee.arrangement!=="snap"&&N(ee,$)}});V.on(".drag",null).call(K)}function N(V,q){for(var ne=[],$=[],K=0;K<V.graph.nodes.length;K++){var ee=(V.graph.nodes[K].x0+V.graph.nodes[K].x1)/2,J=(V.graph.nodes[K].y0+V.graph.nodes[K].y1)/2;ne.push(ee/V.figure.width),$.push(J/V.figure.height)}h.call("_guiRestyle",q,{"node.x":[ne],"node.y":[$]},V.trace.index).then(function(){q._fullLayout._dragCover&&q._fullLayout._dragCover.remove()})}function W(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function B(V){return function(q){return q.node.originalX===V.node.originalX}}R.exports=function(V,q,ne,$,K){var ee=V._context.staticPlot,J=!1;n.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){J=!0});var Z=V._fullLayout._dragCover,te=ne.filter(function(ge){return f(ge).trace.visible}).map(y.bind(null,$)),oe=q.selectAll("."+c.cn.sankey).data(te,u);oe.exit().remove(),oe.enter().append("g").classed(c.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",ee?"none":"auto").attr("transform",F),oe.each(function(ge,ke){V._fullData[ke]._sankey=ge;var Ce="bgsankey-"+ge.trace.uid+"-"+ke;n.ensureSingle(V._fullLayout._draggers,"rect",Ce),V._fullData[ke]._bgRect=r.select("."+Ce),V._fullData[ke]._bgRect.style("pointer-events",ee?"none":"all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(c.ease).duration(c.duration).attr("transform",F);var se=oe.selectAll("."+c.cn.sankeyLinks).data(p,u);se.enter().append("g").classed(c.cn.sankeyLinks,!0).style("fill","none");var ce=se.selectAll("."+c.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(ke){return ke.value}).map(A.bind(null,ge))},u);ce.enter().append("path").classed(c.cn.sankeyLink,!0).call(U,oe,K.linkEvents),ce.style("stroke",function(ge){return P(ge)?t.tinyRGB(o(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return P(ge)?t.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return P(ge)?ge.linkLineWidth:1}).attr("d",d()),ce.style("opacity",function(){return V._context.staticPlot||J||Z?1:0}).transition().ease(c.ease).duration(c.duration).style("opacity",1),ce.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var ye=oe.selectAll("."+c.cn.sankeyNodeSet).data(p,u);ye.enter().append("g").classed(c.cn.sankeyNodeSet,!0),ye.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var me=ye.selectAll("."+c.cn.sankeyNode).data(function(ge){var ke=ge.graph.nodes;return function(Ce){var de,ae=[];for(de=0;de<Ce.length;de++)Ce[de].originalX=(Ce[de].x0+Ce[de].x1)/2,Ce[de].originalY=(Ce[de].y0+Ce[de].y1)/2,ae.indexOf(Ce[de].originalX)===-1&&ae.push(Ce[de].originalX);for(ae.sort(function(re,he){return re-he}),de=0;de<Ce.length;de++)Ce[de].originalLayerIndex=ae.indexOf(Ce[de].originalX),Ce[de].originalLayer=Ce[de].originalLayerIndex/(ae.length-1)}(ke),ke.map(S.bind(null,ge))},u);me.enter().append("g").classed(c.cn.sankeyNode,!0).call(k).style("opacity",function(ge){return!V._context.staticPlot&&!J||ge.partOfGroup?0:1}),me.call(U,oe,K.nodeEvents).call(I,ce,K,V),me.transition().ease(c.ease).duration(c.duration).call(k).style("opacity",function(ge){return ge.partOfGroup?0:1}),me.exit().transition().ease(c.ease).duration(c.duration).style("opacity",0).remove();var fe=me.selectAll("."+c.cn.nodeRect).data(p);fe.enter().append("rect").classed(c.cn.nodeRect,!0).call(O),fe.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return t.tinyRGB(o(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return t.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),fe.transition().ease(c.ease).duration(c.duration).call(O);var pe=me.selectAll("."+c.cn.nodeLabel).data(p);pe.enter().append("text").classed(c.cn.nodeLabel,!0).style("cursor","default"),pe.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var ke=r.select(this);i.font(ke,ge.textFont),m.convertToTspans(ke,V)}).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var ke=r.select(this),Ce=m.lineCount(ke),de=ge.textFont.size*((Ce-1)*x-v),ae=ge.nodeLineWidth/2+3,re=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-de)/2;ge.horizontal&&(ge.left?ae=-ae:ae+=ge.visibleWidth);var he=ge.horizontal?"":"scale(-1,1)"+s(90);return a(ge.horizontal?ae:re,ge.horizontal?re:ae)+he}),pe.transition().ease(c.ease).duration(c.duration)}},81128:function(R){"use strict";R.exports=function(C,e){for(var _=[],T=C.cd[0].trace,r=T._sankey.graph.nodes,w=0;w<r.length;w++){var b=r[w];if(!b.partOfGroup){var c=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];T.orientation==="v"&&c.reverse(),e&&e.contains(c,!1,w,C)&&_.push({pointNumber:b.pointNumber})}}return _}},20148:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){for(var w=0;w<T.length;w++)T[w].i=w;_.mergeArray(r.text,T,"tx"),_.mergeArray(r.texttemplate,T,"txt"),_.mergeArray(r.hovertext,T,"htx"),_.mergeArray(r.customdata,T,"data"),_.mergeArray(r.textposition,T,"tp"),r.textfont&&(_.mergeArrayCastPositive(r.textfont.size,T,"ts"),_.mergeArray(r.textfont.color,T,"tc"),_.mergeArray(r.textfont.family,T,"tf"),_.mergeArray(r.textfont.weight,T,"tw"),_.mergeArray(r.textfont.style,T,"ty"),_.mergeArray(r.textfont.variant,T,"tv"),_.mergeArray(r.textfont.textcase,T,"tC"),_.mergeArray(r.textfont.lineposition,T,"tE"),_.mergeArray(r.textfont.shadow,T,"tS"));var b=r.marker;if(b){_.mergeArrayCastPositive(b.size,T,"ms"),_.mergeArrayCastPositive(b.opacity,T,"mo"),_.mergeArray(b.symbol,T,"mx"),_.mergeArray(b.angle,T,"ma"),_.mergeArray(b.standoff,T,"mf"),_.mergeArray(b.color,T,"mc");var c=b.line;b.line&&(_.mergeArray(c.color,T,"mlc"),_.mergeArrayCastPositive(c.width,T,"mlw"));var o=b.gradient;o&&o.type!=="none"&&(_.mergeArray(o.type,T,"mgt"),_.mergeArray(o.color,T,"mgc"))}}},52904:function(R,C,e){"use strict";var _=e(29736).axisHoverFormat,T=e(21776).Gw,r=e(21776).Ks,w=e(49084),b=e(25376),c=e(98192).u,o=e(98192).c,t=e(43616),i=e(88200),n=e(92880).extendFlat,a=e(98304);R.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:_("x"),yhoverformat:_("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:T({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:r({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},c,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:a(!0),fillgradient:n({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:o,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},w("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},w("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(54460),w=e(1220),b=e(39032).BADNUM,c=e(43028),o=e(90136),t=e(20148),i=e(4500);function n(p,f,m,h,g,v,x){var y=f._length,A=p._fullLayout,d=m._id,S=h._id,k=A._firstScatter[l(f)]===f.uid,E=(u(f,A,m,h)||{}).orientation,L=f.fill;m._minDtick=0,h._minDtick=0;var O={padded:!0},P={padded:!0};x&&(O.ppad=P.ppad=x);var F=y<2||g[0]!==g[y-1]||v[0]!==v[y-1];F&&(L==="tozerox"||L==="tonextx"&&(k||E==="h"))?O.tozero=!0:(f.error_y||{}).visible||L!=="tonexty"&&L!=="tozeroy"&&(c.hasMarkers(f)||c.hasText(f))||(O.padded=!1,O.ppad=0),F&&(L==="tozeroy"||L==="tonexty"&&(k||E==="v"))?P.tozero=!0:L!=="tonextx"&&L!=="tozerox"||(P.padded=!1),d&&(f._extremes[d]=r.findExtremes(m,g,O)),S&&(f._extremes[S]=r.findExtremes(h,v,P))}function a(p,f){if(c.hasMarkers(p)){var m,h=p.marker,g=1.6*(p.marker.sizeref||1);if(m=p.marker.sizemode==="area"?function(d){return Math.max(Math.sqrt((d||0)/g),3)}:function(d){return Math.max((d||0)/g,3)},T.isArrayOrTypedArray(h.size)){var v={type:"linear"};r.setConvert(v);for(var x=v.makeCalcdata(p.marker,"size"),y=new Array(f),A=0;A<f;A++)y[A]=m(x[A]);return y}return m(h.size)}}function s(p,f){var m=l(f),h=p._firstScatter;h[m]||(h[m]=f.uid)}function l(p){var f=p.stackgroup;return p.xaxis+p.yaxis+p.type+(f?"-"+f:"")}function u(p,f,m,h){var g=p.stackgroup;if(g){var v=f._scatterStackOpts[m._id+h._id][g],x=v.orientation==="v"?h:m;return x.type==="linear"||x.type==="log"?v:void 0}}R.exports={calc:function(p,f){var m,h,g,v,x,y,A=p._fullLayout,d=f._xA=r.getFromId(p,f.xaxis||"x","x"),S=f._yA=r.getFromId(p,f.yaxis||"y","y"),k=d.makeCalcdata(f,"x"),E=S.makeCalcdata(f,"y"),L=w(f,d,"x",k),O=w(f,S,"y",E),P=L.vals,F=O.vals,U=f._length,I=new Array(U),N=f.ids,W=u(f,A,d,S),B=!1;s(A,f);var V,q="x",ne="y";W?(T.pushUnique(W.traceIndices,f._expandedIndex),(m=W.orientation==="v")?(ne="s",V="x"):(q="s",V="y"),x=W.stackgaps==="interpolate"):n(p,f,d,S,P,F,a(f,U));var $=!!f.xperiodalignment,K=!!f.yperiodalignment;for(h=0;h<U;h++){var ee=I[h]={},J=_(P[h]),Z=_(F[h]);J&&Z?(ee[q]=P[h],ee[ne]=F[h],$&&(ee.orig_x=k[h],ee.xEnd=L.ends[h],ee.xStart=L.starts[h]),K&&(ee.orig_y=E[h],ee.yEnd=O.ends[h],ee.yStart=O.starts[h])):W&&(m?J:Z)?(ee[V]=m?P[h]:F[h],ee.gap=!0,x?(ee.s=b,B=!0):ee.s=0):ee[q]=ee[ne]=b,N&&(ee.id=String(N[h]))}if(t(I,f),o(p,f),i(I,f),W){for(h=0;h<I.length;)I[h][V]===b?I.splice(h,1):h++;if(T.sort(I,function(ce,ye){return ce[V]-ye[V]||ce.i-ye.i}),B){for(h=0;h<I.length-1&&I[h].gap;)h++;for((y=I[h].s)||(y=I[h].s=0),g=0;g<h;g++)I[g].s=y;for(v=I.length-1;v>h&&I[v].gap;)v--;for(y=I[v].s,g=I.length-1;g>v;g--)I[g].s=y;for(;h<v;)if(I[++h].gap){for(g=h+1;I[g].gap;)g++;for(var te=I[h-1][V],oe=I[h-1].s,se=(I[g].s-oe)/(I[g][V]-te);h<g;)I[h].s=oe+(I[h][V]-te)*se,h++}}}return I},calcMarkerSize:a,calcAxisExpansion:n,setFirstScatter:s,getStackOpts:u}},4500:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){_.isArrayOrTypedArray(r.selectedpoints)&&_.tagSelected(T,r)}},90136:function(R,C,e){"use strict";var _=e(94288).hasColorscale,T=e(47128),r=e(43028);R.exports=function(w,b){r.hasLines(b)&&_(b,"line")&&T(w,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),r.hasMarkers(b)&&(_(b,"marker")&&T(w,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),_(b,"marker.line")&&T(w,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(R){"use strict";R.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(R,C,e){"use strict";var _=e(16356),T=e(96376).setGroupPositions;function r(w,b,c,o,t,i,n){t[o]=!0;var a={i:null,gap:!0,s:0};if(a[n]=c,w.splice(b,0,a),b&&c===w[b-1][n]){var s=w[b-1];a.s=s.s,a.i=s.i,a.gap=s.gap}else i&&(a.s=function(l,u,p,f){var m=l[u-1],h=l[u+1];return h?m?m.s+(h.s-m.s)*(p-m[f])/(h[f]-m[f]):h.s:m.s}(w,b,c,n));b||(w[0].t=w[1].t,w[0].trace=w[1].trace,delete w[1].t,delete w[1].trace)}R.exports=function(w,b){w._fullLayout.scattermode==="group"&&function(V,q){for(var ne=q.xaxis,$=q.yaxis,K=V._fullLayout,ee=V._fullData,J=V.calcdata,Z=[],te=[],oe=0;oe<ee.length;oe++){var se=ee[oe];se.visible===!0&&se.type==="scatter"&&se.xaxis===ne._id&&se.yaxis===$._id&&(se.orientation==="h"?Z.push(J[oe]):se.orientation==="v"&&te.push(J[oe]))}var ce={mode:K.scattermode,gap:K.scattergap};T(V,ne,$,te,ce),T(V,$,ne,Z,ce)}(w,b);var c=b.xaxis,o=b.yaxis,t=c._id+o._id,i=w._fullLayout._scatterStackOpts[t];if(i){var n,a,s,l,u,p,f,m,h,g,v,x,y,A,d,S=w.calcdata;for(var k in i){var E=(g=i[k]).traceIndices;if(E.length){for(v=g.stackgaps==="interpolate",x=g.groupnorm,g.orientation==="v"?(y="x",A="y"):(y="y",A="x"),d=new Array(E.length),n=0;n<d.length;n++)d[n]=!1;p=S[E[0]];var L=new Array(p.length);for(n=0;n<p.length;n++)L[n]=p[n][y];for(n=1;n<E.length;n++){for(u=S[E[n]],a=s=0;a<u.length;a++){for(f=u[a][y];f>L[s]&&s<L.length;s++)r(u,a,L[s],n,d,v,y),a++;if(f!==L[s]){for(l=0;l<n;l++)r(S[E[l]],s,f,l,d,v,y);L.splice(s,0,f)}s++}for(;s<L.length;s++)r(u,a,L[s],n,d,v,y),a++}var O=L.length;for(a=0;a<p.length;a++){for(m=p[a][A]=p[a].s,n=1;n<E.length;n++)(u=S[E[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=O,m+=u[a].s,u[a][A]=m;if(x)for(h=(x==="fraction"?m:m/100)||1,n=0;n<E.length;n++){var P=S[E[n]][a];P[A]/=h,P.sNorm=P.s/h}}for(n=0;n<E.length;n++){var F=(u=S[E[n]])[0].trace,U=_.calcMarkerSize(F,F._rawLength),I=Array.isArray(U);if(U&&d[n]||I){var N=U;for(U=new Array(O),a=0;a<O;a++)U[a]=u[a].gap?0:I?N[u[a].i]:N}var W=new Array(O),B=new Array(O);for(a=0;a<O;a++)W[a]=u[a].x,B[a]=u[a].y;_.calcAxisExpansion(w,F,c,o,W,B,U),u[0].t.orientation=g.orientation}}}}}},35036:function(R,C,e){"use strict";var _=e(3400),T=e(20011),r=e(52904);R.exports=function(w,b){var c,o,t;function i(u){return _.coerce(o._input,o,r,u)}if(b.scattermode==="group")for(t=0;t<w.length;t++)(o=w[t]).type==="scatter"&&(c=o._input,T(c,o,b,i));for(t=0;t<w.length;t++){var n=w[t];if(n.type==="scatter"){var a=n.fill;if(a!=="none"&&a!=="toself"&&(n.opacity=void 0,a==="tonexty"||a==="tonextx"))for(var s=t-1;s>=0;s--){var l=w[s];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},18800:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(52904),w=e(88200),b=e(43028),c=e(43980),o=e(31147),t=e(43912),i=e(74428),n=e(66828),a=e(11731),s=e(124),l=e(70840),u=e(3400).coercePattern;R.exports=function(p,f,m,h){function g(E,L){return _.coerce(p,f,r,E,L)}var v=c(p,f,h,g);if(v||(f.visible=!1),f.visible){o(p,f,h,g),g("xhoverformat"),g("yhoverformat"),g("zorder");var x=t(p,f,h,g);h.scattermode==="group"&&f.orientation===void 0&&g("orientation","v");var y=!x&&v<w.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("mode",y),b.hasMarkers(f)&&i(p,f,m,h,g,{gradient:!0}),b.hasLines(f)&&(n(p,f,m,h,g,{backoff:!0}),a(p,f,g),g("connectgaps"),g("line.simplify")),b.hasText(f)&&(g("texttemplate"),s(p,f,h,g));var A=[];(b.hasMarkers(f)||b.hasText(f))&&(g("cliponaxis"),g("marker.maxdisplayed"),A.push("points")),g("fill",x?x.fillDflt:"none"),f.fill!=="none"&&(l(p,f,m,g,{moduleHasFillgradient:!0}),b.hasLines(f)||a(p,f,g),u(g,"fillpattern",f.fillcolor,!1));var d=(f.line||{}).color,S=(f.marker||{}).color;f.fill!=="tonext"&&f.fill!=="toself"||A.push("fills"),g("hoveron",A.join("+")||"points"),f.hoveron!=="fills"&&g("hovertemplate");var k=T.getComponentMethod("errorbars","supplyDefaults");k(p,f,d||S||m,{axis:"y"}),k(p,f,d||S||m,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(f,g)}}},98304:function(R){"use strict";R.exports=function(C){return{valType:"color",editType:"style",anim:!0}}},70840:function(R,C,e){"use strict";var _=e(76308),T=e(3400).isArrayOrTypedArray;R.exports=function(r,w,b,c,o){o||(o={});var t,i=!1;if(w.marker){var n=w.marker.color,a=(w.marker.line||{}).color;n&&!T(n)?i=n:a&&!T(a)&&(i=a)}if(o.moduleHasFillgradient&&c("fillgradient.type")!=="none"){c("fillgradient.start"),c("fillgradient.stop");var s=c("fillgradient.colorscale");s&&(t=function(l){for(var u=_.interpolate(l[0][1],l[1][1],.5),p=2;p<l.length;p++){var f=_.interpolate(l[p-1][1],l[p][1],.5);u=_.interpolate(u,f,l[p-1][0]/l[p][0])}return u}(s))}c("fillcolor",_.addOpacity((w.line||{}).color||i||t||b,.5))}},76688:function(R,C,e){"use strict";var _=e(54460);R.exports=function(T,r,w){var b={},c={_fullLayout:w},o=_.getFromTrace(c,r,"x"),t=_.getFromTrace(c,r,"y"),i=T.orig_x;i===void 0&&(i=T.x);var n=T.orig_y;return n===void 0&&(n=T.y),b.xLabel=_.tickText(o,o.c2l(i),!0).text,b.yLabel=_.tickText(t,t.c2l(n),!0).text,b}},44928:function(R,C,e){"use strict";var _=e(76308),T=e(43028);R.exports=function(r,w){var b,c;if(r.mode==="lines")return(b=r.line.color)&&_.opacity(b)?b:r.fillcolor;if(r.mode==="none")return r.fill?r.fillcolor:"";var o=w.mcc||(r.marker||{}).color,t=w.mlcc||((r.marker||{}).line||{}).color;return(c=o&&_.opacity(o)?o:t&&_.opacity(t)&&(w.mlw||((r.marker||{}).line||{}).width)?t:"")?_.opacity(c)<.3?_.addOpacity(c,.3):c:(b=(r.line||{}).color)&&_.opacity(b)&&T.hasLines(r)&&r.line.width?b:r.fillcolor}},20011:function(R,C,e){"use strict";var _=e(71888).getAxisGroup;R.exports=function(T,r,w,b){var c=r.orientation,o=r[{v:"x",h:"y"}[c]+"axis"],t=_(w,o)+c,i=w._alignmentOpts||{},n=b("alignmentgroup"),a=i[t];a||(a=i[t]={});var s=a[n];s?s.traces.push(r):s=a[n]={traces:[r],alignmentIndex:Object.keys(a).length,offsetGroups:{}};var l=b("offsetgroup"),u=s.offsetGroups,p=u[l];l&&(p||(p=u[l]={offsetIndex:Object.keys(u).length}),r._offsetIndex=p.offsetIndex)}},98723:function(R,C,e){"use strict";var _=e(3400),T=e(93024),r=e(24040),w=e(44928),b=e(76308),c=_.fillText;R.exports=function(o,t,i,n){var a=o.cd,s=a[0].trace,l=o.xa,u=o.ya,p=l.c2p(t),f=u.c2p(i),m=[p,f],h=s.hoveron||"",g=s.mode.indexOf("markers")!==-1?3:.5,v=!!s.xperiodalignment,x=!!s.yperiodalignment;if(h.indexOf("points")!==-1){var y=function(W){var B=Math.max(g,W.mrc||0),V=l.c2p(W.x)-p,q=u.c2p(W.y)-f;return Math.max(Math.sqrt(V*V+q*q)-B,1-g/B)},A=T.getDistanceFunction(n,function(W){if(v){var B=l.c2p(W.xStart),V=l.c2p(W.xEnd);return p>=Math.min(B,V)&&p<=Math.max(B,V)?0:1/0}var q=Math.max(3,W.mrc||0),ne=1-1/q,$=Math.abs(l.c2p(W.x)-p);return $<q?ne*$/q:$-q+ne},function(W){if(x){var B=u.c2p(W.yStart),V=u.c2p(W.yEnd);return f>=Math.min(B,V)&&f<=Math.max(B,V)?0:1/0}var q=Math.max(3,W.mrc||0),ne=1-1/q,$=Math.abs(u.c2p(W.y)-f);return $<q?ne*$/q:$-q+ne},y);if(T.getClosest(a,A,o),o.index!==!1){var d=a[o.index],S=l.c2p(d.x,!0),k=u.c2p(d.y,!0),E=d.mrc||1;o.index=d.i;var L=a[0].t.orientation,O=L&&(d.sNorm||d.s),P=L==="h"?O:d.orig_x!==void 0?d.orig_x:d.x,F=L==="v"?O:d.orig_y!==void 0?d.orig_y:d.y;return _.extendFlat(o,{color:w(s,d),x0:S-E,x1:S+E,xLabelVal:P,y0:k-E,y1:k+E,yLabelVal:F,spikeDistance:y(d),hovertemplate:s.hovertemplate}),c(d,s,o),r.getComponentMethod("errorbars","hoverInfo")(d,s,o),[o]}}function U(W){if(!W)return!1;var B=W.node();try{var V=new DOMPoint(m[0],m[1]);return B.isPointInFill(V)}catch{var q=B.ownerSVGElement.createSVGPoint();return q.x=m[0],q.y=m[1],B.isPointInFill(q)}}if(h.indexOf("fills")!==-1&&s._fillElement&&U(s._fillElement)&&!U(s._fillExclusionElement)){var I=function(W){var B,V,q,ne,$,K,ee,J,Z,te=[],oe=1/0,se=-1/0,ce=1/0,ye=-1/0;for(B=0;B<W.length;B++){var me=W[B];me.contains(m)&&(te.push(me),ce=Math.min(ce,me.ymin),ye=Math.max(ye,me.ymax))}if(te.length===0)return null;for(V=((ce=Math.max(ce,0))+(ye=Math.min(ye,u._length)))/2,B=0;B<te.length;B++)for(ne=te[B].pts,q=1;q<ne.length;q++)(J=ne[q-1][1])>V!=(Z=ne[q][1])>=V&&(K=ne[q-1][0],ee=ne[q][0],Z-J&&($=K+(ee-K)*(V-J)/(Z-J),oe=Math.min(oe,$),se=Math.max(se,$)));return{x0:oe=Math.max(oe,0),x1:se=Math.min(se,l._length),y0:V,y1:V}}(s._polygons);I===null&&(I={x0:m[0],x1:m[0],y0:m[1],y1:m[1]});var N=b.defaultLine;return b.opacity(s.fillcolor)?N=s.fillcolor:b.opacity((s.line||{}).color)&&(N=s.line.color),_.extendFlat(o,{distance:o.maxHoverDistance,x0:I.x0,x1:I.x1,y0:I.y0,y1:I.y1,color:N,hovertemplate:!1}),delete o.index,s.text&&!_.isArrayOrTypedArray(s.text)?o.text=String(s.text):o.text=s.name,[o]}}},65875:function(R,C,e){"use strict";var _=e(43028);R.exports={hasLines:_.hasLines,hasMarkers:_.hasMarkers,hasText:_.hasText,isBubble:_.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(R){"use strict";R.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(R,C,e){"use strict";var _=e(3400),T=e(55308);R.exports=function(r,w){var b,c=w.barmode==="group";w.scattermode==="group"&&(b=c?w.bargap:.2,_.coerce(r,w,T,"scattergap",b))}},66828:function(R,C,e){"use strict";var _=e(3400).isArrayOrTypedArray,T=e(94288).hasColorscale,r=e(27260);R.exports=function(w,b,c,o,t,i){i||(i={});var n=(w.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",c),T(w,"line")?r(w,b,o,t,{prefix:"line.",cLetter:"c"}):t("line.color",!_(n)&&n||c),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(R,C,e){"use strict";var _=e(43616),T=e(39032),r=T.BADNUM,w=T.LOG_CLIP,b=w+.5,c=w-.5,o=e(3400),t=o.segmentsIntersect,i=o.constrain,n=e(88200);R.exports=function(a,s){var l,u,p,f,m,h,g,v,x,y,A,d,S,k,E,L,O,P,F=s.trace||{},U=s.xaxis,I=s.yaxis,N=U.type==="log",W=I.type==="log",B=U._length,V=I._length,q=s.backoff,ne=F.marker,$=s.connectGaps,K=s.baseTolerance,ee=s.shape,J=ee==="linear",Z=F.fill&&F.fill!=="none",te=[],oe=n.minTolerance,se=a.length,ce=new Array(se),ye=0;function me(vt){var We=a[vt];if(!We)return!1;var Ze=s.linearized?U.l2p(We.x):U.c2p(We.x),Ne=s.linearized?I.l2p(We.y):I.c2p(We.y);if(Ze===r){if(N&&(Ze=U.c2p(We.x,!0)),Ze===r)return!1;W&&Ne===r&&(Ze*=Math.abs(U._m*V*(U._m>0?b:c)/(I._m*B*(I._m>0?b:c)))),Ze*=1e3}if(Ne===r){if(W&&(Ne=I.c2p(We.y,!0)),Ne===r)return!1;Ne*=1e3}return[Ze,Ne]}function fe(vt,We,Ze,Ne){var Xe=Ze-vt,st=Ne-We,lt=.5-vt,xt=.5-We,bt=Xe*Xe+st*st,Ve=Xe*lt+st*xt;if(Ve>0&&Ve<bt){var Be=lt*st-xt*Xe;if(Be*Be<bt)return!0}}function pe(vt,We){var Ze=vt[0]/B,Ne=vt[1]/V,Xe=Math.max(0,-Ze,Ze-1,-Ne,Ne-1);return Xe&&O!==void 0&&fe(Ze,Ne,O,P)&&(Xe=0),Xe&&We&&fe(Ze,Ne,We[0]/B,We[1]/V)&&(Xe=0),(1+n.toleranceGrowth*Xe)*K}function ge(vt,We){var Ze=vt[0]-We[0],Ne=vt[1]-We[1];return Math.sqrt(Ze*Ze+Ne*Ne)}var ke,Ce,de,ae,re,he,Se,xe=n.maxScreensAway,Te=-B*xe,Ae=B*(1+xe),Pe=-V*xe,De=V*(1+xe),ve=[[Te,Pe,Ae,Pe],[Ae,Pe,Ae,De],[Ae,De,Te,De],[Te,De,Te,Pe]];function we(vt){if(vt[0]<Te||vt[0]>Ae||vt[1]<Pe||vt[1]>De)return[i(vt[0],Te,Ae),i(vt[1],Pe,De)]}function Ee(vt,We){return vt[0]===We[0]&&(vt[0]===Te||vt[0]===Ae)||vt[1]===We[1]&&(vt[1]===Pe||vt[1]===De)||void 0}function Fe(vt,We,Ze){return function(Ne,Xe){var st=we(Ne),lt=we(Xe),xt=[];if(st&&lt&&Ee(st,lt))return xt;st&&xt.push(st),lt&&xt.push(lt);var bt=2*o.constrain((Ne[vt]+Xe[vt])/2,We,Ze)-((st||Ne)[vt]+(lt||Xe)[vt]);return bt&&((st&&lt?bt>0==st[vt]>lt[vt]?st:lt:st||lt)[vt]+=bt),xt}}function Le(vt){var We=vt[0],Ze=vt[1],Ne=We===ce[ye-1][0],Xe=Ze===ce[ye-1][1];if(!Ne||!Xe)if(ye>1){var st=We===ce[ye-2][0],lt=Ze===ce[ye-2][1];Ne&&(We===Te||We===Ae)&&st?lt?ye--:ce[ye-1]=vt:Xe&&(Ze===Pe||Ze===De)&&lt?st?ye--:ce[ye-1]=vt:ce[ye++]=vt}else ce[ye++]=vt}function je(vt){ce[ye-1][0]!==vt[0]&&ce[ye-1][1]!==vt[1]&&Le([de,ae]),Le(vt),re=null,de=ae=0}ee==="linear"||ee==="spline"?Se=function(vt,We){for(var Ze=[],Ne=0,Xe=0;Xe<4;Xe++){var st=ve[Xe],lt=t(vt[0],vt[1],We[0],We[1],st[0],st[1],st[2],st[3]);lt&&(!Ne||Math.abs(lt.x-Ze[0][0])>1||Math.abs(lt.y-Ze[0][1])>1)&&(lt=[lt.x,lt.y],Ne&&ge(lt,vt)<ge(Ze[0],vt)?Ze.unshift(lt):Ze.push(lt),Ne++)}return Ze}:ee==="hv"||ee==="vh"?Se=function(vt,We){var Ze=[],Ne=we(vt),Xe=we(We);return Ne&&Xe&&Ee(Ne,Xe)||(Ne&&Ze.push(Ne),Xe&&Ze.push(Xe)),Ze}:ee==="hvh"?Se=Fe(0,Te,Ae):ee==="vhv"&&(Se=Fe(1,Pe,De));var Ge=o.isArrayOrTypedArray(ne);function Je(vt){if(vt&&q&&(vt.i=l,vt.d=a,vt.trace=F,vt.marker=Ge?ne[vt.i]:ne,vt.backoff=q),O=vt[0]/B,P=vt[1]/V,ke=vt[0]<Te?Te:vt[0]>Ae?Ae:0,Ce=vt[1]<Pe?Pe:vt[1]>De?De:0,ke||Ce){if(ye)if(re){var We=Se(re,vt);We.length>1&&(je(We[0]),ce[ye++]=We[1])}else he=Se(ce[ye-1],vt)[0],ce[ye++]=he;else ce[ye++]=[ke||vt[0],Ce||vt[1]];var Ze=ce[ye-1];ke&&Ce&&(Ze[0]!==ke||Ze[1]!==Ce)?(re&&(de!==ke&&ae!==Ce?Le(de&&ae?(Ne=re,st=(Xe=vt)[0]-Ne[0],lt=(Xe[1]-Ne[1])/st,(Ne[1]*Xe[0]-Xe[1]*Ne[0])/st>0?[lt>0?Te:Ae,De]:[lt>0?Ae:Te,Pe]):[de||ke,ae||Ce]):de&&ae&&Le([de,ae])),Le([ke,Ce])):de-ke&&ae-Ce&&Le([ke||de,Ce||ae]),re=vt,de=ke,ae=Ce}else re&&je(Se(re,vt)[0]),ce[ye++]=vt;var Ne,Xe,st,lt}for(l=0;l<se;l++)if(u=me(l)){for(ye=0,re=null,Je(u),l++;l<se;l++){if(!(f=me(l))){if($)continue;break}if(J&&s.simplify){var rt=me(l+1);if(y=ge(f,u),Z&&(ye===0||ye===se-1)||!(y<pe(f,rt)*oe)){for(v=[(f[0]-u[0])/y,(f[1]-u[1])/y],m=u,A=y,d=k=E=0,g=!1,p=f,l++;l<a.length;l++){if(h=rt,rt=me(l+1),!h){if($)continue;break}if(L=(x=[h[0]-u[0],h[1]-u[1]])[0]*v[1]-x[1]*v[0],k=Math.min(k,L),(E=Math.max(E,L))-k>pe(h,rt))break;p=h,(S=x[0]*v[0]+x[1]*v[1])>A?(A=S,f=h,g=!1):S<d&&(d=S,m=h,g=!0)}if(g?(Je(f),p!==m&&Je(m)):(m!==u&&Je(m),p!==f&&Je(f)),Je(p),l>=a.length||!h)break;Je(h),u=h}}else Je(f)}re&&Le([de||re[0],ae||re[1]]),te.push(ce.slice(0,ye))}var ot=ee.slice(ee.length-1);if(q&&ot!=="h"&&ot!=="v"){for(var yt=!1,_t=-1,mt=[],tt=0;tt<te.length;tt++)for(var Qe=0;Qe<te[tt].length-1;Qe++){var Dt=te[tt][Qe],zt=te[tt][Qe+1],pt=_.applyBackoff(zt,Dt);pt[0]===zt[0]&&pt[1]===zt[1]||(yt=!0),mt[_t+1]||(mt[++_t]=[Dt,[pt[0],pt[1]]])}return yt?mt:te}return te}},11731:function(R){"use strict";R.exports=function(C,e,_){_("line.shape")==="spline"&&_("line.smoothing")}},14328:function(R){"use strict";var C={tonextx:1,tonexty:1,tonext:1};R.exports=function(e,_,T){var r,w,b,c,o,t={},i=!1,n=-1,a=0,s=-1;for(w=0;w<T.length;w++)(b=(r=T[w][0].trace).stackgroup||"")?b in t?o=t[b]:(o=t[b]=a,a++):r.fill in C&&s>=0?o=s:(o=s=a,a++),o<n&&(i=!0),r._groupIndex=n=o;var l=T.slice();i&&l.sort(function(p,f){var m=p[0].trace,h=f[0].trace;return m._groupIndex-h._groupIndex||m.index-h.index});var u={};for(w=0;w<l.length;w++)b=(r=l[w][0].trace).stackgroup||"",r.visible===!0?(r._nexttrace=null,r.fill in C&&(c=u[b],r._prevtrace=c||null,c&&(c._nexttrace=r)),r._ownfill=r.fill&&(r.fill.substr(0,6)==="tozero"||r.fill==="toself"||r.fill.substr(0,2)==="to"&&!r._prevtrace),u[b]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return l}},7152:function(R,C,e){"use strict";var _=e(38248);R.exports=function(T,r){r||(r=2);var w=T.marker,b=w.sizeref||1,c=w.sizemin||0,o=w.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=o(t/r);return _(i)&&i>0?Math.max(i,c):0}}},5528:function(R){"use strict";R.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(R,C,e){"use strict";var _=e(76308),T=e(94288).hasColorscale,r=e(27260),w=e(43028);R.exports=function(b,c,o,t,i,n){var a=w.isBubble(b),s=(b.line||{}).color;n=n||{},s&&(o=s),i("marker.symbol"),i("marker.opacity",a?.7:1),i("marker.size"),n.noAngle||(i("marker.angle"),n.noAngleRef||i("marker.angleref"),n.noStandOff||i("marker.standoff")),i("marker.color",o),T(b,"marker")&&r(b,c,t,i,{prefix:"marker.",cLetter:"c"}),n.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),n.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&c.marker.color!==s?s:a?_.background:_.defaultLine),T(b,"marker.line")&&r(b,c,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",a?1:0)),a&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),n.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(R,C,e){"use strict";var _=e(3400).dateTick0,T=e(39032).ONEWEEK;function r(w,b){return _(b,w%T==0?1:0)}R.exports=function(w,b,c,o,t){if(t||(t={x:!0,y:!0}),t.x){var i=o("xperiod");i&&(o("xperiod0",r(i,b.xcalendar)),o("xperiodalignment"))}if(t.y){var n=o("yperiod");n&&(o("yperiod0",r(n,b.ycalendar)),o("yperiodalignment"))}}},96504:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(3400),w=r.ensureSingle,b=r.identity,c=e(43616),o=e(43028),t=e(52340),i=e(14328),n=e(92065).tester;function a(s,l,u,p,f,m,h){var g,v=s._context.staticPlot;(function(Le,je,Ge,Je,rt){var ot=Ge.xaxis,yt=Ge.yaxis,_t=_.extent(r.simpleMap(ot.range,ot.r2c)),mt=_.extent(r.simpleMap(yt.range,yt.r2c)),tt=Je[0].trace;if(o.hasMarkers(tt)){var Qe=tt.marker.maxdisplayed;if(Qe!==0){var Dt=Je.filter(function(We){return We.x>=_t[0]&&We.x<=_t[1]&&We.y>=mt[0]&&We.y<=mt[1]}),zt=Math.ceil(Dt.length/Qe),pt=0;rt.forEach(function(We,Ze){var Ne=We[0].trace;o.hasMarkers(Ne)&&Ne.marker.maxdisplayed>0&&Ze<je&&pt++});var vt=Math.round(pt*zt/3+Math.floor(pt/3)*zt/7.1);Je.forEach(function(We){delete We.vis}),Dt.forEach(function(We,Ze){Math.round((Ze+vt)%zt)===0&&(We.vis=!0)})}}})(0,l,u,p,f);var x=!!h&&h.duration>0;function y(Le){return x?Le.transition():Le}var A=u.xaxis,d=u.yaxis,S=p[0].trace,k=S.line,E=_.select(m),L=w(E,"g","errorbars"),O=w(E,"g","lines"),P=w(E,"g","points"),F=w(E,"g","text");if(T.getComponentMethod("errorbars","plot")(s,L,u,h),S.visible===!0){var U,I;y(E).style("opacity",S.opacity);var N,W,B=S.fill.charAt(S.fill.length-1);B!=="x"&&B!=="y"&&(B=""),B==="y"?(N=1,W=d.c2p(0,!0)):B==="x"&&(N=0,W=A.c2p(0,!0)),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var V,q,ne="",$=[],K=S._prevtrace,ee=null,J=null;K&&(ne=K._prevRevpath||"",I=K._nextFill,$=K._ownPolygons,ee=K._fillsegments,J=K._fillElement);var Z,te,oe,se,ce,ye,me="",fe="",pe=[];S._polygons=[];var ge=[],ke=[],Ce=r.noop;if(U=S._ownFill,o.hasLines(S)||S.fill!=="none"){I&&I.datum(p),["hv","vh","hvh","vhv"].indexOf(k.shape)!==-1?(Z=c.steps(k.shape),te=c.steps(k.shape.split("").reverse().join(""))):Z=te=k.shape==="spline"?function(Le){var je=Le[Le.length-1];return Le.length>1&&Le[0][0]===je[0]&&Le[0][1]===je[1]?c.smoothclosed(Le.slice(1),k.smoothing):c.smoothopen(Le,k.smoothing)}:function(Le){return"M"+Le.join("L")},oe=function(Le){return te(Le.reverse())},ke=t(p,{xaxis:A,yaxis:d,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(k.width||1,3)/4,shape:k.shape,backoff:k.backoff,simplify:k.simplify,fill:S.fill}),ge=new Array(ke.length);var de=0;for(g=0;g<ke.length;g++){var ae,re=ke[g];ae&&B?ae.push.apply(ae,re):(ae=re.slice(),ge[de]=ae,de++)}S._fillElement=null,S._fillExclusionElement=J,S._fillsegments=ge.slice(0,de),ge=S._fillsegments,ke.length&&(se=ke[0][0].slice(),ye=(ce=ke[ke.length-1])[ce.length-1].slice()),Ce=function(Le){return function(je){if(V=Z(je),q=oe(je),me?B?(me+="L"+V.substr(1),fe=q+"L"+fe.substr(1)):(me+="Z"+V,fe=q+"Z"+fe):(me=V,fe=q),o.hasLines(S)){var Ge=_.select(this);if(Ge.datum(p),Le)y(Ge.style("opacity",0).attr("d",V).call(c.lineGroupStyle)).style("opacity",1);else{var Je=y(Ge);Je.attr("d",V),c.singleLineStyle(p,Je)}}}}}var he=O.selectAll(".js-line").data(ke);y(he.exit()).style("opacity",0).remove(),he.each(Ce(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect",v?"none":"non-scaling-stroke").call(c.lineGroupStyle).each(Ce(!0)),c.setClipUrl(he,u.layerClipId,s);var Se=function(){var Le=new Array(ge.length);for(g=0;g<ge.length;g++)Le[g]=n(ge[g]);return Le},xe=function(Le){var je,Ge;if(Le&&Le.length!==0){for(je=new Array(Le.length-1+ge.length),Ge=0;Ge<Le.length-1;Ge++)je[Ge]=n(Le[Ge]);var Je=Le[Le.length-1].slice();for(Je.reverse(),Ge=0;Ge<ge.length;Ge++)je[Le.length-1+Ge]=n(ge[Ge].concat(Je))}else for(je=new Array(ge.length),Ge=0;Ge<ge.length;Ge++){var rt=ge[Ge][0].slice(),ot=ge[Ge][ge[Ge].length-1].slice();rt[N]=ot[N]=W;var yt=[ot,rt].concat(ge[Ge]);je[Ge]=n(yt)}return je};ke.length?(U?(U.datum(p),se&&ye&&(B?(se[N]=ye[N]=W,y(U).attr("d","M"+ye+"L"+se+"L"+me.substr(1)).call(c.singleFillStyle,s),pe=xe(null)):(y(U).attr("d",me+"Z").call(c.singleFillStyle,s),pe=Se())),S._polygons=pe,S._fillElement=U):I&&(S.fill.substr(0,6)==="tonext"&&me&&ne?(S.fill==="tonext"?(y(I).attr("d",me+"Z"+ne+"Z").call(c.singleFillStyle,s),pe=Se(),S._polygons=pe.concat($)):(y(I).attr("d",me+"L"+ne.substr(1)+"Z").call(c.singleFillStyle,s),pe=xe(ee),S._polygons=pe),S._fillElement=I):Ae(I)),S._prevRevpath=fe):(U?Ae(U):I&&Ae(I),S._prevRevpath=null),S._ownPolygons=pe,P.datum(p),F.datum(p),function(Le,je,Ge){var Je,rt=Ge[0].trace,ot=o.hasMarkers(rt),yt=o.hasText(rt),_t=Ee(rt),mt=Fe,tt=Fe;if(ot||yt){var Qe=b,Dt=rt.stackgroup,zt=Dt&&s._fullLayout._scatterStackOpts[A._id+d._id][Dt].stackgaps==="infer zero";rt.marker.maxdisplayed||rt._needsCull?Qe=zt?De:Pe:Dt&&!zt&&(Qe=ve),ot&&(mt=Qe),yt&&(tt=Qe)}var pt,vt=(Je=Le.selectAll("path.point").data(mt,_t)).enter().append("path").classed("point",!0);x&&vt.call(c.pointStyle,rt,s).call(c.translatePoints,A,d).style("opacity",0).transition().style("opacity",1),Je.order(),ot&&(pt=c.makePointStyleFns(rt)),Je.each(function(We){var Ze=_.select(this),Ne=y(Ze);c.translatePoint(We,Ne,A,d)?(c.singlePointStyle(We,Ne,rt,pt,s),u.layerClipId&&c.hideOutsideRangePoint(We,Ne,A,d,rt.xcalendar,rt.ycalendar),rt.customdata&&Ze.classed("plotly-customdata",We.data!==null&&We.data!==void 0)):Ne.remove()}),x?Je.exit().transition().style("opacity",0).remove():Je.exit().remove(),(Je=je.selectAll("g").data(tt,_t)).enter().append("g").classed("textpoint",!0).append("text"),Je.order(),Je.each(function(We){var Ze=_.select(this),Ne=y(Ze.select("text"));c.translatePoint(We,Ne,A,d)?u.layerClipId&&c.hideOutsideRangePoint(We,Ze,A,d,rt.xcalendar,rt.ycalendar):Ze.remove()}),Je.selectAll("text").call(c.textPointStyle,rt,s).each(function(We){var Ze=A.c2p(We.x),Ne=d.c2p(We.y);_.select(this).selectAll("tspan.line").each(function(){y(_.select(this)).attr({x:Ze,y:Ne})})}),Je.exit().remove()}(P,F,p);var Te=S.cliponaxis===!1?null:u.layerClipId;c.setClipUrl(P,Te,s),c.setClipUrl(F,Te,s)}function Ae(Le){y(Le).attr("d","M0,0Z")}function Pe(Le){return Le.filter(function(je){return!je.gap&&je.vis})}function De(Le){return Le.filter(function(je){return je.vis})}function ve(Le){return Le.filter(function(je){return!je.gap})}function we(Le){return Le.id}function Ee(Le){if(Le.ids)return we}function Fe(){return!1}}R.exports=function(s,l,u,p,f,m){var h,g,v=!f,x=!!f&&f.duration>0,y=i(s,l,u);(h=p.selectAll("g.trace").data(y,function(A){return A[0].trace.uid})).enter().append("g").attr("class",function(A){return"trace scatter trace"+A[0].trace.uid}).style("stroke-miterlimit",2),h.order(),function(A,d,S){d.each(function(k){var E=w(_.select(this),"g","fills");c.setClipUrl(E,S.layerClipId,A);var L=k[0].trace,O=[];L._ownfill&&O.push("_ownFill"),L._nexttrace&&O.push("_nextFill");var P=E.selectAll("g").data(O,b);P.enter().append("g"),P.exit().each(function(F){L[F]=null}).remove(),P.order().each(function(F){L[F]=w(_.select(this),"path","js-fill")})})}(s,h,l),x?(m&&(g=m()),_.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){p.selectAll("g.trace").each(function(A,d){a(s,d,l,A,y,this,f)})})):h.each(function(A,d){a(s,d,l,A,y,this,f)}),v&&h.exit().remove(),p.selectAll("path:not([d])").remove()}},91560:function(R,C,e){"use strict";var _=e(43028);R.exports=function(T,r){var w,b,c,o,t=T.cd,i=T.xaxis,n=T.yaxis,a=[],s=t[0].trace;if(!_.hasMarkers(s)&&!_.hasText(s))return[];if(r===!1)for(w=0;w<t.length;w++)t[w].selected=0;else for(w=0;w<t.length;w++)b=t[w],c=i.c2p(b.x),o=n.c2p(b.y),b.i!==null&&r.contains([c,o],!1,w,T)?(a.push({pointNumber:b.i,x:i.c2d(b.x),y:n.c2d(b.y)}),b.selected=1):b.selected=0;return a}},43912:function(R){"use strict";var C=["orientation","groupnorm","stackgaps"];R.exports=function(e,_,T,r){var w=T._scatterStackOpts,b=r("stackgroup");if(b){var c=_.xaxis+_.yaxis,o=w[c];o||(o=w[c]={});var t=o[b],i=!1;t?t.traces.push(_):(t=o[b]={traceIndices:[],traces:[_]},i=!0);for(var n={orientation:_.x&&!_.y?"h":"v"},a=0;a<C.length;a++){var s=C[a],l=s+"Found";if(!t[l]){var u=e[s]!==void 0,p=s==="orientation";if((u||i)&&(t[s]=r(s,n[s]),p&&(t.fillDflt=t[s]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!i&&(delete t.traces[0][s],p))))for(var f=0;f<t.traces.length-1;f++){var m=t.traces[f];m._input.fill!==m.fill&&(m.fill=t.fillDflt)}}}return t}}},49224:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(24040);function w(c,o,t){T.pointStyle(c.selectAll("path.point"),o,t)}function b(c,o,t){T.textPointStyle(c.selectAll("text"),o,t)}R.exports={style:function(c){var o=_.select(c).selectAll("g.trace.scatter");o.style("opacity",function(t){return t[0].trace.opacity}),o.selectAll("g.points").each(function(t){w(_.select(this),t.trace||t[0].trace,c)}),o.selectAll("g.text").each(function(t){b(_.select(this),t.trace||t[0].trace,c)}),o.selectAll("g.trace path.js-line").call(T.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(T.fillGroupStyle,c,!1),r.getComponentMethod("errorbars","style")(o)},stylePoints:w,styleText:b,styleOnSelect:function(c,o,t){var i=o[0].trace;i.selectedpoints?(T.selectedPointStyle(t.selectAll("path.point"),i),T.selectedTextStyle(t.selectAll("text"),i)):(w(t,i,c),b(t,i,c))}}},43028:function(R,C,e){"use strict";var _=e(3400),T=e(38116).isTypedArraySpec;R.exports={hasLines:function(r){return r.visible&&r.mode&&r.mode.indexOf("lines")!==-1},hasMarkers:function(r){return r.visible&&(r.mode&&r.mode.indexOf("markers")!==-1||r.type==="splom")},hasText:function(r){return r.visible&&r.mode&&r.mode.indexOf("text")!==-1},isBubble:function(r){var w=r.marker;return _.isPlainObject(w)&&(_.isArrayOrTypedArray(w.size)||T(w.size))}}},124:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r,w,b,c){c=c||{},b("textposition"),_.coerceFont(b,"textfont",c.font||w.font,c),c.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(R,C,e){"use strict";var _=e(3400),T=e(24040);R.exports=function(r,w,b,c){var o,t=c("x"),i=c("y");if(T.getComponentMethod("calendars","handleTraceDefaults")(r,w,["x","y"],b),t){var n=_.minRowLength(t);i?o=Math.min(n,_.minRowLength(i)):(o=n,c("y0"),c("dy"))}else{if(!i)return 0;o=_.minRowLength(i),c("x0"),c("dx")}return w._length=o,o}},91592:function(R,C,e){"use strict";var _=e(52904),T=e(25376),r=e(49084),w=e(29736).axisHoverFormat,b=e(21776).Ks,c=e(21776).Gw,o=e(45464),t=e(99168),i=e(87792),n=e(92880).extendFlat,a=e(67824).overrideAll,s=e(95376),l=_.line,u=_.marker,p=u.line,f=n({width:l.width,dash:{valType:"enumerated",values:s(t),dflt:"solid"}},r("line")),m=R.exports=a({x:_.x,y:_.y,z:{valType:"data_array"},text:n({},_.text,{}),texttemplate:c({},{}),hovertext:n({},_.hovertext,{}),hovertemplate:b(),xhoverformat:w("x"),yhoverformat:w("y"),zhoverformat:w("z"),mode:n({},_.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:_.connectgaps,line:f,marker:n({symbol:{valType:"enumerated",values:s(i),dflt:"circle",arrayOk:!0},size:n({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:n({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:n({width:n({},p.width,{arrayOk:!1})},r("marker.line"))},r("marker")),textposition:n({},_.textposition,{dflt:"top center"}),textfont:T({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:o.opacity,hoverinfo:n({},o.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},41484:function(R,C,e){"use strict";var _=e(20148),T=e(90136);R.exports=function(r,w){var b=[{x:!1,y:!1,trace:w,t:{}}];return _(b,w),T(r,w),b}},45156:function(R,C,e){"use strict";var _=e(24040);function T(r,w,b,c){if(!w||!w.visible)return null;for(var o=_.getComponentMethod("errorbars","makeComputeError")(w),t=new Array(r.length),i=0;i<r.length;i++){var n=o(+r[i],i);if(c.type==="log"){var a=c.c2l(r[i]),s=r[i]-n[0],l=r[i]+n[1];if(t[i]=[(c.c2l(s,!0)-a)*b,(c.c2l(l,!0)-a)*b],s>0){var u=c.c2l(s);c._lowerLogErrorBound||(c._lowerLogErrorBound=u),c._lowerErrorBound=Math.min(c._lowerLogErrorBound,u)}}else t[i]=[-n[0]*b,n[1]*b]}return t}R.exports=function(r,w,b){var c=[T(r.x,r.error_x,w[0],b.xaxis),T(r.y,r.error_y,w[1],b.yaxis),T(r.z,r.error_z,w[2],b.zaxis)],o=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(c);if(o===0)return null;for(var t=new Array(o),i=0;i<o;i++){for(var n=[[0,0,0],[0,0,0]],a=0;a<3;a++)if(c[a])for(var s=0;s<2;s++)n[s][a]=c[a][i][s];t[i]=n}return t}},41064:function(R,C,e){"use strict";var _=e(67792).gl_line3d,T=e(67792).gl_scatter3d,r=e(67792).gl_error3d,w=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,c=e(3400),o=e(43080),t=e(33040).formatColor,i=e(7152),n=e(99168),a=e(87792),s=e(54460),l=e(10624).appendArrayPointValue,u=e(45156);function p(d,S){this.scene=d,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=p.prototype;function m(d){return d==null?0:d.indexOf("left")>-1?-1:d.indexOf("right")>-1?1:0}function h(d){return d==null?0:d.indexOf("top")>-1?-1:d.indexOf("bottom")>-1?1:0}function g(d,S){return S(4*d)}function v(d){return a[d]}function x(d,S,k,E,L){var O=null;if(c.isArrayOrTypedArray(d)){O=[];for(var P=0;P<S;P++)d[P]===void 0?O[P]=E:O[P]=k(d[P],L)}else O=k(d,c.identity);return O}function y(d){if(c.isArrayOrTypedArray(d)){var S=d[0];return c.isArrayOrTypedArray(S)&&(d=S),"rgb("+d.slice(0,3).map(function(k){return Math.round(255*k)})+")"}return null}function A(d){return c.isArrayOrTypedArray(d)?d.length===4&&typeof d[0]=="number"?y(d):d.map(y):null}f.handlePick=function(d){if(d.object&&(d.object===this.linePlot||d.object===this.delaunayMesh||d.object===this.textMarkers||d.object===this.scatterPlot)){var S=d.index=d.data.index;return d.object.highlight&&d.object.highlight(null),this.scatterPlot&&(d.object=this.scatterPlot,this.scatterPlot.highlight(d.data)),d.textLabel="",this.textLabels&&(c.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(d.textLabel=this.textLabels[S]):d.textLabel=this.textLabels),d.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},f.update=function(d){var S,k,E,L,O=this.scene.glplot.gl,P=n.solid;this.data=d;var F=function(N,W){var B,V,q,ne,$,K,ee=[],J=N.fullSceneLayout,Z=N.dataScale,te=J.xaxis,oe=J.yaxis,se=J.zaxis,ce=W.marker,ye=W.line,me=W.x||[],fe=W.y||[],pe=W.z||[],ge=me.length,ke=W.xcalendar,Ce=W.ycalendar,de=W.zcalendar;for($=0;$<ge;$++)B=te.d2l(me[$],0,ke)*Z[0],V=oe.d2l(fe[$],0,Ce)*Z[1],q=se.d2l(pe[$],0,de)*Z[2],ee[$]=[B,V,q];if(Array.isArray(W.text))K=W.text;else if(c.isTypedArray(W.text))K=Array.from(W.text);else if(W.text!==void 0)for(K=new Array(ge),$=0;$<ge;$++)K[$]=W.text;function ae(je,Ge){var Je=J[je];return s.tickText(Je,Je.d2l(Ge),!0).text}var re=W.texttemplate;if(re){var he=N.fullLayout._d3locale,Se=Array.isArray(re),xe=Se?Math.min(re.length,ge):ge,Te=Se?function(je){return re[je]}:function(){return re};for(K=new Array(xe),$=0;$<xe;$++){var Ae={x:me[$],y:fe[$],z:pe[$]},Pe={xLabel:ae("xaxis",me[$]),yLabel:ae("yaxis",fe[$]),zLabel:ae("zaxis",pe[$])},De={};l(De,W,$);var ve=W._meta||{};K[$]=c.texttemplateString(Te($),Pe,he,De,Ae,ve)}}if(ne={position:ee,mode:W.mode,text:K},"line"in W&&(ne.lineColor=t(ye,1,ge),ne.lineWidth=ye.width,ne.lineDashes=ye.dash),"marker"in W){var we=i(W);ne.scatterColor=t(ce,1,ge),ne.scatterSize=x(ce.size,ge,g,20,we),ne.scatterMarker=x(ce.symbol,ge,v,"\u25CF"),ne.scatterLineWidth=ce.line.width,ne.scatterLineColor=t(ce.line,1,ge),ne.scatterAngle=0}"textposition"in W&&(ne.textOffset=function(je){var Ge=[0,0];if(Array.isArray(je))for(var Je=0;Je<je.length;Je++)Ge[Je]=[0,0],je[Je]&&(Ge[Je][0]=m(je[Je]),Ge[Je][1]=h(je[Je]));else Ge[0]=m(je),Ge[1]=h(je);return Ge}(W.textposition),ne.textColor=t(W.textfont,1,ge),ne.textSize=x(W.textfont.size,ge,c.identity,12),ne.textFontFamily=W.textfont.family,ne.textFontWeight=W.textfont.weight,ne.textFontStyle=W.textfont.style,ne.textFontVariant=W.textfont.variant,ne.textAngle=0);var Ee=["x","y","z"];for(ne.project=[!1,!1,!1],ne.projectScale=[1,1,1],ne.projectOpacity=[1,1,1],$=0;$<3;++$){var Fe=W.projection[Ee[$]];(ne.project[$]=Fe.show)&&(ne.projectOpacity[$]=Fe.opacity,ne.projectScale[$]=Fe.scale)}ne.errorBounds=u(W,Z,J);var Le=function(je){for(var Ge=[0,0,0],Je=[[0,0,0],[0,0,0],[0,0,0]],rt=[1,1,1],ot=0;ot<3;ot++){var yt=je[ot];yt&&yt.copy_zstyle!==!1&&je[2].visible!==!1&&(yt=je[2]),yt&&yt.visible&&(Ge[ot]=yt.width/2,Je[ot]=o(yt.color),rt[ot]=yt.thickness)}return{capSize:Ge,color:Je,lineWidth:rt}}([W.error_x,W.error_y,W.error_z]);return ne.errorColor=Le.color,ne.errorLineWidth=Le.lineWidth,ne.errorCapSize=Le.capSize,ne.delaunayAxis=W.surfaceaxis,ne.delaunayColor=o(W.surfacecolor),ne}(this.scene,d);"mode"in F&&(this.mode=F.mode),"lineDashes"in F&&F.lineDashes in n&&(P=n[F.lineDashes]),this.color=A(F.scatterColor)||A(F.lineColor),this.dataPoints=F.position,S={gl:this.scene.glplot.gl,position:F.position,color:F.lineColor,lineWidth:F.lineWidth||1,dashes:P[0],dashScale:P[1],opacity:d.opacity,connectGaps:d.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=_(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=d.opacity;if(d.marker&&d.marker.opacity!==void 0&&(U*=d.marker.opacity),k={gl:this.scene.glplot.gl,position:F.position,color:F.scatterColor,size:F.scatterSize,glyph:F.scatterMarker,opacity:U,orthographic:!0,lineWidth:F.scatterLineWidth,lineColor:F.scatterLineColor,project:F.project,projectScale:F.projectScale,projectOpacity:F.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(k):(this.scatterPlot=T(k),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:F.position,glyph:F.text,color:F.textColor,size:F.textSize,angle:F.textAngle,alignment:F.textOffset,font:F.textFontFamily,fontWeight:F.textFontWeight,fontStyle:F.textFontStyle,fontVariant:F.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:d.opacity},this.textLabels=d.hovertext||d.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=T(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:F.position,color:F.errorColor,error:F.errorBounds,lineWidth:F.errorLineWidth,capSize:F.errorCapSize,opacity:d.opacity},this.errorBars?F.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):F.errorBounds&&(this.errorBars=r(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),F.delaunayAxis>=0){var I=function(N,W,B){var V,q=(B+1)%3,ne=(B+2)%3,$=[],K=[];for(V=0;V<N.length;++V){var ee=N[V];!isNaN(ee[q])&&isFinite(ee[q])&&!isNaN(ee[ne])&&isFinite(ee[ne])&&($.push([ee[q],ee[ne]]),K.push(V))}var J=b($);for(V=0;V<J.length;++V)for(var Z=J[V],te=0;te<Z.length;++te)Z[te]=K[Z[te]];return{positions:N,cells:J,meshColor:W}}(F.position,F.delaunayColor,F.delaunayAxis);I.opacity=d.opacity,this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=O,this.delaunayMesh=w(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},R.exports=function(d,S){var k=new p(d,S.uid);return k.update(S),k}},83484:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(43028),w=e(74428),b=e(66828),c=e(124),o=e(91592);R.exports=function(t,i,n,a){function s(v,x){return T.coerce(t,i,o,v,x)}var l=function(v,x,y,A){var d=0,S=y("x"),k=y("y"),E=y("z");return _.getComponentMethod("calendars","handleTraceDefaults")(v,x,["x","y","z"],A),S&&k&&E&&(d=Math.min(S.length,k.length,E.length),x._length=x._xlength=x._ylength=x._zlength=d),d}(t,i,s,a);if(l){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),r.hasMarkers(i)&&w(t,i,n,a,s,{noSelect:!0,noAngle:!0}),r.hasLines(i)&&(s("connectgaps"),b(t,i,n,a,s)),r.hasText(i)&&(s("texttemplate"),c(t,i,a,s,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var u=(i.line||{}).color,p=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",u||p);for(var f=["x","y","z"],m=0;m<3;++m){var h="projection."+f[m];s(h+".show")&&(s(h+".opacity"),s(h+".scale"))}var g=_.getComponentMethod("errorbars","supplyDefaults");g(t,i,u||p||n,{axis:"z"}),g(t,i,u||p||n,{axis:"y",inherit:"z"}),g(t,i,u||p||n,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(R,C,e){"use strict";R.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(R,C,e){"use strict";var _=e(98304),T=e(52904),r=e(45464),w=e(21776).Ks,b=e(21776).Gw,c=e(49084),o=e(92880).extendFlat,t=T.marker,i=T.line,n=t.line;R.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},T.mode,{dflt:"markers"}),text:o({},T.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},T.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:o({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:T.connectgaps,fill:o({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_(),marker:o({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:o({width:n.width,editType:"calc"},c("marker.line")),gradient:t.gradient,editType:"calc"},c("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:o({},r.hoverinfo,{flags:["a","b","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),zorder:T.zorder}},48228:function(R,C,e){"use strict";var _=e(38248),T=e(90136),r=e(20148),w=e(4500),b=e(16356).calcMarkerSize,c=e(50948);R.exports=function(o,t){var i=t._carpetTrace=c(o,t);if(i&&i.visible&&i.visible!=="legendonly"){var n;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var a,s,l=t._length,u=new Array(l),p=!1;for(n=0;n<l;n++)if(a=t.a[n],s=t.b[n],_(a)&&_(s)){var f=i.ab2xy(+a,+s,!0),m=i.isVisible(+a,+s);m||(p=!0),u[n]={x:f[0],y:f[1],a,b:s,vis:m}}else u[n]={x:!1,y:!1};return t._needsCull=p,u[0].carpet=i,u[0].trace=t,b(t,l),T(o,t),r(u,t),w(u,t),u}}},6176:function(R,C,e){"use strict";var _=e(3400),T=e(88200),r=e(43028),w=e(74428),b=e(66828),c=e(11731),o=e(124),t=e(70840),i=e(90372);R.exports=function(n,a,s,l){function u(g,v){return _.coerce(n,a,i,g,v)}u("carpet"),a.xaxis="x",a.yaxis="y";var p=u("a"),f=u("b"),m=Math.min(p.length,f.length);if(m){a._length=m,u("text"),u("texttemplate"),u("hovertext"),u("mode",m<T.PTS_LINESONLY?"lines+markers":"lines"),r.hasMarkers(a)&&w(n,a,s,l,u,{gradient:!0}),r.hasLines(a)&&(b(n,a,s,l,u,{backoff:!0}),c(n,a,u),u("connectgaps")),r.hasText(a)&&o(n,a,l,u);var h=[];(r.hasMarkers(a)||r.hasText(a))&&(u("marker.maxdisplayed"),h.push("points")),u("fill"),a.fill!=="none"&&(t(n,a,s,u),r.hasLines(a)||c(n,a,u)),a.fill!=="tonext"&&a.fill!=="toself"||h.push("fills"),u("hoveron",h.join("+")||"points")!=="fills"&&u("hovertemplate"),u("zorder"),_.coerceSelectionMarkerOpacity(a,u)}else a.visible=!1}},89307:function(R){"use strict";R.exports=function(C,e,_,T,r){var w=T[r];return C.a=w.a,C.b=w.b,C.y=w.y,C}},52364:function(R){"use strict";R.exports=function(C,e){var _={},T=e._carpet,r=T.ab2ij([C.a,C.b]),w=Math.floor(r[0]),b=r[0]-w,c=Math.floor(r[1]),o=r[1]-c,t=T.evalxy([],w,c,b,o);return _.yLabel=t[1].toFixed(3),_}},58960:function(R,C,e){"use strict";var _=e(98723),T=e(3400).fillText;R.exports=function(r,w,b,c){var o=_(r,w,b,c);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0){var i=1-t.y0/r.ya._length,n=r.xa._length,a=n*i/2,s=n-a;return t.x0=Math.max(Math.min(t.x0,s),a),t.x1=Math.max(Math.min(t.x1,s),a),o}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,p=u._carpet,f=u._module.formatLabels(l,u);t.yLabel=f.yLabel,delete t.text;var m=[];if(!u.hovertemplate){var h=(l.hi||u.hoverinfo).split("+");h.indexOf("all")!==-1&&(h=["a","b","text"]),h.indexOf("a")!==-1&&g(p.aaxis,l.a),h.indexOf("b")!==-1&&g(p.baxis,l.b),m.push("y: "+t.yLabel),h.indexOf("text")!==-1&&T(l,u,m),t.extraText=m.join("<br>")}return o}function g(v,x){var y;y=v.labelprefix&&v.labelprefix.length>0?v.labelprefix.replace(/ = $/,""):v._hovertitle,m.push(y+": "+x.toFixed(3)+v.labelsuffix)}}},4184:function(R,C,e){"use strict";R.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(R,C,e){"use strict";var _=e(96504),T=e(54460),r=e(43616);R.exports=function(w,b,c,o){var t,i,n,a=c[0][0].carpet,s=T.getFromId(w,a.xaxis||"x"),l=T.getFromId(w,a.yaxis||"y"),u={xaxis:s,yaxis:l,plot:b.plot};for(t=0;t<c.length;t++)(i=c[t][0].trace)._xA=s,i._yA=l;for(_(w,u,c,o),t=0;t<c.length;t++)i=c[t][0].trace,n=o.selectAll("g.trace"+i.uid+" .js-line"),r.setClipUrl(n,c[t][0].carpet._clipPathId,w)}},6096:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(98304),w=e(52904),b=e(45464),c=e(49084),o=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,n=w.marker,a=w.line,s=n.line;R.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},w.mode,{dflt:"markers"}),text:t({},w.text,{}),texttemplate:T({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},w.hovertext,{}),textfont:w.textfont,textposition:w.textposition,line:{color:a.color,width:a.width,dash:o},connectgaps:w.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:t({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:s.width},c("marker.line")),gradient:n.gradient},c("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:r(),selected:w.selected,unselected:w.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:_()},"calc","nested")},25212:function(R,C,e){"use strict";var _=e(38248),T=e(39032).BADNUM,r=e(90136),w=e(20148),b=e(4500),c=e(3400).isArrayOrTypedArray,o=e(3400)._;function t(i){return i&&typeof i=="string"}R.exports=function(i,n){var a,s=c(n.locations),l=s?n.locations.length:n._length,u=new Array(l);a=n.geojson?function(v){return t(v)||_(v)}:t;for(var p=0;p<l;p++){var f=u[p]={};if(s){var m=n.locations[p];f.loc=a(m)?m:null}else{var h=n.lon[p],g=n.lat[p];_(h)&&_(g)?f.lonlat=[+h,+g]:f.lonlat=[T,T]}}return w(u,n),r(i,n),b(u,n),l&&(u[0].t={labels:{lat:o(i,"lat:")+" ",lon:o(i,"lon:")+" "}}),u}},86188:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(74428),w=e(66828),b=e(124),c=e(70840),o=e(6096);R.exports=function(t,i,n,a){function s(g,v){return _.coerce(t,i,o,g,v)}var l,u=s("locations");if(u&&u.length){var p,f=s("geojson");(typeof f=="string"&&f!==""||_.isPlainObject(f))&&(p="geojson-id"),s("locationmode",p)==="geojson-id"&&s("featureidkey"),l=u.length}else{var m=s("lon")||[],h=s("lat")||[];l=Math.min(m.length,h.length)}l?(i._length=l,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),T.hasMarkers(i)&&r(t,i,n,a,s,{gradient:!0}),T.hasLines(i)&&(w(t,i,n,a,s),s("connectgaps")),T.hasText(i)&&(s("texttemplate"),b(t,i,a,s)),s("fill"),i.fill!=="none"&&c(t,i,n,s),_.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},58544:function(R){"use strict";R.exports=function(C,e,_,T,r){C.lon=e.lon,C.lat=e.lat,C.location=e.loc?e.loc:null;var w=T[r];return w.fIn&&w.fIn.properties&&(C.properties=w.fIn.properties),C}},56696:function(R,C,e){"use strict";var _=e(54460);R.exports=function(T,r,w){var b={},c=w[r.geo]._subplot.mockAxis,o=T.lonlat;return b.lonLabel=_.tickText(c,c.c2l(o[0]),!0).text,b.latLabel=_.tickText(c,c.c2l(o[1]),!0).text,b}},64292:function(R,C,e){"use strict";var _=e(93024),T=e(39032).BADNUM,r=e(44928),w=e(3400).fillText,b=e(6096);R.exports=function(c,o,t){var i=c.cd,n=i[0].trace,a=c.xa,s=c.ya,l=c.subplot,u=l.projection.isLonLatOverEdges,p=l.project;if(_.getClosest(i,function(y){var A=y.lonlat;if(A[0]===T||u(A))return 1/0;var d=p(A),S=p([o,t]),k=Math.abs(d[0]-S[0]),E=Math.abs(d[1]-S[1]),L=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(k*k+E*E)-L,1-3/L)},c),c.index!==!1){var f=i[c.index],m=f.lonlat,h=[a.c2p(m),s.c2p(m)],g=f.mrc||1;c.x0=h[0]-g,c.x1=h[0]+g,c.y0=h[1]-g,c.y1=h[1]+g,c.loc=f.loc,c.lon=m[0],c.lat=m[1];var v={};v[n.geo]={_subplot:l};var x=n._module.formatLabels(f,n,v);return c.lonLabel=x.lonLabel,c.latLabel=x.latLabel,c.color=r(n,f),c.extraText=function(y,A,d,S){if(!y.hovertemplate){var k=A.hi||y.hoverinfo,E=k==="all"?b.hoverinfo.flags:k.split("+"),L=E.indexOf("location")!==-1&&Array.isArray(y.locations),O=E.indexOf("lon")!==-1,P=E.indexOf("lat")!==-1,F=E.indexOf("text")!==-1,U=[];return L?U.push(A.loc):O&&P?U.push("("+I(d.latLabel)+", "+I(d.lonLabel)+")"):O?U.push(S.lon+I(d.lonLabel)):P&&U.push(S.lat+I(d.latLabel)),F&&w(A,y,U),U.join("<br>")}function I(N){return N+"\xB0"}}(n,f,c,i[0].t.labels),c.hovertemplate=n.hovertemplate,[c]}}},36952:function(R,C,e){"use strict";R.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(59972).getTopojsonFeatures,w=e(44808),b=e(27144),c=e(19280).findExtremes,o=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),n=e(25064);R.exports={calcGeoJSON:function(a,s){var l,u,p=a[0].trace,f=s[p.geo],m=f._subplot,h=p._length;if(T.isArrayOrTypedArray(p.locations)){var g=p.locationmode,v=g==="geojson-id"?b.extractTraceFeature(a):r(p,m.topojson);for(l=0;l<h;l++){u=a[l];var x=g==="geojson-id"?u.fOut:b.locationToFeature(g,u.loc,v);u.lonlat=x?x.properties.ct:[o,o]}}var y,A,d={padded:!0};if(f.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(p));y=[S[0],S[2]],A=[S[1],S[3]]}else{for(y=new Array(h),A=new Array(h),l=0;l<h;l++)u=a[l],y[l]=u.lonlat[0],A[l]=u.lonlat[1];d.ppad=t(p,h)}p._extremes.lon=c(f.lonaxis._ax,y,d),p._extremes.lat=c(f.lataxis._ax,A,d)},plot:function(a,s,l){var u=s.layers.frontplot.select(".scatterlayer"),p=T.makeTraceGroups(u,l,"trace scattergeo");function f(m,h){m.lonlat[0]===o&&_.select(h).remove()}p.selectAll("*").remove(),p.each(function(m){var h=_.select(this),g=m[0].trace;if(i.hasLines(g)||g.fill!=="none"){var v=w.calcTraceToLineCoords(m),x=g.fill!=="none"?w.makePolygon(v):w.makeLine(v);h.selectAll("path.js-line").data([{geojson:x,trace:g}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(g)&&h.selectAll("path.point").data(T.identity).enter().append("path").classed("point",!0).each(function(y){f(y,this)}),i.hasText(g)&&h.selectAll("g").data(T.identity).enter().append("g").append("text").each(function(y){f(y,this)}),n(a,m)})}}},8796:function(R,C,e){"use strict";var _=e(43028),T=e(39032).BADNUM;R.exports=function(r,w){var b,c,o,t,i,n=r.cd,a=r.xaxis,s=r.yaxis,l=[],u=n[0].trace;if(!_.hasMarkers(u)&&!_.hasText(u))return[];if(w===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++)(c=(b=n[i]).lonlat)[0]!==T&&(o=a.c2p(c),t=s.c2p(c),w.contains([o,t],null,i,r)?(l.push({pointNumber:i,lon:c[0],lat:c[1]}),b.selected=1):b.selected=0);return l}},25064:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(76308),w=e(49224),b=w.stylePoints,c=w.styleText;R.exports=function(o,t){t&&function(i,n){var a=n[0].trace,s=n[0].node3;s.style("opacity",n[0].trace.opacity),b(s,a,i),c(s,a,i),s.selectAll("path.js-line").style("fill","none").each(function(l){var u=_.select(this),p=l.trace,f=p.line||{};u.call(r.stroke,f.color).call(T.dashLine,f.dash||"",f.width||0),p.fill!=="none"&&u.call(r.fill,p.fillcolor)})}(o,t)}},2876:function(R,C,e){"use strict";var _=e(45464),T=e(25376),r=e(98304),w=e(52904),b=e(29736).axisHoverFormat,c=e(49084),o=e(95376),t=e(92880).extendFlat,i=e(67824).overrideAll,n=e(67072).DASHES,a=w.line,s=w.marker,l=s.line,u=R.exports=i({x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:w.text,hovertext:w.hovertext,textposition:w.textposition,textfont:T({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:o(n),dflt:"solid"}},marker:t({},c("marker"),{symbol:s.symbol,angle:s.angle,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:s.opacity,colorbar:s.colorbar,line:t({},c("marker.line"),{width:l.width})}),connectgaps:w.connectgaps,fill:t({},w.fill,{dflt:"none"}),fillcolor:r(),selected:{marker:w.selected.marker,textfont:w.selected.textfont},unselected:{marker:w.unselected.marker,textfont:w.unselected.textfont},opacity:_.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=w.hovertemplate,u.texttemplate=w.texttemplate},64628:function(R,C,e){"use strict";var _=e(41272);R.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:_.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(R,C,e){"use strict";var _=e(3108),T=e(3400),r=e(79811),w=e(19280).findExtremes,b=e(1220),c=e(16356),o=c.calcMarkerSize,t=c.calcAxisExpansion,i=c.setFirstScatter,n=e(90136),a=e(84236),s=e(74588),l=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function p(f,m,h){var g=f._extremes[m._id],v=w(m,h._bnds,{padded:!0});g.min=g.min.concat(v.min),g.max=g.max.concat(v.max)}R.exports=function(f,m){var h,g=f._fullLayout,v=m._xA=r.getFromId(f,m.xaxis,"x"),x=m._yA=r.getFromId(f,m.yaxis,"y"),y=g._plots[m.xaxis+m.yaxis],A=m._length,d=A>=u,S=2*A,k={},E=v.makeCalcdata(m,"x"),L=x.makeCalcdata(m,"y"),O=b(m,v,"x",E),P=b(m,x,"y",L),F=O.vals,U=P.vals;m._x=F,m._y=U,m.xperiodalignment&&(m._origX=E,m._xStarts=O.starts,m._xEnds=O.ends),m.yperiodalignment&&(m._origY=L,m._yStarts=P.starts,m._yEnds=P.ends);var I=new Array(S),N=new Array(A);for(h=0;h<A;h++)I[2*h]=F[h]===l?NaN:F[h],I[2*h+1]=U[h]===l?NaN:U[h],N[h]=h;if(v.type==="log")for(h=0;h<S;h+=2)I[h]=v.c2l(I[h]);if(x.type==="log")for(h=1;h<S;h+=2)I[h]=x.c2l(I[h]);d&&v.type!=="log"&&x.type!=="log"?k.tree=_(I):k.ids=N,n(f,m);var W,B=function(q,ne,$,K,ee,J){var Z=a.style(q,$);if(Z.marker&&(Z.marker.positions=K),Z.line&&K.length>1&&T.extendFlat(Z.line,a.linePositions(q,$,K)),Z.errorX||Z.errorY){var te=a.errorBarPositions(q,$,K,ee,J);Z.errorX&&T.extendFlat(Z.errorX,te.x),Z.errorY&&T.extendFlat(Z.errorY,te.y)}return Z.text&&(T.extendFlat(Z.text,{positions:K},a.textPosition(q,$,Z.text,Z.marker)),T.extendFlat(Z.textSel,{positions:K},a.textPosition(q,$,Z.text,Z.markerSel)),T.extendFlat(Z.textUnsel,{positions:K},a.textPosition(q,$,Z.text,Z.markerUnsel))),Z}(f,0,m,I,F,U),V=s(f,y);return i(g,m),d?B.marker&&(W=B.marker.sizeAvg||Math.max(B.marker.size,3)):W=o(m,A),t(f,m,v,x,F,U,W),B.errorX&&p(m,v,B.errorX),B.errorY&&p(m,x,B.errorY),B.fill&&!V.fill2d&&(V.fill2d=!0),B.marker&&!V.scatter2d&&(V.scatter2d=!0),B.line&&!V.line2d&&(V.line2d=!0),!B.errorX&&!B.errorY||V.error2d||(V.error2d=!0),B.text&&!V.glText&&(V.glText=!0),B.marker&&(B.marker.snap=A),V.lineOptions.push(B.line),V.errorXOptions.push(B.errorX),V.errorYOptions.push(B.errorY),V.fillOptions.push(B.fill),V.markerOptions.push(B.marker),V.markerSelectedOptions.push(B.markerSel),V.markerUnselectedOptions.push(B.markerUnsel),V.textOptions.push(B.text),V.textSelectedOptions.push(B.textSel),V.textUnselectedOptions.push(B.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),k._scene=V,k.index=V.count,k.x=F,k.y=U,k.positions=I,V.count++,[{x:!1,y:!1,t:k,trace:m}]}},67072:function(R){"use strict";R.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(R,C,e){"use strict";var _=e(38248),T=e(20472),r=e(72160),w=e(24040),b=e(3400),c=b.isArrayOrTypedArray,o=e(43616),t=e(79811),i=e(33040).formatColor,n=e(43028),a=e(7152),s=e(80088),l=e(67072),u=e(13448).DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=e(10624).appendArrayPointValue;function m(O,P){var F,U=O._fullLayout,I=P._length,N=P.textfont,W=P.textposition,B=c(W)?W:[W],V=N.color,q=N.size,ne=N.family,$=N.weight,K=N.style,ee=N.variant,J={},Z=O._context.plotGlPixelRatio,te=P.texttemplate;if(te){J.text=[];var oe=U._d3locale,se=Array.isArray(te),ce=se?Math.min(te.length,I):I,ye=se?function(de){return te[de]}:function(){return te};for(F=0;F<ce;F++){var me={i:F},fe=P._module.formatLabels(me,P,U),pe={};f(pe,P,F);var ge=P._meta||{};J.text.push(b.texttemplateString(ye(F),fe,oe,pe,me,ge))}}else c(P.text)&&P.text.length<I?J.text=P.text.slice():J.text=P.text;if(c(J.text))for(F=J.text.length;F<I;F++)J.text[F]="";for(J.opacity=P.opacity,J.font={},J.align=[],J.baseline=[],F=0;F<B.length;F++){var ke=B[F].split(/\s+/);switch(ke[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(ke[1])}switch(ke[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(ke[0])}}if(c(V))for(J.color=new Array(I),F=0;F<I;F++)J.color[F]=V[F];else J.color=V;if(c(q)||Array.isArray(ne)||c($)||Array.isArray(K)||Array.isArray(ee))for(J.font=new Array(I),F=0;F<I;F++){var Ce=J.font[F]={};Ce.size=(b.isTypedArray(q)?q[F]:c(q)?_(q[F])?q[F]:0:q)*Z,Ce.family=Array.isArray(ne)?ne[F]:ne,Ce.weight=h(c($)?$[F]:$),Ce.style=Array.isArray(K)?K[F]:K,Ce.variant=Array.isArray(ee)?ee[F]:ee}else J.font={size:q*Z,family:ne,weight:h($),style:K,variant:ee};return J}function h(O){return O<=1e3?O>500?"bold":"normal":O}function g(O,P){var F,U,I=P._length,N=P.marker,W={},B=c(N.symbol),V=c(N.angle),q=c(N.color),ne=c(N.line.color),$=c(N.opacity),K=c(N.size),ee=c(N.line.width);if(B||(U=s.isOpenSymbol(N.symbol)),B||q||ne||$||V){W.symbols=new Array(I),W.angles=new Array(I),W.colors=new Array(I),W.borderColors=new Array(I);var J=N.symbol,Z=N.angle,te=i(N,N.opacity,I),oe=i(N.line,N.opacity,I);if(!c(oe[0])){var se=oe;for(oe=Array(I),F=0;F<I;F++)oe[F]=se}if(!c(te[0])){var ce=te;for(te=Array(I),F=0;F<I;F++)te[F]=ce}if(!c(J)){var ye=J;for(J=Array(I),F=0;F<I;F++)J[F]=ye}if(!c(Z)){var me=Z;for(Z=Array(I),F=0;F<I;F++)Z[F]=me}for(W.symbols=J,W.angles=Z,W.colors=te,W.borderColors=oe,F=0;F<I;F++)B&&(U=s.isOpenSymbol(N.symbol[F])),U&&(oe[F]=te[F].slice(),te[F]=te[F].slice(),te[F][3]=0);for(W.opacity=P.opacity,W.markers=new Array(I),F=0;F<I;F++)W.markers[F]=L({mx:W.symbols[F],ma:W.angles[F]},P)}else U?(W.color=r(N.color,"uint8"),W.color[3]=0,W.borderColor=r(N.color,"uint8")):(W.color=r(N.color,"uint8"),W.borderColor=r(N.line.color,"uint8")),W.opacity=P.opacity*N.opacity,W.marker=L({mx:N.symbol,ma:N.angle},P);var fe,pe=a(P,1);if(K||ee){var ge,ke=W.sizes=new Array(I),Ce=W.borderSizes=new Array(I),de=0;if(K){for(F=0;F<I;F++)ke[F]=pe(N.size[F]),de+=ke[F];ge=de/I}else for(fe=pe(N.size),F=0;F<I;F++)ke[F]=fe;if(ee)for(F=0;F<I;F++)Ce[F]=N.line.width[F];else for(fe=N.line.width,F=0;F<I;F++)Ce[F]=fe;W.sizeAvg=ge}else W.size=pe(N&&N.size||10),W.borderSizes=pe(N.line.width);return W}function v(O,P,F){var U=P.marker,I={};return F&&(F.marker&&F.marker.symbol?I=g(0,b.extendFlat({},U,F.marker)):F.marker&&(F.marker.size&&(I.size=F.marker.size),F.marker.color&&(I.colors=F.marker.color),F.marker.opacity!==void 0&&(I.opacity=F.marker.opacity))),I}function x(O,P,F){var U={};if(!F)return U;if(F.textfont){var I={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:b.extendFlat({},P.textfont)};F.textfont&&b.extendFlat(I.textfont,F.textfont),U=m(O,I)}return U}function y(O,P,F){var U={capSize:2*P.width*F,lineWidth:P.thickness*F,color:P.color};return P.copy_ystyle&&(U=O.error_y),U}var A=l.SYMBOL_SDF_SIZE,d=l.SYMBOL_SIZE,S=l.SYMBOL_STROKE,k={},E=o.symbolFuncs[0](.05*d);function L(O,P){var F,U,I=O.mx;if(I==="circle")return null;var N=o.symbolNumber(I),W=o.symbolFuncs[N%100],B=!!o.symbolNoDot[N%100],V=!!o.symbolNoFill[N%100],q=s.isDotSymbol(I);if(O.ma&&(I+="_"+O.ma),k[I])return k[I];var ne=o.getMarkerAngle(O,P);return F=q&&!B?W(1.1*d,ne)+E:W(d,ne),U=T(F,{w:A,h:A,viewBox:[-d,-d,d,d],stroke:V?S:-S}),k[I]=U,U||null}R.exports={style:function(O,P){var F,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},I=O._context.plotGlPixelRatio;if(P.visible!==!0)return U;if(n.hasText(P)&&(U.text=m(O,P),U.textSel=x(O,P,P.selected),U.textUnsel=x(O,P,P.unselected)),n.hasMarkers(P)&&(U.marker=g(0,P),U.markerSel=v(0,P,P.selected),U.markerUnsel=v(0,P,P.unselected),!P.unselected&&c(P.marker.opacity))){var N=P.marker.opacity;for(U.markerUnsel.opacity=new Array(N.length),F=0;F<N.length;F++)U.markerUnsel.opacity[F]=u*N[F]}if(n.hasLines(P)){U.line={overlay:!0,thickness:P.line.width*I,color:P.line.color,opacity:P.opacity};var W=(l.DASHES[P.line.dash]||[1]).slice();for(F=0;F<W.length;++F)W[F]*=P.line.width*I;U.line.dashes=W}return P.error_x&&P.error_x.visible&&(U.errorX=y(P,P.error_x,I)),P.error_y&&P.error_y.visible&&(U.errorY=y(P,P.error_y,I)),P.fill&&P.fill!=="none"&&(U.fill={closed:!0,fill:P.fillcolor,thickness:0}),U},markerStyle:g,markerSelection:v,linePositions:function(O,P,F){var U,I,N=F.length,W=N/2;if(n.hasLines(P)&&W)if(P.line.shape==="hv"){for(U=[],I=0;I<W-1;I++)isNaN(F[2*I])||isNaN(F[2*I+1])?U.push(NaN,NaN,NaN,NaN):(U.push(F[2*I],F[2*I+1]),isNaN(F[2*I+2])||isNaN(F[2*I+3])?U.push(NaN,NaN):U.push(F[2*I+2],F[2*I+1]));U.push(F[N-2],F[N-1])}else if(P.line.shape==="hvh"){for(U=[],I=0;I<W-1;I++)if(isNaN(F[2*I])||isNaN(F[2*I+1])||isNaN(F[2*I+2])||isNaN(F[2*I+3]))isNaN(F[2*I])||isNaN(F[2*I+1])?U.push(NaN,NaN):U.push(F[2*I],F[2*I+1]),U.push(NaN,NaN);else{var B=(F[2*I]+F[2*I+2])/2;U.push(F[2*I],F[2*I+1],B,F[2*I+1],B,F[2*I+3])}U.push(F[N-2],F[N-1])}else if(P.line.shape==="vhv"){for(U=[],I=0;I<W-1;I++)if(isNaN(F[2*I])||isNaN(F[2*I+1])||isNaN(F[2*I+2])||isNaN(F[2*I+3]))isNaN(F[2*I])||isNaN(F[2*I+1])?U.push(NaN,NaN):U.push(F[2*I],F[2*I+1]),U.push(NaN,NaN);else{var V=(F[2*I+1]+F[2*I+3])/2;U.push(F[2*I],F[2*I+1],F[2*I],V,F[2*I+2],V)}U.push(F[N-2],F[N-1])}else if(P.line.shape==="vh"){for(U=[],I=0;I<W-1;I++)isNaN(F[2*I])||isNaN(F[2*I+1])?U.push(NaN,NaN,NaN,NaN):(U.push(F[2*I],F[2*I+1]),isNaN(F[2*I+2])||isNaN(F[2*I+3])?U.push(NaN,NaN):U.push(F[2*I],F[2*I+3]));U.push(F[N-2],F[N-1])}else U=F;var q=!1;for(I=0;I<U.length;I++)if(isNaN(U[I])){q=!0;break}var ne=q||U.length>l.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(q&&P.connectgaps){var $=U[0],K=U[1];for(I=0;I<U.length;I+=2)isNaN(U[I])||isNaN(U[I+1])?(U[I]=$,U[I+1]=K):($=U[I],K=U[I+1])}return{join:ne,positions:U}},errorBarPositions:function(O,P,F,U,I){var N=w.getComponentMethod("errorbars","makeComputeError"),W=t.getFromId(O,P.xaxis,"x"),B=t.getFromId(O,P.yaxis,"y"),V=F.length/2,q={};function ne($,K){var ee=K._id.charAt(0),J=P["error_"+ee];if(J&&J.visible&&(K.type==="linear"||K.type==="log")){for(var Z=N(J),te={x:0,y:1}[ee],oe={x:[0,1,2,3],y:[2,3,0,1]}[ee],se=new Float64Array(4*V),ce=1/0,ye=-1/0,me=0,fe=0;me<V;me++,fe+=4){var pe=$[me];if(_(pe)){var ge=F[2*me+te],ke=Z(pe,me),Ce=ke[0],de=ke[1];if(_(Ce)&&_(de)){var ae=pe-Ce,re=pe+de;se[fe+oe[0]]=ge-K.c2l(ae),se[fe+oe[1]]=K.c2l(re)-ge,se[fe+oe[2]]=0,se[fe+oe[3]]=0,ce=Math.min(ce,pe-Ce),ye=Math.max(ye,pe+de)}}}q[ee]={positions:F,errors:se,_bnds:[ce,ye]}}}return ne(U,W),ne(I,B),q},textPosition:function(O,P,F,U){var I,N=P._length,W={};if(n.hasMarkers(P)){var B=F.font,V=F.align,q=F.baseline;for(W.offset=new Array(N),I=0;I<N;I++){var ne=U.sizes?U.sizes[I]:U.size,$=c(B)?B[I].size:B.size,K=c(V)?V.length>1?V[I]:V[0]:V,ee=c(q)?q.length>1?q[I]:q[0]:q,J=p[K],Z=p[ee],te=ne?ne/.8+1:0,oe=-Z*te-.5*Z;W.offset[I]=[J*te/$,oe/$]}}return W}}},80220:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(80088),w=e(2876),b=e(88200),c=e(43028),o=e(43980),t=e(31147),i=e(74428),n=e(66828),a=e(70840),s=e(124);R.exports=function(l,u,p,f){function m(S,k){return _.coerce(l,u,w,S,k)}var h=!!l.marker&&r.isOpenSymbol(l.marker.symbol),g=c.isBubble(l),v=o(l,u,f,m);if(v){t(l,u,f,m),m("xhoverformat"),m("yhoverformat");var x=v<b.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",x),c.hasMarkers(u)&&(i(l,u,p,f,m,{noAngleRef:!0,noStandOff:!0}),m("marker.line.width",h||g?1:0)),c.hasLines(u)&&(m("connectgaps"),n(l,u,p,f,m),m("line.shape")),c.hasText(u)&&(m("texttemplate"),s(l,u,f,m,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var y=(u.line||{}).color,A=(u.marker||{}).color;m("fill"),u.fill!=="none"&&a(l,u,p,m);var d=T.getComponentMethod("errorbars","supplyDefaults");d(l,u,y||A||p,{axis:"y"}),d(l,u,y||A||p,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(u,m)}else u.visible=!1}},26768:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(13448).DESELECTDIM;R.exports={styleTextSelection:function(w){var b,c,o=w[0],t=o.trace,i=o.t,n=i._scene,a=i.index,s=n.selectBatch[a],l=n.unselectBatch[a],u=n.textOptions[a],p=n.textSelectedOptions[a]||{},f=n.textUnselectedOptions[a]||{},m=_.extendFlat({},u);if(s.length||l.length){var h=p.color,g=f.color,v=u.color,x=_.isArrayOrTypedArray(v);for(m.color=new Array(t._length),b=0;b<s.length;b++)c=s[b],m.color[c]=h||(x?v[c]:v);for(b=0;b<l.length;b++){c=l[b];var y=x?v[c]:v;m.color[c]=g||(h?y:T.addOpacity(y,r))}}n.glText[a].update(m)}}},99396:function(R,C,e){"use strict";var _=e(76688);R.exports=function(T,r,w){var b=T.i;return"x"in T||(T.x=r._x[b]),"y"in T||(T.y=r._y[b]),_(T,r,w)}},80088:function(R,C,e){"use strict";var _=e(67072);C.isOpenSymbol=function(T){return typeof T=="string"?_.OPEN_RE.test(T):T%200>100},C.isDotSymbol=function(T){return typeof T=="string"?_.DOT_RE.test(T):T>200}},41272:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(44928);function w(b,c,o,t){var i=b.xa,n=b.ya,a=b.distance,s=b.dxy,l=b.index,u={pointNumber:l,x:c[l],y:o[l]};u.tx=T.isArrayOrTypedArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var p=t.textfont;p&&(u.ts=T.isArrayOrTypedArray(p.size)?p.size[l]:p.size,u.tc=T.isArrayOrTypedArray(p.color)?p.color[l]:p.color,u.tf=Array.isArray(p.family)?p.family[l]:p.family,u.tw=Array.isArray(p.weight)?p.weight[l]:p.weight,u.ty=Array.isArray(p.style)?p.style[l]:p.style,u.tv=Array.isArray(p.variant)?p.variant[l]:p.variant);var f=t.marker;f&&(u.ms=T.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.mo=T.isArrayOrTypedArray(f.opacity)?f.opacity[l]:f.opacity,u.mx=T.isArrayOrTypedArray(f.symbol)?f.symbol[l]:f.symbol,u.ma=T.isArrayOrTypedArray(f.angle)?f.angle[l]:f.angle,u.mc=T.isArrayOrTypedArray(f.color)?f.color[l]:f.color);var m=f&&f.line;m&&(u.mlc=Array.isArray(m.color)?m.color[l]:m.color,u.mlw=T.isArrayOrTypedArray(m.width)?m.width[l]:m.width);var h=f&&f.gradient;h&&h.type!=="none"&&(u.mgt=Array.isArray(h.type)?h.type[l]:h.type,u.mgc=Array.isArray(h.color)?h.color[l]:h.color);var g=i.c2p(u.x,!0),v=n.c2p(u.y,!0),x=u.mrc||1,y=t.hoverlabel;y&&(u.hbg=Array.isArray(y.bgcolor)?y.bgcolor[l]:y.bgcolor,u.hbc=Array.isArray(y.bordercolor)?y.bordercolor[l]:y.bordercolor,u.hts=T.isArrayOrTypedArray(y.font.size)?y.font.size[l]:y.font.size,u.htc=Array.isArray(y.font.color)?y.font.color[l]:y.font.color,u.htf=Array.isArray(y.font.family)?y.font.family[l]:y.font.family,u.hnl=T.isArrayOrTypedArray(y.namelength)?y.namelength[l]:y.namelength);var A=t.hoverinfo;A&&(u.hi=Array.isArray(A)?A[l]:A);var d=t.hovertemplate;d&&(u.ht=Array.isArray(d)?d[l]:d);var S={};S[b.index]=u;var k=t._origX,E=t._origY,L=T.extendFlat({},b,{color:r(t,u),x0:g-x,x1:g+x,xLabelVal:k?k[l]:u.x,y0:v-x,y1:v+x,yLabelVal:E?E[l]:u.y,cd:S,distance:a,spikeDistance:s,hovertemplate:u.ht});return u.htx?L.text=u.htx:u.tx?L.text=u.tx:t.text&&(L.text=t.text),T.fillText(u,t,L),_.getComponentMethod("errorbars","hoverInfo")(u,t,L),L}R.exports={hoverPoints:function(b,c,o,t){var i,n,a,s,l,u,p,f,m,h,g=b.cd,v=g[0].t,x=g[0].trace,y=b.xa,A=b.ya,d=v.x,S=v.y,k=y.c2p(c),E=A.c2p(o),L=b.distance;if(v.tree){var O=y.p2c(k-L),P=y.p2c(k+L),F=A.p2c(E-L),U=A.p2c(E+L);i=t==="x"?v.tree.range(Math.min(O,P),Math.min(A._rl[0],A._rl[1]),Math.max(O,P),Math.max(A._rl[0],A._rl[1])):v.tree.range(Math.min(O,P),Math.min(F,U),Math.max(O,P),Math.max(F,U))}else i=v.ids;var I=L;if(t==="x"){var N=!!x.xperiodalignment,W=!!x.yperiodalignment;for(u=0;u<i.length;u++){if(s=d[n=i[u]],p=Math.abs(y.c2p(s)-k),N){var B=y.c2p(x._xStarts[n]),V=y.c2p(x._xEnds[n]);p=k>=Math.min(B,V)&&k<=Math.max(B,V)?0:1/0}if(p<I){if(I=p,l=S[n],f=A.c2p(l)-E,W){var q=A.c2p(x._yStarts[n]),ne=A.c2p(x._yEnds[n]);f=E>=Math.min(q,ne)&&E<=Math.max(q,ne)?0:1/0}h=Math.sqrt(p*p+f*f),a=i[u]}}}else for(u=i.length-1;u>-1;u--)s=d[n=i[u]],l=S[n],p=y.c2p(s)-k,f=A.c2p(l)-E,(m=Math.sqrt(p*p+f*f))<I&&(I=h=m,a=n);return b.index=a,b.distance=I,b.dxy=h,a===void 0?[b]:[w(b,d,S,x)]},calcHover:w}},38983:function(R,C,e){"use strict";var _=e(64628);_.plot=e(89876),R.exports=_},89876:function(R,C,e){"use strict";var _=e(38540),T=e(13472),r=e(24544),w=e(23352),b=e(3400),c=e(72760).selectMode,o=e(5048),t=e(43028),i=e(14328),n=e(26768).styleTextSelection,a={};function s(l,u,p,f){var m=l._size,h=l.width*f,g=l.height*f,v=m.l*f,x=m.b*f,y=m.r*f,A=m.t*f,d=m.w*f,S=m.h*f;return[v+u.domain[0]*d,x+p.domain[0]*S,h-y-(1-u.domain[1])*d,g-A-(1-p.domain[1])*S]}(R.exports=function(l,u,p){if(p.length){var f,m,h=l._fullLayout,g=u._scene,v=u.xaxis,x=u.yaxis;if(g)if(o(l,["ANGLE_instanced_arrays","OES_element_index_uint"],a)){var y=g.count,A=h._glcanvas.data()[0].regl;if(i(l,u,p),g.dirty){if(!g.line2d&&!g.error2d||g.scatter2d||g.fill2d||g.glText||A.clear({}),g.error2d===!0&&(g.error2d=r(A)),g.line2d===!0&&(g.line2d=T(A)),g.scatter2d===!0&&(g.scatter2d=_(A)),g.fill2d===!0&&(g.fill2d=T(A)),g.glText===!0)for(g.glText=new Array(y),f=0;f<y;f++)g.glText[f]=new w(A);if(g.glText){if(y>g.glText.length){var d=y-g.glText.length;for(f=0;f<d;f++)g.glText.push(new w(A))}else if(y<g.glText.length){var S=g.glText.length-y;g.glText.splice(y,S).forEach(function(te){te.destroy()})}for(f=0;f<y;f++)g.glText[f].update(g.textOptions[f])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(te){if(te&&te.positions){for(var oe=te.positions,se=0;se<oe.length&&(isNaN(oe[se])||isNaN(oe[se+1]));)se+=2;for(var ce=oe.length-2;ce>se&&(isNaN(oe[ce])||isNaN(oe[ce+1]));)ce-=2;te.positions=oe.slice(se,ce+2)}return te}),g.line2d.update(g.lineOptions)),g.error2d){var k=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(k)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=b.repeat(null,y),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(te,oe){var se=p[oe];if(te&&se&&se[0]&&se[0].trace){var ce,ye,me=se[0],fe=me.trace,pe=me.t,ge=g.lineOptions[oe],ke=[];fe._ownfill&&ke.push(oe),fe._nexttrace&&ke.push(oe+1),ke.length&&(g.fillOrder[oe]=ke);var Ce,de,ae=[],re=ge&&ge.positions||pe.positions;if(fe.fill==="tozeroy"){for(Ce=0;Ce<re.length&&isNaN(re[Ce+1]);)Ce+=2;for(de=re.length-2;de>Ce&&isNaN(re[de+1]);)de-=2;re[Ce+1]!==0&&(ae=[re[Ce],0]),ae=ae.concat(re.slice(Ce,de+2)),re[de+1]!==0&&(ae=ae.concat([re[de],0]))}else if(fe.fill==="tozerox"){for(Ce=0;Ce<re.length&&isNaN(re[Ce]);)Ce+=2;for(de=re.length-2;de>Ce&&isNaN(re[de]);)de-=2;re[Ce]!==0&&(ae=[0,re[Ce+1]]),ae=ae.concat(re.slice(Ce,de+2)),re[de]!==0&&(ae=ae.concat([0,re[de+1]]))}else if(fe.fill==="toself"||fe.fill==="tonext"){for(ae=[],ce=0,te.splitNull=!0,ye=0;ye<re.length;ye+=2)(isNaN(re[ye])||isNaN(re[ye+1]))&&((ae=ae.concat(re.slice(ce,ye))).push(re[ce],re[ce+1]),ae.push(null,null),ce=ye+2);ae=ae.concat(re.slice(ce)),ce&&ae.push(re[ce],re[ce+1])}else{var he=fe._nexttrace;if(he){var Se=g.lineOptions[oe+1];if(Se){var xe=Se.positions;if(fe.fill==="tonexty"){for(ae=re.slice(),oe=Math.floor(xe.length/2);oe--;){var Te=xe[2*oe],Ae=xe[2*oe+1];isNaN(Te)||isNaN(Ae)||ae.push(Te,Ae)}te.fill=he.fillcolor}}}}if(fe._prevtrace&&fe._prevtrace.fill==="tonext"){var Pe=g.lineOptions[oe-1].positions,De=ae.length/2,ve=[ce=De];for(ye=0;ye<Pe.length;ye+=2)(isNaN(Pe[ye])||isNaN(Pe[ye+1]))&&(ve.push(ye/2+De+1),ce=ye+2);ae=ae.concat(Pe),te.hole=ve}return te.fillmode=fe.fill,te.opacity=fe.opacity,te.positions=ae,te}}),g.fill2d.update(g.fillOptions))}var E=h.dragmode,L=c(E),O=h.clickmode.indexOf("select")>-1;for(f=0;f<y;f++){var P=p[f][0],F=P.trace,U=P.t,I=U.index,N=F._length,W=U.x,B=U.y;if(F.selectedpoints||L||O){if(L||(L=!0),F.selectedpoints){var V=g.selectBatch[I]=b.selIndices2selPoints(F),q={};for(m=0;m<V.length;m++)q[V[m]]=1;var ne=[];for(m=0;m<N;m++)q[m]||ne.push(m);g.unselectBatch[I]=ne}var $=U.xpx=new Array(N),K=U.ypx=new Array(N);for(m=0;m<N;m++)$[m]=v.c2p(W[m]),K[m]=x.c2p(B[m])}else U.xpx=U.ypx=null}if(L){if(g.select2d||(g.select2d=_(h._glcanvas.data()[1].regl)),g.scatter2d){var ee=new Array(y);for(f=0;f<y;f++)ee[f]=g.selectBatch[f].length||g.unselectBatch[f].length?g.markerUnselectedOptions[f]:{};g.scatter2d.update(ee)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&p.forEach(function(te){var oe=((te||[])[0]||{}).trace||{};t.hasText(oe)&&n(te)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var J={viewport:s(h,v,x,l._context.plotGlPixelRatio),range:[(v._rl||v.range)[0],(x._rl||x.range)[0],(v._rl||v.range)[1],(x._rl||x.range)[1]]},Z=b.repeat(J,g.count);g.fill2d&&g.fill2d.update(Z),g.line2d&&g.line2d.update(Z),g.error2d&&g.error2d.update(Z.concat(Z)),g.scatter2d&&g.scatter2d.update(Z),g.select2d&&g.select2d.update(Z),g.glText&&g.glText.forEach(function(te){te.update(J)})}else g.init()}}).reglPrecompiled=a},74588:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){var w=r._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},c={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||((w=r._scene={}).init=function(){_.extendFlat(w,c,b)},w.init(),w.update=function(o){var t=_.repeat(o,w.count);if(w.fill2d&&w.fill2d.update(t),w.scatter2d&&w.scatter2d.update(t),w.line2d&&w.line2d.update(t),w.error2d&&w.error2d.update(t.concat(t)),w.select2d&&w.select2d.update(t),w.glText)for(var i=0;i<w.count;i++)w.glText[i].update(o)},w.draw=function(){for(var o=w.count,t=w.fill2d,i=w.error2d,n=w.line2d,a=w.scatter2d,s=w.glText,l=w.select2d,u=w.selectBatch,p=w.unselectBatch,f=0;f<o;f++){if(t&&w.fillOrder[f]&&t.draw(w.fillOrder[f]),n&&w.lineOptions[f]&&n.draw(f),i&&(w.errorXOptions[f]&&i.draw(f),w.errorYOptions[f]&&i.draw(f+o)),a&&w.markerOptions[f])if(p[f].length){var m=_.repeat([],w.count);m[f]=p[f],a.draw(m)}else u[f].length||a.draw(f);s[f]&&w.textOptions[f]&&s[f].render()}l&&l.draw(u),w.dirty=!1},w.destroy=function(){w.fill2d&&w.fill2d.destroy&&w.fill2d.destroy(),w.scatter2d&&w.scatter2d.destroy&&w.scatter2d.destroy(),w.error2d&&w.error2d.destroy&&w.error2d.destroy(),w.line2d&&w.line2d.destroy&&w.line2d.destroy(),w.select2d&&w.select2d.destroy&&w.select2d.destroy(),w.glText&&w.glText.forEach(function(o){o.destroy&&o.destroy()}),w.lineOptions=null,w.fillOptions=null,w.markerOptions=null,w.markerSelectedOptions=null,w.markerUnselectedOptions=null,w.errorXOptions=null,w.errorYOptions=null,w.textOptions=null,w.textSelectedOptions=null,w.textUnselectedOptions=null,w.selectBatch=null,w.unselectBatch=null,r._scene=null}),w.dirty||_.extendFlat(w,b),w}},73224:function(R,C,e){"use strict";var _=e(43028),T=e(26768).styleTextSelection;R.exports=function(r,w){var b=r.cd,c=r.xaxis,o=r.yaxis,t=[],i=b[0].trace,n=b[0].t,a=i._length,s=n.x,l=n.y,u=n._scene,p=n.index;if(!u)return t;var f=_.hasText(i),m=_.hasMarkers(i),h=!m&&!f;if(i.visible!==!0||h)return t;var g=[],v=[];if(w!==!1&&!w.degenerate)for(var x=0;x<a;x++)w.contains([n.xpx[x],n.ypx[x]],!1,x,r)?(g.push(x),t.push({pointNumber:x,x:c.c2d(s[x]),y:o.c2d(l[x])})):v.push(x);if(m){var y=u.scatter2d;if(g.length||v.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var A=new Array(u.count);A[p]=u.markerUnselectedOptions[p],y.update.apply(y,A)}}else{var d=new Array(u.count);d[p]=u.markerOptions[p],y.update.apply(y,d)}}return u.selectBatch[p]=g,u.unselectBatch[p]=v,f&&T(b),t}},31512:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(98304),w=e(6096),b=e(52904),c=e(5232),o=e(45464),t=e(49084),i=e(92880).extendFlat,n=e(67824).overrideAll,a=e(5232),s=w.line,l=w.marker;R.exports=n({lon:w.lon,lat:w.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},a.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:T({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:w.fill,fillcolor:r(),textfont:c.layers.symbol.textfont,textposition:c.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:_()},"calc","nested")},79732:function(R){"use strict";var C=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];R.exports={isSupportedFont:function(e){return C.indexOf(e)!==-1}}},59392:function(R,C,e){"use strict";var _=e(38248),T=e(3400),r=e(39032).BADNUM,w=e(44808),b=e(8932),c=e(43616),o=e(7152),t=e(43028),i=e(79732).isSupportedFont,n=e(89032),a=e(10624).appendArrayPointValue,s=e(72736).NEWLINES,l=e(72736).BR_TAG_ALL;function u(v){return{type:v,geojson:w.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function p(v,x){return T.isArrayOrTypedArray(v)?x?function(y){return _(v[y])?+v[y]:0}:function(y){return v[y]}:v?function(){return v}:f}function f(){return""}function m(v){return v[0]===r}function h(v,x){var y;if(T.isArrayOrTypedArray(v)&&T.isArrayOrTypedArray(x)){y=["step",["get","point_count"],v[0]];for(var A=1;A<v.length;A++)y.push(x[A-1],v[A])}else y=v;return y}function g(v){var x=v.textfont,y=x.family,A=x.style,d=x.weight,S=y.split(" "),k=S[S.length-1]==="Italic";k&&S.pop(),k=k||A==="italic";var E=S.join(" ");return d==="bold"&&S.indexOf("Bold")===-1?E+=" Bold":d<=1e3&&(S[0]==="Metropolis"?(E="Metropolis",E+=d>850?" Black":d>750?" Extra Bold":d>650?" Bold":d>550?" Semi Bold":d>450?" Medium":d>350?" Regular":d>250?" Light":d>150?" Extra Light":" Thin"):S.slice(0,2).join(" ")==="Open Sans"?(E="Open Sans",E+=d>750?" Extrabold":d>650?" Bold":d>550?" Semibold":d>350?" Regular":" Light"):S.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(E="Klokantech Noto Sans",S[3]==="CJK"&&(E+=" CJK"),E+=d>500?" Bold":" Regular")),k&&(E+=" Italic"),E==="Open Sans Regular Italic"?E="Open Sans Italic":E==="Open Sans Regular Bold"?E="Open Sans Bold":E==="Open Sans Regular Bold Italic"?E="Open Sans Bold Italic":E==="Klokantech Noto Sans Regular Italic"&&(E="Klokantech Noto Sans Italic"),i(E)||(E=y),E.split(", ")}R.exports=function(v,x){var y,A=x[0].trace,d=A.visible===!0&&A._length!==0,S=A.fill!=="none",k=t.hasLines(A),E=t.hasMarkers(A),L=t.hasText(A),O=E&&A.marker.symbol==="circle",P=E&&A.marker.symbol!=="circle",F=A.cluster&&A.cluster.enabled,U=u("fill"),I=u("line"),N=u("circle"),W=u("symbol"),B={fill:U,line:I,circle:N,symbol:W};if(!d)return B;if((S||k)&&(y=w.calcTraceToLineCoords(x)),S&&(U.geojson=w.makePolygon(y),U.layout.visibility="visible",T.extendFlat(U.paint,{"fill-color":A.fillcolor})),k&&(I.geojson=w.makeLine(y),I.layout.visibility="visible",T.extendFlat(I.paint,{"line-width":A.line.width,"line-color":A.line.color,"line-opacity":A.opacity})),O){var V=function($){var K,ee,J,Z,te=$[0].trace,oe=te.marker,se=te.selectedpoints,ce=T.isArrayOrTypedArray(oe.color),ye=T.isArrayOrTypedArray(oe.size),me=T.isArrayOrTypedArray(oe.opacity);function fe(he){return te.opacity*he}ce&&(ee=b.hasColorscale(te,"marker")?b.makeColorScaleFuncFromTrace(oe):T.identity),ye&&(J=o(te)),me&&(Z=function(he){return fe(_(he)?+T.constrain(he,0,1):0)});var pe,ge,ke=[];for(K=0;K<$.length;K++){var Ce=$[K],de=Ce.lonlat;if(!m(de)){var ae={};ee&&(ae.mcc=Ce.mcc=ee(Ce.mc)),J&&(ae.mrc=Ce.mrc=J(Ce.ms)),Z&&(ae.mo=Z(Ce.mo)),se&&(ae.selected=Ce.selected||0),ke.push({type:"Feature",id:K+1,geometry:{type:"Point",coordinates:de},properties:ae})}}if(se)for(pe=c.makeSelectedPointStyleFns(te),K=0;K<ke.length;K++){var re=ke[K].properties;pe.selectedOpacityFn&&(re.mo=fe(pe.selectedOpacityFn(re))),pe.selectedColorFn&&(re.mcc=pe.selectedColorFn(re)),pe.selectedSizeFn&&(re.mrc=pe.selectedSizeFn(re))}return{geojson:{type:"FeatureCollection",features:ke},mcc:ce||pe&&pe.selectedColorFn?{type:"identity",property:"mcc"}:oe.color,mrc:ye||pe&&pe.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=oe.size,ge/2),mo:me||pe&&pe.selectedOpacityFn?{type:"identity",property:"mo"}:fe(oe.opacity)}}(x);N.geojson=V.geojson,N.layout.visibility="visible",F&&(N.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":h(A.cluster.color,A.cluster.step),"circle-radius":h(A.cluster.size,A.cluster.step),"circle-opacity":h(A.cluster.opacity,A.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":g(A),"text-size":12}}),T.extendFlat(N.paint,{"circle-color":V.mcc,"circle-radius":V.mrc,"circle-opacity":V.mo})}if(O&&F&&(N.filter=["!",["has","point_count"]]),(P||L)&&(W.geojson=function($,K){for(var ee=K._fullLayout,J=$[0].trace,Z=J.marker||{},te=Z.symbol,oe=Z.angle,se=te!=="circle"?p(te):f,ce=oe!=="auto"?p(oe,!0):f,ye=t.hasText(J)?p(J.text):f,me=[],fe=0;fe<$.length;fe++){var pe=$[fe];if(!m(pe.lonlat)){var ge,ke=J.texttemplate;if(ke){var Ce=Array.isArray(ke)?ke[fe]||"":ke,de=J._module.formatLabels(pe,J,ee),ae={};a(ae,J,pe.i);var re=J._meta||{};ge=T.texttemplateString(Ce,de,ee._d3locale,ae,pe,re)}else ge=ye(fe);ge&&(ge=ge.replace(s,"").replace(l,`
`)),me.push({type:"Feature",geometry:{type:"Point",coordinates:pe.lonlat},properties:{symbol:se(fe),angle:ce(fe),text:ge}})}}return{type:"FeatureCollection",features:me}}(x,v),T.extendFlat(W.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(T.extendFlat(W.layout,{"icon-size":A.marker.size/10}),"angle"in A.marker&&A.marker.angle!=="auto"&&T.extendFlat(W.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),W.layout["icon-allow-overlap"]=A.marker.allowoverlap,T.extendFlat(W.paint,{"icon-opacity":A.opacity*A.marker.opacity,"icon-color":A.marker.color})),L)){var q=(A.marker||{}).size,ne=n(A.textposition,q);T.extendFlat(W.layout,{"text-size":A.textfont.size,"text-anchor":ne.anchor,"text-offset":ne.offset,"text-font":g(A)}),T.extendFlat(W.paint,{"text-color":A.textfont.color,"text-opacity":A.opacity})}return B}},15752:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(74428),w=e(66828),b=e(124),c=e(70840),o=e(31512),t=e(79732).isSupportedFont;R.exports=function(i,n,a,s){function l(A,d){return _.coerce(i,n,o,A,d)}function u(A,d){return _.coerce2(i,n,o,A,d)}var p=function(A,d,S){var k=S("lon")||[],E=S("lat")||[],L=Math.min(k.length,E.length);return d._length=L,L}(0,n,l);if(p){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),T.hasMarkers(n)){r(i,n,a,s,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var f=n.marker;f.symbol!=="circle"&&(_.isArrayOrTypedArray(f.size)&&(f.size=f.size[0]),_.isArrayOrTypedArray(f.color)&&(f.color=f.color[0]))}T.hasLines(n)&&(w(i,n,a,s,l,{noDash:!0}),l("connectgaps"));var m=u("cluster.maxzoom"),h=u("cluster.step"),g=u("cluster.color",n.marker&&n.marker.color||a),v=u("cluster.size"),x=u("cluster.opacity");if(l("cluster.enabled",m!==!1||h!==!1||g!==!1||v!==!1||x!==!1)||T.hasText(n)){var y=s.font.family;b(i,n,s,l,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:t(y)?y:"Open Sans Regular",weight:s.font.weight,style:s.font.style,size:s.font.size,color:s.font.color}})}l("fill"),n.fill!=="none"&&c(i,n,a,l),_.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},37920:function(R){"use strict";R.exports=function(C,e){return C.lon=e.lon,C.lat=e.lat,C}},11960:function(R,C,e){"use strict";var _=e(54460);R.exports=function(T,r,w){var b={},c=w[r.subplot]._subplot.mockAxis,o=T.lonlat;return b.lonLabel=_.tickText(c,c.c2l(o[0]),!0).text,b.latLabel=_.tickText(c,c.c2l(o[1]),!0).text,b}},63312:function(R,C,e){"use strict";var _=e(93024),T=e(3400),r=e(44928),w=T.fillText,b=e(39032).BADNUM,c=e(47552).traceLayerPrefix;function o(t,i,n){if(!t.hovertemplate){var a=(i.hi||t.hoverinfo).split("+"),s=a.indexOf("all")!==-1,l=a.indexOf("lon")!==-1,u=a.indexOf("lat")!==-1,p=i.lonlat,f=[];return s||l&&u?f.push("("+m(p[1])+", "+m(p[0])+")"):l?f.push(n.lon+m(p[0])):u&&f.push(n.lat+m(p[1])),(s||a.indexOf("text")!==-1)&&w(i,t,f),f.join("<br>")}function m(h){return h+"\xB0"}}R.exports={hoverPoints:function(t,i,n){var a=t.cd,s=a[0].trace,l=t.xa,u=t.ya,p=t.subplot,f=[],m=c+s.uid+"-circle",h=s.cluster&&s.cluster.enabled;if(h){var g=p.map.queryRenderedFeatures(null,{layers:[m]});f=g.map(function(P){return P.id})}var v=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),x=i-v;if(_.getClosest(a,function(P){var F=P.lonlat;if(F[0]===b||h&&f.indexOf(P.i+1)===-1)return 1/0;var U=T.modHalf(F[0],360),I=F[1],N=p.project([U,I]),W=N.x-l.c2p([x,I]),B=N.y-u.c2p([U,n]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(W*W+B*B)-V,1-3/V)},t),t.index!==!1){var y=a[t.index],A=y.lonlat,d=[T.modHalf(A[0],360)+v,A[1]],S=l.c2p(d),k=u.c2p(d),E=y.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=k-E,t.y1=k+E;var L={};L[s.subplot]={_subplot:p};var O=s._module.formatLabels(y,s,L);return t.lonLabel=O.lonLabel,t.latLabel=O.latLabel,t.color=r(s,y),t.extraText=o(s,y,a[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:o}},11572:function(R,C,e){"use strict";R.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(_,T){T&&T[0].trace._glTrace.update(T)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(R,C,e){"use strict";var _=e(3400),T=e(59392),r=e(47552).traceLayerPrefix,w={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(o,t,i,n){this.type="scattermapbox",this.subplot=o,this.uid=t,this.clusterEnabled=i,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:r+t+"-fill",line:r+t+"-line",circle:r+t+"-circle",symbol:r+t+"-symbol",cluster:r+t+"-cluster",clusterCount:r+t+"-cluster-count"},this.below=null}var c=b.prototype;c.addSource=function(o,t,i){var n={type:"geojson",data:t.geojson};i&&i.enabled&&_.extendFlat(n,{cluster:!0,clusterMaxZoom:i.maxzoom});var a=this.subplot.map.getSource(this.sourceIds[o]);a?a.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[o],n)},c.setSourceData=function(o,t){this.subplot.map.getSource(this.sourceIds[o]).setData(t.geojson)},c.addLayer=function(o,t,i){var n={type:t.type,id:this.layerIds[o],source:this.sourceIds[o],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var a,s=this.layerIds[o],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===s){a=!0;break}a?(this.subplot.setOptions(s,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(s,"setPaintProperty",n.paint)):this.subplot.addLayer(n,i)},c.update=function(o){var t=o[0].trace,i=this.subplot,n=i.map,a=T(i.gd,o),s=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,p=this;function f(x){u?function(y){for(var A=w.cluster,d=A.length-1;d>=0;d--){var S=A[d];n.removeLayer(p.layerIds[S])}y||n.removeSource(p.sourceIds.circle)}(x):function(y){for(var A=w.nonCluster,d=A.length-1;d>=0;d--){var S=A[d];n.removeLayer(p.layerIds[S]),y||n.removeSource(p.sourceIds[S])}}(x)}function m(x){l?function(y){y||p.addSource("circle",a.circle,t.cluster);for(var A=w.cluster,d=0;d<A.length;d++){var S=A[d],k=a[S];p.addLayer(S,k,s)}}(x):function(y){for(var A=w.nonCluster,d=0;d<A.length;d++){var S=A[d],k=a[S];y||p.addSource(S,k),p.addLayer(S,k,s)}}(x)}function h(){for(var x=l?w.cluster:w.nonCluster,y=0;y<x.length;y++){var A=x[y],d=a[A];d&&(i.setOptions(p.layerIds[A],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(A!=="cluster"&&p.setSourceData(A,d),i.setOptions(p.layerIds[A],"setPaintProperty",d.paint)))}}var g=this.isHidden,v=t.visible!==!0;v?g||f():g?v||m():u!==l?(f(),m()):(this.below!==s&&(f(!0),m(!0)),h()),this.clusterEnabled=l,this.isHidden=v,this.below=s,o[0].trace._glTrace=this},c.dispose=function(){for(var o=this.subplot.map,t=this.clusterEnabled?w.cluster:w.nonCluster,i=t.length-1;i>=0;i--){var n=t[i];o.removeLayer(this.layerIds[n]),o.removeSource(this.sourceIds[n])}},R.exports=function(o,t){var i,n,a,s=t[0].trace,l=s.cluster&&s.cluster.enabled,u=s.visible!==!0,p=new b(o,s.uid,l,u),f=T(o.gd,t),m=p.below=o.belowLookup["trace-"+s.uid];if(l)for(p.addSource("circle",f.circle,s.cluster),i=0;i<w.cluster.length;i++)a=f[n=w.cluster[i]],p.addLayer(n,a,m);else for(i=0;i<w.nonCluster.length;i++)a=f[n=w.nonCluster[i]],p.addSource(n,a,s.cluster),p.addLayer(n,a,m);return t[0].trace._glTrace=p,p}},404:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(39032).BADNUM;R.exports=function(w,b){var c,o=w.cd,t=w.xaxis,i=w.yaxis,n=[],a=o[0].trace;if(!T.hasMarkers(a))return[];if(b===!1)for(c=0;c<o.length;c++)o[c].selected=0;else for(c=0;c<o.length;c++){var s=o[c],l=s.lonlat;if(l[0]!==r){var u=[_.modHalf(l[0],360),l[1]],p=[t.c2p(u),i.c2p(u)];b.contains(p,null,c,w)?(n.push({pointNumber:c,lon:l[0],lat:l[1]}),s.selected=1):s.selected=0}}return n}},8319:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(92880).extendFlat,w=e(98304),b=e(52904),c=e(45464),o=b.line;R.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:T({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:r({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:r({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:r({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w(),hoverinfo:r({},c.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:_(),selected:b.selected,unselected:b.unselected}},58320:function(R,C,e){"use strict";var _=e(38248),T=e(39032).BADNUM,r=e(54460),w=e(90136),b=e(20148),c=e(4500),o=e(16356).calcMarkerSize;R.exports=function(t,i){for(var n=t._fullLayout,a=i.subplot,s=n[a].radialaxis,l=n[a].angularaxis,u=s.makeCalcdata(i,"r"),p=l.makeCalcdata(i,"theta"),f=i._length,m=new Array(f),h=0;h<f;h++){var g=u[h],v=p[h],x=m[h]={};_(g)&&_(v)?(x.r=g,x.theta=v):x.r=T}var y=o(i,f);return i._extremes.x=r.findExtremes(s,u,{ppad:y}),w(t,i),b(m,i),c(m,i),m}},85968:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(74428),w=e(66828),b=e(11731),c=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function n(a,s,l,u){var p,f=u("r"),m=u("theta");if(_.isTypedArray(f)&&(s.r=f=Array.from(f)),_.isTypedArray(m)&&(s.theta=m=Array.from(m)),f)m?p=Math.min(f.length,m.length):(p=f.length,u("theta0"),u("dtheta"));else{if(!m)return 0;p=s.theta.length,u("r0"),u("dr")}return s._length=p,p}R.exports={handleRThetaDefaults:n,supplyDefaults:function(a,s,l,u){function p(h,g){return _.coerce(a,s,i,h,g)}var f=n(0,s,0,p);if(f){p("thetaunit"),p("mode",f<t?"lines+markers":"lines"),p("text"),p("hovertext"),s.hoveron!=="fills"&&p("hovertemplate"),T.hasMarkers(s)&&r(a,s,l,u,p,{gradient:!0}),T.hasLines(s)&&(w(a,s,l,u,p,{backoff:!0}),b(a,s,p),p("connectgaps")),T.hasText(s)&&(p("texttemplate"),c(a,s,u,p));var m=[];(T.hasMarkers(s)||T.hasText(s))&&(p("cliponaxis"),p("marker.maxdisplayed"),m.push("points")),p("fill"),s.fill!=="none"&&(o(a,s,l,p),T.hasLines(s)||b(a,s,p)),s.fill!=="tonext"&&s.fill!=="toself"||m.push("fills"),p("hoveron",m.join("+")||"points"),_.coerceSelectionMarkerOpacity(s,p)}else s.visible=!1}}},22852:function(R,C,e){"use strict";var _=e(3400),T=e(54460);R.exports=function(r,w,b){var c,o,t={},i=b[w.subplot]._subplot;i?(c=i.radialAxis,o=i.angularAxis):(c=(i=b[w.subplot]).radialaxis,o=i.angularaxis);var n=c.c2l(r.r);t.rLabel=T.tickText(c,n,!0).text;var a=o.thetaunit==="degrees"?_.rad2deg(r.theta):r.theta;return t.thetaLabel=T.tickText(o,a,!0).text,t}},8504:function(R,C,e){"use strict";var _=e(98723);function T(r,w,b,c){var o=b.radialAxis,t=b.angularAxis;o._hovertitle="r",t._hovertitle="\u03B8";var i={};i[w.subplot]={_subplot:b};var n=w._module.formatLabels(r,w,i);c.rLabel=n.rLabel,c.thetaLabel=n.thetaLabel;var a=r.hi||w.hoverinfo,s=[];function l(p,f){s.push(p._hovertitle+": "+f)}if(!w.hovertemplate){var u=a.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(o,c.rLabel),u.indexOf("theta")!==-1&&l(t,c.thetaLabel),u.indexOf("text")!==-1&&c.text&&(s.push(c.text),delete c.text),c.extraText=s.join("<br>")}}R.exports={hoverPoints:function(r,w,b,c){var o=_(r,w,b,c);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=r.subplot,n=t.cd[t.index],a=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,T(n,a,i,t),t.hovertemplate=a.hovertemplate,o}},makeHoverPointText:T}},76924:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(R,C,e){"use strict";var _=e(96504),T=e(39032).BADNUM;R.exports=function(r,w,b){for(var c=w.layers.frontplot.select("g.scatterlayer"),o=w.xaxis,t=w.yaxis,i={xaxis:o,yaxis:t,plot:w.framework,layerClipId:w._hasClipOnAxisFalse?w.clipIds.forTraces:null},n=w.radialAxis,a=w.angularAxis,s=0;s<b.length;s++)for(var l=b[s],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=o,l[0].trace._yA=t);var p=l[u],f=p.r;if(f===T)p.x=p.y=T;else{var m=n.c2g(f),h=a.c2g(p.theta);p.x=m*Math.cos(h),p.y=m*Math.sin(h)}}_(r,i,b,c)}},24396:function(R,C,e){"use strict";var _=e(8319),T=e(2876),r=e(21776).Gw;R.exports={mode:_.mode,r:_.r,theta:_.theta,r0:_.r0,dr:_.dr,theta0:_.theta0,dtheta:_.dtheta,thetaunit:_.thetaunit,text:_.text,texttemplate:r({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,hovertemplate:_.hovertemplate,line:{color:T.line.color,width:T.line.width,dash:T.line.dash,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,fill:T.fill,fillcolor:T.fillcolor,textposition:T.textposition,textfont:T.textfont,hoverinfo:_.hoverinfo,selected:_.selected,unselected:_.unselected}},27160:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(R,C,e){"use strict";var _=e(90136),T=e(16356).calcMarkerSize,r=e(84236),w=e(54460),b=e(67072).TOO_MANY_POINTS;R.exports=function(c,o){var t=c._fullLayout,i=o.subplot,n=t[i].radialaxis,a=t[i].angularaxis,s=o._r=n.makeCalcdata(o,"r"),l=o._theta=a.makeCalcdata(o,"theta"),u=o._length,p={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),p.r=s,p.theta=l,_(c,o);var f,m=p.opts=r.style(c,o);return u<b?f=T(o,u):m.marker&&(f=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),o._extremes.x=w.findExtremes(n,s,{ppad:f}),[{x:!1,y:!1,t:p,trace:o}]}},98608:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(85968).handleRThetaDefaults,w=e(74428),b=e(66828),c=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);R.exports=function(n,a,s,l){function u(f,m){return _.coerce(n,a,i,f,m)}var p=r(n,a,l,u);p?(u("thetaunit"),u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),a.hoveron!=="fills"&&u("hovertemplate"),T.hasMarkers(a)&&w(n,a,s,l,u,{noAngleRef:!0,noStandOff:!0}),T.hasLines(a)&&(b(n,a,s,l,u),u("connectgaps")),T.hasText(a)&&(u("texttemplate"),c(n,a,l,u,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),u("fill"),a.fill!=="none"&&o(n,a,s,u),_.coerceSelectionMarkerOpacity(a,u)):a.visible=!1}},94120:function(R,C,e){"use strict";var _=e(22852);R.exports=function(T,r,w){var b=T.i;return"r"in T||(T.r=r._r[b]),"theta"in T||(T.theta=r._theta[b]),_(T,r,w)}},1600:function(R,C,e){"use strict";var _=e(41272),T=e(8504).makeHoverPointText;R.exports={hoverPoints:function(r,w,b,c){var o=r.cd[0].t,t=o.r,i=o.theta,n=_.hoverPoints(r,w,b,c);if(n&&n[0].index!==!1){var a=n[0];if(a.index===void 0)return n;var s=r.subplot,l=a.cd[a.index],u=a.trace;if(l.r=t[a.index],l.theta=i[a.index],s.isPtInside(l))return a.xLabelVal=void 0,a.yLabelVal=void 0,T(l,u,s,a),n}}}},62944:function(R,C,e){"use strict";var _=e(27160);_.plot=e(56512),R.exports=_},56512:function(R,C,e){"use strict";var _=e(3108),T=e(38248),r=e(89876),w=e(74588),b=e(84236),c=e(3400),o=e(67072).TOO_MANY_POINTS;R.exports=function(t,i,n){if(n.length){var a=i.radialAxis,s=i.angularAxis,l=w(t,i);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,f=u[0],m=f.trace,h=f.t,g=m._length,v=h.r,x=h.theta,y=h.opts,A=v.slice(),d=x.slice();for(p=0;p<v.length;p++)i.isPtInside({r:v[p],theta:x[p]})||(A[p]=NaN,d[p]=NaN);var S=new Array(2*g),k=Array(g),E=Array(g);for(p=0;p<g;p++){var L,O,P=A[p];if(T(P)){var F=a.c2g(P),U=s.c2g(d[p],m.thetaunit);L=F*Math.cos(U),O=F*Math.sin(U)}else L=O=NaN;k[p]=S[2*p]=L,E[p]=S[2*p+1]=O}h.tree=_(S),y.marker&&g>=o&&(y.marker.cluster=h.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=S),y.line&&S.length>1&&c.extendFlat(y.line,b.linePositions(t,m,S)),y.text&&(c.extendFlat(y.text,{positions:S},b.textPosition(t,m,y.text,y.marker)),c.extendFlat(y.textSel,{positions:S},b.textPosition(t,m,y.text,y.markerSel)),c.extendFlat(y.textUnsel,{positions:S},b.textPosition(t,m,y.text,y.markerUnsel))),y.fill&&!l.fill2d&&(l.fill2d=!0),y.marker&&!l.scatter2d&&(l.scatter2d=!0),y.line&&!l.line2d&&(l.line2d=!0),y.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(y.line),l.fillOptions.push(y.fill),l.markerOptions.push(y.marker),l.markerSelectedOptions.push(y.markerSel),l.markerUnselectedOptions.push(y.markerUnsel),l.textOptions.push(y.text),l.textSelectedOptions.push(y.textSel),l.textUnselectedOptions.push(y.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),h.x=k,h.y=E,h.rawx=k,h.rawy=E,h.r=v,h.theta=x,h.positions=S,h._scene=l,h.index=l.count,l.count++}}),r(t,i,n)}},R.exports.reglPrecompiled={}},69496:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(92880).extendFlat,w=e(98304),b=e(52904),c=e(45464),o=b.line;R.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:T({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,backoff:o.backoff,shape:r({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:r({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:r({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w(),hoverinfo:r({},c.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:_(),selected:b.selected,unselected:b.unselected}},47507:function(R,C,e){"use strict";var _=e(38248),T=e(39032).BADNUM,r=e(90136),w=e(20148),b=e(4500),c=e(16356).calcMarkerSize;R.exports=function(o,t){for(var i=o._fullLayout,n=t.subplot,a=i[n].realaxis,s=i[n].imaginaryaxis,l=a.makeCalcdata(t,"real"),u=s.makeCalcdata(t,"imag"),p=t._length,f=new Array(p),m=0;m<p;m++){var h=l[m],g=u[m],v=f[m]={};_(h)&&_(g)?(v.real=h,v.imag=g):v.real=T}return c(t,p),r(o,t),w(f,t),b(f,t),f}},76716:function(R,C,e){"use strict";var _=e(3400),T=e(43028),r=e(74428),w=e(66828),b=e(11731),c=e(124),o=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);R.exports=function(n,a,s,l){function u(m,h){return _.coerce(n,a,i,m,h)}var p=function(m,h,g,v){var x,y=v("real"),A=v("imag");return y&&A&&(x=Math.min(y.length,A.length)),_.isTypedArray(y)&&(h.real=y=Array.from(y)),_.isTypedArray(A)&&(h.imag=A=Array.from(A)),h._length=x,x}(0,a,0,u);if(p){u("mode",p<t?"lines+markers":"lines"),u("text"),u("hovertext"),a.hoveron!=="fills"&&u("hovertemplate"),T.hasMarkers(a)&&r(n,a,s,l,u,{gradient:!0}),T.hasLines(a)&&(w(n,a,s,l,u,{backoff:!0}),b(n,a,u),u("connectgaps")),T.hasText(a)&&(u("texttemplate"),c(n,a,l,u));var f=[];(T.hasMarkers(a)||T.hasText(a))&&(u("cliponaxis"),u("marker.maxdisplayed"),f.push("points")),u("fill"),a.fill!=="none"&&(o(n,a,s,u),T.hasLines(a)||b(n,a,u)),a.fill!=="tonext"&&a.fill!=="toself"||f.push("fills"),u("hoveron",f.join("+")||"points"),_.coerceSelectionMarkerOpacity(a,u)}else a.visible=!1}},49504:function(R,C,e){"use strict";var _=e(54460);R.exports=function(T,r,w){var b={},c=w[r.subplot]._subplot;return b.realLabel=_.tickText(c.radialAxis,T.real,!0).text,b.imagLabel=_.tickText(c.angularAxis,T.imag,!0).text,b}},25292:function(R,C,e){"use strict";var _=e(98723);function T(r,w,b,c){var o=b.radialAxis,t=b.angularAxis;o._hovertitle="real",t._hovertitle="imag";var i={};i[w.subplot]={_subplot:b};var n=w._module.formatLabels(r,w,i);c.realLabel=n.realLabel,c.imagLabel=n.imagLabel;var a=r.hi||w.hoverinfo,s=[];function l(p,f){s.push(p._hovertitle+": "+f)}if(!w.hovertemplate){var u=a.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(o,c.realLabel),u.indexOf("imag")!==-1&&l(t,c.imagLabel),u.indexOf("text")!==-1&&c.text&&(s.push(c.text),delete c.text),c.extraText=s.join("<br>")}}R.exports={hoverPoints:function(r,w,b,c){var o=_(r,w,b,c);if(o&&o[0].index!==!1){var t=o[0];if(t.index===void 0)return o;var i=r.subplot,n=t.cd[t.index],a=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,T(n,a,i,t),t.hovertemplate=a.hovertemplate,o}},makeHoverPointText:T}},95443:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(R,C,e){"use strict";var _=e(96504),T=e(39032).BADNUM,r=e(36416).smith;R.exports=function(w,b,c){for(var o=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,n={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},a=0;a<c.length;a++)for(var s=c[a],l=0;l<s.length;l++){l===0&&(s[0].trace._xA=t,s[0].trace._yA=i);var u=s[l],p=u.real;if(p===T)u.x=u.y=T;else{var f=r([p,u.imag]);u.x=f[0],u.y=f[1]}}_(w,n,c,o)}},5896:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(98304),w=e(52904),b=e(45464),c=e(49084),o=e(98192).u,t=e(92880).extendFlat,i=w.marker,n=w.line,a=i.line;R.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},w.mode,{dflt:"markers"}),text:t({},w.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},w.hovertext,{}),line:{color:n.color,width:n.width,dash:o,backoff:n.backoff,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:w.connectgaps,cliponaxis:w.cliponaxis,fill:t({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:r(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:a.width,editType:"calc"},c("marker.line")),gradient:i.gradient,editType:"calc"},c("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:w.hoveron,hovertemplate:_()}},34335:function(R,C,e){"use strict";var _=e(38248),T=e(90136),r=e(20148),w=e(4500),b=e(16356).calcMarkerSize,c=["a","b","c"],o={a:["b","c"],b:["a","c"],c:["a","b"]};R.exports=function(t,i){var n,a,s,l,u,p,f=t._fullLayout[i.subplot].sum,m=i.sum||f,h={a:i.a,b:i.b,c:i.c};for(n=0;n<c.length;n++)if(!h[s=c[n]]){for(u=h[o[s][0]],p=h[o[s][1]],l=new Array(u.length),a=0;a<u.length;a++)l[a]=m-u[a]-p[a];h[s]=l}var g,v,x,y,A,d,S=i._length,k=new Array(S);for(n=0;n<S;n++)g=h.a[n],v=h.b[n],x=h.c[n],_(g)&&_(v)&&_(x)?((y=f/((g=+g)+(v=+v)+(x=+x)))!=1&&(g*=y,v*=y,x*=y),d=g,A=x-v,k[n]={x:A,y:d,a:g,b:v,c:x}):k[n]={x:!1,y:!1};return b(i,S),T(t,i),r(k,i),w(k,i),k}},84256:function(R,C,e){"use strict";var _=e(3400),T=e(88200),r=e(43028),w=e(74428),b=e(66828),c=e(11731),o=e(124),t=e(70840),i=e(5896);R.exports=function(n,a,s,l){function u(v,x){return _.coerce(n,a,i,v,x)}var p,f=u("a"),m=u("b"),h=u("c");if(f?(p=f.length,m?(p=Math.min(p,m.length),h&&(p=Math.min(p,h.length))):p=h?Math.min(p,h.length):0):m&&h&&(p=Math.min(m.length,h.length)),p){a._length=p,u("sum"),u("text"),u("hovertext"),a.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<T.PTS_LINESONLY?"lines+markers":"lines"),r.hasMarkers(a)&&w(n,a,s,l,u,{gradient:!0}),r.hasLines(a)&&(b(n,a,s,l,u,{backoff:!0}),c(n,a,u),u("connectgaps")),r.hasText(a)&&(u("texttemplate"),o(n,a,l,u));var g=[];(r.hasMarkers(a)||r.hasText(a))&&(u("cliponaxis"),u("marker.maxdisplayed"),g.push("points")),u("fill"),a.fill!=="none"&&(t(n,a,s,u),r.hasLines(a)||c(n,a,u)),a.fill!=="tonext"&&a.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points"),_.coerceSelectionMarkerOpacity(a,u)}else a.visible=!1}},97476:function(R){"use strict";R.exports=function(C,e,_,T,r){if(e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),T[r]){var w=T[r];C.a=w.a,C.b=w.b,C.c=w.c}else C.a=e.a,C.b=e.b,C.c=e.c;return C}},90404:function(R,C,e){"use strict";var _=e(54460);R.exports=function(T,r,w){var b={},c=w[r.subplot]._subplot;return b.aLabel=_.tickText(c.aaxis,T.a,!0).text,b.bLabel=_.tickText(c.baxis,T.b,!0).text,b.cLabel=_.tickText(c.caxis,T.c,!0).text,b}},26596:function(R,C,e){"use strict";var _=e(98723);R.exports=function(T,r,w,b){var c=_(T,r,w,b);if(c&&c[0].index!==!1){var o=c[0];if(o.index===void 0){var t=1-o.y0/T.ya._length,i=T.xa._length,n=i*t/2,a=i-n;return o.x0=Math.max(Math.min(o.x0,a),n),o.x1=Math.max(Math.min(o.x1,a),n),c}var s=o.cd[o.index],l=o.trace,u=o.subplot;o.a=s.a,o.b=s.b,o.c=s.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var p={};p[l.subplot]={_subplot:u};var f=l._module.formatLabels(s,l,p);o.aLabel=f.aLabel,o.bLabel=f.bLabel,o.cLabel=f.cLabel;var m=s.hi||l.hoverinfo,h=[];if(!l.hovertemplate){var g=m.split("+");g.indexOf("all")!==-1&&(g=["a","b","c"]),g.indexOf("a")!==-1&&v(u.aaxis,o.aLabel),g.indexOf("b")!==-1&&v(u.baxis,o.bLabel),g.indexOf("c")!==-1&&v(u.caxis,o.cLabel)}return o.extraText=h.join("<br>"),o.hovertemplate=l.hovertemplate,c}function v(x,y){h.push(x._hovertitle+": "+y)}}},34864:function(R,C,e){"use strict";R.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(R,C,e){"use strict";var _=e(96504);R.exports=function(T,r,w){var b=r.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var c=r.xaxis,o=r.yaxis,t={xaxis:c,yaxis:o,plot:b,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},i=r.layers.frontplot.select("g.scatterlayer"),n=0;n<w.length;n++){var a=w[n];a.length&&(a[0].trace._xA=c,a[0].trace._yA=o)}_(T,t,w,i)}},44524:function(R,C,e){"use strict";var _=e(52904),T=e(49084),r=e(29736).axisHoverFormat,w=e(21776).Ks,b=e(2876),c=e(33816).idRegex,o=e(31780).templatedArray,t=e(92880).extendFlat,i=_.marker,n=i.line,a=t(T("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),s=t(T("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:a,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:c[u],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",R.exports={dimensions:o("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:w(),xhoverformat:r("x"),yhoverformat:r("y"),marker:s,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(R,C,e){"use strict";var _=e(24040),T=e(12704);R.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},_.register(T)},99332:function(R,C,e){"use strict";var _=e(13472),T=e(24040),r=e(5048),w=e(84888)._M,b=e(57952),c=e(79811).getFromId,o=e(54460).shouldShowZeroLine,t="splom",i={};function n(s,l,u){for(var p=u.matrixOptions.data.length,f=l._visibleDims,m=u.viewOpts.ranges=new Array(p),h=0;h<f.length;h++){var g=f[h],v=m[h]=new Array(4),x=c(s,l._diag[g][0]);x&&(v[0]=x.r2l(x.range[0]),v[2]=x.r2l(x.range[1]));var y=c(s,l._diag[g][1]);y&&(v[1]=y.r2l(y.range[0]),v[3]=y.r2l(y.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:m},{ranges:m}):u.matrix.update({ranges:m})}function a(s){var l=s._fullLayout,u=l._glcanvas.data()[0].regl,p=l._splomGrid;p||(p=l._splomGrid=_(u)),p.update(function(f){var m,h=f._context.plotGlPixelRatio,g=f._fullLayout,v=g._size,x=[0,0,g.width*h,g.height*h],y={};function A(q,ne,$,K,ee,J){$*=h,K*=h,ee*=h,J*=h;var Z=ne[q+"color"],te=ne[q+"width"],oe=String(Z+te);oe in y?y[oe].data.push(NaN,NaN,$,K,ee,J):y[oe]={data:[$,K,ee,J],join:"rect",thickness:te*h,color:Z,viewport:x,range:x,overlay:!1}}for(m in g._splomSubplots){var d,S,k=g._plots[m],E=k.xaxis,L=k.yaxis,O=E._gridVals,P=L._gridVals,F=E._offset,U=E._length,I=L._length,N=v.b+L.domain[0]*v.h,W=-L._m,B=-W*L.r2l(L.range[0],L.calendar);if(E.showgrid)for(m=0;m<O.length;m++)d=F+E.l2p(O[m].x),A("grid",E,d,N,d,N+I);if(L.showgrid)for(m=0;m<P.length;m++)A("grid",L,F,S=N+B+W*P[m].x,F+U,S);o(f,E,L)&&(d=F+E.l2p(0),A("zeroline",E,d,N,d,N+I)),o(f,L,E)&&A("zeroline",L,F,S=N+B+0,F+U,S)}var V=[];for(m in y)V.push(y[m]);return V}(s))}R.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(s){var l=s._fullLayout,u=T.getModule(t),p=w(s.calcdata,u)[0];r(s,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&a(s),u.plot(s,{},p))},drag:function(s){var l=s.calcdata,u=s._fullLayout;u._hasOnlyLargeSploms&&a(s);for(var p=0;p<l.length;p++){var f=l[p][0].trace,m=u._splomScenes[f.uid];f.type==="splom"&&m&&m.matrix&&n(s,f,m)}},updateGrid:a,clean:function(s,l,u,p){var f,m={};if(p._splomScenes){for(f=0;f<s.length;f++){var h=s[f];h.type==="splom"&&(m[h.uid]=1)}for(f=0;f<u.length;f++){var g=u[f];if(!m[g.uid]){var v=p._splomScenes[g.uid];v&&v.destroy&&v.destroy(),p._splomScenes[g.uid]=null,delete p._splomScenes[g.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!l._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),b.clean(s,l,u,p)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(R,C,e){"use strict";var _=e(3400),T=e(79811),r=e(16356).calcMarkerSize,w=e(16356).calcAxisExpansion,b=e(90136),c=e(84236).markerSelection,o=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,n=e(67072).TOO_MANY_POINTS;R.exports=function(a,s){var l,u,p,f,m,h,g=s.dimensions,v=s._length,x={},y=x.cdata=[],A=x.data=[],d=s._visibleDims=[];function S(E,L){for(var O=E.makeCalcdata({v:L.values,vcalendar:s.calendar},"v"),P=0;P<O.length;P++)O[P]=O[P]===i?NaN:O[P];y.push(O),A.push(E.type==="log"?_.simpleMap(O,E.c2l):O)}for(l=0;l<g.length;l++)if((p=g[l]).visible){if(f=T.getFromId(a,s._diag[l][0]),m=T.getFromId(a,s._diag[l][1]),f&&m&&f.type!==m.type){_.log("Skipping splom dimension "+l+" with conflicting axis types");continue}f?(S(f,p),m&&m.type==="category"&&(m._categories=f._categories.slice())):S(m,p),d.push(l)}for(b(a,s),_.extendFlat(x,o(a,s)),h=y.length*v>n?x.sizeAvg||Math.max(x.size,3):r(s,v),u=0;u<d.length;u++)p=g[l=d[u]],f=T.getFromId(a,s._diag[l][0])||{},m=T.getFromId(a,s._diag[l][1])||{},w(a,s,f,m,y[u],y[u],h);var k=t(a,s);return k.matrix||(k.matrix=!0),k.matrixOptions=x,k.selectedOptions=c(a,s,s.selected),k.unselectedOptions=c(a,s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},69544:function(R,C,e){"use strict";var _=e(3400),T=e(51272),r=e(44524),w=e(43028),b=e(74428),c=e(26284),o=e(80088).isOpenSymbol;function t(i,n){function a(l,u){return _.coerce(i,n,r.dimensions,l,u)}a("label");var s=a("values");s&&s.length?a("visible"):n.visible=!1,a("axis.type"),a("axis.matches")}R.exports=function(i,n,a,s){function l(v,x){return _.coerce(i,n,r,v,x)}var u=T(i,n,{name:"dimensions",handleItemDefaults:t}),p=l("diagonal.visible"),f=l("showupperhalf"),m=l("showlowerhalf");if(c(n,u,"values")&&(p||f||m)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(i,n,a,s,l,{noAngleRef:!0,noStandOff:!0});var h=o(n.marker.symbol),g=w.isBubble(n);l("marker.line.width",h||g?1:0),function(v,x,y,A){var d,S,k=x.dimensions,E=k.length,L=x.showupperhalf,O=x.showlowerhalf,P=x.diagonal.visible,F=new Array(E),U=new Array(E);for(d=0;d<E;d++){var I=d?d+1:"";F[d]="x"+I,U[d]="y"+I}var N=A("xaxes",F),W=A("yaxes",U),B=x._diag=new Array(E);x._xaxes={},x._yaxes={};var V=[],q=[];function ne(ce,ye,me,fe){if(ce){var pe=ce.charAt(0),ge=y._splomAxes[pe];if(x["_"+pe+"axes"][ce]=1,fe.push(ce),!(ce in ge)){var ke=ge[ce]={};me&&(ke.label=me.label||"",me.visible&&me.axis&&(me.axis.type&&(ke.type=me.axis.type),me.axis.matches&&(ke.matches=ye)))}}}var $=!P&&!O,K=!P&&!L;for(x._axesDim={},d=0;d<E;d++){var ee=k[d],J=d===0,Z=d===E-1,te=J&&$||Z&&K?void 0:N[d],oe=J&&K||Z&&$?void 0:W[d];ne(te,oe,ee,V),ne(oe,te,ee,q),B[d]=[te,oe],x._axesDim[te]=d,x._axesDim[oe]=d}for(d=0;d<V.length;d++)for(S=0;S<q.length;S++){var se=V[d]+q[S];d>S&&L||d<S&&O?y._splomSubplots[se]=1:d!==S||!P&&O&&L||(y._splomSubplots[se]=1)}(!O||!P&&L&&O)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,n,s,l),_.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},83156:function(R,C,e){"use strict";var _=e(3400),T=e(90136),r=e(84236).markerStyle;R.exports=function(w,b){var c=b.trace,o=w._fullLayout._splomScenes[c.uid];if(o){T(w,c),_.extendFlat(o.matrixOptions,r(w,c));var t=_.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(t,null)}}},50328:function(R,C){"use strict";C.getDimIndex=function(e,_){for(var T=_._id,r={x:0,y:1}[T.charAt(0)],w=e._visibleDims,b=0;b<w.length;b++){var c=w[b];if(e._diag[c][r]===T)return b}return!1}},72248:function(R,C,e){"use strict";var _=e(50328),T=e(41272).calcHover,r=e(54460).getFromId,w=e(92880).extendFlat;function b(c,o,t,i){var n=c.cd[0].trace,a=c.scene.matrixOptions.cdata,s=c.xa,l=c.ya,u=s.c2p(o),p=l.c2p(t),f=c.distance,m=_.getDimIndex(n,s),h=_.getDimIndex(n,l);if(m===!1||h===!1)return[c];for(var g,v,x=a[m],y=a[h],A=f,d=0;d<x.length;d++)if(!i||d===c.index){var S=x[d],k=y[d],E=s.c2p(S)-u,L=l.c2p(k)-p,O=Math.sqrt(E*E+L*L);(i||O<A)&&(A=v=O,g=d)}return c.index=g,c.distance=A,c.dxy=v,g===void 0?[c]:[T(c,x,y,n)]}R.exports={hoverPoints:function(c,o,t,i,n){n||(n={});var a=(i||"").charAt(0)==="x",s=(i||"").charAt(0)==="y",l=b(c,o,t);if((a||s)&&n.hoversubplots==="axis"&&l[0])for(var u=(a?c.xa:c.ya)._subplotsWith,p=n.gd,f=w({},c),m=0;m<u.length;m++){var h=u[m];if(h!==c.xa._id+c.ya._id){s?f.xa=r(p,h,"x"):f.ya=r(p,h,"y");var g=b(f,o,t,a||s);l=l.concat(g)}}return l}}},97924:function(R,C,e){"use strict";var _=e(28888);_.basePlotModule=e(99332),R.exports=_},54840:function(R,C,e){"use strict";var _=e(55795),T=e(3400),r=e(79811),w=e(72760).selectMode;function b(c,o){var t,i,n,a,s,l=c._fullLayout,u=l._size,p=o.trace,f=o.t,m=l._splomScenes[p.uid],h=m.matrixOptions,g=h.cdata,v=l._glcanvas.data()[0].regl,x=l.dragmode;if(g.length!==0){h.lower=p.showupperhalf,h.upper=p.showlowerhalf,h.diagonal=p.diagonal.visible;var y=p._visibleDims,A=g.length,d=m.viewOpts={};for(d.ranges=new Array(A),d.domains=new Array(A),s=0;s<y.length;s++){n=y[s];var S=d.ranges[s]=new Array(4),k=d.domains[s]=new Array(4);(t=r.getFromId(c,p._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],k[0]=t.domain[0],k[2]=t.domain[1]),(i=r.getFromId(c,p._diag[n][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],k[1]=i.domain[0],k[3]=i.domain[1])}var E=c._context.plotGlPixelRatio,L=u.l*E,O=u.b*E,P=u.w*E,F=u.h*E;d.viewport=[L,O,P+L,F+O],m.matrix===!0&&(m.matrix=_(v));var U=l.clickmode.indexOf("select")>-1,I=!0;if(w(x)||p.selectedpoints||U){var N=p._length;if(p.selectedpoints){m.selectBatch=p.selectedpoints;var W=p.selectedpoints,B={};for(n=0;n<W.length;n++)B[W[n]]=!0;var V=[];for(n=0;n<N;n++)B[n]||V.push(n);m.unselectBatch=V}var q=f.xpx=new Array(A),ne=f.ypx=new Array(A);for(s=0;s<y.length;s++){if(n=y[s],t=r.getFromId(c,p._diag[n][0]))for(q[s]=new Array(N),a=0;a<N;a++)q[s][a]=t.c2p(g[s][a]);if(i=r.getFromId(c,p._diag[n][1]))for(ne[s]=new Array(N),a=0;a<N;a++)ne[s][a]=i.c2p(g[s][a])}if(m.selectBatch.length||m.unselectBatch.length){var $=T.extendFlat({},h,m.unselectedOptions,d),K=T.extendFlat({},h,m.selectedOptions,d);m.matrix.update($,K),I=!1}}else f.xpx=f.ypx=null;if(I){var ee=T.extendFlat({},h,d);m.matrix.update(ee,null)}}}R.exports=function(c,o,t){if(t.length)for(var i=0;i<t.length;i++)b(c,t[i][0])}},72308:function(R,C,e){"use strict";var _=e(3400);R.exports=function(T,r){var w=T._fullLayout,b=r.uid,c=w._splomScenes;c||(c=w._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},t=c[r.uid];return t||((t=c[b]=_.extendFlat({},o,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||_.extendFlat(t,o),t}},62500:function(R,C,e){"use strict";var _=e(3400),T=_.pushUnique,r=e(43028),w=e(50328);R.exports=function(b,c){var o=b.cd,t=o[0].trace,i=o[0].t,n=b.scene,a=n.matrixOptions.cdata,s=b.xaxis,l=b.yaxis,u=[];if(!n)return u;var p=!r.hasMarkers(t)&&!r.hasText(t);if(t.visible!==!0||p)return u;var f=w.getDimIndex(t,s),m=w.getDimIndex(t,l);if(f===!1||m===!1)return u;var h=i.xpx[f],g=i.ypx[m],v=a[f],x=a[m],y=(b.scene.selectBatch||[]).slice(),A=[];if(c!==!1&&!c.degenerate)for(var d=0;d<v.length;d++)c.contains([h[d],g[d]],null,d,b)?(u.push({pointNumber:d,x:v[d],y:x[d]}),T(y,d)):y.indexOf(d)!==-1?T(y,d):A.push(d);var S=n.matrixOptions;return y.length||A.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,_.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=y,n.unselectBatch=A,u}},90167:function(R,C,e){"use strict";var _=e(49084),T=e(29736).axisHoverFormat,r=e(21776).Ks,w=e(52948),b=e(45464),c=e(92880).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:T("u",1),vhoverformat:T("v",1),whoverformat:T("w",1),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),showlegend:c({},b.showlegend,{dflt:!1})};c(o,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){o[t]=w[t]}),o.hoverinfo=c({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,R.exports=o},3832:function(R,C,e){"use strict";var _=e(3400),T=e(47128);function r(c){var o,t,i,n,a,s,l,u,p,f,m,h,g=c._x,v=c._y,x=c._z,y=c._len,A=-1/0,d=1/0,S=-1/0,k=1/0,E=-1/0,L=1/0,O="";for(y&&(l=g[0],p=v[0],m=x[0]),y>1&&(u=g[y-1],f=v[y-1],h=x[y-1]),o=0;o<y;o++)A=Math.max(A,g[o]),d=Math.min(d,g[o]),S=Math.max(S,v[o]),k=Math.min(k,v[o]),E=Math.max(E,x[o]),L=Math.min(L,x[o]),n||g[o]===l||(n=!0,O+="x"),a||v[o]===p||(a=!0,O+="y"),s||x[o]===m||(s=!0,O+="z");n||(O+="x"),a||(O+="y"),s||(O+="z");var P=w(c._x),F=w(c._y),U=w(c._z);O=(O=(O=O.replace("x",(l>u?"-":"+")+"x")).replace("y",(p>f?"-":"+")+"y")).replace("z",(m>h?"-":"+")+"z");var I=function(){y=0,P=[],F=[],U=[]};(!y||y<P.length*F.length*U.length)&&I();var N=function(pe){return pe==="x"?g:pe==="y"?v:x},W=function(pe){return pe==="x"?P:pe==="y"?F:U},B=function(pe){return pe[y-1]<pe[0]?-1:1},V=N(O[1]),q=N(O[3]),ne=N(O[5]),$=W(O[1]).length,K=W(O[3]).length,ee=W(O[5]).length,J=!1,Z=function(pe,ge,ke){return $*(K*pe+ge)+ke},te=B(N(O[1])),oe=B(N(O[3])),se=B(N(O[5]));for(o=0;o<ee-1;o++){for(t=0;t<K-1;t++){for(i=0;i<$-1;i++){var ce=Z(o,t,i),ye=Z(o,t,i+1),me=Z(o,t+1,i),fe=Z(o+1,t,i);if(V[ce]*te<V[ye]*te&&q[ce]*oe<q[me]*oe&&ne[ce]*se<ne[fe]*se||(J=!0),J)break}if(J)break}if(J)break}return J&&(_.warn("Encountered arbitrary coordinates! Unable to input data grid."),I()),{xMin:d,yMin:k,zMin:L,xMax:A,yMax:S,zMax:E,Xs:P,Ys:F,Zs:U,len:y,fill:O}}function w(c){return _.distinctVals(c).vals}function b(c,o){if(o===void 0&&(o=c.length),_.isTypedArray(c))return c.subarray(0,o);for(var t=[],i=0;i<o;i++)t[i]=+c[i];return t}R.exports={calc:function(c,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=b(o.u,o._len),o._v=b(o.v,o._len),o._w=b(o.w,o._len),o._x=b(o.x,o._len),o._y=b(o.y,o._len),o._z=b(o.z,o._len);var t=r(o);o._gridFill=t.fill,o._Xs=t.Xs,o._Ys=t.Ys,o._Zs=t.Zs,o._len=t.len;var i,n,a,s=0;o.starts&&(i=b(o.starts.x||[]),n=b(o.starts.y||[]),a=b(o.starts.z||[]),s=Math.min(i.length,n.length,a.length)),o._startsX=i||[],o._startsY=n||[],o._startsZ=a||[];var l,u=0,p=1/0;for(l=0;l<o._len;l++){var f=o._u[l],m=o._v[l],h=o._w[l],g=Math.sqrt(f*f+m*m+h*h);u=Math.max(u,g),p=Math.min(p,g)}for(T(c,o,{vals:[p,u],containerStr:"",cLetter:"c"}),l=0;l<s;l++){var v=i[l];t.xMax=Math.max(t.xMax,v),t.xMin=Math.min(t.xMin,v);var x=n[l];t.yMax=Math.max(t.yMax,x),t.yMin=Math.min(t.yMin,x);var y=a[l];t.zMax=Math.max(t.zMax,y),t.zMin=Math.min(t.zMin,y)}o._slen=s,o._normMax=u,o._xbnds=[t.xMin,t.xMax],o._ybnds=[t.yMin,t.yMax],o._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:r}},25668:function(R,C,e){"use strict";var _=e(67792).gl_streamtube3d,T=_.createTubeMesh,r=e(3400),w=e(33040).parseColorScale,b=e(8932).extractOpts,c=e(52094),o={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function n(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function a(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function s(l,u){var p=l.fullSceneLayout,f=l.dataScale,m=u._len,h={};function g($,K){var ee=p[K],J=f[o[K]];return r.simpleMap($,function(Z){return ee.d2l(Z)*J})}if(h.vectors=c(g(u._u,"xaxis"),g(u._v,"yaxis"),g(u._w,"zaxis"),m),!m)return{positions:[],cells:[]};var v=g(u._Xs,"xaxis"),x=g(u._Ys,"yaxis"),y=g(u._Zs,"zaxis");if(h.meshgrid=[v,x,y],h.gridFill=u._gridFill,u._slen)h.startingPositions=c(g(u._startsX,"xaxis"),g(u._startsY,"yaxis"),g(u._startsZ,"zaxis"));else{for(var A=x[0],d=n(v),S=n(y),k=new Array(d.length*S.length),E=0,L=0;L<d.length;L++)for(var O=0;O<S.length;O++)k[E++]=[d[L],A,S[O]];h.startingPositions=k}h.colormap=w(u),h.tubeSize=u.sizeref,h.maxLength=u.maxdisplayed;var P=g(u._xbnds,"xaxis"),F=g(u._ybnds,"yaxis"),U=g(u._zbnds,"zaxis"),I=a(v),N=a(x),W=a(y),B=[[P[0]-I[0],F[0]-N[0],U[0]-W[0]],[P[1]+I[1],F[1]+N[1],U[1]+W[1]]],V=_(h,B),q=b(u);V.vertexIntensityBounds=[q.min/u._normMax,q.max/u._normMax];var ne=u.lightposition;return V.lightPosition=[ne.x,ne.y,ne.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}i.handlePick=function(l){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function f(g,v){var x=u[v],y=p[o[v]];return x.l2c(g)/y}if(l.object===this.mesh){var m=l.data.position,h=l.data.velocity;return l.traceCoordinate=[f(m[0],"xaxis"),f(m[1],"yaxis"),f(m[2],"zaxis"),f(h[0],"xaxis"),f(h[1],"yaxis"),f(h[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var u=s(this.scene,l);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},R.exports=function(l,u){var p=l.glplot.gl,f=s(l,u),m=T(p,f),h=new t(l,u.uid);return h.mesh=m,h.data=u,m._trace=h,l.glplot.add(m),h}},54304:function(R,C,e){"use strict";var _=e(3400),T=e(27260),r=e(90167);R.exports=function(w,b,c,o){function t(p,f){return _.coerce(w,b,r,p,f)}var i=t("u"),n=t("v"),a=t("w"),s=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&a&&a.length&&s&&s.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),T(w,b,o,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(_,T){return _.tubex=_.x,_.tubey=_.y,_.tubez=_.z,_.tubeu=T.traceCoordinate[3],_.tubev=T.traceCoordinate[4],_.tubew=T.traceCoordinate[5],_.norm=T.traceCoordinate[6],_.divergence=T.traceCoordinate[7],delete _.x,delete _.y,delete _.z,_},meta:{}}},424:function(R,C,e){"use strict";var _=e(45464),T=e(21776).Ks,r=e(21776).Gw,w=e(49084),b=e(86968).u,c=e(74996),o=e(27328),t=e(92880).extendFlat,i=e(98192).c;R.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},c.marker.line.color,{dflt:null}),width:t({},c.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},w("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:c.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:r({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:c.hovertext,hoverinfo:t({},_.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:T({},{keys:o.eventDataKeys}),textfont:c.textfont,insidetextorientation:c.insidetextorientation,insidetextfont:c.insidetextfont,outsidetextfont:t({},c.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:c.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(R,C,e){"use strict";var _=e(7316);C.name="sunburst",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},3776:function(R,C,e){"use strict";var _=e(74148),T=e(38248),r=e(3400),w=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,c=e(45768).generateExtendedColors,o=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},n={},a={};function s(l,u,p){var f=0,m=l.children;if(m){for(var h=m.length,g=0;g<h;g++)f+=s(m[g],u,p);p.branches&&f++}else p.leaves&&f++;return l.value=l.data.data.value=f,u._values||(u._values=[]),u._values[l.data.data.i]=f,f}C.calc=function(l,u){var p,f,m,h,g,v,x=l._fullLayout,y=u.ids,A=r.isArrayOrTypedArray(y),d=u.labels,S=u.parents,k=u.values,E=r.isArrayOrTypedArray(k),L=[],O={},P={},F=function(se){return se||typeof se=="number"},U=function(se){return!E||T(k[se])&&k[se]>=0};A?(p=Math.min(y.length,S.length),f=function(se){return F(y[se])&&U(se)},m=function(se){return String(y[se])}):(p=Math.min(d.length,S.length),f=function(se){return F(d[se])&&U(se)},m=function(se){return String(d[se])}),E&&(p=Math.min(p,k.length));for(var I=0;I<p;I++)if(f(I)){var N=m(I),W=F(S[I])?String(S[I]):"",B={i:I,id:N,pid:W,label:F(d[I])?String(d[I]):""};E&&(B.v=+k[I]),L.push(B),g=N,O[h=W]?O[h].push(g):O[h]=[g],P[g]=1}if(O[""]){if(O[""].length>1){for(var V=r.randstr(),q=0;q<L.length;q++)L[q].pid===""&&(L[q].pid=V);L.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var ne,$=[];for(ne in O)P[ne]||$.push(ne);if($.length!==1)return r.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",$.join(", ")].join(" "));ne=$[0],L.unshift({hasImpliedRoot:!0,id:ne,pid:"",label:ne})}try{v=_.stratify().id(function(se){return se.id}).parentId(function(se){return se.pid})(L)}catch(se){return r.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",se.message].join(" "))}var K=_.hierarchy(v),ee=!1;if(E)switch(u.branchvalues){case"remainder":K.sum(function(se){return se.data.v});break;case"total":K.each(function(se){var ce=se.data.data,ye=ce.v;if(se.children){var me=se.children.reduce(function(fe,pe){return fe+pe.data.data.v},0);if((ce.hasImpliedRoot||ce.hasMultipleRoots)&&(ye=me),ye<me*t)return ee=!0,r.warn(["Total value for node",se.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,ye,`
children sum =`,me].join(" "))}se.value=ye})}else s(K,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!ee){var J,Z;u.sort&&K.sort(function(se,ce){return ce.value-se.value});var te=u.marker.colors||[],oe=!!te.length;return u._hasColorscale?(oe||(te=E?u.values:u._values),o(l,u,{vals:te,containerStr:"marker",cLetter:"c"}),Z=w(u.marker)):J=b(x["_"+u.type+"colormap"]),K.each(function(se){var ce=se.data.data;ce.color=u._hasColorscale?Z(te[ce.i]):J(te[ce.i],ce.id)}),L[0].hierarchy=K,L}},C._runCrossTraceCalc=function(l,u){var p=u._fullLayout,f=u.calcdata,m=p[l+"colorway"],h=p["_"+l+"colormap"];p["extend"+l+"colors"]&&(m=c(m,l==="icicle"?a:l==="treemap"?n:i));var g,v=0;function x(d){var S=d.data.data,k=S.id;S.color===!1&&(h[k]?S.color=h[k]:d.parent?d.parent.parent?S.color=d.parent.data.data.color:(h[k]=S.color=m[v%m.length],v++):S.color=g)}for(var y=0;y<f.length;y++){var A=f[y][0];A.trace.type===l&&A.hierarchy&&(g=A.trace.root.color,A.hierarchy.each(x))}},C.crossTraceCalc=function(l){return C._runCrossTraceCalc("sunburst",l)}},27328:function(R){"use strict";R.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(R,C,e){"use strict";var _=e(3400),T=e(424),r=e(86968).Q,w=e(31508).handleText,b=e(74174).handleMarkerDefaults,c=e(8932),o=c.hasColorscale,t=c.handleDefaults;R.exports=function(i,n,a,s){function l(g,v){return _.coerce(i,n,T,g,v)}var u=l("labels"),p=l("parents");if(u&&u.length&&p&&p.length){var f=l("values");f&&f.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(i,n,s,l);var m=n._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;m&&t(i,n,s,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",m?1:.7);var h=l("text");l("texttemplate"),n.texttemplate||l("textinfo",_.isArrayOrTypedArray(h)?"text+label":"label"),l("hovertext"),l("hovertemplate"),w(i,n,s,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),r(n,s,l),n._length=null}else n.visible=!1}},60404:function(R,C,e){"use strict";var _=e(43616),T=e(76308);R.exports=function(r,w,b,c,o){var t=w.data.data,i=t.i,n=o||t.color;if(i>=0){w.i=t.i;var a=b.marker;a.pattern&&a.colors&&a.pattern.shape||(a.color=n,w.color=n),_.pointStyle(r,b,c,w)}else T.fill(r,n)}},45716:function(R,C,e){"use strict";var _=e(33428),T=e(24040),r=e(10624).appendArrayPointValue,w=e(93024),b=e(3400),c=e(95924),o=e(78176),t=e(69656).formatPieValue;function i(n,a,s){for(var l=n.data.data,u={curveNumber:a.index,pointNumber:l.i,data:a._input,fullData:a},p=0;p<s.length;p++){var f=s[p];f in n&&(u[f]=n[f])}return"parentString"in n&&!o.isHierarchyRoot(n)&&(u.parent=n.parentString),r(u,a,l.i),u}R.exports=function(n,a,s,l,u){var p=l[0],f=p.trace,m=p.hierarchy,h=f.type==="sunburst",g=f.type==="treemap"||f.type==="icicle";"_hasHoverLabel"in f||(f._hasHoverLabel=!1),"_hasHoverEvent"in f||(f._hasHoverEvent=!1),n.on("mouseover",function(v){var x=s._fullLayout;if(!s._dragging&&x.hovermode!==!1){var y,A=s._fullData[f.index],d=v.data.data,S=d.i,k=o.isHierarchyRoot(v),E=o.getParent(m,v),L=o.getValue(v),O=function(te){return b.castOption(A,S,te)},P=O("hovertemplate"),F=w.castHoverinfo(A,x,S),U=x.separators;if(P||F&&F!=="none"&&F!=="skip"){var I,N;h&&(I=p.cx+v.pxmid[0]*(1-v.rInscribed),N=p.cy+v.pxmid[1]*(1-v.rInscribed)),g&&(I=v._hoverX,N=v._hoverY);var W,B={},V=[],q=[],ne=function(te){return V.indexOf(te)!==-1};F&&(V=F==="all"?A._module.attributes.hoverinfo.flags:F.split("+")),B.label=d.label,ne("label")&&B.label&&q.push(B.label),d.hasOwnProperty("v")&&(B.value=d.v,B.valueLabel=t(B.value,U),ne("value")&&q.push(B.valueLabel)),B.currentPath=v.currentPath=o.getPath(v.data),ne("current path")&&!k&&q.push(B.currentPath);var $=[],K=function(){$.indexOf(W)===-1&&(q.push(W),$.push(W))};B.percentParent=v.percentParent=L/o.getValue(E),B.parent=v.parentString=o.getPtLabel(E),ne("percent parent")&&(W=o.formatPercent(B.percentParent,U)+" of "+B.parent,K()),B.percentEntry=v.percentEntry=L/o.getValue(a),B.entry=v.entry=o.getPtLabel(a),!ne("percent entry")||k||v.onPathbar||(W=o.formatPercent(B.percentEntry,U)+" of "+B.entry,K()),B.percentRoot=v.percentRoot=L/o.getValue(m),B.root=v.root=o.getPtLabel(m),ne("percent root")&&!k&&(W=o.formatPercent(B.percentRoot,U)+" of "+B.root,K()),B.text=O("hovertext")||O("text"),ne("text")&&(W=B.text,b.isValidTextValue(W)&&q.push(W)),y=[i(v,A,u.eventDataKeys)];var ee={trace:A,y:N,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:q.join("<br>"),name:P||ne("name")?A.name:void 0,color:O("hoverlabel.bgcolor")||d.color,borderColor:O("hoverlabel.bordercolor"),fontFamily:O("hoverlabel.font.family"),fontSize:O("hoverlabel.font.size"),fontColor:O("hoverlabel.font.color"),fontWeight:O("hoverlabel.font.weight"),fontStyle:O("hoverlabel.font.style"),fontVariant:O("hoverlabel.font.variant"),nameLength:O("hoverlabel.namelength"),textAlign:O("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:B,eventData:y};h&&(ee.x0=I-v.rInscribed*v.rpx1,ee.x1=I+v.rInscribed*v.rpx1,ee.idealAlign=v.pxmid[0]<0?"left":"right"),g&&(ee.x=I,ee.idealAlign=I<0?"left":"right");var J=[];w.loneHover(ee,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:s,inOut_bbox:J}),y[0].bbox=J[0],f._hasHoverLabel=!0}if(g){var Z=n.select("path.surface");u.styleOne(Z,v,A,s,{hovered:!0})}f._hasHoverEvent=!0,s.emit("plotly_hover",{points:y||[i(v,A,u.eventDataKeys)],event:_.event})}}),n.on("mouseout",function(v){var x=s._fullLayout,y=s._fullData[f.index],A=_.select(this).datum();if(f._hasHoverEvent&&(v.originalEvent=_.event,s.emit("plotly_unhover",{points:[i(A,y,u.eventDataKeys)],event:_.event}),f._hasHoverEvent=!1),f._hasHoverLabel&&(w.loneUnhover(x._hoverlayer.node()),f._hasHoverLabel=!1),g){var d=n.select("path.surface");u.styleOne(d,A,y,s,{hovered:!1})}}),n.on("click",function(v){var x=s._fullLayout,y=s._fullData[f.index],A=h&&(o.isHierarchyRoot(v)||o.isLeaf(v)),d=o.getPtId(v),S=o.isEntry(v)?o.findEntryWithChild(m,d):o.findEntryWithLevel(m,d),k=o.getPtId(S),E={points:[i(v,y,u.eventDataKeys)],event:_.event};A||(E.nextLevel=k);var L=c.triggerHandler(s,"plotly_"+f.type+"click",E);if(L!==!1&&x.hovermode&&(s._hoverdata=[i(v,y,u.eventDataKeys)],w.click(s,_.event)),!A&&L!==!1&&!s._dragging&&!s._transitioning){T.call("_storeDirectGUIEdit",y,x._tracePreGUI[y.uid],{level:y.level});var O={data:[{level:k}],traces:[f.index]},P={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};w.loneUnhover(x._hoverlayer.node()),T.call("animate",s,O,P)}})}},78176:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(93972),w=e(69656);function b(c){return c.data.data.pid}C.findEntryWithLevel=function(c,o){var t;return o&&c.eachAfter(function(i){if(C.getPtId(i)===o)return t=i.copy()}),t||c},C.findEntryWithChild=function(c,o){var t;return c.eachAfter(function(i){for(var n=i.children||[],a=0;a<n.length;a++){var s=n[a];if(C.getPtId(s)===o)return t=i.copy()}}),t||c},C.isEntry=function(c){return!c.parent},C.isLeaf=function(c){return!c.children},C.getPtId=function(c){return c.data.data.id},C.getPtLabel=function(c){return c.data.data.label},C.getValue=function(c){return c.value},C.isHierarchyRoot=function(c){return b(c)===""},C.setSliceCursor=function(c,o,t){var i=t.isTransitioning;if(!i){var n=c.datum();i=t.hideOnRoot&&C.isHierarchyRoot(n)||t.hideOnLeaves&&C.isLeaf(n)}r(c,i?null:"pointer")},C.getInsideTextFontKey=function(c,o,t,i,n){var a=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",s=t.data.data.i;return _.castOption(o,s,a+"."+c)||_.castOption(o,s,"textfont."+c)||i.size},C.getOutsideTextFontKey=function(c,o,t,i){var n=t.data.data.i;return _.castOption(o,n,"outsidetextfont."+c)||_.castOption(o,n,"textfont."+c)||i.size},C.isOutsideText=function(c,o){return!c._hasColorscale&&C.isHierarchyRoot(o)},C.determineTextFont=function(c,o,t,i){return C.isOutsideText(c,o)?function(n,a,s){return{color:C.getOutsideTextFontKey("color",n,a,s),family:C.getOutsideTextFontKey("family",n,a,s),size:C.getOutsideTextFontKey("size",n,a,s),weight:C.getOutsideTextFontKey("weight",n,a,s),style:C.getOutsideTextFontKey("style",n,a,s),variant:C.getOutsideTextFontKey("variant",n,a,s),textcase:C.getOutsideTextFontKey("textcase",n,a,s),lineposition:C.getOutsideTextFontKey("lineposition",n,a,s),shadow:C.getOutsideTextFontKey("shadow",n,a,s)}}(c,o,t):function(n,a,s,l){var u=(l||{}).onPathbar,p=a.data.data,f=p.i,m=_.castOption(n,f,(u?"pathbar.textfont":"insidetextfont")+".color");return!m&&n._input.textfont&&(m=_.castOption(n._input,f,"textfont.color")),{color:m||T.contrast(p.color),family:C.getInsideTextFontKey("family",n,a,s,l),size:C.getInsideTextFontKey("size",n,a,s,l),weight:C.getInsideTextFontKey("weight",n,a,s,l),style:C.getInsideTextFontKey("style",n,a,s,l),variant:C.getInsideTextFontKey("variant",n,a,s,l),textcase:C.getInsideTextFontKey("textcase",n,a,s,l),lineposition:C.getInsideTextFontKey("lineposition",n,a,s,l),shadow:C.getInsideTextFontKey("shadow",n,a,s,l)}}(c,o,t,i)},C.hasTransition=function(c){return!!(c&&c.duration>0)},C.getMaxDepth=function(c){return c.maxdepth>=0?c.maxdepth:1/0},C.isHeader=function(c,o){return!(C.isLeaf(c)||c.depth===o._maxDepth-1)},C.getParent=function(c,o){return C.findEntryWithLevel(c,b(o))},C.listPath=function(c,o){var t=c.parent;if(!t)return[];var i=o?[t.data[o]]:[t];return C.listPath(t,o).concat(i)},C.getPath=function(c){return C.listPath(c,"label").join("/")+"/"},C.formatValue=w.formatPieValue,C.formatPercent=function(c,o){var t=_.formatPercent(c,0);return t==="0%"&&(t=w.formatPiePercent(c,o)),t}},5621:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(R){"use strict";R.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(R,C,e){"use strict";var _=e(3400),T=e(84920);R.exports=function(r,w){function b(c,o){return _.coerce(r,w,T,c,o)}b("sunburstcolorway",w.colorway),b("extendsunburstcolors")}},96488:function(R,C,e){"use strict";var _=e(33428),T=e(74148),r=e(67756).qy,w=e(43616),b=e(3400),c=e(72736),o=e(82744),t=o.recordMinTextSize,i=o.clearMinTextSize,n=e(37820),a=e(69656).getRotationAngle,s=n.computeTransform,l=n.transformInsideText,u=e(85676).styleOne,p=e(60100).resizeText,f=e(45716),m=e(27328),h=e(78176);function g(x,y,A,d){var S=x._context.staticPlot,k=x._fullLayout,E=!k.uniformtext.mode&&h.hasTransition(d),L=_.select(A).selectAll("g.slice"),O=y[0],P=O.trace,F=O.hierarchy,U=h.findEntryWithLevel(F,P.level),I=h.getMaxDepth(P),N=k._size,W=P.domain,B=N.w*(W.x[1]-W.x[0]),V=N.h*(W.y[1]-W.y[0]),q=.5*Math.min(B,V),ne=O.cx=N.l+N.w*(W.x[1]+W.x[0])/2,$=O.cy=N.t+N.h*(1-W.y[0])-V/2;if(!U)return L.remove();var K=null,ee={};E&&L.each(function(re){ee[h.getPtId(re)]={rpx0:re.rpx0,rpx1:re.rpx1,x0:re.x0,x1:re.x1,transform:re.transform},!K&&h.isEntry(re)&&(K=re)});var J=function(re){return T.partition().size([2*Math.PI,re.height+1])(re)}(U).descendants(),Z=U.height+1,te=0,oe=I;O.hasMultipleRoots&&h.isHierarchyRoot(U)&&(J=J.slice(1),Z-=1,te=1,oe+=1),J=J.filter(function(re){return re.y1<=oe});var se=a(P.rotation);se&&J.forEach(function(re){re.x0+=se,re.x1+=se});var ce=Math.min(Z,I),ye=function(re){return(re-te)/ce*q},me=function(re,he){return[re*Math.cos(he),-re*Math.sin(he)]},fe=function(re){return b.pathAnnulus(re.rpx0,re.rpx1,re.x0,re.x1,ne,$)},pe=function(re){return ne+v(re)[0]*(re.transform.rCenter||0)+(re.transform.x||0)},ge=function(re){return $+v(re)[1]*(re.transform.rCenter||0)+(re.transform.y||0)};(L=L.data(J,h.getPtId)).enter().append("g").classed("slice",!0),E?L.exit().transition().each(function(){var re=_.select(this);re.select("path.surface").transition().attrTween("d",function(he){var Se=function(xe){var Te,Ae=h.getPtId(xe),Pe=ee[Ae],De=ee[h.getPtId(U)];if(De){var ve=(xe.x1>De.x1?2*Math.PI:0)+se;Te=xe.rpx1<De.rpx1?{x0:xe.x0,x1:xe.x1,rpx0:0,rpx1:0}:{x0:ve,x1:ve,rpx0:xe.rpx0,rpx1:xe.rpx1}}else{var we,Ee=h.getPtId(xe.parent);L.each(function(Je){if(h.getPtId(Je)===Ee)return we=Je});var Fe,Le=we.children;Le.forEach(function(Je,rt){if(h.getPtId(Je)===Ae)return Fe=rt});var je=Le.length,Ge=r(we.x0,we.x1);Te={rpx0:q,rpx1:q,x0:Ge(Fe/je),x1:Ge((Fe+1)/je)}}return r(Pe,Te)}(he);return function(xe){return fe(Se(xe))}}),re.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove(),L.order();var ke=null;if(E&&K){var Ce=h.getPtId(K);L.each(function(re){ke===null&&h.getPtId(re)===Ce&&(ke=re.x1)})}var de=L;function ae(re){var he=re.parent,Se=ee[h.getPtId(he)],xe={};if(Se){var Te=he.children,Ae=Te.indexOf(re),Pe=Te.length,De=r(Se.x0,Se.x1);xe.x0=De(Ae/Pe),xe.x1=De(Ae/Pe)}else xe.x0=xe.x1=0;return xe}E&&(de=de.transition().each("end",function(){var re=_.select(this);h.setSliceCursor(re,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),de.each(function(re){var he=_.select(this),Se=b.ensureSingle(he,"path","surface",function(ve){ve.style("pointer-events",S?"none":"all")});re.rpx0=ye(re.y0),re.rpx1=ye(re.y1),re.xmid=(re.x0+re.x1)/2,re.pxmid=me(re.rpx1,re.xmid),re.midangle=-(re.xmid-Math.PI/2),re.startangle=-(re.x0-Math.PI/2),re.stopangle=-(re.x1-Math.PI/2),re.halfangle=.5*Math.min(b.angleDelta(re.x0,re.x1)||Math.PI,Math.PI),re.ring=1-re.rpx0/re.rpx1,re.rInscribed=function(ve){return ve.rpx0===0&&b.isFullCircle([ve.x0,ve.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(ve.halfangle)),ve.ring/2))}(re),E?Se.transition().attrTween("d",function(ve){var we=function(Ee){var Fe,Le=ee[h.getPtId(Ee)],je={x0:Ee.x0,x1:Ee.x1,rpx0:Ee.rpx0,rpx1:Ee.rpx1};if(Le)Fe=Le;else if(K)if(Ee.parent)if(ke){var Ge=(Ee.x1>ke?2*Math.PI:0)+se;Fe={x0:Ge,x1:Ge}}else Fe={rpx0:q,rpx1:q},b.extendFlat(Fe,ae(Ee));else Fe={rpx0:0,rpx1:0};else Fe={x0:se,x1:se};return r(Fe,je)}(ve);return function(Ee){return fe(we(Ee))}}):Se.attr("d",fe),he.call(f,U,x,y,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Se.call(u,re,P,x);var xe=b.ensureSingle(he,"g","slicetext"),Te=b.ensureSingle(xe,"text","",function(ve){ve.attr("data-notex",1)}),Ae=b.ensureUniformFontSize(x,h.determineTextFont(P,re,k.font));Te.text(C.formatSliceLabel(re,U,P,y,k)).classed("slicetext",!0).attr("text-anchor","middle").call(w.font,Ae).call(c.convertToTspans,x);var Pe=w.bBox(Te.node());re.transform=l(Pe,re,O),re.transform.targetX=pe(re),re.transform.targetY=ge(re);var De=function(ve,we){var Ee=ve.transform;return s(Ee,we),Ee.fontSize=Ae.size,t(P.type,Ee,k),b.getTextTransform(Ee)};E?Te.transition().attrTween("transform",function(ve){var we=function(Ee){var Fe,Le=ee[h.getPtId(Ee)],je=Ee.transform;if(Le)Fe=Le;else if(Fe={rpx1:Ee.rpx1,transform:{textPosAngle:je.textPosAngle,scale:0,rotate:je.rotate,rCenter:je.rCenter,x:je.x,y:je.y}},K)if(Ee.parent)if(ke){var Ge=Ee.x1>ke?2*Math.PI:0;Fe.x0=Fe.x1=Ge}else b.extendFlat(Fe,ae(Ee));else Fe.x0=Fe.x1=se;else Fe.x0=Fe.x1=se;var Je=r(Fe.transform.textPosAngle,Ee.transform.textPosAngle),rt=r(Fe.rpx1,Ee.rpx1),ot=r(Fe.x0,Ee.x0),yt=r(Fe.x1,Ee.x1),_t=r(Fe.transform.scale,je.scale),mt=r(Fe.transform.rotate,je.rotate),tt=je.rCenter===0?3:Fe.transform.rCenter===0?1/3:1,Qe=r(Fe.transform.rCenter,je.rCenter);return function(Dt){var zt=rt(Dt),pt=ot(Dt),vt=yt(Dt),We=function(Ne){return Qe(Math.pow(Ne,tt))}(Dt),Ze={pxmid:me(zt,(pt+vt)/2),rpx1:zt,transform:{textPosAngle:Je(Dt),rCenter:We,x:je.x,y:je.y}};return t(P.type,je,k),{transform:{targetX:pe(Ze),targetY:ge(Ze),scale:_t(Dt),rotate:mt(Dt),rCenter:We}}}}(ve);return function(Ee){return De(we(Ee),Pe)}}):Te.attr("transform",De(re,Pe))})}function v(x){return y=x.rpx1,A=x.transform.textPosAngle,[y*Math.sin(A),-y*Math.cos(A)];var y,A}C.plot=function(x,y,A,d){var S,k,E=x._fullLayout,L=E._sunburstlayer,O=!A,P=!E.uniformtext.mode&&h.hasTransition(A);i("sunburst",E),(S=L.selectAll("g.trace.sunburst").data(y,function(F){return F[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),P?(d&&(k=d()),_.transition().duration(A.duration).ease(A.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()}).each(function(){L.selectAll("g.trace").each(function(F){g(x,F,this,A)})})):(S.each(function(F){g(x,F,this,A)}),E.uniformtext.mode&&p(x,E._sunburstlayer.selectAll(".trace"),"sunburst")),O&&S.exit().remove()},C.formatSliceLabel=function(x,y,A,d,S){var k=A.texttemplate,E=A.textinfo;if(!(k||E&&E!=="none"))return"";var L=S.separators,O=d[0],P=x.data.data,F=O.hierarchy,U=h.isHierarchyRoot(x),I=h.getParent(F,x),N=h.getValue(x);if(!k){var W,B=E.split("+"),V=function(oe){return B.indexOf(oe)!==-1},q=[];if(V("label")&&P.label&&q.push(P.label),P.hasOwnProperty("v")&&V("value")&&q.push(h.formatValue(P.v,L)),!U){V("current path")&&q.push(h.getPath(x.data));var ne=0;V("percent parent")&&ne++,V("percent entry")&&ne++,V("percent root")&&ne++;var $=ne>1;if(ne){var K,ee=function(oe){W=h.formatPercent(K,L),$&&(W+=" of "+oe),q.push(W)};V("percent parent")&&!U&&(K=N/h.getValue(I),ee("parent")),V("percent entry")&&(K=N/h.getValue(y),ee("entry")),V("percent root")&&(K=N/h.getValue(F),ee("root"))}}return V("text")&&(W=b.castOption(A,P.i,"text"),b.isValidTextValue(W)&&q.push(W)),q.join("<br>")}var J=b.castOption(A,P.i,"texttemplate");if(!J)return"";var Z={};P.label&&(Z.label=P.label),P.hasOwnProperty("v")&&(Z.value=P.v,Z.valueLabel=h.formatValue(P.v,L)),Z.currentPath=h.getPath(x.data),U||(Z.percentParent=N/h.getValue(I),Z.percentParentLabel=h.formatPercent(Z.percentParent,L),Z.parent=h.getPtLabel(I)),Z.percentEntry=N/h.getValue(y),Z.percentEntryLabel=h.formatPercent(Z.percentEntry,L),Z.entry=h.getPtLabel(y),Z.percentRoot=N/h.getValue(F),Z.percentRootLabel=h.formatPercent(Z.percentRoot,L),Z.root=h.getPtLabel(F),P.hasOwnProperty("color")&&(Z.color=P.color);var te=b.castOption(A,P.i,"text");return(b.isValidTextValue(te)||te==="")&&(Z.text=te),Z.customdata=b.castOption(A,P.i,"customdata"),b.texttemplateString(J,Z,S._d3locale,Z,A._meta||{})}},85676:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(3400),w=e(82744).resizeText,b=e(60404);function c(o,t,i,n){var a=t.data.data,s=!t.children,l=a.i,u=r.castOption(i,l,"marker.line.color")||T.defaultLine,p=r.castOption(i,l,"marker.line.width")||0;o.call(b,t,i,n).style("stroke-width",p).call(T.stroke,u).style("opacity",s?i.leaf.opacity:null)}R.exports={style:function(o){var t=o._fullLayout._sunburstlayer.selectAll(".trace");w(o,t,"sunburst"),t.each(function(i){var n=_.select(this),a=i[0].trace;n.style("opacity",a.opacity),n.selectAll("path.surface").each(function(s){_.select(this).call(c,s,a,o)})})},styleOne:c}},16716:function(R,C,e){"use strict";var _=e(76308),T=e(49084),r=e(29736).axisHoverFormat,w=e(21776).Ks,b=e(45464),c=e(92880).extendFlat,o=e(67824).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:_.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:_.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=R.exports=o(c({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:w(),xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},T("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:c({},T.zauto,{}),zmin:c({},T.zmin,{}),zmax:c({},T.zmax,{})},hoverinfo:c({},b.hoverinfo),showlegend:c({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(R,C,e){"use strict";var _=e(47128);R.exports=function(T,r){r.surfacecolor?_(T,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):_(T,r,{vals:r.z,containerStr:"",cLetter:"c"})}},79164:function(R,C,e){"use strict";var _=e(67792).gl_surface3d,T=e(67792).ndarray,r=e(67792).ndarray_linear_interpolate.d2,w=e(70448),b=e(11240),c=e(3400).isArrayOrTypedArray,o=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function n(A,d,S){this.scene=A,this.uid=S,this.surface=d,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var a=n.prototype;a.getXat=function(A,d,S,k){var E=c(this.data.x)?c(this.data.x[0])?this.data.x[d][A]:this.data.x[A]:A;return S===void 0?E:k.d2l(E,0,S)},a.getYat=function(A,d,S,k){var E=c(this.data.y)?c(this.data.y[0])?this.data.y[d][A]:this.data.y[d]:d;return S===void 0?E:k.d2l(E,0,S)},a.getZat=function(A,d,S,k){var E=this.data.z[d][A];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[d][A]),S===void 0?E:k.d2l(E,0,S)},a.handlePick=function(A){if(A.object===this.surface){var d=(A.data.index[0]-1)/this.dataScaleX-1,S=(A.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round(d),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);A.index=[k,E],A.traceCoordinate=[this.getXat(k,E),this.getYat(k,E),this.getZat(k,E)],A.dataCoordinate=[this.getXat(k,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)A.dataCoordinate[L]!=null&&(A.dataCoordinate[L]*=this.scene.dataScale[L]);var O=this.data.hovertext||this.data.text;return c(O)&&O[E]&&O[E][k]!==void 0?A.textLabel=O[E][k]:A.textLabel=O||"",A.data.dataCoordinate=A.dataCoordinate.slice(),this.surface.highlight(A.data),this.scene.glplot.spikes.position=A.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(A,d){if(A<d)return 0;for(var S=0;Math.floor(A%d)===0;)A/=d,S++;return S}function u(A){for(var d=[],S=0;S<s.length;S++){var k=s[S];d.push(l(A,k))}return d}function p(A){for(var d=u(A),S=A,k=0;k<s.length;k++)if(d[k]>0){S=s[k];break}return S}function f(A,d){if(!(A<1||d<1)){for(var S=u(A),k=u(d),E=1,L=0;L<s.length;L++)E*=Math.pow(s[L],Math.max(S[L],k[L]));return E}}a.calcXnums=function(A){var d,S=[];for(d=1;d<A;d++){var k=this.getXat(d-1,0),E=this.getXat(d,0);S[d-1]=E!==k&&k!=null&&E!=null?Math.abs(E-k):0}var L=0;for(d=1;d<A;d++)L+=S[d-1];for(d=1;d<A;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(L/S[d-1]);return S},a.calcYnums=function(A){var d,S=[];for(d=1;d<A;d++){var k=this.getYat(0,d-1),E=this.getYat(0,d);S[d-1]=E!==k&&k!=null&&E!=null?Math.abs(E-k):0}var L=0;for(d=1;d<A;d++)L+=S[d-1];for(d=1;d<A;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(L/S[d-1]);return S};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],h=m[9],g=m[13];function v(A,d,S){var k=S[8]+S[2]*d[0]+S[5]*d[1];return A[0]=(S[6]+S[0]*d[0]+S[3]*d[1])/k,A[1]=(S[7]+S[1]*d[0]+S[4]*d[1])/k,A}function x(A,d,S){return function(k,E,L,O){for(var P=[0,0],F=k.shape[0],U=k.shape[1],I=0;I<F;I++)for(var N=0;N<U;N++)L(P,[I,N],O),k.set(I,N,r(E,P[0],P[1]))}(A,d,v,S),A}function y(A,d){for(var S=!1,k=0;k<A.length;k++)if(d===A[k]){S=!0;break}S===!1&&A.push(d)}a.estimateScale=function(A,d){for(var S=1+function(E){if(E.length!==0){for(var L=1,O=0;O<E.length;O++)L=f(L,E[O]);return L}}(d===0?this.calcXnums(A):this.calcYnums(A));S<h;)S*=2;for(;S>g;)S--,S/=p(S),++S<h&&(S=g);var k=Math.round(S/A);return k>1?k:1},a.refineCoords=function(A){for(var d=this.dataScaleX,S=this.dataScaleY,k=A[0].shape[0],E=A[0].shape[1],L=0|Math.floor(A[0].shape[0]*d+1),O=0|Math.floor(A[0].shape[1]*S+1),P=1+k+1,F=1+E+1,U=T(new Float32Array(P*F),[P,F]),I=[1/d,0,0,0,1/S,0,0,0,1],N=0;N<A.length;++N){this.surface.padField(U,A[N]);var W=T(new Float32Array(L*O),[L,O]);x(W,U,I),A[N]=W}},a.setContourLevels=function(){var A,d,S,k=[[],[],[]],E=[!1,!1,!1],L=!1;for(A=0;A<3;++A)if(this.showContour[A]&&(L=!0,this.contourSize[A]>0&&this.contourStart[A]!==null&&this.contourEnd[A]!==null&&this.contourEnd[A]>this.contourStart[A]))for(E[A]=!0,d=this.contourStart[A];d<this.contourEnd[A];d+=this.contourSize[A])S=d*this.scene.dataScale[A],y(k[A],S);if(L){var O=[[],[],[]];for(A=0;A<3;++A)this.showContour[A]&&(O[A]=E[A]?k[A]:this.scene.contourLevels[A]);this.surface.update({levels:O})}},a.update=function(A){var d,S,k,E,L=this.scene,O=L.fullSceneLayout,P=this.surface,F=o(A),U=L.dataScale,I=A.z[0].length,N=A._ylength,W=L.contourLevels;this.data=A;var B=[];for(d=0;d<3;d++)for(B[d]=[],S=0;S<I;S++)B[d][S]=[];for(S=0;S<I;S++)for(k=0;k<N;k++)B[0][S][k]=this.getXat(S,k,A.xcalendar,O.xaxis),B[1][S][k]=this.getYat(S,k,A.ycalendar,O.yaxis),B[2][S][k]=this.getZat(S,k,A.zcalendar,O.zaxis);if(A.connectgaps)for(A._emptypoints=b(B[2]),w(B[2],A._emptypoints),A._interpolatedZ=[],S=0;S<I;S++)for(A._interpolatedZ[S]=[],k=0;k<N;k++)A._interpolatedZ[S][k]=B[2][S][k];for(d=0;d<3;d++)for(S=0;S<I;S++)for(k=0;k<N;k++)(E=B[d][S][k])==null?B[d][S][k]=NaN:E=B[d][S][k]*=U[d];for(d=0;d<3;d++)for(S=0;S<I;S++)for(k=0;k<N;k++)(E=B[d][S][k])!=null&&(this.minValues[d]>E&&(this.minValues[d]=E),this.maxValues[d]<E&&(this.maxValues[d]=E));for(d=0;d<3;d++)this.objectOffset[d]=.5*(this.minValues[d]+this.maxValues[d]);for(d=0;d<3;d++)for(S=0;S<I;S++)for(k=0;k<N;k++)(E=B[d][S][k])!=null&&(B[d][S][k]-=this.objectOffset[d]);var V=[T(new Float32Array(I*N),[I,N]),T(new Float32Array(I*N),[I,N]),T(new Float32Array(I*N),[I,N])];for(d=0;d<3;d++)for(S=0;S<I;S++)for(k=0;k<N;k++)V[d].set(S,k,B[d][S][k]);B=[];var q={colormap:F,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!A.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:A.opacityscale,opacity:A.opacity},ne=i(A);if(q.intensityBounds=[ne.min,ne.max],A.surfacecolor){var $=T(new Float32Array(I*N),[I,N]);for(S=0;S<I;S++)for(k=0;k<N;k++)$.set(S,k,A.surfacecolor[k][S]);V.push($)}else q.intensityBounds[0]*=U[2],q.intensityBounds[1]*=U[2];(g<V[0].shape[0]||g<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),A.surfacecolor&&(q.intensity=V.pop());var K=[!0,!0,!0],ee=["x","y","z"];for(d=0;d<3;++d){var J=A.contours[ee[d]];K[d]=J.highlight,q.showContour[d]=J.show||J.highlight,q.showContour[d]&&(q.contourProject[d]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[d]=!0,q.levels[d]=W[d],P.highlightColor[d]=q.contourColor[d]=t(J.color),J.usecolormap?P.highlightTint[d]=q.contourTint[d]=0:P.highlightTint[d]=q.contourTint[d]=1,q.contourWidth[d]=J.width,this.contourStart[d]=J.start,this.contourEnd[d]=J.end,this.contourSize[d]=J.size):(this.showContour[d]=!1,this.contourStart[d]=null,this.contourEnd[d]=null,this.contourSize[d]=0),J.highlight&&(q.dynamicColor[d]=t(J.highlightcolor),q.dynamicWidth[d]=J.highlightwidth))}(function(Z){var te=Z[0].rgb,oe=Z[Z.length-1].rgb;return te[0]===oe[0]&&te[1]===oe[1]&&te[2]===oe[2]&&te[3]===oe[3]})(F)&&(q.vertexColor=!0),q.objectOffset=this.objectOffset,q.coords=V,P.update(q),P.visible=A.visible,P.enableDynamic=K,P.enableHighlight=K,P.snapToData=!0,"lighting"in A&&(P.ambientLight=A.lighting.ambient,P.diffuseLight=A.lighting.diffuse,P.specularLight=A.lighting.specular,P.roughness=A.lighting.roughness,P.fresnel=A.lighting.fresnel),"lightposition"in A&&(P.lightPosition=[A.lightposition.x,A.lightposition.y,A.lightposition.z])},a.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},R.exports=function(A,d){var S=A.glplot.gl,k=_({gl:S}),E=new n(A,k,d.uid);return k._trace=E,E.update(d),A.glplot.add(k),E}},60192:function(R,C,e){"use strict";var _=e(24040),T=e(3400),r=e(27260),w=e(16716);function b(o,t,i,n){var a=n("opacityscale");a==="max"?t.opacityscale=[[0,.1],[1,1]]:a==="min"?t.opacityscale=[[0,1],[1,.1]]:a==="extremes"?t.opacityscale=function(s,l){for(var u=[],p=0;p<32;p++){var f=p/31,m=.1+.9*(1-Math.pow(Math.sin(1*f*Math.PI),2));u.push([f,Math.max(0,Math.min(1,m))])}return u}():function(s){var l=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var u=0;u<s.length;u++){var p=s[u];if(p.length!==2||+p[0]<l)return!1;l=+p[0]}return!0}(a)||(t.opacityscale=void 0)}function c(o,t,i){t in o&&!(i in o)&&(o[i]=o[t])}R.exports={supplyDefaults:function(o,t,i,n){var a,s;function l(y,A){return T.coerce(o,t,w,y,A)}var u=l("x"),p=l("y"),f=l("z");if(!f||!f.length||u&&u.length<1||p&&p.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&T.isArrayOrTypedArray(u[0])?f.length:f[0].length,t._ylength=f.length,_.getComponentMethod("calendars","handleTraceDefaults")(o,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){l(y)});var m=l("surfacecolor"),h=["x","y","z"];for(a=0;a<3;++a){var g="contours."+h[a],v=l(g+".show"),x=l(g+".highlight");if(v||x)for(s=0;s<3;++s)l(g+".project."+h[s]);v&&(l(g+".color"),l(g+".width"),l(g+".usecolormap")),x&&(l(g+".highlightcolor"),l(g+".highlightwidth")),l(g+".start"),l(g+".end"),l(g+".size")}m||(c(o,"zmin","cmin"),c(o,"zmax","cmax"),c(o,"zauto","cauto")),r(o,t,n,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(R,C,e){"use strict";R.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(R,C,e){"use strict";var _=e(13916),T=e(92880).extendFlat,r=e(67824).overrideAll,w=e(25376),b=e(86968).u,c=e(29736).descriptionOnlyNumbers;(R.exports=r({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:T({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:T({},w({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:c("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:T({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:T({},w({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(R,C,e){"use strict";var _=e(84888)._M,T=e(24752),r="table";C.name=r,C.plot=function(w){var b=_(w.calcdata,r)[0];b.length&&T(w,b)},C.clean=function(w,b,c,o){var t=o._has&&o._has(r),i=b._has&&b._has(r);t&&!i&&o._paperdiv.selectAll(".table").remove()}},39312:function(R,C,e){"use strict";var _=e(71688).wrap;R.exports=function(){return _({})}},23536:function(R){"use strict";R.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(R,C,e){"use strict";var _=e(23536),T=e(92880).extendFlat,r=e(38248),w=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function c(l){if(b(l)){for(var u=0,p=0;p<l.length;p++)u=Math.max(u,c(l[p]));return u}return l}function o(l,u){return l+u}function t(l){var u,p=l.slice(),f=1/0,m=0;for(u=0;u<p.length;u++)w(p[u])?p[u]=Array.from(p[u]):b(p[u])||(p[u]=[p[u]]),f=Math.min(f,p[u].length),m=Math.max(m,p[u].length);if(f!==m)for(u=0;u<p.length;u++){var h=m-p[u].length;h&&(p[u]=p[u].concat(i(h)))}return p}function i(l){for(var u=new Array(l),p=0;p<l;p++)u[p]="";return u}function n(l){return l.calcdata.columns.reduce(function(u,p){return p.xIndex<l.xIndex?u+p.columnWidth:u},0)}function a(l,u){return Object.keys(l).map(function(p){return T({},l[p],{auxiliaryBlocks:u})})}function s(l,u){for(var p,f={},m=0,h=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,x=0,y=0;y<l.length;y++)p=l[y],g.rows.push({rowIndex:y,rowHeight:p}),((h+=p)>=u||y===l.length-1)&&(f[m]=g,g.key=x++,g.firstRowIndex=v,g.lastRowIndex=y,g={firstRowIndex:null,lastRowIndex:null,rows:[]},m+=h,v=y+1,h=0);return f}R.exports=function(l,u){var p=t(u.cells.values),f=function(N){return N.slice(u.header.values.length,N.length)},m=t(u.header.values);m.length&&!m[0].length&&(m[0]=[""],m=t(m));var h=m.concat(f(p).map(function(){return i((m[0]||[""]).length)})),g=u.domain,v=Math.floor(l._fullLayout._size.w*(g.x[1]-g.x[0])),x=Math.floor(l._fullLayout._size.h*(g.y[1]-g.y[0])),y=u.header.values.length?h[0].map(function(){return u.header.height}):[_.emptyHeaderHeight],A=p.length?p[0].map(function(){return u.cells.height}):[],d=y.reduce(o,0),S=s(A,x-d+_.uplift),k=a(s(y,d),[]),E=a(S,k),L={},O=u._fullInput.columnorder;b(O)&&(O=Array.from(O)),O=O.concat(f(p.map(function(N,W){return W})));var P=h.map(function(N,W){var B=b(u.columnwidth)?u.columnwidth[Math.min(W,u.columnwidth.length-1)]:u.columnwidth;return r(B)?Number(B):1}),F=P.reduce(o,0);P=P.map(function(N){return N/F*v});var U=Math.max(c(u.header.line.width),c(u.cells.line.width)),I={key:u.uid+l._context.staticPlot,translateX:g.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-g.y[1]),size:l._fullLayout._size,width:v,maxLineWidth:U,height:x,columnOrder:O,groupHeight:x,rowBlocks:E,headerRowBlocks:k,scrollY:0,cells:T({},u.cells,{values:p}),headerCells:T({},u.header,{values:h}),gdColumns:h.map(function(N){return N[0]}),gdColumnsOriginalOrder:h.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:h.map(function(N,W){var B=L[N];return L[N]=(B||0)+1,{key:N+"__"+L[N],label:N,specIndex:W,xIndex:O[W],xScale:n,x:void 0,calcdata:void 0,columnWidth:P[W]}})};return I.columns.forEach(function(N){N.calcdata=I,N.x=n(N)}),I}},53056:function(R,C,e){"use strict";var _=e(92880).extendFlat;C.splitToPanels=function(T){var r=[0,0],w=_({},T,{key:"header",type:"header",page:0,prevPages:r,currentRepaint:[null,null],dragHandle:!0,values:T.calcdata.headerCells.values[T.specIndex],rowBlocks:T.calcdata.headerRowBlocks,calcdata:_({},T.calcdata,{cells:T.calcdata.headerCells})});return[_({},T,{key:"cells1",type:"cells",page:0,prevPages:r,currentRepaint:[null,null],dragHandle:!1,values:T.calcdata.cells.values[T.specIndex],rowBlocks:T.calcdata.rowBlocks}),_({},T,{key:"cells2",type:"cells",page:1,prevPages:r,currentRepaint:[null,null],dragHandle:!1,values:T.calcdata.cells.values[T.specIndex],rowBlocks:T.calcdata.rowBlocks}),w]},C.splitToCells=function(T){var r=function(w){var b=w.rowBlocks[w.page],c=b?b.rows[0].rowIndex:0;return[c,b?c+b.rows.length:0]}(T);return(T.values||[]).slice(r[0],r[1]).map(function(w,b){return{keyWithinBlock:b+(typeof w=="string"&&w.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:r[0]+b,column:T,calcdata:T.calcdata,page:T.page,rowBlocks:T.rowBlocks,value:w}})}},53212:function(R,C,e){"use strict";var _=e(3400),T=e(60520),r=e(86968).Q;R.exports=function(w,b,c,o){function t(i,n){return _.coerce(w,b,T,i,n)}r(b,o,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),_.coerceFont(t,"header.font",o.font),function(i,n){for(var a=i.columnorder||[],s=i.header.values.length,l=a.slice(0,s),u=l.slice().sort(function(m,h){return m-h}),p=l.map(function(m){return u.indexOf(m)}),f=p.length;f<s;f++)p.push(f);n("columnorder",p)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),_.coerceFont(t,"cells.font",o.font),b._length=null}},41724:function(R,C,e){"use strict";R.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(R,C,e){"use strict";var _=e(23536),T=e(33428),r=e(3400),w=r.numberFormat,b=e(71688),c=e(43616),o=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,n=e(3400).cancelTransition,a=e(55992),s=e(53056),l=e(76308);function u(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function p(q,ne){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+ne.key}function f(q,ne){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+ne.calcdata.key+"_"+ne.specIndex}function m(q){return[].concat.apply([],q.map(function(ne){return ne})).map(function(ne){return ne.__data__})}function h(q,ne,$){var K=q.selectAll("."+_.cn.scrollbarKit).data(b.repeat,b.keyFun);K.enter().append("g").classed(_.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),K.each(function(oe){var se=oe.scrollbarState;se.totalHeight=function(ce){var ye=ce.rowBlocks;return N(ye,ye.length-1)+(ye.length?W(ye[ye.length-1],1/0):1)}(oe),se.scrollableAreaHeight=oe.groupHeight-k(oe),se.currentlyVisibleHeight=Math.min(se.totalHeight,se.scrollableAreaHeight),se.ratio=se.currentlyVisibleHeight/se.totalHeight,se.barLength=Math.max(se.ratio*se.currentlyVisibleHeight,_.goldenRatio*_.scrollbarWidth),se.barWiggleRoom=se.currentlyVisibleHeight-se.barLength,se.wiggleRoom=Math.max(0,se.totalHeight-se.scrollableAreaHeight),se.topY=se.barWiggleRoom===0?0:oe.scrollY/se.wiggleRoom*se.barWiggleRoom,se.bottomY=se.topY+se.barLength,se.dragMultiplier=se.wiggleRoom/se.barWiggleRoom}).attr("transform",function(oe){var se=oe.width+_.scrollbarWidth/2+_.scrollbarOffset;return i(se,k(oe))});var ee=K.selectAll("."+_.cn.scrollbar).data(b.repeat,b.keyFun);ee.enter().append("g").classed(_.cn.scrollbar,!0);var J=ee.selectAll("."+_.cn.scrollbarSlider).data(b.repeat,b.keyFun);J.enter().append("g").classed(_.cn.scrollbarSlider,!0),J.attr("transform",function(oe){return i(0,oe.scrollbarState.topY||0)});var Z=J.selectAll("."+_.cn.scrollbarGlyph).data(b.repeat,b.keyFun);Z.enter().append("line").classed(_.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",_.scrollbarWidth).attr("stroke-linecap","round").attr("y1",_.scrollbarWidth/2),Z.attr("y2",function(oe){return oe.scrollbarState.barLength-_.scrollbarWidth/2}).attr("stroke-opacity",function(oe){return oe.columnDragInProgress||!oe.scrollbarState.barWiggleRoom||$?0:.4}),Z.transition().delay(0).duration(0),Z.transition().delay(_.scrollbarHideDelay).duration(_.scrollbarHideDuration).attr("stroke-opacity",0);var te=ee.selectAll("."+_.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);te.enter().append("line").classed(_.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",_.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(oe){var se=T.event.y,ce=this.getBoundingClientRect(),ye=oe.scrollbarState,me=se-ce.top,fe=T.scale.linear().domain([0,ye.scrollableAreaHeight]).range([0,ye.totalHeight]).clamp(!0);ye.topY<=me&&me<=ye.bottomY||L(ne,q,null,fe(me-ye.barLength/2))(oe)}).call(T.behavior.drag().origin(function(oe){return T.event.stopPropagation(),oe.scrollbarState.scrollbarScrollInProgress=!0,oe}).on("drag",L(ne,q)).on("dragend",function(){})),te.attr("y2",function(oe){return oe.scrollbarState.scrollableAreaHeight}),ne._context.staticPlot&&(Z.remove(),te.remove())}function g(q,ne,$,K){var ee=function(se){var ce=se.selectAll("."+_.cn.columnCells).data(b.repeat,b.keyFun);return ce.enter().append("g").classed(_.cn.columnCells,!0),ce.exit().remove(),ce}($),J=function(se){var ce=se.selectAll("."+_.cn.columnCell).data(s.splitToCells,function(ye){return ye.keyWithinBlock});return ce.enter().append("g").classed(_.cn.columnCell,!0),ce.exit().remove(),ce}(ee);(function(se){se.each(function(ce,ye){var me=ce.calcdata.cells.font,fe=ce.column.specIndex,pe={size:y(me.size,fe,ye),color:y(me.color,fe,ye),family:y(me.family,fe,ye),weight:y(me.weight,fe,ye),style:y(me.style,fe,ye),variant:y(me.variant,fe,ye),textcase:y(me.textcase,fe,ye),lineposition:y(me.lineposition,fe,ye),shadow:y(me.shadow,fe,ye)};ce.rowNumber=ce.key,ce.align=y(ce.calcdata.cells.align,fe,ye),ce.cellBorderWidth=y(ce.calcdata.cells.line.width,fe,ye),ce.font=pe})})(J);var Z=function(se){var ce=se.selectAll("."+_.cn.cellRect).data(b.repeat,function(ye){return ye.keyWithinBlock});return ce.enter().append("rect").classed(_.cn.cellRect,!0),ce}(J);(function(se){se.attr("width",function(ce){return ce.column.columnWidth}).attr("stroke-width",function(ce){return ce.cellBorderWidth}).each(function(ce){var ye=T.select(this);l.stroke(ye,y(ce.calcdata.cells.line.color,ce.column.specIndex,ce.rowNumber)),l.fill(ye,y(ce.calcdata.cells.fill.color,ce.column.specIndex,ce.rowNumber))})})(Z);var te=function(se){var ce=se.selectAll("."+_.cn.cellTextHolder).data(b.repeat,function(ye){return ye.keyWithinBlock});return ce.enter().append("g").classed(_.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ce}(J),oe=function(se){var ce=se.selectAll("."+_.cn.cellText).data(b.repeat,function(ye){return ye.keyWithinBlock});return ce.enter().append("text").classed(_.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){T.event.stopPropagation()}),ce}(te);(function(se){se.each(function(ce){c.font(T.select(this),ce.font)})})(oe),v(oe,ne,K,q),I(J)}function v(q,ne,$,K){q.text(function(ee){var J=ee.column.specIndex,Z=ee.rowNumber,te=ee.value,oe=typeof te=="string",se=oe&&te.match(/<br>/i),ce=!oe||se;ee.mayHaveMarkup=oe&&te.match(/[<&>]/);var ye,me=typeof(ye=te)=="string"&&ye.match(_.latexCheck);ee.latex=me;var fe,pe,ge=me?"":y(ee.calcdata.cells.prefix,J,Z)||"",ke=me?"":y(ee.calcdata.cells.suffix,J,Z)||"",Ce=me?null:y(ee.calcdata.cells.format,J,Z)||null,de=ge+(Ce?w(Ce)(ee.value):ee.value)+ke;if(ee.wrappingNeeded=!ee.wrapped&&!ce&&!me&&(fe=x(de)),ee.cellHeightMayIncrease=se||me||ee.mayHaveMarkup||(fe===void 0?x(de):fe),ee.needsConvertToTspans=ee.mayHaveMarkup||ee.wrappingNeeded||ee.latex,ee.wrappingNeeded){var ae=(_.wrapSplitCharacter===" "?de.replace(/<a href=/gi,"<a_href="):de).split(_.wrapSplitCharacter),re=_.wrapSplitCharacter===" "?ae.map(function(he){return he.replace(/<a_href=/gi,"<a href=")}):ae;ee.fragments=re.map(function(he){return{text:he,width:null}}),ee.fragments.push({fragment:_.wrapSpacer,width:null}),pe=re.join(_.lineBreaker)+_.lineBreaker+_.wrapSpacer}else delete ee.fragments,pe=de;return pe}).attr("dy",function(ee){return ee.needsConvertToTspans?0:"0.75em"}).each(function(ee){var J=this,Z=T.select(J),te=ee.wrappingNeeded?P:F;ee.needsConvertToTspans?o.convertToTspans(Z,K,te($,J,ne,K,ee)):T.select(J.parentNode).attr("transform",function(oe){return i(U(oe),_.cellPad)}).attr("text-anchor",function(oe){return{left:"start",center:"middle",right:"end"}[oe.align]})})}function x(q){return q.indexOf(_.wrapSplitCharacter)!==-1}function y(q,ne,$){if(r.isArrayOrTypedArray(q)){var K=q[Math.min(ne,q.length-1)];return r.isArrayOrTypedArray(K)?K[Math.min($,K.length-1)]:K}return q}function A(q,ne,$){q.transition().ease(_.releaseTransitionEase).duration(_.releaseTransitionDuration).attr("transform",i(ne.x,$))}function d(q){return q.type==="cells"}function S(q){return q.type==="header"}function k(q){return(q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ne,$){return ne+W($,1/0)},0)}function E(q,ne,$){var K=m(ne)[0];if(K!==void 0){var ee=K.rowBlocks,J=K.calcdata,Z=N(ee,ee.length),te=K.calcdata.groupHeight-k(K),oe=J.scrollY=Math.max(0,Math.min(Z-te,J.scrollY)),se=function(ce,ye,me){for(var fe=[],pe=0,ge=0;ge<ce.length;ge++){for(var ke=ce[ge],Ce=ke.rows,de=0,ae=0;ae<Ce.length;ae++)de+=Ce[ae].rowHeight;ke.allRowsHeight=de,ye<pe+de&&ye+me>pe&&fe.push(ge),pe+=de}return fe}(ee,oe,te);se.length===1&&(se[0]===ee.length-1?se.unshift(se[0]-1):se.push(se[0]+1)),se[0]%2&&se.reverse(),ne.each(function(ce,ye){ce.page=se[ye],ce.scrollY=oe}),ne.attr("transform",function(ce){var ye=N(ce.rowBlocks,ce.page)-ce.scrollY;return i(0,ye)}),q&&(O(q,$,ne,se,K.prevPages,K,0),O(q,$,ne,se,K.prevPages,K,1),h($,q))}}function L(q,ne,$,K){return function(ee){var J=ee.calcdata?ee.calcdata:ee,Z=ne.filter(function(ce){return J.key===ce.key}),te=$||J.scrollbarState.dragMultiplier,oe=J.scrollY;J.scrollY=K===void 0?J.scrollY+te*T.event.dy:K;var se=Z.selectAll("."+_.cn.yColumn).selectAll("."+_.cn.columnBlock).filter(d);return E(q,se,Z),J.scrollY===oe}}function O(q,ne,$,K,ee,J,Z){K[Z]!==ee[Z]&&(clearTimeout(J.currentRepaint[Z]),J.currentRepaint[Z]=setTimeout(function(){var te=$.filter(function(oe,se){return se===Z&&K[se]!==ee[se]});g(q,ne,te,$),ee[Z]=K[Z]}))}function P(q,ne,$,K){return function(){var ee=T.select(ne.parentNode);ee.each(function(J){var Z=J.fragments;ee.selectAll("tspan.line").each(function(pe,ge){Z[ge].width=this.getComputedTextLength()});var te,oe,se=Z[Z.length-1].width,ce=Z.slice(0,-1),ye=[],me=0,fe=J.column.columnWidth-2*_.cellPad;for(J.value="";ce.length;)me+(oe=(te=ce.shift()).width+se)>fe&&(J.value+=ye.join(_.wrapSpacer)+_.lineBreaker,ye=[],me=0),ye.push(te.text),me+=oe;me&&(J.value+=ye.join(_.wrapSpacer)),J.wrapped=!0}),ee.selectAll("tspan.line").remove(),v(ee.select("."+_.cn.cellText),$,q,K),T.select(ne.parentNode.parentNode).call(I)}}function F(q,ne,$,K,ee){return function(){if(!ee.settledY){var J=T.select(ne.parentNode),Z=V(ee),te=ee.key-Z.firstRowIndex,oe=Z.rows[te].rowHeight,se=ee.cellHeightMayIncrease?ne.parentNode.getBoundingClientRect().height+2*_.cellPad:oe,ce=Math.max(se,oe);ce-Z.rows[te].rowHeight&&(Z.rows[te].rowHeight=ce,q.selectAll("."+_.cn.columnCell).call(I),E(null,q.filter(d),0),h($,K,!0)),J.attr("transform",function(){var ye=this,me=ye.parentNode.getBoundingClientRect(),fe=T.select(ye.parentNode).select("."+_.cn.cellRect).node().getBoundingClientRect(),pe=ye.transform.baseVal.consolidate(),ge=fe.top-me.top+(pe?pe.matrix.f:_.cellPad);return i(U(ee,T.select(ye.parentNode).select("."+_.cn.cellTextHolder).node().getBoundingClientRect().width),ge)}),ee.settledY=!0}}}function U(q,ne){switch(q.align){case"left":default:return _.cellPad;case"right":return q.column.columnWidth-(ne||0)-_.cellPad;case"center":return(q.column.columnWidth-(ne||0))/2}}function I(q){q.attr("transform",function(ne){var $=ne.rowBlocks[0].auxiliaryBlocks.reduce(function(ee,J){return ee+W(J,1/0)},0),K=W(V(ne),ne.key);return i(0,K+$)}).selectAll("."+_.cn.cellRect).attr("height",function(ne){return($=V(ne),K=ne.key,$.rows[K-$.firstRowIndex]).rowHeight;var $,K})}function N(q,ne){for(var $=0,K=ne-1;K>=0;K--)$+=B(q[K]);return $}function W(q,ne){for(var $=0,K=0;K<q.rows.length&&q.rows[K].rowIndex<ne;K++)$+=q.rows[K].rowHeight;return $}function B(q){var ne=q.allRowsHeight;if(ne!==void 0)return ne;for(var $=0,K=0;K<q.rows.length;K++)$+=q.rows[K].rowHeight;return q.allRowsHeight=$,$}function V(q){return q.rowBlocks[q.page]}R.exports=function(q,ne){var $=!q._context.staticPlot,K=q._fullLayout._paper.selectAll("."+_.cn.table).data(ne.map(function(ke){var Ce=b.unwrap(ke).trace;return a(q,Ce)}),b.keyFun);K.exit().remove(),K.enter().append("g").classed(_.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),K.attr("width",function(ke){return ke.width+ke.size.l+ke.size.r}).attr("height",function(ke){return ke.height+ke.size.t+ke.size.b}).attr("transform",function(ke){return i(ke.translateX,ke.translateY)});var ee=K.selectAll("."+_.cn.tableControlView).data(b.repeat,b.keyFun),J=ee.enter().append("g").classed(_.cn.tableControlView,!0).style("box-sizing","content-box");if($){var Z="onwheel"in document?"wheel":"mousewheel";J.on("mousemove",function(ke){ee.filter(function(Ce){return ke===Ce}).call(h,q)}).on(Z,function(ke){if(!ke.scrollbarState.wheeling){ke.scrollbarState.wheeling=!0;var Ce=ke.scrollY+T.event.deltaY;L(q,ee,null,Ce)(ke)||(T.event.stopPropagation(),T.event.preventDefault()),ke.scrollbarState.wheeling=!1}}).call(h,q,!0)}ee.attr("transform",function(ke){return i(ke.size.l,ke.size.t)});var te=ee.selectAll("."+_.cn.scrollBackground).data(b.repeat,b.keyFun);te.enter().append("rect").classed(_.cn.scrollBackground,!0).attr("fill","none"),te.attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),ee.each(function(ke){c.setClipUrl(T.select(this),p(q,ke),q)});var oe=ee.selectAll("."+_.cn.yColumn).data(function(ke){return ke.columns},b.keyFun);oe.enter().append("g").classed(_.cn.yColumn,!0),oe.exit().remove(),oe.attr("transform",function(ke){return i(ke.x,0)}),$&&oe.call(T.behavior.drag().origin(function(ke){return A(T.select(this),ke,-_.uplift),t(this),ke.calcdata.columnDragInProgress=!0,h(ee.filter(function(Ce){return ke.calcdata.key===Ce.key}),q),ke}).on("drag",function(ke){var Ce=T.select(this),de=function(ae){return(ke===ae?T.event.x:ae.x)+ae.columnWidth/2};ke.x=Math.max(-_.overdrag,Math.min(ke.calcdata.width+_.overdrag-ke.columnWidth,T.event.x)),m(oe).filter(function(ae){return ae.calcdata.key===ke.calcdata.key}).sort(function(ae,re){return de(ae)-de(re)}).forEach(function(ae,re){ae.xIndex=re,ae.x=ke===ae?ae.x:ae.xScale(ae)}),oe.filter(function(ae){return ke!==ae}).transition().ease(_.transitionEase).duration(_.transitionDuration).attr("transform",function(ae){return i(ae.x,0)}),Ce.call(n).attr("transform",i(ke.x,-_.uplift))}).on("dragend",function(ke){var Ce=T.select(this),de=ke.calcdata;ke.x=ke.xScale(ke),ke.calcdata.columnDragInProgress=!1,A(Ce,ke,0),function(ae,re,he){var Se=re.gdColumnsOriginalOrder;re.gdColumns.sort(function(xe,Te){return he[Se.indexOf(xe)]-he[Se.indexOf(Te)]}),re.columnorder=he,ae.emit("plotly_restyle")}(q,de,de.columns.map(function(ae){return ae.xIndex}))})),oe.each(function(ke){c.setClipUrl(T.select(this),f(q,ke),q)});var se=oe.selectAll("."+_.cn.columnBlock).data(s.splitToPanels,b.keyFun);se.enter().append("g").classed(_.cn.columnBlock,!0).attr("id",function(ke){return ke.key}),se.style("cursor",function(ke){return ke.dragHandle?"ew-resize":ke.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ce=se.filter(S),ye=se.filter(d);$&&ye.call(T.behavior.drag().origin(function(ke){return T.event.stopPropagation(),ke}).on("drag",L(q,ee,-1)).on("dragend",function(){})),g(q,ee,ce,se),g(q,ee,ye,se);var me=ee.selectAll("."+_.cn.scrollAreaClip).data(b.repeat,b.keyFun);me.enter().append("clipPath").classed(_.cn.scrollAreaClip,!0).attr("id",function(ke){return p(q,ke)});var fe=me.selectAll("."+_.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);fe.enter().append("rect").classed(_.cn.scrollAreaClipRect,!0).attr("x",-_.overdrag).attr("y",-_.uplift).attr("fill","none"),fe.attr("width",function(ke){return ke.width+2*_.overdrag}).attr("height",function(ke){return ke.height+_.uplift}),oe.selectAll("."+_.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(_.cn.columnBoundary,!0);var pe=oe.selectAll("."+_.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);pe.enter().append("clipPath").classed(_.cn.columnBoundaryClippath,!0),pe.attr("id",function(ke){return f(q,ke)});var ge=pe.selectAll("."+_.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(_.cn.columnBoundaryRect,!0).attr("fill","none"),ge.attr("width",function(ke){return ke.columnWidth+2*u(ke)}).attr("height",function(ke){return ke.calcdata.height+2*u(ke)+_.uplift}).attr("x",function(ke){return-u(ke)}).attr("y",function(ke){return-u(ke)}),E(null,ye,ee)}},40516:function(R,C,e){"use strict";var _=e(21776).Ks,T=e(21776).Gw,r=e(49084),w=e(86968).u,b=e(74996),c=e(424),o=e(32984),t=e(92880).extendFlat,i=e(98192).c;R.exports={labels:c.labels,parents:c.parents,values:c.values,branchvalues:c.branchvalues,count:c.count,level:c.level,maxdepth:c.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:c.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:c.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:c.textinfo,texttemplate:T({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:c.hoverinfo,hovertemplate:_({},{keys:o.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:c.root,domain:w({name:"treemap",trace:!0,editType:"calc"})}},79516:function(R,C,e){"use strict";var _=e(7316);C.name="treemap",C.plot=function(T,r,w,b){_.plotBasePlot(C.name,T,r,w,b)},C.clean=function(T,r,w,b){_.cleanBasePlot(C.name,T,r,w,b)}},97840:function(R,C,e){"use strict";var _=e(3776);C.r=function(T,r){return _.calc(T,r)},C.q=function(T){return _._runCrossTraceCalc("treemap",T)}},32984:function(R){"use strict";R.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(R,C,e){"use strict";var _=e(3400),T=e(40516),r=e(76308),w=e(86968).Q,b=e(31508).handleText,c=e(78048).TEXTPAD,o=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;R.exports=function(a,s,l,u){function p(A,d){return _.coerce(a,s,T,A,d)}var f=p("labels"),m=p("parents");if(f&&f.length&&m&&m.length){var h=p("values");h&&h.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.packing")==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var g=p("text");p("texttemplate"),s.texttemplate||p("textinfo",_.isArrayOrTypedArray(g)?"text+label":"label"),p("hovertext"),p("hovertemplate");var v=p("pathbar.visible");b(a,s,u,p,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var x=s.textposition.indexOf("bottom")!==-1;o(a,s,u,p),(s._hasColorscale=i(a,"marker","colors")||(a.marker||{}).coloraxis)?n(a,s,u,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(s.marker.colors||[]).length);var y=2*s.textfont.size;p("marker.pad.t",x?y/4:y),p("marker.pad.l",y/4),p("marker.pad.r",y/4),p("marker.pad.b",x?y:y/4),p("marker.cornerradius"),s._hovered={marker:{line:{width:2,color:r.contrast(u.paper_bgcolor)}}},v&&(p("pathbar.thickness",s.pathbar.textfont.size+2*c),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),w(s,u,p),s._length=null}else s.visible=!1}},95808:function(R,C,e){"use strict";var _=e(33428),T=e(78176),r=e(82744).clearMinTextSize,w=e(60100).resizeText,b=e(52960);R.exports=function(c,o,t,i,n){var a,s,l=n.type,u=n.drawDescendants,p=c._fullLayout,f=p["_"+l+"layer"],m=!t;r(l,p),(a=f.selectAll("g.trace."+l).data(o,function(h){return h[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),a.order(),!p.uniformtext.mode&&T.hasTransition(t)?(i&&(s=i()),_.transition().duration(t.duration).ease(t.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){f.selectAll("g.trace").each(function(h){b(c,h,this,t,u)})})):(a.each(function(h){b(c,h,this,t,u)}),p.uniformtext.mode&&w(c,f.selectAll(".trace"),l)),m&&a.exit().remove()}},27336:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(72736),b=e(13832),c=e(66192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=!0;R.exports=function(a,s,l,u,p){var f=p.barDifY,m=p.width,h=p.height,g=p.viewX,v=p.viewY,x=p.pathSlice,y=p.toMoveInsideSlice,A=p.strTransform,d=p.hasTransition,S=p.handleSlicesExit,k=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,L={},O=a._context.staticPlot,P=a._fullLayout,F=s[0],U=F.trace,I=F.hierarchy,N=m/U._entryDepth,W=t.listPath(l.data,"id"),B=b(I.copy(),[m,h],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(B=B.filter(function(q){var ne=W.indexOf(q.data.id);return ne!==-1&&(q.x0=N*ne,q.x1=N*(ne+1),q.y0=f,q.y1=f+h,q.onPathbar=!0,!0)})).reverse(),(u=u.data(B,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,L,[m,h],x),u.order();var V=u;d&&(V=V.transition().each("end",function(){var q=_.select(this);t.setSliceCursor(q,a,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(q){q._x0=g(q.x0),q._x1=g(q.x1),q._y0=v(q.y0),q._y1=v(q.y1),q._hoverX=g(q.x1-Math.min(m,h)/2),q._hoverY=v(q.y1-h/2);var ne=_.select(this),$=T.ensureSingle(ne,"path","surface",function(Z){Z.style("pointer-events",O?"none":"all")});d?$.transition().attrTween("d",function(Z){var te=k(Z,n,L,[m,h]);return function(oe){return x(te(oe))}}):$.attr("d",x),ne.call(i,l,a,s,{styleOne:c,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:a._transitioning}),$.call(c,q,U,a,{hovered:!1}),q._text=(t.getPtLabel(q)||"").split("<br>").join(" ")||"";var K=T.ensureSingle(ne,"g","slicetext"),ee=T.ensureSingle(K,"text","",function(Z){Z.attr("data-notex",1)}),J=T.ensureUniformFontSize(a,t.determineTextFont(U,q,P.font,{onPathbar:!0}));ee.text(q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(r.font,J).call(w.convertToTspans,a),q.textBB=r.bBox(ee.node()),q.transform=y(q,{fontSize:J.size,onPathbar:!0}),q.transform.fontSize=J.size,d?ee.transition().attrTween("transform",function(Z){var te=E(Z,n,L,[m,h]);return function(oe){return A(te(oe))}}):ee.attr("transform",A(q))})}},76477:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(72736),b=e(13832),c=e(66192).styleOne,o=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,a=!1;R.exports=function(s,l,u,p,f){var m=f.width,h=f.height,g=f.viewX,v=f.viewY,x=f.pathSlice,y=f.toMoveInsideSlice,A=f.strTransform,d=f.hasTransition,S=f.handleSlicesExit,k=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,L=f.prevEntry,O=s._context.staticPlot,P=s._fullLayout,F=l[0].trace,U=F.textposition.indexOf("left")!==-1,I=F.textposition.indexOf("right")!==-1,N=F.textposition.indexOf("bottom")!==-1,W=!N&&!F.marker.pad.t||N&&!F.marker.pad.b,B=b(u,[m,h],{packing:F.tiling.packing,squarifyratio:F.tiling.squarifyratio,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,pad:{inner:F.tiling.pad,top:F.marker.pad.t,left:F.marker.pad.l,right:F.marker.pad.r,bottom:F.marker.pad.b}}).descendants(),V=1/0,q=-1/0;B.forEach(function(J){var Z=J.depth;Z>=F._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(V=Math.min(V,Z),q=Math.max(q,Z))}),p=p.data(B,t.getPtId),F._maxVisibleLayers=isFinite(q)?q-V+1:0,p.enter().append("g").classed("slice",!0),S(p,a,{},[m,h],x),p.order();var ne=null;if(d&&L){var $=t.getPtId(L);p.each(function(J){ne===null&&t.getPtId(J)===$&&(ne={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var K=function(){return ne||{x0:0,x1:m,y0:0,y1:h}},ee=p;return d&&(ee=ee.transition().each("end",function(){var J=_.select(this);t.setSliceCursor(J,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(J){var Z=t.isHeader(J,F);J._x0=g(J.x0),J._x1=g(J.x1),J._y0=v(J.y0),J._y1=v(J.y1),J._hoverX=g(J.x1-F.marker.pad.r),J._hoverY=v(N?J.y1-F.marker.pad.b/2:J.y0+F.marker.pad.t/2);var te=_.select(this),oe=T.ensureSingle(te,"path","surface",function(pe){pe.style("pointer-events",O?"none":"all")});d?oe.transition().attrTween("d",function(pe){var ge=k(pe,a,K(),[m,h]);return function(ke){return x(ge(ke))}}):oe.attr("d",x),te.call(i,u,s,l,{styleOne:c,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,s,{isTransitioning:s._transitioning}),oe.call(c,J,F,s,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":J._text=Z?W?"":t.getPtLabel(J)||"":n(J,u,F,l,P)||"";var se=T.ensureSingle(te,"g","slicetext"),ce=T.ensureSingle(se,"text","",function(pe){pe.attr("data-notex",1)}),ye=T.ensureUniformFontSize(s,t.determineTextFont(F,J,P.font)),me=J._text||" ",fe=Z&&me.indexOf("<br>")===-1;ce.text(me).classed("slicetext",!0).attr("text-anchor",I?"end":U||fe?"start":"middle").call(r.font,ye).call(w.convertToTspans,s),J.textBB=r.bBox(ce.node()),J.transform=y(J,{fontSize:ye.size,isHeader:Z}),J.transform.fontSize=ye.size,d?ce.transition().attrTween("transform",function(pe){var ge=E(pe,a,K(),[m,h]);return function(ke){return A(ge(ke))}}):ce.attr("transform",A(J))}),ne}},83024:function(R){"use strict";R.exports=function C(e,_,T){var r;T.swapXY&&(r=e.x0,e.x0=e.y0,e.y0=r,r=e.x1,e.x1=e.y1,e.y1=r),T.flipX&&(r=e.x0,e.x0=_[0]-e.x1,e.x1=_[0]-r),T.flipY&&(r=e.y0,e.y0=_[1]-e.y1,e.y1=_[1]-r);var w=e.children;if(w)for(var b=0;b<w.length;b++)C(w[b],_,T)}},31991:function(R,C,e){"use strict";R.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(R){"use strict";R.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(R,C,e){"use strict";var _=e(3400),T=e(45392);R.exports=function(r,w){function b(c,o){return _.coerce(r,w,T,c,o)}b("treemapcolorway",w.colorway),b("extendtreemapcolors")}},13832:function(R,C,e){"use strict";var _=e(74148),T=e(83024);R.exports=function(r,w,b){var c,o=b.flipX,t=b.flipY,i=b.packing==="dice-slice",n=b.pad[t?"bottom":"top"],a=b.pad[o?"right":"left"],s=b.pad[o?"left":"right"],l=b.pad[t?"top":"bottom"];i&&(c=a,a=n,n=c,c=s,s=l,l=c);var u=_.treemap().tile(function(p,f){switch(p){case"squarify":return _.treemapSquarify.ratio(f);case"binary":return _.treemapBinary;case"dice":return _.treemapDice;case"slice":return _.treemapSlice;default:return _.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(a).paddingRight(s).paddingTop(n).paddingBottom(l).size(i?[w[1],w[0]]:w)(r);return(i||o||t)&&T(u,w,{swapXY:i,flipX:o,flipY:t}),u}},53264:function(R,C,e){"use strict";var _=e(95808),T=e(76477);R.exports=function(r,w,b,c){return _(r,w,b,c,{type:"treemap",drawDescendants:T})}},52960:function(R,C,e){"use strict";var _=e(33428),T=e(67756).qy,r=e(78176),w=e(3400),b=e(78048).TEXTPAD,c=e(98184).toMoveInsideBar,o=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function n(a){return r.isHierarchyRoot(a)?"":r.getPtId(a)}R.exports=function(a,s,l,u,p){var f=a._fullLayout,m=s[0],h=m.trace,g=h.type==="icicle",v=m.hierarchy,x=r.findEntryWithLevel(v,h.level),y=_.select(l),A=y.selectAll("g.pathbar"),d=y.selectAll("g.slice");if(!x)return A.remove(),void d.remove();var S=r.isHierarchyRoot(x),k=!f.uniformtext.mode&&r.hasTransition(u),E=r.getMaxDepth(h),L=f._size,O=h.domain,P=L.w*(O.x[1]-O.x[0]),F=L.h*(O.y[1]-O.y[0]),U=P,I=h.pathbar.thickness,N=h.marker.line.width+t.gapWithPathbar,W=h.pathbar.visible?h.pathbar.side.indexOf("bottom")>-1?F+N:-(I+N):0,B={x0:U,x1:U,y0:W,y1:W+I},V=function(we,Ee,Fe){var Le=h.tiling.pad,je=function(ot){return ot-Le<=Ee.x0},Ge=function(ot){return ot+Le>=Ee.x1},Je=function(ot){return ot-Le<=Ee.y0},rt=function(ot){return ot+Le>=Ee.y1};return we.x0===Ee.x0&&we.x1===Ee.x1&&we.y0===Ee.y0&&we.y1===Ee.y1?{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1}:{x0:je(we.x0-Le)?0:Ge(we.x0-Le)?Fe[0]:we.x0,x1:je(we.x1+Le)?0:Ge(we.x1+Le)?Fe[0]:we.x1,y0:Je(we.y0-Le)?0:rt(we.y0-Le)?Fe[1]:we.y0,y1:Je(we.y1+Le)?0:rt(we.y1+Le)?Fe[1]:we.y1}},q=null,ne={},$={},K=null,ee=function(we,Ee){return Ee?ne[n(we)]:$[n(we)]};m.hasMultipleRoots&&S&&E++,h._maxDepth=E,h._backgroundColor=f.paper_bgcolor,h._entryDepth=x.data.depth,h._atRootLevel=S;var J=-P/2+L.l+L.w*(O.x[1]+O.x[0])/2,Z=-F/2+L.t+L.h*(1-(O.y[1]+O.y[0])/2),te=function(we){return J+we},oe=function(we){return Z+we},se=oe(0),ce=te(0),ye=function(we){return ce+we},me=function(we){return se+we};function fe(we,Ee){return we+","+Ee}var pe=ye(0),ge=function(we){we.x=Math.max(pe,we.x)},ke=h.pathbar.edgeshape,Ce=h[g?"tiling":"marker"].pad,de=function(we){return h.textposition.indexOf(we)!==-1},ae=de("top"),re=de("left"),he=de("right"),Se=de("bottom"),xe=function(we,Ee){var Fe=we.x0,Le=we.x1,je=we.y0,Ge=we.y1,Je=we.textBB,rt=ae||Ee.isHeader&&!Se?"start":Se?"end":"middle",ot=de("right"),yt=de("left")||Ee.onPathbar?-1:ot?1:0;if(Ee.isHeader){if((Fe+=(g?Ce:Ce.l)-b)>=(Le-=(g?Ce:Ce.r)-b)){var _t=(Fe+Le)/2;Fe=_t,Le=_t}var mt;Se?je<(mt=Ge-(g?Ce:Ce.b))&&mt<Ge&&(je=mt):je<(mt=je+(g?Ce:Ce.t))&&mt<Ge&&(Ge=mt)}var tt=c(Fe,Le,je,Ge,Je,{isHorizontal:!1,constrained:!0,angle:0,anchor:rt,leftToRight:yt});return tt.fontSize=Ee.fontSize,tt.targetX=te(tt.targetX),tt.targetY=oe(tt.targetY),isNaN(tt.targetX)||isNaN(tt.targetY)?{}:(Fe!==Le&&je!==Ge&&o(h.type,tt,f),{scale:tt.scale,rotate:tt.rotate,textX:tt.textX,textY:tt.textY,anchorX:tt.anchorX,anchorY:tt.anchorY,targetX:tt.targetX,targetY:tt.targetY})},Te=function(we,Ee){for(var Fe,Le=0,je=we;!Fe&&Le<E;)Le++,(je=je.parent)?Fe=ee(je,Ee):Le=E;return Fe||{}},Ae=function(we,Ee,Fe,Le,je){var Ge,Je=ee(we,Ee);if(Je)Ge=Je;else if(Ee)Ge=B;else if(q)if(we.parent){var rt=K||Fe;rt&&!Ee?Ge=V(we,rt,Le):(Ge={},w.extendFlat(Ge,Te(we,Ee)))}else Ge=w.extendFlat({},we),g&&(je.orientation==="h"?je.flipX?Ge.x0=we.x1:Ge.x1=0:je.flipY?Ge.y0=we.y1:Ge.y1=0);else Ge={};return T(Ge,{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1})},Pe=function(we,Ee,Fe,Le){var je=ee(we,Ee),Ge={},Je=function(ot,yt,_t,mt){if(yt)return ne[n(v)]||B;var tt=$[h.level]||_t;return function(Qe){return Qe.data.depth-x.data.depth<E}(ot)?V(ot,tt,mt):{}}(we,Ee,Fe,Le);w.extendFlat(Ge,{transform:xe({x0:Je.x0,x1:Je.x1,y0:Je.y0,y1:Je.y1,textBB:we.textBB,_text:we._text},{isHeader:r.isHeader(we,h)})}),je?Ge=je:we.parent&&w.extendFlat(Ge,Te(we,Ee));var rt=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&o(h.type,rt,f),T(Ge,{transform:{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY}})},De=function(we,Ee,Fe,Le,je){var Ge=Le[0],Je=Le[1];k?we.exit().transition().each(function(){var rt=_.select(this);rt.select("path.surface").transition().attrTween("d",function(ot){var yt=function(_t,mt,tt,Qe){var Dt,zt=ee(_t,mt);if(mt)Dt=B;else{var pt=ee(x,mt);Dt=pt?V(_t,pt,Qe):{}}return T(zt,Dt)}(ot,Ee,0,[Ge,Je]);return function(_t){return je(yt(_t))}}),rt.select("g.slicetext").attr("opacity",0)}).remove():we.exit().remove()},ve=function(we){var Ee=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&o(h.type,Ee,f),w.getTextTransform({textX:Ee.textX,textY:Ee.textY,anchorX:Ee.anchorX,anchorY:Ee.anchorY,targetX:Ee.targetX,targetY:Ee.targetY,scale:Ee.scale,rotate:Ee.rotate})};k&&(A.each(function(we){ne[n(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&(ne[n(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate})}),d.each(function(we){$[n(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&($[n(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate}),!q&&r.isEntry(we)&&(q=we)})),K=p(a,s,x,d,{width:P,height:F,viewX:te,viewY:oe,pathSlice:function(we){var Ee=te(we.x0),Fe=te(we.x1),Le=oe(we.y0),je=oe(we.y1),Ge=Fe-Ee,Je=je-Le;if(!Ge||!Je)return"";var rt=h.marker.cornerradius||0,ot=Math.min(rt,Ge/2,Je/2);ot&&we.data&&we.data.data&&we.data.data.label&&(ae&&(ot=Math.min(ot,Ce.t)),re&&(ot=Math.min(ot,Ce.l)),he&&(ot=Math.min(ot,Ce.r)),Se&&(ot=Math.min(ot,Ce.b)));var yt=function(_t,mt){return ot?"a"+fe(ot,ot)+" 0 0 1 "+fe(_t,mt):""};return"M"+fe(Ee,Le+ot)+yt(ot,-ot)+"L"+fe(Fe-ot,Le)+yt(ot,ot)+"L"+fe(Fe,je-ot)+yt(-ot,ot)+"L"+fe(Ee+ot,je)+yt(-ot,-ot)+"Z"},toMoveInsideSlice:xe,prevEntry:q,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Pe,handleSlicesExit:De,hasTransition:k,strTransform:ve}),h.pathbar.visible?i(a,s,x,A,{barDifY:W,width:U,height:I,viewX:ye,viewY:me,pathSlice:function(we){var Ee=ye(Math.max(Math.min(we.x0,we.x0),0)),Fe=ye(Math.min(Math.max(we.x1,we.x1),U)),Le=me(we.y0),je=me(we.y1),Ge=I/2,Je={},rt={};Je.x=Ee,rt.x=Fe,Je.y=rt.y=(Le+je)/2;var ot={x:Ee,y:Le},yt={x:Fe,y:Le},_t={x:Fe,y:je},mt={x:Ee,y:je};return ke===">"?(ot.x-=Ge,yt.x-=Ge,_t.x-=Ge,mt.x-=Ge):ke==="/"?(_t.x-=Ge,mt.x-=Ge,Je.x-=Ge/2,rt.x-=Ge/2):ke==="\\"?(ot.x-=Ge,yt.x-=Ge,Je.x-=Ge/2,rt.x-=Ge/2):ke==="<"&&(Je.x-=Ge,rt.x-=Ge),ge(ot),ge(mt),ge(Je),ge(yt),ge(_t),ge(rt),"M"+fe(ot.x,ot.y)+"L"+fe(yt.x,yt.y)+"L"+fe(rt.x,rt.y)+"L"+fe(_t.x,_t.y)+"L"+fe(mt.x,mt.y)+"L"+fe(Je.x,Je.y)+"Z"},toMoveInsideSlice:xe,makeUpdateSliceInterpolator:Ae,makeUpdateTextInterpolator:Pe,handleSlicesExit:De,hasTransition:k,strTransform:ve}):A.remove()}},66192:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(3400),w=e(78176),b=e(82744).resizeText,c=e(60404);function o(t,i,n,a,s){var l,u,p=(s||{}).hovered,f=i.data.data,m=f.i,h=f.color,g=w.isHierarchyRoot(i),v=1;if(p)l=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(g&&h===n.root.color)v=100,l="rgba(0,0,0,0)",u=0;else if(l=r.castOption(n,m,"marker.line.color")||T.defaultLine,u=r.castOption(n,m,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var x=n.marker.depthfade;if(x){var y,A=T.combine(T.addOpacity(n._backgroundColor,.75),h);if(x===!0){var d=w.getMaxDepth(n);y=isFinite(d)?w.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else y=i.data.depth-n._entryDepth,n._atRootLevel||y++;if(y>0)for(var S=0;S<y;S++){var k=.5*S/y;h=T.combine(T.addOpacity(A,k),h)}}}t.call(c,i,n,a,h).style("stroke-width",u).call(T.stroke,l).style("opacity",v)}R.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(n){var a=_.select(this),s=n[0].trace;a.style("opacity",s.opacity),a.selectAll("path.surface").each(function(l){_.select(this).call(o,l,s,t,{hovered:!1})})})},styleOne:o}},13988:function(R,C,e){"use strict";var _=e(63188),T=e(92880).extendFlat,r=e(29736).axisHoverFormat;R.exports={y:_.y,x:_.x,x0:_.x0,y0:_.y0,xhoverformat:r("x"),yhoverformat:r("y"),name:T({},_.name,{}),orientation:T({},_.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_.fillcolor,points:T({},_.boxpoints,{}),jitter:T({},_.jitter,{}),pointpos:T({},_.pointpos,{}),width:T({},_.width,{}),marker:_.marker,text:_.text,hovertext:_.hovertext,hovertemplate:_.hovertemplate,quartilemethod:_.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:_.zorder}},67064:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(62555),w=e(63800),b=e(39032).BADNUM;function c(t,i,n){var a=i.max-i.min;if(!a)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,a/1e4);var s=n.length,l=_.stdev(n,s-1,i.mean);return Math.max(function(u,p,f){return 1.059*Math.min(p,f/1.349)*Math.pow(u,-.2)}(s,l,i.q3-i.q1),a/100)}function o(t,i,n,a){var s,l=t.spanmode,u=t.span||[],p=[i.min,i.max],f=[i.min-2*a,i.max+2*a];function m(g){var v=u[g],x=n.type==="multicategory"?n.r2c(v):n.d2c(v,0,t[i.valLetter+"calendar"]);return x===b?f[g]:x}var h={type:"linear",range:s=l==="soft"?f:l==="hard"?p:[m(0),m(1)]};return T.setConvert(h),h.cleanRange(),s}R.exports=function(t,i){var n=r(t,i);if(n[0].t.empty)return n;for(var a=t._fullLayout,s=T.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,p=0,f=0,m=0;m<n.length;m++){var h=n[m],g=h.pts.map(w.extractVal),v=h.bandwidth=c(i,h,g),x=h.span=o(i,h,s,v);if(h.min===h.max&&v===0)x=h.span=[h.min,h.max],h.density=[{v:1,t:x[0]}],h.bandwidth=v,p=Math.max(p,1);else{var y=x[1]-x[0],A=Math.ceil(y/(v/3)),d=y/A;if(!isFinite(d)||!isFinite(A))return _.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=w.makeKDE(h,i,g);h.density=new Array(A);for(var k=0,E=x[0];E<x[1]+d/2;k++,E+=d){var L=S(E);h.density[k]={v:L,t:E},p=Math.max(p,L)}}f=Math.max(f,g.length),l=Math.min(l,x[0]),u=Math.max(u,x[1])}var O=T.findExtremes(s,[l,u],{padded:!0});if(i._extremes[s._id]=O,i.width)n[0].t.maxKDE=p;else{var P=a._violinScaleGroupStats,F=i.scalegroup,U=P[F];U?(U.maxKDE=Math.max(U.maxKDE,p),U.maxCount=Math.max(U.maxCount,f)):P[F]={maxKDE:p,maxCount:f}}return n[0].t.labels.kde=_._(t,"kde:"),n}},14348:function(R,C,e){"use strict";var _=e(96404).setPositionOffset,T=["v","h"];R.exports=function(r,w){for(var b=r.calcdata,c=w.xaxis,o=w.yaxis,t=0;t<T.length;t++){for(var i=T[t],n=i==="h"?o:c,a=[],s=0;s<b.length;s++){var l=b[s],u=l[0].t,p=l[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==i||p.xaxis!==c._id||p.yaxis!==o._id||a.push(s)}_("violin",r,a,n)}}},36240:function(R,C,e){"use strict";var _=e(3400),T=e(76308),r=e(90624),w=e(13988);R.exports=function(b,c,o,t){function i(y,A){return _.coerce(b,c,w,y,A)}function n(y,A){return _.coerce2(b,c,w,y,A)}if(r.handleSampleDefaults(b,c,i,t),c.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",c.name),i("scalemode"));var a,s=i("span");Array.isArray(s)&&(a="manual"),i("spanmode",a);var l=i("line.color",(b.marker||{}).color||o),u=i("line.width"),p=i("fillcolor",T.addOpacity(c.line.color,.5));r.handlePointsDefaults(b,c,i,{prefix:""});var f=n("box.width"),m=n("box.fillcolor",p),h=n("box.line.color",l),g=n("box.line.width",u);i("box.visible",!!(f||m||h||g))||(c.box={visible:!1});var v=n("meanline.color",l),x=n("meanline.width",u);i("meanline.visible",!!(v||x))||(c.meanline={visible:!1}),i("quartilemethod"),i("zorder")}}},63800:function(R,C,e){"use strict";var _=e(3400),T=function(r){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*r*r)};C.makeKDE=function(r,w,b){var c=b.length,o=T,t=r.bandwidth,i=1/(c*t);return function(n){for(var a=0,s=0;s<c;s++)a+=o((n-b[s])/t);return i*a}},C.getPositionOnKdePath=function(r,w,b){var c,o;w.orientation==="h"?(c="y",o="x"):(c="x",o="y");var t=_.findPointOnPath(r.path,b,o,{pathLength:r.pathLength}),i=r.posCenterPx,n=t[c];return[n,w.side==="both"?2*i-n:i]},C.getKdeValue=function(r,w,b){var c=r.pts.map(C.extractVal);return C.makeKDE(r,w,c)(b)/r.posDensityScale},C.extractVal=function(r){return r.v}},78e3:function(R,C,e){"use strict";var _=e(76308),T=e(3400),r=e(54460),w=e(27576),b=e(63800);R.exports=function(c,o,t,i,n){n||(n={});var a,s,l=n.hoverLayer,u=c.cd,p=u[0].trace,f=p.hoveron,m=f.indexOf("violins")!==-1,h=f.indexOf("kde")!==-1,g=[];if(m||h){var v=w.hoverOnBoxes(c,o,t,i);if(h&&v.length>0){var x,y,A,d,S,k=c.xa,E=c.ya;p.orientation==="h"?(S=o,x="y",A=E,y="x",d=k):(S=t,x="x",A=k,y="y",d=E);var L=u[c.index];if(S>=L.span[0]&&S<=L.span[1]){var O=T.extendFlat({},c),P=d.c2p(S,!0),F=b.getKdeValue(L,p,S),U=b.getPositionOnKdePath(L,p,P),I=A._offset,N=A._length;O[x+"0"]=U[0],O[x+"1"]=U[1],O[y+"0"]=O[y+"1"]=P,O[y+"Label"]=y+": "+r.hoverLabelText(d,S,p[y+"hoverformat"])+", "+u[0].t.labels.kde+" "+F.toFixed(3);for(var W=0,B=0;B<v.length;B++)if(v[B].attr==="med"){W=B;break}O.spikeDistance=v[W].spikeDistance;var V=x+"Spike";O[V]=v[W][V],v[W].spikeDistance=void 0,v[W][V]=void 0,O.hovertemplate=!1,g.push(O),(s={})[x+"1"]=T.constrain(I+U[0],I,I+N),s[x+"2"]=T.constrain(I+U[1],I,I+N),s[y+"1"]=s[y+"2"]=d._offset+P}}m&&(g=g.concat(v))}f.indexOf("points")!==-1&&(a=w.hoverOnPoints(c,o,t));var q=l.selectAll(".violinline-"+p.uid).data(s?[0]:[]);return q.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),q.exit().remove(),q.attr(s).call(_.stroke,c.color),i==="closest"?a?[a]:g:(a&&g.push(a),g)}},22869:function(R,C,e){"use strict";R.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(R,C,e){"use strict";var _=e(16560),T=e(3400).extendFlat;R.exports={violinmode:T({},_.boxmode,{}),violingap:T({},_.boxgap,{}),violingroupgap:T({},_.boxgroupgap,{})}},8939:function(R,C,e){"use strict";var _=e(3400),T=e(98228),r=e(68832);R.exports=function(w,b,c){r._supply(w,b,c,function(o,t){return _.coerce(w,b,T,o,t)},"violin")}},5140:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(18728),b=e(52340),c=e(63800);R.exports=function(o,t,i,n){var a=o._context.staticPlot,s=o._fullLayout,l=t.xaxis,u=t.yaxis;function p(f,m){var h=b(f,{xaxis:l,yaxis:u,trace:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return r.smoothopen(h[0],1)}T.makeTraceGroups(n,i,"trace violins").each(function(f){var m=_.select(this),h=f[0],g=h.t,v=h.trace;if(v.visible!==!0||g.empty)m.remove();else{var x=g.bPos,y=g.bdPos,A=t[g.valLetter+"axis"],d=t[g.posLetter+"axis"],S=v.side==="both",k=S||v.side==="positive",E=S||v.side==="negative",L=m.selectAll("path.violin").data(T.identity);L.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","violin"),L.exit().remove(),L.each(function(B){var V,q,ne,$,K,ee,J,Z,te=_.select(this),oe=B.density,se=oe.length,ce=d.c2l(B.pos+x,!0),ye=d.l2p(ce);if(v.width)V=g.maxKDE/y;else{var me=s._violinScaleGroupStats[v.scalegroup];V=v.scalemode==="count"?me.maxKDE/y*(me.maxCount/B.pts.length):me.maxKDE/y}if(k){for(J=new Array(se),K=0;K<se;K++)(Z=J[K]={})[g.posLetter]=ce+oe[K].v/V,Z[g.valLetter]=A.c2l(oe[K].t,!0);q=p(J,v)}if(E){for(J=new Array(se),ee=0,K=se-1;ee<se;ee++,K--)(Z=J[ee]={})[g.posLetter]=ce-oe[K].v/V,Z[g.valLetter]=A.c2l(oe[K].t,!0);ne=p(J,v)}if(S)$=q+"L"+ne.substr(1)+"Z";else{var fe=[ye,A.c2p(oe[0].t)],pe=[ye,A.c2p(oe[se-1].t)];v.orientation==="h"&&(fe.reverse(),pe.reverse()),$=k?"M"+fe+"L"+q.substr(1)+"L"+pe:"M"+pe+"L"+ne.substr(1)+"L"+fe}te.attr("d",$),B.posCenterPx=ye,B.posDensityScale=V*y,B.path=te.node(),B.pathLength=B.path.getTotalLength()/(S?2:1)});var O,P,F,U=v.box,I=U.width,N=(U.line||{}).width;S?(O=y*I,P=0):k?(O=[0,y*I/2],P=N*{x:1,y:-1}[g.posLetter]):(O=[y*I/2,0],P=N*{x:-1,y:1}[g.posLetter]),w.plotBoxAndWhiskers(m,{pos:d,val:A},v,{bPos:x,bdPos:O,bPosPxOffset:P}),w.plotBoxMean(m,{pos:d,val:A},v,{bPos:x,bdPos:O,bPosPxOffset:P}),!v.box.visible&&v.meanline.visible&&(F=T.identity);var W=m.selectAll("path.meanline").data(F||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",a?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(B){var V=A.c2p(B.mean,!0),q=c.getPositionOnKdePath(B,v,V);_.select(this).attr("d",v.orientation==="h"?"M"+V+","+q[0]+"V"+q[1]:"M"+q[0]+","+V+"H"+q[1])}),w.plotPoints(m,{x:l,y:u},v,g)}})}},95908:function(R,C,e){"use strict";var _=e(33428),T=e(76308),r=e(49224).stylePoints;R.exports=function(w){var b=_.select(w).selectAll("g.trace.violins");b.style("opacity",function(c){return c[0].trace.opacity}),b.each(function(c){var o=c[0].trace,t=_.select(this),i=o.box||{},n=i.line||{},a=o.meanline||{},s=a.width;t.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(T.stroke,o.line.color).call(T.fill,o.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(T.stroke,n.color).call(T.fill,i.fillcolor);var l={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};t.selectAll("path.mean").style(l).call(T.stroke,a.color),t.selectAll("path.meanline").style(l).call(T.stroke,a.color),r(t,o,w)})}},58168:function(R,C,e){"use strict";var _=e(49084),T=e(50048),r=e(16716),w=e(45464),b=e(92880).extendFlat,c=e(67824).overrideAll,o=R.exports=c(b({x:T.x,y:T.y,z:T.z,value:T.value,isomin:T.isomin,isomax:T.isomax,surface:T.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:T.slices,caps:T.caps,text:T.text,hovertext:T.hovertext,xhoverformat:T.xhoverformat,yhoverformat:T.yhoverformat,zhoverformat:T.zhoverformat,valuehoverformat:T.valuehoverformat,hovertemplate:T.hovertemplate},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:T.colorbar,opacity:T.opacity,opacityscale:r.opacityscale,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:b({},w.hoverinfo),showlegend:b({},w.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},91976:function(R,C,e){"use strict";var _=e(67792).gl_mesh3d,T=e(33040).parseColorScale,r=e(3400).isArrayOrTypedArray,w=e(43080),b=e(8932).extractOpts,c=e(52094),o=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(a,s,l){this.scene=a,this.uid=l,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(a){if(a.object===this.mesh){var s=a.data.index,l=this.data._meshX[s],u=this.data._meshY[s],p=this.data._meshZ[s],f=this.data._Ys.length,m=this.data._Zs.length,h=o(l,this.data._Xs).id,g=o(u,this.data._Ys).id,v=o(p,this.data._Zs).id,x=a.index=v+m*g+m*f*h;a.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var y=this.data.hovertext||this.data.text;return r(y)&&y[x]!==void 0?a.textLabel=y[x]:y&&(a.textLabel=y),!0}},n.update=function(a){var s=this.scene,l=s.fullSceneLayout;function u(m,h,g,v){return h.map(function(x){return m.d2l(x,0,v)*g})}this.data=t(a);var p={positions:c(u(l.xaxis,a._meshX,s.dataScale[0],a.xcalendar),u(l.yaxis,a._meshY,s.dataScale[1],a.ycalendar),u(l.zaxis,a._meshZ,s.dataScale[2],a.zcalendar)),cells:c(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:w(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},f=b(a);p.vertexIntensity=a._meshIntensity,p.vertexIntensityBounds=[f.min,f.max],p.colormap=T(a),this.mesh.update(p)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},R.exports=function(a,s){var l=a.glplot.gl,u=_({gl:l}),p=new i(a,u,s.uid);return u._trace=p,p.update(s),a.glplot.add(u),p}},12448:function(R,C,e){"use strict";var _=e(3400),T=e(58168),r=e(70548).supplyIsoDefaults,w=e(60192).opacityscaleDefaults;R.exports=function(b,c,o,t){function i(n,a){return _.coerce(b,c,T,n,a)}r(b,c,o,t,i),w(b,c,t,i)}},67776:function(R,C,e){"use strict";R.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(R,C,e){"use strict";var _=e(20832),T=e(52904).line,r=e(45464),w=e(29736).axisHoverFormat,b=e(21776).Ks,c=e(21776).Gw,o=e(10213),t=e(92880).extendFlat,i=e(76308);function n(a){return{marker:{color:t({},_.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},_.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},_.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}R.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:w("x"),yhoverformat:w("y"),hovertext:_.hovertext,hovertemplate:b({},{keys:o.eventDataKeys}),hoverinfo:t({},r.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:o.eventDataKeys.concat(["label"])}),text:_.text,textposition:_.textposition,insidetextanchor:_.insidetextanchor,textangle:_.textangle,textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:_.orientation,offset:_.offset,width:_.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},T.color,{dflt:i.defaultLine}),width:t({},T.width,{editType:"plot"}),dash:T.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,zorder:_.zorder}},73540:function(R,C,e){"use strict";var _=e(54460),T=e(1220),r=e(3400).mergeArray,w=e(4500),b=e(39032).BADNUM;function c(t){return t==="a"||t==="absolute"}function o(t){return t==="t"||t==="total"}R.exports=function(t,i){var n,a,s,l,u,p,f=_.getFromId(t,i.xaxis||"x"),m=_.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=f.makeCalcdata(i,"x"),s=m.makeCalcdata(i,"y"),l=T(i,m,"y",s),u=!!i.yperiodalignment,p="y"):(n=m.makeCalcdata(i,"y"),s=f.makeCalcdata(i,"x"),l=T(i,f,"x",s),u=!!i.xperiodalignment,p="x"),a=l.vals;for(var h,g=Math.min(a.length,n.length),v=new Array(g),x=0,y=!1,A=0;A<g;A++){var d=n[A]||0,S=!1;(n[A]!==b||o(i.measure[A])||c(i.measure[A]))&&A+1<g&&(n[A+1]!==b||o(i.measure[A+1])||c(i.measure[A+1]))&&(S=!0);var k=v[A]={i:A,p:a[A],s:d,rawS:d,cNext:S};c(i.measure[A])?(x=k.s,k.isSum=!0,k.dir="totals",k.s=x):o(i.measure[A])?(k.isSum=!0,k.dir="totals",k.s=x):(k.isSum=!1,k.dir=k.rawS<0?"decreasing":"increasing",h=k.s,k.s=x+h,x+=h),k.dir==="totals"&&(y=!0),u&&(v[A].orig_p=s[A],v[A][p+"End"]=l.ends[A],v[A][p+"Start"]=l.starts[A]),i.ids&&(k.id=String(i.ids[A])),k.v=(i.base||0)+x}return v.length&&(v[0].hasTotals=y),r(i.text,v,"tx"),r(i.hovertext,v,"htx"),w(v,i),v}},10213:function(R){"use strict";R.exports={eventDataKeys:["initial","delta","final"]}},50152:function(R,C,e){"use strict";var _=e(96376).setGroupPositions;R.exports=function(T,r){var w,b,c=T._fullLayout,o=T._fullData,t=T.calcdata,i=r.xaxis,n=r.yaxis,a=[],s=[],l=[];for(b=0;b<o.length;b++){var u=o[b];u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="waterfall"&&(w=t[b],u.orientation==="h"?l.push(w):s.push(w),a.push(w))}var p={mode:c.waterfallmode,norm:c.waterfallnorm,gap:c.waterfallgap,groupgap:c.waterfallgroupgap};for(_(T,i,n,s,p),_(T,n,i,l,p),b=0;b<a.length;b++){w=a[b];for(var f=0;f<w.length;f++){var m=w[f];m.isSum===!1&&(m.s0+=f===0?0:w[f-1].s),f+1<w.length&&(w[f].nextP0=w[f+1].p0,w[f].nextS0=w[f+1].s0)}}}},24224:function(R,C,e){"use strict";var _=e(3400),T=e(20011),r=e(31508).handleText,w=e(43980),b=e(31147),c=e(65776),o=e(76308),t=e(48164),i=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function a(s,l,u){s(l+".marker.color",u),s(l+".marker.line.color",o.defaultLine),s(l+".marker.line.width")}R.exports={supplyDefaults:function(s,l,u,p){function f(h,g){return _.coerce(s,l,c,h,g)}if(w(s,l,p,f)){b(s,l,p,f),f("xhoverformat"),f("yhoverformat"),f("measure"),f("orientation",l.x&&!l.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate");var m=f("textposition");r(s,l,p,f,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(f("texttemplate"),l.texttemplate||f("textinfo")),a(f,"increasing",i),a(f,"decreasing",n),a(f,"totals","#4499FF"),f("connector.visible")&&(f("connector.mode"),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash"))),f("zorder")}else l.visible=!1},crossTraceDefaults:function(s,l){var u,p;function f(h){return _.coerce(p._input,p,c,h)}if(l.waterfallmode==="group")for(var m=0;m<s.length;m++)u=(p=s[m])._input,T(u,p,l,f)}}},53256:function(R){"use strict";R.exports=function(C,e){return C.x="xVal"in e?e.xVal:e.x,C.y="yVal"in e?e.yVal:e.y,"initial"in e&&(C.initial=e.initial),"delta"in e&&(C.delta=e.delta),"final"in e&&(C.final=e.final),e.xa&&(C.xaxis=e.xa),e.ya&&(C.yaxis=e.ya),C}},94196:function(R,C,e){"use strict";var _=e(54460).hoverLabelText,T=e(76308).opacity,r=e(63400).hoverOnBars,w=e(48164),b=w.INCREASING.SYMBOL,c=w.DECREASING.SYMBOL;R.exports=function(o,t,i,n,a){var s=r(o,t,i,n,a);if(s){var l=s.cd,u=l[0].trace,p=u.orientation==="h",f=p?"x":"y",m=p?o.xa:o.ya,h=l[s.index],g=h.isSum?h.b+h.s:h.rawS;s.initial=h.b+h.s-g,s.delta=g,s.final=s.initial+s.delta;var v=k(Math.abs(s.delta));s.deltaLabel=g<0?"("+v+")":v,s.finalLabel=k(s.final),s.initialLabel=k(s.initial);var x=h.hi||u.hoverinfo,y=[];if(x&&x!=="none"&&x!=="skip"){var A=x==="all",d=x.split("+"),S=function(E){return A||d.indexOf(E)!==-1};h.isSum||(!S("final")||S(p?"x":"y")||y.push(s.finalLabel),S("delta")&&(g<0?y.push(s.deltaLabel+" "+c):y.push(s.deltaLabel+" "+b)),S("initial")&&y.push("Initial: "+s.initialLabel))}return y.length&&(s.extraText=y.join("<br>")),s.color=function(E,L){var O=E[L.dir].marker,P=O.color,F=O.line.color,U=O.line.width;return T(P)?P:T(F)&&U?F:void 0}(u,h),[s]}function k(E){return _(m,E,u[f+"hoverformat"])}}},95952:function(R,C,e){"use strict";R.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(R){"use strict";R.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(R,C,e){"use strict";var _=e(3400),T=e(91352);R.exports=function(r,w,b){var c=!1;function o(n,a){return _.coerce(r,w,T,n,a)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){c=!0;break}}c&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},64488:function(R,C,e){"use strict";var _=e(33428),T=e(3400),r=e(43616),w=e(39032).BADNUM,b=e(98184),c=e(82744).clearMinTextSize;R.exports=function(o,t,i,n){var a=o._fullLayout;c("waterfall",a),b.plot(o,t,i,n,{mode:a.waterfallmode,norm:a.waterfallmode,gap:a.waterfallgap,groupgap:a.waterfallgroupgap}),function(s,l,u,p){var f=l.xaxis,m=l.yaxis;T.makeTraceGroups(p,u,"trace bars").each(function(h){var g=_.select(this),v=h[0].trace,x=T.ensureSingle(g,"g","lines");if(v.connector&&v.connector.visible){var y=v.orientation==="h",A=v.connector.mode,d=x.selectAll("g.line").data(T.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(k,E){if(E===S-1||k.cNext){var L=function(U,I,N,W){var B=[],V=[],q=W?I:N,ne=W?N:I;return B[0]=q.c2p(U.s0,!0),V[0]=ne.c2p(U.p0,!0),B[1]=q.c2p(U.s1,!0),V[1]=ne.c2p(U.p1,!0),B[2]=q.c2p(U.nextS0,!0),V[2]=ne.c2p(U.nextP0,!0),W?[B,V]:[V,B]}(k,f,m,y),O=L[0],P=L[1],F="";O[0]!==w&&P[0]!==w&&O[1]!==w&&P[1]!==w&&(A==="spanning"&&!k.isSum&&E>0&&(F+=y?"M"+O[0]+","+P[1]+"V"+P[0]:"M"+O[1]+","+P[0]+"H"+O[0]),A!=="between"&&(k.isSum||E<S-1)&&(F+=y?"M"+O[1]+","+P[0]+"V"+P[1]:"M"+O[0]+","+P[1]+"H"+O[1]),O[2]!==w&&P[2]!==w&&(F+=y?"M"+O[1]+","+P[1]+"V"+P[2]:"M"+O[1]+","+P[1]+"H"+O[2])),F===""&&(F="M0,0Z"),T.ensureSingle(_.select(this),"path").attr("d",F).call(r.setClipUrl,l.layerClipId,s)}})}else x.remove()})}(o,t,i,n)}},12252:function(R,C,e){"use strict";var _=e(33428),T=e(43616),r=e(76308),w=e(13448).DESELECTDIM,b=e(60100),c=e(82744).resizeText,o=b.styleTextPoints;R.exports={style:function(t,i,n){var a=n||_.select(t).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");c(t,a,"waterfall"),a.style("opacity",function(s){return s[0].trace.opacity}),a.each(function(s){var l=_.select(this),u=s[0].trace;l.selectAll(".point > path").each(function(p){if(!p.isBlank){var f=u[p.dir].marker;_.select(this).call(r.fill,f.color).call(r.stroke,f.line.color).call(T.dashLine,f.line.dash,f.line.width).style("opacity",u.selectedpoints&&!p.selected?w:1)}}),o(l,u,t),l.selectAll(".lines").each(function(){var p=u.connector.line;T.lineGroupStyle(_.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},84224:function(R,C,e){"use strict";var _=e(54460),T=e(3400),r=e(73060),w=e(60468).W,b=e(39032).BADNUM;C.moduleType="transform",C.name="aggregate";var c=C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=c.aggregations;function t(s,l,u,p){if(p.enabled){for(var f=p.target,m=T.nestedProperty(l,f),h=m.get(),g=function(y,A){var d=y.func,S=A.d2c,k=A.c2d;switch(d){case"count":return i;case"first":return n;case"last":return a;case"sum":return function(E,L){for(var O=0,P=0;P<L.length;P++){var F=S(E[L[P]]);F!==b&&(O+=F)}return k(O)};case"avg":return function(E,L){for(var O=0,P=0,F=0;F<L.length;F++){var U=S(E[L[F]]);U!==b&&(O+=U,P++)}return P?k(O/P):b};case"min":return function(E,L){for(var O=1/0,P=0;P<L.length;P++){var F=S(E[L[P]]);F!==b&&(O=Math.min(O,F))}return O===1/0?b:k(O)};case"max":return function(E,L){for(var O=-1/0,P=0;P<L.length;P++){var F=S(E[L[P]]);F!==b&&(O=Math.max(O,F))}return O===-1/0?b:k(O)};case"range":return function(E,L){for(var O=1/0,P=-1/0,F=0;F<L.length;F++){var U=S(E[L[F]]);U!==b&&(O=Math.min(O,U),P=Math.max(P,U))}return P===-1/0||O===1/0?b:k(P-O)};case"change":return function(E,L){var O=S(E[L[0]]),P=S(E[L[L.length-1]]);return O===b||P===b?b:k(P-O)};case"median":return function(E,L){for(var O=[],P=0;P<L.length;P++){var F=S(E[L[P]]);F!==b&&O.push(F)}if(!O.length)return b;O.sort(T.sorterAsc);var U=(O.length-1)/2;return k((O[Math.floor(U)]+O[Math.ceil(U)])/2)};case"mode":return function(E,L){for(var O={},P=0,F=b,U=0;U<L.length;U++){var I=S(E[L[U]]);if(I!==b){var N=O[I]=(O[I]||0)+1;N>P&&(P=N,F=I)}}return P?k(F):b};case"rms":return function(E,L){for(var O=0,P=0,F=0;F<L.length;F++){var U=S(E[L[F]]);U!==b&&(O+=U*U,P++)}return P?k(Math.sqrt(O/P)):b};case"stddev":return function(E,L){var O,P=0,F=0,U=1,I=b;for(O=0;O<L.length&&I===b;O++)I=S(E[L[O]]);if(I===b)return b;for(;O<L.length;O++){var N=S(E[L[O]]);if(N!==b){var W=N-I;P+=W,F+=W*W,U++}}var B=y.funcmode==="sample"?U-1:U;return B?Math.sqrt((F-P*P/U)/B):0}}}(p,_.getDataConversions(s,l,f,h)),v=new Array(u.length),x=0;x<u.length;x++)v[x]=g(h,u[x]);m.set(v),p.func==="count"&&T.pushUnique(l._arrayAttrs,f)}}function i(s,l){return l.length}function n(s,l){return s[l[0]]}function a(s,l){return s[l[l.length-1]]}C.supplyDefaults=function(s,l){var u,p={};function f(k,E){return T.coerce(s,p,c,k,E)}if(!f("enabled"))return p;var m=r.findArrayAttributes(l),h={};for(u=0;u<m.length;u++)h[m[u]]=1;var g=f("groups");if(!Array.isArray(g)){if(!h[g])return p.enabled=!1,p;h[g]=0}var v,x=s.aggregations||[],y=p.aggregations=new Array(x.length);function A(k,E){return T.coerce(x[u],v,o,k,E)}for(u=0;u<x.length;u++){v={_index:u};var d=A("target"),S=A("func");A("enabled")&&d&&(h[d]||S==="count"&&h[d]===void 0)?(S==="stddev"&&A("funcmode"),h[d]=0,y[u]=v):y[u]={enabled:!1,_index:u}}for(u=0;u<m.length;u++)h[m[u]]&&y.push({target:m[u],func:o.func.dflt,enabled:!0,_index:-1});return p},C.calcTransform=function(s,l,u){if(u.enabled){var p=u.groups,f=T.getTargetArray(l,{target:p});if(f){var m,h,g,v,x={},y={},A=[],d=w(l.transforms,u),S=f.length;for(l._length&&(S=Math.min(S,l._length)),m=0;m<S;m++)(g=x[h=f[m]])===void 0?(x[h]=A.length,v=[m],A.push(v),y[x[h]]=d(m)):(A[g].push(m),y[x[h]]=(y[x[h]]||[]).concat(d(m)));u._indexToPoints=y;var k=u.aggregations;for(m=0;m<k.length;m++)t(s,l,A,k[m]);typeof p=="string"&&t(s,l,A,{target:p,func:"first",enabled:!0}),l._length=A.length}}}},76744:function(R,C,e){"use strict";var _=e(3400),T=e(24040),r=e(54460),w=e(60468).W,b=e(69104),c=b.COMPARISON_OPS,o=b.INTERVAL_OPS,t=b.SET_OPS;C.moduleType="transform",C.name="filter",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(c).concat(o).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},C.supplyDefaults=function(i){var n={};function a(u,p){return _.coerce(i,n,C.attributes,u,p)}if(a("enabled")){var s=a("target");if(_.isArrayOrTypedArray(s)&&s.length===0)return n.enabled=!1,n;a("preservegaps"),a("operation"),a("value");var l=T.getComponentMethod("calendars","handleDefaults");l(i,n,"valuecalendar",null),l(i,n,"targetcalendar",null)}return n},C.calcTransform=function(i,n,a){if(a.enabled){var s=_.getTargetArray(n,a);if(s){var l=a.target,u=s.length;n._length&&(u=Math.min(u,n._length));var p=a.targetcalendar,f=n._arrayAttrs,m=a.preservegaps;if(typeof l=="string"){var h=_.nestedProperty(n,l+"calendar").get();h&&(p=h)}var g,v,x=function(L,O,P){var F=L.operation,U=L.value,I=_.isArrayOrTypedArray(U);function N(q){return q.indexOf(F)!==-1}var W,B=function(q){return O(q,0,L.valuecalendar)},V=function(q){return O(q,0,P)};switch(N(c)?W=B(I?U[0]:U):N(o)?W=I?[B(U[0]),B(U[1])]:[B(U),B(U)]:N(t)&&(W=I?U.map(B):[B(U)]),F){case"=":return function(q){return V(q)===W};case"!=":return function(q){return V(q)!==W};case"<":return function(q){return V(q)<W};case"<=":return function(q){return V(q)<=W};case">":return function(q){return V(q)>W};case">=":return function(q){return V(q)>=W};case"[]":return function(q){var ne=V(q);return ne>=W[0]&&ne<=W[1]};case"()":return function(q){var ne=V(q);return ne>W[0]&&ne<W[1]};case"[)":return function(q){var ne=V(q);return ne>=W[0]&&ne<W[1]};case"(]":return function(q){var ne=V(q);return ne>W[0]&&ne<=W[1]};case"][":return function(q){var ne=V(q);return ne<=W[0]||ne>=W[1]};case")(":return function(q){var ne=V(q);return ne<W[0]||ne>W[1]};case"](":return function(q){var ne=V(q);return ne<=W[0]||ne>W[1]};case")[":return function(q){var ne=V(q);return ne<W[0]||ne>=W[1]};case"{}":return function(q){return W.indexOf(V(q))!==-1};case"}{":return function(q){return W.indexOf(V(q))===-1}}}(a,r.getDataToCoordFunc(i,n,l,s),p),y={},A={},d=0;m?(g=function(L){y[L.astr]=_.extendDeep([],L.get()),L.set(new Array(u))},v=function(L,O){var P=y[L.astr][O];L.get()[O]=P}):(g=function(L){y[L.astr]=_.extendDeep([],L.get()),L.set([])},v=function(L,O){var P=y[L.astr][O];L.get().push(P)}),E(g);for(var S=w(n.transforms,a),k=0;k<u;k++)x(s[k])?(E(v,k),A[d++]=S(k)):m&&d++;a._indexToPoints=A,n._length=d}}function E(L,O){for(var P=0;P<f.length;P++)L(_.nestedProperty(n,f[P]),O)}}},32028:function(R,C,e){"use strict";var _=e(3400),T=e(73060),r=e(7316),w=e(60468).W;function b(c,o){var t,i,n,a,s,l,u,p,f,m,h=o.transform,g=o.transformIndex,v=c.transforms[g].groups,x=w(c.transforms,h);if(!_.isArrayOrTypedArray(v)||v.length===0)return[c];var y=_.filterUnique(v),A=new Array(y.length),d=v.length,S=T.findArrayAttributes(c),k=h.styles||[],E={};for(t=0;t<k.length;t++)E[k[t].target]=k[t].value;h.styles&&(m=_.keyedContainer(h,"styles","target","value.name"));var L={},O={};for(t=0;t<y.length;t++){L[l=y[t]]=t,O[l]=0,(u=A[t]=_.extendDeepNoArrays({},c))._group=l,u.transforms[g]._indexToPoints={};var P=null;for(m&&(P=m.get(l)),u.name=P||P===""?P:_.templateString(h.nameformat,{trace:c.name,group:l}),p=u.transforms,u.transforms=[],i=0;i<p.length;i++)u.transforms[i]=_.extendDeepNoArrays({},p[i]);for(i=0;i<S.length;i++)_.nestedProperty(u,S[i]).set([])}for(n=0;n<S.length;n++){for(a=S[n],i=0,f=[];i<y.length;i++)f[i]=_.nestedProperty(A[i],a).get();for(s=_.nestedProperty(c,a).get(),i=0;i<d;i++)f[L[v[i]]].push(s[i])}for(i=0;i<d;i++)(u=A[L[v[i]]]).transforms[g]._indexToPoints[O[v[i]]]=x(i),O[v[i]]++;for(t=0;t<y.length;t++)l=y[t],u=A[t],r.clearExpandedTraceDefaultColors(u),u=_.extendDeepNoArrays(u,E[l]||{});return A}C.moduleType="transform",C.name="groupby",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},C.supplyDefaults=function(c,o,t){var i,n={};function a(f,m){return _.coerce(c,n,C.attributes,f,m)}if(!a("enabled"))return n;a("groups"),a("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=c.styles,l=n.styles=[];if(s)for(i=0;i<s.length;i++){var u=l[i]={};_.coerce(s[i],l[i],C.attributes.styles,"target");var p=_.coerce(s[i],l[i],C.attributes.styles,"value");_.isPlainObject(p)?u.value=_.extendDeep({},p):p&&delete u.value}return n},C.transform=function(c,o){var t,i,n,a=[];for(i=0;i<c.length;i++)for(t=b(c[i],o),n=0;n<t.length;n++)a.push(t[n]);return a}},60468:function(R,C){"use strict";C.W=function(e,_){for(var T,r,w=0;w<e.length&&(T=e[w])!==_;w++)T._indexToPoints&&T.enabled!==!1&&(r=T._indexToPoints);var b=r?function(c){return r[c]}:function(c){return[c]};return b}},76272:function(R,C,e){"use strict";var _=e(3400),T=e(54460),r=e(60468).W,w=e(39032).BADNUM;C.moduleType="transform",C.name="sort",C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},C.supplyDefaults=function(b){var c={};function o(t,i){return _.coerce(b,c,C.attributes,t,i)}return o("enabled")&&(o("target"),o("order")),c},C.calcTransform=function(b,c,o){if(o.enabled){var t=_.getTargetArray(c,o);if(t){var i=o.target,n=t.length;c._length&&(n=Math.min(n,c._length));var a,s,l=c._arrayAttrs,u=function(v,x,y,A){var d,S=new Array(A),k=new Array(A);for(d=0;d<A;d++)S[d]={v:x[d],i:d};for(S.sort(function(E,L){switch(E.order){case"ascending":return function(O,P){var F=L(O.v),U=L(P.v);return F===w?1:U===w?-1:F-U};case"descending":return function(O,P){var F=L(O.v),U=L(P.v);return F===w?1:U===w?-1:U-F}}}(v,y)),d=0;d<A;d++)k[d]=S[d].i;return k}(o,t,T.getDataToCoordFunc(b,c,i,t),n),p=r(c.transforms,o),f={};for(a=0;a<l.length;a++){var m=_.nestedProperty(c,l[a]),h=m.get(),g=new Array(n);for(s=0;s<n;s++)g[s]=h[u[s]];m.set(g)}for(s=0;s<n;s++)f[s]=p(u[s]);o._indexToPoints=f,c._length=n}}}},25788:function(R,C){"use strict";C.version="2.34.0"},67792:function(R,C,e){var _=e(4168);(function(){var T={1964:function(c,o,t){c.exports={alpha_shape:t(3502),convex_hull:t(7352),delaunay_triangulate:t(7642),gl_cone3d:t(6405),gl_error3d:t(9165),gl_heatmap2d:t(2510),gl_line3d:t(5714),gl_mesh3d:t(7201),gl_plot2d:t(1850),gl_plot3d:t(4100),gl_pointcloud2d:t(4696),gl_scatter3d:t(8418),gl_select_box:t(3161),gl_spikes2d:t(4098),gl_streamtube3d:t(7815),gl_surface3d:t(9499),ndarray:t(9618),ndarray_linear_interpolate:t(4317)}},4793:function(c,o,t){"use strict";function i(ve,we){for(var Ee=0;Ee<we.length;Ee++){var Fe=we[Ee];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(ve,n(Fe.key),Fe)}}function n(ve){var we=function(Ee,Fe){if(u(Ee)!="object"||!Ee)return Ee;var Le=Ee[Symbol.toPrimitive];if(Le!==void 0){var je=Le.call(Ee,"string");if(u(je)!="object")return je;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ee)}(ve);return u(we)=="symbol"?we:we+""}function a(){try{var ve=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a=function(){return!!ve})()}function s(ve){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(we){return we.__proto__||Object.getPrototypeOf(we)},s(ve)}function l(ve,we){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,Fe){return Ee.__proto__=Fe,Ee},l(ve,we)}function u(ve){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},u(ve)}var p=t(7507),f=t(3778),m=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.hp=v,o.IS=50;var h=2147483647;function g(ve){if(ve>h)throw new RangeError('The value "'+ve+'" is invalid for option "size"');var we=new Uint8Array(ve);return Object.setPrototypeOf(we,v.prototype),we}function v(ve,we,Ee){if(typeof ve=="number"){if(typeof we=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(ve)}return x(ve,we,Ee)}function x(ve,we,Ee){if(typeof ve=="string")return function(je,Ge){if(typeof Ge=="string"&&Ge!==""||(Ge="utf8"),!v.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);var Je=0|E(je,Ge),rt=g(Je),ot=rt.write(je,Ge);return ot!==Je&&(rt=rt.slice(0,ot)),rt}(ve,we);if(ArrayBuffer.isView(ve))return function(je){if(xe(je,Uint8Array)){var Ge=new Uint8Array(je);return S(Ge.buffer,Ge.byteOffset,Ge.byteLength)}return d(je)}(ve);if(ve==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(ve));if(xe(ve,ArrayBuffer)||ve&&xe(ve.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(ve,SharedArrayBuffer)||ve&&xe(ve.buffer,SharedArrayBuffer)))return S(ve,we,Ee);if(typeof ve=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Fe=ve.valueOf&&ve.valueOf();if(Fe!=null&&Fe!==ve)return v.from(Fe,we,Ee);var Le=function(je){if(v.isBuffer(je)){var Ge=0|k(je.length),Je=g(Ge);return Je.length===0||je.copy(Je,0,0,Ge),Je}return je.length!==void 0?typeof je.length!="number"||Te(je.length)?g(0):d(je):je.type==="Buffer"&&Array.isArray(je.data)?d(je.data):void 0}(ve);if(Le)return Le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ve[Symbol.toPrimitive]=="function")return v.from(ve[Symbol.toPrimitive]("string"),we,Ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(ve))}function y(ve){if(typeof ve!="number")throw new TypeError('"size" argument must be of type number');if(ve<0)throw new RangeError('The value "'+ve+'" is invalid for option "size"')}function A(ve){return y(ve),g(ve<0?0:0|k(ve))}function d(ve){for(var we=ve.length<0?0:0|k(ve.length),Ee=g(we),Fe=0;Fe<we;Fe+=1)Ee[Fe]=255&ve[Fe];return Ee}function S(ve,we,Ee){if(we<0||ve.byteLength<we)throw new RangeError('"offset" is outside of buffer bounds');if(ve.byteLength<we+(Ee||0))throw new RangeError('"length" is outside of buffer bounds');var Fe;return Fe=we===void 0&&Ee===void 0?new Uint8Array(ve):Ee===void 0?new Uint8Array(ve,we):new Uint8Array(ve,we,Ee),Object.setPrototypeOf(Fe,v.prototype),Fe}function k(ve){if(ve>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|ve}function E(ve,we){if(v.isBuffer(ve))return ve.length;if(ArrayBuffer.isView(ve)||xe(ve,ArrayBuffer))return ve.byteLength;if(typeof ve!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(ve));var Ee=ve.length,Fe=arguments.length>2&&arguments[2]===!0;if(!Fe&&Ee===0)return 0;for(var Le=!1;;)switch(we){case"ascii":case"latin1":case"binary":return Ee;case"utf8":case"utf-8":return re(ve).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Ee;case"hex":return Ee>>>1;case"base64":return he(ve).length;default:if(Le)return Fe?-1:re(ve).length;we=(""+we).toLowerCase(),Le=!0}}function L(ve,we,Ee){var Fe=!1;if((we===void 0||we<0)&&(we=0),we>this.length||((Ee===void 0||Ee>this.length)&&(Ee=this.length),Ee<=0)||(Ee>>>=0)<=(we>>>=0))return"";for(ve||(ve="utf8");;)switch(ve){case"hex":return ee(this,we,Ee);case"utf8":case"utf-8":return q(this,we,Ee);case"ascii":return $(this,we,Ee);case"latin1":case"binary":return K(this,we,Ee);case"base64":return V(this,we,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,we,Ee);default:if(Fe)throw new TypeError("Unknown encoding: "+ve);ve=(ve+"").toLowerCase(),Fe=!0}}function O(ve,we,Ee){var Fe=ve[we];ve[we]=ve[Ee],ve[Ee]=Fe}function P(ve,we,Ee,Fe,Le){if(ve.length===0)return-1;if(typeof Ee=="string"?(Fe=Ee,Ee=0):Ee>2147483647?Ee=2147483647:Ee<-2147483648&&(Ee=-2147483648),Te(Ee=+Ee)&&(Ee=Le?0:ve.length-1),Ee<0&&(Ee=ve.length+Ee),Ee>=ve.length){if(Le)return-1;Ee=ve.length-1}else if(Ee<0){if(!Le)return-1;Ee=0}if(typeof we=="string"&&(we=v.from(we,Fe)),v.isBuffer(we))return we.length===0?-1:F(ve,we,Ee,Fe,Le);if(typeof we=="number")return we&=255,typeof Uint8Array.prototype.indexOf=="function"?Le?Uint8Array.prototype.indexOf.call(ve,we,Ee):Uint8Array.prototype.lastIndexOf.call(ve,we,Ee):F(ve,[we],Ee,Fe,Le);throw new TypeError("val must be string, number or Buffer")}function F(ve,we,Ee,Fe,Le){var je,Ge=1,Je=ve.length,rt=we.length;if(Fe!==void 0&&((Fe=String(Fe).toLowerCase())==="ucs2"||Fe==="ucs-2"||Fe==="utf16le"||Fe==="utf-16le")){if(ve.length<2||we.length<2)return-1;Ge=2,Je/=2,rt/=2,Ee/=2}function ot(tt,Qe){return Ge===1?tt[Qe]:tt.readUInt16BE(Qe*Ge)}if(Le){var yt=-1;for(je=Ee;je<Je;je++)if(ot(ve,je)===ot(we,yt===-1?0:je-yt)){if(yt===-1&&(yt=je),je-yt+1===rt)return yt*Ge}else yt!==-1&&(je-=je-yt),yt=-1}else for(Ee+rt>Je&&(Ee=Je-rt),je=Ee;je>=0;je--){for(var _t=!0,mt=0;mt<rt;mt++)if(ot(ve,je+mt)!==ot(we,mt)){_t=!1;break}if(_t)return je}return-1}function U(ve,we,Ee,Fe){Ee=Number(Ee)||0;var Le=ve.length-Ee;Fe?(Fe=Number(Fe))>Le&&(Fe=Le):Fe=Le;var je,Ge=we.length;for(Fe>Ge/2&&(Fe=Ge/2),je=0;je<Fe;++je){var Je=parseInt(we.substr(2*je,2),16);if(Te(Je))return je;ve[Ee+je]=Je}return je}function I(ve,we,Ee,Fe){return Se(re(we,ve.length-Ee),ve,Ee,Fe)}function N(ve,we,Ee,Fe){return Se(function(Le){for(var je=[],Ge=0;Ge<Le.length;++Ge)je.push(255&Le.charCodeAt(Ge));return je}(we),ve,Ee,Fe)}function W(ve,we,Ee,Fe){return Se(he(we),ve,Ee,Fe)}function B(ve,we,Ee,Fe){return Se(function(Le,je){for(var Ge,Je,rt,ot=[],yt=0;yt<Le.length&&!((je-=2)<0);++yt)Je=(Ge=Le.charCodeAt(yt))>>8,rt=Ge%256,ot.push(rt),ot.push(Je);return ot}(we,ve.length-Ee),ve,Ee,Fe)}function V(ve,we,Ee){return we===0&&Ee===ve.length?p.fromByteArray(ve):p.fromByteArray(ve.slice(we,Ee))}function q(ve,we,Ee){Ee=Math.min(ve.length,Ee);for(var Fe=[],Le=we;Le<Ee;){var je=ve[Le],Ge=null,Je=je>239?4:je>223?3:je>191?2:1;if(Le+Je<=Ee){var rt=void 0,ot=void 0,yt=void 0,_t=void 0;switch(Je){case 1:je<128&&(Ge=je);break;case 2:(192&(rt=ve[Le+1]))==128&&(_t=(31&je)<<6|63&rt)>127&&(Ge=_t);break;case 3:rt=ve[Le+1],ot=ve[Le+2],(192&rt)==128&&(192&ot)==128&&(_t=(15&je)<<12|(63&rt)<<6|63&ot)>2047&&(_t<55296||_t>57343)&&(Ge=_t);break;case 4:rt=ve[Le+1],ot=ve[Le+2],yt=ve[Le+3],(192&rt)==128&&(192&ot)==128&&(192&yt)==128&&(_t=(15&je)<<18|(63&rt)<<12|(63&ot)<<6|63&yt)>65535&&_t<1114112&&(Ge=_t)}}Ge===null?(Ge=65533,Je=1):Ge>65535&&(Ge-=65536,Fe.push(Ge>>>10&1023|55296),Ge=56320|1023&Ge),Fe.push(Ge),Le+=Je}return function(mt){var tt=mt.length;if(tt<=ne)return String.fromCharCode.apply(String,mt);for(var Qe="",Dt=0;Dt<tt;)Qe+=String.fromCharCode.apply(String,mt.slice(Dt,Dt+=ne));return Qe}(Fe)}v.TYPED_ARRAY_SUPPORT=function(){try{var ve=new Uint8Array(1),we={foo:function(){return 42}};return Object.setPrototypeOf(we,Uint8Array.prototype),Object.setPrototypeOf(ve,we),ve.foo()===42}catch{return!1}}(),v.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function(ve,we,Ee){return x(ve,we,Ee)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function(ve,we,Ee){return function(Fe,Le,je){return y(Fe),Fe<=0?g(Fe):Le!==void 0?typeof je=="string"?g(Fe).fill(Le,je):g(Fe).fill(Le):g(Fe)}(ve,we,Ee)},v.allocUnsafe=function(ve){return A(ve)},v.allocUnsafeSlow=function(ve){return A(ve)},v.isBuffer=function(ve){return ve!=null&&ve._isBuffer===!0&&ve!==v.prototype},v.compare=function(ve,we){if(xe(ve,Uint8Array)&&(ve=v.from(ve,ve.offset,ve.byteLength)),xe(we,Uint8Array)&&(we=v.from(we,we.offset,we.byteLength)),!v.isBuffer(ve)||!v.isBuffer(we))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ve===we)return 0;for(var Ee=ve.length,Fe=we.length,Le=0,je=Math.min(Ee,Fe);Le<je;++Le)if(ve[Le]!==we[Le]){Ee=ve[Le],Fe=we[Le];break}return Ee<Fe?-1:Fe<Ee?1:0},v.isEncoding=function(ve){switch(String(ve).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(ve,we){if(!Array.isArray(ve))throw new TypeError('"list" argument must be an Array of Buffers');if(ve.length===0)return v.alloc(0);var Ee;if(we===void 0)for(we=0,Ee=0;Ee<ve.length;++Ee)we+=ve[Ee].length;var Fe=v.allocUnsafe(we),Le=0;for(Ee=0;Ee<ve.length;++Ee){var je=ve[Ee];if(xe(je,Uint8Array))Le+je.length>Fe.length?(v.isBuffer(je)||(je=v.from(je)),je.copy(Fe,Le)):Uint8Array.prototype.set.call(Fe,je,Le);else{if(!v.isBuffer(je))throw new TypeError('"list" argument must be an Array of Buffers');je.copy(Fe,Le)}Le+=je.length}return Fe},v.byteLength=E,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var ve=this.length;if(ve%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var we=0;we<ve;we+=2)O(this,we,we+1);return this},v.prototype.swap32=function(){var ve=this.length;if(ve%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var we=0;we<ve;we+=4)O(this,we,we+3),O(this,we+1,we+2);return this},v.prototype.swap64=function(){var ve=this.length;if(ve%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var we=0;we<ve;we+=8)O(this,we,we+7),O(this,we+1,we+6),O(this,we+2,we+5),O(this,we+3,we+4);return this},v.prototype.toString=function(){var ve=this.length;return ve===0?"":arguments.length===0?q(this,0,ve):L.apply(this,arguments)},v.prototype.toLocaleString=v.prototype.toString,v.prototype.equals=function(ve){if(!v.isBuffer(ve))throw new TypeError("Argument must be a Buffer");return this===ve||v.compare(this,ve)===0},v.prototype.inspect=function(){var ve="",we=o.IS;return ve=this.toString("hex",0,we).replace(/(.{2})/g,"$1 ").trim(),this.length>we&&(ve+=" ... "),"<Buffer "+ve+">"},m&&(v.prototype[m]=v.prototype.inspect),v.prototype.compare=function(ve,we,Ee,Fe,Le){if(xe(ve,Uint8Array)&&(ve=v.from(ve,ve.offset,ve.byteLength)),!v.isBuffer(ve))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(ve));if(we===void 0&&(we=0),Ee===void 0&&(Ee=ve?ve.length:0),Fe===void 0&&(Fe=0),Le===void 0&&(Le=this.length),we<0||Ee>ve.length||Fe<0||Le>this.length)throw new RangeError("out of range index");if(Fe>=Le&&we>=Ee)return 0;if(Fe>=Le)return-1;if(we>=Ee)return 1;if(this===ve)return 0;for(var je=(Le>>>=0)-(Fe>>>=0),Ge=(Ee>>>=0)-(we>>>=0),Je=Math.min(je,Ge),rt=this.slice(Fe,Le),ot=ve.slice(we,Ee),yt=0;yt<Je;++yt)if(rt[yt]!==ot[yt]){je=rt[yt],Ge=ot[yt];break}return je<Ge?-1:Ge<je?1:0},v.prototype.includes=function(ve,we,Ee){return this.indexOf(ve,we,Ee)!==-1},v.prototype.indexOf=function(ve,we,Ee){return P(this,ve,we,Ee,!0)},v.prototype.lastIndexOf=function(ve,we,Ee){return P(this,ve,we,Ee,!1)},v.prototype.write=function(ve,we,Ee,Fe){if(we===void 0)Fe="utf8",Ee=this.length,we=0;else if(Ee===void 0&&typeof we=="string")Fe=we,Ee=this.length,we=0;else{if(!isFinite(we))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");we>>>=0,isFinite(Ee)?(Ee>>>=0,Fe===void 0&&(Fe="utf8")):(Fe=Ee,Ee=void 0)}var Le=this.length-we;if((Ee===void 0||Ee>Le)&&(Ee=Le),ve.length>0&&(Ee<0||we<0)||we>this.length)throw new RangeError("Attempt to write outside buffer bounds");Fe||(Fe="utf8");for(var je=!1;;)switch(Fe){case"hex":return U(this,ve,we,Ee);case"utf8":case"utf-8":return I(this,ve,we,Ee);case"ascii":case"latin1":case"binary":return N(this,ve,we,Ee);case"base64":return W(this,ve,we,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ve,we,Ee);default:if(je)throw new TypeError("Unknown encoding: "+Fe);Fe=(""+Fe).toLowerCase(),je=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;function $(ve,we,Ee){var Fe="";Ee=Math.min(ve.length,Ee);for(var Le=we;Le<Ee;++Le)Fe+=String.fromCharCode(127&ve[Le]);return Fe}function K(ve,we,Ee){var Fe="";Ee=Math.min(ve.length,Ee);for(var Le=we;Le<Ee;++Le)Fe+=String.fromCharCode(ve[Le]);return Fe}function ee(ve,we,Ee){var Fe=ve.length;(!we||we<0)&&(we=0),(!Ee||Ee<0||Ee>Fe)&&(Ee=Fe);for(var Le="",je=we;je<Ee;++je)Le+=Ae[ve[je]];return Le}function J(ve,we,Ee){for(var Fe=ve.slice(we,Ee),Le="",je=0;je<Fe.length-1;je+=2)Le+=String.fromCharCode(Fe[je]+256*Fe[je+1]);return Le}function Z(ve,we,Ee){if(ve%1!=0||ve<0)throw new RangeError("offset is not uint");if(ve+we>Ee)throw new RangeError("Trying to access beyond buffer length")}function te(ve,we,Ee,Fe,Le,je){if(!v.isBuffer(ve))throw new TypeError('"buffer" argument must be a Buffer instance');if(we>Le||we<je)throw new RangeError('"value" argument is out of bounds');if(Ee+Fe>ve.length)throw new RangeError("Index out of range")}function oe(ve,we,Ee,Fe,Le){ke(we,Fe,Le,ve,Ee,7);var je=Number(we&BigInt(4294967295));ve[Ee++]=je,je>>=8,ve[Ee++]=je,je>>=8,ve[Ee++]=je,je>>=8,ve[Ee++]=je;var Ge=Number(we>>BigInt(32)&BigInt(4294967295));return ve[Ee++]=Ge,Ge>>=8,ve[Ee++]=Ge,Ge>>=8,ve[Ee++]=Ge,Ge>>=8,ve[Ee++]=Ge,Ee}function se(ve,we,Ee,Fe,Le){ke(we,Fe,Le,ve,Ee,7);var je=Number(we&BigInt(4294967295));ve[Ee+7]=je,je>>=8,ve[Ee+6]=je,je>>=8,ve[Ee+5]=je,je>>=8,ve[Ee+4]=je;var Ge=Number(we>>BigInt(32)&BigInt(4294967295));return ve[Ee+3]=Ge,Ge>>=8,ve[Ee+2]=Ge,Ge>>=8,ve[Ee+1]=Ge,Ge>>=8,ve[Ee]=Ge,Ee+8}function ce(ve,we,Ee,Fe,Le,je){if(Ee+Fe>ve.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("Index out of range")}function ye(ve,we,Ee,Fe,Le){return we=+we,Ee>>>=0,Le||ce(ve,0,Ee,4),f.write(ve,we,Ee,Fe,23,4),Ee+4}function me(ve,we,Ee,Fe,Le){return we=+we,Ee>>>=0,Le||ce(ve,0,Ee,8),f.write(ve,we,Ee,Fe,52,8),Ee+8}v.prototype.slice=function(ve,we){var Ee=this.length;(ve=~~ve)<0?(ve+=Ee)<0&&(ve=0):ve>Ee&&(ve=Ee),(we=we===void 0?Ee:~~we)<0?(we+=Ee)<0&&(we=0):we>Ee&&(we=Ee),we<ve&&(we=ve);var Fe=this.subarray(ve,we);return Object.setPrototypeOf(Fe,v.prototype),Fe},v.prototype.readUintLE=v.prototype.readUIntLE=function(ve,we,Ee){ve>>>=0,we>>>=0,Ee||Z(ve,we,this.length);for(var Fe=this[ve],Le=1,je=0;++je<we&&(Le*=256);)Fe+=this[ve+je]*Le;return Fe},v.prototype.readUintBE=v.prototype.readUIntBE=function(ve,we,Ee){ve>>>=0,we>>>=0,Ee||Z(ve,we,this.length);for(var Fe=this[ve+--we],Le=1;we>0&&(Le*=256);)Fe+=this[ve+--we]*Le;return Fe},v.prototype.readUint8=v.prototype.readUInt8=function(ve,we){return ve>>>=0,we||Z(ve,1,this.length),this[ve]},v.prototype.readUint16LE=v.prototype.readUInt16LE=function(ve,we){return ve>>>=0,we||Z(ve,2,this.length),this[ve]|this[ve+1]<<8},v.prototype.readUint16BE=v.prototype.readUInt16BE=function(ve,we){return ve>>>=0,we||Z(ve,2,this.length),this[ve]<<8|this[ve+1]},v.prototype.readUint32LE=v.prototype.readUInt32LE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),(this[ve]|this[ve+1]<<8|this[ve+2]<<16)+16777216*this[ve+3]},v.prototype.readUint32BE=v.prototype.readUInt32BE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),16777216*this[ve]+(this[ve+1]<<16|this[ve+2]<<8|this[ve+3])},v.prototype.readBigUInt64LE=Pe(function(ve){Ce(ve>>>=0,"offset");var we=this[ve],Ee=this[ve+7];we!==void 0&&Ee!==void 0||de(ve,this.length-8);var Fe=we+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,24),Le=this[++ve]+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+Ee*Math.pow(2,24);return BigInt(Fe)+(BigInt(Le)<<BigInt(32))}),v.prototype.readBigUInt64BE=Pe(function(ve){Ce(ve>>>=0,"offset");var we=this[ve],Ee=this[ve+7];we!==void 0&&Ee!==void 0||de(ve,this.length-8);var Fe=we*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+this[++ve],Le=this[++ve]*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+Ee;return(BigInt(Fe)<<BigInt(32))+BigInt(Le)}),v.prototype.readIntLE=function(ve,we,Ee){ve>>>=0,we>>>=0,Ee||Z(ve,we,this.length);for(var Fe=this[ve],Le=1,je=0;++je<we&&(Le*=256);)Fe+=this[ve+je]*Le;return Fe>=(Le*=128)&&(Fe-=Math.pow(2,8*we)),Fe},v.prototype.readIntBE=function(ve,we,Ee){ve>>>=0,we>>>=0,Ee||Z(ve,we,this.length);for(var Fe=we,Le=1,je=this[ve+--Fe];Fe>0&&(Le*=256);)je+=this[ve+--Fe]*Le;return je>=(Le*=128)&&(je-=Math.pow(2,8*we)),je},v.prototype.readInt8=function(ve,we){return ve>>>=0,we||Z(ve,1,this.length),128&this[ve]?-1*(255-this[ve]+1):this[ve]},v.prototype.readInt16LE=function(ve,we){ve>>>=0,we||Z(ve,2,this.length);var Ee=this[ve]|this[ve+1]<<8;return 32768&Ee?4294901760|Ee:Ee},v.prototype.readInt16BE=function(ve,we){ve>>>=0,we||Z(ve,2,this.length);var Ee=this[ve+1]|this[ve]<<8;return 32768&Ee?4294901760|Ee:Ee},v.prototype.readInt32LE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),this[ve]|this[ve+1]<<8|this[ve+2]<<16|this[ve+3]<<24},v.prototype.readInt32BE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),this[ve]<<24|this[ve+1]<<16|this[ve+2]<<8|this[ve+3]},v.prototype.readBigInt64LE=Pe(function(ve){Ce(ve>>>=0,"offset");var we=this[ve],Ee=this[ve+7];we!==void 0&&Ee!==void 0||de(ve,this.length-8);var Fe=this[ve+4]+this[ve+5]*Math.pow(2,8)+this[ve+6]*Math.pow(2,16)+(Ee<<24);return(BigInt(Fe)<<BigInt(32))+BigInt(we+this[++ve]*Math.pow(2,8)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,24))}),v.prototype.readBigInt64BE=Pe(function(ve){Ce(ve>>>=0,"offset");var we=this[ve],Ee=this[ve+7];we!==void 0&&Ee!==void 0||de(ve,this.length-8);var Fe=(we<<24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+this[++ve];return(BigInt(Fe)<<BigInt(32))+BigInt(this[++ve]*Math.pow(2,24)+this[++ve]*Math.pow(2,16)+this[++ve]*Math.pow(2,8)+Ee)}),v.prototype.readFloatLE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),f.read(this,ve,!0,23,4)},v.prototype.readFloatBE=function(ve,we){return ve>>>=0,we||Z(ve,4,this.length),f.read(this,ve,!1,23,4)},v.prototype.readDoubleLE=function(ve,we){return ve>>>=0,we||Z(ve,8,this.length),f.read(this,ve,!0,52,8)},v.prototype.readDoubleBE=function(ve,we){return ve>>>=0,we||Z(ve,8,this.length),f.read(this,ve,!1,52,8)},v.prototype.writeUintLE=v.prototype.writeUIntLE=function(ve,we,Ee,Fe){ve=+ve,we>>>=0,Ee>>>=0,Fe||te(this,ve,we,Ee,Math.pow(2,8*Ee)-1,0);var Le=1,je=0;for(this[we]=255&ve;++je<Ee&&(Le*=256);)this[we+je]=ve/Le&255;return we+Ee},v.prototype.writeUintBE=v.prototype.writeUIntBE=function(ve,we,Ee,Fe){ve=+ve,we>>>=0,Ee>>>=0,Fe||te(this,ve,we,Ee,Math.pow(2,8*Ee)-1,0);var Le=Ee-1,je=1;for(this[we+Le]=255&ve;--Le>=0&&(je*=256);)this[we+Le]=ve/je&255;return we+Ee},v.prototype.writeUint8=v.prototype.writeUInt8=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,1,255,0),this[we]=255&ve,we+1},v.prototype.writeUint16LE=v.prototype.writeUInt16LE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,2,65535,0),this[we]=255&ve,this[we+1]=ve>>>8,we+2},v.prototype.writeUint16BE=v.prototype.writeUInt16BE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,2,65535,0),this[we]=ve>>>8,this[we+1]=255&ve,we+2},v.prototype.writeUint32LE=v.prototype.writeUInt32LE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,4,4294967295,0),this[we+3]=ve>>>24,this[we+2]=ve>>>16,this[we+1]=ve>>>8,this[we]=255&ve,we+4},v.prototype.writeUint32BE=v.prototype.writeUInt32BE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,4,4294967295,0),this[we]=ve>>>24,this[we+1]=ve>>>16,this[we+2]=ve>>>8,this[we+3]=255&ve,we+4},v.prototype.writeBigUInt64LE=Pe(function(ve){return oe(this,ve,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeBigUInt64BE=Pe(function(ve){return se(this,ve,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),v.prototype.writeIntLE=function(ve,we,Ee,Fe){if(ve=+ve,we>>>=0,!Fe){var Le=Math.pow(2,8*Ee-1);te(this,ve,we,Ee,Le-1,-Le)}var je=0,Ge=1,Je=0;for(this[we]=255&ve;++je<Ee&&(Ge*=256);)ve<0&&Je===0&&this[we+je-1]!==0&&(Je=1),this[we+je]=(ve/Ge>>0)-Je&255;return we+Ee},v.prototype.writeIntBE=function(ve,we,Ee,Fe){if(ve=+ve,we>>>=0,!Fe){var Le=Math.pow(2,8*Ee-1);te(this,ve,we,Ee,Le-1,-Le)}var je=Ee-1,Ge=1,Je=0;for(this[we+je]=255&ve;--je>=0&&(Ge*=256);)ve<0&&Je===0&&this[we+je+1]!==0&&(Je=1),this[we+je]=(ve/Ge>>0)-Je&255;return we+Ee},v.prototype.writeInt8=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,1,127,-128),ve<0&&(ve=255+ve+1),this[we]=255&ve,we+1},v.prototype.writeInt16LE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,2,32767,-32768),this[we]=255&ve,this[we+1]=ve>>>8,we+2},v.prototype.writeInt16BE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,2,32767,-32768),this[we]=ve>>>8,this[we+1]=255&ve,we+2},v.prototype.writeInt32LE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,4,2147483647,-2147483648),this[we]=255&ve,this[we+1]=ve>>>8,this[we+2]=ve>>>16,this[we+3]=ve>>>24,we+4},v.prototype.writeInt32BE=function(ve,we,Ee){return ve=+ve,we>>>=0,Ee||te(this,ve,we,4,2147483647,-2147483648),ve<0&&(ve=4294967295+ve+1),this[we]=ve>>>24,this[we+1]=ve>>>16,this[we+2]=ve>>>8,this[we+3]=255&ve,we+4},v.prototype.writeBigInt64LE=Pe(function(ve){return oe(this,ve,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeBigInt64BE=Pe(function(ve){return se(this,ve,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),v.prototype.writeFloatLE=function(ve,we,Ee){return ye(this,ve,we,!0,Ee)},v.prototype.writeFloatBE=function(ve,we,Ee){return ye(this,ve,we,!1,Ee)},v.prototype.writeDoubleLE=function(ve,we,Ee){return me(this,ve,we,!0,Ee)},v.prototype.writeDoubleBE=function(ve,we,Ee){return me(this,ve,we,!1,Ee)},v.prototype.copy=function(ve,we,Ee,Fe){if(!v.isBuffer(ve))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),Fe||Fe===0||(Fe=this.length),we>=ve.length&&(we=ve.length),we||(we=0),Fe>0&&Fe<Ee&&(Fe=Ee),Fe===Ee||ve.length===0||this.length===0)return 0;if(we<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Fe<0)throw new RangeError("sourceEnd out of bounds");Fe>this.length&&(Fe=this.length),ve.length-we<Fe-Ee&&(Fe=ve.length-we+Ee);var Le=Fe-Ee;return this===ve&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(we,Ee,Fe):Uint8Array.prototype.set.call(ve,this.subarray(Ee,Fe),we),Le},v.prototype.fill=function(ve,we,Ee,Fe){if(typeof ve=="string"){if(typeof we=="string"?(Fe=we,we=0,Ee=this.length):typeof Ee=="string"&&(Fe=Ee,Ee=this.length),Fe!==void 0&&typeof Fe!="string")throw new TypeError("encoding must be a string");if(typeof Fe=="string"&&!v.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);if(ve.length===1){var Le=ve.charCodeAt(0);(Fe==="utf8"&&Le<128||Fe==="latin1")&&(ve=Le)}}else typeof ve=="number"?ve&=255:typeof ve=="boolean"&&(ve=Number(ve));if(we<0||this.length<we||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=we)return this;var je;if(we>>>=0,Ee=Ee===void 0?this.length:Ee>>>0,ve||(ve=0),typeof ve=="number")for(je=we;je<Ee;++je)this[je]=ve;else{var Ge=v.isBuffer(ve)?ve:v.from(ve,Fe),Je=Ge.length;if(Je===0)throw new TypeError('The value "'+ve+'" is invalid for argument "value"');for(je=0;je<Ee-we;++je)this[je+we]=Ge[je%Je]}return this};var fe={};function pe(ve,we,Ee){fe[ve]=function(Fe){function Le(){var Je,rt,ot,yt;return function(_t,mt){if(!(_t instanceof mt))throw new TypeError("Cannot call a class as a function")}(this,Le),rt=this,ot=s(ot=Le),Je=function(_t,mt){if(mt&&(u(mt)==="object"||typeof mt=="function"))return mt;if(mt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(tt){if(tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt}(_t)}(rt,a()?Reflect.construct(ot,yt||[],s(rt).constructor):ot.apply(rt,yt)),Object.defineProperty(Je,"message",{value:we.apply(Je,arguments),writable:!0,configurable:!0}),Je.name="".concat(Je.name," [").concat(ve,"]"),Je.stack,delete Je.name,Je}return function(Je,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Super expression must either be null or a function");Je.prototype=Object.create(rt&&rt.prototype,{constructor:{value:Je,writable:!0,configurable:!0}}),Object.defineProperty(Je,"prototype",{writable:!1}),rt&&l(Je,rt)}(Le,Fe),je=Le,(Ge=[{key:"code",get:function(){return ve},set:function(Je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Je,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ve,"]: ").concat(this.message)}}])&&i(je.prototype,Ge),Object.defineProperty(je,"prototype",{writable:!1}),je;var je,Ge}(Ee)}function ge(ve){for(var we="",Ee=ve.length,Fe=ve[0]==="-"?1:0;Ee>=Fe+4;Ee-=3)we="_".concat(ve.slice(Ee-3,Ee)).concat(we);return"".concat(ve.slice(0,Ee)).concat(we)}function ke(ve,we,Ee,Fe,Le,je){if(ve>Ee||ve<we){var Ge,Je=typeof we=="bigint"?"n":"";throw Ge=je>3?we===0||we===BigInt(0)?">= 0".concat(Je," and < 2").concat(Je," ** ").concat(8*(je+1)).concat(Je):">= -(2".concat(Je," ** ").concat(8*(je+1)-1).concat(Je,") and < 2 ** ")+"".concat(8*(je+1)-1).concat(Je):">= ".concat(we).concat(Je," and <= ").concat(Ee).concat(Je),new fe.ERR_OUT_OF_RANGE("value",Ge,ve)}(function(rt,ot,yt){Ce(ot,"offset"),rt[ot]!==void 0&&rt[ot+yt]!==void 0||de(ot,rt.length-(yt+1))})(Fe,Le,je)}function Ce(ve,we){if(typeof ve!="number")throw new fe.ERR_INVALID_ARG_TYPE(we,"number",ve)}function de(ve,we,Ee){throw Math.floor(ve)!==ve?(Ce(ve,Ee),new fe.ERR_OUT_OF_RANGE(Ee||"offset","an integer",ve)):we<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(Ee||"offset",">= ".concat(Ee?1:0," and <= ").concat(we),ve)}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(ve){return ve?"".concat(ve," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(ve,we){return'The "'.concat(ve,'" argument must be of type number. Received type ').concat(u(we))},TypeError),pe("ERR_OUT_OF_RANGE",function(ve,we,Ee){var Fe='The value of "'.concat(ve,'" is out of range.'),Le=Ee;return Number.isInteger(Ee)&&Math.abs(Ee)>Math.pow(2,32)?Le=ge(String(Ee)):typeof Ee=="bigint"&&(Le=String(Ee),(Ee>Math.pow(BigInt(2),BigInt(32))||Ee<-Math.pow(BigInt(2),BigInt(32)))&&(Le=ge(Le)),Le+="n"),Fe+" It must be ".concat(we,". Received ").concat(Le)},RangeError);var ae=/[^+/0-9A-Za-z-_]/g;function re(ve,we){var Ee;we=we||1/0;for(var Fe=ve.length,Le=null,je=[],Ge=0;Ge<Fe;++Ge){if((Ee=ve.charCodeAt(Ge))>55295&&Ee<57344){if(!Le){if(Ee>56319){(we-=3)>-1&&je.push(239,191,189);continue}if(Ge+1===Fe){(we-=3)>-1&&je.push(239,191,189);continue}Le=Ee;continue}if(Ee<56320){(we-=3)>-1&&je.push(239,191,189),Le=Ee;continue}Ee=65536+(Le-55296<<10|Ee-56320)}else Le&&(we-=3)>-1&&je.push(239,191,189);if(Le=null,Ee<128){if((we-=1)<0)break;je.push(Ee)}else if(Ee<2048){if((we-=2)<0)break;je.push(Ee>>6|192,63&Ee|128)}else if(Ee<65536){if((we-=3)<0)break;je.push(Ee>>12|224,Ee>>6&63|128,63&Ee|128)}else{if(!(Ee<1114112))throw new Error("Invalid code point");if((we-=4)<0)break;je.push(Ee>>18|240,Ee>>12&63|128,Ee>>6&63|128,63&Ee|128)}}return je}function he(ve){return p.toByteArray(function(we){if((we=(we=we.split("=")[0]).trim().replace(ae,"")).length<2)return"";for(;we.length%4!=0;)we+="=";return we}(ve))}function Se(ve,we,Ee,Fe){var Le;for(Le=0;Le<Fe&&!(Le+Ee>=we.length||Le>=ve.length);++Le)we[Le+Ee]=ve[Le];return Le}function xe(ve,we){return ve instanceof we||ve!=null&&ve.constructor!=null&&ve.constructor.name!=null&&ve.constructor.name===we.name}function Te(ve){return ve!=ve}var Ae=function(){for(var ve="0123456789abcdef",we=new Array(256),Ee=0;Ee<16;++Ee)for(var Fe=16*Ee,Le=0;Le<16;++Le)we[Fe+Le]=ve[Ee]+ve[Le];return we}();function Pe(ve){return typeof BigInt>"u"?De:ve}function De(){throw new Error("BigInt not supported")}},9216:function(c){"use strict";c.exports=n,c.exports.isMobile=n,c.exports.default=n;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function n(a){a||(a={});var s=a.ua;if(s||typeof navigator>"u"||(s=navigator.userAgent),s&&s.headers&&typeof s.headers["user-agent"]=="string"&&(s=s.headers["user-agent"]),typeof s!="string")return!1;var l=o.test(s)&&!t.test(s)||!!a.tablet&&i.test(s);return!l&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&s.indexOf("Macintosh")!==-1&&s.indexOf("Safari")!==-1&&(l=!0),l}},6296:function(c,o,t){"use strict";c.exports=function(u){var p=(u=u||{}).eye||[0,0,1],f=u.center||[0,0,0],m=u.up||[0,1,0],h=u.distanceLimits||[0,1/0],g=u.mode||"turntable",v=i(),x=n(),y=a();return v.setDistanceLimits(h[0],h[1]),v.lookAt(0,p,f,m),x.setDistanceLimits(h[0],h[1]),x.lookAt(0,p,f,m),y.setDistanceLimits(h[0],h[1]),y.lookAt(0,p,f,m),new s({turntable:v,orbit:x,matrix:y},g)};var i=t(7261),n=t(9977),a=t(4192);function s(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(f){return u[f]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=s.prototype;l.flush=function(u){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].flush(u)},l.idle=function(u){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].idle(u)},l.lookAt=function(u,p,f,m){for(var h=this._controllerList,g=0;g<h.length;++g)h[g].lookAt(u,p,f,m)},l.rotate=function(u,p,f,m){for(var h=this._controllerList,g=0;g<h.length;++g)h[g].rotate(u,p,f,m)},l.pan=function(u,p,f,m){for(var h=this._controllerList,g=0;g<h.length;++g)h[g].pan(u,p,f,m)},l.translate=function(u,p,f,m){for(var h=this._controllerList,g=0;g<h.length;++g)h[g].translate(u,p,f,m)},l.setMatrix=function(u,p){for(var f=this._controllerList,m=0;m<f.length;++m)f[m].setMatrix(u,p)},l.setDistanceLimits=function(u,p){for(var f=this._controllerList,m=0;m<f.length;++m)f[m].setDistanceLimits(u,p)},l.setDistance=function(u,p){for(var f=this._controllerList,m=0;m<f.length;++m)f[m].setDistance(u,p)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var f=this._active,m=this._controllerList[p],h=Math.max(f.lastT(),m.lastT());f.recalcMatrix(h),m.setMatrix(h,f.computedMatrix),this._active=m,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},7169:function(c,o,t){"use strict";var i=typeof WeakMap>"u"?t(1538):WeakMap,n=t(2762),a=t(8116),s=new i;c.exports=function(l){var u=s.get(l),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!l.isBuffer(p)){var f=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=a(l,[{buffer:f,type:l.FLOAT,size:2}]))._triangleBuffer=f,s.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},1085:function(c,o,t){var i=t(1371);c.exports=function(n,a,s){a=typeof a=="number"?a:1,s=s||": ";var l=n.split(/\r?\n/),u=String(l.length+a-1).length;return l.map(function(p,f){var m=f+a,h=String(m).length;return i(m,u-h)+s+p}).join(`
`)}},3952:function(c,o,t){"use strict";c.exports=function(a){var s=a.length;if(s===0)return[];if(s===1)return[0];for(var l=a[0].length,u=[a[0]],p=[0],f=1;f<s;++f)if(u.push(a[f]),n(u,l)){if(p.push(f),p.length===l+1)return p}else u.pop();return p};var i=t(3250);function n(a,s){for(var l=new Array(s+1),u=0;u<a.length;++u)l[u]=a[u];for(u=0;u<=a.length;++u){for(var p=a.length;p<=s;++p){for(var f=new Array(s),m=0;m<s;++m)f[m]=Math.pow(p+1-u,m);l[p]=f}if(i.apply(void 0,l))return!0}return!1}},5995:function(c,o,t){"use strict";c.exports=function(a,s){return i(s).filter(function(l){for(var u=new Array(l.length),p=0;p<l.length;++p)u[p]=s[l[p]];return n(u)*a<1})};var i=t(7642),n=t(6037)},3502:function(c,o,t){c.exports=function(a,s){return n(i(a,s))};var i=t(5995),n=t(9127)},6468:function(c){c.exports=function(o){return atob(o)}},2642:function(c,o,t){"use strict";c.exports=function(a,s){for(var l=s.length,u=new Array(l+1),p=0;p<l;++p){for(var f=new Array(l+1),m=0;m<=l;++m)f[m]=a[m][p];u[p]=f}for(u[l]=new Array(l+1),p=0;p<=l;++p)u[l][p]=1;var h=new Array(l+1);for(p=0;p<l;++p)h[p]=s[p];h[l]=1;var g=i(u,h),v=n(g[l+1]);v===0&&(v=1);var x=new Array(l+1);for(p=0;p<=l;++p)x[p]=n(g[p])/v;return x};var i=t(727);function n(a){for(var s=0,l=0;l<a.length;++l)s+=a[l];return s}},7507:function(c,o){"use strict";o.byteLength=function(p){var f=l(p),m=f[0],h=f[1];return 3*(m+h)/4-h},o.toByteArray=function(p){var f,m,h=l(p),g=h[0],v=h[1],x=new n(function(d,S,k){return 3*(S+k)/4-k}(0,g,v)),y=0,A=v>0?g-4:g;for(m=0;m<A;m+=4)f=i[p.charCodeAt(m)]<<18|i[p.charCodeAt(m+1)]<<12|i[p.charCodeAt(m+2)]<<6|i[p.charCodeAt(m+3)],x[y++]=f>>16&255,x[y++]=f>>8&255,x[y++]=255&f;return v===2&&(f=i[p.charCodeAt(m)]<<2|i[p.charCodeAt(m+1)]>>4,x[y++]=255&f),v===1&&(f=i[p.charCodeAt(m)]<<10|i[p.charCodeAt(m+1)]<<4|i[p.charCodeAt(m+2)]>>2,x[y++]=f>>8&255,x[y++]=255&f),x},o.fromByteArray=function(p){for(var f,m=p.length,h=m%3,g=[],v=16383,x=0,y=m-h;x<y;x+=v)g.push(u(p,x,x+v>y?y:x+v));return h===1?(f=p[m-1],g.push(t[f>>2]+t[f<<4&63]+"==")):h===2&&(f=(p[m-2]<<8)+p[m-1],g.push(t[f>>10]+t[f>>4&63]+t[f<<2&63]+"=")),g.join("")};for(var t=[],i=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)t[s]=a[s],i[a.charCodeAt(s)]=s;function l(p){var f=p.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=p.indexOf("=");return m===-1&&(m=f),[m,m===f?0:4-m%4]}function u(p,f,m){for(var h,g,v=[],x=f;x<m;x+=3)h=(p[x]<<16&16711680)+(p[x+1]<<8&65280)+(255&p[x+2]),v.push(t[(g=h)>>18&63]+t[g>>12&63]+t[g>>6&63]+t[63&g]);return v.join("")}i[45]=62,i[95]=63},3865:function(c,o,t){"use strict";var i=t(869);c.exports=function(n,a){return i(n[0].mul(a[1]).add(a[0].mul(n[1])),n[1].mul(a[1]))}},1318:function(c){"use strict";c.exports=function(o,t){return o[0].mul(t[1]).cmp(t[0].mul(o[1]))}},8697:function(c,o,t){"use strict";var i=t(869);c.exports=function(n,a){return i(n[0].mul(a[1]),n[1].mul(a[0]))}},7842:function(c,o,t){"use strict";var i=t(6330),n=t(1533),a=t(2651),s=t(4387),l=t(869),u=t(8697);c.exports=function p(f,m){if(i(f))return m?u(f,p(m)):[f[0].clone(),f[1].clone()];var h,g,v=0;if(n(f))h=f.clone();else if(typeof f=="string")h=s(f);else{if(f===0)return[a(0),a(1)];if(f===Math.floor(f))h=a(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),v-=256;h=a(f)}}if(i(m))h.mul(m[1]),g=m[0].clone();else if(n(m))g=m.clone();else if(typeof m=="string")g=s(m);else if(m)if(m===Math.floor(m))g=a(m);else{for(;m!==Math.floor(m);)m*=Math.pow(2,256),v+=256;g=a(m)}else g=a(1);return v>0?h=h.ushln(v):v<0&&(g=g.ushln(-v)),l(h,g)}},6330:function(c,o,t){"use strict";var i=t(1533);c.exports=function(n){return Array.isArray(n)&&n.length===2&&i(n[0])&&i(n[1])}},5716:function(c,o,t){"use strict";var i=t(6859);c.exports=function(n){return n.cmp(new i(0))}},1369:function(c,o,t){"use strict";var i=t(5716);c.exports=function(n){var a=n.length,s=n.words,l=0;if(a===1)l=s[0];else if(a===2)l=s[0]+67108864*s[1];else for(var u=0;u<a;u++)l+=s[u]*Math.pow(67108864,u);return i(n)*l}},4025:function(c,o,t){"use strict";var i=t(2361),n=t(8828).countTrailingZeros;c.exports=function(a){var s=n(i.lo(a));if(s<32)return s;var l=n(i.hi(a));return l>20?52:l+32}},1533:function(c,o,t){"use strict";t(6859),c.exports=function(i){return i&&typeof i=="object"&&!!i.words}},2651:function(c,o,t){"use strict";var i=t(6859),n=t(2361);c.exports=function(a){var s=n.exponent(a);return s<52?new i(a):new i(a*Math.pow(2,52-s)).ushln(s-52)}},869:function(c,o,t){"use strict";var i=t(2651),n=t(5716);c.exports=function(a,s){var l=n(a),u=n(s);if(l===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(a=a.neg(),s=s.neg());var p=a.gcd(s);return p.cmpn(1)?[a.div(p),s.div(p)]:[a,s]}},4387:function(c,o,t){"use strict";var i=t(6859);c.exports=function(n){return new i(n)}},6504:function(c,o,t){"use strict";var i=t(869);c.exports=function(n,a){return i(n[0].mul(a[0]),n[1].mul(a[1]))}},7721:function(c,o,t){"use strict";var i=t(5716);c.exports=function(n){return i(n[0])*i(n[1])}},5572:function(c,o,t){"use strict";var i=t(869);c.exports=function(n,a){return i(n[0].mul(a[1]).sub(n[1].mul(a[0])),n[1].mul(a[1]))}},946:function(c,o,t){"use strict";var i=t(1369),n=t(4025);c.exports=function(a){var s=a[0],l=a[1];if(s.cmpn(0)===0)return 0;var u=s.abs().divmod(l.abs()),p=u.div,f=i(p),m=u.mod,h=s.negative!==l.negative?-1:1;if(m.cmpn(0)===0)return h*f;if(f){var g=n(f)+4;return h*(f+(x=i(m.ushln(g).divRound(l)))*Math.pow(2,-g))}var v=l.bitLength()-m.bitLength()+53,x=i(m.ushln(v).divRound(l));return v<1023?h*x*Math.pow(2,-v):h*(x*=Math.pow(2,-1023))*Math.pow(2,1023-v)}},2478:function(c){"use strict";function o(l,u,p,f,m){for(var h=m+1;f<=m;){var g=f+m>>>1,v=l[g];(p!==void 0?p(v,u):v-u)>=0?(h=g,m=g-1):f=g+1}return h}function t(l,u,p,f,m){for(var h=m+1;f<=m;){var g=f+m>>>1,v=l[g];(p!==void 0?p(v,u):v-u)>0?(h=g,m=g-1):f=g+1}return h}function i(l,u,p,f,m){for(var h=f-1;f<=m;){var g=f+m>>>1,v=l[g];(p!==void 0?p(v,u):v-u)<0?(h=g,f=g+1):m=g-1}return h}function n(l,u,p,f,m){for(var h=f-1;f<=m;){var g=f+m>>>1,v=l[g];(p!==void 0?p(v,u):v-u)<=0?(h=g,f=g+1):m=g-1}return h}function a(l,u,p,f,m){for(;f<=m;){var h=f+m>>>1,g=l[h],v=p!==void 0?p(g,u):g-u;if(v===0)return h;v<=0?f=h+1:m=h-1}return-1}function s(l,u,p,f,m,h){return typeof p=="function"?h(l,u,p,f===void 0?0:0|f,m===void 0?l.length-1:0|m):h(l,u,void 0,p===void 0?0:0|p,f===void 0?l.length-1:0|f)}c.exports={ge:function(l,u,p,f,m){return s(l,u,p,f,m,o)},gt:function(l,u,p,f,m){return s(l,u,p,f,m,t)},lt:function(l,u,p,f,m){return s(l,u,p,f,m,i)},le:function(l,u,p,f,m){return s(l,u,p,f,m,n)},eq:function(l,u,p,f,m){return s(l,u,p,f,m,a)}}},8828:function(c,o){"use strict";function t(n){var a=32;return(n&=-n)&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var a=n>>31;return(n^a)-a},o.min=function(n,a){return a^(n^a)&-(n<a)},o.max=function(n,a){return n^(n^a)&-(n<a)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var a,s;return a=(n>65535)<<4,a|=s=((n>>>=a)>255)<<3,a|=s=((n>>>=s)>15)<<2,(a|=s=((n>>>=s)>3)<<1)|(n>>>=s)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var a=0;a<256;++a){var s=a,l=a,u=7;for(s>>>=1;s;s>>>=1)l<<=1,l|=1&s,--u;n[a]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,a){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},o.deinterleave2=function(n,a){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>a&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,a,s){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(n,a){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>a&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>t(n)+1}},6859:function(c,o,t){(function(i,n){"use strict";function a(I,N){if(!I)throw new Error(N||"Assertion failed")}function s(I,N){I.super_=N;var W=function(){};W.prototype=N.prototype,I.prototype=new W,I.prototype.constructor=I}function l(I,N,W){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(I||0,N||10,W||"be"))}var u;typeof i=="object"?i.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t(7790).Buffer}catch{}function p(I,N){var W=I.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function f(I,N,W){var B=p(I,W);return W-1>=N&&(B|=p(I,W-1)<<4),B}function m(I,N,W,B){for(var V=0,q=Math.min(I.length,W),ne=N;ne<q;ne++){var $=I.charCodeAt(ne)-48;V*=B,V+=$>=49?$-49+10:$>=17?$-17+10:$}return V}l.isBN=function(I){return I instanceof l||I!==null&&typeof I=="object"&&I.constructor.wordSize===l.wordSize&&Array.isArray(I.words)},l.max=function(I,N){return I.cmp(N)>0?I:N},l.min=function(I,N){return I.cmp(N)<0?I:N},l.prototype._init=function(I,N,W){if(typeof I=="number")return this._initNumber(I,N,W);if(typeof I=="object")return this._initArray(I,N,W);N==="hex"&&(N=16),a(N===(0|N)&&N>=2&&N<=36);var B=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(B++,this.negative=1),B<I.length&&(N===16?this._parseHex(I,B,W):(this._parseBase(I,N,B),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(I,N,W){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(a(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(I,N,W){if(a(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q,ne=0;if(W==="be")for(B=I.length-1,V=0;B>=0;B-=3)q=I[B]|I[B-1]<<8|I[B-2]<<16,this.words[V]|=q<<ne&67108863,this.words[V+1]=q>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,V++);else if(W==="le")for(B=0,V=0;B<I.length;B+=3)q=I[B]|I[B+1]<<8|I[B+2]<<16,this.words[V]|=q<<ne&67108863,this.words[V+1]=q>>>26-ne&67108863,(ne+=24)>=26&&(ne-=26,V++);return this.strip()},l.prototype._parseHex=function(I,N,W){this.length=Math.ceil((I.length-N)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var V,q=0,ne=0;if(W==="be")for(B=I.length-1;B>=N;B-=2)V=f(I,N,B)<<q,this.words[ne]|=67108863&V,q>=18?(q-=18,ne+=1,this.words[ne]|=V>>>26):q+=8;else for(B=(I.length-N)%2==0?N+1:N;B<I.length;B+=2)V=f(I,N,B)<<q,this.words[ne]|=67108863&V,q>=18?(q-=18,ne+=1,this.words[ne]|=V>>>26):q+=8;this.strip()},l.prototype._parseBase=function(I,N,W){this.words=[0],this.length=1;for(var B=0,V=1;V<=67108863;V*=N)B++;B--,V=V/N|0;for(var q=I.length-W,ne=q%B,$=Math.min(q,q-ne)+W,K=0,ee=W;ee<$;ee+=B)K=m(I,ee,ee+B,N),this.imuln(V),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(ne!==0){var J=1;for(K=m(I,ee,I.length,N),ee=0;ee<ne;ee++)J*=N;this.imuln(J),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this.strip()},l.prototype.copy=function(I){I.words=new Array(this.length);for(var N=0;N<this.length;N++)I.words[N]=this.words[N];I.length=this.length,I.negative=this.negative,I.red=this.red},l.prototype.clone=function(){var I=new l(null);return this.copy(I),I},l.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(I,N,W){W.negative=N.negative^I.negative;var B=I.length+N.length|0;W.length=B,B=B-1|0;var V=0|I.words[0],q=0|N.words[0],ne=V*q,$=67108863&ne,K=ne/67108864|0;W.words[0]=$;for(var ee=1;ee<B;ee++){for(var J=K>>>26,Z=67108863&K,te=Math.min(ee,N.length-1),oe=Math.max(0,ee-I.length+1);oe<=te;oe++){var se=ee-oe|0;J+=(ne=(V=0|I.words[se])*(q=0|N.words[oe])+Z)/67108864|0,Z=67108863&ne}W.words[ee]=0|Z,K=0|J}return K!==0?W.words[ee]=0|K:W.length--,W.strip()}l.prototype.toString=function(I,N){var W;if(N=0|N||1,(I=I||10)===16||I==="hex"){W="";for(var B=0,V=0,q=0;q<this.length;q++){var ne=this.words[q],$=(16777215&(ne<<B|V)).toString(16);W=(V=ne>>>24-B&16777215)!=0||q!==this.length-1?h[6-$.length]+$+W:$+W,(B+=2)>=26&&(B-=26,q--)}for(V!==0&&(W=V.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(I===(0|I)&&I>=2&&I<=36){var K=g[I],ee=v[I];W="";var J=this.clone();for(J.negative=0;!J.isZero();){var Z=J.modn(ee).toString(I);W=(J=J.idivn(ee)).isZero()?Z+W:h[K-Z.length]+Z+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(I,N){return a(u!==void 0),this.toArrayLike(u,I,N)},l.prototype.toArray=function(I,N){return this.toArrayLike(Array,I,N)},l.prototype.toArrayLike=function(I,N,W){var B=this.byteLength(),V=W||Math.max(1,B);a(B<=V,"byte array longer than desired length"),a(V>0,"Requested array length <= 0"),this.strip();var q,ne,$=N==="le",K=new I(V),ee=this.clone();if($){for(ne=0;!ee.isZero();ne++)q=ee.andln(255),ee.iushrn(8),K[ne]=q;for(;ne<V;ne++)K[ne]=0}else{for(ne=0;ne<V-B;ne++)K[ne]=0;for(ne=0;!ee.isZero();ne++)q=ee.andln(255),ee.iushrn(8),K[V-ne-1]=q}return K},Math.clz32?l.prototype._countBits=function(I){return 32-Math.clz32(I)}:l.prototype._countBits=function(I){var N=I,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(I){if(I===0)return 26;var N=I,W=0;return!(8191&N)&&(W+=13,N>>>=13),!(127&N)&&(W+=7,N>>>=7),!(15&N)&&(W+=4,N>>>=4),!(3&N)&&(W+=2,N>>>=2),!(1&N)&&W++,W},l.prototype.bitLength=function(){var I=this.words[this.length-1],N=this._countBits(I);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(I+=W,W!==26)break}return I},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},l.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var N=0;N<I.length;N++)this.words[N]=this.words[N]|I.words[N];return this.strip()},l.prototype.ior=function(I){return a((this.negative|I.negative)==0),this.iuor(I)},l.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},l.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},l.prototype.iuand=function(I){var N;N=this.length>I.length?I:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&I.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(I){return a((this.negative|I.negative)==0),this.iuand(I)},l.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},l.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},l.prototype.iuxor=function(I){var N,W;this.length>I.length?(N=this,W=I):(N=I,W=this);for(var B=0;B<W.length;B++)this.words[B]=N.words[B]^W.words[B];if(this!==N)for(;B<N.length;B++)this.words[B]=N.words[B];return this.length=N.length,this.strip()},l.prototype.ixor=function(I){return a((this.negative|I.negative)==0),this.iuxor(I)},l.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},l.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},l.prototype.inotn=function(I){a(typeof I=="number"&&I>=0);var N=0|Math.ceil(I/26),W=I%26;this._expand(N),W>0&&N--;for(var B=0;B<N;B++)this.words[B]=67108863&~this.words[B];return W>0&&(this.words[B]=~this.words[B]&67108863>>26-W),this.strip()},l.prototype.notn=function(I){return this.clone().inotn(I)},l.prototype.setn=function(I,N){a(typeof I=="number"&&I>=0);var W=I/26|0,B=I%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<B:this.words[W]&~(1<<B),this.strip()},l.prototype.iadd=function(I){var N,W,B;if(this.negative!==0&&I.negative===0)return this.negative=0,N=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,N=this.isub(I),I.negative=1,N._normSign();this.length>I.length?(W=this,B=I):(W=I,B=this);for(var V=0,q=0;q<B.length;q++)N=(0|W.words[q])+(0|B.words[q])+V,this.words[q]=67108863&N,V=N>>>26;for(;V!==0&&q<W.length;q++)N=(0|W.words[q])+V,this.words[q]=67108863&N,V=N>>>26;if(this.length=W.length,V!==0)this.words[this.length]=V,this.length++;else if(W!==this)for(;q<W.length;q++)this.words[q]=W.words[q];return this},l.prototype.add=function(I){var N;return I.negative!==0&&this.negative===0?(I.negative=0,N=this.sub(I),I.negative^=1,N):I.negative===0&&this.negative!==0?(this.negative=0,N=I.sub(this),this.negative=1,N):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},l.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var N=this.iadd(I);return I.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var W,B,V=this.cmp(I);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(W=this,B=I):(W=I,B=this);for(var q=0,ne=0;ne<B.length;ne++)q=(N=(0|W.words[ne])-(0|B.words[ne])+q)>>26,this.words[ne]=67108863&N;for(;q!==0&&ne<W.length;ne++)q=(N=(0|W.words[ne])+q)>>26,this.words[ne]=67108863&N;if(q===0&&ne<W.length&&W!==this)for(;ne<W.length;ne++)this.words[ne]=W.words[ne];return this.length=Math.max(this.length,ne),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(I){return this.clone().isub(I)};var y=function(I,N,W){var B,V,q,ne=I.words,$=N.words,K=W.words,ee=0,J=0|ne[0],Z=8191&J,te=J>>>13,oe=0|ne[1],se=8191&oe,ce=oe>>>13,ye=0|ne[2],me=8191&ye,fe=ye>>>13,pe=0|ne[3],ge=8191&pe,ke=pe>>>13,Ce=0|ne[4],de=8191&Ce,ae=Ce>>>13,re=0|ne[5],he=8191&re,Se=re>>>13,xe=0|ne[6],Te=8191&xe,Ae=xe>>>13,Pe=0|ne[7],De=8191&Pe,ve=Pe>>>13,we=0|ne[8],Ee=8191&we,Fe=we>>>13,Le=0|ne[9],je=8191&Le,Ge=Le>>>13,Je=0|$[0],rt=8191&Je,ot=Je>>>13,yt=0|$[1],_t=8191&yt,mt=yt>>>13,tt=0|$[2],Qe=8191&tt,Dt=tt>>>13,zt=0|$[3],pt=8191&zt,vt=zt>>>13,We=0|$[4],Ze=8191&We,Ne=We>>>13,Xe=0|$[5],st=8191&Xe,lt=Xe>>>13,xt=0|$[6],bt=8191&xt,Ve=xt>>>13,Be=0|$[7],at=8191&Be,ht=Be>>>13,dt=0|$[8],it=8191&dt,kt=dt>>>13,Tt=0|$[9],St=8191&Tt,wt=Tt>>>13;W.negative=I.negative^N.negative,W.length=19;var At=(ee+(B=Math.imul(Z,rt))|0)+((8191&(V=(V=Math.imul(Z,ot))+Math.imul(te,rt)|0))<<13)|0;ee=((q=Math.imul(te,ot))+(V>>>13)|0)+(At>>>26)|0,At&=67108863,B=Math.imul(se,rt),V=(V=Math.imul(se,ot))+Math.imul(ce,rt)|0,q=Math.imul(ce,ot);var Ft=(ee+(B=B+Math.imul(Z,_t)|0)|0)+((8191&(V=(V=V+Math.imul(Z,mt)|0)+Math.imul(te,_t)|0))<<13)|0;ee=((q=q+Math.imul(te,mt)|0)+(V>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,B=Math.imul(me,rt),V=(V=Math.imul(me,ot))+Math.imul(fe,rt)|0,q=Math.imul(fe,ot),B=B+Math.imul(se,_t)|0,V=(V=V+Math.imul(se,mt)|0)+Math.imul(ce,_t)|0,q=q+Math.imul(ce,mt)|0;var jt=(ee+(B=B+Math.imul(Z,Qe)|0)|0)+((8191&(V=(V=V+Math.imul(Z,Dt)|0)+Math.imul(te,Qe)|0))<<13)|0;ee=((q=q+Math.imul(te,Dt)|0)+(V>>>13)|0)+(jt>>>26)|0,jt&=67108863,B=Math.imul(ge,rt),V=(V=Math.imul(ge,ot))+Math.imul(ke,rt)|0,q=Math.imul(ke,ot),B=B+Math.imul(me,_t)|0,V=(V=V+Math.imul(me,mt)|0)+Math.imul(fe,_t)|0,q=q+Math.imul(fe,mt)|0,B=B+Math.imul(se,Qe)|0,V=(V=V+Math.imul(se,Dt)|0)+Math.imul(ce,Qe)|0,q=q+Math.imul(ce,Dt)|0;var rn=(ee+(B=B+Math.imul(Z,pt)|0)|0)+((8191&(V=(V=V+Math.imul(Z,vt)|0)+Math.imul(te,pt)|0))<<13)|0;ee=((q=q+Math.imul(te,vt)|0)+(V>>>13)|0)+(rn>>>26)|0,rn&=67108863,B=Math.imul(de,rt),V=(V=Math.imul(de,ot))+Math.imul(ae,rt)|0,q=Math.imul(ae,ot),B=B+Math.imul(ge,_t)|0,V=(V=V+Math.imul(ge,mt)|0)+Math.imul(ke,_t)|0,q=q+Math.imul(ke,mt)|0,B=B+Math.imul(me,Qe)|0,V=(V=V+Math.imul(me,Dt)|0)+Math.imul(fe,Qe)|0,q=q+Math.imul(fe,Dt)|0,B=B+Math.imul(se,pt)|0,V=(V=V+Math.imul(se,vt)|0)+Math.imul(ce,pt)|0,q=q+Math.imul(ce,vt)|0;var nn=(ee+(B=B+Math.imul(Z,Ze)|0)|0)+((8191&(V=(V=V+Math.imul(Z,Ne)|0)+Math.imul(te,Ze)|0))<<13)|0;ee=((q=q+Math.imul(te,Ne)|0)+(V>>>13)|0)+(nn>>>26)|0,nn&=67108863,B=Math.imul(he,rt),V=(V=Math.imul(he,ot))+Math.imul(Se,rt)|0,q=Math.imul(Se,ot),B=B+Math.imul(de,_t)|0,V=(V=V+Math.imul(de,mt)|0)+Math.imul(ae,_t)|0,q=q+Math.imul(ae,mt)|0,B=B+Math.imul(ge,Qe)|0,V=(V=V+Math.imul(ge,Dt)|0)+Math.imul(ke,Qe)|0,q=q+Math.imul(ke,Dt)|0,B=B+Math.imul(me,pt)|0,V=(V=V+Math.imul(me,vt)|0)+Math.imul(fe,pt)|0,q=q+Math.imul(fe,vt)|0,B=B+Math.imul(se,Ze)|0,V=(V=V+Math.imul(se,Ne)|0)+Math.imul(ce,Ze)|0,q=q+Math.imul(ce,Ne)|0;var on=(ee+(B=B+Math.imul(Z,st)|0)|0)+((8191&(V=(V=V+Math.imul(Z,lt)|0)+Math.imul(te,st)|0))<<13)|0;ee=((q=q+Math.imul(te,lt)|0)+(V>>>13)|0)+(on>>>26)|0,on&=67108863,B=Math.imul(Te,rt),V=(V=Math.imul(Te,ot))+Math.imul(Ae,rt)|0,q=Math.imul(Ae,ot),B=B+Math.imul(he,_t)|0,V=(V=V+Math.imul(he,mt)|0)+Math.imul(Se,_t)|0,q=q+Math.imul(Se,mt)|0,B=B+Math.imul(de,Qe)|0,V=(V=V+Math.imul(de,Dt)|0)+Math.imul(ae,Qe)|0,q=q+Math.imul(ae,Dt)|0,B=B+Math.imul(ge,pt)|0,V=(V=V+Math.imul(ge,vt)|0)+Math.imul(ke,pt)|0,q=q+Math.imul(ke,vt)|0,B=B+Math.imul(me,Ze)|0,V=(V=V+Math.imul(me,Ne)|0)+Math.imul(fe,Ze)|0,q=q+Math.imul(fe,Ne)|0,B=B+Math.imul(se,st)|0,V=(V=V+Math.imul(se,lt)|0)+Math.imul(ce,st)|0,q=q+Math.imul(ce,lt)|0;var Ht=(ee+(B=B+Math.imul(Z,bt)|0)|0)+((8191&(V=(V=V+Math.imul(Z,Ve)|0)+Math.imul(te,bt)|0))<<13)|0;ee=((q=q+Math.imul(te,Ve)|0)+(V>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,B=Math.imul(De,rt),V=(V=Math.imul(De,ot))+Math.imul(ve,rt)|0,q=Math.imul(ve,ot),B=B+Math.imul(Te,_t)|0,V=(V=V+Math.imul(Te,mt)|0)+Math.imul(Ae,_t)|0,q=q+Math.imul(Ae,mt)|0,B=B+Math.imul(he,Qe)|0,V=(V=V+Math.imul(he,Dt)|0)+Math.imul(Se,Qe)|0,q=q+Math.imul(Se,Dt)|0,B=B+Math.imul(de,pt)|0,V=(V=V+Math.imul(de,vt)|0)+Math.imul(ae,pt)|0,q=q+Math.imul(ae,vt)|0,B=B+Math.imul(ge,Ze)|0,V=(V=V+Math.imul(ge,Ne)|0)+Math.imul(ke,Ze)|0,q=q+Math.imul(ke,Ne)|0,B=B+Math.imul(me,st)|0,V=(V=V+Math.imul(me,lt)|0)+Math.imul(fe,st)|0,q=q+Math.imul(fe,lt)|0,B=B+Math.imul(se,bt)|0,V=(V=V+Math.imul(se,Ve)|0)+Math.imul(ce,bt)|0,q=q+Math.imul(ce,Ve)|0;var $t=(ee+(B=B+Math.imul(Z,at)|0)|0)+((8191&(V=(V=V+Math.imul(Z,ht)|0)+Math.imul(te,at)|0))<<13)|0;ee=((q=q+Math.imul(te,ht)|0)+(V>>>13)|0)+($t>>>26)|0,$t&=67108863,B=Math.imul(Ee,rt),V=(V=Math.imul(Ee,ot))+Math.imul(Fe,rt)|0,q=Math.imul(Fe,ot),B=B+Math.imul(De,_t)|0,V=(V=V+Math.imul(De,mt)|0)+Math.imul(ve,_t)|0,q=q+Math.imul(ve,mt)|0,B=B+Math.imul(Te,Qe)|0,V=(V=V+Math.imul(Te,Dt)|0)+Math.imul(Ae,Qe)|0,q=q+Math.imul(Ae,Dt)|0,B=B+Math.imul(he,pt)|0,V=(V=V+Math.imul(he,vt)|0)+Math.imul(Se,pt)|0,q=q+Math.imul(Se,vt)|0,B=B+Math.imul(de,Ze)|0,V=(V=V+Math.imul(de,Ne)|0)+Math.imul(ae,Ze)|0,q=q+Math.imul(ae,Ne)|0,B=B+Math.imul(ge,st)|0,V=(V=V+Math.imul(ge,lt)|0)+Math.imul(ke,st)|0,q=q+Math.imul(ke,lt)|0,B=B+Math.imul(me,bt)|0,V=(V=V+Math.imul(me,Ve)|0)+Math.imul(fe,bt)|0,q=q+Math.imul(fe,Ve)|0,B=B+Math.imul(se,at)|0,V=(V=V+Math.imul(se,ht)|0)+Math.imul(ce,at)|0,q=q+Math.imul(ce,ht)|0;var bn=(ee+(B=B+Math.imul(Z,it)|0)|0)+((8191&(V=(V=V+Math.imul(Z,kt)|0)+Math.imul(te,it)|0))<<13)|0;ee=((q=q+Math.imul(te,kt)|0)+(V>>>13)|0)+(bn>>>26)|0,bn&=67108863,B=Math.imul(je,rt),V=(V=Math.imul(je,ot))+Math.imul(Ge,rt)|0,q=Math.imul(Ge,ot),B=B+Math.imul(Ee,_t)|0,V=(V=V+Math.imul(Ee,mt)|0)+Math.imul(Fe,_t)|0,q=q+Math.imul(Fe,mt)|0,B=B+Math.imul(De,Qe)|0,V=(V=V+Math.imul(De,Dt)|0)+Math.imul(ve,Qe)|0,q=q+Math.imul(ve,Dt)|0,B=B+Math.imul(Te,pt)|0,V=(V=V+Math.imul(Te,vt)|0)+Math.imul(Ae,pt)|0,q=q+Math.imul(Ae,vt)|0,B=B+Math.imul(he,Ze)|0,V=(V=V+Math.imul(he,Ne)|0)+Math.imul(Se,Ze)|0,q=q+Math.imul(Se,Ne)|0,B=B+Math.imul(de,st)|0,V=(V=V+Math.imul(de,lt)|0)+Math.imul(ae,st)|0,q=q+Math.imul(ae,lt)|0,B=B+Math.imul(ge,bt)|0,V=(V=V+Math.imul(ge,Ve)|0)+Math.imul(ke,bt)|0,q=q+Math.imul(ke,Ve)|0,B=B+Math.imul(me,at)|0,V=(V=V+Math.imul(me,ht)|0)+Math.imul(fe,at)|0,q=q+Math.imul(fe,ht)|0,B=B+Math.imul(se,it)|0,V=(V=V+Math.imul(se,kt)|0)+Math.imul(ce,it)|0,q=q+Math.imul(ce,kt)|0;var ln=(ee+(B=B+Math.imul(Z,St)|0)|0)+((8191&(V=(V=V+Math.imul(Z,wt)|0)+Math.imul(te,St)|0))<<13)|0;ee=((q=q+Math.imul(te,wt)|0)+(V>>>13)|0)+(ln>>>26)|0,ln&=67108863,B=Math.imul(je,_t),V=(V=Math.imul(je,mt))+Math.imul(Ge,_t)|0,q=Math.imul(Ge,mt),B=B+Math.imul(Ee,Qe)|0,V=(V=V+Math.imul(Ee,Dt)|0)+Math.imul(Fe,Qe)|0,q=q+Math.imul(Fe,Dt)|0,B=B+Math.imul(De,pt)|0,V=(V=V+Math.imul(De,vt)|0)+Math.imul(ve,pt)|0,q=q+Math.imul(ve,vt)|0,B=B+Math.imul(Te,Ze)|0,V=(V=V+Math.imul(Te,Ne)|0)+Math.imul(Ae,Ze)|0,q=q+Math.imul(Ae,Ne)|0,B=B+Math.imul(he,st)|0,V=(V=V+Math.imul(he,lt)|0)+Math.imul(Se,st)|0,q=q+Math.imul(Se,lt)|0,B=B+Math.imul(de,bt)|0,V=(V=V+Math.imul(de,Ve)|0)+Math.imul(ae,bt)|0,q=q+Math.imul(ae,Ve)|0,B=B+Math.imul(ge,at)|0,V=(V=V+Math.imul(ge,ht)|0)+Math.imul(ke,at)|0,q=q+Math.imul(ke,ht)|0,B=B+Math.imul(me,it)|0,V=(V=V+Math.imul(me,kt)|0)+Math.imul(fe,it)|0,q=q+Math.imul(fe,kt)|0;var Kt=(ee+(B=B+Math.imul(se,St)|0)|0)+((8191&(V=(V=V+Math.imul(se,wt)|0)+Math.imul(ce,St)|0))<<13)|0;ee=((q=q+Math.imul(ce,wt)|0)+(V>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,B=Math.imul(je,Qe),V=(V=Math.imul(je,Dt))+Math.imul(Ge,Qe)|0,q=Math.imul(Ge,Dt),B=B+Math.imul(Ee,pt)|0,V=(V=V+Math.imul(Ee,vt)|0)+Math.imul(Fe,pt)|0,q=q+Math.imul(Fe,vt)|0,B=B+Math.imul(De,Ze)|0,V=(V=V+Math.imul(De,Ne)|0)+Math.imul(ve,Ze)|0,q=q+Math.imul(ve,Ne)|0,B=B+Math.imul(Te,st)|0,V=(V=V+Math.imul(Te,lt)|0)+Math.imul(Ae,st)|0,q=q+Math.imul(Ae,lt)|0,B=B+Math.imul(he,bt)|0,V=(V=V+Math.imul(he,Ve)|0)+Math.imul(Se,bt)|0,q=q+Math.imul(Se,Ve)|0,B=B+Math.imul(de,at)|0,V=(V=V+Math.imul(de,ht)|0)+Math.imul(ae,at)|0,q=q+Math.imul(ae,ht)|0,B=B+Math.imul(ge,it)|0,V=(V=V+Math.imul(ge,kt)|0)+Math.imul(ke,it)|0,q=q+Math.imul(ke,kt)|0;var fn=(ee+(B=B+Math.imul(me,St)|0)|0)+((8191&(V=(V=V+Math.imul(me,wt)|0)+Math.imul(fe,St)|0))<<13)|0;ee=((q=q+Math.imul(fe,wt)|0)+(V>>>13)|0)+(fn>>>26)|0,fn&=67108863,B=Math.imul(je,pt),V=(V=Math.imul(je,vt))+Math.imul(Ge,pt)|0,q=Math.imul(Ge,vt),B=B+Math.imul(Ee,Ze)|0,V=(V=V+Math.imul(Ee,Ne)|0)+Math.imul(Fe,Ze)|0,q=q+Math.imul(Fe,Ne)|0,B=B+Math.imul(De,st)|0,V=(V=V+Math.imul(De,lt)|0)+Math.imul(ve,st)|0,q=q+Math.imul(ve,lt)|0,B=B+Math.imul(Te,bt)|0,V=(V=V+Math.imul(Te,Ve)|0)+Math.imul(Ae,bt)|0,q=q+Math.imul(Ae,Ve)|0,B=B+Math.imul(he,at)|0,V=(V=V+Math.imul(he,ht)|0)+Math.imul(Se,at)|0,q=q+Math.imul(Se,ht)|0,B=B+Math.imul(de,it)|0,V=(V=V+Math.imul(de,kt)|0)+Math.imul(ae,it)|0,q=q+Math.imul(ae,kt)|0;var en=(ee+(B=B+Math.imul(ge,St)|0)|0)+((8191&(V=(V=V+Math.imul(ge,wt)|0)+Math.imul(ke,St)|0))<<13)|0;ee=((q=q+Math.imul(ke,wt)|0)+(V>>>13)|0)+(en>>>26)|0,en&=67108863,B=Math.imul(je,Ze),V=(V=Math.imul(je,Ne))+Math.imul(Ge,Ze)|0,q=Math.imul(Ge,Ne),B=B+Math.imul(Ee,st)|0,V=(V=V+Math.imul(Ee,lt)|0)+Math.imul(Fe,st)|0,q=q+Math.imul(Fe,lt)|0,B=B+Math.imul(De,bt)|0,V=(V=V+Math.imul(De,Ve)|0)+Math.imul(ve,bt)|0,q=q+Math.imul(ve,Ve)|0,B=B+Math.imul(Te,at)|0,V=(V=V+Math.imul(Te,ht)|0)+Math.imul(Ae,at)|0,q=q+Math.imul(Ae,ht)|0,B=B+Math.imul(he,it)|0,V=(V=V+Math.imul(he,kt)|0)+Math.imul(Se,it)|0,q=q+Math.imul(Se,kt)|0;var un=(ee+(B=B+Math.imul(de,St)|0)|0)+((8191&(V=(V=V+Math.imul(de,wt)|0)+Math.imul(ae,St)|0))<<13)|0;ee=((q=q+Math.imul(ae,wt)|0)+(V>>>13)|0)+(un>>>26)|0,un&=67108863,B=Math.imul(je,st),V=(V=Math.imul(je,lt))+Math.imul(Ge,st)|0,q=Math.imul(Ge,lt),B=B+Math.imul(Ee,bt)|0,V=(V=V+Math.imul(Ee,Ve)|0)+Math.imul(Fe,bt)|0,q=q+Math.imul(Fe,Ve)|0,B=B+Math.imul(De,at)|0,V=(V=V+Math.imul(De,ht)|0)+Math.imul(ve,at)|0,q=q+Math.imul(ve,ht)|0,B=B+Math.imul(Te,it)|0,V=(V=V+Math.imul(Te,kt)|0)+Math.imul(Ae,it)|0,q=q+Math.imul(Ae,kt)|0;var An=(ee+(B=B+Math.imul(he,St)|0)|0)+((8191&(V=(V=V+Math.imul(he,wt)|0)+Math.imul(Se,St)|0))<<13)|0;ee=((q=q+Math.imul(Se,wt)|0)+(V>>>13)|0)+(An>>>26)|0,An&=67108863,B=Math.imul(je,bt),V=(V=Math.imul(je,Ve))+Math.imul(Ge,bt)|0,q=Math.imul(Ge,Ve),B=B+Math.imul(Ee,at)|0,V=(V=V+Math.imul(Ee,ht)|0)+Math.imul(Fe,at)|0,q=q+Math.imul(Fe,ht)|0,B=B+Math.imul(De,it)|0,V=(V=V+Math.imul(De,kt)|0)+Math.imul(ve,it)|0,q=q+Math.imul(ve,kt)|0;var wn=(ee+(B=B+Math.imul(Te,St)|0)|0)+((8191&(V=(V=V+Math.imul(Te,wt)|0)+Math.imul(Ae,St)|0))<<13)|0;ee=((q=q+Math.imul(Ae,wt)|0)+(V>>>13)|0)+(wn>>>26)|0,wn&=67108863,B=Math.imul(je,at),V=(V=Math.imul(je,ht))+Math.imul(Ge,at)|0,q=Math.imul(Ge,ht),B=B+Math.imul(Ee,it)|0,V=(V=V+Math.imul(Ee,kt)|0)+Math.imul(Fe,it)|0,q=q+Math.imul(Fe,kt)|0;var On=(ee+(B=B+Math.imul(De,St)|0)|0)+((8191&(V=(V=V+Math.imul(De,wt)|0)+Math.imul(ve,St)|0))<<13)|0;ee=((q=q+Math.imul(ve,wt)|0)+(V>>>13)|0)+(On>>>26)|0,On&=67108863,B=Math.imul(je,it),V=(V=Math.imul(je,kt))+Math.imul(Ge,it)|0,q=Math.imul(Ge,kt);var Tn=(ee+(B=B+Math.imul(Ee,St)|0)|0)+((8191&(V=(V=V+Math.imul(Ee,wt)|0)+Math.imul(Fe,St)|0))<<13)|0;ee=((q=q+Math.imul(Fe,wt)|0)+(V>>>13)|0)+(Tn>>>26)|0,Tn&=67108863;var Cn=(ee+(B=Math.imul(je,St))|0)+((8191&(V=(V=Math.imul(je,wt))+Math.imul(Ge,St)|0))<<13)|0;return ee=((q=Math.imul(Ge,wt))+(V>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,K[0]=At,K[1]=Ft,K[2]=jt,K[3]=rn,K[4]=nn,K[5]=on,K[6]=Ht,K[7]=$t,K[8]=bn,K[9]=ln,K[10]=Kt,K[11]=fn,K[12]=en,K[13]=un,K[14]=An,K[15]=wn,K[16]=On,K[17]=Tn,K[18]=Cn,ee!==0&&(K[19]=ee,W.length++),W};function A(I,N,W){return new d().mulp(I,N,W)}function d(I,N){this.x=I,this.y=N}Math.imul||(y=x),l.prototype.mulTo=function(I,N){var W,B=this.length+I.length;return W=this.length===10&&I.length===10?y(this,I,N):B<63?x(this,I,N):B<1024?function(V,q,ne){ne.negative=q.negative^V.negative,ne.length=V.length+q.length;for(var $=0,K=0,ee=0;ee<ne.length-1;ee++){var J=K;K=0;for(var Z=67108863&$,te=Math.min(ee,q.length-1),oe=Math.max(0,ee-V.length+1);oe<=te;oe++){var se=ee-oe,ce=(0|V.words[se])*(0|q.words[oe]),ye=67108863&ce;Z=67108863&(ye=ye+Z|0),K+=(J=(J=J+(ce/67108864|0)|0)+(ye>>>26)|0)>>>26,J&=67108863}ne.words[ee]=Z,$=J,J=K}return $!==0?ne.words[ee]=$:ne.length--,ne.strip()}(this,I,N):A(this,I,N),W},d.prototype.makeRBT=function(I){for(var N=new Array(I),W=l.prototype._countBits(I)-1,B=0;B<I;B++)N[B]=this.revBin(B,W,I);return N},d.prototype.revBin=function(I,N,W){if(I===0||I===W-1)return I;for(var B=0,V=0;V<N;V++)B|=(1&I)<<N-V-1,I>>=1;return B},d.prototype.permute=function(I,N,W,B,V,q){for(var ne=0;ne<q;ne++)B[ne]=N[I[ne]],V[ne]=W[I[ne]]},d.prototype.transform=function(I,N,W,B,V,q){this.permute(q,I,N,W,B,V);for(var ne=1;ne<V;ne<<=1)for(var $=ne<<1,K=Math.cos(2*Math.PI/$),ee=Math.sin(2*Math.PI/$),J=0;J<V;J+=$)for(var Z=K,te=ee,oe=0;oe<ne;oe++){var se=W[J+oe],ce=B[J+oe],ye=W[J+oe+ne],me=B[J+oe+ne],fe=Z*ye-te*me;me=Z*me+te*ye,ye=fe,W[J+oe]=se+ye,B[J+oe]=ce+me,W[J+oe+ne]=se-ye,B[J+oe+ne]=ce-me,oe!==$&&(fe=K*Z-ee*te,te=K*te+ee*Z,Z=fe)}},d.prototype.guessLen13b=function(I,N){var W=1|Math.max(N,I),B=1&W,V=0;for(W=W/2|0;W;W>>>=1)V++;return 1<<V+1+B},d.prototype.conjugate=function(I,N,W){if(!(W<=1))for(var B=0;B<W/2;B++){var V=I[B];I[B]=I[W-B-1],I[W-B-1]=V,V=N[B],N[B]=-N[W-B-1],N[W-B-1]=-V}},d.prototype.normalize13b=function(I,N){for(var W=0,B=0;B<N/2;B++){var V=8192*Math.round(I[2*B+1]/N)+Math.round(I[2*B]/N)+W;I[B]=67108863&V,W=V<67108864?0:V/67108864|0}return I},d.prototype.convert13b=function(I,N,W,B){for(var V=0,q=0;q<N;q++)V+=0|I[q],W[2*q]=8191&V,V>>>=13,W[2*q+1]=8191&V,V>>>=13;for(q=2*N;q<B;++q)W[q]=0;a(V===0),a((-8192&V)==0)},d.prototype.stub=function(I){for(var N=new Array(I),W=0;W<I;W++)N[W]=0;return N},d.prototype.mulp=function(I,N,W){var B=2*this.guessLen13b(I.length,N.length),V=this.makeRBT(B),q=this.stub(B),ne=new Array(B),$=new Array(B),K=new Array(B),ee=new Array(B),J=new Array(B),Z=new Array(B),te=W.words;te.length=B,this.convert13b(I.words,I.length,ne,B),this.convert13b(N.words,N.length,ee,B),this.transform(ne,q,$,K,B,V),this.transform(ee,q,J,Z,B,V);for(var oe=0;oe<B;oe++){var se=$[oe]*J[oe]-K[oe]*Z[oe];K[oe]=$[oe]*Z[oe]+K[oe]*J[oe],$[oe]=se}return this.conjugate($,K,B),this.transform($,K,te,q,B,V),this.conjugate(te,q,B),this.normalize13b(te,B),W.negative=I.negative^N.negative,W.length=I.length+N.length,W.strip()},l.prototype.mul=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),this.mulTo(I,N)},l.prototype.mulf=function(I){var N=new l(null);return N.words=new Array(this.length+I.length),A(this,I,N)},l.prototype.imul=function(I){return this.clone().mulTo(I,this)},l.prototype.imuln=function(I){a(typeof I=="number"),a(I<67108864);for(var N=0,W=0;W<this.length;W++){var B=(0|this.words[W])*I,V=(67108863&B)+(67108863&N);N>>=26,N+=B/67108864|0,N+=V>>>26,this.words[W]=67108863&V}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(I){return this.clone().imuln(I)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(I){var N=function(q){for(var ne=new Array(q.bitLength()),$=0;$<ne.length;$++){var K=$/26|0,ee=$%26;ne[$]=(q.words[K]&1<<ee)>>>ee}return ne}(I);if(N.length===0)return new l(1);for(var W=this,B=0;B<N.length&&N[B]===0;B++,W=W.sqr());if(++B<N.length)for(var V=W.sqr();B<N.length;B++,V=V.sqr())N[B]!==0&&(W=W.mul(V));return W},l.prototype.iushln=function(I){a(typeof I=="number"&&I>=0);var N,W=I%26,B=(I-W)/26,V=67108863>>>26-W<<26-W;if(W!==0){var q=0;for(N=0;N<this.length;N++){var ne=this.words[N]&V,$=(0|this.words[N])-ne<<W;this.words[N]=$|q,q=ne>>>26-W}q&&(this.words[N]=q,this.length++)}if(B!==0){for(N=this.length-1;N>=0;N--)this.words[N+B]=this.words[N];for(N=0;N<B;N++)this.words[N]=0;this.length+=B}return this.strip()},l.prototype.ishln=function(I){return a(this.negative===0),this.iushln(I)},l.prototype.iushrn=function(I,N,W){var B;a(typeof I=="number"&&I>=0),B=N?(N-N%26)/26:0;var V=I%26,q=Math.min((I-V)/26,this.length),ne=67108863^67108863>>>V<<V,$=W;if(B-=q,B=Math.max(0,B),$){for(var K=0;K<q;K++)$.words[K]=this.words[K];$.length=q}if(q!==0)if(this.length>q)for(this.length-=q,K=0;K<this.length;K++)this.words[K]=this.words[K+q];else this.words[0]=0,this.length=1;var ee=0;for(K=this.length-1;K>=0&&(ee!==0||K>=B);K--){var J=0|this.words[K];this.words[K]=ee<<26-V|J>>>V,ee=J&ne}return $&&ee!==0&&($.words[$.length++]=ee),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(I,N,W){return a(this.negative===0),this.iushrn(I,N,W)},l.prototype.shln=function(I){return this.clone().ishln(I)},l.prototype.ushln=function(I){return this.clone().iushln(I)},l.prototype.shrn=function(I){return this.clone().ishrn(I)},l.prototype.ushrn=function(I){return this.clone().iushrn(I)},l.prototype.testn=function(I){a(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26,B=1<<N;return!(this.length<=W||!(this.words[W]&B))},l.prototype.imaskn=function(I){a(typeof I=="number"&&I>=0);var N=I%26,W=(I-N)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var B=67108863^67108863>>>N<<N;this.words[this.length-1]&=B}return this.strip()},l.prototype.maskn=function(I){return this.clone().imaskn(I)},l.prototype.iaddn=function(I){return a(typeof I=="number"),a(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},l.prototype._iaddn=function(I){this.words[0]+=I;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(I){if(a(typeof I=="number"),a(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(I){return this.clone().iaddn(I)},l.prototype.subn=function(I){return this.clone().isubn(I)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(I,N,W){var B,V,q=I.length+W;this._expand(q);var ne=0;for(B=0;B<I.length;B++){V=(0|this.words[B+W])+ne;var $=(0|I.words[B])*N;ne=((V-=67108863&$)>>26)-($/67108864|0),this.words[B+W]=67108863&V}for(;B<this.length-W;B++)ne=(V=(0|this.words[B+W])+ne)>>26,this.words[B+W]=67108863&V;if(ne===0)return this.strip();for(a(ne===-1),ne=0,B=0;B<this.length;B++)ne=(V=-(0|this.words[B])+ne)>>26,this.words[B]=67108863&V;return this.negative=1,this.strip()},l.prototype._wordDiv=function(I,N){var W=(this.length,I.length),B=this.clone(),V=I,q=0|V.words[V.length-1];(W=26-this._countBits(q))!=0&&(V=V.ushln(W),B.iushln(W),q=0|V.words[V.length-1]);var ne,$=B.length-V.length;if(N!=="mod"){(ne=new l(null)).length=$+1,ne.words=new Array(ne.length);for(var K=0;K<ne.length;K++)ne.words[K]=0}var ee=B.clone()._ishlnsubmul(V,1,$);ee.negative===0&&(B=ee,ne&&(ne.words[$]=1));for(var J=$-1;J>=0;J--){var Z=67108864*(0|B.words[V.length+J])+(0|B.words[V.length+J-1]);for(Z=Math.min(Z/q|0,67108863),B._ishlnsubmul(V,Z,J);B.negative!==0;)Z--,B.negative=0,B._ishlnsubmul(V,1,J),B.isZero()||(B.negative^=1);ne&&(ne.words[J]=Z)}return ne&&ne.strip(),B.strip(),N!=="div"&&W!==0&&B.iushrn(W),{div:ne||null,mod:B}},l.prototype.divmod=function(I,N,W){return a(!I.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&I.negative===0?(q=this.neg().divmod(I,N),N!=="mod"&&(B=q.div.neg()),N!=="div"&&(V=q.mod.neg(),W&&V.negative!==0&&V.iadd(I)),{div:B,mod:V}):this.negative===0&&I.negative!==0?(q=this.divmod(I.neg(),N),N!=="mod"&&(B=q.div.neg()),{div:B,mod:q.mod}):this.negative&I.negative?(q=this.neg().divmod(I.neg(),N),N!=="div"&&(V=q.mod.neg(),W&&V.negative!==0&&V.isub(I)),{div:q.div,mod:V}):I.length>this.length||this.cmp(I)<0?{div:new l(0),mod:this}:I.length===1?N==="div"?{div:this.divn(I.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new l(this.modn(I.words[0]))}:this._wordDiv(I,N);var B,V,q},l.prototype.div=function(I){return this.divmod(I,"div",!1).div},l.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},l.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},l.prototype.divRound=function(I){var N=this.divmod(I);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(I):N.mod,B=I.ushrn(1),V=I.andln(1),q=W.cmp(B);return q<0||V===1&&q===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(I){a(I<=67108863);for(var N=67108864%I,W=0,B=this.length-1;B>=0;B--)W=(N*W+(0|this.words[B]))%I;return W},l.prototype.idivn=function(I){a(I<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var B=(0|this.words[W])+67108864*N;this.words[W]=B/I|0,N=B%I}return this.strip()},l.prototype.divn=function(I){return this.clone().idivn(I)},l.prototype.egcd=function(I){a(I.negative===0),a(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var B=new l(1),V=new l(0),q=new l(0),ne=new l(1),$=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++$;for(var K=W.clone(),ee=N.clone();!N.isZero();){for(var J=0,Z=1;!(N.words[0]&Z)&&J<26;++J,Z<<=1);if(J>0)for(N.iushrn(J);J-- >0;)(B.isOdd()||V.isOdd())&&(B.iadd(K),V.isub(ee)),B.iushrn(1),V.iushrn(1);for(var te=0,oe=1;!(W.words[0]&oe)&&te<26;++te,oe<<=1);if(te>0)for(W.iushrn(te);te-- >0;)(q.isOdd()||ne.isOdd())&&(q.iadd(K),ne.isub(ee)),q.iushrn(1),ne.iushrn(1);N.cmp(W)>=0?(N.isub(W),B.isub(q),V.isub(ne)):(W.isub(N),q.isub(B),ne.isub(V))}return{a:q,b:ne,gcd:W.iushln($)}},l.prototype._invmp=function(I){a(I.negative===0),a(!I.isZero());var N=this,W=I.clone();N=N.negative!==0?N.umod(I):N.clone();for(var B,V=new l(1),q=new l(0),ne=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var $=0,K=1;!(N.words[0]&K)&&$<26;++$,K<<=1);if($>0)for(N.iushrn($);$-- >0;)V.isOdd()&&V.iadd(ne),V.iushrn(1);for(var ee=0,J=1;!(W.words[0]&J)&&ee<26;++ee,J<<=1);if(ee>0)for(W.iushrn(ee);ee-- >0;)q.isOdd()&&q.iadd(ne),q.iushrn(1);N.cmp(W)>=0?(N.isub(W),V.isub(q)):(W.isub(N),q.isub(V))}return(B=N.cmpn(1)===0?V:q).cmpn(0)<0&&B.iadd(I),B},l.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var N=this.clone(),W=I.clone();N.negative=0,W.negative=0;for(var B=0;N.isEven()&&W.isEven();B++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var V=N.cmp(W);if(V<0){var q=N;N=W,W=q}else if(V===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(B)},l.prototype.invm=function(I){return this.egcd(I).a.umod(I)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(I){return this.words[0]&I},l.prototype.bincn=function(I){a(typeof I=="number");var N=I%26,W=(I-N)/26,B=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=B,this;for(var V=B,q=W;V!==0&&q<this.length;q++){var ne=0|this.words[q];V=(ne+=V)>>>26,ne&=67108863,this.words[q]=ne}return V!==0&&(this.words[q]=V,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(I){var N,W=I<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(I=-I),a(I<=67108863,"Number is too big");var B=0|this.words[0];N=B===I?0:B<I?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var N=this.ucmp(I);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var B=0|this.words[W],V=0|I.words[W];if(B!==V){B<V?N=-1:B>V&&(N=1);break}}return N},l.prototype.gtn=function(I){return this.cmpn(I)===1},l.prototype.gt=function(I){return this.cmp(I)===1},l.prototype.gten=function(I){return this.cmpn(I)>=0},l.prototype.gte=function(I){return this.cmp(I)>=0},l.prototype.ltn=function(I){return this.cmpn(I)===-1},l.prototype.lt=function(I){return this.cmp(I)===-1},l.prototype.lten=function(I){return this.cmpn(I)<=0},l.prototype.lte=function(I){return this.cmp(I)<=0},l.prototype.eqn=function(I){return this.cmpn(I)===0},l.prototype.eq=function(I){return this.cmp(I)===0},l.red=function(I){return new F(I)},l.prototype.toRed=function(I){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(I){return this.red=I,this},l.prototype.forceRed=function(I){return a(!this.red,"Already a number in reduction context"),this._forceRed(I)},l.prototype.redAdd=function(I){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},l.prototype.redIAdd=function(I){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},l.prototype.redSub=function(I){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},l.prototype.redISub=function(I){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},l.prototype.redShl=function(I){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},l.prototype.redMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},l.prototype.redIMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(I){return a(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var S={k256:null,p224:null,p192:null,p25519:null};function k(I,N){this.name=I,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function L(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(I){if(typeof I=="string"){var N=l._prime(I);this.m=N.p,this.prime=N}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function U(I){F.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var I=new l(null);return I.words=new Array(Math.ceil(this.n/13)),I},k.prototype.ireduce=function(I){var N,W=I;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var B=N<this.n?-1:W.ucmp(this.p);return B===0?(W.words[0]=0,W.length=1):B>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},k.prototype.split=function(I,N){I.iushrn(this.n,0,N)},k.prototype.imulK=function(I){return I.imul(this.k)},s(E,k),E.prototype.split=function(I,N){for(var W=4194303,B=Math.min(I.length,9),V=0;V<B;V++)N.words[V]=I.words[V];if(N.length=B,I.length<=9)return I.words[0]=0,void(I.length=1);var q=I.words[9];for(N.words[N.length++]=q&W,V=10;V<I.length;V++){var ne=0|I.words[V];I.words[V-10]=(ne&W)<<4|q>>>22,q=ne}q>>>=22,I.words[V-10]=q,q===0&&I.length>10?I.length-=10:I.length-=9},E.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var N=0,W=0;W<I.length;W++){var B=0|I.words[W];N+=977*B,I.words[W]=67108863&N,N=64*B+(N/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},s(L,k),s(O,k),s(P,k),P.prototype.imulK=function(I){for(var N=0,W=0;W<I.length;W++){var B=19*(0|I.words[W])+N,V=67108863&B;B>>>=26,I.words[W]=V,N=B}return N!==0&&(I.words[I.length++]=N),I},l._prime=function(I){if(S[I])return S[I];var N;if(I==="k256")N=new E;else if(I==="p224")N=new L;else if(I==="p192")N=new O;else{if(I!=="p25519")throw new Error("Unknown prime "+I);N=new P}return S[I]=N,N},F.prototype._verify1=function(I){a(I.negative===0,"red works only with positives"),a(I.red,"red works only with red numbers")},F.prototype._verify2=function(I,N){a((I.negative|N.negative)==0,"red works only with positives"),a(I.red&&I.red===N.red,"red works only with red numbers")},F.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},F.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},F.prototype.add=function(I,N){this._verify2(I,N);var W=I.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},F.prototype.iadd=function(I,N){this._verify2(I,N);var W=I.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},F.prototype.sub=function(I,N){this._verify2(I,N);var W=I.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},F.prototype.isub=function(I,N){this._verify2(I,N);var W=I.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},F.prototype.shl=function(I,N){return this._verify1(I),this.imod(I.ushln(N))},F.prototype.imul=function(I,N){return this._verify2(I,N),this.imod(I.imul(N))},F.prototype.mul=function(I,N){return this._verify2(I,N),this.imod(I.mul(N))},F.prototype.isqr=function(I){return this.imul(I,I.clone())},F.prototype.sqr=function(I){return this.mul(I,I)},F.prototype.sqrt=function(I){if(I.isZero())return I.clone();var N=this.m.andln(3);if(a(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(I,W)}for(var B=this.m.subn(1),V=0;!B.isZero()&&B.andln(1)===0;)V++,B.iushrn(1);a(!B.isZero());var q=new l(1).toRed(this),ne=q.redNeg(),$=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new l(2*K*K).toRed(this);this.pow(K,$).cmp(ne)!==0;)K.redIAdd(ne);for(var ee=this.pow(K,B),J=this.pow(I,B.addn(1).iushrn(1)),Z=this.pow(I,B),te=V;Z.cmp(q)!==0;){for(var oe=Z,se=0;oe.cmp(q)!==0;se++)oe=oe.redSqr();a(se<te);var ce=this.pow(ee,new l(1).iushln(te-se-1));J=J.redMul(ce),ee=ce.redSqr(),Z=Z.redMul(ee),te=se}return J},F.prototype.invm=function(I){var N=I._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},F.prototype.pow=function(I,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return I.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=I;for(var B=2;B<W.length;B++)W[B]=this.mul(W[B-1],I);var V=W[0],q=0,ne=0,$=N.bitLength()%26;for($===0&&($=26),B=N.length-1;B>=0;B--){for(var K=N.words[B],ee=$-1;ee>=0;ee--){var J=K>>ee&1;V!==W[0]&&(V=this.sqr(V)),J!==0||q!==0?(q<<=1,q|=J,(++ne==4||B===0&&ee===0)&&(V=this.mul(V,W[q]),ne=0,q=0)):ne=0}$=26}return V},F.prototype.convertTo=function(I){var N=I.umod(this.m);return N===I?N.clone():N},F.prototype.convertFrom=function(I){var N=I.clone();return N.red=null,N},l.mont=function(I){return new U(I)},s(U,F),U.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},U.prototype.convertFrom=function(I){var N=this.imod(I.mul(this.rinv));return N.red=null,N},U.prototype.imul=function(I,N){if(I.isZero()||N.isZero())return I.words[0]=0,I.length=1,I;var W=I.imul(N),B=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=W.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},U.prototype.mul=function(I,N){if(I.isZero()||N.isZero())return new l(0)._forceRed(this);var W=I.mul(N),B=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=W.isub(B).iushrn(this.shift),q=V;return V.cmp(this.m)>=0?q=V.isub(this.m):V.cmpn(0)<0&&(q=V.iadd(this.m)),q._forceRed(this)},U.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(c=t.nmd(c),this)},6204:function(c){"use strict";c.exports=function(o){var t,i,n,a=o.length,s=0;for(t=0;t<a;++t)s+=o[t].length;var l=new Array(s),u=0;for(t=0;t<a;++t){var p=o[t],f=p.length;for(i=0;i<f;++i){var m=l[u++]=new Array(f-1),h=0;for(n=0;n<f;++n)n!==i&&(m[h++]=p[n]);if(1&i){var g=m[1];m[1]=m[0],m[0]=g}}}return l}},6867:function(c,o,t){"use strict";c.exports=function(m,h,g){switch(arguments.length){case 1:return i=[],p(v=m,v,f,!0),i;case 2:return typeof h=="function"?p(m,m,h,!0):function(x,y){return i=[],p(x,y,f,!1),i}(m,h);case 3:return p(m,h,g,!1);default:throw new Error("box-intersect: Invalid arguments")}var v};var i,n=t(1888),a=t(855),s=t(7150);function l(m,h){for(var g=0;g<m;++g)if(!(h[g]<=h[g+m]))return!0;return!1}function u(m,h,g,v){for(var x=0,y=0,A=0,d=m.length;A<d;++A){var S=m[A];if(!l(h,S)){for(var k=0;k<2*h;++k)g[x++]=S[k];v[y++]=A}}return y}function p(m,h,g,v){var x=m.length,y=h.length;if(!(x<=0||y<=0)){var A=m[0].length>>>1;if(!(A<=0)){var d,S=n.mallocDouble(2*A*x),k=n.mallocInt32(x);if((x=u(m,A,S,k))>0){if(A===1&&v)a.init(x),d=a.sweepComplete(A,g,0,x,S,k,0,x,S,k);else{var E=n.mallocDouble(2*A*y),L=n.mallocInt32(y);(y=u(h,A,E,L))>0&&(a.init(x+y),d=A===1?a.sweepBipartite(A,g,0,x,S,k,0,y,E,L):s(A,g,v,x,S,k,y,E,L),n.free(E),n.free(L))}n.free(S),n.free(k)}return d}}}function f(m,h){i.push([m,h])}},2455:function(c,o){"use strict";function t(i){return i?function(n,a,s,l,u,p,f,m,h,g,v){return u-l>h-m?function(x,y,A,d,S,k,E,L,O,P,F){for(var U=2*x,I=d,N=U*d;I<S;++I,N+=U){var W=k[y+N],B=k[y+N+x],V=E[I];e:for(var q=L,ne=U*L;q<O;++q,ne+=U){var $=P[y+ne],K=P[y+ne+x],ee=F[q];if(!(K<W||B<$)){for(var J=y+1;J<x;++J){var Z=k[J+N],te=k[J+x+N],oe=P[J+ne],se=P[J+x+ne];if(te<oe||se<Z)continue e}var ce=A(V,ee);if(ce!==void 0)return ce}}}}(n,a,s,l,u,p,f,m,h,g,v):function(x,y,A,d,S,k,E,L,O,P,F){for(var U=2*x,I=L,N=U*L;I<O;++I,N+=U){var W=P[y+N],B=P[y+N+x],V=F[I];e:for(var q=d,ne=U*d;q<S;++q,ne+=U){var $=k[y+ne],K=k[y+ne+x],ee=E[q];if(!(B<$||K<W)){for(var J=y+1;J<x;++J){var Z=k[J+ne],te=k[J+x+ne],oe=P[J+N],se=P[J+x+N];if(te<oe||se<Z)continue e}var ce=A(ee,V);if(ce!==void 0)return ce}}}}(n,a,s,l,u,p,f,m,h,g,v)}:function(n,a,s,l,u,p,f,m,h,g,v,x){return p-u>g-h?l?function(y,A,d,S,k,E,L,O,P,F,U){for(var I=2*y,N=S,W=I*S;N<k;++N,W+=I){var B=E[A+W],V=E[A+W+y],q=L[N];e:for(var ne=O,$=I*O;ne<P;++ne,$+=I){var K=F[A+$],ee=U[ne];if(!(K<=B||V<K)){for(var J=A+1;J<y;++J){var Z=E[J+W],te=E[J+y+W],oe=F[J+$],se=F[J+y+$];if(te<oe||se<Z)continue e}var ce=d(ee,q);if(ce!==void 0)return ce}}}}(n,a,s,u,p,f,m,h,g,v,x):function(y,A,d,S,k,E,L,O,P,F,U){for(var I=2*y,N=S,W=I*S;N<k;++N,W+=I){var B=E[A+W],V=E[A+W+y],q=L[N];e:for(var ne=O,$=I*O;ne<P;++ne,$+=I){var K=F[A+$],ee=U[ne];if(!(K<B||V<K)){for(var J=A+1;J<y;++J){var Z=E[J+W],te=E[J+y+W],oe=F[J+$],se=F[J+y+$];if(te<oe||se<Z)continue e}var ce=d(q,ee);if(ce!==void 0)return ce}}}}(n,a,s,u,p,f,m,h,g,v,x):l?function(y,A,d,S,k,E,L,O,P,F,U){for(var I=2*y,N=O,W=I*O;N<P;++N,W+=I){var B=F[A+W],V=U[N];e:for(var q=S,ne=I*S;q<k;++q,ne+=I){var $=E[A+ne],K=E[A+ne+y],ee=L[q];if(!(B<=$||K<B)){for(var J=A+1;J<y;++J){var Z=E[J+ne],te=E[J+y+ne],oe=F[J+W],se=F[J+y+W];if(te<oe||se<Z)continue e}var ce=d(V,ee);if(ce!==void 0)return ce}}}}(n,a,s,u,p,f,m,h,g,v,x):function(y,A,d,S,k,E,L,O,P,F,U){for(var I=2*y,N=O,W=I*O;N<P;++N,W+=I){var B=F[A+W],V=U[N];e:for(var q=S,ne=I*S;q<k;++q,ne+=I){var $=E[A+ne],K=E[A+ne+y],ee=L[q];if(!(B<$||K<B)){for(var J=A+1;J<y;++J){var Z=E[J+ne],te=E[J+y+ne],oe=F[J+W],se=F[J+y+W];if(te<oe||se<Z)continue e}var ce=d(ee,V);if(ce!==void 0)return ce}}}}(n,a,s,u,p,f,m,h,g,v,x)}}o.partial=t(!1),o.full=t(!0)},7150:function(c,o,t){"use strict";c.exports=function(I,N,W,B,V,q,ne,$,K){(function(Fe,Le){var je=8*n.log2(Le+1)*(Fe+1)|0,Ge=n.nextPow2(k*je);L.length<Ge&&(i.free(L),L=i.mallocInt32(Ge));var Je=n.nextPow2(E*je);O.length<Je&&(i.free(O),O=i.mallocDouble(Je))})(I,B+ne);var ee,J=0,Z=2*I;for(P(J++,0,0,B,0,ne,W?16:0,-1/0,1/0),W||P(J++,0,0,ne,0,B,1,-1/0,1/0);J>0;){var te=(J-=1)*k,oe=L[te],se=L[te+1],ce=L[te+2],ye=L[te+3],me=L[te+4],fe=L[te+5],pe=J*E,ge=O[pe],ke=O[pe+1],Ce=1&fe,de=!!(16&fe),ae=V,re=q,he=$,Se=K;if(Ce&&(ae=$,re=K,he=V,Se=q),!(2&fe&&se>=(ce=y(I,oe,se,ce,ae,re,ke))||4&fe&&(se=A(I,oe,se,ce,ae,re,ge))>=ce)){var xe=ce-se,Te=me-ye;if(de){if(I*xe*(xe+Te)<g){if((ee=u.scanComplete(I,oe,N,se,ce,ae,re,ye,me,he,Se))!==void 0)return ee;continue}}else{if(I*Math.min(xe,Te)<m){if((ee=s(I,oe,N,Ce,se,ce,ae,re,ye,me,he,Se))!==void 0)return ee;continue}if(I*xe*Te<h){if((ee=u.scanBipartite(I,oe,N,Ce,se,ce,ae,re,ye,me,he,Se))!==void 0)return ee;continue}}var Ae=v(I,oe,se,ce,ae,re,ge,ke);if(se<Ae)if(I*(Ae-se)<m){if((ee=l(I,oe+1,N,se,Ae,ae,re,ye,me,he,Se))!==void 0)return ee}else if(oe===I-2){if((ee=Ce?u.sweepBipartite(I,N,ye,me,he,Se,se,Ae,ae,re):u.sweepBipartite(I,N,se,Ae,ae,re,ye,me,he,Se))!==void 0)return ee}else P(J++,oe+1,se,Ae,ye,me,Ce,-1/0,1/0),P(J++,oe+1,ye,me,se,Ae,1^Ce,-1/0,1/0);if(Ae<ce){var Pe=p(I,oe,ye,me,he,Se),De=he[Z*Pe+oe],ve=x(I,oe,Pe,me,he,Se,De);if(ve<me&&P(J++,oe,Ae,ce,ve,me,(4|Ce)+(de?16:0),De,ke),ye<Pe&&P(J++,oe,Ae,ce,ye,Pe,(2|Ce)+(de?16:0),ge,De),Pe+1===ve){if((ee=de?U(I,oe,N,Ae,ce,ae,re,Pe,he,Se[Pe]):F(I,oe,N,Ce,Ae,ce,ae,re,Pe,he,Se[Pe]))!==void 0)return ee}else if(Pe<ve){var we;if(de){if(Ae<(we=d(I,oe,Ae,ce,ae,re,De))){var Ee=x(I,oe,Ae,we,ae,re,De);if(oe===I-2){if(Ae<Ee&&(ee=u.sweepComplete(I,N,Ae,Ee,ae,re,Pe,ve,he,Se))!==void 0||Ee<we&&(ee=u.sweepBipartite(I,N,Ee,we,ae,re,Pe,ve,he,Se))!==void 0)return ee}else Ae<Ee&&P(J++,oe+1,Ae,Ee,Pe,ve,16,-1/0,1/0),Ee<we&&(P(J++,oe+1,Ee,we,Pe,ve,0,-1/0,1/0),P(J++,oe+1,Pe,ve,Ee,we,1,-1/0,1/0))}}else Ae<(we=Ce?S(I,oe,Ae,ce,ae,re,De):d(I,oe,Ae,ce,ae,re,De))&&(oe===I-2?ee=Ce?u.sweepBipartite(I,N,Pe,ve,he,Se,Ae,we,ae,re):u.sweepBipartite(I,N,Ae,we,ae,re,Pe,ve,he,Se):(P(J++,oe+1,Ae,we,Pe,ve,Ce,-1/0,1/0),P(J++,oe+1,Pe,ve,Ae,we,1^Ce,-1/0,1/0)))}}}}};var i=t(1888),n=t(8828),a=t(2455),s=a.partial,l=a.full,u=t(855),p=t(3545),f=t(8105),m=128,h=1<<22,g=1<<22,v=f("!(lo>=p0)&&!(p1>=hi)"),x=f("lo===p0"),y=f("lo<p0"),A=f("hi<=p0"),d=f("lo<=p0&&p0<=hi"),S=f("lo<p0&&p0<=hi"),k=6,E=2,L=i.mallocInt32(1024),O=i.mallocDouble(1024);function P(I,N,W,B,V,q,ne,$,K){var ee=k*I;L[ee]=N,L[ee+1]=W,L[ee+2]=B,L[ee+3]=V,L[ee+4]=q,L[ee+5]=ne;var J=E*I;O[J]=$,O[J+1]=K}function F(I,N,W,B,V,q,ne,$,K,ee,J){var Z=2*I,te=K*Z,oe=ee[te+N];e:for(var se=V,ce=V*Z;se<q;++se,ce+=Z){var ye=ne[ce+N],me=ne[ce+N+I];if(!(oe<ye||me<oe||B&&oe===ye)){for(var fe,pe=$[se],ge=N+1;ge<I;++ge){ye=ne[ce+ge],me=ne[ce+ge+I];var ke=ee[te+ge],Ce=ee[te+ge+I];if(me<ke||Ce<ye)continue e}if((fe=B?W(J,pe):W(pe,J))!==void 0)return fe}}}function U(I,N,W,B,V,q,ne,$,K,ee){var J=2*I,Z=$*J,te=K[Z+N];e:for(var oe=B,se=B*J;oe<V;++oe,se+=J){var ce=ne[oe];if(ce!==ee){var ye=q[se+N],me=q[se+N+I];if(!(te<ye||me<te)){for(var fe=N+1;fe<I;++fe){ye=q[se+fe],me=q[se+fe+I];var pe=K[Z+fe],ge=K[Z+fe+I];if(me<pe||ge<ye)continue e}var ke=W(ce,ee);if(ke!==void 0)return ke}}}}},3545:function(c,o,t){"use strict";c.exports=function(s,l,u,p,f,m){if(p<=u+1)return u;for(var h=u,g=p,v=p+u>>>1,x=2*s,y=v,A=f[x*v+l];h<g;){if(g-h<n){a(s,l,h,g,f,m),A=f[x*v+l];break}var d=g-h,S=Math.random()*d+h|0,k=f[x*S+l],E=Math.random()*d+h|0,L=f[x*E+l],O=Math.random()*d+h|0,P=f[x*O+l];k<=L?P>=L?(y=E,A=L):k>=P?(y=S,A=k):(y=O,A=P):L>=P?(y=E,A=L):P>=k?(y=S,A=k):(y=O,A=P);for(var F=x*(g-1),U=x*y,I=0;I<x;++I,++F,++U){var N=f[F];f[F]=f[U],f[U]=N}var W=m[g-1];for(m[g-1]=m[y],m[y]=W,F=x*(g-1),U=x*(y=i(s,l,h,g-1,f,m,A)),I=0;I<x;++I,++F,++U)N=f[F],f[F]=f[U],f[U]=N;if(W=m[g-1],m[g-1]=m[y],m[y]=W,v<y){for(g=y-1;h<g&&f[x*(g-1)+l]===A;)g-=1;g+=1}else{if(!(y<v))break;for(h=y+1;h<g&&f[x*h+l]===A;)h+=1}}return i(s,l,u,v,f,m,f[x*v+l])};var i=t(8105)("lo<p0"),n=8;function a(s,l,u,p,f,m){for(var h=2*s,g=h*(u+1)+l,v=u+1;v<p;++v,g+=h)for(var x=f[g],y=v,A=h*(v-1);y>u&&f[A+l]>x;--y,A-=h){for(var d=A,S=A+h,k=0;k<h;++k,++d,++S){var E=f[d];f[d]=f[S],f[S]=E}var L=m[y];m[y]=m[y-1],m[y-1]=L}}},8105:function(c){"use strict";c.exports=function(t){return o[t]};var o={"lo===p0":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=i,v=n;a>v;++v,f+=p)if(s[f+g]===u)if(h===v)h+=1,m+=p;else{for(var x=0;p>x;++x){var y=s[f+x];s[f+x]=s[m],s[m++]=y}var A=l[v];l[v]=l[h],l[h++]=A}return h},"lo<p0":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=i,v=n;a>v;++v,f+=p)if(s[f+g]<u)if(h===v)h+=1,m+=p;else{for(var x=0;p>x;++x){var y=s[f+x];s[f+x]=s[m],s[m++]=y}var A=l[v];l[v]=l[h],l[h++]=A}return h},"lo<=p0":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=t+i,v=n;a>v;++v,f+=p)if(s[f+g]<=u)if(h===v)h+=1,m+=p;else{for(var x=0;p>x;++x){var y=s[f+x];s[f+x]=s[m],s[m++]=y}var A=l[v];l[v]=l[h],l[h++]=A}return h},"hi<=p0":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=t+i,v=n;a>v;++v,f+=p)if(s[f+g]<=u)if(h===v)h+=1,m+=p;else{for(var x=0;p>x;++x){var y=s[f+x];s[f+x]=s[m],s[m++]=y}var A=l[v];l[v]=l[h],l[h++]=A}return h},"lo<p0&&p0<=hi":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=i,v=t+i,x=n;a>x;++x,f+=p){var y=s[f+g],A=s[f+v];if(y<u&&u<=A)if(h===x)h+=1,m+=p;else{for(var d=0;p>d;++d){var S=s[f+d];s[f+d]=s[m],s[m++]=S}var k=l[x];l[x]=l[h],l[h++]=k}}return h},"lo<=p0&&p0<=hi":function(t,i,n,a,s,l,u){for(var p=2*t,f=p*n,m=f,h=n,g=i,v=t+i,x=n;a>x;++x,f+=p){var y=s[f+g],A=s[f+v];if(y<=u&&u<=A)if(h===x)h+=1,m+=p;else{for(var d=0;p>d;++d){var S=s[f+d];s[f+d]=s[m],s[m++]=S}var k=l[x];l[x]=l[h],l[h++]=k}}return h},"!(lo>=p0)&&!(p1>=hi)":function(t,i,n,a,s,l,u,p){for(var f=2*t,m=f*n,h=m,g=n,v=i,x=t+i,y=n;a>y;++y,m+=f){var A=s[m+v],d=s[m+x];if(!(A>=u||p>=d))if(g===y)g+=1,h+=f;else{for(var S=0;f>S;++S){var k=s[m+S];s[m+S]=s[h],s[h++]=k}var E=l[y];l[y]=l[g],l[g++]=E}}return g}}},1811:function(c){"use strict";c.exports=function(f,m){m<=4*o?t(0,m-1,f):p(0,m-1,f)};var o=32;function t(f,m,h){for(var g=2*(f+1),v=f+1;v<=m;++v){for(var x=h[g++],y=h[g++],A=v,d=g-2;A-- >f;){var S=h[d-2],k=h[d-1];if(S<x||S===x&&k<y)break;h[d]=S,h[d+1]=k,d-=2}h[d]=x,h[d+1]=y}}function i(f,m,h){m*=2;var g=h[f*=2],v=h[f+1];h[f]=h[m],h[f+1]=h[m+1],h[m]=g,h[m+1]=v}function n(f,m,h){m*=2,h[f*=2]=h[m],h[f+1]=h[m+1]}function a(f,m,h,g){m*=2,h*=2;var v=g[f*=2],x=g[f+1];g[f]=g[m],g[f+1]=g[m+1],g[m]=g[h],g[m+1]=g[h+1],g[h]=v,g[h+1]=x}function s(f,m,h,g,v){m*=2,v[f*=2]=v[m],v[m]=h,v[f+1]=v[m+1],v[m+1]=g}function l(f,m,h){m*=2;var g=h[f*=2],v=h[m];return!(g<v)&&(g!==v||h[f+1]>h[m+1])}function u(f,m,h,g){var v=g[f*=2];return v<m||v===m&&g[f+1]<h}function p(f,m,h){var g=(m-f+1)/6|0,v=f+g,x=m-g,y=f+m>>1,A=y-g,d=y+g,S=v,k=A,E=y,L=d,O=x,P=f+1,F=m-1,U=0;l(S,k,h)&&(U=S,S=k,k=U),l(L,O,h)&&(U=L,L=O,O=U),l(S,E,h)&&(U=S,S=E,E=U),l(k,E,h)&&(U=k,k=E,E=U),l(S,L,h)&&(U=S,S=L,L=U),l(E,L,h)&&(U=E,E=L,L=U),l(k,O,h)&&(U=k,k=O,O=U),l(k,E,h)&&(U=k,k=E,E=U),l(L,O,h)&&(U=L,L=O,O=U);for(var I=h[2*k],N=h[2*k+1],W=h[2*L],B=h[2*L+1],V=2*S,q=2*E,ne=2*O,$=2*v,K=2*y,ee=2*x,J=0;J<2;++J){var Z=h[V+J],te=h[q+J],oe=h[ne+J];h[$+J]=Z,h[K+J]=te,h[ee+J]=oe}n(A,f,h),n(d,m,h);for(var se=P;se<=F;++se)if(u(se,I,N,h))se!==P&&i(se,P,h),++P;else if(!u(se,W,B,h))for(;;){if(u(F,W,B,h)){u(F,I,N,h)?(a(se,P,F,h),++P,--F):(i(se,F,h),--F);break}if(--F<se)break}s(f,P-1,I,N,h),s(m,F+1,W,B,h),P-2-f<=o?t(f,P-2,h):p(f,P-2,h),m-(F+2)<=o?t(F+2,m,h):p(F+2,m,h),F-P<=o?t(P,F,h):p(P,F,h)}},855:function(c,o,t){"use strict";c.exports={init:function(A){var d=n.nextPow2(A);u.length<d&&(i.free(u),u=i.mallocInt32(d)),p.length<d&&(i.free(p),p=i.mallocInt32(d)),f.length<d&&(i.free(f),f=i.mallocInt32(d)),m.length<d&&(i.free(m),m=i.mallocInt32(d)),h.length<d&&(i.free(h),h=i.mallocInt32(d)),g.length<d&&(i.free(g),g=i.mallocInt32(d));var S=8*d;v.length<S&&(i.free(v),v=i.mallocDouble(S))},sweepBipartite:function(A,d,S,k,E,L,O,P,F,U){for(var I=0,N=2*A,W=A-1,B=N-1,V=S;V<k;++V){var q=L[V],ne=N*V;v[I++]=E[ne+W],v[I++]=-(q+1),v[I++]=E[ne+B],v[I++]=q}for(V=O;V<P;++V){q=U[V]+s;var $=N*V;v[I++]=F[$+W],v[I++]=-q,v[I++]=F[$+B],v[I++]=q}var K=I>>>1;a(v,K);var ee=0,J=0;for(V=0;V<K;++V){var Z=0|v[2*V+1];if(Z>=s)x(f,m,J--,Z=Z-s|0);else if(Z>=0)x(u,p,ee--,Z);else if(Z<=-s){Z=-Z-s|0;for(var te=0;te<ee;++te)if((oe=d(u[te],Z))!==void 0)return oe;y(f,m,J++,Z)}else{for(Z=-Z-1|0,te=0;te<J;++te){var oe;if((oe=d(Z,f[te]))!==void 0)return oe}y(u,p,ee++,Z)}}},sweepComplete:function(A,d,S,k,E,L,O,P,F,U){for(var I=0,N=2*A,W=A-1,B=N-1,V=S;V<k;++V){var q=L[V]+1<<1,ne=N*V;v[I++]=E[ne+W],v[I++]=-q,v[I++]=E[ne+B],v[I++]=q}for(V=O;V<P;++V){q=U[V]+1<<1;var $=N*V;v[I++]=F[$+W],v[I++]=1|-q,v[I++]=F[$+B],v[I++]=1|q}var K=I>>>1;a(v,K);var ee=0,J=0,Z=0;for(V=0;V<K;++V){var te=0|v[2*V+1],oe=1&te;if(V<K-1&&te>>1==v[2*V+3]>>1&&(oe=2,V+=1),te<0){for(var se=-(te>>1)-1,ce=0;ce<Z;++ce)if((ye=d(h[ce],se))!==void 0)return ye;if(oe!==0){for(ce=0;ce<ee;++ce)if((ye=d(u[ce],se))!==void 0)return ye}if(oe!==1)for(ce=0;ce<J;++ce){var ye;if((ye=d(f[ce],se))!==void 0)return ye}oe===0?y(u,p,ee++,se):oe===1?y(f,m,J++,se):oe===2&&y(h,g,Z++,se)}else se=(te>>1)-1,oe===0?x(u,p,ee--,se):oe===1?x(f,m,J--,se):oe===2&&x(h,g,Z--,se)}},scanBipartite:function(A,d,S,k,E,L,O,P,F,U,I,N){var W=0,B=2*A,V=d,q=d+A,ne=1,$=1;k?$=s:ne=s;for(var K=E;K<L;++K){var ee=K+ne,J=B*K;v[W++]=O[J+V],v[W++]=-ee,v[W++]=O[J+q],v[W++]=ee}for(K=F;K<U;++K){ee=K+$;var Z=B*K;v[W++]=I[Z+V],v[W++]=-ee}var te=W>>>1;a(v,te);var oe=0;for(K=0;K<te;++K){var se=0|v[2*K+1];if(se<0){var ce=!1;if((ee=-se)>=s?(ce=!k,ee-=s):(ce=!!k,ee-=1),ce)y(u,p,oe++,ee);else{var ye=N[ee],me=B*ee,fe=I[me+d+1],pe=I[me+d+1+A];e:for(var ge=0;ge<oe;++ge){var ke=u[ge],Ce=B*ke;if(!(pe<O[Ce+d+1]||O[Ce+d+1+A]<fe)){for(var de=d+2;de<A;++de)if(I[me+de+A]<O[Ce+de]||O[Ce+de+A]<I[me+de])continue e;var ae,re=P[ke];if((ae=k?S(ye,re):S(re,ye))!==void 0)return ae}}}}else x(u,p,oe--,se-ne)}},scanComplete:function(A,d,S,k,E,L,O,P,F,U,I){for(var N=0,W=2*A,B=d,V=d+A,q=k;q<E;++q){var ne=q+s,$=W*q;v[N++]=L[$+B],v[N++]=-ne,v[N++]=L[$+V],v[N++]=ne}for(q=P;q<F;++q){ne=q+1;var K=W*q;v[N++]=U[K+B],v[N++]=-ne}var ee=N>>>1;a(v,ee);var J=0;for(q=0;q<ee;++q){var Z=0|v[2*q+1];if(Z<0)if((ne=-Z)>=s)u[J++]=ne-s;else{var te=I[ne-=1],oe=W*ne,se=U[oe+d+1],ce=U[oe+d+1+A];e:for(var ye=0;ye<J;++ye){var me=u[ye],fe=O[me];if(fe===te)break;var pe=W*me;if(!(ce<L[pe+d+1]||L[pe+d+1+A]<se)){for(var ge=d+2;ge<A;++ge)if(U[oe+ge+A]<L[pe+ge]||L[pe+ge+A]<U[oe+ge])continue e;var ke=S(fe,te);if(ke!==void 0)return ke}}}else{for(ne=Z-s,ye=J-1;ye>=0;--ye)if(u[ye]===ne){for(ge=ye+1;ge<J;++ge)u[ge-1]=u[ge];break}--J}}}};var i=t(1888),n=t(8828),a=t(1811),s=1<<28,l=1024,u=i.mallocInt32(l),p=i.mallocInt32(l),f=i.mallocInt32(l),m=i.mallocInt32(l),h=i.mallocInt32(l),g=i.mallocInt32(l),v=i.mallocDouble(8192);function x(A,d,S,k){var E=d[k],L=A[S-1];A[E]=L,d[L]=E}function y(A,d,S,k){A[S]=k,d[k]=S}},2538:function(c,o,t){"use strict";var i=t(8902),n=t(5542),a=t(2272),s=t(5023);function l(f){return[Math.min(f[0],f[1]),Math.max(f[0],f[1])]}function u(f,m){return f[0]-m[0]||f[1]-m[1]}function p(f,m,h){return m in f?f[m]:h}c.exports=function(f,m,h){Array.isArray(m)?(h=h||{},m=m||[]):(h=m||{},m=[]);var g=!!p(h,"delaunay",!0),v=!!p(h,"interior",!0),x=!!p(h,"exterior",!0),y=!!p(h,"infinity",!1);if(!v&&!x||f.length===0)return[];var A=i(f,m);if(g||v!==x||y){for(var d=n(f.length,function(E){return E.map(l).sort(u)}(m)),S=0;S<A.length;++S){var k=A[S];d.addTriangle(k[0],k[1],k[2])}return g&&a(f,d),x?v?y?s(d,0,y):d.cells():s(d,1,y):s(d,-1)}return A}},2272:function(c,o,t){"use strict";var i=t(2646)[4];function n(a,s,l,u,p,f){var m=s.opposite(u,p);if(!(m<0)){if(p<u){var h=u;u=p,p=h,h=f,f=m,m=h}s.isConstraint(u,p)||i(a[u],a[p],a[f],a[m])<0&&l.push(u,p)}}t(2478),c.exports=function(a,s){for(var l=[],u=a.length,p=s.stars,f=0;f<u;++f)for(var m=p[f],h=1;h<m.length;h+=2)if(!((y=m[h])<f||s.isConstraint(f,y))){for(var g=m[h-1],v=-1,x=1;x<m.length;x+=2)if(m[x-1]===y){v=m[x];break}v<0||i(a[f],a[y],a[g],a[v])<0&&l.push(f,y)}for(;l.length>0;){for(var y=l.pop(),A=(g=-1,v=-1,m=p[f=l.pop()],1);A<m.length;A+=2){var d=m[A-1],S=m[A];d===y?v=S:S===y&&(g=d)}g<0||v<0||i(a[f],a[y],a[g],a[v])>=0||(s.flip(f,y),n(a,s,l,g,f,v),n(a,s,l,f,v,g),n(a,s,l,v,y,g),n(a,s,l,y,g,v))}}},5023:function(c,o,t){"use strict";var i,n=t(2478);function a(l,u,p,f,m,h,g){this.cells=l,this.neighbor=u,this.flags=f,this.constraint=p,this.active=m,this.next=h,this.boundary=g}function s(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}c.exports=function(l,u,p){var f=function(O,P){for(var F=O.cells(),U=F.length,I=0;I<U;++I){var N=(Z=F[I])[0],W=Z[1],B=Z[2];W<B?W<N&&(Z[0]=W,Z[1]=B,Z[2]=N):B<N&&(Z[0]=B,Z[1]=N,Z[2]=W)}F.sort(s);var V=new Array(U);for(I=0;I<V.length;++I)V[I]=0;var q=[],ne=[],$=new Array(3*U),K=new Array(3*U),ee=null;P&&(ee=[]);var J=new a(F,$,K,V,q,ne,ee);for(I=0;I<U;++I)for(var Z=F[I],te=0;te<3;++te){N=Z[te],W=Z[(te+1)%3];var oe=$[3*I+te]=J.locate(W,N,O.opposite(W,N)),se=K[3*I+te]=O.isConstraint(N,W);oe<0&&(se?ne.push(I):(q.push(I),V[I]=1),P&&ee.push([W,N,-1]))}return J}(l,p);if(u===0)return p?f.cells.concat(f.boundary):f.cells;for(var m=1,h=f.active,g=f.next,v=f.flags,x=f.cells,y=f.constraint,A=f.neighbor;h.length>0||g.length>0;){for(;h.length>0;){var d=h.pop();if(v[d]!==-m){v[d]=m,x[d];for(var S=0;S<3;++S){var k=A[3*d+S];k>=0&&v[k]===0&&(y[3*d+S]?g.push(k):(h.push(k),v[k]=m))}}}var E=g;g=h,h=E,g.length=0,m=-m}var L=function(O,P,F){for(var U=0,I=0;I<O.length;++I)P[I]===F&&(O[U++]=O[I]);return O.length=U,O}(x,v,u);return p?L.concat(f.boundary):L},a.prototype.locate=(i=[0,0,0],function(l,u,p){var f=l,m=u,h=p;return u<p?u<l&&(f=u,m=p,h=l):p<l&&(f=p,m=l,h=u),f<0?-1:(i[0]=f,i[1]=m,i[2]=h,n.eq(this.cells,i,s))})},8902:function(c,o,t){"use strict";var i=t(2478),n=t(3250)[3];function a(g,v,x,y,A){this.a=g,this.b=v,this.idx=x,this.lowerIds=y,this.upperIds=A}function s(g,v,x,y){this.a=g,this.b=v,this.type=x,this.idx=y}function l(g,v){var x=g.a[0]-v.a[0]||g.a[1]-v.a[1]||g.type-v.type;return x||(g.type!==0&&(x=n(g.a,g.b,v.b))?x:g.idx-v.idx)}function u(g,v){return n(g.a,g.b,v)}function p(g,v,x,y,A){for(var d=i.lt(v,y,u),S=i.gt(v,y,u),k=d;k<S;++k){for(var E=v[k],L=E.lowerIds,O=L.length;O>1&&n(x[L[O-2]],x[L[O-1]],y)>0;)g.push([L[O-1],L[O-2],A]),O-=1;L.length=O,L.push(A);var P=E.upperIds;for(O=P.length;O>1&&n(x[P[O-2]],x[P[O-1]],y)<0;)g.push([P[O-2],P[O-1],A]),O-=1;P.length=O,P.push(A)}}function f(g,v){var x;return(x=g.a[0]<v.a[0]?n(g.a,g.b,v.a):n(v.b,v.a,g.a))?x:(x=v.b[0]<g.b[0]?n(g.a,g.b,v.b):n(v.b,v.a,g.b))||g.idx-v.idx}function m(g,v,x){var y=i.le(g,x,f),A=g[y],d=A.upperIds,S=d[d.length-1];A.upperIds=[S],g.splice(y+1,0,new a(x.a,x.b,x.idx,[S],d))}function h(g,v,x){var y=x.a;x.a=x.b,x.b=y;var A=i.eq(g,x,f),d=g[A];g[A-1].upperIds=d.upperIds,g.splice(A,1)}c.exports=function(g,v){for(var x=g.length,y=v.length,A=[],d=0;d<x;++d)A.push(new s(g[d],null,0,d));for(d=0;d<y;++d){var S=v[d],k=g[S[0]],E=g[S[1]];k[0]<E[0]?A.push(new s(k,E,2,d),new s(E,k,1,d)):k[0]>E[0]&&A.push(new s(E,k,2,d),new s(k,E,1,d))}A.sort(l);for(var L=A[0].a[0]-(1+Math.abs(A[0].a[0]))*Math.pow(2,-52),O=[new a([L,1],[L,0],-1,[],[],[],[])],P=[],F=(d=0,A.length);d<F;++d){var U=A[d],I=U.type;I===0?p(P,O,g,U.a,U.idx):I===2?m(O,0,U):h(O,0,U)}return P}},5542:function(c,o,t){"use strict";var i=t(2478);function n(l,u){this.stars=l,this.edges=u}c.exports=function(l,u){for(var p=new Array(l),f=0;f<l;++f)p[f]=[];return new n(p,u)};var a=n.prototype;function s(l,u,p){for(var f=1,m=l.length;f<m;f+=2)if(l[f-1]===u&&l[f]===p)return l[f-1]=l[m-2],l[f]=l[m-1],void(l.length=m-2)}a.isConstraint=function(){var l=[0,0];function u(p,f){return p[0]-f[0]||p[1]-f[1]}return function(p,f){return l[0]=Math.min(p,f),l[1]=Math.max(p,f),i.eq(this.edges,l,u)>=0}}(),a.removeTriangle=function(l,u,p){var f=this.stars;s(f[l],u,p),s(f[u],p,l),s(f[p],l,u)},a.addTriangle=function(l,u,p){var f=this.stars;f[l].push(u,p),f[u].push(p,l),f[p].push(l,u)},a.opposite=function(l,u){for(var p=this.stars[u],f=1,m=p.length;f<m;f+=2)if(p[f]===l)return p[f-1];return-1},a.flip=function(l,u){var p=this.opposite(l,u),f=this.opposite(u,l);this.removeTriangle(l,u,p),this.removeTriangle(u,l,f),this.addTriangle(l,f,p),this.addTriangle(u,p,f)},a.edges=function(){for(var l=this.stars,u=[],p=0,f=l.length;p<f;++p)for(var m=l[p],h=0,g=m.length;h<g;h+=2)u.push([m[h],m[h+1]]);return u},a.cells=function(){for(var l=this.stars,u=[],p=0,f=l.length;p<f;++p)for(var m=l[p],h=0,g=m.length;h<g;h+=2){var v=m[h],x=m[h+1];p<Math.min(v,x)&&u.push([p,v,x])}return u}},2419:function(c){"use strict";c.exports=function(o){for(var t=1,i=1;i<o.length;++i)for(var n=0;n<i;++n)if(o[i]<o[n])t=-t;else if(o[n]===o[i])return 0;return t}},3628:function(c,o,t){"use strict";var i=t(1338),n=t(727);function a(u,p){for(var f=0,m=u.length,h=0;h<m;++h)f+=u[h]*p[h];return f}function s(u){var p=u.length;if(p===0)return[];u[0].length;var f=i([u.length+1,u.length+1],1),m=i([u.length+1],1);f[p][p]=0;for(var h=0;h<p;++h){for(var g=0;g<=h;++g)f[g][h]=f[h][g]=2*a(u[h],u[g]);m[h]=a(u[h],u[h])}var v=n(f,m),x=0,y=v[p+1];for(h=0;h<y.length;++h)x+=y[h];var A=new Array(p);for(h=0;h<p;++h){y=v[h];var d=0;for(g=0;g<y.length;++g)d+=y[g];A[h]=d/x}return A}function l(u){if(u.length===0)return[];for(var p=u[0].length,f=i([p]),m=s(u),h=0;h<u.length;++h)for(var g=0;g<p;++g)f[g]+=u[h][g]*m[h];return f}l.barycenetric=s,c.exports=l},6037:function(c,o,t){c.exports=function(n){for(var a=i(n),s=0,l=0;l<n.length;++l)for(var u=n[l],p=0;p<a.length;++p)s+=Math.pow(u[p]-a[p],2);return Math.sqrt(s/n.length)};var i=t(3628)},332:function(c,o,t){"use strict";c.exports=function(S,k,E){var L;if(E){L=k;for(var O=new Array(k.length),P=0;P<k.length;++P){var F=k[P];O[P]=[F[0],F[1],E[P]]}k=O}for(var U=function(I,N,W){var B=v(I,[],g(I));return A(N,B,W),!!B}(S,k,!!E);d(S,k,!!E);)U=!0;if(E&&U)for(L.length=0,E.length=0,P=0;P<k.length;++P)F=k[P],L.push([F[0],F[1]]),E.push(F[2]);return U};var i=t(1755),n=t(6867),a=t(1125),s=t(7842),l=t(1318),u=t(946),p=t(5838),f=t(1278),m=t(3637);function h(S){var k=u(S);return[f(k,-1/0),f(k,1/0)]}function g(S){for(var k=new Array(S.length),E=0;E<S.length;++E){var L=S[E];k[E]=[f(L[0],-1/0),f(L[1],-1/0),f(L[0],1/0),f(L[1],1/0)]}return k}function v(S,k,E){for(var L=k.length,O=new i(L),P=[],F=0;F<k.length;++F){var U=k[F],I=h(U[0]),N=h(U[1]);P.push([f(I[0],-1/0),f(N[0],-1/0),f(I[1],1/0),f(N[1],1/0)])}n(P,function(ne,$){O.link(ne,$)});var W=!0,B=new Array(L);for(F=0;F<L;++F)(q=O.find(F))!==F&&(W=!1,S[q]=[Math.min(S[F][0],S[q][0]),Math.min(S[F][1],S[q][1])]);if(W)return null;var V=0;for(F=0;F<L;++F){var q;(q=O.find(F))===F?(B[F]=V,S[V++]=S[F]):B[F]=-1}for(S.length=V,F=0;F<L;++F)B[F]<0&&(B[F]=B[O.find(F)]);return B}function x(S,k){return S[0]-k[0]||S[1]-k[1]}function y(S,k){return S[0]-k[0]||S[1]-k[1]||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function A(S,k,E){if(S.length!==0){if(k)for(var L=0;L<S.length;++L){var O=k[(F=S[L])[0]],P=k[F[1]];F[0]=Math.min(O,P),F[1]=Math.max(O,P)}else for(L=0;L<S.length;++L){var F;O=(F=S[L])[0],P=F[1],F[0]=Math.min(O,P),F[1]=Math.max(O,P)}E?S.sort(y):S.sort(x);var U=1;for(L=1;L<S.length;++L){var I=S[L-1],N=S[L];(N[0]!==I[0]||N[1]!==I[1]||E&&N[2]!==I[2])&&(S[U++]=N)}S.length=U}}function d(S,k,E){var L=function(I,N){for(var W=new Array(N.length),B=0;B<N.length;++B){var V=N[B],q=I[V[0]],ne=I[V[1]];W[B]=[f(Math.min(q[0],ne[0]),-1/0),f(Math.min(q[1],ne[1]),-1/0),f(Math.max(q[0],ne[0]),1/0),f(Math.max(q[1],ne[1]),1/0)]}return W}(S,k),O=function(I,N,W){var B=[];return n(W,function(V,q){var ne=N[V],$=N[q];if(ne[0]!==$[0]&&ne[0]!==$[1]&&ne[1]!==$[0]&&ne[1]!==$[1]){var K=I[ne[0]],ee=I[ne[1]],J=I[$[0]],Z=I[$[1]];a(K,ee,J,Z)&&B.push([V,q])}}),B}(S,k,L),P=function(I,N,W,B){var V=[];return n(W,B,function(q,ne){var $=N[q];if($[0]!==ne&&$[1]!==ne){var K=I[ne],ee=I[$[0]],J=I[$[1]];a(ee,J,K,K)&&V.push([q,ne])}}),V}(S,k,L,g(S)),F=function(I,N,W,B,V){var q,ne,$=I.map(function(ae){return[s(ae[0]),s(ae[1])]});for(q=0;q<W.length;++q){var K=W[q];ne=K[0];var ee=K[1],J=N[ne],Z=N[ee],te=m(p(I[J[0]]),p(I[J[1]]),p(I[Z[0]]),p(I[Z[1]]));if(te){var oe=I.length;I.push([u(te[0]),u(te[1])]),$.push(te),B.push([ne,oe],[ee,oe])}}for(B.sort(function(ae,re){if(ae[0]!==re[0])return ae[0]-re[0];var he=$[ae[1]],Se=$[re[1]];return l(he[0],Se[0])||l(he[1],Se[1])}),q=B.length-1;q>=0;--q){var se=N[ne=(Ce=B[q])[0]],ce=se[0],ye=se[1],me=I[ce],fe=I[ye];if((me[0]-fe[0]||me[1]-fe[1])<0){var pe=ce;ce=ye,ye=pe}se[0]=ce;var ge,ke=se[1]=Ce[1];for(V&&(ge=se[2]);q>0&&B[q-1][0]===ne;){var Ce,de=(Ce=B[--q])[1];V?N.push([ke,de,ge]):N.push([ke,de]),ke=de}V?N.push([ke,ye,ge]):N.push([ke,ye])}return $}(S,k,O,P,E),U=v(S,F);return A(k,U,E),!!U||O.length>0||P.length>0}},3637:function(c,o,t){"use strict";c.exports=function(m,h,g,v){var x=l(h,m),y=l(v,g),A=f(x,y);if(s(A)===0)return null;var d=f(y,l(m,g)),S=n(d,A),k=p(x,S);return u(m,k)};var i=t(6504),n=t(8697),a=t(5572),s=t(7721),l=t(544),u=t(2653),p=t(8987);function f(m,h){return a(i(m[0],h[1]),i(m[1],h[0]))}},3642:function(c){c.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(c,o,t){"use strict";var i=t(3642),n=t(395);function a(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function s(u){for(var p,f="#",m=0;m<3;++m)f+=("00"+(p=(p=u[m]).toString(16))).substr(p.length);return f}function l(u){return"rgba("+u.join(",")+")"}c.exports=function(u){var p,f,m,h,g,v,x,y,A,d;if(u||(u={}),y=(u.nshades||72)-1,x=u.format||"hex",(v=u.colormap)||(v="jet"),typeof v=="string"){if(v=v.toLowerCase(),!i[v])throw Error(v+" not a supported colorscale");g=i[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);g=v.slice()}if(g.length>y+1)throw new Error(v+" map requires nshades to be at least size "+g.length);A=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=g.map(function(O){return Math.round(O.index*y)}),A[0]=Math.min(Math.max(A[0],0),1),A[1]=Math.min(Math.max(A[1],0),1);var S=g.map(function(O,P){var F=g[P].index,U=g[P].rgb.slice();return U.length===4&&U[3]>=0&&U[3]<=1||(U[3]=A[0]+(A[1]-A[0])*F),U}),k=[];for(d=0;d<p.length-1;++d){h=p[d+1]-p[d],f=S[d],m=S[d+1];for(var E=0;E<h;E++){var L=E/h;k.push([Math.round(n(f[0],m[0],L)),Math.round(n(f[1],m[1],L)),Math.round(n(f[2],m[2],L)),n(f[3],m[3],L)])}}return k.push(g[g.length-1].rgb.concat(A[1])),x==="hex"?k=k.map(s):x==="rgbaString"?k=k.map(l):x==="float"&&(k=k.map(a)),k}},3140:function(c,o,t){"use strict";c.exports=function(p,f,m,h){var g=i(f,m,h);if(g===0){var v=n(i(p,f,m)),x=n(i(p,f,h));if(v===x){if(v===0){var y=u(p,f,m);return y===u(p,f,h)?0:y?1:-1}return 0}return x===0?v>0||u(p,f,h)?-1:1:v===0?x>0||u(p,f,m)?1:-1:n(x-v)}var A=i(p,f,m);return A>0?g>0&&i(p,f,h)>0?1:-1:A<0?g>0||i(p,f,h)>0?1:-1:i(p,f,h)>0||u(p,f,m)?1:-1};var i=t(3250),n=t(8572),a=t(9362),s=t(5382),l=t(8210);function u(p,f,m){var h=a(p[0],-f[0]),g=a(p[1],-f[1]),v=a(m[0],-f[0]),x=a(m[1],-f[1]),y=l(s(h,v),s(g,x));return y[y.length-1]>=0}},8572:function(c){"use strict";c.exports=function(o){return o<0?-1:o>0?1:0}},8507:function(c){c.exports=function(i,n){var a=i.length,s=i.length-n.length;if(s)return s;switch(a){case 0:return 0;case 1:return i[0]-n[0];case 2:return i[0]+i[1]-n[0]-n[1]||o(i[0],i[1])-o(n[0],n[1]);case 3:var l=i[0]+i[1],u=n[0]+n[1];if(s=l+i[2]-(u+n[2]))return s;var p=o(i[0],i[1]),f=o(n[0],n[1]);return o(p,i[2])-o(f,n[2])||o(p+i[2],l)-o(f+n[2],u);case 4:var m=i[0],h=i[1],g=i[2],v=i[3],x=n[0],y=n[1],A=n[2],d=n[3];return m+h+g+v-(x+y+A+d)||o(m,h,g,v)-o(x,y,A,d,x)||o(m+h,m+g,m+v,h+g,h+v,g+v)-o(x+y,x+A,x+d,y+A,y+d,A+d)||o(m+h+g,m+h+v,m+g+v,h+g+v)-o(x+y+A,x+y+d,x+A+d,y+A+d);default:for(var S=i.slice().sort(t),k=n.slice().sort(t),E=0;E<a;++E)if(s=S[E]-k[E])return s;return 0}};var o=Math.min;function t(i,n){return i-n}},3788:function(c,o,t){"use strict";var i=t(8507),n=t(2419);c.exports=function(a,s){return i(a,s)||n(a)-n(s)}},7352:function(c,o,t){"use strict";var i=t(5721),n=t(4750),a=t(2690);c.exports=function(s){var l=s.length;if(l===0)return[];if(l===1)return[[0]];var u=s[0].length;return u===0?[]:u===1?i(s):u===2?n(s):a(s,u)}},5721:function(c){"use strict";c.exports=function(o){for(var t=0,i=0,n=1;n<o.length;++n)o[n][0]<o[t][0]&&(t=n),o[n][0]>o[i][0]&&(i=n);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},4750:function(c,o,t){"use strict";c.exports=function(n){var a=i(n),s=a.length;if(s<=2)return[];for(var l=new Array(s),u=a[s-1],p=0;p<s;++p){var f=a[p];l[p]=[u,f],u=f}return l};var i=t(3090)},2690:function(c,o,t){"use strict";c.exports=function(a,s){try{return i(a,!0)}catch{var l=n(a);if(l.length<=s)return[];var u=function(f,m){for(var h=f.length,g=new Array(h),v=0;v<m.length;++v)g[v]=f[m[v]];var x=m.length;for(v=0;v<h;++v)m.indexOf(v)<0&&(g[x++]=f[v]);return g}(a,l);return function(f,m){for(var h=f.length,g=m.length,v=0;v<h;++v)for(var x=f[v],y=0;y<x.length;++y){var A=x[y];if(A<g)x[y]=m[A];else{A-=g;for(var d=0;d<g;++d)A>=m[d]&&(A+=1);x[y]=A}}return f}(i(u,!0),l)}};var i=t(8954),n=t(3952)},4769:function(c){"use strict";c.exports=function(o,t,i,n,a,s){var l=a-1,u=a*a,p=l*l,f=(1+2*a)*p,m=a*p,h=u*(3-2*a),g=u*l;if(o.length){s||(s=new Array(o.length));for(var v=o.length-1;v>=0;--v)s[v]=f*o[v]+m*t[v]+h*i[v]+g*n[v];return s}return f*o+m*t+h*i+g*n},c.exports.derivative=function(o,t,i,n,a,s){var l=6*a*a-6*a,u=3*a*a-4*a+1,p=-6*a*a+6*a,f=3*a*a-2*a;if(o.length){s||(s=new Array(o.length));for(var m=o.length-1;m>=0;--m)s[m]=l*o[m]+u*t[m]+p*i[m]+f*n[m];return s}return l*o+u*t+p*i[m]+f*n}},7642:function(c,o,t){"use strict";var i=t(8954),n=t(1682);function a(l,u){this.point=l,this.index=u}function s(l,u){for(var p=l.point,f=u.point,m=p.length,h=0;h<m;++h){var g=f[h]-p[h];if(g)return g}return 0}c.exports=function(l,u){var p=l.length;if(p===0)return[];var f=l[0].length;if(f<1)return[];if(f===1)return function(F,U,I){if(F===1)return I?[[-1,0]]:[];var N=U.map(function(ne,$){return[ne[0],$]});N.sort(function(ne,$){return ne[0]-$[0]});for(var W=new Array(F-1),B=1;B<F;++B){var V=N[B-1],q=N[B];W[B-1]=[V[1],q[1]]}return I&&W.push([-1,W[0][1]],[W[F-1][1],-1]),W}(p,l,u);for(var m=new Array(p),h=1,g=0;g<p;++g){for(var v=l[g],x=new Array(f+1),y=0,A=0;A<f;++A){var d=v[A];x[A]=d,y+=d*d}x[f]=y,m[g]=new a(x,g),h=Math.max(y,h)}n(m,s),p=m.length;var S=new Array(p+f+1),k=new Array(p+f+1),E=(f+1)*(f+1)*h,L=new Array(f+1);for(g=0;g<=f;++g)L[g]=0;for(L[f]=E,S[0]=L.slice(),k[0]=-1,g=0;g<=f;++g)(x=L.slice())[g]=1,S[g+1]=x,k[g+1]=-1;for(g=0;g<p;++g){var O=m[g];S[g+f+1]=O.point,k[g+f+1]=O.index}var P=i(S,!1);if(P=u?P.filter(function(F){for(var U=0,I=0;I<=f;++I){var N=k[F[I]];if(N<0&&++U>=2)return!1;F[I]=N}return!0}):P.filter(function(F){for(var U=0;U<=f;++U){var I=k[F[U]];if(I<0)return!1;F[U]=I}return!0}),1&f)for(g=0;g<P.length;++g)x=(O=P[g])[0],O[0]=O[1],O[1]=x;return P}},2361:function(c){var o=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,o=!0,i[1]===1072693248?(c.exports=function(a){return t[0]=a,[i[0],i[1]]},c.exports.pack=function(a,s){return i[0]=a,i[1]=s,t[0]},c.exports.lo=function(a){return t[0]=a,i[0]},c.exports.hi=function(a){return t[0]=a,i[1]}):i[0]===1072693248?(c.exports=function(a){return t[0]=a,[i[1],i[0]]},c.exports.pack=function(a,s){return i[1]=a,i[0]=s,t[0]},c.exports.lo=function(a){return t[0]=a,i[1]},c.exports.hi=function(a){return t[0]=a,i[0]}):o=!1}if(!o){var n=new Buffer(8);c.exports=function(a){return n.writeDoubleLE(a,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},c.exports.pack=function(a,s){return n.writeUInt32LE(a,0,!0),n.writeUInt32LE(s,4,!0),n.readDoubleLE(0,!0)},c.exports.lo=function(a){return n.writeDoubleLE(a,0,!0),n.readUInt32LE(0,!0)},c.exports.hi=function(a){return n.writeDoubleLE(a,0,!0),n.readUInt32LE(4,!0)}}c.exports.sign=function(a){return c.exports.hi(a)>>>31},c.exports.exponent=function(a){return(c.exports.hi(a)<<1>>>21)-1023},c.exports.fraction=function(a){var s=c.exports.lo(a),l=c.exports.hi(a),u=1048575&l;return 2146435072&l&&(u+=1048576),[s,u]},c.exports.denormalized=function(a){return!(2146435072&c.exports.hi(a))}},1338:function(c){"use strict";function o(t,i,n){var a=0|t[n];if(a<=0)return[];var s,l=new Array(a);if(n===t.length-1)for(s=0;s<a;++s)l[s]=i;else for(s=0;s<a;++s)l[s]=o(t,i,n+1);return l}c.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(n,a){var s,l;for(s=new Array(n),l=0;l<n;++l)s[l]=a;return s}(0|t,i);break;case"object":if(typeof t.length=="number")return o(t,i,0)}return[]}},3134:function(c,o,t){"use strict";c.exports=function(n,a){var s=n.length;if(typeof a!="number"){a=0;for(var l=0;l<s;++l){var u=n[l];a=Math.max(a,u[0],u[1])}a=1+(0|a)}a|=0;var p=new Array(a);for(l=0;l<a;++l)p[l]=[];for(l=0;l<s;++l)p[(u=n[l])[0]].push(u[1]),p[u[1]].push(u[0]);for(var f=0;f<a;++f)i(p[f],function(m,h){return m-h});return p};var i=t(1682)},5033:function(c){"use strict";c.exports=function(o,t,i){var n=t||0,a=i||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[n*o[12]+o[8],n*o[13]+o[9],n*o[14]+o[10],n*o[15]+o[11]],[a*o[12]-o[8],a*o[13]-o[9],a*o[14]-o[10],a*o[15]-o[11]]]}},9215:function(c,o,t){"use strict";c.exports=function(p,f,m){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return typeof p=="number"?new s(h=u(p),h,0):new s(p,u(p.length),0);case 2:var h;if(typeof f=="number")return new s(p,h=u(p.length),+f);m=0;case 3:if(p.length!==f.length)throw new Error("state and velocity lengths must match");return new s(p,f,m)}};var i=t(4769),n=t(2478);function a(p,f,m){return Math.min(f,Math.max(p,m))}function s(p,f,m){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var h=0;h<this.dimension;++h)this.bounds[0][h]=-1/0,this.bounds[1][h]=1/0;this._state=p.slice().reverse(),this._velocity=f.slice().reverse(),this._time=[m],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var l=s.prototype;function u(p){for(var f=new Array(p),m=0;m<p;++m)f[m]=0;return f}l.flush=function(p){var f=n.gt(this._time,p)-1;f<=0||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))},l.curve=function(p){var f=this._time,m=f.length,h=n.le(f,p),g=this._scratch[0],v=this._state,x=this._velocity,y=this.dimension,A=this.bounds;if(h<0)for(var d=y-1,S=0;S<y;++S,--d)g[S]=v[d];else if(h>=m-1){d=v.length-1;var k=p-f[m-1];for(S=0;S<y;++S,--d)g[S]=v[d]+k*x[d]}else{d=y*(h+1)-1;var E=f[h],L=f[h+1]-E||1,O=this._scratch[1],P=this._scratch[2],F=this._scratch[3],U=this._scratch[4],I=!0;for(S=0;S<y;++S,--d)O[S]=v[d],F[S]=x[d]*L,P[S]=v[d+y],U[S]=x[d+y]*L,I=I&&O[S]===P[S]&&F[S]===U[S]&&F[S]===0;if(I)for(S=0;S<y;++S)g[S]=O[S];else i(O,F,P,U,(p-E)/L,g)}var N=A[0],W=A[1];for(S=0;S<y;++S)g[S]=a(N[S],W[S],g[S]);return g},l.dcurve=function(p){var f=this._time,m=f.length,h=n.le(f,p),g=this._scratch[0],v=this._state,x=this._velocity,y=this.dimension;if(h>=m-1)for(var A=v.length-1,d=(f[m-1],0);d<y;++d,--A)g[d]=x[A];else{A=y*(h+1)-1;var S=f[h],k=f[h+1]-S||1,E=this._scratch[1],L=this._scratch[2],O=this._scratch[3],P=this._scratch[4],F=!0;for(d=0;d<y;++d,--A)E[d]=v[A],O[d]=x[A]*k,L[d]=v[A+y],P[d]=x[A+y]*k,F=F&&E[d]===L[d]&&O[d]===P[d]&&O[d]===0;if(F)for(d=0;d<y;++d)g[d]=0;else for(i.derivative(E,O,L,P,(p-S)/k,g),d=0;d<y;++d)g[d]/=k}return g},l.lastT=function(){var p=this._time;return p[p.length-1]},l.stable=function(){for(var p=this._velocity,f=p.length,m=this.dimension-1;m>=0;--m)if(p[--f])return!1;return!0},l.jump=function(p){var f=this.lastT(),m=this.dimension;if(!(p<f||arguments.length!==m+1)){var h=this._state,g=this._velocity,v=h.length-this.dimension,x=this.bounds,y=x[0],A=x[1];this._time.push(f,p);for(var d=0;d<2;++d)for(var S=0;S<m;++S)h.push(h[v++]),g.push(0);for(this._time.push(p),S=m;S>0;--S)h.push(a(y[S-1],A[S-1],arguments[S])),g.push(0)}},l.push=function(p){var f=this.lastT(),m=this.dimension;if(!(p<f||arguments.length!==m+1)){var h=this._state,g=this._velocity,v=h.length-this.dimension,x=p-f,y=this.bounds,A=y[0],d=y[1],S=x>1e-6?1/x:0;this._time.push(p);for(var k=m;k>0;--k){var E=a(A[k-1],d[k-1],arguments[k]);h.push(E),g.push((E-h[v++])*S)}}},l.set=function(p){var f=this.dimension;if(!(p<this.lastT()||arguments.length!==f+1)){var m=this._state,h=this._velocity,g=this.bounds,v=g[0],x=g[1];this._time.push(p);for(var y=f;y>0;--y)m.push(a(v[y-1],x[y-1],arguments[y])),h.push(0)}},l.move=function(p){var f=this.lastT(),m=this.dimension;if(!(p<=f||arguments.length!==m+1)){var h=this._state,g=this._velocity,v=h.length-this.dimension,x=this.bounds,y=x[0],A=x[1],d=p-f,S=d>1e-6?1/d:0;this._time.push(p);for(var k=m;k>0;--k){var E=arguments[k];h.push(a(y[k-1],A[k-1],h[v++]+E)),g.push(E*S)}}},l.idle=function(p){var f=this.lastT();if(!(p<f)){var m=this.dimension,h=this._state,g=this._velocity,v=h.length-m,x=this.bounds,y=x[0],A=x[1],d=p-f;this._time.push(p);for(var S=m-1;S>=0;--S)h.push(a(y[S],A[S],h[v]+d*g[v])),g.push(0),v+=1}}},3840:function(c){"use strict";function o(v,x,y,A,d,S){this._color=v,this.key=x,this.value=y,this.left=A,this.right=d,this._count=S}function t(v){return new o(v._color,v.key,v.value,v.left,v.right,v._count)}function i(v,x){return new o(v,x.key,x.value,x.left,x.right,x._count)}function n(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function a(v,x){this._compare=v,this.root=x}c.exports=function(v){return new a(v||g,null)};var s=a.prototype;function l(v,x){var y;return x.left&&(y=l(v,x.left))?y:(y=v(x.key,x.value))||(x.right?l(v,x.right):void 0)}function u(v,x,y,A){if(x(v,A.key)<=0){var d;if(A.left&&(d=u(v,x,y,A.left))||(d=y(A.key,A.value)))return d}if(A.right)return u(v,x,y,A.right)}function p(v,x,y,A,d){var S,k=y(v,d.key),E=y(x,d.key);if(k<=0&&(d.left&&(S=p(v,x,y,A,d.left))||E>0&&(S=A(d.key,d.value))))return S;if(E>0&&d.right)return p(v,x,y,A,d.right)}function f(v,x){this.tree=v,this._stack=x}Object.defineProperty(s,"keys",{get:function(){var v=[];return this.forEach(function(x,y){v.push(x)}),v}}),Object.defineProperty(s,"values",{get:function(){var v=[];return this.forEach(function(x,y){v.push(y)}),v}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(v,x){for(var y=this._compare,A=this.root,d=[],S=[];A;){var k=y(v,A.key);d.push(A),S.push(k),A=k<=0?A.left:A.right}d.push(new o(0,v,x,null,null,1));for(var E=d.length-2;E>=0;--E)A=d[E],S[E]<=0?d[E]=new o(A._color,A.key,A.value,d[E+1],A.right,A._count+1):d[E]=new o(A._color,A.key,A.value,A.left,d[E+1],A._count+1);for(E=d.length-1;E>1;--E){var L=d[E-1];if(A=d[E],L._color===1||A._color===1)break;var O=d[E-2];if(O.left===L)if(L.left===A){if(!(P=O.right)||P._color!==0){O._color=0,O.left=L.right,L._color=1,L.right=O,d[E-2]=L,d[E-1]=A,n(O),n(L),E>=3&&((F=d[E-3]).left===O?F.left=L:F.right=L);break}L._color=1,O.right=i(1,P),O._color=0,E-=1}else{if(!(P=O.right)||P._color!==0){L.right=A.left,O._color=0,O.left=A.right,A._color=1,A.left=L,A.right=O,d[E-2]=A,d[E-1]=L,n(O),n(L),n(A),E>=3&&((F=d[E-3]).left===O?F.left=A:F.right=A);break}L._color=1,O.right=i(1,P),O._color=0,E-=1}else if(L.right===A){if(!(P=O.left)||P._color!==0){O._color=0,O.right=L.left,L._color=1,L.left=O,d[E-2]=L,d[E-1]=A,n(O),n(L),E>=3&&((F=d[E-3]).right===O?F.right=L:F.left=L);break}L._color=1,O.left=i(1,P),O._color=0,E-=1}else{var P;if(!(P=O.left)||P._color!==0){var F;L.left=A.right,O._color=0,O.right=A.left,A._color=1,A.right=L,A.left=O,d[E-2]=A,d[E-1]=L,n(O),n(L),n(A),E>=3&&((F=d[E-3]).right===O?F.right=A:F.left=A);break}L._color=1,O.left=i(1,P),O._color=0,E-=1}}return d[0]._color=1,new a(y,d[0])},s.forEach=function(v,x,y){if(this.root)switch(arguments.length){case 1:return l(v,this.root);case 2:return u(x,this._compare,v,this.root);case 3:return this._compare(x,y)>=0?void 0:p(x,y,this._compare,v,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.left;return new f(this,v)}}),Object.defineProperty(s,"end",{get:function(){for(var v=[],x=this.root;x;)v.push(x),x=x.right;return new f(this,v)}}),s.at=function(v){if(v<0)return new f(this,[]);for(var x=this.root,y=[];;){if(y.push(x),x.left){if(v<x.left._count){x=x.left;continue}v-=x.left._count}if(!v)return new f(this,y);if(v-=1,!x.right||v>=x.right._count)break;x=x.right}return new f(this,[])},s.ge=function(v){for(var x=this._compare,y=this.root,A=[],d=0;y;){var S=x(v,y.key);A.push(y),S<=0&&(d=A.length),y=S<=0?y.left:y.right}return A.length=d,new f(this,A)},s.gt=function(v){for(var x=this._compare,y=this.root,A=[],d=0;y;){var S=x(v,y.key);A.push(y),S<0&&(d=A.length),y=S<0?y.left:y.right}return A.length=d,new f(this,A)},s.lt=function(v){for(var x=this._compare,y=this.root,A=[],d=0;y;){var S=x(v,y.key);A.push(y),S>0&&(d=A.length),y=S<=0?y.left:y.right}return A.length=d,new f(this,A)},s.le=function(v){for(var x=this._compare,y=this.root,A=[],d=0;y;){var S=x(v,y.key);A.push(y),S>=0&&(d=A.length),y=S<0?y.left:y.right}return A.length=d,new f(this,A)},s.find=function(v){for(var x=this._compare,y=this.root,A=[];y;){var d=x(v,y.key);if(A.push(y),d===0)return new f(this,A);y=d<=0?y.left:y.right}return new f(this,[])},s.remove=function(v){var x=this.find(v);return x?x.remove():this},s.get=function(v){for(var x=this._compare,y=this.root;y;){var A=x(v,y.key);if(A===0)return y.value;y=A<=0?y.left:y.right}};var m=f.prototype;function h(v,x){v.key=x.key,v.value=x.value,v.left=x.left,v.right=x.right,v._color=x._color,v._count=x._count}function g(v,x){return v<x?-1:v>x?1:0}Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new f(this.tree,this._stack.slice())},m.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var x=new Array(v.length),y=v[v.length-1];x[x.length-1]=new o(y._color,y.key,y.value,y.left,y.right,y._count);for(var A=v.length-2;A>=0;--A)(y=v[A]).left===v[A+1]?x[A]=new o(y._color,y.key,y.value,x[A+1],y.right,y._count):x[A]=new o(y._color,y.key,y.value,y.left,x[A+1],y._count);if((y=x[x.length-1]).left&&y.right){var d=x.length;for(y=y.left;y.right;)x.push(y),y=y.right;var S=x[d-1];for(x.push(new o(y._color,S.key,S.value,y.left,y.right,y._count)),x[d-1].key=y.key,x[d-1].value=y.value,A=x.length-2;A>=d;--A)y=x[A],x[A]=new o(y._color,y.key,y.value,y.left,x[A+1],y._count);x[d-1].left=x[d]}if((y=x[x.length-1])._color===0){var k=x[x.length-2];for(k.left===y?k.left=null:k.right===y&&(k.right=null),x.pop(),A=0;A<x.length;++A)x[A]._count--;return new a(this.tree._compare,x[0])}if(y.left||y.right){for(y.left?h(y,y.left):y.right&&h(y,y.right),y._color=1,A=0;A<x.length-1;++A)x[A]._count--;return new a(this.tree._compare,x[0])}if(x.length===1)return new a(this.tree._compare,null);for(A=0;A<x.length;++A)x[A]._count--;var E=x[x.length-2];return function(L){for(var O,P,F,U,I=L.length-1;I>=0;--I){if(O=L[I],I===0)return void(O._color=1);if((P=L[I-1]).left===O){if((F=P.right).right&&F.right._color===0)return U=(F=P.right=t(F)).right=t(F.right),P.right=F.left,F.left=P,F.right=U,F._color=P._color,O._color=1,P._color=1,U._color=1,n(P),n(F),I>1&&((N=L[I-2]).left===P?N.left=F:N.right=F),void(L[I-1]=F);if(F.left&&F.left._color===0)return U=(F=P.right=t(F)).left=t(F.left),P.right=U.left,F.left=U.right,U.left=P,U.right=F,U._color=P._color,P._color=1,F._color=1,O._color=1,n(P),n(F),n(U),I>1&&((N=L[I-2]).left===P?N.left=U:N.right=U),void(L[I-1]=U);if(F._color===1){if(P._color===0)return P._color=1,void(P.right=i(0,F));P.right=i(0,F);continue}F=t(F),P.right=F.left,F.left=P,F._color=P._color,P._color=0,n(P),n(F),I>1&&((N=L[I-2]).left===P?N.left=F:N.right=F),L[I-1]=F,L[I]=P,I+1<L.length?L[I+1]=O:L.push(O),I+=2}else{if((F=P.left).left&&F.left._color===0)return U=(F=P.left=t(F)).left=t(F.left),P.left=F.right,F.right=P,F.left=U,F._color=P._color,O._color=1,P._color=1,U._color=1,n(P),n(F),I>1&&((N=L[I-2]).right===P?N.right=F:N.left=F),void(L[I-1]=F);if(F.right&&F.right._color===0)return U=(F=P.left=t(F)).right=t(F.right),P.left=U.right,F.right=U.left,U.right=P,U.left=F,U._color=P._color,P._color=1,F._color=1,O._color=1,n(P),n(F),n(U),I>1&&((N=L[I-2]).right===P?N.right=U:N.left=U),void(L[I-1]=U);if(F._color===1){if(P._color===0)return P._color=1,void(P.left=i(0,F));P.left=i(0,F);continue}var N;F=t(F),P.left=F.right,F.right=P,F._color=P._color,P._color=0,n(P),n(F),I>1&&((N=L[I-2]).right===P?N.right=F:N.left=F),L[I-1]=F,L[I]=P,I+1<L.length?L[I+1]=O:L.push(O),I+=2}}}(x),E.left===y?E.left=null:E.right=null,new a(this.tree._compare,x[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var v=0,x=this._stack;if(x.length===0){var y=this.tree.root;return y?y._count:0}x[x.length-1].left&&(v=x[x.length-1].left._count);for(var A=x.length-2;A>=0;--A)x[A+1]===x[A].right&&(++v,x[A].left&&(v+=x[A].left._count));return v},enumerable:!0}),m.next=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.right)for(x=x.right;x;)v.push(x),x=x.left;else for(v.pop();v.length>0&&v[v.length-1].right===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].left===v[x])return!0;return!1}}),m.update=function(v){var x=this._stack;if(x.length===0)throw new Error("Can't update empty node!");var y=new Array(x.length),A=x[x.length-1];y[y.length-1]=new o(A._color,A.key,v,A.left,A.right,A._count);for(var d=x.length-2;d>=0;--d)(A=x[d]).left===x[d+1]?y[d]=new o(A._color,A.key,A.value,y[d+1],A.right,A._count):y[d]=new o(A._color,A.key,A.value,A.left,y[d+1],A._count);return new a(this.tree._compare,y[0])},m.prev=function(){var v=this._stack;if(v.length!==0){var x=v[v.length-1];if(x.left)for(x=x.left;x;)v.push(x),x=x.right;else for(v.pop();v.length>0&&v[v.length-1].left===x;)x=v[v.length-1],v.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var x=v.length-1;x>0;--x)if(v[x-1].right===v[x])return!0;return!1}})},3837:function(c,o,t){"use strict";c.exports=function(O,P){var F=new g(O);return F.update(P),F};var i=t(4935),n=t(501),a=t(5304),s=t(6429),l=t(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=ArrayBuffer,f=DataView;function m(O){return Array.isArray(O)||function(P){return p.isView(P)&&!(P instanceof f)}(O)}function h(O,P){return O[0]=P[0],O[1]=P[1],O[2]=P[2],O}function g(O){this.gl=O,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(O)}var v=g.prototype;function x(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}v.update=function(O){function P(Z,te,oe){if(oe in O){var se,ce=O[oe],ye=this[oe];(Z?m(ce)&&m(ce[0]):m(ce))?this[oe]=se=[te(ce[0]),te(ce[1]),te(ce[2])]:this[oe]=se=[te(ce),te(ce),te(ce)];for(var me=0;me<3;++me)if(se[me]!==ye[me])return!0}return!1}O=O||{};var F,U=P.bind(this,!1,Number),I=P.bind(this,!1,Boolean),N=P.bind(this,!1,String),W=P.bind(this,!0,function(Z){if(m(Z)){if(Z.length===3)return[+Z[0],+Z[1],+Z[2],1];if(Z.length===4)return[+Z[0],+Z[1],+Z[2],+Z[3]]}return[0,0,0,1]}),B=!1,V=!1;if("bounds"in O)for(var q=O.bounds,ne=0;ne<2;++ne)for(var $=0;$<3;++$)q[ne][$]!==this.bounds[ne][$]&&(V=!0),this.bounds[ne][$]=q[ne][$];if("ticks"in O)for(F=O.ticks,B=!0,this.autoTicks=!1,ne=0;ne<3;++ne)this.tickSpacing[ne]=0;else U("tickSpacing")&&(this.autoTicks=!0,V=!0);if(this._firstInit&&("ticks"in O||"tickSpacing"in O||(this.autoTicks=!0),V=!0,B=!0,this._firstInit=!1),V&&this.autoTicks&&(F=l.create(this.bounds,this.tickSpacing),B=!0),B){for(ne=0;ne<3;++ne)F[ne].sort(function(Z,te){return Z.x-te.x});l.equal(F,this.ticks)?B=!1:this.ticks=F}I("tickEnable"),N("tickFont")&&(B=!0),N("tickFontStyle")&&(B=!0),N("tickFontWeight")&&(B=!0),N("tickFontVariant")&&(B=!0),U("tickSize"),U("tickAngle"),U("tickPad"),W("tickColor");var K=N("labels");N("labelFont")&&(K=!0),N("labelFontStyle")&&(K=!0),N("labelFontWeight")&&(K=!0),N("labelFontVariant")&&(K=!0),I("labelEnable"),U("labelSize"),U("labelPad"),W("labelColor"),I("lineEnable"),I("lineMirror"),U("lineWidth"),W("lineColor"),I("lineTickEnable"),I("lineTickMirror"),U("lineTickLength"),U("lineTickWidth"),W("lineTickColor"),I("gridEnable"),U("gridWidth"),W("gridColor"),I("zeroEnable"),W("zeroLineColor"),U("zeroLineWidth"),I("backgroundEnable"),W("backgroundColor");var ee=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],J=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(K||B)&&this._text.update(this.bounds,this.labels,ee,this.ticks,J):this._text=i(this.gl,this.bounds,this.labels,ee,this.ticks,J),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var y=[new x,new x,new x];function A(O,P,F,U,I){for(var N=O.primalOffset,W=O.primalMinor,B=O.mirrorOffset,V=O.mirrorMinor,q=U[P],ne=0;ne<3;++ne)if(P!==ne){var $=N,K=B,ee=W,J=V;q&1<<ne&&($=B,K=N,ee=V,J=W),$[ne]=F[0][ne],K[ne]=F[1][ne],I[ne]>0?(ee[ne]=-1,J[ne]=0):(ee[ne]=0,J[ne]=1)}}var d=[0,0,0],S={model:u,view:u,projection:u,_ortho:!1};v.isOpaque=function(){return!0},v.isTransparent=function(){return!1},v.drawTransparent=function(O){};var k=[0,0,0],E=[0,0,0],L=[0,0,0];v.draw=function(O){O=O||S;for(var P=this.gl,F=O.model||u,U=O.view||u,I=O.projection||u,N=this.bounds,W=O._ortho||!1,B=s(F,U,I,N,W),V=B.cubeEdges,q=B.axis,ne=U[12],$=U[13],K=U[14],ee=U[15],J=(W?2:1)*this.pixelRatio*(I[3]*ne+I[7]*$+I[11]*K+I[15]*ee)/P.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=V[Z],this.lastCubeProps.axis[Z]=q[Z];var te=y;for(Z=0;Z<3;++Z)A(y[Z],Z,this.bounds,V,q);P=this.gl;var oe,se,ce,ye=d;for(Z=0;Z<3;++Z)this.backgroundEnable[Z]?ye[Z]=q[Z]:ye[Z]=0;for(this._background.draw(F,U,I,N,ye,this.backgroundColor),this._lines.bind(F,U,I,this),Z=0;Z<3;++Z){var me=[0,0,0];q[Z]>0?me[Z]=N[1][Z]:me[Z]=N[0][Z];for(var fe=0;fe<2;++fe){var pe=(Z+1+fe)%3,ge=(Z+1+(1^fe))%3;this.gridEnable[pe]&&this._lines.drawGrid(pe,ge,this.bounds,me,this.gridColor[pe],this.gridWidth[pe]*this.pixelRatio)}for(fe=0;fe<2;++fe)pe=(Z+1+fe)%3,ge=(Z+1+(1^fe))%3,this.zeroEnable[ge]&&Math.min(N[0][ge],N[1][ge])<=0&&Math.max(N[0][ge],N[1][ge])>=0&&this._lines.drawZero(pe,ge,this.bounds,me,this.zeroLineColor[ge],this.zeroLineWidth[ge]*this.pixelRatio)}for(Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,te[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,te[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);var ke=h(k,te[Z].primalMinor),Ce=h(E,te[Z].mirrorMinor),de=this.lineTickLength;for(fe=0;fe<3;++fe){var ae=J/F[5*fe];ke[fe]*=de[fe]*ae,Ce[fe]*=de[fe]*ae}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,te[Z].primalOffset,ke,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,te[Z].mirrorOffset,Ce,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}function re(Pe){(ce=[0,0,0])[Pe]=1}function he(Pe,De,ve){var we=(Pe+1)%3,Ee=(Pe+2)%3,Fe=De[we],Le=De[Ee],je=ve[we],Ge=ve[Ee];Fe>0&&Ge>0||Fe>0&&Ge<0||Fe<0&&Ge>0||Fe<0&&Ge<0?re(we):(Le>0&&je>0||Le>0&&je<0||Le<0&&je>0||Le<0&&je<0)&&re(Ee)}for(this._lines.unbind(),this._text.bind(F,U,I,this.pixelRatio),Z=0;Z<3;++Z){var Se=te[Z].primalMinor,xe=te[Z].mirrorMinor,Te=h(L,te[Z].primalOffset);for(fe=0;fe<3;++fe)this.lineTickEnable[Z]&&(Te[fe]+=J*Se[fe]*Math.max(this.lineTickLength[fe],0)/F[5*fe]);var Ae=[0,0,0];if(Ae[Z]=1,this.tickEnable[Z]){for(this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,se=1,(oe=[this.tickAlign[Z],.5,se])[0]==="auto"?oe[0]=0:oe[0]=parseInt(""+oe[0]),ce=[0,0,0],he(Z,Se,xe),fe=0;fe<3;++fe)Te[fe]+=J*Se[fe]*this.tickPad[fe]/F[5*fe];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],Te,this.tickColor[Z],Ae,ce,oe)}if(this.labelEnable[Z]){for(se=0,ce=[0,0,0],this.labels[Z].length>4&&(re(Z),se=1),(oe=[this.labelAlign[Z],.5,se])[0]==="auto"?oe[0]=0:oe[0]=parseInt(""+oe[0]),fe=0;fe<3;++fe)Te[fe]+=J*Se[fe]*this.labelPad[fe]/F[5*fe];Te[Z]+=.5*(N[0][Z]+N[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],Te,this.labelColor[Z],[0,0,0],ce,oe)}}this._text.unbind()},v.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(c,o,t){"use strict";c.exports=function(u){for(var p=[],f=[],m=0,h=0;h<3;++h)for(var g=(h+1)%3,v=(h+2)%3,x=[0,0,0],y=[0,0,0],A=-1;A<=1;A+=2){f.push(m,m+2,m+1,m+1,m+2,m+3),x[h]=A,y[h]=A;for(var d=-1;d<=1;d+=2){x[g]=d;for(var S=-1;S<=1;S+=2)x[v]=S,p.push(x[0],x[1],x[2],y[0],y[1],y[2]),m+=1}var k=g;g=v,v=k}var E=i(u,new Float32Array(p)),L=i(u,new Uint16Array(f),u.ELEMENT_ARRAY_BUFFER),O=n(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],L),P=a(u);return P.attributes.position.location=0,P.attributes.normal.location=1,new s(u,E,O,P)};var i=t(2762),n=t(8116),a=t(1879).bg;function s(u,p,f,m){this.gl=u,this.buffer=p,this.vao=f,this.shader=m}var l=s.prototype;l.draw=function(u,p,f,m,h,g){for(var v=!1,x=0;x<3;++x)v=v||h[x];if(v){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:f,bounds:m,enable:h,colors:g},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(c,o,t){"use strict";c.exports=function(d,S,k,E,L){n(l,S,d),n(l,k,l);for(var O=0,P=0;P<2;++P){f[2]=E[P][2];for(var F=0;F<2;++F){f[1]=E[F][1];for(var U=0;U<2;++U)f[0]=E[U][0],h(u[O],f,l),O+=1}}var I=-1;for(P=0;P<8;++P){for(var N=u[P][3],W=0;W<3;++W)p[P][W]=u[P][W]/N;L&&(p[P][2]*=-1),N<0&&(I<0||p[P][2]<p[I][2])&&(I=P)}if(I<0){I=0;for(var B=0;B<3;++B){for(var V=(B+2)%3,q=(B+1)%3,ne=-1,$=-1,K=0;K<2;++K){var ee=(Z=K<<B)+(K<<V)+(1-K<<q),J=Z+(1-K<<V)+(K<<q);s(p[Z],p[ee],p[J],m)<0||(K?ne=1:$=1)}if(ne<0||$<0)$>ne&&(I|=1<<B);else{for(K=0;K<2;++K){ee=(Z=K<<B)+(K<<V)+(1-K<<q),J=Z+(1-K<<V)+(K<<q);var Z,te=v([u[Z],u[ee],u[J],u[Z+(1<<V)+(1<<q)]]);K?ne=te:$=te}$>ne&&(I|=1<<B)}}}var oe=7^I,se=-1;for(P=0;P<8;++P)P!==I&&P!==oe&&(se<0||p[se][1]>p[P][1])&&(se=P);var ce=-1;for(P=0;P<3;++P)(me=se^1<<P)!==I&&me!==oe&&(ce<0&&(ce=me),(q=p[me])[0]<p[ce][0]&&(ce=me));var ye=-1;for(P=0;P<3;++P){var me;(me=se^1<<P)!==I&&me!==oe&&me!==ce&&(ye<0&&(ye=me),(q=p[me])[0]>p[ye][0]&&(ye=me))}var fe=x;fe[0]=fe[1]=fe[2]=0,fe[i.log2(ce^se)]=se&ce,fe[i.log2(se^ye)]=se&ye;var pe=7^ye;pe===I||pe===oe?(pe=7^ce,fe[i.log2(ye^pe)]=pe&ye):fe[i.log2(ce^pe)]=pe&ce;var ge=y,ke=I;for(B=0;B<3;++B)ge[B]=ke&1<<B?-1:1;return A};var i=t(8828),n=t(6760),a=t(5202),s=t(3250),l=new Array(16),u=new Array(8),p=new Array(8),f=new Array(3),m=[0,0,0];function h(d,S,k){for(var E=0;E<4;++E){d[E]=k[12+E];for(var L=0;L<3;++L)d[E]+=S[L]*k[4*L+E]}}(function(){for(var d=0;d<8;++d)u[d]=[1,1,1,1],p[d]=[1,1,1]})();var g=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(d){for(var S=0;S<g.length;++S)if((d=a.positive(d,g[S])).length<3)return 0;var k=d[0],E=k[0]/k[3],L=k[1]/k[3],O=0;for(S=1;S+1<d.length;++S){var P=d[S],F=d[S+1],U=P[0]/P[3]-E,I=P[1]/P[3]-L,N=F[0]/F[3]-E,W=F[1]/F[3]-L;O+=Math.abs(U*W-I*N)}return O}var x=[1,1,1],y=[0,0,0],A={cubeEdges:x,axis:y}},501:function(c,o,t){"use strict";c.exports=function(x,y,A){var d=[],S=[0,0,0],k=[0,0,0],E=[0,0,0],L=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var O=0;O<3;++O){for(var P=d.length/3|0,F=0;F<A[O].length;++F){var U=+A[O][F].x;d.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1)}var I=d.length/3|0;S[O]=P,k[O]=I-P,P=d.length/3|0;for(var N=0;N<A[O].length;++N)U=+A[O][N].x,d.push(U,0,1,U,1,1,U,0,-1,U,0,-1,U,1,1,U,1,-1);I=d.length/3|0,E[O]=P,L[O]=I-P}var W=i(x,new Float32Array(d)),B=n(x,[{buffer:W,type:x.FLOAT,size:3,stride:0,offset:0}]),V=a(x);return V.attributes.position.location=0,new g(x,W,B,V,k,S,L,E)};var i=t(2762),n=t(8116),a=t(1879).n,s=[0,0,0],l=[0,0,0],u=[0,0,0],p=[0,0,0],f=[1,1];function m(x){return x[0]=x[1]=x[2]=0,x}function h(x,y){return x[0]=y[0],x[1]=y[1],x[2]=y[2],x}function g(x,y,A,d,S,k,E,L){this.gl=x,this.vertBuffer=y,this.vao=A,this.shader=d,this.tickCount=S,this.tickOffset=k,this.gridCount=E,this.gridOffset=L}var v=g.prototype;v.bind=function(x,y,A){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=y,this.shader.uniforms.projection=A,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(x,y,A,d,S){var k=m(l);this.shader.uniforms.majorAxis=l,k[x]=y[1][x]-y[0][x],this.shader.uniforms.minorAxis=k;var E,L=h(p,A);L[x]+=y[0][x],this.shader.uniforms.offset=L,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=d,(E=m(u))[(x+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=m(u))[(x+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(x,y,A,d,S){if(this.tickCount[x]){var k=m(s);k[x]=1,this.shader.uniforms.majorAxis=k,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=A,this.shader.uniforms.color=d,this.shader.uniforms.lineWidth=S;var E=m(u);E[x]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},v.drawGrid=function(x,y,A,d,S,k){if(this.gridCount[x]){var E=m(l);E[y]=A[1][y]-A[0][y],this.shader.uniforms.minorAxis=E;var L=h(p,d);L[y]+=A[0][y],this.shader.uniforms.offset=L;var O=m(s);O[x]=1,this.shader.uniforms.majorAxis=O;var P=m(u);P[x]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},v.drawZero=function(x,y,A,d,S,k){var E=m(l);this.shader.uniforms.majorAxis=E,E[x]=A[1][x]-A[0][x],this.shader.uniforms.minorAxis=E;var L=h(p,d);L[x]+=A[0][x],this.shader.uniforms.offset=L;var O=m(u);O[y]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(c,o,t){"use strict";var i=t(3236),n=t(9405),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.n=function(m){return n(m,a,s,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.Q=function(m){return n(m,l,u,null,[{name:"position",type:"vec3"}])};var p=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);o.bg=function(m){return n(m,p,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(c,o,t){"use strict";c.exports=function(h,g,v,x,y,A){var d=i(h),S=n(h,[{buffer:d,size:3}]),k=s(h);k.attributes.position.location=0;var E=new p(h,k,d,S);return E.update(g,v,x,y,A),E};var i=t(2762),n=t(8116),a=t(4359),s=t(1879).Q,l=window||_.global||{},u=l.__TEXT_CACHE||{};function p(h,g,v,x){this.gl=h,this.shader=g,this.buffer=v,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var f=p.prototype,m=[0,0];f.bind=function(h,g,v,x){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=h,y.view=g,y.projection=v,y.pixelScale=x,m[0]=this.gl.drawingBufferWidth,m[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=m},f.unbind=function(){this.vao.unbind()},f.update=function(h,g,v,x,y){var A=[];function d(I,N,W,B,V,q){var ne=[W.style,W.weight,W.variant,W.family].join("_"),$=u[ne];$||($=u[ne]={});var K=$[N];K||(K=$[N]=function(me,fe){try{return a(me,fe)}catch(pe){return console.warn('error vectorizing text:"'+me+'" error:',pe),{cells:[],positions:[]}}}(N,{triangles:!0,font:W.family,fontStyle:W.style,fontWeight:W.weight,fontVariant:W.variant,textAlign:"center",textBaseline:"middle",lineSpacing:V,styletags:q}));for(var ee=(B||12)/12,J=K.positions,Z=K.cells,te=0,oe=Z.length;te<oe;++te)for(var se=Z[te],ce=2;ce>=0;--ce){var ye=J[se[ce]];A.push(ee*ye[0],-ee*ye[1],I)}}for(var S=[0,0,0],k=[0,0,0],E=[0,0,0],L=[0,0,0],O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){E[P]=A.length/3|0,d(.5*(h[0][P]+h[1][P]),g[P],v[P],12,1.25,O),L[P]=(A.length/3|0)-E[P],S[P]=A.length/3|0;for(var F=0;F<x[P].length;++F)if(x[P][F].text){var U={family:x[P][F].font||y[P].family,style:y[P].fontStyle||y[P].style,weight:y[P].fontWeight||y[P].weight,variant:y[P].fontVariant||y[P].variant};d(x[P][F].x,x[P][F].text,U,x[P][F].fontSize||12,1.25,O)}k[P]=(A.length/3|0)-S[P]}this.buffer.update(A),this.tickOffset=S,this.tickCount=k,this.labelOffset=E,this.labelCount=L},f.drawTicks=function(h,g,v,x,y,A,d,S){this.tickCount[h]&&(this.shader.uniforms.axis=A,this.shader.uniforms.color=y,this.shader.uniforms.angle=v,this.shader.uniforms.scale=g,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h]))},f.drawLabel=function(h,g,v,x,y,A,d,S){this.labelCount[h]&&(this.shader.uniforms.axis=A,this.shader.uniforms.color=y,this.shader.uniforms.angle=v,this.shader.uniforms.scale=g,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[h],this.labelOffset[h]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(c,o){"use strict";function t(i,n){var a=i+"",s=a.indexOf("."),l=0;s>=0&&(l=a.length-s-1);var u=Math.pow(10,l),p=Math.round(i*n*u),f=p+"";if(f.indexOf("e")>=0)return f;var m=p/u,h=p%u;p<0?(m=0|-Math.ceil(m),h=0|-h):(m=0|Math.floor(m),h|=0);var g=""+m;if(p<0&&(g="-"+g),l){for(var v=""+h;v.length<l;)v="0"+v;return g+"."+v}return g}o.create=function(i,n){for(var a=[],s=0;s<3;++s){for(var l=[],u=(i[0][s],i[1][s],0);u*n[s]<=i[1][s];++u)l.push({x:u*n[s],text:t(n[s],u)});for(u=-1;u*n[s]>=i[0][s];--u)l.push({x:u*n[s],text:t(n[s],u)});a.push(l)}return a},o.equal=function(i,n){for(var a=0;a<3;++a){if(i[a].length!==n[a].length)return!1;for(var s=0;s<i[a].length;++s){var l=i[a][s],u=n[a][s];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},5445:function(c,o,t){"use strict";c.exports=function(A,d,S,k,E){var L=d.model||p,O=d.view||p,P=d.projection||p,F=d._ortho||!1,U=A.bounds,I=(E=E||a(L,O,P,U,F)).axis;s(f,O,L),s(f,P,f);for(var N=x,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var B=i(l(f,f));l(f,f);for(var V=0;V<3;++V){var q=(V+1)%3,ne=(V+2)%3,$=y;e:for(W=0;W<2;++W){var K=[];if(I[V]<0!=!!W){$[V]=U[W][V];for(var ee=0;ee<2;++ee){$[q]=U[ee^W][q];for(var J=0;J<2;++J)$[ne]=U[J^ee^W][ne],K.push($.slice())}var Z=F?5:4;for(ee=Z;ee===Z;++ee){if(K.length===0)continue e;K=n.positive(K,B[ee])}for(ee=0;ee<K.length;++ee){ne=K[ee];var te=v(y,f,ne,S,k);for(J=0;J<3;++J)N[J].lo=Math.min(N[J].lo,ne[J]),N[J].hi=Math.max(N[J].hi,ne[J]),J!==V&&(N[J].pixelsPerDataUnit=Math.min(N[J].pixelsPerDataUnit,Math.abs(te[J])))}}}}return N};var i=t(5033),n=t(5202),a=t(6429),s=t(6760),l=t(5665),u=t(5352),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function m(A,d,S){this.lo=A,this.hi=d,this.pixelsPerDataUnit=S}var h=[0,0,0,1],g=[0,0,0,1];function v(A,d,S,k,E){for(var L=0;L<3;++L){for(var O=h,P=g,F=0;F<3;++F)P[F]=O[F]=S[F];P[3]=O[3]=1,P[L]+=1,u(P,P,d),P[3]<0&&(A[L]=1/0),O[L]-=1,u(O,O,d),O[3]<0&&(A[L]=1/0);var U=(O[0]/O[3]-P[0]/P[3])*k,I=(O[1]/O[3]-P[1]/P[3])*E;A[L]=.25*Math.sqrt(U*U+I*I)}return A}var x=[new m(1/0,-1/0,1/0),new m(1/0,-1/0,1/0),new m(1/0,-1/0,1/0)],y=[0,0,0]},2762:function(c,o,t){"use strict";var i=t(1888),n=t(5298),a=t(9618),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(m,h,g,v,x){this.gl=m,this.type=h,this.handle=g,this.length=v,this.usage=x}var u=l.prototype;function p(m,h,g,v,x,y){var A=x.length*x.BYTES_PER_ELEMENT;if(y<0)return m.bufferData(h,x,v),A;if(A+y>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return m.bufferSubData(h,y,x),g}function f(m,h){for(var g=i.malloc(m.length,h),v=m.length,x=0;x<v;++x)g[x]=m[x];return g}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(m,h){if(typeof h!="number"&&(h=-1),this.bind(),typeof m=="object"&&m.shape!==void 0){var g=m.dtype;if(s.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(g=gl.getExtension("OES_element_index_uint")&&g!=="uint16"?"uint32":"uint16"),g===m.dtype&&function(A,d){for(var S=1,k=d.length-1;k>=0;--k){if(d[k]!==S)return!1;S*=A[k]}return!0}(m.shape,m.stride))m.offset===0&&m.data.length===m.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,m.data,h):this.length=p(this.gl,this.type,this.length,this.usage,m.data.subarray(m.offset,m.shape[0]),h);else{var v=i.malloc(m.size,g),x=a(v,m.shape);n.assign(x,m),this.length=p(this.gl,this.type,this.length,this.usage,h<0?v:v.subarray(0,m.size),h),i.free(v)}}else if(Array.isArray(m)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(m,"uint16"):f(m,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,h<0?y:y.subarray(0,m.length),h),i.free(y)}else if(typeof m=="object"&&typeof m.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,m,h);else{if(typeof m!="number"&&m!==void 0)throw new Error("gl-buffer: Invalid data type");if(h>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(m|=0)<=0&&(m=1),this.gl.bufferData(this.type,0|m,this.usage),this.length=m}},c.exports=function(m,h,g,v){if(g=g||m.ARRAY_BUFFER,v=v||m.DYNAMIC_DRAW,g!==m.ARRAY_BUFFER&&g!==m.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==m.DYNAMIC_DRAW&&v!==m.STATIC_DRAW&&v!==m.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=m.createBuffer(),y=new l(m,g,x,0,v);return y.update(h),y}},6405:function(c,o,t){"use strict";var i=t(2931);c.exports=function(a,s){var l=a.positions,u=a.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),p;for(var f=0,m=1/0,h=-1/0,g=1/0,v=-1/0,x=1/0,y=-1/0,A=null,d=null,S=[],k=1/0,E=!1,L=a.coneSizemode==="raw",O=0;O<l.length;O++){var P=l[O];m=Math.min(P[0],m),h=Math.max(P[0],h),g=Math.min(P[1],g),v=Math.max(P[1],v),x=Math.min(P[2],x),y=Math.max(P[2],y);var F=u[O];if(i.length(F)>f&&(f=i.length(F)),O&&!L){var U=2*i.distance(A,P)/(i.length(d)+i.length(F));U?(k=Math.min(k,U),E=!1):E=!0}E||(A=P,d=F),S.push(F)}var I=[m,g,x],N=[h,v,y];s&&(s[0]=I,s[1]=N),f===0&&(f=1);var W=1/f;isFinite(k)||(k=1),p.vectorScale=k;var B=a.coneSize||(L?1:.5);a.absoluteConeSize&&(B=a.absoluteConeSize*W),p.coneScale=B,O=0;for(var V=0;O<l.length;O++)for(var q=(P=l[O])[0],ne=P[1],$=P[2],K=S[O],ee=i.length(K)*W,J=0;J<8;J++){p.positions.push([q,ne,$,V++]),p.positions.push([q,ne,$,V++]),p.positions.push([q,ne,$,V++]),p.positions.push([q,ne,$,V++]),p.positions.push([q,ne,$,V++]),p.positions.push([q,ne,$,V++]),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vectors.push(K),p.vertexIntensity.push(ee,ee,ee),p.vertexIntensity.push(ee,ee,ee);var Z=p.positions.length;p.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return p};var n=t(614);c.exports.createMesh=t(9060),c.exports.createConeMesh=function(a,s){return c.exports.createMesh(a,s,{shaders:n,traceType:"cone"})}},9060:function(c,o,t){"use strict";var i=t(9405),n=t(2762),a=t(8116),s=t(7766),l=t(6760),u=t(7608),p=t(9618),f=t(6729),m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(v,x,y,A,d,S,k,E,L,O,P){this.gl=v,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=y,this.pickShader=A,this.trianglePositions=d,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=L,this.triangleIds=k,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=m,this._view=m,this._projection=m,this._resolution=[1,1]}var g=h.prototype;g.isOpaque=function(){return this.opacity>=1},g.isTransparent=function(){return this.opacity<1},g.pickSlots=1,g.setPickBase=function(v){this.pickId=v},g.update=function(v){v=v||{};var x=this.gl;this.dirty=!0,"lightPosition"in v&&(this.lightPosition=v.lightPosition),"opacity"in v&&(this.opacity=v.opacity),"ambient"in v&&(this.ambientLight=v.ambient),"diffuse"in v&&(this.diffuseLight=v.diffuse),"specular"in v&&(this.specularLight=v.specular),"roughness"in v&&(this.roughness=v.roughness),"fresnel"in v&&(this.fresnel=v.fresnel),v.tubeScale!==void 0&&(this.tubeScale=v.tubeScale),v.vectorScale!==void 0&&(this.vectorScale=v.vectorScale),v.coneScale!==void 0&&(this.coneScale=v.coneScale),v.coneOffset!==void 0&&(this.coneOffset=v.coneOffset),v.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(te){for(var oe=f({colormap:te,nshades:256,format:"rgba"}),se=new Uint8Array(1024),ce=0;ce<256;++ce){for(var ye=oe[ce],me=0;me<3;++me)se[4*ce+me]=ye[me];se[4*ce+3]=255*ye[3]}return p(se,[256,256,4],[4,0,1])}(v.colormap)),this.texture.generateMipmap());var y=v.cells,A=v.positions,d=v.vectors;if(A&&y&&d){var S=[],k=[],E=[],L=[],O=[];this.cells=y,this.positions=A,this.vectors=d;var P=v.meshColor||[1,1,1,1],F=v.vertexIntensity,U=1/0,I=-1/0;if(F)if(v.vertexIntensityBounds)U=+v.vertexIntensityBounds[0],I=+v.vertexIntensityBounds[1];else for(var N=0;N<F.length;++N){var W=F[N];U=Math.min(U,W),I=Math.max(I,W)}else for(N=0;N<A.length;++N)W=A[N][2],U=Math.min(U,W),I=Math.max(I,W);for(this.intensity=F||function(te){for(var oe=te.length,se=new Array(oe),ce=0;ce<oe;++ce)se[ce]=te[ce][2];return se}(A),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<A.length;++N)for(var B=A[N],V=0;V<3;++V)!isNaN(B[V])&&isFinite(B[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],B[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],B[V]));var q=0;e:for(N=0;N<y.length;++N){var ne=y[N];if(ne.length===3){for(V=0;V<3;++V){B=A[K=ne[V]];for(var $=0;$<3;++$)if(isNaN(B[$])||!isFinite(B[$]))continue e}for(V=0;V<3;++V){var K;B=A[K=ne[2-V]],S.push(B[0],B[1],B[2],B[3]);var ee=d[K];k.push(ee[0],ee[1],ee[2],ee[3]||0);var J,Z=P;Z.length===3?E.push(Z[0],Z[1],Z[2],1):E.push(Z[0],Z[1],Z[2],Z[3]),J=F?[(F[K]-U)/(I-U),0]:[(B[2]-U)/(I-U),0],L.push(J[0],J[1]),O.push(N)}q+=1}}this.triangleCount=q,this.trianglePositions.update(S),this.triangleVectors.update(k),this.triangleColors.update(E),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(O))}},g.drawTransparent=g.draw=function(v){v=v||{};for(var x=this.gl,y=v.model||m,A=v.view||m,d=v.projection||m,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)S[0][k]=Math.max(S[0][k],this.clipBounds[0][k]),S[1][k]=Math.min(S[1][k],this.clipBounds[1][k]);var E={model:y,view:A,projection:d,inverseModel:m.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),x.disable(x.CULL_FACE),this.texture.bind(0);var L=new Array(16);for(l(L,E.view,E.model),l(L,E.projection,L),u(L,L),k=0;k<3;++k)E.eyePosition[k]=L[12+k]/L[15];var O=L[15];for(k=0;k<3;++k)O+=this.lightPosition[k]*L[4*k+3];for(k=0;k<3;++k){for(var P=L[12+k],F=0;F<3;++F)P+=L[4*F+k]*this.lightPosition[F];E.lightPosition[k]=P/O}if(this.triangleCount>0){var U=this.triShader;U.bind(),U.uniforms=E,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},g.drawPick=function(v){v=v||{};for(var x=this.gl,y=v.model||m,A=v.view||m,d=v.projection||m,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)S[0][k]=Math.max(S[0][k],this.clipBounds[0][k]),S[1][k]=Math.min(S[1][k],this.clipBounds[1][k]);this._model=[].slice.call(y),this._view=[].slice.call(A),this._projection=[].slice.call(d),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var E={model:y,view:A,projection:d,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},g.pick=function(v){if(!v||v.id!==this.pickId)return null;var x=v.value[0]+256*v.value[1]+65536*v.value[2],y=this.cells[x],A=this.positions[y[1]].slice(0,3),d={position:A,dataCoordinate:A,index:Math.floor(y[1]/48)};return this.traceType==="cone"?d.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(d.intensity=this.intensity[y[1]],d.velocity=this.vectors[y[1]].slice(0,3),d.divergence=this.vectors[y[1]][3],d.index=x),d},g.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},c.exports=function(v,x,y){var A=y.shaders;arguments.length===1&&(v=(x=v).gl);var d=function(I,N){var W=i(I,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(v,A),S=function(I,N){var W=i(I,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(v,A),k=s(v,p(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=v.LINEAR_MIPMAP_LINEAR,k.magFilter=v.LINEAR;var E=n(v),L=n(v),O=n(v),P=n(v),F=n(v),U=new h(v,k,d,S,E,L,F,O,P,a(v,[{buffer:E,type:v.FLOAT,size:4},{buffer:F,type:v.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:v.FLOAT,size:4},{buffer:P,type:v.FLOAT,size:2},{buffer:L,type:v.FLOAT,size:4}]),y.traceType||"cone");return U.update(x),U}},614:function(c,o,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(c){c.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(c,o,t){var i=t(737);c.exports=function(n){return i[n]}},9165:function(c,o,t){"use strict";c.exports=function(h){var g=h.gl,v=i(g),x=n(g,[{buffer:v,type:g.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:g.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:g.FLOAT,size:3,offset:28,stride:40}]),y=a(g);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var A=new l(g,v,x,y);return A.update(h),A};var i=t(2762),n=t(8116),a=t(3436),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(h,g,v,x){this.gl=h,this.shader=x,this.buffer=g,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function p(h,g){for(var v=0;v<3;++v)h[0][v]=Math.min(h[0][v],g[v]),h[1][v]=Math.max(h[1][v],g[v])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(h){var g=this.gl,v=this.shader.uniforms;this.shader.bind();var x=v.view=h.view||s,y=v.projection=h.projection||s;v.model=h.model||s,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var A=x[12],d=x[13],S=x[14],k=x[15],E=(h._ortho?2:1)*this.pixelRatio*(y[3]*A+y[7]*d+y[11]*S+y[15]*k)/g.drawingBufferHeight;this.vao.bind();for(var L=0;L<3;++L)g.lineWidth(this.lineWidth[L]*this.pixelRatio),v.capSize=this.capSize[L]*E,this.lineCount[L]&&g.drawArrays(g.LINES,this.lineOffset[L],this.lineCount[L]);this.vao.unbind()};var f=function(){for(var h=new Array(3),g=0;g<3;++g){for(var v=[],x=1;x<=2;++x)for(var y=-1;y<=1;y+=2){var A=[0,0,0];A[(x+g)%3]=y,v.push(A)}h[g]=v}return h}();function m(h,g,v,x){for(var y=f[x],A=0;A<y.length;++A){var d=y[A];h.push(g[0],g[1],g[2],v[0],v[1],v[2],v[3],d[0],d[1],d[2])}return y.length}u.update=function(h){"lineWidth"in(h=h||{})&&(this.lineWidth=h.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in h&&(this.capSize=h.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in h&&(this.opacity=+h.opacity,this.opacity<1&&(this.hasAlpha=!0));var g=h.color||[[0,0,0],[0,0,0],[0,0,0]],v=h.position,x=h.error;if(Array.isArray(g[0])||(g=[g,g,g]),v&&x){var y=[],A=v.length,d=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=d;e:for(var k=0;k<A;++k){for(var E=v[k],L=0;L<3;++L)if(isNaN(E[L])||!isFinite(E[L]))continue e;var O,P=x[k],F=g[S];Array.isArray(F[0])&&(F=g[k]),F.length===3?F=[F[0],F[1],F[2],1]:F.length===4&&(F=[F[0],F[1],F[2],F[3]],!this.hasAlpha&&F[3]<1&&(this.hasAlpha=!0)),!isNaN(P[0][S])&&!isNaN(P[1][S])&&(P[0][S]<0&&((O=E.slice())[S]+=P[0][S],y.push(E[0],E[1],E[2],F[0],F[1],F[2],F[3],0,0,0,O[0],O[1],O[2],F[0],F[1],F[2],F[3],0,0,0),p(this.bounds,O),d+=2+m(y,O,F,S)),P[1][S]>0&&((O=E.slice())[S]+=P[1][S],y.push(E[0],E[1],E[2],F[0],F[1],F[2],F[3],0,0,0,O[0],O[1],O[2],F[0],F[1],F[2],F[3],0,0,0),p(this.bounds,O),d+=2+m(y,O,F,S)))}this.lineCount[S]=d-this.lineOffset[S]}this.buffer.update(y)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(c,o,t){"use strict";var i=t(3236),n=t(9405),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);c.exports=function(l){return n(l,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(c,o,t){"use strict";var i=t(7766);c.exports=function(A,d,S,k){n||(n=A.FRAMEBUFFER_UNSUPPORTED,a=A.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,s=A.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=A.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=A.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(N,W){var B=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(B+1);for(var V=0;V<=B;++V){for(var q=new Array(B),ne=0;ne<V;++ne)q[ne]=N.COLOR_ATTACHMENT0+ne;for(ne=V;ne<B;++ne)q[ne]=N.NONE;u[V]=q}}(A,E),Array.isArray(d)&&(k=S,S=0|d[1],d=0|d[0]),typeof d!="number")throw new Error("gl-fbo: Missing shape parameter");var L=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(d<0||d>L||S<0||S>L)throw new Error("gl-fbo: Parameters are too large for FBO");var O=1;if("color"in(k=k||{})){if((O=Math.max(0|k.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(O>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(O>A.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+O+" draw buffers")}}var P=A.UNSIGNED_BYTE,F=A.getExtension("OES_texture_float");if(k.float&&O>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=A.FLOAT}else k.preferFloat&&O>0&&F&&(P=A.FLOAT);var U=!0;"depth"in k&&(U=!!k.depth);var I=!1;return"stencil"in k&&(I=!!k.stencil),new v(A,d,S,P,O,U,I,E)};var n,a,s,l,u=null;function p(A){return[A.getParameter(A.FRAMEBUFFER_BINDING),A.getParameter(A.RENDERBUFFER_BINDING),A.getParameter(A.TEXTURE_BINDING_2D)]}function f(A,d){A.bindFramebuffer(A.FRAMEBUFFER,d[0]),A.bindRenderbuffer(A.RENDERBUFFER,d[1]),A.bindTexture(A.TEXTURE_2D,d[2])}function m(A){switch(A){case n:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(A,d,S,k,E,L){if(!k)return null;var O=i(A,d,S,E,k);return O.magFilter=A.NEAREST,O.minFilter=A.NEAREST,O.mipSamples=1,O.bind(),A.framebufferTexture2D(A.FRAMEBUFFER,L,A.TEXTURE_2D,O.handle,0),O}function g(A,d,S,k,E){var L=A.createRenderbuffer();return A.bindRenderbuffer(A.RENDERBUFFER,L),A.renderbufferStorage(A.RENDERBUFFER,k,d,S),A.framebufferRenderbuffer(A.FRAMEBUFFER,E,A.RENDERBUFFER,L),L}function v(A,d,S,k,E,L,O,P){this.gl=A,this._shape=[0|d,0|S],this._destroyed=!1,this._ext=P,this.color=new Array(E);for(var F=0;F<E;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=k,this._useDepth=L,this._useStencil=O;var U=this,I=[0|d,0|S];Object.defineProperties(I,{0:{get:function(){return U._shape[0]},set:function(N){return U.width=N}},1:{get:function(){return U._shape[1]},set:function(N){return U.height=N}}}),this._shapeVector=I,function(N){var W=p(N.gl),B=N.gl,V=N.handle=B.createFramebuffer(),q=N._shape[0],ne=N._shape[1],$=N.color.length,K=N._ext,ee=N._useStencil,J=N._useDepth,Z=N._colorType;B.bindFramebuffer(B.FRAMEBUFFER,V);for(var te=0;te<$;++te)N.color[te]=h(B,q,ne,Z,B.RGBA,B.COLOR_ATTACHMENT0+te);$===0?(N._color_rb=g(B,q,ne,B.RGBA4,B.COLOR_ATTACHMENT0),K&&K.drawBuffersWEBGL(u[0])):$>1&&K.drawBuffersWEBGL(u[$]);var oe=B.getExtension("WEBGL_depth_texture");oe?ee?N.depth=h(B,q,ne,oe.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):J&&(N.depth=h(B,q,ne,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):J&&ee?N._depth_rb=g(B,q,ne,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):J?N._depth_rb=g(B,q,ne,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):ee&&(N._depth_rb=g(B,q,ne,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var se=B.checkFramebufferStatus(B.FRAMEBUFFER);if(se!==B.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(B.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),te=0;te<N.color.length;++te)N.color[te].dispose(),N.color[te]=null;N._color_rb&&(B.deleteRenderbuffer(N._color_rb),N._color_rb=null),f(B,W),m(se)}f(B,W)}(this)}var x=v.prototype;function y(A,d,S){if(A._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(A._shape[0]!==d||A._shape[1]!==S){var k=A.gl,E=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");A._shape[0]=d,A._shape[1]=S;for(var L=p(k),O=0;O<A.color.length;++O)A.color[O].shape=A._shape;A._color_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,A._color_rb),k.renderbufferStorage(k.RENDERBUFFER,k.RGBA4,A._shape[0],A._shape[1])),A.depth&&(A.depth.shape=A._shape),A._depth_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,A._depth_rb),A._useDepth&&A._useStencil?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_STENCIL,A._shape[0],A._shape[1]):A._useDepth?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_COMPONENT16,A._shape[0],A._shape[1]):A._useStencil&&k.renderbufferStorage(k.RENDERBUFFER,k.STENCIL_INDEX,A._shape[0],A._shape[1])),k.bindFramebuffer(k.FRAMEBUFFER,A.handle);var P=k.checkFramebufferStatus(k.FRAMEBUFFER);P!==k.FRAMEBUFFER_COMPLETE&&(A.dispose(),f(k,L),m(P)),f(k,L)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(A){if(Array.isArray(A)||(A=[0|A,0|A]),A.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var d=0|A[0],S=0|A[1];return y(this,d,S),[d,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(A){return y(this,A|=0,this._shape[1]),A},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(A){return A|=0,y(this,this._shape[0],A),A},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,this.handle),A.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var A=this.gl;A.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(A.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(A.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(c,o,t){var i=t(3387).sprintf,n=t(5171),a=t(1848),s=t(1085);c.exports=function(l,u,p){"use strict";var f=a(u)||"of unknown name (see npm glsl-shader-name)",m="unknown type";p!==void 0&&(m=p===n.FRAGMENT_SHADER?"fragment":"vertex");for(var h=i(`Error compiling %s shader %s:
`,m,f),g=i("%s%s",h,l),v=l.split(`
`),x={},y=0;y<v.length;y++){var A=v[y];if(A!==""&&A!=="\0"){var d=parseInt(A.split(":")[2]);if(isNaN(d))throw new Error(i("Could not parse error: %s",A));x[d]=A}}var S=s(u).split(`
`);for(y=0;y<S.length;y++)if((x[y+3]||x[y+2]||x[y+1])&&(h+=S[y]+`
`,x[y+1])){var k=x[y+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),h+=i(`^^^ %s

`,k)}return{long:h.trim(),short:g.trim()}}},2510:function(c,o,t){"use strict";c.exports=function(g,v){var x=g.gl,y=new p(g,s(x,u.vertex,u.fragment),s(x,u.pickVertex,u.pickFragment),l(x),l(x),l(x),l(x));return y.update(v),g.addObject(y),y};var i=t(2478),n=t(7762),a=t(1888),s=t(9405),l=t(2762),u=t(6768);function p(g,v,x,y,A,d,S){this.plot=g,this.shader=v,this.pickShader=x,this.positionBuffer=y,this.weightBuffer=A,this.colorBuffer=d,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var f,m=p.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];m.draw=(f=[1,0,0,0,1,0,0,0,1],function(){var g=this.plot,v=this.shader,x=this.bounds,y=this.numVertices;if(!(y<=0)){var A=g.gl,d=g.dataBox,S=x[2]-x[0],k=x[3]-x[1],E=d[2]-d[0],L=d[3]-d[1];f[0]=2*S/E,f[4]=2*k/L,f[6]=2*(x[0]-d[0])/E-1,f[7]=2*(x[1]-d[1])/L-1,v.bind();var O=v.uniforms;O.viewTransform=f,O.shape=this.shape;var P=v.attributes;this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(A.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),P.color.pointer(A.UNSIGNED_BYTE,!0),A.drawArrays(A.TRIANGLES,0,y)}}),m.drawPick=function(){var g=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(x){var y=this.plot,A=this.pickShader,d=this.bounds,S=this.numVertices;if(!(S<=0)){var k=y.gl,E=y.dataBox,L=d[2]-d[0],O=d[3]-d[1],P=E[2]-E[0],F=E[3]-E[1];g[0]=2*L/P,g[4]=2*O/F,g[6]=2*(d[0]-E[0])/P-1,g[7]=2*(d[1]-E[1])/F-1;for(var U=0;U<4;++U)v[U]=x>>8*U&255;this.pickOffset=x,A.bind();var I=A.uniforms;I.viewTransform=g,I.pickOffset=v,I.shape=this.shape;var N=A.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(k.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(k.UNSIGNED_BYTE,!1),k.drawArrays(k.TRIANGLES,0,S),x+this.shape[0]*this.shape[1]}}}(),m.pick=function(g,v,x){var y=this.pickOffset,A=this.shape[0]*this.shape[1];if(x<y||x>=y+A)return null;var d=x-y,S=this.xData,k=this.yData;return{object:this,pointId:d,dataCoord:[S[d%this.shape[0]],k[d/this.shape[0]|0]]}},m.update=function(g){var v=(g=g||{}).shape||[0,0],x=g.x||n(v[0]),y=g.y||n(v[1]),A=g.z||new Float32Array(v[0]*v[1]),d=g.zsmooth!==!1;this.xData=x,this.yData=y;var S,k,E,L,O=g.colorLevels||[0],P=g.colorValues||[0,0,0,1],F=O.length,U=this.bounds;d?(S=U[0]=x[0],k=U[1]=y[0],E=U[2]=x[x.length-1],L=U[3]=y[y.length-1]):(S=U[0]=x[0]+(x[1]-x[0])/2,k=U[1]=y[0]+(y[1]-y[0])/2,E=U[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,L=U[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var I=1/(E-S),N=1/(L-k),W=v[0],B=v[1];this.shape=[W,B];var V=(d?(W-1)*(B-1):W*B)*(h.length>>>1);this.numVertices=V;for(var q=a.mallocUint8(4*V),ne=a.mallocFloat32(2*V),$=a.mallocUint8(2*V),K=a.mallocUint32(V),ee=0,J=d?W-1:W,Z=d?B-1:B,te=0;te<Z;++te){var oe,se;d?(oe=N*(y[te]-k),se=N*(y[te+1]-k)):(oe=te<B-1?N*(y[te]-(y[te+1]-y[te])/2-k):N*(y[te]-(y[te]-y[te-1])/2-k),se=te<B-1?N*(y[te]+(y[te+1]-y[te])/2-k):N*(y[te]+(y[te]-y[te-1])/2-k));for(var ce=0;ce<J;++ce){var ye,me;d?(ye=I*(x[ce]-S),me=I*(x[ce+1]-S)):(ye=ce<W-1?I*(x[ce]-(x[ce+1]-x[ce])/2-S):I*(x[ce]-(x[ce]-x[ce-1])/2-S),me=ce<W-1?I*(x[ce]+(x[ce+1]-x[ce])/2-S):I*(x[ce]+(x[ce]-x[ce-1])/2-S));for(var fe=0;fe<h.length;fe+=2){var pe,ge,ke,Ce,de=h[fe],ae=h[fe+1],re=A[d?(te+ae)*W+(ce+de):te*W+ce],he=i.le(O,re);if(he<0)pe=P[0],ge=P[1],ke=P[2],Ce=P[3];else if(he===F-1)pe=P[4*F-4],ge=P[4*F-3],ke=P[4*F-2],Ce=P[4*F-1];else{var Se=(re-O[he])/(O[he+1]-O[he]),xe=1-Se,Te=4*he,Ae=4*(he+1);pe=xe*P[Te]+Se*P[Ae],ge=xe*P[Te+1]+Se*P[Ae+1],ke=xe*P[Te+2]+Se*P[Ae+2],Ce=xe*P[Te+3]+Se*P[Ae+3]}q[4*ee]=255*pe,q[4*ee+1]=255*ge,q[4*ee+2]=255*ke,q[4*ee+3]=255*Ce,ne[2*ee]=.5*ye+.5*me,ne[2*ee+1]=.5*oe+.5*se,$[2*ee]=de,$[2*ee+1]=ae,K[ee]=te*W+ce,ee+=1}}}this.positionBuffer.update(ne),this.weightBuffer.update($),this.colorBuffer.update(q),this.idBuffer.update(K),a.free(ne),a.free(q),a.free($),a.free(K)},m.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(c,o,t){"use strict";var i=t(3236);c.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(c,o,t){var i=t(3236),n=t(9405),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(p){return n(p,a,s,null,u)},o.createPickShader=function(p){return n(p,a,l,null,u)}},5714:function(c,o,t){"use strict";c.exports=function(S){var k=S.gl||S.scene&&S.scene.gl,E=m(k);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var L=h(k);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var O=i(k),P=n(k,[{buffer:O,size:3,offset:0,stride:48},{buffer:O,size:3,offset:12,stride:48},{buffer:O,size:1,offset:24,stride:48},{buffer:O,size:1,offset:28,stride:48},{buffer:O,size:4,offset:32,stride:48}]),F=p(new Array(1024),[256,1,4]),U=0;U<1024;++U)F.data[U]=255;var I=a(k,F);I.wrap=k.REPEAT;var N=new A(k,E,L,O,P,I);return N.update(S),N};var i=t(2762),n=t(8116),a=t(7766),s=new Uint8Array(4),l=new Float32Array(s.buffer),u=t(2478),p=t(9618),f=t(7319),m=f.createShader,h=f.createPickShader,g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(S,k){for(var E=0,L=0;L<3;++L){var O=S[L]-k[L];E+=O*O}return Math.sqrt(E)}function x(S){for(var k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)k[0][E]=Math.max(S[0][E],k[0][E]),k[1][E]=Math.min(S[1][E],k[1][E]);return k}function y(S,k,E,L){this.arcLength=S,this.position=k,this.index=E,this.dataCoordinate=L}function A(S,k,E,L,O,P){this.gl=S,this.shader=k,this.pickShader=E,this.buffer=L,this.vao=O,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=P,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var d=A.prototype;d.isTransparent=function(){return this.hasAlpha},d.isOpaque=function(){return!this.hasAlpha},d.pickSlots=1,d.setPickBase=function(S){this.pickId=S},d.drawTransparent=d.draw=function(S){if(this.vertexCount){var k=this.gl,E=this.shader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(k.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},d.drawPick=function(S){if(this.vertexCount){var k=this.gl,E=this.pickShader,L=this.vao;E.bind(),E.uniforms={model:S.model||g,view:S.view||g,projection:S.projection||g,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(k.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},d.update=function(S){var k,E;this.dirty=!0;var L=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var O=[],P=[],F=[],U=0,I=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var B=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,q=!1;e:for(k=1;k<W.length;++k){var ne,$,K,ee=W[k-1],J=W[k];for(P.push(U),F.push(ee.slice()),E=0;E<3;++E){if(isNaN(ee[E])||isNaN(J[E])||!isFinite(ee[E])||!isFinite(J[E])){if(!L&&O.length>0){for(var Z=0;Z<24;++Z)O.push(O[O.length-12]);I+=2,q=!0}continue e}N[0][E]=Math.min(N[0][E],ee[E],J[E]),N[1][E]=Math.max(N[1][E],ee[E],J[E])}Array.isArray(B[0])?(ne=B.length>k-1?B[k-1]:B.length>0?B[B.length-1]:[0,0,0,1],$=B.length>k?B[k]:B.length>0?B[B.length-1]:[0,0,0,1]):ne=$=B,ne.length===3&&(ne=[ne[0],ne[1],ne[2],1]),$.length===3&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&ne[3]<1&&(this.hasAlpha=!0),K=Array.isArray(V)?V.length>k-1?V[k-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var te=U;if(U+=v(ee,J),q){for(E=0;E<2;++E)O.push(ee[0],ee[1],ee[2],J[0],J[1],J[2],te,K,ne[0],ne[1],ne[2],ne[3]);I+=2,q=!1}O.push(ee[0],ee[1],ee[2],J[0],J[1],J[2],te,K,ne[0],ne[1],ne[2],ne[3],ee[0],ee[1],ee[2],J[0],J[1],J[2],te,-K,ne[0],ne[1],ne[2],ne[3],J[0],J[1],J[2],ee[0],ee[1],ee[2],U,-K,$[0],$[1],$[2],$[3],J[0],J[1],J[2],ee[0],ee[1],ee[2],U,K,$[0],$[1],$[2],$[3]),I+=4}}if(this.buffer.update(O),P.push(U),F.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=I,this.points=F,this.arcLength=P,"dashes"in S){var oe=S.dashes.slice();for(oe.unshift(0),k=1;k<oe.length;++k)oe[k]=oe[k-1]+oe[k];var se=p(new Array(1024),[256,1,4]);for(k=0;k<256;++k){for(E=0;E<4;++E)se.set(k,0,E,0);1&u.le(oe,oe[oe.length-1]*k/255)?se.set(k,0,0,0):se.set(k,0,0,255)}this.texture.setPixels(se)}},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},d.pick=function(S){if(!S||S.id!==this.pickId)return null;var k=function(W,B,V,q){return s[0]=0,s[1]=V,s[2]=B,s[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,k);if(E<0)return null;if(E===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var L=this.points[E],O=this.points[Math.min(E+1,this.points.length-1)],P=(k-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),F=1-P,U=[0,0,0],I=0;I<3;++I)U[I]=F*L[I]+P*O[I];var N=Math.min(P<.5?E:E+1,this.points.length-1);return new y(k,U,N,this.points[N])}},1903:function(c){c.exports=function(o){var t=new Float32Array(16);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],t}},6864:function(c){c.exports=function(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},9921:function(c){c.exports=function(o){var t=o[0],i=o[1],n=o[2],a=o[3],s=o[4],l=o[5],u=o[6],p=o[7],f=o[8],m=o[9],h=o[10],g=o[11],v=o[12],x=o[13],y=o[14],A=o[15];return(t*l-i*s)*(h*A-g*y)-(t*u-n*s)*(m*A-g*x)+(t*p-a*s)*(m*y-h*x)+(i*u-n*l)*(f*A-g*v)-(i*p-a*l)*(f*y-h*v)+(n*p-a*u)*(f*x-m*v)}},7399:function(c){c.exports=function(o,t){var i=t[0],n=t[1],a=t[2],s=t[3],l=i+i,u=n+n,p=a+a,f=i*l,m=n*l,h=n*u,g=a*l,v=a*u,x=a*p,y=s*l,A=s*u,d=s*p;return o[0]=1-h-x,o[1]=m+d,o[2]=g-A,o[3]=0,o[4]=m-d,o[5]=1-f-x,o[6]=v+y,o[7]=0,o[8]=g+A,o[9]=v-y,o[10]=1-f-h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},6743:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=t[3],u=n+n,p=a+a,f=s+s,m=n*u,h=n*p,g=n*f,v=a*p,x=a*f,y=s*f,A=l*u,d=l*p,S=l*f;return o[0]=1-(v+y),o[1]=h+S,o[2]=g-d,o[3]=0,o[4]=h-S,o[5]=1-(m+y),o[6]=x+A,o[7]=0,o[8]=g+d,o[9]=x-A,o[10]=1-(m+v),o[11]=0,o[12]=i[0],o[13]=i[1],o[14]=i[2],o[15]=1,o}},7894:function(c){c.exports=function(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7608:function(c){c.exports=function(o,t){var i=t[0],n=t[1],a=t[2],s=t[3],l=t[4],u=t[5],p=t[6],f=t[7],m=t[8],h=t[9],g=t[10],v=t[11],x=t[12],y=t[13],A=t[14],d=t[15],S=i*u-n*l,k=i*p-a*l,E=i*f-s*l,L=n*p-a*u,O=n*f-s*u,P=a*f-s*p,F=m*y-h*x,U=m*A-g*x,I=m*d-v*x,N=h*A-g*y,W=h*d-v*y,B=g*d-v*A,V=S*B-k*W+E*N+L*I-O*U+P*F;return V?(V=1/V,o[0]=(u*B-p*W+f*N)*V,o[1]=(a*W-n*B-s*N)*V,o[2]=(y*P-A*O+d*L)*V,o[3]=(g*O-h*P-v*L)*V,o[4]=(p*I-l*B-f*U)*V,o[5]=(i*B-a*I+s*U)*V,o[6]=(A*E-x*P-d*k)*V,o[7]=(m*P-g*E+v*k)*V,o[8]=(l*W-u*I+f*F)*V,o[9]=(n*I-i*W-s*F)*V,o[10]=(x*O-y*E+d*S)*V,o[11]=(h*E-m*O-v*S)*V,o[12]=(u*U-l*N-p*F)*V,o[13]=(i*N-n*U+a*F)*V,o[14]=(y*k-x*L-A*S)*V,o[15]=(m*L-h*k+g*S)*V,o):null}},6582:function(c,o,t){var i=t(7894);c.exports=function(n,a,s,l){var u,p,f,m,h,g,v,x,y,A,d=a[0],S=a[1],k=a[2],E=l[0],L=l[1],O=l[2],P=s[0],F=s[1],U=s[2];return Math.abs(d-P)<1e-6&&Math.abs(S-F)<1e-6&&Math.abs(k-U)<1e-6?i(n):(v=d-P,x=S-F,y=k-U,u=L*(y*=A=1/Math.sqrt(v*v+x*x+y*y))-O*(x*=A),p=O*(v*=A)-E*y,f=E*x-L*v,(A=Math.sqrt(u*u+p*p+f*f))?(u*=A=1/A,p*=A,f*=A):(u=0,p=0,f=0),m=x*f-y*p,h=y*u-v*f,g=v*p-x*u,(A=Math.sqrt(m*m+h*h+g*g))?(m*=A=1/A,h*=A,g*=A):(m=0,h=0,g=0),n[0]=u,n[1]=m,n[2]=v,n[3]=0,n[4]=p,n[5]=h,n[6]=x,n[7]=0,n[8]=f,n[9]=g,n[10]=y,n[11]=0,n[12]=-(u*d+p*S+f*k),n[13]=-(m*d+h*S+g*k),n[14]=-(v*d+x*S+y*k),n[15]=1,n)}},6760:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=t[3],u=t[4],p=t[5],f=t[6],m=t[7],h=t[8],g=t[9],v=t[10],x=t[11],y=t[12],A=t[13],d=t[14],S=t[15],k=i[0],E=i[1],L=i[2],O=i[3];return o[0]=k*n+E*u+L*h+O*y,o[1]=k*a+E*p+L*g+O*A,o[2]=k*s+E*f+L*v+O*d,o[3]=k*l+E*m+L*x+O*S,k=i[4],E=i[5],L=i[6],O=i[7],o[4]=k*n+E*u+L*h+O*y,o[5]=k*a+E*p+L*g+O*A,o[6]=k*s+E*f+L*v+O*d,o[7]=k*l+E*m+L*x+O*S,k=i[8],E=i[9],L=i[10],O=i[11],o[8]=k*n+E*u+L*h+O*y,o[9]=k*a+E*p+L*g+O*A,o[10]=k*s+E*f+L*v+O*d,o[11]=k*l+E*m+L*x+O*S,k=i[12],E=i[13],L=i[14],O=i[15],o[12]=k*n+E*u+L*h+O*y,o[13]=k*a+E*p+L*g+O*A,o[14]=k*s+E*f+L*v+O*d,o[15]=k*l+E*m+L*x+O*S,o}},4040:function(c){c.exports=function(o,t,i,n,a,s,l){var u=1/(t-i),p=1/(n-a),f=1/(s-l);return o[0]=-2*u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*p,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*f,o[11]=0,o[12]=(t+i)*u,o[13]=(a+n)*p,o[14]=(l+s)*f,o[15]=1,o}},4772:function(c){c.exports=function(o,t,i,n,a){var s=1/Math.tan(t/2),l=1/(n-a);return o[0]=s/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(a+n)*l,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*a*n*l,o[15]=0,o}},6079:function(c){c.exports=function(o,t,i,n){var a,s,l,u,p,f,m,h,g,v,x,y,A,d,S,k,E,L,O,P,F,U,I,N,W=n[0],B=n[1],V=n[2],q=Math.sqrt(W*W+B*B+V*V);return Math.abs(q)<1e-6?null:(W*=q=1/q,B*=q,V*=q,a=Math.sin(i),l=1-(s=Math.cos(i)),u=t[0],p=t[1],f=t[2],m=t[3],h=t[4],g=t[5],v=t[6],x=t[7],y=t[8],A=t[9],d=t[10],S=t[11],k=W*W*l+s,E=B*W*l+V*a,L=V*W*l-B*a,O=W*B*l-V*a,P=B*B*l+s,F=V*B*l+W*a,U=W*V*l+B*a,I=B*V*l-W*a,N=V*V*l+s,o[0]=u*k+h*E+y*L,o[1]=p*k+g*E+A*L,o[2]=f*k+v*E+d*L,o[3]=m*k+x*E+S*L,o[4]=u*O+h*P+y*F,o[5]=p*O+g*P+A*F,o[6]=f*O+v*P+d*F,o[7]=m*O+x*P+S*F,o[8]=u*U+h*I+y*N,o[9]=p*U+g*I+A*N,o[10]=f*U+v*I+d*N,o[11]=m*U+x*I+S*N,t!==o&&(o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o)}},5567:function(c){c.exports=function(o,t,i){var n=Math.sin(i),a=Math.cos(i),s=t[4],l=t[5],u=t[6],p=t[7],f=t[8],m=t[9],h=t[10],g=t[11];return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[4]=s*a+f*n,o[5]=l*a+m*n,o[6]=u*a+h*n,o[7]=p*a+g*n,o[8]=f*a-s*n,o[9]=m*a-l*n,o[10]=h*a-u*n,o[11]=g*a-p*n,o}},2408:function(c){c.exports=function(o,t,i){var n=Math.sin(i),a=Math.cos(i),s=t[0],l=t[1],u=t[2],p=t[3],f=t[8],m=t[9],h=t[10],g=t[11];return t!==o&&(o[4]=t[4],o[5]=t[5],o[6]=t[6],o[7]=t[7],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=s*a-f*n,o[1]=l*a-m*n,o[2]=u*a-h*n,o[3]=p*a-g*n,o[8]=s*n+f*a,o[9]=l*n+m*a,o[10]=u*n+h*a,o[11]=p*n+g*a,o}},7089:function(c){c.exports=function(o,t,i){var n=Math.sin(i),a=Math.cos(i),s=t[0],l=t[1],u=t[2],p=t[3],f=t[4],m=t[5],h=t[6],g=t[7];return t!==o&&(o[8]=t[8],o[9]=t[9],o[10]=t[10],o[11]=t[11],o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15]),o[0]=s*a+f*n,o[1]=l*a+m*n,o[2]=u*a+h*n,o[3]=p*a+g*n,o[4]=f*a-s*n,o[5]=m*a-l*n,o[6]=h*a-u*n,o[7]=g*a-p*n,o}},2504:function(c){c.exports=function(o,t,i){var n=i[0],a=i[1],s=i[2];return o[0]=t[0]*n,o[1]=t[1]*n,o[2]=t[2]*n,o[3]=t[3]*n,o[4]=t[4]*a,o[5]=t[5]*a,o[6]=t[6]*a,o[7]=t[7]*a,o[8]=t[8]*s,o[9]=t[9]*s,o[10]=t[10]*s,o[11]=t[11]*s,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}},7656:function(c){c.exports=function(o,t,i){var n,a,s,l,u,p,f,m,h,g,v,x,y=i[0],A=i[1],d=i[2];return t===o?(o[12]=t[0]*y+t[4]*A+t[8]*d+t[12],o[13]=t[1]*y+t[5]*A+t[9]*d+t[13],o[14]=t[2]*y+t[6]*A+t[10]*d+t[14],o[15]=t[3]*y+t[7]*A+t[11]*d+t[15]):(n=t[0],a=t[1],s=t[2],l=t[3],u=t[4],p=t[5],f=t[6],m=t[7],h=t[8],g=t[9],v=t[10],x=t[11],o[0]=n,o[1]=a,o[2]=s,o[3]=l,o[4]=u,o[5]=p,o[6]=f,o[7]=m,o[8]=h,o[9]=g,o[10]=v,o[11]=x,o[12]=n*y+u*A+h*d+t[12],o[13]=a*y+p*A+g*d+t[13],o[14]=s*y+f*A+v*d+t[14],o[15]=l*y+m*A+x*d+t[15]),o}},5665:function(c){c.exports=function(o,t){if(o===t){var i=t[1],n=t[2],a=t[3],s=t[6],l=t[7],u=t[11];o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=i,o[6]=t[9],o[7]=t[13],o[8]=n,o[9]=s,o[11]=t[14],o[12]=a,o[13]=l,o[14]=u}else o[0]=t[0],o[1]=t[4],o[2]=t[8],o[3]=t[12],o[4]=t[1],o[5]=t[5],o[6]=t[9],o[7]=t[13],o[8]=t[2],o[9]=t[6],o[10]=t[10],o[11]=t[14],o[12]=t[3],o[13]=t[7],o[14]=t[11],o[15]=t[15];return o}},7626:function(c,o,t){"use strict";var i=t(2642),n=t(9346);function a(u,p){for(var f=[0,0,0,0],m=0;m<4;++m)for(var h=0;h<4;++h)f[h]+=u[4*m+h]*p[m];return f}function s(u,p,f,m,h){for(var g=a(m,a(f,a(p,[u[0],u[1],u[2],1]))),v=0;v<3;++v)g[v]/=g[3];return[.5*h[0]*(1+g[0]),.5*h[1]*(1-g[1])]}function l(u,p){for(var f=[0,0,0],m=0;m<u.length;++m)for(var h=u[m],g=p[m],v=0;v<3;++v)f[v]+=g*h[v];return f}c.exports=function(u,p,f,m,h,g){if(u.length===1)return[0,u[0].slice()];for(var v=new Array(u.length),x=0;x<u.length;++x)v[x]=s(u[x],f,m,h,g);var y=0,A=1/0;for(x=0;x<v.length;++x){for(var d=0,S=0;S<2;++S)d+=Math.pow(v[x][S]-p[S],2);d<A&&(A=d,y=x)}var k=function(L,O){if(L.length===2){for(var P=0,F=0,U=0;U<2;++U)P+=Math.pow(O[U]-L[0][U],2),F+=Math.pow(O[U]-L[1][U],2);return(P=Math.sqrt(P))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(P+F),P/(F+P)]}if(L.length===3){var I=[0,0];return n(L[0],L[1],L[2],O,I),i(L,I)}return[]}(v,p),E=0;for(x=0;x<3;++x){if(k[x]<-.001||k[x]>1.0001)return null;E+=k[x]}return Math.abs(E-1)>.001?null:[y,l(u,k),k]}},840:function(c,o,t){var i=t(3236),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),m=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),g=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),v=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);o.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:f,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:h,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:g,fragment:v,attributes:[{name:"position",type:"vec3"}]}},7201:function(c,o,t){"use strict";var i=t(9405),n=t(2762),a=t(8116),s=t(7766),l=t(8406),u=t(6760),p=t(7608),f=t(9618),m=t(6729),h=t(7765),g=t(1888),v=t(840),x=t(7626),y=v.meshShader,A=v.wireShader,d=v.pointShader,S=v.pickShader,k=v.pointPickShader,E=v.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function O(B,V,q,ne,$,K,ee,J,Z,te,oe,se,ce,ye,me,fe,pe,ge,ke,Ce,de,ae,re,he,Se,xe,Te){this.gl=B,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=q,this.lineShader=ne,this.pointShader=$,this.pickShader=K,this.pointPickShader=ee,this.contourShader=J,this.trianglePositions=Z,this.triangleColors=oe,this.triangleNormals=ce,this.triangleUVs=se,this.triangleIds=te,this.triangleVAO=ye,this.triangleCount=0,this.lineWidth=1,this.edgePositions=me,this.edgeColors=pe,this.edgeUVs=ge,this.edgeIds=fe,this.edgeVAO=ke,this.edgeCount=0,this.pointPositions=Ce,this.pointColors=ae,this.pointUVs=re,this.pointSizes=he,this.pointIds=de,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=xe,this.contourVAO=Te,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var P=O.prototype;function F(B,V){if(!V||!V.length)return 1;for(var q=0;q<V.length;++q){if(V.length<2)return 1;if(V[q][0]===B)return V[q][1];if(V[q][0]>B&&q>0){var ne=(V[q][0]-B)/(V[q][0]-V[q-1][0]);return V[q][1]*(1-ne)+ne*V[q-1][1]}}return 1}function U(B){var V=i(B,d.vertex,d.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function I(B){var V=i(B,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function N(B){var V=i(B,k.vertex,k.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function W(B){var V=i(B,E.vertex,E.fragment);return V.attributes.position.location=0,V}P.isOpaque=function(){return!this.hasAlpha},P.isTransparent=function(){return this.hasAlpha},P.pickSlots=1,P.setPickBase=function(B){this.pickId=B},P.highlight=function(B){if(B&&this.contourEnable){for(var V=h(this.cells,this.intensity,B.intensity),q=V.cells,ne=V.vertexIds,$=V.vertexWeights,K=q.length,ee=g.mallocFloat32(6*K),J=0,Z=0;Z<K;++Z)for(var te=q[Z],oe=0;oe<2;++oe){var se=te[0];te.length===2&&(se=te[oe]);for(var ce=ne[se][0],ye=ne[se][1],me=$[se],fe=1-me,pe=this.positions[ce],ge=this.positions[ye],ke=0;ke<3;++ke)ee[J++]=me*pe[ke]+fe*ge[ke]}this.contourCount=J/3|0,this.contourPositions.update(ee.subarray(0,J)),g.free(ee)}else this.contourCount=0},P.update=function(B){B=B||{};var V=this.gl;this.dirty=!0,"contourEnable"in B&&(this.contourEnable=B.contourEnable),"contourColor"in B&&(this.contourColor=B.contourColor),"lineWidth"in B&&(this.lineWidth=B.lineWidth),"lightPosition"in B&&(this.lightPosition=B.lightPosition),this.hasAlpha=!1,"opacity"in B&&(this.opacity=B.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0),"ambient"in B&&(this.ambientLight=B.ambient),"diffuse"in B&&(this.diffuseLight=B.diffuse),"specular"in B&&(this.specularLight=B.specular),"roughness"in B&&(this.roughness=B.roughness),"fresnel"in B&&(this.fresnel=B.fresnel),B.texture?(this.texture.dispose(),this.texture=s(V,B.texture)):B.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(zt,pt){for(var vt=m({colormap:zt,nshades:256,format:"rgba"}),We=new Uint8Array(1024),Ze=0;Ze<256;++Ze){for(var Ne=vt[Ze],Xe=0;Xe<3;++Xe)We[4*Ze+Xe]=Ne[Xe];We[4*Ze+3]=pt?255*F(Ze/255,pt):255*Ne[3]}return f(We,[256,256,4],[4,0,1])}(B.colormap,this.opacityscale)),this.texture.generateMipmap());var q=B.cells,ne=B.positions;if(ne&&q){var $=[],K=[],ee=[],J=[],Z=[],te=[],oe=[],se=[],ce=[],ye=[],me=[],fe=[],pe=[],ge=[];this.cells=q,this.positions=ne;var ke=B.vertexNormals,Ce=B.cellNormals,de=B.vertexNormalsEpsilon===void 0?1e-6:B.vertexNormalsEpsilon,ae=B.faceNormalsEpsilon===void 0?1e-6:B.faceNormalsEpsilon;B.useFacetNormals&&!Ce&&(Ce=l.faceNormals(q,ne,ae)),Ce||ke||(ke=l.vertexNormals(q,ne,de));var re=B.vertexColors,he=B.cellColors,Se=B.meshColor||[1,1,1,1],xe=B.vertexUVs,Te=B.vertexIntensity,Ae=B.cellUVs,Pe=B.cellIntensity,De=1/0,ve=-1/0;if(!xe&&!Ae)if(Te)if(B.vertexIntensityBounds)De=+B.vertexIntensityBounds[0],ve=+B.vertexIntensityBounds[1];else for(var we=0;we<Te.length;++we){var Ee=Te[we];De=Math.min(De,Ee),ve=Math.max(ve,Ee)}else if(Pe)if(B.cellIntensityBounds)De=+B.cellIntensityBounds[0],ve=+B.cellIntensityBounds[1];else for(we=0;we<Pe.length;++we)Ee=Pe[we],De=Math.min(De,Ee),ve=Math.max(ve,Ee);else for(we=0;we<ne.length;++we)Ee=ne[we][2],De=Math.min(De,Ee),ve=Math.max(ve,Ee);this.intensity=Te||Pe||function(zt){for(var pt=zt.length,vt=new Array(pt),We=0;We<pt;++We)vt[We]=zt[We][2];return vt}(ne),this.pickVertex=!(Pe||he);var Fe=B.pointSizes,Le=B.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],we=0;we<ne.length;++we)for(var je=ne[we],Ge=0;Ge<3;++Ge)!isNaN(je[Ge])&&isFinite(je[Ge])&&(this.bounds[0][Ge]=Math.min(this.bounds[0][Ge],je[Ge]),this.bounds[1][Ge]=Math.max(this.bounds[1][Ge],je[Ge]));var Je=0,rt=0,ot=0;e:for(we=0;we<q.length;++we){var yt=q[we];switch(yt.length){case 1:for(je=ne[mt=yt[0]],Ge=0;Ge<3;++Ge)if(isNaN(je[Ge])||!isFinite(je[Ge]))continue e;ye.push(je[0],je[1],je[2]),tt=re?re[mt]:he?he[we]:Se,this.opacityscale&&Te?K.push(tt[0],tt[1],tt[2],this.opacity*F((Te[mt]-De)/(ve-De),this.opacityscale)):tt.length===3?me.push(tt[0],tt[1],tt[2],this.opacity):(me.push(tt[0],tt[1],tt[2],tt[3]*this.opacity),tt[3]<1&&(this.hasAlpha=!0)),Qe=xe?xe[mt]:Te?[(Te[mt]-De)/(ve-De),0]:Ae?Ae[we]:Pe?[(Pe[we]-De)/(ve-De),0]:[(je[2]-De)/(ve-De),0],fe.push(Qe[0],Qe[1]),Fe?pe.push(Fe[mt]):pe.push(Le),ge.push(we),ot+=1;break;case 2:for(Ge=0;Ge<2;++Ge){je=ne[mt=yt[Ge]];for(var _t=0;_t<3;++_t)if(isNaN(je[_t])||!isFinite(je[_t]))continue e}for(Ge=0;Ge<2;++Ge)je=ne[mt=yt[Ge]],te.push(je[0],je[1],je[2]),tt=re?re[mt]:he?he[we]:Se,this.opacityscale&&Te?K.push(tt[0],tt[1],tt[2],this.opacity*F((Te[mt]-De)/(ve-De),this.opacityscale)):tt.length===3?oe.push(tt[0],tt[1],tt[2],this.opacity):(oe.push(tt[0],tt[1],tt[2],tt[3]*this.opacity),tt[3]<1&&(this.hasAlpha=!0)),Qe=xe?xe[mt]:Te?[(Te[mt]-De)/(ve-De),0]:Ae?Ae[we]:Pe?[(Pe[we]-De)/(ve-De),0]:[(je[2]-De)/(ve-De),0],se.push(Qe[0],Qe[1]),ce.push(we);rt+=1;break;case 3:for(Ge=0;Ge<3;++Ge)for(je=ne[mt=yt[Ge]],_t=0;_t<3;++_t)if(isNaN(je[_t])||!isFinite(je[_t]))continue e;for(Ge=0;Ge<3;++Ge){var mt,tt,Qe,Dt;je=ne[mt=yt[2-Ge]],$.push(je[0],je[1],je[2]),(tt=re?re[mt]:he?he[we]:Se)?this.opacityscale&&Te?K.push(tt[0],tt[1],tt[2],this.opacity*F((Te[mt]-De)/(ve-De),this.opacityscale)):tt.length===3?K.push(tt[0],tt[1],tt[2],this.opacity):(K.push(tt[0],tt[1],tt[2],tt[3]*this.opacity),tt[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1),Qe=xe?xe[mt]:Te?[(Te[mt]-De)/(ve-De),0]:Ae?Ae[we]:Pe?[(Pe[we]-De)/(ve-De),0]:[(je[2]-De)/(ve-De),0],J.push(Qe[0],Qe[1]),Dt=ke?ke[mt]:Ce[we],ee.push(Dt[0],Dt[1],Dt[2]),Z.push(we)}Je+=1}}this.pointCount=ot,this.edgeCount=rt,this.triangleCount=Je,this.pointPositions.update(ye),this.pointColors.update(me),this.pointUVs.update(fe),this.pointSizes.update(pe),this.pointIds.update(new Uint32Array(ge)),this.edgePositions.update(te),this.edgeColors.update(oe),this.edgeUVs.update(se),this.edgeIds.update(new Uint32Array(ce)),this.trianglePositions.update($),this.triangleColors.update(K),this.triangleUVs.update(J),this.triangleNormals.update(ee),this.triangleIds.update(new Uint32Array(Z))}},P.drawTransparent=P.draw=function(B){B=B||{};for(var V=this.gl,q=B.model||L,ne=B.view||L,$=B.projection||L,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],ee=0;ee<3;++ee)K[0][ee]=Math.max(K[0][ee],this.clipBounds[0][ee]),K[1][ee]=Math.min(K[1][ee],this.clipBounds[1][ee]);var J={model:q,view:ne,projection:$,inverseModel:L.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};J.inverseModel=p(J.inverseModel,J.model),V.disable(V.CULL_FACE),this.texture.bind(0);var Z=new Array(16);for(u(Z,J.view,J.model),u(Z,J.projection,Z),p(Z,Z),ee=0;ee<3;++ee)J.eyePosition[ee]=Z[12+ee]/Z[15];var te,oe=Z[15];for(ee=0;ee<3;++ee)oe+=this.lightPosition[ee]*Z[4*ee+3];for(ee=0;ee<3;++ee){for(var se=Z[12+ee],ce=0;ce<3;++ce)se+=Z[4*ce+ee]*this.lightPosition[ce];J.lightPosition[ee]=se/oe}this.triangleCount>0&&((te=this.triShader).bind(),te.uniforms=J,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((te=this.lineShader).bind(),te.uniforms=J,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((te=this.pointShader).bind(),te.uniforms=J,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((te=this.contourShader).bind(),te.uniforms=J,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},P.drawPick=function(B){B=B||{};for(var V=this.gl,q=B.model||L,ne=B.view||L,$=B.projection||L,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],ee=0;ee<3;++ee)K[0][ee]=Math.max(K[0][ee],this.clipBounds[0][ee]),K[1][ee]=Math.min(K[1][ee],this.clipBounds[1][ee]);this._model=[].slice.call(q),this._view=[].slice.call(ne),this._projection=[].slice.call($),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var J,Z={model:q,view:ne,projection:$,clipBounds:K,pickId:this.pickId/255};(J=this.pickShader).bind(),J.uniforms=Z,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((J=this.pointPickShader).bind(),J.uniforms=Z,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},P.pick=function(B){if(!B||B.id!==this.pickId)return null;for(var V=B.value[0]+256*B.value[1]+65536*B.value[2],q=this.cells[V],ne=this.positions,$=new Array(q.length),K=0;K<q.length;++K)$[K]=ne[q[K]];var ee=B.coord[0],J=B.coord[1];if(!this.pickVertex){var Z=this.positions[q[0]],te=this.positions[q[1]],oe=this.positions[q[2]],se=[(Z[0]+te[0]+oe[0])/3,(Z[1]+te[1]+oe[1])/3,(Z[2]+te[2]+oe[2])/3];return{_cellCenter:!0,position:[ee,J],index:V,cell:q,cellId:V,intensity:this.intensity[V],dataCoordinate:se}}var ce=x($,[ee*this.pixelRatio,this._resolution[1]-J*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ce)return null;var ye=ce[2],me=0;for(K=0;K<q.length;++K)me+=ye[K]*this.intensity[q[K]];return{position:ce[1],index:q[ce[0]],cell:q,cellId:V,intensity:me,dataCoordinate:this.positions[q[ce[0]]]}},P.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},c.exports=function(B,V){if(arguments.length===1&&(B=(V=B).gl),!(B.getExtension("OES_standard_derivatives")||B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=function(Pe){var De=i(Pe,y.vertex,y.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De.attributes.normal.location=4,De}(B),ne=function(Pe){var De=i(Pe,A.vertex,A.fragment);return De.attributes.position.location=0,De.attributes.color.location=2,De.attributes.uv.location=3,De}(B),$=U(B),K=I(B),ee=N(B),J=W(B),Z=s(B,f(new Uint8Array([255,255,255,255]),[1,1,4]));Z.generateMipmap(),Z.minFilter=B.LINEAR_MIPMAP_LINEAR,Z.magFilter=B.LINEAR;var te=n(B),oe=n(B),se=n(B),ce=n(B),ye=n(B),me=a(B,[{buffer:te,type:B.FLOAT,size:3},{buffer:ye,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:B.FLOAT,size:4},{buffer:se,type:B.FLOAT,size:2},{buffer:ce,type:B.FLOAT,size:3}]),fe=n(B),pe=n(B),ge=n(B),ke=n(B),Ce=a(B,[{buffer:fe,type:B.FLOAT,size:3},{buffer:ke,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:B.FLOAT,size:4},{buffer:ge,type:B.FLOAT,size:2}]),de=n(B),ae=n(B),re=n(B),he=n(B),Se=n(B),xe=a(B,[{buffer:de,type:B.FLOAT,size:3},{buffer:Se,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ae,type:B.FLOAT,size:4},{buffer:re,type:B.FLOAT,size:2},{buffer:he,type:B.FLOAT,size:1}]),Te=n(B),Ae=new O(B,Z,q,ne,$,K,ee,J,te,ye,oe,se,ce,me,fe,ke,pe,ge,Ce,de,Se,ae,re,he,xe,Te,a(B,[{buffer:Te,type:B.FLOAT,size:3}]));return Ae.update(V),Ae}},8120:function(c,o,t){"use strict";c.exports=function(f){var m=f.gl;return new s(f,i(m,[0,0,0,1,1,0,1,1]),n(m,a.boxVert,a.lineFrag))};var i=t(2762),n=t(9405),a=t(3603);function s(f,m,h){this.plot=f,this.vbo=m,this.shader=h}var l,u,p=s.prototype;p.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},p.drawBox=(l=[0,0],u=[0,0],function(f,m,h,g,v){var x=this.plot,y=this.shader,A=x.gl;l[0]=f,l[1]=m,u[0]=h,u[1]=g,y.uniforms.lo=l,y.uniforms.hi=u,y.uniforms.color=v,A.drawArrays(A.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(c,o,t){"use strict";c.exports=function(x){var y=x.gl;return new l(x,i(y),n(y,s.gridVert,s.gridFrag),n(y,s.tickVert,s.gridFrag))};var i=t(2762),n=t(9405),a=t(2478),s=t(3603);function l(x,y,A,d){this.plot=x,this.vbo=y,this.shader=A,this.tickShader=d,this.ticks=[[],[]]}function u(x,y){return x-y}var p,f,m,h,g,v=l.prototype;v.draw=(p=[0,0],f=[0,0],m=[0,0],function(){for(var x=this.plot,y=this.vbo,A=this.shader,d=this.ticks,S=x.gl,k=x._tickBounds,E=x.dataBox,L=x.viewBox,O=x.gridLineWidth,P=x.gridLineColor,F=x.gridLineEnable,U=x.pixelRatio,I=0;I<2;++I){var N=k[I],W=k[I+2]-N,B=.5*(E[I+2]+E[I]),V=E[I+2]-E[I];f[I]=2*W/V,p[I]=2*(N-B)/V}A.bind(),y.bind(),A.attributes.dataCoord.pointer(),A.uniforms.dataShift=p,A.uniforms.dataScale=f;var q=0;for(I=0;I<2;++I){m[0]=m[1]=0,m[I]=1,A.uniforms.dataAxis=m,A.uniforms.lineWidth=O[I]/(L[I+2]-L[I])*U,A.uniforms.color=P[I];var ne=6*d[I].length;F[I]&&ne&&S.drawArrays(S.TRIANGLES,q,ne),q+=ne}}),v.drawTickMarks=function(){var x=[0,0],y=[0,0],A=[1,0],d=[0,1],S=[0,0],k=[0,0];return function(){for(var E=this.plot,L=this.vbo,O=this.tickShader,P=this.ticks,F=E.gl,U=E._tickBounds,I=E.dataBox,N=E.viewBox,W=E.pixelRatio,B=E.screenBox,V=B[2]-B[0],q=B[3]-B[1],ne=N[2]-N[0],$=N[3]-N[1],K=0;K<2;++K){var ee=U[K],J=U[K+2]-ee,Z=.5*(I[K+2]+I[K]),te=I[K+2]-I[K];y[K]=2*J/te,x[K]=2*(ee-Z)/te}y[0]*=ne/V,x[0]*=ne/V,y[1]*=$/q,x[1]*=$/q,O.bind(),L.bind(),O.attributes.dataCoord.pointer();var oe=O.uniforms;oe.dataShift=x,oe.dataScale=y;var se=E.tickMarkLength,ce=E.tickMarkWidth,ye=E.tickMarkColor,me=6*P[0].length,fe=Math.min(a.ge(P[0],(I[0]-U[0])/(U[2]-U[0]),u),P[0].length),pe=Math.min(a.gt(P[0],(I[2]-U[0])/(U[2]-U[0]),u),P[0].length),ge=0+6*fe,ke=6*Math.max(0,pe-fe),Ce=Math.min(a.ge(P[1],(I[1]-U[1])/(U[3]-U[1]),u),P[1].length),de=Math.min(a.gt(P[1],(I[3]-U[1])/(U[3]-U[1]),u),P[1].length),ae=me+6*Ce,re=6*Math.max(0,de-Ce);S[0]=2*(N[0]-se[1])/V-1,S[1]=(N[3]+N[1])/q-1,k[0]=se[1]*W/V,k[1]=ce[1]*W/q,re&&(oe.color=ye[1],oe.tickScale=k,oe.dataAxis=d,oe.screenOffset=S,F.drawArrays(F.TRIANGLES,ae,re)),S[0]=(N[2]+N[0])/V-1,S[1]=2*(N[1]-se[0])/q-1,k[0]=ce[0]*W/V,k[1]=se[0]*W/q,ke&&(oe.color=ye[0],oe.tickScale=k,oe.dataAxis=A,oe.screenOffset=S,F.drawArrays(F.TRIANGLES,ge,ke)),S[0]=2*(N[2]+se[3])/V-1,S[1]=(N[3]+N[1])/q-1,k[0]=se[3]*W/V,k[1]=ce[3]*W/q,re&&(oe.color=ye[3],oe.tickScale=k,oe.dataAxis=d,oe.screenOffset=S,F.drawArrays(F.TRIANGLES,ae,re)),S[0]=(N[2]+N[0])/V-1,S[1]=2*(N[3]+se[2])/q-1,k[0]=ce[2]*W/V,k[1]=se[2]*W/q,ke&&(oe.color=ye[2],oe.tickScale=k,oe.dataAxis=A,oe.screenOffset=S,F.drawArrays(F.TRIANGLES,ge,ke))}}(),v.update=(h=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1],function(x){for(var y=x.ticks,A=x.bounds,d=new Float32Array(18*(y[0].length+y[1].length)),S=(this.plot.zeroLineEnable,0),k=[[],[]],E=0;E<2;++E)for(var L=k[E],O=y[E],P=A[E],F=A[E+2],U=0;U<O.length;++U){var I=(O[U].x-P)/(F-P);L.push(I);for(var N=0;N<6;++N)d[S++]=I,d[S++]=h[N],d[S++]=g[N]}this.ticks=k,this.vbo.update(d)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(c,o,t){"use strict";c.exports=function(f){var m=f.gl;return new s(f,i(m,[-1,-1,-1,1,1,-1,1,1]),n(m,a.lineVert,a.lineFrag))};var i=t(2762),n=t(9405),a=t(3603);function s(f,m,h){this.plot=f,this.vbo=m,this.shader=h}var l,u,p=s.prototype;p.bind=function(){var f=this.shader;this.vbo.bind(),this.shader.bind(),f.attributes.coord.pointer(),f.uniforms.screenBox=this.plot.screenBox},p.drawLine=(l=[0,0],u=[0,0],function(f,m,h,g,v,x){var y=this.plot,A=this.shader,d=y.gl;l[0]=f,l[1]=m,u[0]=h,u[1]=g,A.uniforms.start=l,A.uniforms.end=u,A.uniforms.width=v*y.pixelRatio,A.uniforms.color=x,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(c,o,t){"use strict";var i=t(3236),n=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);c.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(c,o,t){"use strict";c.exports=function(y){var A=y.gl;return new u(y,i(A),n(A,l.textVert,l.textFrag))};var i=t(2762),n=t(9405),a=t(529),s=t(2478),l=t(3603);function u(y,A,d){this.plot=y,this.vbo=A,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,f,m,h,g,v,x=u.prototype;x.drawTicks=(p=[0,0],f=[0,0],m=[0,0],function(y){var A=this.plot,d=this.shader,S=this.tickX[y],k=this.tickOffset[y],E=A.gl,L=A.viewBox,O=A.dataBox,P=A.screenBox,F=A.pixelRatio,U=A.tickEnable,I=A.tickPad,N=A.tickColor,W=A.tickAngle,B=A.labelEnable,V=A.labelPad,q=A.labelColor,ne=A.labelAngle,$=this.labelOffset[y],K=this.labelCount[y],ee=s.lt(S,O[y]),J=s.le(S,O[y+2]);p[0]=p[1]=0,p[y]=1,f[y]=(L[2+y]+L[y])/(P[2+y]-P[y])-1;var Z=2/P[2+(1^y)]-P[1^y];f[1^y]=Z*L[1^y]-1,U[y]&&(f[1^y]-=Z*F*I[y],ee<J&&k[J]>k[ee]&&(d.uniforms.dataAxis=p,d.uniforms.screenOffset=f,d.uniforms.color=N[y],d.uniforms.angle=W[y],E.drawArrays(E.TRIANGLES,k[ee],k[J]-k[ee]))),B[y]&&K&&(f[1^y]-=Z*F*V[y],d.uniforms.dataAxis=m,d.uniforms.screenOffset=f,d.uniforms.color=q[y],d.uniforms.angle=ne[y],E.drawArrays(E.TRIANGLES,$,K)),f[1^y]=Z*L[2+(1^y)]-1,U[y+2]&&(f[1^y]+=Z*F*I[y+2],ee<J&&k[J]>k[ee]&&(d.uniforms.dataAxis=p,d.uniforms.screenOffset=f,d.uniforms.color=N[y+2],d.uniforms.angle=W[y+2],E.drawArrays(E.TRIANGLES,k[ee],k[J]-k[ee]))),B[y+2]&&K&&(f[1^y]+=Z*F*V[y+2],d.uniforms.dataAxis=m,d.uniforms.screenOffset=f,d.uniforms.color=q[y+2],d.uniforms.angle=ne[y+2],E.drawArrays(E.TRIANGLES,$,K))}),x.drawTitle=function(){var y=[0,0],A=[0,0];return function(){var d=this.plot,S=this.shader,k=d.gl,E=d.screenBox,L=d.titleCenter,O=d.titleAngle,P=d.titleColor,F=d.pixelRatio;if(this.titleCount){for(var U=0;U<2;++U)A[U]=2*(L[U]*F-E[U])/(E[2+U]-E[U])-1;S.bind(),S.uniforms.dataAxis=y,S.uniforms.screenOffset=A,S.uniforms.angle=O,S.uniforms.color=P,k.drawArrays(k.TRIANGLES,this.titleOffset,this.titleCount)}}}(),x.bind=(h=[0,0],g=[0,0],v=[0,0],function(){var y=this.plot,A=this.shader,d=y._tickBounds,S=y.dataBox,k=y.screenBox,E=y.viewBox;A.bind();for(var L=0;L<2;++L){var O=d[L],P=d[L+2]-O,F=.5*(S[L+2]+S[L]),U=S[L+2]-S[L],I=E[L],N=E[L+2]-I,W=k[L],B=k[L+2]-W;g[L]=2*P/U*N/B,h[L]=2*(O-F)/U*N/B}v[1]=2*y.pixelRatio/(k[3]-k[1]),v[0]=v[1]*(k[3]-k[1])/(k[2]-k[0]),A.uniforms.dataScale=g,A.uniforms.dataShift=h,A.uniforms.textScale=v,this.vbo.bind(),A.attributes.textCoordinate.pointer()}),x.update=function(y){var A,d,S,k,E,L=[],O=y.ticks,P=y.bounds;for(E=0;E<2;++E){var F=[Math.floor(L.length/3)],U=[-1/0],I=O[E];for(A=0;A<I.length;++A){var N=I[A],W=N.x,B=N.text,V=N.font||"sans-serif",q=N.fontStyle||"normal",ne=N.fontWeight||"normal",$=N.fontVariant||"normal";k=N.fontSize||12;for(var K=1/(P[E+2]-P[E]),ee=P[E],J=B.split(`
`),Z=0;Z<J.length;Z++)for(S=a(V,J[Z],{fontStyle:q,fontWeight:ne,fontVariant:$}).data,d=0;d<S.length;d+=2)L.push(S[d]*k,-S[d+1]*k-Z*k*1.2,(W-ee)*K);F.push(Math.floor(L.length/3)),U.push(W)}this.tickOffset[E]=F,this.tickX[E]=U}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(L.length/3),S=a(y.labelFont[E],y.labels[E],{fontStyle:y.labelFontStyle[E],fontWeight:y.labelFontWeight[E],fontVariant:y.labelFontVariant[E],textAlign:"center"}).data,k=y.labelSize[E],A=0;A<S.length;A+=2)L.push(S[A]*k,-S[A+1]*k,0);this.labelCount[E]=Math.floor(L.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(L.length/3),S=a(y.titleFont,y.title,{fontStyle:y.titleFontStyle,fontWeight:y.titleFontWeight,fontVariant:y.titleFontVariant}).data,k=y.titleSize,A=0;A<S.length;A+=2)L.push(S[A]*k,-S[A+1]*k,0);this.titleCount=Math.floor(L.length/3)-this.titleOffset,this.vbo.update(L)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(c,o,t){"use strict";c.exports=function(h){var g=h.gl,v=new u(g,i(g,[g.drawingBufferWidth,g.drawingBufferHeight]));return v.grid=n(v),v.text=a(v),v.line=s(v),v.box=l(v),v.update(h),v};var i=t(3589),n=t(1913),a=t(2142),s=t(4747),l=t(8120);function u(h,g){this.gl=h,this.pickBuffer=g,this.screenBox=[0,0,h.drawingBufferWidth,h.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function f(h){for(var g=h.slice(),v=0;v<g.length;++v)g[v]=g[v].slice();return g}function m(h,g){return h.x-g.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var h=this.gl,g=this.screenBox,v=this.viewBox,x=this.dataBox,y=this.pixelRatio,A=this.grid,d=this.line,S=this.text,k=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,h.bindFramebuffer(h.FRAMEBUFFER,null),h.enable(h.SCISSOR_TEST),h.disable(h.DEPTH_TEST),h.depthFunc(h.LESS),h.depthMask(!1),h.enable(h.BLEND),h.blendEquation(h.FUNC_ADD,h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),this.borderColor){h.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.borderColor;h.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT)}h.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),h.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var L=this.backgroundColor;h.clearColor(L[0]*L[3],L[1]*L[3],L[2]*L[3],L[3]),h.clear(h.COLOR_BUFFER_BIT),A.draw();var O=this.zeroLineEnable,P=this.zeroLineColor,F=this.zeroLineWidth;if(O[0]||O[1]){d.bind();for(var U=0;U<2;++U)if(O[U]&&x[U]<=0&&x[U+2]>=0){var I=g[U]-x[U]*(g[U+2]-g[U])/(x[U+2]-x[U]);U===0?d.drawLine(I,g[1],I,g[3],F[U],P[U]):d.drawLine(g[0],I,g[2],I,F[U],P[U])}}for(U=0;U<k.length;++U)k[U].draw();h.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]),h.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),this.grid.drawTickMarks(),d.bind();var N=this.borderLineEnable,W=this.borderLineWidth,B=this.borderLineColor;for(N[1]&&d.drawLine(v[0],v[1]-.5*W[1]*y,v[0],v[3]+.5*W[3]*y,W[1],B[1]),N[0]&&d.drawLine(v[0]-.5*W[0]*y,v[1],v[2]+.5*W[2]*y,v[1],W[0],B[0]),N[3]&&d.drawLine(v[2],v[1]-.5*W[1]*y,v[2],v[3]+.5*W[3]*y,W[3],B[3]),N[2]&&d.drawLine(v[0]-.5*W[0]*y,v[3],v[2]+.5*W[2]*y,v[3],W[2],B[2]),S.bind(),U=0;U<2;++U)S.drawTicks(U);this.titleEnable&&S.drawTitle();var V=this.overlays;for(U=0;U<V.length;++U)V[U].draw();h.disable(h.SCISSOR_TEST),h.disable(h.BLEND),h.depthMask(!0)}},p.drawPick=function(){if(!this.static){var h=this.pickBuffer;this.gl,this._pickTimeout=null,h.begin();for(var g=1,v=this.objects,x=0;x<v.length;++x)g=v[x].drawPick(g);h.end()}},p.pick=function(h,g){if(!this.static){var v=this.pixelRatio,x=this.pickPixelRatio,y=this.viewBox,A=0|Math.round((h-y[0]/v)*x),d=0|Math.round((g-y[1]/v)*x),S=this.pickBuffer.query(A,d,this.pickRadius);if(!S)return null;for(var k=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,L=0;L<E.length;++L){var O=E[L].pick(A,d,k);if(O)return O}return null}},p.setScreenBox=function(h){var g=this.screenBox,v=this.pixelRatio;g[0]=0|Math.round(h[0]*v),g[1]=0|Math.round(h[1]*v),g[2]=0|Math.round(h[2]*v),g[3]=0|Math.round(h[3]*v),this.setDirty()},p.setDataBox=function(h){var g=this.dataBox;(g[0]!==h[0]||g[1]!==h[1]||g[2]!==h[2]||g[3]!==h[3])&&(g[0]=h[0],g[1]=h[1],g[2]=h[2],g[3]=h[3],this.setDirty())},p.setViewBox=function(h){var g=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(h[0]*g),v[1]=0|Math.round(h[1]*g),v[2]=0|Math.round(h[2]*g),v[3]=0|Math.round(h[3]*g);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((h[2]-h[0])*x),0|Math.round((h[3]-h[1])*x)],this.setDirty()},p.update=function(h){h=h||{};var g=this.gl;this.pixelRatio=h.pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(h.screenBox||[0,0,g.drawingBufferWidth/v,g.drawingBufferHeight/v]),this.screenBox,this.setViewBox(h.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var x=this.viewBox,y=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(h.dataBox||[-10,-10/y,10,10/y]),this.borderColor=h.borderColor!==!1&&(h.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(h.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(h.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(h.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(h.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(h.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(h.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(h.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(h.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(h.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(h.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(h.titleCenter||[.5*(x[0]+x[2])/v,(x[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in h)||!!h.titleEnable,this.titleAngle=h.titleAngle||0,this.titleColor=(h.titleColor||[0,0,0,1]).slice(),this.labelPad=(h.labelPad||[15,15,15,15]).slice(),this.labelAngle=(h.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(h.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(h.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(h.tickPad||[15,15,15,15]).slice(),this.tickAngle=(h.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(h.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(h.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(h.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(h.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(h.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var A=h.ticks||[[],[]],d=this._tickBounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(var S=0;S<2;++S){var k=A[S].slice(0);k.length!==0&&(k.sort(m),d[S]=Math.min(d[S],k[0].x),d[S+2]=Math.max(d[S+2],k[k.length-1].x))}this.grid.update({bounds:d,ticks:A}),this.text.update({bounds:d,ticks:A,labels:h.labels||["x","y"],labelSize:h.labelSize||[12,12],labelFont:h.labelFont||["sans-serif","sans-serif"],labelFontStyle:h.labelFontStyle||["normal","normal"],labelFontWeight:h.labelFontWeight||["normal","normal"],labelFontVariant:h.labelFontVariant||["normal","normal"],title:h.title||"",titleSize:h.titleSize||18,titleFont:h.titleFont||"sans-serif",titleFontStyle:h.titleFontStyle||"normal",titleFontWeight:h.titleFontWeight||"normal",titleFontVariant:h.titleFontVariant||"normal"}),this.static=!!h.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var h=this.objects.length-1;h>=0;--h)this.objects[h].dispose();for(this.objects.length=0,h=this.overlays.length-1;h>=0;--h)this.overlays[h].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(h){this.objects.indexOf(h)<0&&(this.objects.push(h),this.setDirty())},p.removeObject=function(h){for(var g=this.objects,v=0;v<g.length;++v)if(g[v]===h){g.splice(v,1),this.setDirty();break}},p.addOverlay=function(h){this.overlays.indexOf(h)<0&&(this.overlays.push(h),this.setOverlayDirty())},p.removeOverlay=function(h){for(var g=this.overlays,v=0;v<g.length;++v)if(g[v]===h){g.splice(v,1),this.setOverlayDirty();break}}},4437:function(c,o,t){"use strict";c.exports=function(p,f){p=p||document.body;var m=[.01,1/0];"distanceLimits"in(f=f||{})&&(m[0]=f.distanceLimits[0],m[1]=f.distanceLimits[1]),"zoomMin"in f&&(m[0]=f.zoomMin),"zoomMax"in f&&(m[1]=f.zoomMax);var h=n({center:f.center||[0,0,0],up:f.up||[0,1,0],eye:f.eye||[0,0,10],mode:f.mode||"orbit",distanceLimits:m}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,x=p.clientWidth,y=p.clientHeight,A={keyBindingMode:"rotate",enableWheel:!0,view:h,element:p,delay:f.delay||16,rotateSpeed:f.rotateSpeed||1,zoomSpeed:f.zoomSpeed||1,translateSpeed:f.translateSpeed||1,flipX:!!f.flipX,flipY:!!f.flipY,modes:h.modes,_ortho:f._ortho||f.projection&&f.projection.type==="orthographic"||!1,tick:function(){var d=i(),S=this.delay,k=d-2*S;h.idle(d-S),h.recalcMatrix(k),h.flush(d-(100+2*S));for(var E=!0,L=h.computedMatrix,O=0;O<16;++O)E=E&&g[O]===L[O],g[O]=L[O];var P=p.clientWidth===x&&p.clientHeight===y;return x=p.clientWidth,y=p.clientHeight,E?!P:(v=Math.exp(h.computedRadius[0]),!0)},lookAt:function(d,S,k){h.lookAt(h.lastT(),d,S,k)},rotate:function(d,S,k){h.rotate(h.lastT(),d,S,k)},pan:function(d,S,k){h.pan(h.lastT(),d,S,k)},translate:function(d,S,k){h.translate(h.lastT(),d,S,k)}};return Object.defineProperties(A,{matrix:{get:function(){return h.computedMatrix},set:function(d){return h.setMatrix(h.lastT(),d),h.computedMatrix},enumerable:!0},mode:{get:function(){return h.getMode()},set:function(d){var S=h.computedUp.slice(),k=h.computedEye.slice(),E=h.computedCenter.slice();if(h.setMode(d),d==="turntable"){var L=i();h._active.lookAt(L,k,E,S),h._active.lookAt(L+500,k,E,[0,0,1]),h._active.flush(L)}return h.getMode()},enumerable:!0},center:{get:function(){return h.computedCenter},set:function(d){return h.lookAt(h.lastT(),null,d),h.computedCenter},enumerable:!0},eye:{get:function(){return h.computedEye},set:function(d){return h.lookAt(h.lastT(),d),h.computedEye},enumerable:!0},up:{get:function(){return h.computedUp},set:function(d){return h.lookAt(h.lastT(),null,null,d),h.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(d){return h.setDistance(h.lastT(),d),d},enumerable:!0},distanceLimits:{get:function(){return h.getDistanceLimits(m)},set:function(d){return h.setDistanceLimits(d),d},enumerable:!0}}),p.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),A._lastX=-1,A._lastY=-1,A._lastMods={shift:!1,control:!1,alt:!1,meta:!1},A.enableMouseListeners=function(){function d(S,k,E,L){var O=A.keyBindingMode;if(O!==!1){var P=O==="rotate",F=O==="pan",U=O==="zoom",I=!!L.control,N=!!L.alt,W=!!L.shift,B=!!(1&S),V=!!(2&S),q=!!(4&S),ne=1/p.clientHeight,$=ne*(k-A._lastX),K=ne*(E-A._lastY),ee=A.flipX?1:-1,J=A.flipY?1:-1,Z=Math.PI*A.rotateSpeed,te=i();if(A._lastX!==-1&&A._lastY!==-1&&((P&&B&&!I&&!N&&!W||B&&!I&&!N&&W)&&h.rotate(te,ee*Z*$,-J*Z*K,0),(F&&B&&!I&&!N&&!W||V||B&&I&&!N&&!W)&&h.pan(te,-A.translateSpeed*$*v,A.translateSpeed*K*v,0),U&&B&&!I&&!N&&!W||q||B&&!I&&N&&!W)){var oe=-A.zoomSpeed*K/window.innerHeight*(te-h.lastT())*100;h.pan(te,0,0,v*(Math.exp(oe)-1))}return A._lastX=k,A._lastY=E,A._lastMods=L,!0}}A.mouseListener=a(p,d),p.addEventListener("touchstart",function(S){var k=l(S.changedTouches[0],p);d(0,k[0],k[1],A._lastMods),d(1,k[0],k[1],A._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(S){var k=l(S.changedTouches[0],p);d(1,k[0],k[1],A._lastMods),S.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(S){d(0,A._lastX,A._lastY,A._lastMods)},!!u&&{passive:!0}),A.wheelListener=s(p,function(S,k){if(A.keyBindingMode!==!1&&A.enableWheel){var E=A.flipX?1:-1,L=A.flipY?1:-1,O=i();if(Math.abs(S)>Math.abs(k))h.rotate(O,0,0,-S*E*Math.PI*A.rotateSpeed/window.innerWidth);else if(!A._ortho){var P=-A.zoomSpeed*L*k/window.innerHeight*(O-h.lastT())/20;h.pan(O,0,0,v*(Math.exp(P)-1))}}},!0)},A.enableMouseListeners(),A};var i=t(3025),n=t(6296),a=t(351),s=t(8512),l=t(24),u=t(7520)},799:function(c,o,t){var i=t(3236),n=t(9405),a=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),s=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);c.exports=function(l){return n(l,a,s,null,[{name:"position",type:"vec2"}])}},4100:function(c,o,t){"use strict";var i=t(4437),n=t(3837),a=t(5445),s=t(4449),l=t(3589),u=t(2260),p=t(7169),f=t(351),m=t(4772),h=t(4040),g=t(799),v=t(9216)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(d){var S=Math.round(Math.log(Math.abs(d))/Math.log(10));if(S<0){var k=Math.round(Math.pow(10,-S));return Math.ceil(d*k)/k}return S>0?(k=Math.round(Math.pow(10,S)),Math.ceil(d/k)*k):Math.ceil(d)}function A(d){return typeof d!="boolean"||d}c.exports={createScene:function(d){(d=d||{}).camera=d.camera||{};var S=d.canvas;S||(S=document.createElement("canvas"),d.container?d.container.appendChild(S):document.body.appendChild(S));var k=d.gl;if(k||(d.glOptions&&(v=!!d.glOptions.preserveDrawingBuffer),k=function(ke,Ce){var de=null;try{(de=ke.getContext("webgl",Ce))||(de=ke.getContext("experimental-webgl",Ce))}catch{return null}return de}(S,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!k)throw new Error("webgl not supported");var E=d.bounds||[[-10,-10,-10],[10,10,10]],L=new x,O=u(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!v}),P=g(k),F=d.cameraObject&&d.cameraObject._ortho===!0||d.camera.projection&&d.camera.projection.type==="orthographic"||!1,U={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:F},I=d.axes||{},N=n(k,I);N.enable=!I.disable;var W=d.spikes||{},B=s(k,W),V=[],q=[],ne=[],$=[],K=!0,ee=!0,J={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},Z=(ee=!0,[k.drawingBufferWidth,k.drawingBufferHeight]),te=d.cameraObject||i(S,U),oe={gl:k,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:S,selection:L,camera:te,axes:N,axesPixels:null,spikes:B,bounds:E,objects:V,shape:Z,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:A(d.autoResize),autoBounds:A(d.autoBounds),autoScale:!!d.autoScale,autoCenter:A(d.autoCenter),clipToBounds:A(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:J,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ke){this.aspect[0]=ke.x,this.aspect[1]=ke.y,this.aspect[2]=ke.z,ee=!0},setBounds:function(ke,Ce){this.bounds[0][ke]=Ce.min,this.bounds[1][ke]=Ce.max},setClearColor:function(ke){this.clearColor=ke},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},se=[k.drawingBufferWidth/oe.pixelRatio|0,k.drawingBufferHeight/oe.pixelRatio|0];function ce(){if(!oe._stopped&&oe.autoResize){var ke=S.parentNode,Ce=1,de=1;ke&&ke!==document.body?(Ce=ke.clientWidth,de=ke.clientHeight):(Ce=window.innerWidth,de=window.innerHeight);var ae=0|Math.ceil(Ce*oe.pixelRatio),re=0|Math.ceil(de*oe.pixelRatio);if(ae!==S.width||re!==S.height){S.width=ae,S.height=re;var he=S.style;he.position=he.position||"absolute",he.left="0px",he.top="0px",he.width=Ce+"px",he.height=de+"px",K=!0}}}function ye(){for(var ke=V.length,Ce=$.length,de=0;de<Ce;++de)ne[de]=0;e:for(de=0;de<ke;++de){var ae=V[de],re=ae.pickSlots;if(re){for(var he=0;he<Ce;++he)if(ne[he]+re<255){q[de]=he,ae.setPickBase(ne[he]+1),ne[he]+=re;continue e}var Se=l(k,Z);q[de]=Ce,$.push(Se),ne.push(re),ae.setPickBase(1),Ce+=1}else q[de]=-1}for(;Ce>0&&ne[Ce-1]===0;)ne.pop(),$.pop().dispose()}function me(){if(oe.contextLost)return!0;k.isContextLost()&&(oe.contextLost=!0,oe.mouseListener.enabled=!1,oe.selection.object=null,oe.oncontextloss&&oe.oncontextloss())}oe.autoResize&&ce(),window.addEventListener("resize",ce),oe.update=function(ke){oe._stopped||(ke=ke||{},K=!0,ee=!0)},oe.add=function(ke){oe._stopped||(ke.axes=N,V.push(ke),q.push(-1),K=!0,ee=!0,ye())},oe.remove=function(ke){if(!oe._stopped){var Ce=V.indexOf(ke);Ce<0||(V.splice(Ce,1),q.pop(),K=!0,ee=!0,ye())}},oe.dispose=function(){if(!oe._stopped&&(oe._stopped=!0,window.removeEventListener("resize",ce),S.removeEventListener("webglcontextlost",me),oe.mouseListener.enabled=!1,!oe.contextLost)){N.dispose(),B.dispose();for(var ke=0;ke<V.length;++ke)V[ke].dispose();for(O.dispose(),ke=0;ke<$.length;++ke)$[ke].dispose();P.dispose(),k=null,N=null,B=null,V=[]}},oe._mouseRotating=!1,oe._prevButtons=0,oe.enableMouseListeners=function(){oe.mouseListener=f(S,function(ke,Ce,de){if(!oe._stopped){var ae=$.length,re=V.length,he=L.object;L.distance=1/0,L.mouse[0]=Ce,L.mouse[1]=de,L.object=null,L.screen=null,L.dataCoordinate=L.dataPosition=null;var Se=!1;if(ke&&oe._prevButtons)oe._mouseRotating=!0;else{oe._mouseRotating&&(ee=!0),oe._mouseRotating=!1;for(var xe=0;xe<ae;++xe){var Te=$[xe].query(Ce,se[1]-de-1,oe.pickRadius);if(Te){if(Te.distance>L.distance)continue;for(var Ae=0;Ae<re;++Ae){var Pe=V[Ae];if(q[Ae]===xe){var De=Pe.pick(Te);De&&(L.buttons=ke,L.screen=Te.coord,L.distance=Te.distance,L.object=Pe,L.index=De.distance,L.dataPosition=De.position,L.dataCoordinate=De.dataCoordinate,L.data=De,Se=!0)}}}}}he&&he!==L.object&&(he.highlight&&he.highlight(null),K=!0),L.object&&(L.object.highlight&&L.object.highlight(L.data),K=!0),(Se=Se||L.object!==he)&&oe.onselect&&oe.onselect(L),1&ke&&!(1&oe._prevButtons)&&oe.onclick&&oe.onclick(L),oe._prevButtons=ke}})},S.addEventListener("webglcontextlost",me);var fe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],pe=[fe[0].slice(),fe[1].slice()];function ge(){if(!me()){ce();var ke=oe.camera.tick();J.view=oe.camera.matrix,K=K||ke,ee=ee||ke,N.pixelRatio=oe.pixelRatio,B.pixelRatio=oe.pixelRatio;var Ce=V.length,de=fe[0],ae=fe[1];de[0]=de[1]=de[2]=1/0,ae[0]=ae[1]=ae[2]=-1/0;for(var re=0;re<Ce;++re){(Le=V[re]).pixelRatio=oe.pixelRatio,Le.axes=oe.axes,K=K||!!Le.dirty,ee=ee||!!Le.dirty;var he=Le.bounds;if(he)for(var Se=he[0],xe=he[1],Te=0;Te<3;++Te)de[Te]=Math.min(de[Te],Se[Te]),ae[Te]=Math.max(ae[Te],xe[Te])}var Ae=oe.bounds;if(oe.autoBounds)for(Te=0;Te<3;++Te){if(ae[Te]<de[Te])de[Te]=-1,ae[Te]=1;else{de[Te]===ae[Te]&&(de[Te]-=1,ae[Te]+=1);var Pe=.05*(ae[Te]-de[Te]);de[Te]=de[Te]-Pe,ae[Te]=ae[Te]+Pe}Ae[0][Te]=de[Te],Ae[1][Te]=ae[Te]}var De=!1;for(Te=0;Te<3;++Te)De=De||pe[0][Te]!==Ae[0][Te]||pe[1][Te]!==Ae[1][Te],pe[0][Te]=Ae[0][Te],pe[1][Te]=Ae[1][Te];if(ee=ee||De,K=K||De){if(De){var ve=[0,0,0];for(re=0;re<3;++re)ve[re]=y((Ae[1][re]-Ae[0][re])/10);N.autoTicks?N.update({bounds:Ae,tickSpacing:ve}):N.update({bounds:Ae})}var we=k.drawingBufferWidth,Ee=k.drawingBufferHeight;for(Z[0]=we,Z[1]=Ee,se[0]=0|Math.max(we/oe.pixelRatio,1),se[1]=0|Math.max(Ee/oe.pixelRatio,1),function(je,Ge){var Je=je.bounds,rt=je.cameraParams,ot=rt.projection,yt=rt.model,_t=je.gl.drawingBufferWidth,mt=je.gl.drawingBufferHeight,tt=je.zNear,Qe=je.zFar,Dt=je.fovy,zt=_t/mt;Ge?(h(ot,-zt,zt,-1,1,tt,Qe),rt._ortho=!0):(m(ot,Dt,zt,tt,Qe),rt._ortho=!1);for(var pt=0;pt<16;++pt)yt[pt]=0;yt[15]=1;var vt=0;for(pt=0;pt<3;++pt)vt=Math.max(vt,Je[1][pt]-Je[0][pt]);for(pt=0;pt<3;++pt)je.autoScale?yt[5*pt]=je.aspect[pt]/(Je[1][pt]-Je[0][pt]):yt[5*pt]=1/vt,je.autoCenter&&(yt[12+pt]=.5*-yt[5*pt]*(Je[0][pt]+Je[1][pt]))}(oe,F),re=0;re<Ce;++re)(Le=V[re]).axesBounds=Ae,oe.clipToBounds&&(Le.clipBounds=Ae);L.object&&(oe.snapToData?B.position=L.dataCoordinate:B.position=L.dataPosition,B.bounds=Ae),ee&&(ee=!1,function(){if(!me()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var je=V.length,Ge=$.length,Je=0;Je<Ge;++Je){var rt=$[Je];rt.shape=se,rt.begin();for(var ot=0;ot<je;++ot)if(q[ot]===Je){var yt=V[ot];yt.drawPick&&(yt.pixelRatio=1,yt.drawPick(J))}rt.end()}}}()),oe.axesPixels=a(oe.axes,J,we,Ee),oe.onrender&&oe.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,we,Ee),oe.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Fe=!1;for(N.enable&&(Fe=Fe||N.isTransparent(),N.draw(J)),B.axes=N,L.object&&B.draw(J),k.disable(k.CULL_FACE),re=0;re<Ce;++re)(Le=V[re]).axes=N,Le.pixelRatio=oe.pixelRatio,Le.isOpaque&&Le.isOpaque()&&Le.draw(J),Le.isTransparent&&Le.isTransparent()&&(Fe=!0);if(Fe){for(O.shape=Z,O.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(J),re=0;re<Ce;++re)(Le=V[re]).isOpaque&&Le.isOpaque()&&Le.draw(J);for(k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(J),re=0;re<Ce;++re){var Le;(Le=V[re]).isTransparent&&Le.isTransparent()&&Le.drawTransparent(J)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),P.bind(),O.color[0].bind(0),P.uniforms.accumBuffer=0,p(k),k.disable(k.BLEND)}for(K=!1,re=0;re<Ce;++re)V[re].dirty=!1}}}return oe.enableMouseListeners(),function ke(){oe._stopped||oe.contextLost||(ge(),requestAnimationFrame(ke))}(),oe.redraw=function(){oe._stopped||(K=!0,ge())},oe},createCamera:i}},6640:function(c,o,t){var i=t(3236);o.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),o.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),o.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),o.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(c,o,t){"use strict";var i=t(9405),n=t(2762),a=t(1888),s=t(6640);function l(m,h,g,v,x){this.plot=m,this.offsetBuffer=h,this.pickBuffer=g,this.shader=v,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}c.exports=function(m,h){var g=m.gl,v=new l(m,n(g),n(g),i(g,s.pointVertex,s.pointFragment),i(g,s.pickVertex,s.pickFragment));return v.update(h),m.addObject(v),v};var u,p,f=l.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(m){var h;function g(k,E){return k in m?m[k]:E}m=m||{},this.sizeMin=g("sizeMin",.5),this.sizeMax=g("sizeMax",20),this.color=g("color",[1,0,0,1]).slice(),this.areaRatio=g("areaRatio",1),this.borderColor=g("borderColor",[0,0,0,1]).slice(),this.blend=g("blend",!1);var v=m.positions.length>>>1,x=m.positions instanceof Float32Array,y=m.idToIndex instanceof Int32Array&&m.idToIndex.length>=v,A=m.positions,d=x?A:a.mallocFloat32(A.length),S=y?m.idToIndex:a.mallocInt32(v);if(x||d.set(A),!y)for(d.set(A),h=0;h<v;h++)S[h]=h;this.points=A,this.offsetBuffer.update(d),this.pickBuffer.update(S),x||a.free(d),y||a.free(S),this.pointCount=v,this.pickOffset=0},f.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(m){var h=m!==void 0,g=h?this.pickShader:this.shader,v=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return m;var y=x[2]-x[0],A=x[3]-x[1],d=function(L,O){var P,F=0,U=L.length>>>1;for(P=0;P<U;P++){var I=L[2*P],N=L[2*P+1];I>=O[0]&&I<=O[2]&&N>=O[1]&&N<=O[3]&&F++}return F}(this.points,x),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(d,.33333)));u[0]=2/y,u[4]=2/A,u[6]=-2*x[0]/y-1,u[7]=-2*x[1]/A-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=u,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=S<5,g.uniforms.pointSize=S,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),h&&(p[0]=255&m,p[1]=m>>8&255,p[2]=m>>16&255,p[3]=m>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(v.UNSIGNED_BYTE),g.uniforms.pickOffset=p,this.pickOffset=m);var k=v.getParameter(v.BLEND),E=v.getParameter(v.DITHER);return k&&!this.blend&&v.disable(v.BLEND),E&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),k&&!this.blend&&v.enable(v.BLEND),E&&v.enable(v.DITHER),m+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(m,h,g){var v=this.pickOffset,x=this.pointCount;if(g<v||g>=v+x)return null;var y=g-v,A=this.points;return{object:this,pointId:y,dataCoord:[A[2*y],A[2*y+1]]}}},783:function(c){c.exports=function(o,t,i,n){var a,s,l,u,p,f=t[0],m=t[1],h=t[2],g=t[3],v=i[0],x=i[1],y=i[2],A=i[3];return(s=f*v+m*x+h*y+g*A)<0&&(s=-s,v=-v,x=-x,y=-y,A=-A),1-s>1e-6?(a=Math.acos(s),l=Math.sin(a),u=Math.sin((1-n)*a)/l,p=Math.sin(n*a)/l):(u=1-n,p=n),o[0]=u*f+p*v,o[1]=u*m+p*x,o[2]=u*h+p*y,o[3]=u*g+p*A,o}},5964:function(c){"use strict";c.exports=function(o){return o||o===0?o.toString():""}},9366:function(c,o,t){"use strict";var i=t(4359);c.exports=function(a,s,l){var u=[s.style,s.weight,s.variant,s.family].join("_"),p=n[u];if(p||(p=n[u]={}),a in p)return p[a];var f={textAlign:"center",textBaseline:"middle",lineHeight:1,font:s.family,fontStyle:s.style,fontWeight:s.weight,fontVariant:s.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},m=i(a,f);f.triangles=!1;var h,g,v=i(a,f);if(l&&l!==1){for(h=0;h<m.positions.length;++h)for(g=0;g<m.positions[h].length;++g)m.positions[h][g]/=l;for(h=0;h<v.positions.length;++h)for(g=0;g<v.positions[h].length;++g)v.positions[h][g]/=l}var x=[[1/0,1/0],[-1/0,-1/0]],y=v.positions.length;for(h=0;h<y;++h){var A=v.positions[h];for(g=0;g<2;++g)x[0][g]=Math.min(x[0][g],A[g]),x[1][g]=Math.max(x[1][g],A[g])}return p[a]=[m,v,x]};var n={}},1283:function(c,o,t){var i=t(9405),n=t(3236),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),s=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],m={vertex:a,fragment:u,attributes:f},h={vertex:s,fragment:u,attributes:f},g={vertex:l,fragment:u,attributes:f},v={vertex:a,fragment:p,attributes:f},x={vertex:s,fragment:p,attributes:f},y={vertex:l,fragment:p,attributes:f};function A(d,S){var k=i(d,S),E=k.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,k}o.createPerspective=function(d){return A(d,m)},o.createOrtho=function(d){return A(d,h)},o.createProject=function(d){return A(d,g)},o.createPickPerspective=function(d){return A(d,v)},o.createPickOrtho=function(d){return A(d,x)},o.createPickProject=function(d){return A(d,y)}},8418:function(c,o,t){"use strict";var i=t(5219),n=t(2762),a=t(8116),s=t(1888),l=t(6760),u=t(1283),p=t(9366),f=t(5964),m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=ArrayBuffer,g=DataView;function v(K){return Array.isArray(K)||function(ee){return h.isView(ee)&&!(ee instanceof g)}(K)}function x(K,ee){var J=K[0],Z=K[1],te=K[2],oe=K[3];return K[0]=ee[0]*J+ee[4]*Z+ee[8]*te+ee[12]*oe,K[1]=ee[1]*J+ee[5]*Z+ee[9]*te+ee[13]*oe,K[2]=ee[2]*J+ee[6]*Z+ee[10]*te+ee[14]*oe,K[3]=ee[3]*J+ee[7]*Z+ee[11]*te+ee[15]*oe,K}function y(K,ee,J,Z){return x(Z,Z),x(Z,Z),x(Z,Z)}function A(K,ee){this.index=K,this.dataCoordinate=this.position=ee}function d(K){return K===!0||K>1?1:K}function S(K,ee,J,Z,te,oe,se,ce,ye,me,fe,pe){this.gl=K,this.pixelRatio=1,this.shader=ee,this.orthoShader=J,this.projectShader=Z,this.pointBuffer=te,this.colorBuffer=oe,this.glyphBuffer=se,this.idBuffer=ce,this.vao=ye,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=me,this.pickOrthoShader=fe,this.pickProjectShader=pe,this.points=[],this._selectResult=new A(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}c.exports=function(K){var ee=K.gl,J=u.createPerspective(ee),Z=u.createOrtho(ee),te=u.createProject(ee),oe=u.createPickPerspective(ee),se=u.createPickOrtho(ee),ce=u.createPickProject(ee),ye=n(ee),me=n(ee),fe=n(ee),pe=n(ee),ge=new S(ee,J,Z,te,ye,me,fe,pe,a(ee,[{buffer:ye,size:3,type:ee.FLOAT},{buffer:me,size:4,type:ee.FLOAT},{buffer:fe,size:2,type:ee.FLOAT},{buffer:pe,size:4,type:ee.UNSIGNED_BYTE,normalized:!0}]),oe,se,ce);return ge.update(K),ge};var k=S.prototype;k.pickSlots=1,k.setPickBase=function(K){this.pickId=K},k.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},k.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],L=[0,0,0],O=[0,0,0],P=[0,0,0,1],F=[0,0,0,1],U=m.slice(),I=[0,0,0],N=[[0,0,0],[0,0,0]];function W(K){return K[0]=K[1]=K[2]=0,K}function B(K,ee){return K[0]=ee[0],K[1]=ee[1],K[2]=ee[2],K[3]=1,K}function V(K,ee,J,Z){return K[0]=ee[0],K[1]=ee[1],K[2]=ee[2],K[J]=Z,K}var q=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function ne(K,ee,J,Z,te,oe,se){var ce=J.gl;if((oe===J.projectHasAlpha||se)&&function(me,fe,pe,ge){var ke,Ce=fe.axesProject,de=fe.gl,ae=me.uniforms,re=pe.model||m,he=pe.view||m,Se=pe.projection||m,xe=fe.axesBounds,Te=function(yt){for(var _t=N,mt=0;mt<2;++mt)for(var tt=0;tt<3;++tt)_t[mt][tt]=Math.max(Math.min(yt[mt][tt],1e8),-1e8);return _t}(fe.clipBounds);ke=fe.axes&&fe.axes.lastCubeProps?fe.axes.lastCubeProps.axis:[1,1,1],E[0]=2/de.drawingBufferWidth,E[1]=2/de.drawingBufferHeight,me.bind(),ae.view=he,ae.projection=Se,ae.screenSize=E,ae.highlightId=fe.highlightId,ae.highlightScale=fe.highlightScale,ae.clipBounds=Te,ae.pickGroup=fe.pickId/255,ae.pixelRatio=ge;for(var Ae=0;Ae<3;++Ae)if(Ce[Ae]){ae.scale=fe.projectScale[Ae],ae.opacity=fe.projectOpacity[Ae];for(var Pe=U,De=0;De<16;++De)Pe[De]=0;for(De=0;De<4;++De)Pe[5*De]=1;Pe[5*Ae]=0,ke[Ae]<0?Pe[12+Ae]=xe[0][Ae]:Pe[12+Ae]=xe[1][Ae],l(Pe,re,Pe),ae.model=Pe;var ve=(Ae+1)%3,we=(Ae+2)%3,Ee=W(L),Fe=W(O);Ee[ve]=1,Fe[we]=1;var Le=y(0,0,0,B(P,Ee)),je=y(0,0,0,B(F,Fe));if(Math.abs(Le[1])>Math.abs(je[1])){var Ge=Le;Le=je,je=Ge,Ge=Ee,Ee=Fe,Fe=Ge;var Je=ve;ve=we,we=Je}Le[0]<0&&(Ee[ve]=-1),je[1]>0&&(Fe[we]=-1);var rt=0,ot=0;for(De=0;De<4;++De)rt+=Math.pow(re[4*ve+De],2),ot+=Math.pow(re[4*we+De],2);Ee[ve]/=Math.sqrt(rt),Fe[we]/=Math.sqrt(ot),ae.axes[0]=Ee,ae.axes[1]=Fe,ae.fragClipBounds[0]=V(I,Te[0],Ae,-1e8),ae.fragClipBounds[1]=V(I,Te[1],Ae,1e8),fe.vao.bind(),fe.vao.draw(de.TRIANGLES,fe.vertexCount),fe.lineWidth>0&&(de.lineWidth(fe.lineWidth*ge),fe.vao.draw(de.LINES,fe.lineVertexCount,fe.vertexCount)),fe.vao.unbind()}}(ee,J,Z,te),oe===J.hasAlpha||se){K.bind();var ye=K.uniforms;ye.model=Z.model||m,ye.view=Z.view||m,ye.projection=Z.projection||m,E[0]=2/ce.drawingBufferWidth,E[1]=2/ce.drawingBufferHeight,ye.screenSize=E,ye.highlightId=J.highlightId,ye.highlightScale=J.highlightScale,ye.fragClipBounds=q,ye.clipBounds=J.axes.bounds,ye.opacity=J.opacity,ye.pickGroup=J.pickId/255,ye.pixelRatio=te,J.vao.bind(),J.vao.draw(ce.TRIANGLES,J.vertexCount),J.lineWidth>0&&(ce.lineWidth(J.lineWidth*te),J.vao.draw(ce.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function $(K,ee,J,Z){var te;te=v(K)?ee<K.length?K[ee]:void 0:K,te=f(te);var oe=!0;i(te)&&(te="\u25BC",oe=!1),J||(J={});var se=J.family;v(se)&&(se=se[ee]),se||(se="normal");var ce=J.weight;v(ce)&&(ce=ce[ee]),ce||(ce="normal");var ye=J.style;v(ye)&&(ye=ye[ee]),ye||(ye="normal");var me=J.variant;v(me)&&(me=me[ee]),me||(me="normal");var fe=p(te,{family:se,weight:ce,style:ye,variant:me},Z);return{mesh:(fe=p(te,J,Z))[0],lines:fe[1],bounds:fe[2],visible:oe}}k.draw=function(K){ne(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!1,!1)},k.drawTransparent=function(K){ne(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!0,!1)},k.drawPick=function(K){ne(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,K,1,!0,!0)},k.pick=function(K){if(!K||K.id!==this.pickId)return null;var ee=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(ee>=this.pointCount||ee<0)return null;var J=this.points[ee],Z=this._selectResult;Z.index=ee;for(var te=0;te<3;++te)Z.position[te]=Z.dataCoordinate[te]=J[te];return Z},k.highlight=function(K){if(K){var ee=K.index,J=255&ee,Z=ee>>8&255,te=ee>>16&255;this.highlightId=[J/255,Z/255,te/255,0]}else this.highlightId=[1,1,1,1]},k.update=function(K){if("perspective"in(K=K||{})&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(v(K.project))this.axesProject=K.project;else{var ee=!!K.project;this.axesProject=[ee,ee,ee]}if("projectScale"in K)if(v(K.projectScale))this.projectScale=K.projectScale.slice();else{var J=+K.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in K){v(K.projectOpacity)?this.projectOpacity=K.projectOpacity.slice():(J=+K.projectOpacity,this.projectOpacity=[J,J,J]);for(var Z=0;Z<3;++Z)this.projectOpacity[Z]=d(this.projectOpacity[Z]),this.projectOpacity[Z]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=d(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var te,oe,se=K.position,ce={family:K.font||"normal",style:K.fontStyle||"normal",weight:K.fontWeight||"normal",variant:K.fontVariant||"normal"},ye=K.alignment||[0,0];if(ye.length===2)te=ye[0],oe=ye[1];else for(te=[],oe=[],Z=0;Z<ye.length;++Z)te[Z]=ye[Z][0],oe[Z]=ye[Z][1];var me=[1/0,1/0,1/0],fe=[-1/0,-1/0,-1/0],pe=K.glyph,ge=K.color,ke=K.size,Ce=K.angle,de=K.lineColor,ae=-1,re=0,he=0,Se=0;if(se.length){Se=se.length;e:for(Z=0;Z<Se;++Z){for(var xe=se[Z],Te=0;Te<3;++Te)if(isNaN(xe[Te])||!isFinite(xe[Te]))continue e;var Ae=(_t=$(pe,Z,ce,this.pixelRatio)).mesh,Pe=_t.lines,De=_t.bounds;re+=3*Ae.cells.length,he+=2*Pe.edges.length}}var ve=re+he,we=s.mallocFloat(3*ve),Ee=s.mallocFloat(4*ve),Fe=s.mallocFloat(2*ve),Le=s.mallocUint32(ve);if(ve>0){var je=0,Ge=re,Je=[0,0,0,1],rt=[0,0,0,1],ot=v(ge)&&v(ge[0]),yt=v(de)&&v(de[0]);e:for(Z=0;Z<Se;++Z){for(ae+=1,xe=se[Z],Te=0;Te<3;++Te){if(isNaN(xe[Te])||!isFinite(xe[Te]))continue e;fe[Te]=Math.max(fe[Te],xe[Te]),me[Te]=Math.min(me[Te],xe[Te])}Ae=(_t=$(pe,Z,ce,this.pixelRatio)).mesh,Pe=_t.lines,De=_t.bounds;var _t,mt=_t.visible;if(mt)if(v(ge)){if((tt=ot?Z<ge.length?ge[Z]:[0,0,0,0]:ge).length===3){for(Te=0;Te<3;++Te)Je[Te]=tt[Te];Je[3]=1}else if(tt.length===4){for(Te=0;Te<4;++Te)Je[Te]=tt[Te];!this.hasAlpha&&tt[3]<1&&(this.hasAlpha=!0)}}else Je[0]=Je[1]=Je[2]=0,Je[3]=1;else Je=[1,1,1,0];if(mt)if(v(de)){var tt;if((tt=yt?Z<de.length?de[Z]:[0,0,0,0]:de).length===3){for(Te=0;Te<3;++Te)rt[Te]=tt[Te];rt[Te]=1}else if(tt.length===4){for(Te=0;Te<4;++Te)rt[Te]=tt[Te];!this.hasAlpha&&tt[3]<1&&(this.hasAlpha=!0)}}else rt[0]=rt[1]=rt[2]=0,rt[3]=1;else rt=[1,1,1,0];var Qe=.5;mt?v(ke)?Qe=Z<ke.length?+ke[Z]:12:ke?Qe=+ke:this.useOrtho&&(Qe=12):Qe=0;var Dt=0;v(Ce)?Dt=Z<Ce.length?+Ce[Z]:0:Ce&&(Dt=+Ce);var zt=Math.cos(Dt),pt=Math.sin(Dt);for(xe=se[Z],Te=0;Te<3;++Te)fe[Te]=Math.max(fe[Te],xe[Te]),me[Te]=Math.min(me[Te],xe[Te]);var vt=te,We=oe;vt=0,v(te)?vt=Z<te.length?te[Z]:0:te&&(vt=te),We=0,v(oe)?We=Z<oe.length?oe[Z]:0:oe&&(We=oe);var Ze=[vt*=vt>0?1-De[0][0]:vt<0?1+De[1][0]:1,We*=We>0?1-De[0][1]:We<0?1+De[1][1]:1],Ne=Ae.cells||[],Xe=Ae.positions||[];for(Te=0;Te<Ne.length;++Te)for(var st=Ne[Te],lt=0;lt<3;++lt){for(var xt=0;xt<3;++xt)we[3*je+xt]=xe[xt];for(xt=0;xt<4;++xt)Ee[4*je+xt]=Je[xt];Le[je]=ae;var bt=Xe[st[lt]];Fe[2*je]=Qe*(zt*bt[0]-pt*bt[1]+Ze[0]),Fe[2*je+1]=Qe*(pt*bt[0]+zt*bt[1]+Ze[1]),je+=1}for(Ne=Pe.edges,Xe=Pe.positions,Te=0;Te<Ne.length;++Te)for(st=Ne[Te],lt=0;lt<2;++lt){for(xt=0;xt<3;++xt)we[3*Ge+xt]=xe[xt];for(xt=0;xt<4;++xt)Ee[4*Ge+xt]=rt[xt];Le[Ge]=ae,bt=Xe[st[lt]],Fe[2*Ge]=Qe*(zt*bt[0]-pt*bt[1]+Ze[0]),Fe[2*Ge+1]=Qe*(pt*bt[0]+zt*bt[1]+Ze[1]),Ge+=1}}}this.bounds=[me,fe],this.points=se,this.pointCount=se.length,this.vertexCount=re,this.lineVertexCount=he,this.pointBuffer.update(we),this.colorBuffer.update(Ee),this.glyphBuffer.update(Fe),this.idBuffer.update(Le),s.free(we),s.free(Ee),s.free(Fe),s.free(Le)},k.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(c,o,t){"use strict";var i=t(3236);o.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),o.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(c,o,t){"use strict";var i=t(9405),n=t(2762),a=t(4298);function s(u,p,f){this.plot=u,this.boxBuffer=p,this.boxShader=f,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}c.exports=function(u,p){var f=u.gl,m=new s(u,n(f,[0,0,0,1,1,0,1,1]),i(f,a.boxVertex,a.boxFragment));return m.update(p),u.addOverlay(m),m};var l=s.prototype;l.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,f=this.borderWidth,m=(this.innerFill,this.innerColor),h=(this.outerFill,this.outerColor),g=this.borderColor,v=u.box,x=u.screenBox,y=u.dataBox,A=u.viewBox,d=u.pixelRatio,S=(p[0]-y[0])*(A[2]-A[0])/(y[2]-y[0])+A[0],k=(p[1]-y[1])*(A[3]-A[1])/(y[3]-y[1])+A[1],E=(p[2]-y[0])*(A[2]-A[0])/(y[2]-y[0])+A[0],L=(p[3]-y[1])*(A[3]-A[1])/(y[3]-y[1])+A[1];if(S=Math.max(S,A[0]),k=Math.max(k,A[1]),E=Math.min(E,A[2]),L=Math.min(L,A[3]),!(E<S||L<k)){v.bind();var O=x[2]-x[0],P=x[3]-x[1];if(this.outerFill&&(v.drawBox(0,0,O,k,h),v.drawBox(0,k,S,L,h),v.drawBox(0,L,O,P,h),v.drawBox(E,k,O,L,h)),this.innerFill&&v.drawBox(S,k,E,L,m),f>0){var F=f*d;v.drawBox(S-F,k-F,E+F,k+F,g),v.drawBox(S-F,L-F,E+F,L+F,g),v.drawBox(S-F,k-F,S+F,L+F,g),v.drawBox(E-F,k-F,E+F,L+F,g)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(c,o,t){"use strict";c.exports=function(f,m){var h=m[0],g=m[1];return new u(f,i(f,h,g,{}),n.mallocUint8(h*g*4))};var i=t(2260),n=t(1888),a=t(9618),s=t(8828).nextPow2;function l(f,m,h,g,v){this.coord=[f,m],this.id=h,this.value=g,this.distance=v}function u(f,m,h){this.gl=f,this.fbo=m,this.buffer=h,this._readTimeout=null;var g=this;this._readCallback=function(){g.gl&&(m.bind(),f.readPixels(0,0,m.shape[0],m.shape[1],f.RGBA,f.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var m=this.fbo.shape[0],h=this.fbo.shape[1];if(h*m*4>this.buffer.length){n.free(this.buffer);for(var g=this.buffer=n.mallocUint8(s(h*m*4)),v=0;v<h*m*4;++v)g[v]=255}return f}}}),p.begin=function(){var f=this.gl;this.shape,f&&(this.fbo.bind(),f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))},p.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(f,m,h){if(!this.gl)return null;var g=this.fbo.shape.slice();f|=0,m|=0,typeof h!="number"&&(h=1);var v=0|Math.min(Math.max(f-h,0),g[0]),x=0|Math.min(Math.max(f+h,0),g[0]),y=0|Math.min(Math.max(m-h,0),g[1]),A=0|Math.min(Math.max(m+h,0),g[1]);if(x<=v||A<=y)return null;var d=[x-v,A-y],S=a(this.buffer,[d[0],d[1],4],[4,4*g[0],1],4*(v+g[0]*y)),k=function(O,P,F){for(var U=1e8,I=-1,N=-1,W=O.shape[0],B=O.shape[1],V=0;V<W;V++)for(var q=0;q<B;q++){var ne=O.get(V,q,0),$=O.get(V,q,1),K=O.get(V,q,2),ee=O.get(V,q,3);if(ne<255||$<255||K<255||ee<255){var J=P-V,Z=F-q,te=J*J+Z*Z;te<U&&(U=te,I=V,N=q)}}return[I,N,U]}(S.hi(d[0],d[1],1),h,h),E=k[0],L=k[1];return E<0||Math.pow(this.radius,2)<k[2]?null:new l(E+v|0,L+y|0,S.get(E,L,0),[S.get(E,L,1),S.get(E,L,2),S.get(E,L,3)],Math.sqrt(k[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(c,o,t){"use strict";var i=t(3327),n=t(8731),a=t(216),s=t(5091),l=t(2145),u=t(8866);function p(h){this.gl=h,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=p.prototype;function m(h,g){return h.name<g.name?-1:1}f.bind=function(){var h;this.program||this._relink();var g=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(g>v)for(h=v;h<g;h++)this.gl.enableVertexAttribArray(h);else if(v>g)for(h=g;h<v;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=g,this.gl.useProgram(this.program)},f.dispose=function(){for(var h=this.gl.lastAttribCount,g=0;g<h;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(h,g,v,x){if(!g||arguments.length===1){var y=h;h=y.vertex,g=y.fragment,v=y.uniforms,x=y.attributes}var A=this,d=A.gl,S=A._vref;A._vref=s.shader(d,d.VERTEX_SHADER,h),S&&S.dispose(),A.vertShader=A._vref.shader;var k=this._fref;if(A._fref=s.shader(d,d.FRAGMENT_SHADER,g),k&&k.dispose(),A.fragShader=A._fref.shader,!v||!x){var E=d.createProgram();if(d.attachShader(E,A.fragShader),d.attachShader(E,A.vertShader),d.linkProgram(E),!d.getProgramParameter(E,d.LINK_STATUS)){var L=d.getProgramInfoLog(E);throw new u(L,"Error linking program:"+L)}v=v||l.uniforms(d,E),x=x||l.attributes(d,E),d.deleteProgram(E)}(x=x.slice()).sort(m);var O,P=[],F=[],U=[];for(O=0;O<x.length;++O){var I=x[O];if(I.type.indexOf("mat")>=0){for(var N=0|I.type.charAt(I.type.length-1),W=new Array(N),B=0;B<N;++B)W[B]=U.length,F.push(I.name+"["+B+"]"),typeof I.location=="number"?U.push(I.location+B):Array.isArray(I.location)&&I.location.length===N&&typeof I.location[B]=="number"?U.push(0|I.location[B]):U.push(-1);P.push({name:I.name,type:I.type,locations:W})}else P.push({name:I.name,type:I.type,locations:[U.length]}),F.push(I.name),typeof I.location=="number"?U.push(0|I.location):U.push(-1)}var V=0;for(O=0;O<U.length;++O)if(U[O]<0){for(;U.indexOf(V)>=0;)V+=1;U[O]=V}var q=new Array(v.length);function ne(){A.program=s.program(d,A._vref,A._fref,F,U);for(var $=0;$<v.length;++$)q[$]=d.getUniformLocation(A.program,v[$].name)}ne(),A._relink=ne,A.types={uniforms:a(v),attributes:a(x)},A.attributes=n(d,A,P,U),Object.defineProperty(A,"uniforms",i(d,A,v,q))},c.exports=function(h,g,v,x,y){var A=new p(h);return A.update(g,v,x,y),A}},8866:function(c){function o(t,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(n?`
`+n:""),this.stack=new Error().stack}o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,c.exports=o},8731:function(c,o,t){"use strict";c.exports=function(p,f,m,h){for(var g={},v=0,x=m.length;v<x;++v){var y=m[v],A=y.name,d=y.type,S=y.locations;switch(d){case"bool":case"int":case"float":l(p,f,S[0],h,1,g,A);break;default:if(d.indexOf("vec")>=0){if((k=d.charCodeAt(d.length-1)-48)<2||k>4)throw new i("","Invalid data type for attribute "+A+": "+d);l(p,f,S[0],h,k,g,A)}else{if(!(d.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+A+": "+d);var k;if((k=d.charCodeAt(d.length-1)-48)<2||k>4)throw new i("","Invalid data type for attribute "+A+": "+d);u(p,f,S,h,k,g,A)}}}return g};var i=t(8866);function n(p,f,m,h,g,v){this._gl=p,this._wrapper=f,this._index=m,this._locations=h,this._dimension=g,this._constFunc=v}var a=n.prototype;a.pointer=function(p,f,m,h){var g=this,v=g._gl,x=g._locations[g._index];v.vertexAttribPointer(x,g._dimension,p||v.FLOAT,!!f,m||0,h||0),v.enableVertexAttribArray(x)},a.set=function(p,f,m,h){return this._constFunc(this._locations[this._index],p,f,m,h)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var s=[function(p,f,m){return m.length===void 0?p.vertexAttrib1f(f,m):p.vertexAttrib1fv(f,m)},function(p,f,m,h){return m.length===void 0?p.vertexAttrib2f(f,m,h):p.vertexAttrib2fv(f,m)},function(p,f,m,h,g){return m.length===void 0?p.vertexAttrib3f(f,m,h,g):p.vertexAttrib3fv(f,m)},function(p,f,m,h,g,v){return m.length===void 0?p.vertexAttrib4f(f,m,h,g,v):p.vertexAttrib4fv(f,m)}];function l(p,f,m,h,g,v,x){var y=s[g],A=new n(p,f,m,h,g,y);Object.defineProperty(v,x,{set:function(d){return p.disableVertexAttribArray(h[m]),y(p,h[m],d),d},get:function(){return A},enumerable:!0})}function u(p,f,m,h,g,v,x){for(var y=new Array(g),A=new Array(g),d=0;d<g;++d)l(p,f,m[d],h,g,y,d),A[d]=y[d];Object.defineProperty(y,"location",{set:function(E){if(Array.isArray(E))for(var L=0;L<g;++L)A[L].location=E[L];else for(L=0;L<g;++L)A[L].location=E+L;return E},get:function(){for(var E=new Array(g),L=0;L<g;++L)E[L]=h[m[L]];return E},enumerable:!0}),y.pointer=function(E,L,O,P){E=E||p.FLOAT,L=!!L,O=O||g*g,P=P||0;for(var F=0;F<g;++F){var U=h[m[F]];p.vertexAttribPointer(U,g,E,L,O,P+F*g),p.enableVertexAttribArray(U)}};var S=new Array(g),k=p["vertexAttrib"+g+"fv"];Object.defineProperty(v,x,{set:function(E){for(var L=0;L<g;++L){var O=h[m[L]];if(p.disableVertexAttribArray(O),Array.isArray(E[0]))k.call(p,O,E[L]);else{for(var P=0;P<g;++P)S[P]=E[g*L+P];k.call(p,O,S)}}return E},get:function(){return y},enumerable:!0})}},3327:function(c,o,t){"use strict";var i=t(216),n=t(8866);function a(l){return function(){return l}}function s(l,u){for(var p=new Array(l),f=0;f<l;++f)p[f]=u;return p}c.exports=function(l,u,p,f){function m(y){return function(A){for(var d=h("",y),S=0;S<d.length;++S){var k=d[S],E=k[0],L=k[1];if(f[L]){var O=A;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var P=E;if(E.indexOf(".")===0&&(P=E.slice(1)),P.indexOf("]")===P.length-1){var F=P.indexOf("["),U=P.slice(0,F),I=P.slice(F+1,P.length-1);O=U?A[U][I]:A[I]}else O=A[P]}var N,W=p[L].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(f[L],O);break;case"float":l.uniform1f(f[L],O);break;default:var B=W.indexOf("vec");if(!(0<=B&&B<=1&&W.length===4+B)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](f[L],!1,O);break}throw new n("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](f[L],O);break;case"v":l["uniform"+N+"fv"](f[L],O);break;default:throw new n("","Unrecognized data type for vector "+name+": "+W)}}}}}}function h(y,A){if(typeof A!="object")return[[y,A]];var d=[];for(var S in A){var k=A[S],E=y;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof k=="object"?d.push.apply(d,h(E,k)):d.push([E,k])}return d}function g(y,A,d){if(typeof d=="object"){var S=v(d);Object.defineProperty(y,A,{get:a(S),set:m(d),enumerable:!0,configurable:!1})}else f[d]?Object.defineProperty(y,A,{get:(k=d,function(E,L,O){return E.getUniform(L.program,O[k])}),set:m(d),enumerable:!0,configurable:!1}):y[A]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var L=E.indexOf("vec");if(0<=L&&L<=1&&E.length===4+L){if((O=E.charCodeAt(E.length-1)-48)<2||O>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?s(O,!1):s(O,0)}if(E.indexOf("mat")===0&&E.length===4){var O;if((O=E.charCodeAt(E.length-1)-48)<2||O>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return s(O*O,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(p[d].type);var k}function v(y){var A;if(Array.isArray(y)){A=new Array(y.length);for(var d=0;d<y.length;++d)g(A,d,y[d])}else for(var S in A={},y)g(A,S,y[S]);return A}var x=i(p,!0);return{get:a(v(x)),set:m(x),enumerable:!0,configurable:!0}}},216:function(c){"use strict";c.exports=function(o,t){for(var i={},n=0;n<o.length;++n)for(var a=o[n].name.split("."),s=i,l=0;l<a.length;++l){var u=a[l].split("[");if(u.length>1){u[0]in s||(s[u[0]]=[]),s=s[u[0]];for(var p=1;p<u.length;++p){var f=parseInt(u[p]);p<u.length-1||l<a.length-1?(f in s||(p<u.length-1?s[f]=[]:s[f]={}),s=s[f]):s[f]=t?n:o[n].type}}else l<a.length-1?(u[0]in s||(s[u[0]]={}),s=s[u[0]]):s[u[0]]=t?n:o[n].type}return i}},2145:function(c,o){"use strict";o.uniforms=function(a,s){for(var l=a.getProgramParameter(s,a.ACTIVE_UNIFORMS),u=[],p=0;p<l;++p){var f=a.getActiveUniform(s,p);if(f){var m=n(a,f.type);if(f.size>1)for(var h=0;h<f.size;++h)u.push({name:f.name.replace("[0]","["+h+"]"),type:m});else u.push({name:f.name,type:m})}}return u},o.attributes=function(a,s){for(var l=a.getProgramParameter(s,a.ACTIVE_ATTRIBUTES),u=[],p=0;p<l;++p){var f=a.getActiveAttrib(s,p);f&&u.push({name:f.name,type:n(a,f.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(a,s){if(!i){var l=Object.keys(t);i={};for(var u=0;u<l.length;++u){var p=l[u];i[a[p]]=t[p]}}return i[s]}},5091:function(c,o,t){"use strict";o.shader=function(m,h,g){return f(m).getShaderReference(h,g)},o.program=function(m,h,g,v,x){return f(m).getProgram(h,g,v,x)};var i=t(8866),n=t(2992),a=new(typeof WeakMap>"u"?t(606):WeakMap),s=0;function l(m,h,g,v,x,y,A){this.id=m,this.src=h,this.type=g,this.shader=v,this.count=y,this.programs=[],this.cache=A}function u(m){this.gl=m,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var m=this.cache,h=m.gl,g=this.programs,v=0,x=g.length;v<x;++v){var y=m.programs[g[v]];y&&(delete m.programs[v],h.deleteProgram(y))}h.deleteShader(this.shader),delete m.shaders[this.type===h.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function f(m){var h=a.get(m);return h||(h=new u(m),a.set(m,h)),h}p.getShaderReference=function(m,h){var g=this.gl,v=this.shaders[m===g.FRAGMENT_SHADER|0],x=v[h];if(x&&g.isShader(x.shader))x.count+=1;else{var y=function(A,d,S){var k=A.createShader(d);if(A.shaderSource(k,S),A.compileShader(k),!A.getShaderParameter(k,A.COMPILE_STATUS)){var E=A.getShaderInfoLog(k);try{var L=n(E,S,d)}catch(O){throw console.warn("Failed to format compiler error: "+O),new i(E,`Error compiling shader:
`+E)}throw new i(E,L.short,L.long)}return k}(g,m,h);x=v[h]=new l(s++,h,m,y,[],1,this)}return x},p.getProgram=function(m,h,g,v){var x=[m.id,h.id,g.join(":"),v.join(":")].join("@"),y=this.programs[x];return y&&this.gl.isProgram(y)||(this.programs[x]=y=function(A,d,S,k,E){var L=A.createProgram();A.attachShader(L,d),A.attachShader(L,S);for(var O=0;O<k.length;++O)A.bindAttribLocation(L,E[O],k[O]);if(A.linkProgram(L),!A.getProgramParameter(L,A.LINK_STATUS)){var P=A.getProgramInfoLog(L);throw new i(P,"Error linking program: "+P)}return L}(this.gl,m.shader,h.shader,g,v),m.programs.push(x),h.programs.push(x)),y}},4098:function(c){"use strict";function o(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}c.exports=function(i,n){var a=new o(i);return a.update(n),i.addOverlay(a),a};var t=o.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,n=this.width,a=this.color,s=this.center,l=this.plot,u=l.line,p=l.dataBox,f=l.viewBox;if(u.bind(),p[0]<=s[0]&&s[0]<=p[2]&&p[1]<=s[1]&&s[1]<=p[3]){var m=f[0]+(s[0]-p[0])/(p[2]-p[0])*(f[2]-f[0]),h=f[1]+(s[1]-p[1])/(p[3]-p[1])*(f[3]-f[1]);i[0]&&u.drawLine(m,h,f[0],h,n[0],a[0]),i[1]&&u.drawLine(m,h,m,f[1],n[1],a[1]),i[2]&&u.drawLine(m,h,f[2],h,n[2],a[2]),i[3]&&u.drawLine(m,h,m,f[3],n[3],a[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},1493:function(c,o,t){"use strict";var i=t(3236),n=t(9405),a=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),s=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);c.exports=function(l){return n(l,a,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(c,o,t){"use strict";var i=t(2762),n=t(8116),a=t(1493);c.exports=function(h,g){var v=[];function x(k,E,L,O,P,F){var U=[k,E,L,0,0,0,1];U[O+3]=1,U[O]=P,v.push.apply(v,U),U[6]=-1,v.push.apply(v,U),U[O]=F,v.push.apply(v,U),v.push.apply(v,U),U[6]=1,v.push.apply(v,U),U[O]=P,v.push.apply(v,U)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var y=i(h,v),A=n(h,[{type:h.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:h.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:h.FLOAT,buffer:y,size:1,offset:24,stride:28}]),d=a(h);d.attributes.position.location=0,d.attributes.color.location=1,d.attributes.weight.location=2;var S=new l(h,y,A,d);return S.update(g),S};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(h,g,v,x){this.gl=h,this.buffer=g,this.vao=v,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,p=[0,0,0],f=[0,0,0],m=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(h){},u.draw=function(h){var g=this.gl,v=this.vao,x=this.shader;v.bind(),x.bind();var y,A=h.model||s,d=h.view||s,S=h.projection||s;this.axes&&(y=this.axes.lastCubeProps.axis);for(var k=p,E=f,L=0;L<3;++L)y&&y[L]<0?(k[L]=this.bounds[0][L],E[L]=this.bounds[1][L]):(k[L]=this.bounds[1][L],E[L]=this.bounds[0][L]);for(m[0]=g.drawingBufferWidth,m[1]=g.drawingBufferHeight,x.uniforms.model=A,x.uniforms.view=d,x.uniforms.projection=S,x.uniforms.coordinates=[this.position,k,E],x.uniforms.colors=this.colors,x.uniforms.screenShape=m,L=0;L<3;++L)x.uniforms.lineWidth=this.lineWidth[L]*this.pixelRatio,this.enabled[L]&&(v.draw(g.TRIANGLES,6,6*L),this.drawSides[L]&&v.draw(g.TRIANGLES,12,18+12*L));v.unbind()},u.update=function(h){h&&("bounds"in h&&(this.bounds=h.bounds),"position"in h&&(this.position=h.position),"lineWidth"in h&&(this.lineWidth=h.lineWidth),"colors"in h&&(this.colors=h.colors),"enabled"in h&&(this.enabled=h.enabled),"drawSides"in h&&(this.drawSides=h.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(c,o,t){var i=t(3236),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:s,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(c,o,t){"use strict";var i=t(2931),n=t(9970),a=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(m,h){var g,v=m.length;for(g=0;g<v;g++){var x=m[g];if(x===h)return g;if(x>h)return g-1}return g},l=function(m,h,g){return m<h?h:m>g?g:m},u=function(m){var h=1/0;m.sort(function(y,A){return y-A});for(var g=m.length,v=1;v<g;v++){var x=Math.abs(m[v]-m[v-1]);x<h&&(h=x)}return h};c.exports=function(m,h){var g=m.startingPositions,v=m.maxLength||1e3,x=m.tubeSize||1,y=m.absoluteTubeSize,A=m.gridFill||"+x+y+z",d={};A.indexOf("-x")!==-1&&(d.reversedX=!0),A.indexOf("-y")!==-1&&(d.reversedY=!0),A.indexOf("-z")!==-1&&(d.reversedZ=!0),d.filled=a.indexOf(A.replace(/-/g,"").replace(/\+/g,""));var S=m.getVelocity||function(ge){return function(ke,Ce,de){var ae=Ce.vectors,re=Ce.meshgrid,he=ke[0],Se=ke[1],xe=ke[2],Te=re[0].length,Ae=re[1].length,Pe=re[2].length,De=s(re[0],he),ve=s(re[1],Se),we=s(re[2],xe),Ee=De+1,Fe=ve+1,Le=we+1;if(De=l(De,0,Te-1),Ee=l(Ee,0,Te-1),ve=l(ve,0,Ae-1),Fe=l(Fe,0,Ae-1),we=l(we,0,Pe-1),Le=l(Le,0,Pe-1),De<0||ve<0||we<0||Ee>Te-1||Fe>Ae-1||Le>Pe-1)return i.create();var je,Ge,Je,rt,ot,yt,_t=re[0][De],mt=re[0][Ee],tt=re[1][ve],Qe=re[1][Fe],Dt=re[2][we],zt=(he-_t)/(mt-_t),pt=(Se-tt)/(Qe-tt),vt=(xe-Dt)/(re[2][Le]-Dt);switch(isFinite(zt)||(zt=.5),isFinite(pt)||(pt=.5),isFinite(vt)||(vt=.5),de.reversedX&&(De=Te-1-De,Ee=Te-1-Ee),de.reversedY&&(ve=Ae-1-ve,Fe=Ae-1-Fe),de.reversedZ&&(we=Pe-1-we,Le=Pe-1-Le),de.filled){case 5:ot=we,yt=Le,Je=ve*Pe,rt=Fe*Pe,je=De*Pe*Ae,Ge=Ee*Pe*Ae;break;case 4:ot=we,yt=Le,je=De*Pe,Ge=Ee*Pe,Je=ve*Pe*Te,rt=Fe*Pe*Te;break;case 3:Je=ve,rt=Fe,ot=we*Ae,yt=Le*Ae,je=De*Ae*Pe,Ge=Ee*Ae*Pe;break;case 2:Je=ve,rt=Fe,je=De*Ae,Ge=Ee*Ae,ot=we*Ae*Te,yt=Le*Ae*Te;break;case 1:je=De,Ge=Ee,ot=we*Te,yt=Le*Te,Je=ve*Te*Pe,rt=Fe*Te*Pe;break;default:je=De,Ge=Ee,Je=ve*Te,rt=Fe*Te,ot=we*Te*Ae,yt=Le*Te*Ae}var We=ae[je+Je+ot],Ze=ae[je+Je+yt],Ne=ae[je+rt+ot],Xe=ae[je+rt+yt],st=ae[Ge+Je+ot],lt=ae[Ge+Je+yt],xt=ae[Ge+rt+ot],bt=ae[Ge+rt+yt],Ve=i.create(),Be=i.create(),at=i.create(),ht=i.create();i.lerp(Ve,We,st,zt),i.lerp(Be,Ze,lt,zt),i.lerp(at,Ne,xt,zt),i.lerp(ht,Xe,bt,zt);var dt=i.create(),it=i.create();i.lerp(dt,Ve,at,pt),i.lerp(it,Be,ht,pt);var kt=i.create();return i.lerp(kt,dt,it,vt),kt}(ge,m,d)},k=m.getDivergence||function(ge,ke){var Ce=i.create(),de=1e-4;i.add(Ce,ge,[de,0,0]);var ae=S(Ce);i.subtract(ae,ae,ke),i.scale(ae,ae,1/de),i.add(Ce,ge,[0,de,0]);var re=S(Ce);i.subtract(re,re,ke),i.scale(re,re,1/de),i.add(Ce,ge,[0,0,de]);var he=S(Ce);return i.subtract(he,he,ke),i.scale(he,he,1/de),i.add(Ce,ae,re),i.add(Ce,Ce,he),Ce},E=[],L=h[0][0],O=h[0][1],P=h[0][2],F=h[1][0],U=h[1][1],I=h[1][2],N=function(ge){var ke=ge[0],Ce=ge[1],de=ge[2];return!(ke<L||ke>F||Ce<O||Ce>U||de<P||de>I)},W=10*i.distance(h[0],h[1])/v,B=W*W,V=1,q=0,ne=g.length;ne>1&&(V=function(ge){for(var ke=[],Ce=[],de=[],ae={},re={},he={},Se=ge.length,xe=0;xe<Se;xe++){var Te=ge[xe],Ae=Te[0],Pe=Te[1],De=Te[2];ae[Ae]||(ke.push(Ae),ae[Ae]=!0),re[Pe]||(Ce.push(Pe),re[Pe]=!0),he[De]||(de.push(De),he[De]=!0)}var ve=u(ke),we=u(Ce),Ee=u(de),Fe=Math.min(ve,we,Ee);return isFinite(Fe)?Fe:1}(g));for(var $=0;$<ne;$++){var K=i.create();i.copy(K,g[$]);var ee=[K],J=[],Z=S(K),te=K;J.push(Z);var oe=[],se=k(K,Z),ce=i.length(se);isFinite(ce)&&ce>q&&(q=ce),oe.push(ce),E.push({points:ee,velocities:J,divergences:oe});for(var ye=0;ye<100*v&&ee.length<v&&N(K);){ye++;var me=i.clone(Z),fe=i.squaredLength(me);if(fe===0)break;fe>B&&i.scale(me,me,W/Math.sqrt(fe)),i.add(me,me,K),Z=S(me),i.squaredDistance(te,me)-B>-1e-4*B&&(ee.push(me),te=me,J.push(Z),se=k(me,Z),ce=i.length(se),isFinite(ce)&&ce>q&&(q=ce),oe.push(ce)),K=me}}var pe=function(ge,ke,Ce,de){for(var ae=0,re=0;re<ge.length;re++)for(var he=ge[re].velocities,Se=0;Se<he.length;Se++)ae=Math.max(ae,i.length(he[Se]));var xe=ge.map(function(je){return function(Ge,Je,rt,ot){for(var yt=Ge.points,_t=Ge.velocities,mt=Ge.divergences,tt=[],Qe=[],Dt=[],zt=[],pt=[],vt=[],We=0,Ze=0,Ne=n.create(),Xe=n.create(),st=0;st<yt.length;st++){var lt=yt[st],xt=_t[st],bt=mt[st];Je===0&&(bt=.05*rt),Ze=i.length(xt)/ot,Ne=n.create(),i.copy(Ne,xt),Ne[3]=bt;for(var Ve=0;Ve<8;Ve++)pt[Ve]=[lt[0],lt[1],lt[2],Ve];if(zt.length>0)for(Ve=0;Ve<8;Ve++){var Be=(Ve+1)%8;tt.push(zt[Ve],pt[Ve],pt[Be],pt[Be],zt[Be],zt[Ve]),Dt.push(Xe,Ne,Ne,Ne,Xe,Xe),vt.push(We,Ze,Ze,Ze,We,We);var at=tt.length;Qe.push([at-6,at-5,at-4],[at-3,at-2,at-1])}var ht=zt;zt=pt,pt=ht;var dt=Xe;Xe=Ne,Ne=dt;var it=We;We=Ze,Ze=it}return{positions:tt,cells:Qe,vectors:Dt,vertexIntensity:vt}}(je,Ce,de,ae)}),Te=[],Ae=[],Pe=[],De=[];for(re=0;re<xe.length;re++){var ve=xe[re],we=Te.length;for(Te=Te.concat(ve.positions),Pe=Pe.concat(ve.vectors),De=De.concat(ve.vertexIntensity),Se=0;Se<ve.cells.length;Se++){var Ee=ve.cells[Se],Fe=[];Ae.push(Fe);for(var Le=0;Le<Ee.length;Le++)Fe.push(Ee[Le]+we)}}return{positions:Te,cells:Ae,vectors:Pe,vertexIntensity:De,colormap:ke}}(E,m.colormap,q,V);return y?pe.tubeScale=y:(q===0&&(q=1),pe.tubeScale=.5*x*V/q),pe};var p=t(6740),f=t(6405).createMesh;c.exports.createTubeMesh=function(m,h){return f(m,h,{shaders:p,traceType:"streamtube"})}},990:function(c,o,t){var i=t(9405),n=t(3236),a=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),s=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);o.createShader=function(p){var f=i(p,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},o.createPickShader=function(p){var f=i(p,a,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f.attributes.normal.location=2,f},o.createContourShader=function(p){var f=i(p,l,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f},o.createPickContourShader=function(p){var f=i(p,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return f.attributes.uv.location=0,f.attributes.f.location=1,f}},9499:function(c,o,t){"use strict";c.exports=function(se){var ce=se.gl,ye=d(ce),me=k(ce),fe=S(ce),pe=E(ce),ge=n(ce),ke=a(ce,[{buffer:ge,size:4,stride:L,offset:0},{buffer:ge,size:3,stride:L,offset:16},{buffer:ge,size:3,stride:L,offset:28}]),Ce=n(ce),de=a(ce,[{buffer:Ce,size:4,stride:20,offset:0},{buffer:Ce,size:1,stride:20,offset:16}]),ae=n(ce),re=a(ce,[{buffer:ae,size:2,type:ce.FLOAT}]),he=s(ce,1,I,ce.RGBA,ce.UNSIGNED_BYTE);he.minFilter=ce.LINEAR,he.magFilter=ce.LINEAR;var Se=new N(ce,[0,0],[[0,0,0],[0,0,0]],ye,me,ge,ke,he,fe,pe,Ce,de,ae,re,[0,0,0]),xe={levels:[[],[],[]]};for(var Te in se)xe[Te]=se[Te];return xe.colormap=xe.colormap||"jet",Se.update(xe),Se};var i=t(8828),n=t(2762),a=t(8116),s=t(7766),l=t(1888),u=t(6729),p=t(5298),f=t(9994),m=t(9618),h=t(3711),g=t(6760),v=t(7608),x=t(2478),y=t(6199),A=t(990),d=A.createShader,S=A.createContourShader,k=A.createPickShader,E=A.createPickContourShader,L=40,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],F=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function U(se,ce,ye,me,fe){this.position=se,this.index=ce,this.uv=ye,this.level=me,this.dataCoordinate=fe}(function(){for(var se=0;se<3;++se){var ce=F[se],ye=(se+2)%3;ce[(se+1)%3+0]=1,ce[ye+3]=1,ce[se+6]=1}})();var I=256;function N(se,ce,ye,me,fe,pe,ge,ke,Ce,de,ae,re,he,Se,xe){this.gl=se,this.shape=ce,this.bounds=ye,this.objectOffset=xe,this.intensityBounds=[],this._shader=me,this._pickShader=fe,this._coordinateBuffer=pe,this._vao=ge,this._colorMap=ke,this._contourShader=Ce,this._contourPickShader=de,this._contourBuffer=ae,this._contourVAO=re,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new U([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=he,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[m(l.mallocFloat(1024),[0,0]),m(l.mallocFloat(1024),[0,0]),m(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(se,ce){var ye=!1,me=f([u({colormap:se,nshades:I,format:"rgba"}).map(function(fe,pe){var ge=ce?function(ke,Ce){if(!Ce||!Ce.length)return 1;for(var de=0;de<Ce.length;++de){if(Ce.length<2)return 1;if(Ce[de][0]===ke)return Ce[de][1];if(Ce[de][0]>ke&&de>0){var ae=(Ce[de][0]-ke)/(Ce[de][0]-Ce[de-1][0]);return Ce[de][1]*(1-ae)+ae*Ce[de-1][1]}}return 1}(pe/255,ce):fe[3];return ge<1&&(ye=!0),[fe[0],fe[1],fe[2],255*ge]})]);return p.divseq(me,255),this.hasAlphaScale=ye,me},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(se){this.pickId=se};var B=[0,0,0],V={showSurface:!1,showContour:!1,projections:[O.slice(),O.slice(),O.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function q(se,ce){var ye,me,fe,pe=ce.axes&&ce.axes.lastCubeProps.axis||B,ge=ce.showSurface,ke=ce.showContour;for(ye=0;ye<3;++ye)for(ge=ge||ce.surfaceProject[ye],me=0;me<3;++me)ke=ke||ce.contourProject[ye][me];for(ye=0;ye<3;++ye){var Ce=V.projections[ye];for(me=0;me<16;++me)Ce[me]=0;for(me=0;me<4;++me)Ce[5*me]=1;Ce[5*ye]=0,Ce[12+ye]=ce.axesBounds[+(pe[ye]>0)][ye],g(Ce,se.model,Ce);var de=V.clipBounds[ye];for(fe=0;fe<2;++fe)for(me=0;me<3;++me)de[fe][me]=se.clipBounds[fe][me];de[0][ye]=-1e8,de[1][ye]=1e8}return V.showSurface=ge,V.showContour=ke,V}var ne={model:O,view:O,projection:O,inverseModel:O.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},$=O.slice(),K=[1,0,0,0,1,0,0,0,1];function ee(se,ce){se=se||{};var ye=this.gl;ye.disable(ye.CULL_FACE),this._colorMap.bind(0);var me=ne;me.model=se.model||O,me.view=se.view||O,me.projection=se.projection||O,me.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],me.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],me.objectOffset=this.objectOffset,me.contourColor=this.contourColor[0],me.inverseModel=v(me.inverseModel,me.model);for(var fe=0;fe<2;++fe)for(var pe=me.clipBounds[fe],ge=0;ge<3;++ge)pe[ge]=Math.min(Math.max(this.clipBounds[fe][ge],-1e8),1e8);me.kambient=this.ambientLight,me.kdiffuse=this.diffuseLight,me.kspecular=this.specularLight,me.roughness=this.roughness,me.fresnel=this.fresnel,me.opacity=this.opacity,me.height=0,me.permutation=K,me.vertexColor=this.vertexColor;var ke=$;for(g(ke,me.view,me.model),g(ke,me.projection,ke),v(ke,ke),fe=0;fe<3;++fe)me.eyePosition[fe]=ke[12+fe]/ke[15];var Ce=ke[15];for(fe=0;fe<3;++fe)Ce+=this.lightPosition[fe]*ke[4*fe+3];for(fe=0;fe<3;++fe){var de=ke[12+fe];for(ge=0;ge<3;++ge)de+=ke[4*ge+fe]*this.lightPosition[ge];me.lightPosition[fe]=de/Ce}var ae=q(me,this);if(ae.showSurface){for(this._shader.bind(),this._shader.uniforms=me,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ye.TRIANGLES,this._vertexCount),fe=0;fe<3;++fe)this.surfaceProject[fe]&&this.vertexCount&&(this._shader.uniforms.model=ae.projections[fe],this._shader.uniforms.clipBounds=ae.clipBounds[fe],this._vao.draw(ye.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ae.showContour){var re=this._contourShader;me.kambient=1,me.kdiffuse=0,me.kspecular=0,me.opacity=1,re.bind(),re.uniforms=me;var he=this._contourVAO;for(he.bind(),fe=0;fe<3;++fe)for(re.uniforms.permutation=F[fe],ye.lineWidth(this.contourWidth[fe]*this.pixelRatio),ge=0;ge<this.contourLevels[fe].length;++ge)ge===this.highlightLevel[fe]?(re.uniforms.contourColor=this.highlightColor[fe],re.uniforms.contourTint=this.highlightTint[fe]):ge!==0&&ge-1!==this.highlightLevel[fe]||(re.uniforms.contourColor=this.contourColor[fe],re.uniforms.contourTint=this.contourTint[fe]),this._contourCounts[fe][ge]&&(re.uniforms.height=this.contourLevels[fe][ge],he.draw(ye.LINES,this._contourCounts[fe][ge],this._contourOffsets[fe][ge]));for(fe=0;fe<3;++fe)for(re.uniforms.model=ae.projections[fe],re.uniforms.clipBounds=ae.clipBounds[fe],ge=0;ge<3;++ge)if(this.contourProject[fe][ge]){re.uniforms.permutation=F[ge],ye.lineWidth(this.contourWidth[ge]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[ge].length;++Se)Se===this.highlightLevel[ge]?(re.uniforms.contourColor=this.highlightColor[ge],re.uniforms.contourTint=this.highlightTint[ge]):Se!==0&&Se-1!==this.highlightLevel[ge]||(re.uniforms.contourColor=this.contourColor[ge],re.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][Se]&&(re.uniforms.height=this.contourLevels[ge][Se],he.draw(ye.LINES,this._contourCounts[ge][Se],this._contourOffsets[ge][Se]))}for(he.unbind(),(he=this._dynamicVAO).bind(),fe=0;fe<3;++fe)if(this._dynamicCounts[fe]!==0)for(re.uniforms.model=me.model,re.uniforms.clipBounds=me.clipBounds,re.uniforms.permutation=F[fe],ye.lineWidth(this.dynamicWidth[fe]*this.pixelRatio),re.uniforms.contourColor=this.dynamicColor[fe],re.uniforms.contourTint=this.dynamicTint[fe],re.uniforms.height=this.dynamicLevel[fe],he.draw(ye.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]),ge=0;ge<3;++ge)this.contourProject[ge][fe]&&(re.uniforms.model=ae.projections[ge],re.uniforms.clipBounds=ae.clipBounds[ge],he.draw(ye.LINES,this._dynamicCounts[fe],this._dynamicOffsets[fe]));he.unbind()}}W.draw=function(se){return ee.call(this,se,!1)},W.drawTransparent=function(se){return ee.call(this,se,!0)};var J={model:O,view:O,projection:O,inverseModel:O,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Z(se,ce){return Array.isArray(se)?[ce(se[0]),ce(se[1]),ce(se[2])]:[ce(se),ce(se),ce(se)]}function te(se){return Array.isArray(se)?se.length===3?[se[0],se[1],se[2],1]:[se[0],se[1],se[2],se[3]]:[0,0,0,1]}function oe(se){if(Array.isArray(se)){if(Array.isArray(se))return[te(se[0]),te(se[1]),te(se[2])];var ce=te(se);return[ce.slice(),ce.slice(),ce.slice()]}}W.drawPick=function(se){se=se||{};var ce=this.gl;ce.disable(ce.CULL_FACE);var ye=J;ye.model=se.model||O,ye.view=se.view||O,ye.projection=se.projection||O,ye.shape=this._field[2].shape,ye.pickId=this.pickId/255,ye.lowerBound=this.bounds[0],ye.upperBound=this.bounds[1],ye.objectOffset=this.objectOffset,ye.permutation=K;for(var me=0;me<2;++me)for(var fe=ye.clipBounds[me],pe=0;pe<3;++pe)fe[pe]=Math.min(Math.max(this.clipBounds[me][pe],-1e8),1e8);var ge=q(ye,this);if(ge.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ye,this._vao.bind(),this._vao.draw(ce.TRIANGLES,this._vertexCount),me=0;me<3;++me)this.surfaceProject[me]&&(this._pickShader.uniforms.model=ge.projections[me],this._pickShader.uniforms.clipBounds=ge.clipBounds[me],this._vao.draw(ce.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var ke=this._contourPickShader;ke.bind(),ke.uniforms=ye;var Ce=this._contourVAO;for(Ce.bind(),pe=0;pe<3;++pe)for(ce.lineWidth(this.contourWidth[pe]*this.pixelRatio),ke.uniforms.permutation=F[pe],me=0;me<this.contourLevels[pe].length;++me)this._contourCounts[pe][me]&&(ke.uniforms.height=this.contourLevels[pe][me],Ce.draw(ce.LINES,this._contourCounts[pe][me],this._contourOffsets[pe][me]));for(me=0;me<3;++me)for(ke.uniforms.model=ge.projections[me],ke.uniforms.clipBounds=ge.clipBounds[me],pe=0;pe<3;++pe)if(this.contourProject[me][pe]){ke.uniforms.permutation=F[pe],ce.lineWidth(this.contourWidth[pe]*this.pixelRatio);for(var de=0;de<this.contourLevels[pe].length;++de)this._contourCounts[pe][de]&&(ke.uniforms.height=this.contourLevels[pe][de],Ce.draw(ce.LINES,this._contourCounts[pe][de],this._contourOffsets[pe][de]))}Ce.unbind()}},W.pick=function(se){if(!se||se.id!==this.pickId)return null;var ce=this._field[2].shape,ye=this._pickResult,me=ce[0]*(se.value[0]+(se.value[2]>>4)/16)/255,fe=Math.floor(me),pe=me-fe,ge=ce[1]*(se.value[1]+(15&se.value[2])/16)/255,ke=Math.floor(ge),Ce=ge-ke;fe+=1,ke+=1;var de=ye.position;de[0]=de[1]=de[2]=0;for(var ae=0;ae<2;++ae)for(var re=ae?pe:1-pe,he=0;he<2;++he)for(var Se=fe+ae,xe=ke+he,Te=re*(he?Ce:1-Ce),Ae=0;Ae<3;++Ae)de[Ae]+=this._field[Ae].get(Se,xe)*Te;for(var Pe=this._pickResult.level,De=0;De<3;++De)if(Pe[De]=x.le(this.contourLevels[De],de[De]),Pe[De]<0)this.contourLevels[De].length>0&&(Pe[De]=0);else if(Pe[De]<this.contourLevels[De].length-1){var ve=this.contourLevels[De][Pe[De]],we=this.contourLevels[De][Pe[De]+1];Math.abs(ve-de[De])>Math.abs(we-de[De])&&(Pe[De]+=1)}for(ye.index[0]=pe<.5?fe:fe+1,ye.index[1]=Ce<.5?ke:ke+1,ye.uv[0]=me/ce[0],ye.uv[1]=ge/ce[1],Ae=0;Ae<3;++Ae)ye.dataCoordinate[Ae]=this._field[Ae].get(ye.index[0],ye.index[1]);return ye},W.padField=function(se,ce){var ye=ce.shape.slice(),me=se.shape.slice();p.assign(se.lo(1,1).hi(ye[0],ye[1]),ce),p.assign(se.lo(1).hi(ye[0],1),ce.hi(ye[0],1)),p.assign(se.lo(1,me[1]-1).hi(ye[0],1),ce.lo(0,ye[1]-1).hi(ye[0],1)),p.assign(se.lo(0,1).hi(1,ye[1]),ce.hi(1)),p.assign(se.lo(me[0]-1,1).hi(1,ye[1]),ce.lo(ye[0]-1)),se.set(0,0,ce.get(0,0)),se.set(0,me[1]-1,ce.get(0,ye[1]-1)),se.set(me[0]-1,0,ce.get(ye[0]-1,0)),se.set(me[0]-1,me[1]-1,ce.get(ye[0]-1,ye[1]-1))},W.update=function(se){se=se||{},this.objectOffset=se.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in se&&(this.contourWidth=Z(se.contourWidth,Number)),"showContour"in se&&(this.showContour=Z(se.showContour,Boolean)),"showSurface"in se&&(this.showSurface=!!se.showSurface),"contourTint"in se&&(this.contourTint=Z(se.contourTint,Boolean)),"contourColor"in se&&(this.contourColor=oe(se.contourColor)),"contourProject"in se&&(this.contourProject=Z(se.contourProject,function(fn){return Z(fn,Boolean)})),"surfaceProject"in se&&(this.surfaceProject=se.surfaceProject),"dynamicColor"in se&&(this.dynamicColor=oe(se.dynamicColor)),"dynamicTint"in se&&(this.dynamicTint=Z(se.dynamicTint,Number)),"dynamicWidth"in se&&(this.dynamicWidth=Z(se.dynamicWidth,Number)),"opacity"in se&&(this.opacity=se.opacity),"opacityscale"in se&&(this.opacityscale=se.opacityscale),"colorBounds"in se&&(this.colorBounds=se.colorBounds),"vertexColor"in se&&(this.vertexColor=se.vertexColor?1:0),"colormap"in se&&this._colorMap.setPixels(this.genColormap(se.colormap,this.opacityscale));var ce=se.field||se.coords&&se.coords[2]||null,ye=!1;if(ce||(ce=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in se||"coords"in se){var me=(ce.shape[0]+2)*(ce.shape[1]+2);me>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(me))),this._field[2]=m(this._field[2].data,[ce.shape[0]+2,ce.shape[1]+2]),this.padField(this._field[2],ce),this.shape=ce.shape.slice();for(var fe=this.shape,pe=0;pe<2;++pe)this._field[2].size>this._field[pe].data.length&&(l.freeFloat(this._field[pe].data),this._field[pe].data=l.mallocFloat(this._field[2].size)),this._field[pe]=m(this._field[pe].data,[fe[0]+2,fe[1]+2]);if(se.coords){var ge=se.coords;if(!Array.isArray(ge)||ge.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(pe=0;pe<2;++pe){var ke=ge[pe];for(he=0;he<2;++he)if(ke.shape[he]!==fe[he])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[pe],ke)}}else if(se.ticks){var Ce=se.ticks;if(!Array.isArray(Ce)||Ce.length!==2)throw new Error("gl-surface: invalid ticks");for(pe=0;pe<2;++pe){var de=Ce[pe];if((Array.isArray(de)||de.length)&&(de=m(de)),de.shape[0]!==fe[pe])throw new Error("gl-surface: invalid tick length");var ae=m(de.data,fe);ae.stride[pe]=de.stride[0],ae.stride[1^pe]=0,this.padField(this._field[pe],ae)}}else{for(pe=0;pe<2;++pe){var re=[0,0];re[pe]=1,this._field[pe]=m(this._field[pe].data,[fe[0]+2,fe[1]+2],re,0)}this._field[0].set(0,0,0);for(var he=0;he<fe[0];++he)this._field[0].set(he+1,0,he);for(this._field[0].set(fe[0]+1,0,fe[0]-1),this._field[1].set(0,0,0),he=0;he<fe[1];++he)this._field[1].set(0,he+1,he);this._field[1].set(0,fe[1]+1,fe[1]-1)}var Se=this._field,xe=m(l.mallocFloat(3*Se[2].size*2),[3,fe[0]+2,fe[1]+2,2]);for(pe=0;pe<3;++pe)y(xe.pick(pe),Se[pe],"mirror");var Te=m(l.mallocFloat(3*Se[2].size),[fe[0]+2,fe[1]+2,3]);for(pe=0;pe<fe[0]+2;++pe)for(he=0;he<fe[1]+2;++he){var Ae=xe.get(0,pe,he,0),Pe=xe.get(0,pe,he,1),De=xe.get(1,pe,he,0),ve=xe.get(1,pe,he,1),we=xe.get(2,pe,he,0),Ee=xe.get(2,pe,he,1),Fe=De*Ee-ve*we,Le=we*Pe-Ee*Ae,je=Ae*ve-Pe*De,Ge=Math.sqrt(Fe*Fe+Le*Le+je*je);Ge<1e-8?(Ge=Math.max(Math.abs(Fe),Math.abs(Le),Math.abs(je)))<1e-8?(je=1,Le=Fe=0,Ge=1):Ge=1/Ge:Ge=1/Math.sqrt(Ge),Te.set(pe,he,0,Fe*Ge),Te.set(pe,he,1,Le*Ge),Te.set(pe,he,2,je*Ge)}l.free(xe.data);var Je=[1/0,1/0,1/0],rt=[-1/0,-1/0,-1/0],ot=1/0,yt=-1/0,_t=(fe[0]-1)*(fe[1]-1)*6,mt=l.mallocFloat(i.nextPow2(10*_t)),tt=0,Qe=0;for(pe=0;pe<fe[0]-1;++pe)e:for(he=0;he<fe[1]-1;++he){for(var Dt=0;Dt<2;++Dt)for(var zt=0;zt<2;++zt)for(var pt=0;pt<3;++pt){var vt=this._field[pt].get(1+pe+Dt,1+he+zt);if(isNaN(vt)||!isFinite(vt))continue e}for(pt=0;pt<6;++pt){var We=pe+P[pt][0],Ze=he+P[pt][1],Ne=this._field[0].get(We+1,Ze+1),Xe=this._field[1].get(We+1,Ze+1);vt=this._field[2].get(We+1,Ze+1),Fe=Te.get(We+1,Ze+1,0),Le=Te.get(We+1,Ze+1,1),je=Te.get(We+1,Ze+1,2),se.intensity&&(st=se.intensity.get(We,Ze));var st=se.intensity?se.intensity.get(We,Ze):vt+this.objectOffset[2];mt[tt++]=We,mt[tt++]=Ze,mt[tt++]=Ne,mt[tt++]=Xe,mt[tt++]=vt,mt[tt++]=0,mt[tt++]=st,mt[tt++]=Fe,mt[tt++]=Le,mt[tt++]=je,Je[0]=Math.min(Je[0],Ne+this.objectOffset[0]),Je[1]=Math.min(Je[1],Xe+this.objectOffset[1]),Je[2]=Math.min(Je[2],vt+this.objectOffset[2]),ot=Math.min(ot,st),rt[0]=Math.max(rt[0],Ne+this.objectOffset[0]),rt[1]=Math.max(rt[1],Xe+this.objectOffset[1]),rt[2]=Math.max(rt[2],vt+this.objectOffset[2]),yt=Math.max(yt,st),Qe+=1}}for(se.intensityBounds&&(ot=+se.intensityBounds[0],yt=+se.intensityBounds[1]),pe=6;pe<tt;pe+=10)mt[pe]=(mt[pe]-ot)/(yt-ot);this._vertexCount=Qe,this._coordinateBuffer.update(mt.subarray(0,tt)),l.freeFloat(mt),l.free(Te.data),this.bounds=[Je,rt],this.intensity=se.intensity||this._field[2],this.intensityBounds[0]===ot&&this.intensityBounds[1]===yt||(ye=!0),this.intensityBounds=[ot,yt]}if("levels"in se){var lt=se.levels;for(lt=Array.isArray(lt[0])?lt.slice():[[],[],lt],pe=0;pe<3;++pe)lt[pe]=lt[pe].slice(),lt[pe].sort(function(fn,en){return fn-en});for(pe=0;pe<3;++pe)for(he=0;he<lt[pe].length;++he)lt[pe][he]-=this.objectOffset[pe];e:for(pe=0;pe<3;++pe){if(lt[pe].length!==this.contourLevels[pe].length){ye=!0;break}for(he=0;he<lt[pe].length;++he)if(lt[pe][he]!==this.contourLevels[pe][he]){ye=!0;break e}}this.contourLevels=lt}if(ye){Se=this._field,fe=this.shape;for(var xt=[],bt=0;bt<3;++bt){var Ve=this.contourLevels[bt],Be=[],at=[],ht=[0,0,0];for(pe=0;pe<Ve.length;++pe){var dt=h(this._field[bt],Ve[pe]);Be.push(xt.length/5|0),Qe=0;e:for(he=0;he<dt.cells.length;++he){var it=dt.cells[he];for(pt=0;pt<2;++pt){var kt=dt.positions[it[pt]],Tt=kt[0],St=0|Math.floor(Tt),wt=Tt-St,At=kt[1],Ft=0|Math.floor(At),jt=At-Ft,rn=!1;t:for(var nn=0;nn<3;++nn){ht[nn]=0;var on=(bt+nn+1)%3;for(Dt=0;Dt<2;++Dt){var Ht=Dt?wt:1-wt;for(We=0|Math.min(Math.max(St+Dt,0),fe[0]),zt=0;zt<2;++zt){var $t=zt?jt:1-jt;if(Ze=0|Math.min(Math.max(Ft+zt,0),fe[1]),vt=nn<2?this._field[on].get(We,Ze):(this.intensity.get(We,Ze)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(vt)||isNaN(vt)){rn=!0;break t}var bn=Ht*$t;ht[nn]+=bn*vt}}}if(rn){if(pt>0){for(var ln=0;ln<5;++ln)xt.pop();Qe-=1}continue e}xt.push(ht[0],ht[1],kt[0],kt[1],ht[2]),Qe+=1}}at.push(Qe)}this._contourOffsets[bt]=Be,this._contourCounts[bt]=at}var Kt=l.mallocFloat(xt.length);for(pe=0;pe<xt.length;++pe)Kt[pe]=xt[pe];this._contourBuffer.update(Kt),l.freeFloat(Kt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var se=0;se<3;++se)l.freeFloat(this._field[se].data)},W.highlight=function(se){var ce,ye;if(!se)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ce=0;ce<3;++ce)this.enableHighlight[ce]?this.highlightLevel[ce]=se.level[ce]:this.highlightLevel[ce]=-1;for(ye=this.snapToData?se.dataCoordinate:se.position,ce=0;ce<3;++ce)ye[ce]-=this.objectOffset[ce];if(this.enableDynamic[0]&&ye[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ye[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ye[2]!==this.dynamicLevel[2]){for(var me=0,fe=this.shape,pe=l.mallocFloat(12*fe[0]*fe[1]),ge=0;ge<3;++ge)if(this.enableDynamic[ge]){this.dynamicLevel[ge]=ye[ge];var ke=(ge+1)%3,Ce=(ge+2)%3,de=this._field[ge],ae=this._field[ke],re=this._field[Ce],he=h(de,ye[ge]),Se=he.cells,xe=he.positions;for(this._dynamicOffsets[ge]=me,ce=0;ce<Se.length;++ce)for(var Te=Se[ce],Ae=0;Ae<2;++Ae){var Pe=xe[Te[Ae]],De=+Pe[0],ve=0|De,we=0|Math.min(ve+1,fe[0]),Ee=De-ve,Fe=1-Ee,Le=+Pe[1],je=0|Le,Ge=0|Math.min(je+1,fe[1]),Je=Le-je,rt=1-Je,ot=Fe*rt,yt=Fe*Je,_t=Ee*rt,mt=Ee*Je,tt=ot*ae.get(ve,je)+yt*ae.get(ve,Ge)+_t*ae.get(we,je)+mt*ae.get(we,Ge),Qe=ot*re.get(ve,je)+yt*re.get(ve,Ge)+_t*re.get(we,je)+mt*re.get(we,Ge);if(isNaN(tt)||isNaN(Qe)){Ae&&(me-=1);break}pe[2*me+0]=tt,pe[2*me+1]=Qe,me+=1}this._dynamicCounts[ge]=me-this._dynamicOffsets[ge]}else this.dynamicLevel[ge]=NaN,this._dynamicCounts[ge]=0;this._dynamicBuffer.update(pe.subarray(0,2*me)),l.freeFloat(pe)}}},7766:function(c,o,t){"use strict";var i=t(9618),n=t(5298),a=t(1888);c.exports=function(A){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||function(k){s=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],l=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],u=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]}(A),typeof arguments[1]=="number")return y(A,arguments[1],arguments[2],arguments[3]||A.RGBA,arguments[4]||A.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(A,0|arguments[1][0],0|arguments[1][1],arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var d=arguments[1],S=p(d)?d:d.raw;if(S)return function(k,E,L,O,P,F){var U=x(k);return k.texImage2D(k.TEXTURE_2D,0,P,P,F,E),new h(k,U,L,O,P,F)}(A,S,0|d.width,0|d.height,arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if(d.shape&&d.data&&d.stride)return function(k,E){var L=E.dtype,O=E.shape.slice(),P=k.getParameter(k.MAX_TEXTURE_SIZE);if(O[0]<0||O[0]>P||O[1]<0||O[1]>P)throw new Error("gl-texture2d: Invalid texture size");var F=v(O,E.stride.slice()),U=0;L==="float32"?U=k.FLOAT:L==="float64"?(U=k.FLOAT,F=!1,L="float32"):L==="uint8"?U=k.UNSIGNED_BYTE:(U=k.UNSIGNED_BYTE,F=!1,L="uint8");var I,N,W=0;if(O.length===2)W=k.LUMINANCE,O=[O[0],O[1],1],E=i(E.data,O,[E.stride[0],E.stride[1],1],E.offset);else{if(O.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(O[2]===1)W=k.ALPHA;else if(O[2]===2)W=k.LUMINANCE_ALPHA;else if(O[2]===3)W=k.RGB;else{if(O[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=k.RGBA}}U!==k.FLOAT||k.getExtension("OES_texture_float")||(U=k.UNSIGNED_BYTE,F=!1);var B=E.size;if(F)I=E.offset===0&&E.data.length===B?E.data:E.data.subarray(E.offset,E.offset+B);else{var V=[O[2],O[2]*O[0],1];N=a.malloc(B,L);var q=i(N,O,V,0);L!=="float32"&&L!=="float64"||U!==k.UNSIGNED_BYTE?n.assign(q,E):f(q,E),I=N.subarray(0,B)}var ne=x(k);return k.texImage2D(k.TEXTURE_2D,0,W,O[0],O[1],0,W,U,I),F||a.free(N),new h(k,ne,O[0],O[1],W,U)}(A,d)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,l=null,u=null;function p(A){return typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&A instanceof HTMLVideoElement||typeof ImageData<"u"&&A instanceof ImageData}var f=function(A,d){n.muls(A,d,255)};function m(A,d,S){var k=A.gl,E=k.getParameter(k.MAX_TEXTURE_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return A._shape=[d,S],A.bind(),k.texImage2D(k.TEXTURE_2D,0,A.format,d,S,0,A.format,A.type,null),A._mipLevels=[0],A}function h(A,d,S,k,E,L){this.gl=A,this.handle=d,this.format=E,this.type=L,this._shape=[S,k],this._mipLevels=[0],this._magFilter=A.NEAREST,this._minFilter=A.NEAREST,this._wrapS=A.CLAMP_TO_EDGE,this._wrapT=A.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,P=[this._wrapS,this._wrapT];Object.defineProperties(P,[{get:function(){return O._wrapS},set:function(U){return O.wrapS=U}},{get:function(){return O._wrapT},set:function(U){return O.wrapT=U}}]),this._wrapVector=P;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return O._shape[0]},set:function(U){return O.width=U}},{get:function(){return O._shape[1]},set:function(U){return O.height=U}}]),this._shapeVector=F}var g=h.prototype;function v(A,d){return A.length===3?d[2]===1&&d[1]===A[0]*A[2]&&d[0]===A[2]:d[0]===1&&d[1]===A[0]}function x(A){var d=A.createTexture();return A.bindTexture(A.TEXTURE_2D,d),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),d}function y(A,d,S,k,E){var L=A.getParameter(A.MAX_TEXTURE_SIZE);if(d<0||d>L||S<0||S>L)throw new Error("gl-texture2d: Invalid texture shape");if(E===A.FLOAT&&!A.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=x(A);return A.texImage2D(A.TEXTURE_2D,0,k,d,S,0,k,E,null),new h(A,O,d,S,k,E)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(A){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(A)>=0&&(d.getExtension("OES_texture_float_linear")||(A=d.NEAREST)),l.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,A),this._minFilter=A}},magFilter:{get:function(){return this._magFilter},set:function(A){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(A)>=0&&(d.getExtension("OES_texture_float_linear")||(A=d.NEAREST)),l.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,A),this._magFilter=A}},mipSamples:{get:function(){return this._anisoSamples},set:function(A){var d=this._anisoSamples;if(this._anisoSamples=0|Math.max(A,1),d!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(A){if(this.bind(),u.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,A),this._wrapS=A}},wrapT:{get:function(){return this._wrapT},set:function(A){if(this.bind(),u.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,A),this._wrapT=A}},wrap:{get:function(){return this._wrapVector},set:function(A){if(Array.isArray(A)||(A=[A,A]),A.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var d=0;d<2;++d)if(u.indexOf(A[d])<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);this._wrapS=A[0],this._wrapT=A[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),A}},shape:{get:function(){return this._shapeVector},set:function(A){if(Array.isArray(A)){if(A.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else A=[0|A,0|A];return m(this,0|A[0],0|A[1]),[0|A[0],0|A[1]]}},width:{get:function(){return this._shape[0]},set:function(A){return m(this,A|=0,this._shape[1]),A}},height:{get:function(){return this._shape[1]},set:function(A){return A|=0,m(this,this._shape[0],A),A}}}),g.bind=function(A){var d=this.gl;return A!==void 0&&d.activeTexture(d.TEXTURE0+(0|A)),d.bindTexture(d.TEXTURE_2D,this.handle),A!==void 0?0|A:d.getParameter(d.ACTIVE_TEXTURE)-d.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var A=Math.min(this._shape[0],this._shape[1]),d=0;A>0;++d,A>>>=1)this._mipLevels.indexOf(d)<0&&this._mipLevels.push(d)},g.setPixels=function(A,d,S,k){var E=this.gl;this.bind(),Array.isArray(d)?(k=S,S=0|d[1],d=0|d[0]):(d=d||0,S=S||0),k=k||0;var L=p(A)?A:A.raw;if(L)this._mipLevels.indexOf(k)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,L),this._mipLevels.push(k)):E.texSubImage2D(E.TEXTURE_2D,k,d,S,this.format,this.type,L);else{if(!(A.shape&&A.stride&&A.data))throw new Error("gl-texture2d: Unsupported data type");if(A.shape.length<2||d+A.shape[1]>this._shape[1]>>>k||S+A.shape[0]>this._shape[0]>>>k||d<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(O,P,F,U,I,N,W,B){var V=B.dtype,q=B.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ne=0,$=0,K=v(q,B.stride.slice());if(V==="float32"?ne=O.FLOAT:V==="float64"?(ne=O.FLOAT,K=!1,V="float32"):V==="uint8"?ne=O.UNSIGNED_BYTE:(ne=O.UNSIGNED_BYTE,K=!1,V="uint8"),q.length===2)$=O.LUMINANCE,q=[q[0],q[1],1],B=i(B.data,q,[B.stride[0],B.stride[1],1],B.offset);else{if(q.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(q[2]===1)$=O.ALPHA;else if(q[2]===2)$=O.LUMINANCE_ALPHA;else if(q[2]===3)$=O.RGB;else{if(q[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");$=O.RGBA}q[2]}if($!==O.LUMINANCE&&$!==O.ALPHA||I!==O.LUMINANCE&&I!==O.ALPHA||($=I),$!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var ee=B.size,J=W.indexOf(U)<0;if(J&&W.push(U),ne===N&&K)B.offset===0&&B.data.length===ee?J?O.texImage2D(O.TEXTURE_2D,U,I,q[0],q[1],0,I,N,B.data):O.texSubImage2D(O.TEXTURE_2D,U,P,F,q[0],q[1],I,N,B.data):J?O.texImage2D(O.TEXTURE_2D,U,I,q[0],q[1],0,I,N,B.data.subarray(B.offset,B.offset+ee)):O.texSubImage2D(O.TEXTURE_2D,U,P,F,q[0],q[1],I,N,B.data.subarray(B.offset,B.offset+ee));else{var Z;Z=N===O.FLOAT?a.mallocFloat32(ee):a.mallocUint8(ee);var te=i(Z,q,[q[2],q[2]*q[0],1]);ne===O.FLOAT&&N===O.UNSIGNED_BYTE?f(te,B):n.assign(te,B),J?O.texImage2D(O.TEXTURE_2D,U,I,q[0],q[1],0,I,N,Z.subarray(0,ee)):O.texSubImage2D(O.TEXTURE_2D,U,P,F,q[0],q[1],I,N,Z.subarray(0,ee)),N===O.FLOAT?a.freeFloat32(Z):a.freeUint8(Z)}})(E,d,S,k,this.format,this.type,this._mipLevels,A)}}},1433:function(c){"use strict";c.exports=function(o,t,i){t?t.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var n=0|o.getParameter(o.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var a=0;a<i.length;++a){var s=i[a];if(s.buffer){var l=s.buffer,u=s.size||4,p=s.type||o.FLOAT,f=!!s.normalized,m=s.stride||0,h=s.offset||0;l.bind(),o.enableVertexAttribArray(a),o.vertexAttribPointer(a,u,p,f,m,h)}else{if(typeof s=="number")o.vertexAttrib1f(a,s);else if(s.length===1)o.vertexAttrib1f(a,s[0]);else if(s.length===2)o.vertexAttrib2f(a,s[0],s[1]);else if(s.length===3)o.vertexAttrib3f(a,s[0],s[1],s[2]);else{if(s.length!==4)throw new Error("gl-vao: Invalid vertex attribute");o.vertexAttrib4f(a,s[0],s[1],s[2],s[3])}o.disableVertexAttribArray(a)}}for(;a<n;++a)o.disableVertexAttribArray(a)}else for(o.bindBuffer(o.ARRAY_BUFFER,null),a=0;a<n;++a)o.disableVertexAttribArray(a)}},870:function(c,o,t){"use strict";var i=t(1433);function n(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(a,s,l){this._elements=s,this._attributes=a,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(a,s,l){l=l||0;var u=this.gl;this._elements?u.drawElements(a,s,this._elementsType,l):u.drawArrays(a,l,s)},c.exports=function(a){return new n(a)}},7518:function(c,o,t){"use strict";var i=t(1433);function n(s,l,u,p,f,m){this.location=s,this.dimension=l,this.a=u,this.b=p,this.c=f,this.d=m}function a(s,l,u){this.gl=s,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=s.UNSIGNED_SHORT}n.prototype.bind=function(s){switch(this.dimension){case 1:s.vertexAttrib1f(this.location,this.a);break;case 2:s.vertexAttrib2f(this.location,this.a,this.b);break;case 3:s.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:s.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var s=0;s<this._attribs.length;++s)this._attribs[s].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(s,l,u){if(this.bind(),i(this.gl,l,s),this.unbind(),this._attribs.length=0,s)for(var p=0;p<s.length;++p){var f=s[p];typeof f=="number"?this._attribs.push(new n(p,1,f)):Array.isArray(f)&&this._attribs.push(new n(p,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(s,l,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(s,l,this._elementsType,u):p.drawArrays(s,u,l)},c.exports=function(s,l){return new a(s,l,l.createVertexArrayOES())}},8116:function(c,o,t){"use strict";var i=t(7518),n=t(870);function a(s){this.bindVertexArrayOES=s.bindVertexArray.bind(s),this.createVertexArrayOES=s.createVertexArray.bind(s),this.deleteVertexArrayOES=s.deleteVertexArray.bind(s)}c.exports=function(s,l,u,p){var f,m=s.createVertexArray?new a(s):s.getExtension("OES_vertex_array_object");return(f=m?i(s,m):n(s)).update(l,u,p),f}},5632:function(c){c.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o}},8192:function(c,o,t){c.exports=function(s,l){var u=i(s[0],s[1],s[2]),p=i(l[0],l[1],l[2]);n(u,u),n(p,p);var f=a(u,p);return f>1?0:Math.acos(f)};var i=t(2825),n=t(3536),a=t(244)},9226:function(c){c.exports=function(o,t){return o[0]=Math.ceil(t[0]),o[1]=Math.ceil(t[1]),o[2]=Math.ceil(t[2]),o}},3126:function(c){c.exports=function(o){var t=new Float32Array(3);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t}},3990:function(c){c.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o}},1091:function(c){c.exports=function(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},5911:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=i[0],u=i[1],p=i[2];return o[0]=a*p-s*u,o[1]=s*l-n*p,o[2]=n*u-a*l,o}},5455:function(c,o,t){c.exports=t(7056)},7056:function(c){c.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],a=t[2]-o[2];return Math.sqrt(i*i+n*n+a*a)}},4008:function(c,o,t){c.exports=t(6690)},6690:function(c){c.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o}},244:function(c){c.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]}},2613:function(c){c.exports=1e-6},9922:function(c,o,t){c.exports=function(n,a){var s=n[0],l=n[1],u=n[2],p=a[0],f=a[1],m=a[2];return Math.abs(s-p)<=i*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-f)<=i*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(u-m)<=i*Math.max(1,Math.abs(u),Math.abs(m))};var i=t(2613)},9265:function(c){c.exports=function(o,t){return o[0]===t[0]&&o[1]===t[1]&&o[2]===t[2]}},2681:function(c){c.exports=function(o,t){return o[0]=Math.floor(t[0]),o[1]=Math.floor(t[1]),o[2]=Math.floor(t[2]),o}},5137:function(c,o,t){c.exports=function(n,a,s,l,u,p){var f,m;for(a||(a=3),s||(s=0),m=l?Math.min(l*a+s,n.length):n.length,f=s;f<m;f+=a)i[0]=n[f],i[1]=n[f+1],i[2]=n[f+2],u(i,i,p),n[f]=i[0],n[f+1]=i[1],n[f+2]=i[2];return n};var i=t(1091)()},2825:function(c){c.exports=function(o,t,i){var n=new Float32Array(3);return n[0]=o,n[1]=t,n[2]=i,n}},2931:function(c,o,t){c.exports={EPSILON:t(2613),create:t(1091),clone:t(3126),angle:t(8192),fromValues:t(2825),copy:t(3990),set:t(1463),equals:t(9922),exactEquals:t(9265),add:t(5632),subtract:t(6843),sub:t(2229),multiply:t(5847),mul:t(4505),divide:t(6690),div:t(4008),min:t(8107),max:t(7417),floor:t(2681),ceil:t(9226),round:t(2447),scale:t(6621),scaleAndAdd:t(8489),distance:t(7056),dist:t(5455),squaredDistance:t(2953),sqrDist:t(6141),length:t(1387),len:t(868),squaredLength:t(3066),sqrLen:t(5486),negate:t(5093),inverse:t(811),normalize:t(3536),dot:t(244),cross:t(5911),lerp:t(6658),random:t(7636),transformMat4:t(5673),transformMat3:t(492),transformQuat:t(264),rotateX:t(6894),rotateY:t(109),rotateZ:t(8692),forEach:t(5137)}},811:function(c){c.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o}},868:function(c,o,t){c.exports=t(1387)},1387:function(c){c.exports=function(o){var t=o[0],i=o[1],n=o[2];return Math.sqrt(t*t+i*i+n*n)}},6658:function(c){c.exports=function(o,t,i,n){var a=t[0],s=t[1],l=t[2];return o[0]=a+n*(i[0]-a),o[1]=s+n*(i[1]-s),o[2]=l+n*(i[2]-l),o}},7417:function(c){c.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o}},8107:function(c){c.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o}},4505:function(c,o,t){c.exports=t(5847)},5847:function(c){c.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o}},5093:function(c){c.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o}},3536:function(c){c.exports=function(o,t){var i=t[0],n=t[1],a=t[2],s=i*i+n*n+a*a;return s>0&&(s=1/Math.sqrt(s),o[0]=t[0]*s,o[1]=t[1]*s,o[2]=t[2]*s),o}},7636:function(c){c.exports=function(o,t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,a=Math.sqrt(1-n*n)*t;return o[0]=Math.cos(i)*a,o[1]=Math.sin(i)*a,o[2]=n*t,o}},6894:function(c){c.exports=function(o,t,i,n){var a=i[1],s=i[2],l=t[1]-a,u=t[2]-s,p=Math.sin(n),f=Math.cos(n);return o[0]=t[0],o[1]=a+l*f-u*p,o[2]=s+l*p+u*f,o}},109:function(c){c.exports=function(o,t,i,n){var a=i[0],s=i[2],l=t[0]-a,u=t[2]-s,p=Math.sin(n),f=Math.cos(n);return o[0]=a+u*p+l*f,o[1]=t[1],o[2]=s+u*f-l*p,o}},8692:function(c){c.exports=function(o,t,i,n){var a=i[0],s=i[1],l=t[0]-a,u=t[1]-s,p=Math.sin(n),f=Math.cos(n);return o[0]=a+l*f-u*p,o[1]=s+l*p+u*f,o[2]=t[2],o}},2447:function(c){c.exports=function(o,t){return o[0]=Math.round(t[0]),o[1]=Math.round(t[1]),o[2]=Math.round(t[2]),o}},6621:function(c){c.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o}},8489:function(c){c.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o}},1463:function(c){c.exports=function(o,t,i,n){return o[0]=t,o[1]=i,o[2]=n,o}},6141:function(c,o,t){c.exports=t(2953)},5486:function(c,o,t){c.exports=t(3066)},2953:function(c){c.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],a=t[2]-o[2];return i*i+n*n+a*a}},3066:function(c){c.exports=function(o){var t=o[0],i=o[1],n=o[2];return t*t+i*i+n*n}},2229:function(c,o,t){c.exports=t(6843)},6843:function(c){c.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o}},492:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2];return o[0]=n*i[0]+a*i[3]+s*i[6],o[1]=n*i[1]+a*i[4]+s*i[7],o[2]=n*i[2]+a*i[5]+s*i[8],o}},5673:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=i[3]*n+i[7]*a+i[11]*s+i[15];return l=l||1,o[0]=(i[0]*n+i[4]*a+i[8]*s+i[12])/l,o[1]=(i[1]*n+i[5]*a+i[9]*s+i[13])/l,o[2]=(i[2]*n+i[6]*a+i[10]*s+i[14])/l,o}},264:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=i[0],u=i[1],p=i[2],f=i[3],m=f*n+u*s-p*a,h=f*a+p*n-l*s,g=f*s+l*a-u*n,v=-l*n-u*a-p*s;return o[0]=m*f+v*-l+h*-p-g*-u,o[1]=h*f+v*-u+g*-l-m*-p,o[2]=g*f+v*-p+m*-u-h*-l,o}},4361:function(c){c.exports=function(o,t,i){return o[0]=t[0]+i[0],o[1]=t[1]+i[1],o[2]=t[2]+i[2],o[3]=t[3]+i[3],o}},2335:function(c){c.exports=function(o){var t=new Float32Array(4);return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t}},2933:function(c){c.exports=function(o,t){return o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3],o}},7536:function(c){c.exports=function(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},4691:function(c){c.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],a=t[2]-o[2],s=t[3]-o[3];return Math.sqrt(i*i+n*n+a*a+s*s)}},1373:function(c){c.exports=function(o,t,i){return o[0]=t[0]/i[0],o[1]=t[1]/i[1],o[2]=t[2]/i[2],o[3]=t[3]/i[3],o}},3750:function(c){c.exports=function(o,t){return o[0]*t[0]+o[1]*t[1]+o[2]*t[2]+o[3]*t[3]}},3390:function(c){c.exports=function(o,t,i,n){var a=new Float32Array(4);return a[0]=o,a[1]=t,a[2]=i,a[3]=n,a}},9970:function(c,o,t){c.exports={create:t(7536),clone:t(2335),fromValues:t(3390),copy:t(2933),set:t(4578),add:t(4361),subtract:t(6860),multiply:t(3576),divide:t(1373),min:t(2334),max:t(160),scale:t(9288),scaleAndAdd:t(4844),distance:t(4691),squaredDistance:t(7960),length:t(6808),squaredLength:t(483),negate:t(1498),inverse:t(4494),normalize:t(5177),dot:t(3750),lerp:t(2573),random:t(9131),transformMat4:t(5352),transformQuat:t(4041)}},4494:function(c){c.exports=function(o,t){return o[0]=1/t[0],o[1]=1/t[1],o[2]=1/t[2],o[3]=1/t[3],o}},6808:function(c){c.exports=function(o){var t=o[0],i=o[1],n=o[2],a=o[3];return Math.sqrt(t*t+i*i+n*n+a*a)}},2573:function(c){c.exports=function(o,t,i,n){var a=t[0],s=t[1],l=t[2],u=t[3];return o[0]=a+n*(i[0]-a),o[1]=s+n*(i[1]-s),o[2]=l+n*(i[2]-l),o[3]=u+n*(i[3]-u),o}},160:function(c){c.exports=function(o,t,i){return o[0]=Math.max(t[0],i[0]),o[1]=Math.max(t[1],i[1]),o[2]=Math.max(t[2],i[2]),o[3]=Math.max(t[3],i[3]),o}},2334:function(c){c.exports=function(o,t,i){return o[0]=Math.min(t[0],i[0]),o[1]=Math.min(t[1],i[1]),o[2]=Math.min(t[2],i[2]),o[3]=Math.min(t[3],i[3]),o}},3576:function(c){c.exports=function(o,t,i){return o[0]=t[0]*i[0],o[1]=t[1]*i[1],o[2]=t[2]*i[2],o[3]=t[3]*i[3],o}},1498:function(c){c.exports=function(o,t){return o[0]=-t[0],o[1]=-t[1],o[2]=-t[2],o[3]=-t[3],o}},5177:function(c){c.exports=function(o,t){var i=t[0],n=t[1],a=t[2],s=t[3],l=i*i+n*n+a*a+s*s;return l>0&&(l=1/Math.sqrt(l),o[0]=i*l,o[1]=n*l,o[2]=a*l,o[3]=s*l),o}},9131:function(c,o,t){var i=t(5177),n=t(9288);c.exports=function(a,s){return s=s||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),i(a,a),n(a,a,s),a}},9288:function(c){c.exports=function(o,t,i){return o[0]=t[0]*i,o[1]=t[1]*i,o[2]=t[2]*i,o[3]=t[3]*i,o}},4844:function(c){c.exports=function(o,t,i,n){return o[0]=t[0]+i[0]*n,o[1]=t[1]+i[1]*n,o[2]=t[2]+i[2]*n,o[3]=t[3]+i[3]*n,o}},4578:function(c){c.exports=function(o,t,i,n,a){return o[0]=t,o[1]=i,o[2]=n,o[3]=a,o}},7960:function(c){c.exports=function(o,t){var i=t[0]-o[0],n=t[1]-o[1],a=t[2]-o[2],s=t[3]-o[3];return i*i+n*n+a*a+s*s}},483:function(c){c.exports=function(o){var t=o[0],i=o[1],n=o[2],a=o[3];return t*t+i*i+n*n+a*a}},6860:function(c){c.exports=function(o,t,i){return o[0]=t[0]-i[0],o[1]=t[1]-i[1],o[2]=t[2]-i[2],o[3]=t[3]-i[3],o}},5352:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=t[3];return o[0]=i[0]*n+i[4]*a+i[8]*s+i[12]*l,o[1]=i[1]*n+i[5]*a+i[9]*s+i[13]*l,o[2]=i[2]*n+i[6]*a+i[10]*s+i[14]*l,o[3]=i[3]*n+i[7]*a+i[11]*s+i[15]*l,o}},4041:function(c){c.exports=function(o,t,i){var n=t[0],a=t[1],s=t[2],l=i[0],u=i[1],p=i[2],f=i[3],m=f*n+u*s-p*a,h=f*a+p*n-l*s,g=f*s+l*a-u*n,v=-l*n-u*a-p*s;return o[0]=m*f+v*-l+h*-p-g*-u,o[1]=h*f+v*-u+g*-l-m*-p,o[2]=g*f+v*-p+m*-u-h*-l,o[3]=t[3],o}},1848:function(c,o,t){var i=t(4905),n=t(6468);c.exports=function(a){for(var s=Array.isArray(a)?a:i(a),l=0;l<s.length;l++){var u=s[l];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var f=p[1],m=p[2];return(f?n(m):m).trim()}}}}},5874:function(c,o,t){c.exports=function(O){var P,F,U,I=0,N=0,W=u,B=[],V=[],q=1,ne=0,$=0,K=!1,ee=!1,J="",Z=a,te=i;(O=O||{}).version==="300 es"&&(Z=l,te=s);var oe={},se={};for(I=0;I<Z.length;I++)oe[Z[I]]=!0;for(I=0;I<te.length;I++)se[te[I]]=!0;return function(he){return V=[],he!==null?function(Se){var xe;for(I=0,Se.toString&&(Se=Se.toString()),J+=Se.replace(/\r\n/g,`
`),U=J.length;P=J[I],I<U;){switch(xe=I,W){case f:I=pe();break;case m:case h:I=fe();break;case g:I=ge();break;case v:I=de();break;case E:I=Ce();break;case x:I=ae();break;case p:I=re();break;case S:I=me();break;case u:I=ye()}xe!==I&&(J[xe]===`
`?(ne=0,++q):++ne)}return N+=I,J=J.slice(I),V}(he):(B.length&&ce(B.join("")),W=k,ce("(eof)"),V)};function ce(he){he.length&&V.push({type:L[W],data:he,position:$,line:q,column:ne})}function ye(){return B=B.length?[]:B,F==="/"&&P==="*"?($=N+I-1,W=f,F=P,I+1):F==="/"&&P==="/"?($=N+I-1,W=m,F=P,I+1):P==="#"?(W=h,$=N+I,I):/\s/.test(P)?(W=S,$=N+I,I):(K=/\d/.test(P),ee=/[^\w_]/.test(P),$=N+I,W=K?v:ee?g:p,I)}function me(){return/[^\s]/g.test(P)?(ce(B.join("")),W=u,I):(B.push(P),F=P,I+1)}function fe(){return P!=="\r"&&P!==`
`||F==="\\"?(B.push(P),F=P,I+1):(ce(B.join("")),W=u,I)}function pe(){return P==="/"&&F==="*"?(B.push(P),ce(B.join("")),W=u,I+1):(B.push(P),F=P,I+1)}function ge(){if(F==="."&&/\d/.test(P))return W=x,I;if(F==="/"&&P==="*")return W=f,I;if(F==="/"&&P==="/")return W=m,I;if(P==="."&&B.length){for(;ke(B););return W=x,I}if(P===";"||P===")"||P==="("){if(B.length)for(;ke(B););return ce(P),W=u,I+1}var he=B.length===2&&P!=="=";if(/[\w_\d\s]/.test(P)||he){for(;ke(B););return W=u,I}return B.push(P),F=P,I+1}function ke(he){for(var Se,xe,Te=0;;){if(Se=n.indexOf(he.slice(0,he.length+Te).join("")),xe=n[Se],Se===-1){if(Te--+he.length>0)continue;xe=he.slice(0,1).join("")}return ce(xe),$+=xe.length,(B=B.slice(xe.length)).length}}function Ce(){return/[^a-fA-F0-9]/.test(P)?(ce(B.join("")),W=u,I):(B.push(P),F=P,I+1)}function de(){return P==="."||/[eE]/.test(P)?(B.push(P),W=x,F=P,I+1):P==="x"&&B.length===1&&B[0]==="0"?(W=E,B.push(P),F=P,I+1):/[^\d]/.test(P)?(ce(B.join("")),W=u,I):(B.push(P),F=P,I+1)}function ae(){return P==="f"&&(B.push(P),F=P,I+=1),/[eE]/.test(P)?(B.push(P),F=P,I+1):(P!=="-"&&P!=="+"||!/[eE]/.test(F))&&/[^\d]/.test(P)?(ce(B.join("")),W=u,I):(B.push(P),F=P,I+1)}function re(){if(/[^\d\w_]/.test(P)){var he=B.join("");return W=se[he]?d:oe[he]?A:y,ce(B.join("")),W=u,I}return B.push(P),F=P,I+1}};var i=t(620),n=t(7827),a=t(6852),s=t(7932),l=t(3508),u=999,p=9999,f=0,m=1,h=2,g=3,v=4,x=5,y=6,A=7,d=8,S=9,k=10,E=11,L=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(c,o,t){var i=t(6852);i=i.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),c.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(c){c.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(c,o,t){var i=t(620);c.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(c){c.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(c){c.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(c,o,t){var i=t(5874);c.exports=function(n,a){var s=i(a),l=[];return(l=l.concat(s(n))).concat(s(null))}},3236:function(c){c.exports=function(o){typeof o=="string"&&(o=[o]);for(var t=[].slice.call(arguments,1),i=[],n=0;n<o.length-1;n++)i.push(o[n],t[n]||"");return i.push(o[n]),i.join("")}},7520:function(c,o,t){"use strict";var i=t(9507);c.exports=i&&function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{n=!1}return n}()},3778:function(c,o){o.read=function(t,i,n,a,s){var l,u,p=8*s-a-1,f=(1<<p)-1,m=f>>1,h=-7,g=n?s-1:0,v=n?-1:1,x=t[i+g];for(g+=v,l=x&(1<<-h)-1,x>>=-h,h+=p;h>0;l=256*l+t[i+g],g+=v,h-=8);for(u=l&(1<<-h)-1,l>>=-h,h+=a;h>0;u=256*u+t[i+g],g+=v,h-=8);if(l===0)l=1-m;else{if(l===f)return u?NaN:1/0*(x?-1:1);u+=Math.pow(2,a),l-=m}return(x?-1:1)*u*Math.pow(2,l-a)},o.write=function(t,i,n,a,s,l){var u,p,f,m=8*l-s-1,h=(1<<m)-1,g=h>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=a?0:l-1,y=a?1:-1,A=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(p=isNaN(i)?1:0,u=h):(u=Math.floor(Math.log(i)/Math.LN2),i*(f=Math.pow(2,-u))<1&&(u--,f*=2),(i+=u+g>=1?v/f:v*Math.pow(2,1-g))*f>=2&&(u++,f/=2),u+g>=h?(p=0,u=h):u+g>=1?(p=(i*f-1)*Math.pow(2,s),u+=g):(p=i*Math.pow(2,g-1)*Math.pow(2,s),u=0));s>=8;t[n+x]=255&p,x+=y,p/=256,s-=8);for(u=u<<s|p,m+=s;m>0;t[n+x]=255&u,x+=y,u/=256,m-=8);t[n+x-y]|=128*A}},8954:function(c,o,t){"use strict";c.exports=function(m,h){var g=m.length;if(g===0)throw new Error("Must have at least d+1 points");var v=m[0].length;if(g<=v)throw new Error("Must input at least d+1 points");var x=m.slice(0,v+1),y=i.apply(void 0,x);if(y===0)throw new Error("Input not in general position");for(var A=new Array(v+1),d=0;d<=v;++d)A[d]=d;y<0&&(A[0]=1,A[1]=0);var S=new a(A,new Array(v+1),!1),k=S.adjacent,E=new Array(v+2);for(d=0;d<=v;++d){for(var L=A.slice(),O=0;O<=v;++O)O===d&&(L[O]=-1);var P=L[0];L[0]=L[1],L[1]=P;var F=new a(L,new Array(v+1),!0);k[d]=F,E[d]=F}for(E[v+1]=S,d=0;d<=v;++d){L=k[d].vertices;var U=k[d].adjacent;for(O=0;O<=v;++O){var I=L[O];if(I<0)U[O]=S;else for(var N=0;N<=v;++N)k[N].vertices.indexOf(I)<0&&(U[O]=k[N])}}var W=new p(v,x,E),B=!!h;for(d=v+1;d<g;++d)W.insert(m[d],B);return W.boundary()};var i=t(3250),n=t(6803).Fw;function a(m,h,g){this.vertices=m,this.adjacent=h,this.boundary=g,this.lastVisited=-1}function s(m,h,g){this.vertices=m,this.cell=h,this.index=g}function l(m,h){return n(m.vertices,h.vertices)}a.prototype.flip=function(){var m=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=m;var h=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=h};var u=[];function p(m,h,g){this.dimension=m,this.vertices=h,this.simplices=g,this.interior=g.filter(function(A){return!A.boundary}),this.tuple=new Array(m+1);for(var v=0;v<=m;++v)this.tuple[v]=this.vertices[v];var x,y=u[m];y||(y=u[m]=((x=i[m+1])||(x=i),function(A){return function(){var d=this.tuple;return A.apply(this,d)}}(x))),this.orient=y}var f=p.prototype;f.handleBoundaryDegeneracy=function(m,h){var g=this.dimension,v=this.vertices.length-1,x=this.tuple,y=this.vertices,A=[m];for(m.lastVisited=-v;A.length>0;)for(var d=(m=A.pop()).adjacent,S=0;S<=g;++S){var k=d[S];if(k.boundary&&!(k.lastVisited<=-v)){for(var E=k.vertices,L=0;L<=g;++L){var O=E[L];x[L]=O<0?h:y[O]}var P=this.orient();if(P>0)return k;k.lastVisited=-v,P===0&&A.push(k)}}return null},f.walk=function(m,h){var g=this.vertices.length-1,v=this.dimension,x=this.vertices,y=this.tuple,A=h?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[A];e:for(;!d.boundary;){for(var S=d.vertices,k=d.adjacent,E=0;E<=v;++E)y[E]=x[S[E]];for(d.lastVisited=g,E=0;E<=v;++E){var L=k[E];if(!(L.lastVisited>=g)){var O=y[E];y[E]=m;var P=this.orient();if(y[E]=O,P<0){d=L;continue e}L.boundary?L.lastVisited=-g:L.lastVisited=g}}return}return d},f.addPeaks=function(m,h){var g=this.vertices.length-1,v=this.dimension,x=this.vertices,y=this.tuple,A=this.interior,d=this.simplices,S=[h];h.lastVisited=g,h.vertices[h.vertices.indexOf(-1)]=g,h.boundary=!1,A.push(h);for(var k=[];S.length>0;){var E=(h=S.pop()).vertices,L=h.adjacent,O=E.indexOf(g);if(!(O<0)){for(var P=0;P<=v;++P)if(P!==O){var F=L[P];if(F.boundary&&!(F.lastVisited>=g)){var U=F.vertices;if(F.lastVisited!==-g){for(var I=0,N=0;N<=v;++N)U[N]<0?(I=N,y[N]=m):y[N]=x[U[N]];if(this.orient()>0){U[I]=g,F.boundary=!1,A.push(F),S.push(F),F.lastVisited=g;continue}F.lastVisited=-g}var W=F.adjacent,B=E.slice(),V=L.slice(),q=new a(B,V,!0);d.push(q);var ne=W.indexOf(h);if(!(ne<0))for(W[ne]=q,V[O]=F,B[P]=-1,V[P]=h,L[P]=q,q.flip(),N=0;N<=v;++N){var $=B[N];if(!($<0||$===g)){for(var K=new Array(v-1),ee=0,J=0;J<=v;++J){var Z=B[J];Z<0||J===N||(K[ee++]=Z)}k.push(new s(K,q,N))}}}}}}for(k.sort(l),P=0;P+1<k.length;P+=2){var te=k[P],oe=k[P+1],se=te.index,ce=oe.index;se<0||ce<0||(te.cell.adjacent[te.index]=oe.cell,oe.cell.adjacent[oe.index]=te.cell)}},f.insert=function(m,h){var g=this.vertices;g.push(m);var v=this.walk(m,h);if(v){for(var x=this.dimension,y=this.tuple,A=0;A<=x;++A){var d=v.vertices[A];y[A]=d<0?m:g[d]}var S=this.orient(y);S<0||(S!==0||(v=this.handleBoundaryDegeneracy(v,m)))&&this.addPeaks(m,v)}},f.boundary=function(){for(var m=this.dimension,h=[],g=this.simplices,v=g.length,x=0;x<v;++x){var y=g[x];if(y.boundary){for(var A=new Array(m),d=y.vertices,S=0,k=0,E=0;E<=m;++E)d[E]>=0?A[S++]=d[E]:k=1&E;if(k===(1&m)){var L=A[0];A[0]=A[1],A[1]=L}h.push(A)}}return h}},3352:function(c,o,t){"use strict";var i=t(2478);function n(S,k,E,L,O){this.mid=S,this.left=k,this.right=E,this.leftPoints=L,this.rightPoints=O,this.count=(k?k.count:0)+(E?E.count:0)+L.length}c.exports=function(S){return S&&S.length!==0?new A(y(S)):new A(null)};var a=n.prototype;function s(S,k){S.mid=k.mid,S.left=k.left,S.right=k.right,S.leftPoints=k.leftPoints,S.rightPoints=k.rightPoints,S.count=k.count}function l(S,k){var E=y(k);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,k){var E=S.intervals([]);E.push(k),l(S,E)}function p(S,k){var E=S.intervals([]),L=E.indexOf(k);return L<0?0:(E.splice(L,1),l(S,E),1)}function f(S,k,E){for(var L=0;L<S.length&&S[L][0]<=k;++L){var O=E(S[L]);if(O)return O}}function m(S,k,E){for(var L=S.length-1;L>=0&&S[L][1]>=k;--L){var O=E(S[L]);if(O)return O}}function h(S,k){for(var E=0;E<S.length;++E){var L=k(S[E]);if(L)return L}}function g(S,k){return S-k}function v(S,k){return S[0]-k[0]||S[1]-k[1]}function x(S,k){return S[1]-k[1]||S[0]-k[0]}function y(S){if(S.length===0)return null;for(var k=[],E=0;E<S.length;++E)k.push(S[E][0],S[E][1]);k.sort(g);var L=k[k.length>>1],O=[],P=[],F=[];for(E=0;E<S.length;++E){var U=S[E];U[1]<L?O.push(U):L<U[0]?P.push(U):F.push(U)}var I=F,N=F.slice();return I.sort(v),N.sort(x),new n(L,y(O),y(P),I,N)}function A(S){this.root=S}a.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},a.insert=function(S){var k=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?u(this,S):this.left.insert(S):this.left=y([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?u(this,S):this.right.insert(S):this.right=y([S]);else{var E=i.ge(this.leftPoints,S,v),L=i.ge(this.rightPoints,S,x);this.leftPoints.splice(E,0,S),this.rightPoints.splice(L,0,S)}},a.remove=function(S){var k=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(k-1)?p(this,S):(P=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(k-1)?p(this,S):(P=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(P===1&&(this.count-=1),P):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,L=this.left;L.right;)E=L,L=L.right;if(E===this)L.right=this.right;else{var O=this.left,P=this.right;E.count-=L.count,E.right=L.left,L.left=O,L.right=P}s(this,L),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(O=i.ge(this.leftPoints,S,v);O<this.leftPoints.length&&this.leftPoints[O][0]===S[0];++O)if(this.leftPoints[O]===S){for(this.count-=1,this.leftPoints.splice(O,1),P=i.ge(this.rightPoints,S,x);P<this.rightPoints.length&&this.rightPoints[P][1]===S[1];++P)if(this.rightPoints[P]===S)return this.rightPoints.splice(P,1),1}return 0},a.queryPoint=function(S,k){return S<this.mid?this.left&&(E=this.left.queryPoint(S,k))?E:f(this.leftPoints,S,k):S>this.mid?this.right&&(E=this.right.queryPoint(S,k))?E:m(this.rightPoints,S,k):h(this.leftPoints,k);var E},a.queryInterval=function(S,k,E){var L;return S<this.mid&&this.left&&(L=this.left.queryInterval(S,k,E))||k>this.mid&&this.right&&(L=this.right.queryInterval(S,k,E))?L:k<this.mid?f(this.leftPoints,k,E):S>this.mid?m(this.rightPoints,S,E):h(this.leftPoints,E)};var d=A.prototype;d.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},d.remove=function(S){if(this.root){var k=this.root.remove(S);return k===2&&(this.root=null),k!==0}return!1},d.queryPoint=function(S,k){if(this.root)return this.root.queryPoint(S,k)},d.queryInterval=function(S,k,E){if(S<=k&&this.root)return this.root.queryInterval(S,k,E)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(c){"use strict";c.exports=function(o){for(var t=new Array(o),i=0;i<o;++i)t[i]=i;return t}},9507:function(c){c.exports=!0},7163:function(c){function o(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}c.exports=function(t){return t!=null&&(o(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&o(i.slice(0,0))}(t)||!!t._isBuffer)}},5219:function(c){"use strict";c.exports=function(o){for(var t,i=o.length,n=0;n<i;n++)if(((t=o.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},395:function(c){c.exports=function(o,t,i){return o*(1-i)+t*i}},2652:function(c,o,t){var i=t(4335),n=t(6864),a=t(1903),s=t(9921),l=t(7608),u=t(5665),p={length:t(1387),normalize:t(3536),dot:t(244),cross:t(5911)},f=n(),m=n(),h=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function x(y,A,d,S,k){y[0]=A[0]*S+d[0]*k,y[1]=A[1]*S+d[1]*k,y[2]=A[2]*S+d[2]*k}c.exports=function(y,A,d,S,k,E){if(A||(A=[0,0,0]),d||(d=[0,0,0]),S||(S=[0,0,0]),k||(k=[0,0,0,1]),E||(E=[0,0,0,1]),!i(f,y)||(a(m,f),m[3]=0,m[7]=0,m[11]=0,m[15]=1,Math.abs(s(m)<1e-8)))return!1;var L,O,P,F,U,I,N,W=f[3],B=f[7],V=f[11],q=f[12],ne=f[13],$=f[14],K=f[15];if(W!==0||B!==0||V!==0){if(h[0]=W,h[1]=B,h[2]=V,h[3]=K,!l(m,m))return!1;u(m,m),L=k,P=m,F=(O=h)[0],U=O[1],I=O[2],N=O[3],L[0]=P[0]*F+P[4]*U+P[8]*I+P[12]*N,L[1]=P[1]*F+P[5]*U+P[9]*I+P[13]*N,L[2]=P[2]*F+P[6]*U+P[10]*I+P[14]*N,L[3]=P[3]*F+P[7]*U+P[11]*I+P[15]*N}else k[0]=k[1]=k[2]=0,k[3]=1;if(A[0]=q,A[1]=ne,A[2]=$,function(J,Z){J[0][0]=Z[0],J[0][1]=Z[1],J[0][2]=Z[2],J[1][0]=Z[4],J[1][1]=Z[5],J[1][2]=Z[6],J[2][0]=Z[8],J[2][1]=Z[9],J[2][2]=Z[10]}(g,f),d[0]=p.length(g[0]),p.normalize(g[0],g[0]),S[0]=p.dot(g[0],g[1]),x(g[1],g[1],g[0],1,-S[0]),d[1]=p.length(g[1]),p.normalize(g[1],g[1]),S[0]/=d[1],S[1]=p.dot(g[0],g[2]),x(g[2],g[2],g[0],1,-S[1]),S[2]=p.dot(g[1],g[2]),x(g[2],g[2],g[1],1,-S[2]),d[2]=p.length(g[2]),p.normalize(g[2],g[2]),S[1]/=d[2],S[2]/=d[2],p.cross(v,g[1],g[2]),p.dot(g[0],v)<0)for(var ee=0;ee<3;ee++)d[ee]*=-1,g[ee][0]*=-1,g[ee][1]*=-1,g[ee][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0)),g[2][1]>g[1][2]&&(E[0]=-E[0]),g[0][2]>g[2][0]&&(E[1]=-E[1]),g[1][0]>g[0][1]&&(E[2]=-E[2]),!0}},4335:function(c){c.exports=function(o,t){var i=t[15];if(i===0)return!1;for(var n=1/i,a=0;a<16;a++)o[a]=t[a]*n;return!0}},7442:function(c,o,t){var i=t(6658),n=t(7182),a=t(2652),s=t(9921),l=t(8648),u=m(),p=m(),f=m();function m(){return{translate:h(),scale:h(1),skew:h(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function h(g){return[g||0,g||0,g||0]}c.exports=function(g,v,x,y){if(s(v)===0||s(x)===0)return!1;var A=a(v,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=a(x,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!A||!d||(i(f.translate,u.translate,p.translate,y),i(f.skew,u.skew,p.skew,y),i(f.scale,u.scale,p.scale,y),i(f.perspective,u.perspective,p.perspective,y),l(f.quaternion,u.quaternion,p.quaternion,y),n(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},7182:function(c,o,t){var i={identity:t(7894),translate:t(7656),multiply:t(6760),create:t(6864),scale:t(2504),fromRotationTranslation:t(6743)},n=(i.create(),i.create());c.exports=function(a,s,l,u,p,f){return i.identity(a),i.fromRotationTranslation(a,f,s),a[3]=p[0],a[7]=p[1],a[11]=p[2],a[15]=p[3],i.identity(n),u[2]!==0&&(n[9]=u[2],i.multiply(a,a,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],i.multiply(a,a,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],i.multiply(a,a,n)),i.scale(a,a,l),a}},4192:function(c,o,t){"use strict";var i=t(2478),n=t(7442),a=t(7608),s=t(5567),l=t(2408),u=t(7089),p=t(6582),f=t(7656),m=(t(2504),t(3536)),h=[0,0,0];function g(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}c.exports=function(y){return new g((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=g.prototype;v.recalcMatrix=function(y){var A=this._time,d=i.le(A,y),S=this.computedMatrix;if(!(d<0)){var k=this._components;if(d===A.length-1)for(var E=16*d,L=0;L<16;++L)S[L]=k[E++];else{var O=A[d+1]-A[d],P=(E=16*d,this.prevMatrix),F=!0;for(L=0;L<16;++L)P[L]=k[E++];var U=this.nextMatrix;for(L=0;L<16;++L)U[L]=k[E++],F=F&&P[L]===U[L];if(O<1e-6||F)for(L=0;L<16;++L)S[L]=P[L];else n(S,P,U,(y-A[d])/O)}var I=this.computedUp;I[0]=S[1],I[1]=S[5],I[2]=S[9],m(I,I);var N=this.computedInverse;a(N,S);var W=this.computedEye,B=N[15];W[0]=N[12]/B,W[1]=N[13]/B,W[2]=N[14]/B;var V=this.computedCenter,q=Math.exp(this.computedRadius[0]);for(L=0;L<3;++L)V[L]=W[L]-S[2+4*L]*q}},v.idle=function(y){if(!(y<this.lastT())){for(var A=this._components,d=A.length-16,S=0;S<16;++S)A.push(A[d++]);this._time.push(y)}},v.flush=function(y){var A=i.gt(this._time,y)-2;A<0||(this._time.splice(0,A),this._components.splice(0,16*A))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(y,A,d,S){this.recalcMatrix(y),A=A||this.computedEye,d=d||h,S=S||this.computedUp,this.setMatrix(y,p(this.computedMatrix,A,d,S));for(var k=0,E=0;E<3;++E)k+=Math.pow(d[E]-A[E],2);k=Math.log(Math.sqrt(k)),this.computedRadius[0]=k},v.rotate=function(y,A,d,S){this.recalcMatrix(y);var k=this.computedInverse;A&&l(k,k,A),d&&s(k,k,d),S&&u(k,k,S),this.setMatrix(y,a(this.computedMatrix,k))};var x=[0,0,0];v.pan=function(y,A,d,S){x[0]=-(A||0),x[1]=-(d||0),x[2]=-(S||0),this.recalcMatrix(y);var k=this.computedInverse;f(k,k,x),this.setMatrix(y,a(k,k))},v.translate=function(y,A,d,S){x[0]=A||0,x[1]=d||0,x[2]=S||0,this.recalcMatrix(y);var k=this.computedMatrix;f(k,k,x),this.setMatrix(y,k)},v.setMatrix=function(y,A){if(!(y<this.lastT())){this._time.push(y);for(var d=0;d<16;++d)this._components.push(A[d])}},v.setDistance=function(y,A){this.computedRadius[0]=A},v.setDistanceLimits=function(y,A){var d=this._limits;d[0]=y,d[1]=A},v.getDistanceLimits=function(y){var A=this._limits;return y?(y[0]=A[0],y[1]=A[1],y):A}},3090:function(c,o,t){"use strict";c.exports=function(n){var a=n.length;if(a<3){for(var s=new Array(a),l=0;l<a;++l)s[l]=l;return a===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:s}var u=new Array(a);for(l=0;l<a;++l)u[l]=l;u.sort(function(A,d){return n[A][0]-n[d][0]||n[A][1]-n[d][1]});var p=[u[0],u[1]],f=[u[0],u[1]];for(l=2;l<a;++l){for(var m=u[l],h=n[m],g=p.length;g>1&&i(n[p[g-2]],n[p[g-1]],h)<=0;)g-=1,p.pop();for(p.push(m),g=f.length;g>1&&i(n[f[g-2]],n[f[g-1]],h)>=0;)g-=1,f.pop();f.push(m)}s=new Array(f.length+p.length-2);for(var v=0,x=(l=0,p.length);l<x;++l)s[v++]=p[l];for(var y=f.length-2;y>0;--y)s[v++]=f[y];return s};var i=t(3250)[3]},351:function(c,o,t){"use strict";c.exports=function(n,a){a||(a=n,n=window);var s=0,l=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function m(E){var L=!1;return"altKey"in E&&(L=L||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(L=L||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(L=L||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(L=L||E.metaKey!==p.meta,p.meta=!!E.metaKey),L}function h(E,L){var O=i.x(L),P=i.y(L);"buttons"in L&&(E=0|L.buttons),(E!==s||O!==l||P!==u||m(L))&&(s=0|E,l=O||0,u=P||0,a&&a(s,l,u,p))}function g(E){h(0,E)}function v(){(s||l||u||p.shift||p.alt||p.meta||p.control)&&(l=u=0,s=0,p.shift=p.alt=p.control=p.meta=!1,a&&a(0,0,0,p))}function x(E){m(E)&&a&&a(s,l,u,p)}function y(E){i.buttons(E)===0?h(0,E):h(s,E)}function A(E){h(s|i.buttons(E),E)}function d(E){h(s&~i.buttons(E),E)}function S(){f||(f=!0,n.addEventListener("mousemove",y),n.addEventListener("mousedown",A),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",g),n.addEventListener("mouseenter",g),n.addEventListener("mouseout",g),n.addEventListener("mouseover",g),n.addEventListener("blur",v),n.addEventListener("keyup",x),n.addEventListener("keydown",x),n.addEventListener("keypress",x),n!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}S();var k={element:n};return Object.defineProperties(k,{enabled:{get:function(){return f},set:function(E){E?S():f&&(f=!1,n.removeEventListener("mousemove",y),n.removeEventListener("mousedown",A),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",g),n.removeEventListener("mouseenter",g),n.removeEventListener("mouseout",g),n.removeEventListener("mouseover",g),n.removeEventListener("blur",v),n.removeEventListener("keyup",x),n.removeEventListener("keydown",x),n.removeEventListener("keypress",x),n!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),k};var i=t(4687)},24:function(c){var o={left:0,top:0};c.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var a,s=t.clientX||0,l=t.clientY||0,u=(a=i)===window||a===document||a===document.body?o:a.getBoundingClientRect();return n[0]=s-u.left,n[1]=l-u.top,n}},4687:function(c,o){"use strict";function t(i){return i.target||i.srcElement||window}o.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((n=i.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in i){var n;if((n=i.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},o.element=t,o.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var n=t(i).getBoundingClientRect();return i.clientX-n.left}return 0},o.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var n=t(i).getBoundingClientRect();return i.clientY-n.top}return 0}},8512:function(c,o,t){"use strict";var i=t(665);c.exports=function(n,a,s){typeof n=="function"&&(s=!!a,a=n,n=window);var l=i("ex",n),u=function(p){s&&p.preventDefault();var f=p.deltaX||0,m=p.deltaY||0,h=p.deltaZ||0,g=1;switch(p.deltaMode){case 1:g=l;break;case 2:g=window.innerHeight}if(m*=g,h*=g,(f*=g)||m||h)return a(f,m,h,p)};return n.addEventListener("wheel",u),u}},2640:function(c,o,t){"use strict";var i=t(1888);c.exports=function(a){function s(h){throw new Error("ndarray-extract-contour: "+h)}typeof a!="object"&&s("Must specify arguments");var l=a.order;Array.isArray(l)||s("Must specify order");var u=a.arrayArguments||1;u<1&&s("Must have at least one array argument"),(a.scalarArguments||0)<0&&s("Scalar arg count must be > 0"),typeof a.vertex!="function"&&s("Must specify vertex creation function"),typeof a.cell!="function"&&s("Must specify cell creation function"),typeof a.phase!="function"&&s("Must specify phase function");for(var p=a.getters||[],f=new Array(u),m=0;m<u;++m)p.indexOf(m)>=0?f[m]=!0:f[m]=!1;return function(h,g,v,x,y,A){var d=[A,y].join(",");return(0,n[d])(h,g,v,i.mallocUint32,i.freeUint32)}(a.vertex,a.cell,a.phase,0,l,f)};var n={"false,0,1":function(a,s,l,u,p){return function(f,m,h,g){var v,x=0|f.shape[0],y=0|f.shape[1],A=f.data,d=0|f.offset,S=0|f.stride[0],k=0|f.stride[1],E=d,L=0|-S,O=0,P=0|-k,F=0,U=-S-k|0,I=0,N=0|S,W=k-S*x|0,B=0,V=0,q=0,ne=2*x|0,$=u(ne),K=u(ne),ee=0,J=0,Z=-1,te=-1,oe=0,se=0|-x,ce=0|x,ye=0,me=-x-1|0,fe=x-1|0,pe=0,ge=0,ke=0;for(B=0;B<x;++B)$[ee++]=l(A[E],m,h,g),E+=N;if(E+=W,y>0){if(V=1,$[ee++]=l(A[E],m,h,g),E+=N,x>0)for(B=1,v=A[E],J=$[ee]=l(v,m,h,g),oe=$[ee+Z],ye=$[ee+se],pe=$[ee+me],J===oe&&J===ye&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,oe,ye,pe,m,h,g),ge=K[ee]=q++),ee+=1,E+=N,B=2;B<x;++B)v=A[E],J=$[ee]=l(v,m,h,g),oe=$[ee+Z],ye=$[ee+se],pe=$[ee+me],J===oe&&J===ye&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,oe,ye,pe,m,h,g),ge=K[ee]=q++,pe!==oe&&s(K[ee+Z],ge,I,O,pe,oe,m,h,g)),ee+=1,E+=N;for(E+=W,ee=0,ke=Z,Z=te,te=ke,ke=se,se=ce,ce=ke,ke=me,me=fe,fe=ke,V=2;V<y;++V){if($[ee++]=l(A[E],m,h,g),E+=N,x>0)for(B=1,v=A[E],J=$[ee]=l(v,m,h,g),oe=$[ee+Z],ye=$[ee+se],pe=$[ee+me],J===oe&&J===ye&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,oe,ye,pe,m,h,g),ge=K[ee]=q++,pe!==ye&&s(K[ee+se],ge,F,I,ye,pe,m,h,g)),ee+=1,E+=N,B=2;B<x;++B)v=A[E],J=$[ee]=l(v,m,h,g),oe=$[ee+Z],ye=$[ee+se],pe=$[ee+me],J===oe&&J===ye&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,oe,ye,pe,m,h,g),ge=K[ee]=q++,pe!==ye&&s(K[ee+se],ge,F,I,ye,pe,m,h,g),pe!==oe&&s(K[ee+Z],ge,I,O,pe,oe,m,h,g)),ee+=1,E+=N;1&V&&(ee=0),ke=Z,Z=te,te=ke,ke=se,se=ce,ce=ke,ke=me,me=fe,fe=ke,E+=W}}p(K),p($)}},"false,1,0":function(a,s,l,u,p){return function(f,m,h,g){var v,x=0|f.shape[0],y=0|f.shape[1],A=f.data,d=0|f.offset,S=0|f.stride[0],k=0|f.stride[1],E=d,L=0|-S,O=0,P=0|-k,F=0,U=-S-k|0,I=0,N=0|k,W=S-k*y|0,B=0,V=0,q=0,ne=2*y|0,$=u(ne),K=u(ne),ee=0,J=0,Z=-1,te=-1,oe=0,se=0|-y,ce=0|y,ye=0,me=-y-1|0,fe=y-1|0,pe=0,ge=0,ke=0;for(V=0;V<y;++V)$[ee++]=l(A[E],m,h,g),E+=N;if(E+=W,x>0){if(B=1,$[ee++]=l(A[E],m,h,g),E+=N,y>0)for(V=1,v=A[E],J=$[ee]=l(v,m,h,g),ye=$[ee+se],oe=$[ee+Z],pe=$[ee+me],J===ye&&J===oe&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,ye,oe,pe,m,h,g),ge=K[ee]=q++),ee+=1,E+=N,V=2;V<y;++V)v=A[E],J=$[ee]=l(v,m,h,g),ye=$[ee+se],oe=$[ee+Z],pe=$[ee+me],J===ye&&J===oe&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,ye,oe,pe,m,h,g),ge=K[ee]=q++,pe!==oe&&s(K[ee+Z],ge,F,I,oe,pe,m,h,g)),ee+=1,E+=N;for(E+=W,ee=0,ke=se,se=ce,ce=ke,ke=Z,Z=te,te=ke,ke=me,me=fe,fe=ke,B=2;B<x;++B){if($[ee++]=l(A[E],m,h,g),E+=N,y>0)for(V=1,v=A[E],J=$[ee]=l(v,m,h,g),ye=$[ee+se],oe=$[ee+Z],pe=$[ee+me],J===ye&&J===oe&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,ye,oe,pe,m,h,g),ge=K[ee]=q++,pe!==ye&&s(K[ee+se],ge,I,O,pe,ye,m,h,g)),ee+=1,E+=N,V=2;V<y;++V)v=A[E],J=$[ee]=l(v,m,h,g),ye=$[ee+se],oe=$[ee+Z],pe=$[ee+me],J===ye&&J===oe&&J===pe||(O=A[E+L],F=A[E+P],I=A[E+U],a(B,V,v,O,F,I,J,ye,oe,pe,m,h,g),ge=K[ee]=q++,pe!==oe&&s(K[ee+Z],ge,F,I,oe,pe,m,h,g),pe!==ye&&s(K[ee+se],ge,I,O,pe,ye,m,h,g)),ee+=1,E+=N;1&B&&(ee=0),ke=se,se=ce,ce=ke,ke=Z,Z=te,te=ke,ke=me,me=fe,fe=ke,E+=W}}p(K),p($)}}}},6199:function(c,o,t){"use strict";var i=t(1338),n={zero:function(x,y,A,d){var S=x[0];d|=0;var k=0,E=A[0];for(k=0;k<S;++k)y[d]=0,d+=E},fdTemplate1:function(x,y,A,d,S,k,E){var L=x[0],O=A[0],P=-1*O,F=O;d|=0,E|=0;var U=0,I=O,N=k[0];for(U=0;U<L;++U)S[E]=.5*(y[d+P]-y[d+F]),d+=I,E+=N},fdTemplate2:function(x,y,A,d,S,k,E,L,O,P){var F=x[0],U=x[1],I=A[0],N=A[1],W=k[0],B=k[1],V=O[0],q=O[1],ne=-1*I,$=I,K=-1*N,ee=N;d|=0,E|=0,P|=0;var J=0,Z=0,te=N,oe=I-U*N,se=B,ce=W-U*B,ye=q,me=V-U*q;for(Z=0;Z<F;++Z){for(J=0;J<U;++J)S[E]=.5*(y[d+ne]-y[d+$]),L[P]=.5*(y[d+K]-y[d+ee]),d+=te,E+=se,P+=ye;d+=oe,E+=ce,P+=me}}},a={cdiff:function(x){var y={};return function(A,d,S){var k=A.dtype,E=A.order,L=d.dtype,O=d.order,P=S.dtype,F=S.order,U=[k,E.join(),L,O.join(),P,F.join()].join(),I=y[U];return I||(y[U]=I=x([k,E,L,O,P,F])),I(A.shape.slice(0),A.data,A.stride,0|A.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}},zero:function(x){var y={};return function(A){var d=A.dtype,S=A.order,k=[d,S.join()].join(),E=y[k];return E||(y[k]=E=x([d,S])),E(A.shape.slice(0),A.data,A.stride,0|A.offset)}},fdTemplate1:function(x){var y={};return function(A,d){var S=A.dtype,k=A.order,E=d.dtype,L=d.order,O=[S,k.join(),E,L.join()].join(),P=y[O];return P||(y[O]=P=x([S,k,E,L])),P(A.shape.slice(0),A.data,A.stride,0|A.offset,d.data,d.stride,0|d.offset)}},fdTemplate2:function(x){var y={};return function(A,d,S){var k=A.dtype,E=A.order,L=d.dtype,O=d.order,P=S.dtype,F=S.order,U=[k,E.join(),L,O.join(),P,F.join()].join(),I=y[U];return I||(y[U]=I=x([k,E,L,O,P,F])),I(A.shape.slice(0),A.data,A.stride,0|A.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}}};function s(x){return(0,a[x.funcName])(l.bind(void 0,x))}function l(x){return n[x.funcName]}function u(x){return s({funcName:x.funcName})}var p={},f={},m=u({funcName:"cdiff"}),h=u({funcName:"zero"});function g(x){return x in p?p[x]:p[x]=u({funcName:"fdTemplate"+x})}function v(x,y,A,d){return function(S,k){var E=k.shape.slice();return E[0]>2&&E[1]>2&&d(k.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(A(k.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),y(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(A(k.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),y(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(A(k.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),y(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(A(k.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),y(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}c.exports=function(x,y,A){return Array.isArray(A)||(A=i(y.dimension,typeof A=="string"?A:"clamp")),y.size===0?x:y.dimension===0?(x.set(0),x):function(d){var S=d.join();if(O=f[S])return O;for(var k=d.length,E=[m,h],L=1;L<=k;++L)E.push(g(L));var O=v.apply(void 0,E);return f[S]=O,O}(A)(x,y)}},4317:function(c){"use strict";function o(a,s){var l=Math.floor(s),u=s-l,p=0<=l&&l<a.shape[0],f=0<=l+1&&l+1<a.shape[0];return(1-u)*(p?+a.get(l):0)+u*(f?+a.get(l+1):0)}function t(a,s,l){var u=Math.floor(s),p=s-u,f=0<=u&&u<a.shape[0],m=0<=u+1&&u+1<a.shape[0],h=Math.floor(l),g=l-h,v=0<=h&&h<a.shape[1],x=0<=h+1&&h+1<a.shape[1],y=f&&v?a.get(u,h):0,A=f&&x?a.get(u,h+1):0;return(1-g)*((1-p)*y+p*(m&&v?a.get(u+1,h):0))+g*((1-p)*A+p*(m&&x?a.get(u+1,h+1):0))}function i(a,s,l,u){var p=Math.floor(s),f=s-p,m=0<=p&&p<a.shape[0],h=0<=p+1&&p+1<a.shape[0],g=Math.floor(l),v=l-g,x=0<=g&&g<a.shape[1],y=0<=g+1&&g+1<a.shape[1],A=Math.floor(u),d=u-A,S=0<=A&&A<a.shape[2],k=0<=A+1&&A+1<a.shape[2],E=m&&x&&S?a.get(p,g,A):0,L=m&&y&&S?a.get(p,g+1,A):0,O=h&&x&&S?a.get(p+1,g,A):0,P=h&&y&&S?a.get(p+1,g+1,A):0,F=m&&x&&k?a.get(p,g,A+1):0,U=m&&y&&k?a.get(p,g+1,A+1):0;return(1-d)*((1-v)*((1-f)*E+f*O)+v*((1-f)*L+f*P))+d*((1-v)*((1-f)*F+f*(h&&x&&k?a.get(p+1,g,A+1):0))+v*((1-f)*U+f*(h&&y&&k?a.get(p+1,g+1,A+1):0)))}function n(a){var s,l,u=0|a.shape.length,p=new Array(u),f=new Array(u),m=new Array(u),h=new Array(u);for(s=0;s<u;++s)l=+arguments[s+1],p[s]=Math.floor(l),f[s]=l-p[s],m[s]=0<=p[s]&&p[s]<a.shape[s],h[s]=0<=p[s]+1&&p[s]+1<a.shape[s];var g,v,x,y=0;e:for(s=0;s<1<<u;++s){for(v=1,x=a.offset,g=0;g<u;++g)if(s&1<<g){if(!h[g])continue e;v*=f[g],x+=a.stride[g]*(p[g]+1)}else{if(!m[g])continue e;v*=1-f[g],x+=a.stride[g]*p[g]}y+=v*a.data[x]}return y}c.exports=function(a,s,l,u){switch(a.shape.length){case 0:return 0;case 1:return o(a,s);case 2:return t(a,s,l);case 3:return i(a,s,l,u);default:return n.apply(void 0,arguments)}},c.exports.d1=o,c.exports.d2=t,c.exports.d3=i},5298:function(c,o){"use strict";var t={"float64,2,1,0":function(){return function(l,u,p,f,m){var h=l[0],g=l[1],v=l[2],x=p[0],y=p[1],A=p[2];f|=0;var d=0,S=0,k=0,E=A,L=y-v*A,O=x-g*y;for(k=0;k<h;++k){for(S=0;S<g;++S){for(d=0;d<v;++d)u[f]/=m,f+=E;f+=L}f+=O}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,p,f,m,h,g,v){for(var x=l[0],y=l[1],A=l[2],d=p[0],S=p[1],k=p[2],E=h[0],L=h[1],O=h[2],P=f|=0,F=g|=0,U=0|l[0];U>0;){U<64?(x=U,U=0):(x=64,U-=64);for(var I=0|l[1];I>0;){I<64?(y=I,I=0):(y=64,I-=64),f=P+U*d+I*S,g=F+U*E+I*L;var N=0,W=0,B=0,V=k,q=d-A*k,ne=S-x*d,$=O,K=E-A*O,ee=L-x*E;for(B=0;B<y;++B){for(W=0;W<x;++W){for(N=0;N<A;++N)u[f]=m[g]*v,f+=V,g+=$;f+=q,g+=K}f+=ne,g+=ee}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,p,f,m,h,g){var v=l[0],x=l[1],y=p[0],A=p[1],d=h[0],S=h[1];f|=0,g|=0;var k=0,E=0,L=A,O=y-x*A,P=S,F=d-x*S;for(E=0;E<v;++E){for(k=0;k<x;++k)u[f]=m[g],f+=L,g+=P;f+=O,g+=F}}},"float32,1,0,float32,0,1":function(){return function(l,u,p,f,m,h,g){for(var v=l[0],x=l[1],y=p[0],A=p[1],d=h[0],S=h[1],k=f|=0,E=g|=0,L=0|l[1];L>0;){L<64?(x=L,L=0):(x=64,L-=64);for(var O=0|l[0];O>0;){O<64?(v=O,O=0):(v=64,O-=64),f=k+L*A+O*y,g=E+L*S+O*d;var P=0,F=0,U=A,I=y-x*A,N=S,W=d-x*S;for(F=0;F<v;++F){for(P=0;P<x;++P)u[f]=m[g],f+=U,g+=N;f+=I,g+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,p,f,m,h,g){for(var v=l[0],x=l[1],y=l[2],A=p[0],d=p[1],S=p[2],k=h[0],E=h[1],L=h[2],O=f|=0,P=g|=0,F=0|l[2];F>0;){F<64?(y=F,F=0):(y=64,F-=64);for(var U=0|l[0];U>0;){U<64?(v=U,U=0):(v=64,U-=64);for(var I=0|l[1];I>0;){I<64?(x=I,I=0):(x=64,I-=64),f=O+F*S+U*A+I*d,g=P+F*L+U*k+I*E;var N=0,W=0,B=0,V=S,q=A-y*S,ne=d-v*A,$=L,K=k-y*L,ee=E-v*k;for(B=0;B<x;++B){for(W=0;W<v;++W){for(N=0;N<y;++N)u[f]=m[g],f+=V,g+=$;f+=q,g+=K}f+=ne,g+=ee}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,p,f,m,h,g){var v=l[0],x=l[1],y=l[2],A=p[0],d=p[1],S=p[2],k=h[0],E=h[1],L=h[2];f|=0,g|=0;var O=0,P=0,F=0,U=S,I=A-y*S,N=d-v*A,W=L,B=k-y*L,V=E-v*k;for(F=0;F<x;++F){for(P=0;P<v;++P){for(O=0;O<y;++O)u[f]=m[g],f+=U,g+=W;f+=I,g+=B}f+=N,g+=V}}}},i=function(l,u){var p=u.join(",");return(0,t[p])()},n={mul:function(l){var u={};return function(p,f,m){var h=p.dtype,g=p.order,v=f.dtype,x=f.order,y=m.dtype,A=m.order,d=[h,g.join(),v,x.join(),y,A.join()].join(),S=u[d];return S||(u[d]=S=l([h,g,v,x,y,A])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,f.data,f.stride,0|f.offset,m.data,m.stride,0|m.offset)}},muls:function(l){var u={};return function(p,f,m){var h=p.dtype,g=p.order,v=f.dtype,x=f.order,y=[h,g.join(),v,x.join()].join(),A=u[y];return A||(u[y]=A=l([h,g,v,x])),A(p.shape.slice(0),p.data,p.stride,0|p.offset,f.data,f.stride,0|f.offset,m)}},mulseq:function(l){var u={};return function(p,f){var m=p.dtype,h=p.order,g=[m,h.join()].join(),v=u[g];return v||(u[g]=v=l([m,h])),v(p.shape.slice(0),p.data,p.stride,0|p.offset,f)}},div:function(l){var u={};return function(p,f,m){var h=p.dtype,g=p.order,v=f.dtype,x=f.order,y=m.dtype,A=m.order,d=[h,g.join(),v,x.join(),y,A.join()].join(),S=u[d];return S||(u[d]=S=l([h,g,v,x,y,A])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,f.data,f.stride,0|f.offset,m.data,m.stride,0|m.offset)}},divs:function(l){var u={};return function(p,f,m){var h=p.dtype,g=p.order,v=f.dtype,x=f.order,y=[h,g.join(),v,x.join()].join(),A=u[y];return A||(u[y]=A=l([h,g,v,x])),A(p.shape.slice(0),p.data,p.stride,0|p.offset,f.data,f.stride,0|f.offset,m)}},divseq:function(l){var u={};return function(p,f){var m=p.dtype,h=p.order,g=[m,h.join()].join(),v=u[g];return v||(u[g]=v=l([m,h])),v(p.shape.slice(0),p.data,p.stride,0|p.offset,f)}},assign:function(l){var u={};return function(p,f){var m=p.dtype,h=p.order,g=f.dtype,v=f.order,x=[m,h.join(),g,v.join()].join(),y=u[x];return y||(u[x]=y=l([m,h,g,v])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,f.data,f.stride,0|f.offset)}}};function a(l){return u={funcName:l.funcName},(0,n[u.funcName])(i.bind(void 0,u));var u}var s={mul:"*",div:"/"};(function(){for(var l in s)o[l]=a({funcName:l}),o[l+"s"]=a({funcName:l+"s"}),o[l+"seq"]=a({funcName:l+"seq"})})(),o.assign=a({funcName:"assign"})},9994:function(c,o,t){"use strict";var i=t(9618),n=t(8277);c.exports=function(a,s){for(var l=[],u=a,p=1;Array.isArray(u);)l.push(u.length),p*=u.length,u=u[0];return l.length===0?i():(s||(s=i(new Float64Array(p),l)),n(s,a),s)}},8277:function(c){"use strict";c.exports=function(o){var t={};return function(i,n){var a=i.dtype,s=i.order,l=[a,s.join()].join(),u=t[l];return u||(t[l]=u=o([a,s])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}((function(){return function(o,t,i,n,a){var s=o[0],l=o[1],u=o[2],p=i[0],f=i[1],m=i[2],h=[0,0,0];n|=0;var g=0,v=0,x=0,y=m,A=f-u*m,d=p-l*f;for(x=0;x<s;++x){for(v=0;v<l;++v){for(g=0;g<u;++g){var S,k=a;for(S=0;S<h.length-1;++S)k=k[h[S]];t[n]=k[h[h.length-1]],n+=y,++h[2]}n+=A,h[2]-=u,++h[1]}n+=d,h[1]-=l,++h[0]}}}).bind(void 0,{funcName:"convert"}))},7640:function(c,o,t){"use strict";var i=t(1888);function n(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var a={"uint32,1,0":function(u,p){return function(f,m,h,g,v,x,y,A,d,S,k){var E,L,O,P,F,U,I,N,W=f*v+g,B=u(A);for(E=f+1;E<=m;++E){for(L=E,O=W+=v,F=0,U=W,P=0;P<A;++P)B[F++]=h[U],U+=d;e:for(;L-- >f;){F=0,U=O-v;t:for(P=0;P<A;++P){if((I=h[U])<(N=B[F]))break e;if(I>N)break t;U+=S,F+=k}for(F=O,U=O-v,P=0;P<A;++P)h[F]=h[U],F+=d,U+=d;O-=v}for(F=O,U=0,P=0;P<A;++P)h[F]=B[U++],F+=d}p(B)}}},s={"uint32,1,0":function(u,p,f){return function m(h,g,v,x,y,A,d,S,k,E,L){var O,P,F,U,I,N,W,B,V,q,ne,$,K,ee,J,Z,te,oe,se,ce,ye,me,fe,pe,ge,ke=(g-h+1)/6|0,Ce=h+ke,de=g-ke,ae=h+g>>1,re=ae-ke,he=ae+ke,Se=Ce,xe=re,Te=ae,Ae=he,Pe=de,De=h+1,ve=g-1,we=!0,Ee=0,Fe=0,Le=0,je=S,Ge=p(je),Je=p(je);ne=y*Se,$=y*xe,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Se,Se=xe,xe=P;break e}if(Le<0)break e;ge+=E}ne=y*Ae,$=y*Pe,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Ae,Ae=Pe,Pe=P;break e}if(Le<0)break e;ge+=E}ne=y*Se,$=y*Te,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Se,Se=Te,Te=P;break e}if(Le<0)break e;ge+=E}ne=y*xe,$=y*Te,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=xe,xe=Te,Te=P;break e}if(Le<0)break e;ge+=E}ne=y*Se,$=y*Ae,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Se,Se=Ae,Ae=P;break e}if(Le<0)break e;ge+=E}ne=y*Te,$=y*Ae,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Te,Te=Ae,Ae=P;break e}if(Le<0)break e;ge+=E}ne=y*xe,$=y*Pe,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=xe,xe=Pe,Pe=P;break e}if(Le<0)break e;ge+=E}ne=y*xe,$=y*Te,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=xe,xe=Te,Te=P;break e}if(Le<0)break e;ge+=E}ne=y*Ae,$=y*Pe,ge=x;e:for(q=0;q<S;++q){if(B=$+ge,(Le=v[W=ne+ge]-v[B])>0){P=Ae,Ae=Pe,Pe=P;break e}if(Le<0)break e;ge+=E}for(ne=y*Se,$=y*xe,K=y*Te,ee=y*Ae,J=y*Pe,Z=y*Ce,te=y*ae,oe=y*de,pe=0,ge=x,q=0;q<S;++q)W=ne+ge,B=$+ge,V=K+ge,se=ee+ge,ce=J+ge,ye=Z+ge,me=te+ge,fe=oe+ge,Ge[pe]=v[B],Je[pe]=v[se],we=we&&Ge[pe]===Je[pe],F=v[W],U=v[V],I=v[ce],v[ye]=F,v[me]=U,v[fe]=I,++pe,ge+=k;for(ne=y*re,$=y*h,ge=x,q=0;q<S;++q)B=$+ge,v[W=ne+ge]=v[B],ge+=k;for(ne=y*he,$=y*g,ge=x,q=0;q<S;++q)B=$+ge,v[W=ne+ge]=v[B],ge+=k;if(we)for(N=De;N<=ve;++N){for(W=x+N*y,pe=0,q=0;q<S&&(Le=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(Le!==0)if(Le<0){if(N!==De)for(ne=y*N,$=y*De,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;++De}else for(;;){for(W=x+ve*y,pe=0,q=0;q<S&&(Le=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(!(Le>0)){if(Le<0){for(ne=y*N,$=y*De,K=y*ve,ge=x,q=0;q<S;++q)B=$+ge,V=K+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=v[V],v[V]=O,ge+=k;++De,--ve;break}for(ne=y*N,$=y*ve,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;--ve;break}ve--}}else for(N=De;N<=ve;++N){for(W=x+N*y,pe=0,q=0;q<S&&(Ee=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(Ee<0){if(N!==De)for(ne=y*N,$=y*De,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;++De}else{for(W=x+N*y,pe=0,q=0;q<S&&(Fe=v[W]-Je[pe])==0;++q)pe+=L,W+=E;if(Fe>0)for(;;){for(W=x+ve*y,pe=0,q=0;q<S&&(Le=v[W]-Je[pe])==0;++q)pe+=L,W+=E;if(!(Le>0)){for(W=x+ve*y,pe=0,q=0;q<S&&(Le=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(Le<0){for(ne=y*N,$=y*De,K=y*ve,ge=x,q=0;q<S;++q)B=$+ge,V=K+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=v[V],v[V]=O,ge+=k;++De,--ve}else{for(ne=y*N,$=y*ve,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;--ve}break}if(--ve<N)break}}}for(ne=y*h,$=y*(De-1),pe=0,ge=x,q=0;q<S;++q)B=$+ge,v[W=ne+ge]=v[B],v[B]=Ge[pe],++pe,ge+=k;for(ne=y*g,$=y*(ve+1),pe=0,ge=x,q=0;q<S;++q)B=$+ge,v[W=ne+ge]=v[B],v[B]=Je[pe],++pe,ge+=k;if(De-2-h<=32?u(h,De-2,v,x,y,A,d,S,k,E,L):m(h,De-2,v,x,y,A,d,S,k,E,L),g-(ve+2)<=32?u(ve+2,g,v,x,y,A,d,S,k,E,L):m(ve+2,g,v,x,y,A,d,S,k,E,L),we)return f(Ge),void f(Je);if(De<Ce&&ve>de){e:for(;;){for(W=x+De*y,pe=0,ge=x,q=0;q<S;++q){if(v[W]!==Ge[pe])break e;++pe,W+=k}++De}e:for(;;){for(W=x+ve*y,pe=0,ge=x,q=0;q<S;++q){if(v[W]!==Je[pe])break e;++pe,W+=k}--ve}for(N=De;N<=ve;++N){for(W=x+N*y,pe=0,q=0;q<S&&(Ee=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(Ee===0){if(N!==De)for(ne=y*N,$=y*De,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;++De}else{for(W=x+N*y,pe=0,q=0;q<S&&(Fe=v[W]-Je[pe])==0;++q)pe+=L,W+=E;if(Fe===0)for(;;){for(W=x+ve*y,pe=0,q=0;q<S&&(Le=v[W]-Je[pe])==0;++q)pe+=L,W+=E;if(Le!==0){for(W=x+ve*y,pe=0,q=0;q<S&&(Le=v[W]-Ge[pe])==0;++q)pe+=L,W+=E;if(Le<0){for(ne=y*N,$=y*De,K=y*ve,ge=x,q=0;q<S;++q)B=$+ge,V=K+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=v[V],v[V]=O,ge+=k;++De,--ve}else{for(ne=y*N,$=y*ve,ge=x,q=0;q<S;++q)B=$+ge,O=v[W=ne+ge],v[W]=v[B],v[B]=O,ge+=k;--ve}break}if(--ve<N)break}}}}f(Ge),f(Je),ve-De<=32?u(De,ve,v,x,y,A,d,S,k,E,L):m(De,ve,v,x,y,A,d,S,k,E,L)}}},l={"uint32,1,0":function(u,p){return function(f){var m=f.data,h=0|f.offset,g=f.shape,v=f.stride,x=0|v[0],y=0|g[0],A=0|v[1],d=0|g[1],S=A,k=A;y<=32?u(0,y-1,m,h,x,A,y,d,S,k,1):p(0,y-1,m,h,x,A,y,d,S,k,1)}}};c.exports=function(u,p){var f=[p,u].join(","),m=l[f],h=function(v,x){var y=n(x),A=[x,v].join(","),d=a[A];return y?d(y[0],y[1]):d()}(u,p),g=function(v,x,y){var A=n(x),d=[x,v].join(","),S=s[d];return v.length>1&&A?S(y,A[0],A[1]):S(y)}(u,p,h);return m(h,g)}},446:function(c,o,t){"use strict";var i=t(7640),n={};c.exports=function(a){var s=a.order,l=a.dtype,u=[s,l].join(":"),p=n[u];return p||(n[u]=p=i(s,l)),p(a),a}},9618:function(c,o,t){var i=t(7163),n=typeof Float64Array<"u";function a(f,m){return f[0]-m[0]}function s(){var f,m=this.stride,h=new Array(m.length);for(f=0;f<h.length;++f)h[f]=[Math.abs(m[f]),f];h.sort(a);var g=new Array(h.length);for(f=0;f<g.length;++f)g[f]=h[f][1];return g}var l={T:function(f){function m(g){this.data=g}var h=m.prototype;return h.dtype=f,h.index=function(){return-1},h.size=0,h.dimension=-1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new m(this.data)},h.get=h.set=function(){},h.pick=function(){return null},function(g){return new m(g)}},0:function(f,m){function h(v,x){this.data=v,this.offset=x}var g=h.prototype;return g.dtype=f,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new h(this.data,this.offset)},g.pick=function(){return m(this.data)},g.valueOf=g.get=function(){return f==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(v){return f==="generic"?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,x,y,A){return new h(v,A)}},1:function(f,m,h){function g(x,y,A,d){this.data=x,this.shape=[y],this.stride=[A],this.offset=0|d}var v=g.prototype;return v.dtype=f,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(x,y){return f==="generic"?this.data.set(this.offset+this.stride[0]*x,y):this.data[this.offset+this.stride[0]*x]=y},v.get=function(x){return f==="generic"?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},v.index=function(x){return this.offset+this.stride[0]*x},v.hi=function(x){return new g(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},v.lo=function(x){var y=this.offset,A=0,d=this.shape[0],S=this.stride[0];return typeof x=="number"&&x>=0&&(y+=S*(A=0|x),d-=A),new g(this.data,d,S,y)},v.step=function(x){var y=this.shape[0],A=this.stride[0],d=this.offset,S=0,k=Math.ceil;return typeof x=="number"&&((S=0|x)<0?(d+=A*(y-1),y=k(-y/S)):y=k(y/S),A*=S),new g(this.data,y,A,d)},v.transpose=function(x){x=x===void 0?0:0|x;var y=this.shape,A=this.stride;return new g(this.data,y[x],A[x],this.offset)},v.pick=function(x){var y=[],A=[],d=this.offset;return typeof x=="number"&&x>=0?d=d+this.stride[0]*x|0:(y.push(this.shape[0]),A.push(this.stride[0])),(0,m[y.length+1])(this.data,y,A,d)},function(x,y,A,d){return new g(x,y[0],A[0],d)}},2:function(f,m,h){function g(x,y,A,d,S,k){this.data=x,this.shape=[y,A],this.stride=[d,S],this.offset=0|k}var v=g.prototype;return v.dtype=f,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(x,y,A){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y,A):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]=A},v.get=function(x,y){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y):this.data[this.offset+this.stride[0]*x+this.stride[1]*y]},v.index=function(x,y){return this.offset+this.stride[0]*x+this.stride[1]*y},v.hi=function(x,y){return new g(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},v.lo=function(x,y){var A=this.offset,d=0,S=this.shape[0],k=this.shape[1],E=this.stride[0],L=this.stride[1];return typeof x=="number"&&x>=0&&(A+=E*(d=0|x),S-=d),typeof y=="number"&&y>=0&&(A+=L*(d=0|y),k-=d),new g(this.data,S,k,E,L,A)},v.step=function(x,y){var A=this.shape[0],d=this.shape[1],S=this.stride[0],k=this.stride[1],E=this.offset,L=0,O=Math.ceil;return typeof x=="number"&&((L=0|x)<0?(E+=S*(A-1),A=O(-A/L)):A=O(A/L),S*=L),typeof y=="number"&&((L=0|y)<0?(E+=k*(d-1),d=O(-d/L)):d=O(d/L),k*=L),new g(this.data,A,d,S,k,E)},v.transpose=function(x,y){x=x===void 0?0:0|x,y=y===void 0?1:0|y;var A=this.shape,d=this.stride;return new g(this.data,A[x],A[y],d[x],d[y],this.offset)},v.pick=function(x,y){var A=[],d=[],S=this.offset;return typeof x=="number"&&x>=0?S=S+this.stride[0]*x|0:(A.push(this.shape[0]),d.push(this.stride[0])),typeof y=="number"&&y>=0?S=S+this.stride[1]*y|0:(A.push(this.shape[1]),d.push(this.stride[1])),(0,m[A.length+1])(this.data,A,d,S)},function(x,y,A,d){return new g(x,y[0],y[1],A[0],A[1],d)}},3:function(f,m,h){function g(x,y,A,d,S,k,E,L){this.data=x,this.shape=[y,A,d],this.stride=[S,k,E],this.offset=0|L}var v=g.prototype;return v.dtype=f,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var x=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),A=Math.abs(this.stride[2]);return x>y?y>A?[2,1,0]:x>A?[1,2,0]:[1,0,2]:x>A?[2,0,1]:A>y?[0,1,2]:[0,2,1]}}),v.set=function(x,y,A,d){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A,d):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A]=d},v.get=function(x,y,A){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A]},v.index=function(x,y,A){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A},v.hi=function(x,y,A){return new g(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof A!="number"||A<0?this.shape[2]:0|A,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(x,y,A){var d=this.offset,S=0,k=this.shape[0],E=this.shape[1],L=this.shape[2],O=this.stride[0],P=this.stride[1],F=this.stride[2];return typeof x=="number"&&x>=0&&(d+=O*(S=0|x),k-=S),typeof y=="number"&&y>=0&&(d+=P*(S=0|y),E-=S),typeof A=="number"&&A>=0&&(d+=F*(S=0|A),L-=S),new g(this.data,k,E,L,O,P,F,d)},v.step=function(x,y,A){var d=this.shape[0],S=this.shape[1],k=this.shape[2],E=this.stride[0],L=this.stride[1],O=this.stride[2],P=this.offset,F=0,U=Math.ceil;return typeof x=="number"&&((F=0|x)<0?(P+=E*(d-1),d=U(-d/F)):d=U(d/F),E*=F),typeof y=="number"&&((F=0|y)<0?(P+=L*(S-1),S=U(-S/F)):S=U(S/F),L*=F),typeof A=="number"&&((F=0|A)<0?(P+=O*(k-1),k=U(-k/F)):k=U(k/F),O*=F),new g(this.data,d,S,k,E,L,O,P)},v.transpose=function(x,y,A){x=x===void 0?0:0|x,y=y===void 0?1:0|y,A=A===void 0?2:0|A;var d=this.shape,S=this.stride;return new g(this.data,d[x],d[y],d[A],S[x],S[y],S[A],this.offset)},v.pick=function(x,y,A){var d=[],S=[],k=this.offset;return typeof x=="number"&&x>=0?k=k+this.stride[0]*x|0:(d.push(this.shape[0]),S.push(this.stride[0])),typeof y=="number"&&y>=0?k=k+this.stride[1]*y|0:(d.push(this.shape[1]),S.push(this.stride[1])),typeof A=="number"&&A>=0?k=k+this.stride[2]*A|0:(d.push(this.shape[2]),S.push(this.stride[2])),(0,m[d.length+1])(this.data,d,S,k)},function(x,y,A,d){return new g(x,y[0],y[1],y[2],A[0],A[1],A[2],d)}},4:function(f,m,h){function g(x,y,A,d,S,k,E,L,O,P){this.data=x,this.shape=[y,A,d,S],this.stride=[k,E,L,O],this.offset=0|P}var v=g.prototype;return v.dtype=f,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:h}),v.set=function(x,y,A,d,S){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d,S):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d]=S},v.get=function(x,y,A,d){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d]},v.index=function(x,y,A,d){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d},v.hi=function(x,y,A,d){return new g(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof A!="number"||A<0?this.shape[2]:0|A,typeof d!="number"||d<0?this.shape[3]:0|d,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(x,y,A,d){var S=this.offset,k=0,E=this.shape[0],L=this.shape[1],O=this.shape[2],P=this.shape[3],F=this.stride[0],U=this.stride[1],I=this.stride[2],N=this.stride[3];return typeof x=="number"&&x>=0&&(S+=F*(k=0|x),E-=k),typeof y=="number"&&y>=0&&(S+=U*(k=0|y),L-=k),typeof A=="number"&&A>=0&&(S+=I*(k=0|A),O-=k),typeof d=="number"&&d>=0&&(S+=N*(k=0|d),P-=k),new g(this.data,E,L,O,P,F,U,I,N,S)},v.step=function(x,y,A,d){var S=this.shape[0],k=this.shape[1],E=this.shape[2],L=this.shape[3],O=this.stride[0],P=this.stride[1],F=this.stride[2],U=this.stride[3],I=this.offset,N=0,W=Math.ceil;return typeof x=="number"&&((N=0|x)<0?(I+=O*(S-1),S=W(-S/N)):S=W(S/N),O*=N),typeof y=="number"&&((N=0|y)<0?(I+=P*(k-1),k=W(-k/N)):k=W(k/N),P*=N),typeof A=="number"&&((N=0|A)<0?(I+=F*(E-1),E=W(-E/N)):E=W(E/N),F*=N),typeof d=="number"&&((N=0|d)<0?(I+=U*(L-1),L=W(-L/N)):L=W(L/N),U*=N),new g(this.data,S,k,E,L,O,P,F,U,I)},v.transpose=function(x,y,A,d){x=x===void 0?0:0|x,y=y===void 0?1:0|y,A=A===void 0?2:0|A,d=d===void 0?3:0|d;var S=this.shape,k=this.stride;return new g(this.data,S[x],S[y],S[A],S[d],k[x],k[y],k[A],k[d],this.offset)},v.pick=function(x,y,A,d){var S=[],k=[],E=this.offset;return typeof x=="number"&&x>=0?E=E+this.stride[0]*x|0:(S.push(this.shape[0]),k.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(S.push(this.shape[1]),k.push(this.stride[1])),typeof A=="number"&&A>=0?E=E+this.stride[2]*A|0:(S.push(this.shape[2]),k.push(this.stride[2])),typeof d=="number"&&d>=0?E=E+this.stride[3]*d|0:(S.push(this.shape[3]),k.push(this.stride[3])),(0,m[S.length+1])(this.data,S,k,E)},function(x,y,A,d){return new g(x,y[0],y[1],y[2],y[3],A[0],A[1],A[2],A[3],d)}},5:function(f,m,h){function g(x,y,A,d,S,k,E,L,O,P,F,U){this.data=x,this.shape=[y,A,d,S,k],this.stride=[E,L,O,P,F],this.offset=0|U}var v=g.prototype;return v.dtype=f,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:h}),v.set=function(x,y,A,d,S,k){return f==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d+this.stride[4]*S,k):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d+this.stride[4]*S]=k},v.get=function(x,y,A,d,S){return f==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d+this.stride[4]*S):this.data[this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d+this.stride[4]*S]},v.index=function(x,y,A,d,S){return this.offset+this.stride[0]*x+this.stride[1]*y+this.stride[2]*A+this.stride[3]*d+this.stride[4]*S},v.hi=function(x,y,A,d,S){return new g(this.data,typeof x!="number"||x<0?this.shape[0]:0|x,typeof y!="number"||y<0?this.shape[1]:0|y,typeof A!="number"||A<0?this.shape[2]:0|A,typeof d!="number"||d<0?this.shape[3]:0|d,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(x,y,A,d,S){var k=this.offset,E=0,L=this.shape[0],O=this.shape[1],P=this.shape[2],F=this.shape[3],U=this.shape[4],I=this.stride[0],N=this.stride[1],W=this.stride[2],B=this.stride[3],V=this.stride[4];return typeof x=="number"&&x>=0&&(k+=I*(E=0|x),L-=E),typeof y=="number"&&y>=0&&(k+=N*(E=0|y),O-=E),typeof A=="number"&&A>=0&&(k+=W*(E=0|A),P-=E),typeof d=="number"&&d>=0&&(k+=B*(E=0|d),F-=E),typeof S=="number"&&S>=0&&(k+=V*(E=0|S),U-=E),new g(this.data,L,O,P,F,U,I,N,W,B,V,k)},v.step=function(x,y,A,d,S){var k=this.shape[0],E=this.shape[1],L=this.shape[2],O=this.shape[3],P=this.shape[4],F=this.stride[0],U=this.stride[1],I=this.stride[2],N=this.stride[3],W=this.stride[4],B=this.offset,V=0,q=Math.ceil;return typeof x=="number"&&((V=0|x)<0?(B+=F*(k-1),k=q(-k/V)):k=q(k/V),F*=V),typeof y=="number"&&((V=0|y)<0?(B+=U*(E-1),E=q(-E/V)):E=q(E/V),U*=V),typeof A=="number"&&((V=0|A)<0?(B+=I*(L-1),L=q(-L/V)):L=q(L/V),I*=V),typeof d=="number"&&((V=0|d)<0?(B+=N*(O-1),O=q(-O/V)):O=q(O/V),N*=V),typeof S=="number"&&((V=0|S)<0?(B+=W*(P-1),P=q(-P/V)):P=q(P/V),W*=V),new g(this.data,k,E,L,O,P,F,U,I,N,W,B)},v.transpose=function(x,y,A,d,S){x=x===void 0?0:0|x,y=y===void 0?1:0|y,A=A===void 0?2:0|A,d=d===void 0?3:0|d,S=S===void 0?4:0|S;var k=this.shape,E=this.stride;return new g(this.data,k[x],k[y],k[A],k[d],k[S],E[x],E[y],E[A],E[d],E[S],this.offset)},v.pick=function(x,y,A,d,S){var k=[],E=[],L=this.offset;return typeof x=="number"&&x>=0?L=L+this.stride[0]*x|0:(k.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?L=L+this.stride[1]*y|0:(k.push(this.shape[1]),E.push(this.stride[1])),typeof A=="number"&&A>=0?L=L+this.stride[2]*A|0:(k.push(this.shape[2]),E.push(this.stride[2])),typeof d=="number"&&d>=0?L=L+this.stride[3]*d|0:(k.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?L=L+this.stride[4]*S|0:(k.push(this.shape[4]),E.push(this.stride[4])),(0,m[k.length+1])(this.data,k,E,L)},function(x,y,A,d){return new g(x,y[0],y[1],y[2],y[3],y[4],A[0],A[1],A[2],A[3],A[4],d)}}};function u(f,m){var h=m===-1?"T":String(m),g=l[h];return m===-1?g(f):m===0?g(f,p[f][0]):g(f,p[f],s)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};c.exports=function(f,m,h,g){if(f===void 0)return(0,p.array[0])([]);typeof f=="number"&&(f=[f]),m===void 0&&(m=[f.length]);var v=m.length;if(h===void 0){h=new Array(v);for(var x=v-1,y=1;x>=0;--x)h[x]=y,y*=m[x]}if(g===void 0)for(g=0,x=0;x<v;++x)h[x]<0&&(g-=(m[x]-1)*h[x]);for(var A=function(S){if(i(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(f),d=p[A];d.length<=v+1;)d.push(u(A,d.length-1));return(0,d[v+1])(f,m,h,g)}},1278:function(c,o,t){"use strict";var i=t(2361),n=Math.pow(2,-1074),a=-1>>>0;c.exports=function(s,l){if(isNaN(s)||isNaN(l))return NaN;if(s===l)return s;if(s===0)return l<0?-n:n;var u=i.hi(s),p=i.lo(s);return l>s==s>0?p===a?(u+=1,p=0):p+=1:p===0?(p=a,u-=1):p-=1,i.pack(p,u)}},8406:function(c,o){o.vertexNormals=function(t,i,n){for(var a=i.length,s=new Array(a),l=n===void 0?1e-6:n,u=0;u<a;++u)s[u]=[0,0,0];for(u=0;u<t.length;++u)for(var p=t[u],f=0,m=p[p.length-1],h=p[0],g=0;g<p.length;++g){f=m,m=h,h=p[(g+1)%p.length];for(var v=i[f],x=i[m],y=i[h],A=new Array(3),d=0,S=new Array(3),k=0,E=0;E<3;++E)A[E]=v[E]-x[E],d+=A[E]*A[E],S[E]=y[E]-x[E],k+=S[E]*S[E];if(d*k>l){var L=s[m],O=1/Math.sqrt(d*k);for(E=0;E<3;++E){var P=(E+1)%3,F=(E+2)%3;L[E]+=O*(S[P]*A[F]-S[F]*A[P])}}}for(u=0;u<a;++u){L=s[u];var U=0;for(E=0;E<3;++E)U+=L[E]*L[E];if(U>l)for(O=1/Math.sqrt(U),E=0;E<3;++E)L[E]*=O;else for(E=0;E<3;++E)L[E]=0}return s},o.faceNormals=function(t,i,n){for(var a=t.length,s=new Array(a),l=n===void 0?1e-6:n,u=0;u<a;++u){for(var p=t[u],f=new Array(3),m=0;m<3;++m)f[m]=i[p[m]];var h=new Array(3),g=new Array(3);for(m=0;m<3;++m)h[m]=f[1][m]-f[0][m],g[m]=f[2][m]-f[0][m];var v=new Array(3),x=0;for(m=0;m<3;++m){var y=(m+1)%3,A=(m+2)%3;v[m]=h[y]*g[A]-h[A]*g[y],x+=v[m]*v[m]}for(x=x>l?1/Math.sqrt(x):0,m=0;m<3;++m)v[m]*=x;s[u]=v}return s}},4081:function(c){"use strict";c.exports=function(o,t,i,n,a,s,l,u,p,f){var m=t+s+f;if(h>0){var h=Math.sqrt(m+1);o[0]=.5*(l-p)/h,o[1]=.5*(u-n)/h,o[2]=.5*(i-s)/h,o[3]=.5*h}else{var g=Math.max(t,s,f);h=Math.sqrt(2*g-m+1),t>=g?(o[0]=.5*h,o[1]=.5*(a+i)/h,o[2]=.5*(u+n)/h,o[3]=.5*(l-p)/h):s>=g?(o[0]=.5*(i+a)/h,o[1]=.5*h,o[2]=.5*(p+l)/h,o[3]=.5*(u-n)/h):(o[0]=.5*(n+u)/h,o[1]=.5*(l+p)/h,o[2]=.5*h,o[3]=.5*(i-a)/h)}return o}},9977:function(c,o,t){"use strict";c.exports=function(g){var v=(g=g||{}).center||[0,0,0],x=g.rotation||[0,0,0,1],y=g.radius||1;v=[].slice.call(v,0,3),f(x=[].slice.call(x,0,4),x);var A=new m(x,v,Math.log(y));return A.setDistanceLimits(g.zoomMin,g.zoomMax),("eye"in g||"up"in g)&&A.lookAt(0,g.eye,g.center,g.up),A};var i=t(9215),n=t(6582),a=t(7399),s=t(7608),l=t(4081);function u(g,v,x){return Math.sqrt(Math.pow(g,2)+Math.pow(v,2)+Math.pow(x,2))}function p(g,v,x,y){return Math.sqrt(Math.pow(g,2)+Math.pow(v,2)+Math.pow(x,2)+Math.pow(y,2))}function f(g,v){var x=v[0],y=v[1],A=v[2],d=v[3],S=p(x,y,A,d);S>1e-6?(g[0]=x/S,g[1]=y/S,g[2]=A/S,g[3]=d/S):(g[0]=g[1]=g[2]=0,g[3]=1)}function m(g,v,x){this.radius=i([x]),this.center=i(v),this.rotation=i(g),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=m.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(g){this.radius.curve(g),this.center.curve(g),this.rotation.curve(g);var v=this.computedRotation;f(v,v);var x=this.computedMatrix;a(x,v);var y=this.computedCenter,A=this.computedEye,d=this.computedUp,S=Math.exp(this.computedRadius[0]);A[0]=y[0]+S*x[2],A[1]=y[1]+S*x[6],A[2]=y[2]+S*x[10],d[0]=x[1],d[1]=x[5],d[2]=x[9];for(var k=0;k<3;++k){for(var E=0,L=0;L<3;++L)E+=x[k+4*L]*A[L];x[12+k]=-E}},h.getMatrix=function(g,v){this.recalcMatrix(g);var x=this.computedMatrix;if(v){for(var y=0;y<16;++y)v[y]=x[y];return v}return x},h.idle=function(g){this.center.idle(g),this.radius.idle(g),this.rotation.idle(g)},h.flush=function(g){this.center.flush(g),this.radius.flush(g),this.rotation.flush(g)},h.pan=function(g,v,x,y){v=v||0,x=x||0,y=y||0,this.recalcMatrix(g);var A=this.computedMatrix,d=A[1],S=A[5],k=A[9],E=u(d,S,k);d/=E,S/=E,k/=E;var L=A[0],O=A[4],P=A[8],F=L*d+O*S+P*k,U=u(L-=d*F,O-=S*F,P-=k*F);L/=U,O/=U,P/=U;var I=A[2],N=A[6],W=A[10],B=I*d+N*S+W*k,V=I*L+N*O+W*P,q=u(I-=B*d+V*L,N-=B*S+V*O,W-=B*k+V*P);I/=q,N/=q,W/=q;var ne=L*v+d*x,$=O*v+S*x,K=P*v+k*x;this.center.move(g,ne,$,K);var ee=Math.exp(this.computedRadius[0]);ee=Math.max(1e-4,ee+y),this.radius.set(g,Math.log(ee))},h.rotate=function(g,v,x,y){this.recalcMatrix(g),v=v||0,x=x||0;var A=this.computedMatrix,d=A[0],S=A[4],k=A[8],E=A[1],L=A[5],O=A[9],P=A[2],F=A[6],U=A[10],I=v*d+x*E,N=v*S+x*L,W=v*k+x*O,B=-(F*W-U*N),V=-(U*I-P*W),q=-(P*N-F*I),ne=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(V,2)-Math.pow(q,2))),$=p(B,V,q,ne);$>1e-6?(B/=$,V/=$,q/=$,ne/=$):(B=V=q=0,ne=1);var K=this.computedRotation,ee=K[0],J=K[1],Z=K[2],te=K[3],oe=ee*ne+te*B+J*q-Z*V,se=J*ne+te*V+Z*B-ee*q,ce=Z*ne+te*q+ee*V-J*B,ye=te*ne-ee*B-J*V-Z*q;if(y){B=P,V=F,q=U;var me=Math.sin(y)/u(B,V,q);B*=me,V*=me,q*=me,ye=ye*(ne=Math.cos(v))-(oe=oe*ne+ye*B+se*q-ce*V)*B-(se=se*ne+ye*V+ce*B-oe*q)*V-(ce=ce*ne+ye*q+oe*V-se*B)*q}var fe=p(oe,se,ce,ye);fe>1e-6?(oe/=fe,se/=fe,ce/=fe,ye/=fe):(oe=se=ce=0,ye=1),this.rotation.set(g,oe,se,ce,ye)},h.lookAt=function(g,v,x,y){this.recalcMatrix(g),x=x||this.computedCenter,v=v||this.computedEye,y=y||this.computedUp;var A=this.computedMatrix;n(A,v,x,y);var d=this.computedRotation;l(d,A[0],A[1],A[2],A[4],A[5],A[6],A[8],A[9],A[10]),f(d,d),this.rotation.set(g,d[0],d[1],d[2],d[3]);for(var S=0,k=0;k<3;++k)S+=Math.pow(x[k]-v[k],2);this.radius.set(g,.5*Math.log(Math.max(S,1e-6))),this.center.set(g,x[0],x[1],x[2])},h.translate=function(g,v,x,y){this.center.move(g,v||0,x||0,y||0)},h.setMatrix=function(g,v){var x=this.computedRotation;l(x,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),f(x,x),this.rotation.set(g,x[0],x[1],x[2],x[3]);var y=this.computedMatrix;s(y,v);var A=y[15];if(Math.abs(A)>1e-6){var d=y[12]/A,S=y[13]/A,k=y[14]/A;this.recalcMatrix(g);var E=Math.exp(this.computedRadius[0]);this.center.set(g,d-y[2]*E,S-y[6]*E,k-y[10]*E),this.radius.idle(g)}else this.center.idle(g),this.radius.idle(g)},h.setDistance=function(g,v){v>0&&this.radius.set(g,Math.log(v))},h.setDistanceLimits=function(g,v){g=g>0?Math.log(g):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=v},h.getDistanceLimits=function(g){var v=this.radius.bounds;return g?(g[0]=Math.exp(v[0][0]),g[1]=Math.exp(v[1][0]),g):[Math.exp(v[0][0]),Math.exp(v[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(g){var v=this.lastT(),x=g.center;x&&this.center.set(v,x[0],x[1],x[2]);var y=g.rotation;y&&this.rotation.set(v,y[0],y[1],y[2],y[3]);var A=g.distance;A&&A>0&&this.radius.set(v,Math.log(A)),this.setDistanceLimits(g.zoomMin,g.zoomMax)}},1371:function(c,o,t){"use strict";var i=t(3233);c.exports=function(n,a,s){return i(s=s!==void 0?s+"":" ",a)+n}},3202:function(c){c.exports=function(o,t){t||(t=[0,""]),o=String(o);var i=parseFloat(o,10);return t[0]=i,t[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},3088:function(c,o,t){"use strict";c.exports=function(n,a){for(var s=0|a.length,l=n.length,u=[new Array(s),new Array(s)],p=0;p<s;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<l;++p){var f=n[p];u[0][f[0]].push(f),u[1][f[1]].push(f)}var m=[];for(p=0;p<s;++p)u[0][p].length+u[1][p].length===0&&m.push([p]);function h(S,k){var E=u[k][S[k]];E.splice(E.indexOf(S),1)}function g(S,k,E){for(var L,O,P,F=0;F<2;++F)if(u[F][k].length>0){L=u[F][k][0],P=F;break}O=L[1^P];for(var U=0;U<2;++U)for(var I=u[U][k],N=0;N<I.length;++N){var W=I[N],B=W[1^U];i(a[S],a[k],a[O],a[B])>0&&(L=W,O=B,P=U)}return E||L&&h(L,P),O}function v(S,k){var E=u[k][S][0],L=[S];h(E,k);for(var O=E[1^k];;){for(;O!==S;)L.push(O),O=g(L[L.length-2],O,!1);if(u[0][S].length+u[1][S].length===0)break;var P=L[L.length-1],F=S,U=L[1],I=g(P,F,!0);if(i(a[P],a[F],a[U],a[I])<0)break;L.push(S),O=g(P,F)}return L}function x(S,k){return k[1]===k[k.length-1]}for(p=0;p<s;++p)for(var y=0;y<2;++y){for(var A=[];u[y][p].length>0;){u[0][p].length;var d=v(p,y);x(0,d)?A.push.apply(A,d):(A.length>0&&m.push(A),A=d)}A.length>0&&m.push(A)}return m};var i=t(3140)},5609:function(c,o,t){"use strict";c.exports=function(n,a){for(var s=i(n,a.length),l=new Array(a.length),u=new Array(a.length),p=[],f=0;f<a.length;++f){var m=s[f].length;u[f]=m,l[f]=!0,m<=1&&p.push(f)}for(;p.length>0;){l[y=p.pop()]=!1;var h=s[y];for(f=0;f<h.length;++f){var g=h[f];--u[g]==0&&p.push(g)}}var v=new Array(a.length),x=[];for(f=0;f<a.length;++f)if(l[f]){var y=x.length;v[f]=y,x.push(a[f])}else v[f]=-1;var A=[];for(f=0;f<n.length;++f){var d=n[f];l[d[0]]&&l[d[1]]&&A.push([v[d[0]],v[d[1]]])}return[A,x]};var i=t(3134)},2095:function(c,o,t){"use strict";c.exports=function(m,h){var g=p(m,h);m=g[0];for(var v=(h=g[1]).length,x=(m.length,i(m,h.length)),y=0;y<v;++y)if(x[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var A=n(m,h),d=(A=A.filter(function(ke){for(var Ce=ke.length,de=[0],ae=0;ae<Ce;++ae){var re=h[ke[ae]],he=h[ke[(ae+1)%Ce]],Se=s(-re[0],re[1]),xe=s(-re[0],he[1]),Te=s(he[0],re[1]),Ae=s(he[0],he[1]);de=l(de,l(l(Se,xe),l(Te,Ae)))}return de[de.length-1]>0})).length,S=new Array(d),k=new Array(d);for(y=0;y<d;++y){S[y]=y;var E=new Array(d),L=A[y].map(function(ke){return h[ke]}),O=a([L]),P=0;e:for(var F=0;F<d;++F)if(E[F]=0,y!==F){for(var U=(pe=A[F]).length,I=0;I<U;++I){var N=O(h[pe[I]]);if(N!==0){N<0&&(E[F]=1,P+=1);continue e}}E[F]=1,P+=1}k[y]=[P,y,E]}for(k.sort(function(ke,Ce){return Ce[0]-ke[0]}),y=0;y<d;++y){var W=(E=k[y])[1],B=E[2];for(F=0;F<d;++F)B[F]&&(S[F]=W)}var V=function(ke){for(var Ce=new Array(ke),de=0;de<ke;++de)Ce[de]=[];return Ce}(d);for(y=0;y<d;++y)V[y].push(S[y]),V[S[y]].push(y);var q={},ne=f(v,!1);for(y=0;y<d;++y)for(U=(pe=A[y]).length,F=0;F<U;++F){var $=pe[F],K=pe[(F+1)%U],ee=Math.min($,K)+":"+Math.max($,K);if(ee in q){var J=q[ee];V[J].push(y),V[y].push(J),ne[$]=ne[K]=!0}else q[ee]=y}function Z(ke){for(var Ce=ke.length,de=0;de<Ce;++de)if(!ne[ke[de]])return!1;return!0}var te=[],oe=f(d,-1);for(y=0;y<d;++y)S[y]!==y||Z(A[y])?oe[y]=-1:(te.push(y),oe[y]=0);for(g=[];te.length>0;){var se=te.pop(),ce=V[se];u(ce,function(ke,Ce){return ke-Ce});var ye,me=ce.length,fe=oe[se];for(fe===0&&(ye=[pe=A[se]]),y=0;y<me;++y){var pe,ge=ce[y];oe[ge]>=0||(oe[ge]=1^fe,te.push(ge),fe===0&&(Z(pe=A[ge])||(pe.reverse(),ye.push(pe))))}fe===0&&g.push(ye)}return g};var i=t(3134),n=t(3088),a=t(5085),s=t(5250),l=t(8210),u=t(1682),p=t(5609);function f(m,h){for(var g=new Array(m),v=0;v<m;++v)g[v]=h;return g}},5085:function(c,o,t){c.exports=function(f){for(var m=f.length,h=[],g=[],v=0;v<m;++v)for(var x=f[v],y=x.length,A=y-1,d=0;d<y;A=d++){var S=x[A],k=x[d];S[0]===k[0]?g.push([S,k]):h.push([S,k])}if(h.length===0)return g.length===0?p:(E=u(g),function(P){return E(P[0],P[1])?0:1});var E,L=n(h),O=function(P,F){return function(U){var I=s.le(F,U[0]);if(I<0)return 1;var N=P[I];if(!N){if(!(I>0&&F[I]===U[0]))return 1;N=P[I-1]}for(var W=1;N;){var B=N.key,V=i(U,B[0],B[1]);if(B[0][0]<B[1][0])if(V<0)N=N.left;else{if(!(V>0))return 0;W=-1,N=N.right}else if(V>0)N=N.left;else{if(!(V<0))return 0;W=1,N=N.right}}return W}}(L.slabs,L.coordinates);return g.length===0?O:function(P,F){return function(U){return P(U[0],U[1])?0:F(U)}}(u(g),O)};var i=t(3250)[3],n=t(4209),a=t(3352),s=t(2478);function l(){return!0}function u(f){for(var m={},h=0;h<f.length;++h){var g=f[h],v=g[0][0],x=g[0][1],y=g[1][1],A=[Math.min(x,y),Math.max(x,y)];v in m?m[v].push(A):m[v]=[A]}var d={},S=Object.keys(m);for(h=0;h<S.length;++h){var k=m[S[h]];d[S[h]]=a(k)}return function(E){return function(L,O){var P=E[L];return!!P&&!!P.queryPoint(O,l)}}(d)}function p(f){return 1}},9346:function(c){"use strict";var o=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);c.exports=function(n,a,s,l,u){o.length<l.length&&(o=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var p=0;p<l.length;++p)o[p]=n[p]-l[p],t[p]=a[p]-n[p],i[p]=s[p]-n[p];var f=0,m=0,h=0,g=0,v=0,x=0;for(p=0;p<l.length;++p){var y=t[p],A=i[p],d=o[p];f+=y*y,m+=y*A,h+=A*A,g+=d*y,v+=d*A,x+=d*d}var S,k,E,L,O,P=Math.abs(f*h-m*m),F=m*v-h*g,U=m*g-f*v;if(F+U<=P)if(F<0)U<0&&g<0?(U=0,-g>=f?(F=1,S=f+2*g+x):S=g*(F=-g/f)+x):(F=0,v>=0?(U=0,S=x):-v>=h?(U=1,S=h+2*v+x):S=v*(U=-v/h)+x);else if(U<0)U=0,g>=0?(F=0,S=x):-g>=f?(F=1,S=f+2*g+x):S=g*(F=-g/f)+x;else{var I=1/P;S=(F*=I)*(f*F+m*(U*=I)+2*g)+U*(m*F+h*U+2*v)+x}else F<0?(E=h+v)>(k=m+g)?(L=E-k)>=(O=f-2*m+h)?(F=1,U=0,S=f+2*g+x):S=(F=L/O)*(f*F+m*(U=1-F)+2*g)+U*(m*F+h*U+2*v)+x:(F=0,E<=0?(U=1,S=h+2*v+x):v>=0?(U=0,S=x):S=v*(U=-v/h)+x):U<0?(E=f+g)>(k=m+v)?(L=E-k)>=(O=f-2*m+h)?(U=1,F=0,S=h+2*v+x):S=(F=1-(U=L/O))*(f*F+m*U+2*g)+U*(m*F+h*U+2*v)+x:(U=0,E<=0?(F=1,S=f+2*g+x):g>=0?(F=0,S=x):S=g*(F=-g/f)+x):(L=h+v-m-g)<=0?(F=0,U=1,S=h+2*v+x):L>=(O=f-2*m+h)?(F=1,U=0,S=f+2*g+x):S=(F=L/O)*(f*F+m*(U=1-F)+2*g)+U*(m*F+h*U+2*v)+x;var N=1-F-U;for(p=0;p<l.length;++p)u[p]=N*n[p]+F*a[p]+U*s[p];return S<0?0:S}},8648:function(c,o,t){c.exports=t(783)},2653:function(c,o,t){"use strict";var i=t(3865);c.exports=function(n,a){for(var s=n.length,l=new Array(s),u=0;u<s;++u)l[u]=i(n[u],a[u]);return l}},5838:function(c,o,t){"use strict";c.exports=function(n){for(var a=new Array(n.length),s=0;s<n.length;++s)a[s]=i(n[s]);return a};var i=t(7842)},8987:function(c,o,t){"use strict";var i=t(7842),n=t(6504);c.exports=function(a,s){for(var l=i(s),u=a.length,p=new Array(u),f=0;f<u;++f)p[f]=n(a[f],l);return p}},544:function(c,o,t){"use strict";var i=t(5572);c.exports=function(n,a){for(var s=n.length,l=new Array(s),u=0;u<s;++u)l[u]=i(n[u],a[u]);return l}},5771:function(c,o,t){"use strict";var i=t(8507),n=t(3788),a=t(2419);c.exports=function(s){s.sort(n);for(var l=s.length,u=0,p=0;p<l;++p){var f=s[p],m=a(f);if(m!==0){if(u>0){var h=s[u-1];if(i(f,h)===0&&a(h)!==m){u-=1;continue}}s[u++]=f}}return s.length=u,s}},3233:function(c){"use strict";var o,t="";c.exports=function(i,n){if(typeof i!="string")throw new TypeError("expected a string");if(n===1)return i;if(n===2)return i+i;var a=i.length*n;if(o!==i||o===void 0)o=i,t="";else if(t.length>=a)return t.substr(0,a);for(;a>t.length&&n>1;)1&n&&(t+=i),n>>=1,i+=i;return t=(t+=i).substr(0,a)}},3025:function(c,o,t){c.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(c){"use strict";c.exports=function(o){for(var t=o.length,i=o[o.length-1],n=t,a=t-2;a>=0;--a){var s=i;(p=(u=o[a])-((i=s+u)-s))&&(o[--n]=i,i=p)}var l=0;for(a=n;a<t;++a){var u,p;(p=(u=i)-((i=(s=o[a])+u)-s))&&(o[l++]=p)}return o[l++]=i,o.length=l,o}},2962:function(c,o,t){"use strict";var i=t(5250),n=t(8210),a=t(3012),s=t(7004);function l(v,x,y,A){return function(d){return A(v(y(d[0][0],d[1][1]),y(-d[0][1],d[1][0])))}}function u(v,x,y,A){return function(d){return A(v(x(v(y(d[1][1],d[2][2]),y(-d[1][2],d[2][1])),d[0][0]),v(x(v(y(d[1][0],d[2][2]),y(-d[1][2],d[2][0])),-d[0][1]),x(v(y(d[1][0],d[2][1]),y(-d[1][1],d[2][0])),d[0][2]))))}}function p(v,x,y,A){return function(d){return A(v(v(x(v(x(v(y(d[2][2],d[3][3]),y(-d[2][3],d[3][2])),d[1][1]),v(x(v(y(d[2][1],d[3][3]),y(-d[2][3],d[3][1])),-d[1][2]),x(v(y(d[2][1],d[3][2]),y(-d[2][2],d[3][1])),d[1][3]))),d[0][0]),x(v(x(v(y(d[2][2],d[3][3]),y(-d[2][3],d[3][2])),d[1][0]),v(x(v(y(d[2][0],d[3][3]),y(-d[2][3],d[3][0])),-d[1][2]),x(v(y(d[2][0],d[3][2]),y(-d[2][2],d[3][0])),d[1][3]))),-d[0][1])),v(x(v(x(v(y(d[2][1],d[3][3]),y(-d[2][3],d[3][1])),d[1][0]),v(x(v(y(d[2][0],d[3][3]),y(-d[2][3],d[3][0])),-d[1][1]),x(v(y(d[2][0],d[3][1]),y(-d[2][1],d[3][0])),d[1][3]))),d[0][2]),x(v(x(v(y(d[2][1],d[3][2]),y(-d[2][2],d[3][1])),d[1][0]),v(x(v(y(d[2][0],d[3][2]),y(-d[2][2],d[3][0])),-d[1][1]),x(v(y(d[2][0],d[3][1]),y(-d[2][1],d[3][0])),d[1][2]))),-d[0][3]))))}}function f(v,x,y,A){return function(d){return A(v(v(x(v(v(x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][2]),v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),-d[2][3]),x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][4]))),d[1][1]),x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][1]),v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][3]),x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][4]))),-d[1][2])),v(x(v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][1]),v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][2]),x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][4]))),d[1][3]),x(v(x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][1]),v(x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),-d[2][2]),x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][3]))),-d[1][4]))),d[0][0]),x(v(v(x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][2]),v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),-d[2][3]),x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][4]))),d[1][0]),x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][3]),x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),d[2][4]))),-d[1][2])),v(x(v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][2]),x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][4]))),d[1][3]),x(v(x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][0]),v(x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][2]),x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][3]))),-d[1][4]))),-d[0][1])),v(x(v(v(x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][1]),v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][3]),x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][4]))),d[1][0]),x(v(x(v(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][3]),x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),d[2][4]))),-d[1][1])),v(x(v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][4]))),d[1][3]),x(v(x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][3]))),-d[1][4]))),d[0][2]),v(x(v(v(x(v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][1]),v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][2]),x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][4]))),d[1][0]),x(v(x(v(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][2]),x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][4]))),-d[1][1])),v(x(v(x(v(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][4]))),d[1][2]),x(v(x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][2]))),-d[1][4]))),-d[0][3]),x(v(v(x(v(x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][1]),v(x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),-d[2][2]),x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][3]))),d[1][0]),x(v(x(v(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][0]),v(x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][2]),x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][3]))),-d[1][1])),v(x(v(x(v(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][3]))),d[1][2]),x(v(x(v(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][0]),v(x(v(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),-d[2][1]),x(v(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][2]))),-d[1][3]))),d[0][4])))))}}function m(v){return(v===2?l:v===3?u:v===4?p:v===5?f:void 0)(n,a,i,s)}var h=[function(){return[0]},function(v){return[v[0][0]]}];function g(v,x,y,A,d,S,k,E){return function(L){switch(L.length){case 0:return v(L);case 1:return x(L);case 2:return y(L);case 3:return A(L);case 4:return d(L);case 5:return S(L)}var O=k[L.length];return O||(O=k[L.length]=E(L.length)),O(L)}}(function(){for(;h.length<6;)h.push(m(h.length));c.exports=g.apply(void 0,h.concat([h,m]));for(var v=0;v<h.length;++v)c.exports[v]=h[v]})()},1944:function(c,o,t){"use strict";var i=t(5250),n=t(8210);c.exports=function(a,s){for(var l=i(a[0],s[0]),u=1;u<a.length;++u)l=n(l,i(a[u],s[u]));return l}},2646:function(c,o,t){"use strict";var i=t(5250),n=t(8210),a=t(8545),s=t(3012);function l(x){return(x===3?u:x===4?p:x===5?f:m)(n,a,i,s)}function u(x,y,A,d){return function(S,k,E){var L=A(S[0],S[0]),O=d(L,k[0]),P=d(L,E[0]),F=A(k[0],k[0]),U=d(F,S[0]),I=d(F,E[0]),N=A(E[0],E[0]),W=d(N,S[0]),B=d(N,k[0]),V=x(y(B,I),y(U,O)),q=y(W,P),ne=y(V,q);return ne[ne.length-1]}}function p(x,y,A,d){return function(S,k,E,L){var O=x(A(S[0],S[0]),A(S[1],S[1])),P=d(O,k[0]),F=d(O,E[0]),U=d(O,L[0]),I=x(A(k[0],k[0]),A(k[1],k[1])),N=d(I,S[0]),W=d(I,E[0]),B=d(I,L[0]),V=x(A(E[0],E[0]),A(E[1],E[1])),q=d(V,S[0]),ne=d(V,k[0]),$=d(V,L[0]),K=x(A(L[0],L[0]),A(L[1],L[1])),ee=d(K,S[0]),J=d(K,k[0]),Z=d(K,E[0]),te=x(x(d(y(Z,$),k[1]),x(d(y(J,B),-E[1]),d(y(ne,W),L[1]))),x(d(y(J,B),S[1]),x(d(y(ee,U),-k[1]),d(y(N,P),L[1])))),oe=x(x(d(y(Z,$),S[1]),x(d(y(ee,U),-E[1]),d(y(q,F),L[1]))),x(d(y(ne,W),S[1]),x(d(y(q,F),-k[1]),d(y(N,P),E[1])))),se=y(te,oe);return se[se.length-1]}}function f(x,y,A,d){return function(S,k,E,L,O){var P=x(A(S[0],S[0]),x(A(S[1],S[1]),A(S[2],S[2]))),F=d(P,k[0]),U=d(P,E[0]),I=d(P,L[0]),N=d(P,O[0]),W=x(A(k[0],k[0]),x(A(k[1],k[1]),A(k[2],k[2]))),B=d(W,S[0]),V=d(W,E[0]),q=d(W,L[0]),ne=d(W,O[0]),$=x(A(E[0],E[0]),x(A(E[1],E[1]),A(E[2],E[2]))),K=d($,S[0]),ee=d($,k[0]),J=d($,L[0]),Z=d($,O[0]),te=x(A(L[0],L[0]),x(A(L[1],L[1]),A(L[2],L[2]))),oe=d(te,S[0]),se=d(te,k[0]),ce=d(te,E[0]),ye=d(te,O[0]),me=x(A(O[0],O[0]),x(A(O[1],O[1]),A(O[2],O[2]))),fe=d(me,S[0]),pe=d(me,k[0]),ge=d(me,E[0]),ke=d(me,L[0]),Ce=x(x(x(d(x(d(y(ke,ye),E[1]),x(d(y(ge,Z),-L[1]),d(y(ce,J),O[1]))),k[2]),x(d(x(d(y(ke,ye),k[1]),x(d(y(pe,ne),-L[1]),d(y(se,q),O[1]))),-E[2]),d(x(d(y(ge,Z),k[1]),x(d(y(pe,ne),-E[1]),d(y(ee,V),O[1]))),L[2]))),x(d(x(d(y(ce,J),k[1]),x(d(y(se,q),-E[1]),d(y(ee,V),L[1]))),-O[2]),x(d(x(d(y(ke,ye),k[1]),x(d(y(pe,ne),-L[1]),d(y(se,q),O[1]))),S[2]),d(x(d(y(ke,ye),S[1]),x(d(y(fe,N),-L[1]),d(y(oe,I),O[1]))),-k[2])))),x(x(d(x(d(y(pe,ne),S[1]),x(d(y(fe,N),-k[1]),d(y(B,F),O[1]))),L[2]),x(d(x(d(y(se,q),S[1]),x(d(y(oe,I),-k[1]),d(y(B,F),L[1]))),-O[2]),d(x(d(y(ce,J),k[1]),x(d(y(se,q),-E[1]),d(y(ee,V),L[1]))),S[2]))),x(d(x(d(y(ce,J),S[1]),x(d(y(oe,I),-E[1]),d(y(K,U),L[1]))),-k[2]),x(d(x(d(y(se,q),S[1]),x(d(y(oe,I),-k[1]),d(y(B,F),L[1]))),E[2]),d(x(d(y(ee,V),S[1]),x(d(y(K,U),-k[1]),d(y(B,F),E[1]))),-L[2]))))),de=x(x(x(d(x(d(y(ke,ye),E[1]),x(d(y(ge,Z),-L[1]),d(y(ce,J),O[1]))),S[2]),d(x(d(y(ke,ye),S[1]),x(d(y(fe,N),-L[1]),d(y(oe,I),O[1]))),-E[2])),x(d(x(d(y(ge,Z),S[1]),x(d(y(fe,N),-E[1]),d(y(K,U),O[1]))),L[2]),d(x(d(y(ce,J),S[1]),x(d(y(oe,I),-E[1]),d(y(K,U),L[1]))),-O[2]))),x(x(d(x(d(y(ge,Z),k[1]),x(d(y(pe,ne),-E[1]),d(y(ee,V),O[1]))),S[2]),d(x(d(y(ge,Z),S[1]),x(d(y(fe,N),-E[1]),d(y(K,U),O[1]))),-k[2])),x(d(x(d(y(pe,ne),S[1]),x(d(y(fe,N),-k[1]),d(y(B,F),O[1]))),E[2]),d(x(d(y(ee,V),S[1]),x(d(y(K,U),-k[1]),d(y(B,F),E[1]))),-O[2])))),ae=y(Ce,de);return ae[ae.length-1]}}function m(x,y,A,d){return function(S,k,E,L,O,P){var F=x(x(A(S[0],S[0]),A(S[1],S[1])),x(A(S[2],S[2]),A(S[3],S[3]))),U=d(F,k[0]),I=d(F,E[0]),N=d(F,L[0]),W=d(F,O[0]),B=d(F,P[0]),V=x(x(A(k[0],k[0]),A(k[1],k[1])),x(A(k[2],k[2]),A(k[3],k[3]))),q=d(V,S[0]),ne=d(V,E[0]),$=d(V,L[0]),K=d(V,O[0]),ee=d(V,P[0]),J=x(x(A(E[0],E[0]),A(E[1],E[1])),x(A(E[2],E[2]),A(E[3],E[3]))),Z=d(J,S[0]),te=d(J,k[0]),oe=d(J,L[0]),se=d(J,O[0]),ce=d(J,P[0]),ye=x(x(A(L[0],L[0]),A(L[1],L[1])),x(A(L[2],L[2]),A(L[3],L[3]))),me=d(ye,S[0]),fe=d(ye,k[0]),pe=d(ye,E[0]),ge=d(ye,O[0]),ke=d(ye,P[0]),Ce=x(x(A(O[0],O[0]),A(O[1],O[1])),x(A(O[2],O[2]),A(O[3],O[3]))),de=d(Ce,S[0]),ae=d(Ce,k[0]),re=d(Ce,E[0]),he=d(Ce,L[0]),Se=d(Ce,P[0]),xe=x(x(A(P[0],P[0]),A(P[1],P[1])),x(A(P[2],P[2]),A(P[3],P[3]))),Te=d(xe,S[0]),Ae=d(xe,k[0]),Pe=d(xe,E[0]),De=d(xe,L[0]),ve=d(xe,O[0]),we=x(x(x(d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),E[2]),d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),-L[2])),x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),O[2]),d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),-P[2]))),k[3]),x(d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),k[2]),d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),-L[2])),x(d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),O[2]),d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),-P[2]))),-E[3]),d(x(x(d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),k[2]),d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),O[2]),d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),-P[2]))),L[3]))),x(x(d(x(x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),k[2]),d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),L[2]),d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),-P[2]))),-O[3]),d(x(x(d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),k[2]),d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),-E[2])),x(d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),L[2]),d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),-O[2]))),P[3])),x(d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),k[2]),d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),-L[2])),x(d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),O[2]),d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),-P[2]))),S[3]),d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-L[2])),x(d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),O[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-P[2]))),-k[3])))),x(x(x(d(x(x(d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),O[2]),d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),-P[2]))),L[3]),d(x(x(d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),S[2]),d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),L[2]),d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),-P[2]))),-O[3])),x(d(x(x(d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),S[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-k[2])),x(d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),L[2]),d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),-O[2]))),P[3]),d(x(x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),k[2]),d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),L[2]),d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),-P[2]))),S[3]))),x(x(d(x(x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),S[2]),d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),L[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-P[2]))),-k[3]),d(x(x(d(x(d(y(De,ke),k[1]),x(d(y(Ae,ee),-L[1]),d(y(fe,$),P[1]))),S[2]),d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),L[2]),d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),-P[2]))),E[3])),x(d(x(x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),S[2]),d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-P[2]))),-L[3]),d(x(x(d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),S[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-k[2])),x(d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-L[2]))),P[3]))))),Ee=x(x(x(d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),E[2]),d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),-L[2])),x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),O[2]),d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),-P[2]))),S[3]),x(d(x(x(d(x(d(y(ve,Se),L[1]),x(d(y(De,ke),-O[1]),d(y(he,ge),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-L[2])),x(d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),O[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-P[2]))),-E[3]),d(x(x(d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),O[2]),d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),-P[2]))),L[3]))),x(x(d(x(x(d(x(d(y(De,ke),E[1]),x(d(y(Pe,ce),-L[1]),d(y(pe,oe),P[1]))),S[2]),d(x(d(y(De,ke),S[1]),x(d(y(Te,B),-L[1]),d(y(me,N),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),L[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-P[2]))),-O[3]),d(x(x(d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),S[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-E[2])),x(d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),L[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-O[2]))),P[3])),x(d(x(x(d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),k[2]),d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),O[2]),d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),-P[2]))),S[3]),d(x(x(d(x(d(y(ve,Se),E[1]),x(d(y(Pe,ce),-O[1]),d(y(re,se),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-E[2])),x(d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),O[2]),d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),-P[2]))),-k[3])))),x(x(x(d(x(x(d(x(d(y(ve,Se),k[1]),x(d(y(Ae,ee),-O[1]),d(y(ae,K),P[1]))),S[2]),d(x(d(y(ve,Se),S[1]),x(d(y(Te,B),-O[1]),d(y(de,W),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),O[2]),d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),-P[2]))),E[3]),d(x(x(d(x(d(y(Pe,ce),k[1]),x(d(y(Ae,ee),-E[1]),d(y(te,ne),P[1]))),S[2]),d(x(d(y(Pe,ce),S[1]),x(d(y(Te,B),-E[1]),d(y(Z,I),P[1]))),-k[2])),x(d(x(d(y(Ae,ee),S[1]),x(d(y(Te,B),-k[1]),d(y(q,U),P[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-P[2]))),-O[3])),x(d(x(x(d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),S[2]),d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),-k[2])),x(d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-O[2]))),P[3]),d(x(x(d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),k[2]),d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),-E[2])),x(d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),L[2]),d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),-O[2]))),S[3]))),x(x(d(x(x(d(x(d(y(he,ge),E[1]),x(d(y(re,se),-L[1]),d(y(pe,oe),O[1]))),S[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-E[2])),x(d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),L[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-O[2]))),-k[3]),d(x(x(d(x(d(y(he,ge),k[1]),x(d(y(ae,K),-L[1]),d(y(fe,$),O[1]))),S[2]),d(x(d(y(he,ge),S[1]),x(d(y(de,W),-L[1]),d(y(me,N),O[1]))),-k[2])),x(d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),L[2]),d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),-O[2]))),E[3])),x(d(x(x(d(x(d(y(re,se),k[1]),x(d(y(ae,K),-E[1]),d(y(te,ne),O[1]))),S[2]),d(x(d(y(re,se),S[1]),x(d(y(de,W),-E[1]),d(y(Z,I),O[1]))),-k[2])),x(d(x(d(y(ae,K),S[1]),x(d(y(de,W),-k[1]),d(y(q,U),O[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-O[2]))),-L[3]),d(x(x(d(x(d(y(pe,oe),k[1]),x(d(y(fe,$),-E[1]),d(y(te,ne),L[1]))),S[2]),d(x(d(y(pe,oe),S[1]),x(d(y(me,N),-E[1]),d(y(Z,I),L[1]))),-k[2])),x(d(x(d(y(fe,$),S[1]),x(d(y(me,N),-k[1]),d(y(q,U),L[1]))),E[2]),d(x(d(y(te,ne),S[1]),x(d(y(Z,I),-k[1]),d(y(q,U),E[1]))),-L[2]))),O[3]))))),Fe=y(we,Ee);return Fe[Fe.length-1]}}var h=[function(){return 0},function(){return 0},function(){return 0}];function g(x){var y=h[x.length];return y||(y=h[x.length]=l(x.length)),y.apply(void 0,x)}function v(x,y,A,d,S,k,E,L){return function(O,P,F,U,I,N){switch(arguments.length){case 0:case 1:return 0;case 2:return d(O,P);case 3:return S(O,P,F);case 4:return k(O,P,F,U);case 5:return E(O,P,F,U,I);case 6:return L(O,P,F,U,I,N)}for(var W=new Array(arguments.length),B=0;B<arguments.length;++B)W[B]=arguments[B];return x(W)}}(function(){for(;h.length<=6;)h.push(l(h.length));c.exports=v.apply(void 0,[g].concat(h));for(var x=0;x<=6;++x)c.exports[x]=h[x]})()},727:function(c,o,t){"use strict";var i=t(2962);function n(h){return(h===2?a:h===3?s:h===4?l:h===5?u:p)(h<6?i[h]:i)}function a(h){return function(g,v){return[h([[+v[0],+g[0][1]],[+v[1],+g[1][1]]]),h([[+g[0][0],+v[0]],[+g[1][0],+v[1]]]),h(g)]}}function s(h){return function(g,v){return[h([[+v[0],+g[0][1],+g[0][2]],[+v[1],+g[1][1],+g[1][2]],[+v[2],+g[2][1],+g[2][2]]]),h([[+g[0][0],+v[0],+g[0][2]],[+g[1][0],+v[1],+g[1][2]],[+g[2][0],+v[2],+g[2][2]]]),h([[+g[0][0],+g[0][1],+v[0]],[+g[1][0],+g[1][1],+v[1]],[+g[2][0],+g[2][1],+v[2]]]),h(g)]}}function l(h){return function(g,v){return[h([[+v[0],+g[0][1],+g[0][2],+g[0][3]],[+v[1],+g[1][1],+g[1][2],+g[1][3]],[+v[2],+g[2][1],+g[2][2],+g[2][3]],[+v[3],+g[3][1],+g[3][2],+g[3][3]]]),h([[+g[0][0],+v[0],+g[0][2],+g[0][3]],[+g[1][0],+v[1],+g[1][2],+g[1][3]],[+g[2][0],+v[2],+g[2][2],+g[2][3]],[+g[3][0],+v[3],+g[3][2],+g[3][3]]]),h([[+g[0][0],+g[0][1],+v[0],+g[0][3]],[+g[1][0],+g[1][1],+v[1],+g[1][3]],[+g[2][0],+g[2][1],+v[2],+g[2][3]],[+g[3][0],+g[3][1],+v[3],+g[3][3]]]),h([[+g[0][0],+g[0][1],+g[0][2],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+v[3]]]),h(g)]}}function u(h){return function(g,v){return[h([[+v[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4]],[+v[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4]],[+v[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4]],[+v[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4]],[+v[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4]]]),h([[+g[0][0],+v[0],+g[0][2],+g[0][3],+g[0][4]],[+g[1][0],+v[1],+g[1][2],+g[1][3],+g[1][4]],[+g[2][0],+v[2],+g[2][2],+g[2][3],+g[2][4]],[+g[3][0],+v[3],+g[3][2],+g[3][3],+g[3][4]],[+g[4][0],+v[4],+g[4][2],+g[4][3],+g[4][4]]]),h([[+g[0][0],+g[0][1],+v[0],+g[0][3],+g[0][4]],[+g[1][0],+g[1][1],+v[1],+g[1][3],+g[1][4]],[+g[2][0],+g[2][1],+v[2],+g[2][3],+g[2][4]],[+g[3][0],+g[3][1],+v[3],+g[3][3],+g[3][4]],[+g[4][0],+g[4][1],+v[4],+g[4][3],+g[4][4]]]),h([[+g[0][0],+g[0][1],+g[0][2],+v[0],+g[0][4]],[+g[1][0],+g[1][1],+g[1][2],+v[1],+g[1][4]],[+g[2][0],+g[2][1],+g[2][2],+v[2],+g[2][4]],[+g[3][0],+g[3][1],+g[3][2],+v[3],+g[3][4]],[+g[4][0],+g[4][1],+g[4][2],+v[4],+g[4][4]]]),h([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+v[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+v[4]]]),h(g)]}}function p(h){return function(g,v){return[h([[+v[0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+v[1],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+v[2],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+v[3],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+v[4],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+v[5],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),h([[+g[0][0],+v[0],+g[0][2],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+v[1],+g[1][2],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+v[2],+g[2][2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+v[3],+g[3][2],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+v[4],+g[4][2],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+v[5],+g[5][2],+g[5][3],+g[5][4],+g[5][5]]]),h([[+g[0][0],+g[0][1],+v[0],+g[0][3],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+v[1],+g[1][3],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+v[2],+g[2][3],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+v[3],+g[3][3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+v[4],+g[4][3],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+v[5],+g[5][3],+g[5][4],+g[5][5]]]),h([[+g[0][0],+g[0][1],+g[0][2],+v[0],+g[0][4],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+v[1],+g[1][4],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+v[2],+g[2][4],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+v[3],+g[3][4],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+v[4],+g[4][4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+v[5],+g[5][4],+g[5][5]]]),h([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+v[0],+g[0][5]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+v[1],+g[1][5]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+v[2],+g[2][5]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+v[3],+g[3][5]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+v[4],+g[4][5]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+v[5],+g[5][5]]]),h([[+g[0][0],+g[0][1],+g[0][2],+g[0][3],+g[0][4],+v[0]],[+g[1][0],+g[1][1],+g[1][2],+g[1][3],+g[1][4],+v[1]],[+g[2][0],+g[2][1],+g[2][2],+g[2][3],+g[2][4],+v[2]],[+g[3][0],+g[3][1],+g[3][2],+g[3][3],+g[3][4],+v[3]],[+g[4][0],+g[4][1],+g[4][2],+g[4][3],+g[4][4],+v[4]],[+g[5][0],+g[5][1],+g[5][2],+g[5][3],+g[5][4],+v[5]]]),h(g)]}}var f=[function(){return[[0]]},function(h,g){return[[g[0]],[h[0][0]]]}];function m(h,g,v,x,y,A,d,S){return function(k,E){switch(k.length){case 0:return h(k,E);case 1:return g(k,E);case 2:return v(k,E);case 3:return x(k,E);case 4:return y(k,E);case 5:return A(k,E)}var L=d[k.length];return L||(L=d[k.length]=S(k.length)),L(k,E)}}(function(){for(;f.length<6;)f.push(n(f.length));c.exports=m.apply(void 0,f.concat([f,n]));for(var h=0;h<6;++h)c.exports[h]=f[h]})()},3250:function(c,o,t){"use strict";var i=t(5250),n=t(8210),a=t(3012),s=t(8545);function l(y,A,d,S){return function(k,E,L){var O=y(y(A(E[1],L[0]),A(-L[1],E[0])),y(A(k[1],E[0]),A(-E[1],k[0]))),P=y(A(k[1],L[0]),A(-L[1],k[0])),F=S(O,P);return F[F.length-1]}}function u(y,A,d,S){return function(k,E,L,O){var P=y(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),E[2]),y(d(y(A(E[1],O[0]),A(-O[1],E[0])),-L[2]),d(y(A(E[1],L[0]),A(-L[1],E[0])),O[2]))),y(d(y(A(E[1],O[0]),A(-O[1],E[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),O[2])))),F=y(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-L[2]),d(y(A(k[1],L[0]),A(-L[1],k[0])),O[2]))),y(d(y(A(E[1],L[0]),A(-L[1],E[0])),k[2]),y(d(y(A(k[1],L[0]),A(-L[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),L[2])))),U=S(P,F);return U[U.length-1]}}function p(y,A,d,S){return function(k,E,L,O,P){var F=y(y(y(d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),L[2]),y(d(y(A(L[1],P[0]),A(-P[1],L[0])),-O[2]),d(y(A(L[1],O[0]),A(-O[1],L[0])),P[2]))),E[3]),y(d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),E[2]),y(d(y(A(E[1],P[0]),A(-P[1],E[0])),-O[2]),d(y(A(E[1],O[0]),A(-O[1],E[0])),P[2]))),-L[3]),d(y(d(y(A(L[1],P[0]),A(-P[1],L[0])),E[2]),y(d(y(A(E[1],P[0]),A(-P[1],E[0])),-L[2]),d(y(A(E[1],L[0]),A(-L[1],E[0])),P[2]))),O[3]))),y(d(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),E[2]),y(d(y(A(E[1],O[0]),A(-O[1],E[0])),-L[2]),d(y(A(E[1],L[0]),A(-L[1],E[0])),O[2]))),-P[3]),y(d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),E[2]),y(d(y(A(E[1],P[0]),A(-P[1],E[0])),-O[2]),d(y(A(E[1],O[0]),A(-O[1],E[0])),P[2]))),k[3]),d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-O[2]),d(y(A(k[1],O[0]),A(-O[1],k[0])),P[2]))),-E[3])))),y(y(d(y(d(y(A(E[1],P[0]),A(-P[1],E[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),P[2]))),O[3]),y(d(y(d(y(A(E[1],O[0]),A(-O[1],E[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),O[2]))),-P[3]),d(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),E[2]),y(d(y(A(E[1],O[0]),A(-O[1],E[0])),-L[2]),d(y(A(E[1],L[0]),A(-L[1],E[0])),O[2]))),k[3]))),y(d(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-L[2]),d(y(A(k[1],L[0]),A(-L[1],k[0])),O[2]))),-E[3]),y(d(y(d(y(A(E[1],O[0]),A(-O[1],E[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),O[2]))),L[3]),d(y(d(y(A(E[1],L[0]),A(-L[1],E[0])),k[2]),y(d(y(A(k[1],L[0]),A(-L[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),L[2]))),-O[3]))))),U=y(y(y(d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),L[2]),y(d(y(A(L[1],P[0]),A(-P[1],L[0])),-O[2]),d(y(A(L[1],O[0]),A(-O[1],L[0])),P[2]))),k[3]),d(y(d(y(A(O[1],P[0]),A(-P[1],O[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-O[2]),d(y(A(k[1],O[0]),A(-O[1],k[0])),P[2]))),-L[3])),y(d(y(d(y(A(L[1],P[0]),A(-P[1],L[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-L[2]),d(y(A(k[1],L[0]),A(-L[1],k[0])),P[2]))),O[3]),d(y(d(y(A(L[1],O[0]),A(-O[1],L[0])),k[2]),y(d(y(A(k[1],O[0]),A(-O[1],k[0])),-L[2]),d(y(A(k[1],L[0]),A(-L[1],k[0])),O[2]))),-P[3]))),y(y(d(y(d(y(A(L[1],P[0]),A(-P[1],L[0])),E[2]),y(d(y(A(E[1],P[0]),A(-P[1],E[0])),-L[2]),d(y(A(E[1],L[0]),A(-L[1],E[0])),P[2]))),k[3]),d(y(d(y(A(L[1],P[0]),A(-P[1],L[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-L[2]),d(y(A(k[1],L[0]),A(-L[1],k[0])),P[2]))),-E[3])),y(d(y(d(y(A(E[1],P[0]),A(-P[1],E[0])),k[2]),y(d(y(A(k[1],P[0]),A(-P[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),P[2]))),L[3]),d(y(d(y(A(E[1],L[0]),A(-L[1],E[0])),k[2]),y(d(y(A(k[1],L[0]),A(-L[1],k[0])),-E[2]),d(y(A(k[1],E[0]),A(-E[1],k[0])),L[2]))),-P[3])))),I=S(F,U);return I[I.length-1]}}function f(y){return(y===3?l:y===4?u:p)(n,i,a,s)}var m=f(3),h=f(4),g=[function(){return 0},function(){return 0},function(y,A){return A[0]-y[0]},function(y,A,d){var S,k=(y[1]-d[1])*(A[0]-d[0]),E=(y[0]-d[0])*(A[1]-d[1]),L=k-E;if(k>0){if(E<=0)return L;S=k+E}else{if(!(k<0)||E>=0)return L;S=-(k+E)}var O=33306690738754716e-32*S;return L>=O||L<=-O?L:m(y,A,d)},function(y,A,d,S){var k=y[0]-S[0],E=A[0]-S[0],L=d[0]-S[0],O=y[1]-S[1],P=A[1]-S[1],F=d[1]-S[1],U=y[2]-S[2],I=A[2]-S[2],N=d[2]-S[2],W=E*F,B=L*P,V=L*O,q=k*F,ne=k*P,$=E*O,K=U*(W-B)+I*(V-q)+N*(ne-$),ee=7771561172376103e-31*((Math.abs(W)+Math.abs(B))*Math.abs(U)+(Math.abs(V)+Math.abs(q))*Math.abs(I)+(Math.abs(ne)+Math.abs($))*Math.abs(N));return K>ee||-K>ee?K:h(y,A,d,S)}];function v(y){var A=g[y.length];return A||(A=g[y.length]=f(y.length)),A.apply(void 0,y)}function x(y,A,d,S,k,E,L){return function(O,P,F,U,I){switch(arguments.length){case 0:case 1:return 0;case 2:return S(O,P);case 3:return k(O,P,F);case 4:return E(O,P,F,U);case 5:return L(O,P,F,U,I)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return y(N)}}(function(){for(;g.length<=5;)g.push(f(g.length));c.exports=x.apply(void 0,[v].concat(g));for(var y=0;y<=5;++y)c.exports[y]=g[y]})()},5382:function(c,o,t){"use strict";var i=t(8210),n=t(3012);c.exports=function(a,s){if(a.length===1)return n(s,a[0]);if(s.length===1)return n(a,s[0]);if(a.length===0||s.length===0)return[0];var l=[0];if(a.length<s.length)for(var u=0;u<a.length;++u)l=i(l,n(s,a[u]));else for(u=0;u<s.length;++u)l=i(l,n(a,s[u]));return l}},3012:function(c,o,t){"use strict";var i=t(5250),n=t(9362);c.exports=function(a,s){var l=a.length;if(l===1){var u=i(a[0],s);return u[0]?u:[u[1]]}var p=new Array(2*l),f=[.1,.1],m=[.1,.1],h=0;i(a[0],s,f),f[0]&&(p[h++]=f[0]);for(var g=1;g<l;++g){i(a[g],s,m);var v=f[1];n(v,m[0],f),f[0]&&(p[h++]=f[0]);var x=m[1],y=f[1],A=x+y,d=y-(A-x);f[1]=A,d&&(p[h++]=d)}return f[1]&&(p[h++]=f[1]),h===0&&(p[h++]=0),p.length=h,p}},1125:function(c,o,t){"use strict";c.exports=function(n,a,s,l){var u=i(n,s,l),p=i(a,s,l);if(u>0&&p>0||u<0&&p<0)return!1;var f=i(s,n,a),m=i(l,n,a);return!(f>0&&m>0||f<0&&m<0)&&(u!==0||p!==0||f!==0||m!==0||function(h,g,v,x){for(var y=0;y<2;++y){var A=h[y],d=g[y],S=Math.min(A,d),k=Math.max(A,d),E=v[y],L=x[y],O=Math.min(E,L);if(Math.max(E,L)<S||k<O)return!1}return!0}(n,a,s,l))};var i=t(3250)[3]},8545:function(c){"use strict";c.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(O,P){var F=O+P,U=F-O,I=O-(F-U)+(P-U);return I?[I,F]:[F]}(o[0],-t[0]);var a,s,l=new Array(i+n),u=0,p=0,f=0,m=Math.abs,h=o[p],g=m(h),v=-t[f],x=m(v);g<x?(s=h,(p+=1)<i&&(g=m(h=o[p]))):(s=v,(f+=1)<n&&(x=m(v=-t[f]))),p<i&&g<x||f>=n?(a=h,(p+=1)<i&&(g=m(h=o[p]))):(a=v,(f+=1)<n&&(x=m(v=-t[f])));for(var y,A,d=a+s,S=d-a,k=s-S,E=k,L=d;p<i&&f<n;)g<x?(a=h,(p+=1)<i&&(g=m(h=o[p]))):(a=v,(f+=1)<n&&(x=m(v=-t[f]))),(k=(s=E)-(S=(d=a+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y;for(;p<i;)(k=(s=E)-(S=(d=(a=h)+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y,(p+=1)<i&&(h=o[p]);for(;f<n;)(k=(s=E)-(S=(d=(a=v)+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y,(f+=1)<n&&(v=-t[f]);return E&&(l[u++]=E),L&&(l[u++]=L),u||(l[u++]=0),l.length=u,l}},8210:function(c){"use strict";c.exports=function(o,t){var i=0|o.length,n=0|t.length;if(i===1&&n===1)return function(O,P){var F=O+P,U=F-O,I=O-(F-U)+(P-U);return I?[I,F]:[F]}(o[0],t[0]);var a,s,l=new Array(i+n),u=0,p=0,f=0,m=Math.abs,h=o[p],g=m(h),v=t[f],x=m(v);g<x?(s=h,(p+=1)<i&&(g=m(h=o[p]))):(s=v,(f+=1)<n&&(x=m(v=t[f]))),p<i&&g<x||f>=n?(a=h,(p+=1)<i&&(g=m(h=o[p]))):(a=v,(f+=1)<n&&(x=m(v=t[f])));for(var y,A,d=a+s,S=d-a,k=s-S,E=k,L=d;p<i&&f<n;)g<x?(a=h,(p+=1)<i&&(g=m(h=o[p]))):(a=v,(f+=1)<n&&(x=m(v=t[f]))),(k=(s=E)-(S=(d=a+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y;for(;p<i;)(k=(s=E)-(S=(d=(a=h)+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y,(p+=1)<i&&(h=o[p]);for(;f<n;)(k=(s=E)-(S=(d=(a=v)+s)-a))&&(l[u++]=k),E=L-((y=L+d)-(A=y-L))+(d-A),L=y,(f+=1)<n&&(v=t[f]);return E&&(l[u++]=E),L&&(l[u++]=L),u||(l[u++]=0),l.length=u,l}},9127:function(c,o,t){"use strict";c.exports=function(a){return n(i(a))};var i=t(6204),n=t(5771)},7765:function(c,o,t){"use strict";c.exports=function(l,u,p,f){if(p=p||0,f===void 0&&(f=function(d){for(var S=d.length,k=0,E=0;E<S;++E)k=0|Math.max(k,d[E].length);return k-1}(l)),l.length===0||f<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=function(d,S){for(var k=d.length,E=n.mallocUint8(k),L=0;L<k;++L)E[L]=d[L]<S|0;return E}(u,+p),h=function(d,S){for(var k=d.length,E=S*(S+1)/2*k|0,L=n.mallocUint32(2*E),O=0,P=0;P<k;++P)for(var F=d[P],U=(S=F.length,0);U<S;++U)for(var I=0;I<U;++I){var N=F[I],W=F[U];L[O++]=0|Math.min(N,W),L[O++]=0|Math.max(N,W)}a(i(L,[O/2|0,2]));var B=2;for(P=2;P<O;P+=2)L[P-2]===L[P]&&L[P-1]===L[P+1]||(L[B++]=L[P],L[B++]=L[P+1]);return i(L,[B/2|0,2])}(l,f),g=function(d,S,k,E){for(var L=d.data,O=d.shape[0],P=n.mallocDouble(O),F=0,U=0;U<O;++U){var I=L[2*U],N=L[2*U+1];if(k[I]!==k[N]){var W=S[I],B=S[N];L[2*F]=I,L[2*F+1]=N,P[F++]=(B-E)/(B-W)}}return d.shape[0]=F,i(P,[F])}(h,u,m,+p),v=function(d,S){var k=n.mallocInt32(2*S),E=d.shape[0],L=d.data;k[0]=0;for(var O=0,P=0;P<E;++P){var F=L[2*P];if(F!==O){for(k[2*O+1]=P;++O<F;)k[2*O]=P,k[2*O+1]=P;k[2*O]=P}}for(k[2*O+1]=E;++O<S;)k[2*O]=k[2*O+1]=E;return k}(h,0|u.length),x=s(f)(l,h.data,v,m),y=function(d){for(var S=0|d.shape[0],k=d.data,E=new Array(S),L=0;L<S;++L)E[L]=[k[2*L],k[2*L+1]];return E}(h),A=[].slice.call(g.data,0,g.shape[0]);return n.free(m),n.free(h.data),n.free(g.data),n.free(v),{cells:x,vertexIds:y,vertexWeights:A}};var i=t(9618),n=t(1888),a=t(446),s=t(1570)},1570:function(c){"use strict";c.exports=function(t){return o[t]()};var o=[function(){return function(t,i,n,a){for(var s=t.length,l=0;l<s;++l)t[l].length;return[]}},function(){function t(i,n,a,s){for(var l=0|Math.min(a,s),u=0|Math.max(a,s),p=i[2*l],f=i[2*l+1];p<f;){var m=p+f>>1,h=n[2*m+1];if(h===u)return m;u<h?f=m:p=m+1}return p}return function(i,n,a,s){for(var l=i.length,u=[],p=0;p<l;++p){var f=i[p];if(f.length===2){var m=(s[f[0]]<<0)+(s[f[1]]<<1);if(m===0||m===3)continue;switch(m){case 0:case 3:break;case 1:u.push([t(a,n,f[0],f[1])]);break;case 2:u.push([t(a,n,f[1],f[0])])}}}return u}},function(){function t(i,n,a,s){for(var l=0|Math.min(a,s),u=0|Math.max(a,s),p=i[2*l],f=i[2*l+1];p<f;){var m=p+f>>1,h=n[2*m+1];if(h===u)return m;u<h?f=m:p=m+1}return p}return function(i,n,a,s){for(var l=i.length,u=[],p=0;p<l;++p){var f=i[p],m=f.length;if(m===3){if((h=(s[f[0]]<<0)+(s[f[1]]<<1)+(s[f[2]]<<2))==0||h===7)continue;switch(h){case 0:case 7:break;case 1:u.push([t(a,n,f[0],f[2]),t(a,n,f[0],f[1])]);break;case 2:u.push([t(a,n,f[1],f[0]),t(a,n,f[1],f[2])]);break;case 3:u.push([t(a,n,f[0],f[2]),t(a,n,f[1],f[2])]);break;case 4:u.push([t(a,n,f[2],f[1]),t(a,n,f[2],f[0])]);break;case 5:u.push([t(a,n,f[2],f[1]),t(a,n,f[0],f[1])]);break;case 6:u.push([t(a,n,f[1],f[0]),t(a,n,f[2],f[0])])}}else if(m===2){var h;if((h=(s[f[0]]<<0)+(s[f[1]]<<1))==0||h===3)continue;switch(h){case 0:case 3:break;case 1:u.push([t(a,n,f[0],f[1])]);break;case 2:u.push([t(a,n,f[1],f[0])])}}}return u}},function(){function t(i,n,a,s){for(var l=0|Math.min(a,s),u=0|Math.max(a,s),p=i[2*l],f=i[2*l+1];p<f;){var m=p+f>>1,h=n[2*m+1];if(h===u)return m;u<h?f=m:p=m+1}return p}return function(i,n,a,s){for(var l=i.length,u=[],p=0;p<l;++p){var f=i[p],m=f.length;if(m===4){if((h=(s[f[0]]<<0)+(s[f[1]]<<1)+(s[f[2]]<<2)+(s[f[3]]<<3))==0||h===15)continue;switch(h){case 0:case 15:break;case 1:u.push([t(a,n,f[0],f[1]),t(a,n,f[0],f[2]),t(a,n,f[0],f[3])]);break;case 2:u.push([t(a,n,f[1],f[2]),t(a,n,f[1],f[0]),t(a,n,f[1],f[3])]);break;case 3:u.push([t(a,n,f[1],f[2]),t(a,n,f[0],f[2]),t(a,n,f[0],f[3])],[t(a,n,f[1],f[3]),t(a,n,f[1],f[2]),t(a,n,f[0],f[3])]);break;case 4:u.push([t(a,n,f[2],f[0]),t(a,n,f[2],f[1]),t(a,n,f[2],f[3])]);break;case 5:u.push([t(a,n,f[0],f[1]),t(a,n,f[2],f[1]),t(a,n,f[0],f[3])],[t(a,n,f[2],f[1]),t(a,n,f[2],f[3]),t(a,n,f[0],f[3])]);break;case 6:u.push([t(a,n,f[2],f[0]),t(a,n,f[1],f[0]),t(a,n,f[1],f[3])],[t(a,n,f[2],f[3]),t(a,n,f[2],f[0]),t(a,n,f[1],f[3])]);break;case 7:u.push([t(a,n,f[0],f[3]),t(a,n,f[1],f[3]),t(a,n,f[2],f[3])]);break;case 8:u.push([t(a,n,f[3],f[1]),t(a,n,f[3],f[0]),t(a,n,f[3],f[2])]);break;case 9:u.push([t(a,n,f[3],f[1]),t(a,n,f[0],f[1]),t(a,n,f[0],f[2])],[t(a,n,f[3],f[2]),t(a,n,f[3],f[1]),t(a,n,f[0],f[2])]);break;case 10:u.push([t(a,n,f[1],f[0]),t(a,n,f[3],f[0]),t(a,n,f[1],f[2])],[t(a,n,f[3],f[0]),t(a,n,f[3],f[2]),t(a,n,f[1],f[2])]);break;case 11:u.push([t(a,n,f[1],f[2]),t(a,n,f[0],f[2]),t(a,n,f[3],f[2])]);break;case 12:u.push([t(a,n,f[3],f[0]),t(a,n,f[2],f[0]),t(a,n,f[2],f[1])],[t(a,n,f[3],f[1]),t(a,n,f[3],f[0]),t(a,n,f[2],f[1])]);break;case 13:u.push([t(a,n,f[0],f[1]),t(a,n,f[2],f[1]),t(a,n,f[3],f[1])]);break;case 14:u.push([t(a,n,f[2],f[0]),t(a,n,f[1],f[0]),t(a,n,f[3],f[0])])}}else if(m===3){if((h=(s[f[0]]<<0)+(s[f[1]]<<1)+(s[f[2]]<<2))==0||h===7)continue;switch(h){case 0:case 7:break;case 1:u.push([t(a,n,f[0],f[2]),t(a,n,f[0],f[1])]);break;case 2:u.push([t(a,n,f[1],f[0]),t(a,n,f[1],f[2])]);break;case 3:u.push([t(a,n,f[0],f[2]),t(a,n,f[1],f[2])]);break;case 4:u.push([t(a,n,f[2],f[1]),t(a,n,f[2],f[0])]);break;case 5:u.push([t(a,n,f[2],f[1]),t(a,n,f[0],f[1])]);break;case 6:u.push([t(a,n,f[1],f[0]),t(a,n,f[2],f[0])])}}else if(m===2){var h;if((h=(s[f[0]]<<0)+(s[f[1]]<<1))==0||h===3)continue;switch(h){case 0:case 3:break;case 1:u.push([t(a,n,f[0],f[1])]);break;case 2:u.push([t(a,n,f[1],f[0])])}}}return u}}]},6803:function(c,o,t){"use strict";t(8828),t(1755);function i(n,a){var s=n.length,l=n.length-a.length,u=Math.min;if(l)return l;switch(s){case 0:return 0;case 1:return n[0]-a[0];case 2:return(m=n[0]+n[1]-a[0]-a[1])||u(n[0],n[1])-u(a[0],a[1]);case 3:var p=n[0]+n[1],f=a[0]+a[1];if(m=p+n[2]-(f+a[2]))return m;var m,h=u(n[0],n[1]),g=u(a[0],a[1]);return(m=u(h,n[2])-u(g,a[2]))||u(h+n[2],p)-u(g+a[2],f);default:var v=n.slice(0);v.sort();var x=a.slice(0);x.sort();for(var y=0;y<s;++y)if(l=v[y]-x[y])return l;return 0}}o.Fw=i},3105:function(c,o){"use strict";function t(n){var a=32;return(n&=-n)&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(n){return(n>0)-(n<0)},o.abs=function(n){var a=n>>31;return(n^a)-a},o.min=function(n,a){return a^(n^a)&-(n<a)},o.max=function(n,a){return n^(n^a)&-(n<a)},o.isPow2=function(n){return!(n&n-1||!n)},o.log2=function(n){var a,s;return a=(n>65535)<<4,a|=s=((n>>>=a)>255)<<3,a|=s=((n>>>=s)>15)<<2,(a|=s=((n>>>=s)>3)<<1)|(n>>>=s)>>1},o.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},o.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},o.countTrailingZeros=t,o.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)},o.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},o.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var a=0;a<256;++a){var s=a,l=a,u=7;for(s>>>=1;s;s>>>=1)l<<=1,l|=1&s,--u;n[a]=l<<u&255}})(i),o.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},o.interleave2=function(n,a){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},o.deinterleave2=function(n,a){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>a&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},o.interleave3=function(n,a,s){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(n,a){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>a&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},o.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>t(n)+1}},2014:function(c,o,t){"use strict";var i=t(3105),n=t(4623);function a(h,g){var v=h.length,x=h.length-g.length,y=Math.min;if(x)return x;switch(v){case 0:return 0;case 1:return h[0]-g[0];case 2:return(S=h[0]+h[1]-g[0]-g[1])||y(h[0],h[1])-y(g[0],g[1]);case 3:var A=h[0]+h[1],d=g[0]+g[1];if(S=A+h[2]-(d+g[2]))return S;var S,k=y(h[0],h[1]),E=y(g[0],g[1]);return(S=y(k,h[2])-y(E,g[2]))||y(k+h[2],A)-y(E+g[2],d);default:var L=h.slice(0);L.sort();var O=g.slice(0);O.sort();for(var P=0;P<v;++P)if(x=L[P]-O[P])return x;return 0}}function s(h,g){return a(h[0],g[0])}function l(h,g){if(g){for(var v=h.length,x=new Array(v),y=0;y<v;++y)x[y]=[h[y],g[y]];for(x.sort(s),y=0;y<v;++y)h[y]=x[y][0],g[y]=x[y][1];return h}return h.sort(a),h}function u(h){if(h.length===0)return[];for(var g=1,v=h.length,x=1;x<v;++x){var y=h[x];if(a(y,h[x-1])){if(x===g){g++;continue}h[g++]=y}}return h.length=g,h}function p(h,g){for(var v=0,x=h.length-1,y=-1;v<=x;){var A=v+x>>1,d=a(h[A],g);d<=0?(d===0&&(y=A),v=A+1):d>0&&(x=A-1)}return y}function f(h,g){for(var v=new Array(h.length),x=0,y=v.length;x<y;++x)v[x]=[];for(var A=[],d=(x=0,g.length);x<d;++x)for(var S=g[x],k=S.length,E=1,L=1<<k;E<L;++E){A.length=i.popCount(E);for(var O=0,P=0;P<k;++P)E&1<<P&&(A[O++]=S[P]);var F=p(h,A);if(!(F<0))for(;v[F++].push(x),!(F>=h.length||a(h[F],A)!==0););}return v}function m(h,g){if(g<0)return[];for(var v=[],x=(1<<g+1)-1,y=0;y<h.length;++y)for(var A=h[y],d=x;d<1<<A.length;d=i.nextCombination(d)){for(var S=new Array(g+1),k=0,E=0;E<A.length;++E)d&1<<E&&(S[k++]=A[E]);v.push(S)}return l(v)}o.dimension=function(h){for(var g=0,v=Math.max,x=0,y=h.length;x<y;++x)g=v(g,h[x].length);return g-1},o.countVertices=function(h){for(var g=-1,v=Math.max,x=0,y=h.length;x<y;++x)for(var A=h[x],d=0,S=A.length;d<S;++d)g=v(g,A[d]);return g+1},o.cloneCells=function(h){for(var g=new Array(h.length),v=0,x=h.length;v<x;++v)g[v]=h[v].slice(0);return g},o.compareCells=a,o.normalize=l,o.unique=u,o.findCell=p,o.incidence=f,o.dual=function(h,g){if(!g)return f(u(m(h,0)),h);for(var v=new Array(g),x=0;x<g;++x)v[x]=[];x=0;for(var y=h.length;x<y;++x)for(var A=h[x],d=0,S=A.length;d<S;++d)v[A[d]].push(x);return v},o.explode=function(h){for(var g=[],v=0,x=h.length;v<x;++v)for(var y=h[v],A=0|y.length,d=1,S=1<<A;d<S;++d){for(var k=[],E=0;E<A;++E)d>>>E&1&&k.push(y[E]);g.push(k)}return l(g)},o.skeleton=m,o.boundary=function(h){for(var g=[],v=0,x=h.length;v<x;++v)for(var y=h[v],A=0,d=y.length;A<d;++A){for(var S=new Array(y.length-1),k=0,E=0;k<d;++k)k!==A&&(S[E++]=y[k]);g.push(S)}return l(g)},o.connectedComponents=function(h,g){return g?function(v,x){for(var y=new n(x),A=0;A<v.length;++A)for(var d=v[A],S=0;S<d.length;++S)for(var k=S+1;k<d.length;++k)y.link(d[S],d[k]);var E=[],L=y.ranks;for(A=0;A<L.length;++A)L[A]=-1;for(A=0;A<v.length;++A){var O=y.find(v[A][0]);L[O]<0?(L[O]=E.length,E.push([v[A].slice(0)])):E[L[O]].push(v[A].slice(0))}return E}(h,g):function(v){for(var x=u(l(m(v,0))),y=new n(x.length),A=0;A<v.length;++A)for(var d=v[A],S=0;S<d.length;++S)for(var k=p(x,[d[S]]),E=S+1;E<d.length;++E)y.link(k,p(x,[d[E]]));var L=[],O=y.ranks;for(A=0;A<O.length;++A)O[A]=-1;for(A=0;A<v.length;++A){var P=y.find(p(x,[v[A][0]]));O[P]<0?(O[P]=L.length,L.push([v[A].slice(0)])):L[O[P]].push(v[A].slice(0))}return L}(h)}},4623:function(c){"use strict";function o(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}c.exports=o,o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},o.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var n=i[t];i[t]=i[n],t=n}return t},o.prototype.link=function(t,i){var n=this.find(t),a=this.find(i);if(n!==a){var s=this.ranks,l=this.roots,u=s[n],p=s[a];u<p?l[n]=a:p<u?l[a]=n:(l[a]=n,++s[n])}}},5878:function(c,o,t){"use strict";c.exports=function(a,s,l){for(var u=s.length,p=a.length,f=new Array(u),m=new Array(u),h=new Array(u),g=new Array(u),v=0;v<u;++v)f[v]=m[v]=-1,h[v]=1/0,g[v]=!1;for(v=0;v<p;++v){var x=a[v];if(x.length!==2)throw new Error("Input must be a graph");var y=x[1],A=x[0];m[A]!==-1?m[A]=-2:m[A]=y,f[y]!==-1?f[y]=-2:f[y]=A}function d($){if(g[$])return 1/0;var K,ee,J,Z=f[$],te=m[$];return Z<0||te<0?1/0:(K=s[$],ee=s[Z],J=s[te],Math.abs(i(K,ee,J))/Math.sqrt(Math.pow(ee[0]-J[0],2)+Math.pow(ee[1]-J[1],2)))}function S($,K){var ee=I[$],J=I[K];I[$]=J,I[K]=ee,N[ee]=K,N[J]=$}function k($){return h[I[$]]}function E($){return 1&$?$-1>>1:($>>1)-1}function L($){for(var K=k($);;){var ee=K,J=2*$+1,Z=2*($+1),te=$;if(J<W){var oe=k(J);oe<ee&&(te=J,ee=oe)}if(Z<W&&k(Z)<ee&&(te=Z),te===$)return $;S($,te),$=te}}function O($){for(var K=k($);$>0;){var ee=E($);if(!(ee>=0&&K<k(ee)))return $;S($,ee),$=ee}}function P(){if(W>0){var $=I[0];return S(0,W-1),W-=1,L(0),$}return-1}function F($,K){var ee=I[$];return h[ee]===K?$:(h[ee]=-1/0,O($),P(),h[ee]=K,O((W+=1)-1))}function U($){if(!g[$]){g[$]=!0;var K=f[$],ee=m[$];f[ee]>=0&&(f[ee]=K),m[K]>=0&&(m[K]=ee),N[K]>=0&&F(N[K],d(K)),N[ee]>=0&&F(N[ee],d(ee))}}var I=[],N=new Array(u);for(v=0;v<u;++v)(h[v]=d(v))<1/0?(N[v]=I.length,I.push(v)):N[v]=-1;var W=I.length;for(v=W>>1;v>=0;--v)L(v);for(;;){var B=P();if(B<0||h[B]>l)break;U(B)}var V=[];for(v=0;v<u;++v)g[v]||(N[v]=V.length,V.push(s[v].slice()));function q($,K){if($[K]<0)return K;var ee=K,J=K;do{var Z=$[J];if(!g[J]||Z<0||Z===J||(Z=$[J=Z],!g[J]||Z<0||Z===J))break;J=Z,ee=$[ee]}while(ee!==J);for(var te=K;te!==J;te=$[te])$[te]=J;return J}V.length;var ne=[];return a.forEach(function($){var K=q(f,$[0]),ee=q(m,$[1]);if(K>=0&&ee>=0&&K!==ee){var J=N[K],Z=N[ee];J!==Z&&ne.push([J,Z])}}),n.unique(n.normalize(ne)),{positions:V,edges:ne}};var i=t(3250),n=t(2014)},1303:function(c,o,t){"use strict";c.exports=function(a,s){var l,u,p,f;if(s[0][0]<s[1][0])l=s[0],u=s[1];else{if(!(s[0][0]>s[1][0]))return n(s,a);l=s[1],u=s[0]}if(a[0][0]<a[1][0])p=a[0],f=a[1];else{if(!(a[0][0]>a[1][0]))return-n(a,s);p=a[1],f=a[0]}var m=i(l,u,f),h=i(l,u,p);if(m<0){if(h<=0)return m}else if(m>0){if(h>=0)return m}else if(h)return h;if(m=i(f,p,u),h=i(f,p,l),m<0){if(h<=0)return m}else if(m>0){if(h>=0)return m}else if(h)return h;return u[0]-f[0]};var i=t(3250);function n(a,s){var l,u,p,f;if(s[0][0]<s[1][0])l=s[0],u=s[1];else{if(!(s[0][0]>s[1][0])){var m=Math.min(a[0][1],a[1][1]),h=Math.max(a[0][1],a[1][1]),g=Math.min(s[0][1],s[1][1]),v=Math.max(s[0][1],s[1][1]);return h<g?h-g:m>v?m-v:h-v}l=s[1],u=s[0]}a[0][1]<a[1][1]?(p=a[0],f=a[1]):(p=a[1],f=a[0]);var x=i(u,l,p);return x||(x=i(u,l,f))||f-u}},4209:function(c,o,t){"use strict";c.exports=function(h){for(var g=h.length,v=2*g,x=new Array(v),y=0;y<g;++y){var A=h[y],d=A[0][0]<A[1][0];x[2*y]=new m(A[0][0],A,d,y),x[2*y+1]=new m(A[1][0],A,!d,y)}x.sort(function(U,I){var N=U.x-I.x;return N||(N=U.create-I.create)||Math.min(U.segment[0][1],U.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var S=n(s),k=[],E=[],L=[];for(y=0;y<v;){for(var O=x[y].x,P=[];y<v;){var F=x[y];if(F.x!==O)break;y+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(P.push(new f(F.segment[0][1],F.index,!0,!0)),P.push(new f(F.segment[1][1],F.index,!1,!1))):(P.push(new f(F.segment[1][1],F.index,!0,!1)),P.push(new f(F.segment[0][1],F.index,!1,!0)))):S=F.create?S.insert(F.segment,F.index):S.remove(F.segment)}k.push(S.root),E.push(O),L.push(P)}return new l(k,E,L)};var i=t(2478),n=t(3840),a=t(3250),s=t(1303);function l(h,g,v){this.slabs=h,this.coordinates=g,this.horizontal=v}function u(h,g){return h.y-g}function p(h,g){for(var v=null;h;){var x,y,A=h.key;A[0][0]<A[1][0]?(x=A[0],y=A[1]):(x=A[1],y=A[0]);var d=a(x,y,g);if(d<0)h=h.left;else if(d>0)if(g[0]!==A[1][0])v=h,h=h.right;else{if(S=p(h.right,g))return S;h=h.left}else{if(g[0]!==A[1][0])return h;var S;if(S=p(h.right,g))return S;h=h.left}}return v}function f(h,g,v,x){this.y=h,this.index=g,this.start=v,this.closed=x}function m(h,g,v,x){this.x=h,this.segment=g,this.create=v,this.index=x}l.prototype.castUp=function(h){var g=i.le(this.coordinates,h[0]);if(g<0)return-1;this.slabs[g];var v=p(this.slabs[g],h),x=-1;if(v&&(x=v.value),this.coordinates[g]===h[0]){var y=null;if(v&&(y=v.key),g>0){var A=p(this.slabs[g-1],h);A&&(y?s(A.key,y)>0&&(y=A.key,x=A.value):(x=A.value,y=A.key))}var d=this.horizontal[g];if(d.length>0){var S=i.ge(d,h[1],u);if(S<d.length){var k=d[S];if(h[1]===k.y){if(k.closed)return k.index;for(;S<d.length-1&&d[S+1].y===h[1];)if((k=d[S+=1]).closed)return k.index;if(k.y===h[1]&&!k.start){if((S+=1)>=d.length)return x;k=d[S]}}if(k.start)if(y){var E=a(y[0],y[1],[h[0],k.y]);y[0][0]>y[1][0]&&(E=-E),E>0&&(x=k.index)}else x=k.index;else k.y!==h[1]&&(x=k.index)}}}return x}},5202:function(c,o,t){"use strict";var i=t(1944),n=t(8210);function a(l,u){var p=n(i(l,u),[u[u.length-1]]);return p[p.length-1]}function s(l,u,p,f){var m=-u/(f-u);m<0?m=0:m>1&&(m=1);for(var h=1-m,g=l.length,v=new Array(g),x=0;x<g;++x)v[x]=m*l[x]+h*p[x];return v}c.exports=function(l,u){for(var p=[],f=[],m=a(l[l.length-1],u),h=l[l.length-1],g=l[0],v=0;v<l.length;++v,h=g){var x=a(g=l[v],u);if(m<0&&x>0||m>0&&x<0){var y=s(h,x,g,m);p.push(y),f.push(y.slice())}x<0?f.push(g.slice()):x>0?p.push(g.slice()):(p.push(g.slice()),f.push(g.slice())),m=x}return{positive:p,negative:f}},c.exports.positive=function(l,u){for(var p=[],f=a(l[l.length-1],u),m=l[l.length-1],h=l[0],g=0;g<l.length;++g,m=h){var v=a(h=l[g],u);(f<0&&v>0||f>0&&v<0)&&p.push(s(m,v,h,f)),v>=0&&p.push(h.slice()),f=v}return p},c.exports.negative=function(l,u){for(var p=[],f=a(l[l.length-1],u),m=l[l.length-1],h=l[0],g=0;g<l.length;++g,m=h){var v=a(h=l[g],u);(f<0&&v>0||f>0&&v<0)&&p.push(s(m,v,h,f)),v<=0&&p.push(h.slice()),f=v}return p}},3387:function(c,o,t){var i;(function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(u){return function(p,f){var m,h,g,v,x,y,A,d,S,k=1,E=p.length,L="";for(h=0;h<E;h++)if(typeof p[h]=="string")L+=p[h];else if(typeof p[h]=="object"){if((v=p[h]).keys)for(m=f[k],g=0;g<v.keys.length;g++){if(m==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[g],v.keys[g-1]));m=m[v.keys[g]]}else m=v.param_no?f[v.param_no]:f[k++];if(n.not_type.test(v.type)&&n.not_primitive.test(v.type)&&m instanceof Function&&(m=m()),n.numeric_arg.test(v.type)&&typeof m!="number"&&isNaN(m))throw new TypeError(a("[sprintf] expecting number but found %T",m));switch(n.number.test(v.type)&&(d=m>=0),v.type){case"b":m=parseInt(m,10).toString(2);break;case"c":m=String.fromCharCode(parseInt(m,10));break;case"d":case"i":m=parseInt(m,10);break;case"j":m=JSON.stringify(m,null,v.width?parseInt(v.width):0);break;case"e":m=v.precision?parseFloat(m).toExponential(v.precision):parseFloat(m).toExponential();break;case"f":m=v.precision?parseFloat(m).toFixed(v.precision):parseFloat(m);break;case"g":m=v.precision?String(Number(m.toPrecision(v.precision))):parseFloat(m);break;case"o":m=(parseInt(m,10)>>>0).toString(8);break;case"s":m=String(m),m=v.precision?m.substring(0,v.precision):m;break;case"t":m=String(!!m),m=v.precision?m.substring(0,v.precision):m;break;case"T":m=Object.prototype.toString.call(m).slice(8,-1).toLowerCase(),m=v.precision?m.substring(0,v.precision):m;break;case"u":m=parseInt(m,10)>>>0;break;case"v":m=m.valueOf(),m=v.precision?m.substring(0,v.precision):m;break;case"x":m=(parseInt(m,10)>>>0).toString(16);break;case"X":m=(parseInt(m,10)>>>0).toString(16).toUpperCase()}n.json.test(v.type)?L+=m:(!n.number.test(v.type)||d&&!v.sign?S="":(S=d?"+":"-",m=m.toString().replace(n.sign,"")),y=v.pad_char?v.pad_char==="0"?"0":v.pad_char.charAt(1):" ",A=v.width-(S+m).length,x=v.width&&A>0?y.repeat(A):"",L+=v.align?S+m+x:y==="0"?S+x+m:x+S+m)}return L}(function(p){if(l[p])return l[p];for(var f,m=p,h=[],g=0;m;){if((f=n.text.exec(m))!==null)h.push(f[0]);else if((f=n.modulo.exec(m))!==null)h.push("%");else{if((f=n.placeholder.exec(m))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(f[2]){g|=1;var v=[],x=f[2],y=[];if((y=n.key.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(y[1]);(x=x.substring(y[0].length))!=="";)if((y=n.key_access.exec(x))!==null)v.push(y[1]);else{if((y=n.index_access.exec(x))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(y[1])}f[2]=v}else g|=2;if(g===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:f[0],param_no:f[1],keys:f[2],sign:f[3],pad_char:f[4],align:f[5],width:f[6],precision:f[7],type:f[8]})}m=m.substring(f[0].length)}return l[p]=h}(u),arguments)}function s(u,p){return a.apply(null,[u].concat(p||[]))}var l=Object.create(null);o.sprintf=a,o.vsprintf=s,typeof window<"u"&&(window.sprintf=a,window.vsprintf=s,(i=(function(){return{sprintf:a,vsprintf:s}}).call(o,t,o,c))===void 0||(c.exports=i))})()},3711:function(c,o,t){"use strict";c.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(m,h){for(var g=n(m,h),v=g.length,x=new Array(v),y=new Array(v),A=0;A<v;++A)x[A]=[g[A]],y[A]=[A];return{positions:x,cells:y}}(l,u);var p=l.order.join()+"-"+l.dtype,f=s[p];return u=+u||0,f||(f=s[p]=function(m,h){var g=m.length+"d",v=a[g];if(v)return v(i,m,h)}(l.order,l.dtype)),f(l,u)};var i=t(2640),n=t(781),a={"2d":function(l,u,p){var f=l({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(m,h,g,v){return m>v|0},vertex:function(m,h,g,v,x,y,A,d,S,k,E,L,O){var P=(A<<0)+(d<<1)+(S<<2)+(k<<3)|0;if(P!==0&&P!==15)switch(P){case 0:case 15:E.push([m-.5,h-.5]);break;case 1:E.push([m-.25-.25*(v+g-2*O)/(g-v),h-.25-.25*(x+g-2*O)/(g-x)]);break;case 2:E.push([m-.75-.25*(-v-g+2*O)/(v-g),h-.25-.25*(y+v-2*O)/(v-y)]);break;case 3:E.push([m-.5,h-.5-.5*(x+g+y+v-4*O)/(g-x+v-y)]);break;case 4:E.push([m-.25-.25*(y+x-2*O)/(x-y),h-.75-.25*(-x-g+2*O)/(x-g)]);break;case 5:E.push([m-.5-.5*(v+g+y+x-4*O)/(g-v+x-y),h-.5]);break;case 6:E.push([m-.5-.25*(-v-g+y+x)/(v-g+x-y),h-.5-.25*(-x-g+y+v)/(x-g+v-y)]);break;case 7:E.push([m-.75-.25*(y+x-2*O)/(x-y),h-.75-.25*(y+v-2*O)/(v-y)]);break;case 8:E.push([m-.75-.25*(-y-x+2*O)/(y-x),h-.75-.25*(-y-v+2*O)/(y-v)]);break;case 9:E.push([m-.5-.25*(v+g+-y-x)/(g-v+y-x),h-.5-.25*(x+g+-y-v)/(g-x+y-v)]);break;case 10:E.push([m-.5-.5*(-v-g-y-x+4*O)/(v-g+y-x),h-.5]);break;case 11:E.push([m-.25-.25*(-y-x+2*O)/(y-x),h-.75-.25*(x+g-2*O)/(g-x)]);break;case 12:E.push([m-.5,h-.5-.5*(-x-g-y-v+4*O)/(x-g+y-v)]);break;case 13:E.push([m-.75-.25*(v+g-2*O)/(g-v),h-.25-.25*(-y-v+2*O)/(y-v)]);break;case 14:E.push([m-.25-.25*(-v-g+2*O)/(v-g),h-.25-.25*(-x-g+2*O)/(x-g)])}},cell:function(m,h,g,v,x,y,A,d,S){x?d.push([m,h]):d.push([h,m])}});return function(m,h){var g=[],v=[];return f(m,g,v,h),{positions:g,cells:v}}}},s={}},529:function(c,o,t){"use strict";c.exports=function s(l,u,p){var f=(p=p||{}).fontStyle||"normal",m=p.fontWeight||"normal",h=p.fontVariant||"normal",g=[f,m,h,l].join("_"),v=a[g];v||(v=a[g]={" ":{data:new Float32Array(0),shape:.2}});var x=v[u];if(!x)if(u.length<=1||!/\d/.test(u))x=v[u]=function(U){for(var I=U.cells,N=U.positions,W=new Float32Array(6*I.length),B=0,V=0,q=0;q<I.length;++q)for(var ne=I[q],$=0;$<3;++$){var K=N[ne[$]];W[B++]=K[0],W[B++]=K[1]+1.4,V=Math.max(K[0],V)}return{data:W,shape:V}}(i(u,{triangles:!0,font:l,fontStyle:f,fontWeight:m,fontVariant:h,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=u.split(/(\d|\s)/),A=new Array(y.length),d=0,S=0,k=0;k<y.length;++k)A[k]=s(l,y[k]),d+=A[k].data.length,S+=A[k].shape,k>0&&(S+=.02);var E=new Float32Array(d),L=0,O=-.5*S;for(k=0;k<A.length;++k){for(var P=A[k].data,F=0;F<P.length;F+=2)E[L++]=P[F]+O,E[L++]=P[F+1];O+=A[k].shape+.02}x=v[u]={data:E,shape:S}}return x};var i=t(4359),n=window||_.global||{},a=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},665:function(c,o,t){"use strict";var i=t(3202);c.exports=s;var n=96;function a(l,u){var p=i(getComputedStyle(l).getPropertyValue(u));return p[0]*s(p[1],l)}function s(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,f){var m=document.createElement("div");m.style["font-size"]="128"+p,f.appendChild(m);var h=a(m,"font-size")/128;return f.removeChild(m),h}(l,u);case"em":return a(u,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},7261:function(c,o,t){"use strict";c.exports=function(x){var y=(x=x||{}).center||[0,0,0],A=x.up||[0,1,0],d=x.right||m(A),S=x.radius||1,k=x.theta||0,E=x.phi||0;if(y=[].slice.call(y,0,3),A=[].slice.call(A,0,3),l(A,A),d=[].slice.call(d,0,3),l(d,d),"eye"in x){var L=x.eye,O=[L[0]-y[0],L[1]-y[1],L[2]-y[2]];s(d,O,A),p(d[0],d[1],d[2])<1e-6?d=m(A):l(d,d),S=p(O[0],O[1],O[2]);var P=u(A,O)/S,F=u(d,O)/S;E=Math.acos(P),k=Math.acos(F)}return S=Math.log(S),new h(x.zoomMin,x.zoomMax,y,A,d,S,k,E)};var i=t(9215),n=t(7608),a=t(6079),s=t(5911),l=t(3536),u=t(244);function p(x,y,A){return Math.sqrt(Math.pow(x,2)+Math.pow(y,2)+Math.pow(A,2))}function f(x){return Math.min(1,Math.max(-1,x))}function m(x){var y=Math.abs(x[0]),A=Math.abs(x[1]),d=Math.abs(x[2]),S=[0,0,0];y>Math.max(A,d)?S[2]=1:A>Math.max(y,d)?S[0]=1:S[1]=1;for(var k=0,E=0,L=0;L<3;++L)k+=x[L]*x[L],E+=S[L]*x[L];for(L=0;L<3;++L)S[L]-=E/k*x[L];return l(S,S),S}function h(x,y,A,d,S,k,E,L){this.center=i(A),this.up=i(d),this.right=i(S),this.radius=i([k]),this.angle=i([E,L]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var O=0;O<16;++O)this.computedMatrix[O]=.5;this.recalcMatrix(0)}var g=h.prototype;g.setDistanceLimits=function(x,y){x=x>0?Math.log(x):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(x){var y=this.radius.bounds[0];return x?(x[0]=Math.exp(y[0][0]),x[1]=Math.exp(y[1][0]),x):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var y=this.computedUp,A=this.computedRight,d=0,S=0,k=0;k<3;++k)S+=y[k]*A[k],d+=y[k]*y[k];var E=Math.sqrt(d),L=0;for(k=0;k<3;++k)A[k]-=y[k]*S/d,L+=A[k]*A[k],y[k]/=E;var O=Math.sqrt(L);for(k=0;k<3;++k)A[k]/=O;var P=this.computedToward;s(P,y,A),l(P,P);var F=Math.exp(this.computedRadius[0]),U=this.computedAngle[0],I=this.computedAngle[1],N=Math.cos(U),W=Math.sin(U),B=Math.cos(I),V=Math.sin(I),q=this.computedCenter,ne=N*B,$=W*B,K=V,ee=-N*V,J=-W*V,Z=B,te=this.computedEye,oe=this.computedMatrix;for(k=0;k<3;++k){var se=ne*A[k]+$*P[k]+K*y[k];oe[4*k+1]=ee*A[k]+J*P[k]+Z*y[k],oe[4*k+2]=se,oe[4*k+3]=0}var ce=oe[1],ye=oe[5],me=oe[9],fe=oe[2],pe=oe[6],ge=oe[10],ke=ye*ge-me*pe,Ce=me*fe-ce*ge,de=ce*pe-ye*fe,ae=p(ke,Ce,de);for(ke/=ae,Ce/=ae,de/=ae,oe[0]=ke,oe[4]=Ce,oe[8]=de,k=0;k<3;++k)te[k]=q[k]+oe[2+4*k]*F;for(k=0;k<3;++k){L=0;for(var re=0;re<3;++re)L+=oe[k+4*re]*te[re];oe[12+k]=-L}oe[15]=1},g.getMatrix=function(x,y){this.recalcMatrix(x);var A=this.computedMatrix;if(y){for(var d=0;d<16;++d)y[d]=A[d];return y}return A};var v=[0,0,0];g.rotate=function(x,y,A,d){if(this.angle.move(x,y,A),d){this.recalcMatrix(x);var S=this.computedMatrix;v[0]=S[2],v[1]=S[6],v[2]=S[10];for(var k=this.computedUp,E=this.computedRight,L=this.computedToward,O=0;O<3;++O)S[4*O]=k[O],S[4*O+1]=E[O],S[4*O+2]=L[O];for(a(S,S,d,v),O=0;O<3;++O)k[O]=S[4*O],E[O]=S[4*O+1];this.up.set(x,k[0],k[1],k[2]),this.right.set(x,E[0],E[1],E[2])}},g.pan=function(x,y,A,d){y=y||0,A=A||0,d=d||0,this.recalcMatrix(x);var S=this.computedMatrix,k=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],L=S[9],O=p(k,E,L);k/=O,E/=O,L/=O;var P=S[0],F=S[4],U=S[8],I=P*k+F*E+U*L,N=p(P-=k*I,F-=E*I,U-=L*I),W=(P/=N)*y+k*A,B=(F/=N)*y+E*A,V=(U/=N)*y+L*A;this.center.move(x,W,B,V);var q=Math.exp(this.computedRadius[0]);q=Math.max(1e-4,q+d),this.radius.set(x,Math.log(q))},g.translate=function(x,y,A,d){this.center.move(x,y||0,A||0,d||0)},g.setMatrix=function(x,y,A,d){var S=1;typeof A=="number"&&(S=0|A),(S<0||S>3)&&(S=1);var k=(S+2)%3;y||(this.recalcMatrix(x),y=this.computedMatrix);var E=y[S],L=y[S+4],O=y[S+8];if(d){var P=Math.abs(E),F=Math.abs(L),U=Math.abs(O),I=Math.max(P,F,U);P===I?(E=E<0?-1:1,L=O=0):U===I?(O=O<0?-1:1,E=L=0):(L=L<0?-1:1,E=O=0)}else{var N=p(E,L,O);E/=N,L/=N,O/=N}var W,B,V=y[k],q=y[k+4],ne=y[k+8],$=V*E+q*L+ne*O,K=p(V-=E*$,q-=L*$,ne-=O*$),ee=L*(ne/=K)-O*(q/=K),J=O*(V/=K)-E*ne,Z=E*q-L*V,te=p(ee,J,Z);if(ee/=te,J/=te,Z/=te,this.center.jump(x,Te,Ae,Pe),this.radius.idle(x),this.up.jump(x,E,L,O),this.right.jump(x,V,q,ne),S===2){var oe=y[1],se=y[5],ce=y[9],ye=oe*V+se*q+ce*ne,me=oe*ee+se*J+ce*Z;W=ke<0?-Math.PI/2:Math.PI/2,B=Math.atan2(me,ye)}else{var fe=y[2],pe=y[6],ge=y[10],ke=fe*E+pe*L+ge*O,Ce=fe*V+pe*q+ge*ne,de=fe*ee+pe*J+ge*Z;W=Math.asin(f(ke)),B=Math.atan2(de,Ce)}this.angle.jump(x,B,W),this.recalcMatrix(x);var ae=y[2],re=y[6],he=y[10],Se=this.computedMatrix;n(Se,y);var xe=Se[15],Te=Se[12]/xe,Ae=Se[13]/xe,Pe=Se[14]/xe,De=Math.exp(this.computedRadius[0]);this.center.jump(x,Te-ae*De,Ae-re*De,Pe-he*De)},g.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},g.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},g.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},g.setDistance=function(x,y){y>0&&this.radius.set(x,Math.log(y))},g.lookAt=function(x,y,A,d){this.recalcMatrix(x),y=y||this.computedEye,A=A||this.computedCenter;var S=(d=d||this.computedUp)[0],k=d[1],E=d[2],L=p(S,k,E);if(!(L<1e-6)){S/=L,k/=L,E/=L;var O=y[0]-A[0],P=y[1]-A[1],F=y[2]-A[2],U=p(O,P,F);if(!(U<1e-6)){O/=U,P/=U,F/=U;var I=this.computedRight,N=I[0],W=I[1],B=I[2],V=S*N+k*W+E*B,q=p(N-=V*S,W-=V*k,B-=V*E);if(!(q<.01&&(q=p(N=k*F-E*P,W=E*O-S*F,B=S*P-k*O))<1e-6)){N/=q,W/=q,B/=q,this.up.set(x,S,k,E),this.right.set(x,N,W,B),this.center.set(x,A[0],A[1],A[2]),this.radius.set(x,Math.log(U));var ne=k*B-E*W,$=E*N-S*B,K=S*W-k*N,ee=p(ne,$,K),J=S*O+k*P+E*F,Z=N*O+W*P+B*F,te=(ne/=ee)*O+($/=ee)*P+(K/=ee)*F,oe=Math.asin(f(J)),se=Math.atan2(te,Z),ce=this.angle._state,ye=ce[ce.length-1],me=ce[ce.length-2];ye%=2*Math.PI;var fe=Math.abs(ye+2*Math.PI-se),pe=Math.abs(ye-se),ge=Math.abs(ye-2*Math.PI-se);fe<pe&&(ye+=2*Math.PI),ge<pe&&(ye-=2*Math.PI),this.angle.jump(this.angle.lastT(),ye,me),this.angle.set(x,se,oe)}}}}},5250:function(c){"use strict";c.exports=function(t,i,n){var a=t*i,s=o*t,l=s-(s-t),u=t-l,p=o*i,f=p-(p-i),m=i-f,h=u*m-(a-l*f-u*f-l*m);return n?(n[0]=h,n[1]=a,n):[h,a]};var o=+(Math.pow(2,27)+1)},9362:function(c){"use strict";c.exports=function(o,t,i){var n=o+t,a=n-o,s=t-a,l=o-(n-a);return i?(i[0]=l+s,i[1]=n,i):[l+s,n]}},1888:function(c,o,t){"use strict";var i=t(8828),n=t(1338),a=t(4793).hp;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var s=typeof Uint8ClampedArray<"u",l=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=t.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=n([32,0])),p.BIGUINT64||(p.BIGUINT64=n([32,0])),p.BIGINT64||(p.BIGINT64=n([32,0])),p.BUFFER||(p.BUFFER=n([32,0]));var f=p.DATA,m=p.BUFFER;function h(I){if(I){var N=I.length||I.byteLength,W=i.log2(N);f[W].push(I)}}function g(I){I=i.nextPow2(I);var N=i.log2(I),W=f[N];return W.length>0?W.pop():new ArrayBuffer(I)}function v(I){return new Uint8Array(g(I),0,I)}function x(I){return new Uint16Array(g(2*I),0,I)}function y(I){return new Uint32Array(g(4*I),0,I)}function A(I){return new Int8Array(g(I),0,I)}function d(I){return new Int16Array(g(2*I),0,I)}function S(I){return new Int32Array(g(4*I),0,I)}function k(I){return new Float32Array(g(4*I),0,I)}function E(I){return new Float64Array(g(8*I),0,I)}function L(I){return s?new Uint8ClampedArray(g(I),0,I):v(I)}function O(I){return l?new BigUint64Array(g(8*I),0,I):null}function P(I){return u?new BigInt64Array(g(8*I),0,I):null}function F(I){return new DataView(g(I),0,I)}function U(I){I=i.nextPow2(I);var N=i.log2(I),W=m[N];return W.length>0?W.pop():new a(I)}o.free=function(I){if(a.isBuffer(I))m[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var N=I.length||I.byteLength,W=0|i.log2(N);f[W].push(I)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(I){h(I.buffer)},o.freeArrayBuffer=h,o.freeBuffer=function(I){m[i.log2(I.length)].push(I)},o.malloc=function(I,N){if(N===void 0||N==="arraybuffer")return g(I);switch(N){case"uint8":return v(I);case"uint16":return x(I);case"uint32":return y(I);case"int8":return A(I);case"int16":return d(I);case"int32":return S(I);case"float":case"float32":return k(I);case"double":case"float64":return E(I);case"uint8_clamped":return L(I);case"bigint64":return P(I);case"biguint64":return O(I);case"buffer":return U(I);case"data":case"dataview":return F(I);default:return null}return null},o.mallocArrayBuffer=g,o.mallocUint8=v,o.mallocUint16=x,o.mallocUint32=y,o.mallocInt8=A,o.mallocInt16=d,o.mallocInt32=S,o.mallocFloat32=o.mallocFloat=k,o.mallocFloat64=o.mallocDouble=E,o.mallocUint8Clamped=L,o.mallocBigUint64=O,o.mallocBigInt64=P,o.mallocDataView=F,o.mallocBuffer=U,o.clearCache=function(){for(var I=0;I<32;++I)p.UINT8[I].length=0,p.UINT16[I].length=0,p.UINT32[I].length=0,p.INT8[I].length=0,p.INT16[I].length=0,p.INT32[I].length=0,p.FLOAT[I].length=0,p.DOUBLE[I].length=0,p.BIGUINT64[I].length=0,p.BIGINT64[I].length=0,p.UINT8C[I].length=0,f[I].length=0,m[I].length=0}},1755:function(c){"use strict";function o(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}c.exports=o;var t=o.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var n=i,a=this.roots;a[i]!==i;)i=a[i];for(;a[n]!==i;){var s=a[n];a[n]=i,n=s}return i},t.link=function(i,n){var a=this.find(i),s=this.find(n);if(a!==s){var l=this.ranks,u=this.roots,p=l[a],f=l[s];p<f?u[a]=s:f<p?u[s]=a:(u[s]=a,++l[a])}}},1682:function(c){"use strict";c.exports=function(o,t,i){return o.length===0?o:t?(i||o.sort(t),function(n,a){for(var s=1,l=n.length,u=n[0],p=n[0],f=1;f<l;++f)if(p=u,a(u=n[f],p)){if(f===s){s++;continue}n[s++]=u}return n.length=s,n}(o,t)):(i||o.sort(),function(n){for(var a=1,s=n.length,l=n[0],u=n[0],p=1;p<s;++p,u=l)if(u=l,(l=n[p])!==u){if(p===a){a++;continue}n[a++]=l}return n.length=a,n}(o))}},4359:function(c,o,t){"use strict";c.exports=function(s,l){return typeof l=="object"&&l!==null||(l={}),i(s,l.canvas||n,l.context||a,l)};var i=t(7718),n=null,a=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,a=n.getContext("2d"))},7718:function(c,o,t){c.exports=function(O,P,F,U){var I=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return U&&(U.size&&U.size>0&&(I=U.size),U.lineSpacing&&U.lineSpacing>0&&(N=U.lineSpacing),U.styletags&&U.styletags.breaklines&&(W.breaklines=!!U.styletags.breaklines),U.styletags&&U.styletags.bolds&&(W.bolds=!!U.styletags.bolds),U.styletags&&U.styletags.italics&&(W.italics=!!U.styletags.italics),U.styletags&&U.styletags.subscripts&&(W.subscripts=!!U.styletags.subscripts),U.styletags&&U.styletags.superscripts&&(W.superscripts=!!U.styletags.superscripts)),F.font=[U.fontStyle,U.fontVariant,U.fontWeight,I+"px",U.font].filter(function(B){return B}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr",L(function(B,V,q,ne,$,K){q=q.replace(/\n/g,""),q=K.breaklines===!0?q.replace(/\<br\>/g,`
`):q.replace(/\<br\>/g," ");var ee="",J=[];for(se=0;se<q.length;++se)J[se]=ee;K.bolds===!0&&(J=S(p,f,q,J)),K.italics===!0&&(J=S(m,h,q,J)),K.superscripts===!0&&(J=S(g,x,q,J)),K.subscripts===!0&&(J=S(y,d,q,J));var Z=[],te="";for(se=0;se<q.length;++se)J[se]!==null&&(te+=q[se],Z.push(J[se]));var oe,se,ce,ye,me,fe=te.split(`
`),pe=fe.length,ge=Math.round($*ne),ke=ne,Ce=2*ne,de=0,ae=pe*ge+Ce;B.height<ae&&(B.height=ae),V.fillStyle="#000",V.fillRect(0,0,B.width,B.height),V.fillStyle="#fff";var re=0,he="";function Se(){if(he!==""){var Ee=V.measureText(he).width;V.fillText(he,ke+ce,Ce+ye),ce+=Ee}}function xe(){return Math.round(me)+"px "}function Te(Ee,Fe){var Le=""+V.font;if(K.subscripts===!0){var je=Ee.indexOf(A),Ge=Fe.indexOf(A),Je=je>-1?parseInt(Ee[1+je]):0,rt=Ge>-1?parseInt(Fe[1+Ge]):0;Je!==rt&&(Le=Le.replace(xe(),"?px "),me*=Math.pow(.75,rt-Je),Le=Le.replace("?px ",xe())),ye+=.25*ge*(rt-Je)}if(K.superscripts===!0){var ot=Ee.indexOf(v),yt=Fe.indexOf(v),_t=ot>-1?parseInt(Ee[1+ot]):0,mt=yt>-1?parseInt(Fe[1+yt]):0;_t!==mt&&(Le=Le.replace(xe(),"?px "),me*=Math.pow(.75,mt-_t),Le=Le.replace("?px ",xe())),ye-=.25*ge*(mt-_t)}if(K.bolds===!0){var tt=Ee.indexOf(f)>-1,Qe=Fe.indexOf(f)>-1;!tt&&Qe&&(Le=Dt?Le.replace("italic ","italic bold "):"bold "+Le),tt&&!Qe&&(Le=Le.replace("bold ",""))}if(K.italics===!0){var Dt=Ee.indexOf(h)>-1,zt=Fe.indexOf(h)>-1;!Dt&&zt&&(Le="italic "+Le),Dt&&!zt&&(Le=Le.replace("italic ",""))}V.font=Le}for(oe=0;oe<pe;++oe){var Ae=fe[oe]+`
`;for(ce=0,ye=oe*ge,me=ne,he="",se=0;se<Ae.length;++se){var Pe=se+re<Z.length?Z[se+re]:Z[Z.length-1];ee===Pe?he+=Ae[se]:(Se(),he=Ae[se],Pe!==void 0&&(Te(ee,Pe),ee=Pe))}Se(),re+=Ae.length;var De=0|Math.round(ce+2*ke);de<De&&(de=De)}var ve=de,we=Ce+ge*pe;return n(V.getImageData(0,0,ve,we).data,[we,ve,4]).pick(-1,-1,0).transpose(1,0)}(P,F,O,I,N,W),U,I)},c.exports.processPixels=L;var i=t(3711),n=t(9618),a=t(5878),s=t(332),l=t(2538),u=t(2095),p="b",f="b|",m="i",h="i|",g="sup",v="+",x="+1",y="sub",A="-",d="-1";function S(O,P,F,U){for(var I="<"+O+">",N="</"+O+">",W=I.length,B=N.length,V=P[0]===v||P[0]===A,q=0,ne=-B;q>-1&&(q=F.indexOf(I,q))!==-1&&(ne=F.indexOf(N,q+W))!==-1&&!(ne<=q);){for(var $=q;$<ne+B;++$)if($<q+W||$>=ne)U[$]=null,F=F.substr(0,$)+" "+F.substr($+1);else if(U[$]!==null){var K=U[$].indexOf(P[0]);K===-1?U[$]+=P:V&&(U[$]=U[$].substr(0,K+1)+(1+parseInt(U[$][K+1]))+U[$].substr(K+2))}var ee=q+W,J=F.substr(ee,ne-ee).indexOf(I);q=J!==-1?J:ne+B}return U}function k(O,P){var F=i(O,128);return P?a(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function E(O,P,F,U){var I=k(O,U),N=function(oe,se,ce){for(var ye=se.textAlign||"start",me=se.textBaseline||"alphabetic",fe=[1<<30,1<<30],pe=[0,0],ge=oe.length,ke=0;ke<ge;++ke)for(var Ce=oe[ke],de=0;de<2;++de)fe[de]=0|Math.min(fe[de],Ce[de]),pe[de]=0|Math.max(pe[de],Ce[de]);var ae=0;switch(ye){case"center":ae=-.5*(fe[0]+pe[0]);break;case"right":case"end":ae=-pe[0];break;case"left":case"start":ae=-fe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ye+"'")}var re=0;switch(me){case"hanging":case"top":re=-fe[1];break;case"middle":re=-.5*(fe[1]+pe[1]);break;case"alphabetic":case"ideographic":re=-3*ce;break;case"bottom":re=-pe[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+me+"'")}var he=1/ce;return"lineHeight"in se?he*=+se.lineHeight:"width"in se?he=se.width/(pe[0]-fe[0]):"height"in se&&(he=se.height/(pe[1]-fe[1])),oe.map(function(Se){return[he*(Se[0]+ae),he*(Se[1]+re)]})}(I.positions,P,F),W=I.edges,B=P.orientation==="ccw";if(s(N,W),P.polygons||P.polygon||P.polyline){for(var V=u(W,N),q=new Array(V.length),ne=0;ne<V.length;++ne){for(var $=V[ne],K=new Array($.length),ee=0;ee<$.length;++ee){for(var J=$[ee],Z=new Array(J.length),te=0;te<J.length;++te)Z[te]=N[J[te]].slice();B&&Z.reverse(),K[ee]=Z}q[ne]=K}return q}return P.triangles||P.triangulate||P.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function L(O,P,F){try{return E(O,P,F,!0)}catch{}try{return E(O,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(c){(function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var o=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new t,n=Object.freeze({});if(i.set(n,1),i.get(n)===1)return void(c.exports=WeakMap);o=!0}}var a=Object.getOwnPropertyNames,s=Object.defineProperty,l=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),m=new Uint8Array(f);crypto.getRandomValues(m),p=u+"rand:"+Array.prototype.map.call(m,function(E){return(E%36).toString(36)}).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(E){return a(E).filter(A)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(E){return h(E).filter(A)}})}(function(){var E=Object.freeze;s(Object,"freeze",{value:function(P){return d(P),E(P)}});var L=Object.seal;s(Object,"seal",{value:function(P){return d(P),L(P)}});var O=Object.preventExtensions;s(Object,"preventExtensions",{value:function(P){return d(P),O(P)}})})();var g=!1,v=0,x=function(){this instanceof x||k();var E=[],L=[],O=v++;return Object.create(x.prototype,{get___:{value:S(function(P,F){var U,I=d(P);return I?O in I?I[O]:F:(U=E.indexOf(P))>=0?L[U]:F})},has___:{value:S(function(P){var F=d(P);return F?O in F:E.indexOf(P)>=0})},set___:{value:S(function(P,F){var U,I=d(P);return I?I[O]=F:(U=E.indexOf(P))>=0?L[U]=F:(U=E.length,L[U]=F,E[U]=P),this})},delete___:{value:S(function(P){var F,U,I=d(P);return I?O in I&&delete I[O]:!((F=E.indexOf(P))<0||(U=E.length-1,E[F]=void 0,L[F]=L[U],E[F]=E[U],E.length=U,L.length=U,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof x||k();var L,O=new t,P=void 0,F=!1;return L=o?function(U,I){return O.set(U,I),O.has(U)||(P||(P=new x),P.set(U,I)),this}:function(U,I){if(F)try{O.set(U,I)}catch{P||(P=new x),P.set___(U,I)}else O.set(U,I);return this},Object.create(x.prototype,{get___:{value:S(function(U,I){return P?O.has(U)?O.get(U):P.get___(U,I):O.get(U,I)})},has___:{value:S(function(U){return O.has(U)||!!P&&P.has___(U)})},set___:{value:S(L)},delete___:{value:S(function(U){var I=!!O.delete(U);return P&&P.delete___(U)||I})},permitHostObjects___:{value:S(function(U){if(U!==y)throw new Error("bogus call to permitHostObjects___");F=!0})}})}o&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=x.prototype,c.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),c.exports=x)}function y(E){E.permitHostObjects___&&E.permitHostObjects___(y)}function A(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function d(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[p];if(L&&L.key===E)return L;if(l(E)){L={key:E};try{return s(E,p,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function k(){g||typeof console>"u"||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},236:function(c,o,t){var i=t(8284);c.exports=function(){var n={};return function(a){if((typeof a!="object"||a===null)&&typeof a!="function")throw new Error("Weakmap-shim: Key must be object");var s=a.valueOf(n);return s&&s.identity===n?s:i(a,n)}}},8284:function(c){c.exports=function(o,t){var i={identity:t},n=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(a){return a!==t?n.apply(this,arguments):i},writable:!0}),i}},606:function(c,o,t){var i=t(236);c.exports=function(){var n=i();return{get:function(a,s){var l=n(a);return l.hasOwnProperty("value")?l.value:s},set:function(a,s){return n(a).value=s,this},has:function(a){return"value"in n(a)},delete:function(a){return delete n(a).value}}}},3349:function(c){"use strict";c.exports=function(o){var t={};return function(i,n,a){var s=i.dtype,l=i.order,u=[s,l.join()].join(),p=t[u];return p||(t[u]=p=o([s,l])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,n,a)}}((function(){return function(o,t,i,n,a,s){var l=o[0],u=i[0],p=[0],f=u;n|=0;var m=0,h=u;for(m=0;m<l;++m){var g=t[n]-s,v=t[n+f]-s;g>=0!=v>=0&&a.push(p[0]+.5+.5*(g+v)/(g-v)),n+=h,++p[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},781:function(c,o,t){"use strict";c.exports=function(n,a){var s=[];return a=+a||0,i(n.hi(n.shape[0]-1),s,a),s};var i=t(3349)},7790:function(){}},r={};function w(c){var o=r[c];if(o!==void 0)return o.exports;var t=r[c]={id:c,loaded:!1,exports:{}};return T[c].call(t.exports,t,t.exports,w),t.loaded=!0,t.exports}w.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),w.nmd=function(c){return c.paths=[],c.children||(c.children=[]),c};var b=w(1964);R.exports=b})()},33576:function(R,C,e){"use strict";function _(ae,re){for(var he=0;he<re.length;he++){var Se=re[he];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(ae,(xe=function(Te,Ae){if(b(Te)!=="object"||Te===null)return Te;var Pe=Te[Symbol.toPrimitive];if(Pe!==void 0){var De=Pe.call(Te,"string");if(b(De)!=="object")return De;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Te)}(Se.key),b(xe)==="symbol"?xe:String(xe)),Se)}var xe}function T(ae){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(re){return re.__proto__||Object.getPrototypeOf(re)},T(ae)}function r(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function w(ae,re){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,Se){return he.__proto__=Se,he},w(ae,re)}function b(ae){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},b(ae)}var c=e(59968),o=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;C.Buffer=a,C.SlowBuffer=function(ae){return+ae!=ae&&(ae=0),a.alloc(+ae)},C.INSPECT_MAX_BYTES=50;var i=2147483647;function n(ae){if(ae>i)throw new RangeError('The value "'+ae+'" is invalid for option "size"');var re=new Uint8Array(ae);return Object.setPrototypeOf(re,a.prototype),re}function a(ae,re,he){if(typeof ae=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(ae)}return s(ae,re,he)}function s(ae,re,he){if(typeof ae=="string")return function(Te,Ae){if(typeof Ae=="string"&&Ae!==""||(Ae="utf8"),!a.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);var Pe=0|h(Te,Ae),De=n(Pe),ve=De.write(Te,Ae);return ve!==Pe&&(De=De.slice(0,ve)),De}(ae,re);if(ArrayBuffer.isView(ae))return function(Te){if(pe(Te,Uint8Array)){var Ae=new Uint8Array(Te);return f(Ae.buffer,Ae.byteOffset,Ae.byteLength)}return p(Te)}(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(ae));if(pe(ae,ArrayBuffer)||ae&&pe(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(ae,SharedArrayBuffer)||ae&&pe(ae.buffer,SharedArrayBuffer)))return f(ae,re,he);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=ae.valueOf&&ae.valueOf();if(Se!=null&&Se!==ae)return a.from(Se,re,he);var xe=function(Te){if(a.isBuffer(Te)){var Ae=0|m(Te.length),Pe=n(Ae);return Pe.length===0||Te.copy(Pe,0,0,Ae),Pe}return Te.length!==void 0?typeof Te.length!="number"||ge(Te.length)?n(0):p(Te):Te.type==="Buffer"&&Array.isArray(Te.data)?p(Te.data):void 0}(ae);if(xe)return xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return a.from(ae[Symbol.toPrimitive]("string"),re,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(ae))}function l(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function u(ae){return l(ae),n(ae<0?0:0|m(ae))}function p(ae){for(var re=ae.length<0?0:0|m(ae.length),he=n(re),Se=0;Se<re;Se+=1)he[Se]=255&ae[Se];return he}function f(ae,re,he){if(re<0||ae.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<re+(he||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=re===void 0&&he===void 0?new Uint8Array(ae):he===void 0?new Uint8Array(ae,re):new Uint8Array(ae,re,he),Object.setPrototypeOf(Se,a.prototype),Se}function m(ae){if(ae>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|ae}function h(ae,re){if(a.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||pe(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(ae));var he=ae.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&he===0)return 0;for(var xe=!1;;)switch(re){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return ye(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return me(ae).length;default:if(xe)return Se?-1:ye(ae).length;re=(""+re).toLowerCase(),xe=!0}}function g(ae,re,he){var Se=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((he===void 0||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(re>>>=0))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return I(this,re,he);case"utf8":case"utf-8":return O(this,re,he);case"ascii":return F(this,re,he);case"latin1":case"binary":return U(this,re,he);case"base64":return L(this,re,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,re,he);default:if(Se)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Se=!0}}function v(ae,re,he){var Se=ae[re];ae[re]=ae[he],ae[he]=Se}function x(ae,re,he,Se,xe){if(ae.length===0)return-1;if(typeof he=="string"?(Se=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),ge(he=+he)&&(he=xe?0:ae.length-1),he<0&&(he=ae.length+he),he>=ae.length){if(xe)return-1;he=ae.length-1}else if(he<0){if(!xe)return-1;he=0}if(typeof re=="string"&&(re=a.from(re,Se)),a.isBuffer(re))return re.length===0?-1:y(ae,re,he,Se,xe);if(typeof re=="number")return re&=255,typeof Uint8Array.prototype.indexOf=="function"?xe?Uint8Array.prototype.indexOf.call(ae,re,he):Uint8Array.prototype.lastIndexOf.call(ae,re,he):y(ae,[re],he,Se,xe);throw new TypeError("val must be string, number or Buffer")}function y(ae,re,he,Se,xe){var Te,Ae=1,Pe=ae.length,De=re.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ae.length<2||re.length<2)return-1;Ae=2,Pe/=2,De/=2,he/=2}function ve(Le,je){return Ae===1?Le[je]:Le.readUInt16BE(je*Ae)}if(xe){var we=-1;for(Te=he;Te<Pe;Te++)if(ve(ae,Te)===ve(re,we===-1?0:Te-we)){if(we===-1&&(we=Te),Te-we+1===De)return we*Ae}else we!==-1&&(Te-=Te-we),we=-1}else for(he+De>Pe&&(he=Pe-De),Te=he;Te>=0;Te--){for(var Ee=!0,Fe=0;Fe<De;Fe++)if(ve(ae,Te+Fe)!==ve(re,Fe)){Ee=!1;break}if(Ee)return Te}return-1}function A(ae,re,he,Se){he=Number(he)||0;var xe=ae.length-he;Se?(Se=Number(Se))>xe&&(Se=xe):Se=xe;var Te,Ae=re.length;for(Se>Ae/2&&(Se=Ae/2),Te=0;Te<Se;++Te){var Pe=parseInt(re.substr(2*Te,2),16);if(ge(Pe))return Te;ae[he+Te]=Pe}return Te}function d(ae,re,he,Se){return fe(ye(re,ae.length-he),ae,he,Se)}function S(ae,re,he,Se){return fe(function(xe){for(var Te=[],Ae=0;Ae<xe.length;++Ae)Te.push(255&xe.charCodeAt(Ae));return Te}(re),ae,he,Se)}function k(ae,re,he,Se){return fe(me(re),ae,he,Se)}function E(ae,re,he,Se){return fe(function(xe,Te){for(var Ae,Pe,De,ve=[],we=0;we<xe.length&&!((Te-=2)<0);++we)Pe=(Ae=xe.charCodeAt(we))>>8,De=Ae%256,ve.push(De),ve.push(Pe);return ve}(re,ae.length-he),ae,he,Se)}function L(ae,re,he){return re===0&&he===ae.length?c.fromByteArray(ae):c.fromByteArray(ae.slice(re,he))}function O(ae,re,he){he=Math.min(ae.length,he);for(var Se=[],xe=re;xe<he;){var Te=ae[xe],Ae=null,Pe=Te>239?4:Te>223?3:Te>191?2:1;if(xe+Pe<=he){var De=void 0,ve=void 0,we=void 0,Ee=void 0;switch(Pe){case 1:Te<128&&(Ae=Te);break;case 2:(192&(De=ae[xe+1]))==128&&(Ee=(31&Te)<<6|63&De)>127&&(Ae=Ee);break;case 3:De=ae[xe+1],ve=ae[xe+2],(192&De)==128&&(192&ve)==128&&(Ee=(15&Te)<<12|(63&De)<<6|63&ve)>2047&&(Ee<55296||Ee>57343)&&(Ae=Ee);break;case 4:De=ae[xe+1],ve=ae[xe+2],we=ae[xe+3],(192&De)==128&&(192&ve)==128&&(192&we)==128&&(Ee=(15&Te)<<18|(63&De)<<12|(63&ve)<<6|63&we)>65535&&Ee<1114112&&(Ae=Ee)}}Ae===null?(Ae=65533,Pe=1):Ae>65535&&(Ae-=65536,Se.push(Ae>>>10&1023|55296),Ae=56320|1023&Ae),Se.push(Ae),xe+=Pe}return function(Fe){var Le=Fe.length;if(Le<=P)return String.fromCharCode.apply(String,Fe);for(var je="",Ge=0;Ge<Le;)je+=String.fromCharCode.apply(String,Fe.slice(Ge,Ge+=P));return je}(Se)}C.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var ae=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(ae,re),ae.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(ae,re,he){return s(ae,re,he)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(ae,re,he){return function(Se,xe,Te){return l(Se),Se<=0?n(Se):xe!==void 0?typeof Te=="string"?n(Se).fill(xe,Te):n(Se).fill(xe):n(Se)}(ae,re,he)},a.allocUnsafe=function(ae){return u(ae)},a.allocUnsafeSlow=function(ae){return u(ae)},a.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==a.prototype},a.compare=function(ae,re){if(pe(ae,Uint8Array)&&(ae=a.from(ae,ae.offset,ae.byteLength)),pe(re,Uint8Array)&&(re=a.from(re,re.offset,re.byteLength)),!a.isBuffer(ae)||!a.isBuffer(re))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===re)return 0;for(var he=ae.length,Se=re.length,xe=0,Te=Math.min(he,Se);xe<Te;++xe)if(ae[xe]!==re[xe]){he=ae[xe],Se=re[xe];break}return he<Se?-1:Se<he?1:0},a.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(ae,re){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return a.alloc(0);var he;if(re===void 0)for(re=0,he=0;he<ae.length;++he)re+=ae[he].length;var Se=a.allocUnsafe(re),xe=0;for(he=0;he<ae.length;++he){var Te=ae[he];if(pe(Te,Uint8Array))xe+Te.length>Se.length?(a.isBuffer(Te)||(Te=a.from(Te)),Te.copy(Se,xe)):Uint8Array.prototype.set.call(Se,Te,xe);else{if(!a.isBuffer(Te))throw new TypeError('"list" argument must be an Array of Buffers');Te.copy(Se,xe)}xe+=Te.length}return Se},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var ae=this.length;if(ae%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var re=0;re<ae;re+=2)v(this,re,re+1);return this},a.prototype.swap32=function(){var ae=this.length;if(ae%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var re=0;re<ae;re+=4)v(this,re,re+3),v(this,re+1,re+2);return this},a.prototype.swap64=function(){var ae=this.length;if(ae%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var re=0;re<ae;re+=8)v(this,re,re+7),v(this,re+1,re+6),v(this,re+2,re+5),v(this,re+3,re+4);return this},a.prototype.toString=function(){var ae=this.length;return ae===0?"":arguments.length===0?O(this,0,ae):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(ae){if(!a.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae||a.compare(this,ae)===0},a.prototype.inspect=function(){var ae="",re=C.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,re).replace(/(.{2})/g,"$1 ").trim(),this.length>re&&(ae+=" ... "),"<Buffer "+ae+">"},t&&(a.prototype[t]=a.prototype.inspect),a.prototype.compare=function(ae,re,he,Se,xe){if(pe(ae,Uint8Array)&&(ae=a.from(ae,ae.offset,ae.byteLength)),!a.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(ae));if(re===void 0&&(re=0),he===void 0&&(he=ae?ae.length:0),Se===void 0&&(Se=0),xe===void 0&&(xe=this.length),re<0||he>ae.length||Se<0||xe>this.length)throw new RangeError("out of range index");if(Se>=xe&&re>=he)return 0;if(Se>=xe)return-1;if(re>=he)return 1;if(this===ae)return 0;for(var Te=(xe>>>=0)-(Se>>>=0),Ae=(he>>>=0)-(re>>>=0),Pe=Math.min(Te,Ae),De=this.slice(Se,xe),ve=ae.slice(re,he),we=0;we<Pe;++we)if(De[we]!==ve[we]){Te=De[we],Ae=ve[we];break}return Te<Ae?-1:Ae<Te?1:0},a.prototype.includes=function(ae,re,he){return this.indexOf(ae,re,he)!==-1},a.prototype.indexOf=function(ae,re,he){return x(this,ae,re,he,!0)},a.prototype.lastIndexOf=function(ae,re,he){return x(this,ae,re,he,!1)},a.prototype.write=function(ae,re,he,Se){if(re===void 0)Se="utf8",he=this.length,re=0;else if(he===void 0&&typeof re=="string")Se=re,he=this.length,re=0;else{if(!isFinite(re))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");re>>>=0,isFinite(he)?(he>>>=0,Se===void 0&&(Se="utf8")):(Se=he,he=void 0)}var xe=this.length-re;if((he===void 0||he>xe)&&(he=xe),ae.length>0&&(he<0||re<0)||re>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var Te=!1;;)switch(Se){case"hex":return A(this,ae,re,he);case"utf8":case"utf-8":return d(this,ae,re,he);case"ascii":case"latin1":case"binary":return S(this,ae,re,he);case"base64":return k(this,ae,re,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,ae,re,he);default:if(Te)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function F(ae,re,he){var Se="";he=Math.min(ae.length,he);for(var xe=re;xe<he;++xe)Se+=String.fromCharCode(127&ae[xe]);return Se}function U(ae,re,he){var Se="";he=Math.min(ae.length,he);for(var xe=re;xe<he;++xe)Se+=String.fromCharCode(ae[xe]);return Se}function I(ae,re,he){var Se=ae.length;(!re||re<0)&&(re=0),(!he||he<0||he>Se)&&(he=Se);for(var xe="",Te=re;Te<he;++Te)xe+=ke[ae[Te]];return xe}function N(ae,re,he){for(var Se=ae.slice(re,he),xe="",Te=0;Te<Se.length-1;Te+=2)xe+=String.fromCharCode(Se[Te]+256*Se[Te+1]);return xe}function W(ae,re,he){if(ae%1!=0||ae<0)throw new RangeError("offset is not uint");if(ae+re>he)throw new RangeError("Trying to access beyond buffer length")}function B(ae,re,he,Se,xe,Te){if(!a.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>xe||re<Te)throw new RangeError('"value" argument is out of bounds');if(he+Se>ae.length)throw new RangeError("Index out of range")}function V(ae,re,he,Se,xe){te(re,Se,xe,ae,he,7);var Te=Number(re&BigInt(4294967295));ae[he++]=Te,Te>>=8,ae[he++]=Te,Te>>=8,ae[he++]=Te,Te>>=8,ae[he++]=Te;var Ae=Number(re>>BigInt(32)&BigInt(4294967295));return ae[he++]=Ae,Ae>>=8,ae[he++]=Ae,Ae>>=8,ae[he++]=Ae,Ae>>=8,ae[he++]=Ae,he}function q(ae,re,he,Se,xe){te(re,Se,xe,ae,he,7);var Te=Number(re&BigInt(4294967295));ae[he+7]=Te,Te>>=8,ae[he+6]=Te,Te>>=8,ae[he+5]=Te,Te>>=8,ae[he+4]=Te;var Ae=Number(re>>BigInt(32)&BigInt(4294967295));return ae[he+3]=Ae,Ae>>=8,ae[he+2]=Ae,Ae>>=8,ae[he+1]=Ae,Ae>>=8,ae[he]=Ae,he+8}function ne(ae,re,he,Se,xe,Te){if(he+Se>ae.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function $(ae,re,he,Se,xe){return re=+re,he>>>=0,xe||ne(ae,0,he,4),o.write(ae,re,he,Se,23,4),he+4}function K(ae,re,he,Se,xe){return re=+re,he>>>=0,xe||ne(ae,0,he,8),o.write(ae,re,he,Se,52,8),he+8}a.prototype.slice=function(ae,re){var he=this.length;(ae=~~ae)<0?(ae+=he)<0&&(ae=0):ae>he&&(ae=he),(re=re===void 0?he:~~re)<0?(re+=he)<0&&(re=0):re>he&&(re=he),re<ae&&(re=ae);var Se=this.subarray(ae,re);return Object.setPrototypeOf(Se,a.prototype),Se},a.prototype.readUintLE=a.prototype.readUIntLE=function(ae,re,he){ae>>>=0,re>>>=0,he||W(ae,re,this.length);for(var Se=this[ae],xe=1,Te=0;++Te<re&&(xe*=256);)Se+=this[ae+Te]*xe;return Se},a.prototype.readUintBE=a.prototype.readUIntBE=function(ae,re,he){ae>>>=0,re>>>=0,he||W(ae,re,this.length);for(var Se=this[ae+--re],xe=1;re>0&&(xe*=256);)Se+=this[ae+--re]*xe;return Se},a.prototype.readUint8=a.prototype.readUInt8=function(ae,re){return ae>>>=0,re||W(ae,1,this.length),this[ae]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(ae,re){return ae>>>=0,re||W(ae,2,this.length),this[ae]|this[ae+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(ae,re){return ae>>>=0,re||W(ae,2,this.length),this[ae]<<8|this[ae+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+16777216*this[ae+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),16777216*this[ae]+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},a.prototype.readBigUInt64LE=Ce(function(ae){oe(ae>>>=0,"offset");var re=this[ae],he=this[ae+7];re!==void 0&&he!==void 0||se(ae,this.length-8);var Se=re+this[++ae]*Math.pow(2,8)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,24),xe=this[++ae]+this[++ae]*Math.pow(2,8)+this[++ae]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(Se)+(BigInt(xe)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ce(function(ae){oe(ae>>>=0,"offset");var re=this[ae],he=this[ae+7];re!==void 0&&he!==void 0||se(ae,this.length-8);var Se=re*Math.pow(2,24)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,8)+this[++ae],xe=this[++ae]*Math.pow(2,24)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,8)+he;return(BigInt(Se)<<BigInt(32))+BigInt(xe)}),a.prototype.readIntLE=function(ae,re,he){ae>>>=0,re>>>=0,he||W(ae,re,this.length);for(var Se=this[ae],xe=1,Te=0;++Te<re&&(xe*=256);)Se+=this[ae+Te]*xe;return Se>=(xe*=128)&&(Se-=Math.pow(2,8*re)),Se},a.prototype.readIntBE=function(ae,re,he){ae>>>=0,re>>>=0,he||W(ae,re,this.length);for(var Se=re,xe=1,Te=this[ae+--Se];Se>0&&(xe*=256);)Te+=this[ae+--Se]*xe;return Te>=(xe*=128)&&(Te-=Math.pow(2,8*re)),Te},a.prototype.readInt8=function(ae,re){return ae>>>=0,re||W(ae,1,this.length),128&this[ae]?-1*(255-this[ae]+1):this[ae]},a.prototype.readInt16LE=function(ae,re){ae>>>=0,re||W(ae,2,this.length);var he=this[ae]|this[ae+1]<<8;return 32768&he?4294901760|he:he},a.prototype.readInt16BE=function(ae,re){ae>>>=0,re||W(ae,2,this.length);var he=this[ae+1]|this[ae]<<8;return 32768&he?4294901760|he:he},a.prototype.readInt32LE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},a.prototype.readInt32BE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},a.prototype.readBigInt64LE=Ce(function(ae){oe(ae>>>=0,"offset");var re=this[ae],he=this[ae+7];re!==void 0&&he!==void 0||se(ae,this.length-8);var Se=this[ae+4]+this[ae+5]*Math.pow(2,8)+this[ae+6]*Math.pow(2,16)+(he<<24);return(BigInt(Se)<<BigInt(32))+BigInt(re+this[++ae]*Math.pow(2,8)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,24))}),a.prototype.readBigInt64BE=Ce(function(ae){oe(ae>>>=0,"offset");var re=this[ae],he=this[ae+7];re!==void 0&&he!==void 0||se(ae,this.length-8);var Se=(re<<24)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,8)+this[++ae];return(BigInt(Se)<<BigInt(32))+BigInt(this[++ae]*Math.pow(2,24)+this[++ae]*Math.pow(2,16)+this[++ae]*Math.pow(2,8)+he)}),a.prototype.readFloatLE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),o.read(this,ae,!0,23,4)},a.prototype.readFloatBE=function(ae,re){return ae>>>=0,re||W(ae,4,this.length),o.read(this,ae,!1,23,4)},a.prototype.readDoubleLE=function(ae,re){return ae>>>=0,re||W(ae,8,this.length),o.read(this,ae,!0,52,8)},a.prototype.readDoubleBE=function(ae,re){return ae>>>=0,re||W(ae,8,this.length),o.read(this,ae,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(ae,re,he,Se){ae=+ae,re>>>=0,he>>>=0,Se||B(this,ae,re,he,Math.pow(2,8*he)-1,0);var xe=1,Te=0;for(this[re]=255&ae;++Te<he&&(xe*=256);)this[re+Te]=ae/xe&255;return re+he},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(ae,re,he,Se){ae=+ae,re>>>=0,he>>>=0,Se||B(this,ae,re,he,Math.pow(2,8*he)-1,0);var xe=he-1,Te=1;for(this[re+xe]=255&ae;--xe>=0&&(Te*=256);)this[re+xe]=ae/Te&255;return re+he},a.prototype.writeUint8=a.prototype.writeUInt8=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,1,255,0),this[re]=255&ae,re+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,2,65535,0),this[re]=255&ae,this[re+1]=ae>>>8,re+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,2,65535,0),this[re]=ae>>>8,this[re+1]=255&ae,re+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,4,4294967295,0),this[re+3]=ae>>>24,this[re+2]=ae>>>16,this[re+1]=ae>>>8,this[re]=255&ae,re+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,4,4294967295,0),this[re]=ae>>>24,this[re+1]=ae>>>16,this[re+2]=ae>>>8,this[re+3]=255&ae,re+4},a.prototype.writeBigUInt64LE=Ce(function(ae){return V(this,ae,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ce(function(ae){return q(this,ae,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(ae,re,he,Se){if(ae=+ae,re>>>=0,!Se){var xe=Math.pow(2,8*he-1);B(this,ae,re,he,xe-1,-xe)}var Te=0,Ae=1,Pe=0;for(this[re]=255&ae;++Te<he&&(Ae*=256);)ae<0&&Pe===0&&this[re+Te-1]!==0&&(Pe=1),this[re+Te]=(ae/Ae>>0)-Pe&255;return re+he},a.prototype.writeIntBE=function(ae,re,he,Se){if(ae=+ae,re>>>=0,!Se){var xe=Math.pow(2,8*he-1);B(this,ae,re,he,xe-1,-xe)}var Te=he-1,Ae=1,Pe=0;for(this[re+Te]=255&ae;--Te>=0&&(Ae*=256);)ae<0&&Pe===0&&this[re+Te+1]!==0&&(Pe=1),this[re+Te]=(ae/Ae>>0)-Pe&255;return re+he},a.prototype.writeInt8=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,1,127,-128),ae<0&&(ae=255+ae+1),this[re]=255&ae,re+1},a.prototype.writeInt16LE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,2,32767,-32768),this[re]=255&ae,this[re+1]=ae>>>8,re+2},a.prototype.writeInt16BE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,2,32767,-32768),this[re]=ae>>>8,this[re+1]=255&ae,re+2},a.prototype.writeInt32LE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,4,2147483647,-2147483648),this[re]=255&ae,this[re+1]=ae>>>8,this[re+2]=ae>>>16,this[re+3]=ae>>>24,re+4},a.prototype.writeInt32BE=function(ae,re,he){return ae=+ae,re>>>=0,he||B(this,ae,re,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[re]=ae>>>24,this[re+1]=ae>>>16,this[re+2]=ae>>>8,this[re+3]=255&ae,re+4},a.prototype.writeBigInt64LE=Ce(function(ae){return V(this,ae,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ce(function(ae){return q(this,ae,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(ae,re,he){return $(this,ae,re,!0,he)},a.prototype.writeFloatBE=function(ae,re,he){return $(this,ae,re,!1,he)},a.prototype.writeDoubleLE=function(ae,re,he){return K(this,ae,re,!0,he)},a.prototype.writeDoubleBE=function(ae,re,he){return K(this,ae,re,!1,he)},a.prototype.copy=function(ae,re,he,Se){if(!a.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(he||(he=0),Se||Se===0||(Se=this.length),re>=ae.length&&(re=ae.length),re||(re=0),Se>0&&Se<he&&(Se=he),Se===he||ae.length===0||this.length===0)return 0;if(re<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),ae.length-re<Se-he&&(Se=ae.length-re+he);var xe=Se-he;return this===ae&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(re,he,Se):Uint8Array.prototype.set.call(ae,this.subarray(he,Se),re),xe},a.prototype.fill=function(ae,re,he,Se){if(typeof ae=="string"){if(typeof re=="string"?(Se=re,re=0,he=this.length):typeof he=="string"&&(Se=he,he=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!a.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(ae.length===1){var xe=ae.charCodeAt(0);(Se==="utf8"&&xe<128||Se==="latin1")&&(ae=xe)}}else typeof ae=="number"?ae&=255:typeof ae=="boolean"&&(ae=Number(ae));if(re<0||this.length<re||this.length<he)throw new RangeError("Out of range index");if(he<=re)return this;var Te;if(re>>>=0,he=he===void 0?this.length:he>>>0,ae||(ae=0),typeof ae=="number")for(Te=re;Te<he;++Te)this[Te]=ae;else{var Ae=a.isBuffer(ae)?ae:a.from(ae,Se),Pe=Ae.length;if(Pe===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(Te=0;Te<he-re;++Te)this[Te+re]=Ae[Te%Pe]}return this};var ee={};function J(ae,re,he){ee[ae]=function(Se){function xe(){var Pe;return function(De,ve){if(!(De instanceof ve))throw new TypeError("Cannot call a class as a function")}(this,xe),Pe=function(De,ve,we){return ve=T(ve),function(Ee,Fe){if(Fe&&(b(Fe)==="object"||typeof Fe=="function"))return Fe;if(Fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(Ee)}(De,function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}()?Reflect.construct(ve,we||[],T(De).constructor):ve.apply(De,we))}(this,xe),Object.defineProperty(r(Pe),"message",{value:re.apply(r(Pe),arguments),writable:!0,configurable:!0}),Pe.name="".concat(Pe.name," [").concat(ae,"]"),Pe.stack,delete Pe.name,Pe}var Te,Ae;return function(Pe,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function");Pe.prototype=Object.create(De&&De.prototype,{constructor:{value:Pe,writable:!0,configurable:!0}}),Object.defineProperty(Pe,"prototype",{writable:!1}),De&&w(Pe,De)}(xe,Se),Te=xe,(Ae=[{key:"code",get:function(){return ae},set:function(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ae,"]: ").concat(this.message)}}])&&_(Te.prototype,Ae),Object.defineProperty(Te,"prototype",{writable:!1}),xe}(he)}function Z(ae){for(var re="",he=ae.length,Se=ae[0]==="-"?1:0;he>=Se+4;he-=3)re="_".concat(ae.slice(he-3,he)).concat(re);return"".concat(ae.slice(0,he)).concat(re)}function te(ae,re,he,Se,xe,Te){if(ae>he||ae<re){var Ae,Pe=typeof re=="bigint"?"n":"";throw Ae=Te>3?re===0||re===BigInt(0)?">= 0".concat(Pe," and < 2").concat(Pe," ** ").concat(8*(Te+1)).concat(Pe):">= -(2".concat(Pe," ** ").concat(8*(Te+1)-1).concat(Pe,") and < 2 ** ")+"".concat(8*(Te+1)-1).concat(Pe):">= ".concat(re).concat(Pe," and <= ").concat(he).concat(Pe),new ee.ERR_OUT_OF_RANGE("value",Ae,ae)}(function(De,ve,we){oe(ve,"offset"),De[ve]!==void 0&&De[ve+we]!==void 0||se(ve,De.length-(we+1))})(Se,xe,Te)}function oe(ae,re){if(typeof ae!="number")throw new ee.ERR_INVALID_ARG_TYPE(re,"number",ae)}function se(ae,re,he){throw Math.floor(ae)!==ae?(oe(ae,he),new ee.ERR_OUT_OF_RANGE(he||"offset","an integer",ae)):re<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE(he||"offset",">= ".concat(he?1:0," and <= ").concat(re),ae)}J("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?"".concat(ae," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),J("ERR_INVALID_ARG_TYPE",function(ae,re){return'The "'.concat(ae,'" argument must be of type number. Received type ').concat(b(re))},TypeError),J("ERR_OUT_OF_RANGE",function(ae,re,he){var Se='The value of "'.concat(ae,'" is out of range.'),xe=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?xe=Z(String(he)):typeof he=="bigint"&&(xe=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(xe=Z(xe)),xe+="n"),Se+" It must be ".concat(re,". Received ").concat(xe)},RangeError);var ce=/[^+/0-9A-Za-z-_]/g;function ye(ae,re){var he;re=re||1/0;for(var Se=ae.length,xe=null,Te=[],Ae=0;Ae<Se;++Ae){if((he=ae.charCodeAt(Ae))>55295&&he<57344){if(!xe){if(he>56319){(re-=3)>-1&&Te.push(239,191,189);continue}if(Ae+1===Se){(re-=3)>-1&&Te.push(239,191,189);continue}xe=he;continue}if(he<56320){(re-=3)>-1&&Te.push(239,191,189),xe=he;continue}he=65536+(xe-55296<<10|he-56320)}else xe&&(re-=3)>-1&&Te.push(239,191,189);if(xe=null,he<128){if((re-=1)<0)break;Te.push(he)}else if(he<2048){if((re-=2)<0)break;Te.push(he>>6|192,63&he|128)}else if(he<65536){if((re-=3)<0)break;Te.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((re-=4)<0)break;Te.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return Te}function me(ae){return c.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(ae))}function fe(ae,re,he,Se){var xe;for(xe=0;xe<Se&&!(xe+he>=re.length||xe>=ae.length);++xe)re[xe+he]=ae[xe];return xe}function pe(ae,re){return ae instanceof re||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===re.name}function ge(ae){return ae!=ae}var ke=function(){for(var ae="0123456789abcdef",re=new Array(256),he=0;he<16;++he)for(var Se=16*he,xe=0;xe<16;++xe)re[Se+xe]=ae[he]+ae[xe];return re}();function Ce(ae){return typeof BigInt>"u"?de:ae}function de(){throw new Error("BigInt not supported")}},25928:function(R){"use strict";R.exports=T,R.exports.isMobile=T,R.exports.default=T;var C=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,_=/android|ipad|playbook|silk/i;function T(r){r||(r={});var w=r.ua;if(w||typeof navigator>"u"||(w=navigator.userAgent),w&&w.headers&&typeof w.headers["user-agent"]=="string"&&(w=w.headers["user-agent"]),typeof w!="string")return!1;var b=C.test(w)&&!e.test(w)||!!r.tablet&&_.test(w);return!b&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&w.indexOf("Macintosh")!==-1&&w.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(R,C,e){"use strict";e.r(C),e.d(C,{sankeyCenter:function(){return n},sankeyCircular:function(){return L},sankeyJustify:function(){return i},sankeyLeft:function(){return o},sankeyRight:function(){return t}});var _=e(84706),T=e(34712),r=e(10132),w=e(6688),b=e.n(w);function c(fe){return fe.target.depth}function o(fe){return fe.depth}function t(fe,pe){return pe-1-fe.height}function i(fe,pe){return fe.sourceLinks.length?fe.depth:pe-1}function n(fe){return fe.targetLinks.length?fe.depth:fe.sourceLinks.length?(0,_.SY)(fe.sourceLinks,c)-1:0}function a(fe){return function(){return fe}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe};function l(fe,pe){return p(fe.source,pe.source)||fe.index-pe.index}function u(fe,pe){return p(fe.target,pe.target)||fe.index-pe.index}function p(fe,pe){return fe.partOfCycle===pe.partOfCycle?fe.y0-pe.y0:fe.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function f(fe){return fe.value}function m(fe){return(fe.y0+fe.y1)/2}function h(fe){return m(fe.source)}function g(fe){return m(fe.target)}function v(fe){return fe.index}function x(fe){return fe.nodes}function y(fe){return fe.links}function A(fe,pe){var ge=fe.get(pe);if(!ge)throw new Error("missing: "+pe);return ge}function d(fe,pe){return pe(fe)}var S=25,k=10,E=.3;function L(){var fe,pe,ge=0,ke=0,Ce=1,de=1,ae=24,re=v,he=i,Se=x,xe=y,Te=32,Ae=2,Pe=null;function De(){var we={nodes:Se.apply(null,arguments),links:xe.apply(null,arguments)};(function(Fe){Fe.nodes.forEach(function(je,Ge){je.index=Ge,je.sourceLinks=[],je.targetLinks=[]});var Le=(0,T.kH)(Fe.nodes,re);Fe.links.forEach(function(je,Ge){je.index=Ge;var Je=je.source,rt=je.target;(Je===void 0?"undefined":s(Je))!=="object"&&(Je=je.source=A(Le,Je)),(rt===void 0?"undefined":s(rt))!=="object"&&(rt=je.target=A(Le,rt)),Je.sourceLinks.push(je),rt.targetLinks.push(je)})})(we),function(Fe,Le,je){var Ge=0;if(je===null){for(var Je=[],rt=0;rt<Fe.links.length;rt++){var ot=Fe.links[rt],yt=ot.source.index,_t=ot.target.index;Je[yt]||(Je[yt]=[]),Je[_t]||(Je[_t]=[]),Je[yt].indexOf(_t)===-1&&Je[yt].push(_t)}var mt=b()(Je);mt.sort(function(Dt,zt){return Dt.length-zt.length});var tt={};for(rt=0;rt<mt.length;rt++){var Qe=mt[rt].slice(-2);tt[Qe[0]]||(tt[Qe[0]]={}),tt[Qe[0]][Qe[1]]=!0}Fe.links.forEach(function(Dt){var zt=Dt.target.index,pt=Dt.source.index;zt===pt||tt[pt]&&tt[pt][zt]?(Dt.circular=!0,Dt.circularLinkID=Ge,Ge+=1):Dt.circular=!1})}else Fe.links.forEach(function(Dt){Dt.source[je]<Dt.target[je]?Dt.circular=!1:(Dt.circular=!0,Dt.circularLinkID=Ge,Ge+=1)})}(we,0,Pe),function(Fe){Fe.nodes.forEach(function(Le){Le.partOfCycle=!1,Le.value=Math.max((0,_.oh)(Le.sourceLinks,f),(0,_.oh)(Le.targetLinks,f)),Le.sourceLinks.forEach(function(je){je.circular&&(Le.partOfCycle=!0,Le.circularLinkType=je.circularLinkType)}),Le.targetLinks.forEach(function(je){je.circular&&(Le.partOfCycle=!0,Le.circularLinkType=je.circularLinkType)})})}(we),function(Fe){var Le,je,Ge;for(Le=Fe.nodes,je=[],Ge=0;Le.length;++Ge,Le=je,je=[])Le.forEach(function(Je){Je.depth=Ge,Je.sourceLinks.forEach(function(rt){je.indexOf(rt.target)<0&&!rt.circular&&je.push(rt.target)})});for(Le=Fe.nodes,je=[],Ge=0;Le.length;++Ge,Le=je,je=[])Le.forEach(function(Je){Je.height=Ge,Je.targetLinks.forEach(function(rt){je.indexOf(rt.source)<0&&!rt.circular&&je.push(rt.source)})});Fe.nodes.forEach(function(Je){Je.column=Math.floor(he.call(null,Je,Ge))})}(we),O(we,re),function(Fe,Le,je){var Ge=(0,T.UJ)().key(function(_t){return _t.column}).sortKeys(_.XE).entries(Fe.nodes).map(function(_t){return _t.values});(function(_t){if(pe){var mt=1/0;Ge.forEach(function(zt){var pt=de*pe/(zt.length+1);mt=pt<mt?pt:mt}),fe=mt}var tt=(0,_.SY)(Ge,function(zt){return(de-ke-(zt.length-1)*fe)/(0,_.oh)(zt,f)});tt*=E,Fe.links.forEach(function(zt){zt.width=zt.value*tt});var Qe=function(zt){var pt=0,vt=0,We=0,Ze=0,Ne=(0,_.kv)(zt.nodes,function(Xe){return Xe.column});return zt.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=="top"?pt+=Xe.width:vt+=Xe.width,Xe.target.column==0&&(Ze+=Xe.width),Xe.source.column==Ne&&(We+=Xe.width))}),{top:pt=pt>0?pt+S+k:pt,bottom:vt=vt>0?vt+S+k:vt,left:Ze=Ze>0?Ze+S+k:Ze,right:We=We>0?We+S+k:We}}(Fe),Dt=function(zt,pt){var vt=(0,_.kv)(zt.nodes,function(st){return st.column}),We=Ce-ge,Ze=de-ke,Ne=We/(We+pt.right+pt.left),Xe=Ze/(Ze+pt.top+pt.bottom);return ge=ge*Ne+pt.left,Ce=pt.right==0?Ce:Ce*Ne,ke=ke*Xe+pt.top,de*=Xe,zt.nodes.forEach(function(st){st.x0=ge+st.column*((Ce-ge-ae)/vt),st.x1=st.x0+ae}),Xe}(Fe,Qe);tt*=Dt,Fe.links.forEach(function(zt){zt.width=zt.value*tt}),Ge.forEach(function(zt){var pt=zt.length;zt.forEach(function(vt,We){vt.depth==Ge.length-1&&pt==1||vt.depth==0&&pt==1?(vt.y0=de/2-vt.value*tt,vt.y1=vt.y0+vt.value*tt):vt.partOfCycle?F(vt,_t)==0?(vt.y0=de/2+We,vt.y1=vt.y0+vt.value*tt):vt.circularLinkType=="top"?(vt.y0=ke+We,vt.y1=vt.y0+vt.value*tt):(vt.y0=de-vt.value*tt-We,vt.y1=vt.y0+vt.value*tt):Qe.top==0||Qe.bottom==0?(vt.y0=(de-ke)/pt*We,vt.y1=vt.y0+vt.value*tt):(vt.y0=(de-ke)/2-pt/2+We,vt.y1=vt.y0+vt.value*tt)})})})(je),yt();for(var Je=1,rt=Le;rt>0;--rt)ot(Je*=.99,je),yt();function ot(_t,mt){var tt=Ge.length;Ge.forEach(function(Qe){var Dt=Qe.length,zt=Qe[0].depth;Qe.forEach(function(pt){var vt;if((pt.sourceLinks.length||pt.targetLinks.length)&&!(pt.partOfCycle&&F(pt,mt)>0))if(zt==0&&Dt==1)vt=pt.y1-pt.y0,pt.y0=de/2-vt/2,pt.y1=de/2+vt/2;else if(zt==tt-1&&Dt==1)vt=pt.y1-pt.y0,pt.y0=de/2-vt/2,pt.y1=de/2+vt/2;else{var We=(0,_.mo)(pt.sourceLinks,g),Ze=(0,_.mo)(pt.targetLinks,h),Ne=((We&&Ze?(We+Ze)/2:We||Ze)-m(pt))*_t;pt.y0+=Ne,pt.y1+=Ne}})})}function yt(){Ge.forEach(function(_t){var mt,tt,Qe,Dt=ke,zt=_t.length;for(_t.sort(p),Qe=0;Qe<zt;++Qe)(tt=Dt-(mt=_t[Qe]).y0)>0&&(mt.y0+=tt,mt.y1+=tt),Dt=mt.y1+fe;if((tt=Dt-fe-de)>0)for(Dt=mt.y0-=tt,mt.y1-=tt,Qe=zt-2;Qe>=0;--Qe)(tt=(mt=_t[Qe]).y1+fe-Dt)>0&&(mt.y0-=tt,mt.y1-=tt),Dt=mt.y0})}}(we,Te,re),ve(we);for(var Ee=0;Ee<4;Ee++)oe(we,de,re),se(we,0,re),Z(we,ke,de,re),oe(we,de,re),se(we,0,re);return function(Fe,Le,je){var Ge=Fe.nodes,Je=Fe.links,rt=!1,ot=!1;if(Je.forEach(function(mt){mt.circularLinkType=="top"?rt=!0:mt.circularLinkType=="bottom"&&(ot=!0)}),rt==0||ot==0){var yt=(0,_.SY)(Ge,function(mt){return mt.y0}),_t=(je-Le)/((0,_.kv)(Ge,function(mt){return mt.y1})-yt);Ge.forEach(function(mt){var tt=(mt.y1-mt.y0)*_t;mt.y0=(mt.y0-yt)*_t,mt.y1=mt.y0+tt}),Je.forEach(function(mt){mt.y0=(mt.y0-yt)*_t,mt.y1=(mt.y1-yt)*_t,mt.width=mt.width*_t})}}(we,ke,de),N(we,Ae,de,re),we}function ve(we){we.nodes.forEach(function(Ee){Ee.sourceLinks.sort(u),Ee.targetLinks.sort(l)}),we.nodes.forEach(function(Ee){var Fe=Ee.y0,Le=Fe,je=Ee.y1,Ge=je;Ee.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=je-Je.width/2,je-=Je.width):(Je.y0=Fe+Je.width/2,Fe+=Je.width)}),Ee.targetLinks.forEach(function(Je){Je.circular?(Je.y1=Ge-Je.width/2,Ge-=Je.width):(Je.y1=Le+Je.width/2,Le+=Je.width)})})}return De.nodeId=function(we){return arguments.length?(re=typeof we=="function"?we:a(we),De):re},De.nodeAlign=function(we){return arguments.length?(he=typeof we=="function"?we:a(we),De):he},De.nodeWidth=function(we){return arguments.length?(ae=+we,De):ae},De.nodePadding=function(we){return arguments.length?(fe=+we,De):fe},De.nodes=function(we){return arguments.length?(Se=typeof we=="function"?we:a(we),De):Se},De.links=function(we){return arguments.length?(xe=typeof we=="function"?we:a(we),De):xe},De.size=function(we){return arguments.length?(ge=ke=0,Ce=+we[0],de=+we[1],De):[Ce-ge,de-ke]},De.extent=function(we){return arguments.length?(ge=+we[0][0],Ce=+we[1][0],ke=+we[0][1],de=+we[1][1],De):[[ge,ke],[Ce,de]]},De.iterations=function(we){return arguments.length?(Te=+we,De):Te},De.circularLinkGap=function(we){return arguments.length?(Ae=+we,De):Ae},De.nodePaddingRatio=function(we){return arguments.length?(pe=+we,De):pe},De.sortNodes=function(we){return arguments.length?(Pe=we,De):Pe},De.update=function(we){return O(we,re),ve(we),we.links.forEach(function(Ee){Ee.circular&&(Ee.circularLinkType=Ee.y0+Ee.y1<de?"top":"bottom",Ee.source.circularLinkType=Ee.circularLinkType,Ee.target.circularLinkType=Ee.circularLinkType)}),oe(we,de,re,!1),se(we,0,re),N(we,Ae,de,re),we},De}function O(fe,pe){var ge=0,ke=0;fe.links.forEach(function(Ce){Ce.circular&&(Ce.source.circularLinkType||Ce.target.circularLinkType?Ce.circularLinkType=Ce.source.circularLinkType?Ce.source.circularLinkType:Ce.target.circularLinkType:Ce.circularLinkType=ge<ke?"top":"bottom",Ce.circularLinkType=="top"?ge+=1:ke+=1,fe.nodes.forEach(function(de){d(de,pe)!=d(Ce.source,pe)&&d(de,pe)!=d(Ce.target,pe)||(de.circularLinkType=Ce.circularLinkType)}))}),fe.links.forEach(function(Ce){Ce.circular&&(Ce.source.circularLinkType==Ce.target.circularLinkType&&(Ce.circularLinkType=Ce.source.circularLinkType),me(Ce,pe)&&(Ce.circularLinkType=Ce.source.circularLinkType))})}function P(fe){var pe=Math.abs(fe.y1-fe.y0),ge=Math.abs(fe.target.x0-fe.source.x1);return Math.atan(ge/pe)}function F(fe,pe){var ge=0;fe.sourceLinks.forEach(function(Ce){ge=Ce.circular&&!me(Ce,pe)?ge+1:ge});var ke=0;return fe.targetLinks.forEach(function(Ce){ke=Ce.circular&&!me(Ce,pe)?ke+1:ke}),ge+ke}function U(fe){var pe=fe.source.sourceLinks,ge=0;pe.forEach(function(de){ge=de.circular?ge+1:ge});var ke=fe.target.targetLinks,Ce=0;return ke.forEach(function(de){Ce=de.circular?Ce+1:Ce}),!(ge>1||Ce>1)}function I(fe,pe,ge){return fe.sort(W),fe.forEach(function(ke,Ce){var de,ae,re=0;if(me(ke,ge)&&U(ke))ke.circularPathData.verticalBuffer=re+ke.width/2;else{for(var he=0;he<Ce;he++)if(de=fe[Ce],ae=fe[he],!(de.source.column<ae.target.column||de.target.column>ae.source.column)){var Se=fe[he].circularPathData.verticalBuffer+fe[he].width/2+pe;re=Se>re?Se:re}ke.circularPathData.verticalBuffer=re+ke.width/2}}),fe}function N(fe,pe,ge,ke){var Ce=(0,_.SY)(fe.links,function(de){return de.source.y0});fe.links.forEach(function(de){de.circular&&(de.circularPathData={})}),I(fe.links.filter(function(de){return de.circularLinkType=="top"}),pe,ke),I(fe.links.filter(function(de){return de.circularLinkType=="bottom"}),pe,ke),fe.links.forEach(function(de){if(de.circular){if(de.circularPathData.arcRadius=de.width+k,de.circularPathData.leftNodeBuffer=5,de.circularPathData.rightNodeBuffer=5,de.circularPathData.sourceWidth=de.source.x1-de.source.x0,de.circularPathData.sourceX=de.source.x0+de.circularPathData.sourceWidth,de.circularPathData.targetX=de.target.x0,de.circularPathData.sourceY=de.y0,de.circularPathData.targetY=de.y1,me(de,ke)&&U(de))de.circularPathData.leftSmallArcRadius=k+de.width/2,de.circularPathData.leftLargeArcRadius=k+de.width/2,de.circularPathData.rightSmallArcRadius=k+de.width/2,de.circularPathData.rightLargeArcRadius=k+de.width/2,de.circularLinkType=="bottom"?(de.circularPathData.verticalFullExtent=de.source.y1+S+de.circularPathData.verticalBuffer,de.circularPathData.verticalLeftInnerExtent=de.circularPathData.verticalFullExtent-de.circularPathData.leftLargeArcRadius,de.circularPathData.verticalRightInnerExtent=de.circularPathData.verticalFullExtent-de.circularPathData.rightLargeArcRadius):(de.circularPathData.verticalFullExtent=de.source.y0-S-de.circularPathData.verticalBuffer,de.circularPathData.verticalLeftInnerExtent=de.circularPathData.verticalFullExtent+de.circularPathData.leftLargeArcRadius,de.circularPathData.verticalRightInnerExtent=de.circularPathData.verticalFullExtent+de.circularPathData.rightLargeArcRadius);else{var ae=de.source.column,re=de.circularLinkType,he=fe.links.filter(function(Te){return Te.source.column==ae&&Te.circularLinkType==re});de.circularLinkType=="bottom"?he.sort(V):he.sort(B);var Se=0;he.forEach(function(Te,Ae){Te.circularLinkID==de.circularLinkID&&(de.circularPathData.leftSmallArcRadius=k+de.width/2+Se,de.circularPathData.leftLargeArcRadius=k+de.width/2+Ae*pe+Se),Se+=Te.width}),ae=de.target.column,he=fe.links.filter(function(Te){return Te.target.column==ae&&Te.circularLinkType==re}),de.circularLinkType=="bottom"?he.sort(ne):he.sort(q),Se=0,he.forEach(function(Te,Ae){Te.circularLinkID==de.circularLinkID&&(de.circularPathData.rightSmallArcRadius=k+de.width/2+Se,de.circularPathData.rightLargeArcRadius=k+de.width/2+Ae*pe+Se),Se+=Te.width}),de.circularLinkType=="bottom"?(de.circularPathData.verticalFullExtent=Math.max(ge,de.source.y1,de.target.y1)+S+de.circularPathData.verticalBuffer,de.circularPathData.verticalLeftInnerExtent=de.circularPathData.verticalFullExtent-de.circularPathData.leftLargeArcRadius,de.circularPathData.verticalRightInnerExtent=de.circularPathData.verticalFullExtent-de.circularPathData.rightLargeArcRadius):(de.circularPathData.verticalFullExtent=Ce-S-de.circularPathData.verticalBuffer,de.circularPathData.verticalLeftInnerExtent=de.circularPathData.verticalFullExtent+de.circularPathData.leftLargeArcRadius,de.circularPathData.verticalRightInnerExtent=de.circularPathData.verticalFullExtent+de.circularPathData.rightLargeArcRadius)}de.circularPathData.leftInnerExtent=de.circularPathData.sourceX+de.circularPathData.leftNodeBuffer,de.circularPathData.rightInnerExtent=de.circularPathData.targetX-de.circularPathData.rightNodeBuffer,de.circularPathData.leftFullExtent=de.circularPathData.sourceX+de.circularPathData.leftLargeArcRadius+de.circularPathData.leftNodeBuffer,de.circularPathData.rightFullExtent=de.circularPathData.targetX-de.circularPathData.rightLargeArcRadius-de.circularPathData.rightNodeBuffer}if(de.circular)de.path=function(Te){return Te.circularLinkType=="top"?"M"+Te.circularPathData.sourceX+" "+Te.circularPathData.sourceY+" L"+Te.circularPathData.leftInnerExtent+" "+Te.circularPathData.sourceY+" A"+Te.circularPathData.leftLargeArcRadius+" "+Te.circularPathData.leftSmallArcRadius+" 0 0 0 "+Te.circularPathData.leftFullExtent+" "+(Te.circularPathData.sourceY-Te.circularPathData.leftSmallArcRadius)+" L"+Te.circularPathData.leftFullExtent+" "+Te.circularPathData.verticalLeftInnerExtent+" A"+Te.circularPathData.leftLargeArcRadius+" "+Te.circularPathData.leftLargeArcRadius+" 0 0 0 "+Te.circularPathData.leftInnerExtent+" "+Te.circularPathData.verticalFullExtent+" L"+Te.circularPathData.rightInnerExtent+" "+Te.circularPathData.verticalFullExtent+" A"+Te.circularPathData.rightLargeArcRadius+" "+Te.circularPathData.rightLargeArcRadius+" 0 0 0 "+Te.circularPathData.rightFullExtent+" "+Te.circularPathData.verticalRightInnerExtent+" L"+Te.circularPathData.rightFullExtent+" "+(Te.circularPathData.targetY-Te.circularPathData.rightSmallArcRadius)+" A"+Te.circularPathData.rightLargeArcRadius+" "+Te.circularPathData.rightSmallArcRadius+" 0 0 0 "+Te.circularPathData.rightInnerExtent+" "+Te.circularPathData.targetY+" L"+Te.circularPathData.targetX+" "+Te.circularPathData.targetY:"M"+Te.circularPathData.sourceX+" "+Te.circularPathData.sourceY+" L"+Te.circularPathData.leftInnerExtent+" "+Te.circularPathData.sourceY+" A"+Te.circularPathData.leftLargeArcRadius+" "+Te.circularPathData.leftSmallArcRadius+" 0 0 1 "+Te.circularPathData.leftFullExtent+" "+(Te.circularPathData.sourceY+Te.circularPathData.leftSmallArcRadius)+" L"+Te.circularPathData.leftFullExtent+" "+Te.circularPathData.verticalLeftInnerExtent+" A"+Te.circularPathData.leftLargeArcRadius+" "+Te.circularPathData.leftLargeArcRadius+" 0 0 1 "+Te.circularPathData.leftInnerExtent+" "+Te.circularPathData.verticalFullExtent+" L"+Te.circularPathData.rightInnerExtent+" "+Te.circularPathData.verticalFullExtent+" A"+Te.circularPathData.rightLargeArcRadius+" "+Te.circularPathData.rightLargeArcRadius+" 0 0 1 "+Te.circularPathData.rightFullExtent+" "+Te.circularPathData.verticalRightInnerExtent+" L"+Te.circularPathData.rightFullExtent+" "+(Te.circularPathData.targetY+Te.circularPathData.rightSmallArcRadius)+" A"+Te.circularPathData.rightLargeArcRadius+" "+Te.circularPathData.rightSmallArcRadius+" 0 0 1 "+Te.circularPathData.rightInnerExtent+" "+Te.circularPathData.targetY+" L"+Te.circularPathData.targetX+" "+Te.circularPathData.targetY}(de);else{var xe=(0,r.ak)().source(function(Te){return[Te.source.x0+(Te.source.x1-Te.source.x0),Te.y0]}).target(function(Te){return[Te.target.x0,Te.y1]});de.path=xe(de)}})}function W(fe,pe){return $(fe)==$(pe)?fe.circularLinkType=="bottom"?V(fe,pe):B(fe,pe):$(pe)-$(fe)}function B(fe,pe){return fe.y0-pe.y0}function V(fe,pe){return pe.y0-fe.y0}function q(fe,pe){return fe.y1-pe.y1}function ne(fe,pe){return pe.y1-fe.y1}function $(fe){return fe.target.column-fe.source.column}function K(fe){return fe.target.x0-fe.source.x1}function ee(fe,pe){var ge=P(fe),ke=K(pe)/Math.tan(ge);return ye(fe)=="up"?fe.y1+ke:fe.y1-ke}function J(fe,pe){var ge=P(fe),ke=K(pe)/Math.tan(ge);return ye(fe)=="up"?fe.y1-ke:fe.y1+ke}function Z(fe,pe,ge,ke){fe.links.forEach(function(Ce){if(!Ce.circular&&Ce.target.column-Ce.source.column>1){var de=Ce.source.column+1,ae=Ce.target.column-1,re=1,he=ae-de+1;for(re=1;de<=ae;de++,re++)fe.nodes.forEach(function(Se){if(Se.column==de){var xe,Te=re/(he+1),Ae=Math.pow(1-Te,3),Pe=3*Te*Math.pow(1-Te,2),De=3*Math.pow(Te,2)*(1-Te),ve=Math.pow(Te,3),we=Ae*Ce.y0+Pe*Ce.y0+De*Ce.y1+ve*Ce.y1,Ee=we-Ce.width/2,Fe=we+Ce.width/2;Ee>Se.y0&&Ee<Se.y1?(xe=Se.y1-Ee+10,xe=Se.circularLinkType=="bottom"?xe:-xe,Se=te(Se,xe,pe,ge),fe.nodes.forEach(function(Le){var je,Ge;d(Le,ke)!=d(Se,ke)&&Le.column==Se.column&&(Ge=Le,(je=Se).y0>Ge.y0&&je.y0<Ge.y1||je.y1>Ge.y0&&je.y1<Ge.y1||je.y0<Ge.y0&&je.y1>Ge.y1)&&te(Le,xe,pe,ge)})):(Fe>Se.y0&&Fe<Se.y1||Ee<Se.y0&&Fe>Se.y1)&&(xe=Fe-Se.y0+10,Se=te(Se,xe,pe,ge),fe.nodes.forEach(function(Le){d(Le,ke)!=d(Se,ke)&&Le.column==Se.column&&Le.y0<Se.y1&&Le.y1>Se.y1&&te(Le,xe,pe,ge)}))}})}})}function te(fe,pe,ge,ke){return fe.y0+pe>=ge&&fe.y1+pe<=ke&&(fe.y0=fe.y0+pe,fe.y1=fe.y1+pe,fe.targetLinks.forEach(function(Ce){Ce.y1=Ce.y1+pe}),fe.sourceLinks.forEach(function(Ce){Ce.y0=Ce.y0+pe})),fe}function oe(fe,pe,ge,ke){fe.nodes.forEach(function(Ce){ke&&Ce.y+(Ce.y1-Ce.y0)>pe&&(Ce.y=Ce.y-(Ce.y+(Ce.y1-Ce.y0)-pe));var de=fe.links.filter(function(he){return d(he.source,ge)==d(Ce,ge)}),ae=de.length;ae>1&&de.sort(function(he,Se){if(!he.circular&&!Se.circular){if(he.target.column==Se.target.column||!ce(he,Se))return he.y1-Se.y1;if(he.target.column>Se.target.column){var xe=J(Se,he);return he.y1-xe}if(Se.target.column>he.target.column)return J(he,Se)-Se.y1}return he.circular&&!Se.circular?he.circularLinkType=="top"?-1:1:Se.circular&&!he.circular?Se.circularLinkType=="top"?1:-1:he.circular&&Se.circular?he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="top"?he.target.column===Se.target.column?he.target.y1-Se.target.y1:Se.target.column-he.target.column:he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="bottom"?he.target.column===Se.target.column?Se.target.y1-he.target.y1:he.target.column-Se.target.column:he.circularLinkType=="top"?-1:1:void 0});var re=Ce.y0;de.forEach(function(he){he.y0=re+he.width/2,re+=he.width}),de.forEach(function(he,Se){if(he.circularLinkType=="bottom"){for(var xe=Se+1,Te=0;xe<ae;xe++)Te+=de[xe].width;he.y0=Ce.y1-Te-he.width/2}})})}function se(fe,pe,ge){fe.nodes.forEach(function(ke){var Ce=fe.links.filter(function(re){return d(re.target,ge)==d(ke,ge)}),de=Ce.length;de>1&&Ce.sort(function(re,he){if(!re.circular&&!he.circular){if(re.source.column==he.source.column||!ce(re,he))return re.y0-he.y0;if(he.source.column<re.source.column){var Se=ee(he,re);return re.y0-Se}if(re.source.column<he.source.column)return ee(re,he)-he.y0}return re.circular&&!he.circular?re.circularLinkType=="top"?-1:1:he.circular&&!re.circular?he.circularLinkType=="top"?1:-1:re.circular&&he.circular?re.circularLinkType===he.circularLinkType&&re.circularLinkType=="top"?re.source.column===he.source.column?re.source.y1-he.source.y1:re.source.column-he.source.column:re.circularLinkType===he.circularLinkType&&re.circularLinkType=="bottom"?re.source.column===he.source.column?re.source.y1-he.source.y1:he.source.column-re.source.column:re.circularLinkType=="top"?-1:1:void 0});var ae=ke.y0;Ce.forEach(function(re){re.y1=ae+re.width/2,ae+=re.width}),Ce.forEach(function(re,he){if(re.circularLinkType=="bottom"){for(var Se=he+1,xe=0;Se<de;Se++)xe+=Ce[Se].width;re.y1=ke.y1-xe-re.width/2}})})}function ce(fe,pe){return ye(fe)==ye(pe)}function ye(fe){return fe.y0-fe.y1>0?"up":"down"}function me(fe,pe){return d(fe.source,pe)==d(fe.target,pe)}},26800:function(R,C,e){"use strict";e.r(C),e.d(C,{sankey:function(){return v},sankeyCenter:function(){return o},sankeyJustify:function(){return c},sankeyLeft:function(){return w},sankeyLinkHorizontal:function(){return d},sankeyRight:function(){return b}});var _=e(84706),T=e(34712);function r(S){return S.target.depth}function w(S){return S.depth}function b(S,k){return k-1-S.height}function c(S,k){return S.sourceLinks.length?S.depth:k-1}function o(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,_.SY)(S.sourceLinks,r)-1:0}function t(S){return function(){return S}}function i(S,k){return a(S.source,k.source)||S.index-k.index}function n(S,k){return a(S.target,k.target)||S.index-k.index}function a(S,k){return S.y0-k.y0}function s(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function p(S){return l(S.target)*S.value}function f(S){return S.index}function m(S){return S.nodes}function h(S){return S.links}function g(S,k){var E=S.get(k);if(!E)throw new Error("missing: "+k);return E}function v(){var S=0,k=0,E=1,L=1,O=24,P=8,F=f,U=c,I=m,N=h,W=32;function B(){var q={nodes:I.apply(null,arguments),links:N.apply(null,arguments)};return function(ne){ne.nodes.forEach(function(K,ee){K.index=ee,K.sourceLinks=[],K.targetLinks=[]});var $=(0,T.kH)(ne.nodes,F);ne.links.forEach(function(K,ee){K.index=ee;var J=K.source,Z=K.target;typeof J!="object"&&(J=K.source=g($,J)),typeof Z!="object"&&(Z=K.target=g($,Z)),J.sourceLinks.push(K),Z.targetLinks.push(K)})}(q),function(ne){ne.nodes.forEach(function($){$.value=Math.max((0,_.oh)($.sourceLinks,s),(0,_.oh)($.targetLinks,s))})}(q),function(ne){var $,K,ee;for($=ne.nodes,K=[],ee=0;$.length;++ee,$=K,K=[])$.forEach(function(Z){Z.depth=ee,Z.sourceLinks.forEach(function(te){K.indexOf(te.target)<0&&K.push(te.target)})});for($=ne.nodes,K=[],ee=0;$.length;++ee,$=K,K=[])$.forEach(function(Z){Z.height=ee,Z.targetLinks.forEach(function(te){K.indexOf(te.source)<0&&K.push(te.source)})});var J=(E-S-O)/(ee-1);ne.nodes.forEach(function(Z){Z.x1=(Z.x0=S+Math.max(0,Math.min(ee-1,Math.floor(U.call(null,Z,ee))))*J)+O})}(q),function(ne){var $=(0,T.UJ)().key(function(oe){return oe.x0}).sortKeys(_.XE).entries(ne.nodes).map(function(oe){return oe.values});(function(){var oe=(0,_.kv)($,function(ye){return ye.length}),se=.6666666666666666*(L-k)/(oe-1);P>se&&(P=se);var ce=(0,_.SY)($,function(ye){return(L-k-(ye.length-1)*P)/(0,_.oh)(ye,s)});$.forEach(function(ye){ye.forEach(function(me,fe){me.y1=(me.y0=fe)+me.value*ce})}),ne.links.forEach(function(ye){ye.width=ye.value*ce})})(),te();for(var K=1,ee=W;ee>0;--ee)Z(K*=.99),te(),J(K),te();function J(oe){$.forEach(function(se){se.forEach(function(ce){if(ce.targetLinks.length){var ye=((0,_.oh)(ce.targetLinks,u)/(0,_.oh)(ce.targetLinks,s)-l(ce))*oe;ce.y0+=ye,ce.y1+=ye}})})}function Z(oe){$.slice().reverse().forEach(function(se){se.forEach(function(ce){if(ce.sourceLinks.length){var ye=((0,_.oh)(ce.sourceLinks,p)/(0,_.oh)(ce.sourceLinks,s)-l(ce))*oe;ce.y0+=ye,ce.y1+=ye}})})}function te(){$.forEach(function(oe){var se,ce,ye,me=k,fe=oe.length;for(oe.sort(a),ye=0;ye<fe;++ye)(ce=me-(se=oe[ye]).y0)>0&&(se.y0+=ce,se.y1+=ce),me=se.y1+P;if((ce=me-P-L)>0)for(me=se.y0-=ce,se.y1-=ce,ye=fe-2;ye>=0;--ye)(ce=(se=oe[ye]).y1+P-me)>0&&(se.y0-=ce,se.y1-=ce),me=se.y0})}}(q),V(q),q}function V(q){q.nodes.forEach(function(ne){ne.sourceLinks.sort(n),ne.targetLinks.sort(i)}),q.nodes.forEach(function(ne){var $=ne.y0,K=$;ne.sourceLinks.forEach(function(ee){ee.y0=$+ee.width/2,$+=ee.width}),ne.targetLinks.forEach(function(ee){ee.y1=K+ee.width/2,K+=ee.width})})}return B.update=function(q){return V(q),q},B.nodeId=function(q){return arguments.length?(F=typeof q=="function"?q:t(q),B):F},B.nodeAlign=function(q){return arguments.length?(U=typeof q=="function"?q:t(q),B):U},B.nodeWidth=function(q){return arguments.length?(O=+q,B):O},B.nodePadding=function(q){return arguments.length?(P=+q,B):P},B.nodes=function(q){return arguments.length?(I=typeof q=="function"?q:t(q),B):I},B.links=function(q){return arguments.length?(N=typeof q=="function"?q:t(q),B):N},B.size=function(q){return arguments.length?(S=k=0,E=+q[0],L=+q[1],B):[E-S,L-k]},B.extent=function(q){return arguments.length?(S=+q[0][0],E=+q[1][0],k=+q[0][1],L=+q[1][1],B):[[S,k],[E,L]]},B.iterations=function(q){return arguments.length?(W=+q,B):W},B}var x=e(10132);function y(S){return[S.source.x1,S.y0]}function A(S){return[S.target.x0,S.y1]}function d(){return(0,x.ak)().source(y).target(A)}},33428:function(R,C,e){var _,T;(function(){var r={version:"3.8.2"},w=[].slice,b=function(D){return w.call(D)},c=self.document;function o(D){return D&&(D.ownerDocument||D.document||D).documentElement}function t(D){return D&&(D.ownerDocument&&D.ownerDocument.defaultView||D.document&&D||D.defaultView)}if(c)try{b(c.documentElement.childNodes)[0].nodeType}catch{b=function(H){for(var Q=H.length,ie=new Array(Q);Q--;)ie[Q]=H[Q];return ie}}if(Date.now||(Date.now=function(){return+new Date}),c)try{c.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,a=i.setAttributeNS,s=this.CSSStyleDeclaration.prototype,l=s.setProperty;i.setAttribute=function(H,Q){n.call(this,H,Q+"")},i.setAttributeNS=function(H,Q,ie){a.call(this,H,Q,ie+"")},s.setProperty=function(H,Q,ie){l.call(this,H,Q+"",ie)}}function u(D,H){return D<H?-1:D>H?1:D>=H?0:NaN}function p(D){return D===null?NaN:+D}function f(D){return!isNaN(D)}function m(D){return{left:function(H,Q,ie,ue){for(arguments.length<3&&(ie=0),arguments.length<4&&(ue=H.length);ie<ue;){var _e=ie+ue>>>1;D(H[_e],Q)<0?ie=_e+1:ue=_e}return ie},right:function(H,Q,ie,ue){for(arguments.length<3&&(ie=0),arguments.length<4&&(ue=H.length);ie<ue;){var _e=ie+ue>>>1;D(H[_e],Q)>0?ue=_e:ie=_e+1}return ie}}}r.ascending=u,r.descending=function(D,H){return H<D?-1:H>D?1:H>=D?0:NaN},r.min=function(D,H){var Q,ie,ue=-1,_e=D.length;if(arguments.length===1){for(;++ue<_e;)if((ie=D[ue])!=null&&ie>=ie){Q=ie;break}for(;++ue<_e;)(ie=D[ue])!=null&&Q>ie&&(Q=ie)}else{for(;++ue<_e;)if((ie=H.call(D,D[ue],ue))!=null&&ie>=ie){Q=ie;break}for(;++ue<_e;)(ie=H.call(D,D[ue],ue))!=null&&Q>ie&&(Q=ie)}return Q},r.max=function(D,H){var Q,ie,ue=-1,_e=D.length;if(arguments.length===1){for(;++ue<_e;)if((ie=D[ue])!=null&&ie>=ie){Q=ie;break}for(;++ue<_e;)(ie=D[ue])!=null&&ie>Q&&(Q=ie)}else{for(;++ue<_e;)if((ie=H.call(D,D[ue],ue))!=null&&ie>=ie){Q=ie;break}for(;++ue<_e;)(ie=H.call(D,D[ue],ue))!=null&&ie>Q&&(Q=ie)}return Q},r.extent=function(D,H){var Q,ie,ue,_e=-1,Ie=D.length;if(arguments.length===1){for(;++_e<Ie;)if((ie=D[_e])!=null&&ie>=ie){Q=ue=ie;break}for(;++_e<Ie;)(ie=D[_e])!=null&&(Q>ie&&(Q=ie),ue<ie&&(ue=ie))}else{for(;++_e<Ie;)if((ie=H.call(D,D[_e],_e))!=null&&ie>=ie){Q=ue=ie;break}for(;++_e<Ie;)(ie=H.call(D,D[_e],_e))!=null&&(Q>ie&&(Q=ie),ue<ie&&(ue=ie))}return[Q,ue]},r.sum=function(D,H){var Q,ie=0,ue=D.length,_e=-1;if(arguments.length===1)for(;++_e<ue;)f(Q=+D[_e])&&(ie+=Q);else for(;++_e<ue;)f(Q=+H.call(D,D[_e],_e))&&(ie+=Q);return ie},r.mean=function(D,H){var Q,ie=0,ue=D.length,_e=-1,Ie=ue;if(arguments.length===1)for(;++_e<ue;)f(Q=p(D[_e]))?ie+=Q:--Ie;else for(;++_e<ue;)f(Q=p(H.call(D,D[_e],_e)))?ie+=Q:--Ie;if(Ie)return ie/Ie},r.quantile=function(D,H){var Q=(D.length-1)*H+1,ie=Math.floor(Q),ue=+D[ie-1],_e=Q-ie;return _e?ue+_e*(D[ie]-ue):ue},r.median=function(D,H){var Q,ie=[],ue=D.length,_e=-1;if(arguments.length===1)for(;++_e<ue;)f(Q=p(D[_e]))&&ie.push(Q);else for(;++_e<ue;)f(Q=p(H.call(D,D[_e],_e)))&&ie.push(Q);if(ie.length)return r.quantile(ie.sort(u),.5)},r.variance=function(D,H){var Q,ie,ue=D.length,_e=0,Ie=0,ze=-1,He=0;if(arguments.length===1)for(;++ze<ue;)f(Q=p(D[ze]))&&(Ie+=(ie=Q-_e)*(Q-(_e+=ie/++He)));else for(;++ze<ue;)f(Q=p(H.call(D,D[ze],ze)))&&(Ie+=(ie=Q-_e)*(Q-(_e+=ie/++He)));if(He>1)return Ie/(He-1)},r.deviation=function(){var D=r.variance.apply(this,arguments);return D&&Math.sqrt(D)};var h=m(u);function g(D){return D.length}r.bisectLeft=h.left,r.bisect=r.bisectRight=h.right,r.bisector=function(D){return m(D.length===1?function(H,Q){return u(D(H),Q)}:D)},r.shuffle=function(D,H,Q){(_e=arguments.length)<3&&(Q=D.length,_e<2&&(H=0));for(var ie,ue,_e=Q-H;_e;)ue=Math.random()*_e--|0,ie=D[_e+H],D[_e+H]=D[ue+H],D[ue+H]=ie;return D},r.permute=function(D,H){for(var Q=H.length,ie=new Array(Q);Q--;)ie[Q]=D[H[Q]];return ie},r.pairs=function(D){for(var H=0,Q=D.length-1,ie=D[0],ue=new Array(Q<0?0:Q);H<Q;)ue[H]=[ie,ie=D[++H]];return ue},r.transpose=function(D){if(!(ue=D.length))return[];for(var H=-1,Q=r.min(D,g),ie=new Array(Q);++H<Q;)for(var ue,_e=-1,Ie=ie[H]=new Array(ue);++_e<ue;)Ie[_e]=D[_e][H];return ie},r.zip=function(){return r.transpose(arguments)},r.keys=function(D){var H=[];for(var Q in D)H.push(Q);return H},r.values=function(D){var H=[];for(var Q in D)H.push(D[Q]);return H},r.entries=function(D){var H=[];for(var Q in D)H.push({key:Q,value:D[Q]});return H},r.merge=function(D){for(var H,Q,ie,ue=D.length,_e=-1,Ie=0;++_e<ue;)Ie+=D[_e].length;for(Q=new Array(Ie);--ue>=0;)for(H=(ie=D[ue]).length;--H>=0;)Q[--Ie]=ie[H];return Q};var v=Math.abs;function x(D,H){for(var Q in H)Object.defineProperty(D.prototype,Q,{value:H[Q],enumerable:!1})}function y(){this._=Object.create(null)}r.range=function(D,H,Q){if(arguments.length<3&&(Q=1,arguments.length<2&&(H=D,D=0)),(H-D)/Q==1/0)throw new Error("infinite range");var ie,ue=[],_e=function(ze){for(var He=1;ze*He%1;)He*=10;return He}(v(Q)),Ie=-1;if(D*=_e,H*=_e,(Q*=_e)<0)for(;(ie=D+Q*++Ie)>H;)ue.push(ie/_e);else for(;(ie=D+Q*++Ie)<H;)ue.push(ie/_e);return ue},r.map=function(D,H){var Q=new y;if(D instanceof y)D.forEach(function(ze,He){Q.set(ze,He)});else if(Array.isArray(D)){var ie,ue=-1,_e=D.length;if(arguments.length===1)for(;++ue<_e;)Q.set(ue,D[ue]);else for(;++ue<_e;)Q.set(H.call(D,ie=D[ue],ue),ie)}else for(var Ie in D)Q.set(Ie,D[Ie]);return Q};var A="__proto__",d="\0";function S(D){return(D+="")===A||D[0]===d?d+D:D}function k(D){return(D+="")[0]===d?D.slice(1):D}function E(D){return S(D)in this._}function L(D){return(D=S(D))in this._&&delete this._[D]}function O(){var D=[];for(var H in this._)D.push(k(H));return D}function P(){var D=0;for(var H in this._)++D;return D}function F(){for(var D in this._)return!1;return!0}function U(){this._=Object.create(null)}function I(D){return D}function N(D,H,Q){return function(){var ie=Q.apply(H,arguments);return ie===H?D:ie}}function W(D,H){if(H in D)return H;H=H.charAt(0).toUpperCase()+H.slice(1);for(var Q=0,ie=B.length;Q<ie;++Q){var ue=B[Q]+H;if(ue in D)return ue}}x(y,{has:E,get:function(D){return this._[S(D)]},set:function(D,H){return this._[S(D)]=H},remove:L,keys:O,values:function(){var D=[];for(var H in this._)D.push(this._[H]);return D},entries:function(){var D=[];for(var H in this._)D.push({key:k(H),value:this._[H]});return D},size:P,empty:F,forEach:function(D){for(var H in this._)D.call(this,k(H),this._[H])}}),r.nest=function(){var D,H,Q={},ie=[],ue=[];function _e(ze,He,Ye){if(Ye>=ie.length)return H?H.call(Q,He):D?He.sort(D):He;for(var nt,ft,gt,Et,It=-1,Lt=He.length,Bt=ie[Ye++],Ot=new y;++It<Lt;)(Et=Ot.get(nt=Bt(ft=He[It])))?Et.push(ft):Ot.set(nt,[ft]);return ze?(ft=ze(),gt=function(Jt,Yt){ft.set(Jt,_e(ze,Yt,Ye))}):(ft={},gt=function(Jt,Yt){ft[Jt]=_e(ze,Yt,Ye)}),Ot.forEach(gt),ft}function Ie(ze,He){if(He>=ie.length)return ze;var Ye=[],nt=ue[He++];return ze.forEach(function(ft,gt){Ye.push({key:ft,values:Ie(gt,He)})}),nt?Ye.sort(function(ft,gt){return nt(ft.key,gt.key)}):Ye}return Q.map=function(ze,He){return _e(He,ze,0)},Q.entries=function(ze){return Ie(_e(r.map,ze,0),0)},Q.key=function(ze){return ie.push(ze),Q},Q.sortKeys=function(ze){return ue[ie.length-1]=ze,Q},Q.sortValues=function(ze){return D=ze,Q},Q.rollup=function(ze){return H=ze,Q},Q},r.set=function(D){var H=new U;if(D)for(var Q=0,ie=D.length;Q<ie;++Q)H.add(D[Q]);return H},x(U,{has:E,add:function(D){return this._[S(D+="")]=!0,D},remove:L,values:O,size:P,empty:F,forEach:function(D){for(var H in this._)D.call(this,k(H))}}),r.behavior={},r.rebind=function(D,H){for(var Q,ie=1,ue=arguments.length;++ie<ue;)D[Q=arguments[ie]]=N(D,H,H[Q]);return D};var B=["webkit","ms","moz","Moz","o","O"];function V(){}function q(){}function ne(D){var H=[],Q=new y;function ie(){for(var ue,_e=H,Ie=-1,ze=_e.length;++Ie<ze;)(ue=_e[Ie].on)&&ue.apply(this,arguments);return D}return ie.on=function(ue,_e){var Ie,ze=Q.get(ue);return arguments.length<2?ze&&ze.on:(ze&&(ze.on=null,H=H.slice(0,Ie=H.indexOf(ze)).concat(H.slice(Ie+1)),Q.remove(ue)),_e&&H.push(Q.set(ue,{on:_e})),D)},ie}function $(){r.event.preventDefault()}function K(){for(var D,H=r.event;D=H.sourceEvent;)H=D;return H}function ee(D){for(var H=new q,Q=0,ie=arguments.length;++Q<ie;)H[arguments[Q]]=ne(H);return H.of=function(ue,_e){return function(Ie){try{var ze=Ie.sourceEvent=r.event;Ie.target=D,r.event=Ie,H[Ie.type].apply(ue,_e)}finally{r.event=ze}}},H}r.dispatch=function(){for(var D=new q,H=-1,Q=arguments.length;++H<Q;)D[arguments[H]]=ne(D);return D},q.prototype.on=function(D,H){var Q=D.indexOf("."),ie="";if(Q>=0&&(ie=D.slice(Q+1),D=D.slice(0,Q)),D)return arguments.length<2?this[D].on(ie):this[D].on(ie,H);if(arguments.length===2){if(H==null)for(D in this)this.hasOwnProperty(D)&&this[D].on(ie,null);return this}},r.event=null,r.requote=function(D){return D.replace(J,"\\$&")};var J=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Z={}.__proto__?function(D,H){D.__proto__=H}:function(D,H){for(var Q in H)D[Q]=H[Q]};function te(D){return Z(D,ye),D}var oe=function(D,H){return H.querySelector(D)},se=function(D,H){return H.querySelectorAll(D)},ce=function(D,H){var Q=D.matches||D[W(D,"matchesSelector")];return ce=function(ie,ue){return Q.call(ie,ue)},ce(D,H)};typeof Sizzle=="function"&&(oe=function(D,H){return Sizzle(D,H)[0]||null},se=Sizzle,ce=Sizzle.matchesSelector),r.selection=function(){return r.select(c.documentElement)};var ye=r.selection.prototype=[];function me(D){return typeof D=="function"?D:function(){return oe(D,this)}}function fe(D){return typeof D=="function"?D:function(){return se(D,this)}}ye.select=function(D){var H,Q,ie,ue,_e=[];D=me(D);for(var Ie=-1,ze=this.length;++Ie<ze;){_e.push(H=[]),H.parentNode=(ie=this[Ie]).parentNode;for(var He=-1,Ye=ie.length;++He<Ye;)(ue=ie[He])?(H.push(Q=D.call(ue,ue.__data__,He,Ie)),Q&&"__data__"in ue&&(Q.__data__=ue.__data__)):H.push(null)}return te(_e)},ye.selectAll=function(D){var H,Q,ie=[];D=fe(D);for(var ue=-1,_e=this.length;++ue<_e;)for(var Ie=this[ue],ze=-1,He=Ie.length;++ze<He;)(Q=Ie[ze])&&(ie.push(H=b(D.call(Q,Q.__data__,ze,ue))),H.parentNode=Q);return te(ie)};var pe="http://www.w3.org/1999/xhtml",ge={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ke(D,H){return D=r.ns.qualify(D),H==null?D.local?function(){this.removeAttributeNS(D.space,D.local)}:function(){this.removeAttribute(D)}:typeof H=="function"?D.local?function(){var Q=H.apply(this,arguments);Q==null?this.removeAttributeNS(D.space,D.local):this.setAttributeNS(D.space,D.local,Q)}:function(){var Q=H.apply(this,arguments);Q==null?this.removeAttribute(D):this.setAttribute(D,Q)}:D.local?function(){this.setAttributeNS(D.space,D.local,H)}:function(){this.setAttribute(D,H)}}function Ce(D){return D.trim().replace(/\s+/g," ")}function de(D){return new RegExp("(?:^|\\s+)"+r.requote(D)+"(?:\\s+|$)","g")}function ae(D){return(D+"").trim().split(/^|\s+/)}function re(D,H){var Q=(D=ae(D).map(he)).length;return typeof H=="function"?function(){for(var ie=-1,ue=H.apply(this,arguments);++ie<Q;)D[ie](this,ue)}:function(){for(var ie=-1;++ie<Q;)D[ie](this,H)}}function he(D){var H=de(D);return function(Q,ie){if(ue=Q.classList)return ie?ue.add(D):ue.remove(D);var ue=Q.getAttribute("class")||"";ie?(H.lastIndex=0,H.test(ue)||Q.setAttribute("class",Ce(ue+" "+D))):Q.setAttribute("class",Ce(ue.replace(H," ")))}}function Se(D,H,Q){return H==null?function(){this.style.removeProperty(D)}:typeof H=="function"?function(){var ie=H.apply(this,arguments);ie==null?this.style.removeProperty(D):this.style.setProperty(D,ie,Q)}:function(){this.style.setProperty(D,H,Q)}}function xe(D,H){return H==null?function(){delete this[D]}:typeof H=="function"?function(){var Q=H.apply(this,arguments);Q==null?delete this[D]:this[D]=Q}:function(){this[D]=H}}function Te(D){return typeof D=="function"?D:(D=r.ns.qualify(D)).local?function(){return this.ownerDocument.createElementNS(D.space,D.local)}:function(){var H=this.ownerDocument,Q=this.namespaceURI;return Q===pe&&H.documentElement.namespaceURI===pe?H.createElement(D):H.createElementNS(Q,D)}}function Ae(){var D=this.parentNode;D&&D.removeChild(this)}function Pe(D){return{__data__:D}}function De(D){return function(){return ce(this,D)}}function ve(D){return arguments.length||(D=u),function(H,Q){return H&&Q?D(H.__data__,Q.__data__):!H-!Q}}function we(D,H){for(var Q=0,ie=D.length;Q<ie;Q++)for(var ue,_e=D[Q],Ie=0,ze=_e.length;Ie<ze;Ie++)(ue=_e[Ie])&&H(ue,Ie,Q);return D}function Ee(D){return Z(D,Fe),D}r.ns={prefix:ge,qualify:function(D){var H=D.indexOf(":"),Q=D;return H>=0&&(Q=D.slice(0,H))!=="xmlns"&&(D=D.slice(H+1)),ge.hasOwnProperty(Q)?{space:ge[Q],local:D}:D}},ye.attr=function(D,H){if(arguments.length<2){if(typeof D=="string"){var Q=this.node();return(D=r.ns.qualify(D)).local?Q.getAttributeNS(D.space,D.local):Q.getAttribute(D)}for(H in D)this.each(ke(H,D[H]));return this}return this.each(ke(D,H))},ye.classed=function(D,H){if(arguments.length<2){if(typeof D=="string"){var Q=this.node(),ie=(D=ae(D)).length,ue=-1;if(H=Q.classList){for(;++ue<ie;)if(!H.contains(D[ue]))return!1}else for(H=Q.getAttribute("class");++ue<ie;)if(!de(D[ue]).test(H))return!1;return!0}for(H in D)this.each(re(H,D[H]));return this}return this.each(re(D,H))},ye.style=function(D,H,Q){var ie=arguments.length;if(ie<3){if(typeof D!="string"){for(Q in ie<2&&(H=""),D)this.each(Se(Q,D[Q],H));return this}if(ie<2){var ue=this.node();return t(ue).getComputedStyle(ue,null).getPropertyValue(D)}Q=""}return this.each(Se(D,H,Q))},ye.property=function(D,H){if(arguments.length<2){if(typeof D=="string")return this.node()[D];for(H in D)this.each(xe(H,D[H]));return this}return this.each(xe(D,H))},ye.text=function(D){return arguments.length?this.each(typeof D=="function"?function(){var H=D.apply(this,arguments);this.textContent=H??""}:D==null?function(){this.textContent=""}:function(){this.textContent=D}):this.node().textContent},ye.html=function(D){return arguments.length?this.each(typeof D=="function"?function(){var H=D.apply(this,arguments);this.innerHTML=H??""}:D==null?function(){this.innerHTML=""}:function(){this.innerHTML=D}):this.node().innerHTML},ye.append=function(D){return D=Te(D),this.select(function(){return this.appendChild(D.apply(this,arguments))})},ye.insert=function(D,H){return D=Te(D),H=me(H),this.select(function(){return this.insertBefore(D.apply(this,arguments),H.apply(this,arguments)||null)})},ye.remove=function(){return this.each(Ae)},ye.data=function(D,H){var Q,ie,ue=-1,_e=this.length;if(!arguments.length){for(D=new Array(_e=(Q=this[0]).length);++ue<_e;)(ie=Q[ue])&&(D[ue]=ie.__data__);return D}function Ie(nt,ft){var gt,Et,It,Lt=nt.length,Bt=ft.length,Ot=Math.min(Lt,Bt),Jt=new Array(Bt),Yt=new Array(Bt),Vt=new Array(Lt);if(H){var dn,xn=new y,En=new Array(Lt);for(gt=-1;++gt<Lt;)(Et=nt[gt])&&(xn.has(dn=H.call(Et,Et.__data__,gt))?Vt[gt]=Et:xn.set(dn,Et),En[gt]=dn);for(gt=-1;++gt<Bt;)(Et=xn.get(dn=H.call(ft,It=ft[gt],gt)))?Et!==!0&&(Jt[gt]=Et,Et.__data__=It):Yt[gt]=Pe(It),xn.set(dn,!0);for(gt=-1;++gt<Lt;)gt in En&&xn.get(En[gt])!==!0&&(Vt[gt]=nt[gt])}else{for(gt=-1;++gt<Ot;)Et=nt[gt],It=ft[gt],Et?(Et.__data__=It,Jt[gt]=Et):Yt[gt]=Pe(It);for(;gt<Bt;++gt)Yt[gt]=Pe(ft[gt]);for(;gt<Lt;++gt)Vt[gt]=nt[gt]}Yt.update=Jt,Yt.parentNode=Jt.parentNode=Vt.parentNode=nt.parentNode,ze.push(Yt),He.push(Jt),Ye.push(Vt)}var ze=Ee([]),He=te([]),Ye=te([]);if(typeof D=="function")for(;++ue<_e;)Ie(Q=this[ue],D.call(Q,Q.parentNode.__data__,ue));else for(;++ue<_e;)Ie(Q=this[ue],D);return He.enter=function(){return ze},He.exit=function(){return Ye},He},ye.datum=function(D){return arguments.length?this.property("__data__",D):this.property("__data__")},ye.filter=function(D){var H,Q,ie,ue=[];typeof D!="function"&&(D=De(D));for(var _e=0,Ie=this.length;_e<Ie;_e++){ue.push(H=[]),H.parentNode=(Q=this[_e]).parentNode;for(var ze=0,He=Q.length;ze<He;ze++)(ie=Q[ze])&&D.call(ie,ie.__data__,ze,_e)&&H.push(ie)}return te(ue)},ye.order=function(){for(var D=-1,H=this.length;++D<H;)for(var Q,ie=this[D],ue=ie.length-1,_e=ie[ue];--ue>=0;)(Q=ie[ue])&&(_e&&_e!==Q.nextSibling&&_e.parentNode.insertBefore(Q,_e),_e=Q);return this},ye.sort=function(D){D=ve.apply(this,arguments);for(var H=-1,Q=this.length;++H<Q;)this[H].sort(D);return this.order()},ye.each=function(D){return we(this,function(H,Q,ie){D.call(H,H.__data__,Q,ie)})},ye.call=function(D){var H=b(arguments);return D.apply(H[0]=this,H),this},ye.empty=function(){return!this.node()},ye.node=function(){for(var D=0,H=this.length;D<H;D++)for(var Q=this[D],ie=0,ue=Q.length;ie<ue;ie++){var _e=Q[ie];if(_e)return _e}return null},ye.size=function(){var D=0;return we(this,function(){++D}),D};var Fe=[];function Le(D,H,Q){var ie="__on"+D,ue=D.indexOf("."),_e=Ge;ue>0&&(D=D.slice(0,ue));var Ie=je.get(D);function ze(){var He=this[ie];He&&(this.removeEventListener(D,He,He.$),delete this[ie])}return Ie&&(D=Ie,_e=Je),ue?H?function(){var He=_e(H,b(arguments));ze.call(this),this.addEventListener(D,this[ie]=He,He.$=Q),He._=H}:ze:H?V:function(){var He,Ye=new RegExp("^__on([^.]+)"+r.requote(D)+"$");for(var nt in this)if(He=nt.match(Ye)){var ft=this[nt];this.removeEventListener(He[1],ft,ft.$),delete this[nt]}}}r.selection.enter=Ee,r.selection.enter.prototype=Fe,Fe.append=ye.append,Fe.empty=ye.empty,Fe.node=ye.node,Fe.call=ye.call,Fe.size=ye.size,Fe.select=function(D){for(var H,Q,ie,ue,_e,Ie=[],ze=-1,He=this.length;++ze<He;){ie=(ue=this[ze]).update,Ie.push(H=[]),H.parentNode=ue.parentNode;for(var Ye=-1,nt=ue.length;++Ye<nt;)(_e=ue[Ye])?(H.push(ie[Ye]=Q=D.call(ue.parentNode,_e.__data__,Ye,ze)),Q.__data__=_e.__data__):H.push(null)}return te(Ie)},Fe.insert=function(D,H){var Q,ie,ue;return arguments.length<2&&(Q=this,H=function(_e,Ie,ze){var He,Ye=Q[ze].update,nt=Ye.length;for(ze!=ue&&(ue=ze,ie=0),Ie>=ie&&(ie=Ie+1);!(He=Ye[ie])&&++ie<nt;);return He}),ye.insert.call(this,D,H)},r.select=function(D){var H;return typeof D=="string"?(H=[oe(D,c)]).parentNode=c.documentElement:(H=[D]).parentNode=o(D),te([H])},r.selectAll=function(D){var H;return typeof D=="string"?(H=b(se(D,c))).parentNode=c.documentElement:(H=b(D)).parentNode=null,te([H])},ye.on=function(D,H,Q){var ie=arguments.length;if(ie<3){if(typeof D!="string"){for(Q in ie<2&&(H=!1),D)this.each(Le(Q,D[Q],H));return this}if(ie<2)return(ie=this.node()["__on"+D])&&ie._;Q=!1}return this.each(Le(D,H,Q))};var je=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ge(D,H){return function(Q){var ie=r.event;r.event=Q,H[0]=this.__data__;try{D.apply(this,H)}finally{r.event=ie}}}function Je(D,H){var Q=Ge(D,H);return function(ie){var ue=this,_e=ie.relatedTarget;_e&&(_e===ue||8&_e.compareDocumentPosition(ue))||Q.call(ue,ie)}}c&&je.forEach(function(D){"on"+D in c&&je.remove(D)});var rt,ot=0;function yt(D){var H=".dragsuppress-"+ ++ot,Q="click"+H,ie=r.select(t(D)).on("touchmove"+H,$).on("dragstart"+H,$).on("selectstart"+H,$);if(rt==null&&(rt=!("onselectstart"in D)&&W(D.style,"userSelect")),rt){var ue=o(D).style,_e=ue[rt];ue[rt]="none"}return function(Ie){if(ie.on(H,null),rt&&(ue[rt]=_e),Ie){var ze=function(){ie.on(Q,null)};ie.on(Q,function(){$(),ze()},!0),setTimeout(ze,0)}}}r.mouse=function(D){return mt(D,K())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function mt(D,H){H.changedTouches&&(H=H.changedTouches[0]);var Q=D.ownerSVGElement||D;if(Q.createSVGPoint){var ie=Q.createSVGPoint();if(_t<0){var ue=t(D);if(ue.scrollX||ue.scrollY){var _e=(Q=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(_e.f||_e.e),Q.remove()}}return _t?(ie.x=H.pageX,ie.y=H.pageY):(ie.x=H.clientX,ie.y=H.clientY),[(ie=ie.matrixTransform(D.getScreenCTM().inverse())).x,ie.y]}var Ie=D.getBoundingClientRect();return[H.clientX-Ie.left-D.clientLeft,H.clientY-Ie.top-D.clientTop]}function tt(){return r.event.changedTouches[0].identifier}r.touch=function(D,H,Q){if(arguments.length<3&&(Q=H,H=K().changedTouches),H){for(var ie,ue=0,_e=H.length;ue<_e;++ue)if((ie=H[ue]).identifier===Q)return mt(D,ie)}},r.behavior.drag=function(){var D=ee(ue,"drag","dragstart","dragend"),H=null,Q=_e(V,r.mouse,t,"mousemove","mouseup"),ie=_e(tt,r.touch,I,"touchmove","touchend");function ue(){this.on("mousedown.drag",Q).on("touchstart.drag",ie)}function _e(Ie,ze,He,Ye,nt){return function(){var ft,gt=this,Et=r.event.target.correspondingElement||r.event.target,It=gt.parentNode,Lt=D.of(gt,arguments),Bt=0,Ot=Ie(),Jt=".drag"+(Ot==null?"":"-"+Ot),Yt=r.select(He(Et)).on(Ye+Jt,function(){var xn,En,In=ze(It,Ot);In&&(xn=In[0]-dn[0],En=In[1]-dn[1],Bt|=xn|En,dn=In,Lt({type:"drag",x:In[0]+ft[0],y:In[1]+ft[1],dx:xn,dy:En}))}).on(nt+Jt,function(){ze(It,Ot)&&(Yt.on(Ye+Jt,null).on(nt+Jt,null),Vt(Bt),Lt({type:"dragend"}))}),Vt=yt(Et),dn=ze(It,Ot);ft=H?[(ft=H.apply(gt,arguments)).x-dn[0],ft.y-dn[1]]:[0,0],Lt({type:"dragstart"})}}return ue.origin=function(Ie){return arguments.length?(H=Ie,ue):H},r.rebind(ue,D,"on")},r.touches=function(D,H){return arguments.length<2&&(H=K().touches),H?b(H).map(function(Q){var ie=mt(D,Q);return ie.identifier=Q.identifier,ie}):[]};var Qe=1e-6,Dt=Qe*Qe,zt=Math.PI,pt=2*zt,vt=pt-Qe,We=zt/2,Ze=zt/180,Ne=180/zt;function Xe(D){return D>1?We:D<-1?-We:Math.asin(D)}function st(D){return((D=Math.exp(D))+1/D)/2}var lt=Math.SQRT2;r.interpolateZoom=function(D,H){var Q,ie,ue=D[0],_e=D[1],Ie=D[2],ze=H[0],He=H[1],Ye=H[2],nt=ze-ue,ft=He-_e,gt=nt*nt+ft*ft;if(gt<Dt)ie=Math.log(Ye/Ie)/lt,Q=function(Jt){return[ue+Jt*nt,_e+Jt*ft,Ie*Math.exp(lt*Jt*ie)]};else{var Et=Math.sqrt(gt),It=(Ye*Ye-Ie*Ie+4*gt)/(2*Ie*2*Et),Lt=(Ye*Ye-Ie*Ie-4*gt)/(2*Ye*2*Et),Bt=Math.log(Math.sqrt(It*It+1)-It),Ot=Math.log(Math.sqrt(Lt*Lt+1)-Lt);ie=(Ot-Bt)/lt,Q=function(Jt){var Yt,Vt=Jt*ie,dn=st(Bt),xn=Ie/(2*Et)*(dn*(Yt=lt*Vt+Bt,((Yt=Math.exp(2*Yt))-1)/(Yt+1))-function(En){return((En=Math.exp(En))-1/En)/2}(Bt));return[ue+xn*nt,_e+xn*ft,Ie*dn/st(lt*Vt+Bt)]}}return Q.duration=1e3*ie,Q},r.behavior.zoom=function(){var D,H,Q,ie,ue,_e,Ie,ze,He,Ye={x:0,y:0,k:1},nt=[960,500],ft=Ve,gt=250,Et=0,It="mousedown.zoom",Lt="mousemove.zoom",Bt="mouseup.zoom",Ot="touchstart.zoom",Jt=ee(Yt,"zoomstart","zoom","zoomend");function Yt(nr){nr.on(It,Zn).on(bt+".zoom",_r).on("dblclick.zoom",Dr).on(Ot,ur)}function Vt(nr){return[(nr[0]-Ye.x)/Ye.k,(nr[1]-Ye.y)/Ye.k]}function dn(nr){Ye.k=Math.max(ft[0],Math.min(ft[1],nr))}function xn(nr,lr){lr=function(Ar){return[Ar[0]*Ye.k+Ye.x,Ar[1]*Ye.k+Ye.y]}(lr),Ye.x+=nr[0]-lr[0],Ye.y+=nr[1]-lr[1]}function En(nr,lr,Ar,vr){nr.__chart__={x:Ye.x,y:Ye.y,k:Ye.k},dn(Math.pow(2,vr)),xn(H=lr,Ar),nr=r.select(nr),gt>0&&(nr=nr.transition().duration(gt)),nr.call(Yt.event)}function In(){Ie&&Ie.domain(_e.range().map(function(nr){return(nr-Ye.x)/Ye.k}).map(_e.invert)),He&&He.domain(ze.range().map(function(nr){return(nr-Ye.y)/Ye.k}).map(ze.invert))}function Hn(nr){Et++||nr({type:"zoomstart"})}function ir(nr){In(),nr({type:"zoom",scale:Ye.k,translate:[Ye.x,Ye.y]})}function dr(nr){--Et||(nr({type:"zoomend"}),H=null)}function Zn(){var nr=this,lr=Jt.of(nr,arguments),Ar=0,vr=r.select(t(nr)).on(Lt,function(){Ar=1,xn(r.mouse(nr),Er),ir(lr)}).on(Bt,function(){vr.on(Lt,null).on(Bt,null),Or(Ar),dr(lr)}),Er=Vt(r.mouse(nr)),Or=yt(nr);Na.call(nr),Hn(lr)}function ur(){var nr,lr=this,Ar=Jt.of(lr,arguments),vr={},Er=0,Or=".zoom-"+r.event.changedTouches[0].identifier,Ur="touchmove"+Or,Vr="touchend"+Or,Gr=[],Zr=r.select(lr),vi=yt(lr);function Li(){var bi=r.touches(lr);return nr=Ye.k,bi.forEach(function(Jr){Jr.identifier in vr&&(vr[Jr.identifier]=Vt(Jr))}),bi}function ya(){var bi=r.event.target;r.select(bi).on(Ur,Xi).on(Vr,sa),Gr.push(bi);for(var Jr=r.event.changedTouches,ki=0,fi=Jr.length;ki<fi;++ki)vr[Jr[ki].identifier]=null;var Qr=Li(),Mi=Date.now();if(Qr.length===1){if(Mi-ue<500){var Ii=Qr[0];En(lr,Ii,vr[Ii.identifier],Math.floor(Math.log(Ye.k)/Math.LN2)+1),$()}ue=Mi}else if(Qr.length>1){Ii=Qr[0];var qi=Qr[1],zs=Ii[0]-qi[0],Rs=Ii[1]-qi[1];Er=zs*zs+Rs*Rs}}function Xi(){var bi,Jr,ki,fi,Qr=r.touches(lr);Na.call(lr);for(var Mi=0,Ii=Qr.length;Mi<Ii;++Mi,fi=null)if(ki=Qr[Mi],fi=vr[ki.identifier]){if(Jr)break;bi=ki,Jr=fi}if(fi){var qi=(qi=ki[0]-bi[0])*qi+(qi=ki[1]-bi[1])*qi,zs=Er&&Math.sqrt(qi/Er);bi=[(bi[0]+ki[0])/2,(bi[1]+ki[1])/2],Jr=[(Jr[0]+fi[0])/2,(Jr[1]+fi[1])/2],dn(zs*nr)}ue=null,xn(bi,Jr),ir(Ar)}function sa(){if(r.event.touches.length){for(var bi=r.event.changedTouches,Jr=0,ki=bi.length;Jr<ki;++Jr)delete vr[bi[Jr].identifier];for(var fi in vr)return void Li()}r.selectAll(Gr).on(Or,null),Zr.on(It,Zn).on(Ot,ur),vi(),dr(Ar)}ya(),Hn(Ar),Zr.on(It,null).on(Ot,ya)}function _r(){var nr=Jt.of(this,arguments);ie?clearTimeout(ie):(Na.call(this),D=Vt(H=Q||r.mouse(this)),Hn(nr)),ie=setTimeout(function(){ie=null,dr(nr)},50),$(),dn(Math.pow(2,.002*xt())*Ye.k),xn(H,D),ir(nr)}function Dr(){var nr=r.mouse(this),lr=Math.log(Ye.k)/Math.LN2;En(this,nr,Vt(nr),r.event.shiftKey?Math.ceil(lr)-1:Math.floor(lr)+1)}return bt||(bt="onwheel"in c?(xt=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in c?(xt=function(){return r.event.wheelDelta},"mousewheel"):(xt=function(){return-r.event.detail},"MozMousePixelScroll")),Yt.event=function(nr){nr.each(function(){var lr=Jt.of(this,arguments),Ar=Ye;zi?r.select(this).transition().each("start.zoom",function(){Ye=this.__chart__||{x:0,y:0,k:1},Hn(lr)}).tween("zoom:zoom",function(){var vr=nt[0],Er=nt[1],Or=H?H[0]:vr/2,Ur=H?H[1]:Er/2,Vr=r.interpolateZoom([(Or-Ye.x)/Ye.k,(Ur-Ye.y)/Ye.k,vr/Ye.k],[(Or-Ar.x)/Ar.k,(Ur-Ar.y)/Ar.k,vr/Ar.k]);return function(Gr){var Zr=Vr(Gr),vi=vr/Zr[2];this.__chart__=Ye={x:Or-Zr[0]*vi,y:Ur-Zr[1]*vi,k:vi},ir(lr)}}).each("interrupt.zoom",function(){dr(lr)}).each("end.zoom",function(){dr(lr)}):(this.__chart__=Ye,Hn(lr),ir(lr),dr(lr))})},Yt.translate=function(nr){return arguments.length?(Ye={x:+nr[0],y:+nr[1],k:Ye.k},In(),Yt):[Ye.x,Ye.y]},Yt.scale=function(nr){return arguments.length?(Ye={x:Ye.x,y:Ye.y,k:null},dn(+nr),In(),Yt):Ye.k},Yt.scaleExtent=function(nr){return arguments.length?(ft=nr==null?Ve:[+nr[0],+nr[1]],Yt):ft},Yt.center=function(nr){return arguments.length?(Q=nr&&[+nr[0],+nr[1]],Yt):Q},Yt.size=function(nr){return arguments.length?(nt=nr&&[+nr[0],+nr[1]],Yt):nt},Yt.duration=function(nr){return arguments.length?(gt=+nr,Yt):gt},Yt.x=function(nr){return arguments.length?(Ie=nr,_e=nr.copy(),Ye={x:0,y:0,k:1},Yt):Ie},Yt.y=function(nr){return arguments.length?(He=nr,ze=nr.copy(),Ye={x:0,y:0,k:1},Yt):He},r.rebind(Yt,Jt,"on")};var xt,bt,Ve=[0,1/0];function Be(){}function at(D,H,Q){return this instanceof at?(this.h=+D,this.s=+H,void(this.l=+Q)):arguments.length<2?D instanceof at?new at(D.h,D.s,D.l):un(""+D,An,at):new at(D,H,Q)}r.color=Be,Be.prototype.toString=function(){return this.rgb()+""},r.hsl=at;var ht=at.prototype=new Be;function dt(D,H,Q){var ie,ue;function _e(Ie){return Math.round(255*function(ze){return ze>360?ze-=360:ze<0&&(ze+=360),ze<60?ie+(ue-ie)*ze/60:ze<180?ue:ze<240?ie+(ue-ie)*(240-ze)/60:ie}(Ie))}return D=isNaN(D)?0:(D%=360)<0?D+360:D,H=isNaN(H)||H<0?0:H>1?1:H,ie=2*(Q=Q<0?0:Q>1?1:Q)-(ue=Q<=.5?Q*(1+H):Q+H-Q*H),new bn(_e(D+120),_e(D),_e(D-120))}function it(D,H,Q){return this instanceof it?(this.h=+D,this.c=+H,void(this.l=+Q)):arguments.length<2?D instanceof it?new it(D.h,D.c,D.l):function(ie,ue,_e){return ie>0?new it(Math.atan2(_e,ue)*Ne,Math.sqrt(ue*ue+_e*_e),ie):new it(NaN,NaN,ie)}(D instanceof St?D.l:(D=wn((D=r.rgb(D)).r,D.g,D.b)).l,D.a,D.b):new it(D,H,Q)}ht.brighter=function(D){return D=Math.pow(.7,arguments.length?D:1),new at(this.h,this.s,this.l/D)},ht.darker=function(D){return D=Math.pow(.7,arguments.length?D:1),new at(this.h,this.s,D*this.l)},ht.rgb=function(){return dt(this.h,this.s,this.l)},r.hcl=it;var kt=it.prototype=new Be;function Tt(D,H,Q){return isNaN(D)&&(D=0),isNaN(H)&&(H=0),new St(Q,Math.cos(D*=Ze)*H,Math.sin(D)*H)}function St(D,H,Q){return this instanceof St?(this.l=+D,this.a=+H,void(this.b=+Q)):arguments.length<2?D instanceof St?new St(D.l,D.a,D.b):D instanceof it?Tt(D.h,D.c,D.l):wn((D=bn(D)).r,D.g,D.b):new St(D,H,Q)}kt.brighter=function(D){return new it(this.h,this.c,Math.min(100,this.l+wt*(arguments.length?D:1)))},kt.darker=function(D){return new it(this.h,this.c,Math.max(0,this.l-wt*(arguments.length?D:1)))},kt.rgb=function(){return Tt(this.h,this.c,this.l).rgb()},r.lab=St;var wt=18,At=.95047,Ft=1,jt=1.08883,rn=St.prototype=new Be;function nn(D,H,Q){var ie=(D+16)/116,ue=ie+H/500,_e=ie-Q/200;return new bn($t(3.2404542*(ue=on(ue)*At)-1.5371385*(ie=on(ie)*Ft)-.4985314*(_e=on(_e)*jt)),$t(-.969266*ue+1.8760108*ie+.041556*_e),$t(.0556434*ue-.2040259*ie+1.0572252*_e))}function on(D){return D>.206893034?D*D*D:(D-.13793103448275862)/7.787037}function Ht(D){return D>.008856?Math.pow(D,.3333333333333333):7.787037*D+.13793103448275862}function $t(D){return Math.round(255*(D<=.00304?12.92*D:1.055*Math.pow(D,.4166666666666667)-.055))}function bn(D,H,Q){return this instanceof bn?(this.r=~~D,this.g=~~H,void(this.b=~~Q)):arguments.length<2?D instanceof bn?new bn(D.r,D.g,D.b):un(""+D,bn,dt):new bn(D,H,Q)}function ln(D){return new bn(D>>16,D>>8&255,255&D)}function Kt(D){return ln(D)+""}rn.brighter=function(D){return new St(Math.min(100,this.l+wt*(arguments.length?D:1)),this.a,this.b)},rn.darker=function(D){return new St(Math.max(0,this.l-wt*(arguments.length?D:1)),this.a,this.b)},rn.rgb=function(){return nn(this.l,this.a,this.b)},r.rgb=bn;var fn=bn.prototype=new Be;function en(D){return D<16?"0"+Math.max(0,D).toString(16):Math.min(255,D).toString(16)}function un(D,H,Q){var ie,ue,_e,Ie=0,ze=0,He=0;if(ie=/([a-z]+)\((.*)\)/.exec(D=D.toLowerCase()))switch(ue=ie[2].split(","),ie[1]){case"hsl":return Q(parseFloat(ue[0]),parseFloat(ue[1])/100,parseFloat(ue[2])/100);case"rgb":return H(Tn(ue[0]),Tn(ue[1]),Tn(ue[2]))}return(_e=Cn.get(D))?H(_e.r,_e.g,_e.b):(D==null||D.charAt(0)!=="#"||isNaN(_e=parseInt(D.slice(1),16))||(D.length===4?(Ie=(3840&_e)>>4,Ie|=Ie>>4,ze=240&_e,ze|=ze>>4,He=15&_e,He|=He<<4):D.length===7&&(Ie=(16711680&_e)>>16,ze=(65280&_e)>>8,He=255&_e)),H(Ie,ze,He))}function An(D,H,Q){var ie,ue,_e=Math.min(D/=255,H/=255,Q/=255),Ie=Math.max(D,H,Q),ze=Ie-_e,He=(Ie+_e)/2;return ze?(ue=He<.5?ze/(Ie+_e):ze/(2-Ie-_e),ie=D==Ie?(H-Q)/ze+(H<Q?6:0):H==Ie?(Q-D)/ze+2:(D-H)/ze+4,ie*=60):(ie=NaN,ue=He>0&&He<1?0:ie),new at(ie,ue,He)}function wn(D,H,Q){var ie=Ht((.4124564*(D=On(D))+.3575761*(H=On(H))+.1804375*(Q=On(Q)))/At),ue=Ht((.2126729*D+.7151522*H+.072175*Q)/Ft);return St(116*ue-16,500*(ie-ue),200*(ue-Ht((.0193339*D+.119192*H+.9503041*Q)/jt)))}function On(D){return(D/=255)<=.04045?D/12.92:Math.pow((D+.055)/1.055,2.4)}function Tn(D){var H=parseFloat(D);return D.charAt(D.length-1)==="%"?Math.round(2.55*H):H}fn.brighter=function(D){D=Math.pow(.7,arguments.length?D:1);var H=this.r,Q=this.g,ie=this.b,ue=30;return H||Q||ie?(H&&H<ue&&(H=ue),Q&&Q<ue&&(Q=ue),ie&&ie<ue&&(ie=ue),new bn(Math.min(255,H/D),Math.min(255,Q/D),Math.min(255,ie/D))):new bn(ue,ue,ue)},fn.darker=function(D){return new bn((D=Math.pow(.7,arguments.length?D:1))*this.r,D*this.g,D*this.b)},fn.hsl=function(){return An(this.r,this.g,this.b)},fn.toString=function(){return"#"+en(this.r)+en(this.g)+en(this.b)};var Cn=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Bn(D){return typeof D=="function"?D:function(){return D}}function Xn(D){return function(H,Q,ie){return arguments.length===2&&typeof Q=="function"&&(ie=Q,Q=null),cr(H,Q,D,ie)}}function cr(D,H,Q,ie){var ue={},_e=r.dispatch("beforesend","progress","load","error"),Ie={},ze=new XMLHttpRequest,He=null;function Ye(){var nt,ft=ze.status;if(!ft&&function(gt){var Et=gt.responseType;return Et&&Et!=="text"?gt.response:gt.responseText}(ze)||ft>=200&&ft<300||ft===304){try{nt=Q.call(ue,ze)}catch(gt){return void _e.error.call(ue,gt)}_e.load.call(ue,nt)}else _e.error.call(ue,ze)}return self.XDomainRequest&&!("withCredentials"in ze)&&/^(http(s)?:)?\/\//.test(D)&&(ze=new XDomainRequest),"onload"in ze?ze.onload=ze.onerror=Ye:ze.onreadystatechange=function(){ze.readyState>3&&Ye()},ze.onprogress=function(nt){var ft=r.event;r.event=nt;try{_e.progress.call(ue,ze)}finally{r.event=ft}},ue.header=function(nt,ft){return nt=(nt+"").toLowerCase(),arguments.length<2?Ie[nt]:(ft==null?delete Ie[nt]:Ie[nt]=ft+"",ue)},ue.mimeType=function(nt){return arguments.length?(H=nt==null?null:nt+"",ue):H},ue.responseType=function(nt){return arguments.length?(He=nt,ue):He},ue.response=function(nt){return Q=nt,ue},["get","post"].forEach(function(nt){ue[nt]=function(){return ue.send.apply(ue,[nt].concat(b(arguments)))}}),ue.send=function(nt,ft,gt){if(arguments.length===2&&typeof ft=="function"&&(gt=ft,ft=null),ze.open(nt,D,!0),H==null||"accept"in Ie||(Ie.accept=H+",*/*"),ze.setRequestHeader)for(var Et in Ie)ze.setRequestHeader(Et,Ie[Et]);return H!=null&&ze.overrideMimeType&&ze.overrideMimeType(H),He!=null&&(ze.responseType=He),gt!=null&&ue.on("error",gt).on("load",function(It){gt(null,It)}),_e.beforesend.call(ue,ze),ze.send(ft??null),ue},ue.abort=function(){return ze.abort(),ue},r.rebind(ue,_e,"on"),ie==null?ue:ue.get(function(nt){return nt.length===1?function(ft,gt){nt(ft==null?gt:null)}:nt}(ie))}Cn.forEach(function(D,H){Cn.set(D,ln(H))}),r.functor=Bn,r.xhr=Xn(I),r.dsv=function(D,H){var Q=new RegExp('["'+D+`
]`),ie=D.charCodeAt(0);function ue(Ye,nt,ft){arguments.length<3&&(ft=nt,nt=null);var gt=cr(Ye,H,nt==null?_e:Ie(nt),ft);return gt.row=function(Et){return arguments.length?gt.response((nt=Et)==null?_e:Ie(Et)):nt},gt}function _e(Ye){return ue.parse(Ye.responseText)}function Ie(Ye){return function(nt){return ue.parse(nt.responseText,Ye)}}function ze(Ye){return Ye.map(He).join(D)}function He(Ye){return Q.test(Ye)?'"'+Ye.replace(/\"/g,'""')+'"':Ye}return ue.parse=function(Ye,nt){var ft;return ue.parseRows(Ye,function(gt,Et){if(ft)return ft(gt,Et-1);var It=function(Lt){for(var Bt={},Ot=gt.length,Jt=0;Jt<Ot;++Jt)Bt[gt[Jt]]=Lt[Jt];return Bt};ft=nt?function(Lt,Bt){return nt(It(Lt),Bt)}:It})},ue.parseRows=function(Ye,nt){var ft,gt,Et={},It={},Lt=[],Bt=Ye.length,Ot=0,Jt=0;function Yt(){if(Ot>=Bt)return It;if(gt)return gt=!1,Et;var dn=Ot;if(Ye.charCodeAt(dn)===34){for(var xn=dn;xn++<Bt;)if(Ye.charCodeAt(xn)===34){if(Ye.charCodeAt(xn+1)!==34)break;++xn}return Ot=xn+2,(En=Ye.charCodeAt(xn+1))===13?(gt=!0,Ye.charCodeAt(xn+2)===10&&++Ot):En===10&&(gt=!0),Ye.slice(dn+1,xn).replace(/""/g,'"')}for(;Ot<Bt;){var En,In=1;if((En=Ye.charCodeAt(Ot++))===10)gt=!0;else if(En===13)gt=!0,Ye.charCodeAt(Ot)===10&&(++Ot,++In);else if(En!==ie)continue;return Ye.slice(dn,Ot-In)}return Ye.slice(dn)}for(;(ft=Yt())!==It;){for(var Vt=[];ft!==Et&&ft!==It;)Vt.push(ft),ft=Yt();nt&&(Vt=nt(Vt,Jt++))==null||Lt.push(Vt)}return Lt},ue.format=function(Ye){if(Array.isArray(Ye[0]))return ue.formatRows(Ye);var nt=new U,ft=[];return Ye.forEach(function(gt){for(var Et in gt)nt.has(Et)||ft.push(nt.add(Et))}),[ft.map(He).join(D)].concat(Ye.map(function(gt){return ft.map(function(Et){return He(gt[Et])}).join(D)})).join(`
`)},ue.formatRows=function(Ye){return Ye.map(ze).join(`
`)},ue},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("	","text/tab-separated-values");var Yn,jn,Kn,or,Qt=this[W(this,"requestAnimationFrame")]||function(D){setTimeout(D,17)};function an(D,H,Q){var ie=arguments.length;ie<2&&(H=0),ie<3&&(Q=Date.now());var ue={c:D,t:Q+H,n:null};return jn?jn.n=ue:Yn=ue,jn=ue,Kn||(or=clearTimeout(or),Kn=1,Qt(Dn)),ue}function Dn(){var D=yn(),H=Ln()-D;H>24?(isFinite(H)&&(clearTimeout(or),or=setTimeout(Dn,H)),Kn=0):(Kn=1,Qt(Dn))}function yn(){for(var D=Date.now(),H=Yn;H;)D>=H.t&&H.c(D-H.t)&&(H.c=null),H=H.n;return D}function Ln(){for(var D,H=Yn,Q=1/0;H;)H.c?(H.t<Q&&(Q=H.t),H=(D=H).n):H=D?D.n=H.n:Yn=H.n;return jn=D,Q}function Vn(D){return D[0]}function Un(D){return D[1]}function er(D){for(var H,Q,ie,ue=D.length,_e=[0,1],Ie=2,ze=2;ze<ue;ze++){for(;Ie>1&&(H=D[_e[Ie-2]],Q=D[_e[Ie-1]],ie=D[ze],(Q[0]-H[0])*(ie[1]-H[1])-(Q[1]-H[1])*(ie[0]-H[0])<=0);)--Ie;_e[Ie++]=ze}return _e.slice(0,Ie)}function fr(D,H){return D[0]-H[0]||D[1]-H[1]}r.timer=function(){an.apply(this,arguments)},r.timer.flush=function(){yn(),Ln()},r.round=function(D,H){return H?Math.round(D*(H=Math.pow(10,H)))/H:Math.round(D)},r.geom={},r.geom.hull=function(D){var H=Vn,Q=Un;if(arguments.length)return ie(D);function ie(ue){if(ue.length<3)return[];var _e,Ie=Bn(H),ze=Bn(Q),He=ue.length,Ye=[],nt=[];for(_e=0;_e<He;_e++)Ye.push([+Ie.call(this,ue[_e],_e),+ze.call(this,ue[_e],_e),_e]);for(Ye.sort(fr),_e=0;_e<He;_e++)nt.push([Ye[_e][0],-Ye[_e][1]]);var ft=er(Ye),gt=er(nt),Et=gt[0]===ft[0],It=gt[gt.length-1]===ft[ft.length-1],Lt=[];for(_e=ft.length-1;_e>=0;--_e)Lt.push(ue[Ye[ft[_e]][2]]);for(_e=+Et;_e<gt.length-It;++_e)Lt.push(ue[Ye[gt[_e]][2]]);return Lt}return ie.x=function(ue){return arguments.length?(H=ue,ie):H},ie.y=function(ue){return arguments.length?(Q=ue,ie):Q},ie},r.geom.polygon=function(D){return Z(D,Xt),D};var Xt=r.geom.polygon.prototype=[];function mn(D,H,Q){return(Q[0]-H[0])*(D[1]-H[1])<(Q[1]-H[1])*(D[0]-H[0])}function Pt(D,H,Q,ie){var ue=D[0],_e=Q[0],Ie=H[0]-ue,ze=ie[0]-_e,He=D[1],Ye=Q[1],nt=H[1]-He,ft=ie[1]-Ye,gt=(ze*(He-Ye)-ft*(ue-_e))/(ft*Ie-ze*nt);return[ue+gt*Ie,He+gt*nt]}function Zt(D){var H=D[0],Q=D[D.length-1];return!(H[0]-Q[0]||H[1]-Q[1])}Xt.area=function(){for(var D,H=-1,Q=this.length,ie=this[Q-1],ue=0;++H<Q;)D=ie,ie=this[H],ue+=D[1]*ie[0]-D[0]*ie[1];return .5*ue},Xt.centroid=function(D){var H,Q,ie=-1,ue=this.length,_e=0,Ie=0,ze=this[ue-1];for(arguments.length||(D=-1/(6*this.area()));++ie<ue;)H=ze,ze=this[ie],Q=H[0]*ze[1]-ze[0]*H[1],_e+=(H[0]+ze[0])*Q,Ie+=(H[1]+ze[1])*Q;return[_e*D,Ie*D]},Xt.clip=function(D){for(var H,Q,ie,ue,_e,Ie,ze=Zt(D),He=-1,Ye=this.length-Zt(this),nt=this[Ye-1];++He<Ye;){for(H=D.slice(),D.length=0,ue=this[He],_e=H[(ie=H.length-ze)-1],Q=-1;++Q<ie;)mn(Ie=H[Q],nt,ue)?(mn(_e,nt,ue)||D.push(Pt(_e,Ie,nt,ue)),D.push(Ie)):mn(_e,nt,ue)&&D.push(Pt(_e,Ie,nt,ue)),_e=Ie;ze&&D.push(D[0]),nt=ue}return D};var Wt,gn,pn,kn,vn,cn=[],qt=[];function Nt(){ti(this),this.edge=this.site=this.circle=null}function tn(D){var H=cn.pop()||new Nt;return H.site=D,H}function _n(D){sr(D),pn.remove(D),cn.push(D),ti(D)}function Fn(D){var H=D.circle,Q=H.x,ie=H.cy,ue={x:Q,y:ie},_e=D.P,Ie=D.N,ze=[D];_n(D);for(var He=_e;He.circle&&v(Q-He.circle.x)<Qe&&v(ie-He.circle.cy)<Qe;)_e=He.P,ze.unshift(He),_n(He),He=_e;ze.unshift(He),sr(He);for(var Ye=Ie;Ye.circle&&v(Q-Ye.circle.x)<Qe&&v(ie-Ye.circle.cy)<Qe;)Ie=Ye.N,ze.push(Ye),_n(Ye),Ye=Ie;ze.push(Ye),sr(Ye);var nt,ft=ze.length;for(nt=1;nt<ft;++nt)Ye=ze[nt],He=ze[nt-1],yr(Ye.edge,He.site,Ye.site,ue);He=ze[0],(Ye=ze[ft-1]).edge=rr(He.site,Ye.site,null,ue),Jn(He),Jn(Ye)}function zn(D){for(var H,Q,ie,ue,_e=D.x,Ie=D.y,ze=pn._;ze;)if((ie=Pn(ze,Ie)-_e)>Qe)ze=ze.L;else{if(!((ue=_e-$n(ze,Ie))>Qe)){ie>-Qe?(H=ze.P,Q=ze):ue>-Qe?(H=ze,Q=ze.N):H=Q=ze;break}if(!ze.R){H=ze;break}ze=ze.R}var He=tn(D);if(pn.insert(H,He),H||Q){if(H===Q)return sr(H),Q=tn(H.site),pn.insert(He,Q),He.edge=Q.edge=rr(H.site,He.site),Jn(H),void Jn(Q);if(Q){sr(H),sr(Q);var Ye=H.site,nt=Ye.x,ft=Ye.y,gt=D.x-nt,Et=D.y-ft,It=Q.site,Lt=It.x-nt,Bt=It.y-ft,Ot=2*(gt*Bt-Et*Lt),Jt=gt*gt+Et*Et,Yt=Lt*Lt+Bt*Bt,Vt={x:(Bt*Jt-Et*Yt)/Ot+nt,y:(gt*Yt-Lt*Jt)/Ot+ft};yr(Q.edge,Ye,It,Vt),He.edge=rr(Ye,D,null,Vt),Q.edge=rr(D,It,null,Vt),Jn(H),Jn(Q)}else He.edge=rr(H.site,He.site)}}function Pn(D,H){var Q=D.site,ie=Q.x,ue=Q.y,_e=ue-H;if(!_e)return ie;var Ie=D.P;if(!Ie)return-1/0;var ze=(Q=Ie.site).x,He=Q.y,Ye=He-H;if(!Ye)return ze;var nt=ze-ie,ft=1/_e-1/Ye,gt=nt/Ye;return ft?(-gt+Math.sqrt(gt*gt-2*ft*(nt*nt/(-2*Ye)-He+Ye/2+ue-_e/2)))/ft+ie:(ie+ze)/2}function $n(D,H){var Q=D.N;if(Q)return Pn(Q,H);var ie=D.site;return ie.y===H?ie.x:1/0}function Wn(D){this.site=D,this.edges=[]}function tr(D,H){return H.angle-D.angle}function qn(){ti(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(D){var H=D.P,Q=D.N;if(H&&Q){var ie=H.site,ue=D.site,_e=Q.site;if(ie!==_e){var Ie=ue.x,ze=ue.y,He=ie.x-Ie,Ye=ie.y-ze,nt=_e.x-Ie,ft=2*(He*(Bt=_e.y-ze)-Ye*nt);if(!(ft>=-Dt)){var gt=He*He+Ye*Ye,Et=nt*nt+Bt*Bt,It=(Bt*gt-Ye*Et)/ft,Lt=(He*Et-nt*gt)/ft,Bt=Lt+ze,Ot=qt.pop()||new qn;Ot.arc=D,Ot.site=ue,Ot.x=It+Ie,Ot.y=Bt+Math.sqrt(It*It+Lt*Lt),Ot.cy=Bt,D.circle=Ot;for(var Jt=null,Yt=vn._;Yt;)if(Ot.y<Yt.y||Ot.y===Yt.y&&Ot.x<=Yt.x){if(!Yt.L){Jt=Yt.P;break}Yt=Yt.L}else{if(!Yt.R){Jt=Yt;break}Yt=Yt.R}vn.insert(Jt,Ot),Jt||(kn=Ot)}}}}function sr(D){var H=D.circle;H&&(H.P||(kn=H.N),vn.remove(H),qt.push(H),ti(H),D.circle=null)}function wr(D,H){var Q=D.b;if(Q)return!0;var ie,ue,_e=D.a,Ie=H[0][0],ze=H[1][0],He=H[0][1],Ye=H[1][1],nt=D.l,ft=D.r,gt=nt.x,Et=nt.y,It=ft.x,Lt=ft.y,Bt=(gt+It)/2,Ot=(Et+Lt)/2;if(Lt===Et){if(Bt<Ie||Bt>=ze)return;if(gt>It){if(_e){if(_e.y>=Ye)return}else _e={x:Bt,y:He};Q={x:Bt,y:Ye}}else{if(_e){if(_e.y<He)return}else _e={x:Bt,y:Ye};Q={x:Bt,y:He}}}else if(ue=Ot-(ie=(gt-It)/(Lt-Et))*Bt,ie<-1||ie>1)if(gt>It){if(_e){if(_e.y>=Ye)return}else _e={x:(He-ue)/ie,y:He};Q={x:(Ye-ue)/ie,y:Ye}}else{if(_e){if(_e.y<He)return}else _e={x:(Ye-ue)/ie,y:Ye};Q={x:(He-ue)/ie,y:He}}else if(Et<Lt){if(_e){if(_e.x>=ze)return}else _e={x:Ie,y:ie*Ie+ue};Q={x:ze,y:ie*ze+ue}}else{if(_e){if(_e.x<Ie)return}else _e={x:ze,y:ie*ze+ue};Q={x:Ie,y:ie*Ie+ue}}return D.a=_e,D.b=Q,!0}function pr(D,H){this.l=D,this.r=H,this.a=this.b=null}function rr(D,H,Q,ie){var ue=new pr(D,H);return Wt.push(ue),Q&&yr(ue,D,H,Q),ie&&yr(ue,H,D,ie),gn[D.i].edges.push(new kr(ue,D,H)),gn[H.i].edges.push(new kr(ue,H,D)),ue}function yr(D,H,Q,ie){D.a||D.b?D.l===Q?D.b=ie:D.a=ie:(D.a=ie,D.l=H,D.r=Q)}function kr(D,H,Q){var ie=D.a,ue=D.b;this.edge=D,this.site=H,this.angle=Q?Math.atan2(Q.y-H.y,Q.x-H.x):D.l===H?Math.atan2(ue.x-ie.x,ie.y-ue.y):Math.atan2(ie.x-ue.x,ue.y-ie.y)}function Nr(){this._=null}function ti(D){D.U=D.C=D.L=D.R=D.P=D.N=null}function mi(D,H){var Q=H,ie=H.R,ue=Q.U;ue?ue.L===Q?ue.L=ie:ue.R=ie:D._=ie,ie.U=ue,Q.U=ie,Q.R=ie.L,Q.R&&(Q.R.U=Q),ie.L=Q}function Wi(D,H){var Q=H,ie=H.L,ue=Q.U;ue?ue.L===Q?ue.L=ie:ue.R=ie:D._=ie,ie.U=ue,Q.U=ie,Q.L=ie.R,Q.L&&(Q.L.U=Q),ie.R=Q}function ui(D){for(;D.L;)D=D.L;return D}function Di(D,H){var Q,ie,ue,_e=D.sort(pa).pop();for(Wt=[],gn=new Array(D.length),pn=new Nr,vn=new Nr;;)if(ue=kn,_e&&(!ue||_e.y<ue.y||_e.y===ue.y&&_e.x<ue.x))_e.x===Q&&_e.y===ie||(gn[_e.i]=new Wn(_e),zn(_e),Q=_e.x,ie=_e.y),_e=D.pop();else{if(!ue)break;Fn(ue.arc)}H&&(function(ze){for(var He,Ye,nt,ft,gt,Et=Wt,It=(Ye=ze[0][0],nt=ze[0][1],ft=ze[1][0],gt=ze[1][1],function(Bt){var Ot,Jt=Bt.a,Yt=Bt.b,Vt=Jt.x,dn=Jt.y,xn=0,En=1,In=Yt.x-Vt,Hn=Yt.y-dn;if(Ot=Ye-Vt,In||!(Ot>0)){if(Ot/=In,In<0){if(Ot<xn)return;Ot<En&&(En=Ot)}else if(In>0){if(Ot>En)return;Ot>xn&&(xn=Ot)}if(Ot=ft-Vt,In||!(Ot<0)){if(Ot/=In,In<0){if(Ot>En)return;Ot>xn&&(xn=Ot)}else if(In>0){if(Ot<xn)return;Ot<En&&(En=Ot)}if(Ot=nt-dn,Hn||!(Ot>0)){if(Ot/=Hn,Hn<0){if(Ot<xn)return;Ot<En&&(En=Ot)}else if(Hn>0){if(Ot>En)return;Ot>xn&&(xn=Ot)}if(Ot=gt-dn,Hn||!(Ot<0)){if(Ot/=Hn,Hn<0){if(Ot>En)return;Ot>xn&&(xn=Ot)}else if(Hn>0){if(Ot<xn)return;Ot<En&&(En=Ot)}return xn>0&&(Bt.a={x:Vt+xn*In,y:dn+xn*Hn}),En<1&&(Bt.b={x:Vt+En*In,y:dn+En*Hn}),Bt}}}}}),Lt=Et.length;Lt--;)(!wr(He=Et[Lt],ze)||!It(He)||v(He.a.x-He.b.x)<Qe&&v(He.a.y-He.b.y)<Qe)&&(He.a=He.b=null,Et.splice(Lt,1))}(H),function(ze){for(var He,Ye,nt,ft,gt,Et,It,Lt,Bt,Ot,Jt=ze[0][0],Yt=ze[1][0],Vt=ze[0][1],dn=ze[1][1],xn=gn,En=xn.length;En--;)if((gt=xn[En])&&gt.prepare())for(Lt=(It=gt.edges).length,Et=0;Et<Lt;)nt=(Ot=It[Et].end()).x,ft=Ot.y,He=(Bt=It[++Et%Lt].start()).x,Ye=Bt.y,(v(nt-He)>Qe||v(ft-Ye)>Qe)&&(It.splice(Et,0,new kr((In=gt.site,Hn=Ot,ir=v(nt-Jt)<Qe&&dn-ft>Qe?{x:Jt,y:v(He-Jt)<Qe?Ye:dn}:v(ft-dn)<Qe&&Yt-nt>Qe?{x:v(Ye-dn)<Qe?He:Yt,y:dn}:v(nt-Yt)<Qe&&ft-Vt>Qe?{x:Yt,y:v(He-Yt)<Qe?Ye:Vt}:v(ft-Vt)<Qe&&nt-Jt>Qe?{x:v(Ye-Vt)<Qe?He:Jt,y:Vt}:null,dr=void 0,(dr=new pr(In,null)).a=Hn,dr.b=ir,Wt.push(dr),dr),gt.site,null)),++Lt);var In,Hn,ir,dr}(H));var Ie={cells:gn,edges:Wt};return pn=vn=Wt=gn=null,Ie}function pa(D,H){return H.y-D.y||H.x-D.x}Wn.prototype.prepare=function(){for(var D,H=this.edges,Q=H.length;Q--;)(D=H[Q].edge).b&&D.a||H.splice(Q,1);return H.sort(tr),H.length},kr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Nr.prototype={insert:function(D,H){var Q,ie,ue;if(D){if(H.P=D,H.N=D.N,D.N&&(D.N.P=H),D.N=H,D.R){for(D=D.R;D.L;)D=D.L;D.L=H}else D.R=H;Q=D}else this._?(D=ui(this._),H.P=null,H.N=D,D.P=D.L=H,Q=D):(H.P=H.N=null,this._=H,Q=null);for(H.L=H.R=null,H.U=Q,H.C=!0,D=H;Q&&Q.C;)Q===(ie=Q.U).L?(ue=ie.R)&&ue.C?(Q.C=ue.C=!1,ie.C=!0,D=ie):(D===Q.R&&(mi(this,Q),Q=(D=Q).U),Q.C=!1,ie.C=!0,Wi(this,ie)):(ue=ie.L)&&ue.C?(Q.C=ue.C=!1,ie.C=!0,D=ie):(D===Q.L&&(Wi(this,Q),Q=(D=Q).U),Q.C=!1,ie.C=!0,mi(this,ie)),Q=D.U;this._.C=!1},remove:function(D){D.N&&(D.N.P=D.P),D.P&&(D.P.N=D.N),D.N=D.P=null;var H,Q,ie,ue=D.U,_e=D.L,Ie=D.R;if(Q=_e?Ie?ui(Ie):_e:Ie,ue?ue.L===D?ue.L=Q:ue.R=Q:this._=Q,_e&&Ie?(ie=Q.C,Q.C=D.C,Q.L=_e,_e.U=Q,Q!==Ie?(ue=Q.U,Q.U=D.U,D=Q.R,ue.L=D,Q.R=Ie,Ie.U=Q):(Q.U=ue,ue=Q,D=Q.R)):(ie=D.C,D=Q),D&&(D.U=ue),!ie)if(D&&D.C)D.C=!1;else{do{if(D===this._)break;if(D===ue.L){if((H=ue.R).C&&(H.C=!1,ue.C=!0,mi(this,ue),H=ue.R),H.L&&H.L.C||H.R&&H.R.C){H.R&&H.R.C||(H.L.C=!1,H.C=!0,Wi(this,H),H=ue.R),H.C=ue.C,ue.C=H.R.C=!1,mi(this,ue),D=this._;break}}else if((H=ue.L).C&&(H.C=!1,ue.C=!0,Wi(this,ue),H=ue.L),H.L&&H.L.C||H.R&&H.R.C){H.L&&H.L.C||(H.R.C=!1,H.C=!0,mi(this,H),H=ue.L),H.C=ue.C,ue.C=H.L.C=!1,Wi(this,ue),D=this._;break}H.C=!0,D=ue,ue=ue.U}while(!D.C);D&&(D.C=!1)}}},r.geom.voronoi=function(D){var H=Vn,Q=Un,ie=H,ue=Q,_e=Da;if(D)return Ie(D);function Ie(He){var Ye=new Array(He.length),nt=_e[0][0],ft=_e[0][1],gt=_e[1][0],Et=_e[1][1];return Di(ze(He),_e).cells.forEach(function(It,Lt){var Bt=It.edges,Ot=It.site;(Ye[Lt]=Bt.length?Bt.map(function(Jt){var Yt=Jt.start();return[Yt.x,Yt.y]}):Ot.x>=nt&&Ot.x<=gt&&Ot.y>=ft&&Ot.y<=Et?[[nt,Et],[gt,Et],[gt,ft],[nt,ft]]:[]).point=He[Lt]}),Ye}function ze(He){return He.map(function(Ye,nt){return{x:Math.round(ie(Ye,nt)/Qe)*Qe,y:Math.round(ue(Ye,nt)/Qe)*Qe,i:nt}})}return Ie.links=function(He){return Di(ze(He)).edges.filter(function(Ye){return Ye.l&&Ye.r}).map(function(Ye){return{source:He[Ye.l.i],target:He[Ye.r.i]}})},Ie.triangles=function(He){var Ye=[];return Di(ze(He)).cells.forEach(function(nt,ft){for(var gt,Et,It,Lt,Bt=nt.site,Ot=nt.edges.sort(tr),Jt=-1,Yt=Ot.length,Vt=Ot[Yt-1].edge,dn=Vt.l===Bt?Vt.r:Vt.l;++Jt<Yt;)gt=dn,dn=(Vt=Ot[Jt].edge).l===Bt?Vt.r:Vt.l,ft<gt.i&&ft<dn.i&&(It=gt,Lt=dn,((Et=Bt).x-Lt.x)*(It.y-Et.y)-(Et.x-It.x)*(Lt.y-Et.y)<0)&&Ye.push([He[ft],He[gt.i],He[dn.i]])}),Ye},Ie.x=function(He){return arguments.length?(ie=Bn(H=He),Ie):H},Ie.y=function(He){return arguments.length?(ue=Bn(Q=He),Ie):Q},Ie.clipExtent=function(He){return arguments.length?(_e=He??Da,Ie):_e===Da?null:_e},Ie.size=function(He){return arguments.length?Ie.clipExtent(He&&[[0,0],He]):_e===Da?null:_e&&_e[1]},Ie};var Da=[[-1e6,-1e6],[1e6,1e6]];function Rr(D){return D.x}function aa(D){return D.y}function da(D,H,Q,ie,ue,_e){if(!D(H,Q,ie,ue,_e)){var Ie=.5*(Q+ue),ze=.5*(ie+_e),He=H.nodes;He[0]&&da(D,He[0],Q,ie,Ie,ze),He[1]&&da(D,He[1],Ie,ie,ue,ze),He[2]&&da(D,He[2],Q,ze,Ie,_e),He[3]&&da(D,He[3],Ie,ze,ue,_e)}}function Vi(D,H){D=r.rgb(D),H=r.rgb(H);var Q=D.r,ie=D.g,ue=D.b,_e=H.r-Q,Ie=H.g-ie,ze=H.b-ue;return function(He){return"#"+en(Math.round(Q+_e*He))+en(Math.round(ie+Ie*He))+en(Math.round(ue+ze*He))}}function Vo(D,H){var Q,ie={},ue={};for(Q in D)Q in H?ie[Q]=za(D[Q],H[Q]):ue[Q]=D[Q];for(Q in H)Q in D||(ue[Q]=H[Q]);return function(_e){for(Q in ie)ue[Q]=ie[Q](_e);return ue}}function ba(D,H){return D=+D,H=+H,function(Q){return D*(1-Q)+H*Q}}function po(D,H){var Q,ie,ue,_e=vo.lastIndex=go.lastIndex=0,Ie=-1,ze=[],He=[];for(D+="",H+="";(Q=vo.exec(D))&&(ie=go.exec(H));)(ue=ie.index)>_e&&(ue=H.slice(_e,ue),ze[Ie]?ze[Ie]+=ue:ze[++Ie]=ue),(Q=Q[0])===(ie=ie[0])?ze[Ie]?ze[Ie]+=ie:ze[++Ie]=ie:(ze[++Ie]=null,He.push({i:Ie,x:ba(Q,ie)})),_e=go.lastIndex;return _e<H.length&&(ue=H.slice(_e),ze[Ie]?ze[Ie]+=ue:ze[++Ie]=ue),ze.length<2?He[0]?(H=He[0].x,function(Ye){return H(Ye)+""}):function(){return H}:(H=He.length,function(Ye){for(var nt,ft=0;ft<H;++ft)ze[(nt=He[ft]).i]=nt.x(Ye);return ze.join("")})}r.geom.delaunay=function(D){return r.geom.voronoi().triangles(D)},r.geom.quadtree=function(D,H,Q,ie,ue){var _e,Ie=Vn,ze=Un;if(_e=arguments.length)return Ie=Rr,ze=aa,_e===3&&(ue=Q,ie=H,Q=H=0),He(D);function He(Ye){var nt,ft,gt,Et,It,Lt,Bt,Ot,Jt,Yt=Bn(Ie),Vt=Bn(ze);if(H!=null)Lt=H,Bt=Q,Ot=ie,Jt=ue;else if(Ot=Jt=-(Lt=Bt=1/0),ft=[],gt=[],It=Ye.length,_e)for(Et=0;Et<It;++Et)(nt=Ye[Et]).x<Lt&&(Lt=nt.x),nt.y<Bt&&(Bt=nt.y),nt.x>Ot&&(Ot=nt.x),nt.y>Jt&&(Jt=nt.y),ft.push(nt.x),gt.push(nt.y);else for(Et=0;Et<It;++Et){var dn=+Yt(nt=Ye[Et],Et),xn=+Vt(nt,Et);dn<Lt&&(Lt=dn),xn<Bt&&(Bt=xn),dn>Ot&&(Ot=dn),xn>Jt&&(Jt=xn),ft.push(dn),gt.push(xn)}var En=Ot-Lt,In=Jt-Bt;function Hn(Zn,ur,_r,Dr,nr,lr,Ar,vr){if(!isNaN(_r)&&!isNaN(Dr))if(Zn.leaf){var Er=Zn.x,Or=Zn.y;if(Er!=null)if(v(Er-_r)+v(Or-Dr)<.01)ir(Zn,ur,_r,Dr,nr,lr,Ar,vr);else{var Ur=Zn.point;Zn.x=Zn.y=Zn.point=null,ir(Zn,Ur,Er,Or,nr,lr,Ar,vr),ir(Zn,ur,_r,Dr,nr,lr,Ar,vr)}else Zn.x=_r,Zn.y=Dr,Zn.point=ur}else ir(Zn,ur,_r,Dr,nr,lr,Ar,vr)}function ir(Zn,ur,_r,Dr,nr,lr,Ar,vr){var Er=.5*(nr+Ar),Or=.5*(lr+vr),Ur=_r>=Er,Vr=Dr>=Or,Gr=Vr<<1|Ur;Zn.leaf=!1,Ur?nr=Er:Ar=Er,Vr?lr=Or:vr=Or,Hn(Zn=Zn.nodes[Gr]||(Zn.nodes[Gr]={leaf:!0,nodes:[],point:null,x:null,y:null}),ur,_r,Dr,nr,lr,Ar,vr)}En>In?Jt=Bt+En:Ot=Lt+In;var dr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Zn){Hn(dr,Zn,+Yt(Zn,++Et),+Vt(Zn,Et),Lt,Bt,Ot,Jt)}};if(dr.visit=function(Zn){da(Zn,dr,Lt,Bt,Ot,Jt)},dr.find=function(Zn){return function(ur,_r,Dr,nr,lr,Ar,vr){var Er,Or=1/0;return function Ur(Vr,Gr,Zr,vi,Li){if(!(Gr>Ar||Zr>vr||vi<nr||Li<lr)){if(ya=Vr.point){var ya,Xi=_r-Vr.x,sa=Dr-Vr.y,bi=Xi*Xi+sa*sa;if(bi<Or){var Jr=Math.sqrt(Or=bi);nr=_r-Jr,lr=Dr-Jr,Ar=_r+Jr,vr=Dr+Jr,Er=ya}}for(var ki=Vr.nodes,fi=.5*(Gr+vi),Qr=.5*(Zr+Li),Mi=(Dr>=Qr)<<1|_r>=fi,Ii=Mi+4;Mi<Ii;++Mi)if(Vr=ki[3&Mi])switch(3&Mi){case 0:Ur(Vr,Gr,Zr,fi,Qr);break;case 1:Ur(Vr,fi,Zr,vi,Qr);break;case 2:Ur(Vr,Gr,Qr,fi,Li);break;case 3:Ur(Vr,fi,Qr,vi,Li)}}}(ur,nr,lr,Ar,vr),Er}(dr,Zn[0],Zn[1],Lt,Bt,Ot,Jt)},Et=-1,H==null){for(;++Et<It;)Hn(dr,Ye[Et],ft[Et],gt[Et],Lt,Bt,Ot,Jt);--Et}else Ye.forEach(dr.add);return ft=gt=Ye=nt=null,dr}return He.x=function(Ye){return arguments.length?(Ie=Ye,He):Ie},He.y=function(Ye){return arguments.length?(ze=Ye,He):ze},He.extent=function(Ye){return arguments.length?(Ye==null?H=Q=ie=ue=null:(H=+Ye[0][0],Q=+Ye[0][1],ie=+Ye[1][0],ue=+Ye[1][1]),He):H==null?null:[[H,Q],[ie,ue]]},He.size=function(Ye){return arguments.length?(Ye==null?H=Q=ie=ue=null:(H=Q=0,ie=+Ye[0],ue=+Ye[1]),He):H==null?null:[ie-H,ue-Q]},He},r.interpolateRgb=Vi,r.interpolateObject=Vo,r.interpolateNumber=ba,r.interpolateString=po;var vo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,go=new RegExp(vo.source,"g");function za(D,H){for(var Q,ie=r.interpolators.length;--ie>=0&&!(Q=r.interpolators[ie](D,H)););return Q}function Qa(D,H){var Q,ie=[],ue=[],_e=D.length,Ie=H.length,ze=Math.min(D.length,H.length);for(Q=0;Q<ze;++Q)ie.push(za(D[Q],H[Q]));for(;Q<_e;++Q)ue[Q]=D[Q];for(;Q<Ie;++Q)ue[Q]=H[Q];return function(He){for(Q=0;Q<ze;++Q)ue[Q]=ie[Q](He);return ue}}r.interpolate=za,r.interpolators=[function(D,H){var Q=typeof H;return(Q==="string"?Cn.has(H.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(H)?Vi:po:H instanceof Be?Vi:Array.isArray(H)?Qa:Q==="object"&&isNaN(H)?Vo:ba)(D,H)}],r.interpolateArray=Qa;var yo=function(){return I},ai=r.map({linear:yo,poly:function(D){return function(H){return Math.pow(H,D)}},quad:function(){return eo},cubic:function(){return qo},sin:function(){return Ho},exp:function(){return Do},circle:function(){return Go},elastic:function(D,H){var Q;return arguments.length<2&&(H=.45),arguments.length?Q=H/pt*Math.asin(1/D):(D=1,Q=H/4),function(ie){return 1+D*Math.pow(2,-10*ie)*Math.sin((ie-Q)*pt/H)}},back:function(D){return D||(D=1.70158),function(H){return H*H*((D+1)*H-D)}},bounce:function(){return bo}}),Fi=r.map({in:I,out:Co,"in-out":mo,"out-in":function(D){return mo(Co(D))}});function Co(D){return function(H){return 1-D(1-H)}}function mo(D){return function(H){return .5*(H<.5?D(2*H):2-D(2-2*H))}}function eo(D){return D*D}function qo(D){return D*D*D}function xo(D){if(D<=0)return 0;if(D>=1)return 1;var H=D*D,Q=H*D;return 4*(D<.5?Q:3*(D-H)+Q-.75)}function Ho(D){return 1-Math.cos(D*We)}function Do(D){return Math.pow(2,10*(D-1))}function Go(D){return 1-Math.sqrt(1-D*D)}function bo(D){return D<.36363636363636365?7.5625*D*D:D<.7272727272727273?7.5625*(D-=.5454545454545454)*D+.75:D<.9090909090909091?7.5625*(D-=.8181818181818182)*D+.9375:7.5625*(D-=.9545454545454546)*D+.984375}function Ml(D,H){return H-=D,function(Q){return Math.round(D+H*Q)}}function ll(D){var H,Q,ie,ue=[D.a,D.b],_e=[D.c,D.d],Ie=zl(ue),ze=us(ue,_e),He=zl(((H=_e)[0]+=(ie=-ze)*(Q=ue)[0],H[1]+=ie*Q[1],H))||0;ue[0]*_e[1]<_e[0]*ue[1]&&(ue[0]*=-1,ue[1]*=-1,Ie*=-1,ze*=-1),this.rotate=(Ie?Math.atan2(ue[1],ue[0]):Math.atan2(-_e[0],_e[1]))*Ne,this.translate=[D.e,D.f],this.scale=[Ie,He],this.skew=He?Math.atan2(ze,He)*Ne:0}function us(D,H){return D[0]*H[0]+D[1]*H[1]}function zl(D){var H=Math.sqrt(us(D,D));return H&&(D[0]/=H,D[1]/=H),H}r.ease=function(D){var H,Q=D.indexOf("-"),ie=Q>=0?D.slice(0,Q):D,ue=Q>=0?D.slice(Q+1):"in";return ie=ai.get(ie)||yo,ue=Fi.get(ue)||I,H=ue(ie.apply(null,w.call(arguments,1))),function(_e){return _e<=0?0:_e>=1?1:H(_e)}},r.interpolateHcl=function(D,H){D=r.hcl(D),H=r.hcl(H);var Q=D.h,ie=D.c,ue=D.l,_e=H.h-Q,Ie=H.c-ie,ze=H.l-ue;return isNaN(Ie)&&(Ie=0,ie=isNaN(ie)?H.c:ie),isNaN(_e)?(_e=0,Q=isNaN(Q)?H.h:Q):_e>180?_e-=360:_e<-180&&(_e+=360),function(He){return Tt(Q+_e*He,ie+Ie*He,ue+ze*He)+""}},r.interpolateHsl=function(D,H){D=r.hsl(D),H=r.hsl(H);var Q=D.h,ie=D.s,ue=D.l,_e=H.h-Q,Ie=H.s-ie,ze=H.l-ue;return isNaN(Ie)&&(Ie=0,ie=isNaN(ie)?H.s:ie),isNaN(_e)?(_e=0,Q=isNaN(Q)?H.h:Q):_e>180?_e-=360:_e<-180&&(_e+=360),function(He){return dt(Q+_e*He,ie+Ie*He,ue+ze*He)+""}},r.interpolateLab=function(D,H){D=r.lab(D),H=r.lab(H);var Q=D.l,ie=D.a,ue=D.b,_e=H.l-Q,Ie=H.a-ie,ze=H.b-ue;return function(He){return nn(Q+_e*He,ie+Ie*He,ue+ze*He)+""}},r.interpolateRound=Ml,r.transform=function(D){var H=c.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(Q){if(Q!=null){H.setAttribute("transform",Q);var ie=H.transform.baseVal.consolidate()}return new ll(ie?ie.matrix:Rl)})(D)},ll.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Rl={a:1,b:0,c:0,d:1,e:0,f:0};function cs(D){return D.length?D.pop()+",":""}function Bl(D,H){var Q=[],ie=[];return D=r.transform(D),H=r.transform(H),function(ue,_e,Ie,ze){if(ue[0]!==_e[0]||ue[1]!==_e[1]){var He=Ie.push("translate(",null,",",null,")");ze.push({i:He-4,x:ba(ue[0],_e[0])},{i:He-2,x:ba(ue[1],_e[1])})}else(_e[0]||_e[1])&&Ie.push("translate("+_e+")")}(D.translate,H.translate,Q,ie),function(ue,_e,Ie,ze){ue!==_e?(ue-_e>180?_e+=360:_e-ue>180&&(ue+=360),ze.push({i:Ie.push(cs(Ie)+"rotate(",null,")")-2,x:ba(ue,_e)})):_e&&Ie.push(cs(Ie)+"rotate("+_e+")")}(D.rotate,H.rotate,Q,ie),function(ue,_e,Ie,ze){ue!==_e?ze.push({i:Ie.push(cs(Ie)+"skewX(",null,")")-2,x:ba(ue,_e)}):_e&&Ie.push(cs(Ie)+"skewX("+_e+")")}(D.skew,H.skew,Q,ie),function(ue,_e,Ie,ze){if(ue[0]!==_e[0]||ue[1]!==_e[1]){var He=Ie.push(cs(Ie)+"scale(",null,",",null,")");ze.push({i:He-4,x:ba(ue[0],_e[0])},{i:He-2,x:ba(ue[1],_e[1])})}else _e[0]===1&&_e[1]===1||Ie.push(cs(Ie)+"scale("+_e+")")}(D.scale,H.scale,Q,ie),D=H=null,function(ue){for(var _e,Ie=-1,ze=ie.length;++Ie<ze;)Q[(_e=ie[Ie]).i]=_e.x(ue);return Q.join("")}}function eu(D,H){return H=(H-=D=+D)||1/H,function(Q){return(Q-D)/H}}function tu(D,H){return H=(H-=D=+D)||1/H,function(Q){return Math.max(0,Math.min(1,(Q-D)/H))}}function fs(D){for(var H=D.source,Q=D.target,ie=function(Ie,ze){if(Ie===ze)return Ie;for(var He=_o(Ie),Ye=_o(ze),nt=He.pop(),ft=Ye.pop(),gt=null;nt===ft;)gt=nt,nt=He.pop(),ft=Ye.pop();return gt}(H,Q),ue=[H];H!==ie;)H=H.parent,ue.push(H);for(var _e=ue.length;Q!==ie;)ue.splice(_e,0,Q),Q=Q.parent;return ue}function _o(D){for(var H=[],Q=D.parent;Q!=null;)H.push(D),D=Q,Q=Q.parent;return H.push(D),H}function As(D){D.fixed|=2}function hs(D){D.fixed&=-7}function Hs(D){D.fixed|=4,D.px=D.x,D.py=D.y}function ps(D){D.fixed&=-5}function to(D,H,Q){var ie=0,ue=0;if(D.charge=0,!D.leaf)for(var _e,Ie=D.nodes,ze=Ie.length,He=-1;++He<ze;)(_e=Ie[He])!=null&&(to(_e,H,Q),D.charge+=_e.charge,ie+=_e.charge*_e.cx,ue+=_e.charge*_e.cy);if(D.point){D.leaf||(D.point.x+=Math.random()-.5,D.point.y+=Math.random()-.5);var Ye=H*Q[D.point.index];D.charge+=D.pointCharge=Ye,ie+=Ye*D.point.x,ue+=Ye*D.point.y}D.cx=ie/D.charge,D.cy=ue/D.charge}r.interpolateTransform=Bl,r.layout={},r.layout.bundle=function(){return function(D){for(var H=[],Q=-1,ie=D.length;++Q<ie;)H.push(fs(D[Q]));return H}},r.layout.chord=function(){var D,H,Q,ie,ue,_e,Ie,ze={},He=0;function Ye(){var ft,gt,Et,It,Lt,Bt={},Ot=[],Jt=r.range(ie),Yt=[];for(D=[],H=[],ft=0,It=-1;++It<ie;){for(gt=0,Lt=-1;++Lt<ie;)gt+=Q[It][Lt];Ot.push(gt),Yt.push(r.range(ie)),ft+=gt}for(ue&&Jt.sort(function(dr,Zn){return ue(Ot[dr],Ot[Zn])}),_e&&Yt.forEach(function(dr,Zn){dr.sort(function(ur,_r){return _e(Q[Zn][ur],Q[Zn][_r])})}),ft=(pt-He*ie)/ft,gt=0,It=-1;++It<ie;){for(Et=gt,Lt=-1;++Lt<ie;){var Vt=Jt[It],dn=Yt[Vt][Lt],xn=Q[Vt][dn],En=gt,In=gt+=xn*ft;Bt[Vt+"-"+dn]={index:Vt,subindex:dn,startAngle:En,endAngle:In,value:xn}}H[Vt]={index:Vt,startAngle:Et,endAngle:gt,value:Ot[Vt]},gt+=He}for(It=-1;++It<ie;)for(Lt=It-1;++Lt<ie;){var Hn=Bt[It+"-"+Lt],ir=Bt[Lt+"-"+It];(Hn.value||ir.value)&&D.push(Hn.value<ir.value?{source:ir,target:Hn}:{source:Hn,target:ir})}Ie&&nt()}function nt(){D.sort(function(ft,gt){return Ie((ft.source.value+ft.target.value)/2,(gt.source.value+gt.target.value)/2)})}return ze.matrix=function(ft){return arguments.length?(ie=(Q=ft)&&Q.length,D=H=null,ze):Q},ze.padding=function(ft){return arguments.length?(He=ft,D=H=null,ze):He},ze.sortGroups=function(ft){return arguments.length?(ue=ft,D=H=null,ze):ue},ze.sortSubgroups=function(ft){return arguments.length?(_e=ft,D=null,ze):_e},ze.sortChords=function(ft){return arguments.length?(Ie=ft,D&&nt(),ze):Ie},ze.chords=function(){return D||Ye(),D},ze.groups=function(){return H||Ye(),H},ze},r.layout.force=function(){var D,H,Q,ie,ue,_e,Ie={},ze=r.dispatch("start","tick","end"),He=[1,1],Ye=.9,nt=Sl,ft=Wo,gt=-30,Et=Lo,It=.1,Lt=.64,Bt=[],Ot=[];function Jt(Vt){return function(dn,xn,En,In){if(dn.point!==Vt){var Hn=dn.cx-Vt.x,ir=dn.cy-Vt.y,dr=In-xn,Zn=Hn*Hn+ir*ir;if(dr*dr/Lt<Zn){if(Zn<Et){var ur=dn.charge/Zn;Vt.px-=Hn*ur,Vt.py-=ir*ur}return!0}dn.point&&Zn&&Zn<Et&&(ur=dn.pointCharge/Zn,Vt.px-=Hn*ur,Vt.py-=ir*ur)}return!dn.charge}}function Yt(Vt){Vt.px=r.event.x,Vt.py=r.event.y,Ie.resume()}return Ie.tick=function(){if((Q*=.99)<.005)return D=null,ze.end({type:"end",alpha:Q=0}),!0;var Vt,dn,xn,En,In,Hn,ir,dr,Zn,ur=Bt.length,_r=Ot.length;for(dn=0;dn<_r;++dn)En=(xn=Ot[dn]).source,(Hn=(dr=(In=xn.target).x-En.x)*dr+(Zn=In.y-En.y)*Zn)&&(dr*=Hn=Q*ue[dn]*((Hn=Math.sqrt(Hn))-ie[dn])/Hn,Zn*=Hn,In.x-=dr*(ir=En.weight+In.weight?En.weight/(En.weight+In.weight):.5),In.y-=Zn*ir,En.x+=dr*(ir=1-ir),En.y+=Zn*ir);if((ir=Q*It)&&(dr=He[0]/2,Zn=He[1]/2,dn=-1,ir))for(;++dn<ur;)(xn=Bt[dn]).x+=(dr-xn.x)*ir,xn.y+=(Zn-xn.y)*ir;if(gt)for(to(Vt=r.geom.quadtree(Bt),Q,_e),dn=-1;++dn<ur;)(xn=Bt[dn]).fixed||Vt.visit(Jt(xn));for(dn=-1;++dn<ur;)(xn=Bt[dn]).fixed?(xn.x=xn.px,xn.y=xn.py):(xn.x-=(xn.px-(xn.px=xn.x))*Ye,xn.y-=(xn.py-(xn.py=xn.y))*Ye);ze.tick({type:"tick",alpha:Q})},Ie.nodes=function(Vt){return arguments.length?(Bt=Vt,Ie):Bt},Ie.links=function(Vt){return arguments.length?(Ot=Vt,Ie):Ot},Ie.size=function(Vt){return arguments.length?(He=Vt,Ie):He},Ie.linkDistance=function(Vt){return arguments.length?(nt=typeof Vt=="function"?Vt:+Vt,Ie):nt},Ie.distance=Ie.linkDistance,Ie.linkStrength=function(Vt){return arguments.length?(ft=typeof Vt=="function"?Vt:+Vt,Ie):ft},Ie.friction=function(Vt){return arguments.length?(Ye=+Vt,Ie):Ye},Ie.charge=function(Vt){return arguments.length?(gt=typeof Vt=="function"?Vt:+Vt,Ie):gt},Ie.chargeDistance=function(Vt){return arguments.length?(Et=Vt*Vt,Ie):Math.sqrt(Et)},Ie.gravity=function(Vt){return arguments.length?(It=+Vt,Ie):It},Ie.theta=function(Vt){return arguments.length?(Lt=Vt*Vt,Ie):Math.sqrt(Lt)},Ie.alpha=function(Vt){return arguments.length?(Vt=+Vt,Q?Vt>0?Q=Vt:(D.c=null,D.t=NaN,D=null,ze.end({type:"end",alpha:Q=0})):Vt>0&&(ze.start({type:"start",alpha:Q=Vt}),D=an(Ie.tick)),Ie):Q},Ie.start=function(){var Vt,dn,xn,En=Bt.length,In=Ot.length,Hn=He[0],ir=He[1];for(Vt=0;Vt<En;++Vt)(xn=Bt[Vt]).index=Vt,xn.weight=0;for(Vt=0;Vt<In;++Vt)typeof(xn=Ot[Vt]).source=="number"&&(xn.source=Bt[xn.source]),typeof xn.target=="number"&&(xn.target=Bt[xn.target]),++xn.source.weight,++xn.target.weight;for(Vt=0;Vt<En;++Vt)xn=Bt[Vt],isNaN(xn.x)&&(xn.x=dr("x",Hn)),isNaN(xn.y)&&(xn.y=dr("y",ir)),isNaN(xn.px)&&(xn.px=xn.x),isNaN(xn.py)&&(xn.py=xn.y);if(ie=[],typeof nt=="function")for(Vt=0;Vt<In;++Vt)ie[Vt]=+nt.call(this,Ot[Vt],Vt);else for(Vt=0;Vt<In;++Vt)ie[Vt]=nt;if(ue=[],typeof ft=="function")for(Vt=0;Vt<In;++Vt)ue[Vt]=+ft.call(this,Ot[Vt],Vt);else for(Vt=0;Vt<In;++Vt)ue[Vt]=ft;if(_e=[],typeof gt=="function")for(Vt=0;Vt<En;++Vt)_e[Vt]=+gt.call(this,Bt[Vt],Vt);else for(Vt=0;Vt<En;++Vt)_e[Vt]=gt;function dr(Zn,ur){if(!dn){for(dn=new Array(En),lr=0;lr<En;++lr)dn[lr]=[];for(lr=0;lr<In;++lr){var _r=Ot[lr];dn[_r.source.index].push(_r.target),dn[_r.target.index].push(_r.source)}}for(var Dr,nr=dn[Vt],lr=-1,Ar=nr.length;++lr<Ar;)if(!isNaN(Dr=nr[lr][Zn]))return Dr;return Math.random()*ur}return Ie.resume()},Ie.resume=function(){return Ie.alpha(.1)},Ie.stop=function(){return Ie.alpha(0)},Ie.drag=function(){if(H||(H=r.behavior.drag().origin(I).on("dragstart.force",As).on("drag.force",Yt).on("dragend.force",hs)),!arguments.length)return H;this.on("mouseover.force",Hs).on("mouseout.force",ps).call(H)},r.rebind(Ie,ze,"on")};var Sl=20,Wo=1,Lo=1/0;function Io(D,H){return r.rebind(D,H,"sort","children","value"),D.nodes=D,D.links=Ms,D}function Yo(D,H){for(var Q=[D];(D=Q.pop())!=null;)if(H(D),(ue=D.children)&&(ie=ue.length))for(var ie,ue;--ie>=0;)Q.push(ue[ie])}function Wr(D,H){for(var Q=[D],ie=[];(D=Q.pop())!=null;)if(ie.push(D),(_e=D.children)&&(ue=_e.length))for(var ue,_e,Ie=-1;++Ie<ue;)Q.push(_e[Ie]);for(;(D=ie.pop())!=null;)H(D)}function ks(D){return D.children}function nu(D){return D.value}function ul(D,H){return H.value-D.value}function Ms(D){return r.merge(D.map(function(H){return(H.children||[]).map(function(Q){return{source:H,target:Q}})}))}r.layout.hierarchy=function(){var D=ul,H=ks,Q=nu;function ie(ue){var _e,Ie=[ue],ze=[];for(ue.depth=0;(_e=Ie.pop())!=null;)if(ze.push(_e),(Ye=H.call(ie,_e,_e.depth))&&(He=Ye.length)){for(var He,Ye,nt;--He>=0;)Ie.push(nt=Ye[He]),nt.parent=_e,nt.depth=_e.depth+1;Q&&(_e.value=0),_e.children=Ye}else Q&&(_e.value=+Q.call(ie,_e,_e.depth)||0),delete _e.children;return Wr(ue,function(ft){var gt,Et;D&&(gt=ft.children)&&gt.sort(D),Q&&(Et=ft.parent)&&(Et.value+=ft.value)}),ze}return ie.sort=function(ue){return arguments.length?(D=ue,ie):D},ie.children=function(ue){return arguments.length?(H=ue,ie):H},ie.value=function(ue){return arguments.length?(Q=ue,ie):Q},ie.revalue=function(ue){return Q&&(Yo(ue,function(_e){_e.children&&(_e.value=0)}),Wr(ue,function(_e){var Ie;_e.children||(_e.value=+Q.call(ie,_e,_e.depth)||0),(Ie=_e.parent)&&(Ie.value+=_e.value)})),ue},ie},r.layout.partition=function(){var D=r.layout.hierarchy(),H=[1,1];function Q(_e,Ie,ze,He){var Ye=_e.children;if(_e.x=Ie,_e.y=_e.depth*He,_e.dx=ze,_e.dy=He,Ye&&(nt=Ye.length)){var nt,ft,gt,Et=-1;for(ze=_e.value?ze/_e.value:0;++Et<nt;)Q(ft=Ye[Et],Ie,gt=ft.value*ze,He),Ie+=gt}}function ie(_e){var Ie=_e.children,ze=0;if(Ie&&(He=Ie.length))for(var He,Ye=-1;++Ye<He;)ze=Math.max(ze,ie(Ie[Ye]));return 1+ze}function ue(_e,Ie){var ze=D.call(this,_e,Ie);return Q(ze[0],0,H[0],H[1]/ie(ze[0])),ze}return ue.size=function(_e){return arguments.length?(H=_e,ue):H},Io(ue,D)},r.layout.pie=function(){var D=Number,H=Nl,Q=0,ie=pt,ue=0;function _e(Ie){var ze,He=Ie.length,Ye=Ie.map(function(Jt,Yt){return+D.call(_e,Jt,Yt)}),nt=+(typeof Q=="function"?Q.apply(this,arguments):Q),ft=(typeof ie=="function"?ie.apply(this,arguments):ie)-nt,gt=Math.min(Math.abs(ft)/He,+(typeof ue=="function"?ue.apply(this,arguments):ue)),Et=gt*(ft<0?-1:1),It=r.sum(Ye),Lt=It?(ft-He*Et)/It:0,Bt=r.range(He),Ot=[];return H!=null&&Bt.sort(H===Nl?function(Jt,Yt){return Ye[Yt]-Ye[Jt]}:function(Jt,Yt){return H(Ie[Jt],Ie[Yt])}),Bt.forEach(function(Jt){Ot[Jt]={data:Ie[Jt],value:ze=Ye[Jt],startAngle:nt,endAngle:nt+=ze*Lt+Et,padAngle:gt}}),Ot}return _e.value=function(Ie){return arguments.length?(D=Ie,_e):D},_e.sort=function(Ie){return arguments.length?(H=Ie,_e):H},_e.startAngle=function(Ie){return arguments.length?(Q=Ie,_e):Q},_e.endAngle=function(Ie){return arguments.length?(ie=Ie,_e):ie},_e.padAngle=function(Ie){return arguments.length?(ue=Ie,_e):ue},_e};var Nl={};function ru(D){return D.x}function cl(D){return D.y}function iu(D,H,Q){D.y0=H,D.y=Q}r.layout.stack=function(){var D=I,H=Oo,Q=no,ie=iu,ue=ru,_e=cl;function Ie(ze,He){if(!(gt=ze.length))return ze;var Ye=ze.map(function(Jt,Yt){return D.call(Ie,Jt,Yt)}),nt=Ye.map(function(Jt){return Jt.map(function(Yt,Vt){return[ue.call(Ie,Yt,Vt),_e.call(Ie,Yt,Vt)]})}),ft=H.call(Ie,nt,He);Ye=r.permute(Ye,ft),nt=r.permute(nt,ft);var gt,Et,It,Lt,Bt=Q.call(Ie,nt,He),Ot=Ye[0].length;for(It=0;It<Ot;++It)for(ie.call(Ie,Ye[0][It],Lt=Bt[It],nt[0][It][1]),Et=1;Et<gt;++Et)ie.call(Ie,Ye[Et][It],Lt+=nt[Et-1][It][1],nt[Et][It][1]);return ze}return Ie.values=function(ze){return arguments.length?(D=ze,Ie):D},Ie.order=function(ze){return arguments.length?(H=typeof ze=="function"?ze:Zo.get(ze)||Oo,Ie):H},Ie.offset=function(ze){return arguments.length?(Q=typeof ze=="function"?ze:ds.get(ze)||no,Ie):Q},Ie.x=function(ze){return arguments.length?(ue=ze,Ie):ue},Ie.y=function(ze){return arguments.length?(_e=ze,Ie):_e},Ie.out=function(ze){return arguments.length?(ie=ze,Ie):ie},Ie};var Zo=r.map({"inside-out":function(D){var H,Q,ie=D.length,ue=D.map(Ss),_e=D.map(jl),Ie=r.range(ie).sort(function(ft,gt){return ue[ft]-ue[gt]}),ze=0,He=0,Ye=[],nt=[];for(H=0;H<ie;++H)Q=Ie[H],ze<He?(ze+=_e[Q],Ye.push(Q)):(He+=_e[Q],nt.push(Q));return nt.reverse().concat(Ye)},reverse:function(D){return r.range(D.length).reverse()},default:Oo}),ds=r.map({silhouette:function(D){var H,Q,ie,ue=D.length,_e=D[0].length,Ie=[],ze=0,He=[];for(Q=0;Q<_e;++Q){for(H=0,ie=0;H<ue;H++)ie+=D[H][Q][1];ie>ze&&(ze=ie),Ie.push(ie)}for(Q=0;Q<_e;++Q)He[Q]=(ze-Ie[Q])/2;return He},wiggle:function(D){var H,Q,ie,ue,_e,Ie,ze,He,Ye,nt=D.length,ft=D[0],gt=ft.length,Et=[];for(Et[0]=He=Ye=0,Q=1;Q<gt;++Q){for(H=0,ue=0;H<nt;++H)ue+=D[H][Q][1];for(H=0,_e=0,ze=ft[Q][0]-ft[Q-1][0];H<nt;++H){for(ie=0,Ie=(D[H][Q][1]-D[H][Q-1][1])/(2*ze);ie<H;++ie)Ie+=(D[ie][Q][1]-D[ie][Q-1][1])/ze;_e+=Ie*D[H][Q][1]}Et[Q]=He-=ue?_e/ue*ze:0,He<Ye&&(Ye=He)}for(Q=0;Q<gt;++Q)Et[Q]-=Ye;return Et},expand:function(D){var H,Q,ie,ue=D.length,_e=D[0].length,Ie=1/ue,ze=[];for(Q=0;Q<_e;++Q){for(H=0,ie=0;H<ue;H++)ie+=D[H][Q][1];if(ie)for(H=0;H<ue;H++)D[H][Q][1]/=ie;else for(H=0;H<ue;H++)D[H][Q][1]=Ie}for(Q=0;Q<_e;++Q)ze[Q]=0;return ze},zero:no});function Oo(D){return r.range(D.length)}function no(D){for(var H=-1,Q=D[0].length,ie=[];++H<Q;)ie[H]=0;return ie}function Ss(D){for(var H,Q=1,ie=0,ue=D[0][1],_e=D.length;Q<_e;++Q)(H=D[Q][1])>ue&&(ie=Q,ue=H);return ie}function jl(D){return D.reduce(Gs,0)}function Gs(D,H){return D+H[1]}function fl(D,H){return Ra(D,Math.ceil(Math.log(H.length)/Math.LN2+1))}function Ra(D,H){for(var Q=-1,ie=+D[0],ue=(D[1]-ie)/H,_e=[];++Q<=H;)_e[Q]=ue*Q+ie;return _e}function hl(D){return[r.min(D),r.max(D)]}function Ul(D,H){return D.value-H.value}function Es(D,H){var Q=D._pack_next;D._pack_next=H,H._pack_prev=D,H._pack_next=Q,Q._pack_prev=H}function vs(D,H){D._pack_next=H,H._pack_prev=D}function Cs(D,H){var Q=H.x-D.x,ie=H.y-D.y,ue=D.r+H.r;return .999*ue*ue>Q*Q+ie*ie}function gs(D){if((H=D.children)&&(He=H.length)){var H,Q,ie,ue,_e,Ie,ze,He,Ye=1/0,nt=-1/0,ft=1/0,gt=-1/0;if(H.forEach(ys),(Q=H[0]).x=-Q.r,Q.y=0,Yt(Q),He>1&&((ie=H[1]).x=ie.r,ie.y=0,Yt(ie),He>2))for(oi(Q,ie,ue=H[2]),Yt(ue),Es(Q,ue),Q._pack_prev=ue,Es(ue,ie),ie=Q._pack_next,_e=3;_e<He;_e++){oi(Q,ie,ue=H[_e]);var Et=0,It=1,Lt=1;for(Ie=ie._pack_next;Ie!==ie;Ie=Ie._pack_next,It++)if(Cs(Ie,ue)){Et=1;break}if(Et==1)for(ze=Q._pack_prev;ze!==Ie._pack_prev&&!Cs(ze,ue);ze=ze._pack_prev,Lt++);Et?(It<Lt||It==Lt&&ie.r<Q.r?vs(Q,ie=Ie):vs(Q=ze,ie),_e--):(Es(Q,ue),ie=ue,Yt(ue))}var Bt=(Ye+nt)/2,Ot=(ft+gt)/2,Jt=0;for(_e=0;_e<He;_e++)(ue=H[_e]).x-=Bt,ue.y-=Ot,Jt=Math.max(Jt,ue.r+Math.sqrt(ue.x*ue.x+ue.y*ue.y));D.r=Jt,H.forEach(Ws)}function Yt(Vt){Ye=Math.min(Vt.x-Vt.r,Ye),nt=Math.max(Vt.x+Vt.r,nt),ft=Math.min(Vt.y-Vt.r,ft),gt=Math.max(Vt.y+Vt.r,gt)}}function ys(D){D._pack_next=D._pack_prev=D}function Ws(D){delete D._pack_next,delete D._pack_prev}function pl(D,H,Q,ie){var ue=D.children;if(D.x=H+=ie*D.x,D.y=Q+=ie*D.y,D.r*=ie,ue)for(var _e=-1,Ie=ue.length;++_e<Ie;)pl(ue[_e],H,Q,ie)}function oi(D,H,Q){var ie=D.r+Q.r,ue=H.x-D.x,_e=H.y-D.y;if(ie&&(ue||_e)){var Ie=H.r+Q.r,ze=ue*ue+_e*_e,He=.5+((ie*=ie)-(Ie*=Ie))/(2*ze),Ye=Math.sqrt(Math.max(0,2*Ie*(ie+ze)-(ie-=ze)*ie-Ie*Ie))/(2*ze);Q.x=D.x+He*ue+Ye*_e,Q.y=D.y+He*_e-Ye*ue}else Q.x=D.x+ie,Q.y=D.y}function Xo(D,H){return D.parent==H.parent?1:2}function oa(D){var H=D.children;return H.length?H[0]:D.t}function ro(D){var H,Q=D.children;return(H=Q.length)?Q[H-1]:D.t}function Kr(D,H,Q){var ie=Q/(H.i-D.i);H.c-=ie,H.s+=Q,D.c+=ie,H.z+=Q,H.m+=Q}function ii(D,H,Q){return D.a.parent===H.parent?D.a:Q}function Ba(D){var H=D.children;return H&&H.length?Ba(H[0]):D}function Ds(D){var H,Q=D.children;return Q&&(H=Q.length)?Ds(Q[H-1]):D}function Ys(D){return{x:D.x,y:D.y,dx:D.dx,dy:D.dy}}function dl(D,H){var Q=D.x+H[3],ie=D.y+H[0],ue=D.dx-H[1]-H[3],_e=D.dy-H[0]-H[2];return ue<0&&(Q+=ue/2,ue=0),_e<0&&(ie+=_e/2,_e=0),{x:Q,y:ie,dx:ue,dy:_e}}function Zs(D){var H=D[0],Q=D[D.length-1];return H<Q?[H,Q]:[Q,H]}function Xs(D){return D.rangeExtent?D.rangeExtent():Zs(D.range())}function Ha(D,H,Q,ie){var ue=Q(D[0],D[1]),_e=ie(H[0],H[1]);return function(Ie){return _e(ue(Ie))}}function Jo(D,H){var Q,ie=0,ue=D.length-1,_e=D[ie],Ie=D[ue];return Ie<_e&&(Q=ie,ie=ue,ue=Q,Q=_e,_e=Ie,Ie=Q),D[ie]=H.floor(_e),D[ue]=H.ceil(Ie),D}function Ko(D){return D?{floor:function(H){return Math.floor(H/D)*D},ceil:function(H){return Math.ceil(H/D)*D}}:va}r.layout.histogram=function(){var D=!0,H=Number,Q=hl,ie=fl;function ue(_e,Ie){for(var ze,He,Ye=[],nt=_e.map(H,this),ft=Q.call(this,nt,Ie),gt=ie.call(this,ft,nt,Ie),Et=(Ie=-1,nt.length),It=gt.length-1,Lt=D?1:1/Et;++Ie<It;)(ze=Ye[Ie]=[]).dx=gt[Ie+1]-(ze.x=gt[Ie]),ze.y=0;if(It>0)for(Ie=-1;++Ie<Et;)(He=nt[Ie])>=ft[0]&&He<=ft[1]&&((ze=Ye[r.bisect(gt,He,1,It)-1]).y+=Lt,ze.push(_e[Ie]));return Ye}return ue.value=function(_e){return arguments.length?(H=_e,ue):H},ue.range=function(_e){return arguments.length?(Q=Bn(_e),ue):Q},ue.bins=function(_e){return arguments.length?(ie=typeof _e=="number"?function(Ie){return Ra(Ie,_e)}:Bn(_e),ue):ie},ue.frequency=function(_e){return arguments.length?(D=!!_e,ue):D},ue},r.layout.pack=function(){var D,H=r.layout.hierarchy().sort(Ul),Q=0,ie=[1,1];function ue(_e,Ie){var ze=H.call(this,_e,Ie),He=ze[0],Ye=ie[0],nt=ie[1],ft=D==null?Math.sqrt:typeof D=="function"?D:function(){return D};if(He.x=He.y=0,Wr(He,function(Et){Et.r=+ft(Et.value)}),Wr(He,gs),Q){var gt=Q*(D?1:Math.max(2*He.r/Ye,2*He.r/nt))/2;Wr(He,function(Et){Et.r+=gt}),Wr(He,gs),Wr(He,function(Et){Et.r-=gt})}return pl(He,Ye/2,nt/2,D?1:1/Math.max(2*He.r/Ye,2*He.r/nt)),ze}return ue.size=function(_e){return arguments.length?(ie=_e,ue):ie},ue.radius=function(_e){return arguments.length?(D=_e==null||typeof _e=="function"?_e:+_e,ue):D},ue.padding=function(_e){return arguments.length?(Q=+_e,ue):Q},Io(ue,H)},r.layout.tree=function(){var D=r.layout.hierarchy().sort(null).value(null),H=Xo,Q=[1,1],ie=null;function ue(He,Ye){var nt=D.call(this,He,Ye),ft=nt[0],gt=function(Yt){for(var Vt,dn={A:null,children:[Yt]},xn=[dn];(Vt=xn.pop())!=null;)for(var En,In=Vt.children,Hn=0,ir=In.length;Hn<ir;++Hn)xn.push((In[Hn]=En={_:In[Hn],parent:Vt,children:(En=In[Hn].children)&&En.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Hn}).a=En);return dn.children[0]}(ft);if(Wr(gt,_e),gt.parent.m=-gt.z,Yo(gt,Ie),ie)Yo(ft,ze);else{var Et=ft,It=ft,Lt=ft;Yo(ft,function(Yt){Yt.x<Et.x&&(Et=Yt),Yt.x>It.x&&(It=Yt),Yt.depth>Lt.depth&&(Lt=Yt)});var Bt=H(Et,It)/2-Et.x,Ot=Q[0]/(It.x+H(It,Et)/2+Bt),Jt=Q[1]/(Lt.depth||1);Yo(ft,function(Yt){Yt.x=(Yt.x+Bt)*Ot,Yt.y=Yt.depth*Jt})}return nt}function _e(He){var Ye=He.children,nt=He.parent.children,ft=He.i?nt[He.i-1]:null;if(Ye.length){(function(Et){for(var It,Lt=0,Bt=0,Ot=Et.children,Jt=Ot.length;--Jt>=0;)(It=Ot[Jt]).z+=Lt,It.m+=Lt,Lt+=It.s+(Bt+=It.c)})(He);var gt=(Ye[0].z+Ye[Ye.length-1].z)/2;ft?(He.z=ft.z+H(He._,ft._),He.m=He.z-gt):He.z=gt}else ft&&(He.z=ft.z+H(He._,ft._));He.parent.A=function(Et,It,Lt){if(It){for(var Bt,Ot=Et,Jt=Et,Yt=It,Vt=Ot.parent.children[0],dn=Ot.m,xn=Jt.m,En=Yt.m,In=Vt.m;Yt=ro(Yt),Ot=oa(Ot),Yt&&Ot;)Vt=oa(Vt),(Jt=ro(Jt)).a=Et,(Bt=Yt.z+En-Ot.z-dn+H(Yt._,Ot._))>0&&(Kr(ii(Yt,Et,Lt),Et,Bt),dn+=Bt,xn+=Bt),En+=Yt.m,dn+=Ot.m,In+=Vt.m,xn+=Jt.m;Yt&&!ro(Jt)&&(Jt.t=Yt,Jt.m+=En-xn),Ot&&!oa(Vt)&&(Vt.t=Ot,Vt.m+=dn-In,Lt=Et)}return Lt}(He,ft,He.parent.A||nt[0])}function Ie(He){He._.x=He.z+He.parent.m,He.m+=He.parent.m}function ze(He){He.x*=Q[0],He.y=He.depth*Q[1]}return ue.separation=function(He){return arguments.length?(H=He,ue):H},ue.size=function(He){return arguments.length?(ie=(Q=He)==null?ze:null,ue):ie?null:Q},ue.nodeSize=function(He){return arguments.length?(ie=(Q=He)==null?null:ze,ue):ie?Q:null},Io(ue,D)},r.layout.cluster=function(){var D=r.layout.hierarchy().sort(null).value(null),H=Xo,Q=[1,1],ie=!1;function ue(_e,Ie){var ze,He=D.call(this,_e,Ie),Ye=He[0],nt=0;Wr(Ye,function(Lt){var Bt=Lt.children;Bt&&Bt.length?(Lt.x=function(Ot){return Ot.reduce(function(Jt,Yt){return Jt+Yt.x},0)/Ot.length}(Bt),Lt.y=function(Ot){return 1+r.max(Ot,function(Jt){return Jt.y})}(Bt)):(Lt.x=ze?nt+=H(Lt,ze):0,Lt.y=0,ze=Lt)});var ft=Ba(Ye),gt=Ds(Ye),Et=ft.x-H(ft,gt)/2,It=gt.x+H(gt,ft)/2;return Wr(Ye,ie?function(Lt){Lt.x=(Lt.x-Ye.x)*Q[0],Lt.y=(Ye.y-Lt.y)*Q[1]}:function(Lt){Lt.x=(Lt.x-Et)/(It-Et)*Q[0],Lt.y=(1-(Ye.y?Lt.y/Ye.y:1))*Q[1]}),He}return ue.separation=function(_e){return arguments.length?(H=_e,ue):H},ue.size=function(_e){return arguments.length?(ie=(Q=_e)==null,ue):ie?null:Q},ue.nodeSize=function(_e){return arguments.length?(ie=(Q=_e)!=null,ue):ie?Q:null},Io(ue,D)},r.layout.treemap=function(){var D,H=r.layout.hierarchy(),Q=Math.round,ie=[1,1],ue=null,_e=Ys,Ie=!1,ze="squarify",He=.5*(1+Math.sqrt(5));function Ye(Lt,Bt){for(var Ot,Jt,Yt=-1,Vt=Lt.length;++Yt<Vt;)Jt=(Ot=Lt[Yt]).value*(Bt<0?0:Bt),Ot.area=isNaN(Jt)||Jt<=0?0:Jt}function nt(Lt){var Bt=Lt.children;if(Bt&&Bt.length){var Ot,Jt,Yt,Vt=_e(Lt),dn=[],xn=Bt.slice(),En=1/0,In=ze==="slice"?Vt.dx:ze==="dice"?Vt.dy:ze==="slice-dice"?1&Lt.depth?Vt.dy:Vt.dx:Math.min(Vt.dx,Vt.dy);for(Ye(xn,Vt.dx*Vt.dy/Lt.value),dn.area=0;(Yt=xn.length)>0;)dn.push(Ot=xn[Yt-1]),dn.area+=Ot.area,ze!=="squarify"||(Jt=gt(dn,In))<=En?(xn.pop(),En=Jt):(dn.area-=dn.pop().area,Et(dn,In,Vt,!1),In=Math.min(Vt.dx,Vt.dy),dn.length=dn.area=0,En=1/0);dn.length&&(Et(dn,In,Vt,!0),dn.length=dn.area=0),Bt.forEach(nt)}}function ft(Lt){var Bt=Lt.children;if(Bt&&Bt.length){var Ot,Jt=_e(Lt),Yt=Bt.slice(),Vt=[];for(Ye(Yt,Jt.dx*Jt.dy/Lt.value),Vt.area=0;Ot=Yt.pop();)Vt.push(Ot),Vt.area+=Ot.area,Ot.z!=null&&(Et(Vt,Ot.z?Jt.dx:Jt.dy,Jt,!Yt.length),Vt.length=Vt.area=0);Bt.forEach(ft)}}function gt(Lt,Bt){for(var Ot,Jt=Lt.area,Yt=0,Vt=1/0,dn=-1,xn=Lt.length;++dn<xn;)(Ot=Lt[dn].area)&&(Ot<Vt&&(Vt=Ot),Ot>Yt&&(Yt=Ot));return Bt*=Bt,(Jt*=Jt)?Math.max(Bt*Yt*He/Jt,Jt/(Bt*Vt*He)):1/0}function Et(Lt,Bt,Ot,Jt){var Yt,Vt=-1,dn=Lt.length,xn=Ot.x,En=Ot.y,In=Bt?Q(Lt.area/Bt):0;if(Bt==Ot.dx){for((Jt||In>Ot.dy)&&(In=Ot.dy);++Vt<dn;)(Yt=Lt[Vt]).x=xn,Yt.y=En,Yt.dy=In,xn+=Yt.dx=Math.min(Ot.x+Ot.dx-xn,In?Q(Yt.area/In):0);Yt.z=!0,Yt.dx+=Ot.x+Ot.dx-xn,Ot.y+=In,Ot.dy-=In}else{for((Jt||In>Ot.dx)&&(In=Ot.dx);++Vt<dn;)(Yt=Lt[Vt]).x=xn,Yt.y=En,Yt.dx=In,En+=Yt.dy=Math.min(Ot.y+Ot.dy-En,In?Q(Yt.area/In):0);Yt.z=!1,Yt.dy+=Ot.y+Ot.dy-En,Ot.x+=In,Ot.dx-=In}}function It(Lt){var Bt=D||H(Lt),Ot=Bt[0];return Ot.x=Ot.y=0,Ot.value?(Ot.dx=ie[0],Ot.dy=ie[1]):Ot.dx=Ot.dy=0,D&&H.revalue(Ot),Ye([Ot],Ot.dx*Ot.dy/Ot.value),(D?ft:nt)(Ot),Ie&&(D=Bt),Bt}return It.size=function(Lt){return arguments.length?(ie=Lt,It):ie},It.padding=function(Lt){if(!arguments.length)return ue;function Bt(Jt){return dl(Jt,Lt)}var Ot;return _e=(ue=Lt)==null?Ys:(Ot=typeof Lt)=="function"?function(Jt){var Yt=Lt.call(It,Jt,Jt.depth);return Yt==null?Ys(Jt):dl(Jt,typeof Yt=="number"?[Yt,Yt,Yt,Yt]:Yt)}:(Ot==="number"&&(Lt=[Lt,Lt,Lt,Lt]),Bt),It},It.round=function(Lt){return arguments.length?(Q=Lt?Math.round:Number,It):Q!=Number},It.sticky=function(Lt){return arguments.length?(Ie=Lt,D=null,It):Ie},It.ratio=function(Lt){return arguments.length?(He=Lt,It):He},It.mode=function(Lt){return arguments.length?(ze=Lt+"",It):ze},Io(It,H)},r.random={normal:function(D,H){var Q=arguments.length;return Q<2&&(H=1),Q<1&&(D=0),function(){var ie,ue,_e;do _e=(ie=2*Math.random()-1)*ie+(ue=2*Math.random()-1)*ue;while(!_e||_e>1);return D+H*ie*Math.sqrt(-2*Math.log(_e)/_e)}},logNormal:function(){var D=r.random.normal.apply(r,arguments);return function(){return Math.exp(D())}},bates:function(D){var H=r.random.irwinHall(D);return function(){return H()/D}},irwinHall:function(D){return function(){for(var H=0,Q=0;Q<D;Q++)H+=Math.random();return H}}},r.scale={};var va={floor:I,ceil:I};function Js(D,H,Q,ie){var ue=[],_e=[],Ie=0,ze=Math.min(D.length,H.length)-1;for(D[ze]<D[0]&&(D=D.slice().reverse(),H=H.slice().reverse());++Ie<=ze;)ue.push(Q(D[Ie-1],D[Ie])),_e.push(ie(H[Ie-1],H[Ie]));return function(He){var Ye=r.bisect(D,He,1,ze)-1;return _e[Ye](ue[Ye](He))}}function Ga(D,H,Q,ie){var ue,_e;function Ie(){var He=Math.min(D.length,H.length)>2?Js:Ha,Ye=ie?tu:eu;return ue=He(D,H,Ye,Q),_e=He(H,D,Ye,za),ze}function ze(He){return ue(He)}return ze.invert=function(He){return _e(He)},ze.domain=function(He){return arguments.length?(D=He.map(Number),Ie()):D},ze.range=function(He){return arguments.length?(H=He,Ie()):H},ze.rangeRound=function(He){return ze.range(He).interpolate(Ml)},ze.clamp=function(He){return arguments.length?(ie=He,Ie()):ie},ze.interpolate=function(He){return arguments.length?(Q=He,Ie()):Q},ze.ticks=function(He){return Qi(D,He)},ze.tickFormat=function(He,Ye){return d3_scale_linearTickFormat(D,He,Ye)},ze.nice=function(He){return $i(D,He),Ie()},ze.copy=function(){return Ga(D,H,Q,ie)},Ie()}function Yi(D,H){return r.rebind(D,H,"range","rangeRound","interpolate","clamp")}function $i(D,H){return Jo(D,Ko(hi(D,H)[2])),Jo(D,Ko(hi(D,H)[2])),D}function hi(D,H){H==null&&(H=10);var Q=Zs(D),ie=Q[1]-Q[0],ue=Math.pow(10,Math.floor(Math.log(ie/H)/Math.LN10)),_e=H/ie*ue;return _e<=.15?ue*=10:_e<=.35?ue*=5:_e<=.75&&(ue*=2),Q[0]=Math.ceil(Q[0]/ue)*ue,Q[1]=Math.floor(Q[1]/ue)*ue+.5*ue,Q[2]=ue,Q}function Qi(D,H){return r.range.apply(r,hi(D,H))}function wo(D,H,Q,ie){function ue(ze){return(Q?Math.log(ze<0?0:ze):-Math.log(ze>0?0:-ze))/Math.log(H)}function _e(ze){return Q?Math.pow(H,ze):-Math.pow(H,-ze)}function Ie(ze){return D(ue(ze))}return Ie.invert=function(ze){return _e(D.invert(ze))},Ie.domain=function(ze){return arguments.length?(Q=ze[0]>=0,D.domain((ie=ze.map(Number)).map(ue)),Ie):ie},Ie.base=function(ze){return arguments.length?(H=+ze,D.domain(ie.map(ue)),Ie):H},Ie.nice=function(){var ze=Jo(ie.map(ue),Q?Math:ms);return D.domain(ze),ie=ze.map(_e),Ie},Ie.ticks=function(){var ze=Zs(ie),He=[],Ye=ze[0],nt=ze[1],ft=Math.floor(ue(Ye)),gt=Math.ceil(ue(nt)),Et=H%1?2:H;if(isFinite(gt-ft)){if(Q){for(;ft<gt;ft++)for(var It=1;It<Et;It++)He.push(_e(ft)*It);He.push(_e(ft))}else for(He.push(_e(ft));ft++<gt;)for(It=Et-1;It>0;It--)He.push(_e(ft)*It);for(ft=0;He[ft]<Ye;ft++);for(gt=He.length;He[gt-1]>nt;gt--);He=He.slice(ft,gt)}return He},Ie.copy=function(){return wo(D.copy(),H,Q,ie)},Yi(Ie,D)}r.scale.linear=function(){return Ga([0,1],[0,1],za,!1)},r.scale.log=function(){return wo(r.scale.linear().domain([0,1]),10,!0,[1,10])};var ms={floor:function(D){return-Math.ceil(-D)},ceil:function(D){return-Math.floor(-D)}};function io(D,H,Q){var ie=$o(H),ue=$o(1/H);function _e(Ie){return D(ie(Ie))}return _e.invert=function(Ie){return ue(D.invert(Ie))},_e.domain=function(Ie){return arguments.length?(D.domain((Q=Ie.map(Number)).map(ie)),_e):Q},_e.ticks=function(Ie){return Qi(Q,Ie)},_e.tickFormat=function(Ie,ze){return d3_scale_linearTickFormat(Q,Ie,ze)},_e.nice=function(Ie){return _e.domain($i(Q,Ie))},_e.exponent=function(Ie){return arguments.length?(ie=$o(H=Ie),ue=$o(1/H),D.domain(Q.map(ie)),_e):H},_e.copy=function(){return io(D.copy(),H,Q)},Yi(_e,D)}function $o(D){return function(H){return H<0?-Math.pow(-H,D):Math.pow(H,D)}}function _a(D,H){var Q,ie,ue;function _e(ze){return ie[((Q.get(ze)||(H.t==="range"?Q.set(ze,D.push(ze)):NaN))-1)%ie.length]}function Ie(ze,He){return r.range(D.length).map(function(Ye){return ze+He*Ye})}return _e.domain=function(ze){if(!arguments.length)return D;D=[],Q=new y;for(var He,Ye=-1,nt=ze.length;++Ye<nt;)Q.has(He=ze[Ye])||Q.set(He,D.push(He));return _e[H.t].apply(_e,H.a)},_e.range=function(ze){return arguments.length?(ie=ze,ue=0,H={t:"range",a:arguments},_e):ie},_e.rangePoints=function(ze,He){arguments.length<2&&(He=0);var Ye=ze[0],nt=ze[1],ft=D.length<2?(Ye=(Ye+nt)/2,0):(nt-Ye)/(D.length-1+He);return ie=Ie(Ye+ft*He/2,ft),ue=0,H={t:"rangePoints",a:arguments},_e},_e.rangeRoundPoints=function(ze,He){arguments.length<2&&(He=0);var Ye=ze[0],nt=ze[1],ft=D.length<2?(Ye=nt=Math.round((Ye+nt)/2),0):(nt-Ye)/(D.length-1+He)|0;return ie=Ie(Ye+Math.round(ft*He/2+(nt-Ye-(D.length-1+He)*ft)/2),ft),ue=0,H={t:"rangeRoundPoints",a:arguments},_e},_e.rangeBands=function(ze,He,Ye){arguments.length<2&&(He=0),arguments.length<3&&(Ye=He);var nt=ze[1]<ze[0],ft=ze[nt-0],gt=(ze[1-nt]-ft)/(D.length-He+2*Ye);return ie=Ie(ft+gt*Ye,gt),nt&&ie.reverse(),ue=gt*(1-He),H={t:"rangeBands",a:arguments},_e},_e.rangeRoundBands=function(ze,He,Ye){arguments.length<2&&(He=0),arguments.length<3&&(Ye=He);var nt=ze[1]<ze[0],ft=ze[nt-0],gt=ze[1-nt],Et=Math.floor((gt-ft)/(D.length-He+2*Ye));return ie=Ie(ft+Math.round((gt-ft-(D.length-He)*Et)/2),Et),nt&&ie.reverse(),ue=Math.round(Et*(1-He)),H={t:"rangeRoundBands",a:arguments},_e},_e.rangeBand=function(){return ue},_e.rangeExtent=function(){return Zs(H.a[0])},_e.copy=function(){return _a(D,H)},_e.domain(D)}r.scale.pow=function(){return io(r.scale.linear(),1,[0,1])},r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return _a([],{t:"range",a:[[]]})},r.scale.category10=function(){return r.scale.ordinal().range(xs)},r.scale.category20=function(){return r.scale.ordinal().range(Po)},r.scale.category20b=function(){return r.scale.ordinal().range(Wa)},r.scale.category20c=function(){return r.scale.ordinal().range(Ya)};var xs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Kt),Po=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Kt),Wa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Kt),Ya=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Kt);function pi(D,H){var Q;function ie(){var _e=0,Ie=H.length;for(Q=[];++_e<Ie;)Q[_e-1]=r.quantile(D,_e/Ie);return ue}function ue(_e){if(!isNaN(_e=+_e))return H[r.bisect(Q,_e)]}return ue.domain=function(_e){return arguments.length?(D=_e.map(p).filter(f).sort(u),ie()):D},ue.range=function(_e){return arguments.length?(H=_e,ie()):H},ue.quantiles=function(){return Q},ue.invertExtent=function(_e){return(_e=H.indexOf(_e))<0?[NaN,NaN]:[_e>0?Q[_e-1]:D[0],_e<Q.length?Q[_e]:D[D.length-1]]},ue.copy=function(){return pi(D,H)},ie()}function ao(D,H,Q){var ie,ue;function _e(ze){return Q[Math.max(0,Math.min(ue,Math.floor(ie*(ze-D))))]}function Ie(){return ie=Q.length/(H-D),ue=Q.length-1,_e}return _e.domain=function(ze){return arguments.length?(D=+ze[0],H=+ze[ze.length-1],Ie()):[D,H]},_e.range=function(ze){return arguments.length?(Q=ze,Ie()):Q},_e.invertExtent=function(ze){return[ze=(ze=Q.indexOf(ze))<0?NaN:ze/ie+D,ze+1/ie]},_e.copy=function(){return ao(D,H,Q)},Ie()}function Sr(D,H){function Q(ie){if(ie<=ie)return H[r.bisect(D,ie)]}return Q.domain=function(ie){return arguments.length?(D=ie,Q):D},Q.range=function(ie){return arguments.length?(H=ie,Q):H},Q.invertExtent=function(ie){return ie=H.indexOf(ie),[D[ie-1],D[ie]]},Q.copy=function(){return Sr(D,H)},Q}function Ks(D){function H(Q){return+Q}return H.invert=H,H.domain=H.range=function(Q){return arguments.length?(D=Q.map(H),H):D},H.ticks=function(Q){return Qi(D,Q)},H.tickFormat=function(Q,ie){return d3_scale_linearTickFormat(D,Q,ie)},H.copy=function(){return Ks(D)},H}function El(){return 0}r.scale.quantile=function(){return pi([],[])},r.scale.quantize=function(){return ao(0,1,[0,1])},r.scale.threshold=function(){return Sr([.5],[0,1])},r.scale.identity=function(){return Ks([0,1])},r.svg={},r.svg.arc=function(){var D=es,H=bs,Q=El,ie=Qo,ue=Ls,_e=br,Ie=$s;function ze(){var Ye=Math.max(0,+D.apply(this,arguments)),nt=Math.max(0,+H.apply(this,arguments)),ft=ue.apply(this,arguments)-We,gt=_e.apply(this,arguments)-We,Et=Math.abs(gt-ft),It=ft>gt?0:1;if(nt<Ye&&(Lt=nt,nt=Ye,Ye=Lt),Et>=vt)return He(nt,It)+(Ye?He(Ye,1-It):"")+"Z";var Lt,Bt,Ot,Jt,Yt,Vt,dn,xn,En,In,Hn,ir,dr=0,Zn=0,ur=[];if((Jt=(+Ie.apply(this,arguments)||0)/2)&&(Ot=ie===Qo?Math.sqrt(Ye*Ye+nt*nt):+ie.apply(this,arguments),It||(Zn*=-1),nt&&(Zn=Xe(Ot/nt*Math.sin(Jt))),Ye&&(dr=Xe(Ot/Ye*Math.sin(Jt)))),nt){Yt=nt*Math.cos(ft+Zn),Vt=nt*Math.sin(ft+Zn),dn=nt*Math.cos(gt-Zn),xn=nt*Math.sin(gt-Zn);var _r=Math.abs(gt-ft-2*Zn)<=zt?0:1;if(Zn&&Fo(Yt,Vt,dn,xn)===It^_r){var Dr=(ft+gt)/2;Yt=nt*Math.cos(Dr),Vt=nt*Math.sin(Dr),dn=xn=null}}else Yt=Vt=0;if(Ye){En=Ye*Math.cos(gt-dr),In=Ye*Math.sin(gt-dr),Hn=Ye*Math.cos(ft+dr),ir=Ye*Math.sin(ft+dr);var nr=Math.abs(ft-gt+2*dr)<=zt?0:1;if(dr&&Fo(En,In,Hn,ir)===1-It^nr){var lr=(ft+gt)/2;En=Ye*Math.cos(lr),In=Ye*Math.sin(lr),Hn=ir=null}}else En=In=0;if(Et>Qe&&(Lt=Math.min(Math.abs(nt-Ye)/2,+Q.apply(this,arguments)))>.001){Bt=Ye<nt^It?0:1;var Ar=Lt,vr=Lt;if(Et<zt){var Er=Hn==null?[En,In]:dn==null?[Yt,Vt]:Pt([Yt,Vt],[Hn,ir],[dn,xn],[En,In]),Or=Yt-Er[0],Ur=Vt-Er[1],Vr=dn-Er[0],Gr=xn-Er[1],Zr=1/Math.sin(Math.acos((Or*Vr+Ur*Gr)/(Math.sqrt(Or*Or+Ur*Ur)*Math.sqrt(Vr*Vr+Gr*Gr)))/2),vi=Math.sqrt(Er[0]*Er[0]+Er[1]*Er[1]);vr=Math.min(Lt,(Ye-vi)/(Zr-1)),Ar=Math.min(Lt,(nt-vi)/(Zr+1))}if(dn!=null){var Li=Zi(Hn==null?[En,In]:[Hn,ir],[Yt,Vt],nt,Ar,It),ya=Zi([dn,xn],[En,In],nt,Ar,It);Lt===Ar?ur.push("M",Li[0],"A",Ar,",",Ar," 0 0,",Bt," ",Li[1],"A",nt,",",nt," 0 ",1-It^Fo(Li[1][0],Li[1][1],ya[1][0],ya[1][1]),",",It," ",ya[1],"A",Ar,",",Ar," 0 0,",Bt," ",ya[0]):ur.push("M",Li[0],"A",Ar,",",Ar," 0 1,",Bt," ",ya[0])}else ur.push("M",Yt,",",Vt);if(Hn!=null){var Xi=Zi([Yt,Vt],[Hn,ir],Ye,-vr,It),sa=Zi([En,In],dn==null?[Yt,Vt]:[dn,xn],Ye,-vr,It);Lt===vr?ur.push("L",sa[0],"A",vr,",",vr," 0 0,",Bt," ",sa[1],"A",Ye,",",Ye," 0 ",It^Fo(sa[1][0],sa[1][1],Xi[1][0],Xi[1][1]),",",1-It," ",Xi[1],"A",vr,",",vr," 0 0,",Bt," ",Xi[0]):ur.push("L",sa[0],"A",vr,",",vr," 0 0,",Bt," ",Xi[0])}else ur.push("L",En,",",In)}else ur.push("M",Yt,",",Vt),dn!=null&&ur.push("A",nt,",",nt," 0 ",_r,",",It," ",dn,",",xn),ur.push("L",En,",",In),Hn!=null&&ur.push("A",Ye,",",Ye," 0 ",nr,",",1-It," ",Hn,",",ir);return ur.push("Z"),ur.join("")}function He(Ye,nt){return"M0,"+Ye+"A"+Ye+","+Ye+" 0 1,"+nt+" 0,"+-Ye+"A"+Ye+","+Ye+" 0 1,"+nt+" 0,"+Ye}return ze.innerRadius=function(Ye){return arguments.length?(D=Bn(Ye),ze):D},ze.outerRadius=function(Ye){return arguments.length?(H=Bn(Ye),ze):H},ze.cornerRadius=function(Ye){return arguments.length?(Q=Bn(Ye),ze):Q},ze.padRadius=function(Ye){return arguments.length?(ie=Ye==Qo?Qo:Bn(Ye),ze):ie},ze.startAngle=function(Ye){return arguments.length?(ue=Bn(Ye),ze):ue},ze.endAngle=function(Ye){return arguments.length?(_e=Bn(Ye),ze):_e},ze.padAngle=function(Ye){return arguments.length?(Ie=Bn(Ye),ze):Ie},ze.centroid=function(){var Ye=(+D.apply(this,arguments)+ +H.apply(this,arguments))/2,nt=(+ue.apply(this,arguments)+ +_e.apply(this,arguments))/2-We;return[Math.cos(nt)*Ye,Math.sin(nt)*Ye]},ze};var Qo="auto";function es(D){return D.innerRadius}function bs(D){return D.outerRadius}function Ls(D){return D.startAngle}function br(D){return D.endAngle}function $s(D){return D&&D.padAngle}function Fo(D,H,Q,ie){return(D-Q)*H-(H-ie)*D>0?0:1}function Zi(D,H,Q,ie,ue){var _e=D[0]-H[0],Ie=D[1]-H[1],ze=(ue?ie:-ie)/Math.sqrt(_e*_e+Ie*Ie),He=ze*Ie,Ye=-ze*_e,nt=D[0]+He,ft=D[1]+Ye,gt=H[0]+He,Et=H[1]+Ye,It=(nt+gt)/2,Lt=(ft+Et)/2,Bt=gt-nt,Ot=Et-ft,Jt=Bt*Bt+Ot*Ot,Yt=Q-ie,Vt=nt*Et-gt*ft,dn=(Ot<0?-1:1)*Math.sqrt(Math.max(0,Yt*Yt*Jt-Vt*Vt)),xn=(Vt*Ot-Bt*dn)/Jt,En=(-Vt*Bt-Ot*dn)/Jt,In=(Vt*Ot+Bt*dn)/Jt,Hn=(-Vt*Bt+Ot*dn)/Jt,ir=xn-It,dr=En-Lt,Zn=In-It,ur=Hn-Lt;return ir*ir+dr*dr>Zn*Zn+ur*ur&&(xn=In,En=Hn),[[xn-He,En-Ye],[xn*Q/Yt,En*Q/Yt]]}function ts(){return!0}function oo(D){var H=Vn,Q=Un,ie=ts,ue=ga,_e=ue.key,Ie=.7;function ze(He){var Ye,nt=[],ft=[],gt=-1,Et=He.length,It=Bn(H),Lt=Bn(Q);function Bt(){nt.push("M",ue(D(ft),Ie))}for(;++gt<Et;)ie.call(this,Ye=He[gt],gt)?ft.push([+It.call(this,Ye,gt),+Lt.call(this,Ye,gt)]):ft.length&&(Bt(),ft=[]);return ft.length&&Bt(),nt.length?nt.join(""):null}return ze.x=function(He){return arguments.length?(H=He,ze):H},ze.y=function(He){return arguments.length?(Q=He,ze):Q},ze.defined=function(He){return arguments.length?(ie=He,ze):ie},ze.interpolate=function(He){return arguments.length?(_e=typeof He=="function"?ue=He:(ue=Za.get(He)||ga).key,ze):_e},ze.tension=function(He){return arguments.length?(Ie=He,ze):Ie},ze}r.svg.line=function(){return oo(I)};var Za=r.map({linear:ga,"linear-closed":To,step:function(D){for(var H=0,Q=D.length,ie=D[0],ue=[ie[0],",",ie[1]];++H<Q;)ue.push("H",(ie[0]+(ie=D[H])[0])/2,"V",ie[1]);return Q>1&&ue.push("H",ie[0]),ue.join("")},"step-before":Xa,"step-after":zo,basis:Xr,"basis-open":function(D){if(D.length<4)return ga(D);for(var H,Q=[],ie=-1,ue=D.length,_e=[0],Ie=[0];++ie<3;)H=D[ie],_e.push(H[0]),Ie.push(H[1]);for(Q.push(ea(Ta,_e)+","+ea(Ta,Ie)),--ie;++ie<ue;)H=D[ie],_e.shift(),_e.push(H[0]),Ie.shift(),Ie.push(H[1]),Is(Q,_e,Ie);return Q.join("")},"basis-closed":function(D){for(var H,Q,ie=-1,ue=D.length,_e=ue+4,Ie=[],ze=[];++ie<4;)Q=D[ie%ue],Ie.push(Q[0]),ze.push(Q[1]);for(H=[ea(Ta,Ie),",",ea(Ta,ze)],--ie;++ie<_e;)Q=D[ie%ue],Ie.shift(),Ie.push(Q[0]),ze.shift(),ze.push(Q[1]),Is(H,Ie,ze);return H.join("")},bundle:function(D,H){var Q=D.length-1;if(Q)for(var ie,ue,_e=D[0][0],Ie=D[0][1],ze=D[Q][0]-_e,He=D[Q][1]-Ie,Ye=-1;++Ye<=Q;)ue=Ye/Q,(ie=D[Ye])[0]=H*ie[0]+(1-H)*(_e+ue*ze),ie[1]=H*ie[1]+(1-H)*(Ie+ue*He);return Xr(D)},cardinal:function(D,H){return D.length<3?ga(D):D[0]+Qs(D,ns(D,H))},"cardinal-open":function(D,H){return D.length<4?ga(D):D[1]+Qs(D.slice(1,-1),ns(D,H))},"cardinal-closed":function(D,H){return D.length<3?To(D):D[0]+Qs((D.push(D[0]),D),ns([D[D.length-2]].concat(D,[D[1]]),H))},monotone:function(D){return D.length<3?ga(D):D[0]+Qs(D,function(H){for(var Q,ie,ue,_e,Ie=[],ze=function(nt){for(var ft=0,gt=nt.length-1,Et=[],It=nt[0],Lt=nt[1],Bt=Et[0]=Os(It,Lt);++ft<gt;)Et[ft]=(Bt+(Bt=Os(It=Lt,Lt=nt[ft+1])))/2;return Et[ft]=Bt,Et}(H),He=-1,Ye=H.length-1;++He<Ye;)Q=Os(H[He],H[He+1]),v(Q)<Qe?ze[He]=ze[He+1]=0:(_e=(ie=ze[He]/Q)*ie+(ue=ze[He+1]/Q)*ue)>9&&(_e=3*Q/Math.sqrt(_e),ze[He]=_e*ie,ze[He+1]=_e*ue);for(He=-1;++He<=Ye;)_e=(H[Math.min(Ye,He+1)][0]-H[Math.max(0,He-1)][0])/(6*(1+ze[He]*ze[He])),Ie.push([_e||0,ze[He]*_e||0]);return Ie}(D))}});function ga(D){return D.length>1?D.join("L"):D+"Z"}function To(D){return D.join("L")+"Z"}function Xa(D){for(var H=0,Q=D.length,ie=D[0],ue=[ie[0],",",ie[1]];++H<Q;)ue.push("V",(ie=D[H])[1],"H",ie[0]);return ue.join("")}function zo(D){for(var H=0,Q=D.length,ie=D[0],ue=[ie[0],",",ie[1]];++H<Q;)ue.push("H",(ie=D[H])[0],"V",ie[1]);return ue.join("")}function Qs(D,H){if(H.length<1||D.length!=H.length&&D.length!=H.length+2)return ga(D);var Q=D.length!=H.length,ie="",ue=D[0],_e=D[1],Ie=H[0],ze=Ie,He=1;if(Q&&(ie+="Q"+(_e[0]-2*Ie[0]/3)+","+(_e[1]-2*Ie[1]/3)+","+_e[0]+","+_e[1],ue=D[1],He=2),H.length>1){ze=H[1],_e=D[He],He++,ie+="C"+(ue[0]+Ie[0])+","+(ue[1]+Ie[1])+","+(_e[0]-ze[0])+","+(_e[1]-ze[1])+","+_e[0]+","+_e[1];for(var Ye=2;Ye<H.length;Ye++,He++)_e=D[He],ze=H[Ye],ie+="S"+(_e[0]-ze[0])+","+(_e[1]-ze[1])+","+_e[0]+","+_e[1]}if(Q){var nt=D[He];ie+="Q"+(_e[0]+2*ze[0]/3)+","+(_e[1]+2*ze[1]/3)+","+nt[0]+","+nt[1]}return ie}function ns(D,H){for(var Q,ie=[],ue=(1-H)/2,_e=D[0],Ie=D[1],ze=1,He=D.length;++ze<He;)Q=_e,_e=Ie,Ie=D[ze],ie.push([ue*(Ie[0]-Q[0]),ue*(Ie[1]-Q[1])]);return ie}function Xr(D){if(D.length<3)return ga(D);var H=1,Q=D.length,ie=D[0],ue=ie[0],_e=ie[1],Ie=[ue,ue,ue,(ie=D[1])[0]],ze=[_e,_e,_e,ie[1]],He=[ue,",",_e,"L",ea(Ta,Ie),",",ea(Ta,ze)];for(D.push(D[Q-1]);++H<=Q;)ie=D[H],Ie.shift(),Ie.push(ie[0]),ze.shift(),ze.push(ie[1]),Is(He,Ie,ze);return D.pop(),He.push("L",ie),He.join("")}function ea(D,H){return D[0]*H[0]+D[1]*H[1]+D[2]*H[2]+D[3]*H[3]}Za.forEach(function(D,H){H.key=D,H.closed=/-closed$/.test(D)});var wa=[0,2/3,1/3,0],Ao=[0,1/3,2/3,0],Ta=[0,1/6,2/3,1/6];function Is(D,H,Q){D.push("C",ea(wa,H),",",ea(wa,Q),",",ea(Ao,H),",",ea(Ao,Q),",",ea(Ta,H),",",ea(Ta,Q))}function Os(D,H){return(H[1]-D[1])/(H[0]-D[0])}function Aa(D){for(var H,Q,ie,ue=-1,_e=D.length;++ue<_e;)Q=(H=D[ue])[0],ie=H[1]-We,H[0]=Q*Math.cos(ie),H[1]=Q*Math.sin(ie);return D}function Yr(D){var H=Vn,Q=Vn,ie=0,ue=Un,_e=ts,Ie=ga,ze=Ie.key,He=Ie,Ye="L",nt=.7;function ft(gt){var Et,It,Lt,Bt=[],Ot=[],Jt=[],Yt=-1,Vt=gt.length,dn=Bn(H),xn=Bn(ie),En=H===Q?function(){return It}:Bn(Q),In=ie===ue?function(){return Lt}:Bn(ue);function Hn(){Bt.push("M",Ie(D(Jt),nt),Ye,He(D(Ot.reverse()),nt),"Z")}for(;++Yt<Vt;)_e.call(this,Et=gt[Yt],Yt)?(Ot.push([It=+dn.call(this,Et,Yt),Lt=+xn.call(this,Et,Yt)]),Jt.push([+En.call(this,Et,Yt),+In.call(this,Et,Yt)])):Ot.length&&(Hn(),Ot=[],Jt=[]);return Ot.length&&Hn(),Bt.length?Bt.join(""):null}return ft.x=function(gt){return arguments.length?(H=Q=gt,ft):Q},ft.x0=function(gt){return arguments.length?(H=gt,ft):H},ft.x1=function(gt){return arguments.length?(Q=gt,ft):Q},ft.y=function(gt){return arguments.length?(ie=ue=gt,ft):ue},ft.y0=function(gt){return arguments.length?(ie=gt,ft):ie},ft.y1=function(gt){return arguments.length?(ue=gt,ft):ue},ft.defined=function(gt){return arguments.length?(_e=gt,ft):_e},ft.interpolate=function(gt){return arguments.length?(ze=typeof gt=="function"?Ie=gt:(Ie=Za.get(gt)||ga).key,He=Ie.reverse||Ie,Ye=Ie.closed?"M":"L",ft):ze},ft.tension=function(gt){return arguments.length?(nt=gt,ft):nt},ft}function ko(D){return D.source}function _s(D){return D.target}function so(D){return D.radius}function Ps(D){return[D.x,D.y]}function Fs(){return 64}function lo(){return"circle"}function di(D){var H=Math.sqrt(D/zt);return"M0,"+H+"A"+H+","+H+" 0 1,1 0,"+-H+"A"+H+","+H+" 0 1,1 0,"+H+"Z"}r.svg.line.radial=function(){var D=oo(Aa);return D.radius=D.x,delete D.x,D.angle=D.y,delete D.y,D},Xa.reverse=zo,zo.reverse=Xa,r.svg.area=function(){return Yr(I)},r.svg.area.radial=function(){var D=Yr(Aa);return D.radius=D.x,delete D.x,D.innerRadius=D.x0,delete D.x0,D.outerRadius=D.x1,delete D.x1,D.angle=D.y,delete D.y,D.startAngle=D.y0,delete D.y0,D.endAngle=D.y1,delete D.y1,D},r.svg.chord=function(){var D=ko,H=_s,Q=so,ie=Ls,ue=br;function _e(Ye,nt){var ft,gt,Et=Ie(this,D,Ye,nt),It=Ie(this,H,Ye,nt);return"M"+Et.p0+ze(Et.r,Et.p1,Et.a1-Et.a0)+(gt=It,((ft=Et).a0==gt.a0&&ft.a1==gt.a1?He(Et.r,Et.p1,Et.r,Et.p0):He(Et.r,Et.p1,It.r,It.p0)+ze(It.r,It.p1,It.a1-It.a0)+He(It.r,It.p1,Et.r,Et.p0))+"Z")}function Ie(Ye,nt,ft,gt){var Et=nt.call(Ye,ft,gt),It=Q.call(Ye,Et,gt),Lt=ie.call(Ye,Et,gt)-We,Bt=ue.call(Ye,Et,gt)-We;return{r:It,a0:Lt,a1:Bt,p0:[It*Math.cos(Lt),It*Math.sin(Lt)],p1:[It*Math.cos(Bt),It*Math.sin(Bt)]}}function ze(Ye,nt,ft){return"A"+Ye+","+Ye+" 0 "+ +(ft>zt)+",1 "+nt}function He(Ye,nt,ft,gt){return"Q 0,0 "+gt}return _e.radius=function(Ye){return arguments.length?(Q=Bn(Ye),_e):Q},_e.source=function(Ye){return arguments.length?(D=Bn(Ye),_e):D},_e.target=function(Ye){return arguments.length?(H=Bn(Ye),_e):H},_e.startAngle=function(Ye){return arguments.length?(ie=Bn(Ye),_e):ie},_e.endAngle=function(Ye){return arguments.length?(ue=Bn(Ye),_e):ue},_e},r.svg.diagonal=function(){var D=ko,H=_s,Q=Ps;function ie(ue,_e){var Ie=D.call(this,ue,_e),ze=H.call(this,ue,_e),He=(Ie.y+ze.y)/2,Ye=[Ie,{x:Ie.x,y:He},{x:ze.x,y:He},ze];return"M"+(Ye=Ye.map(Q))[0]+"C"+Ye[1]+" "+Ye[2]+" "+Ye[3]}return ie.source=function(ue){return arguments.length?(D=Bn(ue),ie):D},ie.target=function(ue){return arguments.length?(H=Bn(ue),ie):H},ie.projection=function(ue){return arguments.length?(Q=ue,ie):Q},ie},r.svg.diagonal.radial=function(){var D=r.svg.diagonal(),H=Ps,Q=D.projection;return D.projection=function(ie){return arguments.length?Q(function(ue){return function(){var _e=ue.apply(this,arguments),Ie=_e[0],ze=_e[1]-We;return[Ie*Math.cos(ze),Ie*Math.sin(ze)]}}(H=ie)):H},D},r.svg.symbol=function(){var D=lo,H=Fs;function Q(ie,ue){return(ws.get(D.call(this,ie,ue))||di)(H.call(this,ie,ue))}return Q.type=function(ie){return arguments.length?(D=Bn(ie),Q):D},Q.size=function(ie){return arguments.length?(H=Bn(ie),Q):H},Q};var ws=r.map({circle:di,cross:function(D){var H=Math.sqrt(D/5)/2;return"M"+-3*H+","+-H+"H"+-H+"V"+-3*H+"H"+H+"V"+-H+"H"+3*H+"V"+H+"H"+H+"V"+3*H+"H"+-H+"V"+H+"H"+-3*H+"Z"},diamond:function(D){var H=Math.sqrt(D/(2*Fr)),Q=H*Fr;return"M0,"+-H+"L"+Q+",0 0,"+H+" "+-Q+",0Z"},square:function(D){var H=Math.sqrt(D)/2;return"M"+-H+","+-H+"L"+H+","+-H+" "+H+","+H+" "+-H+","+H+"Z"},"triangle-down":function(D){var H=Math.sqrt(D/Cr),Q=H*Cr/2;return"M0,"+Q+"L"+H+","+-Q+" "+-H+","+-Q+"Z"},"triangle-up":function(D){var H=Math.sqrt(D/Cr),Q=H*Cr/2;return"M0,"+-Q+"L"+H+","+Q+" "+-H+","+Q+"Z"}});r.svg.symbolTypes=ws.keys();var Cr=Math.sqrt(3),Fr=Math.tan(30*Ze);ye.transition=function(D){for(var H,Q,ie=zi||++Vl,ue=xi(D),_e=[],Ie=So||{time:Date.now(),ease:xo,delay:0,duration:250},ze=-1,He=this.length;++ze<He;){_e.push(H=[]);for(var Ye=this[ze],nt=-1,ft=Ye.length;++nt<ft;)(Q=Ye[nt])&&La(Q,nt,ue,ie,Ie),H.push(Q)}return Ro(_e,ue,ie)},ye.interrupt=function(D){return this.each(D==null?Na:Mo(xi(D)))};var Na=Mo(xi());function Mo(D){return function(){var H,Q,ie;(H=this[D])&&(ie=H[Q=H.active])&&(ie.timer.c=null,ie.timer.t=NaN,--H.count?delete H[Q]:delete this[D],H.active+=.5,ie.event&&ie.event.interrupt.call(this,this.__data__,ie.index))}}function Ro(D,H,Q){return Z(D,si),D.namespace=H,D.id=Q,D}var zi,So,si=[],Vl=0;function ja(D,H,Q,ie){var ue=D.id,_e=D.namespace;return we(D,typeof Q=="function"?function(Ie,ze,He){Ie[_e][ue].tween.set(H,ie(Q.call(Ie,Ie.__data__,ze,He)))}:(Q=ie(Q),function(Ie){Ie[_e][ue].tween.set(H,Q)}))}function ci(D){return D==null&&(D=""),function(){this.textContent=D}}function xi(D){return D==null?"__transition__":"__transition_"+D+"__"}function La(D,H,Q,ie,ue){var _e,Ie,ze,He,Ye,nt=D[Q]||(D[Q]={active:0,count:0}),ft=nt[ie];function gt(It){var Lt=nt.active,Bt=nt[Lt];for(var Ot in Bt&&(Bt.timer.c=null,Bt.timer.t=NaN,--nt.count,delete nt[Lt],Bt.event&&Bt.event.interrupt.call(D,D.__data__,Bt.index)),nt)if(+Ot<ie){var Jt=nt[Ot];Jt.timer.c=null,Jt.timer.t=NaN,--nt.count,delete nt[Ot]}Ie.c=Et,an(function(){return Ie.c&&Et(It||1)&&(Ie.c=null,Ie.t=NaN),1},0,_e),nt.active=ie,ft.event&&ft.event.start.call(D,D.__data__,H),Ye=[],ft.tween.forEach(function(Yt,Vt){(Vt=Vt.call(D,D.__data__,H))&&Ye.push(Vt)}),He=ft.ease,ze=ft.duration}function Et(It){for(var Lt=It/ze,Bt=He(Lt),Ot=Ye.length;Ot>0;)Ye[--Ot].call(D,Bt);if(Lt>=1)return ft.event&&ft.event.end.call(D,D.__data__,H),--nt.count?delete nt[ie]:delete D[Q],1}ft||(_e=ue.time,Ie=an(function(It){var Lt=ft.delay;if(Ie.t=Lt+_e,Lt<=It)return gt(It-Lt);Ie.c=gt},0,_e),ft=nt[ie]={tween:new y,time:_e,timer:Ie,delay:ue.delay,duration:ue.duration,ease:ue.ease,index:H},ue=null,++nt.count)}si.call=ye.call,si.empty=ye.empty,si.node=ye.node,si.size=ye.size,r.transition=function(D,H){return D&&D.transition?zi?D.transition(H):D:r.selection().transition(D)},r.transition.prototype=si,si.select=function(D){var H,Q,ie,ue=this.id,_e=this.namespace,Ie=[];D=me(D);for(var ze=-1,He=this.length;++ze<He;){Ie.push(H=[]);for(var Ye=this[ze],nt=-1,ft=Ye.length;++nt<ft;)(ie=Ye[nt])&&(Q=D.call(ie,ie.__data__,nt,ze))?("__data__"in ie&&(Q.__data__=ie.__data__),La(Q,nt,_e,ue,ie[_e][ue]),H.push(Q)):H.push(null)}return Ro(Ie,_e,ue)},si.selectAll=function(D){var H,Q,ie,ue,_e,Ie=this.id,ze=this.namespace,He=[];D=fe(D);for(var Ye=-1,nt=this.length;++Ye<nt;)for(var ft=this[Ye],gt=-1,Et=ft.length;++gt<Et;)if(ie=ft[gt]){_e=ie[ze][Ie],Q=D.call(ie,ie.__data__,gt,Ye),He.push(H=[]);for(var It=-1,Lt=Q.length;++It<Lt;)(ue=Q[It])&&La(ue,It,ze,Ie,_e),H.push(ue)}return Ro(He,ze,Ie)},si.filter=function(D){var H,Q,ie=[];typeof D!="function"&&(D=De(D));for(var ue=0,_e=this.length;ue<_e;ue++){ie.push(H=[]);for(var Ie,ze=0,He=(Ie=this[ue]).length;ze<He;ze++)(Q=Ie[ze])&&D.call(Q,Q.__data__,ze,ue)&&H.push(Q)}return Ro(ie,this.namespace,this.id)},si.tween=function(D,H){var Q=this.id,ie=this.namespace;return arguments.length<2?this.node()[ie][Q].tween.get(D):we(this,H==null?function(ue){ue[ie][Q].tween.remove(D)}:function(ue){ue[ie][Q].tween.set(D,H)})},si.attr=function(D,H){if(arguments.length<2){for(H in D)this.attr(H,D[H]);return this}var Q=D=="transform"?Bl:za,ie=r.ns.qualify(D);function ue(){this.removeAttribute(ie)}function _e(){this.removeAttributeNS(ie.space,ie.local)}return ja(this,"attr."+D,H,ie.local?function(Ie){return Ie==null?_e:(Ie+="",function(){var ze,He=this.getAttributeNS(ie.space,ie.local);return He!==Ie&&(ze=Q(He,Ie),function(Ye){this.setAttributeNS(ie.space,ie.local,ze(Ye))})})}:function(Ie){return Ie==null?ue:(Ie+="",function(){var ze,He=this.getAttribute(ie);return He!==Ie&&(ze=Q(He,Ie),function(Ye){this.setAttribute(ie,ze(Ye))})})})},si.attrTween=function(D,H){var Q=r.ns.qualify(D);return this.tween("attr."+D,Q.local?function(ie,ue){var _e=H.call(this,ie,ue,this.getAttributeNS(Q.space,Q.local));return _e&&function(Ie){this.setAttributeNS(Q.space,Q.local,_e(Ie))}}:function(ie,ue){var _e=H.call(this,ie,ue,this.getAttribute(Q));return _e&&function(Ie){this.setAttribute(Q,_e(Ie))}})},si.style=function(D,H,Q){var ie=arguments.length;if(ie<3){if(typeof D!="string"){for(Q in ie<2&&(H=""),D)this.style(Q,D[Q],H);return this}Q=""}function ue(){this.style.removeProperty(D)}return ja(this,"style."+D,H,function(_e){return _e==null?ue:(_e+="",function(){var Ie,ze=t(this).getComputedStyle(this,null).getPropertyValue(D);return ze!==_e&&(Ie=za(ze,_e),function(He){this.style.setProperty(D,Ie(He),Q)})})})},si.styleTween=function(D,H,Q){return arguments.length<3&&(Q=""),this.tween("style."+D,function(ie,ue){var _e=H.call(this,ie,ue,t(this).getComputedStyle(this,null).getPropertyValue(D));return _e&&function(Ie){this.style.setProperty(D,_e(Ie),Q)}})},si.text=function(D){return ja(this,"text",D,ci)},si.remove=function(){var D=this.namespace;return this.each("end.transition",function(){var H;this[D].count<2&&(H=this.parentNode)&&H.removeChild(this)})},si.ease=function(D){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].ease:(typeof D!="function"&&(D=r.ease.apply(r,arguments)),we(this,function(ie){ie[Q][H].ease=D}))},si.delay=function(D){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].delay:we(this,typeof D=="function"?function(ie,ue,_e){ie[Q][H].delay=+D.call(ie,ie.__data__,ue,_e)}:(D=+D,function(ie){ie[Q][H].delay=D}))},si.duration=function(D){var H=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][H].duration:we(this,typeof D=="function"?function(ie,ue,_e){ie[Q][H].duration=Math.max(1,D.call(ie,ie.__data__,ue,_e))}:(D=Math.max(1,D),function(ie){ie[Q][H].duration=D}))},si.each=function(D,H){var Q=this.id,ie=this.namespace;if(arguments.length<2){var ue=So,_e=zi;try{zi=Q,we(this,function(Ie,ze,He){So=Ie[ie][Q],D.call(Ie,Ie.__data__,ze,He)})}finally{So=ue,zi=_e}}else we(this,function(Ie){var ze=Ie[ie][Q];(ze.event||(ze.event=r.dispatch("start","end","interrupt"))).on(D,H)});return this},si.transition=function(){for(var D,H,Q,ie=this.id,ue=++Vl,_e=this.namespace,Ie=[],ze=0,He=this.length;ze<He;ze++){Ie.push(D=[]);for(var Ye,nt=0,ft=(Ye=this[ze]).length;nt<ft;nt++)(H=Ye[nt])&&La(H,nt,_e,ue,{time:(Q=H[_e][ie]).time,ease:Q.ease,delay:Q.delay+Q.duration,duration:Q.duration}),D.push(H)}return Ro(Ie,_e,ue)},r.svg.axis=function(){var D,H=r.scale.linear(),Q=rs,ie=6,ue=6,_e=3,Ie=[10],ze=null;function He(Ye){Ye.each(function(){var nt,ft=r.select(this),gt=this.__chart__||H,Et=this.__chart__=H.copy(),It=ze??(Et.ticks?Et.ticks.apply(Et,Ie):Et.domain()),Lt=D??(Et.tickFormat?Et.tickFormat.apply(Et,Ie):I),Bt=ft.selectAll(".tick").data(It,Et),Ot=Bt.enter().insert("g",".domain").attr("class","tick").style("opacity",Qe),Jt=r.transition(Bt.exit()).style("opacity",Qe).remove(),Yt=r.transition(Bt.order()).style("opacity",1),Vt=Math.max(ie,0)+_e,dn=Xs(Et),xn=ft.selectAll(".domain").data([0]),En=(xn.enter().append("path").attr("class","domain"),r.transition(xn));Ot.append("line"),Ot.append("text");var In,Hn,ir,dr,Zn=Ot.select("line"),ur=Yt.select("line"),_r=Bt.select("text").text(Lt),Dr=Ot.select("text"),nr=Yt.select("text"),lr=Q==="top"||Q==="left"?-1:1;if(Q==="bottom"||Q==="top"?(nt=Ke,In="x",ir="y",Hn="x2",dr="y2",_r.attr("dy",lr<0?"0em":".71em").style("text-anchor","middle"),En.attr("d","M"+dn[0]+","+lr*ue+"V0H"+dn[1]+"V"+lr*ue)):(nt=et,In="y",ir="x",Hn="y2",dr="x2",_r.attr("dy",".32em").style("text-anchor",lr<0?"end":"start"),En.attr("d","M"+lr*ue+","+dn[0]+"H0V"+dn[1]+"H"+lr*ue)),Zn.attr(dr,lr*ie),Dr.attr(ir,lr*Vt),ur.attr(Hn,0).attr(dr,lr*ie),nr.attr(In,0).attr(ir,lr*Vt),Et.rangeBand){var Ar=Et,vr=Ar.rangeBand()/2;gt=Et=function(Er){return Ar(Er)+vr}}else gt.rangeBand?gt=Et:Jt.call(nt,Et,gt);Ot.call(nt,gt,Et),Yt.call(nt,Et,Et)})}return He.scale=function(Ye){return arguments.length?(H=Ye,He):H},He.orient=function(Ye){return arguments.length?(Q=Ye in Cl?Ye+"":rs,He):Q},He.ticks=function(){return arguments.length?(Ie=b(arguments),He):Ie},He.tickValues=function(Ye){return arguments.length?(ze=Ye,He):ze},He.tickFormat=function(Ye){return arguments.length?(D=Ye,He):D},He.tickSize=function(Ye){var nt=arguments.length;return nt?(ie=+Ye,ue=+arguments[nt-1],He):ie},He.innerTickSize=function(Ye){return arguments.length?(ie=+Ye,He):ie},He.outerTickSize=function(Ye){return arguments.length?(ue=+Ye,He):ue},He.tickPadding=function(Ye){return arguments.length?(_e=+Ye,He):_e},He.tickSubdivide=function(){return arguments.length&&He},He};var rs="bottom",Cl={top:1,right:1,bottom:1,left:1};function Ke(D,H,Q){D.attr("transform",function(ie){var ue=H(ie);return"translate("+(isFinite(ue)?ue:Q(ie))+",0)"})}function et(D,H,Q){D.attr("transform",function(ie){var ue=H(ie);return"translate(0,"+(isFinite(ue)?ue:Q(ie))+")"})}r.svg.brush=function(){var D,H,Q=ee(nt,"brushstart","brush","brushend"),ie=null,ue=null,_e=[0,0],Ie=[0,0],ze=!0,He=!0,Ye=j[0];function nt(Lt){Lt.each(function(){var Bt=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",It).on("touchstart.brush",It),Ot=Bt.selectAll(".background").data([0]);Ot.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Bt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Jt=Bt.selectAll(".resize").data(Ye,I);Jt.exit().remove(),Jt.enter().append("g").attr("class",function(xn){return"resize "+xn}).style("cursor",function(xn){return ut[xn]}).append("rect").attr("x",function(xn){return/[ew]$/.test(xn)?-3:null}).attr("y",function(xn){return/^[ns]/.test(xn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Jt.style("display",nt.empty()?"none":null);var Yt,Vt=r.transition(Bt),dn=r.transition(Ot);ie&&(Yt=Xs(ie),dn.attr("x",Yt[0]).attr("width",Yt[1]-Yt[0]),gt(Vt)),ue&&(Yt=Xs(ue),dn.attr("y",Yt[0]).attr("height",Yt[1]-Yt[0]),Et(Vt)),ft(Vt)})}function ft(Lt){Lt.selectAll(".resize").attr("transform",function(Bt){return"translate("+_e[+/e$/.test(Bt)]+","+Ie[+/^s/.test(Bt)]+")"})}function gt(Lt){Lt.select(".extent").attr("x",_e[0]),Lt.selectAll(".extent,.n>rect,.s>rect").attr("width",_e[1]-_e[0])}function Et(Lt){Lt.select(".extent").attr("y",Ie[0]),Lt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ie[1]-Ie[0])}function It(){var Lt,Bt,Ot=this,Jt=r.select(r.event.target),Yt=Q.of(Ot,arguments),Vt=r.select(Ot),dn=Jt.datum(),xn=!/^(n|s)$/.test(dn)&&ie,En=!/^(e|w)$/.test(dn)&&ue,In=Jt.classed("extent"),Hn=yt(Ot),ir=r.mouse(Ot),dr=r.select(t(Ot)).on("keydown.brush",function(){r.event.keyCode==32&&(In||(Lt=null,ir[0]-=_e[1],ir[1]-=Ie[1],In=2),$())}).on("keyup.brush",function(){r.event.keyCode==32&&In==2&&(ir[0]+=_e[1],ir[1]+=Ie[1],In=0,$())});if(r.event.changedTouches?dr.on("touchmove.brush",_r).on("touchend.brush",nr):dr.on("mousemove.brush",_r).on("mouseup.brush",nr),Vt.interrupt().selectAll("*").interrupt(),In)ir[0]=_e[0]-ir[0],ir[1]=Ie[0]-ir[1];else if(dn){var Zn=+/w$/.test(dn),ur=+/^n/.test(dn);Bt=[_e[1-Zn]-ir[0],Ie[1-ur]-ir[1]],ir[0]=_e[Zn],ir[1]=Ie[ur]}else r.event.altKey&&(Lt=ir.slice());function _r(){var lr=r.mouse(Ot),Ar=!1;Bt&&(lr[0]+=Bt[0],lr[1]+=Bt[1]),In||(r.event.altKey?(Lt||(Lt=[(_e[0]+_e[1])/2,(Ie[0]+Ie[1])/2]),ir[0]=_e[+(lr[0]<Lt[0])],ir[1]=Ie[+(lr[1]<Lt[1])]):Lt=null),xn&&Dr(lr,ie,0)&&(gt(Vt),Ar=!0),En&&Dr(lr,ue,1)&&(Et(Vt),Ar=!0),Ar&&(ft(Vt),Yt({type:"brush",mode:In?"move":"resize"}))}function Dr(lr,Ar,vr){var Er,Or,Ur=Xs(Ar),Vr=Ur[0],Gr=Ur[1],Zr=ir[vr],vi=vr?Ie:_e,Li=vi[1]-vi[0];if(In&&(Vr-=Zr,Gr-=Li+Zr),Er=(vr?He:ze)?Math.max(Vr,Math.min(Gr,lr[vr])):lr[vr],In?Or=(Er+=Zr)+Li:(Lt&&(Zr=Math.max(Vr,Math.min(Gr,2*Lt[vr]-Er))),Zr<Er?(Or=Er,Er=Zr):Or=Zr),vi[0]!=Er||vi[1]!=Or)return vr?H=null:D=null,vi[0]=Er,vi[1]=Or,!0}function nr(){_r(),Vt.style("pointer-events","all").selectAll(".resize").style("display",nt.empty()?"none":null),r.select("body").style("cursor",null),dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Hn(),Yt({type:"brushend"})}Vt.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",Jt.style("cursor")),Yt({type:"brushstart"}),_r()}return nt.event=function(Lt){Lt.each(function(){var Bt=Q.of(this,arguments),Ot={x:_e,y:Ie,i:D,j:H},Jt=this.__chart__||Ot;this.__chart__=Ot,zi?r.select(this).transition().each("start.brush",function(){D=Jt.i,H=Jt.j,_e=Jt.x,Ie=Jt.y,Bt({type:"brushstart"})}).tween("brush:brush",function(){var Yt=Qa(_e,Ot.x),Vt=Qa(Ie,Ot.y);return D=H=null,function(dn){_e=Ot.x=Yt(dn),Ie=Ot.y=Vt(dn),Bt({type:"brush",mode:"resize"})}}).each("end.brush",function(){D=Ot.i,H=Ot.j,Bt({type:"brush",mode:"resize"}),Bt({type:"brushend"})}):(Bt({type:"brushstart"}),Bt({type:"brush",mode:"resize"}),Bt({type:"brushend"}))})},nt.x=function(Lt){return arguments.length?(Ye=j[!(ie=Lt)<<1|!ue],nt):ie},nt.y=function(Lt){return arguments.length?(Ye=j[!ie<<1|!(ue=Lt)],nt):ue},nt.clamp=function(Lt){return arguments.length?(ie&&ue?(ze=!!Lt[0],He=!!Lt[1]):ie?ze=!!Lt:ue&&(He=!!Lt),nt):ie&&ue?[ze,He]:ie?ze:ue?He:null},nt.extent=function(Lt){var Bt,Ot,Jt,Yt,Vt;return arguments.length?(ie&&(Bt=Lt[0],Ot=Lt[1],ue&&(Bt=Bt[0],Ot=Ot[0]),D=[Bt,Ot],ie.invert&&(Bt=ie(Bt),Ot=ie(Ot)),Ot<Bt&&(Vt=Bt,Bt=Ot,Ot=Vt),Bt==_e[0]&&Ot==_e[1]||(_e=[Bt,Ot])),ue&&(Jt=Lt[0],Yt=Lt[1],ie&&(Jt=Jt[1],Yt=Yt[1]),H=[Jt,Yt],ue.invert&&(Jt=ue(Jt),Yt=ue(Yt)),Yt<Jt&&(Vt=Jt,Jt=Yt,Yt=Vt),Jt==Ie[0]&&Yt==Ie[1]||(Ie=[Jt,Yt])),nt):(ie&&(D?(Bt=D[0],Ot=D[1]):(Bt=_e[0],Ot=_e[1],ie.invert&&(Bt=ie.invert(Bt),Ot=ie.invert(Ot)),Ot<Bt&&(Vt=Bt,Bt=Ot,Ot=Vt))),ue&&(H?(Jt=H[0],Yt=H[1]):(Jt=Ie[0],Yt=Ie[1],ue.invert&&(Jt=ue.invert(Jt),Yt=ue.invert(Yt)),Yt<Jt&&(Vt=Jt,Jt=Yt,Yt=Vt))),ie&&ue?[[Bt,Jt],[Ot,Yt]]:ie?[Bt,Ot]:ue&&[Jt,Yt])},nt.clear=function(){return nt.empty()||(_e=[0,0],Ie=[0,0],D=H=null),nt},nt.empty=function(){return!!ie&&_e[0]==_e[1]||!!ue&&Ie[0]==Ie[1]},r.rebind(nt,Q,"on")};var ut={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},j=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Y(D){return JSON.parse(D.responseText)}function G(D){var H=c.createRange();return H.selectNode(c.body),H.createContextualFragment(D.responseText)}r.text=Xn(function(D){return D.responseText}),r.json=function(D,H){return cr(D,"application/json",Y,H)},r.html=function(D,H){return cr(D,"text/html",G,H)},r.xml=Xn(function(D){return D.responseXML}),(T=typeof(_=r)=="function"?_.call(C,e,C,R):_)===void 0||(R.exports=T)}).apply(self)},3480:function(R){R.exports=function(){"use strict";var C,e,_;function T(r,w){if(C)if(e){var b="var sharedChunk = {}; ("+C+")(sharedChunk); ("+e+")(sharedChunk);",c={};C(c),_=w(c),typeof window<"u"&&(_.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=w;else C=w}return T(0,function(r){function w(M,z){return M(z={exports:{}},z.exports),z.exports}var b="1.13.4",c=o;function o(M,z,X,le){this.cx=3*M,this.bx=3*(X-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(le-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=le,this.p2x=X,this.p2y=le}o.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},o.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},o.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},o.prototype.solveCurveX=function(M,z){var X,le,Me,Oe,Ue;for(z===void 0&&(z=1e-6),Me=M,Ue=0;Ue<8;Ue++){if(Oe=this.sampleCurveX(Me)-M,Math.abs(Oe)<z)return Me;var $e=this.sampleCurveDerivativeX(Me);if(Math.abs($e)<1e-6)break;Me-=Oe/$e}if((Me=M)<(X=0))return X;if(Me>(le=1))return le;for(;X<le;){if(Oe=this.sampleCurveX(Me),Math.abs(Oe-M)<z)return Me;M>Oe?X=Me:le=Me,Me=.5*(le-X)+X}return Me},o.prototype.solve=function(M,z){return this.sampleCurveY(this.solveCurveX(M,z))};var t=i;function i(M,z){this.x=M,this.y=z}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,z){return this.clone()._rotateAround(M,z)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var z=M.x-this.x,X=M.y-this.y;return z*z+X*X},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,z){return Math.atan2(this.x*z-this.y*M,this.x*M+this.y*z)},_matMult:function(M){var z=M[0]*this.x+M[1]*this.y,X=M[2]*this.x+M[3]*this.y;return this.x=z,this.y=X,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var z=Math.cos(M),X=Math.sin(M),le=z*this.x-X*this.y,Me=X*this.x+z*this.y;return this.x=le,this.y=Me,this},_rotateAround:function(M,z){var X=Math.cos(M),le=Math.sin(M),Me=z.x+X*(this.x-z.x)-le*(this.y-z.y),Oe=z.y+le*(this.x-z.x)+X*(this.y-z.y);return this.x=Me,this.y=Oe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(M){return M instanceof i?M:Array.isArray(M)?new i(M[0],M[1]):M};var n=typeof self<"u"?self:{},a=Math.pow(2,53)-1;function s(M,z,X,le){var Me=new c(M,z,X,le);return function(Oe){return Me.solve(Oe)}}var l=s(.25,.1,.25,1);function u(M,z,X){return Math.min(X,Math.max(z,M))}function p(M,z,X){var le=X-z,Me=((M-z)%le+le)%le+z;return Me===z?X:Me}function f(M){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];for(var le=0,Me=z;le<Me.length;le+=1){var Oe=Me[le];for(var Ue in Oe)M[Ue]=Oe[Ue]}return M}var m=1;function h(){return m++}function g(){return function M(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function v(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function x(M,z){M.forEach(function(X){z[X]&&(z[X]=z[X].bind(z))})}function y(M,z){return M.indexOf(z,M.length-z.length)!==-1}function A(M,z,X){var le={};for(var Me in M)le[Me]=z.call(X||this,M[Me],Me,M);return le}function d(M,z,X){var le={};for(var Me in M)z.call(X||this,M[Me],Me,M)&&(le[Me]=M[Me]);return le}function S(M){return Array.isArray(M)?M.map(S):typeof M=="object"&&M?A(M,S):M}var k={};function E(M){k[M]||(typeof console<"u"&&console.warn(M),k[M]=!0)}function L(M,z,X){return(X.y-M.y)*(z.x-M.x)>(z.y-M.y)*(X.x-M.x)}function O(M){for(var z=0,X=0,le=M.length,Me=le-1,Oe=void 0,Ue=void 0;X<le;Me=X++)Oe=M[X],z+=((Ue=M[Me]).x-Oe.x)*(Oe.y+Ue.y);return z}function P(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F(M){var z={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Me,Oe,Ue){var $e=Oe||Ue;return z[Me]=!$e||$e.toLowerCase(),""}),z["max-age"]){var X=parseInt(z["max-age"],10);isNaN(X)?delete z["max-age"]:z["max-age"]=X}return z}var U=null;function I(M){if(U==null){var z=M.navigator?M.navigator.userAgent:null;U=!!M.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return U}function N(M){try{var z=n[M];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch{return!1}}var W,B,V,q,ne=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),$=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,K=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,ee={now:ne,frame:function(M){var z=$(M);return{cancel:function(){return K(z)}}},getImageData:function(M,z){z===void 0&&(z=0);var X=n.document.createElement("canvas"),le=X.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return X.width=M.width,X.height=M.height,le.drawImage(M,0,0,M.width,M.height),le.getImageData(-z,-z,M.width+2*z,M.height+2*z)},resolveURL:function(M){return W||(W=n.document.createElement("a")),W.href=M,W.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(B==null&&(B=n.matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}},J={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(M){!te&&q&&(oe?se(M):V=M)}},te=!1,oe=!1;function se(M){var z=M.createTexture();M.bindTexture(M.TEXTURE_2D,z);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,q),M.isContextLost())return;Z.supported=!0}catch{}M.deleteTexture(z),te=!0}n.document&&((q=n.document.createElement("img")).onload=function(){V&&se(V),V=null,oe=!0},q.onerror=function(){te=!0,V=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ce="01",ye=function(M,z){this._transformRequestFn=M,this._customAccessToken=z,this._createSkuToken()};function me(M){return M.indexOf("mapbox:")===0}ye.prototype._createSkuToken=function(){var M=function(){for(var z="",X=0;X<10;X++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ce,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ye.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ye.prototype.transformRequest=function(M,z){return this._transformRequestFn&&this._transformRequestFn(M,z)||{url:M}},ye.prototype.normalizeStyleURL=function(M,z){if(!me(M))return M;var X=ke(M);return X.path="/styles/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||z)},ye.prototype.normalizeGlyphsURL=function(M,z){if(!me(M))return M;var X=ke(M);return X.path="/fonts/v1"+X.path,this._makeAPIURL(X,this._customAccessToken||z)},ye.prototype.normalizeSourceURL=function(M,z){if(!me(M))return M;var X=ke(M);return X.path="/v4/"+X.authority+".json",X.params.push("secure"),this._makeAPIURL(X,this._customAccessToken||z)},ye.prototype.normalizeSpriteURL=function(M,z,X,le){var Me=ke(M);return me(M)?(Me.path="/styles/v1"+Me.path+"/sprite"+z+X,this._makeAPIURL(Me,this._customAccessToken||le)):(Me.path+=""+z+X,Ce(Me))},ye.prototype.normalizeTileURL=function(M,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!me(M))return M;var X=ke(M),le=ee.devicePixelRatio>=2||z===512?"@2x":"",Me=Z.supported?".webp":"$1";X.path=X.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Me),X.path=X.path.replace(/^.+\/v4\//,"/"),X.path="/v4"+X.path;var Oe=this._customAccessToken||function(Ue){for(var $e=0,ct=Ue;$e<ct.length;$e+=1){var Mt=ct[$e].match(/^access_token=(.*)$/);if(Mt)return Mt[1]}return null}(X.params)||J.ACCESS_TOKEN;return J.REQUIRE_ACCESS_TOKEN&&Oe&&this._skuToken&&X.params.push("sku="+this._skuToken),this._makeAPIURL(X,Oe)},ye.prototype.canonicalizeTileURL=function(M,z){var X=ke(M);if(!X.path.match(/(^\/v4\/)/)||!X.path.match(/\.[\w]+$/))return M;var le="mapbox://tiles/";le+=X.path.replace("/v4/","");var Me=X.params;return z&&(Me=Me.filter(function(Oe){return!Oe.match(/^access_token=/)})),Me.length&&(le+="?"+Me.join("&")),le},ye.prototype.canonicalizeTileset=function(M,z){for(var X=!!z&&me(z),le=[],Me=0,Oe=M.tiles||[];Me<Oe.length;Me+=1){var Ue=Oe[Me];pe(Ue)?le.push(this.canonicalizeTileURL(Ue,X)):le.push(Ue)}return le},ye.prototype._makeAPIURL=function(M,z){var X="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=ke(J.API_URL);if(M.protocol=le.protocol,M.authority=le.authority,M.protocol==="http"){var Me=M.params.indexOf("secure");Me>=0&&M.params.splice(Me,1)}if(le.path!=="/"&&(M.path=""+le.path+M.path),!J.REQUIRE_ACCESS_TOKEN)return Ce(M);if(!(z=z||J.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+X);if(z[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+X);return M.params=M.params.filter(function(Oe){return Oe.indexOf("access_token")===-1}),M.params.push("access_token="+z),Ce(M)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function pe(M){return fe.test(M)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ke(M){var z=M.match(ge);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function Ce(M){var z=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+z}var de="mapbox.eventData";function ae(M){if(!M)return null;var z,X=M.split(".");if(!X||X.length!==3)return null;try{return JSON.parse((z=X[1],decodeURIComponent(n.atob(z).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var re=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};re.prototype.getStorageKey=function(M){var z,X,le=ae(J.ACCESS_TOKEN);return z=le&&le.u?(X=le.u,n.btoa(encodeURIComponent(X).replace(/%([0-9A-F]{2})/g,function(Me,Oe){return String.fromCharCode(+("0x"+Oe))}))):J.ACCESS_TOKEN||"",M?de+"."+M+":"+z:de+":"+z},re.prototype.fetchEventData=function(){var M=N("localStorage"),z=this.getStorageKey(),X=this.getStorageKey("uuid");if(M)try{var le=n.localStorage.getItem(z);le&&(this.eventData=JSON.parse(le));var Me=n.localStorage.getItem(X);Me&&(this.anonId=Me)}catch{E("Unable to read from LocalStorage")}},re.prototype.saveEventData=function(){var M=N("localStorage"),z=this.getStorageKey(),X=this.getStorageKey("uuid");if(M)try{n.localStorage.setItem(X,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(z,JSON.stringify(this.eventData))}catch{E("Unable to write to LocalStorage")}},re.prototype.processRequests=function(M){},re.prototype.postEvent=function(M,z,X,le){var Me=this;if(J.EVENTS_URL){var Oe=ke(J.EVENTS_URL);Oe.params.push("access_token="+(le||J.ACCESS_TOKEN||""));var Ue={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ce,userId:this.anonId},$e=z?f(Ue,z):Ue,ct={url:Ce(Oe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=vt(ct,function(Mt){Me.pendingRequest=null,X(Mt),Me.saveEventData(),Me.processRequests(le)})}},re.prototype.queueRequest=function(M,z){this.queue.push(M),this.processRequests(z)};var he,Se,xe=function(M){function z(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.postMapLoadEvent=function(X,le,Me,Oe){this.skuToken=Me,(J.EVENTS_URL&&Oe||J.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Ue){return me(Ue)||pe(Ue)}))&&this.queueRequest({id:le,timestamp:Date.now()},Oe)},z.prototype.processRequests=function(X){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Me=this.queue.shift(),Oe=Me.id,Ue=Me.timestamp;Oe&&this.success[Oe]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=g()),this.postEvent(Ue,{skuToken:this.skuToken},function($e){$e||Oe&&(le.success[Oe]=!0)},X))}},z}(re),Te=function(M){function z(X){M.call(this,"appUserTurnstile"),this._customAccessToken=X}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.postTurnstileEvent=function(X,le){J.EVENTS_URL&&J.ACCESS_TOKEN&&Array.isArray(X)&&X.some(function(Me){return me(Me)||pe(Me)})&&this.queueRequest(Date.now(),le)},z.prototype.processRequests=function(X){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Me=ae(J.ACCESS_TOKEN),Oe=Me?Me.u:J.ACCESS_TOKEN,Ue=Oe!==this.eventData.tokenU;v(this.anonId)||(this.anonId=g(),Ue=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),Mt=new Date($e),Ct=($e-this.eventData.lastSuccess)/864e5;Ue=Ue||Ct>=1||Ct<-1||ct.getDate()!==Mt.getDate()}else Ue=!0;if(!Ue)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function(Rt){Rt||(le.eventData.lastSuccess=$e,le.eventData.tokenU=Oe)},X)}},z}(re),Ae=new Te,Pe=Ae.postTurnstileEvent.bind(Ae),De=new xe,ve=De.postMapLoadEvent.bind(De),we="mapbox-tiles",Ee=500,Fe=50,Le=42e4;function je(){n.caches&&!he&&(he=n.caches.open(we))}function Ge(M,z,X){if(je(),he){var le={status:z.status,statusText:z.statusText,headers:new n.Headers};z.headers.forEach(function(Oe,Ue){return le.headers.set(Ue,Oe)});var Me=F(z.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&le.headers.set("Expires",new Date(X+1e3*Me["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-X<Le||function(Oe,Ue){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch{Se=!1}Se?Ue(Oe.body):Oe.blob().then(Ue)}(z,function(Oe){var Ue=new n.Response(Oe,le);je(),he&&he.then(function($e){return $e.put(Je(M.url),Ue)}).catch(function($e){return E($e.message)})}))}}function Je(M){var z=M.indexOf("?");return z<0?M:M.slice(0,z)}function rt(M,z){if(je(),!he)return z(null);var X=Je(M.url);he.then(function(le){le.match(X).then(function(Me){var Oe=function(Ue){if(!Ue)return!1;var $e=new Date(Ue.headers.get("Expires")||0),ct=F(Ue.headers.get("Cache-Control")||"");return $e>Date.now()&&!ct["no-cache"]}(Me);le.delete(X),Oe&&le.put(X,Me.clone()),z(null,Me,Oe)}).catch(z)}).catch(z)}var ot,yt=1/0;function _t(){return ot==null&&(ot=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),ot}var mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(mt);var tt=function(M){function z(X,le,Me){le===401&&pe(Me)&&(X+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,X),this.status=le,this.url=Me,this.name=this.constructor.name,this.message=X}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Qe=P()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function Dt(M,z){var X,le=new n.AbortController,Me=new n.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:Qe(),signal:le.signal}),Oe=!1,Ue=!1,$e=(X=Me.url).indexOf("sku=")>0&&pe(X);M.type==="json"&&Me.headers.set("Accept","application/json");var ct=function(Ct,Rt,Gt){if(!Ue){if(Ct&&Ct.message!=="SecurityError"&&E(Ct),Rt&&Gt)return Mt(Rt);var Ut=Date.now();n.fetch(Me).then(function(sn){if(sn.ok){var hn=$e?sn.clone():null;return Mt(sn,hn,Ut)}return z(new tt(sn.statusText,sn.status,M.url))}).catch(function(sn){sn.code!==20&&z(new Error(sn.message))})}},Mt=function(Ct,Rt,Gt){(M.type==="arrayBuffer"?Ct.arrayBuffer():M.type==="json"?Ct.json():Ct.text()).then(function(Ut){Ue||(Rt&&Gt&&Ge(Me,Rt,Gt),Oe=!0,z(null,Ut,Ct.headers.get("Cache-Control"),Ct.headers.get("Expires")))}).catch(function(Ut){Ue||z(new Error(Ut.message))})};return $e?rt(Me,ct):ct(null,null),{cancel:function(){Ue=!0,Oe||le.abort()}}}var zt=function(M,z){if(X=M.url,!(/^file:/.test(X)||/^file:/.test(Qe())&&!/^\w+:/.test(X))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return Dt(M,z);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,z,void 0,!0)}var X;return function(le,Me){var Oe=new n.XMLHttpRequest;for(var Ue in Oe.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Oe.responseType="arraybuffer"),le.headers)Oe.setRequestHeader(Ue,le.headers[Ue]);return le.type==="json"&&(Oe.responseType="text",Oe.setRequestHeader("Accept","application/json")),Oe.withCredentials=le.credentials==="include",Oe.onerror=function(){Me(new Error(Oe.statusText))},Oe.onload=function(){if((Oe.status>=200&&Oe.status<300||Oe.status===0)&&Oe.response!==null){var $e=Oe.response;if(le.type==="json")try{$e=JSON.parse(Oe.response)}catch(ct){return Me(ct)}Me(null,$e,Oe.getResponseHeader("Cache-Control"),Oe.getResponseHeader("Expires"))}else Me(new tt(Oe.statusText,Oe.status,le.url))},Oe.send(le.body),{cancel:function(){return Oe.abort()}}}(M,z)},pt=function(M,z){return zt(f(M,{type:"arrayBuffer"}),z)},vt=function(M,z){return zt(f(M,{method:"POST"}),z)},We,Ze,Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";We=[],Ze=0;var Xe=function(M,z){if(Z.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ze>=J.MAX_PARALLEL_IMAGE_REQUESTS){var X={requestParameters:M,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return We.push(X),X}Ze++;var le=!1,Me=function(){if(!le)for(le=!0,Ze--;We.length&&Ze<J.MAX_PARALLEL_IMAGE_REQUESTS;){var Ue=We.shift(),$e=Ue.requestParameters,ct=Ue.callback;Ue.cancelled||(Ue.cancel=Xe($e,ct).cancel)}},Oe=pt(M,function(Ue,$e,ct,Mt){Me(),Ue?z(Ue):$e&&(_t()?function(Ct,Rt){var Gt=new n.Blob([new Uint8Array(Ct)],{type:"image/png"});n.createImageBitmap(Gt).then(function(Ut){Rt(null,Ut)}).catch(function(Ut){Rt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}($e,z):function(Ct,Rt,Gt,Ut){var sn=new n.Image,hn=n.URL;sn.onload=function(){Rt(null,sn),hn.revokeObjectURL(sn.src),sn.onload=null,n.requestAnimationFrame(function(){sn.src=Ne})},sn.onerror=function(){return Rt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Sn=new n.Blob([new Uint8Array(Ct)],{type:"image/png"});sn.cacheControl=Gt,sn.expires=Ut,sn.src=Ct.byteLength?hn.createObjectURL(Sn):Ne}($e,z,ct,Mt))});return{cancel:function(){Oe.cancel(),Me()}}};function st(M,z,X){X[M]&&X[M].indexOf(z)!==-1||(X[M]=X[M]||[],X[M].push(z))}function lt(M,z,X){if(X&&X[M]){var le=X[M].indexOf(z);le!==-1&&X[M].splice(le,1)}}var xt=function(M,z){z===void 0&&(z={}),f(this,z),this.type=M},bt=function(M){function z(X,le){le===void 0&&(le={}),M.call(this,"error",f({error:X},le))}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(xt),Ve=function(){};Ve.prototype.on=function(M,z){return this._listeners=this._listeners||{},st(M,z,this._listeners),this},Ve.prototype.off=function(M,z){return lt(M,z,this._listeners),lt(M,z,this._oneTimeListeners),this},Ve.prototype.once=function(M,z){return this._oneTimeListeners=this._oneTimeListeners||{},st(M,z,this._oneTimeListeners),this},Ve.prototype.fire=function(M,z){typeof M=="string"&&(M=new xt(M,z||{}));var X=M.type;if(this.listens(X)){M.target=this;for(var le=0,Me=this._listeners&&this._listeners[X]?this._listeners[X].slice():[];le<Me.length;le+=1)Me[le].call(this,M);for(var Oe=0,Ue=this._oneTimeListeners&&this._oneTimeListeners[X]?this._oneTimeListeners[X].slice():[];Oe<Ue.length;Oe+=1){var $e=Ue[Oe];lt(X,$e,this._oneTimeListeners),$e.call(this,M)}var ct=this._eventedParent;ct&&(f(M,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ct.fire(M))}else M instanceof bt&&console.error(M.error);return this},Ve.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},Ve.prototype.setEventedParent=function(M,z){return this._eventedParent=M,this._eventedParentData=z,this};var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},at=function(M,z,X,le){this.message=(M?M+": ":"")+X,le&&(this.identifier=le),z!=null&&z.__line__&&(this.line=z.__line__)};function ht(M){var z=M.key,X=M.value;return X?[new at(z,X,"constants have been deprecated as of v8")]:[]}function dt(M){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];for(var le=0,Me=z;le<Me.length;le+=1){var Oe=Me[le];for(var Ue in Oe)M[Ue]=Oe[Ue]}return M}function it(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function kt(M){if(Array.isArray(M))return M.map(kt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var z={};for(var X in M)z[X]=kt(M[X]);return z}return it(M)}var Tt=function(M){function z(X,le){M.call(this,le),this.message=le,this.key=X}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(Error),St=function(M,z){z===void 0&&(z=[]),this.parent=M,this.bindings={};for(var X=0,le=z;X<le.length;X+=1){var Me=le[X],Oe=Me[0],Ue=Me[1];this.bindings[Oe]=Ue}};St.prototype.concat=function(M){return new St(this,M)},St.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},St.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var wt={kind:"null"},At={kind:"number"},Ft={kind:"string"},jt={kind:"boolean"},rn={kind:"color"},nn={kind:"object"},on={kind:"value"},Ht={kind:"collator"},$t={kind:"formatted"},bn={kind:"resolvedImage"};function ln(M,z){return{kind:"array",itemType:M,N:z}}function Kt(M){if(M.kind==="array"){var z=Kt(M.itemType);return typeof M.N=="number"?"array<"+z+", "+M.N+">":M.itemType.kind==="value"?"array":"array<"+z+">"}return M.kind}var fn=[wt,At,Ft,jt,rn,$t,nn,ln(on),bn];function en(M,z){if(z.kind==="error")return null;if(M.kind==="array"){if(z.kind==="array"&&(z.N===0&&z.itemType.kind==="value"||!en(M.itemType,z.itemType))&&(typeof M.N!="number"||M.N===z.N))return null}else{if(M.kind===z.kind)return null;if(M.kind==="value"){for(var X=0,le=fn;X<le.length;X+=1)if(!en(le[X],z))return null}}return"Expected "+Kt(M)+" but found "+Kt(z)+" instead."}function un(M,z){return z.some(function(X){return X.kind===M.kind})}function An(M,z){return z.some(function(X){return X==="null"?M===null:X==="array"?Array.isArray(M):X==="object"?M&&!Array.isArray(M)&&typeof M=="object":X===typeof M})}var wn=w(function(M,z){var X={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(ct){return(ct=Math.round(ct))<0?0:ct>255?255:ct}function Me(ct){return ct<0?0:ct>1?1:ct}function Oe(ct){return ct[ct.length-1]==="%"?le(parseFloat(ct)/100*255):le(parseInt(ct))}function Ue(ct){return ct[ct.length-1]==="%"?Me(parseFloat(ct)/100):Me(parseFloat(ct))}function $e(ct,Mt,Ct){return Ct<0?Ct+=1:Ct>1&&(Ct-=1),6*Ct<1?ct+(Mt-ct)*Ct*6:2*Ct<1?Mt:3*Ct<2?ct+(Mt-ct)*(2/3-Ct)*6:ct}try{z.parseCSSColor=function(ct){var Mt,Ct=ct.replace(/ /g,"").toLowerCase();if(Ct in X)return X[Ct].slice();if(Ct[0]==="#")return Ct.length===4?(Mt=parseInt(Ct.substr(1),16))>=0&&Mt<=4095?[(3840&Mt)>>4|(3840&Mt)>>8,240&Mt|(240&Mt)>>4,15&Mt|(15&Mt)<<4,1]:null:Ct.length===7&&(Mt=parseInt(Ct.substr(1),16))>=0&&Mt<=16777215?[(16711680&Mt)>>16,(65280&Mt)>>8,255&Mt,1]:null;var Rt=Ct.indexOf("("),Gt=Ct.indexOf(")");if(Rt!==-1&&Gt+1===Ct.length){var Ut=Ct.substr(0,Rt),sn=Ct.substr(Rt+1,Gt-(Rt+1)).split(","),hn=1;switch(Ut){case"rgba":if(sn.length!==4)return null;hn=Ue(sn.pop());case"rgb":return sn.length!==3?null:[Oe(sn[0]),Oe(sn[1]),Oe(sn[2]),hn];case"hsla":if(sn.length!==4)return null;hn=Ue(sn.pop());case"hsl":if(sn.length!==3)return null;var Sn=(parseFloat(sn[0])%360+360)%360/360,Mn=Ue(sn[1]),Rn=Ue(sn[2]),Nn=Rn<=.5?Rn*(Mn+1):Rn+Mn-Rn*Mn,Gn=2*Rn-Nn;return[le(255*$e(Gn,Nn,Sn+1/3)),le(255*$e(Gn,Nn,Sn)),le(255*$e(Gn,Nn,Sn-1/3)),hn];default:return null}}return null}}catch{}}),On=wn.parseCSSColor,Tn=function(M,z,X,le){le===void 0&&(le=1),this.r=M,this.g=z,this.b=X,this.a=le};Tn.parse=function(M){if(M){if(M instanceof Tn)return M;if(typeof M=="string"){var z=On(M);if(z)return new Tn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},Tn.prototype.toString=function(){var M=this.toArray(),z=M[0],X=M[1],le=M[2],Me=M[3];return"rgba("+Math.round(z)+","+Math.round(X)+","+Math.round(le)+","+Me+")"},Tn.prototype.toArray=function(){var M=this,z=M.r,X=M.g,le=M.b,Me=M.a;return Me===0?[0,0,0,0]:[255*z/Me,255*X/Me,255*le/Me,Me]},Tn.black=new Tn(0,0,0,1),Tn.white=new Tn(1,1,1,1),Tn.transparent=new Tn(0,0,0,0),Tn.red=new Tn(1,0,0,1);var Cn=function(M,z,X){this.sensitivity=M?z?"variant":"case":z?"accent":"base",this.locale=X,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Cn.prototype.compare=function(M,z){return this.collator.compare(M,z)},Cn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Bn=function(M,z,X,le,Me){this.text=M,this.image=z,this.scale=X,this.fontStack=le,this.textColor=Me},Xn=function(M){this.sections=M};Xn.fromString=function(M){return new Xn([new Bn(M,null,null,null,null)])},Xn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(M){return M.text.length!==0||M.image&&M.image.name.length!==0})},Xn.factory=function(M){return M instanceof Xn?M:Xn.fromString(M)},Xn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(M){return M.text}).join("")},Xn.prototype.serialize=function(){for(var M=["format"],z=0,X=this.sections;z<X.length;z+=1){var le=X[z];if(le.image)M.push(["image",le.image.name]);else{M.push(le.text);var Me={};le.fontStack&&(Me["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Me["font-scale"]=le.scale),le.textColor&&(Me["text-color"]=["rgba"].concat(le.textColor.toArray())),M.push(Me)}}return M};var cr=function(M){this.name=M.name,this.available=M.available};function Yn(M,z,X,le){return typeof M=="number"&&M>=0&&M<=255&&typeof z=="number"&&z>=0&&z<=255&&typeof X=="number"&&X>=0&&X<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[M,z,X,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[M,z,X,le]:[M,z,X]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function jn(M){if(M===null||typeof M=="string"||typeof M=="boolean"||typeof M=="number"||M instanceof Tn||M instanceof Cn||M instanceof Xn||M instanceof cr)return!0;if(Array.isArray(M)){for(var z=0,X=M;z<X.length;z+=1)if(!jn(X[z]))return!1;return!0}if(typeof M=="object"){for(var le in M)if(!jn(M[le]))return!1;return!0}return!1}function Kn(M){if(M===null)return wt;if(typeof M=="string")return Ft;if(typeof M=="boolean")return jt;if(typeof M=="number")return At;if(M instanceof Tn)return rn;if(M instanceof Cn)return Ht;if(M instanceof Xn)return $t;if(M instanceof cr)return bn;if(Array.isArray(M)){for(var z,X=M.length,le=0,Me=M;le<Me.length;le+=1){var Oe=Kn(Me[le]);if(z){if(z===Oe)continue;z=on;break}z=Oe}return ln(z||on,X)}return nn}function or(M){var z=typeof M;return M===null?"":z==="string"||z==="number"||z==="boolean"?String(M):M instanceof Tn||M instanceof Xn||M instanceof cr?M.toString():JSON.stringify(M)}cr.prototype.toString=function(){return this.name},cr.fromString=function(M){return M?new cr({name:M,available:!1}):null},cr.prototype.serialize=function(){return["image",this.name]};var Qt=function(M,z){this.type=M,this.value=z};Qt.parse=function(M,z){if(M.length!==2)return z.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!jn(M[1]))return z.error("invalid value");var X=M[1],le=Kn(X),Me=z.expectedType;return le.kind!=="array"||le.N!==0||!Me||Me.kind!=="array"||typeof Me.N=="number"&&Me.N!==0||(le=Me),new Qt(le,X)},Qt.prototype.evaluate=function(){return this.value},Qt.prototype.eachChild=function(){},Qt.prototype.outputDefined=function(){return!0},Qt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Tn?["rgba"].concat(this.value.toArray()):this.value instanceof Xn?this.value.serialize():this.value};var an=function(M){this.name="ExpressionEvaluationError",this.message=M};an.prototype.toJSON=function(){return this.message};var Dn={string:Ft,number:At,boolean:jt,object:nn},yn=function(M,z){this.type=M,this.args=z};yn.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var X,le=1,Me=M[0];if(Me==="array"){var Oe,Ue;if(M.length>2){var $e=M[1];if(typeof $e!="string"||!($e in Dn)||$e==="object")return z.error('The item type argument of "array" must be one of string, number, boolean',1);Oe=Dn[$e],le++}else Oe=on;if(M.length>3){if(M[2]!==null&&(typeof M[2]!="number"||M[2]<0||M[2]!==Math.floor(M[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Ue=M[2],le++}X=ln(Oe,Ue)}else X=Dn[Me];for(var ct=[];le<M.length;le++){var Mt=z.parse(M[le],le,on);if(!Mt)return null;ct.push(Mt)}return new yn(X,ct)},yn.prototype.evaluate=function(M){for(var z=0;z<this.args.length;z++){var X=this.args[z].evaluate(M);if(!en(this.type,Kn(X)))return X;if(z===this.args.length-1)throw new an("Expected value to be of type "+Kt(this.type)+", but found "+Kt(Kn(X))+" instead.")}return null},yn.prototype.eachChild=function(M){this.args.forEach(M)},yn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},yn.prototype.serialize=function(){var M=this.type,z=[M.kind];if(M.kind==="array"){var X=M.itemType;if(X.kind==="string"||X.kind==="number"||X.kind==="boolean"){z.push(X.kind);var le=M.N;(typeof le=="number"||this.args.length>1)&&z.push(le)}}return z.concat(this.args.map(function(Me){return Me.serialize()}))};var Ln=function(M){this.type=$t,this.sections=M};Ln.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var X=M[1];if(!Array.isArray(X)&&typeof X=="object")return z.error("First argument must be an image or text section.");for(var le=[],Me=!1,Oe=1;Oe<=M.length-1;++Oe){var Ue=M[Oe];if(Me&&typeof Ue=="object"&&!Array.isArray(Ue)){Me=!1;var $e=null;if(Ue["font-scale"]&&!($e=z.parse(Ue["font-scale"],1,At)))return null;var ct=null;if(Ue["text-font"]&&!(ct=z.parse(Ue["text-font"],1,ln(Ft))))return null;var Mt=null;if(Ue["text-color"]&&!(Mt=z.parse(Ue["text-color"],1,rn)))return null;var Ct=le[le.length-1];Ct.scale=$e,Ct.font=ct,Ct.textColor=Mt}else{var Rt=z.parse(M[Oe],1,on);if(!Rt)return null;var Gt=Rt.type.kind;if(Gt!=="string"&&Gt!=="value"&&Gt!=="null"&&Gt!=="resolvedImage")return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Me=!0,le.push({content:Rt,scale:null,font:null,textColor:null})}}return new Ln(le)},Ln.prototype.evaluate=function(M){return new Xn(this.sections.map(function(z){var X=z.content.evaluate(M);return Kn(X)===bn?new Bn("",X,null,null,null):new Bn(or(X),null,z.scale?z.scale.evaluate(M):null,z.font?z.font.evaluate(M).join(","):null,z.textColor?z.textColor.evaluate(M):null)}))},Ln.prototype.eachChild=function(M){for(var z=0,X=this.sections;z<X.length;z+=1){var le=X[z];M(le.content),le.scale&&M(le.scale),le.font&&M(le.font),le.textColor&&M(le.textColor)}},Ln.prototype.outputDefined=function(){return!1},Ln.prototype.serialize=function(){for(var M=["format"],z=0,X=this.sections;z<X.length;z+=1){var le=X[z];M.push(le.content.serialize());var Me={};le.scale&&(Me["font-scale"]=le.scale.serialize()),le.font&&(Me["text-font"]=le.font.serialize()),le.textColor&&(Me["text-color"]=le.textColor.serialize()),M.push(Me)}return M};var Vn=function(M){this.type=bn,this.input=M};Vn.parse=function(M,z){if(M.length!==2)return z.error("Expected two arguments.");var X=z.parse(M[1],1,Ft);return X?new Vn(X):z.error("No image name provided.")},Vn.prototype.evaluate=function(M){var z=this.input.evaluate(M),X=cr.fromString(z);return X&&M.availableImages&&(X.available=M.availableImages.indexOf(z)>-1),X},Vn.prototype.eachChild=function(M){M(this.input)},Vn.prototype.outputDefined=function(){return!1},Vn.prototype.serialize=function(){return["image",this.input.serialize()]};var Un={"to-boolean":jt,"to-color":rn,"to-number":At,"to-string":Ft},er=function(M,z){this.type=M,this.args=z};er.parse=function(M,z){if(M.length<2)return z.error("Expected at least one argument.");var X=M[0];if((X==="to-boolean"||X==="to-string")&&M.length!==2)return z.error("Expected one argument.");for(var le=Un[X],Me=[],Oe=1;Oe<M.length;Oe++){var Ue=z.parse(M[Oe],Oe,on);if(!Ue)return null;Me.push(Ue)}return new er(le,Me)},er.prototype.evaluate=function(M){if(this.type.kind==="boolean")return!!this.args[0].evaluate(M);if(this.type.kind==="color"){for(var z,X,le=0,Me=this.args;le<Me.length;le+=1){if(X=null,(z=Me[le].evaluate(M))instanceof Tn)return z;if(typeof z=="string"){var Oe=M.parseColor(z);if(Oe)return Oe}else if(Array.isArray(z)&&!(X=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":Yn(z[0],z[1],z[2],z[3])))return new Tn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new an(X||"Could not parse color from value '"+(typeof z=="string"?z:String(JSON.stringify(z)))+"'")}if(this.type.kind==="number"){for(var Ue=null,$e=0,ct=this.args;$e<ct.length;$e+=1){if((Ue=ct[$e].evaluate(M))===null)return 0;var Mt=Number(Ue);if(!isNaN(Mt))return Mt}throw new an("Could not convert "+JSON.stringify(Ue)+" to number.")}return this.type.kind==="formatted"?Xn.fromString(or(this.args[0].evaluate(M))):this.type.kind==="resolvedImage"?cr.fromString(or(this.args[0].evaluate(M))):or(this.args[0].evaluate(M))},er.prototype.eachChild=function(M){this.args.forEach(M)},er.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},er.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ln([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Vn(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(z){M.push(z.serialize())}),M};var fr=["Unknown","Point","LineString","Polygon"],Xt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Xt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Xt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?fr[this.feature.type]:this.feature.type:null},Xt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Xt.prototype.canonicalID=function(){return this.canonical},Xt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Xt.prototype.parseColor=function(M){var z=this._parseColorCache[M];return z||(z=this._parseColorCache[M]=Tn.parse(M)),z};var mn=function(M,z,X,le){this.name=M,this.type=z,this._evaluate=X,this.args=le};mn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},mn.prototype.eachChild=function(M){this.args.forEach(M)},mn.prototype.outputDefined=function(){return!1},mn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},mn.parse=function(M,z){var X,le=M[0],Me=mn.definitions[le];if(!Me)return z.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Oe=Array.isArray(Me)?Me[0]:Me.type,Ue=Array.isArray(Me)?[[Me[1],Me[2]]]:Me.overloads,$e=Ue.filter(function(jr){var Ir=jr[0];return!Array.isArray(Ir)||Ir.length===M.length-1}),ct=null,Mt=0,Ct=$e;Mt<Ct.length;Mt+=1){var Rt=Ct[Mt],Gt=Rt[0],Ut=Rt[1];ct=new pr(z.registry,z.path,null,z.scope);for(var sn=[],hn=!1,Sn=1;Sn<M.length;Sn++){var Mn=M[Sn],Rn=Array.isArray(Gt)?Gt[Sn-1]:Gt.type,Nn=ct.parse(Mn,1+sn.length,Rn);if(!Nn){hn=!0;break}sn.push(Nn)}if(!hn)if(Array.isArray(Gt)&&Gt.length!==sn.length)ct.error("Expected "+Gt.length+" arguments, but found "+sn.length+" instead.");else{for(var Gn=0;Gn<sn.length;Gn++){var Qn=Array.isArray(Gt)?Gt[Gn]:Gt.type,ar=sn[Gn];ct.concat(Gn+1).checkSubtype(Qn,ar.type)}if(ct.errors.length===0)return new mn(le,Oe,Ut,sn)}}if($e.length===1)(X=z.errors).push.apply(X,ct.errors);else{for(var xr=($e.length?$e:Ue).map(function(jr){return Ir=jr[0],Array.isArray(Ir)?"("+Ir.map(Kt).join(", ")+")":"("+Kt(Ir.type)+"...)";var Ir}).join(" | "),gr=[],Tr=1;Tr<M.length;Tr++){var Mr=z.parse(M[Tr],1+gr.length);if(!Mr)return null;gr.push(Kt(Mr.type))}z.error("Expected arguments of type "+xr+", but found ("+gr.join(", ")+") instead.")}return null},mn.register=function(M,z){for(var X in mn.definitions=z,z)M[X]=mn};var Pt=function(M,z,X){this.type=Ht,this.locale=X,this.caseSensitive=M,this.diacriticSensitive=z};Pt.parse=function(M,z){if(M.length!==2)return z.error("Expected one argument.");var X=M[1];if(typeof X!="object"||Array.isArray(X))return z.error("Collator options argument must be an object.");var le=z.parse(X["case-sensitive"]!==void 0&&X["case-sensitive"],1,jt);if(!le)return null;var Me=z.parse(X["diacritic-sensitive"]!==void 0&&X["diacritic-sensitive"],1,jt);if(!Me)return null;var Oe=null;return X.locale&&!(Oe=z.parse(X.locale,1,Ft))?null:new Pt(le,Me,Oe)},Pt.prototype.evaluate=function(M){return new Cn(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Pt.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Pt.prototype.outputDefined=function(){return!1},Pt.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var Zt=8192;function Wt(M,z){M[0]=Math.min(M[0],z[0]),M[1]=Math.min(M[1],z[1]),M[2]=Math.max(M[2],z[0]),M[3]=Math.max(M[3],z[1])}function gn(M,z){return!(M[0]<=z[0]||M[2]>=z[2]||M[1]<=z[1]||M[3]>=z[3])}function pn(M,z){var X,le=(180+M[0])/360,Me=(X=M[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+X*Math.PI/360)))/360),Oe=Math.pow(2,z.z);return[Math.round(le*Oe*Zt),Math.round(Me*Oe*Zt)]}function kn(M,z,X){return z[1]>M[1]!=X[1]>M[1]&&M[0]<(X[0]-z[0])*(M[1]-z[1])/(X[1]-z[1])+z[0]}function vn(M,z){for(var X=!1,le=0,Me=z.length;le<Me;le++)for(var Oe=z[le],Ue=0,$e=Oe.length;Ue<$e-1;Ue++){if(ct=M,Mt=Oe[Ue],Ct=Oe[Ue+1],Rt=void 0,Gt=void 0,Ut=void 0,sn=void 0,Rt=ct[0]-Mt[0],Gt=ct[1]-Mt[1],Ut=ct[0]-Ct[0],sn=ct[1]-Ct[1],Rt*sn-Ut*Gt==0&&Rt*Ut<=0&&Gt*sn<=0)return!1;kn(M,Oe[Ue],Oe[Ue+1])&&(X=!X)}var ct,Mt,Ct,Rt,Gt,Ut,sn;return X}function cn(M,z){for(var X=0;X<z.length;X++)if(vn(M,z[X]))return!0;return!1}function qt(M,z,X,le){var Me=M[0]-X[0],Oe=M[1]-X[1],Ue=z[0]-X[0],$e=z[1]-X[1],ct=le[0]-X[0],Mt=le[1]-X[1],Ct=Me*Mt-ct*Oe,Rt=Ue*Mt-ct*$e;return Ct>0&&Rt<0||Ct<0&&Rt>0}function Nt(M,z,X){for(var le=0,Me=X;le<Me.length;le+=1)for(var Oe=Me[le],Ue=0;Ue<Oe.length-1;++Ue)if($e=M,ct=z,Mt=Oe[Ue],Ct=Oe[Ue+1],Rt=void 0,Gt=void 0,Ut=void 0,Ut=[ct[0]-$e[0],ct[1]-$e[1]],Rt=[Ct[0]-Mt[0],Ct[1]-Mt[1]],Gt=Ut,Rt[0]*Gt[1]-Rt[1]*Gt[0]!=0&&qt($e,ct,Mt,Ct)&&qt(Mt,Ct,$e,ct))return!0;var $e,ct,Mt,Ct,Rt,Gt,Ut;return!1}function tn(M,z){for(var X=0;X<M.length;++X)if(!vn(M[X],z))return!1;for(var le=0;le<M.length-1;++le)if(Nt(M[le],M[le+1],z))return!1;return!0}function _n(M,z){for(var X=0;X<z.length;X++)if(tn(M,z[X]))return!0;return!1}function Fn(M,z,X){for(var le=[],Me=0;Me<M.length;Me++){for(var Oe=[],Ue=0;Ue<M[Me].length;Ue++){var $e=pn(M[Me][Ue],X);Wt(z,$e),Oe.push($e)}le.push(Oe)}return le}function zn(M,z,X){for(var le=[],Me=0;Me<M.length;Me++){var Oe=Fn(M[Me],z,X);le.push(Oe)}return le}function Pn(M,z,X,le){if(M[0]<X[0]||M[0]>X[2]){var Me=.5*le,Oe=M[0]-X[0]>Me?-le:X[0]-M[0]>Me?le:0;Oe===0&&(Oe=M[0]-X[2]>Me?-le:X[2]-M[0]>Me?le:0),M[0]+=Oe}Wt(z,M)}function $n(M,z,X,le){for(var Me=Math.pow(2,le.z)*Zt,Oe=[le.x*Zt,le.y*Zt],Ue=[],$e=0,ct=M;$e<ct.length;$e+=1)for(var Mt=0,Ct=ct[$e];Mt<Ct.length;Mt+=1){var Rt=Ct[Mt],Gt=[Rt.x+Oe[0],Rt.y+Oe[1]];Pn(Gt,z,X,Me),Ue.push(Gt)}return Ue}function Wn(M,z,X,le){for(var Me=Math.pow(2,le.z)*Zt,Oe=[le.x*Zt,le.y*Zt],Ue=[],$e=0,ct=M;$e<ct.length;$e+=1){for(var Mt=[],Ct=0,Rt=ct[$e];Ct<Rt.length;Ct+=1){var Gt=Rt[Ct],Ut=[Gt.x+Oe[0],Gt.y+Oe[1]];Wt(z,Ut),Mt.push(Ut)}Ue.push(Mt)}if(z[2]-z[0]<=Me/2){(Rn=z)[0]=Rn[1]=1/0,Rn[2]=Rn[3]=-1/0;for(var sn=0,hn=Ue;sn<hn.length;sn+=1)for(var Sn=0,Mn=hn[sn];Sn<Mn.length;Sn+=1)Pn(Mn[Sn],z,X,Me)}var Rn;return Ue}var tr=function(M,z){this.type=jt,this.geojson=M,this.geometries=z};function qn(M){if(M instanceof mn&&(M.name==="get"&&M.args.length===1||M.name==="feature-state"||M.name==="has"&&M.args.length===1||M.name==="properties"||M.name==="geometry-type"||M.name==="id"||/^filter-/.test(M.name))||M instanceof tr)return!1;var z=!0;return M.eachChild(function(X){z&&!qn(X)&&(z=!1)}),z}function Jn(M){if(M instanceof mn&&M.name==="feature-state")return!1;var z=!0;return M.eachChild(function(X){z&&!Jn(X)&&(z=!1)}),z}function sr(M,z){if(M instanceof mn&&z.indexOf(M.name)>=0)return!1;var X=!0;return M.eachChild(function(le){X&&!sr(le,z)&&(X=!1)}),X}tr.parse=function(M,z){if(M.length!==2)return z.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(jn(M[1])){var X=M[1];if(X.type==="FeatureCollection")for(var le=0;le<X.features.length;++le){var Me=X.features[le].geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new tr(X,X.features[le].geometry)}else if(X.type==="Feature"){var Oe=X.geometry.type;if(Oe==="Polygon"||Oe==="MultiPolygon")return new tr(X,X.geometry)}else if(X.type==="Polygon"||X.type==="MultiPolygon")return new tr(X,X)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},tr.prototype.evaluate=function(M){if(M.geometry()!=null&&M.canonicalID()!=null){if(M.geometryType()==="Point")return function(z,X){var le=[1/0,1/0,-1/0,-1/0],Me=[1/0,1/0,-1/0,-1/0],Oe=z.canonicalID();if(X.type==="Polygon"){var Ue=Fn(X.coordinates,Me,Oe),$e=$n(z.geometry(),le,Me,Oe);if(!gn(le,Me))return!1;for(var ct=0,Mt=$e;ct<Mt.length;ct+=1)if(!vn(Mt[ct],Ue))return!1}if(X.type==="MultiPolygon"){var Ct=zn(X.coordinates,Me,Oe),Rt=$n(z.geometry(),le,Me,Oe);if(!gn(le,Me))return!1;for(var Gt=0,Ut=Rt;Gt<Ut.length;Gt+=1)if(!cn(Ut[Gt],Ct))return!1}return!0}(M,this.geometries);if(M.geometryType()==="LineString")return function(z,X){var le=[1/0,1/0,-1/0,-1/0],Me=[1/0,1/0,-1/0,-1/0],Oe=z.canonicalID();if(X.type==="Polygon"){var Ue=Fn(X.coordinates,Me,Oe),$e=Wn(z.geometry(),le,Me,Oe);if(!gn(le,Me))return!1;for(var ct=0,Mt=$e;ct<Mt.length;ct+=1)if(!tn(Mt[ct],Ue))return!1}if(X.type==="MultiPolygon"){var Ct=zn(X.coordinates,Me,Oe),Rt=Wn(z.geometry(),le,Me,Oe);if(!gn(le,Me))return!1;for(var Gt=0,Ut=Rt;Gt<Ut.length;Gt+=1)if(!_n(Ut[Gt],Ct))return!1}return!0}(M,this.geometries)}return!1},tr.prototype.eachChild=function(){},tr.prototype.outputDefined=function(){return!0},tr.prototype.serialize=function(){return["within",this.geojson]};var wr=function(M,z){this.type=z.type,this.name=M,this.boundExpression=z};wr.parse=function(M,z){if(M.length!==2||typeof M[1]!="string")return z.error("'var' expression requires exactly one string literal argument.");var X=M[1];return z.scope.has(X)?new wr(X,z.scope.get(X)):z.error('Unknown variable "'+X+'". Make sure "'+X+'" has been bound in an enclosing "let" expression before using it.',1)},wr.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},wr.prototype.eachChild=function(){},wr.prototype.outputDefined=function(){return!1},wr.prototype.serialize=function(){return["var",this.name]};var pr=function(M,z,X,le,Me){z===void 0&&(z=[]),le===void 0&&(le=new St),Me===void 0&&(Me=[]),this.registry=M,this.path=z,this.key=z.map(function(Oe){return"["+Oe+"]"}).join(""),this.scope=le,this.errors=Me,this.expectedType=X};function rr(M){if(M instanceof wr)return rr(M.boundExpression);if(M instanceof mn&&M.name==="error"||M instanceof Pt||M instanceof tr)return!1;var z=M instanceof er||M instanceof yn,X=!0;return M.eachChild(function(le){X=z?X&&rr(le):X&&le instanceof Qt}),!!X&&qn(M)&&sr(M,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function yr(M,z){for(var X,le,Me=M.length-1,Oe=0,Ue=Me,$e=0;Oe<=Ue;)if(X=M[$e=Math.floor((Oe+Ue)/2)],le=M[$e+1],X<=z){if($e===Me||z<le)return $e;Oe=$e+1}else{if(!(X>z))throw new an("Input is not a number.");Ue=$e-1}return 0}pr.prototype.parse=function(M,z,X,le,Me){return Me===void 0&&(Me={}),z?this.concat(z,X,le)._parse(M,Me):this._parse(M,Me)},pr.prototype._parse=function(M,z){function X(Mt,Ct,Rt){return Rt==="assert"?new yn(Ct,[Mt]):Rt==="coerce"?new er(Ct,[Mt]):Mt}if(M!==null&&typeof M!="string"&&typeof M!="boolean"&&typeof M!="number"||(M=["literal",M]),Array.isArray(M)){if(M.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=M[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Me=this.registry[le];if(Me){var Oe=Me.parse(M,this);if(!Oe)return null;if(this.expectedType){var Ue=this.expectedType,$e=Oe.type;if(Ue.kind!=="string"&&Ue.kind!=="number"&&Ue.kind!=="boolean"&&Ue.kind!=="object"&&Ue.kind!=="array"||$e.kind!=="value")if(Ue.kind!=="color"&&Ue.kind!=="formatted"&&Ue.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(Ue,$e))return null}else Oe=X(Oe,Ue,z.typeAnnotation||"coerce");else Oe=X(Oe,Ue,z.typeAnnotation||"assert")}if(!(Oe instanceof Qt)&&Oe.type.kind!=="resolvedImage"&&rr(Oe)){var ct=new Xt;try{Oe=new Qt(Oe.type,Oe.evaluate(ct))}catch(Mt){return this.error(Mt.message),null}}return Oe}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return M===void 0?this.error("'undefined' value invalid. Use null instead."):typeof M=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof M+" instead.")},pr.prototype.concat=function(M,z,X){var le=typeof M=="number"?this.path.concat(M):this.path,Me=X?this.scope.concat(X):this.scope;return new pr(this.registry,le,z||null,Me,this.errors)},pr.prototype.error=function(M){for(var z=[],X=arguments.length-1;X-- >0;)z[X]=arguments[X+1];var le=""+this.key+z.map(function(Me){return"["+Me+"]"}).join("");this.errors.push(new Tt(le,M))},pr.prototype.checkSubtype=function(M,z){var X=en(M,z);return X&&this.error(X),X};var kr=function(M,z,X){this.type=M,this.input=z,this.labels=[],this.outputs=[];for(var le=0,Me=X;le<Me.length;le+=1){var Oe=Me[le],Ue=Oe[0],$e=Oe[1];this.labels.push(Ue),this.outputs.push($e)}};function Nr(M,z,X){return M*(1-X)+z*X}kr.parse=function(M,z){if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");var X=z.parse(M[1],1,At);if(!X)return null;var le=[],Me=null;z.expectedType&&z.expectedType.kind!=="value"&&(Me=z.expectedType);for(var Oe=1;Oe<M.length;Oe+=2){var Ue=Oe===1?-1/0:M[Oe],$e=M[Oe+1],ct=Oe,Mt=Oe+1;if(typeof Ue!="number")return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(le.length&&le[le.length-1][0]>=Ue)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Ct=z.parse($e,Mt,Me);if(!Ct)return null;Me=Me||Ct.type,le.push([Ue,Ct])}return new kr(Me,X,le)},kr.prototype.evaluate=function(M){var z=this.labels,X=this.outputs;if(z.length===1)return X[0].evaluate(M);var le=this.input.evaluate(M);if(le<=z[0])return X[0].evaluate(M);var Me=z.length;return le>=z[Me-1]?X[Me-1].evaluate(M):X[yr(z,le)].evaluate(M)},kr.prototype.eachChild=function(M){M(this.input);for(var z=0,X=this.outputs;z<X.length;z+=1)M(X[z])},kr.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},kr.prototype.serialize=function(){for(var M=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&M.push(this.labels[z]),M.push(this.outputs[z].serialize());return M};var ti=Object.freeze({__proto__:null,number:Nr,color:function(M,z,X){return new Tn(Nr(M.r,z.r,X),Nr(M.g,z.g,X),Nr(M.b,z.b,X),Nr(M.a,z.a,X))},array:function(M,z,X){return M.map(function(le,Me){return Nr(le,z[Me],X)})}}),mi=.95047,Wi=1,ui=1.08883,Di=4/29,pa=6/29,Da=3*pa*pa,Rr=pa*pa*pa,aa=Math.PI/180,da=180/Math.PI;function Vi(M){return M>Rr?Math.pow(M,.3333333333333333):M/Da+Di}function Vo(M){return M>pa?M*M*M:Da*(M-Di)}function ba(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,.4166666666666667)-.055)}function po(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function vo(M){var z=po(M.r),X=po(M.g),le=po(M.b),Me=Vi((.4124564*z+.3575761*X+.1804375*le)/mi),Oe=Vi((.2126729*z+.7151522*X+.072175*le)/Wi);return{l:116*Oe-16,a:500*(Me-Oe),b:200*(Oe-Vi((.0193339*z+.119192*X+.9503041*le)/ui)),alpha:M.a}}function go(M){var z=(M.l+16)/116,X=isNaN(M.a)?z:z+M.a/500,le=isNaN(M.b)?z:z-M.b/200;return z=Wi*Vo(z),X=mi*Vo(X),le=ui*Vo(le),new Tn(ba(3.2404542*X-1.5371385*z-.4985314*le),ba(-.969266*X+1.8760108*z+.041556*le),ba(.0556434*X-.2040259*z+1.0572252*le),M.alpha)}function za(M,z,X){var le=z-M;return M+X*(le>180||le<-180?le-360*Math.round(le/360):le)}var Qa={forward:vo,reverse:go,interpolate:function(M,z,X){return{l:Nr(M.l,z.l,X),a:Nr(M.a,z.a,X),b:Nr(M.b,z.b,X),alpha:Nr(M.alpha,z.alpha,X)}}},yo={forward:function(M){var z=vo(M),X=z.l,le=z.a,Me=z.b,Oe=Math.atan2(Me,le)*da;return{h:Oe<0?Oe+360:Oe,c:Math.sqrt(le*le+Me*Me),l:X,alpha:M.a}},reverse:function(M){var z=M.h*aa,X=M.c;return go({l:M.l,a:Math.cos(z)*X,b:Math.sin(z)*X,alpha:M.alpha})},interpolate:function(M,z,X){return{h:za(M.h,z.h,X),c:Nr(M.c,z.c,X),l:Nr(M.l,z.l,X),alpha:Nr(M.alpha,z.alpha,X)}}},ai=Object.freeze({__proto__:null,lab:Qa,hcl:yo}),Fi=function(M,z,X,le,Me){this.type=M,this.operator=z,this.interpolation=X,this.input=le,this.labels=[],this.outputs=[];for(var Oe=0,Ue=Me;Oe<Ue.length;Oe+=1){var $e=Ue[Oe],ct=$e[0],Mt=$e[1];this.labels.push(ct),this.outputs.push(Mt)}};function Co(M,z,X,le){var Me=le-X,Oe=M-X;return Me===0?0:z===1?Oe/Me:(Math.pow(z,Oe)-1)/(Math.pow(z,Me)-1)}Fi.interpolationFactor=function(M,z,X,le){var Me=0;if(M.name==="exponential")Me=Co(z,M.base,X,le);else if(M.name==="linear")Me=Co(z,1,X,le);else if(M.name==="cubic-bezier"){var Oe=M.controlPoints;Me=new c(Oe[0],Oe[1],Oe[2],Oe[3]).solve(Co(z,1,X,le))}return Me},Fi.parse=function(M,z){var X=M[0],le=M[1],Me=M[2],Oe=M.slice(3);if(!Array.isArray(le)||le.length===0)return z.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var Ue=le[1];if(typeof Ue!="number")return z.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:Ue}}else{if(le[0]!=="cubic-bezier")return z.error("Unknown interpolation type "+String(le[0]),1,0);var $e=le.slice(1);if($e.length!==4||$e.some(function(Sn){return typeof Sn!="number"||Sn<0||Sn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:$e}}if(M.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(Me=z.parse(Me,2,At)))return null;var ct=[],Mt=null;X==="interpolate-hcl"||X==="interpolate-lab"?Mt=rn:z.expectedType&&z.expectedType.kind!=="value"&&(Mt=z.expectedType);for(var Ct=0;Ct<Oe.length;Ct+=2){var Rt=Oe[Ct],Gt=Oe[Ct+1],Ut=Ct+3,sn=Ct+4;if(typeof Rt!="number")return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(ct.length&&ct[ct.length-1][0]>=Rt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var hn=z.parse(Gt,sn,Mt);if(!hn)return null;Mt=Mt||hn.type,ct.push([Rt,hn])}return Mt.kind==="number"||Mt.kind==="color"||Mt.kind==="array"&&Mt.itemType.kind==="number"&&typeof Mt.N=="number"?new Fi(Mt,X,le,Me,ct):z.error("Type "+Kt(Mt)+" is not interpolatable.")},Fi.prototype.evaluate=function(M){var z=this.labels,X=this.outputs;if(z.length===1)return X[0].evaluate(M);var le=this.input.evaluate(M);if(le<=z[0])return X[0].evaluate(M);var Me=z.length;if(le>=z[Me-1])return X[Me-1].evaluate(M);var Oe=yr(z,le),Ue=z[Oe],$e=z[Oe+1],ct=Fi.interpolationFactor(this.interpolation,le,Ue,$e),Mt=X[Oe].evaluate(M),Ct=X[Oe+1].evaluate(M);return this.operator==="interpolate"?ti[this.type.kind.toLowerCase()](Mt,Ct,ct):this.operator==="interpolate-hcl"?yo.reverse(yo.interpolate(yo.forward(Mt),yo.forward(Ct),ct)):Qa.reverse(Qa.interpolate(Qa.forward(Mt),Qa.forward(Ct),ct))},Fi.prototype.eachChild=function(M){M(this.input);for(var z=0,X=this.outputs;z<X.length;z+=1)M(X[z])},Fi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Fi.prototype.serialize=function(){var M;M=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,M,this.input.serialize()],X=0;X<this.labels.length;X++)z.push(this.labels[X],this.outputs[X].serialize());return z};var mo=function(M,z){this.type=M,this.args=z};mo.parse=function(M,z){if(M.length<2)return z.error("Expectected at least one argument.");var X=null,le=z.expectedType;le&&le.kind!=="value"&&(X=le);for(var Me=[],Oe=0,Ue=M.slice(1);Oe<Ue.length;Oe+=1){var $e=Ue[Oe],ct=z.parse($e,1+Me.length,X,void 0,{typeAnnotation:"omit"});if(!ct)return null;X=X||ct.type,Me.push(ct)}var Mt=le&&Me.some(function(Ct){return en(le,Ct.type)});return new mo(Mt?on:X,Me)},mo.prototype.evaluate=function(M){for(var z,X=null,le=0,Me=0,Oe=this.args;Me<Oe.length&&(le++,(X=Oe[Me].evaluate(M))&&X instanceof cr&&!X.available&&(z||(z=X.name),X=null,le===this.args.length&&(X=z)),X===null);Me+=1);return X},mo.prototype.eachChild=function(M){this.args.forEach(M)},mo.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},mo.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(z){M.push(z.serialize())}),M};var eo=function(M,z){this.type=z.type,this.bindings=[].concat(M),this.result=z};eo.prototype.evaluate=function(M){return this.result.evaluate(M)},eo.prototype.eachChild=function(M){for(var z=0,X=this.bindings;z<X.length;z+=1)M(X[z][1]);M(this.result)},eo.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var X=[],le=1;le<M.length-1;le+=2){var Me=M[le];if(typeof Me!="string")return z.error("Expected string, but found "+typeof Me+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Me))return z.error("Variable names must contain only alphanumeric characters or '_'.",le);var Oe=z.parse(M[le+1],le+1);if(!Oe)return null;X.push([Me,Oe])}var Ue=z.parse(M[M.length-1],M.length-1,z.expectedType,X);return Ue?new eo(X,Ue):null},eo.prototype.outputDefined=function(){return this.result.outputDefined()},eo.prototype.serialize=function(){for(var M=["let"],z=0,X=this.bindings;z<X.length;z+=1){var le=X[z],Me=le[0],Oe=le[1];M.push(Me,Oe.serialize())}return M.push(this.result.serialize()),M};var qo=function(M,z,X){this.type=M,this.index=z,this.input=X};qo.parse=function(M,z){if(M.length!==3)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var X=z.parse(M[1],1,At),le=z.parse(M[2],2,ln(z.expectedType||on));if(!X||!le)return null;var Me=le.type;return new qo(Me.itemType,X,le)},qo.prototype.evaluate=function(M){var z=this.index.evaluate(M),X=this.input.evaluate(M);if(z<0)throw new an("Array index out of bounds: "+z+" < 0.");if(z>=X.length)throw new an("Array index out of bounds: "+z+" > "+(X.length-1)+".");if(z!==Math.floor(z))throw new an("Array index must be an integer, but found "+z+" instead.");return X[z]},qo.prototype.eachChild=function(M){M(this.index),M(this.input)},qo.prototype.outputDefined=function(){return!1},qo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xo=function(M,z){this.type=jt,this.needle=M,this.haystack=z};xo.parse=function(M,z){if(M.length!==3)return z.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var X=z.parse(M[1],1,on),le=z.parse(M[2],2,on);return X&&le?un(X.type,[jt,Ft,At,wt,on])?new xo(X,le):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(X.type)+" instead"):null},xo.prototype.evaluate=function(M){var z=this.needle.evaluate(M),X=this.haystack.evaluate(M);if(!X)return!1;if(!An(z,["boolean","string","number","null"]))throw new an("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Kn(z))+" instead.");if(!An(X,["string","array"]))throw new an("Expected second argument to be of type array or string, but found "+Kt(Kn(X))+" instead.");return X.indexOf(z)>=0},xo.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},xo.prototype.outputDefined=function(){return!0},xo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ho=function(M,z,X){this.type=At,this.needle=M,this.haystack=z,this.fromIndex=X};Ho.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var X=z.parse(M[1],1,on),le=z.parse(M[2],2,on);if(!X||!le)return null;if(!un(X.type,[jt,Ft,At,wt,on]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Kt(X.type)+" instead");if(M.length===4){var Me=z.parse(M[3],3,At);return Me?new Ho(X,le,Me):null}return new Ho(X,le)},Ho.prototype.evaluate=function(M){var z=this.needle.evaluate(M),X=this.haystack.evaluate(M);if(!An(z,["boolean","string","number","null"]))throw new an("Expected first argument to be of type boolean, string, number or null, but found "+Kt(Kn(z))+" instead.");if(!An(X,["string","array"]))throw new an("Expected second argument to be of type array or string, but found "+Kt(Kn(X))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(M);return X.indexOf(z,le)}return X.indexOf(z)},Ho.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Do=function(M,z,X,le,Me,Oe){this.inputType=M,this.type=z,this.input=X,this.cases=le,this.outputs=Me,this.otherwise=Oe};Do.parse=function(M,z){if(M.length<5)return z.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return z.error("Expected an even number of arguments.");var X,le;z.expectedType&&z.expectedType.kind!=="value"&&(le=z.expectedType);for(var Me={},Oe=[],Ue=2;Ue<M.length-1;Ue+=2){var $e=M[Ue],ct=M[Ue+1];Array.isArray($e)||($e=[$e]);var Mt=z.concat(Ue);if($e.length===0)return Mt.error("Expected at least one branch label.");for(var Ct=0,Rt=$e;Ct<Rt.length;Ct+=1){var Gt=Rt[Ct];if(typeof Gt!="number"&&typeof Gt!="string")return Mt.error("Branch labels must be numbers or strings.");if(typeof Gt=="number"&&Math.abs(Gt)>Number.MAX_SAFE_INTEGER)return Mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Gt=="number"&&Math.floor(Gt)!==Gt)return Mt.error("Numeric branch labels must be integer values.");if(X){if(Mt.checkSubtype(X,Kn(Gt)))return null}else X=Kn(Gt);if(Me[String(Gt)]!==void 0)return Mt.error("Branch labels must be unique.");Me[String(Gt)]=Oe.length}var Ut=z.parse(ct,Ue,le);if(!Ut)return null;le=le||Ut.type,Oe.push(Ut)}var sn=z.parse(M[1],1,on);if(!sn)return null;var hn=z.parse(M[M.length-1],M.length-1,le);return hn?sn.type.kind!=="value"&&z.concat(1).checkSubtype(X,sn.type)?null:new Do(X,le,sn,Me,Oe,hn):null},Do.prototype.evaluate=function(M){var z=this.input.evaluate(M);return(Kn(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(M)},Do.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},Do.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},Do.prototype.serialize=function(){for(var M=this,z=["match",this.input.serialize()],X=[],le={},Me=0,Oe=Object.keys(this.cases).sort();Me<Oe.length;Me+=1){var Ue=Oe[Me];(Rt=le[this.cases[Ue]])===void 0?(le[this.cases[Ue]]=X.length,X.push([this.cases[Ue],[Ue]])):X[Rt][1].push(Ue)}for(var $e=function(Ut){return M.inputType.kind==="number"?Number(Ut):Ut},ct=0,Mt=X;ct<Mt.length;ct+=1){var Ct=Mt[ct],Rt=Ct[0],Gt=Ct[1];Gt.length===1?z.push($e(Gt[0])):z.push(Gt.map($e)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var Go=function(M,z,X){this.type=M,this.branches=z,this.otherwise=X};Go.parse=function(M,z){if(M.length<4)return z.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return z.error("Expected an odd number of arguments.");var X;z.expectedType&&z.expectedType.kind!=="value"&&(X=z.expectedType);for(var le=[],Me=1;Me<M.length-1;Me+=2){var Oe=z.parse(M[Me],Me,jt);if(!Oe)return null;var Ue=z.parse(M[Me+1],Me+1,X);if(!Ue)return null;le.push([Oe,Ue]),X=X||Ue.type}var $e=z.parse(M[M.length-1],M.length-1,X);return $e?new Go(X,le,$e):null},Go.prototype.evaluate=function(M){for(var z=0,X=this.branches;z<X.length;z+=1){var le=X[z],Me=le[0],Oe=le[1];if(Me.evaluate(M))return Oe.evaluate(M)}return this.otherwise.evaluate(M)},Go.prototype.eachChild=function(M){for(var z=0,X=this.branches;z<X.length;z+=1){var le=X[z],Me=le[0],Oe=le[1];M(Me),M(Oe)}M(this.otherwise)},Go.prototype.outputDefined=function(){return this.branches.every(function(M){return M[0],M[1].outputDefined()})&&this.otherwise.outputDefined()},Go.prototype.serialize=function(){var M=["case"];return this.eachChild(function(z){M.push(z.serialize())}),M};var bo=function(M,z,X,le){this.type=M,this.input=z,this.beginIndex=X,this.endIndex=le};function Ml(M,z){return M==="=="||M==="!="?z.kind==="boolean"||z.kind==="string"||z.kind==="number"||z.kind==="null"||z.kind==="value":z.kind==="string"||z.kind==="number"||z.kind==="value"}function ll(M,z,X,le){return le.compare(z,X)===0}function us(M,z,X){var le=M!=="=="&&M!=="!=";return function(){function Me(Oe,Ue,$e){this.type=jt,this.lhs=Oe,this.rhs=Ue,this.collator=$e,this.hasUntypedArgument=Oe.type.kind==="value"||Ue.type.kind==="value"}return Me.parse=function(Oe,Ue){if(Oe.length!==3&&Oe.length!==4)return Ue.error("Expected two or three arguments.");var $e=Oe[0],ct=Ue.parse(Oe[1],1,on);if(!ct)return null;if(!Ml($e,ct.type))return Ue.concat(1).error('"'+$e+`" comparisons are not supported for type '`+Kt(ct.type)+"'.");var Mt=Ue.parse(Oe[2],2,on);if(!Mt)return null;if(!Ml($e,Mt.type))return Ue.concat(2).error('"'+$e+`" comparisons are not supported for type '`+Kt(Mt.type)+"'.");if(ct.type.kind!==Mt.type.kind&&ct.type.kind!=="value"&&Mt.type.kind!=="value")return Ue.error("Cannot compare types '"+Kt(ct.type)+"' and '"+Kt(Mt.type)+"'.");le&&(ct.type.kind==="value"&&Mt.type.kind!=="value"?ct=new yn(Mt.type,[ct]):ct.type.kind!=="value"&&Mt.type.kind==="value"&&(Mt=new yn(ct.type,[Mt])));var Ct=null;if(Oe.length===4){if(ct.type.kind!=="string"&&Mt.type.kind!=="string"&&ct.type.kind!=="value"&&Mt.type.kind!=="value")return Ue.error("Cannot use collator to compare non-string types.");if(!(Ct=Ue.parse(Oe[3],3,Ht)))return null}return new Me(ct,Mt,Ct)},Me.prototype.evaluate=function(Oe){var Ue=this.lhs.evaluate(Oe),$e=this.rhs.evaluate(Oe);if(le&&this.hasUntypedArgument){var ct=Kn(Ue),Mt=Kn($e);if(ct.kind!==Mt.kind||ct.kind!=="string"&&ct.kind!=="number")throw new an('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+Mt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var Ct=Kn(Ue),Rt=Kn($e);if(Ct.kind!=="string"||Rt.kind!=="string")return z(Oe,Ue,$e)}return this.collator?X(Oe,Ue,$e,this.collator.evaluate(Oe)):z(Oe,Ue,$e)},Me.prototype.eachChild=function(Oe){Oe(this.lhs),Oe(this.rhs),this.collator&&Oe(this.collator)},Me.prototype.outputDefined=function(){return!0},Me.prototype.serialize=function(){var Oe=[M];return this.eachChild(function(Ue){Oe.push(Ue.serialize())}),Oe},Me}()}bo.parse=function(M,z){if(M.length<=2||M.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var X=z.parse(M[1],1,on),le=z.parse(M[2],2,At);if(!X||!le)return null;if(!un(X.type,[ln(on),Ft,on]))return z.error("Expected first argument to be of type array or string, but found "+Kt(X.type)+" instead");if(M.length===4){var Me=z.parse(M[3],3,At);return Me?new bo(X.type,X,le,Me):null}return new bo(X.type,X,le)},bo.prototype.evaluate=function(M){var z=this.input.evaluate(M),X=this.beginIndex.evaluate(M);if(!An(z,["string","array"]))throw new an("Expected first argument to be of type array or string, but found "+Kt(Kn(z))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(M);return z.slice(X,le)}return z.slice(X)},bo.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var zl=us("==",function(M,z,X){return z===X},ll),Rl=us("!=",function(M,z,X){return z!==X},function(M,z,X,le){return!ll(0,z,X,le)}),cs=us("<",function(M,z,X){return z<X},function(M,z,X,le){return le.compare(z,X)<0}),Bl=us(">",function(M,z,X){return z>X},function(M,z,X,le){return le.compare(z,X)>0}),eu=us("<=",function(M,z,X){return z<=X},function(M,z,X,le){return le.compare(z,X)<=0}),tu=us(">=",function(M,z,X){return z>=X},function(M,z,X,le){return le.compare(z,X)>=0}),fs=function(M,z,X,le,Me){this.type=Ft,this.number=M,this.locale=z,this.currency=X,this.minFractionDigits=le,this.maxFractionDigits=Me};fs.parse=function(M,z){if(M.length!==3)return z.error("Expected two arguments.");var X=z.parse(M[1],1,At);if(!X)return null;var le=M[2];if(typeof le!="object"||Array.isArray(le))return z.error("NumberFormat options argument must be an object.");var Me=null;if(le.locale&&!(Me=z.parse(le.locale,1,Ft)))return null;var Oe=null;if(le.currency&&!(Oe=z.parse(le.currency,1,Ft)))return null;var Ue=null;if(le["min-fraction-digits"]&&!(Ue=z.parse(le["min-fraction-digits"],1,At)))return null;var $e=null;return le["max-fraction-digits"]&&!($e=z.parse(le["max-fraction-digits"],1,At))?null:new fs(X,Me,Oe,Ue,$e)},fs.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},fs.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},fs.prototype.outputDefined=function(){return!1},fs.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var _o=function(M){this.type=At,this.input=M};_o.parse=function(M,z){if(M.length!==2)return z.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var X=z.parse(M[1],1);return X?X.type.kind!=="array"&&X.type.kind!=="string"&&X.type.kind!=="value"?z.error("Expected argument of type string or array, but found "+Kt(X.type)+" instead."):new _o(X):null},_o.prototype.evaluate=function(M){var z=this.input.evaluate(M);if(typeof z=="string"||Array.isArray(z))return z.length;throw new an("Expected value to be of type string or array, but found "+Kt(Kn(z))+" instead.")},_o.prototype.eachChild=function(M){M(this.input)},_o.prototype.outputDefined=function(){return!1},_o.prototype.serialize=function(){var M=["length"];return this.eachChild(function(z){M.push(z.serialize())}),M};var As={"==":zl,"!=":Rl,">":Bl,"<":cs,">=":tu,"<=":eu,array:yn,at:qo,boolean:yn,case:Go,coalesce:mo,collator:Pt,format:Ln,image:Vn,in:xo,"index-of":Ho,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:_o,let:eo,literal:Qt,match:Do,number:yn,"number-format":fs,object:yn,slice:bo,step:kr,string:yn,"to-boolean":er,"to-color":er,"to-number":er,"to-string":er,var:wr,within:tr};function hs(M,z){var X=z[0],le=z[1],Me=z[2],Oe=z[3];X=X.evaluate(M),le=le.evaluate(M),Me=Me.evaluate(M);var Ue=Oe?Oe.evaluate(M):1,$e=Yn(X,le,Me,Ue);if($e)throw new an($e);return new Tn(X/255*Ue,le/255*Ue,Me/255*Ue,Ue)}function Hs(M,z){return M in z}function ps(M,z){var X=z[M];return X===void 0?null:X}function to(M){return{type:M}}function Sl(M){return{result:"success",value:M}}function Wo(M){return{result:"error",value:M}}function Lo(M){return M["property-type"]==="data-driven"||M["property-type"]==="cross-faded-data-driven"}function Io(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function Yo(M){return!!M.expression&&M.expression.interpolated}function Wr(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":M===null?"null":typeof M}function ks(M){return typeof M=="object"&&M!==null&&!Array.isArray(M)}function nu(M){return M}function ul(M,z){var X,le,Me,Oe=z.type==="color",Ue=M.stops&&typeof M.stops[0][0]=="object",$e=Ue||M.property!==void 0,ct=Ue||!$e,Mt=M.type||(Yo(z)?"exponential":"interval");if(Oe&&((M=dt({},M)).stops&&(M.stops=M.stops.map(function(gr){return[gr[0],Tn.parse(gr[1])]})),M.default?M.default=Tn.parse(M.default):M.default=Tn.parse(z.default)),M.colorSpace&&M.colorSpace!=="rgb"&&!ai[M.colorSpace])throw new Error("Unknown color space: "+M.colorSpace);if(Mt==="exponential")X=cl;else if(Mt==="interval")X=ru;else if(Mt==="categorical"){X=Nl,le=Object.create(null);for(var Ct=0,Rt=M.stops;Ct<Rt.length;Ct+=1){var Gt=Rt[Ct];le[Gt[0]]=Gt[1]}Me=typeof M.stops[0][0]}else{if(Mt!=="identity")throw new Error('Unknown function type "'+Mt+'"');X=iu}if(Ue){for(var Ut={},sn=[],hn=0;hn<M.stops.length;hn++){var Sn=M.stops[hn],Mn=Sn[0].zoom;Ut[Mn]===void 0&&(Ut[Mn]={zoom:Mn,type:M.type,property:M.property,default:M.default,stops:[]},sn.push(Mn)),Ut[Mn].stops.push([Sn[0].value,Sn[1]])}for(var Rn=[],Nn=0,Gn=sn;Nn<Gn.length;Nn+=1){var Qn=Gn[Nn];Rn.push([Ut[Qn].zoom,ul(Ut[Qn],z)])}var ar={name:"linear"};return{kind:"composite",interpolationType:ar,interpolationFactor:Fi.interpolationFactor.bind(void 0,ar),zoomStops:Rn.map(function(gr){return gr[0]}),evaluate:function(gr,Tr){var Mr=gr.zoom;return cl({stops:Rn,base:M.base},z,Mr).evaluate(Mr,Tr)}}}if(ct){var xr=Mt==="exponential"?{name:"exponential",base:M.base!==void 0?M.base:1}:null;return{kind:"camera",interpolationType:xr,interpolationFactor:Fi.interpolationFactor.bind(void 0,xr),zoomStops:M.stops.map(function(gr){return gr[0]}),evaluate:function(gr){var Tr=gr.zoom;return X(M,z,Tr,le,Me)}}}return{kind:"source",evaluate:function(gr,Tr){var Mr=Tr&&Tr.properties?Tr.properties[M.property]:void 0;return Mr===void 0?Ms(M.default,z.default):X(M,z,Mr,le,Me)}}}function Ms(M,z,X){return M!==void 0?M:z!==void 0?z:X!==void 0?X:void 0}function Nl(M,z,X,le,Me){return Ms(typeof X===Me?le[X]:void 0,M.default,z.default)}function ru(M,z,X){if(Wr(X)!=="number")return Ms(M.default,z.default);var le=M.stops.length;if(le===1||X<=M.stops[0][0])return M.stops[0][1];if(X>=M.stops[le-1][0])return M.stops[le-1][1];var Me=yr(M.stops.map(function(Oe){return Oe[0]}),X);return M.stops[Me][1]}function cl(M,z,X){var le=M.base!==void 0?M.base:1;if(Wr(X)!=="number")return Ms(M.default,z.default);var Me=M.stops.length;if(Me===1||X<=M.stops[0][0])return M.stops[0][1];if(X>=M.stops[Me-1][0])return M.stops[Me-1][1];var Oe=yr(M.stops.map(function(Rt){return Rt[0]}),X),Ue=function(Rt,Gt,Ut,sn){var hn=sn-Ut,Sn=Rt-Ut;return hn===0?0:Gt===1?Sn/hn:(Math.pow(Gt,Sn)-1)/(Math.pow(Gt,hn)-1)}(X,le,M.stops[Oe][0],M.stops[Oe+1][0]),$e=M.stops[Oe][1],ct=M.stops[Oe+1][1],Mt=ti[z.type]||nu;if(M.colorSpace&&M.colorSpace!=="rgb"){var Ct=ai[M.colorSpace];Mt=function(Rt,Gt){return Ct.reverse(Ct.interpolate(Ct.forward(Rt),Ct.forward(Gt),Ue))}}return typeof $e.evaluate=="function"?{evaluate:function(){for(var Rt=[],Gt=arguments.length;Gt--;)Rt[Gt]=arguments[Gt];var Ut=$e.evaluate.apply(void 0,Rt),sn=ct.evaluate.apply(void 0,Rt);if(Ut!==void 0&&sn!==void 0)return Mt(Ut,sn,Ue)}}:Mt($e,ct,Ue)}function iu(M,z,X){return z.type==="color"?X=Tn.parse(X):z.type==="formatted"?X=Xn.fromString(X.toString()):z.type==="resolvedImage"?X=cr.fromString(X.toString()):Wr(X)===z.type||z.type==="enum"&&z.values[X]||(X=void 0),Ms(X,M.default,z.default)}mn.register(As,{error:[{kind:"error"},[Ft],function(M,z){var X=z[0];throw new an(X.evaluate(M))}],typeof:[Ft,[on],function(M,z){return Kt(Kn(z[0].evaluate(M)))}],"to-rgba":[ln(At,4),[rn],function(M,z){return z[0].evaluate(M).toArray()}],rgb:[rn,[At,At,At],hs],rgba:[rn,[At,At,At,At],hs],has:{type:jt,overloads:[[[Ft],function(M,z){return Hs(z[0].evaluate(M),M.properties())}],[[Ft,nn],function(M,z){var X=z[0],le=z[1];return Hs(X.evaluate(M),le.evaluate(M))}]]},get:{type:on,overloads:[[[Ft],function(M,z){return ps(z[0].evaluate(M),M.properties())}],[[Ft,nn],function(M,z){var X=z[0],le=z[1];return ps(X.evaluate(M),le.evaluate(M))}]]},"feature-state":[on,[Ft],function(M,z){return ps(z[0].evaluate(M),M.featureState||{})}],properties:[nn,[],function(M){return M.properties()}],"geometry-type":[Ft,[],function(M){return M.geometryType()}],id:[on,[],function(M){return M.id()}],zoom:[At,[],function(M){return M.globals.zoom}],"heatmap-density":[At,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[At,[],function(M){return M.globals.lineProgress||0}],accumulated:[on,[],function(M){return M.globals.accumulated===void 0?null:M.globals.accumulated}],"+":[At,to(At),function(M,z){for(var X=0,le=0,Me=z;le<Me.length;le+=1)X+=Me[le].evaluate(M);return X}],"*":[At,to(At),function(M,z){for(var X=1,le=0,Me=z;le<Me.length;le+=1)X*=Me[le].evaluate(M);return X}],"-":{type:At,overloads:[[[At,At],function(M,z){var X=z[0],le=z[1];return X.evaluate(M)-le.evaluate(M)}],[[At],function(M,z){return-z[0].evaluate(M)}]]},"/":[At,[At,At],function(M,z){var X=z[0],le=z[1];return X.evaluate(M)/le.evaluate(M)}],"%":[At,[At,At],function(M,z){var X=z[0],le=z[1];return X.evaluate(M)%le.evaluate(M)}],ln2:[At,[],function(){return Math.LN2}],pi:[At,[],function(){return Math.PI}],e:[At,[],function(){return Math.E}],"^":[At,[At,At],function(M,z){var X=z[0],le=z[1];return Math.pow(X.evaluate(M),le.evaluate(M))}],sqrt:[At,[At],function(M,z){var X=z[0];return Math.sqrt(X.evaluate(M))}],log10:[At,[At],function(M,z){var X=z[0];return Math.log(X.evaluate(M))/Math.LN10}],ln:[At,[At],function(M,z){var X=z[0];return Math.log(X.evaluate(M))}],log2:[At,[At],function(M,z){var X=z[0];return Math.log(X.evaluate(M))/Math.LN2}],sin:[At,[At],function(M,z){var X=z[0];return Math.sin(X.evaluate(M))}],cos:[At,[At],function(M,z){var X=z[0];return Math.cos(X.evaluate(M))}],tan:[At,[At],function(M,z){var X=z[0];return Math.tan(X.evaluate(M))}],asin:[At,[At],function(M,z){var X=z[0];return Math.asin(X.evaluate(M))}],acos:[At,[At],function(M,z){var X=z[0];return Math.acos(X.evaluate(M))}],atan:[At,[At],function(M,z){var X=z[0];return Math.atan(X.evaluate(M))}],min:[At,to(At),function(M,z){return Math.min.apply(Math,z.map(function(X){return X.evaluate(M)}))}],max:[At,to(At),function(M,z){return Math.max.apply(Math,z.map(function(X){return X.evaluate(M)}))}],abs:[At,[At],function(M,z){var X=z[0];return Math.abs(X.evaluate(M))}],round:[At,[At],function(M,z){var X=z[0].evaluate(M);return X<0?-Math.round(-X):Math.round(X)}],floor:[At,[At],function(M,z){var X=z[0];return Math.floor(X.evaluate(M))}],ceil:[At,[At],function(M,z){var X=z[0];return Math.ceil(X.evaluate(M))}],"filter-==":[jt,[Ft,on],function(M,z){var X=z[0],le=z[1];return M.properties()[X.value]===le.value}],"filter-id-==":[jt,[on],function(M,z){var X=z[0];return M.id()===X.value}],"filter-type-==":[jt,[Ft],function(M,z){var X=z[0];return M.geometryType()===X.value}],"filter-<":[jt,[Ft,on],function(M,z){var X=z[0],le=z[1],Me=M.properties()[X.value],Oe=le.value;return typeof Me==typeof Oe&&Me<Oe}],"filter-id-<":[jt,[on],function(M,z){var X=z[0],le=M.id(),Me=X.value;return typeof le==typeof Me&&le<Me}],"filter->":[jt,[Ft,on],function(M,z){var X=z[0],le=z[1],Me=M.properties()[X.value],Oe=le.value;return typeof Me==typeof Oe&&Me>Oe}],"filter-id->":[jt,[on],function(M,z){var X=z[0],le=M.id(),Me=X.value;return typeof le==typeof Me&&le>Me}],"filter-<=":[jt,[Ft,on],function(M,z){var X=z[0],le=z[1],Me=M.properties()[X.value],Oe=le.value;return typeof Me==typeof Oe&&Me<=Oe}],"filter-id-<=":[jt,[on],function(M,z){var X=z[0],le=M.id(),Me=X.value;return typeof le==typeof Me&&le<=Me}],"filter->=":[jt,[Ft,on],function(M,z){var X=z[0],le=z[1],Me=M.properties()[X.value],Oe=le.value;return typeof Me==typeof Oe&&Me>=Oe}],"filter-id->=":[jt,[on],function(M,z){var X=z[0],le=M.id(),Me=X.value;return typeof le==typeof Me&&le>=Me}],"filter-has":[jt,[on],function(M,z){return z[0].value in M.properties()}],"filter-has-id":[jt,[],function(M){return M.id()!==null&&M.id()!==void 0}],"filter-type-in":[jt,[ln(Ft)],function(M,z){return z[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[jt,[ln(on)],function(M,z){return z[0].value.indexOf(M.id())>=0}],"filter-in-small":[jt,[Ft,ln(on)],function(M,z){var X=z[0];return z[1].value.indexOf(M.properties()[X.value])>=0}],"filter-in-large":[jt,[Ft,ln(on)],function(M,z){var X=z[0],le=z[1];return function(Me,Oe,Ue,$e){for(;Ue<=$e;){var ct=Ue+$e>>1;if(Oe[ct]===Me)return!0;Oe[ct]>Me?$e=ct-1:Ue=ct+1}return!1}(M.properties()[X.value],le.value,0,le.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(M,z){var X=z[0],le=z[1];return X.evaluate(M)&&le.evaluate(M)}],[to(jt),function(M,z){for(var X=0,le=z;X<le.length;X+=1)if(!le[X].evaluate(M))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(M,z){var X=z[0],le=z[1];return X.evaluate(M)||le.evaluate(M)}],[to(jt),function(M,z){for(var X=0,le=z;X<le.length;X+=1)if(le[X].evaluate(M))return!0;return!1}]]},"!":[jt,[jt],function(M,z){return!z[0].evaluate(M)}],"is-supported-script":[jt,[Ft],function(M,z){var X=z[0],le=M.globals&&M.globals.isSupportedScript;return!le||le(X.evaluate(M))}],upcase:[Ft,[Ft],function(M,z){return z[0].evaluate(M).toUpperCase()}],downcase:[Ft,[Ft],function(M,z){return z[0].evaluate(M).toLowerCase()}],concat:[Ft,to(on),function(M,z){return z.map(function(X){return or(X.evaluate(M))}).join("")}],"resolved-locale":[Ft,[Ht],function(M,z){return z[0].evaluate(M).resolvedLocale()}]});var Zo=function(M,z){this.expression=M,this._warningHistory={},this._evaluator=new Xt,this._defaultValue=z?function(X){return X.type==="color"&&ks(X.default)?new Tn(0,0,0,0):X.type==="color"?Tn.parse(X.default)||null:X.default===void 0?null:X.default}(z):null,this._enumValues=z&&z.type==="enum"?z.values:null};function ds(M){return Array.isArray(M)&&M.length>0&&typeof M[0]=="string"&&M[0]in As}function Oo(M,z){var X=new pr(As,[],z?function(Me){var Oe={color:rn,string:Ft,number:At,enum:Ft,boolean:jt,formatted:$t,resolvedImage:bn};return Me.type==="array"?ln(Oe[Me.value]||on,Me.length):Oe[Me.type]}(z):void 0),le=X.parse(M,void 0,void 0,void 0,z&&z.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Sl(new Zo(le,z)):Wo(X.errors)}Zo.prototype.evaluateWithoutErrorHandling=function(M,z,X,le,Me,Oe){return this._evaluator.globals=M,this._evaluator.feature=z,this._evaluator.featureState=X,this._evaluator.canonical=le,this._evaluator.availableImages=Me||null,this._evaluator.formattedSection=Oe,this.expression.evaluate(this._evaluator)},Zo.prototype.evaluate=function(M,z,X,le,Me,Oe){this._evaluator.globals=M,this._evaluator.feature=z||null,this._evaluator.featureState=X||null,this._evaluator.canonical=le,this._evaluator.availableImages=Me||null,this._evaluator.formattedSection=Oe||null;try{var Ue=this.expression.evaluate(this._evaluator);if(Ue==null||typeof Ue=="number"&&Ue!=Ue)return this._defaultValue;if(this._enumValues&&!(Ue in this._enumValues))throw new an("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(Ue)+" instead.");return Ue}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,typeof console<"u"&&console.warn($e.message)),this._defaultValue}};var no=function(M,z){this.kind=M,this._styleExpression=z,this.isStateDependent=M!=="constant"&&!Jn(z.expression)};no.prototype.evaluateWithoutErrorHandling=function(M,z,X,le,Me,Oe){return this._styleExpression.evaluateWithoutErrorHandling(M,z,X,le,Me,Oe)},no.prototype.evaluate=function(M,z,X,le,Me,Oe){return this._styleExpression.evaluate(M,z,X,le,Me,Oe)};var Ss=function(M,z,X,le){this.kind=M,this.zoomStops=X,this._styleExpression=z,this.isStateDependent=M!=="camera"&&!Jn(z.expression),this.interpolationType=le};function jl(M,z){if((M=Oo(M,z)).result==="error")return M;var X=M.value.expression,le=qn(X);if(!le&&!Lo(z))return Wo([new Tt("","data expressions not supported")]);var Me=sr(X,["zoom"]);if(!Me&&!Io(z))return Wo([new Tt("","zoom expressions not supported")]);var Oe=fl(X);if(!Oe&&!Me)return Wo([new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Oe instanceof Tt)return Wo([Oe]);if(Oe instanceof Fi&&!Yo(z))return Wo([new Tt("",'"interpolate" expressions cannot be used with this property')]);if(!Oe)return Sl(new no(le?"constant":"source",M.value));var Ue=Oe instanceof Fi?Oe.interpolation:void 0;return Sl(new Ss(le?"camera":"composite",M.value,Oe.labels,Ue))}Ss.prototype.evaluateWithoutErrorHandling=function(M,z,X,le,Me,Oe){return this._styleExpression.evaluateWithoutErrorHandling(M,z,X,le,Me,Oe)},Ss.prototype.evaluate=function(M,z,X,le,Me,Oe){return this._styleExpression.evaluate(M,z,X,le,Me,Oe)},Ss.prototype.interpolationFactor=function(M,z,X){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,M,z,X):0};var Gs=function(M,z){this._parameters=M,this._specification=z,dt(this,ul(this._parameters,this._specification))};function fl(M){var z=null;if(M instanceof eo)z=fl(M.result);else if(M instanceof mo)for(var X=0,le=M.args;X<le.length;X+=1){var Me=le[X];if(z=fl(Me))break}else(M instanceof kr||M instanceof Fi)&&M.input instanceof mn&&M.input.name==="zoom"&&(z=M);return z instanceof Tt||M.eachChild(function(Oe){var Ue=fl(Oe);Ue instanceof Tt?z=Ue:!z&&Ue?z=new Tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):z&&Ue&&z!==Ue&&(z=new Tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),z}function Ra(M){var z=M.key,X=M.value,le=M.valueSpec||{},Me=M.objectElementValidators||{},Oe=M.style,Ue=M.styleSpec,$e=[],ct=Wr(X);if(ct!=="object")return[new at(z,X,"object expected, "+ct+" found")];for(var Mt in X){var Ct=Mt.split(".")[0],Rt=le[Ct]||le["*"],Gt=void 0;if(Me[Ct])Gt=Me[Ct];else if(le[Ct])Gt=Ga;else if(Me["*"])Gt=Me["*"];else{if(!le["*"]){$e.push(new at(z,X[Mt],'unknown property "'+Mt+'"'));continue}Gt=Ga}$e=$e.concat(Gt({key:(z&&z+".")+Mt,value:X[Mt],valueSpec:Rt,style:Oe,styleSpec:Ue,object:X,objectKey:Mt},X))}for(var Ut in le)Me[Ut]||le[Ut].required&&le[Ut].default===void 0&&X[Ut]===void 0&&$e.push(new at(z,X,'missing required property "'+Ut+'"'));return $e}function hl(M){var z=M.value,X=M.valueSpec,le=M.style,Me=M.styleSpec,Oe=M.key,Ue=M.arrayElementValidator||Ga;if(Wr(z)!=="array")return[new at(Oe,z,"array expected, "+Wr(z)+" found")];if(X.length&&z.length!==X.length)return[new at(Oe,z,"array length "+X.length+" expected, length "+z.length+" found")];if(X["min-length"]&&z.length<X["min-length"])return[new at(Oe,z,"array length at least "+X["min-length"]+" expected, length "+z.length+" found")];var $e={type:X.value,values:X.values};Me.$version<7&&($e.function=X.function),Wr(X.value)==="object"&&($e=X.value);for(var ct=[],Mt=0;Mt<z.length;Mt++)ct=ct.concat(Ue({array:z,arrayIndex:Mt,value:z[Mt],valueSpec:$e,style:le,styleSpec:Me,key:Oe+"["+Mt+"]"}));return ct}function Ul(M){var z=M.key,X=M.value,le=M.valueSpec,Me=Wr(X);return Me==="number"&&X!=X&&(Me="NaN"),Me!=="number"?[new at(z,X,"number expected, "+Me+" found")]:"minimum"in le&&X<le.minimum?[new at(z,X,X+" is less than the minimum value "+le.minimum)]:"maximum"in le&&X>le.maximum?[new at(z,X,X+" is greater than the maximum value "+le.maximum)]:[]}function Es(M){var z,X,le,Me=M.valueSpec,Oe=it(M.value.type),Ue={},$e=Oe!=="categorical"&&M.value.property===void 0,ct=!$e,Mt=Wr(M.value.stops)==="array"&&Wr(M.value.stops[0])==="array"&&Wr(M.value.stops[0][0])==="object",Ct=Ra({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Ut){if(Oe==="identity")return[new at(Ut.key,Ut.value,'identity function may not have a "stops" property')];var sn=[],hn=Ut.value;return sn=sn.concat(hl({key:Ut.key,value:hn,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:Rt})),Wr(hn)==="array"&&hn.length===0&&sn.push(new at(Ut.key,hn,"array must have at least one stop")),sn},default:function(Ut){return Ga({key:Ut.key,value:Ut.value,valueSpec:Me,style:Ut.style,styleSpec:Ut.styleSpec})}}});return Oe==="identity"&&$e&&Ct.push(new at(M.key,M.value,'missing required property "property"')),Oe==="identity"||M.value.stops||Ct.push(new at(M.key,M.value,'missing required property "stops"')),Oe==="exponential"&&M.valueSpec.expression&&!Yo(M.valueSpec)&&Ct.push(new at(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&(ct&&!Lo(M.valueSpec)?Ct.push(new at(M.key,M.value,"property functions not supported")):$e&&!Io(M.valueSpec)&&Ct.push(new at(M.key,M.value,"zoom functions not supported"))),Oe!=="categorical"&&!Mt||M.value.property!==void 0||Ct.push(new at(M.key,M.value,'"property" property is required')),Ct;function Rt(Ut){var sn=[],hn=Ut.value,Sn=Ut.key;if(Wr(hn)!=="array")return[new at(Sn,hn,"array expected, "+Wr(hn)+" found")];if(hn.length!==2)return[new at(Sn,hn,"array length 2 expected, length "+hn.length+" found")];if(Mt){if(Wr(hn[0])!=="object")return[new at(Sn,hn,"object expected, "+Wr(hn[0])+" found")];if(hn[0].zoom===void 0)return[new at(Sn,hn,"object stop key must have zoom")];if(hn[0].value===void 0)return[new at(Sn,hn,"object stop key must have value")];if(le&&le>it(hn[0].zoom))return[new at(Sn,hn[0].zoom,"stop zoom values must appear in ascending order")];it(hn[0].zoom)!==le&&(le=it(hn[0].zoom),X=void 0,Ue={}),sn=sn.concat(Ra({key:Sn+"[0]",value:hn[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:Ul,value:Gt}}))}else sn=sn.concat(Gt({key:Sn+"[0]",value:hn[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},hn));return ds(kt(hn[1]))?sn.concat([new at(Sn+"[1]",hn[1],"expressions are not allowed in function stops.")]):sn.concat(Ga({key:Sn+"[1]",value:hn[1],valueSpec:Me,style:Ut.style,styleSpec:Ut.styleSpec}))}function Gt(Ut,sn){var hn=Wr(Ut.value),Sn=it(Ut.value),Mn=Ut.value!==null?Ut.value:sn;if(z){if(hn!==z)return[new at(Ut.key,Mn,hn+" stop domain type must match previous stop domain type "+z)]}else z=hn;if(hn!=="number"&&hn!=="string"&&hn!=="boolean")return[new at(Ut.key,Mn,"stop domain value must be a number, string, or boolean")];if(hn!=="number"&&Oe!=="categorical"){var Rn="number expected, "+hn+" found";return Lo(Me)&&Oe===void 0&&(Rn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(Ut.key,Mn,Rn)]}return Oe!=="categorical"||hn!=="number"||isFinite(Sn)&&Math.floor(Sn)===Sn?Oe!=="categorical"&&hn==="number"&&X!==void 0&&Sn<X?[new at(Ut.key,Mn,"stop domain values must appear in ascending order")]:(X=Sn,Oe==="categorical"&&Sn in Ue?[new at(Ut.key,Mn,"stop domain values must be unique")]:(Ue[Sn]=!0,[])):[new at(Ut.key,Mn,"integer expected, found "+Sn)]}}function vs(M){var z=(M.expressionContext==="property"?jl:Oo)(kt(M.value),M.valueSpec);if(z.result==="error")return z.value.map(function(le){return new at(""+M.key+le.key,M.value,le.message)});var X=z.value.expression||z.value._styleExpression.expression;if(M.expressionContext==="property"&&M.propertyKey==="text-font"&&!X.outputDefined())return[new at(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if(M.expressionContext==="property"&&M.propertyType==="layout"&&!Jn(X))return[new at(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if(M.expressionContext==="filter"&&!Jn(X))return[new at(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&M.expressionContext.indexOf("cluster")===0){if(!sr(X,["zoom","feature-state"]))return[new at(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(M.expressionContext==="cluster-initial"&&!qn(X))return[new at(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(M){var z=M.key,X=M.value,le=M.valueSpec,Me=[];return Array.isArray(le.values)?le.values.indexOf(it(X))===-1&&Me.push(new at(z,X,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(X)+" found")):Object.keys(le.values).indexOf(it(X))===-1&&Me.push(new at(z,X,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(X)+" found")),Me}function gs(M){if(M===!0||M===!1)return!0;if(!Array.isArray(M)||M.length===0)return!1;switch(M[0]){case"has":return M.length>=2&&M[1]!=="$id"&&M[1]!=="$type";case"in":return M.length>=3&&(typeof M[1]!="string"||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return M.length!==3||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var z=0,X=M.slice(1);z<X.length;z+=1){var le=X[z];if(!gs(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}Gs.deserialize=function(M){return new Gs(M._parameters,M._specification)},Gs.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var ys={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ws(M){if(M==null)return{filter:function(){return!0},needGeometry:!1};gs(M)||(M=Xo(M));var z=Oo(M,ys);if(z.result==="error")throw new Error(z.value.map(function(X){return X.key+": "+X.message}).join(", "));return{filter:function(X,le,Me){return z.value.evaluate(X,le,{},Me)},needGeometry:oi(M)}}function pl(M,z){return M<z?-1:M>z?1:0}function oi(M){if(!Array.isArray(M))return!1;if(M[0]==="within")return!0;for(var z=1;z<M.length;z++)if(oi(M[z]))return!0;return!1}function Xo(M){if(!M)return!0;var z,X=M[0];return M.length<=1?X!=="any":X==="=="?oa(M[1],M[2],"=="):X==="!="?ii(oa(M[1],M[2],"==")):X==="<"||X===">"||X==="<="||X===">="?oa(M[1],M[2],X):X==="any"?(z=M.slice(1),["any"].concat(z.map(Xo))):X==="all"?["all"].concat(M.slice(1).map(Xo)):X==="none"?["all"].concat(M.slice(1).map(Xo).map(ii)):X==="in"?ro(M[1],M.slice(2)):X==="!in"?ii(ro(M[1],M.slice(2))):X==="has"?Kr(M[1]):X==="!has"?ii(Kr(M[1])):X!=="within"||M}function oa(M,z,X){switch(M){case"$type":return["filter-type-"+X,z];case"$id":return["filter-id-"+X,z];default:return["filter-"+X,M,z]}}function ro(M,z){if(z.length===0)return!1;switch(M){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(X){return typeof X!=typeof z[0]})?["filter-in-large",M,["literal",z.sort(pl)]]:["filter-in-small",M,["literal",z]]}}function Kr(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function ii(M){return["!",M]}function Ba(M){return gs(kt(M.value))?vs(dt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ds(M)}function Ds(M){var z=M.value,X=M.key;if(Wr(z)!=="array")return[new at(X,z,"array expected, "+Wr(z)+" found")];var le,Me=M.styleSpec,Oe=[];if(z.length<1)return[new at(X,z,"filter array must have at least 1 element")];switch(Oe=Oe.concat(Cs({key:X+"[0]",value:z[0],valueSpec:Me.filter_operator,style:M.style,styleSpec:M.styleSpec})),it(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&it(z[1])==="$type"&&Oe.push(new at(X,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&Oe.push(new at(X,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(le=Wr(z[1]))!=="string"&&Oe.push(new at(X+"[1]",z[1],"string expected, "+le+" found"));for(var Ue=2;Ue<z.length;Ue++)le=Wr(z[Ue]),it(z[1])==="$type"?Oe=Oe.concat(Cs({key:X+"["+Ue+"]",value:z[Ue],valueSpec:Me.geometry_type,style:M.style,styleSpec:M.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Oe.push(new at(X+"["+Ue+"]",z[Ue],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var $e=1;$e<z.length;$e++)Oe=Oe.concat(Ds({key:X+"["+$e+"]",value:z[$e],style:M.style,styleSpec:M.styleSpec}));break;case"has":case"!has":le=Wr(z[1]),z.length!==2?Oe.push(new at(X,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="string"&&Oe.push(new at(X+"[1]",z[1],"string expected, "+le+" found"));break;case"within":le=Wr(z[1]),z.length!==2?Oe.push(new at(X,z,'filter array for "'+z[0]+'" operator must have 2 elements')):le!=="object"&&Oe.push(new at(X+"[1]",z[1],"object expected, "+le+" found"))}return Oe}function Ys(M,z){var X=M.key,le=M.style,Me=M.styleSpec,Oe=M.value,Ue=M.objectKey,$e=Me[z+"_"+M.layerType];if(!$e)return[];var ct=Ue.match(/^(.*)-transition$/);if(z==="paint"&&ct&&$e[ct[1]]&&$e[ct[1]].transition)return Ga({key:X,value:Oe,valueSpec:Me.transition,style:le,styleSpec:Me});var Mt,Ct=M.valueSpec||$e[Ue];if(!Ct)return[new at(X,Oe,'unknown property "'+Ue+'"')];if(Wr(Oe)==="string"&&Lo(Ct)&&!Ct.tokens&&(Mt=/^{([^}]+)}$/.exec(Oe)))return[new at(X,Oe,'"'+Ue+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Mt[1])+" }`.")];var Rt=[];return M.layerType==="symbol"&&(Ue==="text-field"&&le&&!le.glyphs&&Rt.push(new at(X,Oe,'use of "text-field" requires a style "glyphs" property')),Ue==="text-font"&&ks(kt(Oe))&&it(Oe.type)==="identity"&&Rt.push(new at(X,Oe,'"text-font" does not support identity functions'))),Rt.concat(Ga({key:M.key,value:Oe,valueSpec:Ct,style:le,styleSpec:Me,expressionContext:"property",propertyType:z,propertyKey:Ue}))}function dl(M){return Ys(M,"paint")}function Zs(M){return Ys(M,"layout")}function Xs(M){var z=[],X=M.value,le=M.key,Me=M.style,Oe=M.styleSpec;X.type||X.ref||z.push(new at(le,X,'either "type" or "ref" is required'));var Ue,$e=it(X.type),ct=it(X.ref);if(X.id)for(var Mt=it(X.id),Ct=0;Ct<M.arrayIndex;Ct++){var Rt=Me.layers[Ct];it(Rt.id)===Mt&&z.push(new at(le,X.id,'duplicate layer id "'+X.id+'", previously used at line '+Rt.id.__line__))}if("ref"in X)["type","source","source-layer","filter","layout"].forEach(function(sn){sn in X&&z.push(new at(le,X[sn],'"'+sn+'" is prohibited for ref layers'))}),Me.layers.forEach(function(sn){it(sn.id)===ct&&(Ue=sn)}),Ue?Ue.ref?z.push(new at(le,X.ref,"ref cannot reference another ref layer")):$e=it(Ue.type):z.push(new at(le,X.ref,'ref layer "'+ct+'" not found'));else if($e!=="background")if(X.source){var Gt=Me.sources&&Me.sources[X.source],Ut=Gt&&it(Gt.type);Gt?Ut==="vector"&&$e==="raster"?z.push(new at(le,X.source,'layer "'+X.id+'" requires a raster source')):Ut==="raster"&&$e!=="raster"?z.push(new at(le,X.source,'layer "'+X.id+'" requires a vector source')):Ut!=="vector"||X["source-layer"]?Ut==="raster-dem"&&$e!=="hillshade"?z.push(new at(le,X.source,"raster-dem source can only be used with layer type 'hillshade'.")):$e!=="line"||!X.paint||!X.paint["line-gradient"]||Ut==="geojson"&&Gt.lineMetrics||z.push(new at(le,X,'layer "'+X.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new at(le,X,'layer "'+X.id+'" must specify a "source-layer"')):z.push(new at(le,X.source,'source "'+X.source+'" not found'))}else z.push(new at(le,X,'missing required property "source"'));return z=z.concat(Ra({key:le,value:X,valueSpec:Oe.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ga({key:le+".type",value:X.type,valueSpec:Oe.layer.type,style:M.style,styleSpec:M.styleSpec,object:X,objectKey:"type"})},filter:Ba,layout:function(sn){return Ra({layer:X,key:sn.key,value:sn.value,style:sn.style,styleSpec:sn.styleSpec,objectElementValidators:{"*":function(hn){return Zs(dt({layerType:$e},hn))}}})},paint:function(sn){return Ra({layer:X,key:sn.key,value:sn.value,style:sn.style,styleSpec:sn.styleSpec,objectElementValidators:{"*":function(hn){return dl(dt({layerType:$e},hn))}}})}}})),z}function Ha(M){var z=M.value,X=M.key,le=Wr(z);return le!=="string"?[new at(X,z,"string expected, "+le+" found")]:[]}var Jo={promoteId:function(M){var z=M.key,X=M.value;if(Wr(X)==="string")return Ha({key:z,value:X});var le=[];for(var Me in X)le.push.apply(le,Ha({key:z+"."+Me,value:X[Me]}));return le}};function Ko(M){var z=M.value,X=M.key,le=M.styleSpec,Me=M.style;if(!z.type)return[new at(X,z,'"type" is required')];var Oe,Ue=it(z.type);switch(Ue){case"vector":case"raster":case"raster-dem":return Ra({key:X,value:z,valueSpec:le["source_"+Ue.replace("-","_")],style:M.style,styleSpec:le,objectElementValidators:Jo});case"geojson":if(Oe=Ra({key:X,value:z,valueSpec:le.source_geojson,style:Me,styleSpec:le,objectElementValidators:Jo}),z.cluster)for(var $e in z.clusterProperties){var ct=z.clusterProperties[$e],Mt=ct[0],Ct=ct[1],Rt=typeof Mt=="string"?[Mt,["accumulated"],["get",$e]]:Mt;Oe.push.apply(Oe,vs({key:X+"."+$e+".map",value:Ct,expressionContext:"cluster-map"})),Oe.push.apply(Oe,vs({key:X+"."+$e+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return Oe;case"video":return Ra({key:X,value:z,valueSpec:le.source_video,style:Me,styleSpec:le});case"image":return Ra({key:X,value:z,valueSpec:le.source_image,style:Me,styleSpec:le});case"canvas":return[new at(X,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cs({key:X+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Me,styleSpec:le})}}function va(M){var z=M.value,X=M.styleSpec,le=X.light,Me=M.style,Oe=[],Ue=Wr(z);if(z===void 0)return Oe;if(Ue!=="object")return Oe.concat([new at("light",z,"object expected, "+Ue+" found")]);for(var $e in z){var ct=$e.match(/^(.*)-transition$/);Oe=ct&&le[ct[1]]&&le[ct[1]].transition?Oe.concat(Ga({key:$e,value:z[$e],valueSpec:X.transition,style:Me,styleSpec:X})):le[$e]?Oe.concat(Ga({key:$e,value:z[$e],valueSpec:le[$e],style:Me,styleSpec:X})):Oe.concat([new at($e,z[$e],'unknown property "'+$e+'"')])}return Oe}var Js={"*":function(){return[]},array:hl,boolean:function(M){var z=M.value,X=M.key,le=Wr(z);return le!=="boolean"?[new at(X,z,"boolean expected, "+le+" found")]:[]},number:Ul,color:function(M){var z=M.key,X=M.value,le=Wr(X);return le!=="string"?[new at(z,X,"color expected, "+le+" found")]:On(X)===null?[new at(z,X,'color expected, "'+X+'" found')]:[]},constants:ht,enum:Cs,filter:Ba,function:Es,layer:Xs,object:Ra,source:Ko,light:va,string:Ha,formatted:function(M){return Ha(M).length===0?[]:vs(M)},resolvedImage:function(M){return Ha(M).length===0?[]:vs(M)}};function Ga(M){var z=M.value,X=M.valueSpec,le=M.styleSpec;return X.expression&&ks(it(z))?Es(M):X.expression&&ds(kt(z))?vs(M):X.type&&Js[X.type]?Js[X.type](M):Ra(dt({},M,{valueSpec:X.type?le[X.type]:X}))}function Yi(M){var z=M.value,X=M.key,le=Ha(M);return le.length||(z.indexOf("{fontstack}")===-1&&le.push(new at(X,z,'"glyphs" url must include a "{fontstack}" token')),z.indexOf("{range}")===-1&&le.push(new at(X,z,'"glyphs" url must include a "{range}" token'))),le}function $i(M,z){z===void 0&&(z=Be);var X=[];return X=X.concat(Ga({key:"",value:M,valueSpec:z.$root,styleSpec:z,style:M,objectElementValidators:{glyphs:Yi,"*":function(){return[]}}})),M.constants&&(X=X.concat(ht({key:"constants",value:M.constants,style:M,styleSpec:z}))),hi(X)}function hi(M){return[].concat(M).sort(function(z,X){return z.line-X.line})}function Qi(M){return function(){for(var z=[],X=arguments.length;X--;)z[X]=arguments[X];return hi(M.apply(this,z))}}$i.source=Qi(Ko),$i.light=Qi(va),$i.layer=Qi(Xs),$i.filter=Qi(Ba),$i.paintProperty=Qi(dl),$i.layoutProperty=Qi(Zs);var wo=$i,ms=wo.light,io=wo.paintProperty,$o=wo.layoutProperty;function _a(M,z){var X=!1;if(z&&z.length)for(var le=0,Me=z;le<Me.length;le+=1){var Oe=Me[le];M.fire(new bt(new Error(Oe.message))),X=!0}return X}var xs=Wa,Po=3;function Wa(M,z,X){var le=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var Me=new Int32Array(this.arrayBuffer);M=Me[0],z=Me[1],X=Me[2],this.d=z+2*X;for(var Oe=0;Oe<this.d*this.d;Oe++){var Ue=Me[Po+Oe],$e=Me[Po+Oe+1];le.push(Ue===$e?null:Me.subarray(Ue,$e))}var ct=Me[Po+le.length],Mt=Me[Po+le.length+1];this.keys=Me.subarray(ct,Mt),this.bboxes=Me.subarray(Mt),this.insert=this._insertReadonly}else{this.d=z+2*X;for(var Ct=0;Ct<this.d*this.d;Ct++)le.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=M,this.padding=X,this.scale=z/M,this.uid=0;var Rt=X/z*M;this.min=-Rt,this.max=M+Rt}Wa.prototype.insert=function(M,z,X,le,Me){this._forEachCell(z,X,le,Me,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(z),this.bboxes.push(X),this.bboxes.push(le),this.bboxes.push(Me)},Wa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wa.prototype._insertCell=function(M,z,X,le,Me,Oe){this.cells[Me].push(Oe)},Wa.prototype.query=function(M,z,X,le,Me){var Oe=this.min,Ue=this.max;if(M<=Oe&&z<=Oe&&Ue<=X&&Ue<=le&&!Me)return Array.prototype.slice.call(this.keys);var $e=[];return this._forEachCell(M,z,X,le,this._queryCell,$e,{},Me),$e},Wa.prototype._queryCell=function(M,z,X,le,Me,Oe,Ue,$e){var ct=this.cells[Me];if(ct!==null)for(var Mt=this.keys,Ct=this.bboxes,Rt=0;Rt<ct.length;Rt++){var Gt=ct[Rt];if(Ue[Gt]===void 0){var Ut=4*Gt;($e?$e(Ct[Ut+0],Ct[Ut+1],Ct[Ut+2],Ct[Ut+3]):M<=Ct[Ut+2]&&z<=Ct[Ut+3]&&X>=Ct[Ut+0]&&le>=Ct[Ut+1])?(Ue[Gt]=!0,Oe.push(Mt[Gt])):Ue[Gt]=!1}}},Wa.prototype._forEachCell=function(M,z,X,le,Me,Oe,Ue,$e){for(var ct=this._convertToCellCoord(M),Mt=this._convertToCellCoord(z),Ct=this._convertToCellCoord(X),Rt=this._convertToCellCoord(le),Gt=ct;Gt<=Ct;Gt++)for(var Ut=Mt;Ut<=Rt;Ut++){var sn=this.d*Ut+Gt;if((!$e||$e(this._convertFromCellCoord(Gt),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Gt+1),this._convertFromCellCoord(Ut+1)))&&Me.call(this,M,z,X,le,sn,Oe,Ue,$e))return}},Wa.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Wa.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Wa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,z=Po+this.cells.length+1+1,X=0,le=0;le<this.cells.length;le++)X+=this.cells[le].length;var Me=new Int32Array(z+X+this.keys.length+this.bboxes.length);Me[0]=this.extent,Me[1]=this.n,Me[2]=this.padding;for(var Oe=z,Ue=0;Ue<M.length;Ue++){var $e=M[Ue];Me[Po+Ue]=Oe,Me.set($e,Oe),Oe+=$e.length}return Me[Po+M.length]=Oe,Me.set(this.keys,Oe),Oe+=this.keys.length,Me[Po+M.length+1]=Oe,Me.set(this.bboxes,Oe),Oe+=this.bboxes.length,Me.buffer};var Ya=n.ImageData,pi=n.ImageBitmap,ao={};function Sr(M,z,X){X===void 0&&(X={}),Object.defineProperty(z,"_classRegistryKey",{value:M,writeable:!1}),ao[M]={klass:z,omit:X.omit||[],shallow:X.shallow||[]}}for(var Ks in Sr("Object",Object),xs.serialize=function(M,z){var X=M.toArrayBuffer();return z&&z.push(X),{buffer:X}},xs.deserialize=function(M){return new xs(M.buffer)},Sr("Grid",xs),Sr("Color",Tn),Sr("Error",Error),Sr("ResolvedImage",cr),Sr("StylePropertyFunction",Gs),Sr("StyleExpression",Zo,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",Ss),Sr("ZoomConstantExpression",no),Sr("CompoundExpression",mn,{omit:["_evaluate"]}),As)As[Ks]._classRegistryKey||Sr("Expression_"+Ks,As[Ks]);function El(M){return M&&typeof ArrayBuffer<"u"&&(M instanceof ArrayBuffer||M.constructor&&M.constructor.name==="ArrayBuffer")}function Qo(M){return pi&&M instanceof pi}function es(M,z){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(El(M)||Qo(M))return z&&z.push(M),M;if(ArrayBuffer.isView(M)){var X=M;return z&&z.push(X.buffer),X}if(M instanceof Ya)return z&&z.push(M.data.buffer),M;if(Array.isArray(M)){for(var le=[],Me=0,Oe=M;Me<Oe.length;Me+=1){var Ue=Oe[Me];le.push(es(Ue,z))}return le}if(typeof M=="object"){var $e=M.constructor,ct=$e._classRegistryKey;if(!ct)throw new Error("can't serialize object of unregistered class");var Mt=$e.serialize?$e.serialize(M,z):{};if(!$e.serialize){for(var Ct in M)if(M.hasOwnProperty(Ct)&&!(ao[ct].omit.indexOf(Ct)>=0)){var Rt=M[Ct];Mt[Ct]=ao[ct].shallow.indexOf(Ct)>=0?Rt:es(Rt,z)}M instanceof Error&&(Mt.message=M.message)}if(Mt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ct!=="Object"&&(Mt.$name=ct),Mt}throw new Error("can't serialize object of type "+typeof M)}function bs(M){if(M==null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||El(M)||Qo(M)||ArrayBuffer.isView(M)||M instanceof Ya)return M;if(Array.isArray(M))return M.map(bs);if(typeof M=="object"){var z=M.$name||"Object",X=ao[z].klass;if(!X)throw new Error("can't deserialize unregistered class "+z);if(X.deserialize)return X.deserialize(M);for(var le=Object.create(X.prototype),Me=0,Oe=Object.keys(M);Me<Oe.length;Me+=1){var Ue=Oe[Me];if(Ue!=="$name"){var $e=M[Ue];le[Ue]=ao[z].shallow.indexOf(Ue)>=0?$e:bs($e)}}return le}throw new Error("can't deserialize object of type "+typeof M)}var Ls=function(){this.first=!0};Ls.prototype.update=function(M,z){var X=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=X,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=X,!0):(this.lastFloorZoom>X?(this.lastIntegerZoom=X+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<X&&(this.lastIntegerZoom=X,this.lastIntegerZoomTime=z),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=X,!0))};var br={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function $s(M){for(var z=0,X=M;z<X.length;z+=1)if(Fo(X[z].charCodeAt(0)))return!0;return!1}function Fo(M){return!(M!==746&&M!==747&&(M<4352||!(br["Bopomofo Extended"](M)||br.Bopomofo(M)||br["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||br["CJK Compatibility Ideographs"](M)||br["CJK Compatibility"](M)||br["CJK Radicals Supplement"](M)||br["CJK Strokes"](M)||!(!br["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||M===12336)||br["CJK Unified Ideographs Extension A"](M)||br["CJK Unified Ideographs"](M)||br["Enclosed CJK Letters and Months"](M)||br["Hangul Compatibility Jamo"](M)||br["Hangul Jamo Extended-A"](M)||br["Hangul Jamo Extended-B"](M)||br["Hangul Jamo"](M)||br["Hangul Syllables"](M)||br.Hiragana(M)||br["Ideographic Description Characters"](M)||br.Kanbun(M)||br["Kangxi Radicals"](M)||br["Katakana Phonetic Extensions"](M)||br.Katakana(M)&&M!==12540||!(!br["Halfwidth and Fullwidth Forms"](M)||M===65288||M===65289||M===65293||M>=65306&&M<=65310||M===65339||M===65341||M===65343||M>=65371&&M<=65503||M===65507||M>=65512&&M<=65519)||!(!br["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||br["Unified Canadian Aboriginal Syllabics"](M)||br["Unified Canadian Aboriginal Syllabics Extended"](M)||br["Vertical Forms"](M)||br["Yijing Hexagram Symbols"](M)||br["Yi Syllables"](M)||br["Yi Radicals"](M))))}function Zi(M){return!(Fo(M)||function(z){return!!(br["Latin-1 Supplement"](z)&&(z===167||z===169||z===174||z===177||z===188||z===189||z===190||z===215||z===247)||br["General Punctuation"](z)&&(z===8214||z===8224||z===8225||z===8240||z===8241||z===8251||z===8252||z===8258||z===8263||z===8264||z===8265||z===8273)||br["Letterlike Symbols"](z)||br["Number Forms"](z)||br["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||z===9003||z>=9085&&z<=9114||z>=9150&&z<=9165||z===9167||z>=9169&&z<=9179||z>=9186&&z<=9215)||br["Control Pictures"](z)&&z!==9251||br["Optical Character Recognition"](z)||br["Enclosed Alphanumerics"](z)||br["Geometric Shapes"](z)||br["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||br["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||br["CJK Symbols and Punctuation"](z)||br.Katakana(z)||br["Private Use Area"](z)||br["CJK Compatibility Forms"](z)||br["Small Form Variants"](z)||br["Halfwidth and Fullwidth Forms"](z)||z===8734||z===8756||z===8757||z>=9984&&z<=10087||z>=10102&&z<=10131||z===65532||z===65533)}(M))}function ts(M){return br.Arabic(M)||br["Arabic Supplement"](M)||br["Arabic Extended-A"](M)||br["Arabic Presentation Forms-A"](M)||br["Arabic Presentation Forms-B"](M)}function oo(M){return M>=1424&&M<=2303||br["Arabic Presentation Forms-A"](M)||br["Arabic Presentation Forms-B"](M)}function Za(M,z){return!(!z&&oo(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||br.Khmer(M))}function ga(M){for(var z=0,X=M;z<X.length;z+=1)if(oo(X[z].charCodeAt(0)))return!0;return!1}var To="deferred",Xa="loading",zo="loaded",Qs="error",ns=null,Xr="unavailable",ea=null,wa=function(M){M&&typeof M=="string"&&M.indexOf("NetworkError")>-1&&(Xr=Qs),ns&&ns(M)};function Ao(){Ta.fire(new xt("pluginStateChange",{pluginStatus:Xr,pluginURL:ea}))}var Ta=new Ve,Is=function(){return Xr},Os=function(){if(Xr!==To||!ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xr=Xa,Ao(),ea&&pt({url:ea},function(M){M?wa(M):(Xr=zo,Ao())})},Aa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xr===zo||Aa.applyArabicShaping!=null},isLoading:function(){return Xr===Xa},setState:function(M){Xr=M.pluginStatus,ea=M.pluginURL},isParsed:function(){return Aa.applyArabicShaping!=null&&Aa.processBidirectionalText!=null&&Aa.processStyledBidirectionalText!=null},getPluginURL:function(){return ea}},Yr=function(M,z){this.zoom=M,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ls,this.transition={})};Yr.prototype.isSupportedScript=function(M){return function(z,X){for(var le=0,Me=z;le<Me.length;le+=1)if(!Za(Me[le].charCodeAt(0),X))return!1;return!0}(M,Aa.isLoaded())},Yr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Yr.prototype.getCrossfadeParameters=function(){var M=this.zoom,z=M-Math.floor(M),X=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*X}:{fromScale:.5,toScale:1,t:1-(1-X)*z}};var ko=function(M,z){this.property=M,this.value=z,this.expression=function(X,le){if(ks(X))return new Gs(X,le);if(ds(X)){var Me=jl(X,le);if(Me.result==="error")throw new Error(Me.value.map(function(Ue){return Ue.key+": "+Ue.message}).join(", "));return Me.value}var Oe=X;return typeof X=="string"&&le.type==="color"&&(Oe=Tn.parse(X)),{kind:"constant",evaluate:function(){return Oe}}}(z===void 0?M.specification.default:z,M.specification)};ko.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ko.prototype.possiblyEvaluate=function(M,z,X){return this.property.possiblyEvaluate(this,M,z,X)};var _s=function(M){this.property=M,this.value=new ko(M,void 0)};_s.prototype.transitioned=function(M,z){return new Ps(this.property,this.value,z,f({},M.transition,this.transition),M.now)},_s.prototype.untransitioned=function(){return new Ps(this.property,this.value,null,{},0)};var so=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};so.prototype.getValue=function(M){return S(this._values[M].value.value)},so.prototype.setValue=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new _s(this._values[M].property)),this._values[M].value=new ko(this._values[M].property,z===null?void 0:S(z))},so.prototype.getTransition=function(M){return S(this._values[M].transition)},so.prototype.setTransition=function(M,z){this._values.hasOwnProperty(M)||(this._values[M]=new _s(this._values[M].property)),this._values[M].transition=S(z)||void 0},so.prototype.serialize=function(){for(var M={},z=0,X=Object.keys(this._values);z<X.length;z+=1){var le=X[z],Me=this.getValue(le);Me!==void 0&&(M[le]=Me);var Oe=this.getTransition(le);Oe!==void 0&&(M[le+"-transition"]=Oe)}return M},so.prototype.transitioned=function(M,z){for(var X=new Fs(this._properties),le=0,Me=Object.keys(this._values);le<Me.length;le+=1){var Oe=Me[le];X._values[Oe]=this._values[Oe].transitioned(M,z._values[Oe])}return X},so.prototype.untransitioned=function(){for(var M=new Fs(this._properties),z=0,X=Object.keys(this._values);z<X.length;z+=1){var le=X[z];M._values[le]=this._values[le].untransitioned()}return M};var Ps=function(M,z,X,le,Me){this.property=M,this.value=z,this.begin=Me+le.delay||0,this.end=this.begin+le.duration||0,M.specification.transition&&(le.delay||le.duration)&&(this.prior=X)};Ps.prototype.possiblyEvaluate=function(M,z,X){var le=M.now||0,Me=this.value.possiblyEvaluate(M,z,X),Oe=this.prior;if(Oe){if(le>this.end)return this.prior=null,Me;if(this.value.isDataDriven())return this.prior=null,Me;if(le<this.begin)return Oe.possiblyEvaluate(M,z,X);var Ue=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Oe.possiblyEvaluate(M,z,X),Me,function($e){if($e<=0)return 0;if($e>=1)return 1;var ct=$e*$e,Mt=ct*$e;return 4*($e<.5?Mt:3*($e-ct)+Mt-.75)}(Ue))}return Me};var Fs=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Fs.prototype.possiblyEvaluate=function(M,z,X){for(var le=new ws(this._properties),Me=0,Oe=Object.keys(this._values);Me<Oe.length;Me+=1){var Ue=Oe[Me];le._values[Ue]=this._values[Ue].possiblyEvaluate(M,z,X)}return le},Fs.prototype.hasTransition=function(){for(var M=0,z=Object.keys(this._values);M<z.length;M+=1){var X=z[M];if(this._values[X].prior)return!0}return!1};var lo=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};lo.prototype.getValue=function(M){return S(this._values[M].value)},lo.prototype.setValue=function(M,z){this._values[M]=new ko(this._values[M].property,z===null?void 0:S(z))},lo.prototype.serialize=function(){for(var M={},z=0,X=Object.keys(this._values);z<X.length;z+=1){var le=X[z],Me=this.getValue(le);Me!==void 0&&(M[le]=Me)}return M},lo.prototype.possiblyEvaluate=function(M,z,X){for(var le=new ws(this._properties),Me=0,Oe=Object.keys(this._values);Me<Oe.length;Me+=1){var Ue=Oe[Me];le._values[Ue]=this._values[Ue].possiblyEvaluate(M,z,X)}return le};var di=function(M,z,X){this.property=M,this.value=z,this.parameters=X};di.prototype.isConstant=function(){return this.value.kind==="constant"},di.prototype.constantOr=function(M){return this.value.kind==="constant"?this.value.value:M},di.prototype.evaluate=function(M,z,X,le){return this.property.evaluate(this.value,this.parameters,M,z,X,le)};var ws=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ws.prototype.get=function(M){return this._values[M]};var Cr=function(M){this.specification=M};Cr.prototype.possiblyEvaluate=function(M,z){return M.expression.evaluate(z)},Cr.prototype.interpolate=function(M,z,X){var le=ti[this.specification.type];return le?le(M,z,X):M};var Fr=function(M,z){this.specification=M,this.overrides=z};Fr.prototype.possiblyEvaluate=function(M,z,X,le){return M.expression.kind==="constant"||M.expression.kind==="camera"?new di(this,{kind:"constant",value:M.expression.evaluate(z,null,{},X,le)},z):new di(this,M.expression,z)},Fr.prototype.interpolate=function(M,z,X){if(M.value.kind!=="constant"||z.value.kind!=="constant")return M;if(M.value.value===void 0||z.value.value===void 0)return new di(this,{kind:"constant",value:void 0},M.parameters);var le=ti[this.specification.type];return le?new di(this,{kind:"constant",value:le(M.value.value,z.value.value,X)},M.parameters):M},Fr.prototype.evaluate=function(M,z,X,le,Me,Oe){return M.kind==="constant"?M.value:M.evaluate(z,X,le,Me,Oe)};var Na=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(X,le,Me,Oe){if(X.value===void 0)return new di(this,{kind:"constant",value:void 0},le);if(X.expression.kind==="constant"){var Ue=X.expression.evaluate(le,null,{},Me,Oe),$e=X.property.specification.type==="resolvedImage"&&typeof Ue!="string"?Ue.name:Ue,ct=this._calculate($e,$e,$e,le);return new di(this,{kind:"constant",value:ct},le)}if(X.expression.kind==="camera"){var Mt=this._calculate(X.expression.evaluate({zoom:le.zoom-1}),X.expression.evaluate({zoom:le.zoom}),X.expression.evaluate({zoom:le.zoom+1}),le);return new di(this,{kind:"constant",value:Mt},le)}return new di(this,X.expression,le)},z.prototype.evaluate=function(X,le,Me,Oe,Ue,$e){if(X.kind==="source"){var ct=X.evaluate(le,Me,Oe,Ue,$e);return this._calculate(ct,ct,ct,le)}return X.kind==="composite"?this._calculate(X.evaluate({zoom:Math.floor(le.zoom)-1},Me,Oe),X.evaluate({zoom:Math.floor(le.zoom)},Me,Oe),X.evaluate({zoom:Math.floor(le.zoom)+1},Me,Oe),le):X.value},z.prototype._calculate=function(X,le,Me,Oe){return Oe.zoom>Oe.zoomHistory.lastIntegerZoom?{from:X,to:le}:{from:Me,to:le}},z.prototype.interpolate=function(X){return X},z}(Fr),Mo=function(M){this.specification=M};Mo.prototype.possiblyEvaluate=function(M,z,X,le){if(M.value!==void 0){if(M.expression.kind==="constant"){var Me=M.expression.evaluate(z,null,{},X,le);return this._calculate(Me,Me,Me,z)}return this._calculate(M.expression.evaluate(new Yr(Math.floor(z.zoom-1),z)),M.expression.evaluate(new Yr(Math.floor(z.zoom),z)),M.expression.evaluate(new Yr(Math.floor(z.zoom+1),z)),z)}},Mo.prototype._calculate=function(M,z,X,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:M,to:z}:{from:X,to:z}},Mo.prototype.interpolate=function(M){return M};var Ro=function(M){this.specification=M};Ro.prototype.possiblyEvaluate=function(M,z,X,le){return!!M.expression.evaluate(z,null,{},X,le)},Ro.prototype.interpolate=function(){return!1};var zi=function(M){for(var z in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var X=M[z];X.specification.overridable&&this.overridableProperties.push(z);var le=this.defaultPropertyValues[z]=new ko(X,void 0),Me=this.defaultTransitionablePropertyValues[z]=new _s(X);this.defaultTransitioningPropertyValues[z]=Me.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=le.possiblyEvaluate({})}};Sr("DataDrivenProperty",Fr),Sr("DataConstantProperty",Cr),Sr("CrossFadedDataDrivenProperty",Na),Sr("CrossFadedProperty",Mo),Sr("ColorRampProperty",Ro);var So="-transition",si=function(M){function z(X,le){if(M.call(this),this.id=X.id,this.type=X.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},X.type!=="custom"&&(this.metadata=X.metadata,this.minzoom=X.minzoom,this.maxzoom=X.maxzoom,X.type!=="background"&&(this.source=X.source,this.sourceLayer=X["source-layer"],this.filter=X.filter),le.layout&&(this._unevaluatedLayout=new lo(le.layout)),le.paint)){for(var Me in this._transitionablePaint=new so(le.paint),X.paint)this.setPaintProperty(Me,X.paint[Me],{validate:!1});for(var Oe in X.layout)this.setLayoutProperty(Oe,X.layout[Oe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ws(le.paint)}}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(X){return X==="visibility"?this.visibility:this._unevaluatedLayout.getValue(X)},z.prototype.setLayoutProperty=function(X,le,Me){if(Me===void 0&&(Me={}),le!=null){var Oe="layers."+this.id+".layout."+X;if(this._validate($o,Oe,X,le,Me))return}X!=="visibility"?this._unevaluatedLayout.setValue(X,le):this.visibility=le},z.prototype.getPaintProperty=function(X){return y(X,So)?this._transitionablePaint.getTransition(X.slice(0,-11)):this._transitionablePaint.getValue(X)},z.prototype.setPaintProperty=function(X,le,Me){if(Me===void 0&&(Me={}),le!=null){var Oe="layers."+this.id+".paint."+X;if(this._validate(io,Oe,X,le,Me))return!1}if(y(X,So))return this._transitionablePaint.setTransition(X.slice(0,-11),le||void 0),!1;var Ue=this._transitionablePaint._values[X],$e=Ue.property.specification["property-type"]==="cross-faded-data-driven",ct=Ue.value.isDataDriven(),Mt=Ue.value;this._transitionablePaint.setValue(X,le),this._handleSpecialPaintPropertyUpdate(X);var Ct=this._transitionablePaint._values[X].value;return Ct.isDataDriven()||ct||$e||this._handleOverridablePaintPropertyUpdate(X,Mt,Ct)},z.prototype._handleSpecialPaintPropertyUpdate=function(X){},z.prototype._handleOverridablePaintPropertyUpdate=function(X,le,Me){return!1},z.prototype.isHidden=function(X){return!!(this.minzoom&&X<this.minzoom)||!!(this.maxzoom&&X>=this.maxzoom)||this.visibility==="none"},z.prototype.updateTransitions=function(X){this._transitioningPaint=this._transitionablePaint.transitioned(X,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(X,le){X.getCrossfadeParameters&&(this._crossfadeParameters=X.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(X,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(X,void 0,le)},z.prototype.serialize=function(){var X={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(X.layout=X.layout||{},X.layout.visibility=this.visibility),d(X,function(le,Me){return!(le===void 0||Me==="layout"&&!Object.keys(le).length||Me==="paint"&&!Object.keys(le).length)})},z.prototype._validate=function(X,le,Me,Oe,Ue){return Ue===void 0&&(Ue={}),(!Ue||Ue.validate!==!1)&&_a(this,X.call(wo,{key:le,layerType:this.type,objectKey:Me,value:Oe,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var X in this.paint._values){var le=this.paint.get(X);if(le instanceof di&&Lo(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},z}(Ve),Vl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ja=function(M,z){this._structArray=M,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ci=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function xi(M,z){z===void 0&&(z=1);var X=0,le=0;return{members:M.map(function(Me){var Oe,Ue=(Oe=Me.type,Vl[Oe].BYTES_PER_ELEMENT),$e=X=La(X,Math.max(z,Ue)),ct=Me.components||1;return le=Math.max(le,Ue),X+=Ue*ct,{name:Me.name,type:Me.type,components:ct,offset:$e}}),size:La(X,Math.max(le,z)),alignment:z}}function La(M,z){return Math.ceil(M/z)*z}ci.serialize=function(M,z){return M._trim(),z&&(M.isTransferred=!0,z.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},ci.deserialize=function(M){var z=Object.create(this.prototype);return z.arrayBuffer=M.arrayBuffer,z.length=M.length,z.capacity=M.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},ci.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ci.prototype.clear=function(){this.length=0},ci.prototype.resize=function(M){this.reserve(M),this.length=M},ci.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},ci.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var rs=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le){var Me=this.length;return this.resize(Me+1),this.emplace(Me,X,le)},z.prototype.emplace=function(X,le,Me){var Oe=2*X;return this.int16[Oe+0]=le,this.int16[Oe+1]=Me,X},z}(ci);rs.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",rs);var Cl=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,X,le,Me,Oe)},z.prototype.emplace=function(X,le,Me,Oe,Ue){var $e=4*X;return this.int16[$e+0]=le,this.int16[$e+1]=Me,this.int16[$e+2]=Oe,this.int16[$e+3]=Ue,X},z}(ci);Cl.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",Cl);var Ke=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,Me,Oe,Ue,$e)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct){var Mt=6*X;return this.int16[Mt+0]=le,this.int16[Mt+1]=Me,this.int16[Mt+2]=Oe,this.int16[Mt+3]=Ue,this.int16[Mt+4]=$e,this.int16[Mt+5]=ct,X},z}(ci);Ke.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",Ke);var et=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,Me,Oe,Ue,$e)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct){var Mt=4*X,Ct=8*X;return this.int16[Mt+0]=le,this.int16[Mt+1]=Me,this.uint8[Ct+4]=Oe,this.uint8[Ct+5]=Ue,this.uint8[Ct+6]=$e,this.uint8[Ct+7]=ct,X},z}(ci);et.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",et);var ut=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le){var Me=this.length;return this.resize(Me+1),this.emplace(Me,X,le)},z.prototype.emplace=function(X,le,Me){var Oe=2*X;return this.float32[Oe+0]=le,this.float32[Oe+1]=Me,X},z}(ci);ut.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",ut);var j=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt){var Ut=10*X;return this.uint16[Ut+0]=le,this.uint16[Ut+1]=Me,this.uint16[Ut+2]=Oe,this.uint16[Ut+3]=Ue,this.uint16[Ut+4]=$e,this.uint16[Ut+5]=ct,this.uint16[Ut+6]=Mt,this.uint16[Ut+7]=Ct,this.uint16[Ut+8]=Rt,this.uint16[Ut+9]=Gt,X},z}(ci);j.prototype.bytesPerElement=20,Sr("StructArrayLayout10ui20",j);var Y=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut){var sn=this.length;return this.resize(sn+1),this.emplace(sn,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn){var hn=12*X;return this.int16[hn+0]=le,this.int16[hn+1]=Me,this.int16[hn+2]=Oe,this.int16[hn+3]=Ue,this.uint16[hn+4]=$e,this.uint16[hn+5]=ct,this.uint16[hn+6]=Mt,this.uint16[hn+7]=Ct,this.int16[hn+8]=Rt,this.int16[hn+9]=Gt,this.int16[hn+10]=Ut,this.int16[hn+11]=sn,X},z}(ci);Y.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",Y);var G=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,le,Me)},z.prototype.emplace=function(X,le,Me,Oe){var Ue=3*X;return this.float32[Ue+0]=le,this.float32[Ue+1]=Me,this.float32[Ue+2]=Oe,X},z}(ci);G.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",G);var D=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},z.prototype.emplace=function(X,le){var Me=1*X;return this.uint32[Me+0]=le,X},z}(ci);D.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",D);var H=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,X,le,Me,Oe,Ue,$e,ct,Mt,Ct)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt){var Gt=10*X,Ut=5*X;return this.int16[Gt+0]=le,this.int16[Gt+1]=Me,this.int16[Gt+2]=Oe,this.int16[Gt+3]=Ue,this.int16[Gt+4]=$e,this.int16[Gt+5]=ct,this.uint32[Ut+3]=Mt,this.uint16[Gt+8]=Ct,this.uint16[Gt+9]=Rt,X},z}(ci);H.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",H);var Q=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e){var ct=this.length;return this.resize(ct+1),this.emplace(ct,X,le,Me,Oe,Ue,$e)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct){var Mt=6*X;return this.int16[Mt+0]=le,this.int16[Mt+1]=Me,this.int16[Mt+2]=Oe,this.int16[Mt+3]=Ue,this.int16[Mt+4]=$e,this.int16[Mt+5]=ct,X},z}(ci);Q.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",Q);var ie=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue){var $e=this.length;return this.resize($e+1),this.emplace($e,X,le,Me,Oe,Ue)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e){var ct=4*X,Mt=8*X;return this.float32[ct+0]=le,this.float32[ct+1]=Me,this.float32[ct+2]=Oe,this.int16[Mt+6]=Ue,this.int16[Mt+7]=$e,X},z}(ci);ie.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",ie);var ue=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,X,le,Me,Oe)},z.prototype.emplace=function(X,le,Me,Oe,Ue){var $e=12*X,ct=3*X;return this.uint8[$e+0]=le,this.uint8[$e+1]=Me,this.float32[ct+1]=Oe,this.float32[ct+2]=Ue,X},z}(ci);ue.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",ue);var _e=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,le,Me)},z.prototype.emplace=function(X,le,Me,Oe){var Ue=3*X;return this.uint16[Ue+0]=le,this.uint16[Ue+1]=Me,this.uint16[Ue+2]=Oe,X},z}(ci);_e.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",_e);var Ie=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn){var Nn=this.length;return this.resize(Nn+1),this.emplace(Nn,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn,Nn){var Gn=24*X,Qn=12*X,ar=48*X;return this.int16[Gn+0]=le,this.int16[Gn+1]=Me,this.uint16[Gn+2]=Oe,this.uint16[Gn+3]=Ue,this.uint32[Qn+2]=$e,this.uint32[Qn+3]=ct,this.uint32[Qn+4]=Mt,this.uint16[Gn+10]=Ct,this.uint16[Gn+11]=Rt,this.uint16[Gn+12]=Gt,this.float32[Qn+7]=Ut,this.float32[Qn+8]=sn,this.uint8[ar+36]=hn,this.uint8[ar+37]=Sn,this.uint8[ar+38]=Mn,this.uint32[Qn+10]=Rn,this.int16[Gn+22]=Nn,X},z}(ci);Ie.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ie);var ze=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn,Nn,Gn,Qn,ar,xr,gr,Tr,Mr,jr,Ir,Br){var Pr=this.length;return this.resize(Pr+1),this.emplace(Pr,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn,Nn,Gn,Qn,ar,xr,gr,Tr,Mr,jr,Ir,Br)},z.prototype.emplace=function(X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn,Sn,Mn,Rn,Nn,Gn,Qn,ar,xr,gr,Tr,Mr,jr,Ir,Br,Pr){var Lr=34*X,$r=17*X;return this.int16[Lr+0]=le,this.int16[Lr+1]=Me,this.int16[Lr+2]=Oe,this.int16[Lr+3]=Ue,this.int16[Lr+4]=$e,this.int16[Lr+5]=ct,this.int16[Lr+6]=Mt,this.int16[Lr+7]=Ct,this.uint16[Lr+8]=Rt,this.uint16[Lr+9]=Gt,this.uint16[Lr+10]=Ut,this.uint16[Lr+11]=sn,this.uint16[Lr+12]=hn,this.uint16[Lr+13]=Sn,this.uint16[Lr+14]=Mn,this.uint16[Lr+15]=Rn,this.uint16[Lr+16]=Nn,this.uint16[Lr+17]=Gn,this.uint16[Lr+18]=Qn,this.uint16[Lr+19]=ar,this.uint16[Lr+20]=xr,this.uint16[Lr+21]=gr,this.uint16[Lr+22]=Tr,this.uint32[$r+12]=Mr,this.float32[$r+13]=jr,this.float32[$r+14]=Ir,this.float32[$r+15]=Br,this.float32[$r+16]=Pr,X},z}(ci);ze.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",ze);var He=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},z.prototype.emplace=function(X,le){var Me=1*X;return this.float32[Me+0]=le,X},z}(ci);He.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",He);var Ye=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,le,Me)},z.prototype.emplace=function(X,le,Me,Oe){var Ue=3*X;return this.int16[Ue+0]=le,this.int16[Ue+1]=Me,this.int16[Ue+2]=Oe,X},z}(ci);Ye.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",Ye);var nt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,X,le,Me)},z.prototype.emplace=function(X,le,Me,Oe){var Ue=2*X,$e=4*X;return this.uint32[Ue+0]=le,this.uint16[$e+2]=Me,this.uint16[$e+3]=Oe,X},z}(ci);nt.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",nt);var ft=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le){var Me=this.length;return this.resize(Me+1),this.emplace(Me,X,le)},z.prototype.emplace=function(X,le,Me){var Oe=2*X;return this.uint16[Oe+0]=le,this.uint16[Oe+1]=Me,X},z}(ci);ft.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",ft);var gt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X){var le=this.length;return this.resize(le+1),this.emplace(le,X)},z.prototype.emplace=function(X,le){var Me=1*X;return this.uint16[Me+0]=le,X},z}(ci);gt.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",gt);var Et=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(X,le,Me,Oe){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,X,le,Me,Oe)},z.prototype.emplace=function(X,le,Me,Oe,Ue){var $e=4*X;return this.float32[$e+0]=le,this.float32[$e+1]=Me,this.float32[$e+2]=Oe,this.float32[$e+3]=Ue,X},z}(ci);Et.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",Et);var It=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var X={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return X.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},X.x1.get=function(){return this._structArray.int16[this._pos2+2]},X.y1.get=function(){return this._structArray.int16[this._pos2+3]},X.x2.get=function(){return this._structArray.int16[this._pos2+4]},X.y2.get=function(){return this._structArray.int16[this._pos2+5]},X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,X),z}(ja);It.prototype.size=20;var Lt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(X){return new It(this,X)},z}(H);Sr("CollisionBoxArray",Lt);var Bt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},X.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},X.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},X.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},X.segment.get=function(){return this._structArray.uint16[this._pos2+10]},X.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},X.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},X.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},X.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},X.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},X.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},X.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},X.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},X.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},X.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},X.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,X),z}(ja);Bt.prototype.size=48;var Ot=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(X){return new Bt(this,X)},z}(Ie);Sr("PlacedSymbolArray",Ot);var Jt=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var X={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return X.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},X.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},X.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},X.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},X.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},X.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},X.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},X.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},X.key.get=function(){return this._structArray.uint16[this._pos2+8]},X.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},X.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},X.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},X.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},X.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},X.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},X.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},X.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},X.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},X.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},X.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},X.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},X.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},X.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},X.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},X.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},X.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},X.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},X.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},X.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,X),z}(ja);Jt.prototype.size=68;var Yt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(X){return new Jt(this,X)},z}(ze);Sr("SymbolInstanceArray",Yt);var Vt=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getoffsetX=function(X){return this.float32[1*X+0]},z}(He);Sr("GlyphOffsetArray",Vt);var dn=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.getx=function(X){return this.int16[3*X+0]},z.prototype.gety=function(X){return this.int16[3*X+1]},z.prototype.gettileUnitDistanceFromAnchor=function(X){return this.int16[3*X+2]},z}(Ye);Sr("SymbolLineVertexArray",dn);var xn=function(M){function z(){M.apply(this,arguments)}M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z;var X={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return X.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},X.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},X.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,X),z}(ja);xn.prototype.size=8;var En=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.get=function(X){return new xn(this,X)},z}(nt);Sr("FeatureIndexArray",En);var In=xi([{name:"a_pos",components:2,type:"Int16"}],4).members,Hn=function(M){M===void 0&&(M=[]),this.segments=M};function ir(M,z){return 256*(M=u(Math.floor(M),0,255))+u(Math.floor(z),0,255)}Hn.prototype.prepareSegment=function(M,z,X,le){var Me=this.segments[this.segments.length-1];return M>Hn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Hn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!Me||Me.vertexLength+M>Hn.MAX_VERTEX_ARRAY_LENGTH||Me.sortKey!==le)&&(Me={vertexOffset:z.length,primitiveOffset:X.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Me.sortKey=le),this.segments.push(Me)),Me},Hn.prototype.get=function(){return this.segments},Hn.prototype.destroy=function(){for(var M=0,z=this.segments;M<z.length;M+=1){var X=z[M];for(var le in X.vaos)X.vaos[le].destroy()}},Hn.simpleSegment=function(M,z,X,le){return new Hn([{vertexOffset:M,primitiveOffset:z,vertexLength:X,primitiveLength:le,vaos:{},sortKey:0}])},Hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",Hn);var dr=xi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Zn=w(function(M){M.exports=function(z,X){var le,Me,Oe,Ue,$e,ct,Mt,Ct;for(le=3&z.length,Me=z.length-le,Oe=X,$e=3432918353,ct=461845907,Ct=0;Ct<Me;)Mt=255&z.charCodeAt(Ct)|(255&z.charCodeAt(++Ct))<<8|(255&z.charCodeAt(++Ct))<<16|(255&z.charCodeAt(++Ct))<<24,++Ct,Oe=27492+(65535&(Ue=5*(65535&(Oe=(Oe^=Mt=(65535&(Mt=(Mt=(65535&Mt)*$e+(((Mt>>>16)*$e&65535)<<16)&4294967295)<<15|Mt>>>17))*ct+(((Mt>>>16)*ct&65535)<<16)&4294967295)<<13|Oe>>>19))+((5*(Oe>>>16)&65535)<<16)&4294967295))+((58964+(Ue>>>16)&65535)<<16);switch(Mt=0,le){case 3:Mt^=(255&z.charCodeAt(Ct+2))<<16;case 2:Mt^=(255&z.charCodeAt(Ct+1))<<8;case 1:Oe^=Mt=(65535&(Mt=(Mt=(65535&(Mt^=255&z.charCodeAt(Ct)))*$e+(((Mt>>>16)*$e&65535)<<16)&4294967295)<<15|Mt>>>17))*ct+(((Mt>>>16)*ct&65535)<<16)&4294967295}return Oe^=z.length,Oe=2246822507*(65535&(Oe^=Oe>>>16))+((2246822507*(Oe>>>16)&65535)<<16)&4294967295,Oe=3266489909*(65535&(Oe^=Oe>>>13))+((3266489909*(Oe>>>16)&65535)<<16)&4294967295,(Oe^=Oe>>>16)>>>0}}),ur=w(function(M){M.exports=function(z,X){for(var le,Me=z.length,Oe=X^Me,Ue=0;Me>=4;)le=1540483477*(65535&(le=255&z.charCodeAt(Ue)|(255&z.charCodeAt(++Ue))<<8|(255&z.charCodeAt(++Ue))<<16|(255&z.charCodeAt(++Ue))<<24))+((1540483477*(le>>>16)&65535)<<16),Oe=1540483477*(65535&Oe)+((1540483477*(Oe>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Me-=4,++Ue;switch(Me){case 3:Oe^=(255&z.charCodeAt(Ue+2))<<16;case 2:Oe^=(255&z.charCodeAt(Ue+1))<<8;case 1:Oe=1540483477*(65535&(Oe^=255&z.charCodeAt(Ue)))+((1540483477*(Oe>>>16)&65535)<<16)}return Oe=1540483477*(65535&(Oe^=Oe>>>13))+((1540483477*(Oe>>>16)&65535)<<16),(Oe^=Oe>>>15)>>>0}}),_r=Zn,Dr=Zn,nr=ur;_r.murmur3=Dr,_r.murmur2=nr;var lr=function(){this.ids=[],this.positions=[],this.indexed=!1};lr.prototype.add=function(M,z,X,le){this.ids.push(vr(M)),this.positions.push(z,X,le)},lr.prototype.getPositions=function(M){for(var z=vr(M),X=0,le=this.ids.length-1;X<le;){var Me=X+le>>1;this.ids[Me]>=z?le=Me:X=Me+1}for(var Oe=[];this.ids[X]===z;){var Ue=this.positions[3*X],$e=this.positions[3*X+1],ct=this.positions[3*X+2];Oe.push({index:Ue,start:$e,end:ct}),X++}return Oe},lr.serialize=function(M,z){var X=new Float64Array(M.ids),le=new Uint32Array(M.positions);return Er(X,le,0,X.length-1),z&&z.push(X.buffer,le.buffer),{ids:X,positions:le}},lr.deserialize=function(M){var z=new lr;return z.ids=M.ids,z.positions=M.positions,z.indexed=!0,z};var Ar=Math.pow(2,53)-1;function vr(M){var z=+M;return!isNaN(z)&&z<=Ar?z:_r(String(M))}function Er(M,z,X,le){for(;X<le;){for(var Me=M[X+le>>1],Oe=X-1,Ue=le+1;;){do Oe++;while(M[Oe]<Me);do Ue--;while(M[Ue]>Me);if(Oe>=Ue)break;Or(M,Oe,Ue),Or(z,3*Oe,3*Ue),Or(z,3*Oe+1,3*Ue+1),Or(z,3*Oe+2,3*Ue+2)}Ue-X<le-Ue?(Er(M,z,X,Ue),X=Ue+1):(Er(M,z,Ue+1,le),le=Ue)}}function Or(M,z,X){var le=M[z];M[z]=M[X],M[X]=le}Sr("FeaturePositionMap",lr);var Ur=function(M,z){this.gl=M.gl,this.location=z},Vr=function(M){function z(X,le){M.call(this,X,le),this.current=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1i(this.location,X))},z}(Ur),Gr=function(M){function z(X,le){M.call(this,X,le),this.current=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){this.current!==X&&(this.current=X,this.gl.uniform1f(this.location,X))},z}(Ur),Zr=function(M){function z(X,le){M.call(this,X,le),this.current=[0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]||(this.current=X,this.gl.uniform2f(this.location,X[0],X[1]))},z}(Ur),vi=function(M){function z(X,le){M.call(this,X,le),this.current=[0,0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]||(this.current=X,this.gl.uniform3f(this.location,X[0],X[1],X[2]))},z}(Ur),Li=function(M){function z(X,le){M.call(this,X,le),this.current=[0,0,0,0]}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){X[0]===this.current[0]&&X[1]===this.current[1]&&X[2]===this.current[2]&&X[3]===this.current[3]||(this.current=X,this.gl.uniform4f(this.location,X[0],X[1],X[2],X[3]))},z}(Ur),ya=function(M){function z(X,le){M.call(this,X,le),this.current=Tn.transparent}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){X.r===this.current.r&&X.g===this.current.g&&X.b===this.current.b&&X.a===this.current.a||(this.current=X,this.gl.uniform4f(this.location,X.r,X.g,X.b,X.a))},z}(Ur),Xi=new Float32Array(16),sa=function(M){function z(X,le){M.call(this,X,le),this.current=Xi}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.set=function(X){if(X[12]!==this.current[12]||X[0]!==this.current[0])return this.current=X,void this.gl.uniformMatrix4fv(this.location,!1,X);for(var le=1;le<16;le++)if(X[le]!==this.current[le]){this.current=X,this.gl.uniformMatrix4fv(this.location,!1,X);break}},z}(Ur);function bi(M){return[ir(255*M.r,255*M.g),ir(255*M.b,255*M.a)]}var Jr=function(M,z,X){this.value=M,this.uniformNames=z.map(function(le){return"u_"+le}),this.type=X};Jr.prototype.setUniform=function(M,z,X){M.set(X.constantOr(this.value))},Jr.prototype.getBinding=function(M,z,X){return this.type==="color"?new ya(M,z):new Gr(M,z)};var ki=function(M,z){this.uniformNames=z.map(function(X){return"u_"+X}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ki.prototype.setConstantPatternPositions=function(M,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=M.tlbr},ki.prototype.setUniform=function(M,z,X,le){var Me=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Me&&M.set(Me)},ki.prototype.getBinding=function(M,z,X){return X.substr(0,9)==="u_pattern"?new Li(M,z):new Gr(M,z)};var fi=function(M,z,X,le){this.expression=M,this.type=X,this.maxValue=0,this.paintVertexAttributes=z.map(function(Me){return{name:"a_"+Me,type:"Float32",components:X==="color"?2:1,offset:0}}),this.paintVertexArray=new le};fi.prototype.populatePaintArray=function(M,z,X,le,Me){var Oe=this.paintVertexArray.length,Ue=this.expression.evaluate(new Yr(0),z,{},le,[],Me);this.paintVertexArray.resize(M),this._setPaintValue(Oe,M,Ue)},fi.prototype.updatePaintArray=function(M,z,X,le){var Me=this.expression.evaluate({zoom:0},X,le);this._setPaintValue(M,z,Me)},fi.prototype._setPaintValue=function(M,z,X){if(this.type==="color")for(var le=bi(X),Me=M;Me<z;Me++)this.paintVertexArray.emplace(Me,le[0],le[1]);else{for(var Oe=M;Oe<z;Oe++)this.paintVertexArray.emplace(Oe,X);this.maxValue=Math.max(this.maxValue,Math.abs(X))}},fi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qr=function(M,z,X,le,Me,Oe){this.expression=M,this.uniformNames=z.map(function(Ue){return"u_"+Ue+"_t"}),this.type=X,this.useIntegerZoom=le,this.zoom=Me,this.maxValue=0,this.paintVertexAttributes=z.map(function(Ue){return{name:"a_"+Ue,type:"Float32",components:X==="color"?4:2,offset:0}}),this.paintVertexArray=new Oe};Qr.prototype.populatePaintArray=function(M,z,X,le,Me){var Oe=this.expression.evaluate(new Yr(this.zoom),z,{},le,[],Me),Ue=this.expression.evaluate(new Yr(this.zoom+1),z,{},le,[],Me),$e=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue($e,M,Oe,Ue)},Qr.prototype.updatePaintArray=function(M,z,X,le){var Me=this.expression.evaluate({zoom:this.zoom},X,le),Oe=this.expression.evaluate({zoom:this.zoom+1},X,le);this._setPaintValue(M,z,Me,Oe)},Qr.prototype._setPaintValue=function(M,z,X,le){if(this.type==="color")for(var Me=bi(X),Oe=bi(le),Ue=M;Ue<z;Ue++)this.paintVertexArray.emplace(Ue,Me[0],Me[1],Oe[0],Oe[1]);else{for(var $e=M;$e<z;$e++)this.paintVertexArray.emplace($e,X,le);this.maxValue=Math.max(this.maxValue,Math.abs(X),Math.abs(le))}},Qr.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Qr.prototype.setUniform=function(M,z){var X=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,le=u(this.expression.interpolationFactor(X,this.zoom,this.zoom+1),0,1);M.set(le)},Qr.prototype.getBinding=function(M,z,X){return new Gr(M,z)};var Mi=function(M,z,X,le,Me,Oe){this.expression=M,this.type=z,this.useIntegerZoom=X,this.zoom=le,this.layerId=Oe,this.zoomInPaintVertexArray=new Me,this.zoomOutPaintVertexArray=new Me};Mi.prototype.populatePaintArray=function(M,z,X){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(le,M,z.patterns&&z.patterns[this.layerId],X)},Mi.prototype.updatePaintArray=function(M,z,X,le,Me){this._setPaintValues(M,z,X.patterns&&X.patterns[this.layerId],Me)},Mi.prototype._setPaintValues=function(M,z,X,le){if(le&&X){var Me=X.min,Oe=X.mid,Ue=X.max,$e=le[Me],ct=le[Oe],Mt=le[Ue];if($e&&ct&&Mt)for(var Ct=M;Ct<z;Ct++)this.zoomInPaintVertexArray.emplace(Ct,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ct.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ct,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Mt.tl[0],Mt.tl[1],Mt.br[0],Mt.br[1],ct.pixelRatio,Mt.pixelRatio)}},Mi.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,dr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,dr.members,this.expression.isStateDependent))},Mi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ii=function(M,z,X){this.binders={},this._buffers=[];var le=[];for(var Me in M.paint._values)if(X(Me)){var Oe=M.paint.get(Me);if(Oe instanceof di&&Lo(Oe.property.specification)){var Ue=zs(Me,M.type),$e=Oe.value,ct=Oe.property.specification.type,Mt=Oe.property.useIntegerZoom,Ct=Oe.property.specification["property-type"],Rt=Ct==="cross-faded"||Ct==="cross-faded-data-driven";if($e.kind==="constant")this.binders[Me]=Rt?new ki($e.value,Ue):new Jr($e.value,Ue,ct),le.push("/u_"+Me);else if($e.kind==="source"||Rt){var Gt=Rs(Me,ct,"source");this.binders[Me]=Rt?new Mi($e,ct,Mt,z,Gt,M.id):new fi($e,Ue,ct,Gt),le.push("/a_"+Me)}else{var Ut=Rs(Me,ct,"composite");this.binders[Me]=new Qr($e,Ue,ct,Mt,z,Ut),le.push("/z_"+Me)}}}this.cacheKey=le.sort().join("")};Ii.prototype.getMaxValue=function(M){var z=this.binders[M];return z instanceof fi||z instanceof Qr?z.maxValue:0},Ii.prototype.populatePaintArrays=function(M,z,X,le,Me){for(var Oe in this.binders){var Ue=this.binders[Oe];(Ue instanceof fi||Ue instanceof Qr||Ue instanceof Mi)&&Ue.populatePaintArray(M,z,X,le,Me)}},Ii.prototype.setConstantPatternPositions=function(M,z){for(var X in this.binders){var le=this.binders[X];le instanceof ki&&le.setConstantPatternPositions(M,z)}},Ii.prototype.updatePaintArrays=function(M,z,X,le,Me){var Oe=!1;for(var Ue in M)for(var $e=0,ct=z.getPositions(Ue);$e<ct.length;$e+=1){var Mt=ct[$e],Ct=X.feature(Mt.index);for(var Rt in this.binders){var Gt=this.binders[Rt];if((Gt instanceof fi||Gt instanceof Qr||Gt instanceof Mi)&&Gt.expression.isStateDependent===!0){var Ut=le.paint.get(Rt);Gt.expression=Ut.value,Gt.updatePaintArray(Mt.start,Mt.end,Ct,M[Ue],Me),Oe=!0}}}return Oe},Ii.prototype.defines=function(){var M=[];for(var z in this.binders){var X=this.binders[z];(X instanceof Jr||X instanceof ki)&&M.push.apply(M,X.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return M},Ii.prototype.getBinderAttributes=function(){var M=[];for(var z in this.binders){var X=this.binders[z];if(X instanceof fi||X instanceof Qr)for(var le=0;le<X.paintVertexAttributes.length;le++)M.push(X.paintVertexAttributes[le].name);else if(X instanceof Mi)for(var Me=0;Me<dr.members.length;Me++)M.push(dr.members[Me].name)}return M},Ii.prototype.getBinderUniforms=function(){var M=[];for(var z in this.binders){var X=this.binders[z];if(X instanceof Jr||X instanceof ki||X instanceof Qr)for(var le=0,Me=X.uniformNames;le<Me.length;le+=1){var Oe=Me[le];M.push(Oe)}}return M},Ii.prototype.getPaintVertexBuffers=function(){return this._buffers},Ii.prototype.getUniforms=function(M,z){var X=[];for(var le in this.binders){var Me=this.binders[le];if(Me instanceof Jr||Me instanceof ki||Me instanceof Qr)for(var Oe=0,Ue=Me.uniformNames;Oe<Ue.length;Oe+=1){var $e=Ue[Oe];if(z[$e]){var ct=Me.getBinding(M,z[$e],$e);X.push({name:$e,property:le,binding:ct})}}}return X},Ii.prototype.setUniforms=function(M,z,X,le){for(var Me=0,Oe=z;Me<Oe.length;Me+=1){var Ue=Oe[Me],$e=Ue.name,ct=Ue.property,Mt=Ue.binding;this.binders[ct].setUniform(Mt,le,X.get(ct),$e)}},Ii.prototype.updatePaintBuffers=function(M){for(var z in this._buffers=[],this.binders){var X=this.binders[z];if(M&&X instanceof Mi){var le=M.fromScale===2?X.zoomInPaintVertexBuffer:X.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(X instanceof fi||X instanceof Qr)&&X.paintVertexBuffer&&this._buffers.push(X.paintVertexBuffer)}},Ii.prototype.upload=function(M){for(var z in this.binders){var X=this.binders[z];(X instanceof fi||X instanceof Qr||X instanceof Mi)&&X.upload(M)}this.updatePaintBuffers()},Ii.prototype.destroy=function(){for(var M in this.binders){var z=this.binders[M];(z instanceof fi||z instanceof Qr||z instanceof Mi)&&z.destroy()}};var qi=function(M,z,X){X===void 0&&(X=function(){return!0}),this.programConfigurations={};for(var le=0,Me=M;le<Me.length;le+=1){var Oe=Me[le];this.programConfigurations[Oe.id]=new Ii(Oe,z,X)}this.needsUpload=!1,this._featureMap=new lr,this._bufferOffset=0};function zs(M,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(z+"-","").replace(/-/g,"_")]}function Rs(M,z,X){var le={color:{source:ut,composite:Et},number:{source:He,composite:ut}},Me=function(Oe){return{"line-pattern":{source:j,composite:j},"fill-pattern":{source:j,composite:j},"fill-extrusion-pattern":{source:j,composite:j}}[Oe]}(M);return Me&&Me[X]||le[z][X]}qi.prototype.populatePaintArrays=function(M,z,X,le,Me,Oe){for(var Ue in this.programConfigurations)this.programConfigurations[Ue].populatePaintArrays(M,z,le,Me,Oe);z.id!==void 0&&this._featureMap.add(z.id,X,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},qi.prototype.updatePaintArrays=function(M,z,X,le){for(var Me=0,Oe=X;Me<Oe.length;Me+=1){var Ue=Oe[Me];this.needsUpload=this.programConfigurations[Ue.id].updatePaintArrays(M,this._featureMap,z,Ue,le)||this.needsUpload}},qi.prototype.get=function(M){return this.programConfigurations[M]},qi.prototype.upload=function(M){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(M);this.needsUpload=!1}},qi.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},Sr("ConstantBinder",Jr),Sr("CrossFadedConstantBinder",ki),Sr("SourceExpressionBinder",fi),Sr("CrossFadedCompositeBinder",Mi),Sr("CompositeExpressionBinder",Qr),Sr("ProgramConfiguration",Ii,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",qi);var ei=8192,vl=Math.pow(2,14)-1,el=-vl-1;function Bo(M){for(var z=ei/M.extent,X=M.loadGeometry(),le=0;le<X.length;le++)for(var Me=X[le],Oe=0;Oe<Me.length;Oe++){var Ue=Me[Oe],$e=Math.round(Ue.x*z),ct=Math.round(Ue.y*z);Ue.x=u($e,el,vl),Ue.y=u(ct,el,vl),($e<Ue.x||$e>Ue.x+1||ct<Ue.y||ct>Ue.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return X}function Si(M,z){return{type:M.type,id:M.id,properties:M.properties,geometry:z?Bo(M):[]}}function Ua(M,z,X,le,Me){M.emplaceBack(2*z+(le+1)/2,2*X+(Me+1)/2)}var ta=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new rs,this.indexArray=new _e,this.segments=new Hn,this.programConfigurations=new qi(M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function au(M,z){for(var X=0;X<M.length;X++)if(yl(z,M[X]))return!0;for(var le=0;le<z.length;le++)if(yl(M,z[le]))return!0;return!!ql(M,z)}function Uf(M,z,X){return!!yl(M,z)||!!Hl(z,M,X)}function Dc(M,z){if(M.length===1)return Ic(z,M[0]);for(var X=0;X<z.length;X++)for(var le=z[X],Me=0;Me<le.length;Me++)if(yl(M,le[Me]))return!0;for(var Oe=0;Oe<M.length;Oe++)if(Ic(z,M[Oe]))return!0;for(var Ue=0;Ue<z.length;Ue++)if(ql(M,z[Ue]))return!0;return!1}function Vf(M,z,X){if(M.length>1){if(ql(M,z))return!0;for(var le=0;le<z.length;le++)if(Hl(z[le],M,X))return!0}for(var Me=0;Me<M.length;Me++)if(Hl(M[Me],z,X))return!0;return!1}function ql(M,z){if(M.length===0||z.length===0)return!1;for(var X=0;X<M.length-1;X++)for(var le=M[X],Me=M[X+1],Oe=0;Oe<z.length-1;Oe++)if(qf(le,Me,z[Oe],z[Oe+1]))return!0;return!1}function qf(M,z,X,le){return L(M,X,le)!==L(z,X,le)&&L(M,z,X)!==L(M,z,le)}function Hl(M,z,X){var le=X*X;if(z.length===1)return M.distSqr(z[0])<le;for(var Me=1;Me<z.length;Me++)if(Lc(M,z[Me-1],z[Me])<le)return!0;return!1}function Lc(M,z,X){var le=z.distSqr(X);if(le===0)return M.distSqr(z);var Me=((M.x-z.x)*(X.x-z.x)+(M.y-z.y)*(X.y-z.y))/le;return Me<0?M.distSqr(z):Me>1?M.distSqr(X):M.distSqr(X.sub(z)._mult(Me)._add(z))}function Ic(M,z){for(var X,le,Me,Oe=!1,Ue=0;Ue<M.length;Ue++)for(var $e=0,ct=(X=M[Ue]).length-1;$e<X.length;ct=$e++)le=X[$e],Me=X[ct],le.y>z.y!=Me.y>z.y&&z.x<(Me.x-le.x)*(z.y-le.y)/(Me.y-le.y)+le.x&&(Oe=!Oe);return Oe}function yl(M,z){for(var X=!1,le=0,Me=M.length-1;le<M.length;Me=le++){var Oe=M[le],Ue=M[Me];Oe.y>z.y!=Ue.y>z.y&&z.x<(Ue.x-Oe.x)*(z.y-Oe.y)/(Ue.y-Oe.y)+Oe.x&&(X=!X)}return X}function nv(M,z,X){var le=X[0],Me=X[2];if(M.x<le.x&&z.x<le.x||M.x>Me.x&&z.x>Me.x||M.y<le.y&&z.y<le.y||M.y>Me.y&&z.y>Me.y)return!1;var Oe=L(M,z,X[0]);return Oe!==L(M,z,X[1])||Oe!==L(M,z,X[2])||Oe!==L(M,z,X[3])}function Xu(M,z,X){var le=z.paint.get(M).value;return le.kind==="constant"?le.value:X.programConfigurations.get(z.id).getMaxValue(M)}function Oc(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Pc(M,z,X,le,Me){if(!z[0]&&!z[1])return M;var Oe=t.convert(z)._mult(Me);X==="viewport"&&Oe._rotate(-le);for(var Ue=[],$e=0;$e<M.length;$e++){var ct=M[$e];Ue.push(ct.sub(Oe))}return Ue}ta.prototype.populate=function(M,z,X){var le=this.layers[0],Me=[],Oe=null;le.type==="circle"&&(Oe=le.layout.get("circle-sort-key"));for(var Ue=0,$e=M;Ue<$e.length;Ue+=1){var ct=$e[Ue],Mt=ct.feature,Ct=ct.id,Rt=ct.index,Gt=ct.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,sn=Si(Mt,Ut);if(this.layers[0]._featureFilter.filter(new Yr(this.zoom),sn,X)){var hn=Oe?Oe.evaluate(sn,{},X):void 0,Sn={id:Ct,properties:Mt.properties,type:Mt.type,sourceLayerIndex:Gt,index:Rt,geometry:Ut?sn.geometry:Bo(Mt),patterns:{},sortKey:hn};Me.push(Sn)}}Oe&&Me.sort(function(Tr,Mr){return Tr.sortKey-Mr.sortKey});for(var Mn=0,Rn=Me;Mn<Rn.length;Mn+=1){var Nn=Rn[Mn],Gn=Nn,Qn=Gn.geometry,ar=Gn.index,xr=Gn.sourceLayerIndex,gr=M[ar].feature;this.addFeature(Nn,Qn,ar,X),z.featureIndex.insert(gr,Qn,ar,xr,this.index)}},ta.prototype.update=function(M,z,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,X)},ta.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ta.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,In),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ta.prototype.addFeature=function(M,z,X,le){for(var Me=0,Oe=z;Me<Oe.length;Me+=1)for(var Ue=0,$e=Oe[Me];Ue<$e.length;Ue+=1){var ct=$e[Ue],Mt=ct.x,Ct=ct.y;if(!(Mt<0||Mt>=ei||Ct<0||Ct>=ei)){var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),Gt=Rt.vertexLength;Ua(this.layoutVertexArray,Mt,Ct,-1,-1),Ua(this.layoutVertexArray,Mt,Ct,1,-1),Ua(this.layoutVertexArray,Mt,Ct,1,1),Ua(this.layoutVertexArray,Mt,Ct,-1,1),this.indexArray.emplaceBack(Gt,Gt+1,Gt+2),this.indexArray.emplaceBack(Gt,Gt+3,Gt+2),Rt.vertexLength+=4,Rt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,X,{},le)},Sr("CircleBucket",ta,{omit:["layers"]});var rv=new zi({"circle-sort-key":new Fr(Be.layout_circle["circle-sort-key"])}),iv={paint:new zi({"circle-radius":new Fr(Be.paint_circle["circle-radius"]),"circle-color":new Fr(Be.paint_circle["circle-color"]),"circle-blur":new Fr(Be.paint_circle["circle-blur"]),"circle-opacity":new Fr(Be.paint_circle["circle-opacity"]),"circle-translate":new Cr(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Cr(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Cr(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Cr(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fr(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fr(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fr(Be.paint_circle["circle-stroke-opacity"])}),layout:rv},is=typeof Float32Array<"u"?Float32Array:Array;function Hf(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function ip(M,z,X){var le=z[0],Me=z[1],Oe=z[2],Ue=z[3],$e=z[4],ct=z[5],Mt=z[6],Ct=z[7],Rt=z[8],Gt=z[9],Ut=z[10],sn=z[11],hn=z[12],Sn=z[13],Mn=z[14],Rn=z[15],Nn=X[0],Gn=X[1],Qn=X[2],ar=X[3];return M[0]=Nn*le+Gn*$e+Qn*Rt+ar*hn,M[1]=Nn*Me+Gn*ct+Qn*Gt+ar*Sn,M[2]=Nn*Oe+Gn*Mt+Qn*Ut+ar*Mn,M[3]=Nn*Ue+Gn*Ct+Qn*sn+ar*Rn,Nn=X[4],Gn=X[5],Qn=X[6],ar=X[7],M[4]=Nn*le+Gn*$e+Qn*Rt+ar*hn,M[5]=Nn*Me+Gn*ct+Qn*Gt+ar*Sn,M[6]=Nn*Oe+Gn*Mt+Qn*Ut+ar*Mn,M[7]=Nn*Ue+Gn*Ct+Qn*sn+ar*Rn,Nn=X[8],Gn=X[9],Qn=X[10],ar=X[11],M[8]=Nn*le+Gn*$e+Qn*Rt+ar*hn,M[9]=Nn*Me+Gn*ct+Qn*Gt+ar*Sn,M[10]=Nn*Oe+Gn*Mt+Qn*Ut+ar*Mn,M[11]=Nn*Ue+Gn*Ct+Qn*sn+ar*Rn,Nn=X[12],Gn=X[13],Qn=X[14],ar=X[15],M[12]=Nn*le+Gn*$e+Qn*Rt+ar*hn,M[13]=Nn*Me+Gn*ct+Qn*Gt+ar*Sn,M[14]=Nn*Oe+Gn*Mt+Qn*Ut+ar*Mn,M[15]=Nn*Ue+Gn*Ct+Qn*sn+ar*Rn,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,z=0,X=arguments.length;X--;)z+=M[X]*M[X];return Math.sqrt(z)});var av=ip,Fc,ov=function(M,z,X){return M[0]=z[0]-X[0],M[1]=z[1]-X[1],M[2]=z[2]-X[2],M};function zc(M,z,X){var le=z[0],Me=z[1],Oe=z[2],Ue=z[3];return M[0]=X[0]*le+X[4]*Me+X[8]*Oe+X[12]*Ue,M[1]=X[1]*le+X[5]*Me+X[9]*Oe+X[13]*Ue,M[2]=X[2]*le+X[6]*Me+X[10]*Oe+X[14]*Ue,M[3]=X[3]*le+X[7]*Me+X[11]*Oe+X[15]*Ue,M}Fc=new is(3),is!=Float32Array&&(Fc[0]=0,Fc[1]=0,Fc[2]=0),function(){var M=new is(4);is!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[3]=0)}();var sv=function(M){var z=M[0],X=M[1];return z*z+X*X},lv=(function(){var M=new is(2);is!=Float32Array&&(M[0]=0,M[1]=0)}(),function(M){function z(X){M.call(this,X,iv)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(X){return new ta(X)},z.prototype.queryRadius=function(X){var le=X;return Xu("circle-radius",this,le)+Xu("circle-stroke-width",this,le)+Oc(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(X,le,Me,Oe,Ue,$e,ct,Mt){for(var Ct=Pc(X,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ct),Rt=this.paint.get("circle-radius").evaluate(le,Me)+this.paint.get("circle-stroke-width").evaluate(le,Me),Gt=this.paint.get("circle-pitch-alignment")==="map",Ut=Gt?Ct:function(xr,gr){return xr.map(function(Tr){return ap(Tr,gr)})}(Ct,Mt),sn=Gt?Rt*ct:Rt,hn=0,Sn=Oe;hn<Sn.length;hn+=1)for(var Mn=0,Rn=Sn[hn];Mn<Rn.length;Mn+=1){var Nn=Rn[Mn],Gn=Gt?Nn:ap(Nn,Mt),Qn=sn,ar=zc([],[Nn.x,Nn.y,0,1],Mt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Qn*=ar[3]/$e.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Qn*=$e.cameraToCenterDistance/ar[3]),Uf(Ut,Gn,Qn))return!0}return!1},z}(si));function ap(M,z){var X=zc([],[M.x,M.y,0,1],z);return new t(X[0]/X[3],X[1]/X[3])}var op=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(ta);function Gf(M,z,X,le){var Me=z.width,Oe=z.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Me*Oe*X)throw new RangeError("mismatched image size")}else le=new Uint8Array(Me*Oe*X);return M.width=Me,M.height=Oe,M.data=le,M}function sp(M,z,X){var le=z.width,Me=z.height;if(le!==M.width||Me!==M.height){var Oe=Gf({},{width:le,height:Me},X);Wf(M,Oe,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,le),height:Math.min(M.height,Me)},X),M.width=le,M.height=Me,M.data=Oe.data}}function Wf(M,z,X,le,Me,Oe){if(Me.width===0||Me.height===0)return z;if(Me.width>M.width||Me.height>M.height||X.x>M.width-Me.width||X.y>M.height-Me.height)throw new RangeError("out of range source coordinates for image copy");if(Me.width>z.width||Me.height>z.height||le.x>z.width-Me.width||le.y>z.height-Me.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ue=M.data,$e=z.data,ct=0;ct<Me.height;ct++)for(var Mt=((X.y+ct)*M.width+X.x)*Oe,Ct=((le.y+ct)*z.width+le.x)*Oe,Rt=0;Rt<Me.width*Oe;Rt++)$e[Ct+Rt]=Ue[Mt+Rt];return z}Sr("HeatmapBucket",op,{omit:["layers"]});var ou=function(M,z){Gf(this,M,1,z)};ou.prototype.resize=function(M){sp(this,M,1)},ou.prototype.clone=function(){return new ou({width:this.width,height:this.height},new Uint8Array(this.data))},ou.copy=function(M,z,X,le,Me){Wf(M,z,X,le,Me,1)};var Eo=function(M,z){Gf(this,M,4,z)};Eo.prototype.resize=function(M){sp(this,M,4)},Eo.prototype.replace=function(M,z){z?this.data.set(M):M instanceof Uint8ClampedArray?this.data=new Uint8Array(M.buffer):this.data=M},Eo.prototype.clone=function(){return new Eo({width:this.width,height:this.height},new Uint8Array(this.data))},Eo.copy=function(M,z,X,le,Me){Wf(M,z,X,le,Me,4)},Sr("AlphaImage",ou),Sr("RGBAImage",Eo);var uv={paint:new zi({"heatmap-radius":new Fr(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fr(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Cr(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ro(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Cr(Be.paint_heatmap["heatmap-opacity"])})};function lp(M){var z={},X=M.resolution||256,le=M.clips?M.clips.length:1,Me=M.image||new Eo({width:X,height:le}),Oe=function(sn,hn,Sn){z[M.evaluationKey]=Sn;var Mn=M.expression.evaluate(z);Me.data[sn+hn+0]=Math.floor(255*Mn.r/Mn.a),Me.data[sn+hn+1]=Math.floor(255*Mn.g/Mn.a),Me.data[sn+hn+2]=Math.floor(255*Mn.b/Mn.a),Me.data[sn+hn+3]=Math.floor(255*Mn.a)};if(M.clips)for(var Ue=0,$e=0;Ue<le;++Ue,$e+=4*X)for(var ct=0,Mt=0;ct<X;ct++,Mt+=4){var Ct=ct/(X-1),Rt=M.clips[Ue];Oe($e,Mt,Rt.start*(1-Ct)+Rt.end*Ct)}else for(var Gt=0,Ut=0;Gt<X;Gt++,Ut+=4)Oe(0,Ut,Gt/(X-1));return Me}var cv=function(M){function z(X){M.call(this,X,uv),this._updateColorRamp()}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(X){return new op(X)},z.prototype._handleSpecialPaintPropertyUpdate=function(X){X==="heatmap-color"&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){var X=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=lp({expression:X,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},z}(si),fv={paint:new zi({"hillshade-illumination-direction":new Cr(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Cr(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Cr(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Cr(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Cr(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Cr(Be.paint_hillshade["hillshade-accent-color"])})},hv=function(M){function z(X){M.call(this,X,fv)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},z}(si),pv=xi([{name:"a_pos",components:2,type:"Int16"}],4).members,Yf=Rc,dv=Rc;function Rc(M,z,X){X=X||2;var le,Me,Oe,Ue,$e,ct,Mt,Ct=z&&z.length,Rt=Ct?z[0]*X:M.length,Gt=up(M,0,Rt,X,!0),Ut=[];if(!Gt||Gt.next===Gt.prev)return Ut;if(Ct&&(Gt=function(hn,Sn,Mn,Rn){var Nn,Gn,Qn,ar=[];for(Nn=0,Gn=Sn.length;Nn<Gn;Nn++)(Qn=up(hn,Sn[Nn]*Rn,Nn<Gn-1?Sn[Nn+1]*Rn:hn.length,Rn,!1))===Qn.next&&(Qn.steiner=!0),ar.push(wv(Qn));for(ar.sort(xv),Nn=0;Nn<ar.length;Nn++)bv(ar[Nn],Mn),Mn=Gl(Mn,Mn.next);return Mn}(M,z,Gt,X)),M.length>80*X){le=Oe=M[0],Me=Ue=M[1];for(var sn=X;sn<Rt;sn+=X)($e=M[sn])<le&&(le=$e),(ct=M[sn+1])<Me&&(Me=ct),$e>Oe&&(Oe=$e),ct>Ue&&(Ue=ct);Mt=(Mt=Math.max(Oe-le,Ue-Me))!==0?1/Mt:0}return Ju(Gt,Ut,X,le,Me,Mt),Ut}function up(M,z,X,le,Me){var Oe,Ue;if(Me===Jf(M,z,X,le)>0)for(Oe=z;Oe<X;Oe+=le)Ue=hp(Oe,M[Oe],M[Oe+1],Ue);else for(Oe=X-le;Oe>=z;Oe-=le)Ue=hp(Oe,M[Oe],M[Oe+1],Ue);return Ue&&Bc(Ue,Ue.next)&&($u(Ue),Ue=Ue.next),Ue}function Gl(M,z){if(!M)return M;z||(z=M);var X,le=M;do if(X=!1,le.steiner||!Bc(le,le.next)&&la(le.prev,le,le.next)!==0)le=le.next;else{if($u(le),(le=z=le.prev)===le.next)break;X=!0}while(X||le!==z);return z}function Ju(M,z,X,le,Me,Oe,Ue){if(M){!Ue&&Oe&&function(Ct,Rt,Gt,Ut){var sn=Ct;do sn.z===null&&(sn.z=Zf(sn.x,sn.y,Rt,Gt,Ut)),sn.prevZ=sn.prev,sn.nextZ=sn.next,sn=sn.next;while(sn!==Ct);sn.prevZ.nextZ=null,sn.prevZ=null,function(hn){var Sn,Mn,Rn,Nn,Gn,Qn,ar,xr,gr=1;do{for(Mn=hn,hn=null,Gn=null,Qn=0;Mn;){for(Qn++,Rn=Mn,ar=0,Sn=0;Sn<gr&&(ar++,Rn=Rn.nextZ);Sn++);for(xr=gr;ar>0||xr>0&&Rn;)ar!==0&&(xr===0||!Rn||Mn.z<=Rn.z)?(Nn=Mn,Mn=Mn.nextZ,ar--):(Nn=Rn,Rn=Rn.nextZ,xr--),Gn?Gn.nextZ=Nn:hn=Nn,Nn.prevZ=Gn,Gn=Nn;Mn=Rn}Gn.nextZ=null,gr*=2}while(Qn>1)}(sn)}(M,le,Me,Oe);for(var $e,ct,Mt=M;M.prev!==M.next;)if($e=M.prev,ct=M.next,Oe?gv(M,le,Me,Oe):vv(M))z.push($e.i/X),z.push(M.i/X),z.push(ct.i/X),$u(M),M=ct.next,Mt=ct.next;else if((M=ct)===Mt){Ue?Ue===1?Ju(M=yv(Gl(M),z,X),z,X,le,Me,Oe,2):Ue===2&&mv(M,z,X,le,Me,Oe):Ju(Gl(M),z,X,le,Me,Oe,1);break}}}function vv(M){var z=M.prev,X=M,le=M.next;if(la(z,X,le)>=0)return!1;for(var Me=M.next.next;Me!==M.prev;){if(bu(z.x,z.y,X.x,X.y,le.x,le.y,Me.x,Me.y)&&la(Me.prev,Me,Me.next)>=0)return!1;Me=Me.next}return!0}function gv(M,z,X,le){var Me=M.prev,Oe=M,Ue=M.next;if(la(Me,Oe,Ue)>=0)return!1;for(var $e=Me.x<Oe.x?Me.x<Ue.x?Me.x:Ue.x:Oe.x<Ue.x?Oe.x:Ue.x,ct=Me.y<Oe.y?Me.y<Ue.y?Me.y:Ue.y:Oe.y<Ue.y?Oe.y:Ue.y,Mt=Me.x>Oe.x?Me.x>Ue.x?Me.x:Ue.x:Oe.x>Ue.x?Oe.x:Ue.x,Ct=Me.y>Oe.y?Me.y>Ue.y?Me.y:Ue.y:Oe.y>Ue.y?Oe.y:Ue.y,Rt=Zf($e,ct,z,X,le),Gt=Zf(Mt,Ct,z,X,le),Ut=M.prevZ,sn=M.nextZ;Ut&&Ut.z>=Rt&&sn&&sn.z<=Gt;){if(Ut!==M.prev&&Ut!==M.next&&bu(Me.x,Me.y,Oe.x,Oe.y,Ue.x,Ue.y,Ut.x,Ut.y)&&la(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,sn!==M.prev&&sn!==M.next&&bu(Me.x,Me.y,Oe.x,Oe.y,Ue.x,Ue.y,sn.x,sn.y)&&la(sn.prev,sn,sn.next)>=0))return!1;sn=sn.nextZ}for(;Ut&&Ut.z>=Rt;){if(Ut!==M.prev&&Ut!==M.next&&bu(Me.x,Me.y,Oe.x,Oe.y,Ue.x,Ue.y,Ut.x,Ut.y)&&la(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;sn&&sn.z<=Gt;){if(sn!==M.prev&&sn!==M.next&&bu(Me.x,Me.y,Oe.x,Oe.y,Ue.x,Ue.y,sn.x,sn.y)&&la(sn.prev,sn,sn.next)>=0)return!1;sn=sn.nextZ}return!0}function yv(M,z,X){var le=M;do{var Me=le.prev,Oe=le.next.next;!Bc(Me,Oe)&&cp(Me,le,le.next,Oe)&&Ku(Me,Oe)&&Ku(Oe,Me)&&(z.push(Me.i/X),z.push(le.i/X),z.push(Oe.i/X),$u(le),$u(le.next),le=M=Oe),le=le.next}while(le!==M);return Gl(le)}function mv(M,z,X,le,Me,Oe){var Ue=M;do{for(var $e=Ue.next.next;$e!==Ue.prev;){if(Ue.i!==$e.i&&Tv(Ue,$e)){var ct=fp(Ue,$e);return Ue=Gl(Ue,Ue.next),ct=Gl(ct,ct.next),Ju(Ue,z,X,le,Me,Oe),void Ju(ct,z,X,le,Me,Oe)}$e=$e.next}Ue=Ue.next}while(Ue!==M)}function xv(M,z){return M.x-z.x}function bv(M,z){if(z=function(le,Me){var Oe,Ue=Me,$e=le.x,ct=le.y,Mt=-1/0;do{if(ct<=Ue.y&&ct>=Ue.next.y&&Ue.next.y!==Ue.y){var Ct=Ue.x+(ct-Ue.y)*(Ue.next.x-Ue.x)/(Ue.next.y-Ue.y);if(Ct<=$e&&Ct>Mt){if(Mt=Ct,Ct===$e){if(ct===Ue.y)return Ue;if(ct===Ue.next.y)return Ue.next}Oe=Ue.x<Ue.next.x?Ue:Ue.next}}Ue=Ue.next}while(Ue!==Me);if(!Oe)return null;if($e===Mt)return Oe;var Rt,Gt=Oe,Ut=Oe.x,sn=Oe.y,hn=1/0;Ue=Oe;do $e>=Ue.x&&Ue.x>=Ut&&$e!==Ue.x&&bu(ct<sn?$e:Mt,ct,Ut,sn,ct<sn?Mt:$e,ct,Ue.x,Ue.y)&&(Rt=Math.abs(ct-Ue.y)/($e-Ue.x),Ku(Ue,le)&&(Rt<hn||Rt===hn&&(Ue.x>Oe.x||Ue.x===Oe.x&&_v(Oe,Ue)))&&(Oe=Ue,hn=Rt)),Ue=Ue.next;while(Ue!==Gt);return Oe}(M,z)){var X=fp(z,M);Gl(z,z.next),Gl(X,X.next)}}function _v(M,z){return la(M.prev,M,z.prev)<0&&la(z.next,M,M.next)<0}function Zf(M,z,X,le,Me){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-X)*Me)|M<<8))|M<<4))|M<<2))|M<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-le)*Me)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function wv(M){var z=M,X=M;do(z.x<X.x||z.x===X.x&&z.y<X.y)&&(X=z),z=z.next;while(z!==M);return X}function bu(M,z,X,le,Me,Oe,Ue,$e){return(Me-Ue)*(z-$e)-(M-Ue)*(Oe-$e)>=0&&(M-Ue)*(le-$e)-(X-Ue)*(z-$e)>=0&&(X-Ue)*(Oe-$e)-(Me-Ue)*(le-$e)>=0}function Tv(M,z){return M.next.i!==z.i&&M.prev.i!==z.i&&!function(X,le){var Me=X;do{if(Me.i!==X.i&&Me.next.i!==X.i&&Me.i!==le.i&&Me.next.i!==le.i&&cp(Me,Me.next,X,le))return!0;Me=Me.next}while(Me!==X);return!1}(M,z)&&(Ku(M,z)&&Ku(z,M)&&function(X,le){var Me=X,Oe=!1,Ue=(X.x+le.x)/2,$e=(X.y+le.y)/2;do Me.y>$e!=Me.next.y>$e&&Me.next.y!==Me.y&&Ue<(Me.next.x-Me.x)*($e-Me.y)/(Me.next.y-Me.y)+Me.x&&(Oe=!Oe),Me=Me.next;while(Me!==X);return Oe}(M,z)&&(la(M.prev,M,z.prev)||la(M,z.prev,z))||Bc(M,z)&&la(M.prev,M,M.next)>0&&la(z.prev,z,z.next)>0)}function la(M,z,X){return(z.y-M.y)*(X.x-z.x)-(z.x-M.x)*(X.y-z.y)}function Bc(M,z){return M.x===z.x&&M.y===z.y}function cp(M,z,X,le){var Me=jc(la(M,z,X)),Oe=jc(la(M,z,le)),Ue=jc(la(X,le,M)),$e=jc(la(X,le,z));return Me!==Oe&&Ue!==$e||!(Me!==0||!Nc(M,X,z))||!(Oe!==0||!Nc(M,le,z))||!(Ue!==0||!Nc(X,M,le))||!($e!==0||!Nc(X,z,le))}function Nc(M,z,X){return z.x<=Math.max(M.x,X.x)&&z.x>=Math.min(M.x,X.x)&&z.y<=Math.max(M.y,X.y)&&z.y>=Math.min(M.y,X.y)}function jc(M){return M>0?1:M<0?-1:0}function Ku(M,z){return la(M.prev,M,M.next)<0?la(M,z,M.next)>=0&&la(M,M.prev,z)>=0:la(M,z,M.prev)<0||la(M,M.next,z)<0}function fp(M,z){var X=new Xf(M.i,M.x,M.y),le=new Xf(z.i,z.x,z.y),Me=M.next,Oe=z.prev;return M.next=z,z.prev=M,X.next=Me,Me.prev=X,le.next=X,X.prev=le,Oe.next=le,le.prev=Oe,le}function hp(M,z,X,le){var Me=new Xf(M,z,X);return le?(Me.next=le.next,Me.prev=le,le.next.prev=Me,le.next=Me):(Me.prev=Me,Me.next=Me),Me}function $u(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Xf(M,z,X){this.i=M,this.x=z,this.y=X,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jf(M,z,X,le){for(var Me=0,Oe=z,Ue=X-le;Oe<X;Oe+=le)Me+=(M[Ue]-M[Oe])*(M[Oe+1]+M[Ue+1]),Ue=Oe;return Me}function Av(M,z,X,le,Me){pp(M,z,X||0,le||M.length-1,Me||kv)}function pp(M,z,X,le,Me){for(;le>X;){if(le-X>600){var Oe=le-X+1,Ue=z-X+1,$e=Math.log(Oe),ct=.5*Math.exp(2*$e/3),Mt=.5*Math.sqrt($e*ct*(Oe-ct)/Oe)*(Ue-Oe/2<0?-1:1);pp(M,z,Math.max(X,Math.floor(z-Ue*ct/Oe+Mt)),Math.min(le,Math.floor(z+(Oe-Ue)*ct/Oe+Mt)),Me)}var Ct=M[z],Rt=X,Gt=le;for(Qu(M,X,z),Me(M[le],Ct)>0&&Qu(M,X,le);Rt<Gt;){for(Qu(M,Rt,Gt),Rt++,Gt--;Me(M[Rt],Ct)<0;)Rt++;for(;Me(M[Gt],Ct)>0;)Gt--}Me(M[X],Ct)===0?Qu(M,X,Gt):Qu(M,++Gt,le),Gt<=z&&(X=Gt+1),z<=Gt&&(le=Gt-1)}}function Qu(M,z,X){var le=M[z];M[z]=M[X],M[X]=le}function kv(M,z){return M<z?-1:M>z?1:0}function Kf(M,z){var X=M.length;if(X<=1)return[M];for(var le,Me,Oe=[],Ue=0;Ue<X;Ue++){var $e=O(M[Ue]);$e!==0&&(M[Ue].area=Math.abs($e),Me===void 0&&(Me=$e<0),Me===$e<0?(le&&Oe.push(le),le=[M[Ue]]):le.push(M[Ue]))}if(le&&Oe.push(le),z>1)for(var ct=0;ct<Oe.length;ct++)Oe[ct].length<=z||(Av(Oe[ct],z,1,Oe[ct].length-1,Mv),Oe[ct]=Oe[ct].slice(0,z));return Oe}function Mv(M,z){return z.area-M.area}function $f(M,z,X){for(var le=X.patternDependencies,Me=!1,Oe=0,Ue=z;Oe<Ue.length;Oe+=1){var $e=Ue[Oe].paint.get(M+"-pattern");$e.isConstant()||(Me=!0);var ct=$e.constantOr(null);ct&&(Me=!0,le[ct.to]=!0,le[ct.from]=!0)}return Me}function Qf(M,z,X,le,Me){for(var Oe=Me.patternDependencies,Ue=0,$e=z;Ue<$e.length;Ue+=1){var ct=$e[Ue],Mt=ct.paint.get(M+"-pattern").value;if(Mt.kind!=="constant"){var Ct=Mt.evaluate({zoom:le-1},X,{},Me.availableImages),Rt=Mt.evaluate({zoom:le},X,{},Me.availableImages),Gt=Mt.evaluate({zoom:le+1},X,{},Me.availableImages);Ct=Ct&&Ct.name?Ct.name:Ct,Rt=Rt&&Rt.name?Rt.name:Rt,Gt=Gt&&Gt.name?Gt.name:Gt,Oe[Ct]=!0,Oe[Rt]=!0,Oe[Gt]=!0,X.patterns[ct.id]={min:Ct,mid:Rt,max:Gt}}}return X}Rc.deviation=function(M,z,X,le){var Me=z&&z.length,Oe=Me?z[0]*X:M.length,Ue=Math.abs(Jf(M,0,Oe,X));if(Me)for(var $e=0,ct=z.length;$e<ct;$e++){var Mt=z[$e]*X,Ct=$e<ct-1?z[$e+1]*X:M.length;Ue-=Math.abs(Jf(M,Mt,Ct,X))}var Rt=0;for($e=0;$e<le.length;$e+=3){var Gt=le[$e]*X,Ut=le[$e+1]*X,sn=le[$e+2]*X;Rt+=Math.abs((M[Gt]-M[sn])*(M[Ut+1]-M[Gt+1])-(M[Gt]-M[Ut])*(M[sn+1]-M[Gt+1]))}return Ue===0&&Rt===0?0:Math.abs((Rt-Ue)/Ue)},Rc.flatten=function(M){for(var z=M[0][0].length,X={vertices:[],holes:[],dimensions:z},le=0,Me=0;Me<M.length;Me++){for(var Oe=0;Oe<M[Me].length;Oe++)for(var Ue=0;Ue<z;Ue++)X.vertices.push(M[Me][Oe][Ue]);Me>0&&(le+=M[Me-1].length,X.holes.push(le))}return X},Yf.default=dv;var tl=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rs,this.indexArray=new _e,this.indexArray2=new ft,this.programConfigurations=new qi(M.layers,M.zoom),this.segments=new Hn,this.segments2=new Hn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};tl.prototype.populate=function(M,z,X){this.hasPattern=$f("fill",this.layers,z);for(var le=this.layers[0].layout.get("fill-sort-key"),Me=[],Oe=0,Ue=M;Oe<Ue.length;Oe+=1){var $e=Ue[Oe],ct=$e.feature,Mt=$e.id,Ct=$e.index,Rt=$e.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Ut=Si(ct,Gt);if(this.layers[0]._featureFilter.filter(new Yr(this.zoom),Ut,X)){var sn=le?le.evaluate(Ut,{},X,z.availableImages):void 0,hn={id:Mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Rt,index:Ct,geometry:Gt?Ut.geometry:Bo(ct),patterns:{},sortKey:sn};Me.push(hn)}}le&&Me.sort(function(Tr,Mr){return Tr.sortKey-Mr.sortKey});for(var Sn=0,Mn=Me;Sn<Mn.length;Sn+=1){var Rn=Mn[Sn],Nn=Rn,Gn=Nn.geometry,Qn=Nn.index,ar=Nn.sourceLayerIndex;if(this.hasPattern){var xr=Qf("fill",this.layers,Rn,this.zoom,z);this.patternFeatures.push(xr)}else this.addFeature(Rn,Gn,Qn,X,{});var gr=M[Qn].feature;z.featureIndex.insert(gr,Gn,Qn,ar,this.index)}},tl.prototype.update=function(M,z,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,X)},tl.prototype.addFeatures=function(M,z,X){for(var le=0,Me=this.patternFeatures;le<Me.length;le+=1){var Oe=Me[le];this.addFeature(Oe,Oe.geometry,Oe.index,z,X)}},tl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},tl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},tl.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,pv),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},tl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},tl.prototype.addFeature=function(M,z,X,le,Me){for(var Oe=0,Ue=Kf(z,500);Oe<Ue.length;Oe+=1){for(var $e=Ue[Oe],ct=0,Mt=0,Ct=$e;Mt<Ct.length;Mt+=1)ct+=Ct[Mt].length;for(var Rt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),Gt=Rt.vertexLength,Ut=[],sn=[],hn=0,Sn=$e;hn<Sn.length;hn+=1){var Mn=Sn[hn];if(Mn.length!==0){Mn!==$e[0]&&sn.push(Ut.length/2);var Rn=this.segments2.prepareSegment(Mn.length,this.layoutVertexArray,this.indexArray2),Nn=Rn.vertexLength;this.layoutVertexArray.emplaceBack(Mn[0].x,Mn[0].y),this.indexArray2.emplaceBack(Nn+Mn.length-1,Nn),Ut.push(Mn[0].x),Ut.push(Mn[0].y);for(var Gn=1;Gn<Mn.length;Gn++)this.layoutVertexArray.emplaceBack(Mn[Gn].x,Mn[Gn].y),this.indexArray2.emplaceBack(Nn+Gn-1,Nn+Gn),Ut.push(Mn[Gn].x),Ut.push(Mn[Gn].y);Rn.vertexLength+=Mn.length,Rn.primitiveLength+=Mn.length}}for(var Qn=Yf(Ut,sn),ar=0;ar<Qn.length;ar+=3)this.indexArray.emplaceBack(Gt+Qn[ar],Gt+Qn[ar+1],Gt+Qn[ar+2]);Rt.vertexLength+=ct,Rt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,X,Me,le)},Sr("FillBucket",tl,{omit:["layers","patternFeatures"]});var Sv=new zi({"fill-sort-key":new Fr(Be.layout_fill["fill-sort-key"])}),Ev={paint:new zi({"fill-antialias":new Cr(Be.paint_fill["fill-antialias"]),"fill-opacity":new Fr(Be.paint_fill["fill-opacity"]),"fill-color":new Fr(Be.paint_fill["fill-color"]),"fill-outline-color":new Fr(Be.paint_fill["fill-outline-color"]),"fill-translate":new Cr(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Cr(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Na(Be.paint_fill["fill-pattern"])}),layout:Sv},Cv=function(M){function z(X){M.call(this,X,Ev)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(X,le){M.prototype.recalculate.call(this,X,le);var Me=this.paint._values["fill-outline-color"];Me.value.kind==="constant"&&Me.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(X){return new tl(X)},z.prototype.queryRadius=function(){return Oc(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(X,le,Me,Oe,Ue,$e,ct){return Dc(Pc(X,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ct),Oe)},z.prototype.isTileClipped=function(){return!0},z}(si),Dv=xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,dp=_u;function _u(M,z,X,le,Me){this.properties={},this.extent=X,this.type=0,this._pbf=M,this._geometry=-1,this._keys=le,this._values=Me,M.readFields(Lv,this,z)}function Lv(M,z,X){M==1?z.id=X.readVarint():M==2?function(le,Me){for(var Oe=le.readVarint()+le.pos;le.pos<Oe;){var Ue=Me._keys[le.readVarint()],$e=Me._values[le.readVarint()];Me.properties[Ue]=$e}}(X,z):M==3?z.type=X.readVarint():M==4&&(z._geometry=X.pos)}function Iv(M){for(var z,X,le=0,Me=0,Oe=M.length,Ue=Oe-1;Me<Oe;Ue=Me++)z=M[Me],le+=((X=M[Ue]).x-z.x)*(z.y+X.y);return le}_u.types=["Unknown","Point","LineString","Polygon"],_u.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var z,X=M.readVarint()+M.pos,le=1,Me=0,Oe=0,Ue=0,$e=[];M.pos<X;){if(Me<=0){var ct=M.readVarint();le=7&ct,Me=ct>>3}if(Me--,le===1||le===2)Oe+=M.readSVarint(),Ue+=M.readSVarint(),le===1&&(z&&$e.push(z),z=[]),z.push(new t(Oe,Ue));else{if(le!==7)throw new Error("unknown command "+le);z&&z.push(z[0].clone())}}return z&&$e.push(z),$e},_u.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var z=M.readVarint()+M.pos,X=1,le=0,Me=0,Oe=0,Ue=1/0,$e=-1/0,ct=1/0,Mt=-1/0;M.pos<z;){if(le<=0){var Ct=M.readVarint();X=7&Ct,le=Ct>>3}if(le--,X===1||X===2)(Me+=M.readSVarint())<Ue&&(Ue=Me),Me>$e&&($e=Me),(Oe+=M.readSVarint())<ct&&(ct=Oe),Oe>Mt&&(Mt=Oe);else if(X!==7)throw new Error("unknown command "+X)}return[Ue,ct,$e,Mt]},_u.prototype.toGeoJSON=function(M,z,X){var le,Me,Oe=this.extent*Math.pow(2,X),Ue=this.extent*M,$e=this.extent*z,ct=this.loadGeometry(),Mt=_u.types[this.type];function Ct(Ut){for(var sn=0;sn<Ut.length;sn++){var hn=Ut[sn],Sn=180-360*(hn.y+$e)/Oe;Ut[sn]=[360*(hn.x+Ue)/Oe-180,360/Math.PI*Math.atan(Math.exp(Sn*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(le=0;le<ct.length;le++)Rt[le]=ct[le][0];Ct(ct=Rt);break;case 2:for(le=0;le<ct.length;le++)Ct(ct[le]);break;case 3:for(ct=function(Ut){var sn=Ut.length;if(sn<=1)return[Ut];for(var hn,Sn,Mn=[],Rn=0;Rn<sn;Rn++){var Nn=Iv(Ut[Rn]);Nn!==0&&(Sn===void 0&&(Sn=Nn<0),Sn===Nn<0?(hn&&Mn.push(hn),hn=[Ut[Rn]]):hn.push(Ut[Rn]))}return hn&&Mn.push(hn),Mn}(ct),le=0;le<ct.length;le++)for(Me=0;Me<ct[le].length;Me++)Ct(ct[le][Me])}ct.length===1?ct=ct[0]:Mt="Multi"+Mt;var Gt={type:"Feature",geometry:{type:Mt,coordinates:ct},properties:this.properties};return"id"in this&&(Gt.id=this.id),Gt};var vp=gp;function gp(M,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(Ov,this,z),this.length=this._features.length}function Ov(M,z,X){M===15?z.version=X.readVarint():M===1?z.name=X.readString():M===5?z.extent=X.readVarint():M===2?z._features.push(X.pos):M===3?z._keys.push(X.readString()):M===4&&z._values.push(function(le){for(var Me=null,Oe=le.readVarint()+le.pos;le.pos<Oe;){var Ue=le.readVarint()>>3;Me=Ue===1?le.readString():Ue===2?le.readFloat():Ue===3?le.readDouble():Ue===4?le.readVarint64():Ue===5?le.readVarint():Ue===6?le.readSVarint():Ue===7?le.readBoolean():null}return Me}(X))}function Pv(M,z,X){if(M===3){var le=new vp(X,X.readVarint()+X.pos);le.length&&(z[le.name]=le)}}gp.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var z=this._pbf.readVarint()+this._pbf.pos;return new dp(this._pbf,z,this.extent,this._keys,this._values)};var wu={VectorTile:function(M,z){this.layers=M.readFields(Pv,{},z)},VectorTileFeature:dp,VectorTileLayer:vp},Fv=wu.VectorTileFeature.types,eh=Math.pow(2,13);function ec(M,z,X,le,Me,Oe,Ue,$e){M.emplaceBack(z,X,2*Math.floor(le*eh)+Ue,Me*eh*2,Oe*eh*2,Math.round($e))}var nl=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new Ke,this.indexArray=new _e,this.programConfigurations=new qi(M.layers,M.zoom),this.segments=new Hn,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function zv(M,z){return M.x===z.x&&(M.x<0||M.x>ei)||M.y===z.y&&(M.y<0||M.y>ei)}nl.prototype.populate=function(M,z,X){this.features=[],this.hasPattern=$f("fill-extrusion",this.layers,z);for(var le=0,Me=M;le<Me.length;le+=1){var Oe=Me[le],Ue=Oe.feature,$e=Oe.id,ct=Oe.index,Mt=Oe.sourceLayerIndex,Ct=this.layers[0]._featureFilter.needGeometry,Rt=Si(Ue,Ct);if(this.layers[0]._featureFilter.filter(new Yr(this.zoom),Rt,X)){var Gt={id:$e,sourceLayerIndex:Mt,index:ct,geometry:Ct?Rt.geometry:Bo(Ue),properties:Ue.properties,type:Ue.type,patterns:{}};this.hasPattern?this.features.push(Qf("fill-extrusion",this.layers,Gt,this.zoom,z)):this.addFeature(Gt,Gt.geometry,ct,X,{}),z.featureIndex.insert(Ue,Gt.geometry,ct,Mt,this.index,!0)}}},nl.prototype.addFeatures=function(M,z,X){for(var le=0,Me=this.features;le<Me.length;le+=1){var Oe=Me[le],Ue=Oe.geometry;this.addFeature(Oe,Ue,Oe.index,z,X)}},nl.prototype.update=function(M,z,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,X)},nl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nl.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Dv),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},nl.prototype.addFeature=function(M,z,X,le,Me){for(var Oe=0,Ue=Kf(z,500);Oe<Ue.length;Oe+=1){for(var $e=Ue[Oe],ct=0,Mt=0,Ct=$e;Mt<Ct.length;Mt+=1)ct+=Ct[Mt].length;for(var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Gt=0,Ut=$e;Gt<Ut.length;Gt+=1){var sn=Ut[Gt];if(sn.length!==0&&!(($r=sn).every(function(qr){return qr.x<0})||$r.every(function(qr){return qr.x>ei})||$r.every(function(qr){return qr.y<0})||$r.every(function(qr){return qr.y>ei})))for(var hn=0,Sn=0;Sn<sn.length;Sn++){var Mn=sn[Sn];if(Sn>=1){var Rn=sn[Sn-1];if(!zv(Mn,Rn)){Rt.vertexLength+4>Hn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nn=Mn.sub(Rn)._perp()._unit(),Gn=Rn.dist(Mn);hn+Gn>32768&&(hn=0),ec(this.layoutVertexArray,Mn.x,Mn.y,Nn.x,Nn.y,0,0,hn),ec(this.layoutVertexArray,Mn.x,Mn.y,Nn.x,Nn.y,0,1,hn),hn+=Gn,ec(this.layoutVertexArray,Rn.x,Rn.y,Nn.x,Nn.y,0,0,hn),ec(this.layoutVertexArray,Rn.x,Rn.y,Nn.x,Nn.y,0,1,hn);var Qn=Rt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Rt.vertexLength+=4,Rt.primitiveLength+=2}}}}if(Rt.vertexLength+ct>Hn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),Fv[M.type]==="Polygon"){for(var ar=[],xr=[],gr=Rt.vertexLength,Tr=0,Mr=$e;Tr<Mr.length;Tr+=1){var jr=Mr[Tr];if(jr.length!==0){jr!==$e[0]&&xr.push(ar.length/2);for(var Ir=0;Ir<jr.length;Ir++){var Br=jr[Ir];ec(this.layoutVertexArray,Br.x,Br.y,0,0,1,1,0),ar.push(Br.x),ar.push(Br.y)}}}for(var Pr=Yf(ar,xr),Lr=0;Lr<Pr.length;Lr+=3)this.indexArray.emplaceBack(gr+Pr[Lr],gr+Pr[Lr+2],gr+Pr[Lr+1]);Rt.primitiveLength+=Pr.length/3,Rt.vertexLength+=ct}}var $r;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,X,Me,le)},Sr("FillExtrusionBucket",nl,{omit:["layers","features"]});var Rv={paint:new zi({"fill-extrusion-opacity":new Cr(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fr(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Cr(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Cr(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Na(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fr(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fr(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Cr(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bv=function(M){function z(X){M.call(this,X,Rv)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(X){return new nl(X)},z.prototype.queryRadius=function(){return Oc(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(X,le,Me,Oe,Ue,$e,ct,Mt){var Ct=Pc(X,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ct),Rt=this.paint.get("fill-extrusion-height").evaluate(le,Me),Gt=this.paint.get("fill-extrusion-base").evaluate(le,Me),Ut=function(hn,Sn,Mn,Rn){for(var Nn=[],Gn=0,Qn=hn;Gn<Qn.length;Gn+=1){var ar=Qn[Gn],xr=[ar.x,ar.y,Rn,1];zc(xr,xr,Sn),Nn.push(new t(xr[0]/xr[3],xr[1]/xr[3]))}return Nn}(Ct,Mt,0,0),sn=function(hn,Sn,Mn,Rn){for(var Nn=[],Gn=[],Qn=Rn[8]*Sn,ar=Rn[9]*Sn,xr=Rn[10]*Sn,gr=Rn[11]*Sn,Tr=Rn[8]*Mn,Mr=Rn[9]*Mn,jr=Rn[10]*Mn,Ir=Rn[11]*Mn,Br=0,Pr=hn;Br<Pr.length;Br+=1){for(var Lr=[],$r=[],qr=0,wi=Pr[Br];qr<wi.length;qr+=1){var zr=wi[qr],yi=zr.x,Ci=zr.y,Oi=Rn[0]*yi+Rn[4]*Ci+Rn[12],Pi=Rn[1]*yi+Rn[5]*Ci+Rn[13],Ti=Rn[2]*yi+Rn[6]*Ci+Rn[14],fa=Rn[3]*yi+Rn[7]*Ci+Rn[15],ji=Ti+xr,Ma=fa+gr,Va=Oi+Tr,Oa=Pi+Mr,co=Ti+jr,Pa=fa+Ir,ma=new t((Oi+Qn)/Ma,(Pi+ar)/Ma);ma.z=ji/Ma,Lr.push(ma);var Fa=new t(Va/Pa,Oa/Pa);Fa.z=co/Pa,$r.push(Fa)}Nn.push(Lr),Gn.push($r)}return[Nn,Gn]}(Oe,Gt,Rt,Mt);return function(hn,Sn,Mn){var Rn=1/0;Dc(Mn,Sn)&&(Rn=yp(Mn,Sn[0]));for(var Nn=0;Nn<Sn.length;Nn++)for(var Gn=Sn[Nn],Qn=hn[Nn],ar=0;ar<Gn.length-1;ar++){var xr=Gn[ar],gr=Gn[ar+1],Tr=Qn[ar],Mr=[xr,gr,Qn[ar+1],Tr,xr];au(Mn,Mr)&&(Rn=Math.min(Rn,yp(Mn,Mr)))}return Rn!==1/0&&Rn}(sn[0],sn[1],Ut)},z}(si);function tc(M,z){return M.x*z.x+M.y*z.y}function yp(M,z){if(M.length===1){for(var X,le=0,Me=z[le++];!X||Me.equals(X);)if(!(X=z[le++]))return 1/0;for(;le<z.length;le++){var Oe=z[le],Ue=M[0],$e=X.sub(Me),ct=Oe.sub(Me),Mt=Ue.sub(Me),Ct=tc($e,$e),Rt=tc($e,ct),Gt=tc(ct,ct),Ut=tc(Mt,$e),sn=tc(Mt,ct),hn=Ct*Gt-Rt*Rt,Sn=(Gt*Ut-Rt*sn)/hn,Mn=(Ct*sn-Rt*Ut)/hn,Rn=1-Sn-Mn,Nn=Me.z*Rn+X.z*Sn+Oe.z*Mn;if(isFinite(Nn))return Nn}return 1/0}for(var Gn=1/0,Qn=0,ar=z;Qn<ar.length;Qn+=1){var xr=ar[Qn];Gn=Math.min(Gn,xr.z)}return Gn}var Nv=xi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,jv=xi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Uv=wu.VectorTileFeature.types,Vv=Math.cos(Math.PI/180*37.5),mp=Math.pow(2,14)/.5,uo=function(M){var z=this;this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(X){return X.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(X){z.gradients[X.id]={}}),this.layoutVertexArray=new et,this.layoutVertexArray2=new ut,this.indexArray=new _e,this.programConfigurations=new qi(M.layers,M.zoom),this.segments=new Hn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(X){return X.isStateDependent()}).map(function(X){return X.id})};uo.prototype.populate=function(M,z,X){this.hasPattern=$f("line",this.layers,z);for(var le=this.layers[0].layout.get("line-sort-key"),Me=[],Oe=0,Ue=M;Oe<Ue.length;Oe+=1){var $e=Ue[Oe],ct=$e.feature,Mt=$e.id,Ct=$e.index,Rt=$e.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,Ut=Si(ct,Gt);if(this.layers[0]._featureFilter.filter(new Yr(this.zoom),Ut,X)){var sn=le?le.evaluate(Ut,{},X):void 0,hn={id:Mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Rt,index:Ct,geometry:Gt?Ut.geometry:Bo(ct),patterns:{},sortKey:sn};Me.push(hn)}}le&&Me.sort(function(Tr,Mr){return Tr.sortKey-Mr.sortKey});for(var Sn=0,Mn=Me;Sn<Mn.length;Sn+=1){var Rn=Mn[Sn],Nn=Rn,Gn=Nn.geometry,Qn=Nn.index,ar=Nn.sourceLayerIndex;if(this.hasPattern){var xr=Qf("line",this.layers,Rn,this.zoom,z);this.patternFeatures.push(xr)}else this.addFeature(Rn,Gn,Qn,X,{});var gr=M[Qn].feature;z.featureIndex.insert(gr,Gn,Qn,ar,this.index)}},uo.prototype.update=function(M,z,X){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,z,this.stateDependentLayers,X)},uo.prototype.addFeatures=function(M,z,X){for(var le=0,Me=this.patternFeatures;le<Me.length;le+=1){var Oe=Me[le];this.addFeature(Oe,Oe.geometry,Oe.index,z,X)}},uo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},uo.prototype.upload=function(M){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=M.createVertexBuffer(this.layoutVertexArray2,jv)),this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Nv),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},uo.prototype.lineFeatureClips=function(M){if(M.properties&&M.properties.hasOwnProperty("mapbox_clip_start")&&M.properties.hasOwnProperty("mapbox_clip_end"))return{start:+M.properties.mapbox_clip_start,end:+M.properties.mapbox_clip_end}},uo.prototype.addFeature=function(M,z,X,le,Me){var Oe=this.layers[0].layout,Ue=Oe.get("line-join").evaluate(M,{}),$e=Oe.get("line-cap"),ct=Oe.get("line-miter-limit"),Mt=Oe.get("line-round-limit");this.lineClips=this.lineFeatureClips(M);for(var Ct=0,Rt=z;Ct<Rt.length;Ct+=1){var Gt=Rt[Ct];this.addLine(Gt,M,Ue,$e,ct,Mt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,X,Me,le)},uo.prototype.addLine=function(M,z,X,le,Me,Oe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ue=0;Ue<M.length-1;Ue++)this.totalDistance+=M[Ue].dist(M[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var $e=Uv[z.type]==="Polygon",ct=M.length;ct>=2&&M[ct-1].equals(M[ct-2]);)ct--;for(var Mt=0;Mt<ct-1&&M[Mt].equals(M[Mt+1]);)Mt++;if(!(ct<($e?3:2))){X==="bevel"&&(Me=1.05);var Ct,Rt=this.overscaling<=16?15*ei/(512*this.overscaling):0,Gt=this.segments.prepareSegment(10*ct,this.layoutVertexArray,this.indexArray),Ut=void 0,sn=void 0,hn=void 0,Sn=void 0;this.e1=this.e2=-1,$e&&(Ct=M[ct-2],Sn=M[Mt].sub(Ct)._unit()._perp());for(var Mn=Mt;Mn<ct;Mn++)if(!(sn=Mn===ct-1?$e?M[Mt+1]:void 0:M[Mn+1])||!M[Mn].equals(sn)){Sn&&(hn=Sn),Ct&&(Ut=Ct),Ct=M[Mn],Sn=sn?sn.sub(Ct)._unit()._perp():hn;var Rn=(hn=hn||Sn).add(Sn);Rn.x===0&&Rn.y===0||Rn._unit();var Nn=hn.x*Sn.x+hn.y*Sn.y,Gn=Rn.x*Sn.x+Rn.y*Sn.y,Qn=Gn!==0?1/Gn:1/0,ar=2*Math.sqrt(2-2*Gn),xr=Gn<Vv&&Ut&&sn,gr=hn.x*Sn.y-hn.y*Sn.x>0;if(xr&&Mn>Mt){var Tr=Ct.dist(Ut);if(Tr>2*Rt){var Mr=Ct.sub(Ct.sub(Ut)._mult(Rt/Tr)._round());this.updateDistance(Ut,Mr),this.addCurrentVertex(Mr,hn,0,0,Gt),Ut=Mr}}var jr=Ut&&sn,Ir=jr?X:$e?"butt":le;if(jr&&Ir==="round"&&(Qn<Oe?Ir="miter":Qn<=2&&(Ir="fakeround")),Ir==="miter"&&Qn>Me&&(Ir="bevel"),Ir==="bevel"&&(Qn>2&&(Ir="flipbevel"),Qn<Me&&(Ir="miter")),Ut&&this.updateDistance(Ut,Ct),Ir==="miter")Rn._mult(Qn),this.addCurrentVertex(Ct,Rn,0,0,Gt);else if(Ir==="flipbevel"){if(Qn>100)Rn=Sn.mult(-1);else{var Br=Qn*hn.add(Sn).mag()/hn.sub(Sn).mag();Rn._perp()._mult(Br*(gr?-1:1))}this.addCurrentVertex(Ct,Rn,0,0,Gt),this.addCurrentVertex(Ct,Rn.mult(-1),0,0,Gt)}else if(Ir==="bevel"||Ir==="fakeround"){var Pr=-Math.sqrt(Qn*Qn-1),Lr=gr?Pr:0,$r=gr?0:Pr;if(Ut&&this.addCurrentVertex(Ct,hn,Lr,$r,Gt),Ir==="fakeround")for(var qr=Math.round(180*ar/Math.PI/20),wi=1;wi<qr;wi++){var zr=wi/qr;if(zr!==.5){var yi=zr-.5;zr+=zr*yi*(zr-1)*((1.0904+Nn*(Nn*(3.55645-1.43519*Nn)-3.2452))*yi*yi+(.848013+Nn*(.215638*Nn-1.06021)))}var Ci=Sn.sub(hn)._mult(zr)._add(hn)._unit()._mult(gr?-1:1);this.addHalfVertex(Ct,Ci.x,Ci.y,!1,gr,0,Gt)}sn&&this.addCurrentVertex(Ct,Sn,-Lr,-$r,Gt)}else if(Ir==="butt")this.addCurrentVertex(Ct,Rn,0,0,Gt);else if(Ir==="square"){var Oi=Ut?1:-1;this.addCurrentVertex(Ct,Rn,Oi,Oi,Gt)}else Ir==="round"&&(Ut&&(this.addCurrentVertex(Ct,hn,0,0,Gt),this.addCurrentVertex(Ct,hn,1,1,Gt,!0)),sn&&(this.addCurrentVertex(Ct,Sn,-1,-1,Gt,!0),this.addCurrentVertex(Ct,Sn,0,0,Gt)));if(xr&&Mn<ct-1){var Pi=Ct.dist(sn);if(Pi>2*Rt){var Ti=Ct.add(sn.sub(Ct)._mult(Rt/Pi)._round());this.updateDistance(Ct,Ti),this.addCurrentVertex(Ti,Sn,0,0,Gt),Ct=Ti}}}}},uo.prototype.addCurrentVertex=function(M,z,X,le,Me,Oe){Oe===void 0&&(Oe=!1);var Ue=z.x+z.y*X,$e=z.y-z.x*X,ct=-z.x+z.y*le,Mt=-z.y-z.x*le;this.addHalfVertex(M,Ue,$e,Oe,!1,X,Me),this.addHalfVertex(M,ct,Mt,Oe,!0,-le,Me),this.distance>mp/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(M,z,X,le,Me,Oe))},uo.prototype.addHalfVertex=function(M,z,X,le,Me,Oe,Ue){var $e=M.x,ct=M.y,Mt=.5*(this.lineClips?this.scaledDistance*(mp-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack(($e<<1)+(le?1:0),(ct<<1)+(Me?1:0),Math.round(63*z)+128,Math.round(63*X)+128,1+(Oe===0?0:Oe<0?-1:1)|(63&Mt)<<2,Mt>>6),this.lineClips){var Ct=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Ct,this.lineClipsArray.length)}var Rt=Ue.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Ue.primitiveLength++),Me?this.e2=Rt:this.e1=Rt},uo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},uo.prototype.updateDistance=function(M,z){this.distance+=M.dist(z),this.updateScaledDistance()},Sr("LineBucket",uo,{omit:["layers","patternFeatures"]});var qv=new zi({"line-cap":new Cr(Be.layout_line["line-cap"]),"line-join":new Fr(Be.layout_line["line-join"]),"line-miter-limit":new Cr(Be.layout_line["line-miter-limit"]),"line-round-limit":new Cr(Be.layout_line["line-round-limit"]),"line-sort-key":new Fr(Be.layout_line["line-sort-key"])}),xp={paint:new zi({"line-opacity":new Fr(Be.paint_line["line-opacity"]),"line-color":new Fr(Be.paint_line["line-color"]),"line-translate":new Cr(Be.paint_line["line-translate"]),"line-translate-anchor":new Cr(Be.paint_line["line-translate-anchor"]),"line-width":new Fr(Be.paint_line["line-width"]),"line-gap-width":new Fr(Be.paint_line["line-gap-width"]),"line-offset":new Fr(Be.paint_line["line-offset"]),"line-blur":new Fr(Be.paint_line["line-blur"]),"line-dasharray":new Mo(Be.paint_line["line-dasharray"]),"line-pattern":new Na(Be.paint_line["line-pattern"]),"line-gradient":new Ro(Be.paint_line["line-gradient"])}),layout:qv},Hv=function(M){function z(){M.apply(this,arguments)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(X,le){return le=new Yr(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),M.prototype.possiblyEvaluate.call(this,X,le)},z.prototype.evaluate=function(X,le,Me,Oe){return le=f({},le,{zoom:Math.floor(le.zoom)}),M.prototype.evaluate.call(this,X,le,Me,Oe)},z}(Fr),bp=new Hv(xp.paint.properties["line-width"].specification);bp.useIntegerZoom=!0;var Gv=function(M){function z(X){M.call(this,X,xp),this.gradientVersion=0}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(X){if(X==="line-gradient"){var le=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=le._styleExpression.expression instanceof kr,this.gradientVersion=(this.gradientVersion+1)%a}},z.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},z.prototype.recalculate=function(X,le){M.prototype.recalculate.call(this,X,le),this.paint._values["line-floorwidth"]=bp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,X)},z.prototype.createBucket=function(X){return new uo(X)},z.prototype.queryRadius=function(X){var le=X,Me=_p(Xu("line-width",this,le),Xu("line-gap-width",this,le)),Oe=Xu("line-offset",this,le);return Me/2+Math.abs(Oe)+Oc(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(X,le,Me,Oe,Ue,$e,ct){var Mt=Pc(X,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ct),Ct=ct/2*_p(this.paint.get("line-width").evaluate(le,Me),this.paint.get("line-gap-width").evaluate(le,Me)),Rt=this.paint.get("line-offset").evaluate(le,Me);return Rt&&(Oe=function(Gt,Ut){for(var sn=[],hn=new t(0,0),Sn=0;Sn<Gt.length;Sn++){for(var Mn=Gt[Sn],Rn=[],Nn=0;Nn<Mn.length;Nn++){var Gn=Mn[Nn-1],Qn=Mn[Nn],ar=Mn[Nn+1],xr=Nn===0?hn:Qn.sub(Gn)._unit()._perp(),gr=Nn===Mn.length-1?hn:ar.sub(Qn)._unit()._perp(),Tr=xr._add(gr)._unit(),Mr=Tr.x*gr.x+Tr.y*gr.y;Tr._mult(1/Mr),Rn.push(Tr._mult(Ut)._add(Qn))}sn.push(Rn)}return sn}(Oe,Rt*ct)),function(Gt,Ut,sn){for(var hn=0;hn<Ut.length;hn++){var Sn=Ut[hn];if(Gt.length>=3){for(var Mn=0;Mn<Sn.length;Mn++)if(yl(Gt,Sn[Mn]))return!0}if(Vf(Gt,Sn,sn))return!0}return!1}(Mt,Oe,Ct)},z.prototype.isTileClipped=function(){return!0},z}(si);function _p(M,z){return z>0?z+2*M:M}var Wv=xi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Yv=xi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Zv=(xi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),xi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),wp=(xi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),xi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Xv=xi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Jv(M,z,X){return M.sections.forEach(function(le){le.text=function(Me,Oe,Ue){var $e=Oe.layout.get("text-transform").evaluate(Ue,{});return $e==="uppercase"?Me=Me.toLocaleUpperCase():$e==="lowercase"&&(Me=Me.toLocaleLowerCase()),Aa.applyArabicShaping&&(Me=Aa.applyArabicShaping(Me)),Me}(le.text,z,X)}),M}xi([{name:"triangle",components:3,type:"Uint16"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xi([{type:"Float32",name:"offsetX"}]),xi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var nc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ia=24,Tp=function(M,z,X,le,Me){var Oe,Ue,$e=8*Me-le-1,ct=(1<<$e)-1,Mt=ct>>1,Ct=-7,Rt=X?Me-1:0,Gt=X?-1:1,Ut=M[z+Rt];for(Rt+=Gt,Oe=Ut&(1<<-Ct)-1,Ut>>=-Ct,Ct+=$e;Ct>0;Oe=256*Oe+M[z+Rt],Rt+=Gt,Ct-=8);for(Ue=Oe&(1<<-Ct)-1,Oe>>=-Ct,Ct+=le;Ct>0;Ue=256*Ue+M[z+Rt],Rt+=Gt,Ct-=8);if(Oe===0)Oe=1-Mt;else{if(Oe===ct)return Ue?NaN:1/0*(Ut?-1:1);Ue+=Math.pow(2,le),Oe-=Mt}return(Ut?-1:1)*Ue*Math.pow(2,Oe-le)},Ap=function(M,z,X,le,Me,Oe){var Ue,$e,ct,Mt=8*Oe-Me-1,Ct=(1<<Mt)-1,Rt=Ct>>1,Gt=Me===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=le?0:Oe-1,sn=le?1:-1,hn=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?($e=isNaN(z)?1:0,Ue=Ct):(Ue=Math.floor(Math.log(z)/Math.LN2),z*(ct=Math.pow(2,-Ue))<1&&(Ue--,ct*=2),(z+=Ue+Rt>=1?Gt/ct:Gt*Math.pow(2,1-Rt))*ct>=2&&(Ue++,ct/=2),Ue+Rt>=Ct?($e=0,Ue=Ct):Ue+Rt>=1?($e=(z*ct-1)*Math.pow(2,Me),Ue+=Rt):($e=z*Math.pow(2,Rt-1)*Math.pow(2,Me),Ue=0));Me>=8;M[X+Ut]=255&$e,Ut+=sn,$e/=256,Me-=8);for(Ue=Ue<<Me|$e,Mt+=Me;Mt>0;M[X+Ut]=255&Ue,Ut+=sn,Ue/=256,Mt-=8);M[X+Ut-sn]|=128*hn},Uc=Ei;function Ei(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Ei.Varint=0,Ei.Fixed64=1,Ei.Bytes=2,Ei.Fixed32=5;var th=4294967296,kp=1/th,Mp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dl(M){return M.type===Ei.Bytes?M.readVarint()+M.pos:M.pos+1}function Tu(M,z,X){return X?4294967296*z+(M>>>0):4294967296*(z>>>0)+(M>>>0)}function Sp(M,z,X){var le=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));X.realloc(le);for(var Me=X.pos-1;Me>=M;Me--)X.buf[Me+le]=X.buf[Me]}function Kv(M,z){for(var X=0;X<M.length;X++)z.writeVarint(M[X])}function $v(M,z){for(var X=0;X<M.length;X++)z.writeSVarint(M[X])}function Qv(M,z){for(var X=0;X<M.length;X++)z.writeFloat(M[X])}function eg(M,z){for(var X=0;X<M.length;X++)z.writeDouble(M[X])}function tg(M,z){for(var X=0;X<M.length;X++)z.writeBoolean(M[X])}function ng(M,z){for(var X=0;X<M.length;X++)z.writeFixed32(M[X])}function rg(M,z){for(var X=0;X<M.length;X++)z.writeSFixed32(M[X])}function ig(M,z){for(var X=0;X<M.length;X++)z.writeFixed64(M[X])}function ag(M,z){for(var X=0;X<M.length;X++)z.writeSFixed64(M[X])}function Vc(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+16777216*M[z+3]}function Au(M,z,X){M[X]=z,M[X+1]=z>>>8,M[X+2]=z>>>16,M[X+3]=z>>>24}function Ep(M,z){return(M[z]|M[z+1]<<8|M[z+2]<<16)+(M[z+3]<<24)}Ei.prototype={destroy:function(){this.buf=null},readFields:function(M,z,X){for(X=X||this.length;this.pos<X;){var le=this.readVarint(),Me=le>>3,Oe=this.pos;this.type=7&le,M(Me,z,this),this.pos===Oe&&this.skip(le)}return z},readMessage:function(M,z){return this.readFields(M,z,this.readVarint()+this.pos)},readFixed32:function(){var M=Vc(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Ep(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Vc(this.buf,this.pos)+Vc(this.buf,this.pos+4)*th;return this.pos+=8,M},readSFixed64:function(){var M=Vc(this.buf,this.pos)+Ep(this.buf,this.pos+4)*th;return this.pos+=8,M},readFloat:function(){var M=Tp(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=Tp(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var z,X,le=this.buf;return z=127&(X=le[this.pos++]),X<128?z:(z|=(127&(X=le[this.pos++]))<<7,X<128?z:(z|=(127&(X=le[this.pos++]))<<14,X<128?z:(z|=(127&(X=le[this.pos++]))<<21,X<128?z:function(Me,Oe,Ue){var $e,ct,Mt=Ue.buf;if($e=(112&(ct=Mt[Ue.pos++]))>>4,ct<128||($e|=(127&(ct=Mt[Ue.pos++]))<<3,ct<128)||($e|=(127&(ct=Mt[Ue.pos++]))<<10,ct<128)||($e|=(127&(ct=Mt[Ue.pos++]))<<17,ct<128)||($e|=(127&(ct=Mt[Ue.pos++]))<<24,ct<128)||($e|=(1&(ct=Mt[Ue.pos++]))<<31,ct<128))return Tu(Me,$e,Oe);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(X=le[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var M=this.readVarint()+this.pos,z=this.pos;return this.pos=M,M-z>=12&&Mp?function(X,le,Me){return Mp.decode(X.subarray(le,Me))}(this.buf,z,M):function(X,le,Me){for(var Oe="",Ue=le;Ue<Me;){var $e,ct,Mt,Ct=X[Ue],Rt=null,Gt=Ct>239?4:Ct>223?3:Ct>191?2:1;if(Ue+Gt>Me)break;Gt===1?Ct<128&&(Rt=Ct):Gt===2?(192&($e=X[Ue+1]))==128&&(Rt=(31&Ct)<<6|63&$e)<=127&&(Rt=null):Gt===3?($e=X[Ue+1],ct=X[Ue+2],(192&$e)==128&&(192&ct)==128&&((Rt=(15&Ct)<<12|(63&$e)<<6|63&ct)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):Gt===4&&($e=X[Ue+1],ct=X[Ue+2],Mt=X[Ue+3],(192&$e)==128&&(192&ct)==128&&(192&Mt)==128&&((Rt=(15&Ct)<<18|(63&$e)<<12|(63&ct)<<6|63&Mt)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,Gt=1):Rt>65535&&(Rt-=65536,Oe+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),Oe+=String.fromCharCode(Rt),Ue+=Gt}return Oe}(this.buf,z,M)},readBytes:function(){var M=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,M);return this.pos=M,z},readPackedVarint:function(M,z){if(this.type!==Ei.Bytes)return M.push(this.readVarint(z));var X=Dl(this);for(M=M||[];this.pos<X;)M.push(this.readVarint(z));return M},readPackedSVarint:function(M){if(this.type!==Ei.Bytes)return M.push(this.readSVarint());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Ei.Bytes)return M.push(this.readBoolean());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Ei.Bytes)return M.push(this.readFloat());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Ei.Bytes)return M.push(this.readDouble());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Ei.Bytes)return M.push(this.readFixed32());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Ei.Bytes)return M.push(this.readSFixed32());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Ei.Bytes)return M.push(this.readFixed64());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Ei.Bytes)return M.push(this.readSFixed64());var z=Dl(this);for(M=M||[];this.pos<z;)M.push(this.readSFixed64());return M},skip:function(M){var z=7&M;if(z===Ei.Varint)for(;this.buf[this.pos++]>127;);else if(z===Ei.Bytes)this.pos=this.readVarint()+this.pos;else if(z===Ei.Fixed32)this.pos+=4;else{if(z!==Ei.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(M,z){this.writeVarint(M<<3|z)},realloc:function(M){for(var z=this.length||16;z<this.pos+M;)z*=2;if(z!==this.length){var X=new Uint8Array(z);X.set(this.buf),this.buf=X,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Au(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Au(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Au(this.buf,-1&M,this.pos),Au(this.buf,Math.floor(M*kp),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Au(this.buf,-1&M,this.pos),Au(this.buf,Math.floor(M*kp),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(z,X){var le,Me;if(z>=0?(le=z%4294967296|0,Me=z/4294967296|0):(Me=~(-z/4294967296),4294967295^(le=~(-z%4294967296))?le=le+1|0:(le=0,Me=Me+1|0)),z>=18446744073709552e3||z<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");X.realloc(10),function(Oe,Ue,$e){$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos]=127&Oe}(le,0,X),function(Oe,Ue){var $e=(7&Oe)<<4;Ue.buf[Ue.pos++]|=$e|((Oe>>>=3)?128:0),Oe&&(Ue.buf[Ue.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(Ue.buf[Ue.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(Ue.buf[Ue.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(Ue.buf[Ue.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(Ue.buf[Ue.pos++]=127&Oe)))))}(Me,X)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(!!M)},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var z=this.pos;this.pos=function(le,Me,Oe){for(var Ue,$e,ct=0;ct<Me.length;ct++){if((Ue=Me.charCodeAt(ct))>55295&&Ue<57344){if(!$e){Ue>56319||ct+1===Me.length?(le[Oe++]=239,le[Oe++]=191,le[Oe++]=189):$e=Ue;continue}if(Ue<56320){le[Oe++]=239,le[Oe++]=191,le[Oe++]=189,$e=Ue;continue}Ue=$e-55296<<10|Ue-56320|65536,$e=null}else $e&&(le[Oe++]=239,le[Oe++]=191,le[Oe++]=189,$e=null);Ue<128?le[Oe++]=Ue:(Ue<2048?le[Oe++]=Ue>>6|192:(Ue<65536?le[Oe++]=Ue>>12|224:(le[Oe++]=Ue>>18|240,le[Oe++]=Ue>>12&63|128),le[Oe++]=Ue>>6&63|128),le[Oe++]=63&Ue|128)}return Oe}(this.buf,M,this.pos);var X=this.pos-z;X>=128&&Sp(z,X,this),this.pos=z-1,this.writeVarint(X),this.pos+=X},writeFloat:function(M){this.realloc(4),Ap(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),Ap(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var z=M.length;this.writeVarint(z),this.realloc(z);for(var X=0;X<z;X++)this.buf[this.pos++]=M[X]},writeRawMessage:function(M,z){this.pos++;var X=this.pos;M(z,this);var le=this.pos-X;le>=128&&Sp(X,le,this),this.pos=X-1,this.writeVarint(le),this.pos+=le},writeMessage:function(M,z,X){this.writeTag(M,Ei.Bytes),this.writeRawMessage(z,X)},writePackedVarint:function(M,z){z.length&&this.writeMessage(M,Kv,z)},writePackedSVarint:function(M,z){z.length&&this.writeMessage(M,$v,z)},writePackedBoolean:function(M,z){z.length&&this.writeMessage(M,tg,z)},writePackedFloat:function(M,z){z.length&&this.writeMessage(M,Qv,z)},writePackedDouble:function(M,z){z.length&&this.writeMessage(M,eg,z)},writePackedFixed32:function(M,z){z.length&&this.writeMessage(M,ng,z)},writePackedSFixed32:function(M,z){z.length&&this.writeMessage(M,rg,z)},writePackedFixed64:function(M,z){z.length&&this.writeMessage(M,ig,z)},writePackedSFixed64:function(M,z){z.length&&this.writeMessage(M,ag,z)},writeBytesField:function(M,z){this.writeTag(M,Ei.Bytes),this.writeBytes(z)},writeFixed32Field:function(M,z){this.writeTag(M,Ei.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(M,z){this.writeTag(M,Ei.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(M,z){this.writeTag(M,Ei.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(M,z){this.writeTag(M,Ei.Fixed64),this.writeSFixed64(z)},writeVarintField:function(M,z){this.writeTag(M,Ei.Varint),this.writeVarint(z)},writeSVarintField:function(M,z){this.writeTag(M,Ei.Varint),this.writeSVarint(z)},writeStringField:function(M,z){this.writeTag(M,Ei.Bytes),this.writeString(z)},writeFloatField:function(M,z){this.writeTag(M,Ei.Fixed32),this.writeFloat(z)},writeDoubleField:function(M,z){this.writeTag(M,Ei.Fixed64),this.writeDouble(z)},writeBooleanField:function(M,z){this.writeVarintField(M,!!z)}};var nh=3;function og(M,z,X){M===1&&X.readMessage(sg,z)}function sg(M,z,X){if(M===3){var le=X.readMessage(lg,{}),Me=le.id,Oe=le.bitmap,Ue=le.width,$e=le.height,ct=le.left,Mt=le.top,Ct=le.advance;z.push({id:Me,bitmap:new ou({width:Ue+2*nh,height:$e+2*nh},Oe),metrics:{width:Ue,height:$e,left:ct,top:Mt,advance:Ct}})}}function lg(M,z,X){M===1?z.id=X.readVarint():M===2?z.bitmap=X.readBytes():M===3?z.width=X.readVarint():M===4?z.height=X.readVarint():M===5?z.left=X.readSVarint():M===6?z.top=X.readSVarint():M===7&&(z.advance=X.readVarint())}var Cp=nh;function Dp(M){for(var z=0,X=0,le=0,Me=M;le<Me.length;le+=1){var Oe=Me[le];z+=Oe.w*Oe.h,X=Math.max(X,Oe.w)}M.sort(function(hn,Sn){return Sn.h-hn.h});for(var Ue=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),X),h:1/0}],$e=0,ct=0,Mt=0,Ct=M;Mt<Ct.length;Mt+=1)for(var Rt=Ct[Mt],Gt=Ue.length-1;Gt>=0;Gt--){var Ut=Ue[Gt];if(!(Rt.w>Ut.w||Rt.h>Ut.h)){if(Rt.x=Ut.x,Rt.y=Ut.y,ct=Math.max(ct,Rt.y+Rt.h),$e=Math.max($e,Rt.x+Rt.w),Rt.w===Ut.w&&Rt.h===Ut.h){var sn=Ue.pop();Gt<Ue.length&&(Ue[Gt]=sn)}else Rt.h===Ut.h?(Ut.x+=Rt.w,Ut.w-=Rt.w):Rt.w===Ut.w?(Ut.y+=Rt.h,Ut.h-=Rt.h):(Ue.push({x:Ut.x+Rt.w,y:Ut.y,w:Ut.w-Rt.w,h:Rt.h}),Ut.y+=Rt.h,Ut.h-=Rt.h);break}}return{w:$e,h:ct,fill:z/($e*ct)||0}}var No=1,qc=function(M,z){var X=z.pixelRatio,le=z.version,Me=z.stretchX,Oe=z.stretchY,Ue=z.content;this.paddedRect=M,this.pixelRatio=X,this.stretchX=Me,this.stretchY=Oe,this.content=Ue,this.version=le},rc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};rc.tl.get=function(){return[this.paddedRect.x+No,this.paddedRect.y+No]},rc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-No,this.paddedRect.y+this.paddedRect.h-No]},rc.tlbr.get=function(){return this.tl.concat(this.br)},rc.displaySize.get=function(){return[(this.paddedRect.w-2*No)/this.pixelRatio,(this.paddedRect.h-2*No)/this.pixelRatio]},Object.defineProperties(qc.prototype,rc);var ic=function(M,z){var X={},le={};this.haveRenderCallbacks=[];var Me=[];this.addImages(M,X,Me),this.addImages(z,le,Me);var Oe=Dp(Me),Ue=Oe.w,$e=Oe.h,ct=new Eo({width:Ue||1,height:$e||1});for(var Mt in M){var Ct=M[Mt],Rt=X[Mt].paddedRect;Eo.copy(Ct.data,ct,{x:0,y:0},{x:Rt.x+No,y:Rt.y+No},Ct.data)}for(var Gt in z){var Ut=z[Gt],sn=le[Gt].paddedRect,hn=sn.x+No,Sn=sn.y+No,Mn=Ut.data.width,Rn=Ut.data.height;Eo.copy(Ut.data,ct,{x:0,y:0},{x:hn,y:Sn},Ut.data),Eo.copy(Ut.data,ct,{x:0,y:Rn-1},{x:hn,y:Sn-1},{width:Mn,height:1}),Eo.copy(Ut.data,ct,{x:0,y:0},{x:hn,y:Sn+Rn},{width:Mn,height:1}),Eo.copy(Ut.data,ct,{x:Mn-1,y:0},{x:hn-1,y:Sn},{width:1,height:Rn}),Eo.copy(Ut.data,ct,{x:0,y:0},{x:hn+Mn,y:Sn},{width:1,height:Rn})}this.image=ct,this.iconPositions=X,this.patternPositions=le};ic.prototype.addImages=function(M,z,X){for(var le in M){var Me=M[le],Oe={x:0,y:0,w:Me.data.width+2*No,h:Me.data.height+2*No};X.push(Oe),z[le]=new qc(Oe,Me),Me.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},ic.prototype.patchUpdatedImages=function(M,z){for(var X in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[X],M.getImage(X),z),this.patchUpdatedImage(this.patternPositions[X],M.getImage(X),z)},ic.prototype.patchUpdatedImage=function(M,z,X){if(M&&z&&M.version!==z.version){M.version=z.version;var le=M.tl,Me=le[0],Oe=le[1];X.update(z.data,void 0,{x:Me,y:Oe})}},Sr("ImagePosition",qc),Sr("ImageAtlas",ic);var as={horizontal:1,vertical:2,horizontalOnly:3},ac=-17,ku=function(){this.scale=1,this.fontStack="",this.imageName=null};ku.forText=function(M,z){var X=new ku;return X.scale=M||1,X.fontStack=z,X},ku.forImage=function(M){var z=new ku;return z.imageName=M,z};var Ja=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Hc(M,z,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn){var Sn,Mn=Ja.fromFeature(M,Me);Rt===as.vertical&&Mn.verticalizePunctuation();var Rn=Aa.processBidirectionalText,Nn=Aa.processStyledBidirectionalText;if(Rn&&Mn.sections.length===1){Sn=[];for(var Gn=0,Qn=Rn(Mn.toString(),rh(Mn,Mt,Oe,z,le,Ut,sn));Gn<Qn.length;Gn+=1){var ar=Qn[Gn],xr=new Ja;xr.text=ar,xr.sections=Mn.sections;for(var gr=0;gr<ar.length;gr++)xr.sectionIndex.push(0);Sn.push(xr)}}else if(Nn){Sn=[];for(var Tr=0,Mr=Nn(Mn.text,Mn.sectionIndex,rh(Mn,Mt,Oe,z,le,Ut,sn));Tr<Mr.length;Tr+=1){var jr=Mr[Tr],Ir=new Ja;Ir.text=jr[0],Ir.sectionIndex=jr[1],Ir.sections=Mn.sections,Sn.push(Ir)}}else Sn=function(Lr,$r){for(var qr=[],wi=Lr.text,zr=0,yi=0,Ci=$r;yi<Ci.length;yi+=1){var Oi=Ci[yi];qr.push(Lr.substring(zr,Oi)),zr=Oi}return zr<wi.length&&qr.push(Lr.substring(zr,wi.length)),qr}(Mn,rh(Mn,Mt,Oe,z,le,Ut,sn));var Br=[],Pr={positionedLines:Br,text:Mn.toString(),top:Ct[1],bottom:Ct[1],left:Ct[0],right:Ct[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return function(Lr,$r,qr,wi,zr,yi,Ci,Oi,Pi,Ti,fa,ji){for(var Ma=0,Va=ac,Oa=0,co=0,Pa=Oi==="right"?1:Oi==="left"?0:.5,ma=0,Fa=0,Sa=zr;Fa<Sa.length;Fa+=1){var xa=Sa[Fa];xa.trim();var Hr=xa.getMaxScale(),ni=(Hr-1)*Ia,Ji={positionedGlyphs:[],lineOffset:0};Lr.positionedLines[ma]=Ji;var _i=Ji.positionedGlyphs,Hi=0;if(xa.length()){for(var Bi=0;Bi<xa.length();Bi++){var li=xa.getSection(Bi),Ki=xa.getSectionIndex(Bi),fo=xa.getCharCode(Bi),Uo=0,Ka=null,il=null,Ol=null,Ea=Ia,al=!(Pi===as.horizontal||!fa&&!Fo(fo)||fa&&(Gc[fo]||ts(fo)));if(li.imageName){var Bs=wi[li.imageName];if(!Bs)continue;Ol=li.imageName,Lr.iconsInText=Lr.iconsInText||!0,il=Bs.paddedRect;var Ns=Bs.displaySize;li.scale=li.scale*Ia/ji,Ka={width:Ns[0],height:Ns[1],left:No,top:-Cp,advance:al?Ns[1]:Ns[0]},Uo=ni+(Ia-Ns[1]*li.scale),Ea=Ka.advance;var cu=al?Ns[0]*li.scale-Ia*Hr:Ns[1]*li.scale-Ia*Hr;cu>0&&cu>Hi&&(Hi=cu)}else{var ef=qr[li.fontStack],fu=ef&&ef[fo];if(fu&&fu.rect)il=fu.rect,Ka=fu.metrics;else{var tf=$r[li.fontStack],uc=tf&&tf[fo];if(!uc)continue;Ka=uc.metrics}Uo=(Hr-li.scale)*Ia}al?(Lr.verticalizable=!0,_i.push({glyph:fo,imageName:Ol,x:Ma,y:Va+Uo,vertical:al,scale:li.scale,fontStack:li.fontStack,sectionIndex:Ki,metrics:Ka,rect:il}),Ma+=Ea*li.scale+Ti):(_i.push({glyph:fo,imageName:Ol,x:Ma,y:Va+Uo,vertical:al,scale:li.scale,fontStack:li.fontStack,sectionIndex:Ki,metrics:Ka,rect:il}),Ma+=Ka.advance*li.scale+Ti)}if(_i.length!==0){var ph=Ma-Ti;Oa=Math.max(ph,Oa),cg(_i,0,_i.length-1,Pa,Hi)}Ma=0;var nf=yi*Hr+Hi;Ji.lineOffset=Math.max(Hi,ni),Va+=nf,co=Math.max(nf,co),++ma}else Va+=yi,++ma}var Fu=Va-ac,rf=ih(Ci),af=rf.horizontalAlign,cc=rf.verticalAlign;(function(dh,fc,hu,zu,of,sf,Ru,lf,uf){var hc=(fc-hu)*of,pc=0;pc=sf!==Ru?-lf*zu-ac:(-zu*uf+.5)*Ru;for(var pu=0,dc=dh;pu<dc.length;pu+=1)for(var du=0,vc=dc[pu].positionedGlyphs;du<vc.length;du+=1){var gc=vc[du];gc.x+=hc,gc.y+=pc}})(Lr.positionedLines,Pa,af,cc,Oa,co,yi,Fu,zr.length),Lr.top+=-cc*Fu,Lr.bottom=Lr.top+Fu,Lr.left+=-af*Oa,Lr.right=Lr.left+Oa}(Pr,z,X,le,Sn,Ue,$e,ct,Rt,Mt,Gt,hn),!function(Lr){for(var $r=0,qr=Lr;$r<qr.length;$r+=1)if(qr[$r].positionedGlyphs.length!==0)return!1;return!0}(Br)&&Pr}Ja.fromFeature=function(M,z){for(var X=new Ja,le=0;le<M.sections.length;le++){var Me=M.sections[le];Me.image?X.addImageSection(Me):X.addTextSection(Me,z)}return X},Ja.prototype.length=function(){return this.text.length},Ja.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},Ja.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},Ja.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},Ja.prototype.verticalizePunctuation=function(){this.text=function(M){for(var z="",X=0;X<M.length;X++){var le=M.charCodeAt(X+1)||null,Me=M.charCodeAt(X-1)||null;le&&Zi(le)&&!nc[M[X+1]]||Me&&Zi(Me)&&!nc[M[X-1]]||!nc[M[X]]?z+=M[X]:z+=nc[M[X]]}return z}(this.text)},Ja.prototype.trim=function(){for(var M=0,z=0;z<this.text.length&&Gc[this.text.charCodeAt(z)];z++)M++;for(var X=this.text.length,le=this.text.length-1;le>=0&&le>=M&&Gc[this.text.charCodeAt(le)];le--)X--;this.text=this.text.substring(M,X),this.sectionIndex=this.sectionIndex.slice(M,X)},Ja.prototype.substring=function(M,z){var X=new Ja;return X.text=this.text.substring(M,z),X.sectionIndex=this.sectionIndex.slice(M,z),X.sections=this.sections,X},Ja.prototype.toString=function(){return this.text},Ja.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(z,X){return Math.max(z,M.sections[X].scale)},0)},Ja.prototype.addTextSection=function(M,z){this.text+=M.text,this.sections.push(ku.forText(M.scale,M.fontStack||z));for(var X=this.sections.length-1,le=0;le<M.text.length;++le)this.sectionIndex.push(X)},Ja.prototype.addImageSection=function(M){var z=M.image?M.image.name:"";if(z.length!==0){var X=this.getNextImageSectionCharCode();X?(this.text+=String.fromCharCode(X),this.sections.push(ku.forImage(z)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},Ja.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Gc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jo={};function Lp(M,z,X,le,Me,Oe){if(z.imageName){var Ue=le[z.imageName];return Ue?Ue.displaySize[0]*z.scale*Ia/Oe+Me:0}var $e=X[z.fontStack],ct=$e&&$e[M];return ct?ct.metrics.advance*z.scale+Me:0}function Ip(M,z,X,le){var Me=Math.pow(M-z,2);return le?M<z?Me/2:2*Me:Me+Math.abs(X)*X}function ug(M,z,X){var le=0;return M===10&&(le-=1e4),X&&(le+=150),M!==40&&M!==65288||(le+=50),z!==41&&z!==65289||(le+=50),le}function Op(M,z,X,le,Me,Oe){for(var Ue=null,$e=Ip(z,X,Me,Oe),ct=0,Mt=le;ct<Mt.length;ct+=1){var Ct=Mt[ct],Rt=Ip(z-Ct.x,X,Me,Oe)+Ct.badness;Rt<=$e&&(Ue=Ct,$e=Rt)}return{index:M,x:z,priorBreak:Ue,badness:$e}}function Pp(M){return M?Pp(M.priorBreak).concat(M.index):[]}function rh(M,z,X,le,Me,Oe,Ue){if(Oe!=="point")return[];if(!M)return[];for(var $e=[],ct=function(Sn,Mn,Rn,Nn,Gn,Qn){for(var ar=0,xr=0;xr<Sn.length();xr++){var gr=Sn.getSection(xr);ar+=Lp(Sn.getCharCode(xr),gr,Nn,Gn,Mn,Qn)}return ar/Math.max(1,Math.ceil(ar/Rn))}(M,z,X,le,Me,Ue),Mt=M.text.indexOf("\u200B")>=0,Ct=0,Rt=0;Rt<M.length();Rt++){var Gt=M.getSection(Rt),Ut=M.getCharCode(Rt);if(Gc[Ut]||(Ct+=Lp(Ut,Gt,le,Me,z,Ue)),Rt<M.length()-1){var sn=!((hn=Ut)<11904||!(br["Bopomofo Extended"](hn)||br.Bopomofo(hn)||br["CJK Compatibility Forms"](hn)||br["CJK Compatibility Ideographs"](hn)||br["CJK Compatibility"](hn)||br["CJK Radicals Supplement"](hn)||br["CJK Strokes"](hn)||br["CJK Symbols and Punctuation"](hn)||br["CJK Unified Ideographs Extension A"](hn)||br["CJK Unified Ideographs"](hn)||br["Enclosed CJK Letters and Months"](hn)||br["Halfwidth and Fullwidth Forms"](hn)||br.Hiragana(hn)||br["Ideographic Description Characters"](hn)||br["Kangxi Radicals"](hn)||br["Katakana Phonetic Extensions"](hn)||br.Katakana(hn)||br["Vertical Forms"](hn)||br["Yi Radicals"](hn)||br["Yi Syllables"](hn)));(jo[Ut]||sn||Gt.imageName)&&$e.push(Op(Rt+1,Ct,ct,$e,ug(Ut,M.getCharCode(Rt+1),sn&&Mt),!1))}}var hn;return Pp(Op(M.length(),Ct,ct,$e,0,!0))}function ih(M){var z=.5,X=.5;switch(M){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":X=1;break;case"top":case"top-right":case"top-left":X=0}return{horizontalAlign:z,verticalAlign:X}}function cg(M,z,X,le,Me){if(le||Me)for(var Oe=M[X],Ue=Oe.metrics.advance*Oe.scale,$e=(M[X].x+Ue)*le,ct=z;ct<=X;ct++)M[ct].x-=$e,M[ct].y+=Me}function Fp(M,z,X,le,Me,Oe){var Ue,$e=M.image;if($e.content){var ct=$e.content,Mt=$e.pixelRatio||1;Ue=[ct[0]/Mt,ct[1]/Mt,$e.displaySize[0]-ct[2]/Mt,$e.displaySize[1]-ct[3]/Mt]}var Ct,Rt,Gt,Ut,sn=z.left*Oe,hn=z.right*Oe;X==="width"||X==="both"?(Ut=Me[0]+sn-le[3],Rt=Me[0]+hn+le[1]):Rt=(Ut=Me[0]+(sn+hn-$e.displaySize[0])/2)+$e.displaySize[0];var Sn=z.top*Oe,Mn=z.bottom*Oe;return X==="height"||X==="both"?(Ct=Me[1]+Sn-le[0],Gt=Me[1]+Mn+le[2]):Gt=(Ct=Me[1]+(Sn+Mn-$e.displaySize[1])/2)+$e.displaySize[1],{image:$e,top:Ct,right:Rt,bottom:Gt,left:Ut,collisionPadding:Ue}}jo[10]=!0,jo[32]=!0,jo[38]=!0,jo[40]=!0,jo[41]=!0,jo[43]=!0,jo[45]=!0,jo[47]=!0,jo[173]=!0,jo[183]=!0,jo[8203]=!0,jo[8208]=!0,jo[8211]=!0,jo[8231]=!0;var Mu=function(M){function z(X,le,Me,Oe){M.call(this,X,le),this.angle=Me,Oe!==void 0&&(this.segment=Oe)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(t);Sr("Anchor",Mu);var rl=128;function ah(M,z){var X=z.expression;if(X.kind==="constant")return{kind:"constant",layoutSize:X.evaluate(new Yr(M+1))};if(X.kind==="source")return{kind:"source"};for(var le=X.zoomStops,Me=X.interpolationType,Oe=0;Oe<le.length&&le[Oe]<=M;)Oe++;for(var Ue=Oe=Math.max(0,Oe-1);Ue<le.length&&le[Ue]<M+1;)Ue++;Ue=Math.min(le.length-1,Ue);var $e=le[Oe],ct=le[Ue];return X.kind==="composite"?{kind:"composite",minZoom:$e,maxZoom:ct,interpolationType:Me}:{kind:"camera",minZoom:$e,maxZoom:ct,minSize:X.evaluate(new Yr($e)),maxSize:X.evaluate(new Yr(ct)),interpolationType:Me}}function zp(M,z,X){var le=z.uSize,Me=z.uSizeT,Oe=X.lowerSize,Ue=X.upperSize;return M.kind==="source"?Oe/rl:M.kind==="composite"?Nr(Oe/rl,Ue/rl,Me):le}function Rp(M,z){var X=0,le=0;if(M.kind==="constant")le=M.layoutSize;else if(M.kind!=="source"){var Me=M.interpolationType,Oe=M.minZoom,Ue=M.maxZoom,$e=Me?u(Fi.interpolationFactor(Me,z,Oe,Ue),0,1):0;M.kind==="camera"?le=Nr(M.minSize,M.maxSize,$e):X=$e}return{uSizeT:X,uSize:le}}var fg=Object.freeze({__proto__:null,getSizeData:ah,evaluateSizeForFeature:zp,evaluateSizeForZoom:Rp,SIZE_PACK_FACTOR:rl});function Bp(M,z,X,le,Me){if(z.segment===void 0)return!0;for(var Oe=z,Ue=z.segment+1,$e=0;$e>-X/2;){if(--Ue<0)return!1;$e-=M[Ue].dist(Oe),Oe=M[Ue]}$e+=M[Ue].dist(M[Ue+1]),Ue++;for(var ct=[],Mt=0;$e<X/2;){var Ct=M[Ue-1],Rt=M[Ue],Gt=M[Ue+1];if(!Gt)return!1;var Ut=Ct.angleTo(Rt)-Rt.angleTo(Gt);for(Ut=Math.abs((Ut+3*Math.PI)%(2*Math.PI)-Math.PI),ct.push({distance:$e,angleDelta:Ut}),Mt+=Ut;$e-ct[0].distance>le;)Mt-=ct.shift().angleDelta;if(Mt>Me)return!1;Ue++,$e+=Rt.dist(Gt)}return!0}function Np(M){for(var z=0,X=0;X<M.length-1;X++)z+=M[X].dist(M[X+1]);return z}function jp(M,z,X){return M?.6*z*X:0}function Up(M,z){return Math.max(M?M.right-M.left:0,z?z.right-z.left:0)}function hg(M,z,X,le,Me,Oe){for(var Ue=jp(X,Me,Oe),$e=Up(X,le)*Oe,ct=0,Mt=Np(M)/2,Ct=0;Ct<M.length-1;Ct++){var Rt=M[Ct],Gt=M[Ct+1],Ut=Rt.dist(Gt);if(ct+Ut>Mt){var sn=(Mt-ct)/Ut,hn=Nr(Rt.x,Gt.x,sn),Sn=Nr(Rt.y,Gt.y,sn),Mn=new Mu(hn,Sn,Gt.angleTo(Rt),Ct);return Mn._round(),!Ue||Bp(M,Mn,$e,Ue,z)?Mn:void 0}ct+=Ut}}function pg(M,z,X,le,Me,Oe,Ue,$e,ct){var Mt=jp(le,Oe,Ue),Ct=Up(le,Me),Rt=Ct*Ue,Gt=M[0].x===0||M[0].x===ct||M[0].y===0||M[0].y===ct;return z-Rt<z/4&&(z=Rt+z/4),Vp(M,Gt?z/2*$e%z:(Ct/2+2*Oe)*Ue*$e%z,z,Mt,X,Rt,Gt,!1,ct)}function Vp(M,z,X,le,Me,Oe,Ue,$e,ct){for(var Mt=Oe/2,Ct=Np(M),Rt=0,Gt=z-X,Ut=[],sn=0;sn<M.length-1;sn++){for(var hn=M[sn],Sn=M[sn+1],Mn=hn.dist(Sn),Rn=Sn.angleTo(hn);Gt+X<Rt+Mn;){var Nn=((Gt+=X)-Rt)/Mn,Gn=Nr(hn.x,Sn.x,Nn),Qn=Nr(hn.y,Sn.y,Nn);if(Gn>=0&&Gn<ct&&Qn>=0&&Qn<ct&&Gt-Mt>=0&&Gt+Mt<=Ct){var ar=new Mu(Gn,Qn,Rn,sn);ar._round(),le&&!Bp(M,ar,Oe,le,Me)||Ut.push(ar)}}Rt+=Mn}return $e||Ut.length||Ue||(Ut=Vp(M,Rt/2,X,le,Me,Oe,Ue,!0,ct)),Ut}function qp(M,z,X,le,Me){for(var Oe=[],Ue=0;Ue<M.length;Ue++)for(var $e=M[Ue],ct=void 0,Mt=0;Mt<$e.length-1;Mt++){var Ct=$e[Mt],Rt=$e[Mt+1];Ct.x<z&&Rt.x<z||(Ct.x<z?Ct=new t(z,Ct.y+(Rt.y-Ct.y)*((z-Ct.x)/(Rt.x-Ct.x)))._round():Rt.x<z&&(Rt=new t(z,Ct.y+(Rt.y-Ct.y)*((z-Ct.x)/(Rt.x-Ct.x)))._round()),Ct.y<X&&Rt.y<X||(Ct.y<X?Ct=new t(Ct.x+(Rt.x-Ct.x)*((X-Ct.y)/(Rt.y-Ct.y)),X)._round():Rt.y<X&&(Rt=new t(Ct.x+(Rt.x-Ct.x)*((X-Ct.y)/(Rt.y-Ct.y)),X)._round()),Ct.x>=le&&Rt.x>=le||(Ct.x>=le?Ct=new t(le,Ct.y+(Rt.y-Ct.y)*((le-Ct.x)/(Rt.x-Ct.x)))._round():Rt.x>=le&&(Rt=new t(le,Ct.y+(Rt.y-Ct.y)*((le-Ct.x)/(Rt.x-Ct.x)))._round()),Ct.y>=Me&&Rt.y>=Me||(Ct.y>=Me?Ct=new t(Ct.x+(Rt.x-Ct.x)*((Me-Ct.y)/(Rt.y-Ct.y)),Me)._round():Rt.y>=Me&&(Rt=new t(Ct.x+(Rt.x-Ct.x)*((Me-Ct.y)/(Rt.y-Ct.y)),Me)._round()),ct&&Ct.equals(ct[ct.length-1])||(ct=[Ct],Oe.push(ct)),ct.push(Rt)))))}return Oe}var Su=No;function Hp(M,z,X,le){var Me=[],Oe=M.image,Ue=Oe.pixelRatio,$e=Oe.paddedRect.w-2*Su,ct=Oe.paddedRect.h-2*Su,Mt=M.right-M.left,Ct=M.bottom-M.top,Rt=Oe.stretchX||[[0,$e]],Gt=Oe.stretchY||[[0,ct]],Ut=function(yi,Ci){return yi+Ci[1]-Ci[0]},sn=Rt.reduce(Ut,0),hn=Gt.reduce(Ut,0),Sn=$e-sn,Mn=ct-hn,Rn=0,Nn=sn,Gn=0,Qn=hn,ar=0,xr=Sn,gr=0,Tr=Mn;if(Oe.content&&le){var Mr=Oe.content;Rn=Wc(Rt,0,Mr[0]),Gn=Wc(Gt,0,Mr[1]),Nn=Wc(Rt,Mr[0],Mr[2]),Qn=Wc(Gt,Mr[1],Mr[3]),ar=Mr[0]-Rn,gr=Mr[1]-Gn,xr=Mr[2]-Mr[0]-Nn,Tr=Mr[3]-Mr[1]-Qn}var jr=function(yi,Ci,Oi,Pi){var Ti=Yc(yi.stretch-Rn,Nn,Mt,M.left),fa=Zc(yi.fixed-ar,xr,yi.stretch,sn),ji=Yc(Ci.stretch-Gn,Qn,Ct,M.top),Ma=Zc(Ci.fixed-gr,Tr,Ci.stretch,hn),Va=Yc(Oi.stretch-Rn,Nn,Mt,M.left),Oa=Zc(Oi.fixed-ar,xr,Oi.stretch,sn),co=Yc(Pi.stretch-Gn,Qn,Ct,M.top),Pa=Zc(Pi.fixed-gr,Tr,Pi.stretch,hn),ma=new t(Ti,ji),Fa=new t(Va,ji),Sa=new t(Va,co),xa=new t(Ti,co),Hr=new t(fa/Ue,Ma/Ue),ni=new t(Oa/Ue,Pa/Ue),Ji=z*Math.PI/180;if(Ji){var _i=Math.sin(Ji),Hi=Math.cos(Ji),Bi=[Hi,-_i,_i,Hi];ma._matMult(Bi),Fa._matMult(Bi),xa._matMult(Bi),Sa._matMult(Bi)}var li=yi.stretch+yi.fixed,Ki=Oi.stretch+Oi.fixed,fo=Ci.stretch+Ci.fixed,Uo=Pi.stretch+Pi.fixed;return{tl:ma,tr:Fa,bl:xa,br:Sa,tex:{x:Oe.paddedRect.x+Su+li,y:Oe.paddedRect.y+Su+fo,w:Ki-li,h:Uo-fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:ni,minFontScaleX:xr/Ue/Mt,minFontScaleY:Tr/Ue/Ct,isSDF:X}};if(le&&(Oe.stretchX||Oe.stretchY))for(var Ir=Gp(Rt,Sn,sn),Br=Gp(Gt,Mn,hn),Pr=0;Pr<Ir.length-1;Pr++)for(var Lr=Ir[Pr],$r=Ir[Pr+1],qr=0;qr<Br.length-1;qr++){var wi=Br[qr],zr=Br[qr+1];Me.push(jr(Lr,wi,$r,zr))}else Me.push(jr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$e+1},{fixed:0,stretch:ct+1}));return Me}function Wc(M,z,X){for(var le=0,Me=0,Oe=M;Me<Oe.length;Me+=1){var Ue=Oe[Me];le+=Math.max(z,Math.min(X,Ue[1]))-Math.max(z,Math.min(X,Ue[0]))}return le}function Gp(M,z,X){for(var le=[{fixed:-Su,stretch:0}],Me=0,Oe=M;Me<Oe.length;Me+=1){var Ue=Oe[Me],$e=Ue[0],ct=Ue[1],Mt=le[le.length-1];le.push({fixed:$e-Mt.stretch,stretch:Mt.stretch}),le.push({fixed:$e-Mt.stretch,stretch:Mt.stretch+(ct-$e)})}return le.push({fixed:z+Su,stretch:X}),le}function Yc(M,z,X,le){return M/z*X+le}function Zc(M,z,X,le){return M-z*X/le}var Xc=function(M,z,X,le,Me,Oe,Ue,$e,ct,Mt){if(this.boxStartIndex=M.length,ct){var Ct=Oe.top,Rt=Oe.bottom,Gt=Oe.collisionPadding;Gt&&(Ct-=Gt[1],Rt+=Gt[3]);var Ut=Rt-Ct;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var sn=Oe.top*Ue-$e,hn=Oe.bottom*Ue+$e,Sn=Oe.left*Ue-$e,Mn=Oe.right*Ue+$e,Rn=Oe.collisionPadding;if(Rn&&(Sn-=Rn[0]*Ue,sn-=Rn[1]*Ue,Mn+=Rn[2]*Ue,hn+=Rn[3]*Ue),Mt){var Nn=new t(Sn,sn),Gn=new t(Mn,sn),Qn=new t(Sn,hn),ar=new t(Mn,hn),xr=Mt*Math.PI/180;Nn._rotate(xr),Gn._rotate(xr),Qn._rotate(xr),ar._rotate(xr),Sn=Math.min(Nn.x,Gn.x,Qn.x,ar.x),Mn=Math.max(Nn.x,Gn.x,Qn.x,ar.x),sn=Math.min(Nn.y,Gn.y,Qn.y,ar.y),hn=Math.max(Nn.y,Gn.y,Qn.y,ar.y)}M.emplaceBack(z.x,z.y,Sn,sn,Mn,hn,X,le,Me)}this.boxEndIndex=M.length},Eu=function(M,z){if(M===void 0&&(M=[]),z===void 0&&(z=dg),this.data=M,this.length=this.data.length,this.compare=z,this.length>0)for(var X=(this.length>>1)-1;X>=0;X--)this._down(X)};function dg(M,z){return M<z?-1:M>z?1:0}function vg(M,z,X){z===void 0&&(z=1),X===void 0&&(X=!1);for(var le=1/0,Me=1/0,Oe=-1/0,Ue=-1/0,$e=M[0],ct=0;ct<$e.length;ct++){var Mt=$e[ct];(!ct||Mt.x<le)&&(le=Mt.x),(!ct||Mt.y<Me)&&(Me=Mt.y),(!ct||Mt.x>Oe)&&(Oe=Mt.x),(!ct||Mt.y>Ue)&&(Ue=Mt.y)}var Ct=Oe-le,Rt=Ue-Me,Gt=Math.min(Ct,Rt),Ut=Gt/2,sn=new Eu([],gg);if(Gt===0)return new t(le,Me);for(var hn=le;hn<Oe;hn+=Gt)for(var Sn=Me;Sn<Ue;Sn+=Gt)sn.push(new Cu(hn+Ut,Sn+Ut,Ut,M));for(var Mn=function(Gn){for(var Qn=0,ar=0,xr=0,gr=Gn[0],Tr=0,Mr=gr.length,jr=Mr-1;Tr<Mr;jr=Tr++){var Ir=gr[Tr],Br=gr[jr],Pr=Ir.x*Br.y-Br.x*Ir.y;ar+=(Ir.x+Br.x)*Pr,xr+=(Ir.y+Br.y)*Pr,Qn+=3*Pr}return new Cu(ar/Qn,xr/Qn,0,Gn)}(M),Rn=sn.length;sn.length;){var Nn=sn.pop();(Nn.d>Mn.d||!Mn.d)&&(Mn=Nn,X&&console.log("found best %d after %d probes",Math.round(1e4*Nn.d)/1e4,Rn)),Nn.max-Mn.d<=z||(Ut=Nn.h/2,sn.push(new Cu(Nn.p.x-Ut,Nn.p.y-Ut,Ut,M)),sn.push(new Cu(Nn.p.x+Ut,Nn.p.y-Ut,Ut,M)),sn.push(new Cu(Nn.p.x-Ut,Nn.p.y+Ut,Ut,M)),sn.push(new Cu(Nn.p.x+Ut,Nn.p.y+Ut,Ut,M)),Rn+=4)}return X&&(console.log("num probes: "+Rn),console.log("best distance: "+Mn.d)),Mn.p}function gg(M,z){return z.max-M.max}function Cu(M,z,X,le){this.p=new t(M,z),this.h=X,this.d=function(Me,Oe){for(var Ue=!1,$e=1/0,ct=0;ct<Oe.length;ct++)for(var Mt=Oe[ct],Ct=0,Rt=Mt.length,Gt=Rt-1;Ct<Rt;Gt=Ct++){var Ut=Mt[Ct],sn=Mt[Gt];Ut.y>Me.y!=sn.y>Me.y&&Me.x<(sn.x-Ut.x)*(Me.y-Ut.y)/(sn.y-Ut.y)+Ut.x&&(Ue=!Ue),$e=Math.min($e,Lc(Me,Ut,sn))}return(Ue?1:-1)*Math.sqrt($e)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}Eu.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Eu.prototype.pop=function(){if(this.length!==0){var M=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),M}},Eu.prototype.peek=function(){return this.data[0]},Eu.prototype._up=function(M){for(var z=this.data,X=this.compare,le=z[M];M>0;){var Me=M-1>>1,Oe=z[Me];if(X(le,Oe)>=0)break;z[M]=Oe,M=Me}z[M]=le},Eu.prototype._down=function(M){for(var z=this.data,X=this.compare,le=this.length>>1,Me=z[M];M<le;){var Oe=1+(M<<1),Ue=z[Oe],$e=Oe+1;if($e<this.length&&X(z[$e],Ue)<0&&(Oe=$e,Ue=z[$e]),X(Ue,Me)>=0)break;z[M]=Ue,M=Oe}z[M]=Me};var Du=7,oh=Number.POSITIVE_INFINITY;function Wp(M,z){return z[1]!==oh?function(X,le,Me){var Oe=0,Ue=0;switch(le=Math.abs(le),Me=Math.abs(Me),X){case"top-right":case"top-left":case"top":Ue=Me-Du;break;case"bottom-right":case"bottom-left":case"bottom":Ue=-Me+Du}switch(X){case"top-right":case"bottom-right":case"right":Oe=-le;break;case"top-left":case"bottom-left":case"left":Oe=le}return[Oe,Ue]}(M,z[0],z[1]):function(X,le){var Me=0,Oe=0;le<0&&(le=0);var Ue=le/Math.sqrt(2);switch(X){case"top-right":case"top-left":Oe=Ue-Du;break;case"bottom-right":case"bottom-left":Oe=-Ue+Du;break;case"bottom":Oe=-le+Du;break;case"top":Oe=le-Du}switch(X){case"top-right":case"bottom-right":Me=-Ue;break;case"top-left":case"bottom-left":Me=Ue;break;case"left":Me=le;break;case"right":Me=-le}return[Me,Oe]}(M,z[0])}function sh(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var oc=255,Wl=oc*rl;function Yp(M,z,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn){var hn=function(Gn,Qn,ar,xr,gr,Tr,Mr,jr){for(var Ir=xr.layout.get("text-rotate").evaluate(Tr,{})*Math.PI/180,Br=[],Pr=0,Lr=Qn.positionedLines;Pr<Lr.length;Pr+=1)for(var $r=Lr[Pr],qr=0,wi=$r.positionedGlyphs;qr<wi.length;qr+=1){var zr=wi[qr];if(zr.rect){var yi=zr.rect||{},Ci=Cp+1,Oi=!0,Pi=1,Ti=0,fa=(gr||jr)&&zr.vertical,ji=zr.metrics.advance*zr.scale/2;if(jr&&Qn.verticalizable){var Ma=(zr.scale-1)*Ia,Va=(Ia-zr.metrics.width*zr.scale)/2;Ti=$r.lineOffset/2-(zr.imageName?-Va:Ma)}if(zr.imageName){var Oa=Mr[zr.imageName];Oi=Oa.sdf,Pi=Oa.pixelRatio,Ci=No/Pi}var co=gr?[zr.x+ji,zr.y]:[0,0],Pa=gr?[0,0]:[zr.x+ji+ar[0],zr.y+ar[1]-Ti],ma=[0,0];fa&&(ma=Pa,Pa=[0,0]);var Fa=(zr.metrics.left-Ci)*zr.scale-ji+Pa[0],Sa=(-zr.metrics.top-Ci)*zr.scale+Pa[1],xa=Fa+yi.w*zr.scale/Pi,Hr=Sa+yi.h*zr.scale/Pi,ni=new t(Fa,Sa),Ji=new t(xa,Sa),_i=new t(Fa,Hr),Hi=new t(xa,Hr);if(fa){var Bi=new t(-ji,ji-ac),li=-Math.PI/2,Ki=Ia/2-ji,fo=zr.imageName?Ki:0,Uo=new t(5-ac-Ki,-fo),Ka=new(Function.prototype.bind.apply(t,[null].concat(ma)));ni._rotateAround(li,Bi)._add(Uo)._add(Ka),Ji._rotateAround(li,Bi)._add(Uo)._add(Ka),_i._rotateAround(li,Bi)._add(Uo)._add(Ka),Hi._rotateAround(li,Bi)._add(Uo)._add(Ka)}if(Ir){var il=Math.sin(Ir),Ol=Math.cos(Ir),Ea=[Ol,-il,il,Ol];ni._matMult(Ea),Ji._matMult(Ea),_i._matMult(Ea),Hi._matMult(Ea)}var al=new t(0,0),Bs=new t(0,0);Br.push({tl:ni,tr:Ji,bl:_i,br:Hi,tex:yi,writingMode:Qn.writingMode,glyphOffset:co,sectionIndex:zr.sectionIndex,isSDF:Oi,pixelOffsetTL:al,pixelOffsetBR:Bs,minFontScaleX:0,minFontScaleY:0})}}return Br}(0,X,$e,Me,Oe,Ue,le,M.allowVerticalPlacement),Sn=M.textSizeData,Mn=null;Sn.kind==="source"?(Mn=[rl*Me.layout.get("text-size").evaluate(Ue,{})])[0]>Wl&&E(M.layerIds[0]+': Value for "text-size" is >= '+oc+'. Reduce your "text-size".'):Sn.kind==="composite"&&((Mn=[rl*Ut.compositeTextSizes[0].evaluate(Ue,{},sn),rl*Ut.compositeTextSizes[1].evaluate(Ue,{},sn)])[0]>Wl||Mn[1]>Wl)&&E(M.layerIds[0]+': Value for "text-size" is >= '+oc+'. Reduce your "text-size".'),M.addSymbols(M.text,hn,Mn,$e,Oe,Ue,Mt,z,ct.lineStartIndex,ct.lineLength,Gt,sn);for(var Rn=0,Nn=Ct;Rn<Nn.length;Rn+=1)Rt[Nn[Rn]]=M.text.placedSymbolArray.length-1;return 4*hn.length}function Zp(M){for(var z in M)return M[z];return null}function yg(M,z,X,le){var Me=M.compareText;if(z in Me){for(var Oe=Me[z],Ue=Oe.length-1;Ue>=0;Ue--)if(le.dist(Oe[Ue])<X)return!0}else Me[z]=[];return Me[z].push(le),!1}var mg=wu.VectorTileFeature.types,xg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jc(M,z,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt){var Ut=$e?Math.min(Wl,Math.round($e[0])):0,sn=$e?Math.min(Wl,Math.round($e[1])):0;M.emplaceBack(z,X,Math.round(32*le),Math.round(32*Me),Oe,Ue,(Ut<<1)+(ct?1:0),sn,16*Mt,16*Ct,256*Rt,256*Gt)}function lh(M,z,X){M.emplaceBack(z.x,z.y,X),M.emplaceBack(z.x,z.y,X),M.emplaceBack(z.x,z.y,X),M.emplaceBack(z.x,z.y,X)}function bg(M){for(var z=0,X=M.sections;z<X.length;z+=1)if(ga(X[z].text))return!0;return!1}var Lu=function(M){this.layoutVertexArray=new Y,this.indexArray=new _e,this.programConfigurations=M,this.segments=new Hn,this.dynamicLayoutVertexArray=new G,this.opacityVertexArray=new D,this.placedSymbolArray=new Ot};Lu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Lu.prototype.upload=function(M,z,X,le){this.isEmpty()||(X&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Wv.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Yv.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,xg,!0),this.opacityVertexBuffer.itemSize=1),(X||le)&&this.programConfigurations.upload(M))},Lu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Sr("SymbolBuffers",Lu);var sc=function(M,z,X){this.layoutVertexArray=new M,this.layoutAttributes=z,this.indexArray=new X,this.segments=new Hn,this.collisionVertexArray=new ue};sc.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,Zv.members,!0)},sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Sr("CollisionBuffers",sc);var gi=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ue){return Ue.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Hf([]),this.placementViewportMatrix=Hf([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ah(this.zoom,z["text-size"]),this.iconSizeData=ah(this.zoom,z["icon-size"]);var X=this.layers[0].layout,le=X.get("symbol-sort-key"),Me=X.get("symbol-z-order");this.canOverlap=X.get("text-allow-overlap")||X.get("icon-allow-overlap")||X.get("text-ignore-placement")||X.get("icon-ignore-placement"),this.sortFeaturesByKey=Me!=="viewport-y"&&le.constantOr(1)!==void 0;var Oe=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Oe&&this.canOverlap,X.get("symbol-placement")==="point"&&(this.writingModes=X.get("text-writing-mode").map(function(Ue){return as[Ue]})),this.stateDependentLayerIds=this.layers.filter(function(Ue){return Ue.isStateDependent()}).map(function(Ue){return Ue.id}),this.sourceID=M.sourceID};gi.prototype.createArrays=function(){this.text=new Lu(new qi(this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Lu(new qi(this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Vt,this.lineVertexArray=new dn,this.symbolInstances=new Yt},gi.prototype.calculateGlyphDependencies=function(M,z,X,le,Me){for(var Oe=0;Oe<M.length;Oe++)if(z[M.charCodeAt(Oe)]=!0,(X||le)&&Me){var Ue=nc[M.charAt(Oe)];Ue&&(z[Ue.charCodeAt(0)]=!0)}},gi.prototype.populate=function(M,z,X){var le=this.layers[0],Me=le.layout,Oe=Me.get("text-font"),Ue=Me.get("text-field"),$e=Me.get("icon-image"),ct=(Ue.value.kind!=="constant"||Ue.value.value instanceof Xn&&!Ue.value.value.isEmpty()||Ue.value.value.toString().length>0)&&(Oe.value.kind!=="constant"||Oe.value.value.length>0),Mt=$e.value.kind!=="constant"||!!$e.value.value||Object.keys($e.parameters).length>0,Ct=Me.get("symbol-sort-key");if(this.features=[],ct||Mt){for(var Rt=z.iconDependencies,Gt=z.glyphDependencies,Ut=z.availableImages,sn=new Yr(this.zoom),hn=0,Sn=M;hn<Sn.length;hn+=1){var Mn=Sn[hn],Rn=Mn.feature,Nn=Mn.id,Gn=Mn.index,Qn=Mn.sourceLayerIndex,ar=le._featureFilter.needGeometry,xr=Si(Rn,ar);if(le._featureFilter.filter(sn,xr,X)){ar||(xr.geometry=Bo(Rn));var gr=void 0;if(ct){var Tr=le.getValueAndResolveTokens("text-field",xr,X,Ut),Mr=Xn.factory(Tr);bg(Mr)&&(this.hasRTLText=!0),(!this.hasRTLText||Is()==="unavailable"||this.hasRTLText&&Aa.isParsed())&&(gr=Jv(Mr,le,xr))}var jr=void 0;if(Mt){var Ir=le.getValueAndResolveTokens("icon-image",xr,X,Ut);jr=Ir instanceof cr?Ir:cr.fromString(Ir)}if(gr||jr){var Br=this.sortFeaturesByKey?Ct.evaluate(xr,{},X):void 0,Pr={id:Nn,text:gr,icon:jr,index:Gn,sourceLayerIndex:Qn,geometry:xr.geometry,properties:Rn.properties,type:mg[Rn.type],sortKey:Br};if(this.features.push(Pr),jr&&(Rt[jr.name]=!0),gr){var Lr=Oe.evaluate(xr,{},X).join(","),$r=Me.get("text-rotation-alignment")==="map"&&Me.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(as.vertical)>=0;for(var qr=0,wi=gr.sections;qr<wi.length;qr+=1){var zr=wi[qr];if(zr.image)Rt[zr.image.name]=!0;else{var yi=$s(gr.toString()),Ci=zr.fontStack||Lr,Oi=Gt[Ci]=Gt[Ci]||{};this.calculateGlyphDependencies(zr.text,Oi,$r,this.allowVerticalPlacement,yi)}}}}}}Me.get("symbol-placement")==="line"&&(this.features=function(Pi){var Ti={},fa={},ji=[],Ma=0;function Va(Hi){ji.push(Pi[Hi]),Ma++}function Oa(Hi,Bi,li){var Ki=fa[Hi];return delete fa[Hi],fa[Bi]=Ki,ji[Ki].geometry[0].pop(),ji[Ki].geometry[0]=ji[Ki].geometry[0].concat(li[0]),Ki}function co(Hi,Bi,li){var Ki=Ti[Bi];return delete Ti[Bi],Ti[Hi]=Ki,ji[Ki].geometry[0].shift(),ji[Ki].geometry[0]=li[0].concat(ji[Ki].geometry[0]),Ki}function Pa(Hi,Bi,li){var Ki=li?Bi[0][Bi[0].length-1]:Bi[0][0];return Hi+":"+Ki.x+":"+Ki.y}for(var ma=0;ma<Pi.length;ma++){var Fa=Pi[ma],Sa=Fa.geometry,xa=Fa.text?Fa.text.toString():null;if(xa){var Hr=Pa(xa,Sa),ni=Pa(xa,Sa,!0);if(Hr in fa&&ni in Ti&&fa[Hr]!==Ti[ni]){var Ji=co(Hr,ni,Sa),_i=Oa(Hr,ni,ji[Ji].geometry);delete Ti[Hr],delete fa[ni],fa[Pa(xa,ji[_i].geometry,!0)]=_i,ji[Ji].geometry=null}else Hr in fa?Oa(Hr,ni,Sa):ni in Ti?co(Hr,ni,Sa):(Va(ma),Ti[Hr]=Ma-1,fa[ni]=Ma-1)}else Va(ma)}return ji.filter(function(Hi){return Hi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Pi,Ti){return Pi.sortKey-Ti.sortKey})}},gi.prototype.update=function(M,z,X){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,z,this.layers,X),this.icon.programConfigurations.updatePaintArrays(M,z,this.layers,X))},gi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},gi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gi.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},gi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},gi.prototype.addToLineVertexArray=function(M,z){var X=this.lineVertexArray.length;if(M.segment!==void 0){for(var le=M.dist(z[M.segment+1]),Me=M.dist(z[M.segment]),Oe={},Ue=M.segment+1;Ue<z.length;Ue++)Oe[Ue]={x:z[Ue].x,y:z[Ue].y,tileUnitDistanceFromAnchor:le},Ue<z.length-1&&(le+=z[Ue+1].dist(z[Ue]));for(var $e=M.segment||0;$e>=0;$e--)Oe[$e]={x:z[$e].x,y:z[$e].y,tileUnitDistanceFromAnchor:Me},$e>0&&(Me+=z[$e-1].dist(z[$e]));for(var ct=0;ct<z.length;ct++){var Mt=Oe[ct];this.lineVertexArray.emplaceBack(Mt.x,Mt.y,Mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:X,lineLength:this.lineVertexArray.length-X}},gi.prototype.addSymbols=function(M,z,X,le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt){for(var Gt=M.indexArray,Ut=M.layoutVertexArray,sn=M.segments.prepareSegment(4*z.length,Ut,Gt,this.canOverlap?Oe.sortKey:void 0),hn=this.glyphOffsetArray.length,Sn=sn.vertexLength,Mn=this.allowVerticalPlacement&&Ue===as.vertical?Math.PI/2:0,Rn=Oe.text&&Oe.text.sections,Nn=0;Nn<z.length;Nn++){var Gn=z[Nn],Qn=Gn.tl,ar=Gn.tr,xr=Gn.bl,gr=Gn.br,Tr=Gn.tex,Mr=Gn.pixelOffsetTL,jr=Gn.pixelOffsetBR,Ir=Gn.minFontScaleX,Br=Gn.minFontScaleY,Pr=Gn.glyphOffset,Lr=Gn.isSDF,$r=Gn.sectionIndex,qr=sn.vertexLength,wi=Pr[1];Jc(Ut,$e.x,$e.y,Qn.x,wi+Qn.y,Tr.x,Tr.y,X,Lr,Mr.x,Mr.y,Ir,Br),Jc(Ut,$e.x,$e.y,ar.x,wi+ar.y,Tr.x+Tr.w,Tr.y,X,Lr,jr.x,Mr.y,Ir,Br),Jc(Ut,$e.x,$e.y,xr.x,wi+xr.y,Tr.x,Tr.y+Tr.h,X,Lr,Mr.x,jr.y,Ir,Br),Jc(Ut,$e.x,$e.y,gr.x,wi+gr.y,Tr.x+Tr.w,Tr.y+Tr.h,X,Lr,jr.x,jr.y,Ir,Br),lh(M.dynamicLayoutVertexArray,$e,Mn),Gt.emplaceBack(qr,qr+1,qr+2),Gt.emplaceBack(qr+1,qr+2,qr+3),sn.vertexLength+=4,sn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pr[0]),Nn!==z.length-1&&$r===z[Nn+1].sectionIndex||M.programConfigurations.populatePaintArrays(Ut.length,Oe,Oe.index,{},Rt,Rn&&Rn[$r])}M.placedSymbolArray.emplaceBack($e.x,$e.y,hn,this.glyphOffsetArray.length-hn,Sn,ct,Mt,$e.segment,X?X[0]:0,X?X[1]:0,le[0],le[1],Ue,0,!1,0,Ct)},gi.prototype._addCollisionDebugVertex=function(M,z,X,le,Me,Oe){return z.emplaceBack(0,0),M.emplaceBack(X.x,X.y,le,Me,Math.round(Oe.x),Math.round(Oe.y))},gi.prototype.addCollisionDebugVertices=function(M,z,X,le,Me,Oe,Ue){var $e=Me.segments.prepareSegment(4,Me.layoutVertexArray,Me.indexArray),ct=$e.vertexLength,Mt=Me.layoutVertexArray,Ct=Me.collisionVertexArray,Rt=Ue.anchorX,Gt=Ue.anchorY;this._addCollisionDebugVertex(Mt,Ct,Oe,Rt,Gt,new t(M,z)),this._addCollisionDebugVertex(Mt,Ct,Oe,Rt,Gt,new t(X,z)),this._addCollisionDebugVertex(Mt,Ct,Oe,Rt,Gt,new t(X,le)),this._addCollisionDebugVertex(Mt,Ct,Oe,Rt,Gt,new t(M,le)),$e.vertexLength+=4;var Ut=Me.indexArray;Ut.emplaceBack(ct,ct+1),Ut.emplaceBack(ct+1,ct+2),Ut.emplaceBack(ct+2,ct+3),Ut.emplaceBack(ct+3,ct),$e.primitiveLength+=4},gi.prototype.addDebugCollisionBoxes=function(M,z,X,le){for(var Me=M;Me<z;Me++){var Oe=this.collisionBoxArray.get(Me),Ue=Oe.x1,$e=Oe.y1,ct=Oe.x2,Mt=Oe.y2;this.addCollisionDebugVertices(Ue,$e,ct,Mt,le?this.textCollisionBox:this.iconCollisionBox,Oe.anchorPoint,X)}},gi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sc(Q,wp.members,ft),this.iconCollisionBox=new sc(Q,wp.members,ft);for(var M=0;M<this.symbolInstances.length;M++){var z=this.symbolInstances.get(M);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},gi.prototype._deserializeCollisionBoxesForSymbol=function(M,z,X,le,Me,Oe,Ue,$e,ct){for(var Mt={},Ct=z;Ct<X;Ct++){var Rt=M.get(Ct);Mt.textBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},Mt.textFeatureIndex=Rt.featureIndex;break}for(var Gt=le;Gt<Me;Gt++){var Ut=M.get(Gt);Mt.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},Mt.verticalTextFeatureIndex=Ut.featureIndex;break}for(var sn=Oe;sn<Ue;sn++){var hn=M.get(sn);Mt.iconBox={x1:hn.x1,y1:hn.y1,x2:hn.x2,y2:hn.y2,anchorPointX:hn.anchorPointX,anchorPointY:hn.anchorPointY},Mt.iconFeatureIndex=hn.featureIndex;break}for(var Sn=$e;Sn<ct;Sn++){var Mn=M.get(Sn);Mt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},Mt.verticalIconFeatureIndex=Mn.featureIndex;break}return Mt},gi.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var X=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,X.textBoxStartIndex,X.textBoxEndIndex,X.verticalTextBoxStartIndex,X.verticalTextBoxEndIndex,X.iconBoxStartIndex,X.iconBoxEndIndex,X.verticalIconBoxStartIndex,X.verticalIconBoxEndIndex))}},gi.prototype.hasTextData=function(){return this.text.segments.get().length>0},gi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},gi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},gi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},gi.prototype.addIndicesForPlacedSymbol=function(M,z){for(var X=M.placedSymbolArray.get(z),le=X.vertexStartIndex+4*X.numGlyphs,Me=X.vertexStartIndex;Me<le;Me+=4)M.indexArray.emplaceBack(Me,Me+1,Me+2),M.indexArray.emplaceBack(Me+1,Me+2,Me+3)},gi.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var z=Math.sin(M),X=Math.cos(M),le=[],Me=[],Oe=[],Ue=0;Ue<this.symbolInstances.length;++Ue){Oe.push(Ue);var $e=this.symbolInstances.get(Ue);le.push(0|Math.round(z*$e.anchorX+X*$e.anchorY)),Me.push($e.featureIndex)}return Oe.sort(function(ct,Mt){return le[ct]-le[Mt]||Me[Mt]-Me[ct]}),Oe},gi.prototype.addToSortKeyRanges=function(M,z){var X=this.sortKeyRanges[this.sortKeyRanges.length-1];X&&X.sortKey===z?X.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:M,symbolInstanceEnd:M+1})},gi.prototype.sortFeatures=function(M){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var X=0,le=this.symbolInstanceIndexes;X<le.length;X+=1){var Me=le[X],Oe=this.symbolInstances.get(Me);this.featureSortOrder.push(Oe.featureIndex),[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(function(Ue,$e,ct){Ue>=0&&ct.indexOf(Ue)===$e&&z.addIndicesForPlacedSymbol(z.text,Ue)}),Oe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Oe.verticalPlacedTextSymbolIndex),Oe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.placedIconSymbolIndex),Oe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Sr("SymbolBucket",gi,{omit:["layers","collisionBoxArray","features","compareText"]}),gi.MAX_GLYPHS=65535,gi.addDynamicAttributes=lh;var _g=new zi({"symbol-placement":new Cr(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Cr(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Cr(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fr(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Cr(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Cr(Be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Cr(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Cr(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Cr(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fr(Be.layout_symbol["icon-size"]),"icon-text-fit":new Cr(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Cr(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fr(Be.layout_symbol["icon-image"]),"icon-rotate":new Fr(Be.layout_symbol["icon-rotate"]),"icon-padding":new Cr(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Cr(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new Fr(Be.layout_symbol["icon-offset"]),"icon-anchor":new Fr(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Cr(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Cr(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Cr(Be.layout_symbol["text-rotation-alignment"]),"text-field":new Fr(Be.layout_symbol["text-field"]),"text-font":new Fr(Be.layout_symbol["text-font"]),"text-size":new Fr(Be.layout_symbol["text-size"]),"text-max-width":new Fr(Be.layout_symbol["text-max-width"]),"text-line-height":new Cr(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new Fr(Be.layout_symbol["text-letter-spacing"]),"text-justify":new Fr(Be.layout_symbol["text-justify"]),"text-radial-offset":new Fr(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Cr(Be.layout_symbol["text-variable-anchor"]),"text-anchor":new Fr(Be.layout_symbol["text-anchor"]),"text-max-angle":new Cr(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Cr(Be.layout_symbol["text-writing-mode"]),"text-rotate":new Fr(Be.layout_symbol["text-rotate"]),"text-padding":new Cr(Be.layout_symbol["text-padding"]),"text-keep-upright":new Cr(Be.layout_symbol["text-keep-upright"]),"text-transform":new Fr(Be.layout_symbol["text-transform"]),"text-offset":new Fr(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Cr(Be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Cr(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Cr(Be.layout_symbol["text-optional"])}),uh={paint:new zi({"icon-opacity":new Fr(Be.paint_symbol["icon-opacity"]),"icon-color":new Fr(Be.paint_symbol["icon-color"]),"icon-halo-color":new Fr(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fr(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fr(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Cr(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Cr(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fr(Be.paint_symbol["text-opacity"]),"text-color":new Fr(Be.paint_symbol["text-color"],{runtimeType:rn,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Fr(Be.paint_symbol["text-halo-color"]),"text-halo-width":new Fr(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new Fr(Be.paint_symbol["text-halo-blur"]),"text-translate":new Cr(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Cr(Be.paint_symbol["text-translate-anchor"])}),layout:_g},Iu=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:wt,this.defaultValue=M};Iu.prototype.evaluate=function(M){if(M.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(M.formattedSection))return z.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Iu.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Iu.prototype.outputDefined=function(){return!1},Iu.prototype.serialize=function(){return null},Sr("FormatSectionOverride",Iu,{omit:["defaultValue"]});var wg=function(M){function z(X){M.call(this,X,uh)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(X,le){if(M.prototype.recalculate.call(this,X,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Me=this.layout.get("text-writing-mode");if(Me){for(var Oe=[],Ue=0,$e=Me;Ue<$e.length;Ue+=1){var ct=$e[Ue];Oe.indexOf(ct)<0&&Oe.push(ct)}this.layout._values["text-writing-mode"]=Oe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(X,le,Me,Oe){var Ue=this.layout.get(X).evaluate(le,{},Me,Oe),$e=this._unevaluatedLayout._values[X];return $e.isDataDriven()||ds($e.value)||!Ue?Ue:function(ct,Mt){return Mt.replace(/{([^{}]+)}/g,function(Ct,Rt){return Rt in ct?String(ct[Rt]):""})}(le.properties,Ue)},z.prototype.createBucket=function(X){return new gi(X)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var X=0,le=uh.paint.overridableProperties;X<le.length;X+=1){var Me=le[X];if(z.hasPaintOverride(this.layout,Me)){var Oe,Ue=this.paint.get(Me),$e=new Iu(Ue),ct=new Zo($e,Ue.property.specification);Oe=Ue.value.kind==="constant"||Ue.value.kind==="source"?new no("source",ct):new Ss("composite",ct,Ue.value.zoomStops,Ue.value._interpolationType),this.paint._values[Me]=new di(Ue.property,Oe,Ue.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(X,le,Me){return!(!this.layout||le.isDataDriven()||Me.isDataDriven())&&z.hasPaintOverride(this.layout,X)},z.hasPaintOverride=function(X,le){var Me=X.get("text-field"),Oe=uh.paint.properties[le],Ue=!1,$e=function(Ct){for(var Rt=0,Gt=Ct;Rt<Gt.length;Rt+=1){var Ut=Gt[Rt];if(Oe.overrides&&Oe.overrides.hasOverride(Ut))return void(Ue=!0)}};if(Me.value.kind==="constant"&&Me.value.value instanceof Xn)$e(Me.value.value.sections);else if(Me.value.kind==="source"){var ct=function(Ct){if(!Ue)if(Ct instanceof Qt&&Kn(Ct.value)===$t){var Rt=Ct.value;$e(Rt.sections)}else Ct instanceof Ln?$e(Ct.sections):Ct.eachChild(ct)},Mt=Me.value;Mt._styleExpression&&ct(Mt._styleExpression.expression)}return Ue},z}(si),Tg={paint:new zi({"background-color":new Cr(Be.paint_background["background-color"]),"background-pattern":new Mo(Be.paint_background["background-pattern"]),"background-opacity":new Cr(Be.paint_background["background-opacity"])})},Ag=function(M){function z(X){M.call(this,X,Tg)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(si),kg={paint:new zi({"raster-opacity":new Cr(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Cr(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Cr(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Cr(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Cr(Be.paint_raster["raster-saturation"]),"raster-contrast":new Cr(Be.paint_raster["raster-contrast"]),"raster-resampling":new Cr(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Cr(Be.paint_raster["raster-fade-duration"])})},Mg=function(M){function z(X){M.call(this,X,kg)}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z}(si),Sg=function(M){function z(X){M.call(this,X,{}),this.implementation=X}return M&&(z.__proto__=M),z.prototype=Object.create(M&&M.prototype),z.prototype.constructor=z,z.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},z.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(X){this.implementation.onAdd&&this.implementation.onAdd(X,X.painter.context.gl)},z.prototype.onRemove=function(X){this.implementation.onRemove&&this.implementation.onRemove(X,X.painter.context.gl)},z}(si),Eg={circle:lv,heatmap:cv,hillshade:hv,fill:Cv,"fill-extrusion":Bv,line:Gv,symbol:wg,background:Ag,raster:Mg},Xp=n.HTMLImageElement,Jp=n.HTMLCanvasElement,Kp=n.HTMLVideoElement,$p=n.ImageData,Kc=n.ImageBitmap,su=function(M,z,X,le){this.context=M,this.format=X,this.texture=M.gl.createTexture(),this.update(z,le)};su.prototype.update=function(M,z,X){var le=M.width,Me=M.height,Oe=!(this.size&&this.size[0]===le&&this.size[1]===Me||X),Ue=this.context,$e=Ue.gl;if(this.useMipmap=!!(z&&z.useMipmap),$e.bindTexture($e.TEXTURE_2D,this.texture),Ue.pixelStoreUnpackFlipY.set(!1),Ue.pixelStoreUnpack.set(1),Ue.pixelStoreUnpackPremultiplyAlpha.set(this.format===$e.RGBA&&(!z||z.premultiply!==!1)),Oe)this.size=[le,Me],M instanceof Xp||M instanceof Jp||M instanceof Kp||M instanceof $p||Kc&&M instanceof Kc?$e.texImage2D($e.TEXTURE_2D,0,this.format,this.format,$e.UNSIGNED_BYTE,M):$e.texImage2D($e.TEXTURE_2D,0,this.format,le,Me,0,this.format,$e.UNSIGNED_BYTE,M.data);else{var ct=X||{x:0,y:0},Mt=ct.x,Ct=ct.y;M instanceof Xp||M instanceof Jp||M instanceof Kp||M instanceof $p||Kc&&M instanceof Kc?$e.texSubImage2D($e.TEXTURE_2D,0,Mt,Ct,$e.RGBA,$e.UNSIGNED_BYTE,M):$e.texSubImage2D($e.TEXTURE_2D,0,Mt,Ct,le,Me,$e.RGBA,$e.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&$e.generateMipmap($e.TEXTURE_2D)},su.prototype.bind=function(M,z,X){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),X!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(X=le.LINEAR),M!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,M),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,X||M),this.filter=M),z!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,z),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,z),this.wrap=z)},su.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},su.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ch=function(M){var z=this;this._callback=M,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};ch.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},ch.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ou=function(M,z,X){this.target=M,this.parent=z,this.mapId=X,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},x(["receive","process"],this),this.invoker=new ch(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?M:n};function Qp(M,z,X){var le=2*Math.PI*6378137/256/Math.pow(2,X);return[M*le-2*Math.PI*6378137/2,z*le-2*Math.PI*6378137/2]}Ou.prototype.send=function(M,z,X,le,Me){var Oe=this;Me===void 0&&(Me=!1);var Ue=Math.round(1e18*Math.random()).toString(36).substring(0,10);X&&(this.callbacks[Ue]=X);var $e=I(this.globalScope)?void 0:[];return this.target.postMessage({id:Ue,type:M,hasCallback:!!X,targetMapId:le,mustQueue:Me,sourceMapId:this.mapId,data:es(z,$e)},$e),{cancel:function(){X&&delete Oe.callbacks[Ue],Oe.target.postMessage({id:Ue,type:"<cancel>",targetMapId:le,sourceMapId:Oe.mapId})}}},Ou.prototype.receive=function(M){var z=M.data,X=z.id;if(X&&(!z.targetMapId||this.mapId===z.targetMapId))if(z.type==="<cancel>"){delete this.tasks[X];var le=this.cancelCallbacks[X];delete this.cancelCallbacks[X],le&&le()}else P()||z.mustQueue?(this.tasks[X]=z,this.taskQueue.push(X),this.invoker.trigger()):this.processTask(X,z)},Ou.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),z=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(M,z)}},Ou.prototype.processTask=function(M,z){var X=this;if(z.type==="<response>"){var le=this.callbacks[M];delete this.callbacks[M],le&&(z.error?le(bs(z.error)):le(null,bs(z.data)))}else{var Me=!1,Oe=I(this.globalScope)?void 0:[],Ue=z.hasCallback?function(Ct,Rt){Me=!0,delete X.cancelCallbacks[M],X.target.postMessage({id:M,type:"<response>",sourceMapId:X.mapId,error:Ct?es(Ct):null,data:es(Rt,Oe)},Oe)}:function(Ct){Me=!0},$e=null,ct=bs(z.data);if(this.parent[z.type])$e=this.parent[z.type](z.sourceMapId,ct,Ue);else if(this.parent.getWorkerSource){var Mt=z.type.split(".");$e=this.parent.getWorkerSource(z.sourceMapId,Mt[0],ct.source)[Mt[1]](ct,Ue)}else Ue(new Error("Could not find function "+z.type));!Me&&$e&&$e.cancel&&(this.cancelCallbacks[M]=$e.cancel)}},Ou.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ua=function(M,z){M&&(z?this.setSouthWest(M).setNorthEast(z):M.length===4?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};ua.prototype.setNorthEast=function(M){return this._ne=M instanceof Ri?new Ri(M.lng,M.lat):Ri.convert(M),this},ua.prototype.setSouthWest=function(M){return this._sw=M instanceof Ri?new Ri(M.lng,M.lat):Ri.convert(M),this},ua.prototype.extend=function(M){var z,X,le=this._sw,Me=this._ne;if(M instanceof Ri)z=M,X=M;else{if(!(M instanceof ua)){if(Array.isArray(M)){if(M.length===4||M.every(Array.isArray)){var Oe=M;return this.extend(ua.convert(Oe))}var Ue=M;return this.extend(Ri.convert(Ue))}return this}if(z=M._sw,X=M._ne,!z||!X)return this}return le||Me?(le.lng=Math.min(z.lng,le.lng),le.lat=Math.min(z.lat,le.lat),Me.lng=Math.max(X.lng,Me.lng),Me.lat=Math.max(X.lat,Me.lat)):(this._sw=new Ri(z.lng,z.lat),this._ne=new Ri(X.lng,X.lat)),this},ua.prototype.getCenter=function(){return new Ri((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ua.prototype.getSouthWest=function(){return this._sw},ua.prototype.getNorthEast=function(){return this._ne},ua.prototype.getNorthWest=function(){return new Ri(this.getWest(),this.getNorth())},ua.prototype.getSouthEast=function(){return new Ri(this.getEast(),this.getSouth())},ua.prototype.getWest=function(){return this._sw.lng},ua.prototype.getSouth=function(){return this._sw.lat},ua.prototype.getEast=function(){return this._ne.lng},ua.prototype.getNorth=function(){return this._ne.lat},ua.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ua.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ua.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ua.prototype.contains=function(M){var z=Ri.convert(M),X=z.lng,le=z.lat,Me=this._sw.lat<=le&&le<=this._ne.lat,Oe=this._sw.lng<=X&&X<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Oe=this._sw.lng>=X&&X>=this._ne.lng),Me&&Oe},ua.convert=function(M){return!M||M instanceof ua?M:new ua(M)};var ed=63710088e-1,Ri=function(M,z){if(isNaN(M)||isNaN(z))throw new Error("Invalid LngLat object: ("+M+", "+z+")");if(this.lng=+M,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ri.prototype.wrap=function(){return new Ri(p(this.lng,-180,180),this.lat)},Ri.prototype.toArray=function(){return[this.lng,this.lat]},Ri.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ri.prototype.distanceTo=function(M){var z=Math.PI/180,X=this.lat*z,le=M.lat*z,Me=Math.sin(X)*Math.sin(le)+Math.cos(X)*Math.cos(le)*Math.cos((M.lng-this.lng)*z);return ed*Math.acos(Math.min(Me,1))},Ri.prototype.toBounds=function(M){M===void 0&&(M=0);var z=360*M/40075017,X=z/Math.cos(Math.PI/180*this.lat);return new ua(new Ri(this.lng-X,this.lat-z),new Ri(this.lng+X,this.lat+z))},Ri.convert=function(M){if(M instanceof Ri)return M;if(Array.isArray(M)&&(M.length===2||M.length===3))return new Ri(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&typeof M=="object"&&M!==null)return new Ri(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var td=2*Math.PI*ed;function nd(M){return td*Math.cos(M*Math.PI/180)}function rd(M){return(180+M)/360}function id(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function ad(M,z){return M/nd(z)}function fh(M){var z=180-360*M;return 360/Math.PI*Math.atan(Math.exp(z*Math.PI/180))-90}var lu=function(M,z,X){X===void 0&&(X=0),this.x=+M,this.y=+z,this.z=+X};lu.fromLngLat=function(M,z){z===void 0&&(z=0);var X=Ri.convert(M);return new lu(rd(X.lng),id(X.lat),ad(z,X.lat))},lu.prototype.toLngLat=function(){return new Ri(360*this.x-180,fh(this.y))},lu.prototype.toAltitude=function(){return M=this.z,z=this.y,M*nd(fh(z));var M,z},lu.prototype.meterInMercatorCoordinateUnits=function(){return 1/td*(M=fh(this.y),1/Math.cos(M*Math.PI/180));var M};var uu=function(M,z,X){this.z=M,this.x=z,this.y=X,this.key=lc(0,M,M,z,X)};uu.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},uu.prototype.url=function(M,z){var X,le,Me,Oe,Ue,$e=(X=this.x,le=this.y,Me=this.z,Oe=Qp(256*X,256*(le=Math.pow(2,Me)-le-1),Me),Ue=Qp(256*(X+1),256*(le+1),Me),Oe[0]+","+Oe[1]+","+Ue[0]+","+Ue[1]),ct=function(Mt,Ct,Rt){for(var Gt,Ut="",sn=Mt;sn>0;sn--)Ut+=(Ct&(Gt=1<<sn-1)?1:0)+(Rt&Gt?2:0);return Ut}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(z==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",$e)},uu.prototype.getTilePoint=function(M){var z=Math.pow(2,this.z);return new t((M.x*z-this.x)*ei,(M.y*z-this.y)*ei)},uu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var od=function(M,z){this.wrap=M,this.canonical=z,this.key=lc(M,z.z,z.z,z.x,z.y)},ca=function(M,z,X,le,Me){this.overscaledZ=M,this.wrap=z,this.canonical=new uu(X,+le,+Me),this.key=lc(z,M,X,le,Me)};function lc(M,z,X,le,Me){(M*=2)<0&&(M=-1*M-1);var Oe=1<<X;return(Oe*Oe*M+Oe*Me+le).toString(36)+X.toString(36)+z.toString(36)}ca.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},ca.prototype.scaledTo=function(M){var z=this.canonical.z-M;return M>this.canonical.z?new ca(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ca(M,this.wrap,M,this.canonical.x>>z,this.canonical.y>>z)},ca.prototype.calculateScaledKey=function(M,z){var X=this.canonical.z-M;return M>this.canonical.z?lc(this.wrap*+z,M,this.canonical.z,this.canonical.x,this.canonical.y):lc(this.wrap*+z,M,M,this.canonical.x>>X,this.canonical.y>>X)},ca.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var z=this.canonical.z-M.canonical.z;return M.overscaledZ===0||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>z&&M.canonical.y===this.canonical.y>>z},ca.prototype.children=function(M){if(this.overscaledZ>=M)return[new ca(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,X=2*this.canonical.x,le=2*this.canonical.y;return[new ca(z,this.wrap,z,X,le),new ca(z,this.wrap,z,X+1,le),new ca(z,this.wrap,z,X,le+1),new ca(z,this.wrap,z,X+1,le+1)]},ca.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},ca.prototype.wrapped=function(){return new ca(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ca.prototype.unwrapTo=function(M){return new ca(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},ca.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ca.prototype.toUnwrapped=function(){return new od(this.wrap,this.canonical)},ca.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ca.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new lu(M.x-this.wrap,M.y))},Sr("CanonicalTileID",uu),Sr("OverscaledTileID",ca,{omit:["posMatrix"]});var Ll=function(M,z,X){if(this.uid=M,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(X&&X!=="mapbox"&&X!=="terrarium")return E('"'+X+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var le=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=X||"mapbox";for(var Me=0;Me<le;Me++)this.data[this._idx(-1,Me)]=this.data[this._idx(0,Me)],this.data[this._idx(le,Me)]=this.data[this._idx(le-1,Me)],this.data[this._idx(Me,-1)]=this.data[this._idx(Me,0)],this.data[this._idx(Me,le)]=this.data[this._idx(Me,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};Ll.prototype.get=function(M,z){var X=new Uint8Array(this.data.buffer),le=4*this._idx(M,z);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(X[le],X[le+1],X[le+2])},Ll.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},Ll.prototype._idx=function(M,z){if(M<-1||M>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(M+1)},Ll.prototype._unpackMapbox=function(M,z,X){return(256*M*256+256*z+X)/10-1e4},Ll.prototype._unpackTerrarium=function(M,z,X){return 256*M+z+X/256-32768},Ll.prototype.getPixels=function(){return new Eo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ll.prototype.backfillBorder=function(M,z,X){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var le=z*this.dim,Me=z*this.dim+this.dim,Oe=X*this.dim,Ue=X*this.dim+this.dim;switch(z){case-1:le=Me-1;break;case 1:Me=le+1}switch(X){case-1:Oe=Ue-1;break;case 1:Ue=Oe+1}for(var $e=-z*this.dim,ct=-X*this.dim,Mt=Oe;Mt<Ue;Mt++)for(var Ct=le;Ct<Me;Ct++)this.data[this._idx(Ct,Mt)]=M.data[this._idx(Ct+$e,Mt+ct)]},Sr("DEMData",Ll);var $c=function(M){this._stringToNumber={},this._numberToString=[];for(var z=0;z<M.length;z++){var X=M[z];this._stringToNumber[X]=z,this._numberToString[z]=X}};$c.prototype.encode=function(M){return this._stringToNumber[M]},$c.prototype.decode=function(M){return this._numberToString[M]};var Qc=function(M,z,X,le,Me){this.type="Feature",this._vectorTileFeature=M,M._z=z,M._x=X,M._y=le,this.properties=M.properties,this.id=Me},hh={geometry:{configurable:!0}};hh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},hh.geometry.set=function(M){this._geometry=M},Qc.prototype.toJSON=function(){var M={geometry:this.geometry};for(var z in this)z!=="_geometry"&&z!=="_vectorTileFeature"&&(M[z]=this[z]);return M},Object.defineProperties(Qc.prototype,hh);var Pu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Pu.prototype.updateState=function(M,z,X){var le=String(z);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][le]=this.stateChanges[M][le]||{},f(this.stateChanges[M][le],X),this.deletedStates[M]===null)for(var Me in this.deletedStates[M]={},this.state[M])Me!==le&&(this.deletedStates[M][Me]=null);else if(this.deletedStates[M]&&this.deletedStates[M][le]===null)for(var Oe in this.deletedStates[M][le]={},this.state[M][le])X[Oe]||(this.deletedStates[M][le][Oe]=null);else for(var Ue in X)this.deletedStates[M]&&this.deletedStates[M][le]&&this.deletedStates[M][le][Ue]===null&&delete this.deletedStates[M][le][Ue]},Pu.prototype.removeFeatureState=function(M,z,X){if(this.deletedStates[M]!==null){var le=String(z);if(this.deletedStates[M]=this.deletedStates[M]||{},X&&z!==void 0)this.deletedStates[M][le]!==null&&(this.deletedStates[M][le]=this.deletedStates[M][le]||{},this.deletedStates[M][le][X]=null);else if(z!==void 0)if(this.stateChanges[M]&&this.stateChanges[M][le])for(X in this.deletedStates[M][le]={},this.stateChanges[M][le])this.deletedStates[M][le][X]=null;else this.deletedStates[M][le]=null;else this.deletedStates[M]=null}},Pu.prototype.getState=function(M,z){var X=String(z),le=this.state[M]||{},Me=this.stateChanges[M]||{},Oe=f({},le[X],Me[X]);if(this.deletedStates[M]===null)return{};if(this.deletedStates[M]){var Ue=this.deletedStates[M][z];if(Ue===null)return{};for(var $e in Ue)delete Oe[$e]}return Oe},Pu.prototype.initializeTileState=function(M,z){M.setFeatureState(this.state,z)},Pu.prototype.coalesceChanges=function(M,z){var X={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Me={};for(var Oe in this.stateChanges[le])this.state[le][Oe]||(this.state[le][Oe]={}),f(this.state[le][Oe],this.stateChanges[le][Oe]),Me[Oe]=this.state[le][Oe];X[le]=Me}for(var Ue in this.deletedStates){this.state[Ue]=this.state[Ue]||{};var $e={};if(this.deletedStates[Ue]===null)for(var ct in this.state[Ue])$e[ct]={},this.state[Ue][ct]={};else for(var Mt in this.deletedStates[Ue]){if(this.deletedStates[Ue][Mt]===null)this.state[Ue][Mt]={};else for(var Ct=0,Rt=Object.keys(this.deletedStates[Ue][Mt]);Ct<Rt.length;Ct+=1){var Gt=Rt[Ct];delete this.state[Ue][Mt][Gt]}$e[Mt]=this.state[Ue][Mt]}X[Ue]=X[Ue]||{},f(X[Ue],$e)}if(this.stateChanges={},this.deletedStates={},Object.keys(X).length!==0)for(var Ut in M)M[Ut].setFeatureState(X,z)};var Il=function(M,z){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new xs(ei,16,0),this.grid3D=new xs(ei,16,0),this.featureIndexArray=new En,this.promoteId=z};function sd(M,z,X,le,Me){return A(M,function(Oe,Ue){var $e=z instanceof ws?z.get(Ue):null;return $e&&$e.evaluate?$e.evaluate(X,le,Me):$e})}function ld(M){for(var z=1/0,X=1/0,le=-1/0,Me=-1/0,Oe=0,Ue=M;Oe<Ue.length;Oe+=1){var $e=Ue[Oe];z=Math.min(z,$e.x),X=Math.min(X,$e.y),le=Math.max(le,$e.x),Me=Math.max(Me,$e.y)}return{minX:z,minY:X,maxX:le,maxY:Me}}function Cg(M,z){return z-M}Il.prototype.insert=function(M,z,X,le,Me,Oe){var Ue=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(X,le,Me);for(var $e=Oe?this.grid3D:this.grid,ct=0;ct<z.length;ct++){for(var Mt=z[ct],Ct=[1/0,1/0,-1/0,-1/0],Rt=0;Rt<Mt.length;Rt++){var Gt=Mt[Rt];Ct[0]=Math.min(Ct[0],Gt.x),Ct[1]=Math.min(Ct[1],Gt.y),Ct[2]=Math.max(Ct[2],Gt.x),Ct[3]=Math.max(Ct[3],Gt.y)}Ct[0]<ei&&Ct[1]<ei&&Ct[2]>=0&&Ct[3]>=0&&$e.insert(Ue,Ct[0],Ct[1],Ct[2],Ct[3])}},Il.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new wu.VectorTile(new Uc(this.rawTileData)).layers,this.sourceLayerCoder=new $c(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Il.prototype.query=function(M,z,X,le){var Me=this;this.loadVTLayers();for(var Oe=M.params||{},Ue=ei/M.tileSize/M.scale,$e=Ws(Oe.filter),ct=M.queryGeometry,Mt=M.queryPadding*Ue,Ct=ld(ct),Rt=this.grid.query(Ct.minX-Mt,Ct.minY-Mt,Ct.maxX+Mt,Ct.maxY+Mt),Gt=ld(M.cameraQueryGeometry),Ut=0,sn=this.grid3D.query(Gt.minX-Mt,Gt.minY-Mt,Gt.maxX+Mt,Gt.maxY+Mt,function(Gn,Qn,ar,xr){return function(gr,Tr,Mr,jr,Ir){for(var Br=0,Pr=gr;Br<Pr.length;Br+=1){var Lr=Pr[Br];if(Tr<=Lr.x&&Mr<=Lr.y&&jr>=Lr.x&&Ir>=Lr.y)return!0}var $r=[new t(Tr,Mr),new t(Tr,Ir),new t(jr,Ir),new t(jr,Mr)];if(gr.length>2){for(var qr=0,wi=$r;qr<wi.length;qr+=1)if(yl(gr,wi[qr]))return!0}for(var zr=0;zr<gr.length-1;zr++)if(nv(gr[zr],gr[zr+1],$r))return!0;return!1}(M.cameraQueryGeometry,Gn-Mt,Qn-Mt,ar+Mt,xr+Mt)});Ut<sn.length;Ut+=1){var hn=sn[Ut];Rt.push(hn)}Rt.sort(Cg);for(var Sn,Mn={},Rn=function(Gn){var Qn=Rt[Gn];if(Qn!==Sn){Sn=Qn;var ar=Me.featureIndexArray.get(Qn),xr=null;Me.loadMatchingFeature(Mn,ar.bucketIndex,ar.sourceLayerIndex,ar.featureIndex,$e,Oe.layers,Oe.availableImages,z,X,le,function(gr,Tr,Mr){return xr||(xr=Bo(gr)),Tr.queryIntersectsFeature(ct,gr,Mr,xr,Me.z,M.transform,Ue,M.pixelPosMatrix)})}},Nn=0;Nn<Rt.length;Nn++)Rn(Nn);return Mn},Il.prototype.loadMatchingFeature=function(M,z,X,le,Me,Oe,Ue,$e,ct,Mt,Ct){var Rt=this.bucketLayerIDs[z];if(!Oe||function(gr,Tr){for(var Mr=0;Mr<gr.length;Mr++)if(Tr.indexOf(gr[Mr])>=0)return!0;return!1}(Oe,Rt)){var Gt=this.sourceLayerCoder.decode(X),Ut=this.vtLayers[Gt].feature(le);if(Me.needGeometry){var sn=Si(Ut,!0);if(!Me.filter(new Yr(this.tileID.overscaledZ),sn,this.tileID.canonical))return}else if(!Me.filter(new Yr(this.tileID.overscaledZ),Ut))return;for(var hn=this.getId(Ut,Gt),Sn=0;Sn<Rt.length;Sn++){var Mn=Rt[Sn];if(!(Oe&&Oe.indexOf(Mn)<0)){var Rn=$e[Mn];if(Rn){var Nn={};hn!==void 0&&Mt&&(Nn=Mt.getState(Rn.sourceLayer||"_geojsonTileLayer",hn));var Gn=f({},ct[Mn]);Gn.paint=sd(Gn.paint,Rn.paint,Ut,Nn,Ue),Gn.layout=sd(Gn.layout,Rn.layout,Ut,Nn,Ue);var Qn=!Ct||Ct(Ut,Rn,Nn);if(Qn){var ar=new Qc(Ut,this.z,this.x,this.y,hn);ar.layer=Gn;var xr=M[Mn];xr===void 0&&(xr=M[Mn]=[]),xr.push({featureIndex:le,feature:ar,intersectionZ:Qn})}}}}}},Il.prototype.lookupSymbolFeatures=function(M,z,X,le,Me,Oe,Ue,$e){var ct={};this.loadVTLayers();for(var Mt=Ws(Me),Ct=0,Rt=M;Ct<Rt.length;Ct+=1){var Gt=Rt[Ct];this.loadMatchingFeature(ct,X,le,Gt,Mt,Oe,Ue,$e,z)}return ct},Il.prototype.hasLayer=function(M){for(var z=0,X=this.bucketLayerIDs;z<X.length;z+=1)for(var le=0,Me=X[z];le<Me.length;le+=1)if(M===Me[le])return!0;return!1},Il.prototype.getId=function(M,z){var X=M.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[z];typeof(X=M.properties[le])=="boolean"&&(X=Number(X))}return X},Sr("FeatureIndex",Il,{omit:["rawTileData","sourceLayerCoder"]});var ka=function(M,z){this.tileID=M,this.uid=h(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ka.prototype.registerFadeDuration=function(M){var z=M+this.timeAdded;z<ee.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},ka.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ka.prototype.loadVectorData=function(M,z,X){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var le in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(Mt,Ct){var Rt={};if(!Ct)return Rt;for(var Gt=function(){var hn=sn[Ut],Sn=hn.layerIds.map(function(Gn){return Ct.getLayer(Gn)}).filter(Boolean);if(Sn.length!==0){hn.layers=Sn,hn.stateDependentLayerIds&&(hn.stateDependentLayers=hn.stateDependentLayerIds.map(function(Gn){return Sn.filter(function(Qn){return Qn.id===Gn})[0]}));for(var Mn=0,Rn=Sn;Mn<Rn.length;Mn+=1){var Nn=Rn[Mn];Rt[Nn.id]=hn}}},Ut=0,sn=Mt;Ut<sn.length;Ut+=1)Gt();return Rt}(M.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var Me=this.buckets[le];if(Me instanceof gi){if(this.hasSymbolBuckets=!0,!X)break;Me.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Oe in this.buckets){var Ue=this.buckets[Oe];if(Ue instanceof gi&&Ue.hasRTLText){this.hasRTLText=!0,Aa.isLoading()||Aa.isLoaded()||Is()!=="deferred"||Os();break}}for(var $e in this.queryPadding=0,this.buckets){var ct=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer($e).queryRadius(ct))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new Lt},ka.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ka.prototype.getBucket=function(M){return this.buckets[M.id]},ka.prototype.upload=function(M){for(var z in this.buckets){var X=this.buckets[z];X.uploadPending()&&X.upload(M)}var le=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new su(M,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new su(M,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},ka.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},ka.prototype.queryRenderedFeatures=function(M,z,X,le,Me,Oe,Ue,$e,ct,Mt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Me,scale:Oe,tileSize:this.tileSize,pixelPosMatrix:Mt,transform:$e,params:Ue,queryPadding:this.queryPadding*ct},M,z,X):{}},ka.prototype.querySourceFeatures=function(M,z){var X=this.latestFeatureIndex;if(X&&X.rawTileData){var le=X.loadVTLayers(),Me=z?z.sourceLayer:"",Oe=le._geojsonTileLayer||le[Me];if(Oe)for(var Ue=Ws(z&&z.filter),$e=this.tileID.canonical,ct=$e.z,Mt=$e.x,Ct=$e.y,Rt={z:ct,x:Mt,y:Ct},Gt=0;Gt<Oe.length;Gt++){var Ut=Oe.feature(Gt);if(Ue.needGeometry){var sn=Si(Ut,!0);if(!Ue.filter(new Yr(this.tileID.overscaledZ),sn,this.tileID.canonical))continue}else if(!Ue.filter(new Yr(this.tileID.overscaledZ),Ut))continue;var hn=X.getId(Ut,Me),Sn=new Qc(Ut,ct,Mt,Ct,hn);Sn.tile=Rt,M.push(Sn)}}},ka.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ka.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ka.prototype.setExpiryData=function(M){var z=this.expirationTime;if(M.cacheControl){var X=F(M.cacheControl);X["max-age"]&&(this.expirationTime=Date.now()+1e3*X["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var le=Date.now(),Me=!1;if(this.expirationTime>le)Me=!1;else if(z)if(this.expirationTime<z)Me=!0;else{var Oe=this.expirationTime-z;Oe?this.expirationTime=le+Math.max(Oe,3e4):Me=!0}else Me=!0;Me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ka.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ka.prototype.setFeatureState=function(M,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(M).length!==0){var X=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(z.style.hasLayer(le)){var Me=this.buckets[le],Oe=Me.layers[0].sourceLayer||"_geojsonTileLayer",Ue=X[Oe],$e=M[Oe];if(Ue&&$e&&Object.keys($e).length!==0){Me.update($e,Ue,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=z&&z.style&&z.style.getLayer(le);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(Me)))}}}},ka.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ka.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ee.now()},ka.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ka.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=ee.now()+M},ka.prototype.setDependencies=function(M,z){for(var X={},le=0,Me=z;le<Me.length;le+=1)X[Me[le]]=!0;this.dependencies[M]=X},ka.prototype.hasDependency=function(M,z){for(var X=0,le=M;X<le.length;X+=1){var Me=le[X],Oe=this.dependencies[Me];if(Oe){for(var Ue=0,$e=z;Ue<$e.length;Ue+=1)if(Oe[$e[Ue]])return!0}}return!1};var Yl=n.performance,ud=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Yl.mark(this._marks.start)};ud.prototype.finish=function(){Yl.mark(this._marks.end);var M=Yl.getEntriesByName(this._marks.measure);return M.length===0&&(Yl.measure(this._marks.measure,this._marks.start,this._marks.end),M=Yl.getEntriesByName(this._marks.measure),Yl.clearMarks(this._marks.start),Yl.clearMarks(this._marks.end),Yl.clearMeasures(this._marks.measure)),M},r.Actor=Ou,r.AlphaImage=ou,r.CanonicalTileID=uu,r.CollisionBoxArray=Lt,r.Color=Tn,r.DEMData=Ll,r.DataConstantProperty=Cr,r.DictionaryCoder=$c,r.EXTENT=ei,r.ErrorEvent=bt,r.EvaluationParameters=Yr,r.Event=xt,r.Evented=Ve,r.FeatureIndex=Il,r.FillBucket=tl,r.FillExtrusionBucket=nl,r.ImageAtlas=ic,r.ImagePosition=qc,r.LineBucket=uo,r.LngLat=Ri,r.LngLatBounds=ua,r.MercatorCoordinate=lu,r.ONE_EM=Ia,r.OverscaledTileID=ca,r.Point=t,r.Point$1=t,r.Properties=zi,r.Protobuf=Uc,r.RGBAImage=Eo,r.RequestManager=ye,r.RequestPerformance=ud,r.ResourceType=mt,r.SegmentVector=Hn,r.SourceFeatureState=Pu,r.StructArrayLayout1ui2=gt,r.StructArrayLayout2f1f2i16=ie,r.StructArrayLayout2i4=rs,r.StructArrayLayout3ui6=_e,r.StructArrayLayout4i8=Cl,r.SymbolBucket=gi,r.Texture=su,r.Tile=ka,r.Transitionable=so,r.Uniform1f=Gr,r.Uniform1i=Vr,r.Uniform2f=Zr,r.Uniform3f=vi,r.Uniform4f=Li,r.UniformColor=ya,r.UniformMatrix4f=sa,r.UnwrappedTileID=od,r.ValidationError=at,r.WritingMode=as,r.ZoomHistory=Ls,r.add=function(M,z,X){return M[0]=z[0]+X[0],M[1]=z[1]+X[1],M[2]=z[2]+X[2],M},r.addDynamicAttributes=lh,r.asyncAll=function(M,z,X){if(!M.length)return X(null,[]);var le=M.length,Me=new Array(M.length),Oe=null;M.forEach(function(Ue,$e){z(Ue,function(ct,Mt){ct&&(Oe=ct),Me[$e]=Mt,--le==0&&X(Oe,Me)})})},r.bezier=s,r.bindAll=x,r.browser=ee,r.cacheEntryPossiblyAdded=function(M){++yt>Fe&&(M.getActor().send("enforceCacheSizeLimit",Ee),yt=0)},r.clamp=u,r.clearTileCache=function(M){var z=n.caches.delete(we);M&&z.catch(M).then(function(){return M()})},r.clipLine=qp,r.clone=function(M){var z=new is(16);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z[3]=M[3],z[4]=M[4],z[5]=M[5],z[6]=M[6],z[7]=M[7],z[8]=M[8],z[9]=M[9],z[10]=M[10],z[11]=M[11],z[12]=M[12],z[13]=M[13],z[14]=M[14],z[15]=M[15],z},r.clone$1=S,r.clone$2=function(M){var z=new is(3);return z[0]=M[0],z[1]=M[1],z[2]=M[2],z},r.collisionCircleLayout=Xv,r.config=J,r.create=function(){var M=new is(16);return is!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},r.create$1=function(){var M=new is(9);return is!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},r.create$2=function(){var M=new is(4);return is!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},r.createCommonjsModule=w,r.createExpression=Oo,r.createLayout=xi,r.createStyleLayer=function(M){return M.type==="custom"?new Sg(M):new Eg[M.type](M)},r.cross=function(M,z,X){var le=z[0],Me=z[1],Oe=z[2],Ue=X[0],$e=X[1],ct=X[2];return M[0]=Me*ct-Oe*$e,M[1]=Oe*Ue-le*ct,M[2]=le*$e-Me*Ue,M},r.deepEqual=function M(z,X){if(Array.isArray(z)){if(!Array.isArray(X)||z.length!==X.length)return!1;for(var le=0;le<z.length;le++)if(!M(z[le],X[le]))return!1;return!0}if(typeof z=="object"&&z!==null&&X!==null){if(typeof X!="object"||Object.keys(z).length!==Object.keys(X).length)return!1;for(var Me in z)if(!M(z[Me],X[Me]))return!1;return!0}return z===X},r.dot=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]},r.dot$1=function(M,z){return M[0]*z[0]+M[1]*z[1]+M[2]*z[2]+M[3]*z[3]},r.ease=l,r.emitValidationErrors=_a,r.endsWith=y,r.enforceCacheSizeLimit=function(M){je(),he&&he.then(function(z){z.keys().then(function(X){for(var le=0;le<X.length-M;le++)z.delete(X[le])})})},r.evaluateSizeForFeature=zp,r.evaluateSizeForZoom=Rp,r.evaluateVariableOffset=Wp,r.evented=Ta,r.extend=f,r.featureFilter=Ws,r.filterObject=d,r.fromRotation=function(M,z){var X=Math.sin(z),le=Math.cos(z);return M[0]=le,M[1]=X,M[2]=0,M[3]=-X,M[4]=le,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},r.getAnchorAlignment=ih,r.getAnchorJustification=sh,r.getArrayBuffer=pt,r.getImage=Xe,r.getJSON=function(M,z){return zt(f(M,{type:"json"}),z)},r.getRTLTextPluginStatus=Is,r.getReferrer=Qe,r.getVideo=function(M,z){var X,le,Me=n.document.createElement("video");Me.muted=!0,Me.onloadstart=function(){z(null,Me)};for(var Oe=0;Oe<M.length;Oe++){var Ue=n.document.createElement("source");X=M[Oe],le=void 0,(le=n.document.createElement("a")).href=X,le.protocol===n.document.location.protocol&&le.host===n.document.location.host||(Me.crossOrigin="Anonymous"),Ue.src=M[Oe],Me.appendChild(Ue)}return{cancel:function(){}}},r.identity=Hf,r.invert=function(M,z){var X=z[0],le=z[1],Me=z[2],Oe=z[3],Ue=z[4],$e=z[5],ct=z[6],Mt=z[7],Ct=z[8],Rt=z[9],Gt=z[10],Ut=z[11],sn=z[12],hn=z[13],Sn=z[14],Mn=z[15],Rn=X*$e-le*Ue,Nn=X*ct-Me*Ue,Gn=X*Mt-Oe*Ue,Qn=le*ct-Me*$e,ar=le*Mt-Oe*$e,xr=Me*Mt-Oe*ct,gr=Ct*hn-Rt*sn,Tr=Ct*Sn-Gt*sn,Mr=Ct*Mn-Ut*sn,jr=Rt*Sn-Gt*hn,Ir=Rt*Mn-Ut*hn,Br=Gt*Mn-Ut*Sn,Pr=Rn*Br-Nn*Ir+Gn*jr+Qn*Mr-ar*Tr+xr*gr;return Pr?(Pr=1/Pr,M[0]=($e*Br-ct*Ir+Mt*jr)*Pr,M[1]=(Me*Ir-le*Br-Oe*jr)*Pr,M[2]=(hn*xr-Sn*ar+Mn*Qn)*Pr,M[3]=(Gt*ar-Rt*xr-Ut*Qn)*Pr,M[4]=(ct*Mr-Ue*Br-Mt*Tr)*Pr,M[5]=(X*Br-Me*Mr+Oe*Tr)*Pr,M[6]=(Sn*Gn-sn*xr-Mn*Nn)*Pr,M[7]=(Ct*xr-Gt*Gn+Ut*Nn)*Pr,M[8]=(Ue*Ir-$e*Mr+Mt*gr)*Pr,M[9]=(le*Mr-X*Ir-Oe*gr)*Pr,M[10]=(sn*ar-hn*Gn+Mn*Rn)*Pr,M[11]=(Rt*Gn-Ct*ar-Ut*Rn)*Pr,M[12]=($e*Tr-Ue*jr-ct*gr)*Pr,M[13]=(X*jr-le*Tr+Me*gr)*Pr,M[14]=(hn*Nn-sn*Qn-Sn*Rn)*Pr,M[15]=(Ct*Qn-Rt*Nn+Gt*Rn)*Pr,M):null},r.isChar=br,r.isMapboxURL=me,r.keysDifference=function(M,z){var X=[];for(var le in M)le in z||X.push(le);return X},r.makeRequest=zt,r.mapObject=A,r.mercatorXfromLng=rd,r.mercatorYfromLat=id,r.mercatorZfromAltitude=ad,r.mul=av,r.multiply=ip,r.mvt=wu,r.nextPowerOfTwo=function(M){return M<=1?1:Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))},r.normalize=function(M,z){var X=z[0],le=z[1],Me=z[2],Oe=X*X+le*le+Me*Me;return Oe>0&&(Oe=1/Math.sqrt(Oe)),M[0]=z[0]*Oe,M[1]=z[1]*Oe,M[2]=z[2]*Oe,M},r.number=Nr,r.offscreenCanvasSupported=_t,r.ortho=function(M,z,X,le,Me,Oe,Ue){var $e=1/(z-X),ct=1/(le-Me),Mt=1/(Oe-Ue);return M[0]=-2*$e,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*ct,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*Mt,M[11]=0,M[12]=(z+X)*$e,M[13]=(Me+le)*ct,M[14]=(Ue+Oe)*Mt,M[15]=1,M},r.parseGlyphPBF=function(M){return new Uc(M).readFields(og,[])},r.pbf=Uc,r.performSymbolLayout=function(M,z,X,le,Me,Oe,Ue){M.createArrays();var $e=512*M.overscaling;M.tilePixelRatio=ei/$e,M.compareText={},M.iconsNeedLinear=!1;var ct=M.layers[0].layout,Mt=M.layers[0]._unevaluatedLayout._values,Ct={};if(M.textSizeData.kind==="composite"){var Rt=M.textSizeData,Gt=Rt.minZoom,Ut=Rt.maxZoom;Ct.compositeTextSizes=[Mt["text-size"].possiblyEvaluate(new Yr(Gt),Ue),Mt["text-size"].possiblyEvaluate(new Yr(Ut),Ue)]}if(M.iconSizeData.kind==="composite"){var sn=M.iconSizeData,hn=sn.minZoom,Sn=sn.maxZoom;Ct.compositeIconSizes=[Mt["icon-size"].possiblyEvaluate(new Yr(hn),Ue),Mt["icon-size"].possiblyEvaluate(new Yr(Sn),Ue)]}Ct.layoutTextSize=Mt["text-size"].possiblyEvaluate(new Yr(M.zoom+1),Ue),Ct.layoutIconSize=Mt["icon-size"].possiblyEvaluate(new Yr(M.zoom+1),Ue),Ct.textMaxSize=Mt["text-size"].possiblyEvaluate(new Yr(18));for(var Mn=ct.get("text-line-height")*Ia,Rn=ct.get("text-rotation-alignment")==="map"&&ct.get("symbol-placement")!=="point",Nn=ct.get("text-keep-upright"),Gn=ct.get("text-size"),Qn=function(){var gr=xr[ar],Tr=ct.get("text-font").evaluate(gr,{},Ue).join(","),Mr=Gn.evaluate(gr,{},Ue),jr=Ct.layoutTextSize.evaluate(gr,{},Ue),Ir=Ct.layoutIconSize.evaluate(gr,{},Ue),Br={horizontal:{},vertical:void 0},Pr=gr.text,Lr=[0,0];if(Pr){var $r=Pr.toString(),qr=ct.get("text-letter-spacing").evaluate(gr,{},Ue)*Ia,wi=function(Hr){for(var ni=0,Ji=Hr;ni<Ji.length;ni+=1)if(_i=Ji[ni].charCodeAt(0),br.Arabic(_i)||br["Arabic Supplement"](_i)||br["Arabic Extended-A"](_i)||br["Arabic Presentation Forms-A"](_i)||br["Arabic Presentation Forms-B"](_i))return!1;var _i;return!0}($r)?qr:0,zr=ct.get("text-anchor").evaluate(gr,{},Ue),yi=ct.get("text-variable-anchor");if(!yi){var Ci=ct.get("text-radial-offset").evaluate(gr,{},Ue);Lr=Ci?Wp(zr,[Ci*Ia,oh]):ct.get("text-offset").evaluate(gr,{},Ue).map(function(Hr){return Hr*Ia})}var Oi=Rn?"center":ct.get("text-justify").evaluate(gr,{},Ue),Pi=ct.get("symbol-placement"),Ti=Pi==="point"?ct.get("text-max-width").evaluate(gr,{},Ue)*Ia:0,fa=function(){M.allowVerticalPlacement&&$s($r)&&(Br.vertical=Hc(Pr,z,X,Me,Tr,Ti,Mn,zr,"left",wi,Lr,as.vertical,!0,Pi,jr,Mr))};if(!Rn&&yi){for(var ji=Oi==="auto"?yi.map(function(Hr){return sh(Hr)}):[Oi],Ma=!1,Va=0;Va<ji.length;Va++){var Oa=ji[Va];if(!Br.horizontal[Oa])if(Ma)Br.horizontal[Oa]=Br.horizontal[0];else{var co=Hc(Pr,z,X,Me,Tr,Ti,Mn,"center",Oa,wi,Lr,as.horizontal,!1,Pi,jr,Mr);co&&(Br.horizontal[Oa]=co,Ma=co.positionedLines.length===1)}}fa()}else{Oi==="auto"&&(Oi=sh(zr));var Pa=Hc(Pr,z,X,Me,Tr,Ti,Mn,zr,Oi,wi,Lr,as.horizontal,!1,Pi,jr,Mr);Pa&&(Br.horizontal[Oi]=Pa),fa(),$s($r)&&Rn&&Nn&&(Br.vertical=Hc(Pr,z,X,Me,Tr,Ti,Mn,zr,Oi,wi,Lr,as.vertical,!1,Pi,jr,Mr))}}var ma=void 0,Fa=!1;if(gr.icon&&gr.icon.name){var Sa=le[gr.icon.name];Sa&&(ma=function(Hr,ni,Ji){var _i=ih(Ji),Hi=_i.horizontalAlign,Bi=_i.verticalAlign,li=ni[0],Ki=ni[1],fo=li-Hr.displaySize[0]*Hi,Uo=fo+Hr.displaySize[0],Ka=Ki-Hr.displaySize[1]*Bi;return{image:Hr,top:Ka,bottom:Ka+Hr.displaySize[1],left:fo,right:Uo}}(Me[gr.icon.name],ct.get("icon-offset").evaluate(gr,{},Ue),ct.get("icon-anchor").evaluate(gr,{},Ue)),Fa=Sa.sdf,M.sdfIcons===void 0?M.sdfIcons=Sa.sdf:M.sdfIcons!==Sa.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Sa.pixelRatio!==M.pixelRatio||ct.get("icon-rotate").constantOr(1)!==0)&&(M.iconsNeedLinear=!0))}var xa=Zp(Br.horizontal)||Br.vertical;M.iconsInText=!!xa&&xa.iconsInText,(xa||ma)&&function(Hr,ni,Ji,_i,Hi,Bi,li,Ki,fo,Uo,Ka){var il=Bi.textMaxSize.evaluate(ni,{});il===void 0&&(il=li);var Ol,Ea=Hr.layers[0].layout,al=Ea.get("icon-offset").evaluate(ni,{},Ka),Bs=Zp(Ji.horizontal),Ns=24,cu=li/Ns,ef=Hr.tilePixelRatio*cu,fu=Hr.tilePixelRatio*il/Ns,tf=Hr.tilePixelRatio*Ki,uc=Hr.tilePixelRatio*Ea.get("symbol-spacing"),ph=Ea.get("text-padding")*Hr.tilePixelRatio,nf=Ea.get("icon-padding")*Hr.tilePixelRatio,Fu=Ea.get("text-max-angle")/180*Math.PI,rf=Ea.get("text-rotation-alignment")==="map"&&Ea.get("symbol-placement")!=="point",af=Ea.get("icon-rotation-alignment")==="map"&&Ea.get("symbol-placement")!=="point",cc=Ea.get("symbol-placement"),dh=uc/2,fc=Ea.get("icon-text-fit");_i&&fc!=="none"&&(Hr.allowVerticalPlacement&&Ji.vertical&&(Ol=Fp(_i,Ji.vertical,fc,Ea.get("icon-text-fit-padding"),al,cu)),Bs&&(_i=Fp(_i,Bs,fc,Ea.get("icon-text-fit-padding"),al,cu)));var hu=function(Dg,yc){yc.x<0||yc.x>=ei||yc.y<0||yc.y>=ei||function(na,ol,Lg,Zl,bh,dd,cf,ml,ff,mc,hf,pf,_h,vd,xc,gd,yd,md,xd,bd,os,df,_d,xl,Ig){var wd,vu,Bu,Nu,ju,Uu=na.addToLineVertexArray(ol,Lg),Td=0,Ad=0,kd=0,Md=0,wh=-1,Th=-1,Pl={},Sd=_r(""),Ah=0,kh=0;if(ml._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ah=(wd=ml.layout.get("text-offset").evaluate(os,{},xl).map(function(_c){return _c*Ia}))[0],kh=wd[1]):(Ah=ml.layout.get("text-radial-offset").evaluate(os,{},xl)*Ia,kh=oh),na.allowVerticalPlacement&&Zl.vertical){var Ed=ml.layout.get("text-rotate").evaluate(os,{},xl)+90,Og=Zl.vertical;Nu=new Xc(ff,ol,mc,hf,pf,Og,_h,vd,xc,Ed),cf&&(ju=new Xc(ff,ol,mc,hf,pf,cf,yd,md,xc,Ed))}if(bh){var Mh=ml.layout.get("icon-rotate").evaluate(os,{}),Cd=ml.layout.get("icon-text-fit")!=="none",Dd=Hp(bh,Mh,_d,Cd),Sh=cf?Hp(cf,Mh,_d,Cd):void 0;Bu=new Xc(ff,ol,mc,hf,pf,bh,yd,md,!1,Mh),Td=4*Dd.length;var Ld=na.iconSizeData,bc=null;Ld.kind==="source"?(bc=[rl*ml.layout.get("icon-size").evaluate(os,{})])[0]>Wl&&E(na.layerIds[0]+': Value for "icon-size" is >= '+oc+'. Reduce your "icon-size".'):Ld.kind==="composite"&&((bc=[rl*df.compositeIconSizes[0].evaluate(os,{},xl),rl*df.compositeIconSizes[1].evaluate(os,{},xl)])[0]>Wl||bc[1]>Wl)&&E(na.layerIds[0]+': Value for "icon-size" is >= '+oc+'. Reduce your "icon-size".'),na.addSymbols(na.icon,Dd,bc,bd,xd,os,!1,ol,Uu.lineStartIndex,Uu.lineLength,-1,xl),wh=na.icon.placedSymbolArray.length-1,Sh&&(Ad=4*Sh.length,na.addSymbols(na.icon,Sh,bc,bd,xd,os,as.vertical,ol,Uu.lineStartIndex,Uu.lineLength,-1,xl),Th=na.icon.placedSymbolArray.length-1)}for(var Id in Zl.horizontal){var vf=Zl.horizontal[Id];if(!vu){Sd=_r(vf.text);var Pg=ml.layout.get("text-rotate").evaluate(os,{},xl);vu=new Xc(ff,ol,mc,hf,pf,vf,_h,vd,xc,Pg)}var Od=vf.positionedLines.length===1;if(kd+=Yp(na,ol,vf,dd,ml,xc,os,gd,Uu,Zl.vertical?as.horizontal:as.horizontalOnly,Od?Object.keys(Zl.horizontal):[Id],Pl,wh,df,xl),Od)break}Zl.vertical&&(Md+=Yp(na,ol,Zl.vertical,dd,ml,xc,os,gd,Uu,as.vertical,["vertical"],Pl,Th,df,xl));var Fg=vu?vu.boxStartIndex:na.collisionBoxArray.length,zg=vu?vu.boxEndIndex:na.collisionBoxArray.length,Rg=Nu?Nu.boxStartIndex:na.collisionBoxArray.length,Bg=Nu?Nu.boxEndIndex:na.collisionBoxArray.length,Ng=Bu?Bu.boxStartIndex:na.collisionBoxArray.length,jg=Bu?Bu.boxEndIndex:na.collisionBoxArray.length,Ug=ju?ju.boxStartIndex:na.collisionBoxArray.length,Vg=ju?ju.boxEndIndex:na.collisionBoxArray.length,bl=-1,gf=function(_c,Fd){return _c&&_c.circleDiameter?Math.max(_c.circleDiameter,Fd):Fd};bl=gf(vu,bl),bl=gf(Nu,bl),bl=gf(Bu,bl);var Pd=(bl=gf(ju,bl))>-1?1:0;Pd&&(bl*=Ig/Ia),na.glyphOffsetArray.length>=gi.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),os.sortKey!==void 0&&na.addToSortKeyRanges(na.symbolInstances.length,os.sortKey),na.symbolInstances.emplaceBack(ol.x,ol.y,Pl.right>=0?Pl.right:-1,Pl.center>=0?Pl.center:-1,Pl.left>=0?Pl.left:-1,Pl.vertical||-1,wh,Th,Sd,Fg,zg,Rg,Bg,Ng,jg,Ug,Vg,mc,kd,Md,Td,Ad,Pd,0,_h,Ah,kh,bl)}(Hr,yc,Dg,Ji,_i,Hi,Ol,Hr.layers[0],Hr.collisionBoxArray,ni.index,ni.sourceLayerIndex,Hr.index,ef,ph,rf,fo,tf,nf,af,al,ni,Bi,Uo,Ka,li)};if(cc==="line")for(var zu=0,of=qp(ni.geometry,0,0,ei,ei);zu<of.length;zu+=1)for(var sf=of[zu],Ru=0,lf=pg(sf,uc,Fu,Ji.vertical||Bs,_i,Ns,fu,Hr.overscaling,ei);Ru<lf.length;Ru+=1){var uf=lf[Ru];Bs&&yg(Hr,Bs.text,dh,uf)||hu(sf,uf)}else if(cc==="line-center")for(var hc=0,pc=ni.geometry;hc<pc.length;hc+=1){var pu=pc[hc];if(pu.length>1){var dc=hg(pu,Fu,Ji.vertical||Bs,_i,Ns,fu);dc&&hu(pu,dc)}}else if(ni.type==="Polygon")for(var du=0,vc=Kf(ni.geometry,0);du<vc.length;du+=1){var gc=vc[du],cd=vg(gc,16);hu(gc[0],new Mu(cd.x,cd.y,0))}else if(ni.type==="LineString")for(var vh=0,fd=ni.geometry;vh<fd.length;vh+=1){var gh=fd[vh];hu(gh,new Mu(gh[0].x,gh[0].y,0))}else if(ni.type==="Point")for(var yh=0,hd=ni.geometry;yh<hd.length;yh+=1)for(var mh=0,pd=hd[yh];mh<pd.length;mh+=1){var xh=pd[mh];hu([xh],new Mu(xh.x,xh.y,0))}}(M,gr,Br,ma,le,Ct,jr,Ir,Lr,Fa,Ue)},ar=0,xr=M.features;ar<xr.length;ar+=1)Qn();Oe&&M.generateCollisionDebugBuffers()},r.perspective=function(M,z,X,le,Me){var Oe,Ue=1/Math.tan(z/2);return M[0]=Ue/X,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ue,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,Me!=null&&Me!==1/0?(Oe=1/(le-Me),M[10]=(Me+le)*Oe,M[14]=2*Me*le*Oe):(M[10]=-1,M[14]=-2*le),M},r.pick=function(M,z){for(var X={},le=0;le<z.length;le++){var Me=z[le];Me in M&&(X[Me]=M[Me])}return X},r.plugin=Aa,r.polygonIntersectsPolygon=au,r.postMapLoadEvent=ve,r.postTurnstileEvent=Pe,r.potpack=Dp,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Sr,r.registerForPluginStateChange=function(M){return M({pluginStatus:Xr,pluginURL:ea}),Ta.on("pluginStateChange",M),M},r.renderColorRamp=lp,r.rotate=function(M,z,X){var le=z[0],Me=z[1],Oe=z[2],Ue=z[3],$e=Math.sin(X),ct=Math.cos(X);return M[0]=le*ct+Oe*$e,M[1]=Me*ct+Ue*$e,M[2]=le*-$e+Oe*ct,M[3]=Me*-$e+Ue*ct,M},r.rotateX=function(M,z,X){var le=Math.sin(X),Me=Math.cos(X),Oe=z[4],Ue=z[5],$e=z[6],ct=z[7],Mt=z[8],Ct=z[9],Rt=z[10],Gt=z[11];return z!==M&&(M[0]=z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[4]=Oe*Me+Mt*le,M[5]=Ue*Me+Ct*le,M[6]=$e*Me+Rt*le,M[7]=ct*Me+Gt*le,M[8]=Mt*Me-Oe*le,M[9]=Ct*Me-Ue*le,M[10]=Rt*Me-$e*le,M[11]=Gt*Me-ct*le,M},r.rotateZ=function(M,z,X){var le=Math.sin(X),Me=Math.cos(X),Oe=z[0],Ue=z[1],$e=z[2],ct=z[3],Mt=z[4],Ct=z[5],Rt=z[6],Gt=z[7];return z!==M&&(M[8]=z[8],M[9]=z[9],M[10]=z[10],M[11]=z[11],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15]),M[0]=Oe*Me+Mt*le,M[1]=Ue*Me+Ct*le,M[2]=$e*Me+Rt*le,M[3]=ct*Me+Gt*le,M[4]=Mt*Me-Oe*le,M[5]=Ct*Me-Ue*le,M[6]=Rt*Me-$e*le,M[7]=Gt*Me-ct*le,M},r.scale=function(M,z,X){var le=X[0],Me=X[1],Oe=X[2];return M[0]=z[0]*le,M[1]=z[1]*le,M[2]=z[2]*le,M[3]=z[3]*le,M[4]=z[4]*Me,M[5]=z[5]*Me,M[6]=z[6]*Me,M[7]=z[7]*Me,M[8]=z[8]*Oe,M[9]=z[9]*Oe,M[10]=z[10]*Oe,M[11]=z[11]*Oe,M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15],M},r.scale$1=function(M,z,X){return M[0]=z[0]*X,M[1]=z[1]*X,M[2]=z[2]*X,M[3]=z[3]*X,M},r.scale$2=function(M,z,X){return M[0]=z[0]*X,M[1]=z[1]*X,M[2]=z[2]*X,M},r.setCacheLimits=function(M,z){Ee=M,Fe=z},r.setRTLTextPlugin=function(M,z,X){if(X===void 0&&(X=!1),Xr===To||Xr===Xa||Xr===zo)throw new Error("setRTLTextPlugin cannot be called multiple times.");ea=ee.resolveURL(M),Xr=To,ns=z,Ao(),X||Os()},r.sphericalToCartesian=function(M){var z=M[0],X=M[1],le=M[2];return X+=90,X*=Math.PI/180,le*=Math.PI/180,{x:z*Math.cos(X)*Math.sin(le),y:z*Math.sin(X)*Math.sin(le),z:z*Math.cos(le)}},r.sqrLen=sv,r.styleSpec=Be,r.sub=ov,r.symbolSize=fg,r.transformMat3=function(M,z,X){var le=z[0],Me=z[1],Oe=z[2];return M[0]=le*X[0]+Me*X[3]+Oe*X[6],M[1]=le*X[1]+Me*X[4]+Oe*X[7],M[2]=le*X[2]+Me*X[5]+Oe*X[8],M},r.transformMat4=zc,r.translate=function(M,z,X){var le,Me,Oe,Ue,$e,ct,Mt,Ct,Rt,Gt,Ut,sn,hn=X[0],Sn=X[1],Mn=X[2];return z===M?(M[12]=z[0]*hn+z[4]*Sn+z[8]*Mn+z[12],M[13]=z[1]*hn+z[5]*Sn+z[9]*Mn+z[13],M[14]=z[2]*hn+z[6]*Sn+z[10]*Mn+z[14],M[15]=z[3]*hn+z[7]*Sn+z[11]*Mn+z[15]):(le=z[0],Me=z[1],Oe=z[2],Ue=z[3],$e=z[4],ct=z[5],Mt=z[6],Ct=z[7],Rt=z[8],Gt=z[9],Ut=z[10],sn=z[11],M[0]=le,M[1]=Me,M[2]=Oe,M[3]=Ue,M[4]=$e,M[5]=ct,M[6]=Mt,M[7]=Ct,M[8]=Rt,M[9]=Gt,M[10]=Ut,M[11]=sn,M[12]=le*hn+$e*Sn+Rt*Mn+z[12],M[13]=Me*hn+ct*Sn+Gt*Mn+z[13],M[14]=Oe*hn+Mt*Sn+Ut*Mn+z[14],M[15]=Ue*hn+Ct*Sn+sn*Mn+z[15]),M},r.triggerPluginCompletionEvent=wa,r.uniqueId=h,r.validateCustomStyleLayer=function(M){var z=[],X=M.id;return X===void 0&&z.push({message:"layers."+X+': missing required property "id"'}),M.render===void 0&&z.push({message:"layers."+X+': missing required method "render"'}),M.renderingMode&&M.renderingMode!=="2d"&&M.renderingMode!=="3d"&&z.push({message:"layers."+X+': property "renderingMode" must be either "2d" or "3d"'}),z},r.validateLight=ms,r.validateStyle=wo,r.values=function(M){var z=[];for(var X in M)z.push(M[X]);return z},r.vectorTile=wu,r.version=b,r.warnOnce=E,r.webpSupported=Z,r.window=n,r.wrap=p}),T(0,function(r){function w(We){var Ze=typeof We;if(Ze==="number"||Ze==="boolean"||Ze==="string"||We==null)return JSON.stringify(We);if(Array.isArray(We)){for(var Ne="[",Xe=0,st=We;Xe<st.length;Xe+=1)Ne+=w(st[Xe])+",";return Ne+"]"}for(var lt=Object.keys(We).sort(),xt="{",bt=0;bt<lt.length;bt++)xt+=JSON.stringify(lt[bt])+":"+w(We[lt[bt]])+",";return xt+"}"}function b(We){for(var Ze="",Ne=0,Xe=r.refProperties;Ne<Xe.length;Ne+=1)Ze+="/"+w(We[Xe[Ne]]);return Ze}var c=function(We){this.keyCache={},We&&this.replace(We)};c.prototype.replace=function(We){this._layerConfigs={},this._layers={},this.update(We,[])},c.prototype.update=function(We,Ze){for(var Ne=this,Xe=0,st=We;Xe<st.length;Xe+=1){var lt=st[Xe];this._layerConfigs[lt.id]=lt;var xt=this._layers[lt.id]=r.createStyleLayer(lt);xt._featureFilter=r.featureFilter(xt.filter),this.keyCache[lt.id]&&delete this.keyCache[lt.id]}for(var bt=0,Ve=Ze;bt<Ve.length;bt+=1){var Be=Ve[bt];delete this.keyCache[Be],delete this._layerConfigs[Be],delete this._layers[Be]}this.familiesBySource={};for(var at=0,ht=function(At,Ft){for(var jt={},rn=0;rn<At.length;rn++){var nn=Ft&&Ft[At[rn].id]||b(At[rn]);Ft&&(Ft[At[rn].id]=nn);var on=jt[nn];on||(on=jt[nn]=[]),on.push(At[rn])}var Ht=[];for(var $t in jt)Ht.push(jt[$t]);return Ht}(r.values(this._layerConfigs),this.keyCache);at<ht.length;at+=1){var dt=ht[at].map(function(At){return Ne._layers[At.id]}),it=dt[0];if(it.visibility!=="none"){var kt=it.source||"",Tt=this.familiesBySource[kt];Tt||(Tt=this.familiesBySource[kt]={});var St=it.sourceLayer||"_geojsonTileLayer",wt=Tt[St];wt||(wt=Tt[St]=[]),wt.push(dt)}}};var o=function(We){var Ze={},Ne=[];for(var Xe in We){var st=We[Xe],lt=Ze[Xe]={};for(var xt in st){var bt=st[+xt];if(bt&&bt.bitmap.width!==0&&bt.bitmap.height!==0){var Ve={x:0,y:0,w:bt.bitmap.width+2,h:bt.bitmap.height+2};Ne.push(Ve),lt[xt]={rect:Ve,metrics:bt.metrics}}}}var Be=r.potpack(Ne),at=Be.w,ht=Be.h,dt=new r.AlphaImage({width:at||1,height:ht||1});for(var it in We){var kt=We[it];for(var Tt in kt){var St=kt[+Tt];if(St&&St.bitmap.width!==0&&St.bitmap.height!==0){var wt=Ze[it][Tt].rect;r.AlphaImage.copy(St.bitmap,dt,{x:0,y:0},{x:wt.x+1,y:wt.y+1},St.bitmap)}}}this.image=dt,this.positions=Ze};r.register("GlyphAtlas",o);var t=function(We){this.tileID=new r.OverscaledTileID(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.uid=We.uid,this.zoom=We.zoom,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=We.showCollisionBoxes,this.collectResourceTiming=!!We.collectResourceTiming,this.returnDependencies=!!We.returnDependencies,this.promoteId=We.promoteId};function i(We,Ze,Ne){for(var Xe=new r.EvaluationParameters(Ze),st=0,lt=We;st<lt.length;st+=1)lt[st].recalculate(Xe,Ne)}function n(We,Ze){var Ne=r.getArrayBuffer(We.request,function(Xe,st,lt,xt){Xe?Ze(Xe):st&&Ze(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(st)),rawData:st,cacheControl:lt,expires:xt})});return function(){Ne.cancel(),Ze()}}t.prototype.parse=function(We,Ze,Ne,Xe,st){var lt=this;this.status="parsing",this.data=We,this.collisionBoxArray=new r.CollisionBoxArray;var xt=new r.DictionaryCoder(Object.keys(We.layers).sort()),bt=new r.FeatureIndex(this.tileID,this.promoteId);bt.bucketLayerIDs=[];var Ve,Be,at,ht,dt={},it={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ne},kt=Ze.familiesBySource[this.source];for(var Tt in kt){var St=We.layers[Tt];if(St){St.version===1&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+Tt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var wt=xt.encode(Tt),At=[],Ft=0;Ft<St.length;Ft++){var jt=St.feature(Ft),rn=bt.getId(jt,Tt);At.push({feature:jt,id:rn,index:Ft,sourceLayerIndex:wt})}for(var nn=0,on=kt[Tt];nn<on.length;nn+=1){var Ht=on[nn],$t=Ht[0];$t.minzoom&&this.zoom<Math.floor($t.minzoom)||$t.maxzoom&&this.zoom>=$t.maxzoom||$t.visibility!=="none"&&(i(Ht,this.zoom,Ne),(dt[$t.id]=$t.createBucket({index:bt.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wt,sourceID:this.source})).populate(At,it,this.tileID.canonical),bt.bucketLayerIDs.push(Ht.map(function(en){return en.id})))}}}var bn=r.mapObject(it.glyphDependencies,function(en){return Object.keys(en).map(Number)});Object.keys(bn).length?Xe.send("getGlyphs",{uid:this.uid,stacks:bn},function(en,un){Ve||(Ve=en,Be=un,fn.call(lt))}):Be={};var ln=Object.keys(it.iconDependencies);ln.length?Xe.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},function(en,un){Ve||(Ve=en,at=un,fn.call(lt))}):at={};var Kt=Object.keys(it.patternDependencies);function fn(){if(Ve)return st(Ve);if(Be&&at&&ht){var en=new o(Be),un=new r.ImageAtlas(at,ht);for(var An in dt){var wn=dt[An];wn instanceof r.SymbolBucket?(i(wn.layers,this.zoom,Ne),r.performSymbolLayout(wn,Be,en.positions,at,un.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):wn.hasPattern&&(wn instanceof r.LineBucket||wn instanceof r.FillBucket||wn instanceof r.FillExtrusionBucket)&&(i(wn.layers,this.zoom,Ne),wn.addFeatures(it,this.tileID.canonical,un.patternPositions))}this.status="done",st(null,{buckets:r.values(dt).filter(function(On){return!On.isEmpty()}),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:en.image,imageAtlas:un,glyphMap:this.returnDependencies?Be:null,iconMap:this.returnDependencies?at:null,glyphPositions:this.returnDependencies?en.positions:null})}}Kt.length?Xe.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function(en,un){Ve||(Ve=en,ht=un,fn.call(lt))}):ht={},fn.call(this)};var a=function(We,Ze,Ne,Xe){this.actor=We,this.layerIndex=Ze,this.availableImages=Ne,this.loadVectorData=Xe||n,this.loading={},this.loaded={}};a.prototype.loadTile=function(We,Ze){var Ne=this,Xe=We.uid;this.loading||(this.loading={});var st=!!(We&&We.request&&We.request.collectResourceTiming)&&new r.RequestPerformance(We.request),lt=this.loading[Xe]=new t(We);lt.abort=this.loadVectorData(We,function(xt,bt){if(delete Ne.loading[Xe],xt||!bt)return lt.status="done",Ne.loaded[Xe]=lt,Ze(xt);var Ve=bt.rawData,Be={};bt.expires&&(Be.expires=bt.expires),bt.cacheControl&&(Be.cacheControl=bt.cacheControl);var at={};if(st){var ht=st.finish();ht&&(at.resourceTiming=JSON.parse(JSON.stringify(ht)))}lt.vectorTile=bt.vectorTile,lt.parse(bt.vectorTile,Ne.layerIndex,Ne.availableImages,Ne.actor,function(dt,it){if(dt||!it)return Ze(dt);Ze(null,r.extend({rawTileData:Ve.slice(0)},it,Be,at))}),Ne.loaded=Ne.loaded||{},Ne.loaded[Xe]=lt})},a.prototype.reloadTile=function(We,Ze){var Ne=this,Xe=this.loaded,st=We.uid,lt=this;if(Xe&&Xe[st]){var xt=Xe[st];xt.showCollisionBoxes=We.showCollisionBoxes;var bt=function(Ve,Be){var at=xt.reloadCallback;at&&(delete xt.reloadCallback,xt.parse(xt.vectorTile,lt.layerIndex,Ne.availableImages,lt.actor,at)),Ze(Ve,Be)};xt.status==="parsing"?xt.reloadCallback=bt:xt.status==="done"&&(xt.vectorTile?xt.parse(xt.vectorTile,this.layerIndex,this.availableImages,this.actor,bt):bt())}},a.prototype.abortTile=function(We,Ze){var Ne=this.loading,Xe=We.uid;Ne&&Ne[Xe]&&Ne[Xe].abort&&(Ne[Xe].abort(),delete Ne[Xe]),Ze()},a.prototype.removeTile=function(We,Ze){var Ne=this.loaded,Xe=We.uid;Ne&&Ne[Xe]&&delete Ne[Xe],Ze()};var s=r.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(We,Ze){var Ne=We.uid,Xe=We.encoding,st=We.rawImageData,lt=s&&st instanceof s?this.getImageData(st):st,xt=new r.DEMData(Ne,lt,Xe);this.loaded=this.loaded||{},this.loaded[Ne]=xt,Ze(null,xt)},l.prototype.getImageData=function(We){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(We.width,We.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=We.width,this.offscreenCanvas.height=We.height,this.offscreenCanvasContext.drawImage(We,0,0,We.width,We.height);var Ze=this.offscreenCanvasContext.getImageData(-1,-1,We.width+2,We.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:Ze.width,height:Ze.height},Ze.data)},l.prototype.removeTile=function(We){var Ze=this.loaded,Ne=We.uid;Ze&&Ze[Ne]&&delete Ze[Ne]};var u=function We(Ze,Ne){var Xe,st=Ze&&Ze.type;if(st==="FeatureCollection")for(Xe=0;Xe<Ze.features.length;Xe++)We(Ze.features[Xe],Ne);else if(st==="GeometryCollection")for(Xe=0;Xe<Ze.geometries.length;Xe++)We(Ze.geometries[Xe],Ne);else if(st==="Feature")We(Ze.geometry,Ne);else if(st==="Polygon")p(Ze.coordinates,Ne);else if(st==="MultiPolygon")for(Xe=0;Xe<Ze.coordinates.length;Xe++)p(Ze.coordinates[Xe],Ne);return Ze};function p(We,Ze){if(We.length!==0){f(We[0],Ze);for(var Ne=1;Ne<We.length;Ne++)f(We[Ne],!Ze)}}function f(We,Ze){for(var Ne=0,Xe=0,st=We.length,lt=st-1;Xe<st;lt=Xe++)Ne+=(We[Xe][0]-We[lt][0])*(We[lt][1]+We[Xe][1]);Ne>=0!=!!Ze&&We.reverse()}var m=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,h=function(We){this._feature=We,this.extent=r.EXTENT,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))};h.prototype.loadGeometry=function(){if(this._feature.type===1){for(var We=[],Ze=0,Ne=this._feature.geometry;Ze<Ne.length;Ze+=1){var Xe=Ne[Ze];We.push([new r.Point$1(Xe[0],Xe[1])])}return We}for(var st=[],lt=0,xt=this._feature.geometry;lt<xt.length;lt+=1){for(var bt=[],Ve=0,Be=xt[lt];Ve<Be.length;Ve+=1){var at=Be[Ve];bt.push(new r.Point$1(at[0],at[1]))}st.push(bt)}return st},h.prototype.toGeoJSON=function(We,Ze,Ne){return m.call(this,We,Ze,Ne)};var g=function(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=We.length,this._features=We};g.prototype.feature=function(We){return new h(this._features[We])};var v=r.vectorTile.VectorTileFeature,x=y;function y(We,Ze){this.options=Ze||{},this.features=We,this.length=We.length}function A(We,Ze){this.id=typeof We.id=="number"?We.id:void 0,this.type=We.type,this.rawGeometry=We.type===1?[We.geometry]:We.geometry,this.properties=We.tags,this.extent=Ze||4096}y.prototype.feature=function(We){return new A(this.features[We],this.options.extent)},A.prototype.loadGeometry=function(){var We=this.rawGeometry;this.geometry=[];for(var Ze=0;Ze<We.length;Ze++){for(var Ne=We[Ze],Xe=[],st=0;st<Ne.length;st++)Xe.push(new r.Point$1(Ne[st][0],Ne[st][1]));this.geometry.push(Xe)}return this.geometry},A.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var We=this.geometry,Ze=1/0,Ne=-1/0,Xe=1/0,st=-1/0,lt=0;lt<We.length;lt++)for(var xt=We[lt],bt=0;bt<xt.length;bt++){var Ve=xt[bt];Ze=Math.min(Ze,Ve.x),Ne=Math.max(Ne,Ve.x),Xe=Math.min(Xe,Ve.y),st=Math.max(st,Ve.y)}return[Ze,Xe,Ne,st]},A.prototype.toGeoJSON=v.prototype.toGeoJSON;var d=L,S=L,k=function(We,Ze){Ze=Ze||{};var Ne={};for(var Xe in We)Ne[Xe]=new x(We[Xe].features,Ze),Ne[Xe].name=Xe,Ne[Xe].version=Ze.version,Ne[Xe].extent=Ze.extent;return L({layers:Ne})},E=x;function L(We){var Ze=new r.pbf;return function(Ne,Xe){for(var st in Ne.layers)Xe.writeMessage(3,O,Ne.layers[st])}(We,Ze),Ze.finish()}function O(We,Ze){var Ne;Ze.writeVarintField(15,We.version||1),Ze.writeStringField(1,We.name||""),Ze.writeVarintField(5,We.extent||4096);var Xe={keys:[],values:[],keycache:{},valuecache:{}};for(Ne=0;Ne<We.length;Ne++)Xe.feature=We.feature(Ne),Ze.writeMessage(2,P,Xe);var st=Xe.keys;for(Ne=0;Ne<st.length;Ne++)Ze.writeStringField(3,st[Ne]);var lt=Xe.values;for(Ne=0;Ne<lt.length;Ne++)Ze.writeMessage(4,W,lt[Ne])}function P(We,Ze){var Ne=We.feature;Ne.id!==void 0&&Ze.writeVarintField(1,Ne.id),Ze.writeMessage(2,F,We),Ze.writeVarintField(3,Ne.type),Ze.writeMessage(4,N,Ne)}function F(We,Ze){var Ne=We.feature,Xe=We.keys,st=We.values,lt=We.keycache,xt=We.valuecache;for(var bt in Ne.properties){var Ve=lt[bt];Ve===void 0&&(Xe.push(bt),Ve=Xe.length-1,lt[bt]=Ve),Ze.writeVarint(Ve);var Be=Ne.properties[bt],at=typeof Be;at!=="string"&&at!=="boolean"&&at!=="number"&&(Be=JSON.stringify(Be));var ht=at+":"+Be,dt=xt[ht];dt===void 0&&(st.push(Be),dt=st.length-1,xt[ht]=dt),Ze.writeVarint(dt)}}function U(We,Ze){return(Ze<<3)+(7&We)}function I(We){return We<<1^We>>31}function N(We,Ze){for(var Ne=We.loadGeometry(),Xe=We.type,st=0,lt=0,xt=Ne.length,bt=0;bt<xt;bt++){var Ve=Ne[bt],Be=1;Xe===1&&(Be=Ve.length),Ze.writeVarint(U(1,Be));for(var at=Xe===3?Ve.length-1:Ve.length,ht=0;ht<at;ht++){ht===1&&Xe!==1&&Ze.writeVarint(U(2,at-1));var dt=Ve[ht].x-st,it=Ve[ht].y-lt;Ze.writeVarint(I(dt)),Ze.writeVarint(I(it)),st+=dt,lt+=it}Xe===3&&Ze.writeVarint(U(7,1))}}function W(We,Ze){var Ne=typeof We;Ne==="string"?Ze.writeStringField(1,We):Ne==="boolean"?Ze.writeBooleanField(7,We):Ne==="number"&&(We%1!=0?Ze.writeDoubleField(3,We):We<0?Ze.writeSVarintField(6,We):Ze.writeVarintField(5,We))}function B(We,Ze,Ne,Xe,st,lt){if(!(st-Xe<=Ne)){var xt=Xe+st>>1;V(We,Ze,xt,Xe,st,lt%2),B(We,Ze,Ne,Xe,xt-1,lt+1),B(We,Ze,Ne,xt+1,st,lt+1)}}function V(We,Ze,Ne,Xe,st,lt){for(;st>Xe;){if(st-Xe>600){var xt=st-Xe+1,bt=Ne-Xe+1,Ve=Math.log(xt),Be=.5*Math.exp(2*Ve/3),at=.5*Math.sqrt(Ve*Be*(xt-Be)/xt)*(bt-xt/2<0?-1:1);V(We,Ze,Ne,Math.max(Xe,Math.floor(Ne-bt*Be/xt+at)),Math.min(st,Math.floor(Ne+(xt-bt)*Be/xt+at)),lt)}var ht=Ze[2*Ne+lt],dt=Xe,it=st;for(q(We,Ze,Xe,Ne),Ze[2*st+lt]>ht&&q(We,Ze,Xe,st);dt<it;){for(q(We,Ze,dt,it),dt++,it--;Ze[2*dt+lt]<ht;)dt++;for(;Ze[2*it+lt]>ht;)it--}Ze[2*Xe+lt]===ht?q(We,Ze,Xe,it):q(We,Ze,++it,st),it<=Ne&&(Xe=it+1),Ne<=it&&(st=it-1)}}function q(We,Ze,Ne,Xe){ne(We,Ne,Xe),ne(Ze,2*Ne,2*Xe),ne(Ze,2*Ne+1,2*Xe+1)}function ne(We,Ze,Ne){var Xe=We[Ze];We[Ze]=We[Ne],We[Ne]=Xe}function $(We,Ze,Ne,Xe){var st=We-Ne,lt=Ze-Xe;return st*st+lt*lt}d.fromVectorTileJs=S,d.fromGeojsonVt=k,d.GeoJSONWrapper=E;var K=function(We){return We[0]},ee=function(We){return We[1]},J=function(We,Ze,Ne,Xe,st){Ze===void 0&&(Ze=K),Ne===void 0&&(Ne=ee),Xe===void 0&&(Xe=64),st===void 0&&(st=Float64Array),this.nodeSize=Xe,this.points=We;for(var lt=We.length<65536?Uint16Array:Uint32Array,xt=this.ids=new lt(We.length),bt=this.coords=new st(2*We.length),Ve=0;Ve<We.length;Ve++)xt[Ve]=Ve,bt[2*Ve]=Ze(We[Ve]),bt[2*Ve+1]=Ne(We[Ve]);B(xt,bt,Xe,0,xt.length-1,0)};J.prototype.range=function(We,Ze,Ne,Xe){return function(st,lt,xt,bt,Ve,Be,at){for(var ht,dt,it=[0,st.length-1,0],kt=[];it.length;){var Tt=it.pop(),St=it.pop(),wt=it.pop();if(St-wt<=at)for(var At=wt;At<=St;At++)ht=lt[2*At],dt=lt[2*At+1],ht>=xt&&ht<=Ve&&dt>=bt&&dt<=Be&&kt.push(st[At]);else{var Ft=Math.floor((wt+St)/2);ht=lt[2*Ft],dt=lt[2*Ft+1],ht>=xt&&ht<=Ve&&dt>=bt&&dt<=Be&&kt.push(st[Ft]);var jt=(Tt+1)%2;(Tt===0?xt<=ht:bt<=dt)&&(it.push(wt),it.push(Ft-1),it.push(jt)),(Tt===0?Ve>=ht:Be>=dt)&&(it.push(Ft+1),it.push(St),it.push(jt))}}return kt}(this.ids,this.coords,We,Ze,Ne,Xe,this.nodeSize)},J.prototype.within=function(We,Ze,Ne){return function(Xe,st,lt,xt,bt,Ve){for(var Be=[0,Xe.length-1,0],at=[],ht=bt*bt;Be.length;){var dt=Be.pop(),it=Be.pop(),kt=Be.pop();if(it-kt<=Ve)for(var Tt=kt;Tt<=it;Tt++)$(st[2*Tt],st[2*Tt+1],lt,xt)<=ht&&at.push(Xe[Tt]);else{var St=Math.floor((kt+it)/2),wt=st[2*St],At=st[2*St+1];$(wt,At,lt,xt)<=ht&&at.push(Xe[St]);var Ft=(dt+1)%2;(dt===0?lt-bt<=wt:xt-bt<=At)&&(Be.push(kt),Be.push(St-1),Be.push(Ft)),(dt===0?lt+bt>=wt:xt+bt>=At)&&(Be.push(St+1),Be.push(it),Be.push(Ft))}}return at}(this.ids,this.coords,We,Ze,Ne,this.nodeSize)};var Z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(We){return We}},te=function(We){this.options=pe(Object.create(Z),We),this.trees=new Array(this.options.maxZoom+1)};function oe(We,Ze,Ne,Xe,st){return{x:We,y:Ze,zoom:1/0,id:Ne,parentId:-1,numPoints:Xe,properties:st}}function se(We,Ze){var Ne=We.geometry.coordinates,Xe=Ne[0],st=Ne[1];return{x:me(Xe),y:fe(st),zoom:1/0,index:Ze,parentId:-1}}function ce(We){return{type:"Feature",id:We.id,properties:ye(We),geometry:{type:"Point",coordinates:[(Xe=We.x,360*(Xe-.5)),(Ze=We.y,Ne=(180-360*Ze)*Math.PI/180,360*Math.atan(Math.exp(Ne))/Math.PI-90)]}};var Ze,Ne,Xe}function ye(We){var Ze=We.numPoints,Ne=Ze>=1e4?Math.round(Ze/1e3)+"k":Ze>=1e3?Math.round(Ze/100)/10+"k":Ze;return pe(pe({},We.properties),{cluster:!0,cluster_id:We.id,point_count:Ze,point_count_abbreviated:Ne})}function me(We){return We/360+.5}function fe(We){var Ze=Math.sin(We*Math.PI/180),Ne=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function pe(We,Ze){for(var Ne in Ze)We[Ne]=Ze[Ne];return We}function ge(We){return We.x}function ke(We){return We.y}function Ce(We,Ze,Ne,Xe){for(var st,lt=Xe,xt=Ne-Ze>>1,bt=Ne-Ze,Ve=We[Ze],Be=We[Ze+1],at=We[Ne],ht=We[Ne+1],dt=Ze+3;dt<Ne;dt+=3){var it=de(We[dt],We[dt+1],Ve,Be,at,ht);if(it>lt)st=dt,lt=it;else if(it===lt){var kt=Math.abs(dt-xt);kt<bt&&(st=dt,bt=kt)}}lt>Xe&&(st-Ze>3&&Ce(We,Ze,st,Xe),We[st+2]=lt,Ne-st>3&&Ce(We,st,Ne,Xe))}function de(We,Ze,Ne,Xe,st,lt){var xt=st-Ne,bt=lt-Xe;if(xt!==0||bt!==0){var Ve=((We-Ne)*xt+(Ze-Xe)*bt)/(xt*xt+bt*bt);Ve>1?(Ne=st,Xe=lt):Ve>0&&(Ne+=xt*Ve,Xe+=bt*Ve)}return(xt=We-Ne)*xt+(bt=Ze-Xe)*bt}function ae(We,Ze,Ne,Xe){var st={id:We===void 0?null:We,type:Ze,geometry:Ne,tags:Xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(lt){var xt=lt.geometry,bt=lt.type;if(bt==="Point"||bt==="MultiPoint"||bt==="LineString")re(lt,xt);else if(bt==="Polygon"||bt==="MultiLineString")for(var Ve=0;Ve<xt.length;Ve++)re(lt,xt[Ve]);else if(bt==="MultiPolygon")for(Ve=0;Ve<xt.length;Ve++)for(var Be=0;Be<xt[Ve].length;Be++)re(lt,xt[Ve][Be])}(st),st}function re(We,Ze){for(var Ne=0;Ne<Ze.length;Ne+=3)We.minX=Math.min(We.minX,Ze[Ne]),We.minY=Math.min(We.minY,Ze[Ne+1]),We.maxX=Math.max(We.maxX,Ze[Ne]),We.maxY=Math.max(We.maxY,Ze[Ne+1])}function he(We,Ze,Ne,Xe){if(Ze.geometry){var st=Ze.geometry.coordinates,lt=Ze.geometry.type,xt=Math.pow(Ne.tolerance/((1<<Ne.maxZoom)*Ne.extent),2),bt=[],Ve=Ze.id;if(Ne.promoteId?Ve=Ze.properties[Ne.promoteId]:Ne.generateId&&(Ve=Xe||0),lt==="Point")Se(st,bt);else if(lt==="MultiPoint")for(var Be=0;Be<st.length;Be++)Se(st[Be],bt);else if(lt==="LineString")xe(st,bt,xt,!1);else if(lt==="MultiLineString"){if(Ne.lineMetrics){for(Be=0;Be<st.length;Be++)bt=[],xe(st[Be],bt,xt,!1),We.push(ae(Ve,"LineString",bt,Ze.properties));return}Te(st,bt,xt,!1)}else if(lt==="Polygon")Te(st,bt,xt,!0);else{if(lt!=="MultiPolygon"){if(lt==="GeometryCollection"){for(Be=0;Be<Ze.geometry.geometries.length;Be++)he(We,{id:Ve,geometry:Ze.geometry.geometries[Be],properties:Ze.properties},Ne,Xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Be=0;Be<st.length;Be++){var at=[];Te(st[Be],at,xt,!0),bt.push(at)}}We.push(ae(Ve,lt,bt,Ze.properties))}}function Se(We,Ze){Ze.push(Ae(We[0])),Ze.push(Pe(We[1])),Ze.push(0)}function xe(We,Ze,Ne,Xe){for(var st,lt,xt=0,bt=0;bt<We.length;bt++){var Ve=Ae(We[bt][0]),Be=Pe(We[bt][1]);Ze.push(Ve),Ze.push(Be),Ze.push(0),bt>0&&(xt+=Xe?(st*Be-Ve*lt)/2:Math.sqrt(Math.pow(Ve-st,2)+Math.pow(Be-lt,2))),st=Ve,lt=Be}var at=Ze.length-3;Ze[2]=1,Ce(Ze,0,at,Ne),Ze[at+2]=1,Ze.size=Math.abs(xt),Ze.start=0,Ze.end=Ze.size}function Te(We,Ze,Ne,Xe){for(var st=0;st<We.length;st++){var lt=[];xe(We[st],lt,Ne,Xe),Ze.push(lt)}}function Ae(We){return We/360+.5}function Pe(We){var Ze=Math.sin(We*Math.PI/180),Ne=.5-.25*Math.log((1+Ze)/(1-Ze))/Math.PI;return Ne<0?0:Ne>1?1:Ne}function De(We,Ze,Ne,Xe,st,lt,xt,bt){if(Xe/=Ze,lt>=(Ne/=Ze)&&xt<Xe)return We;if(xt<Ne||lt>=Xe)return null;for(var Ve=[],Be=0;Be<We.length;Be++){var at=We[Be],ht=at.geometry,dt=at.type,it=st===0?at.minX:at.minY,kt=st===0?at.maxX:at.maxY;if(it>=Ne&&kt<Xe)Ve.push(at);else if(!(kt<Ne||it>=Xe)){var Tt=[];if(dt==="Point"||dt==="MultiPoint")ve(ht,Tt,Ne,Xe,st);else if(dt==="LineString")we(ht,Tt,Ne,Xe,st,!1,bt.lineMetrics);else if(dt==="MultiLineString")Fe(ht,Tt,Ne,Xe,st,!1);else if(dt==="Polygon")Fe(ht,Tt,Ne,Xe,st,!0);else if(dt==="MultiPolygon")for(var St=0;St<ht.length;St++){var wt=[];Fe(ht[St],wt,Ne,Xe,st,!0),wt.length&&Tt.push(wt)}if(Tt.length){if(bt.lineMetrics&&dt==="LineString"){for(St=0;St<Tt.length;St++)Ve.push(ae(at.id,dt,Tt[St],at.tags));continue}dt!=="LineString"&&dt!=="MultiLineString"||(Tt.length===1?(dt="LineString",Tt=Tt[0]):dt="MultiLineString"),dt!=="Point"&&dt!=="MultiPoint"||(dt=Tt.length===3?"Point":"MultiPoint"),Ve.push(ae(at.id,dt,Tt,at.tags))}}}return Ve.length?Ve:null}function ve(We,Ze,Ne,Xe,st){for(var lt=0;lt<We.length;lt+=3){var xt=We[lt+st];xt>=Ne&&xt<=Xe&&(Ze.push(We[lt]),Ze.push(We[lt+1]),Ze.push(We[lt+2]))}}function we(We,Ze,Ne,Xe,st,lt,xt){for(var bt,Ve,Be=Ee(We),at=st===0?je:Ge,ht=We.start,dt=0;dt<We.length-3;dt+=3){var it=We[dt],kt=We[dt+1],Tt=We[dt+2],St=We[dt+3],wt=We[dt+4],At=st===0?it:kt,Ft=st===0?St:wt,jt=!1;xt&&(bt=Math.sqrt(Math.pow(it-St,2)+Math.pow(kt-wt,2))),At<Ne?Ft>Ne&&(Ve=at(Be,it,kt,St,wt,Ne),xt&&(Be.start=ht+bt*Ve)):At>Xe?Ft<Xe&&(Ve=at(Be,it,kt,St,wt,Xe),xt&&(Be.start=ht+bt*Ve)):Le(Be,it,kt,Tt),Ft<Ne&&At>=Ne&&(Ve=at(Be,it,kt,St,wt,Ne),jt=!0),Ft>Xe&&At<=Xe&&(Ve=at(Be,it,kt,St,wt,Xe),jt=!0),!lt&&jt&&(xt&&(Be.end=ht+bt*Ve),Ze.push(Be),Be=Ee(We)),xt&&(ht+=bt)}var rn=We.length-3;it=We[rn],kt=We[rn+1],Tt=We[rn+2],(At=st===0?it:kt)>=Ne&&At<=Xe&&Le(Be,it,kt,Tt),rn=Be.length-3,lt&&rn>=3&&(Be[rn]!==Be[0]||Be[rn+1]!==Be[1])&&Le(Be,Be[0],Be[1],Be[2]),Be.length&&Ze.push(Be)}function Ee(We){var Ze=[];return Ze.size=We.size,Ze.start=We.start,Ze.end=We.end,Ze}function Fe(We,Ze,Ne,Xe,st,lt){for(var xt=0;xt<We.length;xt++)we(We[xt],Ze,Ne,Xe,st,lt,!1)}function Le(We,Ze,Ne,Xe){We.push(Ze),We.push(Ne),We.push(Xe)}function je(We,Ze,Ne,Xe,st,lt){var xt=(lt-Ze)/(Xe-Ze);return We.push(lt),We.push(Ne+(st-Ne)*xt),We.push(1),xt}function Ge(We,Ze,Ne,Xe,st,lt){var xt=(lt-Ne)/(st-Ne);return We.push(Ze+(Xe-Ze)*xt),We.push(lt),We.push(1),xt}function Je(We,Ze){for(var Ne=[],Xe=0;Xe<We.length;Xe++){var st,lt=We[Xe],xt=lt.type;if(xt==="Point"||xt==="MultiPoint"||xt==="LineString")st=rt(lt.geometry,Ze);else if(xt==="MultiLineString"||xt==="Polygon"){st=[];for(var bt=0;bt<lt.geometry.length;bt++)st.push(rt(lt.geometry[bt],Ze))}else if(xt==="MultiPolygon")for(st=[],bt=0;bt<lt.geometry.length;bt++){for(var Ve=[],Be=0;Be<lt.geometry[bt].length;Be++)Ve.push(rt(lt.geometry[bt][Be],Ze));st.push(Ve)}Ne.push(ae(lt.id,xt,st,lt.tags))}return Ne}function rt(We,Ze){var Ne=[];Ne.size=We.size,We.start!==void 0&&(Ne.start=We.start,Ne.end=We.end);for(var Xe=0;Xe<We.length;Xe+=3)Ne.push(We[Xe]+Ze,We[Xe+1],We[Xe+2]);return Ne}function ot(We,Ze){if(We.transformed)return We;var Ne,Xe,st,lt=1<<We.z,xt=We.x,bt=We.y;for(Ne=0;Ne<We.features.length;Ne++){var Ve=We.features[Ne],Be=Ve.geometry,at=Ve.type;if(Ve.geometry=[],at===1)for(Xe=0;Xe<Be.length;Xe+=2)Ve.geometry.push(yt(Be[Xe],Be[Xe+1],Ze,lt,xt,bt));else for(Xe=0;Xe<Be.length;Xe++){var ht=[];for(st=0;st<Be[Xe].length;st+=2)ht.push(yt(Be[Xe][st],Be[Xe][st+1],Ze,lt,xt,bt));Ve.geometry.push(ht)}}return We.transformed=!0,We}function yt(We,Ze,Ne,Xe,st,lt){return[Math.round(Ne*(We*Xe-st)),Math.round(Ne*(Ze*Xe-lt))]}function _t(We,Ze,Ne,Xe,st){for(var lt=Ze===st.maxZoom?0:st.tolerance/((1<<Ze)*st.extent),xt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ne,y:Xe,z:Ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},bt=0;bt<We.length;bt++){xt.numFeatures++,mt(xt,We[bt],lt,st);var Ve=We[bt].minX,Be=We[bt].minY,at=We[bt].maxX,ht=We[bt].maxY;Ve<xt.minX&&(xt.minX=Ve),Be<xt.minY&&(xt.minY=Be),at>xt.maxX&&(xt.maxX=at),ht>xt.maxY&&(xt.maxY=ht)}return xt}function mt(We,Ze,Ne,Xe){var st=Ze.geometry,lt=Ze.type,xt=[];if(lt==="Point"||lt==="MultiPoint")for(var bt=0;bt<st.length;bt+=3)xt.push(st[bt]),xt.push(st[bt+1]),We.numPoints++,We.numSimplified++;else if(lt==="LineString")tt(xt,st,We,Ne,!1,!1);else if(lt==="MultiLineString"||lt==="Polygon")for(bt=0;bt<st.length;bt++)tt(xt,st[bt],We,Ne,lt==="Polygon",bt===0);else if(lt==="MultiPolygon")for(var Ve=0;Ve<st.length;Ve++){var Be=st[Ve];for(bt=0;bt<Be.length;bt++)tt(xt,Be[bt],We,Ne,!0,bt===0)}if(xt.length){var at=Ze.tags||null;if(lt==="LineString"&&Xe.lineMetrics){for(var ht in at={},Ze.tags)at[ht]=Ze.tags[ht];at.mapbox_clip_start=st.start/st.size,at.mapbox_clip_end=st.end/st.size}var dt={geometry:xt,type:lt==="Polygon"||lt==="MultiPolygon"?3:lt==="LineString"||lt==="MultiLineString"?2:1,tags:at};Ze.id!==null&&(dt.id=Ze.id),We.features.push(dt)}}function tt(We,Ze,Ne,Xe,st,lt){var xt=Xe*Xe;if(Xe>0&&Ze.size<(st?xt:Xe))Ne.numPoints+=Ze.length/3;else{for(var bt=[],Ve=0;Ve<Ze.length;Ve+=3)(Xe===0||Ze[Ve+2]>xt)&&(Ne.numSimplified++,bt.push(Ze[Ve]),bt.push(Ze[Ve+1])),Ne.numPoints++;st&&function(Be,at){for(var ht=0,dt=0,it=Be.length,kt=it-2;dt<it;kt=dt,dt+=2)ht+=(Be[dt]-Be[kt])*(Be[dt+1]+Be[kt+1]);if(ht>0===at)for(dt=0,it=Be.length;dt<it/2;dt+=2){var Tt=Be[dt],St=Be[dt+1];Be[dt]=Be[it-2-dt],Be[dt+1]=Be[it-1-dt],Be[it-2-dt]=Tt,Be[it-1-dt]=St}}(bt,lt),We.push(bt)}}function Qe(We,Ze){var Ne=(Ze=this.options=function(st,lt){for(var xt in lt)st[xt]=lt[xt];return st}(Object.create(this.options),Ze)).debug;if(Ne&&console.time("preprocess data"),Ze.maxZoom<0||Ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ze.promoteId&&Ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var Xe=function(st,lt){var xt=[];if(st.type==="FeatureCollection")for(var bt=0;bt<st.features.length;bt++)he(xt,st.features[bt],lt,bt);else st.type==="Feature"?he(xt,st,lt):he(xt,{geometry:st},lt);return xt}(We,Ze);this.tiles={},this.tileCoords=[],Ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ze.indexMaxZoom,Ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Xe=function(st,lt){var xt=lt.buffer/lt.extent,bt=st,Ve=De(st,1,-1-xt,xt,0,-1,2,lt),Be=De(st,1,1-xt,2+xt,0,-1,2,lt);return(Ve||Be)&&(bt=De(st,1,-xt,1+xt,0,-1,2,lt)||[],Ve&&(bt=Je(Ve,1).concat(bt)),Be&&(bt=bt.concat(Je(Be,-1)))),bt}(Xe,Ze)).length&&this.splitTile(Xe,0,0,0),Ne&&(Xe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Dt(We,Ze,Ne){return 32*((1<<We)*Ne+Ze)+We}function zt(We,Ze){var Ne=We.tileID.canonical;if(!this._geoJSONIndex)return Ze(null,null);var Xe=this._geoJSONIndex.getTile(Ne.z,Ne.x,Ne.y);if(!Xe)return Ze(null,null);var st=new g(Xe.features),lt=d(st);lt.byteOffset===0&&lt.byteLength===lt.buffer.byteLength||(lt=new Uint8Array(lt)),Ze(null,{vectorTile:st,rawData:lt.buffer})}te.prototype.load=function(We){var Ze=this.options,Ne=Ze.log,Xe=Ze.minZoom,st=Ze.maxZoom,lt=Ze.nodeSize;Ne&&console.time("total time");var xt="prepare "+We.length+" points";Ne&&console.time(xt),this.points=We;for(var bt=[],Ve=0;Ve<We.length;Ve++)We[Ve].geometry&&bt.push(se(We[Ve],Ve));this.trees[st+1]=new J(bt,ge,ke,lt,Float32Array),Ne&&console.timeEnd(xt);for(var Be=st;Be>=Xe;Be--){var at=+Date.now();bt=this._cluster(bt,Be),this.trees[Be]=new J(bt,ge,ke,lt,Float32Array),Ne&&console.log("z%d: %d clusters in %dms",Be,bt.length,+Date.now()-at)}return Ne&&console.timeEnd("total time"),this},te.prototype.getClusters=function(We,Ze){var Ne=((We[0]+180)%360+360)%360-180,Xe=Math.max(-90,Math.min(90,We[1])),st=We[2]===180?180:((We[2]+180)%360+360)%360-180,lt=Math.max(-90,Math.min(90,We[3]));if(We[2]-We[0]>=360)Ne=-180,st=180;else if(Ne>st){var xt=this.getClusters([Ne,Xe,180,lt],Ze),bt=this.getClusters([-180,Xe,st,lt],Ze);return xt.concat(bt)}for(var Ve=this.trees[this._limitZoom(Ze)],Be=[],at=0,ht=Ve.range(me(Ne),fe(lt),me(st),fe(Xe));at<ht.length;at+=1){var dt=ht[at],it=Ve.points[dt];Be.push(it.numPoints?ce(it):this.points[it.index])}return Be},te.prototype.getChildren=function(We){var Ze=this._getOriginId(We),Ne=this._getOriginZoom(We),Xe="No cluster with the specified id.",st=this.trees[Ne];if(!st)throw new Error(Xe);var lt=st.points[Ze];if(!lt)throw new Error(Xe);for(var xt=this.options.radius/(this.options.extent*Math.pow(2,Ne-1)),bt=[],Ve=0,Be=st.within(lt.x,lt.y,xt);Ve<Be.length;Ve+=1){var at=Be[Ve],ht=st.points[at];ht.parentId===We&&bt.push(ht.numPoints?ce(ht):this.points[ht.index])}if(bt.length===0)throw new Error(Xe);return bt},te.prototype.getLeaves=function(We,Ze,Ne){Ze=Ze||10,Ne=Ne||0;var Xe=[];return this._appendLeaves(Xe,We,Ze,Ne,0),Xe},te.prototype.getTile=function(We,Ze,Ne){var Xe=this.trees[this._limitZoom(We)],st=Math.pow(2,We),lt=this.options,xt=lt.extent,bt=lt.radius/xt,Ve=(Ne-bt)/st,Be=(Ne+1+bt)/st,at={features:[]};return this._addTileFeatures(Xe.range((Ze-bt)/st,Ve,(Ze+1+bt)/st,Be),Xe.points,Ze,Ne,st,at),Ze===0&&this._addTileFeatures(Xe.range(1-bt/st,Ve,1,Be),Xe.points,st,Ne,st,at),Ze===st-1&&this._addTileFeatures(Xe.range(0,Ve,bt/st,Be),Xe.points,-1,Ne,st,at),at.features.length?at:null},te.prototype.getClusterExpansionZoom=function(We){for(var Ze=this._getOriginZoom(We)-1;Ze<=this.options.maxZoom;){var Ne=this.getChildren(We);if(Ze++,Ne.length!==1)break;We=Ne[0].properties.cluster_id}return Ze},te.prototype._appendLeaves=function(We,Ze,Ne,Xe,st){for(var lt=0,xt=this.getChildren(Ze);lt<xt.length;lt+=1){var bt=xt[lt],Ve=bt.properties;if(Ve&&Ve.cluster?st+Ve.point_count<=Xe?st+=Ve.point_count:st=this._appendLeaves(We,Ve.cluster_id,Ne,Xe,st):st<Xe?st++:We.push(bt),We.length===Ne)break}return st},te.prototype._addTileFeatures=function(We,Ze,Ne,Xe,st,lt){for(var xt=0,bt=We;xt<bt.length;xt+=1){var Ve=Ze[bt[xt]],Be=Ve.numPoints,at={type:1,geometry:[[Math.round(this.options.extent*(Ve.x*st-Ne)),Math.round(this.options.extent*(Ve.y*st-Xe))]],tags:Be?ye(Ve):this.points[Ve.index].properties},ht=void 0;Be?ht=Ve.id:this.options.generateId?ht=Ve.index:this.points[Ve.index].id&&(ht=this.points[Ve.index].id),ht!==void 0&&(at.id=ht),lt.features.push(at)}},te.prototype._limitZoom=function(We){return Math.max(this.options.minZoom,Math.min(+We,this.options.maxZoom+1))},te.prototype._cluster=function(We,Ze){for(var Ne=[],Xe=this.options,st=Xe.radius,lt=Xe.extent,xt=Xe.reduce,bt=Xe.minPoints,Ve=st/(lt*Math.pow(2,Ze)),Be=0;Be<We.length;Be++){var at=We[Be];if(!(at.zoom<=Ze)){at.zoom=Ze;for(var ht=this.trees[Ze+1],dt=ht.within(at.x,at.y,Ve),it=at.numPoints||1,kt=it,Tt=0,St=dt;Tt<St.length;Tt+=1){var wt=St[Tt],At=ht.points[wt];At.zoom>Ze&&(kt+=At.numPoints||1)}if(kt>=bt){for(var Ft=at.x*it,jt=at.y*it,rn=xt&&it>1?this._map(at,!0):null,nn=(Be<<5)+(Ze+1)+this.points.length,on=0,Ht=dt;on<Ht.length;on+=1){var $t=Ht[on],bn=ht.points[$t];if(!(bn.zoom<=Ze)){bn.zoom=Ze;var ln=bn.numPoints||1;Ft+=bn.x*ln,jt+=bn.y*ln,bn.parentId=nn,xt&&(rn||(rn=this._map(at,!0)),xt(rn,this._map(bn)))}}at.parentId=nn,Ne.push(oe(Ft/kt,jt/kt,nn,kt,rn))}else if(Ne.push(at),kt>1)for(var Kt=0,fn=dt;Kt<fn.length;Kt+=1){var en=fn[Kt],un=ht.points[en];un.zoom<=Ze||(un.zoom=Ze,Ne.push(un))}}}return Ne},te.prototype._getOriginId=function(We){return We-this.points.length>>5},te.prototype._getOriginZoom=function(We){return(We-this.points.length)%32},te.prototype._map=function(We,Ze){if(We.numPoints)return Ze?pe({},We.properties):We.properties;var Ne=this.points[We.index].properties,Xe=this.options.map(Ne);return Ze&&Xe===Ne?pe({},Xe):Xe},Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(We,Ze,Ne,Xe,st,lt,xt){for(var bt=[We,Ze,Ne,Xe],Ve=this.options,Be=Ve.debug;bt.length;){Xe=bt.pop(),Ne=bt.pop(),Ze=bt.pop(),We=bt.pop();var at=1<<Ze,ht=Dt(Ze,Ne,Xe),dt=this.tiles[ht];if(!dt&&(Be>1&&console.time("creation"),dt=this.tiles[ht]=_t(We,Ze,Ne,Xe,Ve),this.tileCoords.push({z:Ze,x:Ne,y:Xe}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ze,Ne,Xe,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));var it="z"+Ze;this.stats[it]=(this.stats[it]||0)+1,this.total++}if(dt.source=We,st){if(Ze===Ve.maxZoom||Ze===st)continue;var kt=1<<st-Ze;if(Ne!==Math.floor(lt/kt)||Xe!==Math.floor(xt/kt))continue}else if(Ze===Ve.indexMaxZoom||dt.numPoints<=Ve.indexMaxPoints)continue;if(dt.source=null,We.length!==0){Be>1&&console.time("clipping");var Tt,St,wt,At,Ft,jt,rn=.5*Ve.buffer/Ve.extent,nn=.5-rn,on=.5+rn,Ht=1+rn;Tt=St=wt=At=null,Ft=De(We,at,Ne-rn,Ne+on,0,dt.minX,dt.maxX,Ve),jt=De(We,at,Ne+nn,Ne+Ht,0,dt.minX,dt.maxX,Ve),We=null,Ft&&(Tt=De(Ft,at,Xe-rn,Xe+on,1,dt.minY,dt.maxY,Ve),St=De(Ft,at,Xe+nn,Xe+Ht,1,dt.minY,dt.maxY,Ve),Ft=null),jt&&(wt=De(jt,at,Xe-rn,Xe+on,1,dt.minY,dt.maxY,Ve),At=De(jt,at,Xe+nn,Xe+Ht,1,dt.minY,dt.maxY,Ve),jt=null),Be>1&&console.timeEnd("clipping"),bt.push(Tt||[],Ze+1,2*Ne,2*Xe),bt.push(St||[],Ze+1,2*Ne,2*Xe+1),bt.push(wt||[],Ze+1,2*Ne+1,2*Xe),bt.push(At||[],Ze+1,2*Ne+1,2*Xe+1)}}},Qe.prototype.getTile=function(We,Ze,Ne){var Xe=this.options,st=Xe.extent,lt=Xe.debug;if(We<0||We>24)return null;var xt=1<<We,bt=Dt(We,Ze=(Ze%xt+xt)%xt,Ne);if(this.tiles[bt])return ot(this.tiles[bt],st);lt>1&&console.log("drilling down to z%d-%d-%d",We,Ze,Ne);for(var Ve,Be=We,at=Ze,ht=Ne;!Ve&&Be>0;)Be--,at=Math.floor(at/2),ht=Math.floor(ht/2),Ve=this.tiles[Dt(Be,at,ht)];return Ve&&Ve.source?(lt>1&&console.log("found parent tile z%d-%d-%d",Be,at,ht),lt>1&&console.time("drilling down"),this.splitTile(Ve.source,Be,at,ht,We,Ze,Ne),lt>1&&console.timeEnd("drilling down"),this.tiles[bt]?ot(this.tiles[bt],st):null):null};var pt=function(We){function Ze(Ne,Xe,st,lt){We.call(this,Ne,Xe,st,zt),lt&&(this.loadGeoJSON=lt)}return We&&(Ze.__proto__=We),Ze.prototype=Object.create(We&&We.prototype),Ze.prototype.constructor=Ze,Ze.prototype.loadData=function(Ne,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Xe,this._pendingLoadDataParams=Ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ze.prototype._loadData=function(){var Ne=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Xe=this._pendingCallback,st=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var lt=!!(st&&st.request&&st.request.collectResourceTiming)&&new r.RequestPerformance(st.request);this.loadGeoJSON(st,function(xt,bt){if(xt||!bt)return Xe(xt);if(typeof bt!="object")return Xe(new Error("Input data given to '"+st.source+"' is not a valid GeoJSON object."));u(bt,!0);try{if(st.filter){var Ve=r.createExpression(st.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ve.result==="error")throw new Error(Ve.value.map(function(dt){return dt.key+": "+dt.message}).join(", "));var Be=bt.features.filter(function(dt){return Ve.value.evaluate({zoom:0},dt)});bt={type:"FeatureCollection",features:Be}}Ne._geoJSONIndex=st.cluster?new te(function(dt){var it=dt.superclusterOptions,kt=dt.clusterProperties;if(!kt||!it)return it;for(var Tt={},St={},wt={accumulated:null,zoom:0},At={properties:null},Ft=Object.keys(kt),jt=0,rn=Ft;jt<rn.length;jt+=1){var nn=rn[jt],on=kt[nn],Ht=on[0],$t=on[1],bn=r.createExpression($t),ln=r.createExpression(typeof Ht=="string"?[Ht,["accumulated"],["get",nn]]:Ht);Tt[nn]=bn.value,St[nn]=ln.value}return it.map=function(Kt){At.properties=Kt;for(var fn={},en=0,un=Ft;en<un.length;en+=1){var An=un[en];fn[An]=Tt[An].evaluate(wt,At)}return fn},it.reduce=function(Kt,fn){At.properties=fn;for(var en=0,un=Ft;en<un.length;en+=1){var An=un[en];wt.accumulated=Kt[An],Kt[An]=St[An].evaluate(wt,At)}},it}(st)).load(bt.features):function(dt,it){return new Qe(dt,it)}(bt,st.geojsonVtOptions)}catch(dt){return Xe(dt)}Ne.loaded={};var at={};if(lt){var ht=lt.finish();ht&&(at.resourceTiming={},at.resourceTiming[st.source]=JSON.parse(JSON.stringify(ht)))}Xe(null,at)})}},Ze.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ze.prototype.reloadTile=function(Ne,Xe){var st=this.loaded,lt=Ne.uid;return st&&st[lt]?We.prototype.reloadTile.call(this,Ne,Xe):this.loadTile(Ne,Xe)},Ze.prototype.loadGeoJSON=function(Ne,Xe){if(Ne.request)r.getJSON(Ne.request,Xe);else{if(typeof Ne.data!="string")return Xe(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."));try{return Xe(null,JSON.parse(Ne.data))}catch{return Xe(new Error("Input data given to '"+Ne.source+"' is not a valid GeoJSON object."))}}},Ze.prototype.removeSource=function(Ne,Xe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Xe()},Ze.prototype.getClusterExpansionZoom=function(Ne,Xe){try{Xe(null,this._geoJSONIndex.getClusterExpansionZoom(Ne.clusterId))}catch(st){Xe(st)}},Ze.prototype.getClusterChildren=function(Ne,Xe){try{Xe(null,this._geoJSONIndex.getChildren(Ne.clusterId))}catch(st){Xe(st)}},Ze.prototype.getClusterLeaves=function(Ne,Xe){try{Xe(null,this._geoJSONIndex.getLeaves(Ne.clusterId,Ne.limit,Ne.offset))}catch(st){Xe(st)}},Ze}(a),vt=function(We){var Ze=this;this.self=We,this.actor=new r.Actor(We,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ne,Xe){if(Ze.workerSourceTypes[Ne])throw new Error('Worker source with name "'+Ne+'" already registered.');Ze.workerSourceTypes[Ne]=Xe},this.self.registerRTLTextPlugin=function(Ne){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=Ne.applyArabicShaping,r.plugin.processBidirectionalText=Ne.processBidirectionalText,r.plugin.processStyledBidirectionalText=Ne.processStyledBidirectionalText}};return vt.prototype.setReferrer=function(We,Ze){this.referrer=Ze},vt.prototype.setImages=function(We,Ze,Ne){for(var Xe in this.availableImages[We]=Ze,this.workerSources[We]){var st=this.workerSources[We][Xe];for(var lt in st)st[lt].availableImages=Ze}Ne()},vt.prototype.setLayers=function(We,Ze,Ne){this.getLayerIndex(We).replace(Ze),Ne()},vt.prototype.updateLayers=function(We,Ze,Ne){this.getLayerIndex(We).update(Ze.layers,Ze.removedIds),Ne()},vt.prototype.loadTile=function(We,Ze,Ne){this.getWorkerSource(We,Ze.type,Ze.source).loadTile(Ze,Ne)},vt.prototype.loadDEMTile=function(We,Ze,Ne){this.getDEMWorkerSource(We,Ze.source).loadTile(Ze,Ne)},vt.prototype.reloadTile=function(We,Ze,Ne){this.getWorkerSource(We,Ze.type,Ze.source).reloadTile(Ze,Ne)},vt.prototype.abortTile=function(We,Ze,Ne){this.getWorkerSource(We,Ze.type,Ze.source).abortTile(Ze,Ne)},vt.prototype.removeTile=function(We,Ze,Ne){this.getWorkerSource(We,Ze.type,Ze.source).removeTile(Ze,Ne)},vt.prototype.removeDEMTile=function(We,Ze){this.getDEMWorkerSource(We,Ze.source).removeTile(Ze)},vt.prototype.removeSource=function(We,Ze,Ne){if(this.workerSources[We]&&this.workerSources[We][Ze.type]&&this.workerSources[We][Ze.type][Ze.source]){var Xe=this.workerSources[We][Ze.type][Ze.source];delete this.workerSources[We][Ze.type][Ze.source],Xe.removeSource!==void 0?Xe.removeSource(Ze,Ne):Ne()}},vt.prototype.loadWorkerSource=function(We,Ze,Ne){try{this.self.importScripts(Ze.url),Ne()}catch(Xe){Ne(Xe.toString())}},vt.prototype.syncRTLPluginState=function(We,Ze,Ne){try{r.plugin.setState(Ze);var Xe=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&Xe!=null){this.self.importScripts(Xe);var st=r.plugin.isParsed();Ne(st?void 0:new Error("RTL Text Plugin failed to import scripts from "+Xe),st)}}catch(lt){Ne(lt.toString())}},vt.prototype.getAvailableImages=function(We){var Ze=this.availableImages[We];return Ze||(Ze=[]),Ze},vt.prototype.getLayerIndex=function(We){var Ze=this.layerIndexes[We];return Ze||(Ze=this.layerIndexes[We]=new c),Ze},vt.prototype.getWorkerSource=function(We,Ze,Ne){var Xe=this;if(this.workerSources[We]||(this.workerSources[We]={}),this.workerSources[We][Ze]||(this.workerSources[We][Ze]={}),!this.workerSources[We][Ze][Ne]){var st={send:function(lt,xt,bt){Xe.actor.send(lt,xt,bt,We)}};this.workerSources[We][Ze][Ne]=new this.workerSourceTypes[Ze](st,this.getLayerIndex(We),this.getAvailableImages(We))}return this.workerSources[We][Ze][Ne]},vt.prototype.getDEMWorkerSource=function(We,Ze){return this.demWorkerSources[We]||(this.demWorkerSources[We]={}),this.demWorkerSources[We][Ze]||(this.demWorkerSources[We][Ze]=new l),this.demWorkerSources[We][Ze]},vt.prototype.enforceCacheSizeLimit=function(We,Ze){r.enforceCacheSizeLimit(Ze)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new vt(self)),vt}),T(0,function(r){var w=r.createCommonjsModule(function(j){function Y(H){return!G(H)}function G(H){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ie,ue,_e=new Blob([""],{type:"text/javascript"}),Ie=URL.createObjectURL(_e);try{ue=new Worker(Ie),ie=!0}catch{ie=!1}return ue&&ue.terminate(),URL.revokeObjectURL(Ie),ie}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ie=document.createElement("canvas");ie.width=ie.height=1;var ue=ie.getContext("2d");if(!ue)return!1;var _e=ue.getImageData(0,0,1,1);return _e&&_e.width===ie.width}()?(Q=H&&H.failIfMajorPerformanceCaveat,D[Q]===void 0&&(D[Q]=function(ie){var ue=function(Ie){var ze=document.createElement("canvas"),He=Object.create(Y.webGLContextAttributes);return He.failIfMajorPerformanceCaveat=Ie,ze.probablySupportsContext?ze.probablySupportsContext("webgl",He)||ze.probablySupportsContext("experimental-webgl",He):ze.supportsContext?ze.supportsContext("webgl",He)||ze.supportsContext("experimental-webgl",He):ze.getContext("webgl",He)||ze.getContext("experimental-webgl",He)}(ie);if(!ue)return!1;var _e=ue.createShader(ue.VERTEX_SHADER);return!(!_e||ue.isContextLost())&&(ue.shaderSource(_e,"void main() {}"),ue.compileShader(_e),ue.getShaderParameter(_e,ue.COMPILE_STATUS)===!0)}(Q)),D[Q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Q}j.exports?j.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=G);var D={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(j,Y,G){var D=r.window.document.createElement(j);return Y!==void 0&&(D.className=Y),G&&G.appendChild(D),D},createNS:function(j,Y){return r.window.document.createElementNS(j,Y)}},c=r.window.document&&r.window.document.documentElement.style;function o(j){if(!c)return j[0];for(var Y=0;Y<j.length;Y++)if(j[Y]in c)return j[Y];return j[0]}var t,i=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){c&&i&&(t=c[i],c[i]="none")},b.enableDrag=function(){c&&i&&(c[i]=t)};var n=o(["transform","WebkitTransform"]);b.setTransform=function(j,Y){j.style[n]=Y};var a=!1;try{var s=Object.defineProperty({},"passive",{get:function(){a=!0}});r.window.addEventListener("test",s,s),r.window.removeEventListener("test",s,s)}catch{a=!1}b.addEventListener=function(j,Y,G,D){D===void 0&&(D={}),"passive"in D&&a?j.addEventListener(Y,G,D):j.addEventListener(Y,G,D.capture)},b.removeEventListener=function(j,Y,G,D){D===void 0&&(D={}),"passive"in D&&a?j.removeEventListener(Y,G,D):j.removeEventListener(Y,G,D.capture)};var l=function(j){j.preventDefault(),j.stopPropagation(),r.window.removeEventListener("click",l,!0)};function u(j){var Y=j.userImage;return!!(Y&&Y.render&&Y.render())&&(j.data.replace(new Uint8Array(Y.data.buffer)),!0)}b.suppressClick=function(){r.window.addEventListener("click",l,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(j,Y){var G=j.getBoundingClientRect();return new r.Point(Y.clientX-G.left-j.clientLeft,Y.clientY-G.top-j.clientTop)},b.touchPos=function(j,Y){for(var G=j.getBoundingClientRect(),D=[],H=0;H<Y.length;H++)D.push(new r.Point(Y[H].clientX-G.left-j.clientLeft,Y[H].clientY-G.top-j.clientTop));return D},b.mouseButton=function(j){return r.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},b.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var p=function(j){function Y(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(G){if(this.loaded!==G&&(this.loaded=G,G)){for(var D=0,H=this.requestors;D<H.length;D+=1){var Q=H[D],ie=Q.ids,ue=Q.callback;this._notify(ie,ue)}this.requestors=[]}},Y.prototype.getImage=function(G){return this.images[G]},Y.prototype.addImage=function(G,D){this._validate(G,D)&&(this.images[G]=D)},Y.prototype._validate=function(G,D){var H=!0;return this._validateStretch(D.stretchX,D.data&&D.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchX" value'))),H=!1),this._validateStretch(D.stretchY,D.data&&D.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+G+'" has invalid "stretchY" value'))),H=!1),this._validateContent(D.content,D)||(this.fire(new r.ErrorEvent(new Error('Image "'+G+'" has invalid "content" value'))),H=!1),H},Y.prototype._validateStretch=function(G,D){if(!G)return!0;for(var H=0,Q=0,ie=G;Q<ie.length;Q+=1){var ue=ie[Q];if(ue[0]<H||ue[1]<ue[0]||D<ue[1])return!1;H=ue[1]}return!0},Y.prototype._validateContent=function(G,D){return!(G&&(G.length!==4||G[0]<0||D.data.width<G[0]||G[1]<0||D.data.height<G[1]||G[2]<0||D.data.width<G[2]||G[3]<0||D.data.height<G[3]||G[2]<G[0]||G[3]<G[1]))},Y.prototype.updateImage=function(G,D){var H=this.images[G];D.version=H.version+1,this.images[G]=D,this.updatedImages[G]=!0},Y.prototype.removeImage=function(G){var D=this.images[G];delete this.images[G],delete this.patterns[G],D.userImage&&D.userImage.onRemove&&D.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(G,D){var H=!0;if(!this.isLoaded())for(var Q=0,ie=G;Q<ie.length;Q+=1){var ue=ie[Q];this.images[ue]||(H=!1)}this.isLoaded()||H?this._notify(G,D):this.requestors.push({ids:G,callback:D})},Y.prototype._notify=function(G,D){for(var H={},Q=0,ie=G;Q<ie.length;Q+=1){var ue=ie[Q];this.images[ue]||this.fire(new r.Event("styleimagemissing",{id:ue}));var _e=this.images[ue];_e?H[ue]={data:_e.data.clone(),pixelRatio:_e.pixelRatio,sdf:_e.sdf,version:_e.version,stretchX:_e.stretchX,stretchY:_e.stretchY,content:_e.content,hasRenderCallback:!!(_e.userImage&&_e.userImage.render)}:r.warnOnce('Image "'+ue+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}D(null,H)},Y.prototype.getPixelSize=function(){var G=this.atlasImage;return{width:G.width,height:G.height}},Y.prototype.getPattern=function(G){var D=this.patterns[G],H=this.getImage(G);if(!H)return null;if(D&&D.position.version===H.version)return D.position;if(D)D.position.version=H.version;else{var Q={w:H.data.width+2,h:H.data.height+2,x:0,y:0},ie=new r.ImagePosition(Q,H);this.patterns[G]={bin:Q,position:ie}}return this._updatePatternAtlas(),this.patterns[G].position},Y.prototype.bind=function(G){var D=G.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(G,this.atlasImage,D.RGBA),this.atlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var G=[];for(var D in this.patterns)G.push(this.patterns[D].bin);var H=r.potpack(G),Q=H.w,ie=H.h,ue=this.atlasImage;for(var _e in ue.resize({width:Q||1,height:ie||1}),this.patterns){var Ie=this.patterns[_e].bin,ze=Ie.x+1,He=Ie.y+1,Ye=this.images[_e].data,nt=Ye.width,ft=Ye.height;r.RGBAImage.copy(Ye,ue,{x:0,y:0},{x:ze,y:He},{width:nt,height:ft}),r.RGBAImage.copy(Ye,ue,{x:0,y:ft-1},{x:ze,y:He-1},{width:nt,height:1}),r.RGBAImage.copy(Ye,ue,{x:0,y:0},{x:ze,y:He+ft},{width:nt,height:1}),r.RGBAImage.copy(Ye,ue,{x:nt-1,y:0},{x:ze-1,y:He},{width:1,height:ft}),r.RGBAImage.copy(Ye,ue,{x:0,y:0},{x:ze+nt,y:He},{width:1,height:ft})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(G){for(var D=0,H=G;D<H.length;D+=1){var Q=H[D];if(!this.callbackDispatchedThisFrame[Q]){this.callbackDispatchedThisFrame[Q]=!0;var ie=this.images[Q];u(ie)&&this.updateImage(Q,ie)}}},Y}(r.Evented),f=g,m=g,h=1e20;function g(j,Y,G,D,H,Q){this.fontSize=j||24,this.buffer=Y===void 0?3:Y,this.cutoff=D||.25,this.fontFamily=H||"sans-serif",this.fontWeight=Q||"normal",this.radius=G||8;var ie=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ie,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ie*ie),this.gridInner=new Float64Array(ie*ie),this.f=new Float64Array(ie),this.d=new Float64Array(ie),this.z=new Float64Array(ie+1),this.v=new Int16Array(ie),this.middle=Math.round(ie/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(j,Y,G,D,H,Q,ie){for(var ue=0;ue<Y;ue++){for(var _e=0;_e<G;_e++)D[_e]=j[_e*Y+ue];for(x(D,H,Q,ie,G),_e=0;_e<G;_e++)j[_e*Y+ue]=H[_e]}for(_e=0;_e<G;_e++){for(ue=0;ue<Y;ue++)D[ue]=j[_e*Y+ue];for(x(D,H,Q,ie,Y),ue=0;ue<Y;ue++)j[_e*Y+ue]=Math.sqrt(H[ue])}}function x(j,Y,G,D,H){G[0]=0,D[0]=-h,D[1]=+h;for(var Q=1,ie=0;Q<H;Q++){for(var ue=(j[Q]+Q*Q-(j[G[ie]]+G[ie]*G[ie]))/(2*Q-2*G[ie]);ue<=D[ie];)ie--,ue=(j[Q]+Q*Q-(j[G[ie]]+G[ie]*G[ie]))/(2*Q-2*G[ie]);G[++ie]=Q,D[ie]=ue,D[ie+1]=+h}for(Q=0,ie=0;Q<H;Q++){for(;D[ie+1]<Q;)ie++;Y[Q]=(Q-G[ie])*(Q-G[ie])+j[G[ie]]}}g.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),D=0;D<this.size*this.size;D++){var H=Y.data[4*D+3]/255;this.gridOuter[D]=H===1?0:H===0?h:Math.pow(Math.max(0,.5-H),2),this.gridInner[D]=H===1?h:H===0?0:Math.pow(Math.max(0,H-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),D=0;D<this.size*this.size;D++){var Q=this.gridOuter[D]-this.gridInner[D];G[D]=Math.max(0,Math.min(255,Math.round(255-255*(Q/this.radius+this.cutoff))))}return G},f.default=m;var y=function(j,Y){this.requestManager=j,this.localIdeographFontFamily=Y,this.entries={}};y.prototype.setURL=function(j){this.url=j},y.prototype.getGlyphs=function(j,Y){var G=this,D=[];for(var H in j)for(var Q=0,ie=j[H];Q<ie.length;Q+=1){var ue=ie[Q];D.push({stack:H,id:ue})}r.asyncAll(D,function(_e,Ie){var ze=_e.stack,He=_e.id,Ye=G.entries[ze];Ye||(Ye=G.entries[ze]={glyphs:{},requests:{},ranges:{}});var nt=Ye.glyphs[He];if(nt===void 0){if(nt=G._tinySDF(Ye,ze,He))return Ye.glyphs[He]=nt,void Ie(null,{stack:ze,id:He,glyph:nt});var ft=Math.floor(He/256);if(256*ft>65535)Ie(new Error("glyphs > 65535 not supported"));else if(Ye.ranges[ft])Ie(null,{stack:ze,id:He,glyph:nt});else{var gt=Ye.requests[ft];gt||(gt=Ye.requests[ft]=[],y.loadGlyphRange(ze,ft,G.url,G.requestManager,function(Et,It){if(It){for(var Lt in It)G._doesCharSupportLocalGlyph(+Lt)||(Ye.glyphs[+Lt]=It[+Lt]);Ye.ranges[ft]=!0}for(var Bt=0,Ot=gt;Bt<Ot.length;Bt+=1)(0,Ot[Bt])(Et,It);delete Ye.requests[ft]})),gt.push(function(Et,It){Et?Ie(Et):It&&Ie(null,{stack:ze,id:He,glyph:It[He]||null})})}}else Ie(null,{stack:ze,id:He,glyph:nt})},function(_e,Ie){if(_e)Y(_e);else if(Ie){for(var ze={},He=0,Ye=Ie;He<Ye.length;He+=1){var nt=Ye[He],ft=nt.stack,gt=nt.id,Et=nt.glyph;(ze[ft]||(ze[ft]={}))[gt]=Et&&{id:Et.id,bitmap:Et.bitmap.clone(),metrics:Et.metrics}}Y(null,ze)}})},y.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](j)||r.isChar["Hangul Syllables"](j)||r.isChar.Hiragana(j)||r.isChar.Katakana(j))},y.prototype._tinySDF=function(j,Y,G){var D=this.localIdeographFontFamily;if(D&&this._doesCharSupportLocalGlyph(G)){var H=j.tinySDF;if(!H){var Q="400";/bold/i.test(Y)?Q="900":/medium/i.test(Y)?Q="500":/light/i.test(Y)&&(Q="200"),H=j.tinySDF=new y.TinySDF(24,3,8,.25,D,Q)}return{id:G,bitmap:new r.AlphaImage({width:30,height:30},H.draw(String.fromCharCode(G))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(j,Y,G,D,H){var Q=256*Y,ie=Q+255,ue=D.transformRequest(D.normalizeGlyphsURL(G).replace("{fontstack}",j).replace("{range}",Q+"-"+ie),r.ResourceType.Glyphs);r.getArrayBuffer(ue,function(_e,Ie){if(_e)H(_e);else if(Ie){for(var ze={},He=0,Ye=r.parseGlyphPBF(Ie);He<Ye.length;He+=1){var nt=Ye[He];ze[nt.id]=nt}H(null,ze)}})},y.TinySDF=f;var A=function(){this.specification=r.styleSpec.light.position};A.prototype.possiblyEvaluate=function(j,Y){return r.sphericalToCartesian(j.expression.evaluate(Y))},A.prototype.interpolate=function(j,Y,G){return{x:r.number(j.x,Y.x,G),y:r.number(j.y,Y.y,G),z:r.number(j.z,Y.z,G)}};var d=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new A,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),S="-transition",k=function(j){function Y(G){j.call(this),this._transitionable=new r.Transitionable(d),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(G,D){if(D===void 0&&(D={}),!this._validate(r.validateLight,G,D))for(var H in G){var Q=G[H];r.endsWith(H,S)?this._transitionable.setTransition(H.slice(0,-11),Q):this._transitionable.setValue(H,Q)}},Y.prototype.updateTransitions=function(G){this._transitioning=this._transitionable.transitioned(G,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(G){this.properties=this._transitioning.possiblyEvaluate(G)},Y.prototype._validate=function(G,D,H){return(!H||H.validate!==!1)&&r.emitValidationErrors(this,G.call(r.validateStyle,r.extend({value:D,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},Y}(r.Evented),E=function(j,Y){this.width=j,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(j,Y){var G=j.join(",")+String(Y);return this.dashEntry[G]||(this.dashEntry[G]=this.addDash(j,Y)),this.dashEntry[G]},E.prototype.getDashRanges=function(j,Y,G){var D=[],H=j.length%2==1?-j[j.length-1]*G:0,Q=j[0]*G,ie=!0;D.push({left:H,right:Q,isDash:ie,zeroLength:j[0]===0});for(var ue=j[0],_e=1;_e<j.length;_e++){ie=!ie;var Ie=j[_e];H=ue*G,Q=(ue+=Ie)*G,D.push({left:H,right:Q,isDash:ie,zeroLength:Ie===0})}return D},E.prototype.addRoundDash=function(j,Y,G){for(var D=Y/2,H=-G;H<=G;H++)for(var Q=this.nextRow+G+H,ie=this.width*Q,ue=0,_e=j[ue],Ie=0;Ie<this.width;Ie++){Ie/_e.right>1&&(_e=j[++ue]);var ze=Math.abs(Ie-_e.left),He=Math.abs(Ie-_e.right),Ye=Math.min(ze,He),nt=void 0,ft=H/G*(D+1);if(_e.isDash){var gt=D-Math.abs(ft);nt=Math.sqrt(Ye*Ye+gt*gt)}else nt=D-Math.sqrt(Ye*Ye+ft*ft);this.data[ie+Ie]=Math.max(0,Math.min(255,nt+128))}},E.prototype.addRegularDash=function(j){for(var Y=j.length-1;Y>=0;--Y){var G=j[Y],D=j[Y+1];G.zeroLength?j.splice(Y,1):D&&D.isDash===G.isDash&&(D.left=G.left,j.splice(Y,1))}var H=j[0],Q=j[j.length-1];H.isDash===Q.isDash&&(H.left=Q.left-this.width,Q.right=H.right+this.width);for(var ie=this.width*this.nextRow,ue=0,_e=j[ue],Ie=0;Ie<this.width;Ie++){Ie/_e.right>1&&(_e=j[++ue]);var ze=Math.abs(Ie-_e.left),He=Math.abs(Ie-_e.right),Ye=Math.min(ze,He),nt=_e.isDash?Ye:-Ye;this.data[ie+Ie]=Math.max(0,Math.min(255,nt+128))}},E.prototype.addDash=function(j,Y){var G=Y?7:0,D=2*G+1;if(this.nextRow+D>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var H=0,Q=0;Q<j.length;Q++)H+=j[Q];if(H!==0){var ie=this.width/H,ue=this.getDashRanges(j,this.width,ie);Y?this.addRoundDash(ue,ie,G):this.addRegularDash(ue)}var _e={y:(this.nextRow+G+.5)/this.height,height:2*G/this.height,width:H};return this.nextRow+=D,this.dirty=!0,_e},E.prototype.bind=function(j){var Y=j.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var L=function j(Y,G){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var D=this.workerPool.acquire(this.id),H=0;H<D.length;H++){var Q=D[H],ie=new j.Actor(Q,G,this.id);ie.name="Worker "+H,this.actors.push(ie)}};function O(j,Y,G){var D=function(H,Q){if(H)return G(H);if(Q){var ie=r.pick(r.extend(Q,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(ie.vectorLayers=Q.vector_layers,ie.vectorLayerIds=ie.vectorLayers.map(function(ue){return ue.id})),ie.tiles=Y.canonicalizeTileset(ie,j.url),G(null,ie)}};return j.url?r.getJSON(Y.transformRequest(Y.normalizeSourceURL(j.url),r.ResourceType.Source),D):r.browser.frame(function(){return D(null,j)})}L.prototype.broadcast=function(j,Y,G){G=G||function(){},r.asyncAll(this.actors,function(D,H){D.send(j,Y,H)},G)},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=r.Actor;var P=function(j,Y,G){this.bounds=r.LngLatBounds.convert(this.validateBounds(j)),this.minzoom=Y||0,this.maxzoom=G||24};P.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},P.prototype.contains=function(j){var Y=Math.pow(2,j.z),G=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*Y),D=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*Y),H=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*Y),Q=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*Y);return j.x>=G&&j.x<H&&j.y>=D&&j.y<Q};var F=function(j){function Y(G,D,H,Q){if(j.call(this),this.id=G,this.dispatcher=H,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(D,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},D),this._collectResourceTiming=D.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Q)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(D,H){G._tileJSONRequest=null,G._loaded=!0,D?G.fire(new r.ErrorEvent(D)):H&&(r.extend(G,H),H.bounds&&(G.tileBounds=new P(H.bounds,G.minzoom,G.maxzoom)),r.postTurnstileEvent(H.tiles,G.map._requestManager._customAccessToken),r.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken,G.map._requestManager._customAccessToken),G.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},Y.prototype.onAdd=function(G){this.map=G,this.load()},Y.prototype.setSourceProperty=function(G){this._tileJSONRequest&&this._tileJSONRequest.cancel(),G(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},Y.prototype.setTiles=function(G){var D=this;return this.setSourceProperty(function(){D._options.tiles=G}),this},Y.prototype.setUrl=function(G){var D=this;return this.setSourceProperty(function(){D.url=G,D._options.url=G}),this},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return r.extend({},this._options)},Y.prototype.loadTile=function(G,D){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme)),Q={request:this.map._requestManager.transformRequest(H,r.ResourceType.Tile),uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,tileSize:this.tileSize*G.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ie(ue,_e){return delete G.request,G.aborted?D(null):ue&&ue.status!==404?D(ue):(_e&&_e.resourceTiming&&(G.resourceTiming=_e.resourceTiming),this.map._refreshExpiredTiles&&_e&&G.setExpiryData(_e),G.loadVectorData(_e,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),D(null),void(G.reloadCallback&&(this.loadTile(G,G.reloadCallback),G.reloadCallback=null)))}Q.request.collectResourceTiming=this._collectResourceTiming,G.actor&&G.state!=="expired"?G.state==="loading"?G.reloadCallback=D:G.request=G.actor.send("reloadTile",Q,ie.bind(this)):(G.actor=this.dispatcher.getActor(),G.request=G.actor.send("loadTile",Q,ie.bind(this)))},Y.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.actor&&G.actor.send("abortTile",{uid:G.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(G){G.unloadVectorData(),G.actor&&G.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(r.Evented),U=function(j){function Y(G,D,H,Q){j.call(this),this.id=G,this.dispatcher=H,this.setEventedParent(Q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},D),r.extend(this,r.pick(D,["url","scheme","tileSize"]))}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var G=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(D,H){G._tileJSONRequest=null,G._loaded=!0,D?G.fire(new r.ErrorEvent(D)):H&&(r.extend(G,H),H.bounds&&(G.tileBounds=new P(H.bounds,G.minzoom,G.maxzoom)),r.postTurnstileEvent(H.tiles),r.postMapLoadEvent(H.tiles,G.map._getMapId(),G.map._requestManager._skuToken),G.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),G.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(G){this.map=G,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return r.extend({},this._options)},Y.prototype.hasTile=function(G){return!this.tileBounds||this.tileBounds.contains(G.canonical)},Y.prototype.loadTile=function(G,D){var H=this,Q=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);G.request=r.getImage(this.map._requestManager.transformRequest(Q,r.ResourceType.Tile),function(ie,ue){if(delete G.request,G.aborted)G.state="unloaded",D(null);else if(ie)G.state="errored",D(ie);else if(ue){H.map._refreshExpiredTiles&&G.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var _e=H.map.painter.context,Ie=_e.gl;G.texture=H.map.painter.getTileTexture(ue.width),G.texture?G.texture.update(ue,{useMipmap:!0}):(G.texture=new r.Texture(_e,ue,Ie.RGBA,{useMipmap:!0}),G.texture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE,Ie.LINEAR_MIPMAP_NEAREST),_e.extTextureFilterAnisotropic&&Ie.texParameterf(Ie.TEXTURE_2D,_e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,_e.extTextureFilterAnisotropicMax)),G.state="loaded",r.cacheEntryPossiblyAdded(H.dispatcher),D(null)}})},Y.prototype.abortTile=function(G,D){G.request&&(G.request.cancel(),delete G.request),D()},Y.prototype.unloadTile=function(G,D){G.texture&&this.map.painter.saveTileTexture(G.texture),D()},Y.prototype.hasTransition=function(){return!1},Y}(r.Evented),I=function(j){function Y(G,D,H,Q){j.call(this,G,D,H,Q),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},D),this.encoding=D.encoding||"mapbox"}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(G,D){var H=this.map._requestManager.normalizeTileURL(G.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Q(ie,ue){ie&&(G.state="errored",D(ie)),ue&&(G.dem=ue,G.needsHillshadePrepare=!0,G.state="loaded",D(null))}G.request=r.getImage(this.map._requestManager.transformRequest(H,r.ResourceType.Tile),(function(ie,ue){if(delete G.request,G.aborted)G.state="unloaded",D(null);else if(ie)G.state="errored",D(ie);else if(ue){this.map._refreshExpiredTiles&&G.setExpiryData(ue),delete ue.cacheControl,delete ue.expires;var _e=r.window.ImageBitmap&&ue instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?ue:r.browser.getImageData(ue,1),Ie={uid:G.uid,coord:G.tileID,source:this.id,rawImageData:_e,encoding:this.encoding};G.actor&&G.state!=="expired"||(G.actor=this.dispatcher.getActor(),G.actor.send("loadDEMTile",Ie,Q.bind(this)))}}).bind(this)),G.neighboringTiles=this._getNeighboringTiles(G.tileID)},Y.prototype._getNeighboringTiles=function(G){var D=G.canonical,H=Math.pow(2,D.z),Q=(D.x-1+H)%H,ie=D.x===0?G.wrap-1:G.wrap,ue=(D.x+1+H)%H,_e=D.x+1===H?G.wrap+1:G.wrap,Ie={};return Ie[new r.OverscaledTileID(G.overscaledZ,ie,D.z,Q,D.y).key]={backfilled:!1},Ie[new r.OverscaledTileID(G.overscaledZ,_e,D.z,ue,D.y).key]={backfilled:!1},D.y>0&&(Ie[new r.OverscaledTileID(G.overscaledZ,ie,D.z,Q,D.y-1).key]={backfilled:!1},Ie[new r.OverscaledTileID(G.overscaledZ,G.wrap,D.z,D.x,D.y-1).key]={backfilled:!1},Ie[new r.OverscaledTileID(G.overscaledZ,_e,D.z,ue,D.y-1).key]={backfilled:!1}),D.y+1<H&&(Ie[new r.OverscaledTileID(G.overscaledZ,ie,D.z,Q,D.y+1).key]={backfilled:!1},Ie[new r.OverscaledTileID(G.overscaledZ,G.wrap,D.z,D.x,D.y+1).key]={backfilled:!1},Ie[new r.OverscaledTileID(G.overscaledZ,_e,D.z,ue,D.y+1).key]={backfilled:!1}),Ie},Y.prototype.unloadTile=function(G){G.demTexture&&this.map.painter.saveTileTexture(G.demTexture),G.fbo&&(G.fbo.destroy(),delete G.fbo),G.dem&&delete G.dem,delete G.neighboringTiles,G.state="unloaded",G.actor&&G.actor.send("removeDEMTile",{uid:G.uid,source:this.id})},Y}(U),N=function(j){function Y(G,D,H,Q){j.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=H.getActor(),this.setEventedParent(Q),this._data=D.data,this._options=r.extend({},D),this._collectResourceTiming=D.collectResourceTiming,this._resourceTiming=[],D.maxzoom!==void 0&&(this.maxzoom=D.maxzoom),D.type&&(this.type=D.type),D.attribution&&(this.attribution=D.attribution),this.promoteId=D.promoteId;var ie=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:D.cluster||!1,geojsonVtOptions:{buffer:(D.buffer!==void 0?D.buffer:128)*ie,tolerance:(D.tolerance!==void 0?D.tolerance:.375)*ie,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:D.lineMetrics||!1,generateId:D.generateId||!1},superclusterOptions:{maxZoom:D.clusterMaxZoom!==void 0?Math.min(D.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,D.clusterMinPoints||2),extent:r.EXTENT,radius:(D.clusterRadius||50)*ie,log:!1,generateId:D.generateId||!1},clusterProperties:D.clusterProperties,filter:D.filter},D.workerOptions)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var G=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)G.fire(new r.ErrorEvent(D));else{var H={dataType:"source",sourceDataType:"metadata"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(H.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new r.Event("data",H))}})},Y.prototype.onAdd=function(G){this.map=G,this.load()},Y.prototype.setData=function(G){var D=this;return this._data=G,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(H){if(H)D.fire(new r.ErrorEvent(H));else{var Q={dataType:"source",sourceDataType:"content"};D._collectResourceTiming&&D._resourceTiming&&D._resourceTiming.length>0&&(Q.resourceTiming=D._resourceTiming,D._resourceTiming=[]),D.fire(new r.Event("data",Q))}}),this},Y.prototype.getClusterExpansionZoom=function(G,D){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:G,source:this.id},D),this},Y.prototype.getClusterChildren=function(G,D){return this.actor.send("geojson.getClusterChildren",{clusterId:G,source:this.id},D),this},Y.prototype.getClusterLeaves=function(G,D,H,Q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:G,limit:D,offset:H},Q),this},Y.prototype._updateWorkerData=function(G){var D=this;this._loaded=!1;var H=r.extend({},this.workerOptions),Q=this._data;typeof Q=="string"?(H.request=this.map._requestManager.transformRequest(r.browser.resolveURL(Q),r.ResourceType.Source),H.request.collectResourceTiming=this._collectResourceTiming):H.data=JSON.stringify(Q),this.actor.send(this.type+".loadData",H,function(ie,ue){D._removed||ue&&ue.abandoned||(D._loaded=!0,ue&&ue.resourceTiming&&ue.resourceTiming[D.id]&&(D._resourceTiming=ue.resourceTiming[D.id].slice(0)),D.actor.send(D.type+".coalesce",{source:H.source},null),G(ie))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(G,D){var H=this,Q=G.actor?"reloadTile":"loadTile";G.actor=this.actor;var ie={type:this.type,uid:G.uid,tileID:G.tileID,zoom:G.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};G.request=this.actor.send(Q,ie,function(ue,_e){return delete G.request,G.unloadVectorData(),G.aborted?D(null):ue?D(ue):(G.loadVectorData(_e,H.map.painter,Q==="reloadTile"),D(null))})},Y.prototype.abortTile=function(G){G.request&&(G.request.cancel(),delete G.request),G.aborted=!0},Y.prototype.unloadTile=function(G){G.unloadVectorData(),this.actor.send("removeTile",{uid:G.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(r.Evented),W=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),B=function(j){function Y(G,D,H,Q){j.call(this),this.id=G,this.dispatcher=H,this.coordinates=D.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Q),this.options=D}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(G,D){var H=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(Q,ie){H._loaded=!0,Q?H.fire(new r.ErrorEvent(Q)):ie&&(H.image=ie,G&&(H.coordinates=G),D&&D(),H._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(G){var D=this;return this.image&&G.url?(this.options.url=G.url,this.load(G.coordinates,function(){D.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(G){this.map=G,this.load()},Y.prototype.setCoordinates=function(G){var D=this;this.coordinates=G;var H=G.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(ie){for(var ue=1/0,_e=1/0,Ie=-1/0,ze=-1/0,He=0,Ye=ie;He<Ye.length;He+=1){var nt=Ye[He];ue=Math.min(ue,nt.x),_e=Math.min(_e,nt.y),Ie=Math.max(Ie,nt.x),ze=Math.max(ze,nt.y)}var ft=Ie-ue,gt=ze-_e,Et=Math.max(ft,gt),It=Math.max(0,Math.floor(-Math.log(Et)/Math.LN2)),Lt=Math.pow(2,It);return new r.CanonicalTileID(It,Math.floor((ue+Ie)/2*Lt),Math.floor((_e+ze)/2*Lt))}(H),this.minzoom=this.maxzoom=this.tileID.z;var Q=H.map(function(ie){return D.tileID.getTilePoint(ie)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(Q[0].x,Q[0].y,0,0),this._boundsArray.emplaceBack(Q[1].x,Q[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(Q[3].x,Q[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(Q[2].x,Q[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var G=this.map.painter.context,D=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(G,this.image,D.RGBA),this.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},Y.prototype.loadTile=function(G,D){this.tileID&&this.tileID.equals(G.tileID.canonical)?(this.tiles[String(G.tileID.wrap)]=G,G.buckets={},D(null)):(G.state="errored",D(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(r.Evented),V=function(j){function Y(G,D,H,Q){j.call(this,G,D,H,Q),this.roundZoom=!0,this.type="video",this.options=D}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var G=this;this._loaded=!1;var D=this.options;this.urls=[];for(var H=0,Q=D.urls;H<Q.length;H+=1){var ie=Q[H];this.urls.push(this.map._requestManager.transformRequest(ie,r.ResourceType.Source).url)}r.getVideo(this.urls,function(ue,_e){G._loaded=!0,ue?G.fire(new r.ErrorEvent(ue)):_e&&(G.video=_e,G.video.loop=!0,G.video.addEventListener("playing",function(){G.map.triggerRepaint()}),G.map&&G.video.play(),G._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(G){if(this.video){var D=this.video.seekable;G<D.start(0)||G>D.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+D.start(0)+" and "+D.end(0)+"-second mark."))):this.video.currentTime=G}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(G){this.map||(this.map=G,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var G=this.map.painter.context,D=G.gl;for(var H in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE),D.texSubImage2D(D.TEXTURE_2D,0,0,0,D.RGBA,D.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(G,this.video,D.RGBA),this.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[H];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(B),q=function(j){function Y(G,D,H,Q){j.call(this,G,D,H,Q),D.coordinates?Array.isArray(D.coordinates)&&D.coordinates.length===4&&!D.coordinates.some(function(ie){return!Array.isArray(ie)||ie.length!==2||ie.some(function(ue){return typeof ue!="number"})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+G,null,'missing required property "coordinates"'))),D.animate&&typeof D.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),D.canvas?typeof D.canvas=="string"||D.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=D,this.animate=D.animate===void 0||D.animate}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(G){this.map=G,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var G=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,G=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,G=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var D=this.map.painter.context,H=D.gl;for(var Q in this.boundsBuffer||(this.boundsBuffer=D.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(G||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(D,this.canvas,H.RGBA,{premultiply:!0}),this.tiles){var ie=this.tiles[Q];ie.state!=="loaded"&&(ie.state="loaded",ie.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var G=0,D=[this.canvas.width,this.canvas.height];G<D.length;G+=1){var H=D[G];if(isNaN(H)||H<=0)return!0}return!1},Y}(B),ne={vector:F,raster:U,"raster-dem":I,geojson:N,video:V,image:B,canvas:q};function $(j,Y){var G=r.identity([]);return r.translate(G,G,[1,1,0]),r.scale(G,G,[.5*j.width,.5*j.height,1]),r.multiply(G,G,j.calculatePosMatrix(Y.toUnwrapped()))}function K(j,Y,G,D,H,Q){var ie=function(gt,Et,It){if(gt)for(var Lt=0,Bt=gt;Lt<Bt.length;Lt+=1){var Ot=Et[Bt[Lt]];if(Ot&&Ot.source===It&&Ot.type==="fill-extrusion")return!0}else for(var Jt in Et){var Yt=Et[Jt];if(Yt.source===It&&Yt.type==="fill-extrusion")return!0}return!1}(H&&H.layers,Y,j.id),ue=Q.maxPitchScaleFactor(),_e=j.tilesIn(D,ue,ie);_e.sort(ee);for(var Ie=[],ze=0,He=_e;ze<He.length;ze+=1){var Ye=He[ze];Ie.push({wrappedTileID:Ye.tileID.wrapped().key,queryResults:Ye.tile.queryRenderedFeatures(Y,G,j._state,Ye.queryGeometry,Ye.cameraQueryGeometry,Ye.scale,H,Q,ue,$(j.transform,Ye.tileID))})}var nt=function(gt){for(var Et={},It={},Lt=0,Bt=gt;Lt<Bt.length;Lt+=1){var Ot=Bt[Lt],Jt=Ot.queryResults,Yt=Ot.wrappedTileID,Vt=It[Yt]=It[Yt]||{};for(var dn in Jt)for(var xn=Jt[dn],En=Vt[dn]=Vt[dn]||{},In=Et[dn]=Et[dn]||[],Hn=0,ir=xn;Hn<ir.length;Hn+=1){var dr=ir[Hn];En[dr.featureIndex]||(En[dr.featureIndex]=!0,In.push(dr))}}return Et}(Ie);for(var ft in nt)nt[ft].forEach(function(gt){var Et=gt.feature,It=j.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=It});return nt}function ee(j,Y){var G=j.tileID,D=Y.tileID;return G.overscaledZ-D.overscaledZ||G.canonical.y-D.canonical.y||G.wrap-D.wrap||G.canonical.x-D.canonical.x}var J=function(j,Y){this.max=j,this.onRemove=Y,this.reset()};J.prototype.reset=function(){for(var j in this.data)for(var Y=0,G=this.data[j];Y<G.length;Y+=1){var D=G[Y];D.timeout&&clearTimeout(D.timeout),this.onRemove(D.value)}return this.data={},this.order=[],this},J.prototype.add=function(j,Y,G){var D=this,H=j.wrapped().key;this.data[H]===void 0&&(this.data[H]=[]);var Q={value:Y,timeout:void 0};if(G!==void 0&&(Q.timeout=setTimeout(function(){D.remove(j,Q)},G)),this.data[H].push(Q),this.order.push(H),this.order.length>this.max){var ie=this._getAndRemoveByKey(this.order[0]);ie&&this.onRemove(ie)}return this},J.prototype.has=function(j){return j.wrapped().key in this.data},J.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},J.prototype._getAndRemoveByKey=function(j){var Y=this.data[j].shift();return Y.timeout&&clearTimeout(Y.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),Y.value},J.prototype.getByKey=function(j){var Y=this.data[j];return Y?Y[0].value:null},J.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},J.prototype.remove=function(j,Y){if(!this.has(j))return this;var G=j.wrapped().key,D=Y===void 0?0:this.data[G].indexOf(Y),H=this.data[G][D];return this.data[G].splice(D,1),H.timeout&&clearTimeout(H.timeout),this.data[G].length===0&&delete this.data[G],this.onRemove(H.value),this.order.splice(this.order.indexOf(G),1),this},J.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},J.prototype.filter=function(j){var Y=[];for(var G in this.data)for(var D=0,H=this.data[G];D<H.length;D+=1){var Q=H[D];j(Q.value)||Y.push(Q)}for(var ie=0,ue=Y;ie<ue.length;ie+=1){var _e=ue[ie];this.remove(_e.value.tileID,_e)}};var Z=function(j,Y,G){this.context=j;var D=j.gl;this.buffer=D.createBuffer(),this.dynamicDraw=!!G,this.context.unbindVAO(),j.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};Z.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Z.prototype.updateData=function(j){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},Z.prototype.destroy=function(){var j=this.context.gl;this.buffer&&(j.deleteBuffer(this.buffer),delete this.buffer)};var te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},oe=function(j,Y,G,D){this.length=Y.length,this.attributes=G,this.itemSize=Y.bytesPerElement,this.dynamicDraw=D,this.context=j;var H=j.gl;this.buffer=H.createBuffer(),j.bindVertexBuffer.set(this.buffer),H.bufferData(H.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};oe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},oe.prototype.updateData=function(j){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,j.arrayBuffer)},oe.prototype.enableAttributes=function(j,Y){for(var G=0;G<this.attributes.length;G++){var D=this.attributes[G],H=Y.attributes[D.name];H!==void 0&&j.enableVertexAttribArray(H)}},oe.prototype.setVertexAttribPointers=function(j,Y,G){for(var D=0;D<this.attributes.length;D++){var H=this.attributes[D],Q=Y.attributes[H.name];Q!==void 0&&j.vertexAttribPointer(Q,H.components,j[te[H.type]],!1,this.itemSize,H.offset+this.itemSize*(G||0))}},oe.prototype.destroy=function(){var j=this.context.gl;this.buffer&&(j.deleteBuffer(this.buffer),delete this.buffer)};var se=function(j){this.gl=j.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};se.prototype.get=function(){return this.current},se.prototype.set=function(j){},se.prototype.getDefault=function(){return this.default},se.prototype.setDefault=function(){this.set(this.default)};var ce=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return r.Color.transparent},Y.prototype.set=function(G){var D=this.current;(G.r!==D.r||G.g!==D.g||G.b!==D.b||G.a!==D.a||this.dirty)&&(this.gl.clearColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},Y}(se),ye=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearDepth(G),this.current=G,this.dirty=!1)},Y}(se),me=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.clearStencil(G),this.current=G,this.dirty=!1)},Y}(se),fe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(G){var D=this.current;(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3]||this.dirty)&&(this.gl.colorMask(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},Y}(se),pe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthMask(G),this.current=G,this.dirty=!1)},Y}(se),ge=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.stencilMask(G),this.current=G,this.dirty=!1)},Y}(se),ke=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(G){var D=this.current;(G.func!==D.func||G.ref!==D.ref||G.mask!==D.mask||this.dirty)&&(this.gl.stencilFunc(G.func,G.ref,G.mask),this.current=G,this.dirty=!1)},Y}(se),Ce=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var G=this.gl;return[G.KEEP,G.KEEP,G.KEEP]},Y.prototype.set=function(G){var D=this.current;(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||this.dirty)&&(this.gl.stencilOp(G[0],G[1],G[2]),this.current=G,this.dirty=!1)},Y}(se),de=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;G?D.enable(D.STENCIL_TEST):D.disable(D.STENCIL_TEST),this.current=G,this.dirty=!1}},Y}(se),ae=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(G){var D=this.current;(G[0]!==D[0]||G[1]!==D[1]||this.dirty)&&(this.gl.depthRange(G[0],G[1]),this.current=G,this.dirty=!1)},Y}(se),re=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;G?D.enable(D.DEPTH_TEST):D.disable(D.DEPTH_TEST),this.current=G,this.dirty=!1}},Y}(se),he=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.depthFunc(G),this.current=G,this.dirty=!1)},Y}(se),Se=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;G?D.enable(D.BLEND):D.disable(D.BLEND),this.current=G,this.dirty=!1}},Y}(se),xe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var G=this.gl;return[G.ONE,G.ZERO]},Y.prototype.set=function(G){var D=this.current;(G[0]!==D[0]||G[1]!==D[1]||this.dirty)&&(this.gl.blendFunc(G[0],G[1]),this.current=G,this.dirty=!1)},Y}(se),Te=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return r.Color.transparent},Y.prototype.set=function(G){var D=this.current;(G.r!==D.r||G.g!==D.g||G.b!==D.b||G.a!==D.a||this.dirty)&&(this.gl.blendColor(G.r,G.g,G.b,G.a),this.current=G,this.dirty=!1)},Y}(se),Ae=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.blendEquation(G),this.current=G,this.dirty=!1)},Y}(se),Pe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;G?D.enable(D.CULL_FACE):D.disable(D.CULL_FACE),this.current=G,this.dirty=!1}},Y}(se),De=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.cullFace(G),this.current=G,this.dirty=!1)},Y}(se),ve=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.frontFace(G),this.current=G,this.dirty=!1)},Y}(se),we=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.useProgram(G),this.current=G,this.dirty=!1)},Y}(se),Ee=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(G){(G!==this.current||this.dirty)&&(this.gl.activeTexture(G),this.current=G,this.dirty=!1)},Y}(se),Fe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var G=this.gl;return[0,0,G.drawingBufferWidth,G.drawingBufferHeight]},Y.prototype.set=function(G){var D=this.current;(G[0]!==D[0]||G[1]!==D[1]||G[2]!==D[2]||G[3]!==D[3]||this.dirty)&&(this.gl.viewport(G[0],G[1],G[2],G[3]),this.current=G,this.dirty=!1)},Y}(se),Le=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.bindFramebuffer(D.FRAMEBUFFER,G),this.current=G,this.dirty=!1}},Y}(se),je=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.bindRenderbuffer(D.RENDERBUFFER,G),this.current=G,this.dirty=!1}},Y}(se),Ge=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.bindTexture(D.TEXTURE_2D,G),this.current=G,this.dirty=!1}},Y}(se),Je=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.bindBuffer(D.ARRAY_BUFFER,G),this.current=G,this.dirty=!1}},Y}(se),rt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){var D=this.gl;D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,G),this.current=G,this.dirty=!1},Y}(se),ot=function(j){function Y(G){j.call(this,G),this.vao=G.extVertexArrayObject}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(G){this.vao&&(G!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(G),this.current=G,this.dirty=!1)},Y}(se),yt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.pixelStorei(D.UNPACK_ALIGNMENT,G),this.current=G,this.dirty=!1}},Y}(se),_t=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),this.current=G,this.dirty=!1}},Y}(se),mt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(G){if(G!==this.current||this.dirty){var D=this.gl;D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,G),this.current=G,this.dirty=!1}},Y}(se),tt=function(j){function Y(G,D){j.call(this,G),this.context=G,this.parent=D}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(se),Qe=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var D=this.gl;D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,G,0),this.current=G,this.dirty=!1}},Y}(tt),Dt=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(G){if(G!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var D=this.gl;D.framebufferRenderbuffer(D.FRAMEBUFFER,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,G),this.current=G,this.dirty=!1}},Y}(tt),zt=function(j,Y,G,D){this.context=j,this.width=Y,this.height=G;var H=j.gl,Q=this.framebuffer=H.createFramebuffer();this.colorAttachment=new Qe(j,Q),D&&(this.depthAttachment=new Dt(j,Q))};zt.prototype.destroy=function(){var j=this.context.gl,Y=this.colorAttachment.get();if(Y&&j.deleteTexture(Y),this.depthAttachment){var G=this.depthAttachment.get();G&&j.deleteRenderbuffer(G)}j.deleteFramebuffer(this.framebuffer)};var pt=function(j,Y,G){this.func=j,this.mask=Y,this.range=G};pt.ReadOnly=!1,pt.ReadWrite=!0,pt.disabled=new pt(519,pt.ReadOnly,[0,1]);var vt=7680,We=function(j,Y,G,D,H,Q){this.test=j,this.ref=Y,this.mask=G,this.fail=D,this.depthFail=H,this.pass=Q};We.disabled=new We({func:519,mask:0},0,0,vt,vt,vt);var Ze=function(j,Y,G){this.blendFunction=j,this.blendColor=Y,this.mask=G};Ze.Replace=[1,0],Ze.disabled=new Ze(Ze.Replace,r.Color.transparent,[!1,!1,!1,!1]),Ze.unblended=new Ze(Ze.Replace,r.Color.transparent,[!0,!0,!0,!0]),Ze.alphaBlended=new Ze([1,771],r.Color.transparent,[!0,!0,!0,!0]);var Ne=function(j,Y,G){this.enable=j,this.mode=Y,this.frontFace=G};Ne.disabled=new Ne(!1,1029,2305),Ne.backCCW=new Ne(!0,1029,2305);var Xe=function(j){this.gl=j,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ce(this),this.clearDepth=new ye(this),this.clearStencil=new me(this),this.colorMask=new fe(this),this.depthMask=new pe(this),this.stencilMask=new ge(this),this.stencilFunc=new ke(this),this.stencilOp=new Ce(this),this.stencilTest=new de(this),this.depthRange=new ae(this),this.depthTest=new re(this),this.depthFunc=new he(this),this.blend=new Se(this),this.blendFunc=new xe(this),this.blendColor=new Te(this),this.blendEquation=new Ae(this),this.cullFace=new Pe(this),this.cullFaceSide=new De(this),this.frontFace=new ve(this),this.program=new we(this),this.activeTexture=new Ee(this),this.viewport=new Fe(this),this.bindFramebuffer=new Le(this),this.bindRenderbuffer=new je(this),this.bindTexture=new Ge(this),this.bindVertexBuffer=new Je(this),this.bindElementBuffer=new rt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ot(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=j.getExtension("EXT_texture_filter_anisotropic")||j.getExtension("MOZ_EXT_texture_filter_anisotropic")||j.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=j.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=j.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(j.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=j.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=j.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=j.getParameter(j.MAX_TEXTURE_SIZE)};Xe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Xe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Xe.prototype.createIndexBuffer=function(j,Y){return new Z(this,j,Y)},Xe.prototype.createVertexBuffer=function(j,Y,G){return new oe(this,j,Y,G)},Xe.prototype.createRenderbuffer=function(j,Y,G){var D=this.gl,H=D.createRenderbuffer();return this.bindRenderbuffer.set(H),D.renderbufferStorage(D.RENDERBUFFER,j,Y,G),this.bindRenderbuffer.set(null),H},Xe.prototype.createFramebuffer=function(j,Y,G){return new zt(this,j,Y,G)},Xe.prototype.clear=function(j){var Y=j.color,G=j.depth,D=this.gl,H=0;Y&&(H|=D.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),G!==void 0&&(H|=D.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(G),this.depthMask.set(!0)),D.clear(H)},Xe.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},Xe.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},Xe.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},Xe.prototype.setColorMode=function(j){r.deepEqual(j.blendFunction,Ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},Xe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(j){function Y(G,D,H){var Q=this;j.call(this),this.id=G,this.dispatcher=H,this.on("data",function(ie){ie.dataType==="source"&&ie.sourceDataType==="metadata"&&(Q._sourceLoaded=!0),Q._sourceLoaded&&!Q._paused&&ie.dataType==="source"&&ie.sourceDataType==="content"&&(Q.reload(),Q.transform&&Q.update(Q.transform))}),this.on("error",function(){Q._sourceErrored=!0}),this._source=function(ie,ue,_e,Ie){var ze=new ne[ue.type](ie,ue,_e,Ie);if(ze.id!==ie)throw new Error("Expected Source id to be "+ie+" instead of "+ze.id);return r.bindAll(["load","abort","unload","serialize","prepare"],ze),ze}(G,D,H,this),this._tiles={},this._cache=new J(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(G){this.map=G,this._maxTileCacheSize=G?G._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(G)},Y.prototype.onRemove=function(G){this._source&&this._source.onRemove&&this._source.onRemove(G)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var G in this._tiles){var D=this._tiles[G];if(D.state!=="loaded"&&D.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var G=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,G&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(G,D){return this._source.loadTile(G,D)},Y.prototype._unloadTile=function(G){if(this._source.unloadTile)return this._source.unloadTile(G,function(){})},Y.prototype._abortTile=function(G){if(this._source.abortTile)return this._source.abortTile(G,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(G){for(var D in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var H=this._tiles[D];H.upload(G),H.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return r.values(this._tiles).map(function(G){return G.tileID}).sort(lt).map(function(G){return G.key})},Y.prototype.getRenderableIds=function(G){var D=this,H=[];for(var Q in this._tiles)this._isIdRenderable(Q,G)&&H.push(this._tiles[Q]);return G?H.sort(function(ie,ue){var _e=ie.tileID,Ie=ue.tileID,ze=new r.Point(_e.canonical.x,_e.canonical.y)._rotate(D.transform.angle),He=new r.Point(Ie.canonical.x,Ie.canonical.y)._rotate(D.transform.angle);return _e.overscaledZ-Ie.overscaledZ||He.y-ze.y||He.x-ze.x}).map(function(ie){return ie.tileID.key}):H.map(function(ie){return ie.tileID}).sort(lt).map(function(ie){return ie.key})},Y.prototype.hasRenderableParent=function(G){var D=this.findLoadedParent(G,0);return!!D&&this._isIdRenderable(D.tileID.key)},Y.prototype._isIdRenderable=function(G,D){return this._tiles[G]&&this._tiles[G].hasData()&&!this._coveredTiles[G]&&(D||!this._tiles[G].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var G in this._cache.reset(),this._tiles)this._tiles[G].state!=="errored"&&this._reloadTile(G,"reloading")},Y.prototype._reloadTile=function(G,D){var H=this._tiles[G];H&&(H.state!=="loading"&&(H.state=D),this._loadTile(H,this._tileLoaded.bind(this,H,G,D)))},Y.prototype._tileLoaded=function(G,D,H,Q){if(Q)return G.state="errored",void(Q.status!==404?this._source.fire(new r.ErrorEvent(Q,{tile:G})):this.update(this.transform));G.timeAdded=r.browser.now(),H==="expired"&&(G.refreshedUponExpiration=!0),this._setTileReloadTimer(D,G),this.getSource().type==="raster-dem"&&G.dem&&this._backfillDEM(G),this._state.initializeTileState(G,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:G,coord:G.tileID}))},Y.prototype._backfillDEM=function(G){for(var D=this.getRenderableIds(),H=0;H<D.length;H++){var Q=D[H];if(G.neighboringTiles&&G.neighboringTiles[Q]){var ie=this.getTileByID(Q);ue(G,ie),ue(ie,G)}}function ue(_e,Ie){_e.needsHillshadePrepare=!0;var ze=Ie.tileID.canonical.x-_e.tileID.canonical.x,He=Ie.tileID.canonical.y-_e.tileID.canonical.y,Ye=Math.pow(2,_e.tileID.canonical.z),nt=Ie.tileID.key;ze===0&&He===0||Math.abs(He)>1||(Math.abs(ze)>1&&(Math.abs(ze+Ye)===1?ze+=Ye:Math.abs(ze-Ye)===1&&(ze-=Ye)),Ie.dem&&_e.dem&&(_e.dem.backfillBorder(Ie.dem,ze,He),_e.neighboringTiles&&_e.neighboringTiles[nt]&&(_e.neighboringTiles[nt].backfilled=!0)))}},Y.prototype.getTile=function(G){return this.getTileByID(G.key)},Y.prototype.getTileByID=function(G){return this._tiles[G]},Y.prototype._retainLoadedChildren=function(G,D,H,Q){for(var ie in this._tiles){var ue=this._tiles[ie];if(!(Q[ie]||!ue.hasData()||ue.tileID.overscaledZ<=D||ue.tileID.overscaledZ>H)){for(var _e=ue.tileID;ue&&ue.tileID.overscaledZ>D+1;){var Ie=ue.tileID.scaledTo(ue.tileID.overscaledZ-1);(ue=this._tiles[Ie.key])&&ue.hasData()&&(_e=Ie)}for(var ze=_e;ze.overscaledZ>D;)if(G[(ze=ze.scaledTo(ze.overscaledZ-1)).key]){Q[_e.key]=_e;break}}}},Y.prototype.findLoadedParent=function(G,D){if(G.key in this._loadedParentTiles){var H=this._loadedParentTiles[G.key];return H&&H.tileID.overscaledZ>=D?H:null}for(var Q=G.overscaledZ-1;Q>=D;Q--){var ie=G.scaledTo(Q),ue=this._getLoadedTile(ie);if(ue)return ue}},Y.prototype._getLoadedTile=function(G){var D=this._tiles[G.key];return D&&D.hasData()?D:this._cache.getByKey(G.wrapped().key)},Y.prototype.updateCacheSize=function(G){var D=(Math.ceil(G.width/this._source.tileSize)+1)*(Math.ceil(G.height/this._source.tileSize)+1),H=Math.floor(5*D),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,H):H;this._cache.setMaxSize(Q)},Y.prototype.handleWrapJump=function(G){var D=(G-(this._prevLng===void 0?G:this._prevLng))/360,H=Math.round(D);if(this._prevLng=G,H){var Q={};for(var ie in this._tiles){var ue=this._tiles[ie];ue.tileID=ue.tileID.unwrapTo(ue.tileID.wrap+H),Q[ue.tileID.key]=ue}for(var _e in this._tiles=Q,this._timers)clearTimeout(this._timers[_e]),delete this._timers[_e];for(var Ie in this._tiles){var ze=this._tiles[Ie];this._setTileReloadTimer(Ie,ze)}}},Y.prototype.update=function(G){var D=this;if(this.transform=G,this._sourceLoaded&&!this._paused){var H;this.updateCacheSize(G),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?H=G.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vt){return new r.OverscaledTileID(Vt.canonical.z,Vt.wrap,Vt.canonical.z,Vt.canonical.x,Vt.canonical.y)}):(H=G.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(H=H.filter(function(Vt){return D._source.hasTile(Vt)}))):H=[];var Q=G.coveringZoomLevel(this._source),ie=Math.max(Q-Y.maxOverzooming,this._source.minzoom),ue=Math.max(Q+Y.maxUnderzooming,this._source.minzoom),_e=this._updateRetainedTiles(H,Q);if(xt(this._source.type)){for(var Ie={},ze={},He=0,Ye=Object.keys(_e);He<Ye.length;He+=1){var nt=Ye[He],ft=_e[nt],gt=this._tiles[nt];if(gt&&!(gt.fadeEndTime&&gt.fadeEndTime<=r.browser.now())){var Et=this.findLoadedParent(ft,ie);Et&&(this._addTile(Et.tileID),Ie[Et.tileID.key]=Et.tileID),ze[nt]=ft}}for(var It in this._retainLoadedChildren(ze,Q,ue,_e),Ie)_e[It]||(this._coveredTiles[It]=!0,_e[It]=Ie[It])}for(var Lt in _e)this._tiles[Lt].clearFadeHold();for(var Bt=0,Ot=r.keysDifference(this._tiles,_e);Bt<Ot.length;Bt+=1){var Jt=Ot[Bt],Yt=this._tiles[Jt];Yt.hasSymbolBuckets&&!Yt.holdingForFade()?Yt.setHoldDuration(this.map._fadeDuration):Yt.hasSymbolBuckets&&!Yt.symbolFadeFinished()||this._removeTile(Jt)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var G in this._tiles)this._tiles[G].holdingForFade()&&this._removeTile(G)},Y.prototype._updateRetainedTiles=function(G,D){for(var H={},Q={},ie=Math.max(D-Y.maxOverzooming,this._source.minzoom),ue=Math.max(D+Y.maxUnderzooming,this._source.minzoom),_e={},Ie=0,ze=G;Ie<ze.length;Ie+=1){var He=ze[Ie],Ye=this._addTile(He);H[He.key]=He,Ye.hasData()||D<this._source.maxzoom&&(_e[He.key]=He)}this._retainLoadedChildren(_e,D,ue,H);for(var nt=0,ft=G;nt<ft.length;nt+=1){var gt=ft[nt],Et=this._tiles[gt.key];if(!Et.hasData()){if(D+1>this._source.maxzoom){var It=gt.children(this._source.maxzoom)[0],Lt=this.getTile(It);if(Lt&&Lt.hasData()){H[It.key]=It;continue}}else{var Bt=gt.children(this._source.maxzoom);if(H[Bt[0].key]&&H[Bt[1].key]&&H[Bt[2].key]&&H[Bt[3].key])continue}for(var Ot=Et.wasRequested(),Jt=gt.overscaledZ-1;Jt>=ie;--Jt){var Yt=gt.scaledTo(Jt);if(Q[Yt.key]||(Q[Yt.key]=!0,!(Et=this.getTile(Yt))&&Ot&&(Et=this._addTile(Yt)),Et&&(H[Yt.key]=Yt,Ot=Et.wasRequested(),Et.hasData())))break}}}return H},Y.prototype._updateLoadedParentTileCache=function(){for(var G in this._loadedParentTiles={},this._tiles){for(var D=[],H=void 0,Q=this._tiles[G].tileID;Q.overscaledZ>0;){if(Q.key in this._loadedParentTiles){H=this._loadedParentTiles[Q.key];break}D.push(Q.key);var ie=Q.scaledTo(Q.overscaledZ-1);if(H=this._getLoadedTile(ie))break;Q=ie}for(var ue=0,_e=D;ue<_e.length;ue+=1){var Ie=_e[ue];this._loadedParentTiles[Ie]=H}}},Y.prototype._addTile=function(G){var D=this._tiles[G.key];if(D)return D;(D=this._cache.getAndRemove(G))&&(this._setTileReloadTimer(G.key,D),D.tileID=G,this._state.initializeTileState(D,this.map?this.map.painter:null),this._cacheTimers[G.key]&&(clearTimeout(this._cacheTimers[G.key]),delete this._cacheTimers[G.key],this._setTileReloadTimer(G.key,D)));var H=!!D;return H||(D=new r.Tile(G,this._source.tileSize*G.overscaleFactor()),this._loadTile(D,this._tileLoaded.bind(this,D,G.key,D.state))),D?(D.uses++,this._tiles[G.key]=D,H||this._source.fire(new r.Event("dataloading",{tile:D,coord:D.tileID,dataType:"source"})),D):null},Y.prototype._setTileReloadTimer=function(G,D){var H=this;G in this._timers&&(clearTimeout(this._timers[G]),delete this._timers[G]);var Q=D.getExpiryTimeout();Q&&(this._timers[G]=setTimeout(function(){H._reloadTile(G,"expired"),delete H._timers[G]},Q))},Y.prototype._removeTile=function(G){var D=this._tiles[G];D&&(D.uses--,delete this._tiles[G],this._timers[G]&&(clearTimeout(this._timers[G]),delete this._timers[G]),D.uses>0||(D.hasData()&&D.state!=="reloading"?this._cache.add(D.tileID,D,D.getExpiryTimeout()):(D.aborted=!0,this._abortTile(D),this._unloadTile(D))))},Y.prototype.clearTiles=function(){for(var G in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(G);this._cache.reset()},Y.prototype.tilesIn=function(G,D,H){var Q=this,ie=[],ue=this.transform;if(!ue)return ie;for(var _e=H?ue.getCameraQueryGeometry(G):G,Ie=G.map(function(Jt){return ue.pointCoordinate(Jt)}),ze=_e.map(function(Jt){return ue.pointCoordinate(Jt)}),He=this.getIds(),Ye=1/0,nt=1/0,ft=-1/0,gt=-1/0,Et=0,It=ze;Et<It.length;Et+=1){var Lt=It[Et];Ye=Math.min(Ye,Lt.x),nt=Math.min(nt,Lt.y),ft=Math.max(ft,Lt.x),gt=Math.max(gt,Lt.y)}for(var Bt=function(Jt){var Yt=Q._tiles[He[Jt]];if(!Yt.holdingForFade()){var Vt=Yt.tileID,dn=Math.pow(2,ue.zoom-Yt.tileID.overscaledZ),xn=D*Yt.queryPadding*r.EXTENT/Yt.tileSize/dn,En=[Vt.getTilePoint(new r.MercatorCoordinate(Ye,nt)),Vt.getTilePoint(new r.MercatorCoordinate(ft,gt))];if(En[0].x-xn<r.EXTENT&&En[0].y-xn<r.EXTENT&&En[1].x+xn>=0&&En[1].y+xn>=0){var In=Ie.map(function(ir){return Vt.getTilePoint(ir)}),Hn=ze.map(function(ir){return Vt.getTilePoint(ir)});ie.push({tile:Yt,tileID:Vt,queryGeometry:In,cameraQueryGeometry:Hn,scale:dn})}}},Ot=0;Ot<He.length;Ot++)Bt(Ot);return ie},Y.prototype.getVisibleCoordinates=function(G){for(var D=this,H=this.getRenderableIds(G).map(function(_e){return D._tiles[_e].tileID}),Q=0,ie=H;Q<ie.length;Q+=1){var ue=ie[Q];ue.posMatrix=this.transform.calculatePosMatrix(ue.toUnwrapped())}return H},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(xt(this._source.type))for(var G in this._tiles){var D=this._tiles[G];if(D.fadeEndTime!==void 0&&D.fadeEndTime>=r.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(G,D,H){G=G||"_geojsonTileLayer",this._state.updateState(G,D,H)},Y.prototype.removeFeatureState=function(G,D,H){G=G||"_geojsonTileLayer",this._state.removeFeatureState(G,D,H)},Y.prototype.getFeatureState=function(G,D){return G=G||"_geojsonTileLayer",this._state.getState(G,D)},Y.prototype.setDependencies=function(G,D,H){var Q=this._tiles[G];Q&&Q.setDependencies(D,H)},Y.prototype.reloadTilesForDependencies=function(G,D){for(var H in this._tiles)this._tiles[H].hasDependency(G,D)&&this._reloadTile(H,"reloading");this._cache.filter(function(Q){return!Q.hasDependency(G,D)})},Y}(r.Evented);function lt(j,Y){var G=Math.abs(2*j.wrap)-+(j.wrap<0),D=Math.abs(2*Y.wrap)-+(Y.wrap<0);return j.overscaledZ-Y.overscaledZ||D-G||Y.canonical.y-j.canonical.y||Y.canonical.x-j.canonical.x}function xt(j){return j==="raster"||j==="image"||j==="video"}function bt(){return new r.window.Worker(ut.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var Ve="mapboxgl_preloaded_worker_pool",Be=function(){this.active={}};Be.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<Be.workerCount;)this.workers.push(new bt);return this.active[j]=!0,this.workers.slice()},Be.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},Be.prototype.isPreloaded=function(){return!!this.active[Ve]},Be.prototype.numActive=function(){return Object.keys(this.active).length};var at,ht=Math.floor(r.browser.hardwareConcurrency/2);function dt(){return at||(at=new Be),at}function it(j,Y){var G={};for(var D in j)D!=="ref"&&(G[D]=j[D]);return r.refProperties.forEach(function(H){H in Y&&(G[H]=Y[H])}),G}function kt(j){j=j.slice();for(var Y=Object.create(null),G=0;G<j.length;G++)Y[j[G].id]=j[G];for(var D=0;D<j.length;D++)"ref"in j[D]&&(j[D]=it(j[D],Y[j[D].ref]));return j}Be.workerCount=Math.max(Math.min(ht,6),1);var Tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function St(j,Y,G){G.push({command:Tt.addSource,args:[j,Y[j]]})}function wt(j,Y,G){Y.push({command:Tt.removeSource,args:[j]}),G[j]=!0}function At(j,Y,G,D){wt(j,G,D),St(j,Y,G)}function Ft(j,Y,G){var D;for(D in j[G])if(j[G].hasOwnProperty(D)&&D!=="data"&&!r.deepEqual(j[G][D],Y[G][D]))return!1;for(D in Y[G])if(Y[G].hasOwnProperty(D)&&D!=="data"&&!r.deepEqual(j[G][D],Y[G][D]))return!1;return!0}function jt(j,Y,G,D,H,Q){var ie;for(ie in Y=Y||{},j=j||{})j.hasOwnProperty(ie)&&(r.deepEqual(j[ie],Y[ie])||G.push({command:Q,args:[D,ie,Y[ie],H]}));for(ie in Y)Y.hasOwnProperty(ie)&&!j.hasOwnProperty(ie)&&(r.deepEqual(j[ie],Y[ie])||G.push({command:Q,args:[D,ie,Y[ie],H]}))}function rn(j){return j.id}function nn(j,Y){return j[Y.id]=Y,j}function on(j,Y){if(!j)return[{command:Tt.setStyle,args:[Y]}];var G=[];try{if(!r.deepEqual(j.version,Y.version))return[{command:Tt.setStyle,args:[Y]}];r.deepEqual(j.center,Y.center)||G.push({command:Tt.setCenter,args:[Y.center]}),r.deepEqual(j.zoom,Y.zoom)||G.push({command:Tt.setZoom,args:[Y.zoom]}),r.deepEqual(j.bearing,Y.bearing)||G.push({command:Tt.setBearing,args:[Y.bearing]}),r.deepEqual(j.pitch,Y.pitch)||G.push({command:Tt.setPitch,args:[Y.pitch]}),r.deepEqual(j.sprite,Y.sprite)||G.push({command:Tt.setSprite,args:[Y.sprite]}),r.deepEqual(j.glyphs,Y.glyphs)||G.push({command:Tt.setGlyphs,args:[Y.glyphs]}),r.deepEqual(j.transition,Y.transition)||G.push({command:Tt.setTransition,args:[Y.transition]}),r.deepEqual(j.light,Y.light)||G.push({command:Tt.setLight,args:[Y.light]});var D={},H=[];(function(ie,ue,_e,Ie){var ze;for(ze in ue=ue||{},ie=ie||{})ie.hasOwnProperty(ze)&&(ue.hasOwnProperty(ze)||wt(ze,_e,Ie));for(ze in ue)ue.hasOwnProperty(ze)&&(ie.hasOwnProperty(ze)?r.deepEqual(ie[ze],ue[ze])||(ie[ze].type==="geojson"&&ue[ze].type==="geojson"&&Ft(ie,ue,ze)?_e.push({command:Tt.setGeoJSONSourceData,args:[ze,ue[ze].data]}):At(ze,ue,_e,Ie)):St(ze,ue,_e))})(j.sources,Y.sources,H,D);var Q=[];j.layers&&j.layers.forEach(function(ie){D[ie.source]?G.push({command:Tt.removeLayer,args:[ie.id]}):Q.push(ie)}),G=G.concat(H),function(ie,ue,_e){ue=ue||[];var Ie,ze,He,Ye,nt,ft,gt,Et=(ie=ie||[]).map(rn),It=ue.map(rn),Lt=ie.reduce(nn,{}),Bt=ue.reduce(nn,{}),Ot=Et.slice(),Jt=Object.create(null);for(Ie=0,ze=0;Ie<Et.length;Ie++)He=Et[Ie],Bt.hasOwnProperty(He)?ze++:(_e.push({command:Tt.removeLayer,args:[He]}),Ot.splice(Ot.indexOf(He,ze),1));for(Ie=0,ze=0;Ie<It.length;Ie++)He=It[It.length-1-Ie],Ot[Ot.length-1-Ie]!==He&&(Lt.hasOwnProperty(He)?(_e.push({command:Tt.removeLayer,args:[He]}),Ot.splice(Ot.lastIndexOf(He,Ot.length-ze),1)):ze++,ft=Ot[Ot.length-Ie],_e.push({command:Tt.addLayer,args:[Bt[He],ft]}),Ot.splice(Ot.length-Ie,0,He),Jt[He]=!0);for(Ie=0;Ie<It.length;Ie++)if(Ye=Lt[He=It[Ie]],nt=Bt[He],!Jt[He]&&!r.deepEqual(Ye,nt))if(r.deepEqual(Ye.source,nt.source)&&r.deepEqual(Ye["source-layer"],nt["source-layer"])&&r.deepEqual(Ye.type,nt.type)){for(gt in jt(Ye.layout,nt.layout,_e,He,null,Tt.setLayoutProperty),jt(Ye.paint,nt.paint,_e,He,null,Tt.setPaintProperty),r.deepEqual(Ye.filter,nt.filter)||_e.push({command:Tt.setFilter,args:[He,nt.filter]}),r.deepEqual(Ye.minzoom,nt.minzoom)&&r.deepEqual(Ye.maxzoom,nt.maxzoom)||_e.push({command:Tt.setLayerZoomRange,args:[He,nt.minzoom,nt.maxzoom]}),Ye)Ye.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?jt(Ye[gt],nt[gt],_e,He,gt.slice(6),Tt.setPaintProperty):r.deepEqual(Ye[gt],nt[gt])||_e.push({command:Tt.setLayerProperty,args:[He,gt,nt[gt]]}));for(gt in nt)nt.hasOwnProperty(gt)&&!Ye.hasOwnProperty(gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?jt(Ye[gt],nt[gt],_e,He,gt.slice(6),Tt.setPaintProperty):r.deepEqual(Ye[gt],nt[gt])||_e.push({command:Tt.setLayerProperty,args:[He,gt,nt[gt]]}))}else _e.push({command:Tt.removeLayer,args:[He]}),ft=Ot[Ot.lastIndexOf(He)+1],_e.push({command:Tt.addLayer,args:[nt,ft]})}(Q,Y.layers,G)}catch(ie){console.warn("Unable to compute style diff:",ie),G=[{command:Tt.setStyle,args:[Y]}]}return G}var Ht=function(j,Y){this.reset(j,Y)};Ht.prototype.reset=function(j,Y){this.points=j||[],this._distances=[0];for(var G=1;G<this.points.length;G++)this._distances[G]=this._distances[G-1]+this.points[G].dist(this.points[G-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ht.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=r.clamp(j,0,1);for(var Y=1,G=this._distances[Y],D=j*this.paddedLength+this.padding;G<D&&Y<this._distances.length;)G=this._distances[++Y];var H=Y-1,Q=this._distances[H],ie=G-Q,ue=ie>0?(D-Q)/ie:0;return this.points[H].mult(1-ue).add(this.points[Y].mult(ue))};var $t=function(j,Y,G){var D=this.boxCells=[],H=this.circleCells=[];this.xCellCount=Math.ceil(j/G),this.yCellCount=Math.ceil(Y/G);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)D.push([]),H.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=j,this.height=Y,this.xScale=this.xCellCount/j,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function bn(j,Y,G,D,H){var Q=r.create();return Y?(r.scale(Q,Q,[1/H,1/H,1]),G||r.rotateZ(Q,Q,D.angle)):r.multiply(Q,D.labelPlaneMatrix,j),Q}function ln(j,Y,G,D,H){if(Y){var Q=r.clone(j);return r.scale(Q,Q,[H,H,1]),G||r.rotateZ(Q,Q,-D.angle),Q}return D.glCoordMatrix}function Kt(j,Y){var G=[j.x,j.y,0,1];cr(G,G,Y);var D=G[3];return{point:new r.Point(G[0]/D,G[1]/D),signedDistanceFromCamera:D}}function fn(j,Y){return .5+j/Y*.5}function en(j,Y){var G=j[0]/j[3],D=j[1]/j[3];return G>=-Y[0]&&G<=Y[0]&&D>=-Y[1]&&D<=Y[1]}function un(j,Y,G,D,H,Q,ie,ue){var _e=D?j.textSizeData:j.iconSizeData,Ie=r.evaluateSizeForZoom(_e,G.transform.zoom),ze=[256/G.width*2+1,256/G.height*2+1],He=D?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;He.clear();for(var Ye=j.lineVertexArray,nt=D?j.text.placedSymbolArray:j.icon.placedSymbolArray,ft=G.transform.width/G.transform.height,gt=!1,Et=0;Et<nt.length;Et++){var It=nt.get(Et);if(It.hidden||It.writingMode===r.WritingMode.vertical&&!gt)Xn(It.numGlyphs,He);else{gt=!1;var Lt=[It.anchorX,It.anchorY,0,1];if(r.transformMat4(Lt,Lt,Y),en(Lt,ze)){var Bt=Lt[3],Ot=fn(G.transform.cameraToCenterDistance,Bt),Jt=r.evaluateSizeForFeature(_e,Ie,It),Yt=ie?Jt/Ot:Jt*Ot,Vt=new r.Point(It.anchorX,It.anchorY),dn=Kt(Vt,H).point,xn={},En=On(It,Yt,!1,ue,Y,H,Q,j.glyphOffsetArray,Ye,He,dn,Vt,xn,ft);gt=En.useVertical,(En.notEnoughRoom||gt||En.needsFlipping&&On(It,Yt,!0,ue,Y,H,Q,j.glyphOffsetArray,Ye,He,dn,Vt,xn,ft).notEnoughRoom)&&Xn(It.numGlyphs,He)}else Xn(It.numGlyphs,He)}}D?j.text.dynamicLayoutVertexBuffer.updateData(He):j.icon.dynamicLayoutVertexBuffer.updateData(He)}function An(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze){var He=ue.glyphStartIndex+ue.numGlyphs,Ye=ue.lineStartIndex,nt=ue.lineStartIndex+ue.lineLength,ft=Y.getoffsetX(ue.glyphStartIndex),gt=Y.getoffsetX(He-1),Et=Cn(j*ft,G,D,H,Q,ie,ue.segment,Ye,nt,_e,Ie,ze);if(!Et)return null;var It=Cn(j*gt,G,D,H,Q,ie,ue.segment,Ye,nt,_e,Ie,ze);return It?{first:Et,last:It}:null}function wn(j,Y,G,D){return j===r.WritingMode.horizontal&&Math.abs(G.y-Y.y)>Math.abs(G.x-Y.x)*D?{useVertical:!0}:(j===r.WritingMode.vertical?Y.y<G.y:Y.x>G.x)?{needsFlipping:!0}:null}function On(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He,Ye,nt){var ft,gt=Y/24,Et=j.lineOffsetX*gt,It=j.lineOffsetY*gt;if(j.numGlyphs>1){var Lt=j.glyphStartIndex+j.numGlyphs,Bt=j.lineStartIndex,Ot=j.lineStartIndex+j.lineLength,Jt=An(gt,ue,Et,It,G,ze,He,j,_e,Q,Ye);if(!Jt)return{notEnoughRoom:!0};var Yt=Kt(Jt.first.point,ie).point,Vt=Kt(Jt.last.point,ie).point;if(D&&!G){var dn=wn(j.writingMode,Yt,Vt,nt);if(dn)return dn}ft=[Jt.first];for(var xn=j.glyphStartIndex+1;xn<Lt-1;xn++)ft.push(Cn(gt*ue.getoffsetX(xn),Et,It,G,ze,He,j.segment,Bt,Ot,_e,Q,Ye));ft.push(Jt.last)}else{if(D&&!G){var En=Kt(He,H).point,In=j.lineStartIndex+j.segment+1,Hn=new r.Point(_e.getx(In),_e.gety(In)),ir=Kt(Hn,H),dr=ir.signedDistanceFromCamera>0?ir.point:Tn(He,Hn,En,1,H),Zn=wn(j.writingMode,En,dr,nt);if(Zn)return Zn}var ur=Cn(gt*ue.getoffsetX(j.glyphStartIndex),Et,It,G,ze,He,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,_e,Q,Ye);if(!ur)return{notEnoughRoom:!0};ft=[ur]}for(var _r=0,Dr=ft;_r<Dr.length;_r+=1){var nr=Dr[_r];r.addDynamicAttributes(Ie,nr.point,nr.angle)}return{}}function Tn(j,Y,G,D,H){var Q=Kt(j.add(j.sub(Y)._unit()),H).point,ie=G.sub(Q);return G.add(ie._mult(D/ie.mag()))}function Cn(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He){var Ye=D?j-Y:j+Y,nt=Ye>0?1:-1,ft=0;D&&(nt*=-1,ft=Math.PI),nt<0&&(ft+=Math.PI);for(var gt=nt>0?ue+ie:ue+ie+1,Et=H,It=H,Lt=0,Bt=0,Ot=Math.abs(Ye),Jt=[];Lt+Bt<=Ot;){if((gt+=nt)<ue||gt>=_e)return null;if(It=Et,Jt.push(Et),(Et=He[gt])===void 0){var Yt=new r.Point(Ie.getx(gt),Ie.gety(gt)),Vt=Kt(Yt,ze);if(Vt.signedDistanceFromCamera>0)Et=He[gt]=Vt.point;else{var dn=gt-nt;Et=Tn(Lt===0?Q:new r.Point(Ie.getx(dn),Ie.gety(dn)),Yt,It,Ot-Lt+1,ze)}}Lt+=Bt,Bt=It.dist(Et)}var xn=(Ot-Lt)/Bt,En=Et.sub(It),In=En.mult(xn)._add(It);In._add(En._unit()._perp()._mult(G*nt));var Hn=ft+Math.atan2(Et.y-It.y,Et.x-It.x);return Jt.push(In),{point:In,angle:Hn,path:Jt}}$t.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},$t.prototype.insert=function(j,Y,G,D,H){this._forEachCell(Y,G,D,H,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(Y),this.bboxes.push(G),this.bboxes.push(D),this.bboxes.push(H)},$t.prototype.insertCircle=function(j,Y,G,D){this._forEachCell(Y-D,G-D,Y+D,G+D,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(Y),this.circles.push(G),this.circles.push(D)},$t.prototype._insertBoxCell=function(j,Y,G,D,H,Q){this.boxCells[H].push(Q)},$t.prototype._insertCircleCell=function(j,Y,G,D,H,Q){this.circleCells[H].push(Q)},$t.prototype._query=function(j,Y,G,D,H,Q){if(G<0||j>this.width||D<0||Y>this.height)return!H&&[];var ie=[];if(j<=0&&Y<=0&&this.width<=G&&this.height<=D){if(H)return!0;for(var ue=0;ue<this.boxKeys.length;ue++)ie.push({key:this.boxKeys[ue],x1:this.bboxes[4*ue],y1:this.bboxes[4*ue+1],x2:this.bboxes[4*ue+2],y2:this.bboxes[4*ue+3]});for(var _e=0;_e<this.circleKeys.length;_e++){var Ie=this.circles[3*_e],ze=this.circles[3*_e+1],He=this.circles[3*_e+2];ie.push({key:this.circleKeys[_e],x1:Ie-He,y1:ze-He,x2:Ie+He,y2:ze+He})}return Q?ie.filter(Q):ie}var Ye={hitTest:H,seenUids:{box:{},circle:{}}};return this._forEachCell(j,Y,G,D,this._queryCell,ie,Ye,Q),H?ie.length>0:ie},$t.prototype._queryCircle=function(j,Y,G,D,H){var Q=j-G,ie=j+G,ue=Y-G,_e=Y+G;if(ie<0||Q>this.width||_e<0||ue>this.height)return!D&&[];var Ie=[],ze={hitTest:D,circle:{x:j,y:Y,radius:G},seenUids:{box:{},circle:{}}};return this._forEachCell(Q,ue,ie,_e,this._queryCellCircle,Ie,ze,H),D?Ie.length>0:Ie},$t.prototype.query=function(j,Y,G,D,H){return this._query(j,Y,G,D,!1,H)},$t.prototype.hitTest=function(j,Y,G,D,H){return this._query(j,Y,G,D,!0,H)},$t.prototype.hitTestCircle=function(j,Y,G,D){return this._queryCircle(j,Y,G,!0,D)},$t.prototype._queryCell=function(j,Y,G,D,H,Q,ie,ue){var _e=ie.seenUids,Ie=this.boxCells[H];if(Ie!==null)for(var ze=this.bboxes,He=0,Ye=Ie;He<Ye.length;He+=1){var nt=Ye[He];if(!_e.box[nt]){_e.box[nt]=!0;var ft=4*nt;if(j<=ze[ft+2]&&Y<=ze[ft+3]&&G>=ze[ft+0]&&D>=ze[ft+1]&&(!ue||ue(this.boxKeys[nt]))){if(ie.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[nt],x1:ze[ft],y1:ze[ft+1],x2:ze[ft+2],y2:ze[ft+3]})}}}var gt=this.circleCells[H];if(gt!==null)for(var Et=this.circles,It=0,Lt=gt;It<Lt.length;It+=1){var Bt=Lt[It];if(!_e.circle[Bt]){_e.circle[Bt]=!0;var Ot=3*Bt;if(this._circleAndRectCollide(Et[Ot],Et[Ot+1],Et[Ot+2],j,Y,G,D)&&(!ue||ue(this.circleKeys[Bt]))){if(ie.hitTest)return Q.push(!0),!0;var Jt=Et[Ot],Yt=Et[Ot+1],Vt=Et[Ot+2];Q.push({key:this.circleKeys[Bt],x1:Jt-Vt,y1:Yt-Vt,x2:Jt+Vt,y2:Yt+Vt})}}}},$t.prototype._queryCellCircle=function(j,Y,G,D,H,Q,ie,ue){var _e=ie.circle,Ie=ie.seenUids,ze=this.boxCells[H];if(ze!==null)for(var He=this.bboxes,Ye=0,nt=ze;Ye<nt.length;Ye+=1){var ft=nt[Ye];if(!Ie.box[ft]){Ie.box[ft]=!0;var gt=4*ft;if(this._circleAndRectCollide(_e.x,_e.y,_e.radius,He[gt+0],He[gt+1],He[gt+2],He[gt+3])&&(!ue||ue(this.boxKeys[ft])))return Q.push(!0),!0}}var Et=this.circleCells[H];if(Et!==null)for(var It=this.circles,Lt=0,Bt=Et;Lt<Bt.length;Lt+=1){var Ot=Bt[Lt];if(!Ie.circle[Ot]){Ie.circle[Ot]=!0;var Jt=3*Ot;if(this._circlesCollide(It[Jt],It[Jt+1],It[Jt+2],_e.x,_e.y,_e.radius)&&(!ue||ue(this.circleKeys[Ot])))return Q.push(!0),!0}}},$t.prototype._forEachCell=function(j,Y,G,D,H,Q,ie,ue){for(var _e=this._convertToXCellCoord(j),Ie=this._convertToYCellCoord(Y),ze=this._convertToXCellCoord(G),He=this._convertToYCellCoord(D),Ye=_e;Ye<=ze;Ye++)for(var nt=Ie;nt<=He;nt++){var ft=this.xCellCount*nt+Ye;if(H.call(this,j,Y,G,D,ft,Q,ie,ue))return}},$t.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},$t.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},$t.prototype._circlesCollide=function(j,Y,G,D,H,Q){var ie=D-j,ue=H-Y,_e=G+Q;return _e*_e>ie*ie+ue*ue},$t.prototype._circleAndRectCollide=function(j,Y,G,D,H,Q,ie){var ue=(Q-D)/2,_e=Math.abs(j-(D+ue));if(_e>ue+G)return!1;var Ie=(ie-H)/2,ze=Math.abs(Y-(H+Ie));if(ze>Ie+G)return!1;if(_e<=ue||ze<=Ie)return!0;var He=_e-ue,Ye=ze-Ie;return He*He+Ye*Ye<=G*G};var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xn(j,Y){for(var G=0;G<j;G++){var D=Y.length;Y.resize(D+4),Y.float32.set(Bn,3*D)}}function cr(j,Y,G){var D=Y[0],H=Y[1];return j[0]=G[0]*D+G[4]*H+G[12],j[1]=G[1]*D+G[5]*H+G[13],j[3]=G[3]*D+G[7]*H+G[15],j}var Yn=100,jn=function(j,Y,G){Y===void 0&&(Y=new $t(j.width+200,j.height+200,25)),G===void 0&&(G=new $t(j.width+200,j.height+200,25)),this.transform=j,this.grid=Y,this.ignoredGrid=G,this.pitchfactor=Math.cos(j._pitch)*j.cameraToCenterDistance,this.screenRightBoundary=j.width+Yn,this.screenBottomBoundary=j.height+Yn,this.gridRightBoundary=j.width+200,this.gridBottomBoundary=j.height+200};function Kn(j,Y,G){return Y*(r.EXTENT/(j.tileSize*Math.pow(2,G-j.tileID.overscaledZ)))}jn.prototype.placeCollisionBox=function(j,Y,G,D,H){var Q=this.projectAndGetPerspectiveRatio(D,j.anchorPointX,j.anchorPointY),ie=G*Q.perspectiveRatio,ue=j.x1*ie+Q.point.x,_e=j.y1*ie+Q.point.y,Ie=j.x2*ie+Q.point.x,ze=j.y2*ie+Q.point.y;return!this.isInsideGrid(ue,_e,Ie,ze)||!Y&&this.grid.hitTest(ue,_e,Ie,ze,H)?{box:[],offscreen:!1}:{box:[ue,_e,Ie,ze],offscreen:this.isOffscreen(ue,_e,Ie,ze)}},jn.prototype.placeCollisionCircles=function(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He,Ye){var nt=[],ft=new r.Point(Y.anchorX,Y.anchorY),gt=Kt(ft,Q),Et=fn(this.transform.cameraToCenterDistance,gt.signedDistanceFromCamera),It=(Ie?H/Et:H*Et)/r.ONE_EM,Lt=Kt(ft,ie).point,Bt=An(It,D,Y.lineOffsetX*It,Y.lineOffsetY*It,!1,Lt,ft,Y,G,ie,{}),Ot=!1,Jt=!1,Yt=!0;if(Bt){for(var Vt=.5*He*Et+Ye,dn=new r.Point(-100,-100),xn=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),En=new Ht,In=Bt.first,Hn=Bt.last,ir=[],dr=In.path.length-1;dr>=1;dr--)ir.push(In.path[dr]);for(var Zn=1;Zn<Hn.path.length;Zn++)ir.push(Hn.path[Zn]);var ur=2.5*Vt;if(ue){var _r=ir.map(function(Jr){return Kt(Jr,ue)});ir=_r.some(function(Jr){return Jr.signedDistanceFromCamera<=0})?[]:_r.map(function(Jr){return Jr.point})}var Dr=[];if(ir.length>0){for(var nr=ir[0].clone(),lr=ir[0].clone(),Ar=1;Ar<ir.length;Ar++)nr.x=Math.min(nr.x,ir[Ar].x),nr.y=Math.min(nr.y,ir[Ar].y),lr.x=Math.max(lr.x,ir[Ar].x),lr.y=Math.max(lr.y,ir[Ar].y);Dr=nr.x>=dn.x&&lr.x<=xn.x&&nr.y>=dn.y&&lr.y<=xn.y?[ir]:lr.x<dn.x||nr.x>xn.x||lr.y<dn.y||nr.y>xn.y?[]:r.clipLine([ir],dn.x,dn.y,xn.x,xn.y)}for(var vr=0,Er=Dr;vr<Er.length;vr+=1){var Or=Er[vr];En.reset(Or,.25*Vt);var Ur;Ur=En.length<=.5*Vt?1:Math.ceil(En.paddedLength/ur)+1;for(var Vr=0;Vr<Ur;Vr++){var Gr=Vr/Math.max(Ur-1,1),Zr=En.lerp(Gr),vi=Zr.x+Yn,Li=Zr.y+Yn;nt.push(vi,Li,Vt,0);var ya=vi-Vt,Xi=Li-Vt,sa=vi+Vt,bi=Li+Vt;if(Yt=Yt&&this.isOffscreen(ya,Xi,sa,bi),Jt=Jt||this.isInsideGrid(ya,Xi,sa,bi),!j&&this.grid.hitTestCircle(vi,Li,Vt,ze)&&(Ot=!0,!_e))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!_e&&Ot||!Jt?[]:nt,offscreen:Yt,collisionDetected:Ot}},jn.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var Y=[],G=1/0,D=1/0,H=-1/0,Q=-1/0,ie=0,ue=j;ie<ue.length;ie+=1){var _e=ue[ie],Ie=new r.Point(_e.x+Yn,_e.y+Yn);G=Math.min(G,Ie.x),D=Math.min(D,Ie.y),H=Math.max(H,Ie.x),Q=Math.max(Q,Ie.y),Y.push(Ie)}for(var ze={},He={},Ye=0,nt=this.grid.query(G,D,H,Q).concat(this.ignoredGrid.query(G,D,H,Q));Ye<nt.length;Ye+=1){var ft=nt[Ye],gt=ft.key;if(ze[gt.bucketInstanceId]===void 0&&(ze[gt.bucketInstanceId]={}),!ze[gt.bucketInstanceId][gt.featureIndex]){var Et=[new r.Point(ft.x1,ft.y1),new r.Point(ft.x2,ft.y1),new r.Point(ft.x2,ft.y2),new r.Point(ft.x1,ft.y2)];r.polygonIntersectsPolygon(Y,Et)&&(ze[gt.bucketInstanceId][gt.featureIndex]=!0,He[gt.bucketInstanceId]===void 0&&(He[gt.bucketInstanceId]=[]),He[gt.bucketInstanceId].push(gt.featureIndex))}}return He},jn.prototype.insertCollisionBox=function(j,Y,G,D,H){var Q={bucketInstanceId:G,featureIndex:D,collisionGroupID:H};(Y?this.ignoredGrid:this.grid).insert(Q,j[0],j[1],j[2],j[3])},jn.prototype.insertCollisionCircles=function(j,Y,G,D,H){for(var Q=Y?this.ignoredGrid:this.grid,ie={bucketInstanceId:G,featureIndex:D,collisionGroupID:H},ue=0;ue<j.length;ue+=4)Q.insertCircle(ie,j[ue],j[ue+1],j[ue+2])},jn.prototype.projectAndGetPerspectiveRatio=function(j,Y,G){var D=[Y,G,0,1];return cr(D,D,j),{point:new r.Point((D[0]/D[3]+1)/2*this.transform.width+Yn,(-D[1]/D[3]+1)/2*this.transform.height+Yn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/D[3]*.5}},jn.prototype.isOffscreen=function(j,Y,G,D){return G<Yn||j>=this.screenRightBoundary||D<Yn||Y>this.screenBottomBoundary},jn.prototype.isInsideGrid=function(j,Y,G,D){return G>=0&&j<this.gridRightBoundary&&D>=0&&Y<this.gridBottomBoundary},jn.prototype.getViewportMatrix=function(){var j=r.identity([]);return r.translate(j,j,[-100,-100,0]),j};var or=function(j,Y,G,D){this.opacity=j?Math.max(0,Math.min(1,j.opacity+(j.placed?Y:-Y))):D&&G?1:0,this.placed=G};or.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Qt=function(j,Y,G,D,H){this.text=new or(j?j.text:null,Y,G,H),this.icon=new or(j?j.icon:null,Y,D,H)};Qt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var an=function(j,Y,G){this.text=j,this.icon=Y,this.skipFade=G},Dn=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},yn=function(j,Y,G,D,H){this.bucketInstanceId=j,this.featureIndex=Y,this.sourceLayerIndex=G,this.bucketIndex=D,this.tileID=H},Ln=function(j){this.crossSourceCollisions=j,this.maxGroupID=0,this.collisionGroups={}};function Vn(j,Y,G,D,H){var Q=r.getAnchorAlignment(j),ie=-(Q.horizontalAlign-.5)*Y,ue=-(Q.verticalAlign-.5)*G,_e=r.evaluateVariableOffset(j,D);return new r.Point(ie+_e[0]*H,ue+_e[1]*H)}function Un(j,Y,G,D,H,Q){var ie=j.x1,ue=j.x2,_e=j.y1,Ie=j.y2,ze=j.anchorPointX,He=j.anchorPointY,Ye=new r.Point(Y,G);return D&&Ye._rotate(H?Q:-Q),{x1:ie+Ye.x,y1:_e+Ye.y,x2:ue+Ye.x,y2:Ie+Ye.y,anchorPointX:ze,anchorPointY:He}}Ln.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var Y=++this.maxGroupID;this.collisionGroups[j]={ID:Y,predicate:function(G){return G.collisionGroupID===Y}}}return this.collisionGroups[j]};var er=function(j,Y,G,D){this.transform=j.clone(),this.collisionIndex=new jn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Ln(G),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function fr(j,Y,G,D,H){j.emplaceBack(Y?1:0,G?1:0,D||0,H||0),j.emplaceBack(Y?1:0,G?1:0,D||0,H||0),j.emplaceBack(Y?1:0,G?1:0,D||0,H||0),j.emplaceBack(Y?1:0,G?1:0,D||0,H||0)}er.prototype.getBucketParts=function(j,Y,G,D){var H=G.getBucket(Y),Q=G.latestFeatureIndex;if(H&&Q&&Y.id===H.layerIds[0]){var ie=G.collisionBoxArray,ue=H.layers[0].layout,_e=Math.pow(2,this.transform.zoom-G.tileID.overscaledZ),Ie=G.tileSize/r.EXTENT,ze=this.transform.calculatePosMatrix(G.tileID.toUnwrapped()),He=ue.get("text-pitch-alignment")==="map",Ye=ue.get("text-rotation-alignment")==="map",nt=Kn(G,1,this.transform.zoom),ft=bn(ze,He,Ye,this.transform,nt),gt=null;if(He){var Et=ln(ze,He,Ye,this.transform,nt);gt=r.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[H.bucketInstanceId]=new yn(H.bucketInstanceId,Q,H.sourceLayerIndex,H.index,G.tileID);var It={bucket:H,layout:ue,posMatrix:ze,textLabelPlaneMatrix:ft,labelToScreenMatrix:gt,scale:_e,textPixelRatio:Ie,holdingForFade:G.holdingForFade(),collisionBoxArray:ie,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(H.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(H.sourceID)};if(D)for(var Lt=0,Bt=H.sortKeyRanges;Lt<Bt.length;Lt+=1){var Ot=Bt[Lt],Jt=Ot.sortKey,Yt=Ot.symbolInstanceStart,Vt=Ot.symbolInstanceEnd;j.push({sortKey:Jt,symbolInstanceStart:Yt,symbolInstanceEnd:Vt,parameters:It})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:H.symbolInstances.length,parameters:It})}},er.prototype.attemptAnchorPlacement=function(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He,Ye,nt,ft){var gt,Et=[He.textOffset0,He.textOffset1],It=Vn(j,G,D,Et,H),Lt=this.collisionIndex.placeCollisionBox(Un(Y,It.x,It.y,Q,ie,this.transform.angle),ze,ue,_e,Ie.predicate);if(!ft||this.collisionIndex.placeCollisionBox(Un(ft,It.x,It.y,Q,ie,this.transform.angle),ze,ue,_e,Ie.predicate).box.length!==0)return Lt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[He.crossTileID]&&this.prevPlacement.placements[He.crossTileID]&&this.prevPlacement.placements[He.crossTileID].text&&(gt=this.prevPlacement.variableOffsets[He.crossTileID].anchor),this.variableOffsets[He.crossTileID]={textOffset:Et,width:G,height:D,anchor:j,textBoxScale:H,prevAnchor:gt},this.markUsedJustification(Ye,j,He,nt),Ye.allowVerticalPlacement&&(this.markUsedOrientation(Ye,nt,He),this.placedOrientations[He.crossTileID]=nt),{shift:It,placedGlyphBoxes:Lt}):void 0},er.prototype.placeLayerBucketPart=function(j,Y,G){var D=this,H=j.parameters,Q=H.bucket,ie=H.layout,ue=H.posMatrix,_e=H.textLabelPlaneMatrix,Ie=H.labelToScreenMatrix,ze=H.textPixelRatio,He=H.holdingForFade,Ye=H.collisionBoxArray,nt=H.partiallyEvaluatedTextSize,ft=H.collisionGroup,gt=ie.get("text-optional"),Et=ie.get("icon-optional"),It=ie.get("text-allow-overlap"),Lt=ie.get("icon-allow-overlap"),Bt=ie.get("text-rotation-alignment")==="map",Ot=ie.get("text-pitch-alignment")==="map",Jt=ie.get("icon-text-fit")!=="none",Yt=ie.get("symbol-z-order")==="viewport-y",Vt=It&&(Lt||!Q.hasIconData()||Et),dn=Lt&&(It||!Q.hasTextData()||gt);!Q.collisionArrays&&Ye&&Q.deserializeCollisionBoxes(Ye);var xn=function(Zn,ur){if(!Y[Zn.crossTileID])if(He)D.placements[Zn.crossTileID]=new an(!1,!1,!1);else{var _r,Dr=!1,nr=!1,lr=!0,Ar=null,vr={box:null,offscreen:null},Er={box:null,offscreen:null},Or=null,Ur=null,Vr=0,Gr=0,Zr=0;ur.textFeatureIndex?Vr=ur.textFeatureIndex:Zn.useRuntimeCollisionCircles&&(Vr=Zn.featureIndex),ur.verticalTextFeatureIndex&&(Gr=ur.verticalTextFeatureIndex);var vi=ur.textBox;if(vi){var Li=function(Si){var Ua=r.WritingMode.horizontal;if(Q.allowVerticalPlacement&&!Si&&D.prevPlacement){var ta=D.prevPlacement.placedOrientations[Zn.crossTileID];ta&&(D.placedOrientations[Zn.crossTileID]=ta,Ua=ta,D.markUsedOrientation(Q,Ua,Zn))}return Ua},ya=function(Si,Ua){if(Q.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&ur.verticalTextBox)for(var ta=0,au=Q.writingModes;ta<au.length&&(au[ta]===r.WritingMode.vertical?(vr=Ua(),Er=vr):vr=Si(),!(vr&&vr.box&&vr.box.length));ta+=1);else vr=Si()};if(ie.get("text-variable-anchor")){var Xi=ie.get("text-variable-anchor");if(D.prevPlacement&&D.prevPlacement.variableOffsets[Zn.crossTileID]){var sa=D.prevPlacement.variableOffsets[Zn.crossTileID];Xi.indexOf(sa.anchor)>0&&(Xi=Xi.filter(function(Si){return Si!==sa.anchor})).unshift(sa.anchor)}var bi=function(Si,Ua,ta){for(var au=Si.x2-Si.x1,Uf=Si.y2-Si.y1,Dc=Zn.textBoxScale,Vf=Jt&&!Lt?Ua:null,ql={box:[],offscreen:!1},qf=It?2*Xi.length:Xi.length,Hl=0;Hl<qf;++Hl){var Lc=Xi[Hl%Xi.length],Ic=Hl>=Xi.length,yl=D.attemptAnchorPlacement(Lc,Si,au,Uf,Dc,Bt,Ot,ze,ue,ft,Ic,Zn,Q,ta,Vf);if(yl&&(ql=yl.placedGlyphBoxes)&&ql.box&&ql.box.length){Dr=!0,Ar=yl.shift;break}}return ql};ya(function(){return bi(vi,ur.iconBox,r.WritingMode.horizontal)},function(){var Si=ur.verticalTextBox,Ua=vr&&vr.box&&vr.box.length;return Q.allowVerticalPlacement&&!Ua&&Zn.numVerticalGlyphVertices>0&&Si?bi(Si,ur.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),vr&&(Dr=vr.box,lr=vr.offscreen);var Jr=Li(vr&&vr.box);if(!Dr&&D.prevPlacement){var ki=D.prevPlacement.variableOffsets[Zn.crossTileID];ki&&(D.variableOffsets[Zn.crossTileID]=ki,D.markUsedJustification(Q,ki.anchor,Zn,Jr))}}else{var fi=function(Si,Ua){var ta=D.collisionIndex.placeCollisionBox(Si,It,ze,ue,ft.predicate);return ta&&ta.box&&ta.box.length&&(D.markUsedOrientation(Q,Ua,Zn),D.placedOrientations[Zn.crossTileID]=Ua),ta};ya(function(){return fi(vi,r.WritingMode.horizontal)},function(){var Si=ur.verticalTextBox;return Q.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&Si?fi(Si,r.WritingMode.vertical):{box:null,offscreen:null}}),Li(vr&&vr.box&&vr.box.length)}}if(Dr=(_r=vr)&&_r.box&&_r.box.length>0,lr=_r&&_r.offscreen,Zn.useRuntimeCollisionCircles){var Qr=Q.text.placedSymbolArray.get(Zn.centerJustifiedTextSymbolIndex),Mi=r.evaluateSizeForFeature(Q.textSizeData,nt,Qr),Ii=ie.get("text-padding"),qi=Zn.collisionCircleDiameter;Or=D.collisionIndex.placeCollisionCircles(It,Qr,Q.lineVertexArray,Q.glyphOffsetArray,Mi,ue,_e,Ie,G,Ot,ft.predicate,qi,Ii),Dr=It||Or.circles.length>0&&!Or.collisionDetected,lr=lr&&Or.offscreen}if(ur.iconFeatureIndex&&(Zr=ur.iconFeatureIndex),ur.iconBox){var zs=function(Si){var Ua=Jt&&Ar?Un(Si,Ar.x,Ar.y,Bt,Ot,D.transform.angle):Si;return D.collisionIndex.placeCollisionBox(Ua,Lt,ze,ue,ft.predicate)};nr=Er&&Er.box&&Er.box.length&&ur.verticalIconBox?(Ur=zs(ur.verticalIconBox)).box.length>0:(Ur=zs(ur.iconBox)).box.length>0,lr=lr&&Ur.offscreen}var Rs=gt||Zn.numHorizontalGlyphVertices===0&&Zn.numVerticalGlyphVertices===0,ei=Et||Zn.numIconVertices===0;if(Rs||ei?ei?Rs||(nr=nr&&Dr):Dr=nr&&Dr:nr=Dr=nr&&Dr,Dr&&_r&&_r.box&&(Er&&Er.box&&Gr?D.collisionIndex.insertCollisionBox(_r.box,ie.get("text-ignore-placement"),Q.bucketInstanceId,Gr,ft.ID):D.collisionIndex.insertCollisionBox(_r.box,ie.get("text-ignore-placement"),Q.bucketInstanceId,Vr,ft.ID)),nr&&Ur&&D.collisionIndex.insertCollisionBox(Ur.box,ie.get("icon-ignore-placement"),Q.bucketInstanceId,Zr,ft.ID),Or&&(Dr&&D.collisionIndex.insertCollisionCircles(Or.circles,ie.get("text-ignore-placement"),Q.bucketInstanceId,Vr,ft.ID),G)){var vl=Q.bucketInstanceId,el=D.collisionCircleArrays[vl];el===void 0&&(el=D.collisionCircleArrays[vl]=new Dn);for(var Bo=0;Bo<Or.circles.length;Bo+=4)el.circles.push(Or.circles[Bo+0]),el.circles.push(Or.circles[Bo+1]),el.circles.push(Or.circles[Bo+2]),el.circles.push(Or.collisionDetected?1:0)}D.placements[Zn.crossTileID]=new an(Dr||Vt,nr||dn,lr||Q.justReloaded),Y[Zn.crossTileID]=!0}};if(Yt)for(var En=Q.getSortedSymbolIndexes(this.transform.angle),In=En.length-1;In>=0;--In){var Hn=En[In];xn(Q.symbolInstances.get(Hn),Q.collisionArrays[Hn])}else for(var ir=j.symbolInstanceStart;ir<j.symbolInstanceEnd;ir++)xn(Q.symbolInstances.get(ir),Q.collisionArrays[ir]);if(G&&Q.bucketInstanceId in this.collisionCircleArrays){var dr=this.collisionCircleArrays[Q.bucketInstanceId];r.invert(dr.invProjMatrix,ue),dr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Q.justReloaded=!1},er.prototype.markUsedJustification=function(j,Y,G,D){var H,Q={left:G.leftJustifiedTextSymbolIndex,center:G.centerJustifiedTextSymbolIndex,right:G.rightJustifiedTextSymbolIndex};H=D===r.WritingMode.vertical?G.verticalPlacedTextSymbolIndex:Q[r.getAnchorJustification(Y)];for(var ie=0,ue=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex,G.verticalPlacedTextSymbolIndex];ie<ue.length;ie+=1){var _e=ue[ie];_e>=0&&(j.text.placedSymbolArray.get(_e).crossTileID=H>=0&&_e!==H?0:G.crossTileID)}},er.prototype.markUsedOrientation=function(j,Y,G){for(var D=Y===r.WritingMode.horizontal||Y===r.WritingMode.horizontalOnly?Y:0,H=Y===r.WritingMode.vertical?Y:0,Q=0,ie=[G.leftJustifiedTextSymbolIndex,G.centerJustifiedTextSymbolIndex,G.rightJustifiedTextSymbolIndex];Q<ie.length;Q+=1){var ue=ie[Q];j.text.placedSymbolArray.get(ue).placedOrientation=D}G.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(G.verticalPlacedTextSymbolIndex).placedOrientation=H)},er.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,G=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var D=Y?Y.symbolFadeChange(j):1,H=Y?Y.opacities:{},Q=Y?Y.variableOffsets:{},ie=Y?Y.placedOrientations:{};for(var ue in this.placements){var _e=this.placements[ue],Ie=H[ue];Ie?(this.opacities[ue]=new Qt(Ie,D,_e.text,_e.icon),G=G||_e.text!==Ie.text.placed||_e.icon!==Ie.icon.placed):(this.opacities[ue]=new Qt(null,D,_e.text,_e.icon,_e.skipFade),G=G||_e.text||_e.icon)}for(var ze in H){var He=H[ze];if(!this.opacities[ze]){var Ye=new Qt(He,D,!1,!1);Ye.isHidden()||(this.opacities[ze]=Ye,G=G||He.text.placed||He.icon.placed)}}for(var nt in Q)this.variableOffsets[nt]||!this.opacities[nt]||this.opacities[nt].isHidden()||(this.variableOffsets[nt]=Q[nt]);for(var ft in ie)this.placedOrientations[ft]||!this.opacities[ft]||this.opacities[ft].isHidden()||(this.placedOrientations[ft]=ie[ft]);G?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:j)},er.prototype.updateLayerOpacities=function(j,Y){for(var G={},D=0,H=Y;D<H.length;D+=1){var Q=H[D],ie=Q.getBucket(j);ie&&Q.latestFeatureIndex&&j.id===ie.layerIds[0]&&this.updateBucketOpacities(ie,G,Q.collisionBoxArray)}},er.prototype.updateBucketOpacities=function(j,Y,G){var D=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var H=j.layers[0].layout,Q=new Qt(null,0,!1,!1,!0),ie=H.get("text-allow-overlap"),ue=H.get("icon-allow-overlap"),_e=H.get("text-variable-anchor"),Ie=H.get("text-rotation-alignment")==="map",ze=H.get("text-pitch-alignment")==="map",He=H.get("icon-text-fit")!=="none",Ye=new Qt(null,0,ie&&(ue||!j.hasIconData()||H.get("icon-optional")),ue&&(ie||!j.hasTextData()||H.get("text-optional")),!0);!j.collisionArrays&&G&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(G);for(var nt=function(It,Lt,Bt){for(var Ot=0;Ot<Lt/4;Ot++)It.opacityVertexArray.emplaceBack(Bt)},ft=function(It){var Lt=j.symbolInstances.get(It),Bt=Lt.numHorizontalGlyphVertices,Ot=Lt.numVerticalGlyphVertices,Jt=Lt.crossTileID,Yt=Y[Jt],Vt=D.opacities[Jt];Yt?Vt=Q:Vt||(Vt=Ye,D.opacities[Jt]=Vt),Y[Jt]=!0;var dn=Bt>0||Ot>0,xn=Lt.numIconVertices>0,En=D.placedOrientations[Lt.crossTileID],In=En===r.WritingMode.vertical,Hn=En===r.WritingMode.horizontal||En===r.WritingMode.horizontalOnly;if(dn){var ir=kn(Vt.text),dr=In?vn:ir;nt(j.text,Bt,dr);var Zn=Hn?vn:ir;nt(j.text,Ot,Zn);var ur=Vt.text.isHidden();[Lt.rightJustifiedTextSymbolIndex,Lt.centerJustifiedTextSymbolIndex,Lt.leftJustifiedTextSymbolIndex].forEach(function(Zr){Zr>=0&&(j.text.placedSymbolArray.get(Zr).hidden=ur||In?1:0)}),Lt.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(Lt.verticalPlacedTextSymbolIndex).hidden=ur||Hn?1:0);var _r=D.variableOffsets[Lt.crossTileID];_r&&D.markUsedJustification(j,_r.anchor,Lt,En);var Dr=D.placedOrientations[Lt.crossTileID];Dr&&(D.markUsedJustification(j,"left",Lt,Dr),D.markUsedOrientation(j,Dr,Lt))}if(xn){var nr=kn(Vt.icon),lr=!(He&&Lt.verticalPlacedIconSymbolIndex&&In);if(Lt.placedIconSymbolIndex>=0){var Ar=lr?nr:vn;nt(j.icon,Lt.numIconVertices,Ar),j.icon.placedSymbolArray.get(Lt.placedIconSymbolIndex).hidden=Vt.icon.isHidden()}if(Lt.verticalPlacedIconSymbolIndex>=0){var vr=lr?vn:nr;nt(j.icon,Lt.numVerticalIconVertices,vr),j.icon.placedSymbolArray.get(Lt.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden()}}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var Er=j.collisionArrays[It];if(Er){var Or=new r.Point(0,0);if(Er.textBox||Er.verticalTextBox){var Ur=!0;if(_e){var Vr=D.variableOffsets[Jt];Vr?(Or=Vn(Vr.anchor,Vr.width,Vr.height,Vr.textOffset,Vr.textBoxScale),Ie&&Or._rotate(ze?D.transform.angle:-D.transform.angle)):Ur=!1}Er.textBox&&fr(j.textCollisionBox.collisionVertexArray,Vt.text.placed,!Ur||In,Or.x,Or.y),Er.verticalTextBox&&fr(j.textCollisionBox.collisionVertexArray,Vt.text.placed,!Ur||Hn,Or.x,Or.y)}var Gr=!!(!Hn&&Er.verticalIconBox);Er.iconBox&&fr(j.iconCollisionBox.collisionVertexArray,Vt.icon.placed,Gr,He?Or.x:0,He?Or.y:0),Er.verticalIconBox&&fr(j.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!Gr,He?Or.x:0,He?Or.y:0)}}},gt=0;gt<j.symbolInstances.length;gt++)ft(gt);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Et=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Et.invProjMatrix,j.placementViewportMatrix=Et.viewportMatrix,j.collisionCircleArray=Et.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},er.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},er.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},er.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},er.prototype.stillRecent=function(j,Y){var G=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*G>j},er.prototype.setStale=function(){this.stale=!0};var Xt=Math.pow(2,25),mn=Math.pow(2,24),Pt=Math.pow(2,17),Zt=Math.pow(2,16),Wt=Math.pow(2,9),gn=Math.pow(2,8),pn=Math.pow(2,1);function kn(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var Y=j.placed?1:0,G=Math.floor(127*j.opacity);return G*Xt+Y*mn+G*Pt+Y*Zt+G*Wt+Y*gn+G*pn+Y}var vn=0,cn=function(j){this._sortAcrossTiles=j.layout.get("symbol-z-order")!=="viewport-y"&&j.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};cn.prototype.continuePlacement=function(j,Y,G,D,H){for(var Q=this._bucketParts;this._currentTileIndex<j.length;){var ie=j[this._currentTileIndex];if(Y.getBucketParts(Q,D,ie,this._sortAcrossTiles),this._currentTileIndex++,H())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort(function(_e,Ie){return _e.sortKey-Ie.sortKey}));this._currentPartIndex<Q.length;){var ue=Q[this._currentPartIndex];if(Y.placeLayerBucketPart(ue,this._seenCrossTileIDs,G),this._currentPartIndex++,H())return!0}return!1};var qt=function(j,Y,G,D,H,Q,ie){this.placement=new er(j,H,Q,ie),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=G,this._showCollisionBoxes=D,this._done=!1};qt.prototype.isDone=function(){return this._done},qt.prototype.continuePlacement=function(j,Y,G){for(var D=this,H=r.browser.now(),Q=function(){var _e=r.browser.now()-H;return!D._forceFullPlacement&&_e>2};this._currentPlacementIndex>=0;){var ie=Y[j[this._currentPlacementIndex]],ue=this.placement.collisionIndex.transform.zoom;if(ie.type==="symbol"&&(!ie.minzoom||ie.minzoom<=ue)&&(!ie.maxzoom||ie.maxzoom>ue)){if(this._inProgressLayer||(this._inProgressLayer=new cn(ie)),this._inProgressLayer.continuePlacement(G[ie.source],this.placement,this._showCollisionBoxes,ie,Q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},qt.prototype.commit=function(j){return this.placement.commit(j),this.placement};var Nt=512/r.EXTENT/2,tn=function(j,Y,G){this.tileID=j,this.indexedSymbolInstances={},this.bucketInstanceId=G;for(var D=0;D<Y.length;D++){var H=Y.get(D),Q=H.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:H.crossTileID,coord:this.getScaledCoordinates(H,j)})}};tn.prototype.getScaledCoordinates=function(j,Y){var G=Y.canonical.z-this.tileID.canonical.z,D=Nt/Math.pow(2,G);return{x:Math.floor((Y.canonical.x*r.EXTENT+j.anchorX)*D),y:Math.floor((Y.canonical.y*r.EXTENT+j.anchorY)*D)}},tn.prototype.findMatches=function(j,Y,G){for(var D=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),H=0;H<j.length;H++){var Q=j.get(H);if(!Q.crossTileID){var ie=this.indexedSymbolInstances[Q.key];if(ie)for(var ue=this.getScaledCoordinates(Q,Y),_e=0,Ie=ie;_e<Ie.length;_e+=1){var ze=Ie[_e];if(Math.abs(ze.coord.x-ue.x)<=D&&Math.abs(ze.coord.y-ue.y)<=D&&!G[ze.crossTileID]){G[ze.crossTileID]=!0,Q.crossTileID=ze.crossTileID;break}}}}};var _n=function(){this.maxCrossTileID=0};_n.prototype.generate=function(){return++this.maxCrossTileID};var Fn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Fn.prototype.handleWrapJump=function(j){var Y=Math.round((j-this.lng)/360);if(Y!==0)for(var G in this.indexes){var D=this.indexes[G],H={};for(var Q in D){var ie=D[Q];ie.tileID=ie.tileID.unwrapTo(ie.tileID.wrap+Y),H[ie.tileID.key]=ie}this.indexes[G]=H}this.lng=j},Fn.prototype.addBucket=function(j,Y,G){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var D=0;D<Y.symbolInstances.length;D++)Y.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var H=this.usedCrossTileIDs[j.overscaledZ];for(var Q in this.indexes){var ie=this.indexes[Q];if(Number(Q)>j.overscaledZ)for(var ue in ie){var _e=ie[ue];_e.tileID.isChildOf(j)&&_e.findMatches(Y.symbolInstances,j,H)}else{var Ie=ie[j.scaledTo(Number(Q)).key];Ie&&Ie.findMatches(Y.symbolInstances,j,H)}}for(var ze=0;ze<Y.symbolInstances.length;ze++){var He=Y.symbolInstances.get(ze);He.crossTileID||(He.crossTileID=G.generate(),H[He.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new tn(j,Y.symbolInstances,Y.bucketInstanceId),!0},Fn.prototype.removeBucketCrossTileIDs=function(j,Y){for(var G in Y.indexedSymbolInstances)for(var D=0,H=Y.indexedSymbolInstances[G];D<H.length;D+=1){var Q=H[D];delete this.usedCrossTileIDs[j][Q.crossTileID]}},Fn.prototype.removeStaleBuckets=function(j){var Y=!1;for(var G in this.indexes){var D=this.indexes[G];for(var H in D)j[D[H].bucketInstanceId]||(this.removeBucketCrossTileIDs(G,D[H]),delete D[H],Y=!0)}return Y};var zn=function(){this.layerIndexes={},this.crossTileIDs=new _n,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};zn.prototype.addLayer=function(j,Y,G){var D=this.layerIndexes[j.id];D===void 0&&(D=this.layerIndexes[j.id]=new Fn);var H=!1,Q={};D.handleWrapJump(G);for(var ie=0,ue=Y;ie<ue.length;ie+=1){var _e=ue[ie],Ie=_e.getBucket(j);Ie&&j.id===Ie.layerIds[0]&&(Ie.bucketInstanceId||(Ie.bucketInstanceId=++this.maxBucketInstanceId),D.addBucket(_e.tileID,Ie,this.crossTileIDs)&&(H=!0),Q[Ie.bucketInstanceId]=!0)}return D.removeStaleBuckets(Q)&&(H=!0),H},zn.prototype.pruneUnusedLayers=function(j){var Y={};for(var G in j.forEach(function(D){Y[D]=!0}),this.layerIndexes)Y[G]||delete this.layerIndexes[G]};var Pn=function(j,Y){return r.emitValidationErrors(j,Y&&Y.filter(function(G){return G.identifier!=="source.canvas"}))},$n=r.pick(Tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Wn=r.pick(Tt,["setCenter","setZoom","setBearing","setPitch"]),tr=function(){var j={},Y=r.styleSpec.$version;for(var G in r.styleSpec.$root){var D=r.styleSpec.$root[G];if(D.required){var H;(H=G==="version"?Y:D.type==="array"?[]:{})!=null&&(j[G]=H)}}return j}(),qn=function(j){function Y(G,D){var H=this;D===void 0&&(D={}),j.call(this),this.map=G,this.dispatcher=new L(dt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(G._requestManager,D.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new zn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var Q=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(ie){var ue={pluginStatus:ie.pluginStatus,pluginURL:ie.pluginURL};Q.dispatcher.broadcast("syncRTLPluginState",ue,function(_e,Ie){if(r.triggerPluginCompletionEvent(_e),Ie&&Ie.every(function(He){return He}))for(var ze in Q.sourceCaches)Q.sourceCaches[ze].reload()})}),this.on("data",function(ie){if(ie.dataType==="source"&&ie.sourceDataType==="metadata"){var ue=H.sourceCaches[ie.sourceId];if(ue){var _e=ue.getSource();if(_e&&_e.vectorLayerIds)for(var Ie in H._layers){var ze=H._layers[Ie];ze.source===_e.id&&H._validateLayer(ze)}}}})}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(G,D){var H=this;D===void 0&&(D={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var Q=typeof D.validate=="boolean"?D.validate:!r.isMapboxURL(G);G=this.map._requestManager.normalizeStyleURL(G,D.accessToken);var ie=this.map._requestManager.transformRequest(G,r.ResourceType.Style);this._request=r.getJSON(ie,function(ue,_e){H._request=null,ue?H.fire(new r.ErrorEvent(ue)):_e&&H._load(_e,Q)})},Y.prototype.loadJSON=function(G,D){var H=this;D===void 0&&(D={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){H._request=null,H._load(G,D.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(tr,!1)},Y.prototype._load=function(G,D){if(!D||!Pn(this,r.validateStyle(G))){for(var H in this._loaded=!0,this.stylesheet=G,G.sources)this.addSource(H,G.sources[H],{validate:!1});G.sprite?this._loadSprite(G.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(G.glyphs);var Q=kt(this.stylesheet.layers);this._order=Q.map(function(Ie){return Ie.id}),this._layers={},this._serializedLayers={};for(var ie=0,ue=Q;ie<ue.length;ie+=1){var _e=ue[ie];(_e=r.createStyleLayer(_e)).setEventedParent(this,{layer:{id:_e.id}}),this._layers[_e.id]=_e,this._serializedLayers[_e.id]=_e.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},Y.prototype._loadSprite=function(G){var D=this;this._spriteRequest=function(H,Q,ie){var ue,_e,Ie,ze=r.browser.devicePixelRatio>1?"@2x":"",He=r.getJSON(Q.transformRequest(Q.normalizeSpriteURL(H,ze,".json"),r.ResourceType.SpriteJSON),function(ft,gt){He=null,Ie||(Ie=ft,ue=gt,nt())}),Ye=r.getImage(Q.transformRequest(Q.normalizeSpriteURL(H,ze,".png"),r.ResourceType.SpriteImage),function(ft,gt){Ye=null,Ie||(Ie=ft,_e=gt,nt())});function nt(){if(Ie)ie(Ie);else if(ue&&_e){var ft=r.browser.getImageData(_e),gt={};for(var Et in ue){var It=ue[Et],Lt=It.width,Bt=It.height,Ot=It.x,Jt=It.y,Yt=It.sdf,Vt=It.pixelRatio,dn=It.stretchX,xn=It.stretchY,En=It.content,In=new r.RGBAImage({width:Lt,height:Bt});r.RGBAImage.copy(ft,In,{x:Ot,y:Jt},{x:0,y:0},{width:Lt,height:Bt}),gt[Et]={data:In,pixelRatio:Vt,sdf:Yt,stretchX:dn,stretchY:xn,content:En}}ie(null,gt)}}return{cancel:function(){He&&(He.cancel(),He=null),Ye&&(Ye.cancel(),Ye=null)}}}(G,this.map._requestManager,function(H,Q){if(D._spriteRequest=null,H)D.fire(new r.ErrorEvent(H));else if(Q)for(var ie in Q)D.imageManager.addImage(ie,Q[ie]);D.imageManager.setLoaded(!0),D._availableImages=D.imageManager.listImages(),D.dispatcher.broadcast("setImages",D._availableImages),D.fire(new r.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(G){var D=this.sourceCaches[G.source];if(D){var H=G.sourceLayer;if(H){var Q=D.getSource();(Q.type==="geojson"||Q.vectorLayerIds&&Q.vectorLayerIds.indexOf(H)===-1)&&this.fire(new r.ErrorEvent(new Error('Source layer "'+H+'" does not exist on source "'+Q.id+'" as specified by style layer "'+G.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var G in this.sourceCaches)if(!this.sourceCaches[G].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(G){for(var D=[],H=0,Q=G;H<Q.length;H+=1){var ie=Q[H],ue=this._layers[ie];ue.type!=="custom"&&D.push(ue.serialize())}return D},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var G in this.sourceCaches)if(this.sourceCaches[G].hasTransition())return!0;for(var D in this._layers)if(this._layers[D].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(G){if(this._loaded){var D=this._changed;if(this._changed){var H=Object.keys(this._updatedLayers),Q=Object.keys(this._removedLayers);for(var ie in(H.length||Q.length)&&this._updateWorkerLayers(H,Q),this._updatedSources){var ue=this._updatedSources[ie];ue==="reload"?this._reloadSource(ie):ue==="clear"&&this._clearSource(ie)}for(var _e in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[_e].updateTransitions(G);this.light.updateTransitions(G),this._resetUpdates()}var Ie={};for(var ze in this.sourceCaches){var He=this.sourceCaches[ze];Ie[ze]=He.used,He.used=!1}for(var Ye=0,nt=this._order;Ye<nt.length;Ye+=1){var ft=nt[Ye],gt=this._layers[ft];gt.recalculate(G,this._availableImages),!gt.isHidden(G.zoom)&&gt.source&&(this.sourceCaches[gt.source].used=!0)}for(var Et in Ie){var It=this.sourceCaches[Et];Ie[Et]!==It.used&&It.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Et}))}this.light.recalculate(G),this.z=G.zoom,D&&this.fire(new r.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var G=Object.keys(this._changedImages);if(G.length){for(var D in this.sourceCaches)this.sourceCaches[D].reloadTilesForDependencies(["icons","patterns"],G);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(G,D){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(G),removedIds:D})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(G){var D=this;if(this._checkLoaded(),Pn(this,r.validateStyle(G)))return!1;(G=r.clone$1(G)).layers=kt(G.layers);var H=on(this.serialize(),G).filter(function(ie){return!(ie.command in Wn)});if(H.length===0)return!1;var Q=H.filter(function(ie){return!(ie.command in $n)});if(Q.length>0)throw new Error("Unimplemented: "+Q.map(function(ie){return ie.command}).join(", ")+".");return H.forEach(function(ie){ie.command!=="setTransition"&&D[ie.command].apply(D,ie.args)}),this.stylesheet=G,!0},Y.prototype.addImage=function(G,D){if(this.getImage(G))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(G,D),this._afterImageUpdated(G)},Y.prototype.updateImage=function(G,D){this.imageManager.updateImage(G,D)},Y.prototype.getImage=function(G){return this.imageManager.getImage(G)},Y.prototype.removeImage=function(G){if(!this.getImage(G))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(G),this._afterImageUpdated(G)},Y.prototype._afterImageUpdated=function(G){this._availableImages=this.imageManager.listImages(),this._changedImages[G]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(G,D,H){var Q=this;if(H===void 0&&(H={}),this._checkLoaded(),this.sourceCaches[G]!==void 0)throw new Error("There is already a source with this ID");if(!D.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(D).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(D.type)>=0&&this._validate(r.validateStyle.source,"sources."+G,D,null,H))){this.map&&this.map._collectResourceTiming&&(D.collectResourceTiming=!0);var ie=this.sourceCaches[G]=new st(G,D,this.dispatcher);ie.style=this,ie.setEventedParent(this,function(){return{isSourceLoaded:Q.loaded(),source:ie.serialize(),sourceId:G}}),ie.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(G){if(this._checkLoaded(),this.sourceCaches[G]===void 0)throw new Error("There is no source with this ID");for(var D in this._layers)if(this._layers[D].source===G)return this.fire(new r.ErrorEvent(new Error('Source "'+G+'" cannot be removed while layer "'+D+'" is using it.')));var H=this.sourceCaches[G];delete this.sourceCaches[G],delete this._updatedSources[G],H.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:G})),H.setEventedParent(null),H.clearTiles(),H.onRemove&&H.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(G,D){this._checkLoaded(),this.sourceCaches[G].getSource().setData(D),this._changed=!0},Y.prototype.getSource=function(G){return this.sourceCaches[G]&&this.sourceCaches[G].getSource()},Y.prototype.addLayer=function(G,D,H){H===void 0&&(H={}),this._checkLoaded();var Q=G.id;if(this.getLayer(Q))this.fire(new r.ErrorEvent(new Error('Layer with id "'+Q+'" already exists on this map')));else{var ie;if(G.type==="custom"){if(Pn(this,r.validateCustomStyleLayer(G)))return;ie=r.createStyleLayer(G)}else{if(typeof G.source=="object"&&(this.addSource(Q,G.source),G=r.clone$1(G),G=r.extend(G,{source:Q})),this._validate(r.validateStyle.layer,"layers."+Q,G,{arrayIndex:-1},H))return;ie=r.createStyleLayer(G),this._validateLayer(ie),ie.setEventedParent(this,{layer:{id:Q}}),this._serializedLayers[ie.id]=ie.serialize()}var ue=D?this._order.indexOf(D):this._order.length;if(D&&ue===-1)this.fire(new r.ErrorEvent(new Error('Layer with id "'+D+'" does not exist on this map.')));else{if(this._order.splice(ue,0,Q),this._layerOrderChanged=!0,this._layers[Q]=ie,this._removedLayers[Q]&&ie.source&&ie.type!=="custom"){var _e=this._removedLayers[Q];delete this._removedLayers[Q],_e.type!==ie.type?this._updatedSources[ie.source]="clear":(this._updatedSources[ie.source]="reload",this.sourceCaches[ie.source].pause())}this._updateLayer(ie),ie.onAdd&&ie.onAdd(this.map)}}},Y.prototype.moveLayer=function(G,D){if(this._checkLoaded(),this._changed=!0,this._layers[G]){if(G!==D){var H=this._order.indexOf(G);this._order.splice(H,1);var Q=D?this._order.indexOf(D):this._order.length;D&&Q===-1?this.fire(new r.ErrorEvent(new Error('Layer with id "'+D+'" does not exist on this map.'))):(this._order.splice(Q,0,G),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(G){this._checkLoaded();var D=this._layers[G];if(D){D.setEventedParent(null);var H=this._order.indexOf(G);this._order.splice(H,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[G]=D,delete this._layers[G],delete this._serializedLayers[G],delete this._updatedLayers[G],delete this._updatedPaintProps[G],D.onRemove&&D.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(G){return this._layers[G]},Y.prototype.hasLayer=function(G){return G in this._layers},Y.prototype.setLayerZoomRange=function(G,D,H){this._checkLoaded();var Q=this.getLayer(G);Q?Q.minzoom===D&&Q.maxzoom===H||(D!=null&&(Q.minzoom=D),H!=null&&(Q.maxzoom=H),this._updateLayer(Q)):this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(G,D,H){H===void 0&&(H={}),this._checkLoaded();var Q=this.getLayer(G);if(Q){if(!r.deepEqual(Q.filter,D))return D==null?(Q.filter=void 0,void this._updateLayer(Q)):void(this._validate(r.validateStyle.filter,"layers."+Q.id+".filter",D,null,H)||(Q.filter=r.clone$1(D),this._updateLayer(Q)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(G){return r.clone$1(this.getLayer(G).filter)},Y.prototype.setLayoutProperty=function(G,D,H,Q){Q===void 0&&(Q={}),this._checkLoaded();var ie=this.getLayer(G);ie?r.deepEqual(ie.getLayoutProperty(D),H)||(ie.setLayoutProperty(D,H,Q),this._updateLayer(ie)):this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(G,D){var H=this.getLayer(G);if(H)return H.getLayoutProperty(D);this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(G,D,H,Q){Q===void 0&&(Q={}),this._checkLoaded();var ie=this.getLayer(G);ie?r.deepEqual(ie.getPaintProperty(D),H)||(ie.setPaintProperty(D,H,Q)&&this._updateLayer(ie),this._changed=!0,this._updatedPaintProps[G]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+G+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(G,D){return this.getLayer(G).getPaintProperty(D)},Y.prototype.setFeatureState=function(G,D){this._checkLoaded();var H=G.source,Q=G.sourceLayer,ie=this.sourceCaches[H];if(ie!==void 0){var ue=ie.getSource().type;ue==="geojson"&&Q?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ue!=="vector"||Q?(G.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),ie.setFeatureState(Q,G.id,D)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(G,D){this._checkLoaded();var H=G.source,Q=this.sourceCaches[H];if(Q!==void 0){var ie=Q.getSource().type,ue=ie==="vector"?G.sourceLayer:void 0;ie!=="vector"||ue?D&&typeof G.id!="string"&&typeof G.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Q.removeFeatureState(ue,G.id,D):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(G){this._checkLoaded();var D=G.source,H=G.sourceLayer,Q=this.sourceCaches[D];if(Q!==void 0){if(Q.getSource().type!=="vector"||H)return G.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.getFeatureState(H,G.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(G){return G.serialize()}),layers:this._serializeLayers(this._order)},function(G){return G!==void 0})},Y.prototype._updateLayer=function(G){this._updatedLayers[G.id]=!0,G.source&&!this._updatedSources[G.source]&&this.sourceCaches[G.source].getSource().type!=="raster"&&(this._updatedSources[G.source]="reload",this.sourceCaches[G.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(G){for(var D=this,H=function(En){return D._layers[En].type==="fill-extrusion"},Q={},ie=[],ue=this._order.length-1;ue>=0;ue--){var _e=this._order[ue];if(H(_e)){Q[_e]=ue;for(var Ie=0,ze=G;Ie<ze.length;Ie+=1){var He=ze[Ie][_e];if(He)for(var Ye=0,nt=He;Ye<nt.length;Ye+=1){var ft=nt[Ye];ie.push(ft)}}}}ie.sort(function(En,In){return In.intersectionZ-En.intersectionZ});for(var gt=[],Et=this._order.length-1;Et>=0;Et--){var It=this._order[Et];if(H(It))for(var Lt=ie.length-1;Lt>=0;Lt--){var Bt=ie[Lt].feature;if(Q[Bt.layer.id]<Et)break;gt.push(Bt),ie.pop()}else for(var Ot=0,Jt=G;Ot<Jt.length;Ot+=1){var Yt=Jt[Ot][It];if(Yt)for(var Vt=0,dn=Yt;Vt<dn.length;Vt+=1){var xn=dn[Vt];gt.push(xn.feature)}}}return gt},Y.prototype.queryRenderedFeatures=function(G,D,H){D&&D.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",D.filter,null,D);var Q={};if(D&&D.layers){if(!Array.isArray(D.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ie=0,ue=D.layers;ie<ue.length;ie+=1){var _e=ue[ie],Ie=this._layers[_e];if(!Ie)return this.fire(new r.ErrorEvent(new Error("The layer '"+_e+"' does not exist in the map's style and cannot be queried for features."))),[];Q[Ie.source]=!0}}var ze=[];for(var He in D.availableImages=this._availableImages,this.sourceCaches)D.layers&&!Q[He]||ze.push(K(this.sourceCaches[He],this._layers,this._serializedLayers,G,D,H));return this.placement&&ze.push(function(Ye,nt,ft,gt,Et,It,Lt){for(var Bt={},Ot=It.queryRenderedSymbols(gt),Jt=[],Yt=0,Vt=Object.keys(Ot).map(Number);Yt<Vt.length;Yt+=1){var dn=Vt[Yt];Jt.push(Lt[dn])}Jt.sort(ee);for(var xn=function(){var dr=In[En],Zn=dr.featureIndex.lookupSymbolFeatures(Ot[dr.bucketInstanceId],nt,dr.bucketIndex,dr.sourceLayerIndex,Et.filter,Et.layers,Et.availableImages,Ye);for(var ur in Zn){var _r=Bt[ur]=Bt[ur]||[],Dr=Zn[ur];Dr.sort(function(vr,Er){var Or=dr.featureSortOrder;if(Or){var Ur=Or.indexOf(vr.featureIndex);return Or.indexOf(Er.featureIndex)-Ur}return Er.featureIndex-vr.featureIndex});for(var nr=0,lr=Dr;nr<lr.length;nr+=1){var Ar=lr[nr];_r.push(Ar)}}},En=0,In=Jt;En<In.length;En+=1)xn();var Hn=function(dr){Bt[dr].forEach(function(Zn){var ur=Zn.feature,_r=Ye[dr],Dr=ft[_r.source].getFeatureState(ur.layer["source-layer"],ur.id);ur.source=ur.layer.source,ur.layer["source-layer"]&&(ur.sourceLayer=ur.layer["source-layer"]),ur.state=Dr})};for(var ir in Bt)Hn(ir);return Bt}(this._layers,this._serializedLayers,this.sourceCaches,G,D,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ze)},Y.prototype.querySourceFeatures=function(G,D){D&&D.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",D.filter,null,D);var H=this.sourceCaches[G];return H?function(Q,ie){for(var ue=Q.getRenderableIds().map(function(nt){return Q.getTileByID(nt)}),_e=[],Ie={},ze=0;ze<ue.length;ze++){var He=ue[ze],Ye=He.tileID.canonical.key;Ie[Ye]||(Ie[Ye]=!0,He.querySourceFeatures(_e,ie))}return _e}(H,D):[]},Y.prototype.addSourceType=function(G,D,H){return Y.getSourceType(G)?H(new Error('A source type called "'+G+'" already exists.')):(Y.setSourceType(G,D),D.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:G,url:D.workerSourceURL},H):H(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(G,D){D===void 0&&(D={}),this._checkLoaded();var H=this.light.getLight(),Q=!1;for(var ie in G)if(!r.deepEqual(G[ie],H[ie])){Q=!0;break}if(Q){var ue={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(G,D),this.light.updateTransitions(ue)}},Y.prototype._validate=function(G,D,H,Q,ie){return ie===void 0&&(ie={}),(!ie||ie.validate!==!1)&&Pn(this,G.call(r.validateStyle,r.extend({key:D,style:this.serialize(),value:H,styleSpec:r.styleSpec},Q)))},Y.prototype._remove=function(){for(var G in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[G].setEventedParent(null);for(var D in this.sourceCaches)this.sourceCaches[D].clearTiles(),this.sourceCaches[D].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(G){this.sourceCaches[G].clearTiles()},Y.prototype._reloadSource=function(G){this.sourceCaches[G].resume(),this.sourceCaches[G].reload()},Y.prototype._updateSources=function(G){for(var D in this.sourceCaches)this.sourceCaches[D].update(G)},Y.prototype._generateCollisionBoxes=function(){for(var G in this.sourceCaches)this._reloadSource(G)},Y.prototype._updatePlacement=function(G,D,H,Q,ie){ie===void 0&&(ie=!1);for(var ue=!1,_e=!1,Ie={},ze=0,He=this._order;ze<He.length;ze+=1){var Ye=He[ze],nt=this._layers[Ye];if(nt.type==="symbol"){if(!Ie[nt.source]){var ft=this.sourceCaches[nt.source];Ie[nt.source]=ft.getRenderableIds(!0).map(function(Ot){return ft.getTileByID(Ot)}).sort(function(Ot,Jt){return Jt.tileID.overscaledZ-Ot.tileID.overscaledZ||(Ot.tileID.isLessThan(Jt.tileID)?-1:1)})}var gt=this.crossTileSymbolIndex.addLayer(nt,Ie[nt.source],G.center.lng);ue=ue||gt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ie=ie||this._layerOrderChanged||H===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),G.zoom))&&(this.pauseablePlacement=new qt(G,this._order,ie,D,H,Q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ie),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),_e=!0),ue&&this.pauseablePlacement.placement.setStale()),_e||ue)for(var Et=0,It=this._order;Et<It.length;Et+=1){var Lt=It[Et],Bt=this._layers[Lt];Bt.type==="symbol"&&this.placement.updateLayerOpacities(Bt,Ie[Bt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var G in this.sourceCaches)this.sourceCaches[G].releaseSymbolFadeTiles()},Y.prototype.getImages=function(G,D,H){this.imageManager.getImages(D.icons,H),this._updateTilesForChangedImages();var Q=this.sourceCaches[D.source];Q&&Q.setDependencies(D.tileID.key,D.type,D.icons)},Y.prototype.getGlyphs=function(G,D,H){this.glyphManager.getGlyphs(D.stacks,H)},Y.prototype.getResource=function(G,D,H){return r.makeRequest(D,H)},Y}(r.Evented);qn.getSourceType=function(j){return ne[j]},qn.setSourceType=function(j,Y){ne[j]=Y},qn.registerForPluginStateChange=r.registerForPluginStateChange;var Jn=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),sr=ai(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),wr=ai(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pr=ai(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),rr=ai(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),yr=ai("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kr=ai(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Nr=ai(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ti=ai("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),mi=ai("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Wi=ai("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ui=ai(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Di=ai(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),pa=ai(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Da=ai(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Rr=ai(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),aa=ai(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),da=ai(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Vi=ai(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Vo=ai(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ba=ai(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),po=ai(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),vo=ai(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),go=ai(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),za=ai(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Qa=ai(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),yo=ai(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ai(j,Y){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,D=Y.match(/attribute ([\w]+) ([\w]+)/g),H=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=Y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ie=Q?Q.concat(H):H,ue={};return{fragmentSource:j=j.replace(G,function(_e,Ie,ze,He,Ye){return ue[Ye]=!0,Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Ye+`
varying `+ze+" "+He+" "+Ye+`;
#else
uniform `+ze+" "+He+" u_"+Ye+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ye+`
    `+ze+" "+He+" "+Ye+" = u_"+Ye+`;
#endif
`}),vertexSource:Y=Y.replace(G,function(_e,Ie,ze,He,Ye){var nt=He==="float"?"vec2":"vec4",ft=Ye.match(/color/)?"color":nt;return ue[Ye]?Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Ye+`
uniform lowp float u_`+Ye+`_t;
attribute `+ze+" "+nt+" a_"+Ye+`;
varying `+ze+" "+He+" "+Ye+`;
#else
uniform `+ze+" "+He+" u_"+Ye+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ye+`
    `+Ye+" = a_"+Ye+`;
#else
    `+ze+" "+He+" "+Ye+" = u_"+Ye+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ye+`
    `+Ye+" = unpack_mix_"+ft+"(a_"+Ye+", u_"+Ye+`_t);
#else
    `+ze+" "+He+" "+Ye+" = u_"+Ye+`;
#endif
`:Ie==="define"?`
#ifndef HAS_UNIFORM_u_`+Ye+`
uniform lowp float u_`+Ye+`_t;
attribute `+ze+" "+nt+" a_"+Ye+`;
#else
uniform `+ze+" "+He+" u_"+Ye+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ye+`
    `+ze+" "+He+" "+Ye+" = a_"+Ye+`;
#else
    `+ze+" "+He+" "+Ye+" = u_"+Ye+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ye+`
    `+ze+" "+He+" "+Ye+" = unpack_mix_"+ft+"(a_"+Ye+", u_"+Ye+`_t);
#else
    `+ze+" "+He+" "+Ye+" = u_"+Ye+`;
#endif
`}),staticAttributes:D,staticUniforms:ie}}var Fi=Object.freeze({__proto__:null,prelude:sr,background:wr,backgroundPattern:pr,circle:rr,clippingMask:yr,heatmap:kr,heatmapTexture:Nr,collisionBox:ti,collisionCircle:mi,debug:Wi,fill:ui,fillOutline:Di,fillOutlinePattern:pa,fillPattern:Da,fillExtrusion:Rr,fillExtrusionPattern:aa,hillshadePrepare:da,hillshade:Vi,line:Vo,lineGradient:ba,linePattern:po,lineSDF:vo,raster:go,symbolIcon:za,symbolSDF:Qa,symbolTextAndIcon:yo}),Co=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function mo(j){for(var Y=[],G=0;G<j.length;G++)if(j[G]!==null){var D=j[G].split(" ");Y.push(D.pop())}return Y}Co.prototype.bind=function(j,Y,G,D,H,Q,ie,ue){this.context=j;for(var _e=this.boundPaintVertexBuffers.length!==D.length,Ie=0;!_e&&Ie<D.length;Ie++)this.boundPaintVertexBuffers[Ie]!==D[Ie]&&(_e=!0);var ze=!this.vao||this.boundProgram!==Y||this.boundLayoutVertexBuffer!==G||_e||this.boundIndexBuffer!==H||this.boundVertexOffset!==Q||this.boundDynamicVertexBuffer!==ie||this.boundDynamicVertexBuffer2!==ue;!j.extVertexArrayObject||ze?this.freshBind(Y,G,D,H,Q,ie,ue):(j.bindVertexArrayOES.set(this.vao),ie&&ie.bind(),H&&H.dynamicDraw&&H.bind(),ue&&ue.bind())},Co.prototype.freshBind=function(j,Y,G,D,H,Q,ie){var ue,_e=j.numAttributes,Ie=this.context,ze=Ie.gl;if(Ie.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ie.extVertexArrayObject.createVertexArrayOES(),Ie.bindVertexArrayOES.set(this.vao),ue=0,this.boundProgram=j,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=G,this.boundIndexBuffer=D,this.boundVertexOffset=H,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=ie;else{ue=Ie.currentNumAttributes||0;for(var He=_e;He<ue;He++)ze.disableVertexAttribArray(He)}Y.enableAttributes(ze,j);for(var Ye=0,nt=G;Ye<nt.length;Ye+=1)nt[Ye].enableAttributes(ze,j);Q&&Q.enableAttributes(ze,j),ie&&ie.enableAttributes(ze,j),Y.bind(),Y.setVertexAttribPointers(ze,j,H);for(var ft=0,gt=G;ft<gt.length;ft+=1){var Et=gt[ft];Et.bind(),Et.setVertexAttribPointers(ze,j,H)}Q&&(Q.bind(),Q.setVertexAttribPointers(ze,j,H)),D&&D.bind(),ie&&(ie.bind(),ie.setVertexAttribPointers(ze,j,H)),Ie.currentNumAttributes=_e},Co.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var eo=function(j,Y,G,D,H,Q){var ie=j.gl;this.program=ie.createProgram();for(var ue=mo(G.staticAttributes),_e=D?D.getBinderAttributes():[],Ie=ue.concat(_e),ze=G.staticUniforms?mo(G.staticUniforms):[],He=D?D.getBinderUniforms():[],Ye=[],nt=0,ft=ze.concat(He);nt<ft.length;nt+=1){var gt=ft[nt];Ye.indexOf(gt)<0&&Ye.push(gt)}var Et=D?D.defines():[];Q&&Et.push("#define OVERDRAW_INSPECTOR;");var It=Et.concat(sr.fragmentSource,G.fragmentSource).join(`
`),Lt=Et.concat(sr.vertexSource,G.vertexSource).join(`
`),Bt=ie.createShader(ie.FRAGMENT_SHADER);if(ie.isContextLost())this.failedToCreate=!0;else{ie.shaderSource(Bt,It),ie.compileShader(Bt),ie.attachShader(this.program,Bt);var Ot=ie.createShader(ie.VERTEX_SHADER);if(ie.isContextLost())this.failedToCreate=!0;else{ie.shaderSource(Ot,Lt),ie.compileShader(Ot),ie.attachShader(this.program,Ot),this.attributes={};var Jt={};this.numAttributes=Ie.length;for(var Yt=0;Yt<this.numAttributes;Yt++)Ie[Yt]&&(ie.bindAttribLocation(this.program,Yt,Ie[Yt]),this.attributes[Ie[Yt]]=Yt);ie.linkProgram(this.program),ie.deleteShader(Ot),ie.deleteShader(Bt);for(var Vt=0;Vt<Ye.length;Vt++){var dn=Ye[Vt];if(dn&&!Jt[dn]){var xn=ie.getUniformLocation(this.program,dn);xn&&(Jt[dn]=xn)}}this.fixedUniforms=H(j,Jt),this.binderUniforms=D?D.getUniforms(j,Jt):[]}}};function qo(j,Y,G){var D=1/Kn(G,1,Y.transform.tileZoom),H=Math.pow(2,G.tileID.overscaledZ),Q=G.tileSize*Math.pow(2,Y.transform.tileZoom)/H,ie=Q*(G.tileID.canonical.x+G.tileID.wrap*H),ue=Q*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[D,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[ie>>16,ue>>16],u_pixel_coord_lower:[65535&ie,65535&ue]}}eo.prototype.draw=function(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He,Ye,nt,ft,gt){var Et,It=j.gl;if(!this.failedToCreate){for(var Lt in j.program.set(this.program),j.setDepthMode(G),j.setStencilMode(D),j.setColorMode(H),j.setCullFace(Q),this.fixedUniforms)this.fixedUniforms[Lt].set(ie[Lt]);nt&&nt.setUniforms(j,this.binderUniforms,He,{zoom:Ye});for(var Bt=(Et={},Et[It.LINES]=2,Et[It.TRIANGLES]=3,Et[It.LINE_STRIP]=1,Et)[Y],Ot=0,Jt=ze.get();Ot<Jt.length;Ot+=1){var Yt=Jt[Ot],Vt=Yt.vaos||(Yt.vaos={});(Vt[ue]||(Vt[ue]=new Co)).bind(j,this,_e,nt?nt.getPaintVertexBuffers():[],Ie,Yt.vertexOffset,ft,gt),It.drawElements(Y,Yt.primitiveLength*Bt,It.UNSIGNED_SHORT,Yt.primitiveOffset*Bt*2)}}};var xo=function(j,Y,G,D){var H=Y.style.light,Q=H.properties.get("position"),ie=[Q.x,Q.y,Q.z],ue=r.create$1();H.properties.get("anchor")==="viewport"&&r.fromRotation(ue,-Y.transform.angle),r.transformMat3(ie,ie,ue);var _e=H.properties.get("color");return{u_matrix:j,u_lightpos:ie,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[_e.r,_e.g,_e.b],u_vertical_gradient:+G,u_opacity:D}},Ho=function(j,Y,G,D,H,Q,ie){return r.extend(xo(j,Y,G,D),qo(Q,Y,ie),{u_height_factor:-Math.pow(2,H.overscaledZ)/ie.tileSize/8})},Do=function(j){return{u_matrix:j}},Go=function(j,Y,G,D){return r.extend(Do(j),qo(G,Y,D))},bo=function(j,Y){return{u_matrix:j,u_world:Y}},Ml=function(j,Y,G,D,H){return r.extend(Go(j,Y,G,D),{u_world:H})},ll=function(j,Y,G,D){var H,Q,ie=j.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var ue=Kn(G,1,ie.zoom);H=!0,Q=[ue,ue]}else H=!1,Q=ie.pixelsToGLUnits;return{u_camera_to_center_distance:ie.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:j.translatePosMatrix(Y.posMatrix,G,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+H,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:Q}},us=function(j,Y,G){var D=Kn(G,1,Y.zoom),H=Math.pow(2,Y.zoom-G.tileID.overscaledZ),Q=G.tileID.overscaleFactor();return{u_matrix:j,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[Y.pixelsToGLUnits[0]/(D*H),Y.pixelsToGLUnits[1]/(D*H)],u_overscale_factor:Q}},zl=function(j,Y,G){return{u_matrix:j,u_inv_matrix:Y,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},Rl=function(j,Y,G){return G===void 0&&(G=1),{u_matrix:j,u_color:Y,u_overlay:0,u_overlay_scale:G}},cs=function(j){return{u_matrix:j}},Bl=function(j,Y,G,D){return{u_matrix:j,u_extrude_scale:Kn(Y,1,G),u_intensity:D}},eu=function(j,Y,G,D){var H=r.create();r.ortho(H,0,j.width,j.height,0,0,1);var Q=j.context.gl;return{u_matrix:H,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:G,u_color_ramp:D,u_opacity:Y.paint.get("heatmap-opacity")}},tu=function(j,Y,G){var D=G.paint.get("hillshade-shadow-color"),H=G.paint.get("hillshade-highlight-color"),Q=G.paint.get("hillshade-accent-color"),ie=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=j.transform.angle);var ue,_e,Ie,ze=!j.options.moving;return{u_matrix:j.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),ze),u_image:0,u_latrange:(ue=Y.tileID,_e=Math.pow(2,ue.canonical.z),Ie=ue.canonical.y,[new r.MercatorCoordinate(0,Ie/_e).toLngLat().lat,new r.MercatorCoordinate(0,(Ie+1)/_e).toLngLat().lat]),u_light:[G.paint.get("hillshade-exaggeration"),ie],u_shadow:D,u_highlight:H,u_accent:Q}},fs=function(j,Y){var G=Y.stride,D=r.create();return r.ortho(D,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(D,D,[0,-r.EXTENT,0]),{u_matrix:D,u_image:1,u_dimension:[G,G],u_zoom:j.overscaledZ,u_unpack:Y.getUnpackVector()}},_o=function(j,Y,G){var D=j.transform;return{u_matrix:to(j,Y,G),u_ratio:1/Kn(Y,1,D.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},As=function(j,Y,G,D){return r.extend(_o(j,Y,G),{u_image:0,u_image_height:D})},hs=function(j,Y,G,D){var H=j.transform,Q=ps(Y,H);return{u_matrix:to(j,Y,G),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/Kn(Y,1,H.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[Q,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]]}},Hs=function(j,Y,G,D,H){var Q=j.transform,ie=j.lineAtlas,ue=ps(Y,Q),_e=G.layout.get("line-cap")==="round",Ie=ie.getDash(D.from,_e),ze=ie.getDash(D.to,_e),He=Ie.width*H.fromScale,Ye=ze.width*H.toScale;return r.extend(_o(j,Y,G),{u_patternscale_a:[ue/He,-Ie.height/2],u_patternscale_b:[ue/Ye,-ze.height/2],u_sdfgamma:ie.width/(256*Math.min(He,Ye)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ie.y,u_tex_y_b:ze.y,u_mix:H.t})};function ps(j,Y){return 1/Kn(j,1,Y.tileZoom)}function to(j,Y,G){return j.translatePosMatrix(Y.tileID.posMatrix,Y,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var Sl=function(j,Y,G,D,H){return{u_matrix:j,u_tl_parent:Y,u_scale_parent:G,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*H.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:H.paint.get("raster-brightness-min"),u_brightness_high:H.paint.get("raster-brightness-max"),u_saturation_factor:(ie=H.paint.get("raster-saturation"),ie>0?1-1/(1.001-ie):-ie),u_contrast_factor:(Q=H.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:Wo(H.paint.get("raster-hue-rotate"))};var Q,ie};function Wo(j){j*=Math.PI/180;var Y=Math.sin(j),G=Math.cos(j);return[(2*G+1)/3,(-Math.sqrt(3)*Y-G+1)/3,(Math.sqrt(3)*Y-G+1)/3]}var Lo,Io=function(j,Y,G,D,H,Q,ie,ue,_e,Ie){var ze=H.transform;return{u_is_size_zoom_constant:+(j==="constant"||j==="source"),u_is_size_feature_constant:+(j==="constant"||j==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:ze.cameraToCenterDistance,u_pitch:ze.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:ze.width/ze.height,u_fade_change:H.options.fadeDuration?H.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:ie,u_coord_matrix:ue,u_is_text:+_e,u_pitch_with_map:+D,u_texsize:Ie,u_texture:0}},Yo=function(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze){var He=H.transform;return r.extend(Io(j,Y,G,D,H,Q,ie,ue,_e,Ie),{u_gamma_scale:D?Math.cos(He._pitch)*He.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+ze})},Wr=function(j,Y,G,D,H,Q,ie,ue,_e,Ie){return r.extend(Yo(j,Y,G,D,H,Q,ie,ue,!0,_e,!0),{u_texsize_icon:Ie,u_texture_icon:1})},ks=function(j,Y,G){return{u_matrix:j,u_opacity:Y,u_color:G}},nu=function(j,Y,G,D,H,Q){return r.extend(function(ie,ue,_e,Ie){var ze=_e.imageManager.getPattern(ie.from.toString()),He=_e.imageManager.getPattern(ie.to.toString()),Ye=_e.imageManager.getPixelSize(),nt=Ye.width,ft=Ye.height,gt=Math.pow(2,Ie.tileID.overscaledZ),Et=Ie.tileSize*Math.pow(2,_e.transform.tileZoom)/gt,It=Et*(Ie.tileID.canonical.x+Ie.tileID.wrap*gt),Lt=Et*Ie.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ze.tl,u_pattern_br_a:ze.br,u_pattern_tl_b:He.tl,u_pattern_br_b:He.br,u_texsize:[nt,ft],u_mix:ue.t,u_pattern_size_a:ze.displaySize,u_pattern_size_b:He.displaySize,u_scale_a:ue.fromScale,u_scale_b:ue.toScale,u_tile_units_to_pixels:1/Kn(Ie,1,_e.transform.tileZoom),u_pixel_coord_upper:[It>>16,Lt>>16],u_pixel_coord_lower:[65535&It,65535&Lt]}}(D,Q,G,H),{u_matrix:j,u_opacity:Y})},ul={fillExtrusion:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_lightpos:new r.Uniform3f(j,Y.u_lightpos),u_lightintensity:new r.Uniform1f(j,Y.u_lightintensity),u_lightcolor:new r.Uniform3f(j,Y.u_lightcolor),u_vertical_gradient:new r.Uniform1f(j,Y.u_vertical_gradient),u_opacity:new r.Uniform1f(j,Y.u_opacity)}},fillExtrusionPattern:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_lightpos:new r.Uniform3f(j,Y.u_lightpos),u_lightintensity:new r.Uniform1f(j,Y.u_lightintensity),u_lightcolor:new r.Uniform3f(j,Y.u_lightcolor),u_vertical_gradient:new r.Uniform1f(j,Y.u_vertical_gradient),u_height_factor:new r.Uniform1f(j,Y.u_height_factor),u_image:new r.Uniform1i(j,Y.u_image),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new r.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new r.Uniform3f(j,Y.u_scale),u_fade:new r.Uniform1f(j,Y.u_fade),u_opacity:new r.Uniform1f(j,Y.u_opacity)}},fill:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix)}},fillPattern:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_image:new r.Uniform1i(j,Y.u_image),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new r.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new r.Uniform3f(j,Y.u_scale),u_fade:new r.Uniform1f(j,Y.u_fade)}},fillOutline:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_world:new r.Uniform2f(j,Y.u_world)}},fillOutlinePattern:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_world:new r.Uniform2f(j,Y.u_world),u_image:new r.Uniform1i(j,Y.u_image),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_pixel_coord_upper:new r.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(j,Y.u_pixel_coord_lower),u_scale:new r.Uniform3f(j,Y.u_scale),u_fade:new r.Uniform1f(j,Y.u_fade)}},circle:function(j,Y){return{u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(j,Y.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(j,Y.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(j,Y.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix)}},collisionBox:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(j,Y.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(j,Y.u_extrude_scale),u_overscale_factor:new r.Uniform1f(j,Y.u_overscale_factor)}},collisionCircle:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_inv_matrix:new r.UniformMatrix4f(j,Y.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(j,Y.u_viewport_size)}},debug:function(j,Y){return{u_color:new r.UniformColor(j,Y.u_color),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_overlay:new r.Uniform1i(j,Y.u_overlay),u_overlay_scale:new r.Uniform1f(j,Y.u_overlay_scale)}},clippingMask:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix)}},heatmap:function(j,Y){return{u_extrude_scale:new r.Uniform1f(j,Y.u_extrude_scale),u_intensity:new r.Uniform1f(j,Y.u_intensity),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix)}},heatmapTexture:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_world:new r.Uniform2f(j,Y.u_world),u_image:new r.Uniform1i(j,Y.u_image),u_color_ramp:new r.Uniform1i(j,Y.u_color_ramp),u_opacity:new r.Uniform1f(j,Y.u_opacity)}},hillshade:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_image:new r.Uniform1i(j,Y.u_image),u_latrange:new r.Uniform2f(j,Y.u_latrange),u_light:new r.Uniform2f(j,Y.u_light),u_shadow:new r.UniformColor(j,Y.u_shadow),u_highlight:new r.UniformColor(j,Y.u_highlight),u_accent:new r.UniformColor(j,Y.u_accent)}},hillshadePrepare:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_image:new r.Uniform1i(j,Y.u_image),u_dimension:new r.Uniform2f(j,Y.u_dimension),u_zoom:new r.Uniform1f(j,Y.u_zoom),u_unpack:new r.Uniform4f(j,Y.u_unpack)}},line:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_ratio:new r.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(j,Y.u_units_to_pixels)}},lineGradient:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_ratio:new r.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(j,Y.u_units_to_pixels),u_image:new r.Uniform1i(j,Y.u_image),u_image_height:new r.Uniform1f(j,Y.u_image_height)}},linePattern:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_ratio:new r.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_image:new r.Uniform1i(j,Y.u_image),u_units_to_pixels:new r.Uniform2f(j,Y.u_units_to_pixels),u_scale:new r.Uniform3f(j,Y.u_scale),u_fade:new r.Uniform1f(j,Y.u_fade)}},lineSDF:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_ratio:new r.Uniform1f(j,Y.u_ratio),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(j,Y.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(j,Y.u_patternscale_a),u_patternscale_b:new r.Uniform2f(j,Y.u_patternscale_b),u_sdfgamma:new r.Uniform1f(j,Y.u_sdfgamma),u_image:new r.Uniform1i(j,Y.u_image),u_tex_y_a:new r.Uniform1f(j,Y.u_tex_y_a),u_tex_y_b:new r.Uniform1f(j,Y.u_tex_y_b),u_mix:new r.Uniform1f(j,Y.u_mix)}},raster:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_tl_parent:new r.Uniform2f(j,Y.u_tl_parent),u_scale_parent:new r.Uniform1f(j,Y.u_scale_parent),u_buffer_scale:new r.Uniform1f(j,Y.u_buffer_scale),u_fade_t:new r.Uniform1f(j,Y.u_fade_t),u_opacity:new r.Uniform1f(j,Y.u_opacity),u_image0:new r.Uniform1i(j,Y.u_image0),u_image1:new r.Uniform1i(j,Y.u_image1),u_brightness_low:new r.Uniform1f(j,Y.u_brightness_low),u_brightness_high:new r.Uniform1f(j,Y.u_brightness_high),u_saturation_factor:new r.Uniform1f(j,Y.u_saturation_factor),u_contrast_factor:new r.Uniform1f(j,Y.u_contrast_factor),u_spin_weights:new r.Uniform3f(j,Y.u_spin_weights)}},symbolIcon:function(j,Y){return{u_is_size_zoom_constant:new r.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new r.Uniform1f(j,Y.u_size_t),u_size:new r.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new r.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new r.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new r.Uniform1f(j,Y.u_fade_change),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new r.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new r.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_texture:new r.Uniform1i(j,Y.u_texture)}},symbolSDF:function(j,Y){return{u_is_size_zoom_constant:new r.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new r.Uniform1f(j,Y.u_size_t),u_size:new r.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new r.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new r.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new r.Uniform1f(j,Y.u_fade_change),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new r.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new r.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_texture:new r.Uniform1i(j,Y.u_texture),u_gamma_scale:new r.Uniform1f(j,Y.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(j,Y.u_is_halo)}},symbolTextAndIcon:function(j,Y){return{u_is_size_zoom_constant:new r.Uniform1i(j,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(j,Y.u_is_size_feature_constant),u_size_t:new r.Uniform1f(j,Y.u_size_t),u_size:new r.Uniform1f(j,Y.u_size),u_camera_to_center_distance:new r.Uniform1f(j,Y.u_camera_to_center_distance),u_pitch:new r.Uniform1f(j,Y.u_pitch),u_rotate_symbol:new r.Uniform1i(j,Y.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(j,Y.u_aspect_ratio),u_fade_change:new r.Uniform1f(j,Y.u_fade_change),u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(j,Y.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(j,Y.u_coord_matrix),u_is_text:new r.Uniform1i(j,Y.u_is_text),u_pitch_with_map:new r.Uniform1i(j,Y.u_pitch_with_map),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_texsize_icon:new r.Uniform2f(j,Y.u_texsize_icon),u_texture:new r.Uniform1i(j,Y.u_texture),u_texture_icon:new r.Uniform1i(j,Y.u_texture_icon),u_gamma_scale:new r.Uniform1f(j,Y.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(j,Y.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(j,Y.u_is_halo)}},background:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_opacity:new r.Uniform1f(j,Y.u_opacity),u_color:new r.UniformColor(j,Y.u_color)}},backgroundPattern:function(j,Y){return{u_matrix:new r.UniformMatrix4f(j,Y.u_matrix),u_opacity:new r.Uniform1f(j,Y.u_opacity),u_image:new r.Uniform1i(j,Y.u_image),u_pattern_tl_a:new r.Uniform2f(j,Y.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(j,Y.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(j,Y.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(j,Y.u_pattern_br_b),u_texsize:new r.Uniform2f(j,Y.u_texsize),u_mix:new r.Uniform1f(j,Y.u_mix),u_pattern_size_a:new r.Uniform2f(j,Y.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(j,Y.u_pattern_size_b),u_scale_a:new r.Uniform1f(j,Y.u_scale_a),u_scale_b:new r.Uniform1f(j,Y.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(j,Y.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(j,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(j,Y.u_tile_units_to_pixels)}}};function Ms(j,Y,G,D,H,Q,ie){for(var ue=j.context,_e=ue.gl,Ie=j.useProgram("collisionBox"),ze=[],He=0,Ye=0,nt=0;nt<D.length;nt++){var ft=D[nt],gt=Y.getTile(ft),Et=gt.getBucket(G);if(Et){var It=ft.posMatrix;H[0]===0&&H[1]===0||(It=j.translatePosMatrix(ft.posMatrix,gt,H,Q));var Lt=ie?Et.textCollisionBox:Et.iconCollisionBox,Bt=Et.collisionCircleArray;if(Bt.length>0){var Ot=r.create(),Jt=It;r.mul(Ot,Et.placementInvProjMatrix,j.transform.glCoordMatrix),r.mul(Ot,Ot,Et.placementViewportMatrix),ze.push({circleArray:Bt,circleOffset:Ye,transform:Jt,invTransform:Ot}),Ye=He+=Bt.length/4}Lt&&Ie.draw(ue,_e.LINES,pt.disabled,We.disabled,j.colorModeForRenderPass(),Ne.disabled,us(It,j.transform,gt),G.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,null,j.transform.zoom,null,null,Lt.collisionVertexBuffer)}}if(ie&&ze.length){var Yt=j.useProgram("collisionCircle"),Vt=new r.StructArrayLayout2f1f2i16;Vt.resize(4*He),Vt._trim();for(var dn=0,xn=0,En=ze;xn<En.length;xn+=1)for(var In=En[xn],Hn=0;Hn<In.circleArray.length/4;Hn++){var ir=4*Hn,dr=In.circleArray[ir+0],Zn=In.circleArray[ir+1],ur=In.circleArray[ir+2],_r=In.circleArray[ir+3];Vt.emplace(dn++,dr,Zn,ur,_r,0),Vt.emplace(dn++,dr,Zn,ur,_r,1),Vt.emplace(dn++,dr,Zn,ur,_r,2),Vt.emplace(dn++,dr,Zn,ur,_r,3)}(!Lo||Lo.length<2*He)&&(Lo=function(Or){var Ur=2*Or,Vr=new r.StructArrayLayout3ui6;Vr.resize(Ur),Vr._trim();for(var Gr=0;Gr<Ur;Gr++){var Zr=6*Gr;Vr.uint16[Zr+0]=4*Gr+0,Vr.uint16[Zr+1]=4*Gr+1,Vr.uint16[Zr+2]=4*Gr+2,Vr.uint16[Zr+3]=4*Gr+2,Vr.uint16[Zr+4]=4*Gr+3,Vr.uint16[Zr+5]=4*Gr+0}return Vr}(He));for(var Dr=ue.createIndexBuffer(Lo,!0),nr=ue.createVertexBuffer(Vt,r.collisionCircleLayout.members,!0),lr=0,Ar=ze;lr<Ar.length;lr+=1){var vr=Ar[lr],Er=zl(vr.transform,vr.invTransform,j.transform);Yt.draw(ue,_e.TRIANGLES,pt.disabled,We.disabled,j.colorModeForRenderPass(),Ne.disabled,Er,G.id,nr,Dr,r.SegmentVector.simpleSegment(0,2*vr.circleOffset,vr.circleArray.length,vr.circleArray.length/2),null,j.transform.zoom,null,null,null)}nr.destroy(),Dr.destroy()}}var Nl=r.identity(new Float32Array(16));function ru(j,Y,G,D,H,Q){var ie=r.getAnchorAlignment(j),ue=-(ie.horizontalAlign-.5)*Y,_e=-(ie.verticalAlign-.5)*G,Ie=r.evaluateVariableOffset(j,D);return new r.Point((ue/H+Ie[0])*Q,(_e/H+Ie[1])*Q)}function cl(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze){var He=j.text.placedSymbolArray,Ye=j.text.dynamicLayoutVertexArray,nt=j.icon.dynamicLayoutVertexArray,ft={};Ye.clear();for(var gt=0;gt<He.length;gt++){var Et=He.get(gt),It=j.allowVerticalPlacement&&!Et.placedOrientation,Lt=Et.hidden||!Et.crossTileID||It?null:D[Et.crossTileID];if(Lt){var Bt=new r.Point(Et.anchorX,Et.anchorY),Ot=Kt(Bt,G?ue:ie),Jt=fn(Q.cameraToCenterDistance,Ot.signedDistanceFromCamera),Yt=H.evaluateSizeForFeature(j.textSizeData,Ie,Et)*Jt/r.ONE_EM;G&&(Yt*=j.tilePixelRatio/_e);for(var Vt=Lt.width,dn=Lt.height,xn=ru(Lt.anchor,Vt,dn,Lt.textOffset,Lt.textBoxScale,Yt),En=G?Kt(Bt.add(xn),ie).point:Ot.point.add(Y?xn.rotate(-Q.angle):xn),In=j.allowVerticalPlacement&&Et.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,Hn=0;Hn<Et.numGlyphs;Hn++)r.addDynamicAttributes(Ye,En,In);ze&&Et.associatedIconIndex>=0&&(ft[Et.associatedIconIndex]={shiftedAnchor:En,angle:In})}else Xn(Et.numGlyphs,Ye)}if(ze){nt.clear();for(var ir=j.icon.placedSymbolArray,dr=0;dr<ir.length;dr++){var Zn=ir.get(dr);if(Zn.hidden)Xn(Zn.numGlyphs,nt);else{var ur=ft[dr];if(ur)for(var _r=0;_r<Zn.numGlyphs;_r++)r.addDynamicAttributes(nt,ur.shiftedAnchor,ur.angle);else Xn(Zn.numGlyphs,nt)}}j.icon.dynamicLayoutVertexBuffer.updateData(nt)}j.text.dynamicLayoutVertexBuffer.updateData(Ye)}function iu(j,Y,G){return G.iconsInText&&Y?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function Zo(j,Y,G,D,H,Q,ie,ue,_e,Ie,ze,He){for(var Ye=j.context,nt=Ye.gl,ft=j.transform,gt=ue==="map",Et=_e==="map",It=gt&&G.layout.get("symbol-placement")!=="point",Lt=gt&&!Et&&!It,Bt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ot=!1,Jt=j.depthModeForSublayer(0,pt.ReadOnly),Yt=G.layout.get("text-variable-anchor"),Vt=[],dn=0,xn=D;dn<xn.length;dn+=1){var En=xn[dn],In=Y.getTile(En),Hn=In.getBucket(G);if(Hn){var ir=H?Hn.text:Hn.icon;if(ir&&ir.segments.get().length){var dr=ir.programConfigurations.get(G.id),Zn=H||Hn.sdfIcons,ur=H?Hn.textSizeData:Hn.iconSizeData,_r=Et||ft.pitch!==0,Dr=j.useProgram(iu(Zn,H,Hn),dr),nr=r.evaluateSizeForZoom(ur,ft.zoom),lr=void 0,Ar=[0,0],vr=void 0,Er=void 0,Or=null,Ur=void 0;if(H){if(vr=In.glyphAtlasTexture,Er=nt.LINEAR,lr=In.glyphAtlasTexture.size,Hn.iconsInText){Ar=In.imageAtlasTexture.size,Or=In.imageAtlasTexture;var Vr=ur.kind==="composite"||ur.kind==="camera";Ur=_r||j.options.rotating||j.options.zooming||Vr?nt.LINEAR:nt.NEAREST}}else{var Gr=G.layout.get("icon-size").constantOr(0)!==1||Hn.iconsNeedLinear;vr=In.imageAtlasTexture,Er=Zn||j.options.rotating||j.options.zooming||Gr||_r?nt.LINEAR:nt.NEAREST,lr=In.imageAtlasTexture.size}var Zr=Kn(In,1,j.transform.zoom),vi=bn(En.posMatrix,Et,gt,j.transform,Zr),Li=ln(En.posMatrix,Et,gt,j.transform,Zr),ya=Yt&&Hn.hasTextData(),Xi=G.layout.get("icon-text-fit")!=="none"&&ya&&Hn.hasIconData();It&&un(Hn,En.posMatrix,j,H,vi,Li,Et,Ie);var sa=j.translatePosMatrix(En.posMatrix,In,Q,ie),bi=It||H&&Yt||Xi?Nl:vi,Jr=j.translatePosMatrix(Li,In,Q,ie,!0),ki=Zn&&G.paint.get(H?"text-halo-width":"icon-halo-width").constantOr(1)!==0,fi={program:Dr,buffers:ir,uniformValues:Zn?Hn.iconsInText?Wr(ur.kind,nr,Lt,Et,j,sa,bi,Jr,lr,Ar):Yo(ur.kind,nr,Lt,Et,j,sa,bi,Jr,H,lr,!0):Io(ur.kind,nr,Lt,Et,j,sa,bi,Jr,H,lr),atlasTexture:vr,atlasTextureIcon:Or,atlasInterpolation:Er,atlasInterpolationIcon:Ur,isSDF:Zn,hasHalo:ki};if(Bt&&Hn.canOverlap){Ot=!0;for(var Qr=0,Mi=ir.segments.get();Qr<Mi.length;Qr+=1){var Ii=Mi[Qr];Vt.push({segments:new r.SegmentVector([Ii]),sortKey:Ii.sortKey,state:fi})}}else Vt.push({segments:ir.segments,sortKey:0,state:fi})}}}Ot&&Vt.sort(function(el,Bo){return el.sortKey-Bo.sortKey});for(var qi=0,zs=Vt;qi<zs.length;qi+=1){var Rs=zs[qi],ei=Rs.state;if(Ye.activeTexture.set(nt.TEXTURE0),ei.atlasTexture.bind(ei.atlasInterpolation,nt.CLAMP_TO_EDGE),ei.atlasTextureIcon&&(Ye.activeTexture.set(nt.TEXTURE1),ei.atlasTextureIcon&&ei.atlasTextureIcon.bind(ei.atlasInterpolationIcon,nt.CLAMP_TO_EDGE)),ei.isSDF){var vl=ei.uniformValues;ei.hasHalo&&(vl.u_is_halo=1,ds(ei.buffers,Rs.segments,G,j,ei.program,Jt,ze,He,vl)),vl.u_is_halo=0}ds(ei.buffers,Rs.segments,G,j,ei.program,Jt,ze,He,ei.uniformValues)}}function ds(j,Y,G,D,H,Q,ie,ue,_e){var Ie=D.context,ze=Ie.gl;H.draw(Ie,ze.TRIANGLES,Q,ie,ue,Ne.disabled,_e,G.id,j.layoutVertexBuffer,j.indexBuffer,Y,G.paint,D.transform.zoom,j.programConfigurations.get(G.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function Oo(j,Y,G,D,H,Q,ie){var ue,_e,Ie,ze,He,Ye=j.context.gl,nt=G.paint.get("fill-pattern"),ft=nt&&nt.constantOr(1),gt=G.getCrossfadeParameters();ie?(_e=ft&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=Ye.LINES):(_e=ft?"fillPattern":"fill",ue=Ye.TRIANGLES);for(var Et=0,It=D;Et<It.length;Et+=1){var Lt=It[Et],Bt=Y.getTile(Lt);if(!ft||Bt.patternsLoaded()){var Ot=Bt.getBucket(G);if(Ot){var Jt=Ot.programConfigurations.get(G.id),Yt=j.useProgram(_e,Jt);ft&&(j.context.activeTexture.set(Ye.TEXTURE0),Bt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Jt.updatePaintBuffers(gt));var Vt=nt.constantOr(null);if(Vt&&Bt.imageAtlas){var dn=Bt.imageAtlas,xn=dn.patternPositions[Vt.to.toString()],En=dn.patternPositions[Vt.from.toString()];xn&&En&&Jt.setConstantPatternPositions(xn,En)}var In=j.translatePosMatrix(Lt.posMatrix,Bt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(ie){ze=Ot.indexBuffer2,He=Ot.segments2;var Hn=[Ye.drawingBufferWidth,Ye.drawingBufferHeight];Ie=_e==="fillOutlinePattern"&&ft?Ml(In,j,gt,Bt,Hn):bo(In,Hn)}else ze=Ot.indexBuffer,He=Ot.segments,Ie=ft?Go(In,j,gt,Bt):Do(In);Yt.draw(j.context,ue,H,j.stencilModeForClipping(Lt),Q,Ne.disabled,Ie,G.id,Ot.layoutVertexBuffer,ze,He,G.paint,j.transform.zoom,Jt)}}}}function no(j,Y,G,D,H,Q,ie){for(var ue=j.context,_e=ue.gl,Ie=G.paint.get("fill-extrusion-pattern"),ze=Ie.constantOr(1),He=G.getCrossfadeParameters(),Ye=G.paint.get("fill-extrusion-opacity"),nt=0,ft=D;nt<ft.length;nt+=1){var gt=ft[nt],Et=Y.getTile(gt),It=Et.getBucket(G);if(It){var Lt=It.programConfigurations.get(G.id),Bt=j.useProgram(ze?"fillExtrusionPattern":"fillExtrusion",Lt);ze&&(j.context.activeTexture.set(_e.TEXTURE0),Et.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),Lt.updatePaintBuffers(He));var Ot=Ie.constantOr(null);if(Ot&&Et.imageAtlas){var Jt=Et.imageAtlas,Yt=Jt.patternPositions[Ot.to.toString()],Vt=Jt.patternPositions[Ot.from.toString()];Yt&&Vt&&Lt.setConstantPatternPositions(Yt,Vt)}var dn=j.translatePosMatrix(gt.posMatrix,Et,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),xn=G.paint.get("fill-extrusion-vertical-gradient"),En=ze?Ho(dn,j,xn,Ye,gt,He,Et):xo(dn,j,xn,Ye);Bt.draw(ue,ue.gl.TRIANGLES,H,Q,ie,Ne.backCCW,En,G.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,G.paint,j.transform.zoom,Lt)}}}function Ss(j,Y,G,D,H,Q){var ie=j.context,ue=ie.gl,_e=Y.fbo;if(_e){var Ie=j.useProgram("hillshade");ie.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,_e.colorAttachment.get());var ze=tu(j,Y,G);Ie.draw(ie,ue.TRIANGLES,D,H,Q,Ne.disabled,ze,G.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function jl(j,Y,G,D,H,Q){var ie=j.context,ue=ie.gl,_e=Y.dem;if(_e&&_e.data){var Ie=_e.dim,ze=_e.stride,He=_e.getPixels();if(ie.activeTexture.set(ue.TEXTURE1),ie.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||j.getTileTexture(ze),Y.demTexture){var Ye=Y.demTexture;Ye.update(He,{premultiply:!1}),Ye.bind(ue.NEAREST,ue.CLAMP_TO_EDGE)}else Y.demTexture=new r.Texture(ie,He,ue.RGBA,{premultiply:!1}),Y.demTexture.bind(ue.NEAREST,ue.CLAMP_TO_EDGE);ie.activeTexture.set(ue.TEXTURE0);var nt=Y.fbo;if(!nt){var ft=new r.Texture(ie,{width:Ie,height:Ie,data:null},ue.RGBA);ft.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),(nt=Y.fbo=ie.createFramebuffer(Ie,Ie,!0)).colorAttachment.set(ft.texture)}ie.bindFramebuffer.set(nt.framebuffer),ie.viewport.set([0,0,Ie,Ie]),j.useProgram("hillshadePrepare").draw(ie,ue.TRIANGLES,D,H,Q,Ne.disabled,fs(Y.tileID,_e),G.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Gs(j,Y,G,D,H){var Q=D.paint.get("raster-fade-duration");if(Q>0){var ie=r.browser.now(),ue=(ie-j.timeAdded)/Q,_e=Y?(ie-Y.timeAdded)/Q:-1,Ie=G.getSource(),ze=H.coveringZoomLevel({tileSize:Ie.tileSize,roundZoom:Ie.roundZoom}),He=!Y||Math.abs(Y.tileID.overscaledZ-ze)>Math.abs(j.tileID.overscaledZ-ze),Ye=He&&j.refreshedUponExpiration?1:r.clamp(He?ue:1-_e,0,1);return j.refreshedUponExpiration&&ue>=1&&(j.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-Ye}:{opacity:Ye,mix:0}}return{opacity:1,mix:0}}var fl=new r.Color(1,0,0,1),Ra=new r.Color(0,1,0,1),hl=new r.Color(0,0,1,1),Ul=new r.Color(1,0,1,1),Es=new r.Color(0,1,1,1);function vs(j){var Y=j.transform.padding;Cs(j,j.transform.height-(Y.top||0),3,fl),Cs(j,Y.bottom||0,3,Ra),gs(j,Y.left||0,3,hl),gs(j,j.transform.width-(Y.right||0),3,Ul);var G=j.transform.centerPoint;(function(D,H,Q,ie){var ue=20,_e=2;ys(D,H-_e/2,Q-ue/2,_e,ue,ie),ys(D,H-ue/2,Q-_e/2,ue,_e,ie)})(j,G.x,j.transform.height-G.y,Es)}function Cs(j,Y,G,D){ys(j,0,Y+G/2,j.transform.width,G,D)}function gs(j,Y,G,D){ys(j,Y-G/2,0,G,j.transform.height,D)}function ys(j,Y,G,D,H,Q){var ie=j.context,ue=ie.gl;ue.enable(ue.SCISSOR_TEST),ue.scissor(Y*r.browser.devicePixelRatio,G*r.browser.devicePixelRatio,D*r.browser.devicePixelRatio,H*r.browser.devicePixelRatio),ie.clear({color:Q}),ue.disable(ue.SCISSOR_TEST)}function Ws(j,Y,G){var D=j.context,H=D.gl,Q=G.posMatrix,ie=j.useProgram("debug"),ue=pt.disabled,_e=We.disabled,Ie=j.colorModeForRenderPass(),ze="$debug";D.activeTexture.set(H.TEXTURE0),j.emptyTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),ie.draw(D,H.LINE_STRIP,ue,_e,Ie,Ne.disabled,Rl(Q,r.Color.red),ze,j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var He=Y.getTileByID(G.key).latestRawTileData,Ye=He&&He.byteLength||0,nt=Math.floor(Ye/1024),ft=Y.getTile(G).tileSize,gt=512/Math.min(ft,512)*(G.overscaledZ/j.transform.zoom)*.5,Et=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(Et+=" => "+G.overscaledZ),function(It,Lt){It.initDebugOverlayCanvas();var Bt=It.debugOverlayCanvas,Ot=It.context.gl,Jt=It.debugOverlayCanvas.getContext("2d");Jt.clearRect(0,0,Bt.width,Bt.height),Jt.shadowColor="white",Jt.shadowBlur=2,Jt.lineWidth=1.5,Jt.strokeStyle="white",Jt.textBaseline="top",Jt.font="bold 36px Open Sans, sans-serif",Jt.fillText(Lt,5,5),Jt.strokeText(Lt,5,5),It.debugOverlayTexture.update(Bt),It.debugOverlayTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE)}(j,Et+" "+nt+"kb"),ie.draw(D,H.TRIANGLES,ue,_e,Ze.alphaBlended,Ne.disabled,Rl(Q,r.Color.transparent,gt),ze,j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var pl={symbol:function(j,Y,G,D,H){if(j.renderPass==="translucent"){var Q=We.disabled,ie=j.colorModeForRenderPass();G.layout.get("text-variable-anchor")&&function(ue,_e,Ie,ze,He,Ye,nt){for(var ft=_e.transform,gt=He==="map",Et=Ye==="map",It=0,Lt=ue;It<Lt.length;It+=1){var Bt=Lt[It],Ot=ze.getTile(Bt),Jt=Ot.getBucket(Ie);if(Jt&&Jt.text&&Jt.text.segments.get().length){var Yt=Jt.textSizeData,Vt=r.evaluateSizeForZoom(Yt,ft.zoom),dn=Kn(Ot,1,_e.transform.zoom),xn=bn(Bt.posMatrix,Et,gt,_e.transform,dn),En=Ie.layout.get("icon-text-fit")!=="none"&&Jt.hasIconData();if(Vt){var In=Math.pow(2,ft.zoom-Ot.tileID.overscaledZ);cl(Jt,gt,Et,nt,r.symbolSize,ft,xn,Bt.posMatrix,In,Vt,En)}}}}(D,j,G,Y,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),H),G.paint.get("icon-opacity").constantOr(1)!==0&&Zo(j,Y,G,D,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),Q,ie),G.paint.get("text-opacity").constantOr(1)!==0&&Zo(j,Y,G,D,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),Q,ie),Y.map.showCollisionBoxes&&(Ms(j,Y,G,D,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),Ms(j,Y,G,D,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}},circle:function(j,Y,G,D){if(j.renderPass==="translucent"){var H=G.paint.get("circle-opacity"),Q=G.paint.get("circle-stroke-width"),ie=G.paint.get("circle-stroke-opacity"),ue=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(H.constantOr(1)!==0||Q.constantOr(1)!==0&&ie.constantOr(1)!==0){for(var _e=j.context,Ie=_e.gl,ze=j.depthModeForSublayer(0,pt.ReadOnly),He=We.disabled,Ye=j.colorModeForRenderPass(),nt=[],ft=0;ft<D.length;ft++){var gt=D[ft],Et=Y.getTile(gt),It=Et.getBucket(G);if(It){var Lt=It.programConfigurations.get(G.id),Bt={programConfiguration:Lt,program:j.useProgram("circle",Lt),layoutVertexBuffer:It.layoutVertexBuffer,indexBuffer:It.indexBuffer,uniformValues:ll(j,gt,Et,G)};if(ue)for(var Ot=0,Jt=It.segments.get();Ot<Jt.length;Ot+=1){var Yt=Jt[Ot];nt.push({segments:new r.SegmentVector([Yt]),sortKey:Yt.sortKey,state:Bt})}else nt.push({segments:It.segments,sortKey:0,state:Bt})}}ue&&nt.sort(function(_r,Dr){return _r.sortKey-Dr.sortKey});for(var Vt=0,dn=nt;Vt<dn.length;Vt+=1){var xn=dn[Vt],En=xn.state,In=En.programConfiguration,Hn=En.program,ir=En.layoutVertexBuffer,dr=En.indexBuffer,Zn=En.uniformValues,ur=xn.segments;Hn.draw(_e,Ie.TRIANGLES,ze,He,Ye,Ne.disabled,Zn,G.id,ir,dr,ur,G.paint,j.transform.zoom,In)}}}},heatmap:function(j,Y,G,D){if(G.paint.get("heatmap-opacity")!==0)if(j.renderPass==="offscreen"){var H=j.context,Q=H.gl,ie=We.disabled,ue=new Ze([Q.ONE,Q.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(gt,Et,It){var Lt=gt.gl;gt.activeTexture.set(Lt.TEXTURE1),gt.viewport.set([0,0,Et.width/4,Et.height/4]);var Bt=It.heatmapFbo;if(Bt)Lt.bindTexture(Lt.TEXTURE_2D,Bt.colorAttachment.get()),gt.bindFramebuffer.set(Bt.framebuffer);else{var Ot=Lt.createTexture();Lt.bindTexture(Lt.TEXTURE_2D,Ot),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_WRAP_S,Lt.CLAMP_TO_EDGE),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_WRAP_T,Lt.CLAMP_TO_EDGE),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_MIN_FILTER,Lt.LINEAR),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_MAG_FILTER,Lt.LINEAR),Bt=It.heatmapFbo=gt.createFramebuffer(Et.width/4,Et.height/4,!1),function(Jt,Yt,Vt,dn){var xn=Jt.gl,En=Jt.extRenderToTextureHalfFloat?Jt.extTextureHalfFloat.HALF_FLOAT_OES:xn.UNSIGNED_BYTE;xn.texImage2D(xn.TEXTURE_2D,0,xn.RGBA,Yt.width/4,Yt.height/4,0,xn.RGBA,En,null),dn.colorAttachment.set(Vt)}(gt,Et,Ot,Bt)}})(H,j,G),H.clear({color:r.Color.transparent});for(var _e=0;_e<D.length;_e++){var Ie=D[_e];if(!Y.hasRenderableParent(Ie)){var ze=Y.getTile(Ie),He=ze.getBucket(G);if(He){var Ye=He.programConfigurations.get(G.id),nt=j.useProgram("heatmap",Ye),ft=j.transform.zoom;nt.draw(H,Q.TRIANGLES,pt.disabled,ie,ue,Ne.disabled,Bl(Ie.posMatrix,ze,ft,G.paint.get("heatmap-intensity")),G.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,G.paint,j.transform.zoom,Ye)}}}H.viewport.set([0,0,j.width,j.height])}else j.renderPass==="translucent"&&(j.context.setColorMode(j.colorModeForRenderPass()),function(gt,Et){var It=gt.context,Lt=It.gl,Bt=Et.heatmapFbo;if(Bt){It.activeTexture.set(Lt.TEXTURE0),Lt.bindTexture(Lt.TEXTURE_2D,Bt.colorAttachment.get()),It.activeTexture.set(Lt.TEXTURE1);var Ot=Et.colorRampTexture;Ot||(Ot=Et.colorRampTexture=new r.Texture(It,Et.colorRamp,Lt.RGBA)),Ot.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),gt.useProgram("heatmapTexture").draw(It,Lt.TRIANGLES,pt.disabled,We.disabled,gt.colorModeForRenderPass(),Ne.disabled,eu(gt,Et,0,1),Et.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments,Et.paint,gt.transform.zoom)}}(j,G))},line:function(j,Y,G,D){if(j.renderPass==="translucent"){var H=G.paint.get("line-opacity"),Q=G.paint.get("line-width");if(H.constantOr(1)!==0&&Q.constantOr(1)!==0)for(var ie=j.depthModeForSublayer(0,pt.ReadOnly),ue=j.colorModeForRenderPass(),_e=G.paint.get("line-dasharray"),Ie=G.paint.get("line-pattern"),ze=Ie.constantOr(1),He=G.paint.get("line-gradient"),Ye=G.getCrossfadeParameters(),nt=ze?"linePattern":_e?"lineSDF":He?"lineGradient":"line",ft=j.context,gt=ft.gl,Et=!0,It=0,Lt=D;It<Lt.length;It+=1){var Bt=Lt[It],Ot=Y.getTile(Bt);if(!ze||Ot.patternsLoaded()){var Jt=Ot.getBucket(G);if(Jt){var Yt=Jt.programConfigurations.get(G.id),Vt=j.context.program.get(),dn=j.useProgram(nt,Yt),xn=Et||dn.program!==Vt,En=Ie.constantOr(null);if(En&&Ot.imageAtlas){var In=Ot.imageAtlas,Hn=In.patternPositions[En.to.toString()],ir=In.patternPositions[En.from.toString()];Hn&&ir&&Yt.setConstantPatternPositions(Hn,ir)}var dr=ze?hs(j,Ot,G,Ye):_e?Hs(j,Ot,G,_e,Ye):He?As(j,Ot,G,Jt.lineClipsArray.length):_o(j,Ot,G);if(ze)ft.activeTexture.set(gt.TEXTURE0),Ot.imageAtlasTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),Yt.updatePaintBuffers(Ye);else if(_e&&(xn||j.lineAtlas.dirty))ft.activeTexture.set(gt.TEXTURE0),j.lineAtlas.bind(ft);else if(He){var Zn=Jt.gradients[G.id],ur=Zn.texture;if(G.gradientVersion!==Zn.version){var _r=256;if(G.stepInterpolant){var Dr=Y.getSource().maxzoom,nr=Bt.canonical.z===Dr?Math.ceil(1<<j.transform.maxZoom-Bt.canonical.z):1,lr=Jt.maxLineLength/r.EXTENT*1024*nr;_r=r.clamp(r.nextPowerOfTwo(lr),256,ft.maxTextureSize)}Zn.gradient=r.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:_r,image:Zn.gradient||void 0,clips:Jt.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new r.Texture(ft,Zn.gradient,gt.RGBA),Zn.version=G.gradientVersion,ur=Zn.texture}ft.activeTexture.set(gt.TEXTURE0),ur.bind(G.stepInterpolant?gt.NEAREST:gt.LINEAR,gt.CLAMP_TO_EDGE)}dn.draw(ft,gt.TRIANGLES,ie,j.stencilModeForClipping(Bt),ue,Ne.disabled,dr,G.id,Jt.layoutVertexBuffer,Jt.indexBuffer,Jt.segments,G.paint,j.transform.zoom,Yt,Jt.layoutVertexBuffer2),Et=!1}}}}},fill:function(j,Y,G,D){var H=G.paint.get("fill-color"),Q=G.paint.get("fill-opacity");if(Q.constantOr(1)!==0){var ie=j.colorModeForRenderPass(),ue=G.paint.get("fill-pattern"),_e=j.opaquePassEnabledForLayer()&&!ue.constantOr(1)&&H.constantOr(r.Color.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(j.renderPass===_e){var Ie=j.depthModeForSublayer(1,j.renderPass==="opaque"?pt.ReadWrite:pt.ReadOnly);Oo(j,Y,G,D,Ie,ie,!1)}if(j.renderPass==="translucent"&&G.paint.get("fill-antialias")){var ze=j.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,pt.ReadOnly);Oo(j,Y,G,D,ze,ie,!0)}}},"fill-extrusion":function(j,Y,G,D){var H=G.paint.get("fill-extrusion-opacity");if(H!==0&&j.renderPass==="translucent"){var Q=new pt(j.context.gl.LEQUAL,pt.ReadWrite,j.depthRangeFor3D);if(H!==1||G.paint.get("fill-extrusion-pattern").constantOr(1))no(j,Y,G,D,Q,We.disabled,Ze.disabled),no(j,Y,G,D,Q,j.stencilModeFor3D(),j.colorModeForRenderPass());else{var ie=j.colorModeForRenderPass();no(j,Y,G,D,Q,We.disabled,ie)}}},hillshade:function(j,Y,G,D){if(j.renderPass==="offscreen"||j.renderPass==="translucent"){for(var H=j.context,Q=j.depthModeForSublayer(0,pt.ReadOnly),ie=j.colorModeForRenderPass(),ue=j.renderPass==="translucent"?j.stencilConfigForOverlap(D):[{},D],_e=ue[0],Ie=0,ze=ue[1];Ie<ze.length;Ie+=1){var He=ze[Ie],Ye=Y.getTile(He);Ye.needsHillshadePrepare&&j.renderPass==="offscreen"?jl(j,Ye,G,Q,We.disabled,ie):j.renderPass==="translucent"&&Ss(j,Ye,G,Q,_e[He.overscaledZ],ie)}H.viewport.set([0,0,j.width,j.height])}},raster:function(j,Y,G,D){if(j.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&D.length)for(var H=j.context,Q=H.gl,ie=Y.getSource(),ue=j.useProgram("raster"),_e=j.colorModeForRenderPass(),Ie=ie instanceof B?[{},D]:j.stencilConfigForOverlap(D),ze=Ie[0],He=Ie[1],Ye=He[He.length-1].overscaledZ,nt=!j.options.moving,ft=0,gt=He;ft<gt.length;ft+=1){var Et=gt[ft],It=j.depthModeForSublayer(Et.overscaledZ-Ye,G.paint.get("raster-opacity")===1?pt.ReadWrite:pt.ReadOnly,Q.LESS),Lt=Y.getTile(Et),Bt=j.transform.calculatePosMatrix(Et.toUnwrapped(),nt);Lt.registerFadeDuration(G.paint.get("raster-fade-duration"));var Ot=Y.findLoadedParent(Et,0),Jt=Gs(Lt,Ot,Y,G,j.transform),Yt=void 0,Vt=void 0,dn=G.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;H.activeTexture.set(Q.TEXTURE0),Lt.texture.bind(dn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(Q.TEXTURE1),Ot?(Ot.texture.bind(dn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Yt=Math.pow(2,Ot.tileID.overscaledZ-Lt.tileID.overscaledZ),Vt=[Lt.tileID.canonical.x*Yt%1,Lt.tileID.canonical.y*Yt%1]):Lt.texture.bind(dn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var xn=Sl(Bt,Vt||[0,0],Yt||1,Jt,G);ie instanceof B?ue.draw(H,Q.TRIANGLES,It,We.disabled,_e,Ne.disabled,xn,G.id,ie.boundsBuffer,j.quadTriangleIndexBuffer,ie.boundsSegments):ue.draw(H,Q.TRIANGLES,It,ze[Et.overscaledZ],_e,Ne.disabled,xn,G.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}},background:function(j,Y,G){var D=G.paint.get("background-color"),H=G.paint.get("background-opacity");if(H!==0){var Q=j.context,ie=Q.gl,ue=j.transform,_e=ue.tileSize,Ie=G.paint.get("background-pattern");if(!j.isPatternMissing(Ie)){var ze=!Ie&&D.a===1&&H===1&&j.opaquePassEnabledForLayer()?"opaque":"translucent";if(j.renderPass===ze){var He=We.disabled,Ye=j.depthModeForSublayer(0,ze==="opaque"?pt.ReadWrite:pt.ReadOnly),nt=j.colorModeForRenderPass(),ft=j.useProgram(Ie?"backgroundPattern":"background"),gt=ue.coveringTiles({tileSize:_e});Ie&&(Q.activeTexture.set(ie.TEXTURE0),j.imageManager.bind(j.context));for(var Et=G.getCrossfadeParameters(),It=0,Lt=gt;It<Lt.length;It+=1){var Bt=Lt[It],Ot=j.transform.calculatePosMatrix(Bt.toUnwrapped()),Jt=Ie?nu(Ot,H,j,Ie,{tileID:Bt,tileSize:_e},Et):ks(Ot,H,D);ft.draw(Q,ie.TRIANGLES,Ye,He,nt,Ne.disabled,Jt,G.id,j.tileExtentBuffer,j.quadTriangleIndexBuffer,j.tileExtentSegments)}}}}},debug:function(j,Y,G){for(var D=0;D<G.length;D++)Ws(j,Y,G[D])},custom:function(j,Y,G){var D=j.context,H=G.implementation;if(j.renderPass==="offscreen"){var Q=H.prerender;Q&&(j.setCustomLayerDefaults(),D.setColorMode(j.colorModeForRenderPass()),Q.call(H,D.gl,j.transform.customLayerMatrix()),D.setDirty(),j.setBaseState())}else if(j.renderPass==="translucent"){j.setCustomLayerDefaults(),D.setColorMode(j.colorModeForRenderPass()),D.setStencilMode(We.disabled);var ie=H.renderingMode==="3d"?new pt(j.context.gl.LEQUAL,pt.ReadWrite,j.depthRangeFor3D):j.depthModeForSublayer(0,pt.ReadOnly);D.setDepthMode(ie),H.render(D.gl,j.transform.customLayerMatrix()),D.setDirty(),j.setBaseState(),D.bindFramebuffer.set(null)}}},oi=function(j,Y){this.context=new Xe(j),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zn,this.gpuTimers={}};oi.prototype.resize=function(j,Y){if(this.width=j*r.browser.devicePixelRatio,this.height=Y*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var G=0,D=this.style._order;G<D.length;G+=1){var H=D[G];this.style._layers[H].resize()}},oi.prototype.setup=function(){var j=this.context,Y=new r.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(r.EXTENT,0),Y.emplaceBack(0,r.EXTENT),Y.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(Y,Jn.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var G=new r.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(r.EXTENT,0),G.emplaceBack(0,r.EXTENT),G.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=j.createVertexBuffer(G,Jn.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var D=new r.StructArrayLayout4i8;D.emplaceBack(0,0,0,0),D.emplaceBack(r.EXTENT,0,r.EXTENT,0),D.emplaceBack(0,r.EXTENT,0,r.EXTENT),D.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(D,W.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var H=new r.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(1,0),H.emplaceBack(0,1),H.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(H,Jn.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var Q=new r.StructArrayLayout1ui2;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(Q);var ie=new r.StructArrayLayout3ui6;ie.emplaceBack(0,1,2),ie.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(ie),this.emptyTexture=new r.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var ue=this.context.gl;this.stencilClearMode=new We({func:ue.ALWAYS,mask:0},0,255,ue.ZERO,ue.ZERO,ue.ZERO)},oi.prototype.clearStencil=function(){var j=this.context,Y=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var G=r.create();r.ortho(G,0,this.width,this.height,0,0,1),r.scale(G,G,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,Y.TRIANGLES,pt.disabled,this.stencilClearMode,Ze.disabled,Ne.disabled,cs(G),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},oi.prototype._renderTileClippingMasks=function(j,Y){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&Y&&Y.length){this.currentStencilSource=j.source;var G=this.context,D=G.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),G.setColorMode(Ze.disabled),G.setDepthMode(pt.disabled);var H=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Q=0,ie=Y;Q<ie.length;Q+=1){var ue=ie[Q],_e=this._tileClippingMaskIDs[ue.key]=this.nextStencilID++;H.draw(G,D.TRIANGLES,pt.disabled,new We({func:D.ALWAYS,mask:0},_e,255,D.KEEP,D.KEEP,D.REPLACE),Ze.disabled,Ne.disabled,cs(ue.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},oi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,Y=this.context.gl;return new We({func:Y.NOTEQUAL,mask:255},j,255,Y.KEEP,Y.KEEP,Y.REPLACE)},oi.prototype.stencilModeForClipping=function(j){var Y=this.context.gl;return new We({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},oi.prototype.stencilConfigForOverlap=function(j){var Y,G=this.context.gl,D=j.sort(function(_e,Ie){return Ie.overscaledZ-_e.overscaledZ}),H=D[D.length-1].overscaledZ,Q=D[0].overscaledZ-H+1;if(Q>1){this.currentStencilSource=void 0,this.nextStencilID+Q>256&&this.clearStencil();for(var ie={},ue=0;ue<Q;ue++)ie[ue+H]=new We({func:G.GEQUAL,mask:255},ue+this.nextStencilID,255,G.KEEP,G.KEEP,G.REPLACE);return this.nextStencilID+=Q,[ie,D]}return[(Y={},Y[H]=We.disabled,Y),D]},oi.prototype.colorModeForRenderPass=function(){var j=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new Ze([j.CONSTANT_COLOR,j.ONE],new r.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Ze.unblended:Ze.alphaBlended},oi.prototype.depthModeForSublayer=function(j,Y,G){if(!this.opaquePassEnabledForLayer())return pt.disabled;var D=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new pt(G||this.context.gl.LEQUAL,Y,[D,D])},oi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},oi.prototype.render=function(j,Y){var G=this;this.style=j,this.options=Y,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var D=this.style._order,H=this.style.sourceCaches;for(var Q in H){var ie=H[Q];ie.used&&ie.prepare(this.context)}var ue,_e,Ie={},ze={},He={};for(var Ye in H){var nt=H[Ye];Ie[Ye]=nt.getVisibleCoordinates(),ze[Ye]=Ie[Ye].slice().reverse(),He[Ye]=nt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ft=0;ft<D.length;ft++){var gt=D[ft];if(this.style._layers[gt].is3D()){this.opaquePassCutoff=ft;break}}this.renderPass="offscreen";for(var Et=0,It=D;Et<It.length;Et+=1){var Lt=It[Et],Bt=this.style._layers[Lt];if(Bt.hasOffscreenPass()&&!Bt.isHidden(this.transform.zoom)){var Ot=ze[Bt.source];(Bt.type==="custom"||Ot.length)&&this.renderLayer(this,H[Bt.source],Bt,Ot)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=D.length-1;this.currentLayer>=0;this.currentLayer--){var Jt=this.style._layers[D[this.currentLayer]],Yt=H[Jt.source],Vt=Ie[Jt.source];this._renderTileClippingMasks(Jt,Vt),this.renderLayer(this,Yt,Jt,Vt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<D.length;this.currentLayer++){var dn=this.style._layers[D[this.currentLayer]],xn=H[dn.source],En=(dn.type==="symbol"?He:ze)[dn.source];this._renderTileClippingMasks(dn,Ie[dn.source]),this.renderLayer(this,xn,dn,En)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(In){In.source&&!In.isHidden(G.transform.zoom)&&(In.source!==(_e&&_e.id)&&(_e=G.style.sourceCaches[In.source]),(!ue||ue.getSource().maxzoom<_e.getSource().maxzoom)&&(ue=_e))}),ue&&pl.debug(this,ue,ue.getVisibleCoordinates())),this.options.showPadding&&vs(this),this.context.setDefault()},oi.prototype.renderLayer=function(j,Y,G,D){G.isHidden(this.transform.zoom)||(G.type==="background"||G.type==="custom"||D.length)&&(this.id=G.id,this.gpuTimingStart(G),pl[G.type](j,Y,G,D,this.style.placement.variableOffsets),this.gpuTimingEnd())},oi.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,G=this.gpuTimers[j.id];G||(G=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),G.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,G.query)}},oi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},oi.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},oi.prototype.queryGpuTimers=function(j){var Y={};for(var G in j){var D=j[G],H=this.context.extTimerQuery,Q=H.getQueryObjectEXT(D.query,H.QUERY_RESULT_EXT)/1e6;H.deleteQueryEXT(D.query),Y[G]=Q}return Y},oi.prototype.translatePosMatrix=function(j,Y,G,D,H){if(!G[0]&&!G[1])return j;var Q=H?D==="map"?this.transform.angle:0:D==="viewport"?-this.transform.angle:0;if(Q){var ie=Math.sin(Q),ue=Math.cos(Q);G=[G[0]*ue-G[1]*ie,G[0]*ie+G[1]*ue]}var _e=[H?G[0]:Kn(Y,G[0],this.transform.zoom),H?G[1]:Kn(Y,G[1],this.transform.zoom),0],Ie=new Float32Array(16);return r.translate(Ie,j,_e),Ie},oi.prototype.saveTileTexture=function(j){var Y=this._tileTextures[j.size[0]];Y?Y.push(j):this._tileTextures[j.size[0]]=[j]},oi.prototype.getTileTexture=function(j){var Y=this._tileTextures[j];return Y&&Y.length>0?Y.pop():null},oi.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var Y=this.imageManager.getPattern(j.from.toString()),G=this.imageManager.getPattern(j.to.toString());return!Y||!G},oi.prototype.useProgram=function(j,Y){this.cache=this.cache||{};var G=""+j+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[G]||(this.cache[G]=new eo(this.context,j,Fi[j],Y,ul[j],this._showOverdrawInspector)),this.cache[G]},oi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},oi.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},oi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var j=this.context.gl;this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,j.RGBA)}},oi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Xo=function(j,Y){this.points=j,this.planes=Y};Xo.fromInvProjectionMatrix=function(j,Y,G){var D=Math.pow(2,G),H=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ie){return r.transformMat4([],ie,j)}).map(function(ie){return r.scale$1([],ie,1/ie[3]/Y*D)}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ie){var ue=r.sub([],H[ie[0]],H[ie[1]]),_e=r.sub([],H[ie[2]],H[ie[1]]),Ie=r.normalize([],r.cross([],ue,_e)),ze=-r.dot(Ie,H[ie[1]]);return Ie.concat(ze)});return new Xo(H,Q)};var oa=function(j,Y){this.min=j,this.max=Y,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};oa.prototype.quadrant=function(j){for(var Y=[j%2==0,j<2],G=r.clone$2(this.min),D=r.clone$2(this.max),H=0;H<Y.length;H++)G[H]=Y[H]?this.min[H]:this.center[H],D[H]=Y[H]?this.center[H]:this.max[H];return D[2]=this.max[2],new oa(G,D)},oa.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},oa.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},oa.prototype.intersects=function(j){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],G=!0,D=0;D<j.planes.length;D++){for(var H=j.planes[D],Q=0,ie=0;ie<Y.length;ie++)Q+=r.dot$1(H,Y[ie])>=0;if(Q===0)return 0;Q!==Y.length&&(G=!1)}if(G)return 2;for(var ue=0;ue<3;ue++){for(var _e=Number.MAX_VALUE,Ie=-Number.MAX_VALUE,ze=0;ze<j.points.length;ze++){var He=j.points[ze][ue]-this.min[ue];_e=Math.min(_e,He),Ie=Math.max(Ie,He)}if(Ie<0||_e>this.max[ue]-this.min[ue])return 0}return 1};var ro=function(j,Y,G,D){if(j===void 0&&(j=0),Y===void 0&&(Y=0),G===void 0&&(G=0),D===void 0&&(D=0),isNaN(j)||j<0||isNaN(Y)||Y<0||isNaN(G)||G<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=j,this.bottom=Y,this.left=G,this.right=D};ro.prototype.interpolate=function(j,Y,G){return Y.top!=null&&j.top!=null&&(this.top=r.number(j.top,Y.top,G)),Y.bottom!=null&&j.bottom!=null&&(this.bottom=r.number(j.bottom,Y.bottom,G)),Y.left!=null&&j.left!=null&&(this.left=r.number(j.left,Y.left,G)),Y.right!=null&&j.right!=null&&(this.right=r.number(j.right,Y.right,G)),this},ro.prototype.getCenter=function(j,Y){var G=r.clamp((this.left+j-this.right)/2,0,j),D=r.clamp((this.top+Y-this.bottom)/2,0,Y);return new r.Point(G,D)},ro.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},ro.prototype.clone=function(){return new ro(this.top,this.bottom,this.left,this.right)},ro.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Kr=function(j,Y,G,D,H){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=H===void 0||H,this._minZoom=j||0,this._maxZoom=Y||22,this._minPitch=G??0,this._maxPitch=D??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ro,this._posMatrixCache={},this._alignedPosMatrixCache={}},ii={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Kr.prototype.clone=function(){var j=new Kr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},ii.minZoom.get=function(){return this._minZoom},ii.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},ii.maxZoom.get=function(){return this._maxZoom},ii.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},ii.minPitch.get=function(){return this._minPitch},ii.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},ii.maxPitch.get=function(){return this._maxPitch},ii.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},ii.renderWorldCopies.get=function(){return this._renderWorldCopies},ii.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},ii.worldSize.get=function(){return this.tileSize*this.scale},ii.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ii.size.get=function(){return new r.Point(this.width,this.height)},ii.bearing.get=function(){return-this.angle/Math.PI*180},ii.bearing.set=function(j){var Y=-r.wrap(j,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ii.pitch.get=function(){return this._pitch/Math.PI*180},ii.pitch.set=function(j){var Y=r.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},ii.fov.get=function(){return this._fov/Math.PI*180},ii.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},ii.zoom.get=function(){return this._zoom},ii.zoom.set=function(j){var Y=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},ii.center.get=function(){return this._center},ii.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},ii.padding.get=function(){return this._edgeInsets.toJSON()},ii.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},ii.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Kr.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Kr.prototype.interpolatePadding=function(j,Y,G){this._unmodified=!1,this._edgeInsets.interpolate(j,Y,G),this._constrain(),this._calcMatrices()},Kr.prototype.coveringZoomLevel=function(j){var Y=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,Y)},Kr.prototype.getVisibleUnwrappedCoordinates=function(j){var Y=[new r.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var G=this.pointCoordinate(new r.Point(0,0)),D=this.pointCoordinate(new r.Point(this.width,0)),H=this.pointCoordinate(new r.Point(this.width,this.height)),Q=this.pointCoordinate(new r.Point(0,this.height)),ie=Math.floor(Math.min(G.x,D.x,H.x,Q.x)),ue=Math.floor(Math.max(G.x,D.x,H.x,Q.x)),_e=ie-1;_e<=ue+1;_e++)_e!==0&&Y.push(new r.UnwrappedTileID(_e,j));return Y},Kr.prototype.coveringTiles=function(j){var Y=this.coveringZoomLevel(j),G=Y;if(j.minzoom!==void 0&&Y<j.minzoom)return[];j.maxzoom!==void 0&&Y>j.maxzoom&&(Y=j.maxzoom);var D=r.MercatorCoordinate.fromLngLat(this.center),H=Math.pow(2,Y),Q=[H*D.x,H*D.y,0],ie=Xo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),ue=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ue=Y);var _e=function(En){return{aabb:new oa([En*H,0,0],[(En+1)*H,H,0]),zoom:0,x:0,y:0,wrap:En,fullyVisible:!1}},Ie=[],ze=[],He=Y,Ye=j.reparseOverscaled?G:Y;if(this._renderWorldCopies)for(var nt=1;nt<=3;nt++)Ie.push(_e(-nt)),Ie.push(_e(nt));for(Ie.push(_e(0));Ie.length>0;){var ft=Ie.pop(),gt=ft.x,Et=ft.y,It=ft.fullyVisible;if(!It){var Lt=ft.aabb.intersects(ie);if(Lt===0)continue;It=Lt===2}var Bt=ft.aabb.distanceX(Q),Ot=ft.aabb.distanceY(Q),Jt=Math.max(Math.abs(Bt),Math.abs(Ot)),Yt=3+(1<<He-ft.zoom)-2;if(ft.zoom===He||Jt>Yt&&ft.zoom>=ue)ze.push({tileID:new r.OverscaledTileID(ft.zoom===He?Ye:ft.zoom,ft.wrap,ft.zoom,gt,Et),distanceSq:r.sqrLen([Q[0]-.5-gt,Q[1]-.5-Et])});else for(var Vt=0;Vt<4;Vt++){var dn=(gt<<1)+Vt%2,xn=(Et<<1)+(Vt>>1);Ie.push({aabb:ft.aabb.quadrant(Vt),zoom:ft.zoom+1,x:dn,y:xn,wrap:ft.wrap,fullyVisible:It})}}return ze.sort(function(En,In){return En.distanceSq-In.distanceSq}).map(function(En){return En.tileID})},Kr.prototype.resize=function(j,Y){this.width=j,this.height=Y,this.pixelsToGLUnits=[2/j,-2/Y],this._constrain(),this._calcMatrices()},ii.unmodified.get=function(){return this._unmodified},Kr.prototype.zoomScale=function(j){return Math.pow(2,j)},Kr.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Kr.prototype.project=function(j){var Y=r.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(j.lng)*this.worldSize,r.mercatorYfromLat(Y)*this.worldSize)},Kr.prototype.unproject=function(j){return new r.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},ii.point.get=function(){return this.project(this.center)},Kr.prototype.setLocationAtPoint=function(j,Y){var G=this.pointCoordinate(Y),D=this.pointCoordinate(this.centerPoint),H=this.locationCoordinate(j),Q=new r.MercatorCoordinate(H.x-(G.x-D.x),H.y-(G.y-D.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())},Kr.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Kr.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Kr.prototype.locationCoordinate=function(j){return r.MercatorCoordinate.fromLngLat(j)},Kr.prototype.coordinateLocation=function(j){return j.toLngLat()},Kr.prototype.pointCoordinate=function(j){var Y=[j.x,j.y,0,1],G=[j.x,j.y,1,1];r.transformMat4(Y,Y,this.pixelMatrixInverse),r.transformMat4(G,G,this.pixelMatrixInverse);var D=Y[3],H=G[3],Q=Y[0]/D,ie=G[0]/H,ue=Y[1]/D,_e=G[1]/H,Ie=Y[2]/D,ze=G[2]/H,He=Ie===ze?0:(0-Ie)/(ze-Ie);return new r.MercatorCoordinate(r.number(Q,ie,He)/this.worldSize,r.number(ue,_e,He)/this.worldSize)},Kr.prototype.coordinatePoint=function(j){var Y=[j.x*this.worldSize,j.y*this.worldSize,0,1];return r.transformMat4(Y,Y,this.pixelMatrix),new r.Point(Y[0]/Y[3],Y[1]/Y[3])},Kr.prototype.getBounds=function(){return new r.LngLatBounds().extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},Kr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kr.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kr.prototype.calculatePosMatrix=function(j,Y){Y===void 0&&(Y=!1);var G=j.key,D=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(D[G])return D[G];var H=j.canonical,Q=this.worldSize/this.zoomScale(H.z),ie=H.x+Math.pow(2,H.z)*j.wrap,ue=r.identity(new Float64Array(16));return r.translate(ue,ue,[ie*Q,H.y*Q,0]),r.scale(ue,ue,[Q/r.EXTENT,Q/r.EXTENT,1]),r.multiply(ue,Y?this.alignedProjMatrix:this.projMatrix,ue),D[G]=new Float32Array(ue),D[G]},Kr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Kr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,Y,G,D,H=-90,Q=90,ie=-180,ue=180,_e=this.size,Ie=this._unmodified;if(this.latRange){var ze=this.latRange;H=r.mercatorYfromLat(ze[1])*this.worldSize,j=(Q=r.mercatorYfromLat(ze[0])*this.worldSize)-H<_e.y?_e.y/(Q-H):0}if(this.lngRange){var He=this.lngRange;ie=r.mercatorXfromLng(He[0])*this.worldSize,Y=(ue=r.mercatorXfromLng(He[1])*this.worldSize)-ie<_e.x?_e.x/(ue-ie):0}var Ye=this.point,nt=Math.max(Y||0,j||0);if(nt)return this.center=this.unproject(new r.Point(Y?(ue+ie)/2:Ye.x,j?(Q+H)/2:Ye.y)),this.zoom+=this.scaleZoom(nt),this._unmodified=Ie,void(this._constraining=!1);if(this.latRange){var ft=Ye.y,gt=_e.y/2;ft-gt<H&&(D=H+gt),ft+gt>Q&&(D=Q-gt)}if(this.lngRange){var Et=Ye.x,It=_e.x/2;Et-It<ie&&(G=ie+It),Et+It>ue&&(G=ue-It)}G===void 0&&D===void 0||(this.center=this.unproject(new r.Point(G!==void 0?G:Ye.x,D!==void 0?D:Ye.y))),this._unmodified=Ie,this._constraining=!1}},Kr.prototype._calcMatrices=function(){if(this.height){var j=this._fov/2,Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(j)*this.height;var G=Math.PI/2+this._pitch,D=this._fov*(.5+Y.y/this.height),H=Math.sin(D)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-G-D,.01,Math.PI-.01)),Q=this.point,ie=Q.x,ue=Q.y,_e=1.01*(Math.cos(Math.PI/2-this._pitch)*H+this.cameraToCenterDistance),Ie=this.height/50,ze=new Float64Array(16);r.perspective(ze,this._fov,this.width/this.height,Ie,_e),ze[8]=2*-Y.x/this.width,ze[9]=2*Y.y/this.height,r.scale(ze,ze,[1,-1,1]),r.translate(ze,ze,[0,0,-this.cameraToCenterDistance]),r.rotateX(ze,ze,this._pitch),r.rotateZ(ze,ze,this.angle),r.translate(ze,ze,[-ie,-ue,0]),this.mercatorMatrix=r.scale([],ze,[this.worldSize,this.worldSize,this.worldSize]),r.scale(ze,ze,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ze,this.invProjMatrix=r.invert([],this.projMatrix);var He=this.width%2/2,Ye=this.height%2/2,nt=Math.cos(this.angle),ft=Math.sin(this.angle),gt=ie-Math.round(ie)+nt*He+ft*Ye,Et=ue-Math.round(ue)+nt*Ye+ft*He,It=new Float64Array(ze);if(r.translate(It,It,[gt>.5?gt-1:gt,Et>.5?Et-1:Et,0]),this.alignedProjMatrix=It,ze=r.create(),r.scale(ze,ze,[this.width/2,-this.height/2,1]),r.translate(ze,ze,[1,-1,0]),this.labelPlaneMatrix=ze,ze=r.create(),r.scale(ze,ze,[1,-1,1]),r.translate(ze,ze,[-1,-1,0]),r.scale(ze,ze,[2/this.width,2/this.height,1]),this.glCoordMatrix=ze,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ze=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ze,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new r.Point(0,0)),Y=[j.x*this.worldSize,j.y*this.worldSize,0,1];return r.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},Kr.prototype.getCameraPoint=function(){var j=this._pitch,Y=Math.tan(j)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,Y))},Kr.prototype.getCameraQueryGeometry=function(j){var Y=this.getCameraPoint();if(j.length===1)return[j[0],Y];for(var G=Y.x,D=Y.y,H=Y.x,Q=Y.y,ie=0,ue=j;ie<ue.length;ie+=1){var _e=ue[ie];G=Math.min(G,_e.x),D=Math.min(D,_e.y),H=Math.max(H,_e.x),Q=Math.max(Q,_e.y)}return[new r.Point(G,D),new r.Point(H,D),new r.Point(H,Q),new r.Point(G,Q),new r.Point(G,D)]},Object.defineProperties(Kr.prototype,ii);var Ba=function(j){var Y,G,D,H,Q;this._hashName=j&&encodeURIComponent(j),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),G=300,D=!1,H=null,Q=function(){H=null,D&&(Y(),H=setTimeout(Q,G),D=!1)},function(){return D=!0,H||Q(),H})};Ba.prototype.addTo=function(j){return this._map=j,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ba.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ba.prototype.getHashString=function(j){var Y=this._map.getCenter(),G=Math.round(100*this._map.getZoom())/100,D=Math.ceil((G*Math.LN2+Math.log(512/360/.5))/Math.LN10),H=Math.pow(10,D),Q=Math.round(Y.lng*H)/H,ie=Math.round(Y.lat*H)/H,ue=this._map.getBearing(),_e=this._map.getPitch(),Ie="";if(Ie+=j?"/"+Q+"/"+ie+"/"+G:G+"/"+ie+"/"+Q,(ue||_e)&&(Ie+="/"+Math.round(10*ue)/10),_e&&(Ie+="/"+Math.round(_e)),this._hashName){var ze=this._hashName,He=!1,Ye=r.window.location.hash.slice(1).split("&").map(function(nt){var ft=nt.split("=")[0];return ft===ze?(He=!0,ft+"="+Ie):nt}).filter(function(nt){return nt});return He||Ye.push(ze+"="+Ie),"#"+Ye.join("&")}return"#"+Ie},Ba.prototype._getCurrentHash=function(){var j,Y=this,G=r.window.location.hash.replace("#","");return this._hashName?(G.split("&").map(function(D){return D.split("=")}).forEach(function(D){D[0]===Y._hashName&&(j=D)}),(j&&j[1]||"").split("/")):G.split("/")},Ba.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(G){return isNaN(G)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:Y,pitch:+(j[4]||0)}),!0}return!1},Ba.prototype._updateHashUnthrottled=function(){var j=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,j)}catch{}};var Ds={linearity:.3,easing:r.bezier(0,0,.3,1)},Ys=r.extend({deceleration:2500,maxSpeed:1400},Ds),dl=r.extend({deceleration:20,maxSpeed:1400},Ds),Zs=r.extend({deceleration:1e3,maxSpeed:360},Ds),Xs=r.extend({deceleration:1e3,maxSpeed:90},Ds),Ha=function(j){this._map=j,this.clear()};function Jo(j,Y){(!j.duration||j.duration<Y.duration)&&(j.duration=Y.duration,j.easing=Y.easing)}function Ko(j,Y,G){var D=G.maxSpeed,H=G.linearity,Q=G.deceleration,ie=r.clamp(j*H/(Y/1e3),-D,D),ue=Math.abs(ie)/(Q*H);return{easing:G.easing,duration:1e3*ue,amount:ie*(ue/2)}}Ha.prototype.clear=function(){this._inertiaBuffer=[]},Ha.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:j})},Ha.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,Y=r.browser.now();j.length>0&&Y-j[0].time>160;)j.shift()},Ha.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},G=0,D=this._inertiaBuffer;G<D.length;G+=1){var H=D[G].settings;Y.zoom+=H.zoomDelta||0,Y.bearing+=H.bearingDelta||0,Y.pitch+=H.pitchDelta||0,H.panDelta&&Y.pan._add(H.panDelta),H.around&&(Y.around=H.around),H.pinchAround&&(Y.pinchAround=H.pinchAround)}var Q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ie={};if(Y.pan.mag()){var ue=Ko(Y.pan.mag(),Q,r.extend({},Ys,j||{}));ie.offset=Y.pan.mult(ue.amount/Y.pan.mag()),ie.center=this._map.transform.center,Jo(ie,ue)}if(Y.zoom){var _e=Ko(Y.zoom,Q,dl);ie.zoom=this._map.transform.zoom+_e.amount,Jo(ie,_e)}if(Y.bearing){var Ie=Ko(Y.bearing,Q,Zs);ie.bearing=this._map.transform.bearing+r.clamp(Ie.amount,-179,179),Jo(ie,Ie)}if(Y.pitch){var ze=Ko(Y.pitch,Q,Xs);ie.pitch=this._map.transform.pitch+ze.amount,Jo(ie,ze)}if(ie.zoom||ie.bearing){var He=Y.pinchAround===void 0?Y.around:Y.pinchAround;ie.around=He?this._map.unproject(He):this._map.getCenter()}return this.clear(),r.extend(ie,{noMoveStart:!0})}};var va=function(j){function Y(D,H,Q,ie){ie===void 0&&(ie={});var ue=b.mousePos(H.getCanvasContainer(),Q),_e=H.unproject(ue);j.call(this,D,r.extend({point:ue,lngLat:_e,originalEvent:Q},ie)),this._defaultPrevented=!1,this.target=H}j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y;var G={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,G),Y}(r.Event),Js=function(j){function Y(D,H,Q){var ie=D==="touchend"?Q.changedTouches:Q.touches,ue=b.touchPos(H.getCanvasContainer(),ie),_e=ue.map(function(He){return H.unproject(He)}),Ie=ue.reduce(function(He,Ye,nt,ft){return He.add(Ye.div(ft.length))},new r.Point(0,0)),ze=H.unproject(Ie);j.call(this,D,{points:ue,point:Ie,lngLats:_e,lngLat:ze,originalEvent:Q}),this._defaultPrevented=!1}j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y;var G={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,G),Y}(r.Event),Ga=function(j){function Y(D,H,Q){j.call(this,D,{originalEvent:Q}),this._defaultPrevented=!1}j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y;var G={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,G),Y}(r.Event),Yi=function(j,Y){this._map=j,this._clickTolerance=Y.clickTolerance};Yi.prototype.reset=function(){delete this._mousedownPos},Yi.prototype.wheel=function(j){return this._firePreventable(new Ga(j.type,this._map,j))},Yi.prototype.mousedown=function(j,Y){return this._mousedownPos=Y,this._firePreventable(new va(j.type,this._map,j))},Yi.prototype.mouseup=function(j){this._map.fire(new va(j.type,this._map,j))},Yi.prototype.click=function(j,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new va(j.type,this._map,j))},Yi.prototype.dblclick=function(j){return this._firePreventable(new va(j.type,this._map,j))},Yi.prototype.mouseover=function(j){this._map.fire(new va(j.type,this._map,j))},Yi.prototype.mouseout=function(j){this._map.fire(new va(j.type,this._map,j))},Yi.prototype.touchstart=function(j){return this._firePreventable(new Js(j.type,this._map,j))},Yi.prototype.touchmove=function(j){this._map.fire(new Js(j.type,this._map,j))},Yi.prototype.touchend=function(j){this._map.fire(new Js(j.type,this._map,j))},Yi.prototype.touchcancel=function(j){this._map.fire(new Js(j.type,this._map,j))},Yi.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},Yi.prototype.isEnabled=function(){return!0},Yi.prototype.isActive=function(){return!1},Yi.prototype.enable=function(){},Yi.prototype.disable=function(){};var $i=function(j){this._map=j};$i.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},$i.prototype.mousemove=function(j){this._map.fire(new va(j.type,this._map,j))},$i.prototype.mousedown=function(){this._delayContextMenu=!0},$i.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new va("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},$i.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new va(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},$i.prototype.isEnabled=function(){return!0},$i.prototype.isActive=function(){return!1},$i.prototype.enable=function(){},$i.prototype.disable=function(){};var hi=function(j,Y){this._map=j,this._el=j.getCanvasContainer(),this._container=j.getContainer(),this._clickTolerance=Y.clickTolerance||1};function Qi(j,Y){for(var G={},D=0;D<j.length;D++)G[j[D].identifier]=Y[D];return G}hi.prototype.isEnabled=function(){return!!this._enabled},hi.prototype.isActive=function(){return!!this._active},hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hi.prototype.mousedown=function(j,Y){this.isEnabled()&&j.shiftKey&&j.button===0&&(b.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},hi.prototype.mousemoveWindow=function(j,Y){if(this._active){var G=Y;if(!(this._lastPos.equals(G)||!this._box&&G.dist(this._startPos)<this._clickTolerance)){var D=this._startPos;this._lastPos=G,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var H=Math.min(D.x,G.x),Q=Math.max(D.x,G.x),ie=Math.min(D.y,G.y),ue=Math.max(D.y,G.y);b.setTransform(this._box,"translate("+H+"px,"+ie+"px)"),this._box.style.width=Q-H+"px",this._box.style.height=ue-ie+"px"}}},hi.prototype.mouseupWindow=function(j,Y){var G=this;if(this._active&&j.button===0){var D=this._startPos,H=Y;if(this.reset(),b.suppressClick(),D.x!==H.x||D.y!==H.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(D,H,G._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},hi.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},hi.prototype._fireEvent=function(j,Y){return this._map.fire(new r.Event(j,{originalEvent:Y}))};var wo=function(j){this.reset(),this.numTouches=j.numTouches};wo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},wo.prototype.touchstart=function(j,Y,G){(this.centroid||G.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),G.length===this.numTouches&&(this.centroid=function(D){for(var H=new r.Point(0,0),Q=0,ie=D;Q<ie.length;Q+=1){var ue=ie[Q];H._add(ue)}return H.div(D.length)}(Y),this.touches=Qi(G,Y)))},wo.prototype.touchmove=function(j,Y,G){if(!this.aborted&&this.centroid){var D=Qi(G,Y);for(var H in this.touches){var Q=this.touches[H],ie=D[H];(!ie||ie.dist(Q)>30)&&(this.aborted=!0)}}},wo.prototype.touchend=function(j,Y,G){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),G.length===0){var D=!this.aborted&&this.centroid;if(this.reset(),D)return D}};var ms=function(j){this.singleTap=new wo(j),this.numTaps=j.numTaps,this.reset()};ms.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ms.prototype.touchstart=function(j,Y,G){this.singleTap.touchstart(j,Y,G)},ms.prototype.touchmove=function(j,Y,G){this.singleTap.touchmove(j,Y,G)},ms.prototype.touchend=function(j,Y,G){var D=this.singleTap.touchend(j,Y,G);if(D){var H=j.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(D)<30;if(H&&Q||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=D,this.count===this.numTaps)return this.reset(),D}};var io=function(){this._zoomIn=new ms({numTouches:1,numTaps:2}),this._zoomOut=new ms({numTouches:2,numTaps:1}),this.reset()};io.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},io.prototype.touchstart=function(j,Y,G){this._zoomIn.touchstart(j,Y,G),this._zoomOut.touchstart(j,Y,G)},io.prototype.touchmove=function(j,Y,G){this._zoomIn.touchmove(j,Y,G),this._zoomOut.touchmove(j,Y,G)},io.prototype.touchend=function(j,Y,G){var D=this,H=this._zoomIn.touchend(j,Y,G),Q=this._zoomOut.touchend(j,Y,G);return H?(this._active=!0,j.preventDefault(),setTimeout(function(){return D.reset()},0),{cameraAnimation:function(ie){return ie.easeTo({duration:300,zoom:ie.getZoom()+1,around:ie.unproject(H)},{originalEvent:j})}}):Q?(this._active=!0,j.preventDefault(),setTimeout(function(){return D.reset()},0),{cameraAnimation:function(ie){return ie.easeTo({duration:300,zoom:ie.getZoom()-1,around:ie.unproject(Q)},{originalEvent:j})}}):void 0},io.prototype.touchcancel=function(){this.reset()},io.prototype.enable=function(){this._enabled=!0},io.prototype.disable=function(){this._enabled=!1,this.reset()},io.prototype.isEnabled=function(){return this._enabled},io.prototype.isActive=function(){return this._active};var $o={};$o[0]=1,$o[2]=2;var _a=function(j){this.reset(),this._clickTolerance=j.clickTolerance||1};_a.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},_a.prototype._correctButton=function(j,Y){return!1},_a.prototype._move=function(j,Y){return{}},_a.prototype.mousedown=function(j,Y){if(!this._lastPoint){var G=b.mouseButton(j);this._correctButton(j,G)&&(this._lastPoint=Y,this._eventButton=G)}},_a.prototype.mousemoveWindow=function(j,Y){var G=this._lastPoint;if(G){if(j.preventDefault(),function(D,H){var Q=$o[H];return D.buttons===void 0||(D.buttons&Q)!==Q}(j,this._eventButton))this.reset();else if(this._moved||!(Y.dist(G)<this._clickTolerance))return this._moved=!0,this._lastPoint=Y,this._move(G,Y)}},_a.prototype.mouseupWindow=function(j){this._lastPoint&&b.mouseButton(j)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},_a.prototype.enable=function(){this._enabled=!0},_a.prototype.disable=function(){this._enabled=!1,this.reset()},_a.prototype.isEnabled=function(){return this._enabled},_a.prototype.isActive=function(){return this._active};var xs=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(G,D){j.prototype.mousedown.call(this,G,D),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(G,D){return D===0&&!G.ctrlKey},Y.prototype._move=function(G,D){return{around:D,panDelta:D.sub(G)}},Y}(_a),Po=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(G,D){return D===0&&G.ctrlKey||D===2},Y.prototype._move=function(G,D){var H=.8*(D.x-G.x);if(H)return this._active=!0,{bearingDelta:H}},Y.prototype.contextmenu=function(G){G.preventDefault()},Y}(_a),Wa=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(G,D){return D===0&&G.ctrlKey||D===2},Y.prototype._move=function(G,D){var H=-.5*(D.y-G.y);if(H)return this._active=!0,{pitchDelta:H}},Y.prototype.contextmenu=function(G){G.preventDefault()},Y}(_a),Ya=function(j){this._minTouches=1,this._clickTolerance=j.clickTolerance||1,this.reset()};Ya.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},Ya.prototype.touchstart=function(j,Y,G){return this._calculateTransform(j,Y,G)},Ya.prototype.touchmove=function(j,Y,G){if(this._active&&!(G.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,Y,G)},Ya.prototype.touchend=function(j,Y,G){this._calculateTransform(j,Y,G),this._active&&G.length<this._minTouches&&this.reset()},Ya.prototype.touchcancel=function(){this.reset()},Ya.prototype._calculateTransform=function(j,Y,G){G.length>0&&(this._active=!0);var D=Qi(G,Y),H=new r.Point(0,0),Q=new r.Point(0,0),ie=0;for(var ue in D){var _e=D[ue],Ie=this._touches[ue];Ie&&(H._add(_e),Q._add(_e.sub(Ie)),ie++,D[ue]=_e)}if(this._touches=D,!(ie<this._minTouches)&&Q.mag()){var ze=Q.div(ie);if(this._sum._add(ze),!(this._sum.mag()<this._clickTolerance))return{around:H.div(ie),panDelta:ze}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active};var pi=function(){this.reset()};function ao(j,Y,G){for(var D=0;D<j.length;D++)if(j[D].identifier===G)return Y[D]}pi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},pi.prototype._start=function(j){},pi.prototype._move=function(j,Y,G){return{}},pi.prototype.touchstart=function(j,Y,G){this._firstTwoTouches||G.length<2||(this._firstTwoTouches=[G[0].identifier,G[1].identifier],this._start([Y[0],Y[1]]))},pi.prototype.touchmove=function(j,Y,G){if(this._firstTwoTouches){j.preventDefault();var D=this._firstTwoTouches,H=D[0],Q=D[1],ie=ao(G,Y,H),ue=ao(G,Y,Q);if(ie&&ue){var _e=this._aroundCenter?null:ie.add(ue).div(2);return this._move([ie,ue],_e,j)}}},pi.prototype.touchend=function(j,Y,G){if(this._firstTwoTouches){var D=this._firstTwoTouches,H=D[0],Q=D[1],ie=ao(G,Y,H),ue=ao(G,Y,Q);ie&&ue||(this._active&&b.suppressClick(),this.reset())}},pi.prototype.touchcancel=function(){this.reset()},pi.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},pi.prototype.disable=function(){this._enabled=!1,this.reset()},pi.prototype.isEnabled=function(){return this._enabled},pi.prototype.isActive=function(){return this._active};function Sr(j,Y){return Math.log(j/Y)/Math.LN2}var Ks=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(G){this._startDistance=this._distance=G[0].dist(G[1])},Y.prototype._move=function(G,D){var H=this._distance;if(this._distance=G[0].dist(G[1]),this._active||!(Math.abs(Sr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sr(this._distance,H),pinchAround:D}},Y}(pi);function El(j,Y){return 180*j.angleWith(Y)/Math.PI}var Qo=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(G){this._startVector=this._vector=G[0].sub(G[1]),this._minDiameter=G[0].dist(G[1])},Y.prototype._move=function(G,D){var H=this._vector;if(this._vector=G[0].sub(G[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:El(this._vector,H),pinchAround:D}},Y.prototype._isBelowThreshold=function(G){this._minDiameter=Math.min(this._minDiameter,G.mag());var D=25/(Math.PI*this._minDiameter)*360,H=El(G,this._startVector);return Math.abs(H)<D},Y}(pi);function es(j){return Math.abs(j.y)>Math.abs(j.x)}var bs=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(G){this._lastPoints=G,es(G[0].sub(G[1]))&&(this._valid=!1)},Y.prototype._move=function(G,D,H){var Q=G[0].sub(this._lastPoints[0]),ie=G[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Q,ie,H.timeStamp),this._valid)return this._lastPoints=G,this._active=!0,{pitchDelta:(Q.y+ie.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(G,D,H){if(this._valid!==void 0)return this._valid;var Q=G.mag()>=2,ie=D.mag()>=2;if(Q||ie){if(!Q||!ie)return this._firstMove===void 0&&(this._firstMove=H),H-this._firstMove<100&&void 0;var ue=G.y>0==D.y>0;return es(G)&&es(D)&&ue}},Y}(pi),Ls={panStep:100,bearingStep:15,pitchStep:10},br=function(){var j=Ls;this._panStep=j.panStep,this._bearingStep=j.bearingStep,this._pitchStep=j.pitchStep,this._rotationDisabled=!1};function $s(j){return j*(2-j)}br.prototype.reset=function(){this._active=!1},br.prototype.keydown=function(j){var Y=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var G=0,D=0,H=0,Q=0,ie=0;switch(j.keyCode){case 61:case 107:case 171:case 187:G=1;break;case 189:case 109:case 173:G=-1;break;case 37:j.shiftKey?D=-1:(j.preventDefault(),Q=-1);break;case 39:j.shiftKey?D=1:(j.preventDefault(),Q=1);break;case 38:j.shiftKey?H=1:(j.preventDefault(),ie=-1);break;case 40:j.shiftKey?H=-1:(j.preventDefault(),ie=1);break;default:return}return this._rotationDisabled&&(D=0,H=0),{cameraAnimation:function(ue){var _e=ue.getZoom();ue.easeTo({duration:300,easeId:"keyboardHandler",easing:$s,zoom:G?Math.round(_e)+G*(j.shiftKey?2:1):_e,bearing:ue.getBearing()+D*Y._bearingStep,pitch:ue.getPitch()+H*Y._pitchStep,offset:[-Q*Y._panStep,-ie*Y._panStep],center:ue.getCenter()},{originalEvent:j})}}}},br.prototype.enable=function(){this._enabled=!0},br.prototype.disable=function(){this._enabled=!1,this.reset()},br.prototype.isEnabled=function(){return this._enabled},br.prototype.isActive=function(){return this._active},br.prototype.disableRotation=function(){this._rotationDisabled=!0},br.prototype.enableRotation=function(){this._rotationDisabled=!1};var Fo=4.000244140625,Zi=function(j,Y){this._map=j,this._el=j.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)};Zi.prototype.setZoomRate=function(j){this._defaultZoomRate=j},Zi.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},Zi.prototype.isEnabled=function(){return!!this._enabled},Zi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Zi.prototype.isZooming=function(){return!!this._zooming},Zi.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},Zi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Zi.prototype.wheel=function(j){if(this.isEnabled()){var Y=j.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,G=r.browser.now(),D=G-(this._lastWheelEventTime||0);this._lastWheelEventTime=G,Y!==0&&Y%Fo==0?this._type="wheel":Y!==0&&Math.abs(Y)<4?this._type="trackpad":D>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(D*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),j.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=j,this._delta-=Y,this._active||this._start(j)),j.preventDefault()}},Zi.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},Zi.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=b.mousePos(this._el,j);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Zi.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(this._delta!==0){var G=this._type==="wheel"&&Math.abs(this._delta)>Fo?this._wheelZoomRate:this._defaultZoomRate,D=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&D!==0&&(D=1/D);var H=typeof this._targetZoom=="number"?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(H*D))),this._type==="wheel"&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Q,ie=typeof this._targetZoom=="number"?this._targetZoom:Y.zoom,ue=this._startZoom,_e=this._easing,Ie=!1;if(this._type==="wheel"&&ue&&_e){var ze=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),He=_e(ze);Q=r.number(ue,ie,He),ze<1?this._frameId||(this._frameId=!0):Ie=!0}else Q=ie,Ie=!0;return this._active=!0,Ie&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ie,zoomDelta:Q-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Zi.prototype._smoothOutEasing=function(j){var Y=r.ease;if(this._prevEase){var G=this._prevEase,D=(r.browser.now()-G.start)/G.duration,H=G.easing(D+.01)-G.easing(D),Q=.27/Math.sqrt(H*H+1e-4)*.01,ie=Math.sqrt(.0729-Q*Q);Y=r.bezier(Q,ie,.25,1)}return this._prevEase={start:r.browser.now(),duration:j,easing:Y},Y},Zi.prototype.reset=function(){this._active=!1};var ts=function(j,Y){this._clickZoom=j,this._tapZoom=Y};ts.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ts.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ts.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ts.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var oo=function(){this.reset()};oo.prototype.reset=function(){this._active=!1},oo.prototype.dblclick=function(j,Y){return j.preventDefault(),{cameraAnimation:function(G){G.easeTo({duration:300,zoom:G.getZoom()+(j.shiftKey?-1:1),around:G.unproject(Y)},{originalEvent:j})}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};var Za=function(){this._tap=new ms({numTouches:1,numTaps:1}),this.reset()};Za.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Za.prototype.touchstart=function(j,Y,G){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?G.length>0&&(this._swipePoint=Y[0],this._swipeTouch=G[0].identifier):this._tap.touchstart(j,Y,G))},Za.prototype.touchmove=function(j,Y,G){if(this._tapTime){if(this._swipePoint){if(G[0].identifier!==this._swipeTouch)return;var D=Y[0],H=D.y-this._swipePoint.y;return this._swipePoint=D,j.preventDefault(),this._active=!0,{zoomDelta:H/128}}}else this._tap.touchmove(j,Y,G)},Za.prototype.touchend=function(j,Y,G){this._tapTime?this._swipePoint&&G.length===0&&this.reset():this._tap.touchend(j,Y,G)&&(this._tapTime=j.timeStamp)},Za.prototype.touchcancel=function(){this.reset()},Za.prototype.enable=function(){this._enabled=!0},Za.prototype.disable=function(){this._enabled=!1,this.reset()},Za.prototype.isEnabled=function(){return this._enabled},Za.prototype.isActive=function(){return this._active};var ga=function(j,Y,G){this._el=j,this._mousePan=Y,this._touchPan=G};ga.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ga.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ga.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ga.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var To=function(j,Y,G){this._pitchWithRotate=j.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=G};To.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},To.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},To.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},To.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xa=function(j,Y,G,D){this._el=j,this._touchZoom=Y,this._touchRotate=G,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};Xa.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var zo=function(j){return j.zoom||j.drag||j.pitch||j.rotate},Qs=function(j){function Y(){j.apply(this,arguments)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y}(r.Event);function ns(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Xr=function(j,Y){this._map=j,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ha(j),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),r.bindAll(["handleEvent","handleWindowEvent"],this);var G=this._el;this._listeners=[[G,"touchstart",{passive:!0}],[G,"touchmove",{passive:!1}],[G,"touchend",void 0],[G,"touchcancel",void 0],[G,"mousedown",void 0],[G,"mousemove",void 0],[G,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[G,"mouseover",void 0],[G,"mouseout",void 0],[G,"dblclick",void 0],[G,"click",void 0],[G,"keydown",{capture:!1}],[G,"keyup",void 0],[G,"wheel",{passive:!1}],[G,"contextmenu",void 0],[r.window,"blur",void 0]];for(var D=0,H=this._listeners;D<H.length;D+=1){var Q=H[D],ie=Q[0],ue=Q[1],_e=Q[2];b.addEventListener(ie,ue,ie===r.window.document?this.handleWindowEvent:this.handleEvent,_e)}};Xr.prototype.destroy=function(){for(var j=0,Y=this._listeners;j<Y.length;j+=1){var G=Y[j],D=G[0],H=G[1],Q=G[2];b.removeEventListener(D,H,D===r.window.document?this.handleWindowEvent:this.handleEvent,Q)}},Xr.prototype._addDefaultHandlers=function(j){var Y=this._map,G=Y.getCanvasContainer();this._add("mapEvent",new Yi(Y,j));var D=Y.boxZoom=new hi(Y,j);this._add("boxZoom",D);var H=new io,Q=new oo;Y.doubleClickZoom=new ts(Q,H),this._add("tapZoom",H),this._add("clickZoom",Q);var ie=new Za;this._add("tapDragZoom",ie);var ue=Y.touchPitch=new bs;this._add("touchPitch",ue);var _e=new Po(j),Ie=new Wa(j);Y.dragRotate=new To(j,_e,Ie),this._add("mouseRotate",_e,["mousePitch"]),this._add("mousePitch",Ie,["mouseRotate"]);var ze=new xs(j),He=new Ya(j);Y.dragPan=new ga(G,ze,He),this._add("mousePan",ze),this._add("touchPan",He,["touchZoom","touchRotate"]);var Ye=new Qo,nt=new Ks;Y.touchZoomRotate=new Xa(G,nt,Ye,ie),this._add("touchRotate",Ye,["touchPan","touchZoom"]),this._add("touchZoom",nt,["touchPan","touchRotate"]);var ft=Y.scrollZoom=new Zi(Y,this);this._add("scrollZoom",ft,["mousePan"]);var gt=Y.keyboard=new br;this._add("keyboard",gt),this._add("blockableMapEvent",new $i(Y));for(var Et=0,It=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Et<It.length;Et+=1){var Lt=It[Et];j.interactive&&j[Lt]&&Y[Lt].enable(j[Lt])}},Xr.prototype._add=function(j,Y,G){this._handlers.push({handlerName:j,handler:Y,allowed:G}),this._handlersById[j]=Y},Xr.prototype.stop=function(j){if(!this._updatingCamera){for(var Y=0,G=this._handlers;Y<G.length;Y+=1)G[Y].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Xr.prototype.isActive=function(){for(var j=0,Y=this._handlers;j<Y.length;j+=1)if(Y[j].handler.isActive())return!0;return!1},Xr.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Xr.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Xr.prototype.isMoving=function(){return!!zo(this._eventsInProgress)||this.isZooming()},Xr.prototype._blockedByActive=function(j,Y,G){for(var D in j)if(D!==G&&(!Y||Y.indexOf(D)<0))return!0;return!1},Xr.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Xr.prototype._getMapTouches=function(j){for(var Y=[],G=0,D=j;G<D.length;G+=1){var H=D[G],Q=H.target;this._el.contains(Q)&&Y.push(H)}return Y},Xr.prototype.handleEvent=function(j,Y){if(j.type!=="blur"){this._updatingCamera=!0;for(var G=j.type==="renderFrame"?void 0:j,D={needsRenderFrame:!1},H={},Q={},ie=j.touches?this._getMapTouches(j.touches):void 0,ue=ie?b.touchPos(this._el,ie):b.mousePos(this._el,j),_e=0,Ie=this._handlers;_e<Ie.length;_e+=1){var ze=Ie[_e],He=ze.handlerName,Ye=ze.handler,nt=ze.allowed;if(Ye.isEnabled()){var ft=void 0;this._blockedByActive(Q,nt,He)?Ye.reset():Ye[Y||j.type]&&(ft=Ye[Y||j.type](j,ue,ie),this.mergeHandlerResult(D,H,ft,He,G),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||Ye.isActive())&&(Q[He]=Ye)}}var gt={};for(var Et in this._previousActiveHandlers)Q[Et]||(gt[Et]=G);this._previousActiveHandlers=Q,(Object.keys(gt).length||ns(D))&&(this._changes.push([D,H,gt]),this._triggerRenderFrame()),(Object.keys(Q).length||ns(D))&&this._map._stop(!0),this._updatingCamera=!1;var It=D.cameraAnimation;It&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],It(this._map))}else this.stop(!0)},Xr.prototype.mergeHandlerResult=function(j,Y,G,D,H){if(G){r.extend(j,G);var Q={handlerName:D,originalEvent:G.originalEvent||H};G.zoomDelta!==void 0&&(Y.zoom=Q),G.panDelta!==void 0&&(Y.drag=Q),G.pitchDelta!==void 0&&(Y.pitch=Q),G.bearingDelta!==void 0&&(Y.rotate=Q)}},Xr.prototype._applyChanges=function(){for(var j={},Y={},G={},D=0,H=this._changes;D<H.length;D+=1){var Q=H[D],ie=Q[0],ue=Q[1],_e=Q[2];ie.panDelta&&(j.panDelta=(j.panDelta||new r.Point(0,0))._add(ie.panDelta)),ie.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+ie.zoomDelta),ie.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+ie.bearingDelta),ie.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+ie.pitchDelta),ie.around!==void 0&&(j.around=ie.around),ie.pinchAround!==void 0&&(j.pinchAround=ie.pinchAround),ie.noInertia&&(j.noInertia=ie.noInertia),r.extend(Y,ue),r.extend(G,_e)}this._updateMapTransform(j,Y,G),this._changes=[]},Xr.prototype._updateMapTransform=function(j,Y,G){var D=this._map,H=D.transform;if(!ns(j))return this._fireEvents(Y,G,!0);var Q=j.panDelta,ie=j.zoomDelta,ue=j.bearingDelta,_e=j.pitchDelta,Ie=j.around,ze=j.pinchAround;ze!==void 0&&(Ie=ze),D._stop(!0),Ie=Ie||D.transform.centerPoint;var He=H.pointLocation(Q?Ie.sub(Q):Ie);ue&&(H.bearing+=ue),_e&&(H.pitch+=_e),ie&&(H.zoom+=ie),H.setLocationAtPoint(He,Ie),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(Y,G,!0)},Xr.prototype._fireEvents=function(j,Y,G){var D=this,H=zo(this._eventsInProgress),Q=zo(j),ie={};for(var ue in j){var _e=j[ue].originalEvent;this._eventsInProgress[ue]||(ie[ue+"start"]=_e),this._eventsInProgress[ue]=j[ue]}for(var Ie in!H&&Q&&this._fireEvent("movestart",Q.originalEvent),ie)this._fireEvent(Ie,ie[Ie]);for(var ze in Q&&this._fireEvent("move",Q.originalEvent),j){var He=j[ze].originalEvent;this._fireEvent(ze,He)}var Ye,nt={};for(var ft in this._eventsInProgress){var gt=this._eventsInProgress[ft],Et=gt.handlerName,It=gt.originalEvent;this._handlersById[Et].isActive()||(delete this._eventsInProgress[ft],Ye=Y[Et]||It,nt[ft+"end"]=Ye)}for(var Lt in nt)this._fireEvent(Lt,nt[Lt]);var Bt=zo(this._eventsInProgress);if(G&&(H||Q)&&!Bt){this._updatingCamera=!0;var Ot=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Jt=function(Yt){return Yt!==0&&-D._bearingSnap<Yt&&Yt<D._bearingSnap};Ot?(Jt(Ot.bearing||this._map.getBearing())&&(Ot.bearing=0),this._map.easeTo(Ot,{originalEvent:Ye})):(this._map.fire(new r.Event("moveend",{originalEvent:Ye})),Jt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Xr.prototype._fireEvent=function(j,Y){this._map.fire(new r.Event(j,Y?{originalEvent:Y}:{}))},Xr.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(Y){delete j._frameId,j.handleEvent(new Qs("renderFrame",{timeStamp:Y})),j._applyChanges()})},Xr.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ea=function(j){function Y(G,D){j.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=D.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(G,D){return this.jumpTo({center:G},D)},Y.prototype.panBy=function(G,D,H){return G=r.Point.convert(G).mult(-1),this.panTo(this.transform.center,r.extend({offset:G},D),H)},Y.prototype.panTo=function(G,D,H){return this.easeTo(r.extend({center:G},D),H)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(G,D){return this.jumpTo({zoom:G},D),this},Y.prototype.zoomTo=function(G,D,H){return this.easeTo(r.extend({zoom:G},D),H)},Y.prototype.zoomIn=function(G,D){return this.zoomTo(this.getZoom()+1,G,D),this},Y.prototype.zoomOut=function(G,D){return this.zoomTo(this.getZoom()-1,G,D),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(G,D){return this.jumpTo({bearing:G},D),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(G,D){return this.jumpTo({padding:G},D),this},Y.prototype.rotateTo=function(G,D,H){return this.easeTo(r.extend({bearing:G},D),H)},Y.prototype.resetNorth=function(G,D){return this.rotateTo(0,r.extend({duration:1e3},G),D),this},Y.prototype.resetNorthPitch=function(G,D){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},G),D),this},Y.prototype.snapToNorth=function(G,D){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(G,D):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(G,D){return this.jumpTo({pitch:G},D),this},Y.prototype.cameraForBounds=function(G,D){G=r.LngLatBounds.convert(G);var H=D&&D.bearing||0;return this._cameraForBoxAndBearing(G.getNorthWest(),G.getSouthEast(),H,D)},Y.prototype._cameraForBoxAndBearing=function(G,D,H,Q){var ie={top:0,bottom:0,right:0,left:0};if(typeof(Q=r.extend({padding:ie,offset:[0,0],maxZoom:this.transform.maxZoom},Q)).padding=="number"){var ue=Q.padding;Q.padding={top:ue,bottom:ue,right:ue,left:ue}}Q.padding=r.extend(ie,Q.padding);var _e=this.transform,Ie=_e.padding,ze=_e.project(r.LngLat.convert(G)),He=_e.project(r.LngLat.convert(D)),Ye=ze.rotate(-H*Math.PI/180),nt=He.rotate(-H*Math.PI/180),ft=new r.Point(Math.max(Ye.x,nt.x),Math.max(Ye.y,nt.y)),gt=new r.Point(Math.min(Ye.x,nt.x),Math.min(Ye.y,nt.y)),Et=ft.sub(gt),It=(_e.width-(Ie.left+Ie.right+Q.padding.left+Q.padding.right))/Et.x,Lt=(_e.height-(Ie.top+Ie.bottom+Q.padding.top+Q.padding.bottom))/Et.y;if(!(Lt<0||It<0)){var Bt=Math.min(_e.scaleZoom(_e.scale*Math.min(It,Lt)),Q.maxZoom),Ot=typeof Q.offset.x=="number"?new r.Point(Q.offset.x,Q.offset.y):r.Point.convert(Q.offset),Jt=(Q.padding.left-Q.padding.right)/2,Yt=(Q.padding.top-Q.padding.bottom)/2,Vt=new r.Point(Jt,Yt).rotate(H*Math.PI/180),dn=Ot.add(Vt).mult(_e.scale/_e.zoomScale(Bt));return{center:_e.unproject(ze.add(He).div(2).sub(dn)),zoom:Bt,bearing:H}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(G,D,H){return this._fitInternal(this.cameraForBounds(G,D),D,H)},Y.prototype.fitScreenCoordinates=function(G,D,H,Q,ie){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(G)),this.transform.pointLocation(r.Point.convert(D)),H,Q),Q,ie)},Y.prototype._fitInternal=function(G,D,H){return G?(delete(D=r.extend(G,D)).padding,D.linear?this.easeTo(D,H):this.flyTo(D,H)):this},Y.prototype.jumpTo=function(G,D){this.stop();var H=this.transform,Q=!1,ie=!1,ue=!1;return"zoom"in G&&H.zoom!==+G.zoom&&(Q=!0,H.zoom=+G.zoom),G.center!==void 0&&(H.center=r.LngLat.convert(G.center)),"bearing"in G&&H.bearing!==+G.bearing&&(ie=!0,H.bearing=+G.bearing),"pitch"in G&&H.pitch!==+G.pitch&&(ue=!0,H.pitch=+G.pitch),G.padding==null||H.isPaddingEqual(G.padding)||(H.padding=G.padding),this.fire(new r.Event("movestart",D)).fire(new r.Event("move",D)),Q&&this.fire(new r.Event("zoomstart",D)).fire(new r.Event("zoom",D)).fire(new r.Event("zoomend",D)),ie&&this.fire(new r.Event("rotatestart",D)).fire(new r.Event("rotate",D)).fire(new r.Event("rotateend",D)),ue&&this.fire(new r.Event("pitchstart",D)).fire(new r.Event("pitch",D)).fire(new r.Event("pitchend",D)),this.fire(new r.Event("moveend",D))},Y.prototype.easeTo=function(G,D){var H=this;this._stop(!1,G.easeId),((G=r.extend({offset:[0,0],duration:500,easing:r.ease},G)).animate===!1||!G.essential&&r.browser.prefersReducedMotion)&&(G.duration=0);var Q=this.transform,ie=this.getZoom(),ue=this.getBearing(),_e=this.getPitch(),Ie=this.getPadding(),ze="zoom"in G?+G.zoom:ie,He="bearing"in G?this._normalizeBearing(G.bearing,ue):ue,Ye="pitch"in G?+G.pitch:_e,nt="padding"in G?G.padding:Q.padding,ft=r.Point.convert(G.offset),gt=Q.centerPoint.add(ft),Et=Q.pointLocation(gt),It=r.LngLat.convert(G.center||Et);this._normalizeCenter(It);var Lt,Bt,Ot=Q.project(Et),Jt=Q.project(It).sub(Ot),Yt=Q.zoomScale(ze-ie);G.around&&(Lt=r.LngLat.convert(G.around),Bt=Q.locationPoint(Lt));var Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ze!==ie,this._rotating=this._rotating||ue!==He,this._pitching=this._pitching||Ye!==_e,this._padding=!Q.isPaddingEqual(nt),this._easeId=G.easeId,this._prepareEase(D,G.noMoveStart,Vt),this._ease(function(dn){if(H._zooming&&(Q.zoom=r.number(ie,ze,dn)),H._rotating&&(Q.bearing=r.number(ue,He,dn)),H._pitching&&(Q.pitch=r.number(_e,Ye,dn)),H._padding&&(Q.interpolatePadding(Ie,nt,dn),gt=Q.centerPoint.add(ft)),Lt)Q.setLocationAtPoint(Lt,Bt);else{var xn=Q.zoomScale(Q.zoom-ie),En=ze>ie?Math.min(2,Yt):Math.max(.5,Yt),In=Math.pow(En,1-dn),Hn=Q.unproject(Ot.add(Jt.mult(dn*In)).mult(xn));Q.setLocationAtPoint(Q.renderWorldCopies?Hn.wrap():Hn,gt)}H._fireMoveEvents(D)},function(dn){H._afterEase(D,dn)},G),this},Y.prototype._prepareEase=function(G,D,H){H===void 0&&(H={}),this._moving=!0,D||H.moving||this.fire(new r.Event("movestart",G)),this._zooming&&!H.zooming&&this.fire(new r.Event("zoomstart",G)),this._rotating&&!H.rotating&&this.fire(new r.Event("rotatestart",G)),this._pitching&&!H.pitching&&this.fire(new r.Event("pitchstart",G))},Y.prototype._fireMoveEvents=function(G){this.fire(new r.Event("move",G)),this._zooming&&this.fire(new r.Event("zoom",G)),this._rotating&&this.fire(new r.Event("rotate",G)),this._pitching&&this.fire(new r.Event("pitch",G))},Y.prototype._afterEase=function(G,D){if(!this._easeId||!D||this._easeId!==D){delete this._easeId;var H=this._zooming,Q=this._rotating,ie=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,H&&this.fire(new r.Event("zoomend",G)),Q&&this.fire(new r.Event("rotateend",G)),ie&&this.fire(new r.Event("pitchend",G)),this.fire(new r.Event("moveend",G))}},Y.prototype.flyTo=function(G,D){var H=this;if(!G.essential&&r.browser.prefersReducedMotion){var Q=r.pick(G,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Q,D)}this.stop(),G=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},G);var ie=this.transform,ue=this.getZoom(),_e=this.getBearing(),Ie=this.getPitch(),ze=this.getPadding(),He="zoom"in G?r.clamp(+G.zoom,ie.minZoom,ie.maxZoom):ue,Ye="bearing"in G?this._normalizeBearing(G.bearing,_e):_e,nt="pitch"in G?+G.pitch:Ie,ft="padding"in G?G.padding:ie.padding,gt=ie.zoomScale(He-ue),Et=r.Point.convert(G.offset),It=ie.centerPoint.add(Et),Lt=ie.pointLocation(It),Bt=r.LngLat.convert(G.center||Lt);this._normalizeCenter(Bt);var Ot=ie.project(Lt),Jt=ie.project(Bt).sub(Ot),Yt=G.curve,Vt=Math.max(ie.width,ie.height),dn=Vt/gt,xn=Jt.mag();if("minZoom"in G){var En=r.clamp(Math.min(G.minZoom,ue,He),ie.minZoom,ie.maxZoom),In=Vt/ie.zoomScale(En-ue);Yt=Math.sqrt(In/xn*2)}var Hn=Yt*Yt;function ir(vr){var Er=(dn*dn-Vt*Vt+(vr?-1:1)*Hn*Hn*xn*xn)/(2*(vr?dn:Vt)*Hn*xn);return Math.log(Math.sqrt(Er*Er+1)-Er)}function dr(vr){return(Math.exp(vr)-Math.exp(-vr))/2}function Zn(vr){return(Math.exp(vr)+Math.exp(-vr))/2}var ur=ir(0),_r=function(vr){return Zn(ur)/Zn(ur+Yt*vr)},Dr=function(vr){return Vt*((Zn(ur)*(dr(Er=ur+Yt*vr)/Zn(Er))-dr(ur))/Hn)/xn;var Er},nr=(ir(1)-ur)/Yt;if(Math.abs(xn)<1e-6||!isFinite(nr)){if(Math.abs(Vt-dn)<1e-6)return this.easeTo(G,D);var lr=dn<Vt?-1:1;nr=Math.abs(Math.log(dn/Vt))/Yt,Dr=function(){return 0},_r=function(vr){return Math.exp(lr*Yt*vr)}}if("duration"in G)G.duration=+G.duration;else{var Ar="screenSpeed"in G?+G.screenSpeed/Yt:+G.speed;G.duration=1e3*nr/Ar}return G.maxDuration&&G.duration>G.maxDuration&&(G.duration=0),this._zooming=!0,this._rotating=_e!==Ye,this._pitching=nt!==Ie,this._padding=!ie.isPaddingEqual(ft),this._prepareEase(D,!1),this._ease(function(vr){var Er=vr*nr,Or=1/_r(Er);ie.zoom=vr===1?He:ue+ie.scaleZoom(Or),H._rotating&&(ie.bearing=r.number(_e,Ye,vr)),H._pitching&&(ie.pitch=r.number(Ie,nt,vr)),H._padding&&(ie.interpolatePadding(ze,ft,vr),It=ie.centerPoint.add(Et));var Ur=vr===1?Bt:ie.unproject(Ot.add(Jt.mult(Dr(Er))).mult(Or));ie.setLocationAtPoint(ie.renderWorldCopies?Ur.wrap():Ur,It),H._fireMoveEvents(D)},function(){return H._afterEase(D)},G),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(G,D){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var H=this._onEaseEnd;delete this._onEaseEnd,H.call(this,D)}if(!G){var Q=this.handlers;Q&&Q.stop(!1)}return this},Y.prototype._ease=function(G,D,H){H.animate===!1||H.duration===0?(G(1),D()):(this._easeStart=r.browser.now(),this._easeOptions=H,this._onEaseFrame=G,this._onEaseEnd=D,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var G=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(G)),G<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(G,D){G=r.wrap(G,-180,180);var H=Math.abs(G-D);return Math.abs(G-360-D)<H&&(G-=360),Math.abs(G+360-D)<H&&(G+=360),G},Y.prototype._normalizeCenter=function(G){var D=this.transform;if(D.renderWorldCopies&&!D.lngRange){var H=G.lng-D.center.lng;G.lng+=H>180?-360:H<-180?360:0}},Y}(r.Evented),wa=function(j){j===void 0&&(j={}),this.options=j,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};wa.prototype.getDefaultPosition=function(){return"bottom-right"},wa.prototype.onAdd=function(j){var Y=this.options&&this.options.compact;return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),Y===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wa.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wa.prototype._setElementTitle=function(j,Y){var G=this._map._getUIString("AttributionControl."+Y);j.title=G,j.setAttribute("aria-label",G)},wa.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},wa.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(j){var G=Y.reduce(function(D,H,Q){return H.value&&(D+=H.key+"="+H.value+(Q<Y.length-1?"&":"")),D},"?");j.href=r.config.FEEDBACK_URL+"/"+G+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},wa.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},wa.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(ue){return typeof ue!="string"?"":ue})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var G=this._map.style.sourceCaches;for(var D in G){var H=G[D];if(H.used){var Q=H.getSource();Q.attribution&&j.indexOf(Q.attribution)<0&&j.push(Q.attribution)}}j.sort(function(ue,_e){return ue.length-_e.length});var ie=(j=j.filter(function(ue,_e){for(var Ie=_e+1;Ie<j.length;Ie++)if(j[Ie].indexOf(ue)>=0)return!1;return!0})).join(" | ");ie!==this._attribHTML&&(this._attribHTML=ie,j.length?(this._innerContainer.innerHTML=ie,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Ao=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};Ao.prototype.onAdd=function(j){this._map=j,this._container=b.create("div","mapboxgl-ctrl");var Y=b.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ao.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ao.prototype.getDefaultPosition=function(){return"bottom-left"},Ao.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Ao.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var Y in j)if(j[Y].getSource().mapbox_logo)return!0;return!1}},Ao.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var Y=j[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var Ta=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ta.prototype.add=function(j){var Y=++this._id;return this._queue.push({callback:j,id:Y,cancelled:!1}),Y},Ta.prototype.remove=function(j){for(var Y=this._currentlyRunning,G=0,D=Y?this._queue.concat(Y):this._queue;G<D.length;G+=1){var H=D[G];if(H.id===j)return void(H.cancelled=!0)}},Ta.prototype.run=function(j){j===void 0&&(j=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var G=0,D=Y;G<D.length;G+=1){var H=D[G];if(!H.cancelled&&(H.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ta.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Is={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Os=r.window.HTMLImageElement,Aa=r.window.HTMLElement,Yr=r.window.ImageBitmap,ko=60,_s={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ko,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},so=function(j){function Y(D){var H=this;if((D=r.extend({},_s,D)).minZoom!=null&&D.maxZoom!=null&&D.minZoom>D.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(D.minPitch!=null&&D.maxPitch!=null&&D.minPitch>D.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(D.minPitch!=null&&D.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(D.maxPitch!=null&&D.maxPitch>ko)throw new Error("maxPitch must be less than or equal to 60");var Q=new Kr(D.minZoom,D.maxZoom,D.minPitch,D.maxPitch,D.renderWorldCopies);if(j.call(this,Q,D),this._interactive=D.interactive,this._maxTileCacheSize=D.maxTileCacheSize,this._failIfMajorPerformanceCaveat=D.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=D.preserveDrawingBuffer,this._antialias=D.antialias,this._trackResize=D.trackResize,this._bearingSnap=D.bearingSnap,this._refreshExpiredTiles=D.refreshExpiredTiles,this._fadeDuration=D.fadeDuration,this._crossSourceCollisions=D.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=D.collectResourceTiming,this._renderTaskQueue=new Ta,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},Is,D.locale),this._clickTolerance=D.clickTolerance,this._requestManager=new r.RequestManager(D.transformRequest,D.accessToken),typeof D.container=="string"){if(this._container=r.window.document.getElementById(D.container),!this._container)throw new Error("Container '"+D.container+"' not found.")}else{if(!(D.container instanceof Aa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=D.container}if(D.maxBounds&&this.setMaxBounds(D.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return H._update(!1)}),this.on("moveend",function(){return H._update(!1)}),this.on("zoom",function(){return H._update(!0)}),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xr(this,D);var ie=typeof D.hash=="string"&&D.hash||void 0;this._hash=D.hash&&new Ba(ie).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:D.center,zoom:D.zoom,bearing:D.bearing,pitch:D.pitch}),D.bounds&&(this.resize(),this.fitBounds(D.bounds,r.extend({},D.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=D.localIdeographFontFamily,D.style&&this.setStyle(D.style,{localIdeographFontFamily:D.localIdeographFontFamily}),D.attributionControl&&this.addControl(new wa({customAttribution:D.customAttribution})),this.addControl(new Ao,D.logoPosition),this.on("style.load",function(){H.transform.unmodified&&H.jumpTo(H.style.stylesheet)}),this.on("data",function(ue){H._update(ue.dataType==="style"),H.fire(new r.Event(ue.dataType+"data",ue))}),this.on("dataloading",function(ue){H.fire(new r.Event(ue.dataType+"dataloading",ue))})}j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(D,H){if(H===void 0&&(H=D.getDefaultPosition?D.getDefaultPosition():"top-right"),!D||!D.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Q=D.onAdd(this);this._controls.push(D);var ie=this._controlPositions[H];return H.indexOf("bottom")!==-1?ie.insertBefore(Q,ie.firstChild):ie.appendChild(Q),this},Y.prototype.removeControl=function(D){if(!D||!D.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var H=this._controls.indexOf(D);return H>-1&&this._controls.splice(H,1),D.onRemove(this),this},Y.prototype.hasControl=function(D){return this._controls.indexOf(D)>-1},Y.prototype.resize=function(D){var H=this._containerDimensions(),Q=H[0],ie=H[1];this._resizeCanvas(Q,ie),this.transform.resize(Q,ie),this.painter.resize(Q,ie);var ue=!this._moving;return ue&&(this.stop(),this.fire(new r.Event("movestart",D)).fire(new r.Event("move",D))),this.fire(new r.Event("resize",D)),ue&&this.fire(new r.Event("moveend",D)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(D){return this.transform.setMaxBounds(r.LngLatBounds.convert(D)),this._update()},Y.prototype.setMinZoom=function(D){if((D=D??-2)>=-2&&D<=this.transform.maxZoom)return this.transform.minZoom=D,this._update(),this.getZoom()<D&&this.setZoom(D),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(D){if((D=D??22)>=this.transform.minZoom)return this.transform.maxZoom=D,this._update(),this.getZoom()>D&&this.setZoom(D),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(D){if((D=D??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(D>=0&&D<=this.transform.maxPitch)return this.transform.minPitch=D,this._update(),this.getPitch()<D&&this.setPitch(D),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(D){if((D=D??ko)>ko)throw new Error("maxPitch must be less than or equal to 60");if(D>=this.transform.minPitch)return this.transform.maxPitch=D,this._update(),this.getPitch()>D&&this.setPitch(D),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(D){return this.transform.renderWorldCopies=D,this._update()},Y.prototype.project=function(D){return this.transform.locationPoint(r.LngLat.convert(D))},Y.prototype.unproject=function(D){return this.transform.pointLocation(r.Point.convert(D))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(D,H,Q){var ie,ue=this;if(D==="mouseenter"||D==="mouseover"){var _e=!1;return{layer:H,listener:Q,delegates:{mousemove:function(ze){var He=ue.getLayer(H)?ue.queryRenderedFeatures(ze.point,{layers:[H]}):[];He.length?_e||(_e=!0,Q.call(ue,new va(D,ue,ze.originalEvent,{features:He}))):_e=!1},mouseout:function(){_e=!1}}}}if(D==="mouseleave"||D==="mouseout"){var Ie=!1;return{layer:H,listener:Q,delegates:{mousemove:function(ze){(ue.getLayer(H)?ue.queryRenderedFeatures(ze.point,{layers:[H]}):[]).length?Ie=!0:Ie&&(Ie=!1,Q.call(ue,new va(D,ue,ze.originalEvent)))},mouseout:function(ze){Ie&&(Ie=!1,Q.call(ue,new va(D,ue,ze.originalEvent)))}}}}return{layer:H,listener:Q,delegates:(ie={},ie[D]=function(ze){var He=ue.getLayer(H)?ue.queryRenderedFeatures(ze.point,{layers:[H]}):[];He.length&&(ze.features=He,Q.call(ue,ze),delete ze.features)},ie)}},Y.prototype.on=function(D,H,Q){if(Q===void 0)return j.prototype.on.call(this,D,H);var ie=this._createDelegatedListener(D,H,Q);for(var ue in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[D]=this._delegatedListeners[D]||[],this._delegatedListeners[D].push(ie),ie.delegates)this.on(ue,ie.delegates[ue]);return this},Y.prototype.once=function(D,H,Q){if(Q===void 0)return j.prototype.once.call(this,D,H);var ie=this._createDelegatedListener(D,H,Q);for(var ue in ie.delegates)this.once(ue,ie.delegates[ue]);return this},Y.prototype.off=function(D,H,Q){var ie=this;return Q===void 0?j.prototype.off.call(this,D,H):(this._delegatedListeners&&this._delegatedListeners[D]&&function(ue){for(var _e=ue[D],Ie=0;Ie<_e.length;Ie++){var ze=_e[Ie];if(ze.layer===H&&ze.listener===Q){for(var He in ze.delegates)ie.off(He,ze.delegates[He]);return _e.splice(Ie,1),ie}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(D,H){if(!this.style)return[];var Q;if(H!==void 0||D===void 0||D instanceof r.Point||Array.isArray(D)||(H=D,D=void 0),H=H||{},(D=D||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||typeof D[0]=="number")Q=[r.Point.convert(D)];else{var ie=r.Point.convert(D[0]),ue=r.Point.convert(D[1]);Q=[ie,new r.Point(ue.x,ie.y),ue,new r.Point(ie.x,ue.y),ie]}return this.style.queryRenderedFeatures(Q,H,this.transform)},Y.prototype.querySourceFeatures=function(D,H){return this.style.querySourceFeatures(D,H)},Y.prototype.setStyle=function(D,H){return(H=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},H)).diff!==!1&&H.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&D?(this._diffStyle(D,H),this):(this._localIdeographFontFamily=H.localIdeographFontFamily,this._updateStyle(D,H))},Y.prototype._getUIString=function(D){var H=this._locale[D];if(H==null)throw new Error("Missing UI string '"+D+"'");return H},Y.prototype._updateStyle=function(D,H){return this.style&&(this.style.setEventedParent(null),this.style._remove()),D?(this.style=new qn(this,H||{}),this.style.setEventedParent(this,{style:this.style}),typeof D=="string"?this.style.loadURL(D):this.style.loadJSON(D),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(D,H){var Q=this;if(typeof D=="string"){var ie=this._requestManager.normalizeStyleURL(D),ue=this._requestManager.transformRequest(ie,r.ResourceType.Style);r.getJSON(ue,function(_e,Ie){_e?Q.fire(new r.ErrorEvent(_e)):Ie&&Q._updateDiff(Ie,H)})}else typeof D=="object"&&this._updateDiff(D,H)},Y.prototype._updateDiff=function(D,H){try{this.style.setState(D)&&this._update(!0)}catch(Q){r.warnOnce("Unable to perform style diff: "+(Q.message||Q.error||Q)+".  Rebuilding the style from scratch."),this._updateStyle(D,H)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(D,H){return this._lazyInitEmptyStyle(),this.style.addSource(D,H),this._update(!0)},Y.prototype.isSourceLoaded=function(D){var H=this.style&&this.style.sourceCaches[D];if(H!==void 0)return H.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+D+"'")))},Y.prototype.areTilesLoaded=function(){var D=this.style&&this.style.sourceCaches;for(var H in D){var Q=D[H]._tiles;for(var ie in Q){var ue=Q[ie];if(ue.state!=="loaded"&&ue.state!=="errored")return!1}}return!0},Y.prototype.addSourceType=function(D,H,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(D,H,Q)},Y.prototype.removeSource=function(D){return this.style.removeSource(D),this._update(!0)},Y.prototype.getSource=function(D){return this.style.getSource(D)},Y.prototype.addImage=function(D,H,Q){Q===void 0&&(Q={});var ie=Q.pixelRatio;ie===void 0&&(ie=1);var ue=Q.sdf;ue===void 0&&(ue=!1);var _e=Q.stretchX,Ie=Q.stretchY,ze=Q.content;if(this._lazyInitEmptyStyle(),H instanceof Os||Yr&&H instanceof Yr){var He=r.browser.getImageData(H),Ye=He.width,nt=He.height,ft=He.data;this.style.addImage(D,{data:new r.RGBAImage({width:Ye,height:nt},ft),pixelRatio:ie,stretchX:_e,stretchY:Ie,content:ze,sdf:ue,version:0})}else{if(H.width===void 0||H.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var gt=H.width,Et=H.height,It=H.data,Lt=H;this.style.addImage(D,{data:new r.RGBAImage({width:gt,height:Et},new Uint8Array(It)),pixelRatio:ie,stretchX:_e,stretchY:Ie,content:ze,sdf:ue,version:0,userImage:Lt}),Lt.onAdd&&Lt.onAdd(this,D)}},Y.prototype.updateImage=function(D,H){var Q=this.style.getImage(D);if(!Q)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ie=H instanceof Os||Yr&&H instanceof Yr?r.browser.getImageData(H):H,ue=ie.width,_e=ie.height,Ie=ie.data;if(ue===void 0||_e===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ue!==Q.data.width||_e!==Q.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ze=!(H instanceof Os||Yr&&H instanceof Yr);Q.data.replace(Ie,ze),this.style.updateImage(D,Q)},Y.prototype.hasImage=function(D){return D?!!this.style.getImage(D):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(D){this.style.removeImage(D)},Y.prototype.loadImage=function(D,H){r.getImage(this._requestManager.transformRequest(D,r.ResourceType.Image),H)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(D,H){return this._lazyInitEmptyStyle(),this.style.addLayer(D,H),this._update(!0)},Y.prototype.moveLayer=function(D,H){return this.style.moveLayer(D,H),this._update(!0)},Y.prototype.removeLayer=function(D){return this.style.removeLayer(D),this._update(!0)},Y.prototype.getLayer=function(D){return this.style.getLayer(D)},Y.prototype.setLayerZoomRange=function(D,H,Q){return this.style.setLayerZoomRange(D,H,Q),this._update(!0)},Y.prototype.setFilter=function(D,H,Q){return Q===void 0&&(Q={}),this.style.setFilter(D,H,Q),this._update(!0)},Y.prototype.getFilter=function(D){return this.style.getFilter(D)},Y.prototype.setPaintProperty=function(D,H,Q,ie){return ie===void 0&&(ie={}),this.style.setPaintProperty(D,H,Q,ie),this._update(!0)},Y.prototype.getPaintProperty=function(D,H){return this.style.getPaintProperty(D,H)},Y.prototype.setLayoutProperty=function(D,H,Q,ie){return ie===void 0&&(ie={}),this.style.setLayoutProperty(D,H,Q,ie),this._update(!0)},Y.prototype.getLayoutProperty=function(D,H){return this.style.getLayoutProperty(D,H)},Y.prototype.setLight=function(D,H){return H===void 0&&(H={}),this._lazyInitEmptyStyle(),this.style.setLight(D,H),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(D,H){return this.style.setFeatureState(D,H),this._update()},Y.prototype.removeFeatureState=function(D,H){return this.style.removeFeatureState(D,H),this._update()},Y.prototype.getFeatureState=function(D){return this.style.getFeatureState(D)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var D=0,H=0;return this._container&&(D=this._container.clientWidth||400,H=this._container.clientHeight||300),[D,H]},Y.prototype._detectMissingCSS=function(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var D=this._container;D.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",D)).style.visibility="hidden",this._detectMissingCSS();var H=this._canvasContainer=b.create("div","mapboxgl-canvas-container",D);this._interactive&&H.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",H),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Q=this._containerDimensions();this._resizeCanvas(Q[0],Q[1]);var ie=this._controlContainer=b.create("div","mapboxgl-control-container",D),ue=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(_e){ue[_e]=b.create("div","mapboxgl-ctrl-"+_e,ie)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},Y.prototype._resizeCanvas=function(D,H){var Q=r.browser.devicePixelRatio||1;this._canvas.width=Q*D,this._canvas.height=Q*H,this._canvas.style.width=D+"px",this._canvas.style.height=H+"px"},Y.prototype._setupPainter=function(){var D=r.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),H=this._canvas.getContext("webgl",D)||this._canvas.getContext("experimental-webgl",D);H?(this.painter=new oi(H,this.transform),r.webpSupported.testSupport(H)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(D){D.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:D}))},Y.prototype._contextRestored=function(D){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:D}))},Y.prototype._onMapScroll=function(D){if(D.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(D){return this.style?(this._styleDirty=this._styleDirty||D,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(D){return this._update(),this._renderTaskQueue.add(D)},Y.prototype._cancelRenderFrame=function(D){this._renderTaskQueue.remove(D)},Y.prototype._render=function(D){var H,Q=this,ie=0,ue=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(H=ue.createQueryEXT(),ue.beginQueryEXT(ue.TIME_ELAPSED_EXT,H),ie=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(D),!this._removed){var _e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ie=this.transform.zoom,ze=r.browser.now();this.style.zoomHistory.update(Ie,ze);var He=new r.EvaluationParameters(Ie,{now:ze,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ye=He.crossFadingFactor();Ye===1&&Ye===this._crossFadingFactor||(_e=!0,this._crossFadingFactor=Ye),this.style.update(He)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||_e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var nt=r.browser.now()-ie;ue.endQueryEXT(ue.TIME_ELAPSED_EXT,H),setTimeout(function(){var Et=ue.getQueryObjectEXT(H,ue.QUERY_RESULT_EXT)/1e6;ue.deleteQueryEXT(H),Q.fire(new r.Event("gpu-timing-frame",{cpuTime:nt,gpuTime:Et}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var Et=Q.painter.queryGpuTimers(ft);Q.fire(new r.Event("gpu-timing-layer",{layerTimes:Et}))},50)}var gt=this._sourcesDirty||this._styleDirty||this._placementDirty;return gt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||gt||(this._fullyLoaded=!0),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var D=0,H=this._controls;D<H.length;D+=1)H[D].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var Q=this.painter.context.gl.getExtension("WEBGL_lose_context");Q&&Q.loseContext&&Q.loseContext(),Ps(this._canvasContainer),Ps(this._controlContainer),Ps(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},Y.prototype.triggerRepaint=function(){var D=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(H){D._frame=null,D._render(H)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(D){this._trackResize&&this.resize({originalEvent:D})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(D){this._showTileBoundaries!==D&&(this._showTileBoundaries=D,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(D){this._showPadding!==D&&(this._showPadding=D,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(D){this._showCollisionBoxes!==D&&(this._showCollisionBoxes=D,D?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(D){this._showOverdrawInspector!==D&&(this._showOverdrawInspector=D,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(D){this._repaint!==D&&(this._repaint=D,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(D){this._vertices=D,this._update()},Y.prototype._setCacheLimits=function(D,H){r.setCacheLimits(D,H)},G.version.get=function(){return r.version},Object.defineProperties(Y.prototype,G),Y}(ea);function Ps(j){j.parentNode&&j.parentNode.removeChild(j)}var Fs={showCompass:!0,showZoom:!0,visualizePitch:!1},lo=function(j){var Y=this;this.options=r.extend({},Fs,j),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(G){return G.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(G){return Y._map.zoomIn({},{originalEvent:G})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(G){return Y._map.zoomOut({},{originalEvent:G})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(G){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:G}):Y._map.resetNorth({},{originalEvent:G})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};lo.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),Y=j===this._map.getMaxZoom(),G=j===this._map.getMinZoom();this._zoomInButton.disabled=Y,this._zoomOutButton.disabled=G,this._zoomInButton.setAttribute("aria-disabled",Y.toString()),this._zoomOutButton.setAttribute("aria-disabled",G.toString())},lo.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},lo.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new di(this._map,this._compass,this.options.visualizePitch)),this._container},lo.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},lo.prototype._createButton=function(j,Y){var G=b.create("button",j,this._container);return G.type="button",G.addEventListener("click",Y),G},lo.prototype._setButtonTitle=function(j,Y){var G=this._map._getUIString("NavigationControl."+Y);j.title=G,j.setAttribute("aria-label",G)};var di=function(j,Y,G){G===void 0&&(G=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new Po({clickTolerance:j.dragRotate._mouseRotate._clickTolerance}),this.map=j,G&&(this.mousePitch=new Wa({clickTolerance:j.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(Y,"mousedown",this.mousedown),b.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(Y,"touchmove",this.touchmove),b.addEventListener(Y,"touchend",this.touchend),b.addEventListener(Y,"touchcancel",this.reset)};function ws(j,Y,G){if(j=new r.LngLat(j.lng,j.lat),Y){var D=new r.LngLat(j.lng-360,j.lat),H=new r.LngLat(j.lng+360,j.lat),Q=G.locationPoint(j).distSqr(Y);G.locationPoint(D).distSqr(Y)<Q?j=D:G.locationPoint(H).distSqr(Y)<Q&&(j=H)}for(;Math.abs(j.lng-G.center.lng)>180;){var ie=G.locationPoint(j);if(ie.x>=0&&ie.y>=0&&ie.x<=G.width&&ie.y<=G.height)break;j.lng>G.center.lng?j.lng-=360:j.lng+=360}return j}di.prototype.down=function(j,Y){this.mouseRotate.mousedown(j,Y),this.mousePitch&&this.mousePitch.mousedown(j,Y),b.disableDrag()},di.prototype.move=function(j,Y){var G=this.map,D=this.mouseRotate.mousemoveWindow(j,Y);if(D&&D.bearingDelta&&G.setBearing(G.getBearing()+D.bearingDelta),this.mousePitch){var H=this.mousePitch.mousemoveWindow(j,Y);H&&H.pitchDelta&&G.setPitch(G.getPitch()+H.pitchDelta)}},di.prototype.off=function(){var j=this.element;b.removeEventListener(j,"mousedown",this.mousedown),b.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(j,"touchmove",this.touchmove),b.removeEventListener(j,"touchend",this.touchend),b.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},di.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(r.window,"mousemove",this.mousemove),b.removeEventListener(r.window,"mouseup",this.mouseup)},di.prototype.mousedown=function(j){this.down(r.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),b.mousePos(this.element,j)),b.addEventListener(r.window,"mousemove",this.mousemove),b.addEventListener(r.window,"mouseup",this.mouseup)},di.prototype.mousemove=function(j){this.move(j,b.mousePos(this.element,j))},di.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},di.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},di.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},di.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},di.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Cr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fr(j,Y,G){var D=j.classList;for(var H in Cr)D.remove("mapboxgl-"+G+"-anchor-"+H);D.add("mapboxgl-"+G+"-anchor-"+Y)}var Na,Mo=function(j){function Y(G,D){if(j.call(this),(G instanceof r.window.HTMLElement||D)&&(G=r.extend({element:G},D)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,G&&G.element)this._element=G.element,this._offset=r.Point.convert(G&&G.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var H=b.createNS("http://www.w3.org/2000/svg","svg");H.setAttributeNS(null,"display","block"),H.setAttributeNS(null,"height","41px"),H.setAttributeNS(null,"width","27px"),H.setAttributeNS(null,"viewBox","0 0 27 41");var Q=b.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");var ie=b.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill-rule","nonzero");var ue=b.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ue.setAttributeNS(null,"fill","#000000");for(var _e=0,Ie=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];_e<Ie.length;_e+=1){var ze=Ie[_e],He=b.createNS("http://www.w3.org/2000/svg","ellipse");He.setAttributeNS(null,"opacity","0.04"),He.setAttributeNS(null,"cx","10.5"),He.setAttributeNS(null,"cy","5.80029008"),He.setAttributeNS(null,"rx",ze.rx),He.setAttributeNS(null,"ry",ze.ry),ue.appendChild(He)}var Ye=b.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"fill",this._color);var nt=b.createNS("http://www.w3.org/2000/svg","path");nt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ye.appendChild(nt);var ft=b.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"fill","#000000");var gt=b.createNS("http://www.w3.org/2000/svg","path");gt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ft.appendChild(gt);var Et=b.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Et.setAttributeNS(null,"fill","#FFFFFF");var It=b.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Lt=b.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#000000"),Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962");var Bt=b.createNS("http://www.w3.org/2000/svg","circle");Bt.setAttributeNS(null,"fill","#FFFFFF"),Bt.setAttributeNS(null,"cx","5.5"),Bt.setAttributeNS(null,"cy","5.5"),Bt.setAttributeNS(null,"r","5.4999962"),It.appendChild(Lt),It.appendChild(Bt),ie.appendChild(ue),ie.appendChild(Ye),ie.appendChild(ft),ie.appendChild(Et),ie.appendChild(It),H.appendChild(ie),H.setAttributeNS(null,"height",41*this._scale+"px"),H.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(H),this._offset=r.Point.convert(G&&G.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ot){Ot.preventDefault()}),this._element.addEventListener("mousedown",function(Ot){Ot.preventDefault()}),Fr(this._element,this._anchor,"marker"),this._popup=null}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(G){return this.remove(),this._map=G,G.getCanvasContainer().appendChild(this._element),G.on("move",this._update),G.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(G){return this._lngLat=r.LngLat.convert(G),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(G){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),G){if(!("offset"in G.options)){var D=13.5,H=Math.sqrt(Math.pow(D,2)/2);G.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[H,-1*(24.6+H)],"bottom-right":[-H,-1*(24.6+H)],left:[D,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=G,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(G){var D=G.code,H=G.charCode||G.keyCode;D!=="Space"&&D!=="Enter"&&H!==32&&H!==13||this.togglePopup()},Y.prototype._onMapClick=function(G){var D=G.originalEvent.target,H=this._element;this._popup&&(D===H||H.contains(D))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var G=this._popup;return G?(G.isOpen()?G.remove():G.addTo(this._map),this):this},Y.prototype._update=function(G){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ws(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var D="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?D="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(D="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var H="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?H="rotateX(0deg)":this._pitchAlignment==="map"&&(H="rotateX("+this._map.getPitch()+"deg)"),G&&G.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Cr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+H+" "+D)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(G){return this._offset=r.Point.convert(G),this._update(),this},Y.prototype._onMove=function(G){if(!this._isDragging){var D=this._clickTolerance||this._map._clickTolerance;this._isDragging=G.point.dist(this._pointerdownPos)>=D}this._isDragging&&(this._pos=G.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(G){this._element.contains(G.originalEvent.target)&&(G.preventDefault(),this._positionDelta=G.point.sub(this._pos).add(this._offset),this._pointerdownPos=G.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(G){return this._draggable=!!G,this._map&&(G?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(G){return this._rotation=G||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(G){return this._rotationAlignment=G||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(G){return this._pitchAlignment=G&&G!=="auto"?G:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(r.Evented),Ro={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},zi=0,So=!1,si=function(j){function Y(G){j.call(this),this.options=r.extend({},Ro,G),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(G){return this._map=G,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),D=this._setupUI,Na!==void 0?D(Na):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(function(H){Na=H.state!=="denied",D(Na)}):(Na=!!r.window.navigator.geolocation,D(Na)),this._container;var D},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zi=0,So=!1},Y.prototype._isOutOfMapMaxBounds=function(G){var D=this._map.getMaxBounds(),H=G.coords;return D&&(H.longitude<D.getWest()||H.longitude>D.getEast()||H.latitude<D.getSouth()||H.latitude>D.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(G){if(this._map){if(this._isOutOfMapMaxBounds(G))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",G)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=G,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(G),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(G),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",G)),this._finish()}},Y.prototype._updateCamera=function(G){var D=new r.LngLat(G.coords.longitude,G.coords.latitude),H=G.coords.accuracy,Q=this._map.getBearing(),ie=r.extend({bearing:Q},this.options.fitBoundsOptions);this._map.fitBounds(D.toBounds(H),ie,{geolocateSource:!0})},Y.prototype._updateMarker=function(G){if(G){var D=new r.LngLat(G.coords.longitude,G.coords.latitude);this._accuracyCircleMarker.setLngLat(D).addTo(this._map),this._userLocationDotMarker.setLngLat(D).addTo(this._map),this._accuracy=G.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var G=this._map._container.clientHeight/2,D=this._map.unproject([0,G]),H=this._map.unproject([1,G]),Q=D.distanceTo(H),ie=Math.ceil(2*this._accuracy/Q);this._circleElement.style.width=ie+"px",this._circleElement.style.height=ie+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(G){if(this._map){if(this.options.trackUserLocation)if(G.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(G.code===3&&So)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",G)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(G){var D=this;if(this._container.addEventListener("contextmenu",function(ie){return ie.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",G===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var H=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=H,this._geolocateButton.setAttribute("aria-label",H)}else{var Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Mo(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ie){var ue=ie.originalEvent&&ie.originalEvent.type==="resize";ie.geolocateSource||D._watchState!=="ACTIVE_LOCK"||ue||(D._watchState="BACKGROUND",D._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),D._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),D.fire(new r.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zi--,So=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var G;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++zi>1?(G={maximumAge:6e5,timeout:0},So=!0):(G=this.options.positionOptions,So=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,G)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(r.Evented),Vl={maxWidth:100,unit:"metric"},ja=function(j){this.options=r.extend({},Vl,j),r.bindAll(["_onMove","setUnit"],this)};function ci(j,Y,G){var D=G&&G.maxWidth||100,H=j._container.clientHeight/2,Q=j.unproject([0,H]),ie=j.unproject([D,H]),ue=Q.distanceTo(ie);if(G&&G.unit==="imperial"){var _e=3.2808*ue;_e>5280?xi(Y,D,_e/5280,j._getUIString("ScaleControl.Miles")):xi(Y,D,_e,j._getUIString("ScaleControl.Feet"))}else G&&G.unit==="nautical"?xi(Y,D,ue/1852,j._getUIString("ScaleControl.NauticalMiles")):ue>=1e3?xi(Y,D,ue/1e3,j._getUIString("ScaleControl.Kilometers")):xi(Y,D,ue,j._getUIString("ScaleControl.Meters"))}function xi(j,Y,G,D){var H,Q,ie,ue=(H=G,(Q=Math.pow(10,(""+Math.floor(H)).length-1))*((ie=H/Q)>=10?10:ie>=5?5:ie>=3?3:ie>=2?2:ie>=1?1:function(Ie){var ze=Math.pow(10,Math.ceil(-Math.log(Ie)/Math.LN10));return Math.round(Ie*ze)/ze}(ie))),_e=ue/G;j.style.width=Y*_e+"px",j.innerHTML=ue+"&nbsp;"+D}ja.prototype.getDefaultPosition=function(){return"bottom-left"},ja.prototype._onMove=function(){ci(this._map,this._container,this.options)},ja.prototype.onAdd=function(j){return this._map=j,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ja.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ja.prototype.setUnit=function(j){this.options.unit=j,ci(this._map,this._container,this.options)};var La=function(j){this._fullscreen=!1,j&&j.container&&(j.container instanceof r.window.HTMLElement?this._container=j.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};La.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},La.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},La.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},La.prototype._setupUI=function(){var j=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},La.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},La.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},La.prototype._isFullscreen=function(){return this._fullscreen},La.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},La.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var rs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ke=function(j){function Y(G){j.call(this),this.options=r.extend(Object.create(rs),G),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(Y.__proto__=j),Y.prototype=Object.create(j&&j.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(G){return this._map&&this.remove(),this._map=G,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(G){return this._lngLat=r.LngLat.convert(G),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(G){return this.setDOMContent(r.window.document.createTextNode(G))},Y.prototype.setHTML=function(G){var D,H=r.window.document.createDocumentFragment(),Q=r.window.document.createElement("body");for(Q.innerHTML=G;D=Q.firstChild;)H.appendChild(D);return this.setDOMContent(H)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(G){return this.options.maxWidth=G,this._update(),this},Y.prototype.setDOMContent=function(G){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(G),this._createCloseButton(),this._update(),this._focusFirstElement(),this},Y.prototype.addClassName=function(G){this._container&&this._container.classList.add(G)},Y.prototype.removeClassName=function(G){this._container&&this._container.classList.remove(G)},Y.prototype.setOffset=function(G){return this.options.offset=G,this._update(),this},Y.prototype.toggleClassName=function(G){if(this._container)return this._container.classList.toggle(G)},Y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(G){this._update(G.point)},Y.prototype._onMouseMove=function(G){this._update(G.point)},Y.prototype._onDrag=function(G){this._update(G.point)},Y.prototype._update=function(G){var D=this,H=this._lngLat||this._trackPointer;if(this._map&&H&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ye){return D._container.classList.add(Ye)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ws(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||G)){var Q=this._pos=this._trackPointer&&G?G:this._map.project(this._lngLat),ie=this.options.anchor,ue=et(this.options.offset);if(!ie){var _e,Ie=this._container.offsetWidth,ze=this._container.offsetHeight;_e=Q.y+ue.bottom.y<ze?["top"]:Q.y>this._map.transform.height-ze?["bottom"]:[],Q.x<Ie/2?_e.push("left"):Q.x>this._map.transform.width-Ie/2&&_e.push("right"),ie=_e.length===0?"bottom":_e.join("-")}var He=Q.add(ue[ie]).round();b.setTransform(this._container,Cr[ie]+" translate("+He.x+"px,"+He.y+"px)"),Fr(this._container,ie,"popup")}},Y.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var G=this._container.querySelector(Cl);G&&G.focus()}},Y.prototype._onClose=function(){this.remove()},Y}(r.Evented);function et(j){if(j){if(typeof j=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(j,2)));return{center:new r.Point(0,0),top:new r.Point(0,j),"top-left":new r.Point(Y,Y),"top-right":new r.Point(-Y,Y),bottom:new r.Point(0,-j),"bottom-left":new r.Point(Y,-Y),"bottom-right":new r.Point(-Y,-Y),left:new r.Point(j,0),right:new r.Point(-j,0)}}if(j instanceof r.Point||Array.isArray(j)){var G=r.Point.convert(j);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}return{center:r.Point.convert(j.center||[0,0]),top:r.Point.convert(j.top||[0,0]),"top-left":r.Point.convert(j["top-left"]||[0,0]),"top-right":r.Point.convert(j["top-right"]||[0,0]),bottom:r.Point.convert(j.bottom||[0,0]),"bottom-left":r.Point.convert(j["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(j["bottom-right"]||[0,0]),left:r.Point.convert(j.left||[0,0]),right:r.Point.convert(j.right||[0,0])}}return et(new r.Point(0,0))}var ut={version:r.version,supported:w,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:so,NavigationControl:lo,GeolocateControl:si,AttributionControl:wa,ScaleControl:ja,FullscreenControl:La,Popup:Ke,Marker:Mo,Style:qn,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){dt().acquire(Ve)},clearPrewarmedResources:function(){var j=at;j&&(j.isPreloaded()&&j.numActive()===1?(j.release(Ve),at=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(j){r.config.ACCESS_TOKEN=j},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(j){r.config.API_URL=j},get workerCount(){return Be.workerCount},set workerCount(j){Be.workerCount=j},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){r.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(j){r.clearTileCache(j)},workerUrl:""};return ut}),_}()},3108:function(R,C,e){"use strict";R.exports=e(26099)},26099:function(R,C,e){"use strict";var _=e(64928),T=e(32420),r=e(51160),w=e(76752),b=e(55616),c=e(31264),o=e(47520),t=e(18400),i=e(72512),n=e(76244);function a(s,l){for(var u=l[0],p=l[1],f=1/(l[2]-u),m=1/(l[3]-p),h=new Array(s.length),g=0,v=s.length/2;g<v;g++)h[2*g]=T((s[2*g]-u)*f,0,1),h[2*g+1]=T((s[2*g+1]-p)*m,0,1);return h}R.exports=function(s,l){l||(l={}),s=o(s,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=c(l.maxDepth,255),p=c(l.bounds,w(s,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var f,m=a(s,p),h=s.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?f=new(i(l.dtype))(h):l.dtype&&(f=l.dtype,Array.isArray(f)&&(f.length=h));for(var g=0;g<h;++g)f[g]=g;var v=[],x=[],y=[],A=[];(function F(U,I,N,W,B,V){if(!W.length)return null;var q=v[B]||(v[B]=[]),ne=y[B]||(y[B]=[]),$=x[B]||(x[B]=[]),K=q.length;if(++B>u||V>1073741824){for(var ee=0;ee<W.length;ee++)q.push(W[ee]),ne.push(V),$.push(null,null,null,null);return K}if(q.push(W[0]),ne.push(V),W.length<=1)return $.push(null,null,null,null),K;for(var J=.5*N,Z=U+J,te=I+J,oe=[],se=[],ce=[],ye=[],me=1,fe=W.length;me<fe;me++){var pe=W[me],ge=m[2*pe],ke=m[2*pe+1];ge<Z?ke<te?oe.push(pe):se.push(pe):ke<te?ce.push(pe):ye.push(pe)}return V<<=2,$.push(F(U,I,J,oe,B,V),F(U,te,J,se,B,V+1),F(Z,I,J,ce,B,V+2),F(Z,te,J,ye,B,V+3)),K})(0,0,1,f,0,1);for(var d=0,S=0;S<v.length;S++){var k=v[S];if(f.set)f.set(k,d);else for(var E=0,L=k.length;E<L;E++)f[E+d]=k[E];var O=d+v[S].length;A[S]=[d,O],d=O}return f.range=function(){for(var F,U=[],I=arguments.length;I--;)U[I]=arguments[I];if(t(U[U.length-1])){var N=U.pop();U.length||N.x==null&&N.l==null&&N.left==null||(U=[N],F={}),F=b(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else F={};U.length||(U=p);var W,B=r.apply(void 0,U),V=[Math.min(B.x,B.x+B.width),Math.min(B.y,B.y+B.height),Math.max(B.x,B.x+B.width),Math.max(B.y,B.y+B.height)],q=V[0],ne=V[1],$=V[2],K=V[3],ee=a([q,ne,$,K],p),J=ee[0],Z=ee[1],te=ee[2],oe=ee[3],se=c(F.level,v.length);if(F.d!=null&&(typeof F.d=="number"?W=[F.d,F.d]:F.d.length&&(W=F.d),se=Math.min(Math.max(Math.ceil(-n(Math.abs(W[0])/(p[2]-p[0]))),Math.ceil(-n(Math.abs(W[1])/(p[3]-p[1])))),se)),se=Math.min(se,v.length),F.lod)return function(ye,me,fe,pe,ge){for(var ke=[],Ce=0;Ce<ge;Ce++){var de=y[Ce],ae=A[Ce][0],re=P(ye,me,Ce),he=P(fe,pe,Ce),Se=_.ge(de,re),xe=_.gt(de,he,Se,de.length-1);ke[Ce]=[Se+ae,xe+ae]}return ke}(J,Z,te,oe,se);var ce=[];return function ye(me,fe,pe,ge,ke,Ce){if(ke!==null&&Ce!==null&&!(J>me+pe||Z>fe+pe||te<me||oe<fe||ge>=se||ke===Ce)){var de=v[ge];Ce===void 0&&(Ce=de.length);for(var ae=ke;ae<Ce;ae++){var re=de[ae],he=s[2*re],Se=s[2*re+1];he>=q&&he<=$&&Se>=ne&&Se<=K&&ce.push(re)}var xe=x[ge],Te=xe[4*ke+0],Ae=xe[4*ke+1],Pe=xe[4*ke+2],De=xe[4*ke+3],ve=function(Fe,Le){for(var je=null,Ge=0;je===null;)if(je=Fe[4*Le+Ge],++Ge>Fe.length)return null;return je}(xe,ke+1),we=.5*pe,Ee=ge+1;ye(me,fe,we,Ee,Te,Ae||Pe||De||ve),ye(me,fe+we,we,Ee,Ae,Pe||De||ve),ye(me+we,fe,we,Ee,Pe,De||ve),ye(me+we,fe+we,we,Ee,De,ve)}}(0,0,1,0,0,1),ce},f;function P(F,U,I){for(var N=1,W=.5,B=.5,V=.5,q=0;q<I;q++)N<<=2,N+=F<W?U<B?0:1:U<B?2:3,V*=.5,W+=F<W?-V:V,B+=U<B?-V:V;return N}}},40440:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(3256),T=6378137;function r(c){var o=0;if(c&&c.length>0){o+=Math.abs(w(c[0]));for(var t=1;t<c.length;t++)o-=Math.abs(w(c[t]))}return o}function w(c){var o,t,i,n,a,s,l=0,u=c.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,n=u-1,a=0):s===u-1?(i=u-1,n=0,a=1):(i=s,n=s+1,a=s+2),o=c[i],t=c[n],l+=(b(c[a][0])-b(o[0]))*Math.sin(b(t[1]));l=l*T*T/2}return l}function b(c){return c*Math.PI/180}C.default=function(c){return _.geomReduce(c,function(o,t){return o+function(i){var n,a=0;switch(i.type){case"Polygon":return r(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)a+=r(i.coordinates[n]);return a;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(R,C){"use strict";function e(s,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=s,p}function _(s,l,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(s[0])||!a(s[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:s},l,u)}function T(s,l,u){u===void 0&&(u={});for(var p=0,f=s;p<f.length;p++){var m=f[p];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var h=0;h<m[m.length-1].length;h++)if(m[m.length-1][h]!==m[0][h])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function r(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function w(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function b(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function c(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function a(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:1.0936*C.earthRadius},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:1.0936133},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(s,l,u){switch(u===void 0&&(u={}),s){case"Point":return _(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return T(l).geometry;case"MultiPoint":return c(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},C.point=_,C.points=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return _(p,l)}),u)},C.polygon=T,C.polygons=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return T(p,l)}),u)},C.lineString=r,C.lineStrings=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return r(p,l)}),u)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=c,C.multiPolygon=o,C.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},C.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(s,l){return n(i(s,l))},C.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},C.radiansToDegrees=n,C.degreesToRadians=function(s){return s%360*Math.PI/180},C.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},C.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=C.areaFactors[l];if(!p)throw new Error("invalid original units");var f=C.areaFactors[u];if(!f)throw new Error("invalid final units");return s/p*f},C.isNumber=a,C.isObject=function(s){return!!s&&s.constructor===Object},C.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!a(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},3256:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(46284);function T(i,n,a){if(i!==null)for(var s,l,u,p,f,m,h,g,v=0,x=0,y=i.type,A=y==="FeatureCollection",d=y==="Feature",S=A?i.features.length:1,k=0;k<S;k++){f=(g=!!(h=A?i.features[k].geometry:d?i.geometry:i)&&h.type==="GeometryCollection")?h.geometries.length:1;for(var E=0;E<f;E++){var L=0,O=0;if((p=g?h.geometries[E]:h)!==null){m=p.coordinates;var P=p.type;switch(v=!a||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(m,x,k,L,O)===!1)return!1;x++,L++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(n(m[s],x,k,L,O)===!1)return!1;x++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(l=0;l<m[s].length-v;l++){if(n(m[s][l],x,k,L,O)===!1)return!1;x++}P==="MultiLineString"&&L++,P==="Polygon"&&O++}P==="Polygon"&&L++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(O=0,l=0;l<m[s].length;l++){for(u=0;u<m[s][l].length-v;u++){if(n(m[s][l][u],x,k,L,O)===!1)return!1;x++}O++}L++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(T(p.geometries[s],n,a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(i,n){var a;switch(i.type){case"FeatureCollection":for(a=0;a<i.features.length&&n(i.features[a].properties,a)!==!1;a++);break;case"Feature":n(i.properties,0)}}function w(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&n(i.features[a],a)!==!1;a++);}function b(i,n){var a,s,l,u,p,f,m,h,g,v,x=0,y=i.type==="FeatureCollection",A=i.type==="Feature",d=y?i.features.length:1;for(a=0;a<d;a++){for(f=y?i.features[a].geometry:A?i.geometry:i,h=y?i.features[a].properties:A?i.properties:{},g=y?i.features[a].bbox:A?i.bbox:void 0,v=y?i.features[a].id:A?i.id:void 0,p=(m=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,l=0;l<p;l++)if((u=m?f.geometries[l]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,h,g,v)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],x,h,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,h,g,v)===!1)return!1;x++}}function c(i,n){b(i,function(a,s,l,u,p){var f,m=a===null?null:a.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return n(_.feature(a,l,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(m){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var h=0;h<a.coordinates.length;h++){var g={type:f,coordinates:a.coordinates[h]};if(n(_.feature(g,l),s,h)===!1)return!1}})}function o(i,n){c(i,function(a,s,l){var u=0;if(a.geometry){var p=a.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var f,m=0,h=0,g=0;return T(a,function(v,x,y,A,d){if(f===void 0||s>m||A>h||d>g)return f=v,m=s,h=A,g=d,void(u=0);var S=_.lineString([f,v],a.properties);if(n(S,s,l,d,u)===!1)return!1;u++,f=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");c(i,function(a,s,l){if(a.geometry!==null){var u=a.geometry.type,p=a.geometry.coordinates;switch(u){case"LineString":if(n(a,s,l,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<p.length;f++)if(n(_.lineString(p[f],a.properties),s,l,f)===!1)return!1}}})}C.coordEach=T,C.coordReduce=function(i,n,a,s){var l=a;return T(i,function(u,p,f,m,h){l=p===0&&a===void 0?u:n(l,u,p,f,m,h)},s),l},C.propEach=r,C.propReduce=function(i,n,a){var s=a;return r(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.featureEach=w,C.featureReduce=function(i,n,a){var s=a;return w(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.coordAll=function(i){var n=[];return T(i,function(a){n.push(a)}),n},C.geomEach=b,C.geomReduce=function(i,n,a){var s=a;return b(i,function(l,u,p,f,m){s=u===0&&a===void 0?l:n(s,l,u,p,f,m)}),s},C.flattenEach=c,C.flattenReduce=function(i,n,a){var s=a;return c(i,function(l,u,p){s=u===0&&p===0&&a===void 0?l:n(s,l,u,p)}),s},C.segmentEach=o,C.segmentReduce=function(i,n,a){var s=a,l=!1;return o(i,function(u,p,f,m,h){s=l===!1&&a===void 0?u:n(s,u,p,f,m,h),l=!0}),s},C.lineEach=t,C.lineReduce=function(i,n,a){var s=a;return t(i,function(l,u,p,f){s=u===0&&a===void 0?l:n(s,l,u,p,f)}),s},C.findSegment=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=m.length+p-1),_.lineString([m[p],m[p+1]],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p-1),_.lineString([m[u][p],m[u][p+1]],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p-1),_.lineString([m[l][p],m[l][p+1]],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p-1),_.lineString([m[l][u][p],m[l][u][p+1]],f,n)}throw new Error("geojson is invalid")},C.findPoint=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":return _.point(m,f,n);case"MultiPoint":return l<0&&(l=m.length+l),_.point(m[l],f,n);case"LineString":return p<0&&(p=m.length+p),_.point(m[p],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p),_.point(m[u][p],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p),_.point(m[l][p],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p),_.point(m[l][u][p],f,n)}throw new Error("geojson is invalid")}},42428:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(84880);function T(r){var w=[1/0,1/0,-1/0,-1/0];return _.coordEach(r,function(b){w[0]>b[0]&&(w[0]=b[0]),w[1]>b[1]&&(w[1]=b[1]),w[2]<b[0]&&(w[2]=b[0]),w[3]<b[1]&&(w[3]=b[1])}),w}T.default=T,C.default=T},76796:function(R,C){"use strict";function e(s,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=s,p}function _(s,l,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(s[0])||!a(s[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:s},l,u)}function T(s,l,u){u===void 0&&(u={});for(var p=0,f=s;p<f.length;p++){var m=f[p];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var h=0;h<m[m.length-1].length;h++)if(m[m.length-1][h]!==m[0][h])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function r(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function w(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function b(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function c(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function a(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:1.0936*C.earthRadius},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:1.0936133},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(s,l,u){switch(u===void 0&&(u={}),s){case"Point":return _(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return T(l).geometry;case"MultiPoint":return c(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},C.point=_,C.points=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return _(p,l)}),u)},C.polygon=T,C.polygons=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return T(p,l)}),u)},C.lineString=r,C.lineStrings=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return r(p,l)}),u)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=c,C.multiPolygon=o,C.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},C.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(s,l){return n(i(s,l))},C.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},C.radiansToDegrees=n,C.degreesToRadians=function(s){return s%360*Math.PI/180},C.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},C.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=C.areaFactors[l];if(!p)throw new Error("invalid original units");var f=C.areaFactors[u];if(!f)throw new Error("invalid final units");return s/p*f},C.isNumber=a,C.isObject=function(s){return!!s&&s.constructor===Object},C.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!a(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},84880:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(76796);function T(i,n,a){if(i!==null)for(var s,l,u,p,f,m,h,g,v=0,x=0,y=i.type,A=y==="FeatureCollection",d=y==="Feature",S=A?i.features.length:1,k=0;k<S;k++){f=(g=!!(h=A?i.features[k].geometry:d?i.geometry:i)&&h.type==="GeometryCollection")?h.geometries.length:1;for(var E=0;E<f;E++){var L=0,O=0;if((p=g?h.geometries[E]:h)!==null){m=p.coordinates;var P=p.type;switch(v=!a||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(m,x,k,L,O)===!1)return!1;x++,L++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(n(m[s],x,k,L,O)===!1)return!1;x++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(l=0;l<m[s].length-v;l++){if(n(m[s][l],x,k,L,O)===!1)return!1;x++}P==="MultiLineString"&&L++,P==="Polygon"&&O++}P==="Polygon"&&L++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(O=0,l=0;l<m[s].length;l++){for(u=0;u<m[s][l].length-v;u++){if(n(m[s][l][u],x,k,L,O)===!1)return!1;x++}O++}L++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(T(p.geometries[s],n,a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(i,n){var a;switch(i.type){case"FeatureCollection":for(a=0;a<i.features.length&&n(i.features[a].properties,a)!==!1;a++);break;case"Feature":n(i.properties,0)}}function w(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&n(i.features[a],a)!==!1;a++);}function b(i,n){var a,s,l,u,p,f,m,h,g,v,x=0,y=i.type==="FeatureCollection",A=i.type==="Feature",d=y?i.features.length:1;for(a=0;a<d;a++){for(f=y?i.features[a].geometry:A?i.geometry:i,h=y?i.features[a].properties:A?i.properties:{},g=y?i.features[a].bbox:A?i.bbox:void 0,v=y?i.features[a].id:A?i.id:void 0,p=(m=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,l=0;l<p;l++)if((u=m?f.geometries[l]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,h,g,v)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],x,h,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,h,g,v)===!1)return!1;x++}}function c(i,n){b(i,function(a,s,l,u,p){var f,m=a===null?null:a.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return n(_.feature(a,l,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(m){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var h=0;h<a.coordinates.length;h++){var g={type:f,coordinates:a.coordinates[h]};if(n(_.feature(g,l),s,h)===!1)return!1}})}function o(i,n){c(i,function(a,s,l){var u=0;if(a.geometry){var p=a.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var f,m=0,h=0,g=0;return T(a,function(v,x,y,A,d){if(f===void 0||s>m||A>h||d>g)return f=v,m=s,h=A,g=d,void(u=0);var S=_.lineString([f,v],a.properties);if(n(S,s,l,d,u)===!1)return!1;u++,f=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");c(i,function(a,s,l){if(a.geometry!==null){var u=a.geometry.type,p=a.geometry.coordinates;switch(u){case"LineString":if(n(a,s,l,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<p.length;f++)if(n(_.lineString(p[f],a.properties),s,l,f)===!1)return!1}}})}C.coordEach=T,C.coordReduce=function(i,n,a,s){var l=a;return T(i,function(u,p,f,m,h){l=p===0&&a===void 0?u:n(l,u,p,f,m,h)},s),l},C.propEach=r,C.propReduce=function(i,n,a){var s=a;return r(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.featureEach=w,C.featureReduce=function(i,n,a){var s=a;return w(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.coordAll=function(i){var n=[];return T(i,function(a){n.push(a)}),n},C.geomEach=b,C.geomReduce=function(i,n,a){var s=a;return b(i,function(l,u,p,f,m){s=u===0&&a===void 0?l:n(s,l,u,p,f,m)}),s},C.flattenEach=c,C.flattenReduce=function(i,n,a){var s=a;return c(i,function(l,u,p){s=u===0&&p===0&&a===void 0?l:n(s,l,u,p)}),s},C.segmentEach=o,C.segmentReduce=function(i,n,a){var s=a,l=!1;return o(i,function(u,p,f,m,h){s=l===!1&&a===void 0?u:n(s,u,p,f,m,h),l=!0}),s},C.lineEach=t,C.lineReduce=function(i,n,a){var s=a;return t(i,function(l,u,p,f){s=u===0&&a===void 0?l:n(s,l,u,p,f)}),s},C.findSegment=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=m.length+p-1),_.lineString([m[p],m[p+1]],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p-1),_.lineString([m[u][p],m[u][p+1]],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p-1),_.lineString([m[l][p],m[l][p+1]],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p-1),_.lineString([m[l][u][p],m[l][u][p+1]],f,n)}throw new Error("geojson is invalid")},C.findPoint=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":return _.point(m,f,n);case"MultiPoint":return l<0&&(l=m.length+l),_.point(m[l],f,n);case"LineString":return p<0&&(p=m.length+p),_.point(m[p],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p),_.point(m[u][p],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p),_.point(m[l][p],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p),_.point(m[l][u][p],f,n)}throw new Error("geojson is invalid")}},77844:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(43752),T=e(49840);C.default=function(r,w){w===void 0&&(w={});var b=0,c=0,o=0;return _.coordEach(r,function(t){b+=t[0],c+=t[1],o++}),T.point([b/o,c/o],w.properties)}},49840:function(R,C){"use strict";function e(s,l,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=l||{},p.geometry=s,p}function _(s,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:s},l,u)}function T(s,l,u){u===void 0&&(u={});for(var p=0,f=s;p<f.length;p++){var m=f[p];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var h=0;h<m[m.length-1].length;h++)if(m[m.length-1][h]!==m[0][h])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:s},l,u)}function r(s,l,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:s},l,u)}function w(s,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=s,u}function b(s,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:s},l,u)}function c(s,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:s},l,u)}function o(s,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:s},l,u)}function t(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s*u}function i(s,l){l===void 0&&(l="kilometers");var u=C.factors[l];if(!u)throw new Error(l+" units is invalid");return s/u}function n(s){return s%(2*Math.PI)*180/Math.PI}function a(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)&&!/^\s*$/.test(s)}Object.defineProperty(C,"__esModule",{value:!0}),C.earthRadius=63710088e-1,C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1e3,kilometres:C.earthRadius/1e3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1e3*C.earthRadius,millimetres:1e3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:C.earthRadius/1.0936},C.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/C.earthRadius,yards:.91441111923921},C.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},C.feature=e,C.geometry=function(s,l,u){switch(u===void 0&&(u={}),s){case"Point":return _(l).geometry;case"LineString":return r(l).geometry;case"Polygon":return T(l).geometry;case"MultiPoint":return c(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return o(l).geometry;default:throw new Error(s+" is invalid")}},C.point=_,C.points=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return _(p,l)}),u)},C.polygon=T,C.polygons=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return T(p,l)}),u)},C.lineString=r,C.lineStrings=function(s,l,u){return u===void 0&&(u={}),w(s.map(function(p){return r(p,l)}),u)},C.featureCollection=w,C.multiLineString=b,C.multiPoint=c,C.multiPolygon=o,C.geometryCollection=function(s,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:s},l,u)},C.round=function(s,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(s*u)/u},C.radiansToLength=t,C.lengthToRadians=i,C.lengthToDegrees=function(s,l){return n(i(s,l))},C.bearingToAzimuth=function(s){var l=s%360;return l<0&&(l+=360),l},C.radiansToDegrees=n,C.degreesToRadians=function(s){return s%360*Math.PI/180},C.convertLength=function(s,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return t(i(s,l),u)},C.convertArea=function(s,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=C.areaFactors[l];if(!p)throw new Error("invalid original units");var f=C.areaFactors[u];if(!f)throw new Error("invalid final units");return s/p*f},C.isNumber=a,C.isObject=function(s){return!!s&&s.constructor===Object},C.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(l){if(!a(l))throw new Error("bbox must only contain numbers")})},C.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")},C.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},C.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},C.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},C.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},C.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},C.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},C.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(R,C,e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var _=e(49840);function T(i,n,a){if(i!==null)for(var s,l,u,p,f,m,h,g,v=0,x=0,y=i.type,A=y==="FeatureCollection",d=y==="Feature",S=A?i.features.length:1,k=0;k<S;k++){f=(g=!!(h=A?i.features[k].geometry:d?i.geometry:i)&&h.type==="GeometryCollection")?h.geometries.length:1;for(var E=0;E<f;E++){var L=0,O=0;if((p=g?h.geometries[E]:h)!==null){m=p.coordinates;var P=p.type;switch(v=!a||P!=="Polygon"&&P!=="MultiPolygon"?0:1,P){case null:break;case"Point":if(n(m,x,k,L,O)===!1)return!1;x++,L++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(n(m[s],x,k,L,O)===!1)return!1;x++,P==="MultiPoint"&&L++}P==="LineString"&&L++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(l=0;l<m[s].length-v;l++){if(n(m[s][l],x,k,L,O)===!1)return!1;x++}P==="MultiLineString"&&L++,P==="Polygon"&&O++}P==="Polygon"&&L++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(O=0,l=0;l<m[s].length;l++){for(u=0;u<m[s][l].length-v;u++){if(n(m[s][l][u],x,k,L,O)===!1)return!1;x++}O++}L++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(T(p.geometries[s],n,a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(i,n){var a;switch(i.type){case"FeatureCollection":for(a=0;a<i.features.length&&n(i.features[a].properties,a)!==!1;a++);break;case"Feature":n(i.properties,0)}}function w(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&n(i.features[a],a)!==!1;a++);}function b(i,n){var a,s,l,u,p,f,m,h,g,v,x=0,y=i.type==="FeatureCollection",A=i.type==="Feature",d=y?i.features.length:1;for(a=0;a<d;a++){for(f=y?i.features[a].geometry:A?i.geometry:i,h=y?i.features[a].properties:A?i.properties:{},g=y?i.features[a].bbox:A?i.bbox:void 0,v=y?i.features[a].id:A?i.id:void 0,p=(m=!!f&&f.type==="GeometryCollection")?f.geometries.length:1,l=0;l<p;l++)if((u=m?f.geometries[l]:f)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,x,h,g,v)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(n(u.geometries[s],x,h,g,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,x,h,g,v)===!1)return!1;x++}}function c(i,n){b(i,function(a,s,l,u,p){var f,m=a===null?null:a.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return n(_.feature(a,l,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(m){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon"}for(var h=0;h<a.coordinates.length;h++){var g={type:f,coordinates:a.coordinates[h]};if(n(_.feature(g,l),s,h)===!1)return!1}})}function o(i,n){c(i,function(a,s,l){var u=0;if(a.geometry){var p=a.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var f,m=0,h=0,g=0;return T(a,function(v,x,y,A,d){if(f===void 0||s>m||A>h||d>g)return f=v,m=s,h=A,g=d,void(u=0);var S=_.lineString([f,v],a.properties);if(n(S,s,l,d,u)===!1)return!1;u++,f=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");c(i,function(a,s,l){if(a.geometry!==null){var u=a.geometry.type,p=a.geometry.coordinates;switch(u){case"LineString":if(n(a,s,l,0,0)===!1)return!1;break;case"Polygon":for(var f=0;f<p.length;f++)if(n(_.lineString(p[f],a.properties),s,l,f)===!1)return!1}}})}C.coordEach=T,C.coordReduce=function(i,n,a,s){var l=a;return T(i,function(u,p,f,m,h){l=p===0&&a===void 0?u:n(l,u,p,f,m,h)},s),l},C.propEach=r,C.propReduce=function(i,n,a){var s=a;return r(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.featureEach=w,C.featureReduce=function(i,n,a){var s=a;return w(i,function(l,u){s=u===0&&a===void 0?l:n(s,l,u)}),s},C.coordAll=function(i){var n=[];return T(i,function(a){n.push(a)}),n},C.geomEach=b,C.geomReduce=function(i,n,a){var s=a;return b(i,function(l,u,p,f,m){s=u===0&&a===void 0?l:n(s,l,u,p,f,m)}),s},C.flattenEach=c,C.flattenReduce=function(i,n,a){var s=a;return c(i,function(l,u,p){s=u===0&&p===0&&a===void 0?l:n(s,l,u,p)}),s},C.segmentEach=o,C.segmentReduce=function(i,n,a){var s=a,l=!1;return o(i,function(u,p,f,m,h){s=l===!1&&a===void 0?u:n(s,u,p,f,m,h),l=!0}),s},C.lineEach=t,C.lineReduce=function(i,n,a){var s=a;return t(i,function(l,u,p,f){s=u===0&&a===void 0?l:n(s,l,u,p,f)}),s},C.findSegment=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.segmentIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=m.length+p-1),_.lineString([m[p],m[p+1]],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p-1),_.lineString([m[u][p],m[u][p+1]],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p-1),_.lineString([m[l][p],m[l][p+1]],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p-1),_.lineString([m[l][u][p],m[l][u][p+1]],f,n)}throw new Error("geojson is invalid")},C.findPoint=function(i,n){if(n=n||{},!_.isObject(n))throw new Error("options is invalid");var a,s=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,p=n.coordIndex||0,f=n.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),f=f||i.features[s].properties,a=i.features[s].geometry;break;case"Feature":f=f||i.properties,a=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=i;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var m=a.coordinates;switch(a.type){case"Point":return _.point(m,f,n);case"MultiPoint":return l<0&&(l=m.length+l),_.point(m[l],f,n);case"LineString":return p<0&&(p=m.length+p),_.point(m[p],f,n);case"Polygon":return u<0&&(u=m.length+u),p<0&&(p=m[u].length+p),_.point(m[u][p],f,n);case"MultiLineString":return l<0&&(l=m.length+l),p<0&&(p=m[l].length+p),_.point(m[l][p],f,n);case"MultiPolygon":return l<0&&(l=m.length+l),u<0&&(u=m[l].length+u),p<0&&(p=m[l][u].length-p),_.point(m[l][u][p],f,n)}throw new Error("geojson is invalid")}},49972:function(R){R.exports=function(C){var e=0,_=0,T=0,r=0;return C.map(function(w){var b=(w=w.slice())[0],c=b.toUpperCase();if(b!=c)switch(w[0]=c,b){case"a":w[6]+=T,w[7]+=r;break;case"v":w[1]+=r;break;case"h":w[1]+=T;break;default:for(var o=1;o<w.length;)w[o++]+=T,w[o++]+=r}switch(c){case"Z":T=e,r=_;break;case"H":T=w[1];break;case"V":r=w[1];break;case"M":T=e=w[1],r=_=w[2];break;default:T=w[w.length-2],r=w[w.length-1]}return w})}},76752:function(R){"use strict";R.exports=function(C,e){if(!C||C.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var _=Array(2*e),T=0;T<e;T++){for(var r=-1/0,w=1/0,b=T,c=C.length;b<c;b+=e)C[b]>r&&(r=C[b]),C[b]<w&&(w=C[b]);_[T]=w,_[e+T]=r}return _}},10272:function(R){"use strict";R.exports=function(C,e,_){if(typeof Array.prototype.findIndex=="function")return C.findIndex(e,_);if(typeof e!="function")throw new TypeError("predicate must be a function");var T=Object(C),r=T.length;if(r===0)return-1;for(var w=0;w<r;w++)if(e.call(_,T[w],w,T))return w;return-1}},71152:function(R,C,e){"use strict";var _=e(76752);R.exports=function(T,r,w){if(!T||T.length==null)throw Error("Argument should be an array");r==null&&(r=1),w==null&&(w=_(T,r));for(var b=0;b<r;b++){var c=w[r+b],o=w[b],t=b,i=T.length;if(c===1/0&&o===-1/0)for(t=b;t<i;t+=r)T[t]=T[t]===c?1:T[t]===o?0:.5;else if(c===1/0)for(t=b;t<i;t+=r)T[t]=T[t]===c?1:0;else if(o===-1/0)for(t=b;t<i;t+=r)T[t]=T[t]===o?0:1;else{var n=c-o;for(t=b;t<i;t+=r)isNaN(T[t])||(T[t]=n===0?.5:(T[t]-o)/n)}}return T}},67752:function(R){R.exports=function(C,e){var _=typeof C=="number",T=typeof e=="number";_&&!T?(e=C,C=0):_||T||(C=0,e=0);var r=(e|=0)-(C|=0);if(r<0)throw new Error("array length must be positive");for(var w=new Array(r),b=0,c=C;b<r;b++,c++)w[b]=c;return w}},45408:function(R,C,e){"use strict";var _=e(4168);function T(I){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},T(I)}var r,w,b=e(86832).codes,c=b.ERR_AMBIGUOUS_ARGUMENT,o=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,n=b.ERR_MISSING_ARGS,a=e(26144),s=e(35840).inspect,l=e(35840).types,u=l.isPromise,p=l.isRegExp,f=Object.assign?Object.assign:e(60964).assign,m=Object.is?Object.is:e(39896);function h(){var I=e(25116);r=I.isDeepEqual,w=I.isDeepStrictEqual}var g=!1,v=R.exports=d,x={};function y(I){throw I.message instanceof Error?I.message:new a(I)}function A(I,N,W,B){if(!W){var V=!1;if(N===0)V=!0,B="No value argument passed to `assert.ok()`";else if(B instanceof Error)throw B;var q=new a({actual:W,expected:!0,message:B,operator:"==",stackStartFn:I});throw q.generatedMessage=V,q}}function d(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];A.apply(void 0,[d,N.length].concat(N))}v.fail=function I(N,W,B,V,q){var ne,$=arguments.length;if($===0?ne="Failed":$===1?(B=N,N=void 0):(g===!1&&(g=!0,(_.emitWarning?_.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),$===2&&(V="!=")),B instanceof Error)throw B;var K={actual:N,expected:W,operator:V===void 0?"fail":V,stackStartFn:q||I};B!==void 0&&(K.message=B);var ee=new a(K);throw ne&&(ee.message=ne,ee.generatedMessage=!0),ee},v.AssertionError=a,v.ok=d,v.equal=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");N!=W&&y({actual:N,expected:W,message:B,operator:"==",stackStartFn:I})},v.notEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");N==W&&y({actual:N,expected:W,message:B,operator:"!=",stackStartFn:I})},v.deepEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");r===void 0&&h(),r(N,W)||y({actual:N,expected:W,message:B,operator:"deepEqual",stackStartFn:I})},v.notDeepEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");r===void 0&&h(),r(N,W)&&y({actual:N,expected:W,message:B,operator:"notDeepEqual",stackStartFn:I})},v.deepStrictEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");r===void 0&&h(),w(N,W)||y({actual:N,expected:W,message:B,operator:"deepStrictEqual",stackStartFn:I})},v.notDeepStrictEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");r===void 0&&h(),w(N,W)&&y({actual:N,expected:W,message:B,operator:"notDeepStrictEqual",stackStartFn:I})},v.strictEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");m(N,W)||y({actual:N,expected:W,message:B,operator:"strictEqual",stackStartFn:I})},v.notStrictEqual=function I(N,W,B){if(arguments.length<2)throw new n("actual","expected");m(N,W)&&y({actual:N,expected:W,message:B,operator:"notStrictEqual",stackStartFn:I})};var S=function I(N,W,B){var V=this;(function(q,ne){if(!(q instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,I),W.forEach(function(q){q in N&&(B!==void 0&&typeof B[q]=="string"&&p(N[q])&&N[q].test(B[q])?V[q]=B[q]:V[q]=N[q])})};function k(I,N,W,B){if(typeof N!="function"){if(p(N))return N.test(I);if(arguments.length===2)throw new o("expected",["Function","RegExp"],N);if(T(I)!=="object"||I===null){var V=new a({actual:I,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:B});throw V.operator=B.name,V}var q=Object.keys(N);if(N instanceof Error)q.push("name","message");else if(q.length===0)throw new t("error",N,"may not be an empty object");return r===void 0&&h(),q.forEach(function(ne){typeof I[ne]=="string"&&p(N[ne])&&N[ne].test(I[ne])||function($,K,ee,J,Z,te){if(!(ee in $)||!w($[ee],K[ee])){if(!J){var oe=new S($,Z),se=new S(K,Z,$),ce=new a({actual:oe,expected:se,operator:"deepStrictEqual",stackStartFn:te});throw ce.actual=$,ce.expected=K,ce.operator=te.name,ce}y({actual:$,expected:K,message:J,operator:te.name,stackStartFn:te})}}(I,N,ne,W,q,B)}),!0}return N.prototype!==void 0&&I instanceof N||!Error.isPrototypeOf(N)&&N.call({},I)===!0}function E(I){if(typeof I!="function")throw new o("fn","Function",I);try{I()}catch(N){return N}return x}function L(I){return u(I)||I!==null&&T(I)==="object"&&typeof I.then=="function"&&typeof I.catch=="function"}function O(I){return Promise.resolve().then(function(){var N;if(typeof I=="function"){if(!L(N=I()))throw new i("instance of Promise","promiseFn",N)}else{if(!L(I))throw new o("promiseFn",["Function","Promise"],I);N=I}return Promise.resolve().then(function(){return N}).then(function(){return x}).catch(function(W){return W})})}function P(I,N,W,B){if(typeof W=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],W);if(T(N)==="object"&&N!==null){if(N.message===W)throw new c("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new c("error/message",'The error "'.concat(N,'" is identical to the message.'));B=W,W=void 0}else if(W!=null&&T(W)!=="object"&&typeof W!="function")throw new o("error",["Object","Error","Function","RegExp"],W);if(N===x){var V="";W&&W.name&&(V+=" (".concat(W.name,")")),V+=B?": ".concat(B):".";var q=I.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:W,operator:I.name,message:"Missing expected ".concat(q).concat(V),stackStartFn:I})}if(W&&!k(N,W,B,I))throw N}function F(I,N,W,B){if(N!==x){if(typeof W=="string"&&(B=W,W=void 0),!W||k(N,W)){var V=B?": ".concat(B):".",q=I.name==="doesNotReject"?"rejection":"exception";y({actual:N,expected:W,operator:I.name,message:"Got unwanted ".concat(q).concat(V,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:I})}throw N}}function U(){for(var I=arguments.length,N=new Array(I),W=0;W<I;W++)N[W]=arguments[W];A.apply(void 0,[U,N.length].concat(N))}v.throws=function I(N){for(var W=arguments.length,B=new Array(W>1?W-1:0),V=1;V<W;V++)B[V-1]=arguments[V];P.apply(void 0,[I,E(N)].concat(B))},v.rejects=function I(N){for(var W=arguments.length,B=new Array(W>1?W-1:0),V=1;V<W;V++)B[V-1]=arguments[V];return O(N).then(function(q){return P.apply(void 0,[I,q].concat(B))})},v.doesNotThrow=function I(N){for(var W=arguments.length,B=new Array(W>1?W-1:0),V=1;V<W;V++)B[V-1]=arguments[V];F.apply(void 0,[I,E(N)].concat(B))},v.doesNotReject=function I(N){for(var W=arguments.length,B=new Array(W>1?W-1:0),V=1;V<W;V++)B[V-1]=arguments[V];return O(N).then(function(q){return F.apply(void 0,[I,q].concat(B))})},v.ifError=function I(N){if(N!=null){var W="ifError got unwanted exception: ";T(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=s(N);var B=new a({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:I}),V=N.stack;if(typeof V=="string"){var q=V.split(`
`);q.shift();for(var ne=B.stack.split(`
`),$=0;$<q.length;$++){var K=ne.indexOf(q[$]);if(K!==-1){ne=ne.slice(0,K);break}}B.stack="".concat(ne.join(`
`),`
`).concat(q.join(`
`))}throw B}},v.strict=f(U,v,{equal:v.strictEqual,deepEqual:v.deepStrictEqual,notEqual:v.notStrictEqual,notDeepEqual:v.notDeepStrictEqual}),v.strict.strict=v.strict},26144:function(R,C,e){"use strict";var _=e(4168);function T(y,A,d){return A in y?Object.defineProperty(y,A,{value:d,enumerable:!0,configurable:!0,writable:!0}):y[A]=d,y}function r(y,A){for(var d=0;d<A.length;d++){var S=A[d];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function w(y,A){return!A||n(A)!=="object"&&typeof A!="function"?b(y):A}function b(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(y){var A=typeof Map=="function"?new Map:void 0;return c=function(d){if(d===null||(S=d,Function.toString.call(S).indexOf("[native code]")===-1))return d;var S;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(A!==void 0){if(A.has(d))return A.get(d);A.set(d,k)}function k(){return o(d,arguments,i(this).constructor)}return k.prototype=Object.create(d.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),t(k,d)},c(y)}function o(y,A,d){return o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,k,E){var L=[null];L.push.apply(L,k);var O=new(Function.bind.apply(S,L));return E&&t(O,E.prototype),O},o.apply(null,arguments)}function t(y,A){return t=Object.setPrototypeOf||function(d,S){return d.__proto__=S,d},t(y,A)}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},i(y)}function n(y){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},n(y)}var a=e(35840).inspect,s=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(y,A,d){return(d===void 0||d>y.length)&&(d=y.length),y.substring(d-A.length,d)===A}var u="",p="",f="",m="",h={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function g(y){var A=Object.keys(y),d=Object.create(Object.getPrototypeOf(y));return A.forEach(function(S){d[S]=y[S]}),Object.defineProperty(d,"message",{value:y.message}),d}function v(y){return a(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(y){function A(k){var E;if(function(ne,$){if(!(ne instanceof $))throw new TypeError("Cannot call a class as a function")}(this,A),n(k)!=="object"||k===null)throw new s("options","Object",k);var L=k.message,O=k.operator,P=k.stackStartFn,F=k.actual,U=k.expected,I=Error.stackTraceLimit;if(Error.stackTraceLimit=0,L!=null)E=w(this,i(A).call(this,String(L)));else if(_.stderr&&_.stderr.isTTY&&(_.stderr&&_.stderr.getColorDepth&&_.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",m="\x1B[39m",f="\x1B[31m"):(u="",p="",m="",f="")),n(F)==="object"&&F!==null&&n(U)==="object"&&U!==null&&"stack"in F&&F instanceof Error&&"stack"in U&&U instanceof Error&&(F=g(F),U=g(U)),O==="deepStrictEqual"||O==="strictEqual")E=w(this,i(A).call(this,function(ne,$,K){var ee="",J="",Z=0,te="",oe=!1,se=v(ne),ce=se.split(`
`),ye=v($).split(`
`),me=0,fe="";if(K==="strictEqual"&&n(ne)==="object"&&n($)==="object"&&ne!==null&&$!==null&&(K="strictEqualObject"),ce.length===1&&ye.length===1&&ce[0]!==ye[0]){var pe=ce[0].length+ye[0].length;if(pe<=10){if(!(n(ne)==="object"&&ne!==null||n($)==="object"&&$!==null||ne===0&&$===0))return"".concat(h[K],`

`)+"".concat(ce[0]," !== ").concat(ye[0],`
`)}else if(K!=="strictEqualObject"&&pe<(_.stderr&&_.stderr.isTTY?_.stderr.columns:80)){for(;ce[0][me]===ye[0][me];)me++;me>2&&(fe=`
  `.concat(function(Pe,De){if(De=Math.floor(De),Pe.length==0||De==0)return"";var ve=Pe.length*De;for(De=Math.floor(Math.log(De)/Math.log(2));De;)Pe+=Pe,De--;return Pe+Pe.substring(0,ve-Pe.length)}(" ",me),"^"),me=0)}}for(var ge=ce[ce.length-1],ke=ye[ye.length-1];ge===ke&&(me++<2?te=`
  `.concat(ge).concat(te):ee=ge,ce.pop(),ye.pop(),ce.length!==0&&ye.length!==0);)ge=ce[ce.length-1],ke=ye[ye.length-1];var Ce=Math.max(ce.length,ye.length);if(Ce===0){var de=se.split(`
`);if(de.length>30)for(de[26]="".concat(u,"...").concat(m);de.length>27;)de.pop();return"".concat(h.notIdentical,`

`).concat(de.join(`
`),`
`)}me>3&&(te=`
`.concat(u,"...").concat(m).concat(te),oe=!0),ee!==""&&(te=`
  `.concat(ee).concat(te),ee="");var ae=0,re=h[K]+`
`.concat(p,"+ actual").concat(m," ").concat(f,"- expected").concat(m),he=" ".concat(u,"...").concat(m," Lines skipped");for(me=0;me<Ce;me++){var Se=me-Z;if(ce.length<me+1)Se>1&&me>2&&(Se>4?(J+=`
`.concat(u,"...").concat(m),oe=!0):Se>3&&(J+=`
  `.concat(ye[me-2]),ae++),J+=`
  `.concat(ye[me-1]),ae++),Z=me,ee+=`
`.concat(f,"-").concat(m," ").concat(ye[me]),ae++;else if(ye.length<me+1)Se>1&&me>2&&(Se>4?(J+=`
`.concat(u,"...").concat(m),oe=!0):Se>3&&(J+=`
  `.concat(ce[me-2]),ae++),J+=`
  `.concat(ce[me-1]),ae++),Z=me,J+=`
`.concat(p,"+").concat(m," ").concat(ce[me]),ae++;else{var xe=ye[me],Te=ce[me],Ae=Te!==xe&&(!l(Te,",")||Te.slice(0,-1)!==xe);Ae&&l(xe,",")&&xe.slice(0,-1)===Te&&(Ae=!1,Te+=","),Ae?(Se>1&&me>2&&(Se>4?(J+=`
`.concat(u,"...").concat(m),oe=!0):Se>3&&(J+=`
  `.concat(ce[me-2]),ae++),J+=`
  `.concat(ce[me-1]),ae++),Z=me,J+=`
`.concat(p,"+").concat(m," ").concat(Te),ee+=`
`.concat(f,"-").concat(m," ").concat(xe),ae+=2):(J+=ee,ee="",Se!==1&&me!==0||(J+=`
  `.concat(Te),ae++))}if(ae>20&&me<Ce-2)return"".concat(re).concat(he,`
`).concat(J,`
`).concat(u,"...").concat(m).concat(ee,`
`)+"".concat(u,"...").concat(m)}return"".concat(re).concat(oe?he:"",`
`).concat(J).concat(ee).concat(te).concat(fe)}(F,U,O)));else if(O==="notDeepStrictEqual"||O==="notStrictEqual"){var N=h[O],W=v(F).split(`
`);if(O==="notStrictEqual"&&n(F)==="object"&&F!==null&&(N=h.notStrictEqualObject),W.length>30)for(W[26]="".concat(u,"...").concat(m);W.length>27;)W.pop();E=W.length===1?w(this,i(A).call(this,"".concat(N," ").concat(W[0]))):w(this,i(A).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var B=v(F),V="",q=h[O];O==="notDeepEqual"||O==="notEqual"?(B="".concat(h[O],`

`).concat(B)).length>1024&&(B="".concat(B.slice(0,1021),"...")):(V="".concat(v(U)),B.length>512&&(B="".concat(B.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),O==="deepEqual"||O==="equal"?B="".concat(q,`

`).concat(B,`

should equal

`):V=" ".concat(O," ").concat(V)),E=w(this,i(A).call(this,"".concat(B).concat(V)))}return Error.stackTraceLimit=I,E.generatedMessage=!L,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=F,E.expected=U,E.operator=O,Error.captureStackTrace&&Error.captureStackTrace(b(E),P),E.stack,E.name="AssertionError",w(E)}var d,S;return function(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),E&&t(k,E)}(A,y),d=A,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(k,E){return a(this,function(L){for(var O=1;O<arguments.length;O++){var P=arguments[O]!=null?arguments[O]:{},F=Object.keys(P);typeof Object.getOwnPropertySymbols=="function"&&(F=F.concat(Object.getOwnPropertySymbols(P).filter(function(U){return Object.getOwnPropertyDescriptor(P,U).enumerable}))),F.forEach(function(U){T(L,U,P[U])})}return L}({},E,{customInspect:!1,depth:0}))}}],S&&r(d.prototype,S),A}(c(Error));R.exports=x},86832:function(R,C,e){"use strict";function _(i){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_(i)}function T(i){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},T(i)}function r(i,n){return r=Object.setPrototypeOf||function(a,s){return a.__proto__=s,a},r(i,n)}var w,b,c={};function o(i,n,a){a||(a=Error);var s=function(l){function u(p,f,m){var h;return function(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}(this,u),h=function(g,v){return!v||_(v)!=="object"&&typeof v!="function"?function(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(g):v}(this,T(u).call(this,function(g,v,x){return typeof n=="string"?n:n(g,v,x)}(p,f,m))),h.code=i,h}return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),f&&r(p,f)}(u,l),u}(a);c[i]=s}function t(i,n){if(Array.isArray(i)){var a=i.length;return i=i.map(function(s){return String(s)}),a>2?"one of ".concat(n," ").concat(i.slice(0,a-1).join(", "),", or ")+i[a-1]:a===2?"one of ".concat(n," ").concat(i[0]," or ").concat(i[1]):"of ".concat(n," ").concat(i[0])}return"of ".concat(n," ").concat(String(i))}o("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),o("ERR_INVALID_ARG_TYPE",function(i,n,a){var s,l,u,p,f;if(w===void 0&&(w=e(45408)),w(typeof i=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(s="must not be",n=n.replace(/^not /,"")):s="must be",function(h,g,v){return(v===void 0||v>h.length)&&(v=h.length),h.substring(v-9,v)===g}(i," argument"))u="The ".concat(i," ").concat(s," ").concat(t(n,"type"));else{var m=(typeof f!="number"&&(f=0),f+1>(p=i).length||p.indexOf(".",f)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(m," ").concat(s," ").concat(t(n,"type"))}return u+". Received type ".concat(_(a))},TypeError),o("ERR_INVALID_ARG_VALUE",function(i,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var s=b.inspect(n);return s.length>128&&(s="".concat(s.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(a,". Received ").concat(s)},TypeError,RangeError),o("ERR_INVALID_RETURN_VALUE",function(i,n,a){var s;return s=a&&a.constructor&&a.constructor.name?"instance of ".concat(a.constructor.name):"type ".concat(_(a)),"Expected ".concat(i,' to be returned from the "').concat(n,'"')+" function but got ".concat(s,".")},TypeError),o("ERR_MISSING_ARGS",function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];w===void 0&&(w=e(45408)),w(n.length>0,"At least one arg needs to be specified");var s="The ",l=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),l){case 1:s+="".concat(n[0]," argument");break;case 2:s+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:s+=n.slice(0,l-1).join(", "),s+=", and ".concat(n[l-1]," arguments")}return"".concat(s," must be specified")},TypeError),R.exports.codes=c},25116:function(R,C,e){"use strict";function _(Z,te){return function(oe){if(Array.isArray(oe))return oe}(Z)||function(oe,se){var ce=[],ye=!0,me=!1,fe=void 0;try{for(var pe,ge=oe[Symbol.iterator]();!(ye=(pe=ge.next()).done)&&(ce.push(pe.value),!se||ce.length!==se);ye=!0);}catch(ke){me=!0,fe=ke}finally{try{ye||ge.return==null||ge.return()}finally{if(me)throw fe}}return ce}(Z,te)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(Z){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},T(Z)}var r=/a/g.flags!==void 0,w=function(Z){var te=[];return Z.forEach(function(oe){return te.push(oe)}),te},b=function(Z){var te=[];return Z.forEach(function(oe,se){return te.push([se,oe])}),te},c=Object.is?Object.is:e(39896),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i(Z){return Z.call.bind(Z)}var n=i(Object.prototype.hasOwnProperty),a=i(Object.prototype.propertyIsEnumerable),s=i(Object.prototype.toString),l=e(35840).types,u=l.isAnyArrayBuffer,p=l.isArrayBufferView,f=l.isDate,m=l.isMap,h=l.isRegExp,g=l.isSet,v=l.isNativeError,x=l.isBoxedPrimitive,y=l.isNumberObject,A=l.isStringObject,d=l.isBooleanObject,S=l.isBigIntObject,k=l.isSymbolObject,E=l.isFloat32Array,L=l.isFloat64Array;function O(Z){if(Z.length===0||Z.length>10)return!0;for(var te=0;te<Z.length;te++){var oe=Z.charCodeAt(te);if(oe<48||oe>57)return!0}return Z.length===10&&Z>=Math.pow(2,32)}function P(Z){return Object.keys(Z).filter(O).concat(o(Z).filter(Object.prototype.propertyIsEnumerable.bind(Z)))}function F(Z,te){if(Z===te)return 0;for(var oe=Z.length,se=te.length,ce=0,ye=Math.min(oe,se);ce<ye;++ce)if(Z[ce]!==te[ce]){oe=Z[ce],se=te[ce];break}return oe<se?-1:se<oe?1:0}var U=0,I=1,N=2,W=3;function B(Z,te,oe,se){if(Z===te)return Z!==0||!oe||c(Z,te);if(oe){if(T(Z)!=="object")return typeof Z=="number"&&t(Z)&&t(te);if(T(te)!=="object"||Z===null||te===null||Object.getPrototypeOf(Z)!==Object.getPrototypeOf(te))return!1}else{if(Z===null||T(Z)!=="object")return(te===null||T(te)!=="object")&&Z==te;if(te===null||T(te)!=="object")return!1}var ce,ye,me,fe,pe=s(Z);if(pe!==s(te))return!1;if(Array.isArray(Z)){if(Z.length!==te.length)return!1;var ge=P(Z),ke=P(te);return ge.length===ke.length&&q(Z,te,oe,se,I,ge)}if(pe==="[object Object]"&&(!m(Z)&&m(te)||!g(Z)&&g(te)))return!1;if(f(Z)){if(!f(te)||Date.prototype.getTime.call(Z)!==Date.prototype.getTime.call(te))return!1}else if(h(Z)){if(!h(te)||(me=Z,fe=te,!(r?me.source===fe.source&&me.flags===fe.flags:RegExp.prototype.toString.call(me)===RegExp.prototype.toString.call(fe))))return!1}else if(v(Z)||Z instanceof Error){if(Z.message!==te.message||Z.name!==te.name)return!1}else{if(p(Z)){if(oe||!E(Z)&&!L(Z)){if(!function(ae,re){return ae.byteLength===re.byteLength&&F(new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength),new Uint8Array(re.buffer,re.byteOffset,re.byteLength))===0}(Z,te))return!1}else if(!function(ae,re){if(ae.byteLength!==re.byteLength)return!1;for(var he=0;he<ae.byteLength;he++)if(ae[he]!==re[he])return!1;return!0}(Z,te))return!1;var Ce=P(Z),de=P(te);return Ce.length===de.length&&q(Z,te,oe,se,U,Ce)}if(g(Z))return!(!g(te)||Z.size!==te.size)&&q(Z,te,oe,se,N);if(m(Z))return!(!m(te)||Z.size!==te.size)&&q(Z,te,oe,se,W);if(u(Z)){if(ye=te,(ce=Z).byteLength!==ye.byteLength||F(new Uint8Array(ce),new Uint8Array(ye))!==0)return!1}else if(x(Z)&&!function(ae,re){return y(ae)?y(re)&&c(Number.prototype.valueOf.call(ae),Number.prototype.valueOf.call(re)):A(ae)?A(re)&&String.prototype.valueOf.call(ae)===String.prototype.valueOf.call(re):d(ae)?d(re)&&Boolean.prototype.valueOf.call(ae)===Boolean.prototype.valueOf.call(re):S(ae)?S(re)&&BigInt.prototype.valueOf.call(ae)===BigInt.prototype.valueOf.call(re):k(re)&&Symbol.prototype.valueOf.call(ae)===Symbol.prototype.valueOf.call(re)}(Z,te))return!1}return q(Z,te,oe,se,U)}function V(Z,te){return te.filter(function(oe){return a(Z,oe)})}function q(Z,te,oe,se,ce,ye){if(arguments.length===5){ye=Object.keys(Z);var me=Object.keys(te);if(ye.length!==me.length)return!1}for(var fe=0;fe<ye.length;fe++)if(!n(te,ye[fe]))return!1;if(oe&&arguments.length===5){var pe=o(Z);if(pe.length!==0){var ge=0;for(fe=0;fe<pe.length;fe++){var ke=pe[fe];if(a(Z,ke)){if(!a(te,ke))return!1;ye.push(ke),ge++}else if(a(te,ke))return!1}var Ce=o(te);if(pe.length!==Ce.length&&V(te,Ce).length!==ge)return!1}else{var de=o(te);if(de.length!==0&&V(te,de).length!==0)return!1}}if(ye.length===0&&(ce===U||ce===I&&Z.length===0||Z.size===0))return!0;if(se===void 0)se={val1:new Map,val2:new Map,position:0};else{var ae=se.val1.get(Z);if(ae!==void 0){var re=se.val2.get(te);if(re!==void 0)return ae===re}se.position++}se.val1.set(Z,se.position),se.val2.set(te,se.position);var he=function(Se,xe,Te,Ae,Pe,De){var ve=0;if(De===N){if(!function(Le,je,Ge,Je){for(var rt=null,ot=w(Le),yt=0;yt<ot.length;yt++){var _t=ot[yt];if(T(_t)==="object"&&_t!==null)rt===null&&(rt=new Set),rt.add(_t);else if(!je.has(_t)){if(Ge||!K(Le,je,_t))return!1;rt===null&&(rt=new Set),rt.add(_t)}}if(rt!==null){for(var mt=w(je),tt=0;tt<mt.length;tt++){var Qe=mt[tt];if(T(Qe)==="object"&&Qe!==null){if(!ne(rt,Qe,Ge,Je))return!1}else if(!Ge&&!Le.has(Qe)&&!ne(rt,Qe,Ge,Je))return!1}return rt.size===0}return!0}(Se,xe,Te,Pe))return!1}else if(De===W){if(!function(Le,je,Ge,Je){for(var rt=null,ot=b(Le),yt=0;yt<ot.length;yt++){var _t=_(ot[yt],2),mt=_t[0],tt=_t[1];if(T(mt)==="object"&&mt!==null)rt===null&&(rt=new Set),rt.add(mt);else{var Qe=je.get(mt);if(Qe===void 0&&!je.has(mt)||!B(tt,Qe,Ge,Je)){if(Ge||!ee(Le,je,mt,tt,Je))return!1;rt===null&&(rt=new Set),rt.add(mt)}}}if(rt!==null){for(var Dt=b(je),zt=0;zt<Dt.length;zt++){var pt=_(Dt[zt],2),vt=(mt=pt[0],pt[1]);if(T(mt)==="object"&&mt!==null){if(!J(rt,Le,mt,vt,Ge,Je))return!1}else if(!(Ge||Le.has(mt)&&B(Le.get(mt),vt,!1,Je)||J(rt,Le,mt,vt,!1,Je)))return!1}return rt.size===0}return!0}(Se,xe,Te,Pe))return!1}else if(De===I)for(;ve<Se.length;ve++){if(!n(Se,ve)){if(n(xe,ve))return!1;for(var we=Object.keys(Se);ve<we.length;ve++){var Ee=we[ve];if(!n(xe,Ee)||!B(Se[Ee],xe[Ee],Te,Pe))return!1}return we.length===Object.keys(xe).length}if(!n(xe,ve)||!B(Se[ve],xe[ve],Te,Pe))return!1}for(ve=0;ve<Ae.length;ve++){var Fe=Ae[ve];if(!B(Se[Fe],xe[Fe],Te,Pe))return!1}return!0}(Z,te,oe,ye,se,ce);return se.val1.delete(Z),se.val2.delete(te),he}function ne(Z,te,oe,se){for(var ce=w(Z),ye=0;ye<ce.length;ye++){var me=ce[ye];if(B(te,me,oe,se))return Z.delete(me),!0}return!1}function $(Z){switch(T(Z)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Z=+Z;case"number":if(t(Z))return!1}return!0}function K(Z,te,oe){var se=$(oe);return se??(te.has(se)&&!Z.has(se))}function ee(Z,te,oe,se,ce){var ye=$(oe);if(ye!=null)return ye;var me=te.get(ye);return!(me===void 0&&!te.has(ye)||!B(se,me,!1,ce))&&!Z.has(ye)&&B(se,me,!1,ce)}function J(Z,te,oe,se,ce,ye){for(var me=w(Z),fe=0;fe<me.length;fe++){var pe=me[fe];if(B(oe,pe,ce,ye)&&B(se,te.get(pe),ce,ye))return Z.delete(pe),!0}return!1}R.exports={isDeepEqual:function(Z,te){return B(Z,te,!1)},isDeepStrictEqual:function(Z,te){return B(Z,te,!0)}}},83160:function(R,C,e){"use strict";e.r(C),e.d(C,{decode:function(){return b},encode:function(){return w}});for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=typeof Uint8Array>"u"?[]:new Uint8Array(256),r=0;r<64;r++)T[_.charCodeAt(r)]=r;var w=function(c){var o,t=new Uint8Array(c),i=t.length,n="";for(o=0;o<i;o+=3)n+=_[t[o]>>2],n+=_[(3&t[o])<<4|t[o+1]>>4],n+=_[(15&t[o+1])<<2|t[o+2]>>6],n+=_[63&t[o+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},b=function(c){var o,t,i,n,a,s=.75*c.length,l=c.length,u=0;c[c.length-1]==="="&&(s--,c[c.length-2]==="="&&s--);var p=new ArrayBuffer(s),f=new Uint8Array(p);for(o=0;o<l;o+=4)t=T[c.charCodeAt(o)],i=T[c.charCodeAt(o+1)],n=T[c.charCodeAt(o+2)],a=T[c.charCodeAt(o+3)],f[u++]=t<<2|i>>4,f[u++]=(15&i)<<4|n>>2,f[u++]=(3&n)<<6|63&a;return p}},59968:function(R,C){"use strict";C.byteLength=function(o){var t=b(o),i=t[0],n=t[1];return 3*(i+n)/4-n},C.toByteArray=function(o){var t,i,n=b(o),a=n[0],s=n[1],l=new T(function(f,m,h){return 3*(m+h)/4-h}(0,a,s)),u=0,p=s>0?a-4:a;for(i=0;i<p;i+=4)t=_[o.charCodeAt(i)]<<18|_[o.charCodeAt(i+1)]<<12|_[o.charCodeAt(i+2)]<<6|_[o.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return s===2&&(t=_[o.charCodeAt(i)]<<2|_[o.charCodeAt(i+1)]>>4,l[u++]=255&t),s===1&&(t=_[o.charCodeAt(i)]<<10|_[o.charCodeAt(i+1)]<<4|_[o.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},C.fromByteArray=function(o){for(var t,i=o.length,n=i%3,a=[],s=16383,l=0,u=i-n;l<u;l+=s)a.push(c(o,l,l+s>u?u:l+s));return n===1?(t=o[i-1],a.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(o[i-2]<<8)+o[i-1],a.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),a.join("")};for(var e=[],_=[],T=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0;w<64;++w)e[w]=r[w],_[r.charCodeAt(w)]=w;function b(o){var t=o.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=o.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function c(o,t,i){for(var n,a,s=[],l=t;l<i;l+=3)n=(o[l]<<16&16711680)+(o[l+1]<<8&65280)+(255&o[l+2]),s.push(e[(a=n)>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return s.join("")}_[45]=62,_[95]=63},64928:function(R){"use strict";function C(b,c,o,t,i){for(var n=i+1;t<=i;){var a=t+i>>>1,s=b[a];(o!==void 0?o(s,c):s-c)>=0?(n=a,i=a-1):t=a+1}return n}function e(b,c,o,t,i){for(var n=i+1;t<=i;){var a=t+i>>>1,s=b[a];(o!==void 0?o(s,c):s-c)>0?(n=a,i=a-1):t=a+1}return n}function _(b,c,o,t,i){for(var n=t-1;t<=i;){var a=t+i>>>1,s=b[a];(o!==void 0?o(s,c):s-c)<0?(n=a,t=a+1):i=a-1}return n}function T(b,c,o,t,i){for(var n=t-1;t<=i;){var a=t+i>>>1,s=b[a];(o!==void 0?o(s,c):s-c)<=0?(n=a,t=a+1):i=a-1}return n}function r(b,c,o,t,i){for(;t<=i;){var n=t+i>>>1,a=b[n],s=o!==void 0?o(a,c):a-c;if(s===0)return n;s<=0?t=n+1:i=n-1}return-1}function w(b,c,o,t,i,n){return typeof o=="function"?n(b,c,o,t===void 0?0:0|t,i===void 0?b.length-1:0|i):n(b,c,void 0,o===void 0?0:0|o,t===void 0?b.length-1:0|t)}R.exports={ge:function(b,c,o,t,i){return w(b,c,o,t,i,C)},gt:function(b,c,o,t,i){return w(b,c,o,t,i,e)},lt:function(b,c,o,t,i){return w(b,c,o,t,i,_)},le:function(b,c,o,t,i){return w(b,c,o,t,i,T)},eq:function(b,c,o,t,i){return w(b,c,o,t,i,r)}}},308:function(R,C){"use strict";function e(T){var r=32;return(T&=-T)&&r--,65535&T&&(r-=16),16711935&T&&(r-=8),252645135&T&&(r-=4),858993459&T&&(r-=2),1431655765&T&&(r-=1),r}C.INT_BITS=32,C.INT_MAX=2147483647,C.INT_MIN=-2147483648,C.sign=function(T){return(T>0)-(T<0)},C.abs=function(T){var r=T>>31;return(T^r)-r},C.min=function(T,r){return r^(T^r)&-(T<r)},C.max=function(T,r){return T^(T^r)&-(T<r)},C.isPow2=function(T){return!(T&T-1||!T)},C.log2=function(T){var r,w;return r=(T>65535)<<4,r|=w=((T>>>=r)>255)<<3,r|=w=((T>>>=w)>15)<<2,(r|=w=((T>>>=w)>3)<<1)|(T>>>=w)>>1},C.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},C.popCount=function(T){return 16843009*((T=(858993459&(T-=T>>>1&1431655765))+(T>>>2&858993459))+(T>>>4)&252645135)>>>24},C.countTrailingZeros=e,C.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,1+(T|=T>>>16)},C.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,(T|=T>>>16)-(T>>>1)},C.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,27030>>>(T&=15)&1};var _=new Array(256);(function(T){for(var r=0;r<256;++r){var w=r,b=r,c=7;for(w>>>=1;w;w>>>=1)b<<=1,b|=1&w,--c;T[r]=b<<c&255}})(_),C.reverse=function(T){return _[255&T]<<24|_[T>>>8&255]<<16|_[T>>>16&255]<<8|_[T>>>24&255]},C.interleave2=function(T,r){return(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},C.deinterleave2=function(T,r){return(T=65535&((T=16711935&((T=252645135&((T=858993459&((T=T>>>r&1431655765)|T>>>1))|T>>>2))|T>>>4))|T>>>16))<<16>>16},C.interleave3=function(T,r,w){return T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2),(T|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(w=1227133513&((w=3272356035&((w=251719695&((w=4278190335&((w&=1023)|w<<16))|w<<8))|w<<4))|w<<2))<<2},C.deinterleave3=function(T,r){return(T=1023&((T=4278190335&((T=251719695&((T=3272356035&((T=T>>>r&1227133513)|T>>>2))|T>>>4))|T>>>8))|T>>>16))<<22>>22},C.nextCombination=function(T){var r=T|T-1;return r+1|(~r&-~r)-1>>>e(T)+1}},29620:function(R,C,e){"use strict";var _=e(32420);R.exports=function(b,c){c||(c={});var o,t,i,n,a,s,l,u,p,f,m,h=c.cutoff==null?.25:c.cutoff,g=c.radius==null?8:c.radius,v=c.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!c.width||!c.height)throw Error("For raw data width and height should be provided by options");o=c.width,t=c.height,n=b,s=c.stride?c.stride:Math.floor(b.length/o/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(u=b).getContext("2d"),o=u.width,t=u.height,n=(p=l.getImageData(0,0,o,t)).data,s=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,o=(u=b.canvas).width,t=u.height,n=(p=l.getImageData(0,0,o,t)).data,s=4):window.ImageData&&b instanceof window.ImageData&&(p=b,o=b.width,t=b.height,n=p.data,s=4);if(i=Math.max(o,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(a=n,n=Array(o*t),f=0,m=a.length;f<m;f++)n[f]=a[f*s+v]/255;else if(s!==1)throw Error("Raw data can have only 1 value per pixel");var x=Array(o*t),y=Array(o*t),A=Array(i),d=Array(i),S=Array(i+1),k=Array(i);for(f=0,m=o*t;f<m;f++){var E=n[f];x[f]=E===1?0:E===0?T:Math.pow(Math.max(0,.5-E),2),y[f]=E===1?T:E===0?0:Math.pow(Math.max(0,E-.5),2)}r(x,o,t,A,d,k,S),r(y,o,t,A,d,k,S);var L=window.Float32Array?new Float32Array(o*t):new Array(o*t);for(f=0,m=o*t;f<m;f++)L[f]=_(1-((x[f]-y[f])/g+h),0,1);return L};var T=1e20;function r(b,c,o,t,i,n,a){for(var s=0;s<c;s++){for(var l=0;l<o;l++)t[l]=b[l*c+s];for(w(t,i,n,a,o),l=0;l<o;l++)b[l*c+s]=i[l]}for(l=0;l<o;l++){for(s=0;s<c;s++)t[s]=b[l*c+s];for(w(t,i,n,a,c),s=0;s<c;s++)b[l*c+s]=Math.sqrt(i[s])}}function w(b,c,o,t,i){o[0]=0,t[0]=-T,t[1]=+T;for(var n=1,a=0;n<i;n++){for(var s=(b[n]+n*n-(b[o[a]]+o[a]*o[a]))/(2*n-2*o[a]);s<=t[a];)a--,s=(b[n]+n*n-(b[o[a]]+o[a]*o[a]))/(2*n-2*o[a]);o[++a]=n,t[a]=s,t[a+1]=+T}for(n=0,a=0;n<i;n++){for(;t[a+1]<n;)a++;c[n]=(n-o[a])*(n-o[a])+b[o[a]]}}},99676:function(R,C,e){"use strict";var _=e(53664),T=e(57916),r=T(_("String.prototype.indexOf"));R.exports=function(w,b){var c=_(w,!!b);return typeof c=="function"&&r(w,".prototype.")>-1?T(c):c}},57916:function(R,C,e){"use strict";var _=e(8844),T=e(53664),r=e(14500),w=T("%TypeError%"),b=T("%Function.prototype.apply%"),c=T("%Function.prototype.call%"),o=T("%Reflect.apply%",!0)||_.call(c,b),t=T("%Object.defineProperty%",!0),i=T("%Math.max%");if(t)try{t({},"a",{value:1})}catch{t=null}R.exports=function(a){if(typeof a!="function")throw new w("a function is required");var s=o(_,c,arguments);return r(s,1+i(0,a.length-(arguments.length-1)),!0)};var n=function(){return o(_,b,arguments)};t?t(R.exports,"apply",{value:n}):R.exports.apply=n},32420:function(R){R.exports=function(C,e,_){return e<_?C<e?e:C>_?_:C:C<_?_:C>e?e:C}},3808:function(R,C,e){"use strict";var _=e(32420);function T(r,w){w==null&&(w=!0);var b=r[0],c=r[1],o=r[2],t=r[3];return t==null&&(t=w?1:255),w&&(b*=255,c*=255,o*=255,t*=255),16777216*(b=255&_(b,0,255))+((c=255&_(c,0,255))<<16)+((o=255&_(o,0,255))<<8)+(255&_(t,0,255))}R.exports=T,R.exports.to=T,R.exports.from=function(r,w){var b=(r=+r)>>>24,c=(16711680&r)>>>16,o=(65280&r)>>>8,t=255&r;return w===!1?[b,c,o,t]:[b/255,c/255,o/255,t/255]}},17592:function(R){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(R,C,e){"use strict";var _=e(96824),T=e(32420),r=e(72512);R.exports=function(w,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var c=new(r(b))(4),o=b!=="uint8"&&b!=="uint8_clamped";return w.length&&typeof w!="string"||((w=_(w))[0]/=255,w[1]/=255,w[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(w)?(c[0]=w[0],c[1]=w[1],c[2]=w[2],c[3]=w[3]!=null?w[3]:255,o&&(c[0]/=255,c[1]/=255,c[2]/=255,c[3]/=255),c):(o?(c[0]=w[0],c[1]=w[1],c[2]=w[2],c[3]=w[3]!=null?w[3]:1):(c[0]=T(Math.floor(255*w[0]),0,255),c[1]=T(Math.floor(255*w[1]),0,255),c[2]=T(Math.floor(255*w[2]),0,255),c[3]=w[3]==null?255:T(Math.floor(255*w[3]),0,255)),c)}},96824:function(R,C,e){"use strict";var _=e(95532),T=e(53576),r=e(32420);R.exports=function(w){var b,c=_(w);return c.space?((b=Array(3))[0]=r(c.values[0],0,255),b[1]=r(c.values[1],0,255),b[2]=r(c.values[2],0,255),c.space[0]==="h"&&(b=T.rgb(b)),b.push(r(c.alpha,0,1)),b):[]}},95532:function(R,C,e){"use strict";var _=e(17592);R.exports=function(r){var w,b,c=[],o=1;if(typeof r=="string")if(r=r.toLowerCase(),_[r])c=_[r].slice(),b="rgb";else if(r==="transparent")o=0,b="rgb",c=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var t=r.slice(1);o=1,(a=t.length)<=4?(c=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],a===4&&(o=parseInt(t[3]+t[3],16)/255)):(c=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],a===8&&(o=parseInt(t[6]+t[7],16)/255)),c[0]||(c[0]=0),c[1]||(c[1]=0),c[2]||(c[2]=0),b="rgb"}else if(w=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var i=w[1],n=i==="rgb";b=t=i.replace(/a$/,"");var a=t==="cmyk"?4:t==="gray"?1:3;c=w[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(s,l){if(/%$/.test(s))return l===a?parseFloat(s)/100:t==="rgb"?255*parseFloat(s)/100:parseFloat(s);if(t[l]==="h"){if(/deg$/.test(s))return parseFloat(s);if(T[s]!==void 0)return T[s]}return parseFloat(s)}),i===t&&c.push(1),o=n||c[a]===void 0?1:c[a],c=c.slice(0,a)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(c=r.match(/([0-9]+)/g).map(function(s){return parseFloat(s)}),b=r.match(/([a-z])/gi).join("").toLowerCase());else isNaN(r)?Array.isArray(r)||r.length?(c=[r[0],r[1],r[2]],b="rgb",o=r.length===4?r[3]:1):r instanceof Object&&(r.r!=null||r.red!=null||r.R!=null?(b="rgb",c=[r.r||r.red||r.R||0,r.g||r.green||r.G||0,r.b||r.blue||r.B||0]):(b="hsl",c=[r.h||r.hue||r.H||0,r.s||r.saturation||r.S||0,r.l||r.lightness||r.L||r.b||r.brightness]),o=r.a||r.alpha||r.opacity||1,r.opacity!=null&&(o/=100)):(b="rgb",c=[r>>>16,(65280&r)>>>8,255&r]);return{space:b,values:c,alpha:o}};var T={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(R,C,e){"use strict";var _=e(19336);R.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(T){var r,w,b,c,o,t=T[0]/360,i=T[1]/100,n=T[2]/100;if(i===0)return[o=255*n,o,o];r=2*n-(w=n<.5?n*(1+i):n+i-n*i),c=[0,0,0];for(var a=0;a<3;a++)(b=t+.3333333333333333*-(a-1))<0?b++:b>1&&b--,o=6*b<1?r+6*(w-r)*b:2*b<1?w:3*b<2?r+(w-r)*(.6666666666666666-b)*6:r,c[a]=255*o;return c}},_.hsl=function(T){var r,w,b=T[0]/255,c=T[1]/255,o=T[2]/255,t=Math.min(b,c,o),i=Math.max(b,c,o),n=i-t;return i===t?r=0:b===i?r=(c-o)/n:c===i?r=2+(o-b)/n:o===i&&(r=4+(b-c)/n),(r=Math.min(60*r,360))<0&&(r+=360),w=(t+i)/2,[r,100*(i===t?0:w<=.5?n/(i+t):n/(2-i-t)),100*w]}},19336:function(R){"use strict";R.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(R){R.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(R,C,e){"use strict";R.exports={parse:e(46416),stringify:e(49395)}},8744:function(R,C,e){"use strict";var _=e(30584);R.exports={isSize:function(T){return/^[\d\.]/.test(T)||T.indexOf("/")!==-1||_.indexOf(T)!==-1}}},46416:function(R,C,e){"use strict";var _=e(92384),T=e(68194),r=e(3748),w=e(2904),b=e(47916),c=e(7294),o=e(39956),t=e(8744).isSize;R.exports=n;var i=n.cache={};function n(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(i[s])return i[s];if(s==="")throw new Error("Cannot parse an empty string.");if(r.indexOf(s)!==-1)return i[s]={system:s};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=o(s,/\s+/);l=p.shift();){if(T.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(m){u[m]=l}),i[s]=u;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(c.indexOf(l)===-1){if(w.indexOf(l)===-1){if(t(l)){var f=o(l,"/");if(u.size=f[0],f[1]!=null?u.lineHeight=a(f[1]):p[0]==="/"&&(p.shift(),u.lineHeight=a(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=o(p.join(" "),/\s*,\s*/).map(_),i[s]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function a(s){var l=parseFloat(s);return l.toString()===s?l:s}},49395:function(R,C,e){"use strict";var _=e(55616),T=e(8744).isSize,r=s(e(68194)),w=s(e(3748)),b=s(e(2904)),c=s(e(47916)),o=s(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function a(l,u){if(l&&!u[l]&&!r[l])throw Error("Unknown keyword `"+l+"`");return l}function s(l){for(var u={},p=0;p<l.length;p++)u[l[p]]=1;return u}R.exports=function(l){if((l=_(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&a(l.system,w),l.system;if(a(l.style,c),a(l.variant,t),a(l.weight,b),a(l.stretch,o),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!T)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(p){return i[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},27940:function(R,C,e){"use strict";var _,T=e(81680),r=e(18496),w=e(87396),b=e(95920),c=e(50868),o=e(84323),t=Function.prototype.bind,i=Object.defineProperty,n=Object.prototype.hasOwnProperty;_=function(a,s,l){var u,p=r(s)&&w(s.value);return delete(u=b(s)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&n.call(this,a)?p:(s.value=t.call(p,l.resolveContext?l.resolveContext(this):this),i(this,a,s),this[a])},u},R.exports=function(a){var s=c(arguments[1]);return T(s.resolveContext)&&w(s.resolveContext),o(a,function(l,u){return _(u,l,s)})}},21092:function(R,C,e){"use strict";var _=e(81680),T=e(85488),r=e(38452),w=e(50868),b=e(71056),c=R.exports=function(o,t){var i,n,a,s,l;return arguments.length<2||typeof o!="string"?(s=t,t=o,o=null):s=arguments[2],_(o)?(i=b.call(o,"c"),n=b.call(o,"e"),a=b.call(o,"w")):(i=a=!0,n=!1),l={value:t,configurable:i,enumerable:n,writable:a},s?r(w(s),l):l};c.gs=function(o,t,i){var n,a,s,l;return typeof o!="string"?(s=i,i=t,t=o,o=null):s=arguments[3],_(t)?T(t)?_(i)?T(i)||(s=i,i=void 0):i=void 0:(s=t,t=i=void 0):t=void 0,_(o)?(n=b.call(o,"c"),a=b.call(o,"e")):(n=!0,a=!1),l={get:t,set:i,configurable:n,enumerable:a},s?r(w(s),l):l}},84706:function(R,C,e){"use strict";function _(s,l){return s<l?-1:s>l?1:s>=l?0:NaN}e.d(C,{XE:function(){return _},kv:function(){return b},mo:function(){return o},Uf:function(){return t},SY:function(){return i},ik:function(){return n},oh:function(){return a}}),(T=_).length===1&&(r=T,T=function(s,l){return _(r(s),l)});var T,r,w=Array.prototype;function b(s,l){var u,p,f=s.length,m=-1;if(l==null){for(;++m<f;)if((u=s[m])!=null&&u>=u)for(p=u;++m<f;)(u=s[m])!=null&&u>p&&(p=u)}else for(;++m<f;)if((u=l(s[m],m,s))!=null&&u>=u)for(p=u;++m<f;)(u=l(s[m],m,s))!=null&&u>p&&(p=u);return p}function c(s){return s===null?NaN:+s}function o(s,l){var u,p=s.length,f=p,m=-1,h=0;if(l==null)for(;++m<p;)isNaN(u=c(s[m]))?--f:h+=u;else for(;++m<p;)isNaN(u=c(l(s[m],m,s)))?--f:h+=u;if(f)return h/f}function t(s){for(var l,u,p,f=s.length,m=-1,h=0;++m<f;)h+=s[m].length;for(u=new Array(h);--f>=0;)for(l=(p=s[f]).length;--l>=0;)u[--h]=p[l];return u}function i(s,l){var u,p,f=s.length,m=-1;if(l==null){for(;++m<f;)if((u=s[m])!=null&&u>=u)for(p=u;++m<f;)(u=s[m])!=null&&p>u&&(p=u)}else for(;++m<f;)if((u=l(s[m],m,s))!=null&&u>=u)for(p=u;++m<f;)(u=l(s[m],m,s))!=null&&p>u&&(p=u);return p}function n(s,l,u){s=+s,l=+l,u=(f=arguments.length)<2?(l=s,s=0,1):f<3?1:+u;for(var p=-1,f=0|Math.max(0,Math.ceil((l-s)/u)),m=new Array(f);++p<f;)m[p]=s+p*u;return m}function a(s,l){var u,p=s.length,f=-1,m=0;if(l==null)for(;++f<p;)(u=+s[f])&&(m+=u);else for(;++f<p;)(u=+l(s[f],f,s))&&(m+=u);return m}w.slice,w.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(R,C,e){"use strict";e.d(C,{kH:function(){return w},UJ:function(){return b}});var _="$";function T(){}function r(s,l){var u=new T;if(s instanceof T)s.each(function(g,v){u.set(v,g)});else if(Array.isArray(s)){var p,f=-1,m=s.length;if(l==null)for(;++f<m;)u.set(f,s[f]);else for(;++f<m;)u.set(l(p=s[f],f,s),p)}else if(s)for(var h in s)u.set(h,s[h]);return u}T.prototype=r.prototype={constructor:T,has:function(s){return _+s in this},get:function(s){return this[_+s]},set:function(s,l){return this[_+s]=l,this},remove:function(s){var l=_+s;return l in this&&delete this[l]},clear:function(){for(var s in this)s[0]===_&&delete this[s]},keys:function(){var s=[];for(var l in this)l[0]===_&&s.push(l.slice(1));return s},values:function(){var s=[];for(var l in this)l[0]===_&&s.push(this[l]);return s},entries:function(){var s=[];for(var l in this)l[0]===_&&s.push({key:l.slice(1),value:this[l]});return s},size:function(){var s=0;for(var l in this)l[0]===_&&++s;return s},empty:function(){for(var s in this)if(s[0]===_)return!1;return!0},each:function(s){for(var l in this)l[0]===_&&s(this[l],l.slice(1),this)}};var w=r;function b(){var s,l,u,p=[],f=[];function m(g,v,x,y){if(v>=p.length)return s!=null&&g.sort(s),l!=null?l(g):g;for(var A,d,S,k=-1,E=g.length,L=p[v++],O=w(),P=x();++k<E;)(S=O.get(A=L(d=g[k])+""))?S.push(d):O.set(A,[d]);return O.each(function(F,U){y(P,U,m(F,v,x,y))}),P}function h(g,v){if(++v>p.length)return g;var x,y=f[v-1];return l!=null&&v>=p.length?x=g.entries():(x=[],g.each(function(A,d){x.push({key:d,values:h(A,v)})})),y!=null?x.sort(function(A,d){return y(A.key,d.key)}):x}return u={object:function(g){return m(g,0,c,o)},map:function(g){return m(g,0,t,i)},entries:function(g){return h(m(g,0,t,i),0)},key:function(g){return p.push(g),u},sortKeys:function(g){return f[p.length-1]=g,u},sortValues:function(g){return s=g,u},rollup:function(g){return l=g,u}}}function c(){return{}}function o(s,l,u){s[l]=u}function t(){return w()}function i(s,l,u){s.set(l,u)}function n(){}var a=w.prototype;n.prototype=(function(s,l){var u=new n;if(s instanceof n)s.each(function(m){u.add(m)});else if(s){var p=-1,f=s.length;if(l==null)for(;++p<f;)u.add(s[p]);else for(;++p<f;)u.add(l(s[p],p,s))}return u}).prototype={constructor:n,has:a.has,add:function(s){return this[_+(s+="")]=s,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},49812:function(R,C,e){"use strict";function _(pe,ge){var ke;function Ce(){var de,ae,re=ke.length,he=0,Se=0;for(de=0;de<re;++de)he+=(ae=ke[de]).x,Se+=ae.y;for(he=he/re-pe,Se=Se/re-ge,de=0;de<re;++de)(ae=ke[de]).x-=he,ae.y-=Se}return pe==null&&(pe=0),ge==null&&(ge=0),Ce.initialize=function(de){ke=de},Ce.x=function(de){return arguments.length?(pe=+de,Ce):pe},Ce.y=function(de){return arguments.length?(ge=+de,Ce):ge},Ce}function T(pe){return function(){return pe}}function r(){return 1e-6*(Math.random()-.5)}function w(pe,ge,ke,Ce){if(isNaN(ge)||isNaN(ke))return pe;var de,ae,re,he,Se,xe,Te,Ae,Pe,De=pe._root,ve={data:Ce},we=pe._x0,Ee=pe._y0,Fe=pe._x1,Le=pe._y1;if(!De)return pe._root=ve,pe;for(;De.length;)if((xe=ge>=(ae=(we+Fe)/2))?we=ae:Fe=ae,(Te=ke>=(re=(Ee+Le)/2))?Ee=re:Le=re,de=De,!(De=De[Ae=Te<<1|xe]))return de[Ae]=ve,pe;if(he=+pe._x.call(null,De.data),Se=+pe._y.call(null,De.data),ge===he&&ke===Se)return ve.next=De,de?de[Ae]=ve:pe._root=ve,pe;do de=de?de[Ae]=new Array(4):pe._root=new Array(4),(xe=ge>=(ae=(we+Fe)/2))?we=ae:Fe=ae,(Te=ke>=(re=(Ee+Le)/2))?Ee=re:Le=re;while((Ae=Te<<1|xe)==(Pe=(Se>=re)<<1|he>=ae));return de[Pe]=De,de[Ae]=ve,pe}function b(pe,ge,ke,Ce,de){this.node=pe,this.x0=ge,this.y0=ke,this.x1=Ce,this.y1=de}function c(pe){return pe[0]}function o(pe){return pe[1]}function t(pe,ge,ke){var Ce=new i(ge??c,ke??o,NaN,NaN,NaN,NaN);return pe==null?Ce:Ce.addAll(pe)}function i(pe,ge,ke,Ce,de,ae){this._x=pe,this._y=ge,this._x0=ke,this._y0=Ce,this._x1=de,this._y1=ae,this._root=void 0}function n(pe){for(var ge={data:pe.data},ke=ge;pe=pe.next;)ke=ke.next={data:pe.data};return ge}e.r(C),e.d(C,{forceCenter:function(){return _},forceCollide:function(){return u},forceLink:function(){return h},forceManyBody:function(){return ce},forceRadial:function(){return ye},forceSimulation:function(){return se},forceX:function(){return me},forceY:function(){return fe}});var a=t.prototype=i.prototype;function s(pe){return pe.x+pe.vx}function l(pe){return pe.y+pe.vy}function u(pe){var ge,ke,Ce=1,de=1;function ae(){for(var Se,xe,Te,Ae,Pe,De,ve,we=ge.length,Ee=0;Ee<de;++Ee)for(xe=t(ge,s,l).visitAfter(re),Se=0;Se<we;++Se)Te=ge[Se],De=ke[Te.index],ve=De*De,Ae=Te.x+Te.vx,Pe=Te.y+Te.vy,xe.visit(Fe);function Fe(Le,je,Ge,Je,rt){var ot=Le.data,yt=Le.r,_t=De+yt;if(!ot)return je>Ae+_t||Je<Ae-_t||Ge>Pe+_t||rt<Pe-_t;if(ot.index>Te.index){var mt=Ae-ot.x-ot.vx,tt=Pe-ot.y-ot.vy,Qe=mt*mt+tt*tt;Qe<_t*_t&&(mt===0&&(Qe+=(mt=r())*mt),tt===0&&(Qe+=(tt=r())*tt),Qe=(_t-(Qe=Math.sqrt(Qe)))/Qe*Ce,Te.vx+=(mt*=Qe)*(_t=(yt*=yt)/(ve+yt)),Te.vy+=(tt*=Qe)*_t,ot.vx-=mt*(_t=1-_t),ot.vy-=tt*_t)}}}function re(Se){if(Se.data)return Se.r=ke[Se.data.index];for(var xe=Se.r=0;xe<4;++xe)Se[xe]&&Se[xe].r>Se.r&&(Se.r=Se[xe].r)}function he(){if(ge){var Se,xe,Te=ge.length;for(ke=new Array(Te),Se=0;Se<Te;++Se)xe=ge[Se],ke[xe.index]=+pe(xe,Se,ge)}}return typeof pe!="function"&&(pe=T(pe==null?1:+pe)),ae.initialize=function(Se){ge=Se,he()},ae.iterations=function(Se){return arguments.length?(de=+Se,ae):de},ae.strength=function(Se){return arguments.length?(Ce=+Se,ae):Ce},ae.radius=function(Se){return arguments.length?(pe=typeof Se=="function"?Se:T(+Se),he(),ae):pe},ae}a.copy=function(){var pe,ge,ke=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ce=this._root;if(!Ce)return ke;if(!Ce.length)return ke._root=n(Ce),ke;for(pe=[{source:Ce,target:ke._root=new Array(4)}];Ce=pe.pop();)for(var de=0;de<4;++de)(ge=Ce.source[de])&&(ge.length?pe.push({source:ge,target:Ce.target[de]=new Array(4)}):Ce.target[de]=n(ge));return ke},a.add=function(pe){var ge=+this._x.call(null,pe),ke=+this._y.call(null,pe);return w(this.cover(ge,ke),ge,ke,pe)},a.addAll=function(pe){var ge,ke,Ce,de,ae=pe.length,re=new Array(ae),he=new Array(ae),Se=1/0,xe=1/0,Te=-1/0,Ae=-1/0;for(ke=0;ke<ae;++ke)isNaN(Ce=+this._x.call(null,ge=pe[ke]))||isNaN(de=+this._y.call(null,ge))||(re[ke]=Ce,he[ke]=de,Ce<Se&&(Se=Ce),Ce>Te&&(Te=Ce),de<xe&&(xe=de),de>Ae&&(Ae=de));if(Se>Te||xe>Ae)return this;for(this.cover(Se,xe).cover(Te,Ae),ke=0;ke<ae;++ke)w(this,re[ke],he[ke],pe[ke]);return this},a.cover=function(pe,ge){if(isNaN(pe=+pe)||isNaN(ge=+ge))return this;var ke=this._x0,Ce=this._y0,de=this._x1,ae=this._y1;if(isNaN(ke))de=(ke=Math.floor(pe))+1,ae=(Ce=Math.floor(ge))+1;else{for(var re,he,Se=de-ke,xe=this._root;ke>pe||pe>=de||Ce>ge||ge>=ae;)switch(he=(ge<Ce)<<1|pe<ke,(re=new Array(4))[he]=xe,xe=re,Se*=2,he){case 0:de=ke+Se,ae=Ce+Se;break;case 1:ke=de-Se,ae=Ce+Se;break;case 2:de=ke+Se,Ce=ae-Se;break;case 3:ke=de-Se,Ce=ae-Se}this._root&&this._root.length&&(this._root=xe)}return this._x0=ke,this._y0=Ce,this._x1=de,this._y1=ae,this},a.data=function(){var pe=[];return this.visit(function(ge){if(!ge.length)do pe.push(ge.data);while(ge=ge.next)}),pe},a.extent=function(pe){return arguments.length?this.cover(+pe[0][0],+pe[0][1]).cover(+pe[1][0],+pe[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},a.find=function(pe,ge,ke){var Ce,de,ae,re,he,Se,xe,Te=this._x0,Ae=this._y0,Pe=this._x1,De=this._y1,ve=[],we=this._root;for(we&&ve.push(new b(we,Te,Ae,Pe,De)),ke==null?ke=1/0:(Te=pe-ke,Ae=ge-ke,Pe=pe+ke,De=ge+ke,ke*=ke);Se=ve.pop();)if(!(!(we=Se.node)||(de=Se.x0)>Pe||(ae=Se.y0)>De||(re=Se.x1)<Te||(he=Se.y1)<Ae))if(we.length){var Ee=(de+re)/2,Fe=(ae+he)/2;ve.push(new b(we[3],Ee,Fe,re,he),new b(we[2],de,Fe,Ee,he),new b(we[1],Ee,ae,re,Fe),new b(we[0],de,ae,Ee,Fe)),(xe=(ge>=Fe)<<1|pe>=Ee)&&(Se=ve[ve.length-1],ve[ve.length-1]=ve[ve.length-1-xe],ve[ve.length-1-xe]=Se)}else{var Le=pe-+this._x.call(null,we.data),je=ge-+this._y.call(null,we.data),Ge=Le*Le+je*je;if(Ge<ke){var Je=Math.sqrt(ke=Ge);Te=pe-Je,Ae=ge-Je,Pe=pe+Je,De=ge+Je,Ce=we.data}}return Ce},a.remove=function(pe){if(isNaN(ae=+this._x.call(null,pe))||isNaN(re=+this._y.call(null,pe)))return this;var ge,ke,Ce,de,ae,re,he,Se,xe,Te,Ae,Pe,De=this._root,ve=this._x0,we=this._y0,Ee=this._x1,Fe=this._y1;if(!De)return this;if(De.length)for(;;){if((xe=ae>=(he=(ve+Ee)/2))?ve=he:Ee=he,(Te=re>=(Se=(we+Fe)/2))?we=Se:Fe=Se,ge=De,!(De=De[Ae=Te<<1|xe]))return this;if(!De.length)break;(ge[Ae+1&3]||ge[Ae+2&3]||ge[Ae+3&3])&&(ke=ge,Pe=Ae)}for(;De.data!==pe;)if(Ce=De,!(De=De.next))return this;return(de=De.next)&&delete De.next,Ce?(de?Ce.next=de:delete Ce.next,this):ge?(de?ge[Ae]=de:delete ge[Ae],(De=ge[0]||ge[1]||ge[2]||ge[3])&&De===(ge[3]||ge[2]||ge[1]||ge[0])&&!De.length&&(ke?ke[Pe]=De:this._root=De),this):(this._root=de,this)},a.removeAll=function(pe){for(var ge=0,ke=pe.length;ge<ke;++ge)this.remove(pe[ge]);return this},a.root=function(){return this._root},a.size=function(){var pe=0;return this.visit(function(ge){if(!ge.length)do++pe;while(ge=ge.next)}),pe},a.visit=function(pe){var ge,ke,Ce,de,ae,re,he=[],Se=this._root;for(Se&&he.push(new b(Se,this._x0,this._y0,this._x1,this._y1));ge=he.pop();)if(!pe(Se=ge.node,Ce=ge.x0,de=ge.y0,ae=ge.x1,re=ge.y1)&&Se.length){var xe=(Ce+ae)/2,Te=(de+re)/2;(ke=Se[3])&&he.push(new b(ke,xe,Te,ae,re)),(ke=Se[2])&&he.push(new b(ke,Ce,Te,xe,re)),(ke=Se[1])&&he.push(new b(ke,xe,de,ae,Te)),(ke=Se[0])&&he.push(new b(ke,Ce,de,xe,Te))}return this},a.visitAfter=function(pe){var ge,ke=[],Ce=[];for(this._root&&ke.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ge=ke.pop();){var de=ge.node;if(de.length){var ae,re=ge.x0,he=ge.y0,Se=ge.x1,xe=ge.y1,Te=(re+Se)/2,Ae=(he+xe)/2;(ae=de[0])&&ke.push(new b(ae,re,he,Te,Ae)),(ae=de[1])&&ke.push(new b(ae,Te,he,Se,Ae)),(ae=de[2])&&ke.push(new b(ae,re,Ae,Te,xe)),(ae=de[3])&&ke.push(new b(ae,Te,Ae,Se,xe))}Ce.push(ge)}for(;ge=Ce.pop();)pe(ge.node,ge.x0,ge.y0,ge.x1,ge.y1);return this},a.x=function(pe){return arguments.length?(this._x=pe,this):this._x},a.y=function(pe){return arguments.length?(this._y=pe,this):this._y};var p=e(34712);function f(pe){return pe.index}function m(pe,ge){var ke=pe.get(ge);if(!ke)throw new Error("missing: "+ge);return ke}function h(pe){var ge,ke,Ce,de,ae,re=f,he=function(ve){return 1/Math.min(de[ve.source.index],de[ve.target.index])},Se=T(30),xe=1;function Te(ve){for(var we=0,Ee=pe.length;we<xe;++we)for(var Fe,Le,je,Ge,Je,rt,ot,yt=0;yt<Ee;++yt)Le=(Fe=pe[yt]).source,Ge=(je=Fe.target).x+je.vx-Le.x-Le.vx||r(),Je=je.y+je.vy-Le.y-Le.vy||r(),Ge*=rt=((rt=Math.sqrt(Ge*Ge+Je*Je))-ke[yt])/rt*ve*ge[yt],Je*=rt,je.vx-=Ge*(ot=ae[yt]),je.vy-=Je*ot,Le.vx+=Ge*(ot=1-ot),Le.vy+=Je*ot}function Ae(){if(Ce){var ve,we,Ee=Ce.length,Fe=pe.length,Le=(0,p.kH)(Ce,re);for(ve=0,de=new Array(Ee);ve<Fe;++ve)(we=pe[ve]).index=ve,typeof we.source!="object"&&(we.source=m(Le,we.source)),typeof we.target!="object"&&(we.target=m(Le,we.target)),de[we.source.index]=(de[we.source.index]||0)+1,de[we.target.index]=(de[we.target.index]||0)+1;for(ve=0,ae=new Array(Fe);ve<Fe;++ve)we=pe[ve],ae[ve]=de[we.source.index]/(de[we.source.index]+de[we.target.index]);ge=new Array(Fe),Pe(),ke=new Array(Fe),De()}}function Pe(){if(Ce)for(var ve=0,we=pe.length;ve<we;++ve)ge[ve]=+he(pe[ve],ve,pe)}function De(){if(Ce)for(var ve=0,we=pe.length;ve<we;++ve)ke[ve]=+Se(pe[ve],ve,pe)}return pe==null&&(pe=[]),Te.initialize=function(ve){Ce=ve,Ae()},Te.links=function(ve){return arguments.length?(pe=ve,Ae(),Te):pe},Te.id=function(ve){return arguments.length?(re=ve,Te):re},Te.iterations=function(ve){return arguments.length?(xe=+ve,Te):xe},Te.strength=function(ve){return arguments.length?(he=typeof ve=="function"?ve:T(+ve),Pe(),Te):he},Te.distance=function(ve){return arguments.length?(Se=typeof ve=="function"?ve:T(+ve),De(),Te):Se},Te}var g={value:function(){}};function v(){for(var pe,ge=0,ke=arguments.length,Ce={};ge<ke;++ge){if(!(pe=arguments[ge]+"")||pe in Ce||/[\s.]/.test(pe))throw new Error("illegal type: "+pe);Ce[pe]=[]}return new x(Ce)}function x(pe){this._=pe}function y(pe,ge){for(var ke,Ce=0,de=pe.length;Ce<de;++Ce)if((ke=pe[Ce]).name===ge)return ke.value}function A(pe,ge,ke){for(var Ce=0,de=pe.length;Ce<de;++Ce)if(pe[Ce].name===ge){pe[Ce]=g,pe=pe.slice(0,Ce).concat(pe.slice(Ce+1));break}return ke!=null&&pe.push({name:ge,value:ke}),pe}x.prototype=v.prototype={constructor:x,on:function(pe,ge){var ke,Ce,de=this._,ae=(Ce=de,(pe+"").trim().split(/^|\s+/).map(function(Se){var xe="",Te=Se.indexOf(".");if(Te>=0&&(xe=Se.slice(Te+1),Se=Se.slice(0,Te)),Se&&!Ce.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:xe}})),re=-1,he=ae.length;if(!(arguments.length<2)){if(ge!=null&&typeof ge!="function")throw new Error("invalid callback: "+ge);for(;++re<he;)if(ke=(pe=ae[re]).type)de[ke]=A(de[ke],pe.name,ge);else if(ge==null)for(ke in de)de[ke]=A(de[ke],pe.name,null);return this}for(;++re<he;)if((ke=(pe=ae[re]).type)&&(ke=y(de[ke],pe.name)))return ke},copy:function(){var pe={},ge=this._;for(var ke in ge)pe[ke]=ge[ke].slice();return new x(pe)},call:function(pe,ge){if((ke=arguments.length-2)>0)for(var ke,Ce,de=new Array(ke),ae=0;ae<ke;++ae)de[ae]=arguments[ae+2];if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(ae=0,ke=(Ce=this._[pe]).length;ae<ke;++ae)Ce[ae].value.apply(ge,de)},apply:function(pe,ge,ke){if(!this._.hasOwnProperty(pe))throw new Error("unknown type: "+pe);for(var Ce=this._[pe],de=0,ae=Ce.length;de<ae;++de)Ce[de].value.apply(ge,ke)}};var d,S,k=v,E=0,L=0,O=0,P=1e3,F=0,U=0,I=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(pe){setTimeout(pe,17)};function B(){return U||(W(V),U=N.now()+I)}function V(){U=0}function q(){this._call=this._time=this._next=null}function ne(pe,ge,ke){var Ce=new q;return Ce.restart(pe,ge,ke),Ce}function $(){U=(F=N.now())+I,E=L=0;try{(function(){B(),++E;for(var pe,ge=d;ge;)(pe=U-ge._time)>=0&&ge._call.call(null,pe),ge=ge._next;--E})()}finally{E=0,function(){for(var pe,ge,ke=d,Ce=1/0;ke;)ke._call?(Ce>ke._time&&(Ce=ke._time),pe=ke,ke=ke._next):(ge=ke._next,ke._next=null,ke=pe?pe._next=ge:d=ge);S=pe,ee(Ce)}(),U=0}}function K(){var pe=N.now(),ge=pe-F;ge>P&&(I-=ge,F=pe)}function ee(pe){E||(L&&(L=clearTimeout(L)),pe-U>24?(pe<1/0&&(L=setTimeout($,pe-N.now()-I)),O&&(O=clearInterval(O))):(O||(F=N.now(),O=setInterval(K,P)),E=1,W($)))}function J(pe){return pe.x}function Z(pe){return pe.y}q.prototype=ne.prototype={constructor:q,restart:function(pe,ge,ke){if(typeof pe!="function")throw new TypeError("callback is not a function");ke=(ke==null?B():+ke)+(ge==null?0:+ge),this._next||S===this||(S?S._next=this:d=this,S=this),this._call=pe,this._time=ke,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};var te=10,oe=Math.PI*(3-Math.sqrt(5));function se(pe){var ge,ke=1,Ce=.001,de=1-Math.pow(Ce,1/300),ae=0,re=.6,he=(0,p.kH)(),Se=ne(Te),xe=k("tick","end");function Te(){Ae(),xe.call("tick",ge),ke<Ce&&(Se.stop(),xe.call("end",ge))}function Ae(ve){var we,Ee,Fe=pe.length;ve===void 0&&(ve=1);for(var Le=0;Le<ve;++Le)for(ke+=(ae-ke)*de,he.each(function(je){je(ke)}),we=0;we<Fe;++we)(Ee=pe[we]).fx==null?Ee.x+=Ee.vx*=re:(Ee.x=Ee.fx,Ee.vx=0),Ee.fy==null?Ee.y+=Ee.vy*=re:(Ee.y=Ee.fy,Ee.vy=0);return ge}function Pe(){for(var ve,we=0,Ee=pe.length;we<Ee;++we){if((ve=pe[we]).index=we,ve.fx!=null&&(ve.x=ve.fx),ve.fy!=null&&(ve.y=ve.fy),isNaN(ve.x)||isNaN(ve.y)){var Fe=te*Math.sqrt(we),Le=we*oe;ve.x=Fe*Math.cos(Le),ve.y=Fe*Math.sin(Le)}(isNaN(ve.vx)||isNaN(ve.vy))&&(ve.vx=ve.vy=0)}}function De(ve){return ve.initialize&&ve.initialize(pe),ve}return pe==null&&(pe=[]),Pe(),ge={tick:Ae,restart:function(){return Se.restart(Te),ge},stop:function(){return Se.stop(),ge},nodes:function(ve){return arguments.length?(pe=ve,Pe(),he.each(De),ge):pe},alpha:function(ve){return arguments.length?(ke=+ve,ge):ke},alphaMin:function(ve){return arguments.length?(Ce=+ve,ge):Ce},alphaDecay:function(ve){return arguments.length?(de=+ve,ge):+de},alphaTarget:function(ve){return arguments.length?(ae=+ve,ge):ae},velocityDecay:function(ve){return arguments.length?(re=1-ve,ge):1-re},force:function(ve,we){return arguments.length>1?(we==null?he.remove(ve):he.set(ve,De(we)),ge):he.get(ve)},find:function(ve,we,Ee){var Fe,Le,je,Ge,Je,rt=0,ot=pe.length;for(Ee==null?Ee=1/0:Ee*=Ee,rt=0;rt<ot;++rt)(je=(Fe=ve-(Ge=pe[rt]).x)*Fe+(Le=we-Ge.y)*Le)<Ee&&(Je=Ge,Ee=je);return Je},on:function(ve,we){return arguments.length>1?(xe.on(ve,we),ge):xe.on(ve)}}}function ce(){var pe,ge,ke,Ce,de=T(-30),ae=1,re=1/0,he=.81;function Se(Pe){var De,ve=pe.length,we=t(pe,J,Z).visitAfter(Te);for(ke=Pe,De=0;De<ve;++De)ge=pe[De],we.visit(Ae)}function xe(){if(pe){var Pe,De,ve=pe.length;for(Ce=new Array(ve),Pe=0;Pe<ve;++Pe)De=pe[Pe],Ce[De.index]=+de(De,Pe,pe)}}function Te(Pe){var De,ve,we,Ee,Fe,Le=0,je=0;if(Pe.length){for(we=Ee=Fe=0;Fe<4;++Fe)(De=Pe[Fe])&&(ve=Math.abs(De.value))&&(Le+=De.value,je+=ve,we+=ve*De.x,Ee+=ve*De.y);Pe.x=we/je,Pe.y=Ee/je}else{(De=Pe).x=De.data.x,De.y=De.data.y;do Le+=Ce[De.data.index];while(De=De.next)}Pe.value=Le}function Ae(Pe,De,ve,we){if(!Pe.value)return!0;var Ee=Pe.x-ge.x,Fe=Pe.y-ge.y,Le=we-De,je=Ee*Ee+Fe*Fe;if(Le*Le/he<je)return je<re&&(Ee===0&&(je+=(Ee=r())*Ee),Fe===0&&(je+=(Fe=r())*Fe),je<ae&&(je=Math.sqrt(ae*je)),ge.vx+=Ee*Pe.value*ke/je,ge.vy+=Fe*Pe.value*ke/je),!0;if(!(Pe.length||je>=re)){(Pe.data!==ge||Pe.next)&&(Ee===0&&(je+=(Ee=r())*Ee),Fe===0&&(je+=(Fe=r())*Fe),je<ae&&(je=Math.sqrt(ae*je)));do Pe.data!==ge&&(Le=Ce[Pe.data.index]*ke/je,ge.vx+=Ee*Le,ge.vy+=Fe*Le);while(Pe=Pe.next)}}return Se.initialize=function(Pe){pe=Pe,xe()},Se.strength=function(Pe){return arguments.length?(de=typeof Pe=="function"?Pe:T(+Pe),xe(),Se):de},Se.distanceMin=function(Pe){return arguments.length?(ae=Pe*Pe,Se):Math.sqrt(ae)},Se.distanceMax=function(Pe){return arguments.length?(re=Pe*Pe,Se):Math.sqrt(re)},Se.theta=function(Pe){return arguments.length?(he=Pe*Pe,Se):Math.sqrt(he)},Se}function ye(pe,ge,ke){var Ce,de,ae,re=T(.1);function he(xe){for(var Te=0,Ae=Ce.length;Te<Ae;++Te){var Pe=Ce[Te],De=Pe.x-ge||1e-6,ve=Pe.y-ke||1e-6,we=Math.sqrt(De*De+ve*ve),Ee=(ae[Te]-we)*de[Te]*xe/we;Pe.vx+=De*Ee,Pe.vy+=ve*Ee}}function Se(){if(Ce){var xe,Te=Ce.length;for(de=new Array(Te),ae=new Array(Te),xe=0;xe<Te;++xe)ae[xe]=+pe(Ce[xe],xe,Ce),de[xe]=isNaN(ae[xe])?0:+re(Ce[xe],xe,Ce)}}return typeof pe!="function"&&(pe=T(+pe)),ge==null&&(ge=0),ke==null&&(ke=0),he.initialize=function(xe){Ce=xe,Se()},he.strength=function(xe){return arguments.length?(re=typeof xe=="function"?xe:T(+xe),Se(),he):re},he.radius=function(xe){return arguments.length?(pe=typeof xe=="function"?xe:T(+xe),Se(),he):pe},he.x=function(xe){return arguments.length?(ge=+xe,he):ge},he.y=function(xe){return arguments.length?(ke=+xe,he):ke},he}function me(pe){var ge,ke,Ce,de=T(.1);function ae(he){for(var Se,xe=0,Te=ge.length;xe<Te;++xe)(Se=ge[xe]).vx+=(Ce[xe]-Se.x)*ke[xe]*he}function re(){if(ge){var he,Se=ge.length;for(ke=new Array(Se),Ce=new Array(Se),he=0;he<Se;++he)ke[he]=isNaN(Ce[he]=+pe(ge[he],he,ge))?0:+de(ge[he],he,ge)}}return typeof pe!="function"&&(pe=T(pe==null?0:+pe)),ae.initialize=function(he){ge=he,re()},ae.strength=function(he){return arguments.length?(de=typeof he=="function"?he:T(+he),re(),ae):de},ae.x=function(he){return arguments.length?(pe=typeof he=="function"?he:T(+he),re(),ae):pe},ae}function fe(pe){var ge,ke,Ce,de=T(.1);function ae(he){for(var Se,xe=0,Te=ge.length;xe<Te;++xe)(Se=ge[xe]).vy+=(Ce[xe]-Se.y)*ke[xe]*he}function re(){if(ge){var he,Se=ge.length;for(ke=new Array(Se),Ce=new Array(Se),he=0;he<Se;++he)ke[he]=isNaN(Ce[he]=+pe(ge[he],he,ge))?0:+de(ge[he],he,ge)}}return typeof pe!="function"&&(pe=T(pe==null?0:+pe)),ae.initialize=function(he){ge=he,re()},ae.strength=function(he){return arguments.length?(de=typeof he=="function"?he:T(+he),re(),ae):de},ae.y=function(he){return arguments.length?(pe=typeof he=="function"?he:T(+he),re(),ae):pe},ae}},57624:function(R,C,e){"use strict";function _(u,p){if((f=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var f,m=u.slice(0,f);return[m.length>1?m[0]+m.slice(2):m,+u.slice(f+1)]}e.d(C,{E9:function(){return n},SO:function(){return l}});var T,r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function w(u){if(!(p=r.exec(u)))throw new Error("invalid format: "+u);var p;return new b({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function c(u,p){var f=_(u,p);if(!f)return u+"";var m=f[0],h=f[1];return h<0?"0."+new Array(-h).join("0")+m:m.length>h+1?m.slice(0,h+1)+"."+m.slice(h+1):m+new Array(h-m.length+2).join("0")}w.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var o={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return c(100*u,p)},r:c,s:function(u,p){var f=_(u,p);if(!f)return u+"";var m=f[0],h=f[1],g=h-(T=3*Math.max(-8,Math.min(8,Math.floor(h/3))))+1,v=m.length;return g===v?m:g>v?m+new Array(g-v+1).join("0"):g>0?m.slice(0,g)+"."+m.slice(g):"0."+new Array(1-g).join("0")+_(u,Math.max(0,p+g-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,n,a=Array.prototype.map,s=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(u){var p,f,m=u.grouping===void 0||u.thousands===void 0?t:(p=a.call(u.grouping,Number),f=u.thousands+"",function(k,E){for(var L=k.length,O=[],P=0,F=p[0],U=0;L>0&&F>0&&(U+F+1>E&&(F=Math.max(1,E-U)),O.push(k.substring(L-=F,L+F)),!((U+=F+1)>E));)F=p[P=(P+1)%p.length];return O.reverse().join(f)}),h=u.currency===void 0?"":u.currency[0]+"",g=u.currency===void 0?"":u.currency[1]+"",v=u.decimal===void 0?".":u.decimal+"",x=u.numerals===void 0?t:function(k){return function(E){return E.replace(/[0-9]/g,function(L){return k[+L]})}}(a.call(u.numerals,String)),y=u.percent===void 0?"%":u.percent+"",A=u.minus===void 0?"-":u.minus+"",d=u.nan===void 0?"NaN":u.nan+"";function S(k){var E=(k=w(k)).fill,L=k.align,O=k.sign,P=k.symbol,F=k.zero,U=k.width,I=k.comma,N=k.precision,W=k.trim,B=k.type;B==="n"?(I=!0,B="g"):o[B]||(N===void 0&&(N=12),W=!0,B="g"),(F||E==="0"&&L==="=")&&(F=!0,E="0",L="=");var V=P==="$"?h:P==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",q=P==="$"?g:/[%p]/.test(B)?y:"",ne=o[B],$=/[defgprs%]/.test(B);function K(ee){var J,Z,te,oe=V,se=q;if(B==="c")se=ne(ee)+se,ee="";else{var ce=(ee=+ee)<0||1/ee<0;if(ee=isNaN(ee)?d:ne(Math.abs(ee),N),W&&(ee=function(fe){e:for(var pe,ge=fe.length,ke=1,Ce=-1;ke<ge;++ke)switch(fe[ke]){case".":Ce=pe=ke;break;case"0":Ce===0&&(Ce=ke),pe=ke;break;default:if(!+fe[ke])break e;Ce>0&&(Ce=0)}return Ce>0?fe.slice(0,Ce)+fe.slice(pe+1):fe}(ee)),ce&&+ee==0&&O!=="+"&&(ce=!1),oe=(ce?O==="("?O:A:O==="-"||O==="("?"":O)+oe,se=(B==="s"?s[8+T/3]:"")+se+(ce&&O==="("?")":""),$){for(J=-1,Z=ee.length;++J<Z;)if(48>(te=ee.charCodeAt(J))||te>57){se=(te===46?v+ee.slice(J+1):ee.slice(J))+se,ee=ee.slice(0,J);break}}}I&&!F&&(ee=m(ee,1/0));var ye=oe.length+ee.length+se.length,me=ye<U?new Array(U-ye+1).join(E):"";switch(I&&F&&(ee=m(me+ee,me.length?U-se.length:1/0),me=""),L){case"<":ee=oe+ee+se+me;break;case"=":ee=oe+me+ee+se;break;case"^":ee=me.slice(0,ye=me.length>>1)+oe+ee+se+me.slice(ye);break;default:ee=me+oe+ee+se}return x(ee)}return N=N===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),K.toString=function(){return k+""},K}return{format:S,formatPrefix:function(k,E){var L,O=S(((k=w(k)).type="f",k)),P=3*Math.max(-8,Math.min(8,Math.floor((L=E,((L=_(Math.abs(L)))?L[1]:NaN)/3)))),F=Math.pow(10,-P),U=s[8+P/3];return function(I){return O(F*I)+U}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=i.format,i.formatPrefix},87108:function(R,C,e){"use strict";e.r(C),e.d(C,{geoAiry:function(){return I},geoAiryRaw:function(){return U},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return B},geoAugust:function(){return ne},geoAugustRaw:function(){return q},geoBaker:function(){return J},geoBakerRaw:function(){return ee},geoBerghaus:function(){return oe},geoBerghausRaw:function(){return te},geoBertin1953:function(){return ke},geoBertin1953Raw:function(){return ge},geoBoggs:function(){return Te},geoBoggsRaw:function(){return xe},geoBonne:function(){return we},geoBonneRaw:function(){return ve},geoBottomley:function(){return Fe},geoBottomleyRaw:function(){return Ee},geoBromley:function(){return je},geoBromleyRaw:function(){return Le},geoChamberlin:function(){return Qe},geoChamberlinAfrica:function(){return tt},geoChamberlinRaw:function(){return _t},geoCollignon:function(){return zt},geoCollignonRaw:function(){return Dt},geoCraig:function(){return vt},geoCraigRaw:function(){return pt},geoCraster:function(){return Ne},geoCrasterRaw:function(){return Ze},geoCylindricalEqualArea:function(){return st},geoCylindricalEqualAreaRaw:function(){return Xe},geoCylindricalStereographic:function(){return xt},geoCylindricalStereographicRaw:function(){return lt},geoEckert1:function(){return Ve},geoEckert1Raw:function(){return bt},geoEckert2:function(){return at},geoEckert2Raw:function(){return Be},geoEckert3:function(){return dt},geoEckert3Raw:function(){return ht},geoEckert4:function(){return kt},geoEckert4Raw:function(){return it},geoEckert5:function(){return St},geoEckert5Raw:function(){return Tt},geoEckert6:function(){return At},geoEckert6Raw:function(){return wt},geoEisenlohr:function(){return rn},geoEisenlohrRaw:function(){return jt},geoFahey:function(){return Ht},geoFaheyRaw:function(){return on},geoFoucaut:function(){return bn},geoFoucautRaw:function(){return $t},geoFoucautSinusoidal:function(){return Kt},geoFoucautSinusoidalRaw:function(){return ln},geoGilbert:function(){return wn},geoGingery:function(){return Bn},geoGingeryRaw:function(){return On},geoGinzburg4:function(){return Yn},geoGinzburg4Raw:function(){return cr},geoGinzburg5:function(){return Kn},geoGinzburg5Raw:function(){return jn},geoGinzburg6:function(){return Qt},geoGinzburg6Raw:function(){return or},geoGinzburg8:function(){return Dn},geoGinzburg8Raw:function(){return an},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return yn},geoGringorten:function(){return er},geoGringortenQuincuncial:function(){return _a},geoGringortenRaw:function(){return Un},geoGuyou:function(){return Pt},geoGuyouRaw:function(){return mn},geoHammer:function(){return me},geoHammerRaw:function(){return ce},geoHammerRetroazimuthal:function(){return pn},geoHammerRetroazimuthalRaw:function(){return Wt},geoHealpix:function(){return zn},geoHealpixRaw:function(){return Nt},geoHill:function(){return $n},geoHillRaw:function(){return Pn},geoHomolosine:function(){return wr},geoHomolosineRaw:function(){return sr},geoHufnagel:function(){return rr},geoHufnagelRaw:function(){return pr},geoHyperelliptical:function(){return ti},geoHyperellipticalRaw:function(){return Nr},geoInterrupt:function(){return ui},geoInterruptedBoggs:function(){return pa},geoInterruptedHomolosine:function(){return Rr},geoInterruptedMollweide:function(){return da},geoInterruptedMollweideHemispheres:function(){return Vo},geoInterruptedQuarticAuthalic:function(){return ru},geoInterruptedSinuMollweide:function(){return po},geoInterruptedSinusoidal:function(){return go},geoKavrayskiy7:function(){return Qa},geoKavrayskiy7Raw:function(){return za},geoLagrange:function(){return ai},geoLagrangeRaw:function(){return yo},geoLarrivee:function(){return mo},geoLarriveeRaw:function(){return Co},geoLaskowski:function(){return qo},geoLaskowskiRaw:function(){return eo},geoLittrow:function(){return Ho},geoLittrowRaw:function(){return xo},geoLoximuthal:function(){return Go},geoLoximuthalRaw:function(){return Do},geoMiller:function(){return Ml},geoMillerRaw:function(){return bo},geoModifiedStereographic:function(){return hs},geoModifiedStereographicAlaska:function(){return eu},geoModifiedStereographicGs48:function(){return tu},geoModifiedStereographicGs50:function(){return fs},geoModifiedStereographicLee:function(){return As},geoModifiedStereographicMiller:function(){return _o},geoModifiedStereographicRaw:function(){return ll},geoMollweide:function(){return re},geoMollweideRaw:function(){return ae},geoMtFlatPolarParabolic:function(){return Sl},geoMtFlatPolarParabolicRaw:function(){return to},geoMtFlatPolarQuartic:function(){return Lo},geoMtFlatPolarQuarticRaw:function(){return Wo},geoMtFlatPolarSinusoidal:function(){return Yo},geoMtFlatPolarSinusoidalRaw:function(){return Io},geoNaturalEarth:function(){return Wr.c},geoNaturalEarth2:function(){return nu},geoNaturalEarth2Raw:function(){return ks},geoNaturalEarthRaw:function(){return Wr.g},geoNellHammer:function(){return Ms},geoNellHammerRaw:function(){return ul},geoNicolosi:function(){return iu},geoNicolosiRaw:function(){return cl},geoPatterson:function(){return Ul},geoPattersonRaw:function(){return hl},geoPeirceQuincuncial:function(){return xs},geoPierceQuincuncial:function(){return xs},geoPolyconic:function(){return vs},geoPolyconicRaw:function(){return Es},geoPolyhedral:function(){return oi},geoPolyhedralButterfly:function(){return Ds},geoPolyhedralCollignon:function(){return Zs},geoPolyhedralWaterman:function(){return Xs},geoProject:function(){return Js},geoQuantize:function(){return Po},geoQuincuncial:function(){return $o},geoRectangularPolyconic:function(){return Ya},geoRectangularPolyconicRaw:function(){return Wa},geoRobinson:function(){return Sr},geoRobinsonRaw:function(){return ao},geoSatellite:function(){return El},geoSatelliteRaw:function(){return Ks},geoSinuMollweide:function(){return Jn},geoSinuMollweideRaw:function(){return qn},geoSinusoidal:function(){return De},geoSinusoidalRaw:function(){return Pe},geoStitch:function(){return ea},geoTimes:function(){return Ao},geoTimesRaw:function(){return wa},geoTwoPointAzimuthal:function(){return Aa},geoTwoPointAzimuthalRaw:function(){return Is},geoTwoPointAzimuthalUsa:function(){return Os},geoTwoPointEquidistant:function(){return _s},geoTwoPointEquidistantRaw:function(){return Yr},geoTwoPointEquidistantUsa:function(){return ko},geoVanDerGrinten:function(){return Ps},geoVanDerGrinten2:function(){return lo},geoVanDerGrinten2Raw:function(){return Fs},geoVanDerGrinten3:function(){return ws},geoVanDerGrinten3Raw:function(){return di},geoVanDerGrinten4:function(){return Fr},geoVanDerGrinten4Raw:function(){return Cr},geoVanDerGrintenRaw:function(){return so},geoWagner:function(){return Mo},geoWagner4:function(){return Vl},geoWagner4Raw:function(){return si},geoWagner6:function(){return ci},geoWagner6Raw:function(){return ja},geoWagner7:function(){return Ro},geoWagnerRaw:function(){return Na},geoWiechel:function(){return La},geoWiechelRaw:function(){return xi},geoWinkel3:function(){return Cl},geoWinkel3Raw:function(){return rs}});var _=e(87952),T=Math.abs,r=Math.atan,w=Math.atan2,b=Math.cos,c=Math.exp,o=Math.floor,t=Math.log,i=Math.max,n=Math.min,a=Math.pow,s=Math.round,l=Math.sign||function(Ke){return Ke>0?1:Ke<0?-1:0},u=Math.sin,p=Math.tan,f=1e-6,m=1e-12,h=Math.PI,g=h/2,v=h/4,x=Math.SQRT1_2,y=O(2),A=O(h),d=2*h,S=180/h,k=h/180;function E(Ke){return Ke>1?g:Ke<-1?-g:Math.asin(Ke)}function L(Ke){return Ke>1?0:Ke<-1?h:Math.acos(Ke)}function O(Ke){return Ke>0?Math.sqrt(Ke):0}function P(Ke){return(c(Ke)-c(-Ke))/2}function F(Ke){return(c(Ke)+c(-Ke))/2}function U(Ke){var et=p(Ke/2),ut=2*t(b(Ke/2))/(et*et);function j(Y,G){var D=b(Y),H=b(G),Q=u(G),ie=H*D,ue=-((1-ie?t((1+ie)/2)/(1-ie):-.5)+ut/(1+ie));return[ue*H*u(Y),ue*Q]}return j.invert=function(Y,G){var D,H=O(Y*Y+G*G),Q=-Ke/2,ie=50;if(!H)return[0,0];do{var ue=Q/2,_e=b(ue),Ie=u(ue),ze=Ie/_e,He=-t(T(_e));Q-=D=(2/ze*He-ut*ze-H)/(-He/(Ie*Ie)+1-ut/(2*_e*_e))*(_e<0?.7:1)}while(T(D)>f&&--ie>0);var Ye=u(Q);return[w(Y*Ye,H*b(Q)),E(G*Ye/H)]},j}function I(){var Ke=g,et=(0,_.U)(U),ut=et(Ke);return ut.radius=function(j){return arguments.length?et(Ke=j*k):Ke*S},ut.scale(179.976).clipAngle(147)}function N(Ke,et){var ut=b(et),j=function(Y){return Y?Y/Math.sin(Y):1}(L(ut*b(Ke/=2)));return[2*ut*u(Ke)*j,u(et)*j]}function W(){return(0,_.c)(N).scale(152.63)}function B(Ke){var et=u(Ke),ut=b(Ke),j=Ke>=0?1:-1,Y=p(j*Ke),G=(1+et-ut)/2;function D(H,Q){var ie=b(Q),ue=b(H/=2);return[(1+ie)*u(H),(j*Q>-w(ue,Y)-.001?0:10*-j)+G+u(Q)*ut-(1+ie)*et*ue]}return D.invert=function(H,Q){var ie=0,ue=0,_e=50;do{var Ie=b(ie),ze=u(ie),He=b(ue),Ye=u(ue),nt=1+He,ft=nt*ze-H,gt=G+Ye*ut-nt*et*Ie-Q,Et=nt*Ie/2,It=-ze*Ye,Lt=et*nt*ze/2,Bt=ut*He+et*Ie*Ye,Ot=It*Lt-Bt*Et,Jt=(gt*It-ft*Bt)/Ot/2,Yt=(ft*Lt-gt*Et)/Ot;T(Yt)>2&&(Yt/=2),ie-=Jt,ue-=Yt}while((T(Jt)>f||T(Yt)>f)&&--_e>0);return j*ue>-w(b(ie),Y)-.001?[2*ie,ue]:null},D}function V(){var Ke=20*k,et=Ke>=0?1:-1,ut=p(et*Ke),j=(0,_.U)(B),Y=j(Ke),G=Y.stream;return Y.parallel=function(D){return arguments.length?(ut=p((et=(Ke=D*k)>=0?1:-1)*Ke),j(Ke)):Ke*S},Y.stream=function(D){var H=Y.rotate(),Q=G(D),ie=(Y.rotate([0,0]),G(D)),ue=Y.precision();return Y.rotate(H),Q.sphere=function(){ie.polygonStart(),ie.lineStart();for(var _e=-180*et;et*_e<180;_e+=90*et)ie.point(_e,90*et);if(Ke)for(;et*(_e-=3*et*ue)>=-180;)ie.point(_e,et*-w(b(_e*k/2),ut)*S);ie.lineEnd(),ie.polygonEnd()},Q},Y.scale(218.695).center([0,28.0974])}function q(Ke,et){var ut=p(et/2),j=O(1-ut*ut),Y=1+j*b(Ke/=2),G=u(Ke)*j/Y,D=ut/Y,H=G*G,Q=D*D;return[1.3333333333333333*G*(3+H-3*Q),1.3333333333333333*D*(3+3*H-Q)]}function ne(){return(0,_.c)(q).scale(66.1603)}N.invert=function(Ke,et){if(!(Ke*Ke+4*et*et>h*h+f)){var ut=Ke,j=et,Y=25;do{var G,D=u(ut),H=u(ut/2),Q=b(ut/2),ie=u(j),ue=b(j),_e=u(2*j),Ie=ie*ie,ze=ue*ue,He=H*H,Ye=1-ze*Q*Q,nt=Ye?L(ue*Q)*O(G=1/Ye):G=0,ft=2*nt*ue*H-Ke,gt=nt*ie-et,Et=G*(ze*He+nt*ue*Q*Ie),It=G*(.5*D*_e-2*nt*ie*H),Lt=.25*G*(_e*H-nt*ie*ze*D),Bt=G*(Ie*Q+nt*He*ue),Ot=It*Lt-Bt*Et;if(!Ot)break;var Jt=(gt*It-ft*Bt)/Ot,Yt=(ft*Lt-gt*Et)/Ot;ut-=Jt,j-=Yt}while((T(Jt)>f||T(Yt)>f)&&--Y>0);return[ut,j]}},q.invert=function(Ke,et){if(et*=.375,!(Ke*=.375)&&T(et)>1)return null;var ut=1+Ke*Ke+et*et,j=O((ut-O(ut*ut-4*et*et))/2),Y=E(j)/3,G=j?function(ie){return t(ie+O(ie*ie-1))}(T(et/j))/3:function(ie){return t(ie+O(ie*ie+1))}(T(Ke))/3,D=b(Y),H=F(G),Q=H*H-D*D;return[2*l(Ke)*w(P(G)*D,.25-Q),2*l(et)*w(H*u(Y),.25+Q)]};var $=O(8),K=t(1+y);function ee(Ke,et){var ut=T(et);return ut<v?[Ke,t(p(v+et/2))]:[Ke*b(ut)*(2*y-1/u(ut)),l(et)*(2*y*(ut-v)-t(p(ut/2)))]}function J(){return(0,_.c)(ee).scale(112.314)}ee.invert=function(Ke,et){if((j=T(et))<K)return[Ke,2*r(c(et))-g];var ut,j,Y=v,G=25;do{var D=b(Y/2),H=p(Y/2);Y-=ut=($*(Y-v)-t(H)-j)/($-D*D/(2*H))}while(T(ut)>m&&--G>0);return[Ke/(b(Y)*($-1/u(Y))),l(et)*Y]};var Z=e(69020);function te(Ke){var et=2*h/Ke;function ut(j,Y){var G=(0,Z.O)(j,Y);if(T(j)>g){var D=w(G[1],G[0]),H=O(G[0]*G[0]+G[1]*G[1]),Q=et*s((D-g)/et)+g,ie=w(u(D-=Q),2-b(D));D=Q+E(h/H*u(ie))-ie,G[0]=H*b(D),G[1]=H*u(D)}return G}return ut.invert=function(j,Y){var G=O(j*j+Y*Y);if(G>g){var D=w(Y,j),H=et*s((D-g)/et)+g,Q=D>H?-1:1,ie=G*b(H-D),ue=1/p(Q*L((ie-h)/O(h*(h-2*ie)+G*G)));D=H+2*r((ue+Q*O(ue*ue-3))/3),j=G*b(D),Y=G*u(D)}return Z.O.invert(j,Y)},ut}function oe(){var Ke=5,et=(0,_.U)(te),ut=et(Ke),j=ut.stream,Y=.01,G=-b(Y*k),D=u(Y*k);return ut.lobes=function(H){return arguments.length?et(Ke=+H):Ke},ut.stream=function(H){var Q=ut.rotate(),ie=j(H),ue=(ut.rotate([0,0]),j(H));return ut.rotate(Q),ie.sphere=function(){ue.polygonStart(),ue.lineStart();for(var _e=0,Ie=360/Ke,ze=2*h/Ke,He=90-180/Ke,Ye=g;_e<Ke;++_e,He-=Ie,Ye-=ze)ue.point(w(D*b(Ye),G)*S,E(D*u(Ye))*S),He<-90?(ue.point(-90,-180-He-Y),ue.point(-90,-180-He+Y)):(ue.point(90,He+Y),ue.point(90,He-Y));ue.lineEnd(),ue.polygonEnd()},ie},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var se=e(54724);function ce(Ke,et){if(arguments.length<2&&(et=Ke),et===1)return se.y;if(et===1/0)return ye;function ut(j,Y){var G=(0,se.y)(j/et,Y);return G[0]*=Ke,G}return ut.invert=function(j,Y){var G=se.y.invert(j/Ke,Y);return G[0]*=et,G},ut}function ye(Ke,et){return[Ke*b(et)/b(et/=2),2*u(et)]}function me(){var Ke=2,et=(0,_.U)(ce),ut=et(Ke);return ut.coefficient=function(j){return arguments.length?et(Ke=+j):Ke},ut.scale(169.529)}function fe(Ke,et,ut){var j,Y,G,D=100;ut=ut===void 0?0:+ut,et=+et;do(Y=Ke(ut))===(G=Ke(ut+f))&&(G=Y+f),ut-=j=-1*f*(Y-et)/(Y-G);while(D-- >0&&T(j)>f);return D<0?NaN:ut}function pe(Ke,et,ut){return et===void 0&&(et=40),ut===void 0&&(ut=m),function(j,Y,G,D){var H,Q,ie;G=G===void 0?0:+G,D=D===void 0?0:+D;for(var ue=0;ue<et;ue++){var _e=Ke(G,D),Ie=_e[0]-j,ze=_e[1]-Y;if(T(Ie)<ut&&T(ze)<ut)break;var He=Ie*Ie+ze*ze;if(He>H)G-=Q/=2,D-=ie/=2;else{H=He;var Ye=(G>0?-1:1)*ut,nt=(D>0?-1:1)*ut,ft=Ke(G+Ye,D),gt=Ke(G,D+nt),Et=(ft[0]-_e[0])/Ye,It=(ft[1]-_e[1])/Ye,Lt=(gt[0]-_e[0])/nt,Bt=(gt[1]-_e[1])/nt,Ot=Bt*Et-It*Lt,Jt=(T(Ot)<.5?.5:1)/Ot;if(G+=Q=(ze*Lt-Ie*Bt)*Jt,D+=ie=(Ie*It-ze*Et)*Jt,T(Q)<ut&&T(ie)<ut)break}}return[G,D]}}function ge(){var Ke=ce(1.68,2);function et(ut,j){if(ut+j<-1.4){var Y=(ut-j+1.6)*(ut+j+1.4)/8;ut+=Y,j-=.8*Y*u(j+h/2)}var G=Ke(ut,j),D=(1-b(ut*j))/12;return G[1]<0&&(G[0]*=1+D),G[1]>0&&(G[1]*=1+D/1.5*G[0]*G[0]),G}return et.invert=pe(et),et}function ke(){return(0,_.c)(ge()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ce(Ke,et){var ut,j=Ke*u(et),Y=30;do et-=ut=(et+u(et)-j)/(1+b(et));while(T(ut)>f&&--Y>0);return et/2}function de(Ke,et,ut){function j(Y,G){return[Ke*Y*b(G=Ce(ut,G)),et*u(G)]}return j.invert=function(Y,G){return G=E(G/et),[Y/(Ke*b(G)),E((2*G+u(2*G))/ut)]},j}ye.invert=function(Ke,et){var ut=2*E(et/2);return[Ke*b(ut/2)/b(ut),ut]};var ae=de(y/g,y,h);function re(){return(0,_.c)(ae).scale(169.529)}var he=2.00276,Se=1.11072;function xe(Ke,et){var ut=Ce(h,et);return[he*Ke/(1/b(et)+Se/b(ut)),(et+y*u(ut))/he]}function Te(){return(0,_.c)(xe).scale(160.857)}function Ae(Ke){var et=0,ut=(0,_.U)(Ke),j=ut(et);return j.parallel=function(Y){return arguments.length?ut(et=Y*k):et*S},j}function Pe(Ke,et){return[Ke*b(et),et]}function De(){return(0,_.c)(Pe).scale(152.63)}function ve(Ke){if(!Ke)return Pe;var et=1/p(Ke);function ut(j,Y){var G=et+Ke-Y,D=G&&j*b(Y)/G;return[G*u(D),et-G*b(D)]}return ut.invert=function(j,Y){var G=O(j*j+(Y=et-Y)*Y),D=et+Ke-G;return[G/b(D)*w(j,Y),D]},ut}function we(){return Ae(ve).scale(123.082).center([0,26.1441]).parallel(45)}function Ee(Ke){function et(ut,j){var Y=g-j,G=Y&&ut*Ke*u(Y)/Y;return[Y*u(G)/Ke,g-Y*b(G)]}return et.invert=function(ut,j){var Y=ut*Ke,G=g-j,D=O(Y*Y+G*G),H=w(Y,G);return[(D?D/u(D):1)*H/Ke,g-D]},et}function Fe(){var Ke=.5,et=(0,_.U)(Ee),ut=et(Ke);return ut.fraction=function(j){return arguments.length?et(Ke=+j):Ke},ut.scale(158.837)}xe.invert=function(Ke,et){var ut,j,Y=he*et,G=et<0?-v:v,D=25;do j=Y-y*u(G),G-=ut=(u(2*G)+2*G-h*u(j))/(2*b(2*G)+2+h*b(j)*y*b(G));while(T(ut)>f&&--D>0);return j=Y-y*u(G),[Ke*(1/b(j)+Se/b(G))/he,j]},Pe.invert=function(Ke,et){return[Ke/b(et),et]};var Le=de(1,4/h,h);function je(){return(0,_.c)(Le).scale(152.63)}var Ge=e(24052),Je=e(92992);function rt(Ke,et,ut,j,Y,G){var D,H=b(G);if(T(Ke)>1||T(G)>1)D=L(ut*Y+et*j*H);else{var Q=u(Ke/2),ie=u(G/2);D=2*E(O(Q*Q+et*j*ie*ie))}return T(D)>f?[D,w(j*u(G),et*Y-ut*j*H)]:[0,0]}function ot(Ke,et,ut){return L((Ke*Ke+et*et-ut*ut)/(2*Ke*et))}function yt(Ke){return Ke-2*h*o((Ke+h)/(2*h))}function _t(Ke,et,ut){for(var j,Y=[[Ke[0],Ke[1],u(Ke[1]),b(Ke[1])],[et[0],et[1],u(et[1]),b(et[1])],[ut[0],ut[1],u(ut[1]),b(ut[1])]],G=Y[2],D=0;D<3;++D,G=j)j=Y[D],G.v=rt(j[1]-G[1],G[3],G[2],j[3],j[2],j[0]-G[0]),G.point=[0,0];var H=ot(Y[0].v[0],Y[2].v[0],Y[1].v[0]),Q=ot(Y[0].v[0],Y[1].v[0],Y[2].v[0]),ie=h-H;Y[2].point[1]=0,Y[0].point[0]=-(Y[1].point[0]=Y[0].v[0]/2);var ue=[Y[2].point[0]=Y[0].point[0]+Y[2].v[0]*b(H),2*(Y[0].point[1]=Y[1].point[1]=Y[2].v[0]*u(H))];return function(_e,Ie){var ze,He=u(Ie),Ye=b(Ie),nt=new Array(3);for(ze=0;ze<3;++ze){var ft=Y[ze];if(nt[ze]=rt(Ie-ft[1],ft[3],ft[2],Ye,He,_e-ft[0]),!nt[ze][0])return ft.point;nt[ze][1]=yt(nt[ze][1]-ft.v[1])}var gt=ue.slice();for(ze=0;ze<3;++ze){var Et=ze==2?0:ze+1,It=ot(Y[ze].v[0],nt[ze][0],nt[Et][0]);nt[ze][1]<0&&(It=-It),ze?ze==1?(It=Q-It,gt[0]-=nt[ze][0]*b(It),gt[1]-=nt[ze][0]*u(It)):(It=ie-It,gt[0]+=nt[ze][0]*b(It),gt[1]+=nt[ze][0]*u(It)):(gt[0]+=nt[ze][0]*b(It),gt[1]-=nt[ze][0]*u(It))}return gt[0]/=3,gt[1]/=3,gt}}function mt(Ke){return Ke[0]*=k,Ke[1]*=k,Ke}function tt(){return Qe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Qe(Ke,et,ut){var j=(0,Ge.c)({type:"MultiPoint",coordinates:[Ke,et,ut]}),Y=[-j[0],-j[1]],G=(0,Je.c)(Y),D=_t(mt(G(Ke)),mt(G(et)),mt(G(ut)));D.invert=pe(D);var H=(0,_.c)(D).rotate(Y),Q=H.center;return delete H.rotate,H.center=function(ie){return arguments.length?Q(G(ie)):G.invert(Q())},H.clipAngle(90)}function Dt(Ke,et){var ut=O(1-u(et));return[2/A*Ke*ut,A*(1-ut)]}function zt(){return(0,_.c)(Dt).scale(95.6464).center([0,30])}function pt(Ke){var et=p(Ke);function ut(j,Y){return[j,(j?j/u(j):1)*(u(Y)*b(j)-et*b(Y))]}return ut.invert=et?function(j,Y){j&&(Y*=u(j)/j);var G=b(j);return[j,2*w(O(G*G+et*et-Y*Y)-G,et-Y)]}:function(j,Y){return[j,E(j?Y*p(j)/j:Y)]},ut}function vt(){return Ae(pt).scale(249.828).clipAngle(90)}Dt.invert=function(Ke,et){var ut=(ut=et/A-1)*ut;return[ut>0?Ke*O(h/ut)/2:0,E(1-ut)]};var We=O(3);function Ze(Ke,et){return[We*Ke*(2*b(2*et/3)-1)/A,We*A*u(et/3)]}function Ne(){return(0,_.c)(Ze).scale(156.19)}function Xe(Ke){var et=b(Ke);function ut(j,Y){return[j*et,u(Y)/et]}return ut.invert=function(j,Y){return[j/et,E(Y*et)]},ut}function st(){return Ae(Xe).parallel(38.58).scale(195.044)}function lt(Ke){var et=b(Ke);function ut(j,Y){return[j*et,(1+et)*p(Y/2)]}return ut.invert=function(j,Y){return[j/et,2*r(Y/(1+et))]},ut}function xt(){return Ae(lt).scale(124.75)}function bt(Ke,et){var ut=O(8/(3*h));return[ut*Ke*(1-T(et)/h),ut*et]}function Ve(){return(0,_.c)(bt).scale(165.664)}function Be(Ke,et){var ut=O(4-3*u(T(et)));return[2/O(6*h)*Ke*ut,l(et)*O(2*h/3)*(2-ut)]}function at(){return(0,_.c)(Be).scale(165.664)}function ht(Ke,et){var ut=O(h*(4+h));return[2/ut*Ke*(1+O(1-4*et*et/(h*h))),4/ut*et]}function dt(){return(0,_.c)(ht).scale(180.739)}function it(Ke,et){var ut=(2+g)*u(et);et/=2;for(var j=0,Y=1/0;j<10&&T(Y)>f;j++){var G=b(et);et-=Y=(et+u(et)*(G+2)-ut)/(2*G*(1+G))}return[2/O(h*(4+h))*Ke*(1+b(et)),2*O(h/(4+h))*u(et)]}function kt(){return(0,_.c)(it).scale(180.739)}function Tt(Ke,et){return[Ke*(1+b(et))/O(2+h),2*et/O(2+h)]}function St(){return(0,_.c)(Tt).scale(173.044)}function wt(Ke,et){for(var ut=(1+g)*u(et),j=0,Y=1/0;j<10&&T(Y)>f;j++)et-=Y=(et+u(et)-ut)/(1+b(et));return ut=O(2+h),[Ke*(1+b(et))/ut,2*et/ut]}function At(){return(0,_.c)(wt).scale(173.044)}Ze.invert=function(Ke,et){var ut=3*E(et/(We*A));return[A*Ke/(We*(2*b(2*ut/3)-1)),ut]},bt.invert=function(Ke,et){var ut=O(8/(3*h)),j=et/ut;return[Ke/(ut*(1-T(j)/h)),j]},Be.invert=function(Ke,et){var ut=2-T(et)/O(2*h/3);return[Ke*O(6*h)/(2*ut),l(et)*E((4-ut*ut)/3)]},ht.invert=function(Ke,et){var ut=O(h*(4+h))/2;return[Ke*ut/(1+O(1-et*et*(4+h)/(4*h))),et*ut/2]},it.invert=function(Ke,et){var ut=et*O((4+h)/h)/2,j=E(ut),Y=b(j);return[Ke/(2/O(h*(4+h))*(1+Y)),E((j+ut*(Y+2))/(2+g))]},Tt.invert=function(Ke,et){var ut=O(2+h),j=et*ut/2;return[ut*Ke/(1+b(j)),j]},wt.invert=function(Ke,et){var ut=1+g,j=O(ut/2);return[2*Ke*j/(1+b(et*=j)),E((et+u(et))/ut)]};var Ft=3+2*y;function jt(Ke,et){var ut=u(Ke/=2),j=b(Ke),Y=O(b(et)),G=b(et/=2),D=u(et)/(G+y*j*Y),H=O(2/(1+D*D)),Q=O((y*G+(j+ut)*Y)/(y*G+(j-ut)*Y));return[Ft*(H*(Q-1/Q)-2*t(Q)),Ft*(H*D*(Q+1/Q)-2*r(D))]}function rn(){return(0,_.c)(jt).scale(62.5271)}jt.invert=function(Ke,et){if(!(ut=q.invert(Ke/1.2,1.065*et)))return null;var ut,j=ut[0],Y=ut[1],G=20;Ke/=Ft,et/=Ft;do{var D=j/2,H=Y/2,Q=u(D),ie=b(D),ue=u(H),_e=b(H),Ie=b(Y),ze=O(Ie),He=ue/(_e+y*ie*ze),Ye=He*He,nt=O(2/(1+Ye)),ft=(y*_e+(ie+Q)*ze)/(y*_e+(ie-Q)*ze),gt=O(ft),Et=gt-1/gt,It=gt+1/gt,Lt=nt*Et-2*t(gt)-Ke,Bt=nt*He*It-2*r(He)-et,Ot=ue&&x*ze*Q*Ye/ue,Jt=(y*ie*_e+ze)/(2*(_e+y*ie*ze)*(_e+y*ie*ze)*ze),Yt=-.5*He*nt*nt*nt,Vt=Yt*Ot,dn=Yt*Jt,xn=(xn=2*_e+y*ze*(ie-Q))*xn*gt,En=(y*ie*_e*ze+Ie)/xn,In=-y*Q*ue/(ze*xn),Hn=Et*Vt-2*En/gt+nt*(En+En/ft),ir=Et*dn-2*In/gt+nt*(In+In/ft),dr=He*It*Vt-2*Ot/(1+Ye)+nt*It*Ot+nt*He*(En-En/ft),Zn=He*It*dn-2*Jt/(1+Ye)+nt*It*Jt+nt*He*(In-In/ft),ur=ir*dr-Zn*Hn;if(!ur)break;var _r=(Bt*ir-Lt*Zn)/ur,Dr=(Lt*dr-Bt*Hn)/ur;j-=_r,Y=i(-g,n(g,Y-Dr))}while((T(_r)>f||T(Dr)>f)&&--G>0);return T(T(Y)-g)<f?[0,Y]:G&&[j,Y]};var nn=b(35*k);function on(Ke,et){var ut=p(et/2);return[Ke*nn*O(1-ut*ut),(1+nn)*ut]}function Ht(){return(0,_.c)(on).scale(137.152)}function $t(Ke,et){var ut=et/2,j=b(ut);return[2*Ke/A*b(et)*j*j,A*p(ut)]}function bn(){return(0,_.c)($t).scale(135.264)}function ln(Ke){var et=1-Ke,ut=Y(h,0)[0]-Y(-h,0)[0],j=O(2*(Y(0,g)[1]-Y(0,-g)[1])/ut);function Y(H,Q){var ie=b(Q),ue=u(Q);return[ie/(et+Ke*ie)*H,et*Q+Ke*ue]}function G(H,Q){var ie=Y(H,Q);return[ie[0]*j,ie[1]/j]}function D(H){return G(0,H)[1]}return G.invert=function(H,Q){var ie=fe(D,Q);return[H/j*(Ke+et/b(ie)),ie]},G}function Kt(){var Ke=.5,et=(0,_.U)(ln),ut=et(Ke);return ut.alpha=function(j){return arguments.length?et(Ke=+j):Ke},ut.scale(168.725)}on.invert=function(Ke,et){var ut=et/(1+nn);return[Ke&&Ke/(nn*O(1-ut*ut)),2*r(ut)]},$t.invert=function(Ke,et){var ut=r(et/A),j=b(ut),Y=2*ut;return[Ke*A/2/(b(Y)*j*j),Y]};var fn=e(4888),en=e(69604);function un(Ke){return[Ke[0]/2,E(p(Ke[1]/2*k))*S]}function An(Ke){return[2*Ke[0],2*r(u(Ke[1]*k))*S]}function wn(Ke){Ke==null&&(Ke=fn.c);var et=Ke(),ut=(0,en.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function j(G){return et(un(G))}function Y(G){j[G]=function(){return arguments.length?(et[G].apply(et,arguments),j):et[G]()}}return et.invert&&(j.invert=function(G){return An(et.invert(G))}),j.stream=function(G){var D=et.stream(G),H=ut.stream({point:function(Q,ie){D.point(Q/2,E(p(-ie/2*k))*S)},lineStart:function(){D.lineStart()},lineEnd:function(){D.lineEnd()},polygonStart:function(){D.polygonStart()},polygonEnd:function(){D.polygonEnd()}});return H.sphere=D.sphere,H},j.rotate=function(G){return arguments.length?(ut.rotate(G),j):ut.rotate()},j.center=function(G){return arguments.length?(et.center(un(G)),j):An(et.center())},Y("angle"),Y("clipAngle"),Y("clipExtent"),Y("fitExtent"),Y("fitHeight"),Y("fitSize"),Y("fitWidth"),Y("scale"),Y("translate"),Y("precision"),j.scale(249.5)}function On(Ke,et){var ut=2*h/et,j=Ke*Ke;function Y(G,D){var H=(0,Z.O)(G,D),Q=H[0],ie=H[1],ue=Q*Q+ie*ie;if(ue>j){var _e=O(ue),Ie=w(ie,Q),ze=ut*s(Ie/ut),He=Ie-ze,Ye=Ke*b(He),nt=(Ke*u(He)-He*u(Ye))/(g-Ye),ft=Tn(He,nt),gt=(h-Ke)/Cn(ft,Ye,h);Q=_e;var Et,It=50;do Q-=Et=(Ke+Cn(ft,Ye,Q)*gt-_e)/(ft(Q)*gt);while(T(Et)>f&&--It>0);ie=He*u(Q),Q<g&&(ie-=nt*(Q-g));var Lt=u(ze),Bt=b(ze);H[0]=Q*Bt-ie*Lt,H[1]=Q*Lt+ie*Bt}return H}return Y.invert=function(G,D){var H=G*G+D*D;if(H>j){var Q=O(H),ie=w(D,G),ue=ut*s(ie/ut),_e=ie-ue;G=Q*b(_e),D=Q*u(_e);for(var Ie=G-g,ze=u(G),He=D/ze,Ye=G<g?1/0:0,nt=10;;){var ft=Ke*u(He),gt=Ke*b(He),Et=u(gt),It=g-gt,Lt=(ft-He*Et)/It,Bt=Tn(He,Lt);if(T(Ye)<m||!--nt)break;He-=Ye=(He*ze-Lt*Ie-D)/(ze-2*Ie*(It*(gt+He*ft*b(gt)-Et)-ft*(ft-He*Et))/(It*It))}G=(Q=Ke+Cn(Bt,gt,G)*(h-Ke)/Cn(Bt,gt,h))*b(ie=ue+He),D=Q*u(ie)}return Z.O.invert(G,D)},Y}function Tn(Ke,et){return function(ut){var j=Ke*b(ut);return ut<g&&(j-=et),O(1+j*j)}}function Cn(Ke,et,ut){for(var j=(ut-et)/50,Y=Ke(et)+Ke(ut),G=1,D=et;G<50;++G)Y+=2*Ke(D+=j);return .5*Y*j}function Bn(){var Ke=6,et=30*k,ut=b(et),j=u(et),Y=(0,_.U)(On),G=Y(et,Ke),D=G.stream,H=-b(.01*k),Q=u(.01*k);return G.radius=function(ie){return arguments.length?(ut=b(et=ie*k),j=u(et),Y(et,Ke)):et*S},G.lobes=function(ie){return arguments.length?Y(et,Ke=+ie):Ke},G.stream=function(ie){var ue=G.rotate(),_e=D(ie),Ie=(G.rotate([0,0]),D(ie));return G.rotate(ue),_e.sphere=function(){Ie.polygonStart(),Ie.lineStart();for(var ze=0,He=2*h/Ke,Ye=0;ze<Ke;++ze,Ye-=He)Ie.point(w(Q*b(Ye),H)*S,E(Q*u(Ye))*S),Ie.point(w(j*b(Ye-He/2),ut)*S,E(j*u(Ye-He/2))*S);Ie.lineEnd(),Ie.polygonEnd()},_e},G.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Xn(Ke,et,ut,j,Y,G,D,H){function Q(ie,ue){if(!ue)return[Ke*ie/h,0];var _e=ue*ue,Ie=Ke+_e*(et+_e*(ut+_e*j)),ze=ue*(Y-1+_e*(G-H+_e*D)),He=(Ie*Ie+ze*ze)/(2*ze),Ye=ie*E(Ie/He)/h;return[He*u(Ye),ue*(1+_e*H)+He*(1-b(Ye))]}return arguments.length<8&&(H=0),Q.invert=function(ie,ue){var _e,Ie,ze=h*ie/Ke,He=ue,Ye=50;do{var nt=He*He,ft=Ke+nt*(et+nt*(ut+nt*j)),gt=He*(Y-1+nt*(G-H+nt*D)),Et=ft*ft+gt*gt,It=2*gt,Lt=Et/It,Bt=Lt*Lt,Ot=E(ft/Lt)/h,Jt=ze*Ot,Yt=ft*ft,Vt=(2*et+nt*(4*ut+6*nt*j))*He,dn=Y+nt*(3*G+5*nt*D),xn=(2*(ft*Vt+gt*(dn-1))*It-Et*(2*(dn-1)))/(It*It),En=b(Jt),In=u(Jt),Hn=Lt*En,ir=Lt*In,dr=ze/h*(1/O(1-Yt/Bt))*(Vt*Lt-ft*xn)/Bt,Zn=ir-ie,ur=He*(1+nt*H)+Lt-Hn-ue,_r=xn*In+Hn*dr,Dr=Hn*Ot,nr=1+xn-(xn*En-ir*dr),lr=ir*Ot,Ar=_r*lr-nr*Dr;if(!Ar)break;ze-=_e=(ur*_r-Zn*nr)/Ar,He-=Ie=(Zn*lr-ur*Dr)/Ar}while((T(_e)>f||T(Ie)>f)&&--Ye>0);return[ze,He]},Q}var cr=Xn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Yn(){return(0,_.c)(cr).scale(149.995)}var jn=Xn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Kn(){return(0,_.c)(jn).scale(153.93)}var or=Xn(5/6*h,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Qt(){return(0,_.c)(or).scale(130.945)}function an(Ke,et){var ut=Ke*Ke,j=et*et;return[Ke*(1-.162388*j)*(.87-952426e-9*ut*ut),et*(1+j/12)]}function Dn(){return(0,_.c)(an).scale(131.747)}an.invert=function(Ke,et){var ut,j=Ke,Y=et,G=50;do{var D=Y*Y;Y-=ut=(Y*(1+D/12)-et)/(1+D/4)}while(T(ut)>f&&--G>0);G=50,Ke/=1-.162388*D;do{var H=(H=j*j)*H;j-=ut=(j*(.87-952426e-9*H)-Ke)/(.87-.00476213*H)}while(T(ut)>f&&--G>0);return[j,Y]};var yn=Xn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,_.c)(yn).scale(131.087)}function Vn(Ke){var et=Ke(g,0)[0]-Ke(-g,0)[0];function ut(j,Y){var G=j>0?-.5:.5,D=Ke(j+G*h,Y);return D[0]-=G*et,D}return Ke.invert&&(ut.invert=function(j,Y){var G=j>0?-.5:.5,D=Ke.invert(j+G*et,Y),H=D[0]-G*h;return H<-h?H+=2*h:H>h&&(H-=2*h),D[0]=H,D}),ut}function Un(Ke,et){var ut=l(Ke),j=l(et),Y=b(et),G=b(Ke)*Y,D=u(Ke)*Y,H=u(j*et);Ke=T(w(D,H)),et=E(G),T(Ke-g)>f&&(Ke%=g);var Q=function(ie,ue){if(ue===g)return[0,0];var _e,Ie,ze=u(ue),He=ze*ze,Ye=He*He,nt=1+Ye,ft=1+3*Ye,gt=1-Ye,Et=E(1/O(nt)),It=gt+He*nt*Et,Lt=(1-ze)/It,Bt=O(Lt),Ot=Lt*nt,Jt=O(Ot),Yt=Bt*gt;if(ie===0)return[0,-(Yt+He*Jt)];var Vt,dn=b(ue),xn=1/dn,En=2*ze*dn,In=(-It*dn-(1-ze)*((-3*He+Et*ft)*En))/(It*It),Hn=-xn*En,ir=-xn*(He*nt*In+Lt*ft*En),dr=-2*xn*(gt*(.5*In/Bt)-2*He*Bt*En),Zn=4*ie/h;if(ie>.222*h||ue<h/4&&ie>.175*h){if(_e=(Yt+He*O(Ot*(1+Ye)-Yt*Yt))/(1+Ye),ie>h/4)return[_e,_e];var ur=_e,_r=.5*_e;_e=.5*(_r+ur),Ie=50;do{var Dr=_e*(dr+Hn*O(Ot-_e*_e))+ir*E(_e/Jt)-Zn;if(!Dr)break;Dr<0?_r=_e:ur=_e,_e=.5*(_r+ur)}while(T(ur-_r)>f&&--Ie>0)}else{_e=f,Ie=25;do{var nr=_e*_e,lr=O(Ot-nr),Ar=dr+Hn*lr,vr=_e*Ar+ir*E(_e/Jt)-Zn;_e-=Vt=lr?vr/(Ar+(ir-Hn*nr)/lr):0}while(T(Vt)>f&&--Ie>0)}return[_e,-Yt-He*O(Ot-_e*_e)]}(Ke>h/4?g-Ke:Ke,et);return Ke>h/4&&(H=Q[0],Q[0]=-Q[1],Q[1]=-H),Q[0]*=ut,Q[1]*=-j,Q}function er(){return(0,_.c)(Vn(Un)).scale(239.75)}function fr(Ke,et){var ut,j,Y,G,D,H;if(et<f)return[(G=u(Ke))-(ut=et*(Ke-G*(j=b(Ke)))/4)*j,j+ut*G,1-et*G*G/2,Ke-ut];if(et>=1-f)return ut=(1-et)/4,Y=1/(j=F(Ke)),[(G=((H=c(2*(H=Ke)))-1)/(H+1))+ut*((D=j*P(Ke))-Ke)/(j*j),Y-ut*G*Y*(D-Ke),Y+ut*G*Y*(D+Ke),2*r(c(Ke))-g+ut*(D-Ke)/j];var Q=[1,0,0,0,0,0,0,0,0],ie=[O(et),0,0,0,0,0,0,0,0],ue=0;for(j=O(1-et),D=1;T(ie[ue]/Q[ue])>f&&ue<8;)ut=Q[ue++],ie[ue]=(ut-j)/2,Q[ue]=(ut+j)/2,j=O(ut*j),D*=2;Y=D*Q[ue]*Ke;do Y=(E(G=ie[ue]*u(j=Y)/Q[ue])+Y)/2;while(--ue);return[u(Y),G=b(Y),G/b(Y-j),Y]}function Xt(Ke,et){if(!et)return Ke;if(et===1)return t(p(Ke/2+v));for(var ut=1,j=O(1-et),Y=O(et),G=0;T(Y)>f;G++){if(Ke%h){var D=r(j*p(Ke)/ut);D<0&&(D+=h),Ke+=D+~~(Ke/h)*h}else Ke+=Ke;Y=(ut+j)/2,j=O(ut*j),Y=((ut=Y)-j)/2}return Ke/(a(2,G)*ut)}function mn(Ke,et){var ut=(y-1)/(y+1),j=O(1-ut*ut),Y=Xt(g,j*j),G=t(p(h/4+T(et)/2)),D=c(-1*G)/O(ut),H=function(ie,ue){var _e=ie*ie,Ie=ue+1,ze=1-_e-ue*ue;return[.5*((ie>=0?g:-g)-w(ze,2*ie)),-.25*t(ze*ze+4*_e)+.5*t(Ie*Ie+_e)]}(D*b(-1*Ke),D*u(-1*Ke)),Q=function(ie,ue,_e){var Ie=T(ie),ze=P(T(ue));if(Ie){var He=1/u(Ie),Ye=1/(p(Ie)*p(Ie)),nt=-(Ye+_e*(ze*ze*He*He)-1+_e),ft=(-nt+O(nt*nt-(_e-1)*Ye*4))/2;return[Xt(r(1/O(ft)),_e)*l(ie),Xt(r(O((ft/Ye-1)/_e)),1-_e)*l(ue)]}return[0,Xt(r(ze),1-_e)*l(ue)]}(H[0],H[1],j*j);return[-Q[1],(et>=0?1:-1)*(.5*Y-Q[0])]}function Pt(){return(0,_.c)(Vn(mn)).scale(151.496)}Un.invert=function(Ke,et){T(Ke)>1&&(Ke=2*l(Ke)-Ke),T(et)>1&&(et=2*l(et)-et);var ut=l(Ke),j=l(et),Y=-ut*Ke,G=-j*et,D=G/Y<1,H=function(_e,Ie){for(var ze=0,He=1,Ye=.5,nt=50;;){var ft=Ye*Ye,gt=O(Ye),Et=E(1/O(1+ft)),It=1-ft+Ye*(1+ft)*Et,Lt=(1-gt)/It,Bt=O(Lt),Ot=Lt*(1+ft),Jt=Bt*(1-ft),Yt=O(Ot-_e*_e),Vt=Ie+Jt+Ye*Yt;if(T(He-ze)<m||--nt==0||Vt===0)break;Vt>0?ze=Ye:He=Ye,Ye=.5*(ze+He)}if(!nt)return null;var dn=E(gt),xn=b(dn),En=1/xn,In=2*gt*xn,Hn=(-It*xn-(-3*Ye+Et*(1+3*ft))*In*(1-gt))/(It*It);return[h/4*(_e*(-2*En*((1-ft)*(.5*Hn/Bt)-2*Ye*Bt*In)+-En*In*Yt)+-En*(Ye*(1+ft)*Hn+Lt*(1+3*ft)*In)*E(_e/O(Ot))),dn]}(D?G:Y,D?Y:G),Q=H[0],ie=H[1],ue=b(ie);return D&&(Q=-g-Q),[ut*(w(u(Q)*ue,-u(ie))+h),j*E(b(Q)*ue)]},mn.invert=function(Ke,et){var ut,j,Y,G,D,H,Q=(y-1)/(y+1),ie=O(1-Q*Q),ue=(j=-Ke,Y=ie*ie,(ut=.5*Xt(g,ie*ie)-et)?(G=fr(ut,Y),j?(H=(D=fr(j,1-Y))[1]*D[1]+Y*G[0]*G[0]*D[0]*D[0],[[G[0]*D[2]/H,G[1]*G[2]*D[0]*D[1]/H],[G[1]*D[1]/H,-G[0]*G[2]*D[0]*D[2]/H],[G[2]*D[1]*D[2]/H,-Y*G[0]*G[1]*D[0]/H]]):[[G[0],0],[G[1],0],[G[2],0]]):[[0,(D=fr(j,1-Y))[0]/D[1]],[1/D[1],0],[D[2]/D[1],0]]),_e=function(Ie,ze){var He=ze[0]*ze[0]+ze[1]*ze[1];return[(Ie[0]*ze[0]+Ie[1]*ze[1])/He,(Ie[1]*ze[0]-Ie[0]*ze[1])/He]}(ue[0],ue[1]);return[w(_e[1],_e[0])/-1,2*r(c(-.5*t(Q*_e[0]*_e[0]+Q*_e[1]*_e[1])))-g]};var Zt=e(61780);function Wt(Ke){var et=u(Ke),ut=b(Ke),j=gn(Ke);function Y(G,D){var H=j(G,D);G=H[0],D=H[1];var Q=u(D),ie=b(D),ue=b(G),_e=L(et*Q+ut*ie*ue),Ie=u(_e),ze=T(Ie)>f?_e/Ie:1;return[ze*ut*u(G),(T(G)>g?ze:-ze)*(et*ie-ut*Q*ue)]}return j.invert=gn(-Ke),Y.invert=function(G,D){var H=O(G*G+D*D),Q=-u(H),ie=b(H),ue=H*ie,_e=-D*Q,Ie=H*et,ze=O(ue*ue+_e*_e-Ie*Ie),He=w(ue*Ie+_e*ze,_e*Ie-ue*ze),Ye=(H>g?-1:1)*w(G*Q,H*b(He)*ie+D*u(He)*Q);return j.invert(Ye,He)},Y}function gn(Ke){var et=u(Ke),ut=b(Ke);return function(j,Y){var G=b(Y),D=b(j)*G,H=u(j)*G,Q=u(Y);return[w(H,D*ut-Q*et),E(Q*ut+D*et)]}}function pn(){var Ke=0,et=(0,_.U)(Wt),ut=et(Ke),j=ut.rotate,Y=ut.stream,G=(0,Zt.c)();return ut.parallel=function(D){if(!arguments.length)return Ke*S;var H=ut.rotate();return et(Ke=D*k).rotate(H)},ut.rotate=function(D){return arguments.length?(j.call(ut,[D[0],D[1]-Ke*S]),G.center([-D[0],-D[1]]),ut):((D=j.call(ut))[1]+=Ke*S,D)},ut.stream=function(D){return(D=Y(D)).sphere=function(){D.polygonStart();var H,Q=G.radius(89.99)().coordinates[0],ie=Q.length-1,ue=-1;for(D.lineStart();++ue<ie;)D.point((H=Q[ue])[0],H[1]);for(D.lineEnd(),ie=(Q=G.radius(90.01)().coordinates[0]).length-1,D.lineStart();--ue>=0;)D.point((H=Q[ue])[0],H[1]);D.lineEnd(),D.polygonEnd()},D},ut.scale(79.4187).parallel(45).clipAngle(179.999)}var kn=e(84706),vn=e(16016),cn=E(1-1/3)*S,qt=Xe(0);function Nt(Ke){var et=cn*k,ut=Dt(h,et)[0]-Dt(-h,et)[0],j=qt(0,et)[1],Y=Dt(0,et)[1],G=A-Y,D=d/Ke,H=4/d,Q=j+G*G*4/d;function ie(ue,_e){var Ie,ze=T(_e);if(ze>et){var He=n(Ke-1,i(0,o((ue+h)/D)));(Ie=Dt(ue+=h*(Ke-1)/Ke-He*D,ze))[0]=Ie[0]*d/ut-d*(Ke-1)/(2*Ke)+He*d/Ke,Ie[1]=j+4*(Ie[1]-Y)*G/d,_e<0&&(Ie[1]=-Ie[1])}else Ie=qt(ue,_e);return Ie[0]*=H,Ie[1]/=Q,Ie}return ie.invert=function(ue,_e){ue/=H;var Ie=T(_e*=Q);if(Ie>j){var ze=n(Ke-1,i(0,o((ue+h)/D)));ue=(ue+h*(Ke-1)/Ke-ze*D)*ut/d;var He=Dt.invert(ue,.25*(Ie-j)*d/G+Y);return He[0]-=h*(Ke-1)/Ke-ze*D,_e<0&&(He[1]=-He[1]),He}return qt.invert(ue,_e)},ie}function tn(Ke,et){return[Ke,1&et?90-f:cn]}function _n(Ke,et){return[Ke,1&et?-90+f:-cn]}function Fn(Ke){return[Ke[0]*(1-f),Ke[1]]}function zn(){var Ke=4,et=(0,_.U)(Nt),ut=et(Ke),j=ut.stream;return ut.lobes=function(Y){return arguments.length?et(Ke=+Y):Ke},ut.stream=function(Y){var G=ut.rotate(),D=j(Y),H=(ut.rotate([0,0]),j(Y));return ut.rotate(G),D.sphere=function(){var Q,ie;(0,vn.c)((Q=180/Ke,ie=[].concat((0,kn.ik)(-180,180+Q/2,Q).map(tn),(0,kn.ik)(180,-180-Q/2,-Q).map(_n)),{type:"Polygon",coordinates:[Q===180?ie.map(Fn):ie]}),H)},D},ut.scale(239.75)}function Pn(Ke){var et,ut=1+Ke,j=E(u(1/ut)),Y=2*O(h/(et=h+4*j*ut)),G=.5*Y*(ut+O(Ke*(2+Ke))),D=Ke*Ke,H=ut*ut;function Q(ie,ue){var _e,Ie,ze=1-u(ue);if(ze&&ze<2){var He,Ye=g-ue,nt=25;do{var ft=u(Ye),gt=b(Ye),Et=j+w(ft,ut-gt),It=1+H-2*ut*gt;Ye-=He=(Ye-D*j-ut*ft+It*Et-.5*ze*et)/(2*ut*ft*Et)}while(T(He)>m&&--nt>0);_e=Y*O(It),Ie=ie*Et/h}else _e=Y*(Ke+ze),Ie=ie*j/h;return[_e*u(Ie),G-_e*b(Ie)]}return Q.invert=function(ie,ue){var _e=ie*ie+(ue-=G)*ue,Ie=(1+H-_e/(Y*Y))/(2*ut),ze=L(Ie),He=u(ze),Ye=j+w(He,ut-Ie);return[E(ie/O(_e))*h/Ye,E(1-2*(ze-D*j-ut*He+(1+H-2*ut*Ie)*Ye)/et)]},Q}function $n(){var Ke=1,et=(0,_.U)(Pn),ut=et(Ke);return ut.ratio=function(j){return arguments.length?et(Ke=+j):Ke},ut.scale(167.774).center([0,18.67])}var Wn=.7109889596207567,tr=.0528035274542;function qn(Ke,et){return et>-Wn?((Ke=ae(Ke,et))[1]+=tr,Ke):Pe(Ke,et)}function Jn(){return(0,_.c)(qn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function sr(Ke,et){return T(et)>Wn?((Ke=ae(Ke,et))[1]-=et>0?tr:-tr,Ke):Pe(Ke,et)}function wr(){return(0,_.c)(sr).scale(152.63)}function pr(Ke,et,ut,j){var Y=O(4*h/(2*ut+(1+Ke-et/2)*u(2*ut)+(Ke+et)/2*u(4*ut)+et/2*u(6*ut))),G=O(j*u(ut)*O((1+Ke*b(2*ut)+et*b(4*ut))/(1+Ke+et))),D=ut*Q(1);function H(_e){return O(1+Ke*b(2*_e)+et*b(4*_e))}function Q(_e){var Ie=_e*ut;return(2*Ie+(1+Ke-et/2)*u(2*Ie)+(Ke+et)/2*u(4*Ie)+et/2*u(6*Ie))/ut}function ie(_e){return H(_e)*u(_e)}var ue=function(_e,Ie){var ze=ut*fe(Q,D*u(Ie)/ut,Ie/h);isNaN(ze)&&(ze=ut*l(Ie));var He=Y*H(ze);return[He*G*_e/h*b(ze),He/G*u(ze)]};return ue.invert=function(_e,Ie){var ze=fe(ie,Ie*G/Y);return[_e*h/(b(ze)*Y*G*H(ze)),E(ut*Q(ze/ut)/D)]},ut===0&&(Y=O(j/h),(ue=function(_e,Ie){return[_e*Y,u(Ie)/Y]}).invert=function(_e,Ie){return[_e/Y,E(Ie*Y)]}),ue}function rr(){var Ke=1,et=0,ut=45*k,j=2,Y=(0,_.U)(pr),G=Y(Ke,et,ut,j);return G.a=function(D){return arguments.length?Y(Ke=+D,et,ut,j):Ke},G.b=function(D){return arguments.length?Y(Ke,et=+D,ut,j):et},G.psiMax=function(D){return arguments.length?Y(Ke,et,ut=+D*k,j):ut*S},G.ratio=function(D){return arguments.length?Y(Ke,et,ut,j=+D):j},G.scale(180.739)}function yr(Ke,et,ut,j,Y,G,D,H,Q,ie,ue){if(ue.nanEncountered)return NaN;var _e,Ie,ze,He,Ye,nt,ft,gt,Et,It;if(Ie=Ke(et+.25*(_e=ut-et)),ze=Ke(ut-.25*_e),isNaN(Ie))ue.nanEncountered=!0;else{if(!isNaN(ze))return It=((nt=(He=_e*(j+4*Ie+Y)/12)+(Ye=_e*(Y+4*ze+G)/12))-D)/15,ie>Q?(ue.maxDepthCount++,nt+It):Math.abs(It)<H?nt+It:(gt=yr(Ke,et,ft=et+.5*_e,j,Ie,Y,He,.5*H,Q,ie+1,ue),isNaN(gt)?(ue.nanEncountered=!0,NaN):(Et=yr(Ke,ft,ut,Y,ze,G,Ye,.5*H,Q,ie+1,ue),isNaN(Et)?(ue.nanEncountered=!0,NaN):gt+Et));ue.nanEncountered=!0}}function kr(Ke,et,ut,j,Y){j===void 0&&(j=1e-8),Y===void 0&&(Y=20);var G=Ke(et),D=Ke(.5*(et+ut)),H=Ke(ut);return yr(Ke,et,ut,G,D,H,(G+4*D+H)*(ut-et)/6,j,Y,1,{maxDepthCount:0,nanEncountered:!1})}function Nr(Ke,et,ut){function j(ze){return Ke+(1-Ke)*a(1-a(ze,et),1/et)}function Y(ze){return kr(j,0,ze,1e-4)}for(var G=1/Y(1),D=1e3,H=1.00000001*G,Q=[],ie=0;ie<=D;ie++)Q.push(Y(ie/D)*H);function ue(ze){var He=0,Ye=D,nt=500;do Q[nt]>ze?Ye=nt:He=nt,nt=He+Ye>>1;while(nt>He);var ft=Q[nt+1]-Q[nt];return ft&&(ft=(ze-Q[nt+1])/ft),(nt+1+ft)/D}var _e=2*ue(1)/h*G/ut,Ie=function(ze,He){var Ye=ue(T(u(He))),nt=j(Ye)*ze;return Ye/=_e,[nt,He>=0?Ye:-Ye]};return Ie.invert=function(ze,He){var Ye;return T(He*=_e)<1&&(Ye=l(He)*E(Y(T(He))*G)),[ze/j(T(He)),Ye]},Ie}function ti(){var Ke=0,et=2.5,ut=1.183136,j=(0,_.U)(Nr),Y=j(Ke,et,ut);return Y.alpha=function(G){return arguments.length?j(Ke=+G,et,ut):Ke},Y.k=function(G){return arguments.length?j(Ke,et=+G,ut):et},Y.gamma=function(G){return arguments.length?j(Ke,et,ut=+G):ut},Y.scale(152.63)}function mi(Ke,et){return T(Ke[0]-et[0])<f&&T(Ke[1]-et[1])<f}function Wi(Ke,et){for(var ut,j,Y,G=-1,D=Ke.length,H=Ke[0],Q=[];++G<D;){j=((ut=Ke[G])[0]-H[0])/et,Y=(ut[1]-H[1])/et;for(var ie=0;ie<et;++ie)Q.push([H[0]+ie*j,H[1]+ie*Y]);H=ut}return Q.push(ut),Q}function ui(Ke,et,ut){var j,Y;function G(Q,ie){for(var ue=ie<0?-1:1,_e=et[+(ie<0)],Ie=0,ze=_e.length-1;Ie<ze&&Q>_e[Ie][2][0];++Ie);var He=Ke(Q-_e[Ie][1][0],ie);return He[0]+=Ke(_e[Ie][1][0],ue*ie>ue*_e[Ie][0][1]?_e[Ie][0][1]:ie)[0],He}ut?G.invert=ut(G):Ke.invert&&(G.invert=function(Q,ie){for(var ue=Y[+(ie<0)],_e=et[+(ie<0)],Ie=0,ze=ue.length;Ie<ze;++Ie){var He=ue[Ie];if(He[0][0]<=Q&&Q<He[1][0]&&He[0][1]<=ie&&ie<He[1][1]){var Ye=Ke.invert(Q-Ke(_e[Ie][1][0],0)[0],ie);return Ye[0]+=_e[Ie][1][0],mi(G(Ye[0],Ye[1]),[Q,ie])?Ye:null}}});var D=(0,_.c)(G),H=D.stream;return D.stream=function(Q){var ie=D.rotate(),ue=H(Q),_e=(D.rotate([0,0]),H(Q));return D.rotate(ie),ue.sphere=function(){(0,vn.c)(j,_e)},ue},D.lobes=function(Q){return arguments.length?(j=function(ie){var ue,_e,Ie,ze,He,Ye,nt,ft=[],gt=ie[0].length;for(nt=0;nt<gt;++nt)_e=(ue=ie[0][nt])[0][0],Ie=ue[0][1],ze=ue[1][1],He=ue[2][0],Ye=ue[2][1],ft.push(Wi([[_e+f,Ie+f],[_e+f,ze-f],[He-f,ze-f],[He-f,Ye+f]],30));for(nt=ie[1].length-1;nt>=0;--nt)_e=(ue=ie[1][nt])[0][0],Ie=ue[0][1],ze=ue[1][1],He=ue[2][0],Ye=ue[2][1],ft.push(Wi([[He-f,Ye-f],[He-f,ze+f],[_e+f,ze+f],[_e+f,Ie-f]],30));return{type:"Polygon",coordinates:[(0,kn.Uf)(ft)]}}(Q),et=Q.map(function(ie){return ie.map(function(ue){return[[ue[0][0]*k,ue[0][1]*k],[ue[1][0]*k,ue[1][1]*k],[ue[2][0]*k,ue[2][1]*k]]})}),Y=et.map(function(ie){return ie.map(function(ue){var _e,Ie=Ke(ue[0][0],ue[0][1])[0],ze=Ke(ue[2][0],ue[2][1])[0],He=Ke(ue[1][0],ue[0][1])[1],Ye=Ke(ue[1][0],ue[1][1])[1];return He>Ye&&(_e=He,He=Ye,Ye=_e),[[Ie,He],[ze,Ye]]})}),D):et.map(function(ie){return ie.map(function(ue){return[[ue[0][0]*S,ue[0][1]*S],[ue[1][0]*S,ue[1][1]*S],[ue[2][0]*S,ue[2][1]*S]]})})},et!=null&&D.lobes(et),D}qn.invert=function(Ke,et){return et>-Wn?ae.invert(Ke,et-tr):Pe.invert(Ke,et)},sr.invert=function(Ke,et){return T(et)>Wn?ae.invert(Ke,et+(et>0?tr:-tr)):Pe.invert(Ke,et)};var Di=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function pa(){return ui(xe,Di).scale(160.857)}var Da=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Rr(){return ui(sr,Da).scale(152.63)}var aa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function da(){return ui(ae,aa).scale(169.529)}var Vi=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Vo(){return ui(ae,Vi).scale(169.529).rotate([20,0])}var ba=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function po(){return ui(qn,ba,pe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var vo=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function go(){return ui(Pe,vo).scale(152.63).rotate([-20,0])}function za(Ke,et){return[3/d*Ke*O(h*h/3-et*et),et]}function Qa(){return(0,_.c)(za).scale(158.837)}function yo(Ke){function et(ut,j){if(T(T(j)-g)<f)return[0,j<0?-2:2];var Y=u(j),G=a((1+Y)/(1-Y),Ke/2),D=.5*(G+1/G)+b(ut*=Ke);return[2*u(ut)/D,(G-1/G)/D]}return et.invert=function(ut,j){var Y=T(j);if(T(Y-2)<f)return ut?null:[0,l(j)*g];if(Y>2)return null;var G=(ut/=2)*ut,D=(j/=2)*j,H=2*j/(1+G+D);return H=a((1+H)/(1-H),1/Ke),[w(2*ut,1-G-D)/Ke,E((H-1)/(H+1))]},et}function ai(){var Ke=.5,et=(0,_.U)(yo),ut=et(Ke);return ut.spacing=function(j){return arguments.length?et(Ke=+j):Ke},ut.scale(124.75)}za.invert=function(Ke,et){return[d/3*Ke/O(h*h/3-et*et),et]};var Fi=h/y;function Co(Ke,et){return[Ke*(1+O(b(et)))/2,et/(b(et/2)*b(Ke/6))]}function mo(){return(0,_.c)(Co).scale(97.2672)}function eo(Ke,et){var ut=Ke*Ke,j=et*et;return[Ke*(.975534+j*(-.0143059*ut-.119161+-.0547009*j)),et*(1.00384+ut*(.0802894+-.02855*j+199025e-9*ut)+j*(.0998909+-.0491032*j))]}function qo(){return(0,_.c)(eo).scale(139.98)}function xo(Ke,et){return[u(Ke)/b(et),p(et)*b(Ke)]}function Ho(){return(0,_.c)(xo).scale(144.049).clipAngle(89.999)}function Do(Ke){var et=b(Ke),ut=p(v+Ke/2);function j(Y,G){var D=G-Ke,H=T(D)<f?Y*et:T(H=v+G/2)<f||T(T(H)-g)<f?0:Y*D/t(p(H)/ut);return[H,D]}return j.invert=function(Y,G){var D,H=G+Ke;return[T(G)<f?Y/et:T(D=v+H/2)<f||T(T(D)-g)<f?0:Y*t(p(D)/ut)/G,H]},j}function Go(){return Ae(Do).parallel(40).scale(158.837)}function bo(Ke,et){return[Ke,1.25*t(p(v+.4*et))]}function Ml(){return(0,_.c)(bo).scale(108.318)}function ll(Ke){var et=Ke.length-1;function ut(j,Y){for(var G,D=b(Y),H=2/(1+D*b(j)),Q=H*D*u(j),ie=H*u(Y),ue=et,_e=Ke[ue],Ie=_e[0],ze=_e[1];--ue>=0;)Ie=(_e=Ke[ue])[0]+Q*(G=Ie)-ie*ze,ze=_e[1]+Q*ze+ie*G;return[Ie=Q*(G=Ie)-ie*ze,ze=Q*ze+ie*G]}return ut.invert=function(j,Y){var G=20,D=j,H=Y;do{for(var Q,ie=et,ue=Ke[ie],_e=ue[0],Ie=ue[1],ze=0,He=0;--ie>=0;)ze=_e+D*(Q=ze)-H*He,He=Ie+D*He+H*Q,_e=(ue=Ke[ie])[0]+D*(Q=_e)-H*Ie,Ie=ue[1]+D*Ie+H*Q;var Ye,nt,ft=(ze=_e+D*(Q=ze)-H*He)*ze+(He=Ie+D*He+H*Q)*He;D-=Ye=((_e=D*(Q=_e)-H*Ie-j)*ze+(Ie=D*Ie+H*Q-Y)*He)/ft,H-=nt=(Ie*ze-_e*He)/ft}while(T(Ye)+T(nt)>f*f&&--G>0);if(G){var gt=O(D*D+H*H),Et=2*r(.5*gt),It=u(Et);return[w(D*It,gt*b(Et)),gt?E(H*It/gt):0]}},ut}Co.invert=function(Ke,et){var ut=T(Ke),j=T(et),Y=f,G=g;j<Fi?G*=j/Fi:Y+=6*L(Fi/j);for(var D=0;D<25;D++){var H=u(G),Q=O(b(G)),ie=u(G/2),ue=b(G/2),_e=u(Y/6),Ie=b(Y/6),ze=.5*Y*(1+Q)-ut,He=G/(ue*Ie)-j,Ye=Q?-.25*Y*H/Q:0,nt=.5*(1+Q),ft=(1+.5*G*ie/ue)/(ue*Ie),gt=G/ue*(_e/6)/(Ie*Ie),Et=Ye*gt-ft*nt,It=(ze*gt-He*nt)/Et,Lt=(He*Ye-ze*ft)/Et;if(G-=It,Y-=Lt,T(It)<f&&T(Lt)<f)break}return[Ke<0?-Y:Y,et<0?-G:G]},eo.invert=function(Ke,et){var ut=l(Ke)*h,j=et/2,Y=50;do{var G=ut*ut,D=j*j,H=ut*j,Q=ut*(.975534+D*(-.0143059*G-.119161+-.0547009*D))-Ke,ie=j*(1.00384+G*(.0802894+-.02855*D+199025e-9*G)+D*(.0998909+-.0491032*D))-et,ue=.975534-D*(.119161+3*G*.0143059+.0547009*D),_e=-H*(.238322+.2188036*D+.0286118*G),Ie=H*(.1605788+7961e-7*G+-.0571*D),ze=1.00384+G*(.0802894+199025e-9*G)+D*(3*(.0998909-.02855*G)-.245516*D),He=_e*Ie-ze*ue,Ye=(ie*_e-Q*ze)/He,nt=(Q*Ie-ie*ue)/He;ut-=Ye,j-=nt}while((T(Ye)>f||T(nt)>f)&&--Y>0);return Y&&[ut,j]},xo.invert=function(Ke,et){var ut=Ke*Ke,j=et*et+1,Y=ut+j,G=Ke?x*O((Y-O(Y*Y-4*ut))/ut):1/O(j);return[E(Ke*G),l(et)*L(G)]},bo.invert=function(Ke,et){return[Ke,2.5*r(c(.8*et))-.625*h]};var us=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],zl=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Rl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],cs=[[.9245,0],[0,0],[.01943,0]],Bl=[[.721316,0],[0,0],[-.00881625,-.00617325]];function eu(){return hs(us,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function tu(){return hs(zl,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function fs(){return hs(Rl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function _o(){return hs(cs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function As(){return hs(Bl,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function hs(Ke,et){var ut=(0,_.c)(ll(Ke)).rotate(et).clipAngle(90),j=(0,Je.c)(et),Y=ut.center;return delete ut.rotate,ut.center=function(G){return arguments.length?Y(j(G)):j.invert(Y())},ut}var Hs=O(6),ps=O(7);function to(Ke,et){var ut=E(7*u(et)/(3*Hs));return[Hs*Ke*(2*b(2*ut/3)-1)/ps,9*u(ut/3)/ps]}function Sl(){return(0,_.c)(to).scale(164.859)}function Wo(Ke,et){for(var ut,j=(1+x)*u(et),Y=et,G=0;G<25&&(Y-=ut=(u(Y/2)+u(Y)-j)/(.5*b(Y/2)+b(Y)),!(T(ut)<f));G++);return[Ke*(1+2*b(Y)/b(Y/2))/(3*y),2*O(3)*u(Y/2)/O(2+y)]}function Lo(){return(0,_.c)(Wo).scale(188.209)}function Io(Ke,et){for(var ut,j=O(6/(4+h)),Y=(1+h/4)*u(et),G=et/2,D=0;D<25&&(G-=ut=(G/2+u(G)-Y)/(.5+b(G)),!(T(ut)<f));D++);return[j*(.5+b(G))*Ke/1.5,j*G]}function Yo(){return(0,_.c)(Io).scale(166.518)}to.invert=function(Ke,et){var ut=3*E(et*ps/9);return[Ke*ps/(Hs*(2*b(2*ut/3)-1)),E(3*u(ut)*Hs/7)]},Wo.invert=function(Ke,et){var ut=et*O(2+y)/(2*O(3)),j=2*E(ut);return[3*y*Ke/(1+2*b(j)/b(j/2)),E((ut+u(j))/(1+x))]},Io.invert=function(Ke,et){var ut=O(6/(4+h)),j=et/ut;return T(T(j)-g)<f&&(j=j<0?-g:g),[1.5*Ke/(ut*(.5+b(j))),E((j/2+u(j))/(1+h/4))]};var Wr=e(47984);function ks(Ke,et){var ut=et*et,j=ut*ut,Y=ut*j;return[Ke*(.84719-.13063*ut+Y*Y*(.05494*ut-.04515-.02326*j+.00331*Y)),et*(1.01183+j*j*(.01926*ut-.02625-.00396*j))]}function nu(){return(0,_.c)(ks).scale(175.295)}function ul(Ke,et){return[Ke*(1+b(et))/2,2*(et-p(et/2))]}function Ms(){return(0,_.c)(ul).scale(152.63)}ks.invert=function(Ke,et){var ut,j,Y,G,D=et,H=25;do D-=ut=(D*(1.01183+(Y=(j=D*D)*j)*Y*(.01926*j-.02625-.00396*Y))-et)/(1.01183+Y*Y*(.21186*j-.23625+-.05148*Y));while(T(ut)>m&&--H>0);return[Ke/(.84719-.13063*(j=D*D)+(G=j*(Y=j*j))*G*(.05494*j-.04515-.02326*Y+.00331*G)),D]},ul.invert=function(Ke,et){for(var ut=et/2,j=0,Y=1/0;j<10&&T(Y)>f;++j){var G=b(et/2);et-=Y=(et-p(et/2)-ut)/(1-.5/(G*G))}return[2*Ke/(1+b(et)),et]};var Nl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function ru(){return ui(ce(1/0),Nl).rotate([20,0]).scale(152.63)}function cl(Ke,et){var ut=u(et),j=b(et),Y=l(Ke);if(Ke===0||T(et)===g)return[0,et];if(et===0)return[Ke,0];if(T(Ke)===g)return[Ke*j,g*ut];var G=h/(2*Ke)-2*Ke/h,D=2*et/h,H=(1-D*D)/(ut-D),Q=G*G,ie=H*H,ue=1+Q/ie,_e=1+ie/Q,Ie=(G*ut/H-G/2)/ue,ze=(ie*ut/Q+H/2)/_e,He=ze*ze-(ie*ut*ut/Q+H*ut-1)/_e;return[g*(Ie+O(Ie*Ie+j*j/ue)*Y),g*(ze+O(He<0?0:He)*l(-et*G)*Y)]}function iu(){return(0,_.c)(cl).scale(127.267)}cl.invert=function(Ke,et){var ut=(Ke/=g)*Ke,j=ut+(et/=g)*et,Y=h*h;return[Ke?(j-1+O((1-j)*(1-j)+4*ut))/(2*Ke)*g:0,fe(function(G){return j*(h*u(G)-2*G)*h+4*G*G*(et-u(G))+2*h*G-Y*et},0)]};var Zo=1.0148,ds=.23185,Oo=-.14499,no=.02406,Ss=Zo,jl=5*ds,Gs=7*Oo,fl=9*no,Ra=1.790857183;function hl(Ke,et){var ut=et*et;return[Ke,et*(Zo+ut*ut*(ds+ut*(Oo+no*ut)))]}function Ul(){return(0,_.c)(hl).scale(139.319)}function Es(Ke,et){if(T(et)<f)return[Ke,0];var ut=p(et),j=Ke*u(et);return[u(j)/ut,et+(1-b(j))/ut]}function vs(){return(0,_.c)(Es).scale(103.74)}hl.invert=function(Ke,et){et>Ra?et=Ra:et<-1.790857183&&(et=-1.790857183);var ut,j=et;do{var Y=j*j;j-=ut=(j*(Zo+Y*Y*(ds+Y*(Oo+no*Y)))-et)/(Ss+Y*Y*(jl+Y*(Gs+fl*Y)))}while(T(ut)>f);return[Ke,j]},Es.invert=function(Ke,et){if(T(et)<f)return[Ke,0];var ut,j=Ke*Ke+et*et,Y=.5*et,G=10;do{var D=p(Y),H=1/b(Y),Q=j-2*et*Y+Y*Y;Y-=ut=(D*Q+2*(Y-et))/(2+Q*H*H+2*(Y-et)*D)}while(T(ut)>f&&--G>0);return D=p(Y),[(T(et)<T(Y+1/D)?E(Ke*D):l(et)*l(Ke)*(L(T(Ke*D))+g))/u(Y),Y]};var Cs=e(13696),gs=e(27284);function ys(Ke,et){return[Ke[0]*et[0]+Ke[1]*et[3],Ke[0]*et[1]+Ke[1]*et[4],Ke[0]*et[2]+Ke[1]*et[5]+Ke[2],Ke[3]*et[0]+Ke[4]*et[3],Ke[3]*et[1]+Ke[4]*et[4],Ke[3]*et[2]+Ke[4]*et[5]+Ke[5]]}function Ws(Ke,et){return[Ke[0]-et[0],Ke[1]-et[1]]}function pl(Ke){return O(Ke[0]*Ke[0]+Ke[1]*Ke[1])}function oi(Ke,et,ut){function j(H,Q){var ie,ue=et(H,Q),_e=ue.project([H*S,Q*S]);return(ie=ue.transform)?[ie[0]*_e[0]+ie[1]*_e[1]+ie[2],-(ie[3]*_e[0]+ie[4]*_e[1]+ie[5])]:(_e[1]=-_e[1],_e)}function Y(H,Q){var ie=H.project.invert,ue=H.transform,_e=Q;if(ue&&(ue=function(nt){var ft=1/(nt[0]*nt[4]-nt[1]*nt[3]);return[ft*nt[4],-ft*nt[1],ft*(nt[1]*nt[5]-nt[2]*nt[4]),-ft*nt[3],ft*nt[0],ft*(nt[2]*nt[3]-nt[0]*nt[5])]}(ue),_e=[ue[0]*_e[0]+ue[1]*_e[1]+ue[2],ue[3]*_e[0]+ue[4]*_e[1]+ue[5]]),ie&&H===function(nt){return et(nt[0]*k,nt[1]*k)}(Ie=ie(_e)))return Ie;for(var Ie,ze=H.children,He=0,Ye=ze&&ze.length;He<Ye;++He)if(Ie=Y(ze[He],Q))return Ie}(function H(Q,ie){if(Q.edges=function(Lt){for(var Bt=Lt.length,Ot=[],Jt=Lt[Bt-1],Yt=0;Yt<Bt;++Yt)Ot.push([Jt,Jt=Lt[Yt]]);return Ot}(Q.face),ie.face){var ue=Q.shared=function(Lt,Bt){for(var Ot,Jt,Yt=Lt.length,Vt=null,dn=0;dn<Yt;++dn){Ot=Lt[dn];for(var xn=Bt.length;--xn>=0;)if(Jt=Bt[xn],Ot[0]===Jt[0]&&Ot[1]===Jt[1]){if(Vt)return[Vt,Ot];Vt=Ot}}}(Q.face,ie.face),_e=(Ye=ue.map(ie.project),nt=ue.map(Q.project),ft=Ws(Ye[1],Ye[0]),gt=Ws(nt[1],nt[0]),Et=function(Lt,Bt){return w(Lt[0]*Bt[1]-Lt[1]*Bt[0],Lt[0]*Bt[0]+Lt[1]*Bt[1])}(ft,gt),It=pl(ft)/pl(gt),ys([1,0,Ye[0][0],0,1,Ye[0][1]],ys([It,0,0,0,It,0],ys([b(Et),u(Et),0,-u(Et),b(Et),0],[1,0,-nt[0][0],0,1,-nt[0][1]]))));Q.transform=ie.transform?ys(ie.transform,_e):_e;for(var Ie=ie.edges,ze=0,He=Ie.length;ze<He;++ze)oa(ue[0],Ie[ze][1])&&oa(ue[1],Ie[ze][0])&&(Ie[ze]=Q),oa(ue[0],Ie[ze][0])&&oa(ue[1],Ie[ze][1])&&(Ie[ze]=Q);for(ze=0,He=(Ie=Q.edges).length;ze<He;++ze)oa(ue[0],Ie[ze][0])&&oa(ue[1],Ie[ze][1])&&(Ie[ze]=ie),oa(ue[0],Ie[ze][1])&&oa(ue[1],Ie[ze][0])&&(Ie[ze]=ie)}else Q.transform=ie.transform;var Ye,nt,ft,gt,Et,It;return Q.children&&Q.children.forEach(function(Lt){H(Lt,Q)}),Q})(Ke,{transform:null}),ro(Ke)&&(j.invert=function(H,Q){var ie=Y(Ke,[H,-Q]);return ie&&(ie[0]*=k,ie[1]*=k,ie)});var G=(0,_.c)(j),D=G.stream;return G.stream=function(H){var Q=G.rotate(),ie=D(H),ue=(G.rotate([0,0]),D(H));return G.rotate(Q),ie.sphere=function(){ue.polygonStart(),ue.lineStart(),Xo(ue,Ke),ue.lineEnd(),ue.polygonEnd()},ie},G.angle(ut==null?-30:ut*S)}function Xo(Ke,et,ut){var j,Y,G=et.edges,D=G.length,H={type:"MultiPoint",coordinates:et.face},Q=et.face.filter(function(Ye){return T(Ye[1])!==90}),ie=(0,Cs.c)({type:"MultiPoint",coordinates:Q}),ue=!1,_e=-1,Ie=ie[1][0]-ie[0][0],ze=Ie===180||Ie===360?[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2]:(0,Ge.c)(H);if(ut)for(;++_e<D&&G[_e]!==ut;);++_e;for(var He=0;He<D;++He)Y=G[(He+_e)%D],Array.isArray(Y)?(ue||(Ke.point((j=(0,gs.c)(Y[0],ze)(f))[0],j[1]),ue=!0),Ke.point((j=(0,gs.c)(Y[1],ze)(f))[0],j[1])):(ue=!1,Y!==ut&&Xo(Ke,Y,et))}function oa(Ke,et){return Ke&&et&&Ke[0]===et[0]&&Ke[1]===et[1]}function ro(Ke){return Ke.project.invert||Ke.children&&Ke.children.some(ro)}var Kr=e(53285),ii=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ba=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ke){return Ke.map(function(et){return ii[et]})});function Ds(Ke){Ke=Ke||function(ut){var j=(0,Ge.c)({type:"MultiPoint",coordinates:ut});return(0,Kr.c)().scale(1).translate([0,0]).rotate([-j[0],-j[1]])};var et=Ba.map(function(ut){return{face:ut,project:Ke(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,j){var Y=et[ut];Y&&(Y.children||(Y.children=[])).push(et[j])}),oi(et[0],function(ut,j){return et[ut<-h/2?j<0?6:4:ut<0?j<0?2:0:ut<h/2?j<0?3:1:j<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ys=2/O(3);function dl(Ke,et){var ut=Dt(Ke,et);return[ut[0]*Ys,ut[1]]}function Zs(Ke){Ke=Ke||function(ut){var j=(0,Ge.c)({type:"MultiPoint",coordinates:ut});return(0,_.c)(dl).translate([0,0]).scale(1).rotate(j[1]>0?[-j[0],0]:[180-j[0],180])};var et=Ba.map(function(ut){return{face:ut,project:Ke(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,j){var Y=et[ut];Y&&(Y.children||(Y.children=[])).push(et[j])}),oi(et[0],function(ut,j){return et[ut<-h/2?j<0?6:4:ut<0?j<0?2:0:ut<h/2?j<0?3:1:j<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Xs(Ke){Ke=Ke||function(G){var D=G.length===6?(0,Ge.c)({type:"MultiPoint",coordinates:G}):G[0];return(0,Kr.c)().scale(1).translate([0,0]).rotate([-D[0],-D[1]])};var et=Ba.map(function(G){for(var D,H=G.map(Ko),Q=H.length,ie=H[Q-1],ue=[],_e=0;_e<Q;++_e)D=H[_e],ue.push(Jo([.9486832980505138*ie[0]+.31622776601683794*D[0],.9486832980505138*ie[1]+.31622776601683794*D[1],.9486832980505138*ie[2]+.31622776601683794*D[2]]),Jo([.9486832980505138*D[0]+.31622776601683794*ie[0],.9486832980505138*D[1]+.31622776601683794*ie[1],.9486832980505138*D[2]+.31622776601683794*ie[2]])),ie=D;return ue}),ut=[],j=[-1,0,0,1,0,1,4,5];et.forEach(function(G,D){for(var H,Q,ie=Ba[D],ue=ie.length,_e=ut[D]=[],Ie=0;Ie<ue;++Ie)et.push([ie[Ie],G[(2*Ie+2)%(2*ue)],G[(2*Ie+1)%(2*ue)]]),j.push(D),_e.push((H=Ko(G[(2*Ie+2)%(2*ue)]),Q=Ko(G[(2*Ie+1)%(2*ue)]),[H[1]*Q[2]-H[2]*Q[1],H[2]*Q[0]-H[0]*Q[2],H[0]*Q[1]-H[1]*Q[0]]))});var Y=et.map(function(G){return{project:Ke(G),face:G}});return j.forEach(function(G,D){var H=Y[G];H&&(H.children||(H.children=[])).push(Y[D])}),oi(Y[0],function(G,D){var H=b(D),Q=[H*b(G),H*u(G),u(D)],ie=G<-h/2?D<0?6:4:G<0?D<0?2:0:G<h/2?D<0?3:1:D<0?7:5,ue=ut[ie];return Y[Ha(ue[0],Q)<0?8+3*ie:Ha(ue[1],Q)<0?8+3*ie+1:Ha(ue[2],Q)<0?8+3*ie+2:ie]}).angle(-30).scale(110.625).center([0,45])}function Ha(Ke,et){for(var ut=0,j=Ke.length,Y=0;ut<j;++ut)Y+=Ke[ut]*et[ut];return Y}function Jo(Ke){return[w(Ke[1],Ke[0])*S,E(i(-1,n(1,Ke[2])))*S]}function Ko(Ke){var et=Ke[0]*k,ut=Ke[1]*k,j=b(ut);return[j*b(et),j*u(et),u(ut)]}function va(){}function Js(Ke,et){var ut,j=et.stream;if(!j)throw new Error("invalid projection");switch(Ke&&Ke.type){case"Feature":ut=Yi;break;case"FeatureCollection":ut=Ga;break;default:ut=$i}return ut(Ke,j)}function Ga(Ke,et){return{type:"FeatureCollection",features:Ke.features.map(function(ut){return Yi(ut,et)})}}function Yi(Ke,et){return{type:"Feature",id:Ke.id,properties:Ke.properties,geometry:$i(Ke.geometry,et)}}function $i(Ke,et){if(!Ke)return null;if(Ke.type==="GeometryCollection")return function(j,Y){return{type:"GeometryCollection",geometries:j.geometries.map(function(G){return $i(G,Y)})}}(Ke,et);var ut;switch(Ke.type){case"Point":case"MultiPoint":ut=wo;break;case"LineString":case"MultiLineString":ut=ms;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=io;break;default:return null}return(0,vn.c)(Ke,et(ut)),ut.result()}dl.invert=function(Ke,et){return Dt.invert(Ke/Ys,et)};var hi=[],Qi=[],wo={point:function(Ke,et){hi.push([Ke,et])},result:function(){var Ke=hi.length?hi.length<2?{type:"Point",coordinates:hi[0]}:{type:"MultiPoint",coordinates:hi}:null;return hi=[],Ke}},ms={lineStart:va,point:function(Ke,et){hi.push([Ke,et])},lineEnd:function(){hi.length&&(Qi.push(hi),hi=[])},result:function(){var Ke=Qi.length?Qi.length<2?{type:"LineString",coordinates:Qi[0]}:{type:"MultiLineString",coordinates:Qi}:null;return Qi=[],Ke}},io={polygonStart:va,lineStart:va,point:function(Ke,et){hi.push([Ke,et])},lineEnd:function(){var Ke=hi.length;if(Ke){do hi.push(hi[0].slice());while(++Ke<4);Qi.push(hi),hi=[]}},polygonEnd:va,result:function(){if(!Qi.length)return null;var Ke=[],et=[];return Qi.forEach(function(ut){(function(j){if((Y=j.length)<4)return!1;for(var Y,G=0,D=j[Y-1][1]*j[0][0]-j[Y-1][0]*j[0][1];++G<Y;)D+=j[G-1][1]*j[G][0]-j[G-1][0]*j[G][1];return D<=0})(ut)?Ke.push([ut]):et.push(ut)}),et.forEach(function(ut){var j=ut[0];Ke.some(function(Y){if(function(G,D){for(var H=D[0],Q=D[1],ie=!1,ue=0,_e=G.length,Ie=_e-1;ue<_e;Ie=ue++){var ze=G[ue],He=ze[0],Ye=ze[1],nt=G[Ie],ft=nt[0],gt=nt[1];Ye>Q^gt>Q&&H<(ft-He)*(Q-Ye)/(gt-Ye)+He&&(ie=!ie)}return ie}(Y[0],j))return Y.push(ut),!0})||Ke.push([ut])}),Qi=[],Ke.length?Ke.length>1?{type:"MultiPolygon",coordinates:Ke}:{type:"Polygon",coordinates:Ke[0]}:null}};function $o(Ke){var et=Ke(g,0)[0]-Ke(-g,0)[0];function ut(j,Y){var G=T(j)<g,D=Ke(G?j:j>0?j-h:j+h,Y),H=(D[0]-D[1])*x,Q=(D[0]+D[1])*x;if(G)return[H,Q];var ie=et*x,ue=H>0^Q>0?-1:1;return[ue*H-l(Q)*ie,ue*Q-l(H)*ie]}return Ke.invert&&(ut.invert=function(j,Y){var G=(j+Y)*x,D=(Y-j)*x,H=T(G)<.5*et&&T(D)<.5*et;if(!H){var Q=et*x,ie=G>0^D>0?-1:1,ue=-ie*j+(D>0?1:-1)*Q,_e=-ie*Y+(G>0?1:-1)*Q;G=(-ue-_e)*x,D=(ue-_e)*x}var Ie=Ke.invert(G,D);return H||(Ie[0]+=G>0?h:-h),Ie}),(0,_.c)(ut).rotate([-90,-90,45]).clipAngle(179.999)}function _a(){return $o(Un).scale(176.423)}function xs(){return $o(mn).scale(111.48)}function Po(Ke,et){if(!(0<=(et=+et)&&et<=20))throw new Error("invalid digits");function ut(ie){var ue=ie.length,_e=2,Ie=new Array(ue);for(Ie[0]=+ie[0].toFixed(et),Ie[1]=+ie[1].toFixed(et);_e<ue;)Ie[_e]=ie[_e],++_e;return Ie}function j(ie){return ie.map(ut)}function Y(ie){for(var ue=ut(ie[0]),_e=[ue],Ie=1;Ie<ie.length;Ie++){var ze=ut(ie[Ie]);(ze.length>2||ze[0]!=ue[0]||ze[1]!=ue[1])&&(_e.push(ze),ue=ze)}return _e.length===1&&ie.length>1&&_e.push(ut(ie[ie.length-1])),_e}function G(ie){return ie.map(Y)}function D(ie){if(ie==null)return ie;var ue;switch(ie.type){case"GeometryCollection":ue={type:"GeometryCollection",geometries:ie.geometries.map(D)};break;case"Point":ue={type:"Point",coordinates:ut(ie.coordinates)};break;case"MultiPoint":ue={type:ie.type,coordinates:j(ie.coordinates)};break;case"LineString":ue={type:ie.type,coordinates:Y(ie.coordinates)};break;case"MultiLineString":case"Polygon":ue={type:ie.type,coordinates:G(ie.coordinates)};break;case"MultiPolygon":ue={type:"MultiPolygon",coordinates:ie.coordinates.map(G)};break;default:return ie}return ie.bbox!=null&&(ue.bbox=ie.bbox),ue}function H(ie){var ue={type:"Feature",properties:ie.properties,geometry:D(ie.geometry)};return ie.id!=null&&(ue.id=ie.id),ie.bbox!=null&&(ue.bbox=ie.bbox),ue}if(Ke!=null)switch(Ke.type){case"Feature":return H(Ke);case"FeatureCollection":var Q={type:"FeatureCollection",features:Ke.features.map(H)};return Ke.bbox!=null&&(Q.bbox=Ke.bbox),Q;default:return D(Ke)}return Ke}function Wa(Ke){var et=u(Ke);function ut(j,Y){var G=et?p(j*et/2)/et:j/2;if(!Y)return[2*G,-Ke];var D=2*r(G*u(Y)),H=1/p(Y);return[u(D)*H,Y+(1-b(D))*H-Ke]}return ut.invert=function(j,Y){if(T(Y+=Ke)<f)return[et?2*r(et*j/2)/et:j,0];var G,D=j*j+Y*Y,H=0,Q=10;do{var ie=p(H),ue=1/b(H),_e=D-2*Y*H+H*H;H-=G=(ie*_e+2*(H-Y))/(2+_e*ue*ue+2*(H-Y)*ie)}while(T(G)>f&&--Q>0);var Ie=j*(ie=p(H)),ze=p(T(Y)<T(H+1/ie)?.5*E(Ie):.5*L(Ie)+h/4)/u(H);return[et?2*r(et*ze)/et:2*ze,H]},ut}function Ya(){return Ae(Wa).scale(131.215)}var pi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function ao(Ke,et){var ut,j=n(18,36*T(et)/h),Y=o(j),G=j-Y,D=(ut=pi[Y])[0],H=ut[1],Q=(ut=pi[++Y])[0],ie=ut[1],ue=(ut=pi[n(19,++Y)])[0],_e=ut[1];return[Ke*(Q+G*(ue-D)/2+G*G*(ue-2*Q+D)/2),(et>0?g:-g)*(ie+G*(_e-H)/2+G*G*(_e-2*ie+H)/2)]}function Sr(){return(0,_.c)(ao).scale(152.63)}function Ks(Ke,et){var ut=function(D){function H(Q,ie){var ue=b(ie),_e=(D-1)/(D-ue*b(Q));return[_e*ue*u(Q),_e*u(ie)]}return H.invert=function(Q,ie){var ue=Q*Q+ie*ie,_e=O(ue),Ie=(D-O(1-ue*(D+1)/(D-1)))/((D-1)/_e+_e/(D-1));return[w(Q*Ie,_e*O(1-Ie*Ie)),_e?E(ie*Ie/_e):0]},H}(Ke);if(!et)return ut;var j=b(et),Y=u(et);function G(D,H){var Q=ut(D,H),ie=Q[1],ue=ie*Y/(Ke-1)+j;return[Q[0]*j/ue,ie/ue]}return G.invert=function(D,H){var Q=(Ke-1)/(Ke-1-H*Y);return ut.invert(Q*D,Q*H*j)},G}function El(){var Ke=2,et=0,ut=(0,_.U)(Ks),j=ut(Ke,et);return j.distance=function(Y){return arguments.length?ut(Ke=+Y,et):Ke},j.tilt=function(Y){return arguments.length?ut(Ke,et=Y*k):et*S},j.scale(432.147).clipAngle(L(1/Ke)*S-1e-6)}pi.forEach(function(Ke){Ke[1]*=1.0144}),ao.invert=function(Ke,et){var ut=et/g,j=90*ut,Y=n(18,T(j/5)),G=i(0,o(Y));do{var D=pi[G][1],H=pi[G+1][1],Q=pi[n(19,G+2)][1],ie=Q-D,ue=Q-2*H+D,_e=2*(T(ut)-H)/ie,Ie=ue/ie,ze=_e*(1-Ie*_e*(1-2*Ie*_e));if(ze>=0||G===1){j=(et>=0?5:-5)*(ze+Y);var He,Ye=50;do ze=(Y=n(18,T(j)/5))-(G=o(Y)),D=pi[G][1],H=pi[G+1][1],Q=pi[n(19,G+2)][1],j-=(He=(et>=0?g:-g)*(H+ze*(Q-D)/2+ze*ze*(Q-2*H+D)/2)-et)*S;while(T(He)>m&&--Ye>0);break}}while(--G>=0);var nt=pi[G][0],ft=pi[G+1][0],gt=pi[n(19,G+2)][0];return[Ke/(ft+ze*(gt-nt)/2+ze*ze*(gt-2*ft+nt)/2),j*k]};var Qo=1e-4,es=1e4,bs=-180,Ls=bs+Qo,br=180,$s=br-Qo,Fo=-90,Zi=Fo+Qo,ts=90,oo=ts-Qo;function Za(Ke){return Ke.length>0}function ga(Ke){return Ke===Fo||Ke===ts?[0,Ke]:[bs,(et=Ke,Math.floor(et*es)/es)];var et}function To(Ke){var et=Ke[0],ut=Ke[1],j=!1;return et<=Ls?(et=bs,j=!0):et>=$s&&(et=br,j=!0),ut<=Zi?(ut=Fo,j=!0):ut>=oo&&(ut=ts,j=!0),j?[et,ut]:Ke}function Xa(Ke){return Ke.map(To)}function zo(Ke,et,ut){for(var j=0,Y=Ke.length;j<Y;++j){var G=Ke[j].slice();ut.push({index:-1,polygon:et,ring:G});for(var D=0,H=G.length;D<H;++D){var Q=G[D],ie=Q[0],ue=Q[1];if(ie<=Ls||ie>=$s||ue<=Zi||ue>=oo){G[D]=To(Q);for(var _e=D+1;_e<H;++_e){var Ie=G[_e],ze=Ie[0],He=Ie[1];if(ze>Ls&&ze<$s&&He>Zi&&He<oo)break}if(_e===D+1)continue;if(D){var Ye={index:-1,polygon:et,ring:G.slice(0,D+1)};Ye.ring[Ye.ring.length-1]=ga(ue),ut[ut.length-1]=Ye}else ut.pop();if(_e>=H)break;ut.push({index:-1,polygon:et,ring:G=G.slice(_e-1)}),G[0]=ga(G[0][1]),D=-1,H=G.length}}}}function Qs(Ke){var et,ut,j,Y,G,D,H=Ke.length,Q={},ie={};for(et=0;et<H;++et)j=(ut=Ke[et]).ring[0],G=ut.ring[ut.ring.length-1],j[0]!==G[0]||j[1]!==G[1]?(ut.index=et,Q[j]=ie[G]=ut):(ut.polygon.push(ut.ring),Ke[et]=null);for(et=0;et<H;++et)if(ut=Ke[et]){if(j=ut.ring[0],G=ut.ring[ut.ring.length-1],Y=ie[j],D=Q[G],delete Q[j],delete ie[G],j[0]===G[0]&&j[1]===G[1]){ut.polygon.push(ut.ring);continue}Y?(delete ie[j],delete Q[Y.ring[0]],Y.ring.pop(),Ke[Y.index]=null,ut={index:-1,polygon:Y.polygon,ring:Y.ring.concat(ut.ring)},Y===D?ut.polygon.push(ut.ring):(ut.index=H++,Ke.push(Q[ut.ring[0]]=ie[ut.ring[ut.ring.length-1]]=ut))):D?(delete Q[G],delete ie[D.ring[D.ring.length-1]],ut.ring.pop(),ut={index:H++,polygon:D.polygon,ring:ut.ring.concat(D.ring)},Ke[D.index]=null,Ke.push(Q[ut.ring[0]]=ie[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function ns(Ke){var et={type:"Feature",geometry:Xr(Ke.geometry)};return Ke.id!=null&&(et.id=Ke.id),Ke.bbox!=null&&(et.bbox=Ke.bbox),Ke.properties!=null&&(et.properties=Ke.properties),et}function Xr(Ke){if(Ke==null)return Ke;var et,ut,j,Y;switch(Ke.type){case"GeometryCollection":et={type:"GeometryCollection",geometries:Ke.geometries.map(Xr)};break;case"Point":et={type:"Point",coordinates:To(Ke.coordinates)};break;case"MultiPoint":case"LineString":et={type:Ke.type,coordinates:Xa(Ke.coordinates)};break;case"MultiLineString":et={type:"MultiLineString",coordinates:Ke.coordinates.map(Xa)};break;case"Polygon":var G=[];zo(Ke.coordinates,G,ut=[]),Qs(ut),et={type:"Polygon",coordinates:G};break;case"MultiPolygon":ut=[],j=-1,Y=Ke.coordinates.length;for(var D=new Array(Y);++j<Y;)zo(Ke.coordinates[j],D[j]=[],ut);Qs(ut),et={type:"MultiPolygon",coordinates:D.filter(Za)};break;default:return Ke}return Ke.bbox!=null&&(et.bbox=Ke.bbox),et}function ea(Ke){if(Ke==null)return Ke;switch(Ke.type){case"Feature":return ns(Ke);case"FeatureCollection":var et={type:"FeatureCollection",features:Ke.features.map(ns)};return Ke.bbox!=null&&(et.bbox=Ke.bbox),et;default:return Xr(Ke)}}function wa(Ke,et){var ut=p(et/2),j=u(v*ut);return[Ke*(.74482-.34588*j*j),1.70711*ut]}function Ao(){return(0,_.c)(wa).scale(146.153)}function Ta(Ke,et,ut){var j=(0,gs.c)(et,ut),Y=j(.5),G=(0,Je.c)([-Y[0],-Y[1]])(et),D=j.distance/2,H=-E(u(G[1]*k)/u(D)),Q=[-Y[0],-Y[1],-(G[0]>0?h-H:H)*S],ie=(0,_.c)(Ke(D)).rotate(Q),ue=(0,Je.c)(Q),_e=ie.center;return delete ie.rotate,ie.center=function(Ie){return arguments.length?_e(ue(Ie)):ue.invert(_e())},ie.clipAngle(90)}function Is(Ke){var et=b(Ke);function ut(j,Y){var G=(0,Kr.Y)(j,Y);return G[0]*=et,G}return ut.invert=function(j,Y){return Kr.Y.invert(j/et,Y)},ut}function Os(){return Aa([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Aa(Ke,et){return Ta(Is,Ke,et)}function Yr(Ke){if(!(Ke*=2))return Z.O;var et=-Ke/2,ut=-et,j=Ke*Ke,Y=p(ut),G=.5/u(ut);function D(H,Q){var ie=L(b(Q)*b(H-et)),ue=L(b(Q)*b(H-ut));return[((ie*=ie)-(ue*=ue))/(2*Ke),(Q<0?-1:1)*O(4*j*ue-(j-ie+ue)*(j-ie+ue))/(2*Ke)]}return D.invert=function(H,Q){var ie,ue,_e=Q*Q,Ie=b(O(_e+(ie=H+et)*ie)),ze=b(O(_e+(ie=H+ut)*ie));return[w(ue=Ie-ze,ie=(Ie+ze)*Y),(Q<0?-1:1)*L(O(ie*ie+ue*ue)*G)]},D}function ko(){return _s([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function _s(Ke,et){return Ta(Yr,Ke,et)}function so(Ke,et){if(T(et)<f)return[Ke,0];var ut=T(et/g),j=E(ut);if(T(Ke)<f||T(T(et)-g)<f)return[0,l(et)*h*p(j/2)];var Y=b(j),G=T(h/Ke-Ke/h)/2,D=G*G,H=Y/(ut+Y-1),Q=H*(2/ut-1),ie=Q*Q,ue=ie+D,_e=H-ie,Ie=D+H;return[l(Ke)*h*(G*_e+O(D*_e*_e-ue*(H*H-ie)))/ue,l(et)*h*(Q*Ie-G*O((D+1)*ue-Ie*Ie))/ue]}function Ps(){return(0,_.c)(so).scale(79.4183)}function Fs(Ke,et){if(T(et)<f)return[Ke,0];var ut=T(et/g),j=E(ut);if(T(Ke)<f||T(T(et)-g)<f)return[0,l(et)*h*p(j/2)];var Y=b(j),G=T(h/Ke-Ke/h)/2,D=G*G,H=Y*(O(1+D)-G*Y)/(1+D*ut*ut);return[l(Ke)*h*H,l(et)*h*O(1-H*(2*G+H))]}function lo(){return(0,_.c)(Fs).scale(79.4183)}function di(Ke,et){if(T(et)<f)return[Ke,0];var ut=et/g,j=E(ut);if(T(Ke)<f||T(T(et)-g)<f)return[0,h*p(j/2)];var Y=(h/Ke-Ke/h)/2,G=ut/(1+b(j));return[h*(l(Ke)*O(Y*Y+1-G*G)-Y),h*G]}function ws(){return(0,_.c)(di).scale(79.4183)}function Cr(Ke,et){if(!et)return[Ke,0];var ut=T(et);if(!Ke||ut===g)return[0,et];var j=ut/g,Y=j*j,G=(8*j-Y*(Y+2)-5)/(2*Y*(j-1)),D=G*G,H=j*G,Q=Y+D+2*H,ie=j+3*G,ue=Ke/g,_e=ue+1/ue,Ie=l(T(Ke)-g)*O(_e*_e-4),ze=Ie*Ie,He=(Ie*(Q+D-1)+2*O(Q*(Y+D*ze-1)+(1-Y)*(Y*(ie*ie+4*D)+12*H*D+4*D*D)))/(4*Q+ze);return[l(Ke)*g*He,l(et)*g*O(1+Ie*T(He)-He*He)]}function Fr(){return(0,_.c)(Cr).scale(127.16)}function Na(Ke,et,ut,j){var Y=h/3;Ke=i(Ke,f),et=i(et,f),Ke=n(Ke,g),et=n(et,h-f),ut=i(ut,0),ut=n(ut,100-f);var G=(j=i(j,f))/100,D=L((ut/100+1)*b(Y))/Y,H=u(Ke)/u(D*g),Q=et/h,ie=O(G*u(Ke/2)/u(et/2));return function(ue,_e,Ie,ze,He){function Ye(nt,ft){var gt=Ie*u(ze*ft),Et=O(1-gt*gt),It=O(2/(1+Et*b(nt*=He)));return[ue*Et*It*u(nt),_e*gt*It]}return Ye.invert=function(nt,ft){var gt=nt/ue,Et=ft/_e,It=O(gt*gt+Et*Et),Lt=2*E(It/2);return[w(nt*p(Lt),ue*It)/He,It&&E(ft*u(Lt)/(_e*Ie*It))/ze]},Ye}(ie/O(Q*H*D),1/(ie*O(Q*H*D)),H,D,Q)}function Mo(){var Ke=65*k,et=60*k,ut=20,j=200,Y=(0,_.U)(Na),G=Y(Ke,et,ut,j);return G.poleline=function(D){return arguments.length?Y(Ke=+D*k,et,ut,j):Ke*S},G.parallels=function(D){return arguments.length?Y(Ke,et=+D*k,ut,j):et*S},G.inflation=function(D){return arguments.length?Y(Ke,et,ut=+D,j):ut},G.ratio=function(D){return arguments.length?Y(Ke,et,ut,j=+D):j},G.scale(163.775)}function Ro(){return Mo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}wa.invert=function(Ke,et){var ut=et/1.70711,j=u(v*ut);return[Ke/(.74482-.34588*j*j),2*r(ut)]},so.invert=function(Ke,et){if(T(et)<f)return[Ke,0];if(T(Ke)<f)return[0,g*u(2*r(et/h))];var ut=(Ke/=h)*Ke,j=(et/=h)*et,Y=ut+j,G=Y*Y,D=-T(et)*(1+Y),H=D-2*j+ut,Q=-2*D+1+2*j+G,ie=j/Q+(2*H*H*H/(Q*Q*Q)-9*D*H/(Q*Q))/27,ue=(D-H*H/(3*Q))/Q,_e=2*O(-ue/3),Ie=L(3*ie/(ue*_e))/3;return[h*(Y-1+O(1+2*(ut-j)+G))/(2*Ke),l(et)*h*(-_e*b(Ie+h/3)-H/(3*Q))]},Fs.invert=function(Ke,et){if(!Ke)return[0,g*u(2*r(et/h))];var ut=T(Ke/h),j=(1-ut*ut-(et/=h)*et)/(2*ut),Y=O(j*j+1);return[l(Ke)*h*(Y-j),l(et)*g*u(2*w(O((1-2*j*ut)*(j+Y)-ut),O(Y+j+ut)))]},di.invert=function(Ke,et){if(!et)return[Ke,0];var ut=et/h,j=(h*h*(1-ut*ut)-Ke*Ke)/(2*h*Ke);return[Ke?h*(l(Ke)*O(j*j+1)-j):0,g*u(2*r(ut))]},Cr.invert=function(Ke,et){var ut;if(!Ke||!et)return[Ke,et];et/=h;var j=l(Ke)*Ke/g,Y=(j*j-1+4*et*et)/T(j),G=Y*Y,D=2*et,H=50;do{var Q=D*D,ie=(8*D-Q*(Q+2)-5)/(2*Q*(D-1)),ue=(3*D-Q*D-10)/(2*Q*D),_e=ie*ie,Ie=D*ie,ze=D+ie,He=ze*ze,Ye=D+3*ie,nt=-2*ze*(4*Ie*_e+(1-4*Q+3*Q*Q)*(1+ue)+_e*(14*Q-6-G+(8*Q-8-2*G)*ue)+Ie*(12*Q-8+(10*Q-10-G)*ue)),ft=O(He*(Q+_e*G-1)+(1-Q)*(Q*(Ye*Ye+4*_e)+_e*(12*Ie+4*_e)));D-=ut=(Y*(He+_e-1)+2*ft-j*(4*He+G))/(Y*(2*ie*ue+2*ze*(1+ue))+nt/ft-8*ze*(Y*(-1+_e+He)+2*ft)*(1+ue)/(G+4*He))}while(ut>f&&--H>0);return[l(Ke)*(O(Y*Y+4)+Y)*h/4,g*D]};var zi=4*h+3*O(3),So=2*O(2*h*O(3)/zi),si=de(So*O(3)/h,So,zi/6);function Vl(){return(0,_.c)(si).scale(176.84)}function ja(Ke,et){return[Ke*O(1-3*et*et/(h*h)),et]}function ci(){return(0,_.c)(ja).scale(152.63)}function xi(Ke,et){var ut=b(et),j=b(Ke)*ut,Y=1-j,G=b(Ke=w(u(Ke)*ut,-u(et))),D=u(Ke);return[D*(ut=O(1-j*j))-G*Y,-G*ut-D*Y]}function La(){return(0,_.c)(xi).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function rs(Ke,et){var ut=N(Ke,et);return[(ut[0]+Ke/g)/2,(ut[1]+et)/2]}function Cl(){return(0,_.c)(rs).scale(158.837)}ja.invert=function(Ke,et){return[Ke/O(1-3*et*et/(h*h)),et]},xi.invert=function(Ke,et){var ut=(Ke*Ke+et*et)/-2,j=O(-ut*(2+ut)),Y=et*ut+Ke*j,G=Ke*ut-et*j,D=O(G*G+Y*Y);return[w(j*Y,D*(1+ut)),D?-E(j*G/D):0]},rs.invert=function(Ke,et){var ut=Ke,j=et,Y=25;do{var G,D=b(j),H=u(j),Q=u(2*j),ie=H*H,ue=D*D,_e=u(ut),Ie=b(ut/2),ze=u(ut/2),He=ze*ze,Ye=1-ue*Ie*Ie,nt=Ye?L(D*Ie)*O(G=1/Ye):G=0,ft=.5*(2*nt*D*ze+ut/g)-Ke,gt=.5*(nt*H+j)-et,Et=.5*G*(ue*He+nt*D*Ie*ie)+.5/g,It=G*(_e*Q/4-nt*H*ze),Lt=.125*G*(Q*ze-nt*H*ue*_e),Bt=.5*G*(ie*Ie+nt*He*D)+.5,Ot=It*Lt-Bt*Et,Jt=(gt*It-ft*Bt)/Ot,Yt=(ft*Lt-gt*Et)/Ot;ut-=Jt,j-=Yt}while((T(Jt)>f||T(Yt)>f)&&--Y>0);return[ut,j]}},88728:function(R,C,e){"use strict";function _(){return new T}function T(){this.reset()}e.d(C,{c:function(){return _}}),T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(b){w(r,b,this.t),w(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new T;function w(b,c,o){var t=b.s=c+o,i=t-c,n=t-i;b.t=c-n+(o-i)}},95384:function(R,C,e){"use strict";e.d(C,{cp:function(){return m},mQ:function(){return n},oB:function(){return s}});var _,T,r,w,b,c=e(88728),o=e(64528),t=e(70932),i=e(16016),n=(0,c.c)(),a=(0,c.c)(),s={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){n.reset(),s.lineStart=l,s.lineEnd=u},polygonEnd:function(){var h=+n;a.add(h<0?o.kD+h:h),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){a.add(o.kD)}};function l(){s.point=p}function u(){f(_,T)}function p(h,g){s.point=f,_=h,T=g,h*=o.qw,g*=o.qw,r=h,w=(0,o.W8)(g=g/2+o.wL),b=(0,o.g$)(g)}function f(h,g){h*=o.qw,g=(g*=o.qw)/2+o.wL;var v=h-r,x=v>=0?1:-1,y=x*v,A=(0,o.W8)(g),d=(0,o.g$)(g),S=b*d,k=w*A+S*(0,o.W8)(y),E=S*x*(0,o.g$)(y);n.add((0,o.WE)(E,k)),r=h,w=A,b=d}function m(h){return a.reset(),(0,i.c)(h,s),2*a}},13696:function(R,C,e){"use strict";e.d(C,{c:function(){return L}});var _,T,r,w,b,c,o,t,i,n,a=e(88728),s=e(95384),l=e(84220),u=e(64528),p=e(16016),f=(0,a.c)(),m={point:h,lineStart:v,lineEnd:x,polygonStart:function(){m.point=y,m.lineStart=A,m.lineEnd=d,f.reset(),s.oB.polygonStart()},polygonEnd:function(){s.oB.polygonEnd(),m.point=h,m.lineStart=v,m.lineEnd=x,s.mQ<0?(_=-(r=180),T=-(w=90)):f>u.Gg?w=90:f<-u.Gg&&(T=-90),n[0]=_,n[1]=r},sphere:function(){_=-(r=180),T=-(w=90)}};function h(O,P){i.push(n=[_=O,r=O]),P<T&&(T=P),P>w&&(w=P)}function g(O,P){var F=(0,l.ux)([O*u.qw,P*u.qw]);if(t){var U=(0,l.CW)(t,F),I=[U[1],-U[0],0],N=(0,l.CW)(I,U);(0,l.cJ)(N),N=(0,l.G)(N);var W,B=O-b,V=B>0?1:-1,q=N[0]*u.oh*V,ne=(0,u.a2)(B)>180;ne^(V*b<q&&q<V*O)?(W=N[1]*u.oh)>w&&(w=W):ne^(V*b<(q=(q+360)%360-180)&&q<V*O)?(W=-N[1]*u.oh)<T&&(T=W):(P<T&&(T=P),P>w&&(w=P)),ne?O<b?S(_,O)>S(_,r)&&(r=O):S(O,r)>S(_,r)&&(_=O):r>=_?(O<_&&(_=O),O>r&&(r=O)):O>b?S(_,O)>S(_,r)&&(r=O):S(O,r)>S(_,r)&&(_=O)}else i.push(n=[_=O,r=O]);P<T&&(T=P),P>w&&(w=P),t=F,b=O}function v(){m.point=g}function x(){n[0]=_,n[1]=r,m.point=h,t=null}function y(O,P){if(t){var F=O-b;f.add((0,u.a2)(F)>180?F+(F>0?360:-360):F)}else c=O,o=P;s.oB.point(O,P),g(O,P)}function A(){s.oB.lineStart()}function d(){y(c,o),s.oB.lineEnd(),(0,u.a2)(f)>u.Gg&&(_=-(r=180)),n[0]=_,n[1]=r,t=null}function S(O,P){return(P-=O)<0?P+360:P}function k(O,P){return O[0]-P[0]}function E(O,P){return O[0]<=O[1]?O[0]<=P&&P<=O[1]:P<O[0]||O[1]<P}function L(O){var P,F,U,I,N,W,B;if(w=r=-(_=T=1/0),i=[],(0,p.c)(O,m),F=i.length){for(i.sort(k),P=1,N=[U=i[0]];P<F;++P)E(U,(I=i[P])[0])||E(U,I[1])?(S(U[0],I[1])>S(U[0],U[1])&&(U[1]=I[1]),S(I[0],U[1])>S(U[0],U[1])&&(U[0]=I[0])):N.push(U=I);for(W=-1/0,P=0,U=N[F=N.length-1];P<=F;U=I,++P)I=N[P],(B=S(U[1],I[0]))>W&&(W=B,_=I[0],r=U[1])}return i=n=null,_===1/0||T===1/0?[[NaN,NaN],[NaN,NaN]]:[[_,T],[r,w]]}},84220:function(R,C,e){"use strict";e.d(C,{CW:function(){return b},Ez:function(){return w},G:function(){return T},cJ:function(){return t},mg:function(){return c},ux:function(){return r},wx:function(){return o}});var _=e(64528);function T(i){return[(0,_.WE)(i[1],i[0]),(0,_.qR)(i[2])]}function r(i){var n=i[0],a=i[1],s=(0,_.W8)(a);return[s*(0,_.W8)(n),s*(0,_.g$)(n),(0,_.g$)(a)]}function w(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function b(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]}function c(i,n){i[0]+=n[0],i[1]+=n[1],i[2]+=n[2]}function o(i,n){return[i[0]*n,i[1]*n,i[2]*n]}function t(i){var n=(0,_._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=n,i[1]/=n,i[2]/=n}},24052:function(R,C,e){"use strict";e.d(C,{c:function(){return F}});var _,T,r,w,b,c,o,t,i,n,a,s,l,u,p,f,m=e(64528),h=e(70932),g=e(16016),v={sphere:h.c,point:x,lineStart:A,lineEnd:k,polygonStart:function(){v.lineStart=E,v.lineEnd=L},polygonEnd:function(){v.lineStart=A,v.lineEnd=k}};function x(U,I){U*=m.qw,I*=m.qw;var N=(0,m.W8)(I);y(N*(0,m.W8)(U),N*(0,m.g$)(U),(0,m.g$)(I))}function y(U,I,N){++_,r+=(U-r)/_,w+=(I-w)/_,b+=(N-b)/_}function A(){v.point=d}function d(U,I){U*=m.qw,I*=m.qw;var N=(0,m.W8)(I);u=N*(0,m.W8)(U),p=N*(0,m.g$)(U),f=(0,m.g$)(I),v.point=S,y(u,p,f)}function S(U,I){U*=m.qw,I*=m.qw;var N=(0,m.W8)(I),W=N*(0,m.W8)(U),B=N*(0,m.g$)(U),V=(0,m.g$)(I),q=(0,m.WE)((0,m._I)((q=p*V-f*B)*q+(q=f*W-u*V)*q+(q=u*B-p*W)*q),u*W+p*B+f*V);T+=q,c+=q*(u+(u=W)),o+=q*(p+(p=B)),t+=q*(f+(f=V)),y(u,p,f)}function k(){v.point=x}function E(){v.point=O}function L(){P(s,l),v.point=x}function O(U,I){s=U,l=I,U*=m.qw,I*=m.qw,v.point=P;var N=(0,m.W8)(I);u=N*(0,m.W8)(U),p=N*(0,m.g$)(U),f=(0,m.g$)(I),y(u,p,f)}function P(U,I){U*=m.qw,I*=m.qw;var N=(0,m.W8)(I),W=N*(0,m.W8)(U),B=N*(0,m.g$)(U),V=(0,m.g$)(I),q=p*V-f*B,ne=f*W-u*V,$=u*B-p*W,K=(0,m._I)(q*q+ne*ne+$*$),ee=(0,m.qR)(K),J=K&&-ee/K;i+=J*q,n+=J*ne,a+=J*$,T+=ee,c+=ee*(u+(u=W)),o+=ee*(p+(p=B)),t+=ee*(f+(f=V)),y(u,p,f)}function F(U){_=T=r=w=b=c=o=t=i=n=a=0,(0,g.c)(U,v);var I=i,N=n,W=a,B=I*I+N*N+W*W;return B<m.a8&&(I=c,N=o,W=t,T<m.Gg&&(I=r,N=w,W=b),(B=I*I+N*N+W*W)<m.a8)?[NaN,NaN]:[(0,m.WE)(N,I)*m.oh,(0,m.qR)(W/(0,m._I)(B))*m.oh]}},61780:function(R,C,e){"use strict";e.d(C,{Q:function(){return b},c:function(){return o}});var _=e(84220);function T(t){return function(){return t}}var r=e(64528),w=e(92992);function b(t,i,n,a,s,l){if(n){var u=(0,r.W8)(i),p=(0,r.g$)(i),f=a*n;s==null?(s=i+a*r.kD,l=i-f/2):(s=c(u,s),l=c(u,l),(a>0?s<l:s>l)&&(s+=a*r.kD));for(var m,h=s;a>0?h>l:h<l;h-=f)m=(0,_.G)([u,-p*(0,r.W8)(h),-p*(0,r.g$)(h)]),t.point(m[0],m[1])}}function c(t,i){(i=(0,_.ux)(i))[0]-=t,(0,_.cJ)(i);var n=(0,r.mE)(-i[1]);return((-i[2]<0?-n:n)+r.kD-r.Gg)%r.kD}function o(){var t,i,n=T([0,0]),a=T(90),s=T(6),l={point:function(p,f){t.push(p=i(p,f)),p[0]*=r.oh,p[1]*=r.oh}};function u(){var p=n.apply(this,arguments),f=a.apply(this,arguments)*r.qw,m=s.apply(this,arguments)*r.qw;return t=[],i=(0,w.O)(-p[0]*r.qw,-p[1]*r.qw,0).invert,b(l,f,m,1),p={type:"Polygon",coordinates:[t]},t=i=null,p}return u.center=function(p){return arguments.length?(n=typeof p=="function"?p:T([+p[0],+p[1]]),u):n},u.radius=function(p){return arguments.length?(a=typeof p=="function"?p:T(+p),u):a},u.precision=function(p){return arguments.length?(s=typeof p=="function"?p:T(+p),u):s},u}},78284:function(R,C,e){"use strict";var _=e(14229),T=e(64528);C.c=(0,_.c)(function(){return!0},function(r){var w,b=NaN,c=NaN,o=NaN;return{lineStart:function(){r.lineStart(),w=1},point:function(t,i){var n=t>0?T.pi:-T.pi,a=(0,T.a2)(t-b);(0,T.a2)(a-T.pi)<T.Gg?(r.point(b,c=(c+i)/2>0?T.or:-T.or),r.point(o,c),r.lineEnd(),r.lineStart(),r.point(n,c),r.point(t,c),w=0):o!==n&&a>=T.pi&&((0,T.a2)(b-o)<T.Gg&&(b-=o*T.Gg),(0,T.a2)(t-n)<T.Gg&&(t-=n*T.Gg),c=function(s,l,u,p){var f,m,h=(0,T.g$)(s-u);return(0,T.a2)(h)>T.Gg?(0,T.MQ)(((0,T.g$)(l)*(m=(0,T.W8)(p))*(0,T.g$)(u)-(0,T.g$)(p)*(f=(0,T.W8)(l))*(0,T.g$)(s))/(f*m*h)):(l+p)/2}(b,c,t,i),r.point(o,c),r.lineEnd(),r.lineStart(),r.point(n,c),w=0),r.point(b=t,c=i),o=n},lineEnd:function(){r.lineEnd(),b=c=NaN},clean:function(){return 2-w}}},function(r,w,b,c){var o;if(r==null)o=b*T.or,c.point(-T.pi,o),c.point(0,o),c.point(T.pi,o),c.point(T.pi,0),c.point(T.pi,-o),c.point(0,-o),c.point(-T.pi,-o),c.point(-T.pi,0),c.point(-T.pi,o);else if((0,T.a2)(r[0]-w[0])>T.Gg){var t=r[0]<w[0]?T.pi:-T.pi;o=b*t/2,c.point(-t,o),c.point(0,o),c.point(t,o)}else c.point(w[0],w[1])},[-T.pi,-T.or])},97208:function(R,C,e){"use strict";e.d(C,{c:function(){return T}});var _=e(70932);function T(){var r,w=[];return{point:function(b,c,o){r.push([b,c,o])},lineStart:function(){w.push(r=[])},lineEnd:_.c,rejoin:function(){w.length>1&&w.push(w.pop().concat(w.shift()))},result:function(){var b=w;return w=[],r=null,b}}}},2728:function(R,C,e){"use strict";e.d(C,{c:function(){return c}});var _=e(84220),T=e(61780),r=e(64528),w=e(41860),b=e(14229);function c(o){var t=(0,r.W8)(o),i=6*r.qw,n=t>0,a=(0,r.a2)(t)>r.Gg;function s(p,f){return(0,r.W8)(p)*(0,r.W8)(f)>t}function l(p,f,m){var h=(0,_.ux)(p),g=(0,_.ux)(f),v=[1,0,0],x=(0,_.CW)(h,g),y=(0,_.Ez)(x,x),A=x[0],d=y-A*A;if(!d)return!m&&p;var S=t*y/d,k=-t*A/d,E=(0,_.CW)(v,x),L=(0,_.wx)(v,S),O=(0,_.wx)(x,k);(0,_.mg)(L,O);var P=E,F=(0,_.Ez)(L,P),U=(0,_.Ez)(P,P),I=F*F-U*((0,_.Ez)(L,L)-1);if(!(I<0)){var N=(0,r._I)(I),W=(0,_.wx)(P,(-F-N)/U);if((0,_.mg)(W,L),W=(0,_.G)(W),!m)return W;var B,V=p[0],q=f[0],ne=p[1],$=f[1];q<V&&(B=V,V=q,q=B);var K=q-V,ee=(0,r.a2)(K-r.pi)<r.Gg;if(!ee&&$<ne&&(B=ne,ne=$,$=B),ee||K<r.Gg?ee?ne+$>0^W[1]<((0,r.a2)(W[0]-V)<r.Gg?ne:$):ne<=W[1]&&W[1]<=$:K>r.pi^(V<=W[0]&&W[0]<=q)){var J=(0,_.wx)(P,(-F+N)/U);return(0,_.mg)(J,L),[W,(0,_.G)(J)]}}}function u(p,f){var m=n?o:r.pi-o,h=0;return p<-m?h|=1:p>m&&(h|=2),f<-m?h|=4:f>m&&(h|=8),h}return(0,b.c)(s,function(p){var f,m,h,g,v;return{lineStart:function(){g=h=!1,v=1},point:function(x,y){var A,d=[x,y],S=s(x,y),k=n?S?0:u(x,y):S?u(x+(x<0?r.pi:-r.pi),y):0;if(!f&&(g=h=S)&&p.lineStart(),S!==h&&(!(A=l(f,d))||(0,w.c)(f,A)||(0,w.c)(d,A))&&(d[2]=1),S!==h)v=0,S?(p.lineStart(),A=l(d,f),p.point(A[0],A[1])):(A=l(f,d),p.point(A[0],A[1],2),p.lineEnd()),f=A;else if(a&&f&&n^S){var E;k&m||!(E=l(d,f,!0))||(v=0,n?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!S||f&&(0,w.c)(f,d)||p.point(d[0],d[1]),f=d,h=S,m=k},lineEnd:function(){h&&p.lineEnd(),f=null},clean:function(){return v|(g&&h)<<1}}},function(p,f,m,h){(0,T.Q)(h,o,i,m,p,f)},n?[0,-o]:[-r.pi,o-r.pi])}},14229:function(R,C,e){"use strict";e.d(C,{c:function(){return c}});var _=e(97208),T=e(32232),r=e(64528),w=e(58196),b=e(84706);function c(i,n,a,s){return function(l){var u,p,f,m=n(l),h=(0,_.c)(),g=n(h),v=!1,x={point:y,lineStart:d,lineEnd:S,polygonStart:function(){x.point=k,x.lineStart=E,x.lineEnd=L,p=[],u=[]},polygonEnd:function(){x.point=y,x.lineStart=d,x.lineEnd=S,p=(0,b.Uf)(p);var O=(0,w.c)(u,s);p.length?(v||(l.polygonStart(),v=!0),(0,T.c)(p,t,O,a,l)):O&&(v||(l.polygonStart(),v=!0),l.lineStart(),a(null,null,1,l),l.lineEnd()),v&&(l.polygonEnd(),v=!1),p=u=null},sphere:function(){l.polygonStart(),l.lineStart(),a(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function y(O,P){i(O,P)&&l.point(O,P)}function A(O,P){m.point(O,P)}function d(){x.point=A,m.lineStart()}function S(){x.point=y,m.lineEnd()}function k(O,P){f.push([O,P]),g.point(O,P)}function E(){g.lineStart(),f=[]}function L(){k(f[0][0],f[0][1]),g.lineEnd();var O,P,F,U,I=g.clean(),N=h.result(),W=N.length;if(f.pop(),u.push(f),f=null,W)if(1&I){if((P=(F=N[0]).length-1)>0){for(v||(l.polygonStart(),v=!0),l.lineStart(),O=0;O<P;++O)l.point((U=F[O])[0],U[1]);l.lineEnd()}}else W>1&&2&I&&N.push(N.pop().concat(N.shift())),p.push(N.filter(o))}return x}}function o(i){return i.length>1}function t(i,n){return((i=i.x)[0]<0?i[1]-r.or-r.Gg:r.or-i[1])-((n=n.x)[0]<0?n[1]-r.or-r.Gg:r.or-n[1])}},21676:function(R,C,e){"use strict";e.d(C,{c:function(){return o}});var _=e(64528),T=e(97208),r=e(32232),w=e(84706),b=1e9,c=-b;function o(t,i,n,a){function s(m,h){return t<=m&&m<=n&&i<=h&&h<=a}function l(m,h,g,v){var x=0,y=0;if(m==null||(x=u(m,g))!==(y=u(h,g))||f(m,h)<0^g>0)do v.point(x===0||x===3?t:n,x>1?a:i);while((x=(x+g+4)%4)!==y);else v.point(h[0],h[1])}function u(m,h){return(0,_.a2)(m[0]-t)<_.Gg?h>0?0:3:(0,_.a2)(m[0]-n)<_.Gg?h>0?2:1:(0,_.a2)(m[1]-i)<_.Gg?h>0?1:0:h>0?3:2}function p(m,h){return f(m.x,h.x)}function f(m,h){var g=u(m,1),v=u(h,1);return g!==v?g-v:g===0?h[1]-m[1]:g===1?m[0]-h[0]:g===2?m[1]-h[1]:h[0]-m[0]}return function(m){var h,g,v,x,y,A,d,S,k,E,L,O=m,P=(0,T.c)(),F={point:U,lineStart:function(){F.point=I,g&&g.push(v=[]),E=!0,k=!1,d=S=NaN},lineEnd:function(){h&&(I(x,y),A&&k&&P.rejoin(),h.push(P.result())),F.point=U,k&&O.lineEnd()},polygonStart:function(){O=P,h=[],g=[],L=!0},polygonEnd:function(){var N=function(){for(var V=0,q=0,ne=g.length;q<ne;++q)for(var $,K,ee=g[q],J=1,Z=ee.length,te=ee[0],oe=te[0],se=te[1];J<Z;++J)$=oe,K=se,oe=(te=ee[J])[0],se=te[1],K<=a?se>a&&(oe-$)*(a-K)>(se-K)*(t-$)&&++V:se<=a&&(oe-$)*(a-K)<(se-K)*(t-$)&&--V;return V}(),W=L&&N,B=(h=(0,w.Uf)(h)).length;(W||B)&&(m.polygonStart(),W&&(m.lineStart(),l(null,null,1,m),m.lineEnd()),B&&(0,r.c)(h,p,N,l,m),m.polygonEnd()),O=m,h=g=v=null}};function U(N,W){s(N,W)&&O.point(N,W)}function I(N,W){var B=s(N,W);if(g&&v.push([N,W]),E)x=N,y=W,A=B,E=!1,B&&(O.lineStart(),O.point(N,W));else if(B&&k)O.point(N,W);else{var V=[d=Math.max(c,Math.min(b,d)),S=Math.max(c,Math.min(b,S))],q=[N=Math.max(c,Math.min(b,N)),W=Math.max(c,Math.min(b,W))];(function(ne,$,K,ee,J,Z){var te,oe=ne[0],se=ne[1],ce=0,ye=1,me=$[0]-oe,fe=$[1]-se;if(te=K-oe,me||!(te>0)){if(te/=me,me<0){if(te<ce)return;te<ye&&(ye=te)}else if(me>0){if(te>ye)return;te>ce&&(ce=te)}if(te=J-oe,me||!(te<0)){if(te/=me,me<0){if(te>ye)return;te>ce&&(ce=te)}else if(me>0){if(te<ce)return;te<ye&&(ye=te)}if(te=ee-se,fe||!(te>0)){if(te/=fe,fe<0){if(te<ce)return;te<ye&&(ye=te)}else if(fe>0){if(te>ye)return;te>ce&&(ce=te)}if(te=Z-se,fe||!(te<0)){if(te/=fe,fe<0){if(te>ye)return;te>ce&&(ce=te)}else if(fe>0){if(te<ce)return;te<ye&&(ye=te)}return ce>0&&(ne[0]=oe+ce*me,ne[1]=se+ce*fe),ye<1&&($[0]=oe+ye*me,$[1]=se+ye*fe),!0}}}}})(V,q,t,i,n,a)?(k||(O.lineStart(),O.point(V[0],V[1])),O.point(q[0],q[1]),B||O.lineEnd(),L=!1):B&&(O.lineStart(),O.point(N,W),L=!1)}d=N,S=W,k=B}return F}}},32232:function(R,C,e){"use strict";e.d(C,{c:function(){return w}});var _=e(41860),T=e(64528);function r(c,o,t,i){this.x=c,this.z=o,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function w(c,o,t,i,n){var a,s,l=[],u=[];if(c.forEach(function(v){if(!((x=v.length-1)<=0)){var x,y,A=v[0],d=v[x];if((0,_.c)(A,d)){if(!A[2]&&!d[2]){for(n.lineStart(),a=0;a<x;++a)n.point((A=v[a])[0],A[1]);return void n.lineEnd()}d[0]+=2*T.Gg}l.push(y=new r(A,v,null,!0)),u.push(y.o=new r(A,null,y,!1)),l.push(y=new r(d,v,null,!1)),u.push(y.o=new r(d,null,y,!0))}}),l.length){for(u.sort(o),b(l),b(u),a=0,s=u.length;a<s;++a)u[a].e=t=!t;for(var p,f,m=l[0];;){for(var h=m,g=!0;h.v;)if((h=h.n)===m)return;p=h.z,n.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(a=0,s=p.length;a<s;++a)n.point((f=p[a])[0],f[1]);else i(h.x,h.n.x,1,n);h=h.n}else{if(g)for(p=h.p.z,a=p.length-1;a>=0;--a)n.point((f=p[a])[0],f[1]);else i(h.x,h.p.x,-1,n);h=h.p}p=(h=h.o).z,g=!g}while(!h.v);n.lineEnd()}}}function b(c){if(o=c.length){for(var o,t,i=0,n=c[0];++i<o;)n.n=t=c[i],t.p=n,n=t;n.n=t=c[0],t.p=n}}},68120:function(R,C,e){"use strict";function _(T,r){function w(b,c){return b=T(b,c),r(b[0],b[1])}return T.invert&&r.invert&&(w.invert=function(b,c){return(b=r.invert(b,c))&&T.invert(b[0],b[1])}),w}e.d(C,{c:function(){return _}})},7376:function(R,C,e){"use strict";function _(T){return T}e.d(C,{c:function(){return _}})},83356:function(R,C,e){"use strict";e.r(C),e.d(C,{geoAlbers:function(){return dt},geoAlbersUsa:function(){return kt},geoArea:function(){return _.cp},geoAzimuthalEqualArea:function(){return Tt.c},geoAzimuthalEqualAreaRaw:function(){return Tt.y},geoAzimuthalEquidistant:function(){return St.c},geoAzimuthalEquidistantRaw:function(){return St.O},geoBounds:function(){return T.c},geoCentroid:function(){return r.c},geoCircle:function(){return w.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return c.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return o.c},geoConicConformal:function(){return on},geoConicConformalRaw:function(){return nn},geoConicEqualArea:function(){return ht},geoConicEqualAreaRaw:function(){return at},geoConicEquidistant:function(){return bn},geoConicEquidistantRaw:function(){return $t},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return wn},geoEqualEarthRaw:function(){return An},geoEquirectangular:function(){return Ht.c},geoEquirectangularRaw:function(){return Ht.u},geoGnomonic:function(){return On.c},geoGnomonicRaw:function(){return On.Y},geoGraticule:function(){return q},geoGraticule10:function(){return ne},geoIdentity:function(){return Cn},geoInterpolate:function(){return Z.c},geoLength:function(){return y},geoMercator:function(){return Ft},geoMercatorRaw:function(){return At},geoNaturalEarth1:function(){return Bn.c},geoNaturalEarth1Raw:function(){return Bn.g},geoOrthographic:function(){return Xn.c},geoOrthographicRaw:function(){return Xn.t},geoPath:function(){return bt},geoProjection:function(){return Ve.c},geoProjectionMutator:function(){return Ve.U},geoRotation:function(){return wt.c},geoStereographic:function(){return jn},geoStereographicRaw:function(){return Yn},geoStream:function(){return f.c},geoTransform:function(){return Tn.c},geoTransverseMercator:function(){return or},geoTransverseMercatorRaw:function(){return Kn}});var _=e(95384),T=e(13696),r=e(24052),w=e(61780),b=e(78284),c=e(2728),o=e(21676);function t(){var Qt,an,Dn,yn=0,Ln=0,Vn=960,Un=500;return Dn={stream:function(er){return Qt&&an===er?Qt:Qt=(0,o.c)(yn,Ln,Vn,Un)(an=er)},extent:function(er){return arguments.length?(yn=+er[0][0],Ln=+er[0][1],Vn=+er[1][0],Un=+er[1][1],Qt=an=null,Dn):[[yn,Ln],[Vn,Un]]}}}var i,n,a,s=e(58196),l=e(88728),u=e(64528),p=e(70932),f=e(16016),m=(0,l.c)(),h={sphere:p.c,point:p.c,lineStart:function(){h.point=v,h.lineEnd=g},lineEnd:p.c,polygonStart:p.c,polygonEnd:p.c};function g(){h.point=h.lineEnd=p.c}function v(Qt,an){Qt*=u.qw,an*=u.qw,i=Qt,n=(0,u.g$)(an),a=(0,u.W8)(an),h.point=x}function x(Qt,an){Qt*=u.qw,an*=u.qw;var Dn=(0,u.g$)(an),yn=(0,u.W8)(an),Ln=(0,u.a2)(Qt-i),Vn=(0,u.W8)(Ln),Un=yn*(0,u.g$)(Ln),er=a*Dn-n*yn*Vn,fr=n*Dn+a*yn*Vn;m.add((0,u.WE)((0,u._I)(Un*Un+er*er),fr)),i=Qt,n=Dn,a=yn}function y(Qt){return m.reset(),(0,f.c)(Qt,h),+m}var A=[null,null],d={type:"LineString",coordinates:A};function S(Qt,an){return A[0]=Qt,A[1]=an,y(d)}var k={Feature:function(Qt,an){return L(Qt.geometry,an)},FeatureCollection:function(Qt,an){for(var Dn=Qt.features,yn=-1,Ln=Dn.length;++yn<Ln;)if(L(Dn[yn].geometry,an))return!0;return!1}},E={Sphere:function(){return!0},Point:function(Qt,an){return O(Qt.coordinates,an)},MultiPoint:function(Qt,an){for(var Dn=Qt.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(O(Dn[yn],an))return!0;return!1},LineString:function(Qt,an){return P(Qt.coordinates,an)},MultiLineString:function(Qt,an){for(var Dn=Qt.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(P(Dn[yn],an))return!0;return!1},Polygon:function(Qt,an){return F(Qt.coordinates,an)},MultiPolygon:function(Qt,an){for(var Dn=Qt.coordinates,yn=-1,Ln=Dn.length;++yn<Ln;)if(F(Dn[yn],an))return!0;return!1},GeometryCollection:function(Qt,an){for(var Dn=Qt.geometries,yn=-1,Ln=Dn.length;++yn<Ln;)if(L(Dn[yn],an))return!0;return!1}};function L(Qt,an){return!(!Qt||!E.hasOwnProperty(Qt.type))&&E[Qt.type](Qt,an)}function O(Qt,an){return S(Qt,an)===0}function P(Qt,an){for(var Dn,yn,Ln,Vn=0,Un=Qt.length;Vn<Un;Vn++){if((yn=S(Qt[Vn],an))===0||Vn>0&&(Ln=S(Qt[Vn],Qt[Vn-1]))>0&&Dn<=Ln&&yn<=Ln&&(Dn+yn-Ln)*(1-Math.pow((Dn-yn)/Ln,2))<u.a8*Ln)return!0;Dn=yn}return!1}function F(Qt,an){return!!(0,s.c)(Qt.map(U),I(an))}function U(Qt){return(Qt=Qt.map(I)).pop(),Qt}function I(Qt){return[Qt[0]*u.qw,Qt[1]*u.qw]}function N(Qt,an){return(Qt&&k.hasOwnProperty(Qt.type)?k[Qt.type]:L)(Qt,an)}var W=e(84706);function B(Qt,an,Dn){var yn=(0,W.ik)(Qt,an-u.Gg,Dn).concat(an);return function(Ln){return yn.map(function(Vn){return[Ln,Vn]})}}function V(Qt,an,Dn){var yn=(0,W.ik)(Qt,an-u.Gg,Dn).concat(an);return function(Ln){return yn.map(function(Vn){return[Vn,Ln]})}}function q(){var Qt,an,Dn,yn,Ln,Vn,Un,er,fr,Xt,mn,Pt,Zt=10,Wt=Zt,gn=90,pn=360,kn=2.5;function vn(){return{type:"MultiLineString",coordinates:cn()}}function cn(){return(0,W.ik)((0,u.Km)(yn/gn)*gn,Dn,gn).map(mn).concat((0,W.ik)((0,u.Km)(er/pn)*pn,Un,pn).map(Pt)).concat((0,W.ik)((0,u.Km)(an/Zt)*Zt,Qt,Zt).filter(function(qt){return(0,u.a2)(qt%gn)>u.Gg}).map(fr)).concat((0,W.ik)((0,u.Km)(Vn/Wt)*Wt,Ln,Wt).filter(function(qt){return(0,u.a2)(qt%pn)>u.Gg}).map(Xt))}return vn.lines=function(){return cn().map(function(qt){return{type:"LineString",coordinates:qt}})},vn.outline=function(){return{type:"Polygon",coordinates:[mn(yn).concat(Pt(Un).slice(1),mn(Dn).reverse().slice(1),Pt(er).reverse().slice(1))]}},vn.extent=function(qt){return arguments.length?vn.extentMajor(qt).extentMinor(qt):vn.extentMinor()},vn.extentMajor=function(qt){return arguments.length?(yn=+qt[0][0],Dn=+qt[1][0],er=+qt[0][1],Un=+qt[1][1],yn>Dn&&(qt=yn,yn=Dn,Dn=qt),er>Un&&(qt=er,er=Un,Un=qt),vn.precision(kn)):[[yn,er],[Dn,Un]]},vn.extentMinor=function(qt){return arguments.length?(an=+qt[0][0],Qt=+qt[1][0],Vn=+qt[0][1],Ln=+qt[1][1],an>Qt&&(qt=an,an=Qt,Qt=qt),Vn>Ln&&(qt=Vn,Vn=Ln,Ln=qt),vn.precision(kn)):[[an,Vn],[Qt,Ln]]},vn.step=function(qt){return arguments.length?vn.stepMajor(qt).stepMinor(qt):vn.stepMinor()},vn.stepMajor=function(qt){return arguments.length?(gn=+qt[0],pn=+qt[1],vn):[gn,pn]},vn.stepMinor=function(qt){return arguments.length?(Zt=+qt[0],Wt=+qt[1],vn):[Zt,Wt]},vn.precision=function(qt){return arguments.length?(kn=+qt,fr=B(Vn,Ln,90),Xt=V(an,Qt,kn),mn=B(er,Un,90),Pt=V(yn,Dn,kn),vn):kn},vn.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function ne(){return q()()}var $,K,ee,J,Z=e(27284),te=e(7376),oe=(0,l.c)(),se=(0,l.c)(),ce={point:p.c,lineStart:p.c,lineEnd:p.c,polygonStart:function(){ce.lineStart=ye,ce.lineEnd=pe},polygonEnd:function(){ce.lineStart=ce.lineEnd=ce.point=p.c,oe.add((0,u.a2)(se)),se.reset()},result:function(){var Qt=oe/2;return oe.reset(),Qt}};function ye(){ce.point=me}function me(Qt,an){ce.point=fe,$=ee=Qt,K=J=an}function fe(Qt,an){se.add(J*Qt-ee*an),ee=Qt,J=an}function pe(){fe($,K)}var ge,ke,Ce,de,ae=ce,re=e(73784),he=0,Se=0,xe=0,Te=0,Ae=0,Pe=0,De=0,ve=0,we=0,Ee={point:Fe,lineStart:Le,lineEnd:Je,polygonStart:function(){Ee.lineStart=rt,Ee.lineEnd=ot},polygonEnd:function(){Ee.point=Fe,Ee.lineStart=Le,Ee.lineEnd=Je},result:function(){var Qt=we?[De/we,ve/we]:Pe?[Te/Pe,Ae/Pe]:xe?[he/xe,Se/xe]:[NaN,NaN];return he=Se=xe=Te=Ae=Pe=De=ve=we=0,Qt}};function Fe(Qt,an){he+=Qt,Se+=an,++xe}function Le(){Ee.point=je}function je(Qt,an){Ee.point=Ge,Fe(Ce=Qt,de=an)}function Ge(Qt,an){var Dn=Qt-Ce,yn=an-de,Ln=(0,u._I)(Dn*Dn+yn*yn);Te+=Ln*(Ce+Qt)/2,Ae+=Ln*(de+an)/2,Pe+=Ln,Fe(Ce=Qt,de=an)}function Je(){Ee.point=Fe}function rt(){Ee.point=yt}function ot(){_t(ge,ke)}function yt(Qt,an){Ee.point=_t,Fe(ge=Ce=Qt,ke=de=an)}function _t(Qt,an){var Dn=Qt-Ce,yn=an-de,Ln=(0,u._I)(Dn*Dn+yn*yn);Te+=Ln*(Ce+Qt)/2,Ae+=Ln*(de+an)/2,Pe+=Ln,De+=(Ln=de*Qt-Ce*an)*(Ce+Qt),ve+=Ln*(de+an),we+=3*Ln,Fe(Ce=Qt,de=an)}var mt=Ee;function tt(Qt){this._context=Qt}tt.prototype={_radius:4.5,pointRadius:function(Qt){return this._radius=Qt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Qt,an){switch(this._point){case 0:this._context.moveTo(Qt,an),this._point=1;break;case 1:this._context.lineTo(Qt,an);break;default:this._context.moveTo(Qt+this._radius,an),this._context.arc(Qt,an,this._radius,0,u.kD)}},result:p.c};var Qe,Dt,zt,pt,vt,We=(0,l.c)(),Ze={point:p.c,lineStart:function(){Ze.point=Ne},lineEnd:function(){Qe&&Xe(Dt,zt),Ze.point=p.c},polygonStart:function(){Qe=!0},polygonEnd:function(){Qe=null},result:function(){var Qt=+We;return We.reset(),Qt}};function Ne(Qt,an){Ze.point=Xe,Dt=pt=Qt,zt=vt=an}function Xe(Qt,an){pt-=Qt,vt-=an,We.add((0,u._I)(pt*pt+vt*vt)),pt=Qt,vt=an}var st=Ze;function lt(){this._string=[]}function xt(Qt){return"m0,"+Qt+"a"+Qt+","+Qt+" 0 1,1 0,"+-2*Qt+"a"+Qt+","+Qt+" 0 1,1 0,"+2*Qt+"z"}function bt(Qt,an){var Dn,yn,Ln=4.5;function Vn(Un){return Un&&(typeof Ln=="function"&&yn.pointRadius(+Ln.apply(this,arguments)),(0,f.c)(Un,Dn(yn))),yn.result()}return Vn.area=function(Un){return(0,f.c)(Un,Dn(ae)),ae.result()},Vn.measure=function(Un){return(0,f.c)(Un,Dn(st)),st.result()},Vn.bounds=function(Un){return(0,f.c)(Un,Dn(re.c)),re.c.result()},Vn.centroid=function(Un){return(0,f.c)(Un,Dn(mt)),mt.result()},Vn.projection=function(Un){return arguments.length?(Dn=Un==null?(Qt=null,te.c):(Qt=Un).stream,Vn):Qt},Vn.context=function(Un){return arguments.length?(yn=Un==null?(an=null,new lt):new tt(an=Un),typeof Ln!="function"&&yn.pointRadius(Ln),Vn):an},Vn.pointRadius=function(Un){return arguments.length?(Ln=typeof Un=="function"?Un:(yn.pointRadius(+Un),+Un),Vn):Ln},Vn.projection(Qt).context(an)}lt.prototype={_radius:4.5,_circle:xt(4.5),pointRadius:function(Qt){return(Qt=+Qt)!==this._radius&&(this._radius=Qt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Qt,an){switch(this._point){case 0:this._string.push("M",Qt,",",an),this._point=1;break;case 1:this._string.push("L",Qt,",",an);break;default:this._circle==null&&(this._circle=xt(this._radius)),this._string.push("M",Qt,",",an,this._circle)}},result:function(){if(this._string.length){var Qt=this._string.join("");return this._string=[],Qt}return null}};var Ve=e(87952);function Be(Qt){var an=0,Dn=u.pi/3,yn=(0,Ve.U)(Qt),Ln=yn(an,Dn);return Ln.parallels=function(Vn){return arguments.length?yn(an=Vn[0]*u.qw,Dn=Vn[1]*u.qw):[an*u.oh,Dn*u.oh]},Ln}function at(Qt,an){var Dn=(0,u.g$)(Qt),yn=(Dn+(0,u.g$)(an))/2;if((0,u.a2)(yn)<u.Gg)return function(er){var fr=(0,u.W8)(er);function Xt(mn,Pt){return[mn*fr,(0,u.g$)(Pt)/fr]}return Xt.invert=function(mn,Pt){return[mn/fr,(0,u.qR)(Pt*fr)]},Xt}(Qt);var Ln=1+Dn*(2*yn-Dn),Vn=(0,u._I)(Ln)/yn;function Un(er,fr){var Xt=(0,u._I)(Ln-2*yn*(0,u.g$)(fr))/yn;return[Xt*(0,u.g$)(er*=yn),Vn-Xt*(0,u.W8)(er)]}return Un.invert=function(er,fr){var Xt=Vn-fr,mn=(0,u.WE)(er,(0,u.a2)(Xt))*(0,u.kq)(Xt);return Xt*yn<0&&(mn-=u.pi*(0,u.kq)(er)*(0,u.kq)(Xt)),[mn/yn,(0,u.qR)((Ln-(er*er+Xt*Xt)*yn*yn)/(2*yn))]},Un}function ht(){return Be(at).scale(155.424).center([0,33.6442])}function dt(){return ht().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var it=e(86420);function kt(){var Qt,an,Dn,yn,Ln,Vn,Un=dt(),er=ht().rotate([154,0]).center([-2,58.5]).parallels([55,65]),fr=ht().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Xt={point:function(Zt,Wt){Vn=[Zt,Wt]}};function mn(Zt){var Wt=Zt[0],gn=Zt[1];return Vn=null,Dn.point(Wt,gn),Vn||(yn.point(Wt,gn),Vn)||(Ln.point(Wt,gn),Vn)}function Pt(){return Qt=an=null,mn}return mn.invert=function(Zt){var Wt=Un.scale(),gn=Un.translate(),pn=(Zt[0]-gn[0])/Wt,kn=(Zt[1]-gn[1])/Wt;return(kn>=.12&&kn<.234&&pn>=-.425&&pn<-.214?er:kn>=.166&&kn<.234&&pn>=-.214&&pn<-.115?fr:Un).invert(Zt)},mn.stream=function(Zt){return Qt&&an===Zt?Qt:(Wt=[Un.stream(an=Zt),er.stream(Zt),fr.stream(Zt)],gn=Wt.length,Qt={point:function(pn,kn){for(var vn=-1;++vn<gn;)Wt[vn].point(pn,kn)},sphere:function(){for(var pn=-1;++pn<gn;)Wt[pn].sphere()},lineStart:function(){for(var pn=-1;++pn<gn;)Wt[pn].lineStart()},lineEnd:function(){for(var pn=-1;++pn<gn;)Wt[pn].lineEnd()},polygonStart:function(){for(var pn=-1;++pn<gn;)Wt[pn].polygonStart()},polygonEnd:function(){for(var pn=-1;++pn<gn;)Wt[pn].polygonEnd()}});var Wt,gn},mn.precision=function(Zt){return arguments.length?(Un.precision(Zt),er.precision(Zt),fr.precision(Zt),Pt()):Un.precision()},mn.scale=function(Zt){return arguments.length?(Un.scale(Zt),er.scale(.35*Zt),fr.scale(Zt),mn.translate(Un.translate())):Un.scale()},mn.translate=function(Zt){if(!arguments.length)return Un.translate();var Wt=Un.scale(),gn=+Zt[0],pn=+Zt[1];return Dn=Un.translate(Zt).clipExtent([[gn-.455*Wt,pn-.238*Wt],[gn+.455*Wt,pn+.238*Wt]]).stream(Xt),yn=er.translate([gn-.307*Wt,pn+.201*Wt]).clipExtent([[gn-.425*Wt+u.Gg,pn+.12*Wt+u.Gg],[gn-.214*Wt-u.Gg,pn+.234*Wt-u.Gg]]).stream(Xt),Ln=fr.translate([gn-.205*Wt,pn+.212*Wt]).clipExtent([[gn-.214*Wt+u.Gg,pn+.166*Wt+u.Gg],[gn-.115*Wt-u.Gg,pn+.234*Wt-u.Gg]]).stream(Xt),Pt()},mn.fitExtent=function(Zt,Wt){return(0,it.QX)(mn,Zt,Wt)},mn.fitSize=function(Zt,Wt){return(0,it.UV)(mn,Zt,Wt)},mn.fitWidth=function(Zt,Wt){return(0,it.Qx)(mn,Zt,Wt)},mn.fitHeight=function(Zt,Wt){return(0,it.OW)(mn,Zt,Wt)},mn.scale(1070)}var Tt=e(54724),St=e(69020),wt=e(92992);function At(Qt,an){return[Qt,(0,u.Yz)((0,u.a6)((u.or+an)/2))]}function Ft(){return jt(At).scale(961/u.kD)}function jt(Qt){var an,Dn,yn,Ln=(0,Ve.c)(Qt),Vn=Ln.center,Un=Ln.scale,er=Ln.translate,fr=Ln.clipExtent,Xt=null;function mn(){var Pt=u.pi*Un(),Zt=Ln((0,wt.c)(Ln.rotate()).invert([0,0]));return fr(Xt==null?[[Zt[0]-Pt,Zt[1]-Pt],[Zt[0]+Pt,Zt[1]+Pt]]:Qt===At?[[Math.max(Zt[0]-Pt,Xt),an],[Math.min(Zt[0]+Pt,Dn),yn]]:[[Xt,Math.max(Zt[1]-Pt,an)],[Dn,Math.min(Zt[1]+Pt,yn)]])}return Ln.scale=function(Pt){return arguments.length?(Un(Pt),mn()):Un()},Ln.translate=function(Pt){return arguments.length?(er(Pt),mn()):er()},Ln.center=function(Pt){return arguments.length?(Vn(Pt),mn()):Vn()},Ln.clipExtent=function(Pt){return arguments.length?(Pt==null?Xt=an=Dn=yn=null:(Xt=+Pt[0][0],an=+Pt[0][1],Dn=+Pt[1][0],yn=+Pt[1][1]),mn()):Xt==null?null:[[Xt,an],[Dn,yn]]},mn()}function rn(Qt){return(0,u.a6)((u.or+Qt)/2)}function nn(Qt,an){var Dn=(0,u.W8)(Qt),yn=Qt===an?(0,u.g$)(Qt):(0,u.Yz)(Dn/(0,u.W8)(an))/(0,u.Yz)(rn(an)/rn(Qt)),Ln=Dn*(0,u.g3)(rn(Qt),yn)/yn;if(!yn)return At;function Vn(Un,er){Ln>0?er<-u.or+u.Gg&&(er=-u.or+u.Gg):er>u.or-u.Gg&&(er=u.or-u.Gg);var fr=Ln/(0,u.g3)(rn(er),yn);return[fr*(0,u.g$)(yn*Un),Ln-fr*(0,u.W8)(yn*Un)]}return Vn.invert=function(Un,er){var fr=Ln-er,Xt=(0,u.kq)(yn)*(0,u._I)(Un*Un+fr*fr),mn=(0,u.WE)(Un,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*yn<0&&(mn-=u.pi*(0,u.kq)(Un)*(0,u.kq)(fr)),[mn/yn,2*(0,u.MQ)((0,u.g3)(Ln/Xt,1/yn))-u.or]},Vn}function on(){return Be(nn).scale(109.5).parallels([30,30])}At.invert=function(Qt,an){return[Qt,2*(0,u.MQ)((0,u.oN)(an))-u.or]};var Ht=e(69604);function $t(Qt,an){var Dn=(0,u.W8)(Qt),yn=Qt===an?(0,u.g$)(Qt):(Dn-(0,u.W8)(an))/(an-Qt),Ln=Dn/yn+Qt;if((0,u.a2)(yn)<u.Gg)return Ht.u;function Vn(Un,er){var fr=Ln-er,Xt=yn*Un;return[fr*(0,u.g$)(Xt),Ln-fr*(0,u.W8)(Xt)]}return Vn.invert=function(Un,er){var fr=Ln-er,Xt=(0,u.WE)(Un,(0,u.a2)(fr))*(0,u.kq)(fr);return fr*yn<0&&(Xt-=u.pi*(0,u.kq)(Un)*(0,u.kq)(fr)),[Xt/yn,Ln-(0,u.kq)(yn)*(0,u._I)(Un*Un+fr*fr)]},Vn}function bn(){return Be($t).scale(131.154).center([0,13.9389])}var ln=1.340264,Kt=-.081106,fn=893e-6,en=.003796,un=(0,u._I)(3)/2;function An(Qt,an){var Dn=(0,u.qR)(un*(0,u.g$)(an)),yn=Dn*Dn,Ln=yn*yn*yn;return[Qt*(0,u.W8)(Dn)/(un*(ln+3*Kt*yn+Ln*(7*fn+9*en*yn))),Dn*(ln+Kt*yn+Ln*(fn+en*yn))]}function wn(){return(0,Ve.c)(An).scale(177.158)}An.invert=function(Qt,an){for(var Dn,yn=an,Ln=yn*yn,Vn=Ln*Ln*Ln,Un=0;Un<12&&(Vn=(Ln=(yn-=Dn=(yn*(ln+Kt*Ln+Vn*(fn+en*Ln))-an)/(ln+3*Kt*Ln+Vn*(7*fn+9*en*Ln)))*yn)*Ln*Ln,!((0,u.a2)(Dn)<u.a8));++Un);return[un*Qt*(ln+3*Kt*Ln+Vn*(7*fn+9*en*Ln))/(0,u.W8)(yn),(0,u.qR)((0,u.g$)(yn)/un)]};var On=e(53285),Tn=e(15196);function Cn(){var Qt,an,Dn,yn,Ln,Vn,Un,er=1,fr=0,Xt=0,mn=1,Pt=1,Zt=0,Wt=null,gn=1,pn=1,kn=(0,Tn.s)({point:function(Nt,tn){var _n=qt([Nt,tn]);this.stream.point(_n[0],_n[1])}}),vn=te.c;function cn(){return gn=er*mn,pn=er*Pt,Vn=Un=null,qt}function qt(Nt){var tn=Nt[0]*gn,_n=Nt[1]*pn;if(Zt){var Fn=_n*Qt-tn*an;tn=tn*Qt+_n*an,_n=Fn}return[tn+fr,_n+Xt]}return qt.invert=function(Nt){var tn=Nt[0]-fr,_n=Nt[1]-Xt;if(Zt){var Fn=_n*Qt+tn*an;tn=tn*Qt-_n*an,_n=Fn}return[tn/gn,_n/pn]},qt.stream=function(Nt){return Vn&&Un===Nt?Vn:Vn=kn(vn(Un=Nt))},qt.postclip=function(Nt){return arguments.length?(vn=Nt,Wt=Dn=yn=Ln=null,cn()):vn},qt.clipExtent=function(Nt){return arguments.length?(vn=Nt==null?(Wt=Dn=yn=Ln=null,te.c):(0,o.c)(Wt=+Nt[0][0],Dn=+Nt[0][1],yn=+Nt[1][0],Ln=+Nt[1][1]),cn()):Wt==null?null:[[Wt,Dn],[yn,Ln]]},qt.scale=function(Nt){return arguments.length?(er=+Nt,cn()):er},qt.translate=function(Nt){return arguments.length?(fr=+Nt[0],Xt=+Nt[1],cn()):[fr,Xt]},qt.angle=function(Nt){return arguments.length?(Zt=Nt%360*u.qw,an=(0,u.g$)(Zt),Qt=(0,u.W8)(Zt),cn()):Zt*u.oh},qt.reflectX=function(Nt){return arguments.length?(mn=Nt?-1:1,cn()):mn<0},qt.reflectY=function(Nt){return arguments.length?(Pt=Nt?-1:1,cn()):Pt<0},qt.fitExtent=function(Nt,tn){return(0,it.QX)(qt,Nt,tn)},qt.fitSize=function(Nt,tn){return(0,it.UV)(qt,Nt,tn)},qt.fitWidth=function(Nt,tn){return(0,it.Qx)(qt,Nt,tn)},qt.fitHeight=function(Nt,tn){return(0,it.OW)(qt,Nt,tn)},qt}var Bn=e(47984),Xn=e(4888),cr=e(62280);function Yn(Qt,an){var Dn=(0,u.W8)(an),yn=1+(0,u.W8)(Qt)*Dn;return[Dn*(0,u.g$)(Qt)/yn,(0,u.g$)(an)/yn]}function jn(){return(0,Ve.c)(Yn).scale(250).clipAngle(142)}function Kn(Qt,an){return[(0,u.Yz)((0,u.a6)((u.or+an)/2)),-Qt]}function or(){var Qt=jt(Kn),an=Qt.center,Dn=Qt.rotate;return Qt.center=function(yn){return arguments.length?an([-yn[1],yn[0]]):[(yn=an())[1],-yn[0]]},Qt.rotate=function(yn){return arguments.length?Dn([yn[0],yn[1],yn.length>2?yn[2]+90:90]):[(yn=Dn())[0],yn[1],yn[2]-90]},Dn([0,0,90]).scale(159.155)}Yn.invert=(0,cr.g)(function(Qt){return 2*(0,u.MQ)(Qt)}),Kn.invert=function(Qt,an){return[-an,2*(0,u.MQ)((0,u.oN)(Qt))-u.or]}},27284:function(R,C,e){"use strict";e.d(C,{c:function(){return T}});var _=e(64528);function T(r,w){var b=r[0]*_.qw,c=r[1]*_.qw,o=w[0]*_.qw,t=w[1]*_.qw,i=(0,_.W8)(c),n=(0,_.g$)(c),a=(0,_.W8)(t),s=(0,_.g$)(t),l=i*(0,_.W8)(b),u=i*(0,_.g$)(b),p=a*(0,_.W8)(o),f=a*(0,_.g$)(o),m=2*(0,_.qR)((0,_._I)((0,_.SD)(t-c)+i*a*(0,_.SD)(o-b))),h=(0,_.g$)(m),g=m?function(v){var x=(0,_.g$)(v*=m)/h,y=(0,_.g$)(m-v)/h,A=y*l+x*p,d=y*u+x*f,S=y*n+x*s;return[(0,_.WE)(d,A)*_.oh,(0,_.WE)(S,(0,_._I)(A*A+d*d))*_.oh]}:function(){return[b*_.oh,c*_.oh]};return g.distance=m,g}},64528:function(R,C,e){"use strict";e.d(C,{Gg:function(){return _},Km:function(){return l},MQ:function(){return n},SD:function(){return A},W8:function(){return s},WE:function(){return a},Yz:function(){return p},_I:function(){return g},a2:function(){return i},a6:function(){return v},a8:function(){return T},g$:function(){return m},g3:function(){return f},kD:function(){return c},kq:function(){return h},mE:function(){return x},oN:function(){return u},oh:function(){return o},or:function(){return w},pi:function(){return r},qR:function(){return y},qw:function(){return t},wL:function(){return b}});var _=1e-6,T=1e-12,r=Math.PI,w=r/2,b=r/4,c=2*r,o=180/r,t=r/180,i=Math.abs,n=Math.atan,a=Math.atan2,s=Math.cos,l=Math.ceil,u=Math.exp,p=Math.log,f=Math.pow,m=Math.sin,h=Math.sign||function(d){return d>0?1:d<0?-1:0},g=Math.sqrt,v=Math.tan;function x(d){return d>1?0:d<-1?r:Math.acos(d)}function y(d){return d>1?w:d<-1?-w:Math.asin(d)}function A(d){return(d=m(d/2))*d}},70932:function(R,C,e){"use strict";function _(){}e.d(C,{c:function(){return _}})},73784:function(R,C,e){"use strict";var _=e(70932),T=1/0,r=T,w=-T,b=w,c={point:function(o,t){o<T&&(T=o),o>w&&(w=o),t<r&&(r=t),t>b&&(b=t)},lineStart:_.c,lineEnd:_.c,polygonStart:_.c,polygonEnd:_.c,result:function(){var o=[[T,r],[w,b]];return w=b=-(r=T=1/0),o}};C.c=c},41860:function(R,C,e){"use strict";e.d(C,{c:function(){return T}});var _=e(64528);function T(r,w){return(0,_.a2)(r[0]-w[0])<_.Gg&&(0,_.a2)(r[1]-w[1])<_.Gg}},58196:function(R,C,e){"use strict";e.d(C,{c:function(){return c}});var _=e(88728),T=e(84220),r=e(64528),w=(0,_.c)();function b(o){return(0,r.a2)(o[0])<=r.pi?o[0]:(0,r.kq)(o[0])*(((0,r.a2)(o[0])+r.pi)%r.kD-r.pi)}function c(o,t){var i=b(t),n=t[1],a=(0,r.g$)(n),s=[(0,r.g$)(i),-(0,r.W8)(i),0],l=0,u=0;w.reset(),a===1?n=r.or+r.Gg:a===-1&&(n=-r.or-r.Gg);for(var p=0,f=o.length;p<f;++p)if(h=(m=o[p]).length)for(var m,h,g=m[h-1],v=b(g),x=g[1]/2+r.wL,y=(0,r.g$)(x),A=(0,r.W8)(x),d=0;d<h;++d,v=k,y=L,A=O,g=S){var S=m[d],k=b(S),E=S[1]/2+r.wL,L=(0,r.g$)(E),O=(0,r.W8)(E),P=k-v,F=P>=0?1:-1,U=F*P,I=U>r.pi,N=y*L;if(w.add((0,r.WE)(N*F*(0,r.g$)(U),A*O+N*(0,r.W8)(U))),l+=I?P+F*r.kD:P,I^v>=i^k>=i){var W=(0,T.CW)((0,T.ux)(g),(0,T.ux)(S));(0,T.cJ)(W);var B=(0,T.CW)(s,W);(0,T.cJ)(B);var V=(I^P>=0?-1:1)*(0,r.qR)(B[2]);(n>V||n===V&&(W[0]||W[1]))&&(u+=I^P>=0?1:-1)}}return(l<-r.Gg||l<r.Gg&&w<-r.Gg)^1&u}},62280:function(R,C,e){"use strict";e.d(C,{a:function(){return T},g:function(){return r}});var _=e(64528);function T(w){return function(b,c){var o=(0,_.W8)(b),t=(0,_.W8)(c),i=w(o*t);return[i*t*(0,_.g$)(b),i*(0,_.g$)(c)]}}function r(w){return function(b,c){var o=(0,_._I)(b*b+c*c),t=w(o),i=(0,_.g$)(t),n=(0,_.W8)(t);return[(0,_.WE)(b*i,o*n),(0,_.qR)(o&&c*i/o)]}}},54724:function(R,C,e){"use strict";e.d(C,{c:function(){return b},y:function(){return w}});var _=e(64528),T=e(62280),r=e(87952),w=(0,T.a)(function(c){return(0,_._I)(2/(1+c))});function b(){return(0,r.c)(w).scale(124.75).clipAngle(179.999)}w.invert=(0,T.g)(function(c){return 2*(0,_.qR)(c/2)})},69020:function(R,C,e){"use strict";e.d(C,{O:function(){return w},c:function(){return b}});var _=e(64528),T=e(62280),r=e(87952),w=(0,T.a)(function(c){return(c=(0,_.mE)(c))&&c/(0,_.g$)(c)});function b(){return(0,r.c)(w).scale(79.4188).clipAngle(179.999)}w.invert=(0,T.g)(function(c){return c})},69604:function(R,C,e){"use strict";e.d(C,{c:function(){return r},u:function(){return T}});var _=e(87952);function T(w,b){return[w,b]}function r(){return(0,_.c)(T).scale(152.63)}T.invert=T},86420:function(R,C,e){"use strict";e.d(C,{OW:function(){return o},QX:function(){return w},Qx:function(){return c},UV:function(){return b}});var _=e(16016),T=e(73784);function r(t,i,n){var a=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),a!=null&&t.clipExtent(null),(0,_.c)(n,t.stream(T.c)),i(T.c.result()),a!=null&&t.clipExtent(a),t}function w(t,i,n){return r(t,function(a){var s=i[1][0]-i[0][0],l=i[1][1]-i[0][1],u=Math.min(s/(a[1][0]-a[0][0]),l/(a[1][1]-a[0][1])),p=+i[0][0]+(s-u*(a[1][0]+a[0][0]))/2,f=+i[0][1]+(l-u*(a[1][1]+a[0][1]))/2;t.scale(150*u).translate([p,f])},n)}function b(t,i,n){return w(t,[[0,0],i],n)}function c(t,i,n){return r(t,function(a){var s=+i,l=s/(a[1][0]-a[0][0]),u=(s-l*(a[1][0]+a[0][0]))/2,p=-l*a[0][1];t.scale(150*l).translate([u,p])},n)}function o(t,i,n){return r(t,function(a){var s=+i,l=s/(a[1][1]-a[0][1]),u=-l*a[0][0],p=(s-l*(a[1][1]+a[0][1]))/2;t.scale(150*l).translate([u,p])},n)}},53285:function(R,C,e){"use strict";e.d(C,{Y:function(){return w},c:function(){return b}});var _=e(64528),T=e(62280),r=e(87952);function w(c,o){var t=(0,_.W8)(o),i=(0,_.W8)(c)*t;return[t*(0,_.g$)(c)/i,(0,_.g$)(o)/i]}function b(){return(0,r.c)(w).scale(144.049).clipAngle(60)}w.invert=(0,T.g)(_.MQ)},87952:function(R,C,e){"use strict";e.d(C,{c:function(){return m},U:function(){return h}});var _=e(78284),T=e(2728),r=e(21676),w=e(68120),b=e(7376),c=e(64528),o=e(92992),t=e(15196),i=e(86420),n=e(84220),a=16,s=(0,c.W8)(30*c.qw);function l(g,v){return+v?function(x,y){function A(d,S,k,E,L,O,P,F,U,I,N,W,B,V){var q=P-d,ne=F-S,$=q*q+ne*ne;if($>4*y&&B--){var K=E+I,ee=L+N,J=O+W,Z=(0,c._I)(K*K+ee*ee+J*J),te=(0,c.qR)(J/=Z),oe=(0,c.a2)((0,c.a2)(J)-1)<c.Gg||(0,c.a2)(k-U)<c.Gg?(k+U)/2:(0,c.WE)(ee,K),se=x(oe,te),ce=se[0],ye=se[1],me=ce-d,fe=ye-S,pe=ne*me-q*fe;(pe*pe/$>y||(0,c.a2)((q*me+ne*fe)/$-.5)>.3||E*I+L*N+O*W<s)&&(A(d,S,k,E,L,O,ce,ye,oe,K/=Z,ee/=Z,J,B,V),V.point(ce,ye),A(ce,ye,oe,K,ee,J,P,F,U,I,N,W,B,V))}}return function(d){var S,k,E,L,O,P,F,U,I,N,W,B,V={point:q,lineStart:ne,lineEnd:K,polygonStart:function(){d.polygonStart(),V.lineStart=ee},polygonEnd:function(){d.polygonEnd(),V.lineStart=ne}};function q(te,oe){te=x(te,oe),d.point(te[0],te[1])}function ne(){U=NaN,V.point=$,d.lineStart()}function $(te,oe){var se=(0,n.ux)([te,oe]),ce=x(te,oe);A(U,I,F,N,W,B,U=ce[0],I=ce[1],F=te,N=se[0],W=se[1],B=se[2],a,d),d.point(U,I)}function K(){V.point=q,d.lineEnd()}function ee(){ne(),V.point=J,V.lineEnd=Z}function J(te,oe){$(S=te,oe),k=U,E=I,L=N,O=W,P=B,V.point=$}function Z(){A(U,I,F,N,W,B,k,E,S,L,O,P,a,d),V.lineEnd=K,K()}return V}}(g,v):function(x){return(0,t.s)({point:function(y,A){y=x(y,A),this.stream.point(y[0],y[1])}})}(g)}var u=(0,t.s)({point:function(g,v){this.stream.point(g*c.qw,v*c.qw)}});function p(g,v,x,y,A){function d(S,k){return[v+g*(S*=y),x-g*(k*=A)]}return d.invert=function(S,k){return[(S-v)/g*y,(x-k)/g*A]},d}function f(g,v,x,y,A,d){var S=(0,c.W8)(d),k=(0,c.g$)(d),E=S*g,L=k*g,O=S/g,P=k/g,F=(k*x-S*v)/g,U=(k*v+S*x)/g;function I(N,W){return[E*(N*=y)-L*(W*=A)+v,x-L*N-E*W]}return I.invert=function(N,W){return[y*(O*N-P*W+F),A*(U-P*N-O*W)]},I}function m(g){return h(function(){return g})()}function h(g){var v,x,y,A,d,S,k,E,L,O,P=150,F=480,U=250,I=0,N=0,W=0,B=0,V=0,q=0,ne=1,$=1,K=null,ee=_.c,J=null,Z=b.c,te=.5;function oe(me){return E(me[0]*c.qw,me[1]*c.qw)}function se(me){return(me=E.invert(me[0],me[1]))&&[me[0]*c.oh,me[1]*c.oh]}function ce(){var me=f(P,0,0,ne,$,q).apply(null,v(I,N)),fe=(q?f:p)(P,F-me[0],U-me[1],ne,$,q);return x=(0,o.O)(W,B,V),k=(0,w.c)(v,fe),E=(0,w.c)(x,k),S=l(k,te),ye()}function ye(){return L=O=null,oe}return oe.stream=function(me){return L&&O===me?L:L=u(function(fe){return(0,t.s)({point:function(pe,ge){var ke=fe(pe,ge);return this.stream.point(ke[0],ke[1])}})}(x)(ee(S(Z(O=me)))))},oe.preclip=function(me){return arguments.length?(ee=me,K=void 0,ye()):ee},oe.postclip=function(me){return arguments.length?(Z=me,J=y=A=d=null,ye()):Z},oe.clipAngle=function(me){return arguments.length?(ee=+me?(0,T.c)(K=me*c.qw):(K=null,_.c),ye()):K*c.oh},oe.clipExtent=function(me){return arguments.length?(Z=me==null?(J=y=A=d=null,b.c):(0,r.c)(J=+me[0][0],y=+me[0][1],A=+me[1][0],d=+me[1][1]),ye()):J==null?null:[[J,y],[A,d]]},oe.scale=function(me){return arguments.length?(P=+me,ce()):P},oe.translate=function(me){return arguments.length?(F=+me[0],U=+me[1],ce()):[F,U]},oe.center=function(me){return arguments.length?(I=me[0]%360*c.qw,N=me[1]%360*c.qw,ce()):[I*c.oh,N*c.oh]},oe.rotate=function(me){return arguments.length?(W=me[0]%360*c.qw,B=me[1]%360*c.qw,V=me.length>2?me[2]%360*c.qw:0,ce()):[W*c.oh,B*c.oh,V*c.oh]},oe.angle=function(me){return arguments.length?(q=me%360*c.qw,ce()):q*c.oh},oe.reflectX=function(me){return arguments.length?(ne=me?-1:1,ce()):ne<0},oe.reflectY=function(me){return arguments.length?($=me?-1:1,ce()):$<0},oe.precision=function(me){return arguments.length?(S=l(k,te=me*me),ye()):(0,c._I)(te)},oe.fitExtent=function(me,fe){return(0,i.QX)(oe,me,fe)},oe.fitSize=function(me,fe){return(0,i.UV)(oe,me,fe)},oe.fitWidth=function(me,fe){return(0,i.Qx)(oe,me,fe)},oe.fitHeight=function(me,fe){return(0,i.OW)(oe,me,fe)},function(){return v=g.apply(this,arguments),oe.invert=v.invert&&se,ce()}}},47984:function(R,C,e){"use strict";e.d(C,{c:function(){return w},g:function(){return r}});var _=e(87952),T=e(64528);function r(b,c){var o=c*c,t=o*o;return[b*(.8707-.131979*o+t*(t*(.003971*o-.001529*t)-.013791)),c*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))]}function w(){return(0,_.c)(r).scale(175.295)}r.invert=function(b,c){var o,t=c,i=25;do{var n=t*t,a=n*n;t-=o=(t*(1.007226+n*(.015085+a*(.028874*n-.044475-.005916*a)))-c)/(1.007226+n*(.045255+a*(.259866*n-.311325-.06507600000000001*a)))}while((0,T.a2)(o)>T.Gg&&--i>0);return[b/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},4888:function(R,C,e){"use strict";e.d(C,{c:function(){return b},t:function(){return w}});var _=e(64528),T=e(62280),r=e(87952);function w(c,o){return[(0,_.W8)(o)*(0,_.g$)(c),(0,_.g$)(o)]}function b(){return(0,r.c)(w).scale(249.5).clipAngle(90+_.Gg)}w.invert=(0,T.g)(_.qR)},92992:function(R,C,e){"use strict";e.d(C,{O:function(){return w},c:function(){return t}});var _=e(68120),T=e(64528);function r(i,n){return[(0,T.a2)(i)>T.pi?i+Math.round(-i/T.kD)*T.kD:i,n]}function w(i,n,a){return(i%=T.kD)?n||a?(0,_.c)(c(i),o(n,a)):c(i):n||a?o(n,a):r}function b(i){return function(n,a){return[(n+=i)>T.pi?n-T.kD:n<-T.pi?n+T.kD:n,a]}}function c(i){var n=b(i);return n.invert=b(-i),n}function o(i,n){var a=(0,T.W8)(i),s=(0,T.g$)(i),l=(0,T.W8)(n),u=(0,T.g$)(n);function p(f,m){var h=(0,T.W8)(m),g=(0,T.W8)(f)*h,v=(0,T.g$)(f)*h,x=(0,T.g$)(m),y=x*a+g*s;return[(0,T.WE)(v*l-y*u,g*a-x*s),(0,T.qR)(y*l+v*u)]}return p.invert=function(f,m){var h=(0,T.W8)(m),g=(0,T.W8)(f)*h,v=(0,T.g$)(f)*h,x=(0,T.g$)(m),y=x*l-v*u;return[(0,T.WE)(v*l+x*u,g*a+y*s),(0,T.qR)(y*a-g*s)]},p}function t(i){function n(a){return(a=i(a[0]*T.qw,a[1]*T.qw))[0]*=T.oh,a[1]*=T.oh,a}return i=w(i[0]*T.qw,i[1]*T.qw,i.length>2?i[2]*T.qw:0),n.invert=function(a){return(a=i.invert(a[0]*T.qw,a[1]*T.qw))[0]*=T.oh,a[1]*=T.oh,a},n}r.invert=r},16016:function(R,C,e){"use strict";function _(o,t){o&&r.hasOwnProperty(o.type)&&r[o.type](o,t)}e.d(C,{c:function(){return c}});var T={Feature:function(o,t){_(o.geometry,t)},FeatureCollection:function(o,t){for(var i=o.features,n=-1,a=i.length;++n<a;)_(i[n].geometry,t)}},r={Sphere:function(o,t){t.sphere()},Point:function(o,t){o=o.coordinates,t.point(o[0],o[1],o[2])},MultiPoint:function(o,t){for(var i=o.coordinates,n=-1,a=i.length;++n<a;)o=i[n],t.point(o[0],o[1],o[2])},LineString:function(o,t){w(o.coordinates,t,0)},MultiLineString:function(o,t){for(var i=o.coordinates,n=-1,a=i.length;++n<a;)w(i[n],t,0)},Polygon:function(o,t){b(o.coordinates,t)},MultiPolygon:function(o,t){for(var i=o.coordinates,n=-1,a=i.length;++n<a;)b(i[n],t)},GeometryCollection:function(o,t){for(var i=o.geometries,n=-1,a=i.length;++n<a;)_(i[n],t)}};function w(o,t,i){var n,a=-1,s=o.length-i;for(t.lineStart();++a<s;)n=o[a],t.point(n[0],n[1],n[2]);t.lineEnd()}function b(o,t){var i=-1,n=o.length;for(t.polygonStart();++i<n;)w(o[i],t,1);t.polygonEnd()}function c(o,t){o&&T.hasOwnProperty(o.type)?T[o.type](o,t):_(o,t)}},15196:function(R,C,e){"use strict";function _(w){return{stream:T(w)}}function T(w){return function(b){var c=new r;for(var o in w)c[o]=w[o];return c.stream=b,c}}function r(){}e.d(C,{c:function(){return _},s:function(){return T}}),r.prototype={constructor:r,point:function(w,b){this.stream.point(w,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(R,C,e){"use strict";function _(re,he){return re.parent===he.parent?1:2}function T(re,he){return re+he.x}function r(re,he){return Math.max(re,he.y)}function w(){var re=_,he=1,Se=1,xe=!1;function Te(Ae){var Pe,De=0;Ae.eachAfter(function(Le){var je=Le.children;je?(Le.x=function(Ge){return Ge.reduce(T,0)/Ge.length}(je),Le.y=function(Ge){return 1+Ge.reduce(r,0)}(je)):(Le.x=Pe?De+=re(Le,Pe):0,Le.y=0,Pe=Le)});var ve=function(Le){for(var je;je=Le.children;)Le=je[0];return Le}(Ae),we=function(Le){for(var je;je=Le.children;)Le=je[je.length-1];return Le}(Ae),Ee=ve.x-re(ve,we)/2,Fe=we.x+re(we,ve)/2;return Ae.eachAfter(xe?function(Le){Le.x=(Le.x-Ae.x)*he,Le.y=(Ae.y-Le.y)*Se}:function(Le){Le.x=(Le.x-Ee)/(Fe-Ee)*he,Le.y=(1-(Ae.y?Le.y/Ae.y:1))*Se})}return Te.separation=function(Ae){return arguments.length?(re=Ae,Te):re},Te.size=function(Ae){return arguments.length?(xe=!1,he=+Ae[0],Se=+Ae[1],Te):xe?null:[he,Se]},Te.nodeSize=function(Ae){return arguments.length?(xe=!0,he=+Ae[0],Se=+Ae[1],Te):xe?[he,Se]:null},Te}function b(re){var he=0,Se=re.children,xe=Se&&Se.length;if(xe)for(;--xe>=0;)he+=Se[xe].value;else he=1;re.value=he}function c(re,he){var Se,xe,Te,Ae,Pe,De=new n(re),ve=+re.value&&(De.value=re.value),we=[De];for(he==null&&(he=o);Se=we.pop();)if(ve&&(Se.value=+Se.data.value),(Te=he(Se.data))&&(Pe=Te.length))for(Se.children=new Array(Pe),Ae=Pe-1;Ae>=0;--Ae)we.push(xe=Se.children[Ae]=new n(Te[Ae])),xe.parent=Se,xe.depth=Se.depth+1;return De.eachBefore(i)}function o(re){return re.children}function t(re){re.data=re.data.data}function i(re){var he=0;do re.height=he;while((re=re.parent)&&re.height<++he)}function n(re){this.data=re,this.depth=this.height=0,this.parent=null}e.r(C),e.d(C,{cluster:function(){return w},hierarchy:function(){return c},pack:function(){return P},packEnclose:function(){return s},packSiblings:function(){return S},partition:function(){return B},stratify:function(){return ee},tree:function(){return ye},treemap:function(){return ke},treemapBinary:function(){return Ce},treemapDice:function(){return W},treemapResquarify:function(){return ae},treemapSlice:function(){return me},treemapSliceDice:function(){return de},treemapSquarify:function(){return ge}}),n.prototype=c.prototype={constructor:n,count:function(){return this.eachAfter(b)},each:function(re){var he,Se,xe,Te,Ae=this,Pe=[Ae];do for(he=Pe.reverse(),Pe=[];Ae=he.pop();)if(re(Ae),Se=Ae.children)for(xe=0,Te=Se.length;xe<Te;++xe)Pe.push(Se[xe]);while(Pe.length);return this},eachAfter:function(re){for(var he,Se,xe,Te=this,Ae=[Te],Pe=[];Te=Ae.pop();)if(Pe.push(Te),he=Te.children)for(Se=0,xe=he.length;Se<xe;++Se)Ae.push(he[Se]);for(;Te=Pe.pop();)re(Te);return this},eachBefore:function(re){for(var he,Se,xe=this,Te=[xe];xe=Te.pop();)if(re(xe),he=xe.children)for(Se=he.length-1;Se>=0;--Se)Te.push(he[Se]);return this},sum:function(re){return this.eachAfter(function(he){for(var Se=+re(he.data)||0,xe=he.children,Te=xe&&xe.length;--Te>=0;)Se+=xe[Te].value;he.value=Se})},sort:function(re){return this.eachBefore(function(he){he.children&&he.children.sort(re)})},path:function(re){for(var he=this,Se=function(Ae,Pe){if(Ae===Pe)return Ae;var De=Ae.ancestors(),ve=Pe.ancestors(),we=null;for(Ae=De.pop(),Pe=ve.pop();Ae===Pe;)we=Ae,Ae=De.pop(),Pe=ve.pop();return we}(he,re),xe=[he];he!==Se;)he=he.parent,xe.push(he);for(var Te=xe.length;re!==Se;)xe.splice(Te,0,re),re=re.parent;return xe},ancestors:function(){for(var re=this,he=[re];re=re.parent;)he.push(re);return he},descendants:function(){var re=[];return this.each(function(he){re.push(he)}),re},leaves:function(){var re=[];return this.eachBefore(function(he){he.children||re.push(he)}),re},links:function(){var re=this,he=[];return re.each(function(Se){Se!==re&&he.push({source:Se.parent,target:Se})}),he},copy:function(){return c(this).eachBefore(t)}};var a=Array.prototype.slice;function s(re){for(var he,Se,xe=0,Te=(re=function(Pe){for(var De,ve,we=Pe.length;we;)ve=Math.random()*we--|0,De=Pe[we],Pe[we]=Pe[ve],Pe[ve]=De;return Pe}(a.call(re))).length,Ae=[];xe<Te;)he=re[xe],Se&&p(Se,he)?++xe:(Se=m(Ae=l(Ae,he)),xe=0);return Se}function l(re,he){var Se,xe;if(f(he,re))return[he];for(Se=0;Se<re.length;++Se)if(u(he,re[Se])&&f(h(re[Se],he),re))return[re[Se],he];for(Se=0;Se<re.length-1;++Se)for(xe=Se+1;xe<re.length;++xe)if(u(h(re[Se],re[xe]),he)&&u(h(re[Se],he),re[xe])&&u(h(re[xe],he),re[Se])&&f(g(re[Se],re[xe],he),re))return[re[Se],re[xe],he];throw new Error}function u(re,he){var Se=re.r-he.r,xe=he.x-re.x,Te=he.y-re.y;return Se<0||Se*Se<xe*xe+Te*Te}function p(re,he){var Se=re.r-he.r+1e-6,xe=he.x-re.x,Te=he.y-re.y;return Se>0&&Se*Se>xe*xe+Te*Te}function f(re,he){for(var Se=0;Se<he.length;++Se)if(!p(re,he[Se]))return!1;return!0}function m(re){switch(re.length){case 1:return{x:(he=re[0]).x,y:he.y,r:he.r};case 2:return h(re[0],re[1]);case 3:return g(re[0],re[1],re[2])}var he}function h(re,he){var Se=re.x,xe=re.y,Te=re.r,Ae=he.x,Pe=he.y,De=he.r,ve=Ae-Se,we=Pe-xe,Ee=De-Te,Fe=Math.sqrt(ve*ve+we*we);return{x:(Se+Ae+ve/Fe*Ee)/2,y:(xe+Pe+we/Fe*Ee)/2,r:(Fe+Te+De)/2}}function g(re,he,Se){var xe=re.x,Te=re.y,Ae=re.r,Pe=he.x,De=he.y,ve=he.r,we=Se.x,Ee=Se.y,Fe=Se.r,Le=xe-Pe,je=xe-we,Ge=Te-De,Je=Te-Ee,rt=ve-Ae,ot=Fe-Ae,yt=xe*xe+Te*Te-Ae*Ae,_t=yt-Pe*Pe-De*De+ve*ve,mt=yt-we*we-Ee*Ee+Fe*Fe,tt=je*Ge-Le*Je,Qe=(Ge*mt-Je*_t)/(2*tt)-xe,Dt=(Je*rt-Ge*ot)/tt,zt=(je*_t-Le*mt)/(2*tt)-Te,pt=(Le*ot-je*rt)/tt,vt=Dt*Dt+pt*pt-1,We=2*(Ae+Qe*Dt+zt*pt),Ze=Qe*Qe+zt*zt-Ae*Ae,Ne=-(vt?(We+Math.sqrt(We*We-4*vt*Ze))/(2*vt):Ze/We);return{x:xe+Qe+Dt*Ne,y:Te+zt+pt*Ne,r:Ne}}function v(re,he,Se){var xe,Te,Ae,Pe,De=re.x-he.x,ve=re.y-he.y,we=De*De+ve*ve;we?(Te=he.r+Se.r,Te*=Te,Pe=re.r+Se.r,Te>(Pe*=Pe)?(xe=(we+Pe-Te)/(2*we),Ae=Math.sqrt(Math.max(0,Pe/we-xe*xe)),Se.x=re.x-xe*De-Ae*ve,Se.y=re.y-xe*ve+Ae*De):(xe=(we+Te-Pe)/(2*we),Ae=Math.sqrt(Math.max(0,Te/we-xe*xe)),Se.x=he.x+xe*De-Ae*ve,Se.y=he.y+xe*ve+Ae*De)):(Se.x=he.x+Se.r,Se.y=he.y)}function x(re,he){var Se=re.r+he.r-1e-6,xe=he.x-re.x,Te=he.y-re.y;return Se>0&&Se*Se>xe*xe+Te*Te}function y(re){var he=re._,Se=re.next._,xe=he.r+Se.r,Te=(he.x*Se.r+Se.x*he.r)/xe,Ae=(he.y*Se.r+Se.y*he.r)/xe;return Te*Te+Ae*Ae}function A(re){this._=re,this.next=null,this.previous=null}function d(re){if(!(Te=re.length))return 0;var he,Se,xe,Te,Ae,Pe,De,ve,we,Ee,Fe;if((he=re[0]).x=0,he.y=0,!(Te>1))return he.r;if(Se=re[1],he.x=-Se.r,Se.x=he.r,Se.y=0,!(Te>2))return he.r+Se.r;v(Se,he,xe=re[2]),he=new A(he),Se=new A(Se),xe=new A(xe),he.next=xe.previous=Se,Se.next=he.previous=xe,xe.next=Se.previous=he;e:for(De=3;De<Te;++De){v(he._,Se._,xe=re[De]),xe=new A(xe),ve=Se.next,we=he.previous,Ee=Se._.r,Fe=he._.r;do if(Ee<=Fe){if(x(ve._,xe._)){Se=ve,he.next=Se,Se.previous=he,--De;continue e}Ee+=ve._.r,ve=ve.next}else{if(x(we._,xe._)){(he=we).next=Se,Se.previous=he,--De;continue e}Fe+=we._.r,we=we.previous}while(ve!==we.next);for(xe.previous=he,xe.next=Se,he.next=Se.previous=Se=xe,Ae=y(he);(xe=xe.next)!==Se;)(Pe=y(xe))<Ae&&(he=xe,Ae=Pe);Se=he.next}for(he=[Se._],xe=Se;(xe=xe.next)!==Se;)he.push(xe._);for(xe=s(he),De=0;De<Te;++De)(he=re[De]).x-=xe.x,he.y-=xe.y;return xe.r}function S(re){return d(re),re}function k(re){if(typeof re!="function")throw new Error;return re}function E(){return 0}function L(re){return function(){return re}}function O(re){return Math.sqrt(re.value)}function P(){var re=null,he=1,Se=1,xe=E;function Te(Ae){return Ae.x=he/2,Ae.y=Se/2,re?Ae.eachBefore(F(re)).eachAfter(U(xe,.5)).eachBefore(I(1)):Ae.eachBefore(F(O)).eachAfter(U(E,1)).eachAfter(U(xe,Ae.r/Math.min(he,Se))).eachBefore(I(Math.min(he,Se)/(2*Ae.r))),Ae}return Te.radius=function(Ae){return arguments.length?(re=(Pe=Ae)==null?null:k(Pe),Te):re;var Pe},Te.size=function(Ae){return arguments.length?(he=+Ae[0],Se=+Ae[1],Te):[he,Se]},Te.padding=function(Ae){return arguments.length?(xe=typeof Ae=="function"?Ae:L(+Ae),Te):xe},Te}function F(re){return function(he){he.children||(he.r=Math.max(0,+re(he)||0))}}function U(re,he){return function(Se){if(xe=Se.children){var xe,Te,Ae,Pe=xe.length,De=re(Se)*he||0;if(De)for(Te=0;Te<Pe;++Te)xe[Te].r+=De;if(Ae=d(xe),De)for(Te=0;Te<Pe;++Te)xe[Te].r-=De;Se.r=Ae+De}}}function I(re){return function(he){var Se=he.parent;he.r*=re,Se&&(he.x=Se.x+re*he.x,he.y=Se.y+re*he.y)}}function N(re){re.x0=Math.round(re.x0),re.y0=Math.round(re.y0),re.x1=Math.round(re.x1),re.y1=Math.round(re.y1)}function W(re,he,Se,xe,Te){for(var Ae,Pe=re.children,De=-1,ve=Pe.length,we=re.value&&(xe-he)/re.value;++De<ve;)(Ae=Pe[De]).y0=Se,Ae.y1=Te,Ae.x0=he,Ae.x1=he+=Ae.value*we}function B(){var re=1,he=1,Se=0,xe=!1;function Te(Ae){var Pe=Ae.height+1;return Ae.x0=Ae.y0=Se,Ae.x1=re,Ae.y1=he/Pe,Ae.eachBefore(function(De,ve){return function(we){we.children&&W(we,we.x0,De*(we.depth+1)/ve,we.x1,De*(we.depth+2)/ve);var Ee=we.x0,Fe=we.y0,Le=we.x1-Se,je=we.y1-Se;Le<Ee&&(Ee=Le=(Ee+Le)/2),je<Fe&&(Fe=je=(Fe+je)/2),we.x0=Ee,we.y0=Fe,we.x1=Le,we.y1=je}}(he,Pe)),xe&&Ae.eachBefore(N),Ae}return Te.round=function(Ae){return arguments.length?(xe=!!Ae,Te):xe},Te.size=function(Ae){return arguments.length?(re=+Ae[0],he=+Ae[1],Te):[re,he]},Te.padding=function(Ae){return arguments.length?(Se=+Ae,Te):Se},Te}var V="$",q={depth:-1},ne={};function $(re){return re.id}function K(re){return re.parentId}function ee(){var re=$,he=K;function Se(xe){var Te,Ae,Pe,De,ve,we,Ee,Fe=xe.length,Le=new Array(Fe),je={};for(Ae=0;Ae<Fe;++Ae)Te=xe[Ae],ve=Le[Ae]=new n(Te),(we=re(Te,Ae,xe))!=null&&(we+="")&&(je[Ee=V+(ve.id=we)]=Ee in je?ne:ve);for(Ae=0;Ae<Fe;++Ae)if(ve=Le[Ae],(we=he(xe[Ae],Ae,xe))!=null&&(we+="")){if(!(De=je[V+we]))throw new Error("missing: "+we);if(De===ne)throw new Error("ambiguous: "+we);De.children?De.children.push(ve):De.children=[ve],ve.parent=De}else{if(Pe)throw new Error("multiple roots");Pe=ve}if(!Pe)throw new Error("no root");if(Pe.parent=q,Pe.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--Fe}).eachBefore(i),Pe.parent=null,Fe>0)throw new Error("cycle");return Pe}return Se.id=function(xe){return arguments.length?(re=k(xe),Se):re},Se.parentId=function(xe){return arguments.length?(he=k(xe),Se):he},Se}function J(re,he){return re.parent===he.parent?1:2}function Z(re){var he=re.children;return he?he[0]:re.t}function te(re){var he=re.children;return he?he[he.length-1]:re.t}function oe(re,he,Se){var xe=Se/(he.i-re.i);he.c-=xe,he.s+=Se,re.c+=xe,he.z+=Se,he.m+=Se}function se(re,he,Se){return re.a.parent===he.parent?re.a:Se}function ce(re,he){this._=re,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=he}function ye(){var re=J,he=1,Se=1,xe=null;function Te(ve){var we=function(ot){for(var yt,_t,mt,tt,Qe,Dt=new ce(ot,0),zt=[Dt];yt=zt.pop();)if(mt=yt._.children)for(yt.children=new Array(Qe=mt.length),tt=Qe-1;tt>=0;--tt)zt.push(_t=yt.children[tt]=new ce(mt[tt],tt)),_t.parent=yt;return(Dt.parent=new ce(null,0)).children=[Dt],Dt}(ve);if(we.eachAfter(Ae),we.parent.m=-we.z,we.eachBefore(Pe),xe)ve.eachBefore(De);else{var Ee=ve,Fe=ve,Le=ve;ve.eachBefore(function(ot){ot.x<Ee.x&&(Ee=ot),ot.x>Fe.x&&(Fe=ot),ot.depth>Le.depth&&(Le=ot)});var je=Ee===Fe?1:re(Ee,Fe)/2,Ge=je-Ee.x,Je=he/(Fe.x+je+Ge),rt=Se/(Le.depth||1);ve.eachBefore(function(ot){ot.x=(ot.x+Ge)*Je,ot.y=ot.depth*rt})}return ve}function Ae(ve){var we=ve.children,Ee=ve.parent.children,Fe=ve.i?Ee[ve.i-1]:null;if(we){(function(je){for(var Ge,Je=0,rt=0,ot=je.children,yt=ot.length;--yt>=0;)(Ge=ot[yt]).z+=Je,Ge.m+=Je,Je+=Ge.s+(rt+=Ge.c)})(ve);var Le=(we[0].z+we[we.length-1].z)/2;Fe?(ve.z=Fe.z+re(ve._,Fe._),ve.m=ve.z-Le):ve.z=Le}else Fe&&(ve.z=Fe.z+re(ve._,Fe._));ve.parent.A=function(je,Ge,Je){if(Ge){for(var rt,ot=je,yt=je,_t=Ge,mt=ot.parent.children[0],tt=ot.m,Qe=yt.m,Dt=_t.m,zt=mt.m;_t=te(_t),ot=Z(ot),_t&&ot;)mt=Z(mt),(yt=te(yt)).a=je,(rt=_t.z+Dt-ot.z-tt+re(_t._,ot._))>0&&(oe(se(_t,je,Je),je,rt),tt+=rt,Qe+=rt),Dt+=_t.m,tt+=ot.m,zt+=mt.m,Qe+=yt.m;_t&&!te(yt)&&(yt.t=_t,yt.m+=Dt-Qe),ot&&!Z(mt)&&(mt.t=ot,mt.m+=tt-zt,Je=je)}return Je}(ve,Fe,ve.parent.A||Ee[0])}function Pe(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function De(ve){ve.x*=he,ve.y=ve.depth*Se}return Te.separation=function(ve){return arguments.length?(re=ve,Te):re},Te.size=function(ve){return arguments.length?(xe=!1,he=+ve[0],Se=+ve[1],Te):xe?null:[he,Se]},Te.nodeSize=function(ve){return arguments.length?(xe=!0,he=+ve[0],Se=+ve[1],Te):xe?[he,Se]:null},Te}function me(re,he,Se,xe,Te){for(var Ae,Pe=re.children,De=-1,ve=Pe.length,we=re.value&&(Te-Se)/re.value;++De<ve;)(Ae=Pe[De]).x0=he,Ae.x1=xe,Ae.y0=Se,Ae.y1=Se+=Ae.value*we}ce.prototype=Object.create(n.prototype);var fe=(1+Math.sqrt(5))/2;function pe(re,he,Se,xe,Te,Ae){for(var Pe,De,ve,we,Ee,Fe,Le,je,Ge,Je,rt,ot=[],yt=he.children,_t=0,mt=0,tt=yt.length,Qe=he.value;_t<tt;){ve=Te-Se,we=Ae-xe;do Ee=yt[mt++].value;while(!Ee&&mt<tt);for(Fe=Le=Ee,rt=Ee*Ee*(Je=Math.max(we/ve,ve/we)/(Qe*re)),Ge=Math.max(Le/rt,rt/Fe);mt<tt;++mt){if(Ee+=De=yt[mt].value,De<Fe&&(Fe=De),De>Le&&(Le=De),rt=Ee*Ee*Je,(je=Math.max(Le/rt,rt/Fe))>Ge){Ee-=De;break}Ge=je}ot.push(Pe={value:Ee,dice:ve<we,children:yt.slice(_t,mt)}),Pe.dice?W(Pe,Se,xe,Te,Qe?xe+=we*Ee/Qe:Ae):me(Pe,Se,xe,Qe?Se+=ve*Ee/Qe:Te,Ae),Qe-=Ee,_t=mt}return ot}var ge=function re(he){function Se(xe,Te,Ae,Pe,De){pe(he,xe,Te,Ae,Pe,De)}return Se.ratio=function(xe){return re((xe=+xe)>1?xe:1)},Se}(fe);function ke(){var re=ge,he=!1,Se=1,xe=1,Te=[0],Ae=E,Pe=E,De=E,ve=E,we=E;function Ee(Le){return Le.x0=Le.y0=0,Le.x1=Se,Le.y1=xe,Le.eachBefore(Fe),Te=[0],he&&Le.eachBefore(N),Le}function Fe(Le){var je=Te[Le.depth],Ge=Le.x0+je,Je=Le.y0+je,rt=Le.x1-je,ot=Le.y1-je;rt<Ge&&(Ge=rt=(Ge+rt)/2),ot<Je&&(Je=ot=(Je+ot)/2),Le.x0=Ge,Le.y0=Je,Le.x1=rt,Le.y1=ot,Le.children&&(je=Te[Le.depth+1]=Ae(Le)/2,Ge+=we(Le)-je,Je+=Pe(Le)-je,(rt-=De(Le)-je)<Ge&&(Ge=rt=(Ge+rt)/2),(ot-=ve(Le)-je)<Je&&(Je=ot=(Je+ot)/2),re(Le,Ge,Je,rt,ot))}return Ee.round=function(Le){return arguments.length?(he=!!Le,Ee):he},Ee.size=function(Le){return arguments.length?(Se=+Le[0],xe=+Le[1],Ee):[Se,xe]},Ee.tile=function(Le){return arguments.length?(re=k(Le),Ee):re},Ee.padding=function(Le){return arguments.length?Ee.paddingInner(Le).paddingOuter(Le):Ee.paddingInner()},Ee.paddingInner=function(Le){return arguments.length?(Ae=typeof Le=="function"?Le:L(+Le),Ee):Ae},Ee.paddingOuter=function(Le){return arguments.length?Ee.paddingTop(Le).paddingRight(Le).paddingBottom(Le).paddingLeft(Le):Ee.paddingTop()},Ee.paddingTop=function(Le){return arguments.length?(Pe=typeof Le=="function"?Le:L(+Le),Ee):Pe},Ee.paddingRight=function(Le){return arguments.length?(De=typeof Le=="function"?Le:L(+Le),Ee):De},Ee.paddingBottom=function(Le){return arguments.length?(ve=typeof Le=="function"?Le:L(+Le),Ee):ve},Ee.paddingLeft=function(Le){return arguments.length?(we=typeof Le=="function"?Le:L(+Le),Ee):we},Ee}function Ce(re,he,Se,xe,Te){var Ae,Pe,De=re.children,ve=De.length,we=new Array(ve+1);for(we[0]=Pe=Ae=0;Ae<ve;++Ae)we[Ae+1]=Pe+=De[Ae].value;(function Ee(Fe,Le,je,Ge,Je,rt,ot){if(Fe>=Le-1){var yt=De[Fe];return yt.x0=Ge,yt.y0=Je,yt.x1=rt,void(yt.y1=ot)}for(var _t=we[Fe],mt=je/2+_t,tt=Fe+1,Qe=Le-1;tt<Qe;){var Dt=tt+Qe>>>1;we[Dt]<mt?tt=Dt+1:Qe=Dt}mt-we[tt-1]<we[tt]-mt&&Fe+1<tt&&--tt;var zt=we[tt]-_t,pt=je-zt;if(rt-Ge>ot-Je){var vt=(Ge*pt+rt*zt)/je;Ee(Fe,tt,zt,Ge,Je,vt,ot),Ee(tt,Le,pt,vt,Je,rt,ot)}else{var We=(Je*pt+ot*zt)/je;Ee(Fe,tt,zt,Ge,Je,rt,We),Ee(tt,Le,pt,Ge,We,rt,ot)}})(0,ve,re.value,he,Se,xe,Te)}function de(re,he,Se,xe,Te){(1&re.depth?me:W)(re,he,Se,xe,Te)}var ae=function re(he){function Se(xe,Te,Ae,Pe,De){if((ve=xe._squarify)&&ve.ratio===he)for(var ve,we,Ee,Fe,Le,je=-1,Ge=ve.length,Je=xe.value;++je<Ge;){for(Ee=(we=ve[je]).children,Fe=we.value=0,Le=Ee.length;Fe<Le;++Fe)we.value+=Ee[Fe].value;we.dice?W(we,Te,Ae,Pe,Ae+=(De-Ae)*we.value/Je):me(we,Te,Ae,Te+=(Pe-Te)*we.value/Je,De),Je-=we.value}else xe._squarify=ve=pe(he,xe,Te,Ae,Pe,De),ve.ratio=he}return Se.ratio=function(xe){return re((xe=+xe)>1?xe:1)},Se}(fe)},10132:function(R,C,e){"use strict";e.d(C,{ak:function(){return p}});var _=Math.PI,T=2*_,r=1e-6,w=T-r;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new b}b.prototype=c.prototype={constructor:b,moveTo:function(f,m){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+m)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,m){this._+="L"+(this._x1=+f)+","+(this._y1=+m)},quadraticCurveTo:function(f,m,h,g){this._+="Q"+ +f+","+ +m+","+(this._x1=+h)+","+(this._y1=+g)},bezierCurveTo:function(f,m,h,g,v,x){this._+="C"+ +f+","+ +m+","+ +h+","+ +g+","+(this._x1=+v)+","+(this._y1=+x)},arcTo:function(f,m,h,g,v){f=+f,m=+m,h=+h,g=+g,v=+v;var x=this._x1,y=this._y1,A=h-f,d=g-m,S=x-f,k=y-m,E=S*S+k*k;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=f)+","+(this._y1=m);else if(E>r)if(Math.abs(k*A-d*S)>r&&v){var L=h-x,O=g-y,P=A*A+d*d,F=L*L+O*O,U=Math.sqrt(P),I=Math.sqrt(E),N=v*Math.tan((_-Math.acos((P+E-F)/(2*U*I)))/2),W=N/I,B=N/U;Math.abs(W-1)>r&&(this._+="L"+(f+W*S)+","+(m+W*k)),this._+="A"+v+","+v+",0,0,"+ +(k*L>S*O)+","+(this._x1=f+B*A)+","+(this._y1=m+B*d)}else this._+="L"+(this._x1=f)+","+(this._y1=m)},arc:function(f,m,h,g,v,x){f=+f,m=+m,x=!!x;var y=(h=+h)*Math.cos(g),A=h*Math.sin(g),d=f+y,S=m+A,k=1^x,E=x?g-v:v-g;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+d+","+S:(Math.abs(this._x1-d)>r||Math.abs(this._y1-S)>r)&&(this._+="L"+d+","+S),h&&(E<0&&(E=E%T+T),E>w?this._+="A"+h+","+h+",0,1,"+k+","+(f-y)+","+(m-A)+"A"+h+","+h+",0,1,"+k+","+(this._x1=d)+","+(this._y1=S):E>r&&(this._+="A"+h+","+h+",0,"+ +(E>=_)+","+k+","+(this._x1=f+h*Math.cos(v))+","+(this._y1=m+h*Math.sin(v))))},rect:function(f,m,h,g){this._+="M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+m)+"h"+ +h+"v"+ +g+"h"+-h+"Z"},toString:function(){return this._}};var o=c,t=Array.prototype.slice;function i(f){return function(){return f}}function n(f){return f[0]}function a(f){return f[1]}function s(f){return f.source}function l(f){return f.target}function u(f,m,h,g,v){f.moveTo(m,h),f.bezierCurveTo(m=(m+g)/2,h,m,v,g,v)}function p(){return function(f){var m=s,h=l,g=n,v=a,x=null;function y(){var A,d=t.call(arguments),S=m.apply(this,d),k=h.apply(this,d);if(x||(x=A=o()),f(x,+g.apply(this,(d[0]=S,d)),+v.apply(this,d),+g.apply(this,(d[0]=k,d)),+v.apply(this,d)),A)return x=null,A+""||null}return y.source=function(A){return arguments.length?(m=A,y):m},y.target=function(A){return arguments.length?(h=A,y):h},y.x=function(A){return arguments.length?(g=typeof A=="function"?A:i(+A),y):g},y.y=function(A){return arguments.length?(v=typeof A=="function"?A:i(+A),y):v},y.context=function(A){return arguments.length?(x=A??null,y):x},y}(u)}},94336:function(R,C,e){"use strict";e.d(C,{Yn:function(){return s},m_:function(){return n},E9:function(){return l}});var _=e(8208),T=e(58931),r=e(46192),w=e(68936),b=e(32171),c=e(53528);function o(tt){if(0<=tt.y&&tt.y<100){var Qe=new Date(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L);return Qe.setFullYear(tt.y),Qe}return new Date(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L)}function t(tt){if(0<=tt.y&&tt.y<100){var Qe=new Date(Date.UTC(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L));return Qe.setUTCFullYear(tt.y),Qe}return new Date(Date.UTC(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L))}function i(tt,Qe,Dt){return{y:tt,m:Qe,d:Dt,H:0,M:0,S:0,L:0}}function n(tt){var Qe=tt.dateTime,Dt=tt.date,zt=tt.time,pt=tt.periods,vt=tt.days,We=tt.shortDays,Ze=tt.months,Ne=tt.shortMonths,Xe=v(pt),st=x(pt),lt=v(vt),xt=x(vt),bt=v(We),Ve=x(We),Be=v(Ze),at=x(Ze),ht=v(Ne),dt=x(Ne),it={a:function(Ft){return We[Ft.getDay()]},A:function(Ft){return vt[Ft.getDay()]},b:function(Ft){return Ne[Ft.getMonth()]},B:function(Ft){return Ze[Ft.getMonth()]},c:null,d:ee,e:ee,f:se,H:J,I:Z,j:te,L:oe,m:ce,M:ye,p:function(Ft){return pt[+(Ft.getHours()>=12)]},q:function(Ft){return 1+~~(Ft.getMonth()/3)},Q:_t,s:mt,S:me,u:fe,U:pe,V:ge,w:ke,W:Ce,x:null,X:null,y:de,Y:ae,Z:re,"%":yt},kt={a:function(Ft){return We[Ft.getUTCDay()]},A:function(Ft){return vt[Ft.getUTCDay()]},b:function(Ft){return Ne[Ft.getUTCMonth()]},B:function(Ft){return Ze[Ft.getUTCMonth()]},c:null,d:he,e:he,f:Pe,H:Se,I:xe,j:Te,L:Ae,m:De,M:ve,p:function(Ft){return pt[+(Ft.getUTCHours()>=12)]},q:function(Ft){return 1+~~(Ft.getUTCMonth()/3)},Q:_t,s:mt,S:we,u:Ee,U:Fe,V:Le,w:je,W:Ge,x:null,X:null,y:Je,Y:rt,Z:ot,"%":yt},Tt={a:function(Ft,jt,rn){var nn=bt.exec(jt.slice(rn));return nn?(Ft.w=Ve[nn[0].toLowerCase()],rn+nn[0].length):-1},A:function(Ft,jt,rn){var nn=lt.exec(jt.slice(rn));return nn?(Ft.w=xt[nn[0].toLowerCase()],rn+nn[0].length):-1},b:function(Ft,jt,rn){var nn=ht.exec(jt.slice(rn));return nn?(Ft.m=dt[nn[0].toLowerCase()],rn+nn[0].length):-1},B:function(Ft,jt,rn){var nn=Be.exec(jt.slice(rn));return nn?(Ft.m=at[nn[0].toLowerCase()],rn+nn[0].length):-1},c:function(Ft,jt,rn){return At(Ft,Qe,jt,rn)},d:U,e:U,f:q,H:N,I:N,j:I,L:V,m:F,M:W,p:function(Ft,jt,rn){var nn=Xe.exec(jt.slice(rn));return nn?(Ft.p=st[nn[0].toLowerCase()],rn+nn[0].length):-1},q:P,Q:$,s:K,S:B,u:A,U:d,V:S,w:y,W:k,x:function(Ft,jt,rn){return At(Ft,Dt,jt,rn)},X:function(Ft,jt,rn){return At(Ft,zt,jt,rn)},y:L,Y:E,Z:O,"%":ne};function St(Ft,jt){return function(rn){var nn,on,Ht,$t=[],bn=-1,ln=0,Kt=Ft.length;for(rn instanceof Date||(rn=new Date(+rn));++bn<Kt;)Ft.charCodeAt(bn)===37&&($t.push(Ft.slice(ln,bn)),(on=u[nn=Ft.charAt(++bn)])!=null?nn=Ft.charAt(++bn):on=nn==="e"?" ":"0",(Ht=jt[nn])&&(nn=Ht(rn,on)),$t.push(nn),ln=bn+1);return $t.push(Ft.slice(ln,bn)),$t.join("")}}function wt(Ft,jt){return function(rn){var nn,on,Ht=i(1900,void 0,1);if(At(Ht,Ft,rn+="",0)!=rn.length)return null;if("Q"in Ht)return new Date(Ht.Q);if("s"in Ht)return new Date(1e3*Ht.s+("L"in Ht?Ht.L:0));if(jt&&!("Z"in Ht)&&(Ht.Z=0),"p"in Ht&&(Ht.H=Ht.H%12+12*Ht.p),Ht.m===void 0&&(Ht.m="q"in Ht?Ht.q:0),"V"in Ht){if(Ht.V<1||Ht.V>53)return null;"w"in Ht||(Ht.w=1),"Z"in Ht?(on=(nn=t(i(Ht.y,0,1))).getUTCDay(),nn=on>4||on===0?_.ot.ceil(nn):(0,_.ot)(nn),nn=T.c.offset(nn,7*(Ht.V-1)),Ht.y=nn.getUTCFullYear(),Ht.m=nn.getUTCMonth(),Ht.d=nn.getUTCDate()+(Ht.w+6)%7):(on=(nn=o(i(Ht.y,0,1))).getDay(),nn=on>4||on===0?r.qT.ceil(nn):(0,r.qT)(nn),nn=w.c.offset(nn,7*(Ht.V-1)),Ht.y=nn.getFullYear(),Ht.m=nn.getMonth(),Ht.d=nn.getDate()+(Ht.w+6)%7)}else("W"in Ht||"U"in Ht)&&("w"in Ht||(Ht.w="u"in Ht?Ht.u%7:"W"in Ht?1:0),on="Z"in Ht?t(i(Ht.y,0,1)).getUTCDay():o(i(Ht.y,0,1)).getDay(),Ht.m=0,Ht.d="W"in Ht?(Ht.w+6)%7+7*Ht.W-(on+5)%7:Ht.w+7*Ht.U-(on+6)%7);return"Z"in Ht?(Ht.H+=Ht.Z/100|0,Ht.M+=Ht.Z%100,t(Ht)):o(Ht)}}function At(Ft,jt,rn,nn){for(var on,Ht,$t=0,bn=jt.length,ln=rn.length;$t<bn;){if(nn>=ln)return-1;if((on=jt.charCodeAt($t++))===37){if(on=jt.charAt($t++),!(Ht=Tt[on in u?jt.charAt($t++):on])||(nn=Ht(Ft,rn,nn))<0)return-1}else if(on!=rn.charCodeAt(nn++))return-1}return nn}return it.x=St(Dt,it),it.X=St(zt,it),it.c=St(Qe,it),kt.x=St(Dt,kt),kt.X=St(zt,kt),kt.c=St(Qe,kt),{format:function(Ft){var jt=St(Ft+="",it);return jt.toString=function(){return Ft},jt},parse:function(Ft){var jt=wt(Ft+="",!1);return jt.toString=function(){return Ft},jt},utcFormat:function(Ft){var jt=St(Ft+="",kt);return jt.toString=function(){return Ft},jt},utcParse:function(Ft){var jt=wt(Ft+="",!0);return jt.toString=function(){return Ft},jt}}}var a,s,l,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,f=/^%/,m=/[\\^$*+?|[\]().{}]/g;function h(tt,Qe,Dt){var zt=tt<0?"-":"",pt=(zt?-tt:tt)+"",vt=pt.length;return zt+(vt<Dt?new Array(Dt-vt+1).join(Qe)+pt:pt)}function g(tt){return tt.replace(m,"\\$&")}function v(tt){return new RegExp("^(?:"+tt.map(g).join("|")+")","i")}function x(tt){for(var Qe={},Dt=-1,zt=tt.length;++Dt<zt;)Qe[tt[Dt].toLowerCase()]=Dt;return Qe}function y(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+1));return zt?(tt.w=+zt[0],Dt+zt[0].length):-1}function A(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+1));return zt?(tt.u=+zt[0],Dt+zt[0].length):-1}function d(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.U=+zt[0],Dt+zt[0].length):-1}function S(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.V=+zt[0],Dt+zt[0].length):-1}function k(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.W=+zt[0],Dt+zt[0].length):-1}function E(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+4));return zt?(tt.y=+zt[0],Dt+zt[0].length):-1}function L(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.y=+zt[0]+(+zt[0]>68?1900:2e3),Dt+zt[0].length):-1}function O(tt,Qe,Dt){var zt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Qe.slice(Dt,Dt+6));return zt?(tt.Z=zt[1]?0:-(zt[2]+(zt[3]||"00")),Dt+zt[0].length):-1}function P(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+1));return zt?(tt.q=3*zt[0]-3,Dt+zt[0].length):-1}function F(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.m=zt[0]-1,Dt+zt[0].length):-1}function U(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.d=+zt[0],Dt+zt[0].length):-1}function I(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+3));return zt?(tt.m=0,tt.d=+zt[0],Dt+zt[0].length):-1}function N(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.H=+zt[0],Dt+zt[0].length):-1}function W(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.M=+zt[0],Dt+zt[0].length):-1}function B(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+2));return zt?(tt.S=+zt[0],Dt+zt[0].length):-1}function V(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+3));return zt?(tt.L=+zt[0],Dt+zt[0].length):-1}function q(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt,Dt+6));return zt?(tt.L=Math.floor(zt[0]/1e3),Dt+zt[0].length):-1}function ne(tt,Qe,Dt){var zt=f.exec(Qe.slice(Dt,Dt+1));return zt?Dt+zt[0].length:-1}function $(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt));return zt?(tt.Q=+zt[0],Dt+zt[0].length):-1}function K(tt,Qe,Dt){var zt=p.exec(Qe.slice(Dt));return zt?(tt.s=+zt[0],Dt+zt[0].length):-1}function ee(tt,Qe){return h(tt.getDate(),Qe,2)}function J(tt,Qe){return h(tt.getHours(),Qe,2)}function Z(tt,Qe){return h(tt.getHours()%12||12,Qe,2)}function te(tt,Qe){return h(1+w.c.count((0,b.c)(tt),tt),Qe,3)}function oe(tt,Qe){return h(tt.getMilliseconds(),Qe,3)}function se(tt,Qe){return oe(tt,Qe)+"000"}function ce(tt,Qe){return h(tt.getMonth()+1,Qe,2)}function ye(tt,Qe){return h(tt.getMinutes(),Qe,2)}function me(tt,Qe){return h(tt.getSeconds(),Qe,2)}function fe(tt){var Qe=tt.getDay();return Qe===0?7:Qe}function pe(tt,Qe){return h(r.uU.count((0,b.c)(tt)-1,tt),Qe,2)}function ge(tt,Qe){var Dt=tt.getDay();return tt=Dt>=4||Dt===0?(0,r.kD)(tt):r.kD.ceil(tt),h(r.kD.count((0,b.c)(tt),tt)+((0,b.c)(tt).getDay()===4),Qe,2)}function ke(tt){return tt.getDay()}function Ce(tt,Qe){return h(r.qT.count((0,b.c)(tt)-1,tt),Qe,2)}function de(tt,Qe){return h(tt.getFullYear()%100,Qe,2)}function ae(tt,Qe){return h(tt.getFullYear()%1e4,Qe,4)}function re(tt){var Qe=tt.getTimezoneOffset();return(Qe>0?"-":(Qe*=-1,"+"))+h(Qe/60|0,"0",2)+h(Qe%60,"0",2)}function he(tt,Qe){return h(tt.getUTCDate(),Qe,2)}function Se(tt,Qe){return h(tt.getUTCHours(),Qe,2)}function xe(tt,Qe){return h(tt.getUTCHours()%12||12,Qe,2)}function Te(tt,Qe){return h(1+T.c.count((0,c.c)(tt),tt),Qe,3)}function Ae(tt,Qe){return h(tt.getUTCMilliseconds(),Qe,3)}function Pe(tt,Qe){return Ae(tt,Qe)+"000"}function De(tt,Qe){return h(tt.getUTCMonth()+1,Qe,2)}function ve(tt,Qe){return h(tt.getUTCMinutes(),Qe,2)}function we(tt,Qe){return h(tt.getUTCSeconds(),Qe,2)}function Ee(tt){var Qe=tt.getUTCDay();return Qe===0?7:Qe}function Fe(tt,Qe){return h(_.EV.count((0,c.c)(tt)-1,tt),Qe,2)}function Le(tt,Qe){var Dt=tt.getUTCDay();return tt=Dt>=4||Dt===0?(0,_.yA)(tt):_.yA.ceil(tt),h(_.yA.count((0,c.c)(tt),tt)+((0,c.c)(tt).getUTCDay()===4),Qe,2)}function je(tt){return tt.getUTCDay()}function Ge(tt,Qe){return h(_.ot.count((0,c.c)(tt)-1,tt),Qe,2)}function Je(tt,Qe){return h(tt.getUTCFullYear()%100,Qe,2)}function rt(tt,Qe){return h(tt.getUTCFullYear()%1e4,Qe,4)}function ot(){return"+0000"}function yt(){return"%"}function _t(tt){return+tt}function mt(tt){return Math.floor(+tt/1e3)}a=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s=a.format,a.parse,l=a.utcFormat,a.utcParse},68936:function(R,C,e){"use strict";e.d(C,{m:function(){return w}});var _=e(81628),T=e(69792),r=(0,_.c)(function(b){b.setHours(0,0,0,0)},function(b,c){b.setDate(b.getDate()+c)},function(b,c){return(c-b-(c.getTimezoneOffset()-b.getTimezoneOffset())*T.iy)/T.SK},function(b){return b.getDate()-1});C.c=r;var w=r.range},69792:function(R,C,e){"use strict";e.d(C,{KK:function(){return b},SK:function(){return w},cg:function(){return r},iy:function(){return T},yc:function(){return _}});var _=1e3,T=6e4,r=36e5,w=864e5,b=6048e5},73220:function(R,C,e){"use strict";e.r(C),e.d(C,{timeDay:function(){return p.c},timeDays:function(){return p.m},timeFriday:function(){return f.iB},timeFridays:function(){return f.sJ},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return _.c},timeMillisecond:function(){return r},timeMilliseconds:function(){return w},timeMinute:function(){return n},timeMinutes:function(){return a},timeMonday:function(){return f.qT},timeMondays:function(){return f.QP},timeMonth:function(){return h},timeMonths:function(){return g},timeSaturday:function(){return f.Wc},timeSaturdays:function(){return f.aI},timeSecond:function(){return o},timeSeconds:function(){return t},timeSunday:function(){return f.uU},timeSundays:function(){return f.Ab},timeThursday:function(){return f.kD},timeThursdays:function(){return f.eC},timeTuesday:function(){return f.Mf},timeTuesdays:function(){return f.Oc},timeWednesday:function(){return f.eg},timeWednesdays:function(){return f.sn},timeWeek:function(){return f.uU},timeWeeks:function(){return f.Ab},timeYear:function(){return v.c},timeYears:function(){return v.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return L.od},utcFridays:function(){return L.iG},utcHour:function(){return S},utcHours:function(){return k},utcMillisecond:function(){return r},utcMilliseconds:function(){return w},utcMinute:function(){return y},utcMinutes:function(){return A},utcMonday:function(){return L.ot},utcMondays:function(){return L.iO},utcMonth:function(){return P},utcMonths:function(){return F},utcSaturday:function(){return L.Ad},utcSaturdays:function(){return L.K8},utcSecond:function(){return o},utcSeconds:function(){return t},utcSunday:function(){return L.EV},utcSundays:function(){return L.Wq},utcThursday:function(){return L.yA},utcThursdays:function(){return L.ob},utcTuesday:function(){return L.sG},utcTuesdays:function(){return L.kl},utcWednesday:function(){return L._6},utcWednesdays:function(){return L.W_},utcWeek:function(){return L.EV},utcWeeks:function(){return L.Wq},utcYear:function(){return U.c},utcYears:function(){return U.i}});var _=e(81628),T=(0,_.c)(function(){},function(I,N){I.setTime(+I+N)},function(I,N){return N-I});T.every=function(I){return I=Math.floor(I),isFinite(I)&&I>0?I>1?(0,_.c)(function(N){N.setTime(Math.floor(N/I)*I)},function(N,W){N.setTime(+N+W*I)},function(N,W){return(W-N)/I}):T:null};var r=T,w=T.range,b=e(69792),c=(0,_.c)(function(I){I.setTime(I-I.getMilliseconds())},function(I,N){I.setTime(+I+N*b.yc)},function(I,N){return(N-I)/b.yc},function(I){return I.getUTCSeconds()}),o=c,t=c.range,i=(0,_.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.yc)},function(I,N){I.setTime(+I+N*b.iy)},function(I,N){return(N-I)/b.iy},function(I){return I.getMinutes()}),n=i,a=i.range,s=(0,_.c)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*b.yc-I.getMinutes()*b.iy)},function(I,N){I.setTime(+I+N*b.cg)},function(I,N){return(N-I)/b.cg},function(I){return I.getHours()}),l=s,u=s.range,p=e(68936),f=e(46192),m=(0,_.c)(function(I){I.setDate(1),I.setHours(0,0,0,0)},function(I,N){I.setMonth(I.getMonth()+N)},function(I,N){return N.getMonth()-I.getMonth()+12*(N.getFullYear()-I.getFullYear())},function(I){return I.getMonth()}),h=m,g=m.range,v=e(32171),x=(0,_.c)(function(I){I.setUTCSeconds(0,0)},function(I,N){I.setTime(+I+N*b.iy)},function(I,N){return(N-I)/b.iy},function(I){return I.getUTCMinutes()}),y=x,A=x.range,d=(0,_.c)(function(I){I.setUTCMinutes(0,0,0)},function(I,N){I.setTime(+I+N*b.cg)},function(I,N){return(N-I)/b.cg},function(I){return I.getUTCHours()}),S=d,k=d.range,E=e(58931),L=e(8208),O=(0,_.c)(function(I){I.setUTCDate(1),I.setUTCHours(0,0,0,0)},function(I,N){I.setUTCMonth(I.getUTCMonth()+N)},function(I,N){return N.getUTCMonth()-I.getUTCMonth()+12*(N.getUTCFullYear()-I.getUTCFullYear())},function(I){return I.getUTCMonth()}),P=O,F=O.range,U=e(53528)},81628:function(R,C,e){"use strict";e.d(C,{c:function(){return r}});var _=new Date,T=new Date;function r(w,b,c,o){function t(i){return w(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return w(i=new Date(+i)),i},t.ceil=function(i){return w(i=new Date(i-1)),b(i,1),w(i),i},t.round=function(i){var n=t(i),a=t.ceil(i);return i-n<a-i?n:a},t.offset=function(i,n){return b(i=new Date(+i),n==null?1:Math.floor(n)),i},t.range=function(i,n,a){var s,l=[];if(i=t.ceil(i),a=a==null?1:Math.floor(a),!(i<n&&a>0))return l;do l.push(s=new Date(+i)),b(i,a),w(i);while(s<i&&i<n);return l},t.filter=function(i){return r(function(n){if(n>=n)for(;w(n),!i(n);)n.setTime(n-1)},function(n,a){if(n>=n)if(a<0)for(;++a<=0;)for(;b(n,-1),!i(n););else for(;--a>=0;)for(;b(n,1),!i(n););})},c&&(t.count=function(i,n){return _.setTime(+i),T.setTime(+n),w(_),w(T),Math.floor(c(_,T))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(o?function(n){return o(n)%i==0}:function(n){return t.count(0,n)%i==0}):t:null}),t}},58931:function(R,C,e){"use strict";e.d(C,{o:function(){return w}});var _=e(81628),T=e(69792),r=(0,_.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCDate(b.getUTCDate()+c)},function(b,c){return(c-b)/T.SK},function(b){return b.getUTCDate()-1});C.c=r;var w=r.range},8208:function(R,C,e){"use strict";e.d(C,{Ad:function(){return n},EV:function(){return w},K8:function(){return m},W_:function(){return u},Wq:function(){return a},_6:function(){return o},iG:function(){return f},iO:function(){return s},kl:function(){return l},ob:function(){return p},od:function(){return i},ot:function(){return b},sG:function(){return c},yA:function(){return t}});var _=e(81628),T=e(69792);function r(h){return(0,_.c)(function(g){g.setUTCDate(g.getUTCDate()-(g.getUTCDay()+7-h)%7),g.setUTCHours(0,0,0,0)},function(g,v){g.setUTCDate(g.getUTCDate()+7*v)},function(g,v){return(v-g)/T.KK})}var w=r(0),b=r(1),c=r(2),o=r(3),t=r(4),i=r(5),n=r(6),a=w.range,s=b.range,l=c.range,u=o.range,p=t.range,f=i.range,m=n.range},53528:function(R,C,e){"use strict";e.d(C,{i:function(){return r}});var _=e(81628),T=(0,_.c)(function(w){w.setUTCMonth(0,1),w.setUTCHours(0,0,0,0)},function(w,b){w.setUTCFullYear(w.getUTCFullYear()+b)},function(w,b){return b.getUTCFullYear()-w.getUTCFullYear()},function(w){return w.getUTCFullYear()});T.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,_.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/w)*w),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,c){b.setUTCFullYear(b.getUTCFullYear()+c*w)}):null},C.c=T;var r=T.range},46192:function(R,C,e){"use strict";e.d(C,{Ab:function(){return a},Mf:function(){return c},Oc:function(){return l},QP:function(){return s},Wc:function(){return n},aI:function(){return m},eC:function(){return p},eg:function(){return o},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return f},sn:function(){return u},uU:function(){return w}});var _=e(81628),T=e(69792);function r(h){return(0,_.c)(function(g){g.setDate(g.getDate()-(g.getDay()+7-h)%7),g.setHours(0,0,0,0)},function(g,v){g.setDate(g.getDate()+7*v)},function(g,v){return(v-g-(v.getTimezoneOffset()-g.getTimezoneOffset())*T.iy)/T.KK})}var w=r(0),b=r(1),c=r(2),o=r(3),t=r(4),i=r(5),n=r(6),a=w.range,s=b.range,l=c.range,u=o.range,p=t.range,f=i.range,m=n.range},32171:function(R,C,e){"use strict";e.d(C,{Q:function(){return r}});var _=e(81628),T=(0,_.c)(function(w){w.setMonth(0,1),w.setHours(0,0,0,0)},function(w,b){w.setFullYear(w.getFullYear()+b)},function(w,b){return b.getFullYear()-w.getFullYear()},function(w){return w.getFullYear()});T.every=function(w){return isFinite(w=Math.floor(w))&&w>0?(0,_.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/w)*w),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,c){b.setFullYear(b.getFullYear()+c*w)}):null},C.c=T;var r=T.range},64348:function(R,C,e){"use strict";var _=e(39640)(),T=e(53664),r=_&&T("%Object.defineProperty%",!0);if(r)try{r({},"a",{value:1})}catch{r=!1}var w=T("%SyntaxError%"),b=T("%TypeError%"),c=e(2304);R.exports=function(o,t,i){if(!o||typeof o!="object"&&typeof o!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],u=!!c&&c(o,t);if(r)r(o,t,{configurable:s===null&&u?u.configurable:!s,enumerable:n===null&&u?u.enumerable:!n,value:i,writable:a===null&&u?u.writable:!a});else{if(!l&&(n||a||s))throw new w("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");o[t]=i}}},81288:function(R,C,e){"use strict";var _=e(41820),T=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,w=Array.prototype.concat,b=Object.defineProperty,c=e(39640)(),o=b&&c,t=function(n,a,s,l){if(a in n){if(l===!0){if(n[a]===s)return}else if(typeof(u=l)!="function"||r.call(u)!=="[object Function]"||!l())return}var u;o?b(n,a,{configurable:!0,enumerable:!1,value:s,writable:!0}):n[a]=s},i=function(n,a){var s=arguments.length>2?arguments[2]:{},l=_(a);T&&(l=w.call(l,Object.getOwnPropertySymbols(a)));for(var u=0;u<l.length;u+=1)t(n,l[u],a[l[u]],s[l[u]])};i.supportsDescriptors=!!o,R.exports=i},31264:function(R){R.exports=function(){for(var C=0;C<arguments.length;C++)if(arguments[C]!==void 0)return arguments[C]}},63768:function(R){"use strict";R.exports=_;var C=(_.canvas=document.createElement("canvas")).getContext("2d"),e=T([32,126]);function _(r,w){Array.isArray(r)&&(r=r.join(", "));var b,c={},o=16,t=.05;w&&(w.length===2&&typeof w[0]=="number"?b=T(w):Array.isArray(w)?b=w:(w.o?b=T(w.o):w.pairs&&(b=w.pairs),w.fontSize&&(o=w.fontSize),w.threshold!=null&&(t=w.threshold))),b||(b=e),C.font=o+"px "+r;for(var i=0;i<b.length;i++){var n=b[i],a=C.measureText(n[0]).width+C.measureText(n[1]).width,s=C.measureText(n).width;if(Math.abs(a-s)>o*t){var l=(s-a)/o;c[n]=1e3*l}}return c}function T(r){for(var w=[],b=r[0];b<=r[1];b++)for(var c=String.fromCharCode(b),o=r[0];o<r[1];o++){var t=c+String.fromCharCode(o);w.push(t)}return w}_.createPairs=T,_.ascii=e},22235:function(R,C,e){var _=e(49972),T=e(48816),r={M:"moveTo",C:"bezierCurveTo"};R.exports=function(w,b){w.beginPath(),T(_(b)).forEach(function(c){var o=c[0],t=c.slice(1);w[r[o]].apply(w,t)}),w.closePath()}},72512:function(R){R.exports=function(C){switch(C){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(R){"use strict";function C(e,_,T){var r=0|e[T];if(r<=0)return[];var w,b=new Array(r);if(T===e.length-1)for(w=0;w<r;++w)b[w]=_;else for(w=0;w<r;++w)b[w]=C(e,_,T+1);return b}R.exports=function(e,_){switch(_===void 0&&(_=0),typeof e){case"number":if(e>0)return function(T,r){var w,b;for(w=new Array(T),b=0;b<T;++b)w[b]=r;return w}(0|e,_);break;case"object":if(typeof e.length=="number")return C(e,_,0)}return[]}},28912:function(R){"use strict";function C(S,k,E){E=E||2;var L,O,P,F,U,I,N,W=k&&k.length,B=W?k[0]*E:S.length,V=e(S,0,B,E,!0),q=[];if(!V||V.next===V.prev)return q;if(W&&(V=function($,K,ee,J){var Z,te,oe,se=[];for(Z=0,te=K.length;Z<te;Z++)(oe=e($,K[Z]*J,Z<te-1?K[Z+1]*J:$.length,J,!1))===oe.next&&(oe.steiner=!0),se.push(a(oe));for(se.sort(o),Z=0;Z<se.length;Z++)t(se[Z],ee),ee=_(ee,ee.next);return ee}(S,k,V,E)),S.length>80*E){L=P=S[0],O=F=S[1];for(var ne=E;ne<B;ne+=E)(U=S[ne])<L&&(L=U),(I=S[ne+1])<O&&(O=I),U>P&&(P=U),I>F&&(F=I);N=(N=Math.max(P-L,F-O))!==0?1/N:0}return T(V,q,E,L,O,N),q}function e(S,k,E,L,O){var P,F;if(O===d(S,k,E,L)>0)for(P=k;P<E;P+=L)F=x(P,S[P],S[P+1],F);else for(P=E-L;P>=k;P-=L)F=x(P,S[P],S[P+1],F);return F&&p(F,F.next)&&(y(F),F=F.next),F}function _(S,k){if(!S)return S;k||(k=S);var E,L=S;do if(E=!1,L.steiner||!p(L,L.next)&&u(L.prev,L,L.next)!==0)L=L.next;else{if(y(L),(L=k=L.prev)===L.next)break;E=!0}while(E||L!==k);return k}function T(S,k,E,L,O,P,F){if(S){!F&&P&&function(W,B,V,q){var ne=W;do ne.z===null&&(ne.z=n(ne.x,ne.y,B,V,q)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==W);ne.prevZ.nextZ=null,ne.prevZ=null,function($){var K,ee,J,Z,te,oe,se,ce,ye=1;do{for(ee=$,$=null,te=null,oe=0;ee;){for(oe++,J=ee,se=0,K=0;K<ye&&(se++,J=J.nextZ);K++);for(ce=ye;se>0||ce>0&&J;)se!==0&&(ce===0||!J||ee.z<=J.z)?(Z=ee,ee=ee.nextZ,se--):(Z=J,J=J.nextZ,ce--),te?te.nextZ=Z:$=Z,Z.prevZ=te,te=Z;ee=J}te.nextZ=null,ye*=2}while(oe>1)}(ne)}(S,L,O,P);for(var U,I,N=S;S.prev!==S.next;)if(U=S.prev,I=S.next,P?w(S,L,O,P):r(S))k.push(U.i/E),k.push(S.i/E),k.push(I.i/E),y(S),S=I.next,N=I.next;else if((S=I)===N){F?F===1?T(S=b(_(S),k,E),k,E,L,O,P,2):F===2&&c(S,k,E,L,O,P):T(_(S),k,E,L,O,P,1);break}}}function r(S){var k=S.prev,E=S,L=S.next;if(u(k,E,L)>=0)return!1;for(var O=S.next.next;O!==S.prev;){if(s(k.x,k.y,E.x,E.y,L.x,L.y,O.x,O.y)&&u(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function w(S,k,E,L){var O=S.prev,P=S,F=S.next;if(u(O,P,F)>=0)return!1;for(var U=O.x<P.x?O.x<F.x?O.x:F.x:P.x<F.x?P.x:F.x,I=O.y<P.y?O.y<F.y?O.y:F.y:P.y<F.y?P.y:F.y,N=O.x>P.x?O.x>F.x?O.x:F.x:P.x>F.x?P.x:F.x,W=O.y>P.y?O.y>F.y?O.y:F.y:P.y>F.y?P.y:F.y,B=n(U,I,k,E,L),V=n(N,W,k,E,L),q=S.prevZ,ne=S.nextZ;q&&q.z>=B&&ne&&ne.z<=V;){if(q!==S.prev&&q!==S.next&&s(O.x,O.y,P.x,P.y,F.x,F.y,q.x,q.y)&&u(q.prev,q,q.next)>=0||(q=q.prevZ,ne!==S.prev&&ne!==S.next&&s(O.x,O.y,P.x,P.y,F.x,F.y,ne.x,ne.y)&&u(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;q&&q.z>=B;){if(q!==S.prev&&q!==S.next&&s(O.x,O.y,P.x,P.y,F.x,F.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;ne&&ne.z<=V;){if(ne!==S.prev&&ne!==S.next&&s(O.x,O.y,P.x,P.y,F.x,F.y,ne.x,ne.y)&&u(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function b(S,k,E){var L=S;do{var O=L.prev,P=L.next.next;!p(O,P)&&f(O,L,L.next,P)&&g(O,P)&&g(P,O)&&(k.push(O.i/E),k.push(L.i/E),k.push(P.i/E),y(L),y(L.next),L=S=P),L=L.next}while(L!==S);return _(L)}function c(S,k,E,L,O,P){var F=S;do{for(var U=F.next.next;U!==F.prev;){if(F.i!==U.i&&l(F,U)){var I=v(F,U);return F=_(F,F.next),I=_(I,I.next),T(F,k,E,L,O,P),void T(I,k,E,L,O,P)}U=U.next}F=F.next}while(F!==S)}function o(S,k){return S.x-k.x}function t(S,k){if(k=function(L,O){var P,F=O,U=L.x,I=L.y,N=-1/0;do{if(I<=F.y&&I>=F.next.y&&F.next.y!==F.y){var W=F.x+(I-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(W<=U&&W>N){if(N=W,W===U){if(I===F.y)return F;if(I===F.next.y)return F.next}P=F.x<F.next.x?F:F.next}}F=F.next}while(F!==O);if(!P)return null;if(U===N)return P;var B,V=P,q=P.x,ne=P.y,$=1/0;F=P;do U>=F.x&&F.x>=q&&U!==F.x&&s(I<ne?U:N,I,q,ne,I<ne?N:U,I,F.x,F.y)&&(B=Math.abs(I-F.y)/(U-F.x),g(F,L)&&(B<$||B===$&&(F.x>P.x||F.x===P.x&&i(P,F)))&&(P=F,$=B)),F=F.next;while(F!==V);return P}(S,k),k){var E=v(k,S);_(k,k.next),_(E,E.next)}}function i(S,k){return u(S.prev,S,k.prev)<0&&u(k.next,S,S.next)<0}function n(S,k,E,L,O){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*O)|S<<8))|S<<4))|S<<2))|S<<1))|(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=32767*(k-L)*O)|k<<8))|k<<4))|k<<2))|k<<1))<<1}function a(S){var k=S,E=S;do(k.x<E.x||k.x===E.x&&k.y<E.y)&&(E=k),k=k.next;while(k!==S);return E}function s(S,k,E,L,O,P,F,U){return(O-F)*(k-U)-(S-F)*(P-U)>=0&&(S-F)*(L-U)-(E-F)*(k-U)>=0&&(E-F)*(P-U)-(O-F)*(L-U)>=0}function l(S,k){return S.next.i!==k.i&&S.prev.i!==k.i&&!function(E,L){var O=E;do{if(O.i!==E.i&&O.next.i!==E.i&&O.i!==L.i&&O.next.i!==L.i&&f(O,O.next,E,L))return!0;O=O.next}while(O!==E);return!1}(S,k)&&(g(S,k)&&g(k,S)&&function(E,L){var O=E,P=!1,F=(E.x+L.x)/2,U=(E.y+L.y)/2;do O.y>U!=O.next.y>U&&O.next.y!==O.y&&F<(O.next.x-O.x)*(U-O.y)/(O.next.y-O.y)+O.x&&(P=!P),O=O.next;while(O!==E);return P}(S,k)&&(u(S.prev,S,k.prev)||u(S,k.prev,k))||p(S,k)&&u(S.prev,S,S.next)>0&&u(k.prev,k,k.next)>0)}function u(S,k,E){return(k.y-S.y)*(E.x-k.x)-(k.x-S.x)*(E.y-k.y)}function p(S,k){return S.x===k.x&&S.y===k.y}function f(S,k,E,L){var O=h(u(S,k,E)),P=h(u(S,k,L)),F=h(u(E,L,S)),U=h(u(E,L,k));return O!==P&&F!==U||!(O!==0||!m(S,E,k))||!(P!==0||!m(S,L,k))||!(F!==0||!m(E,S,L))||!(U!==0||!m(E,k,L))}function m(S,k,E){return k.x<=Math.max(S.x,E.x)&&k.x>=Math.min(S.x,E.x)&&k.y<=Math.max(S.y,E.y)&&k.y>=Math.min(S.y,E.y)}function h(S){return S>0?1:S<0?-1:0}function g(S,k){return u(S.prev,S,S.next)<0?u(S,k,S.next)>=0&&u(S,S.prev,k)>=0:u(S,k,S.prev)<0||u(S,S.next,k)<0}function v(S,k){var E=new A(S.i,S.x,S.y),L=new A(k.i,k.x,k.y),O=S.next,P=k.prev;return S.next=k,k.prev=S,E.next=O,O.prev=E,L.next=E,E.prev=L,P.next=L,L.prev=P,L}function x(S,k,E,L){var O=new A(S,k,E);return L?(O.next=L.next,O.prev=L,L.next.prev=O,L.next=O):(O.prev=O,O.next=O),O}function y(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function A(S,k,E){this.i=S,this.x=k,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function d(S,k,E,L){for(var O=0,P=k,F=E-L;P<E;P+=L)O+=(S[F]-S[P])*(S[P+1]+S[F+1]),F=P;return O}R.exports=C,R.exports.default=C,C.deviation=function(S,k,E,L){var O=k&&k.length,P=O?k[0]*E:S.length,F=Math.abs(d(S,0,P,E));if(O)for(var U=0,I=k.length;U<I;U++){var N=k[U]*E,W=U<I-1?k[U+1]*E:S.length;F-=Math.abs(d(S,N,W,E))}var B=0;for(U=0;U<L.length;U+=3){var V=L[U]*E,q=L[U+1]*E,ne=L[U+2]*E;B+=Math.abs((S[V]-S[ne])*(S[q+1]-S[V+1])-(S[V]-S[q])*(S[ne+1]-S[V+1]))}return F===0&&B===0?0:Math.abs((B-F)/F)},C.flatten=function(S){for(var k=S[0][0].length,E={vertices:[],holes:[],dimensions:k},L=0,O=0;O<S.length;O++){for(var P=0;P<S[O].length;P++)for(var F=0;F<k;F++)E.vertices.push(S[O][P][F]);O>0&&(L+=S[O-1].length,E.holes.push(L))}return E}},6688:function(R,C,e){var _=e(78484);R.exports=function(T,r){var w,b=[],c=[],o=[],t={},i=[];function n(g){o[g]=!1,t.hasOwnProperty(g)&&Object.keys(t[g]).forEach(function(v){delete t[g][v],o[v]&&n(v)})}function a(g){var v,x,y=!1;for(c.push(g),o[g]=!0,v=0;v<i[g].length;v++)(x=i[g][v])===w?(s(w,c),y=!0):o[x]||(y=a(x));if(y)n(g);else for(v=0;v<i[g].length;v++){x=i[g][v];var A=t[x];A||(A={},t[x]=A),A[x]=!0}return c.pop(),y}function s(g,v){var x=[].concat(v).concat(g);r?r(a):b.push(x)}function l(g){(function(E){for(var L=0;L<T.length;L++)L<E&&(T[L]=[]),T[L]=T[L].filter(function(O){return O>=E})})(g);for(var v,x=_(T).components.filter(function(E){return E.length>1}),y=1/0,A=0;A<x.length;A++)for(var d=0;d<x[A].length;d++)x[A][d]<y&&(y=x[A][d],v=A);var S=x[v];if(!S)return!1;var k=T.map(function(E,L){return S.indexOf(L)===-1?[]:E.filter(function(O){return S.indexOf(O)!==-1})});return{leastVertex:y,adjList:k}}w=0;for(var u=T.length;w<u;){var p=l(w);if(w=p.leastVertex,i=p.adjList){for(var f=0;f<i.length;f++)for(var m=0;m<i[f].length;m++){var h=i[f][m];o[+h]=!1,t[h]={}}a(w),w+=1}else w=u}return r?void 0:b}},41476:function(R,C,e){"use strict";var _=e(9252);R.exports=function(){return _(this).length=0,this}},74772:function(R,C,e){"use strict";R.exports=e(44716)()?Array.from:e(80816)},44716:function(R){"use strict";R.exports=function(){var C,e,_=Array.from;return typeof _=="function"&&(e=_(C=["raz","dwa"]),!!(e&&e!==C&&e[1]==="dwa"))}},80816:function(R,C,e){"use strict";var _=e(92664).iterator,T=e(60948),r=e(17024),w=e(81304),b=e(34044),c=e(9252),o=e(42584),t=e(29768),i=Array.isArray,n=Function.prototype.call,a={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;R.exports=function(l){var u,p,f,m,h,g,v,x,y,A,d=arguments[1],S=arguments[2];if(l=Object(c(l)),o(d)&&b(d),this&&this!==Array&&r(this))u=this;else{if(!d){if(T(l))return(h=l.length)!==1?Array.apply(null,l):((m=new Array(1))[0]=l[0],m);if(i(l)){for(m=new Array(h=l.length),p=0;p<h;++p)m[p]=l[p];return m}}m=[]}if(!i(l)){if((y=l[_])!==void 0){for(v=b(y).call(l),u&&(m=new u),x=v.next(),p=0;!x.done;)A=d?n.call(d,S,x.value,p):x.value,u?(a.value=A,s(m,p,a)):m[p]=A,x=v.next(),++p;h=p}else if(t(l)){for(h=l.length,u&&(m=new u),p=0,f=0;p<h;++p)A=l[p],p+1<h&&(g=A.charCodeAt(0))>=55296&&g<=56319&&(A+=l[++p]),A=d?n.call(d,S,A,f):A,u?(a.value=A,s(m,f,a)):m[f]=A,++f;h=f}}if(h===void 0)for(h=w(l.length),u&&(m=new u(h)),p=0;p<h;++p)A=d?n.call(d,S,l[p],p):l[p],u?(a.value=A,s(m,p,a)):m[p]=A;return u&&(a.value=null,m.length=h),m}},60948:function(R){"use strict";var C=Object.prototype.toString,e=C.call(function(){return arguments}());R.exports=function(_){return C.call(_)===e}},17024:function(R){"use strict";var C=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);R.exports=function(_){return typeof _=="function"&&e(C.call(_))}},33208:function(R){"use strict";R.exports=function(){}},85608:function(R,C,e){"use strict";R.exports=e(37328)()?Math.sign:e(92928)},37328:function(R){"use strict";R.exports=function(){var C=Math.sign;return typeof C=="function"&&C(10)===1&&C(-20)===-1}},92928:function(R){"use strict";R.exports=function(C){return C=Number(C),isNaN(C)||C===0?C:C>0?1:-1}},96936:function(R,C,e){"use strict";var _=e(85608),T=Math.abs,r=Math.floor;R.exports=function(w){return isNaN(w)?0:(w=Number(w))!==0&&isFinite(w)?_(w)*r(T(w)):w}},81304:function(R,C,e){"use strict";var _=e(96936),T=Math.max;R.exports=function(r){return T(0,_(r))}},14428:function(R,C,e){"use strict";var _=e(34044),T=e(9252),r=Function.prototype.bind,w=Function.prototype.call,b=Object.keys,c=Object.prototype.propertyIsEnumerable;R.exports=function(o,t){return function(i,n){var a,s=arguments[2],l=arguments[3];return i=Object(T(i)),_(n),a=b(i),l&&a.sort(typeof l=="function"?r.call(l,i):void 0),typeof o!="function"&&(o=a[o]),w.call(o,a,function(u,p){return c.call(i,u)?w.call(n,s,i[u],u,i,p):t})}}},38452:function(R,C,e){"use strict";R.exports=e(96276)()?Object.assign:e(81892)},96276:function(R){"use strict";R.exports=function(){var C,e=Object.assign;return typeof e=="function"&&(e(C={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),C.foo+C.bar+C.trzy==="razdwatrzy")}},81892:function(R,C,e){"use strict";var _=e(54768),T=e(9252),r=Math.max;R.exports=function(w,b){var c,o,t,i=r(arguments.length,2);for(w=Object(T(w)),t=function(n){try{w[n]=b[n]}catch(a){c||(c=a)}},o=1;o<i;++o)_(b=arguments[o]).forEach(t);if(c!==void 0)throw c;return w}},95920:function(R,C,e){"use strict";var _=e(74772),T=e(38452),r=e(9252);R.exports=function(w){var b=Object(r(w)),c=arguments[1],o=Object(arguments[2]);if(b!==w&&!c)return b;var t={};return c?_(c,function(i){(o.ensure||i in w)&&(t[i]=w[i])}):T(t,w),t}},14452:function(R,C,e){"use strict";var _,T,r,w,b=Object.create;e(63092)()||(_=e(8672)),R.exports=_?_.level!==1?b:(T={},r={},w={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(c){r[c]=c!=="__proto__"?w:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(T,r),Object.defineProperty(_,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:T}),function(c,o){return b(c===null?T:c,o)}):b},42748:function(R,C,e){"use strict";R.exports=e(14428)("forEach")},69127:function(R,C,e){"use strict";var _=e(42584),T={function:!0,object:!0};R.exports=function(r){return _(r)&&T[typeof r]||!1}},42584:function(R,C,e){"use strict";var _=e(33208)();R.exports=function(T){return T!==_&&T!==null}},54768:function(R,C,e){"use strict";R.exports=e(87888)()?Object.keys:e(89592)},87888:function(R){"use strict";R.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(R,C,e){"use strict";var _=e(42584),T=Object.keys;R.exports=function(r){return T(_(r)?Object(r):r)}},84323:function(R,C,e){"use strict";var _=e(34044),T=e(42748),r=Function.prototype.call;R.exports=function(w,b){var c={},o=arguments[2];return _(b),T(w,function(t,i,n,a){c[i]=r.call(b,o,t,i,n,a)}),c}},50868:function(R,C,e){"use strict";var _=e(42584),T=Array.prototype.forEach,r=Object.create;R.exports=function(w){var b=r(null);return T.call(arguments,function(c){_(c)&&function(o,t){var i;for(i in o)t[i]=o[i]}(Object(c),b)}),b}},69932:function(R,C,e){"use strict";R.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(R){"use strict";var C=Object.create,e=Object.getPrototypeOf,_={};R.exports=function(){var T=Object.setPrototypeOf;return typeof T=="function"&&e(T((arguments[0]||C)(null),_))===_}},8672:function(R,C,e){"use strict";var _,T,r,w,b=e(69127),c=e(9252),o=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};_=function(n,a){if(c(n),a===null||b(a))return n;throw new TypeError("Prototype must be null or an object")},R.exports=(T=function(){var n,a=Object.create(null),s={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(a,s)}catch{}if(Object.getPrototypeOf(a)===s)return{set:n,level:2}}return a.__proto__=s,Object.getPrototypeOf(a)===s?{level:2}:((a={}).__proto__=s,Object.getPrototypeOf(a)===s&&{level:1})}(),T?(T.level===2?T.set?(w=T.set,r=function(n,a){return w.call(_(n,a),a),n}):r=function(n,a){return _(n,a).__proto__=a,n}:r=function n(a,s){var l;return _(a,s),(l=o.call(n.nullPolyfill,a))&&delete n.nullPolyfill.__proto__,s===null&&(s=n.nullPolyfill),a.__proto__=s,l&&t(n.nullPolyfill,"__proto__",i),a},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:T.level})):null),e(14452)},34044:function(R){"use strict";R.exports=function(C){if(typeof C!="function")throw new TypeError(C+" is not a function");return C}},92584:function(R,C,e){"use strict";var _=e(69127);R.exports=function(T){if(!_(T))throw new TypeError(T+" is not an Object");return T}},9252:function(R,C,e){"use strict";var _=e(42584);R.exports=function(T){if(!_(T))throw new TypeError("Cannot use null or undefined");return T}},71056:function(R,C,e){"use strict";R.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(R){"use strict";var C="razdwatrzy";R.exports=function(){return typeof C.contains=="function"&&C.contains("dwa")===!0&&C.contains("foo")===!1}},93040:function(R){"use strict";var C=String.prototype.indexOf;R.exports=function(e){return C.call(this,e,arguments[1])>-1}},29768:function(R){"use strict";var C=Object.prototype.toString,e=C.call("");R.exports=function(_){return typeof _=="string"||_&&typeof _=="object"&&(_ instanceof String||C.call(_)===e)||!1}},82252:function(R){"use strict";var C=Object.create(null),e=Math.random;R.exports=function(){var _;do _=e().toString(36).slice(2);while(C[_]);return _}},52104:function(R,C,e){"use strict";var _,T=e(69932),r=e(71056),w=e(21092),b=e(92664),c=e(85512),o=Object.defineProperty;_=R.exports=function(t,i){if(!(this instanceof _))throw new TypeError("Constructor requires 'new'");c.call(this,t),i=i?r.call(i,"key+value")?"key+value":r.call(i,"key")?"key":"value":"value",o(this,"__kind__",w("",i))},T&&T(_,c),delete _.prototype.constructor,_.prototype=Object.create(c.prototype,{_resolve:w(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),o(_.prototype,b.toStringTag,w("c","Array Iterator"))},76024:function(R,C,e){"use strict";var _=e(60948),T=e(34044),r=e(29768),w=e(76252),b=Array.isArray,c=Function.prototype.call,o=Array.prototype.some;R.exports=function(t,i){var n,a,s,l,u,p,f,m,h=arguments[2];if(b(t)||_(t)?n="array":r(t)?n="string":t=w(t),T(i),s=function(){l=!0},n!=="array")if(n!=="string")for(a=t.next();!a.done;){if(c.call(i,h,a.value,s),l)return;a=t.next()}else for(p=t.length,u=0;u<p&&(f=t[u],u+1<p&&(m=f.charCodeAt(0))>=55296&&m<=56319&&(f+=t[++u]),c.call(i,h,f,s),!l);++u);else o.call(t,function(g){return c.call(i,h,g,s),l})}},76252:function(R,C,e){"use strict";var _=e(60948),T=e(29768),r=e(52104),w=e(80940),b=e(52891),c=e(92664).iterator;R.exports=function(o){return typeof b(o)[c]=="function"?o[c]():_(o)?new r(o):T(o)?new w(o):new r(o)}},85512:function(R,C,e){"use strict";var _,T=e(41476),r=e(38452),w=e(34044),b=e(9252),c=e(21092),o=e(27940),t=e(92664),i=Object.defineProperty,n=Object.defineProperties;R.exports=_=function(a,s){if(!(this instanceof _))throw new TypeError("Constructor requires 'new'");n(this,{__list__:c("w",b(a)),__context__:c("w",s),__nextIndex__:c("w",0)}),s&&(w(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete _.prototype.constructor,n(_.prototype,r({_next:c(function(){var a;if(this.__list__)return this.__redo__&&(a=this.__redo__.shift())!==void 0?a:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(a){return a===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:c(function(a){return this.__list__[a]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},o({_onAdd:c(function(a){a>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,l){s>=a&&(this.__redo__[l]=++s)},this),this.__redo__.push(a)):i(this,"__redo__",c("c",[a])))}),_onDelete:c(function(a){var s;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((s=this.__redo__.indexOf(a))!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(l,u){l>a&&(this.__redo__[u]=--l)},this)))}),_onClear:c(function(){this.__redo__&&T.call(this.__redo__),this.__nextIndex__=0})}))),i(_.prototype,t.iterator,c(function(){return this}))},76368:function(R,C,e){"use strict";var _=e(60948),T=e(42584),r=e(29768),w=e(92664).iterator,b=Array.isArray;R.exports=function(c){return!(!T(c)||!b(c)&&!r(c)&&!_(c)&&typeof c[w]!="function")}},80940:function(R,C,e){"use strict";var _,T=e(69932),r=e(21092),w=e(92664),b=e(85512),c=Object.defineProperty;_=R.exports=function(o){if(!(this instanceof _))throw new TypeError("Constructor requires 'new'");o=String(o),b.call(this,o),c(this,"__length__",r("",o.length))},T&&T(_,b),delete _.prototype.constructor,_.prototype=Object.create(b.prototype,{_next:r(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:r(function(o){var t,i=this.__list__[o];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),c(_.prototype,w.toStringTag,r("c","String Iterator"))},52891:function(R,C,e){"use strict";var _=e(76368);R.exports=function(T){if(!_(T))throw new TypeError(T+" is not iterable");return T}},60964:function(R){"use strict";function C(e,_){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var T=Object(e),r=1;r<arguments.length;r++){var w=arguments[r];if(w!=null)for(var b=Object.keys(Object(w)),c=0,o=b.length;c<o;c++){var t=b[c],i=Object.getOwnPropertyDescriptor(w,t);i!==void 0&&i.enumerable&&(T[t]=w[t])}}return T}R.exports={assign:C,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:C})}}},92664:function(R,C,e){"use strict";R.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(R,C,e){"use strict";var _=e(12296),T={object:!0,symbol:!0};R.exports=function(){var r,w=_.Symbol;if(typeof w!="function")return!1;r=w("test symbol");try{String(r)}catch{return!1}return!!T[typeof w.iterator]&&!!T[typeof w.toPrimitive]&&!!T[typeof w.toStringTag]}},53908:function(R){"use strict";R.exports=function(C){return!!C&&(typeof C=="symbol"||!!C.constructor&&C.constructor.name==="Symbol"&&C[C.constructor.toStringTag]==="Symbol")}},96863:function(R,C,e){"use strict";var _=e(21092),T=Object.create,r=Object.defineProperty,w=Object.prototype,b=T(null);R.exports=function(c){for(var o,t,i=0;b[c+(i||"")];)++i;return b[c+=i||""]=!0,r(w,o="@@"+c,_.gs(null,function(n){t||(t=!0,r(this,o,_(n)),t=!1)})),o}},53540:function(R,C,e){"use strict";var _=e(21092),T=e(12296).Symbol;R.exports=function(r){return Object.defineProperties(r,{hasInstance:_("",T&&T.hasInstance||r("hasInstance")),isConcatSpreadable:_("",T&&T.isConcatSpreadable||r("isConcatSpreadable")),iterator:_("",T&&T.iterator||r("iterator")),match:_("",T&&T.match||r("match")),replace:_("",T&&T.replace||r("replace")),search:_("",T&&T.search||r("search")),species:_("",T&&T.species||r("species")),split:_("",T&&T.split||r("split")),toPrimitive:_("",T&&T.toPrimitive||r("toPrimitive")),toStringTag:_("",T&&T.toStringTag||r("toStringTag")),unscopables:_("",T&&T.unscopables||r("unscopables"))})}},73852:function(R,C,e){"use strict";var _=e(21092),T=e(63948),r=Object.create(null);R.exports=function(w){return Object.defineProperties(w,{for:_(function(b){return r[b]?r[b]:r[b]=w(String(b))}),keyFor:_(function(b){var c;for(c in T(b),r)if(r[c]===b)return c})})}},18376:function(R,C,e){"use strict";var _,T,r,w=e(21092),b=e(63948),c=e(12296).Symbol,o=e(96863),t=e(53540),i=e(73852),n=Object.create,a=Object.defineProperties,s=Object.defineProperty;if(typeof c=="function")try{String(c()),r=!0}catch{}else c=null;T=function(l){if(this instanceof T)throw new TypeError("Symbol is not a constructor");return _(l)},R.exports=_=function l(u){var p;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return r?c(u):(p=n(T.prototype),u=u===void 0?"":String(u),a(p,{__description__:w("",u),__name__:w("",o(u))}))},t(_),i(_),a(T.prototype,{constructor:w(_),toString:w("",function(){return this.__name__})}),a(_.prototype,{toString:w(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:w(function(){return b(this)})}),s(_.prototype,_.toPrimitive,w("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),s(_.prototype,_.toStringTag,w("c","Symbol")),s(T.prototype,_.toStringTag,w("c",_.prototype[_.toStringTag])),s(T.prototype,_.toPrimitive,w("c",_.prototype[_.toPrimitive]))},63948:function(R,C,e){"use strict";var _=e(53908);R.exports=function(T){if(!_(T))throw new TypeError(T+" is not a symbol");return T}},60463:function(R,C,e){"use strict";R.exports=e(96979)()?WeakMap:e(64864)},96979:function(R){"use strict";R.exports=function(){var C,e;if(typeof WeakMap!="function")return!1;try{C=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(C)==="[object WeakMap]"&&typeof C.set=="function"&&C.set({},1)===C&&typeof C.delete=="function"&&typeof C.has=="function"&&C.get(e)==="one"}},69876:function(R){"use strict";R.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(R,C,e){"use strict";var _,T=e(42584),r=e(69932),w=e(92584),b=e(9252),c=e(82252),o=e(21092),t=e(76252),i=e(76024),n=e(92664).toStringTag,a=e(69876),s=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;R.exports=_=function(){var f,m=arguments[0];if(!(this instanceof _))throw new TypeError("Constructor requires 'new'");return f=a&&r&&WeakMap!==_?r(new WeakMap,p(this)):this,T(m)&&(s(m)||(m=t(m))),l(f,"__weakMapData__",o("c","$weakMap$"+c())),m&&i(m,function(h){b(h),f.set(h[0],h[1])}),f},a&&(r&&r(_,WeakMap),_.prototype=Object.create(WeakMap.prototype,{constructor:o(_)})),Object.defineProperties(_.prototype,{delete:o(function(f){return!!u.call(w(f),this.__weakMapData__)&&(delete f[this.__weakMapData__],!0)}),get:o(function(f){if(u.call(w(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:o(function(f){return u.call(w(f),this.__weakMapData__)}),set:o(function(f,m){return l(w(f),this.__weakMapData__,o("c",m)),this}),toString:o(function(){return"[object WeakMap]"})}),l(_.prototype,n,o("c","WeakMap"))},61252:function(R){"use strict";var C,e=typeof Reflect=="object"?Reflect:null,_=e&&typeof e.apply=="function"?e.apply:function(u,p,f){return Function.prototype.apply.call(u,p,f)};C=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var T=Number.isNaN||function(u){return u!=u};function r(){r.init.call(this)}R.exports=r,R.exports.once=function(u,p){return new Promise(function(f,m){function h(v){u.removeListener(p,g),m(v)}function g(){typeof u.removeListener=="function"&&u.removeListener("error",h),f([].slice.call(arguments))}l(u,p,g,{once:!0}),p!=="error"&&function(v,x,y){typeof v.on=="function"&&l(v,"error",x,{once:!0})}(u,h)})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var w=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function c(u){return u._maxListeners===void 0?r.defaultMaxListeners:u._maxListeners}function o(u,p,f,m){var h,g,v,x;if(b(f),(g=u._events)===void 0?(g=u._events=Object.create(null),u._eventsCount=0):(g.newListener!==void 0&&(u.emit("newListener",p,f.listener?f.listener:f),g=u._events),v=g[p]),v===void 0)v=g[p]=f,++u._eventsCount;else if(typeof v=="function"?v=g[p]=m?[f,v]:[v,f]:m?v.unshift(f):v.push(f),(h=c(u))>0&&v.length>h&&!v.warned){v.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=u,y.type=p,y.count=v.length,x=y,console&&console.warn&&console.warn(x)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,p,f){var m={fired:!1,wrapFn:void 0,target:u,type:p,listener:f},h=t.bind(m);return h.listener=f,m.wrapFn=h,h}function n(u,p,f){var m=u._events;if(m===void 0)return[];var h=m[p];return h===void 0?[]:typeof h=="function"?f?[h.listener||h]:[h]:f?function(g){for(var v=new Array(g.length),x=0;x<v.length;++x)v[x]=g[x].listener||g[x];return v}(h):s(h,h.length)}function a(u){var p=this._events;if(p!==void 0){var f=p[u];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}function s(u,p){for(var f=new Array(p),m=0;m<p;++m)f[m]=u[m];return f}function l(u,p,f,m){if(typeof u.on=="function")m.once?u.once(p,f):u.on(p,f);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function h(g){m.once&&u.removeEventListener(p,h),f(g)})}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(u){if(typeof u!="number"||u<0||T(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");w=u}}),r.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||T(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(u){for(var p=[],f=1;f<arguments.length;f++)p.push(arguments[f]);var m=u==="error",h=this._events;if(h!==void 0)m=m&&h.error===void 0;else if(!m)return!1;if(m){var g;if(p.length>0&&(g=p[0]),g instanceof Error)throw g;var v=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw v.context=g,v}var x=h[u];if(x===void 0)return!1;if(typeof x=="function")_(x,this,p);else{var y=x.length,A=s(x,y);for(f=0;f<y;++f)_(A[f],this,p)}return!0},r.prototype.addListener=function(u,p){return o(this,u,p,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(u,p){return o(this,u,p,!0)},r.prototype.once=function(u,p){return b(p),this.on(u,i(this,u,p)),this},r.prototype.prependOnceListener=function(u,p){return b(p),this.prependListener(u,i(this,u,p)),this},r.prototype.removeListener=function(u,p){var f,m,h,g,v;if(b(p),(m=this._events)===void 0)return this;if((f=m[u])===void 0)return this;if(f===p||f.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete m[u],m.removeListener&&this.emit("removeListener",u,f.listener||p));else if(typeof f!="function"){for(h=-1,g=f.length-1;g>=0;g--)if(f[g]===p||f[g].listener===p){v=f[g].listener,h=g;break}if(h<0)return this;h===0?f.shift():function(x,y){for(;y+1<x.length;y++)x[y]=x[y+1];x.pop()}(f,h),f.length===1&&(m[u]=f[0]),m.removeListener!==void 0&&this.emit("removeListener",u,v||p)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(u){var p,f,m;if((f=this._events)===void 0)return this;if(f.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):f[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete f[u]),this;if(arguments.length===0){var h,g=Object.keys(f);for(m=0;m<g.length;++m)(h=g[m])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=f[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(m=p.length-1;m>=0;m--)this.removeListener(u,p[m]);return this},r.prototype.listeners=function(u){return n(this,u,!0)},r.prototype.rawListeners=function(u){return n(this,u,!1)},r.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):a.call(u,p)},r.prototype.listenerCount=a,r.prototype.eventNames=function(){return this._eventsCount>0?C(this._events):[]}},39072:function(R){var C=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};R.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return C()}try{return __global__||C()}finally{delete Object.prototype.__global__}}()},12296:function(R,C,e){"use strict";R.exports=e(45072)()?globalThis:e(39072)},45072:function(R){"use strict";R.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(R,C,e){"use strict";var _=e(94576);R.exports=function(T){var r=typeof T;if(r==="string"){var w=T;if((T=+T)==0&&_(w))return!1}else if(r!=="number")return!1;return T-T<1}},47520:function(R,C,e){var _=e(72512);R.exports=function(T,r,w){if(!T)throw new TypeError("must specify data as first parameter");if(w=0|+(w||0),Array.isArray(T)&&T[0]&&typeof T[0][0]=="number"){var b,c,o,t,i=T[0].length,n=T.length*i;r&&typeof r!="string"||(r=new(_(r||"float32"))(n+w));var a=r.length-w;if(n!==a)throw new Error("source length "+n+" ("+i+"x"+T.length+") does not match destination length "+a);for(b=0,o=w;b<T.length;b++)for(c=0;c<i;c++)r[o++]=T[b][c]===null?NaN:T[b][c]}else if(r&&typeof r!="string")r.set(T,w);else{var s=_(r||"float32");if(Array.isArray(T)||r==="array")for(b=0,o=w,t=(r=new s(T.length+w)).length;o<t;o++,b++)r[o]=T[b]===null?NaN:T[b];else w===0?r=new s(T):(r=new s(T.length+w)).set(T,w)}return r}},33888:function(R,C,e){"use strict";var _=e(49395),T=[32,126];R.exports=function(r){var w=(r=r||{}).shape?r.shape:r.canvas?[r.canvas.width,r.canvas.height]:[512,512],b=r.canvas||document.createElement("canvas"),c=r.font,o=typeof r.step=="number"?[r.step,r.step]:r.step||[32,32],t=r.chars||T;if(c&&typeof c!="string"&&(c=_(c)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],n=t[0],a=0;n<=t[1];n++)i[a++]=String.fromCharCode(n);t=i}}else t=String(t).split("");w=w.slice(),b.width=w[0],b.height=w[1];var s=b.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,b.width,b.height),s.font=c,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var l=o[0]/2,u=o[1]/2;for(n=0;n<t.length;n++)s.fillText(t[n],l,u),(l+=o[0])>w[0]-o[0]/2&&(l=o[0]/2,u+=o[1]);return b}},71920:function(R){"use strict";function C(r,w){w||(w={}),(typeof r=="string"||Array.isArray(r))&&(w.family=r);var b=Array.isArray(w.family)?w.family.join(", "):w.family;if(!b)throw Error("`family` must be defined");var c=w.size||w.fontSize||w.em||48,o=w.weight||w.fontWeight||"",t=(r=[w.style||w.fontStyle||"",o,c].join(" ")+"px "+b,w.origin||"top");if(C.cache[b]&&c<=C.cache[b].em)return e(C.cache[b],t);var i=w.canvas||C.canvas,n=i.getContext("2d"),a={upper:w.upper!==void 0?w.upper:"H",lower:w.lower!==void 0?w.lower:"x",descent:w.descent!==void 0?w.descent:"p",ascent:w.ascent!==void 0?w.ascent:"h",tittle:w.tittle!==void 0?w.tittle:"i",overshoot:w.overshoot!==void 0?w.overshoot:"O"},s=Math.ceil(1.5*c);i.height=s,i.width=.5*s,n.font=r;var l="H",u={top:0};n.clearRect(0,0,s,s),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var p=_(n.getImageData(0,0,s,s));n.clearRect(0,0,s,s),n.textBaseline="bottom",n.fillText(l,0,s);var f=_(n.getImageData(0,0,s,s));u.lineHeight=u.bottom=s-f+p,n.clearRect(0,0,s,s),n.textBaseline="alphabetic",n.fillText(l,0,s);var m=s-_(n.getImageData(0,0,s,s))-1+p;u.baseline=u.alphabetic=m,n.clearRect(0,0,s,s),n.textBaseline="middle",n.fillText(l,0,.5*s);var h=_(n.getImageData(0,0,s,s));u.median=u.middle=s-h-1+p-.5*s,n.clearRect(0,0,s,s),n.textBaseline="hanging",n.fillText(l,0,.5*s);var g=_(n.getImageData(0,0,s,s));u.hanging=s-g-1+p-.5*s,n.clearRect(0,0,s,s),n.textBaseline="ideographic",n.fillText(l,0,s);var v=_(n.getImageData(0,0,s,s));if(u.ideographic=s-v-1+p,a.upper&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.upper,0,0),u.upper=_(n.getImageData(0,0,s,s)),u.capHeight=u.baseline-u.upper),a.lower&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.lower,0,0),u.lower=_(n.getImageData(0,0,s,s)),u.xHeight=u.baseline-u.lower),a.tittle&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.tittle,0,0),u.tittle=_(n.getImageData(0,0,s,s))),a.ascent&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.ascent,0,0),u.ascent=_(n.getImageData(0,0,s,s))),a.descent&&(n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.descent,0,0),u.descent=T(n.getImageData(0,0,s,s))),a.overshoot){n.clearRect(0,0,s,s),n.textBaseline="top",n.fillText(a.overshoot,0,0);var x=T(n.getImageData(0,0,s,s));u.overshoot=x-m}for(var y in u)u[y]/=c;return u.em=c,C.cache[b]=u,e(u,t)}function e(r,w){var b={};for(var c in typeof w=="string"&&(w=r[w]),r)c!=="em"&&(b[c]=r[c]-w);return b}function _(r){for(var w=r.height,b=r.data,c=3;c<b.length;c+=4)if(b[c]!==0)return Math.floor(.25*(c-3)/w)}function T(r){for(var w=r.height,b=r.data,c=b.length-1;c>0;c-=4)if(b[c]!==0)return Math.floor(.25*(c-3)/w)}R.exports=C,C.canvas=document.createElement("canvas"),C.cache={}},46492:function(R,C,e){"use strict";var _=e(90720),T=Object.prototype.toString,r=Object.prototype.hasOwnProperty;R.exports=function(w,b,c){if(!_(b))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=c),T.call(w)==="[object Array]"?function(t,i,n){for(var a=0,s=t.length;a<s;a++)r.call(t,a)&&(n==null?i(t[a],a,t):i.call(n,t[a],a,t))}(w,b,o):typeof w=="string"?function(t,i,n){for(var a=0,s=t.length;a<s;a++)n==null?i(t.charAt(a),a,t):i.call(n,t.charAt(a),a,t)}(w,b,o):function(t,i,n){for(var a in t)r.call(t,a)&&(n==null?i(t[a],a,t):i.call(n,t[a],a,t))}(w,b,o)}},74336:function(R){"use strict";var C=Object.prototype.toString,e=Math.max,_=function(T,r){for(var w=[],b=0;b<T.length;b+=1)w[b]=T[b];for(var c=0;c<r.length;c+=1)w[c+T.length]=r[c];return w};R.exports=function(T){var r=this;if(typeof r!="function"||C.apply(r)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var w,b=function(n,a){for(var s=[],l=1,u=0;l<n.length;l+=1,u+=1)s[u]=n[l];return s}(arguments),c=e(0,r.length-b.length),o=[],t=0;t<c;t++)o[t]="$"+t;if(w=Function("binder","return function ("+function(n,a){for(var s="",l=0;l<n.length;l+=1)s+=n[l],l+1<n.length&&(s+=",");return s}(o)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof w){var n=r.apply(this,_(b,arguments));return Object(n)===n?n:this}return r.apply(T,_(b,arguments))}),r.prototype){var i=function(){};i.prototype=r.prototype,w.prototype=new i,i.prototype=null}return w}},8844:function(R,C,e){"use strict";var _=e(74336);R.exports=Function.prototype.bind||_},13380:function(R){R.exports=function(C,e){if(typeof C!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document>"u"&&!e.canvas)return null;var _=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(_.width=e.width),typeof e.height=="number"&&(_.height=e.height);var T,r=e;try{var w=[C];C.indexOf("webgl")===0&&w.push("experimental-"+C);for(var b=0;b<w.length;b++)if(T=_.getContext(w[b],r))return T}catch{T=null}return T||null}},53664:function(R,C,e){"use strict";var _,T=SyntaxError,r=Function,w=TypeError,b=function(L){try{return r('"use strict"; return ('+L+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var o=function(){throw new w},t=c?function(){try{return o}catch{try{return c(arguments,"callee").get}catch{return o}}}():o,i=e(71080)(),n=e(69572)(),a=Object.getPrototypeOf||(n?function(L){return L.__proto__}:null),s={},l=typeof Uint8Array<"u"&&a?a(Uint8Array):_,u={"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":i&&a?a([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":s,"%AsyncGenerator%":s,"%AsyncGeneratorFunction%":s,"%AsyncIteratorPrototype%":s,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":s,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&a?a(a([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i&&a?a(new Map()[Symbol.iterator]()):_,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i&&a?a(new Set()[Symbol.iterator]()):_,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&a?a(""[Symbol.iterator]()):_,"%Symbol%":i?Symbol:_,"%SyntaxError%":T,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":w,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet};if(a)try{null.error}catch(L){var p=a(a(L));u["%Error.prototype%"]=p}var f=function L(O){var P;if(O==="%AsyncFunction%")P=b("async function () {}");else if(O==="%GeneratorFunction%")P=b("function* () {}");else if(O==="%AsyncGeneratorFunction%")P=b("async function* () {}");else if(O==="%AsyncGenerator%"){var F=L("%AsyncGeneratorFunction%");F&&(P=F.prototype)}else if(O==="%AsyncIteratorPrototype%"){var U=L("%AsyncGenerator%");U&&a&&(P=a(U.prototype))}return u[O]=P,P},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},h=e(8844),g=e(92064),v=h.call(Function.call,Array.prototype.concat),x=h.call(Function.apply,Array.prototype.splice),y=h.call(Function.call,String.prototype.replace),A=h.call(Function.call,String.prototype.slice),d=h.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,E=function(L,O){var P,F=L;if(g(m,F)&&(F="%"+(P=m[F])[0]+"%"),g(u,F)){var U=u[F];if(U===s&&(U=f(F)),U===void 0&&!O)throw new w("intrinsic "+L+" exists, but is not available. Please file an issue!");return{alias:P,name:F,value:U}}throw new T("intrinsic "+L+" does not exist!")};R.exports=function(L,O){if(typeof L!="string"||L.length===0)throw new w("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof O!="boolean")throw new w('"allowMissing" argument must be a boolean');if(d(/^%?[^%]*%?$/,L)===null)throw new T("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var P=function(J){var Z=A(J,0,1),te=A(J,-1);if(Z==="%"&&te!=="%")throw new T("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&Z!=="%")throw new T("invalid intrinsic syntax, expected opening `%`");var oe=[];return y(J,S,function(se,ce,ye,me){oe[oe.length]=ye?y(me,k,"$1"):ce||se}),oe}(L),F=P.length>0?P[0]:"",U=E("%"+F+"%",O),I=U.name,N=U.value,W=!1,B=U.alias;B&&(F=B[0],x(P,v([0,1],B)));for(var V=1,q=!0;V<P.length;V+=1){var ne=P[V],$=A(ne,0,1),K=A(ne,-1);if(($==='"'||$==="'"||$==="`"||K==='"'||K==="'"||K==="`")&&$!==K)throw new T("property names with quotes must have matching quotes");if(ne!=="constructor"&&q||(W=!0),g(u,I="%"+(F+="."+ne)+"%"))N=u[I];else if(N!=null){if(!(ne in N)){if(!O)throw new w("base intrinsic for "+L+" exists, but the property is not available.");return}if(c&&V+1>=P.length){var ee=c(N,ne);N=(q=!!ee)&&"get"in ee&&!("originalValue"in ee.get)?ee.get:N[ne]}else q=g(N,ne),N=N[ne];q&&!W&&(u[I]=N)}}return N}},12408:function(R){R.exports=function(C,e){var _=e[0],T=e[1],r=e[2],w=e[3],b=e[4],c=e[5],o=e[6],t=e[7],i=e[8],n=e[9],a=e[10],s=e[11],l=e[12],u=e[13],p=e[14],f=e[15];return C[0]=c*(a*f-s*p)-n*(o*f-t*p)+u*(o*s-t*a),C[1]=-(T*(a*f-s*p)-n*(r*f-w*p)+u*(r*s-w*a)),C[2]=T*(o*f-t*p)-c*(r*f-w*p)+u*(r*t-w*o),C[3]=-(T*(o*s-t*a)-c*(r*s-w*a)+n*(r*t-w*o)),C[4]=-(b*(a*f-s*p)-i*(o*f-t*p)+l*(o*s-t*a)),C[5]=_*(a*f-s*p)-i*(r*f-w*p)+l*(r*s-w*a),C[6]=-(_*(o*f-t*p)-b*(r*f-w*p)+l*(r*t-w*o)),C[7]=_*(o*s-t*a)-b*(r*s-w*a)+i*(r*t-w*o),C[8]=b*(n*f-s*u)-i*(c*f-t*u)+l*(c*s-t*n),C[9]=-(_*(n*f-s*u)-i*(T*f-w*u)+l*(T*s-w*n)),C[10]=_*(c*f-t*u)-b*(T*f-w*u)+l*(T*t-w*c),C[11]=-(_*(c*s-t*n)-b*(T*s-w*n)+i*(T*t-w*c)),C[12]=-(b*(n*p-a*u)-i*(c*p-o*u)+l*(c*a-o*n)),C[13]=_*(n*p-a*u)-i*(T*p-r*u)+l*(T*a-r*n),C[14]=-(_*(c*p-o*u)-b*(T*p-r*u)+l*(T*o-r*c)),C[15]=_*(c*a-o*n)-b*(T*a-r*n)+i*(T*o-r*c),C}},76860:function(R){R.exports=function(C){var e=new Float32Array(16);return e[0]=C[0],e[1]=C[1],e[2]=C[2],e[3]=C[3],e[4]=C[4],e[5]=C[5],e[6]=C[6],e[7]=C[7],e[8]=C[8],e[9]=C[9],e[10]=C[10],e[11]=C[11],e[12]=C[12],e[13]=C[13],e[14]=C[14],e[15]=C[15],e}},64492:function(R){R.exports=function(C,e){return C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3],C[4]=e[4],C[5]=e[5],C[6]=e[6],C[7]=e[7],C[8]=e[8],C[9]=e[9],C[10]=e[10],C[11]=e[11],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15],C}},54212:function(R){R.exports=function(){var C=new Float32Array(16);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},70800:function(R){R.exports=function(C){var e=C[0],_=C[1],T=C[2],r=C[3],w=C[4],b=C[5],c=C[6],o=C[7],t=C[8],i=C[9],n=C[10],a=C[11],s=C[12],l=C[13],u=C[14],p=C[15];return(e*b-_*w)*(n*p-a*u)-(e*c-T*w)*(i*p-a*l)+(e*o-r*w)*(i*u-n*l)+(_*c-T*b)*(t*p-a*s)-(_*o-r*b)*(t*u-n*s)+(T*o-r*c)*(t*l-i*s)}},61784:function(R){R.exports=function(C,e){var _=e[0],T=e[1],r=e[2],w=e[3],b=_+_,c=T+T,o=r+r,t=_*b,i=T*b,n=T*c,a=r*b,s=r*c,l=r*o,u=w*b,p=w*c,f=w*o;return C[0]=1-n-l,C[1]=i+f,C[2]=a-p,C[3]=0,C[4]=i-f,C[5]=1-t-l,C[6]=s+u,C[7]=0,C[8]=a+p,C[9]=s-u,C[10]=1-t-n,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},91616:function(R){R.exports=function(C,e,_){var T,r,w,b=_[0],c=_[1],o=_[2],t=Math.sqrt(b*b+c*c+o*o);return Math.abs(t)<1e-6?null:(b*=t=1/t,c*=t,o*=t,T=Math.sin(e),w=1-(r=Math.cos(e)),C[0]=b*b*w+r,C[1]=c*b*w+o*T,C[2]=o*b*w-c*T,C[3]=0,C[4]=b*c*w-o*T,C[5]=c*c*w+r,C[6]=o*c*w+b*T,C[7]=0,C[8]=b*o*w+c*T,C[9]=c*o*w-b*T,C[10]=o*o*w+r,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C)}},51944:function(R){R.exports=function(C,e,_){var T=e[0],r=e[1],w=e[2],b=e[3],c=T+T,o=r+r,t=w+w,i=T*c,n=T*o,a=T*t,s=r*o,l=r*t,u=w*t,p=b*c,f=b*o,m=b*t;return C[0]=1-(s+u),C[1]=n+m,C[2]=a-f,C[3]=0,C[4]=n-m,C[5]=1-(i+u),C[6]=l+p,C[7]=0,C[8]=a+f,C[9]=l-p,C[10]=1-(i+s),C[11]=0,C[12]=_[0],C[13]=_[1],C[14]=_[2],C[15]=1,C}},69444:function(R){R.exports=function(C,e){return C[0]=e[0],C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=e[1],C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=e[2],C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},48268:function(R){R.exports=function(C,e){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=e[0],C[13]=e[1],C[14]=e[2],C[15]=1,C}},21856:function(R){R.exports=function(C,e){var _=Math.sin(e),T=Math.cos(e);return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=T,C[6]=_,C[7]=0,C[8]=0,C[9]=-_,C[10]=T,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},79216:function(R){R.exports=function(C,e){var _=Math.sin(e),T=Math.cos(e);return C[0]=T,C[1]=0,C[2]=-_,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=_,C[9]=0,C[10]=T,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},57736:function(R){R.exports=function(C,e){var _=Math.sin(e),T=Math.cos(e);return C[0]=T,C[1]=_,C[2]=0,C[3]=0,C[4]=-_,C[5]=T,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},38848:function(R){R.exports=function(C,e,_,T,r,w,b){var c=1/(_-e),o=1/(r-T),t=1/(w-b);return C[0]=2*w*c,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=2*w*o,C[6]=0,C[7]=0,C[8]=(_+e)*c,C[9]=(r+T)*o,C[10]=(b+w)*t,C[11]=-1,C[12]=0,C[13]=0,C[14]=b*w*2*t,C[15]=0,C}},36635:function(R){R.exports=function(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}},36524:function(R,C,e){R.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(R){R.exports=function(C,e){var _=e[0],T=e[1],r=e[2],w=e[3],b=e[4],c=e[5],o=e[6],t=e[7],i=e[8],n=e[9],a=e[10],s=e[11],l=e[12],u=e[13],p=e[14],f=e[15],m=_*c-T*b,h=_*o-r*b,g=_*t-w*b,v=T*o-r*c,x=T*t-w*c,y=r*t-w*o,A=i*u-n*l,d=i*p-a*l,S=i*f-s*l,k=n*p-a*u,E=n*f-s*u,L=a*f-s*p,O=m*L-h*E+g*k+v*S-x*d+y*A;return O?(O=1/O,C[0]=(c*L-o*E+t*k)*O,C[1]=(r*E-T*L-w*k)*O,C[2]=(u*y-p*x+f*v)*O,C[3]=(a*x-n*y-s*v)*O,C[4]=(o*S-b*L-t*d)*O,C[5]=(_*L-r*S+w*d)*O,C[6]=(p*g-l*y-f*h)*O,C[7]=(i*y-a*g+s*h)*O,C[8]=(b*E-c*S+t*A)*O,C[9]=(T*S-_*E-w*A)*O,C[10]=(l*x-u*g+f*m)*O,C[11]=(n*g-i*x-s*m)*O,C[12]=(c*d-b*k-o*A)*O,C[13]=(_*k-T*d+r*A)*O,C[14]=(u*h-l*v-p*m)*O,C[15]=(i*v-n*h+a*m)*O,C):null}},56508:function(R,C,e){var _=e(36635);R.exports=function(T,r,w,b){var c,o,t,i,n,a,s,l,u,p,f=r[0],m=r[1],h=r[2],g=b[0],v=b[1],x=b[2],y=w[0],A=w[1],d=w[2];return Math.abs(f-y)<1e-6&&Math.abs(m-A)<1e-6&&Math.abs(h-d)<1e-6?_(T):(s=f-y,l=m-A,u=h-d,c=v*(u*=p=1/Math.sqrt(s*s+l*l+u*u))-x*(l*=p),o=x*(s*=p)-g*u,t=g*l-v*s,(p=Math.sqrt(c*c+o*o+t*t))?(c*=p=1/p,o*=p,t*=p):(c=0,o=0,t=0),i=l*t-u*o,n=u*c-s*t,a=s*o-l*c,(p=Math.sqrt(i*i+n*n+a*a))?(i*=p=1/p,n*=p,a*=p):(i=0,n=0,a=0),T[0]=c,T[1]=i,T[2]=s,T[3]=0,T[4]=o,T[5]=n,T[6]=l,T[7]=0,T[8]=t,T[9]=a,T[10]=u,T[11]=0,T[12]=-(c*f+o*m+t*h),T[13]=-(i*f+n*m+a*h),T[14]=-(s*f+l*m+u*h),T[15]=1,T)}},80944:function(R){R.exports=function(C,e,_){var T=e[0],r=e[1],w=e[2],b=e[3],c=e[4],o=e[5],t=e[6],i=e[7],n=e[8],a=e[9],s=e[10],l=e[11],u=e[12],p=e[13],f=e[14],m=e[15],h=_[0],g=_[1],v=_[2],x=_[3];return C[0]=h*T+g*c+v*n+x*u,C[1]=h*r+g*o+v*a+x*p,C[2]=h*w+g*t+v*s+x*f,C[3]=h*b+g*i+v*l+x*m,h=_[4],g=_[5],v=_[6],x=_[7],C[4]=h*T+g*c+v*n+x*u,C[5]=h*r+g*o+v*a+x*p,C[6]=h*w+g*t+v*s+x*f,C[7]=h*b+g*i+v*l+x*m,h=_[8],g=_[9],v=_[10],x=_[11],C[8]=h*T+g*c+v*n+x*u,C[9]=h*r+g*o+v*a+x*p,C[10]=h*w+g*t+v*s+x*f,C[11]=h*b+g*i+v*l+x*m,h=_[12],g=_[13],v=_[14],x=_[15],C[12]=h*T+g*c+v*n+x*u,C[13]=h*r+g*o+v*a+x*p,C[14]=h*w+g*t+v*s+x*f,C[15]=h*b+g*i+v*l+x*m,C}},97688:function(R){R.exports=function(C,e,_,T,r,w,b){var c=1/(e-_),o=1/(T-r),t=1/(w-b);return C[0]=-2*c,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*o,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*t,C[11]=0,C[12]=(e+_)*c,C[13]=(r+T)*o,C[14]=(b+w)*t,C[15]=1,C}},51296:function(R){R.exports=function(C,e,_,T,r){var w=1/Math.tan(e/2),b=1/(T-r);return C[0]=w/_,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=w,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=(r+T)*b,C[11]=-1,C[12]=0,C[13]=0,C[14]=2*r*T*b,C[15]=0,C}},63688:function(R){R.exports=function(C,e,_,T){var r=Math.tan(e.upDegrees*Math.PI/180),w=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),o=2/(b+c),t=2/(r+w);return C[0]=o,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=t,C[6]=0,C[7]=0,C[8]=-(b-c)*o*.5,C[9]=(r-w)*t*.5,C[10]=T/(_-T),C[11]=-1,C[12]=0,C[13]=0,C[14]=T*_/(_-T),C[15]=0,C}},30016:function(R){R.exports=function(C,e,_,T){var r,w,b,c,o,t,i,n,a,s,l,u,p,f,m,h,g,v,x,y,A,d,S,k,E=T[0],L=T[1],O=T[2],P=Math.sqrt(E*E+L*L+O*O);return Math.abs(P)<1e-6?null:(E*=P=1/P,L*=P,O*=P,r=Math.sin(_),b=1-(w=Math.cos(_)),c=e[0],o=e[1],t=e[2],i=e[3],n=e[4],a=e[5],s=e[6],l=e[7],u=e[8],p=e[9],f=e[10],m=e[11],h=E*E*b+w,g=L*E*b+O*r,v=O*E*b-L*r,x=E*L*b-O*r,y=L*L*b+w,A=O*L*b+E*r,d=E*O*b+L*r,S=L*O*b-E*r,k=O*O*b+w,C[0]=c*h+n*g+u*v,C[1]=o*h+a*g+p*v,C[2]=t*h+s*g+f*v,C[3]=i*h+l*g+m*v,C[4]=c*x+n*y+u*A,C[5]=o*x+a*y+p*A,C[6]=t*x+s*y+f*A,C[7]=i*x+l*y+m*A,C[8]=c*d+n*S+u*k,C[9]=o*d+a*S+p*k,C[10]=t*d+s*S+f*k,C[11]=i*d+l*S+m*k,e!==C&&(C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C)}},15456:function(R){R.exports=function(C,e,_){var T=Math.sin(_),r=Math.cos(_),w=e[4],b=e[5],c=e[6],o=e[7],t=e[8],i=e[9],n=e[10],a=e[11];return e!==C&&(C[0]=e[0],C[1]=e[1],C[2]=e[2],C[3]=e[3],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[4]=w*r+t*T,C[5]=b*r+i*T,C[6]=c*r+n*T,C[7]=o*r+a*T,C[8]=t*r-w*T,C[9]=i*r-b*T,C[10]=n*r-c*T,C[11]=a*r-o*T,C}},64840:function(R){R.exports=function(C,e,_){var T=Math.sin(_),r=Math.cos(_),w=e[0],b=e[1],c=e[2],o=e[3],t=e[8],i=e[9],n=e[10],a=e[11];return e!==C&&(C[4]=e[4],C[5]=e[5],C[6]=e[6],C[7]=e[7],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[0]=w*r-t*T,C[1]=b*r-i*T,C[2]=c*r-n*T,C[3]=o*r-a*T,C[8]=w*T+t*r,C[9]=b*T+i*r,C[10]=c*T+n*r,C[11]=o*T+a*r,C}},4192:function(R){R.exports=function(C,e,_){var T=Math.sin(_),r=Math.cos(_),w=e[0],b=e[1],c=e[2],o=e[3],t=e[4],i=e[5],n=e[6],a=e[7];return e!==C&&(C[8]=e[8],C[9]=e[9],C[10]=e[10],C[11]=e[11],C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15]),C[0]=w*r+t*T,C[1]=b*r+i*T,C[2]=c*r+n*T,C[3]=o*r+a*T,C[4]=t*r-w*T,C[5]=i*r-b*T,C[6]=n*r-c*T,C[7]=a*r-o*T,C}},68152:function(R){R.exports=function(C,e,_){var T=_[0],r=_[1],w=_[2];return C[0]=e[0]*T,C[1]=e[1]*T,C[2]=e[2]*T,C[3]=e[3]*T,C[4]=e[4]*r,C[5]=e[5]*r,C[6]=e[6]*r,C[7]=e[7]*r,C[8]=e[8]*w,C[9]=e[9]*w,C[10]=e[10]*w,C[11]=e[11]*w,C[12]=e[12],C[13]=e[13],C[14]=e[14],C[15]=e[15],C}},89412:function(R){R.exports=function(C){return"mat4("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+", "+C[9]+", "+C[10]+", "+C[11]+", "+C[12]+", "+C[13]+", "+C[14]+", "+C[15]+")"}},35176:function(R){R.exports=function(C,e,_){var T,r,w,b,c,o,t,i,n,a,s,l,u=_[0],p=_[1],f=_[2];return e===C?(C[12]=e[0]*u+e[4]*p+e[8]*f+e[12],C[13]=e[1]*u+e[5]*p+e[9]*f+e[13],C[14]=e[2]*u+e[6]*p+e[10]*f+e[14],C[15]=e[3]*u+e[7]*p+e[11]*f+e[15]):(T=e[0],r=e[1],w=e[2],b=e[3],c=e[4],o=e[5],t=e[6],i=e[7],n=e[8],a=e[9],s=e[10],l=e[11],C[0]=T,C[1]=r,C[2]=w,C[3]=b,C[4]=c,C[5]=o,C[6]=t,C[7]=i,C[8]=n,C[9]=a,C[10]=s,C[11]=l,C[12]=T*u+c*p+n*f+e[12],C[13]=r*u+o*p+a*f+e[13],C[14]=w*u+t*p+s*f+e[14],C[15]=b*u+i*p+l*f+e[15]),C}},86520:function(R){R.exports=function(C,e){if(C===e){var _=e[1],T=e[2],r=e[3],w=e[6],b=e[7],c=e[11];C[1]=e[4],C[2]=e[8],C[3]=e[12],C[4]=_,C[6]=e[9],C[7]=e[13],C[8]=T,C[9]=w,C[11]=e[14],C[12]=r,C[13]=b,C[14]=c}else C[0]=e[0],C[1]=e[4],C[2]=e[8],C[3]=e[12],C[4]=e[1],C[5]=e[5],C[6]=e[9],C[7]=e[13],C[8]=e[2],C[9]=e[6],C[10]=e[10],C[11]=e[14],C[12]=e[3],C[13]=e[7],C[14]=e[11],C[15]=e[15];return C}},23352:function(R,C,e){"use strict";var _=e(42771),T=e(55616),r=e(28624),w=e(55212),b=e(60463),c=e(72160),o=e(33888),t=e(14144),i=e(51160),n=e(58908),a=e(65819),s=e(23464),l=e(63768),u=e(50896),p=e(71920),f=e(47520),m=e(308).nextPow2,h=new b,g=!1;if(document.body){var v=document.body.appendChild(document.createElement("div"));v.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(v).fontStretch&&(g=!0),document.body.removeChild(v)}var x=function(y){(function(A){return typeof A=="function"&&A._gl&&A.prop&&A.texture&&A.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=w(y),this.shader=h.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||r({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),h.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(y)?y:{})};x.prototype.createShader=function(){var y=this.regl,A=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(d,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(d,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(d,S){return S.atlas.texture},charStep:function(d,S){return S.atlas.step},em:function(d,S){return S.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:A,atlas:{}}},x.prototype.update=function(y){var A=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=T(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(he){return parseFloat(he)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=i(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=f(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=x.baseFontSize+"px sans-serif");var d,S=!1,k=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(he,Se){if(typeof he=="string")try{he=_.parse(he)}catch{he=_.parse(x.baseFontSize+"px "+he)}else{var xe=he.style,Te=he.weight,Ae=he.stretch,Pe=he.variant;he=_.parse(_.stringify(he)),xe&&(he.style=xe),Te&&(he.weight=Te),Ae&&(he.stretch=Ae),Pe&&(he.variant=Pe)}var De=_.stringify({size:x.baseFontSize,family:he.family,stretch:g?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style}),ve=a(he.size),we=Math.round(ve[0]*s(ve[1]));if(we!==A.fontSize[Se]&&(k=!0,A.fontSize[Se]=we),!(A.font[Se]&&De==A.font[Se].baseString||(S=!0,A.font[Se]=x.fonts[De],A.font[Se]))){var Ee=he.family.join(", "),Fe=[he.style];he.style!=he.variant&&Fe.push(he.variant),he.variant!=he.weight&&Fe.push(he.weight),g&&he.weight!=he.stretch&&Fe.push(he.stretch),A.font[Se]={baseString:De,family:Ee,weight:he.weight,stretch:he.stretch,style:he.style,variant:he.variant,width:{},kerning:{},metrics:p(Ee,{origin:"top",fontSize:x.baseFontSize,fontStyle:Fe.join(" ")})},x.fonts[De]=A.font[Se]}}),(S||k)&&this.font.forEach(function(he,Se){var xe=_.stringify({size:A.fontSize[Se],family:he.family,stretch:g?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style});if(A.fontAtlas[Se]=A.shader.atlas[xe],!A.fontAtlas[Se]){var Te=he.metrics;A.shader.atlas[xe]=A.fontAtlas[Se]={fontString:xe,step:2*Math.ceil(A.fontSize[Se]*Te.bottom*.5),em:A.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:A.regl.texture()}}y.text==null&&(y.text=A.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var E=Array(.5*y.position.length),L=0;L<E.length;L++)E[L]=y.text;y.text=E}if(y.text!=null||S){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var O=1;O<y.text.length;O++)this.textOffsets[O]=this.textOffsets[O-1]+y.text[O-1].length,this.count+=y.text[O].length,this.counts.push(y.text[O].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];d=[],this.font.forEach(function(he,Se){x.atlasContext.font=he.baseString;for(var xe=A.fontAtlas[Se],Te=0;Te<A.text.length;Te++){var Ae=A.text.charAt(Te);if(xe.ids[Ae]==null&&(xe.ids[Ae]=xe.chars.length,xe.chars.push(Ae),d.push(Ae)),he.width[Ae]==null&&(he.width[Ae]=x.atlasContext.measureText(Ae).width/x.baseFontSize,A.kerning)){var Pe=[];for(var De in he.width)Pe.push(De+Ae,Ae+De);u(he.kerning,l(he.family,{pairs:Pe}))}}})}if(y.position)if(y.position.length>2){for(var P=!y.position[0].length,F=t.mallocFloat(2*this.count),U=0,I=0;U<this.counts.length;U++){var N=this.counts[U];if(P)for(var W=0;W<N;W++)F[I++]=y.position[2*U],F[I++]=y.position[2*U+1];else for(var B=0;B<N;B++)F[I++]=y.position[U][0],F[I++]=y.position[U][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F}),t.freeFloat(F)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||S){var V=t.mallocUint8(this.count),q=t.mallocFloat(2*this.count);this.textWidth=[];for(var ne=0,$=0;ne<this.counts.length;ne++){for(var K=this.counts[ne],ee=this.font[ne]||this.font[0],J=this.fontAtlas[ne]||this.fontAtlas[0],Z=0;Z<K;Z++){var te=this.text.charAt($),oe=this.text.charAt($-1);if(V[$]=J.ids[te],q[2*$]=ee.width[te],Z){var se=q[2*$-2],ce=q[2*$],ye=q[2*$-1]+.5*se+.5*ce;if(this.kerning){var me=ee.kerning[oe+te];me&&(ye+=.001*me)}q[2*$+1]=ye}else q[2*$+1]=.5*q[2*$];$++}this.textWidth.push(q.length?.5*q[2*$-2]+q[2*$-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:q,type:"float",usage:"stream"}),t.freeUint8(V),t.freeFloat(q),d.length&&this.font.forEach(function(he,Se){var xe=A.fontAtlas[Se],Te=xe.step,Ae=Math.floor(x.maxAtlasSize/Te),Pe=Math.min(Ae,xe.chars.length),De=Math.ceil(xe.chars.length/Pe),ve=m(Pe*Te),we=m(De*Te);xe.width=ve,xe.height=we,xe.rows=De,xe.cols=Pe,xe.em&&xe.texture({data:o({canvas:x.atlasCanvas,font:xe.fontString,chars:xe.chars,shape:[ve,we],step:[Te,Te]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(he,Se){var xe=Array.isArray(A.align)?A.align.length>1?A.align[Se]:A.align[0]:A.align;if(typeof xe=="number")return xe;switch(xe){case"right":case"end":return-he;case"center":case"centre":case"middle":return .5*-he}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(he,Se){var xe=(A.font[Se]||A.font[0]).metrics,Te=0;return Te+=.5*xe.bottom,-1*(Te+=typeof he=="number"?he-xe.baseline:-xe[he])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var fe;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var pe=y.color.length;fe=t.mallocUint8(pe);for(var ge=(y.color.subarray||y.color.slice).bind(y.color),ke=0;ke<pe;ke+=4)fe.set(c(ge(ke,ke+4),"uint8"),ke)}else{var Ce=y.color.length;fe=t.mallocUint8(4*Ce);for(var de=0;de<Ce;de++)fe.set(c(y.color[de]||0,"uint8"),4*de)}this.color=fe}else this.color=c(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ae=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ae);for(var re=0;re<this.batch.length;re++)this.batch[re]={count:this.counts.length>1?this.counts[re]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[re]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*re,4*re+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[re]:this.opacity,baseline:this.baselineOffset[re]!=null?this.baselineOffset[re]:this.baselineOffset[0],align:this.align?this.alignOffset[re]!=null?this.alignOffset[re]:this.alignOffset[0]:0,atlas:this.fontAtlas[re]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*re,2*re+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},R.exports=x},55212:function(R,C,e){"use strict";var _=e(55616);function T(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var c=b.container.getBoundingClientRect();b.canvas.width=b.width||c.right-c.left,b.canvas.height=b.height||c.bottom-c.top}}function r(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function w(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}R.exports=function(b){var c;if(b?typeof b=="string"&&(b={container:b}):b={},(b=r(b)||typeof(c=b).nodeName=="string"&&typeof c.appendChild=="function"&&typeof c.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:_(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var o=document.querySelector(b.container);if(!o)throw Error("Element "+b.container+" is not found");b.container=o}r(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=w(),b.container.appendChild(b.canvas),T(b))}else if(!b.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=w(),b.container.appendChild(b.canvas),T(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch{}return b.gl}),b.gl}},26444:function(R){R.exports=function(C){typeof C=="string"&&(C=[C]);for(var e=[].slice.call(arguments,1),_=[],T=0;T<C.length-1;T++)_.push(C[T],e[T]||"");return _.push(C[T]),_.join("")}},2304:function(R,C,e){"use strict";var _=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(_)try{_([],"length")}catch{_=null}R.exports=_},52264:function(R,C,e){"use strict";var _,T=e(24200);_=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:T,R.exports=_},89184:function(R,C,e){"use strict";var _=e(24200);R.exports=_&&function(){var T=!1;try{var r=Object.defineProperty({},"passive",{get:function(){T=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{T=!1}return T}()},39640:function(R,C,e){"use strict";var _=e(53664)("%Object.defineProperty%",!0),T=function(){if(_)try{return _({},"a",{value:1}),!0}catch{return!1}return!1};T.hasArrayLengthDefineBug=function(){if(!T())return null;try{return _([],"length",{value:1}).length!==1}catch{return!0}},R.exports=T},69572:function(R){"use strict";var C={foo:{}},e=Object;R.exports=function(){return{__proto__:C}.foo===C.foo&&!({__proto__:null}instanceof e)}},71080:function(R,C,e){"use strict";var _=typeof Symbol<"u"&&Symbol,T=e(89320);R.exports=function(){return typeof _=="function"&&typeof Symbol=="function"&&typeof _("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&T()}},89320:function(R){"use strict";R.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var C={},e=Symbol("test"),_=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(_)!=="[object Symbol]")return!1;for(e in C[e]=42,C)return!1;if(typeof Object.keys=="function"&&Object.keys(C).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(C).length!==0)return!1;var T=Object.getOwnPropertySymbols(C);if(T.length!==1||T[0]!==e||!Object.prototype.propertyIsEnumerable.call(C,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(C,e);if(r.value!==42||r.enumerable!==!0)return!1}return!0}},46672:function(R,C,e){"use strict";var _=e(89320);R.exports=function(){return _()&&!!Symbol.toStringTag}},92064:function(R,C,e){"use strict";var _=Function.prototype.call,T=Object.prototype.hasOwnProperty,r=e(8844);R.exports=r.call(_,T)},35984:function(R,C){C.read=function(e,_,T,r,w){var b,c,o=8*w-r-1,t=(1<<o)-1,i=t>>1,n=-7,a=T?w-1:0,s=T?-1:1,l=e[_+a];for(a+=s,b=l&(1<<-n)-1,l>>=-n,n+=o;n>0;b=256*b+e[_+a],a+=s,n-=8);for(c=b&(1<<-n)-1,b>>=-n,n+=r;n>0;c=256*c+e[_+a],a+=s,n-=8);if(b===0)b=1-i;else{if(b===t)return c?NaN:1/0*(l?-1:1);c+=Math.pow(2,r),b-=i}return(l?-1:1)*c*Math.pow(2,b-r)},C.write=function(e,_,T,r,w,b){var c,o,t,i=8*b-w-1,n=(1<<i)-1,a=n>>1,s=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:b-1,u=r?1:-1,p=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(o=isNaN(_)?1:0,c=n):(c=Math.floor(Math.log(_)/Math.LN2),_*(t=Math.pow(2,-c))<1&&(c--,t*=2),(_+=c+a>=1?s/t:s*Math.pow(2,1-a))*t>=2&&(c++,t/=2),c+a>=n?(o=0,c=n):c+a>=1?(o=(_*t-1)*Math.pow(2,w),c+=a):(o=_*Math.pow(2,a-1)*Math.pow(2,w),c=0));w>=8;e[T+l]=255&o,l+=u,o/=256,w-=8);for(c=c<<w|o,i+=w;i>0;e[T+l]=255&c,l+=u,c/=256,i-=8);e[T+l-u]|=128*p}},6768:function(R){typeof Object.create=="function"?R.exports=function(C,e){e&&(C.super_=e,C.prototype=Object.create(e.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}))}:R.exports=function(C,e){if(e){C.super_=e;var _=function(){};_.prototype=e.prototype,C.prototype=new _,C.prototype.constructor=C}}},91148:function(R,C,e){"use strict";var _=e(46672)(),T=e(99676)("Object.prototype.toString"),r=function(c){return!(_&&c&&typeof c=="object"&&Symbol.toStringTag in c)&&T(c)==="[object Arguments]"},w=function(c){return!!r(c)||c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&T(c)!=="[object Array]"&&T(c.callee)==="[object Function]"},b=function(){return r(arguments)}();r.isLegacyArguments=w,R.exports=b?r:w},24200:function(R){R.exports=!0},90720:function(R){"use strict";var C,e,_=Function.prototype.toString,T=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof T=="function"&&typeof Object.defineProperty=="function")try{C=Object.defineProperty({},"length",{get:function(){throw e}}),e={},T(function(){throw 42},null,C)}catch(a){a!==e&&(T=null)}else T=null;var r=/^\s*class\b/,w=function(a){try{var s=_.call(a);return r.test(s)}catch{return!1}},b=function(a){try{return!w(a)&&(_.call(a),!0)}catch{return!1}},c=Object.prototype.toString,o=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var n=document.all;c.call(n)===c.call(document.all)&&(i=function(a){if((t||!a)&&(a===void 0||typeof a=="object"))try{var s=c.call(a);return(s==="[object HTMLAllCollection]"||s==="[object HTML document.all class]"||s==="[object HTMLCollection]"||s==="[object Object]")&&a("")==null}catch{}return!1})}R.exports=T?function(a){if(i(a))return!0;if(!a||typeof a!="function"&&typeof a!="object")return!1;try{T(a,null,C)}catch(s){if(s!==e)return!1}return!w(a)&&b(a)}:function(a){if(i(a))return!0;if(!a||typeof a!="function"&&typeof a!="object")return!1;if(o)return b(a);if(w(a))return!1;var s=c.call(a);return!(s!=="[object Function]"&&s!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(s))&&b(a)}},84420:function(R,C,e){"use strict";var _,T=Object.prototype.toString,r=Function.prototype.toString,w=/^\s*(?:function)?\*/,b=e(46672)(),c=Object.getPrototypeOf;R.exports=function(o){if(typeof o!="function")return!1;if(w.test(r.call(o)))return!0;if(!b)return T.call(o)==="[object GeneratorFunction]";if(!c)return!1;if(_===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch{}}();_=!!t&&c(t)}return c(o)===_}},96604:function(R){"use strict";R.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(R){"use strict";R.exports=function(C){return C!=C}},1560:function(R,C,e){"use strict";var _=e(57916),T=e(81288),r=e(85992),w=e(57740),b=e(59736),c=_(w(),Number);T(c,{getPolyfill:w,implementation:r,shim:b}),R.exports=c},57740:function(R,C,e){"use strict";var _=e(85992);R.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:_}},59736:function(R,C,e){"use strict";var _=e(81288),T=e(57740);R.exports=function(){var r=T();return _(Number,{isNaN:r},{isNaN:function(){return Number.isNaN!==r}}),r}},18400:function(R){"use strict";R.exports=function(C){var e=typeof C;return C!==null&&(e==="object"||e==="function")}},58908:function(R){"use strict";var C=Object.prototype.toString;R.exports=function(e){var _;return C.call(e)==="[object Object]"&&((_=Object.getPrototypeOf(e))===null||_===Object.getPrototypeOf({}))}},94576:function(R){"use strict";R.exports=function(C){for(var e,_=C.length,T=0;T<_;T++)if(((e=C.charCodeAt(T))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(R){"use strict";R.exports=function(C){return typeof C=="string"&&(C=C.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(C)&&/[\dz]$/i.test(C)&&C.length>4))}},7728:function(R,C,e){"use strict";var _=e(46492),T=e(63436),r=e(99676),w=r("Object.prototype.toString"),b=e(46672)(),c=e(2304),o=typeof globalThis>"u"?e.g:globalThis,t=T(),i=r("Array.prototype.indexOf",!0)||function(l,u){for(var p=0;p<l.length;p+=1)if(l[p]===u)return p;return-1},n=r("String.prototype.slice"),a={},s=Object.getPrototypeOf;b&&c&&s&&_(t,function(l){var u=new o[l];if(Symbol.toStringTag in u){var p=s(u),f=c(p,Symbol.toStringTag);if(!f){var m=s(p);f=c(m,Symbol.toStringTag)}a[l]=f.get}}),R.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var u=n(w(l),8,-1);return i(t,u)>-1}return!!c&&function(p){var f=!1;return _(a,function(m,h){if(!f)try{f=m.call(p)===h}catch{}}),f}(l)}},76244:function(R){"use strict";R.exports=Math.log2||function(C){return Math.log(C)*Math.LOG2E}},62644:function(R,C,e){"use strict";R.exports=function(T,r){r||(r=T,T=window);var w=0,b=0,c=0,o={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(g){var v=!1;return"altKey"in g&&(v=v||g.altKey!==o.alt,o.alt=!!g.altKey),"shiftKey"in g&&(v=v||g.shiftKey!==o.shift,o.shift=!!g.shiftKey),"ctrlKey"in g&&(v=v||g.ctrlKey!==o.control,o.control=!!g.ctrlKey),"metaKey"in g&&(v=v||g.metaKey!==o.meta,o.meta=!!g.metaKey),v}function n(g,v){var x=_.x(v),y=_.y(v);"buttons"in v&&(g=0|v.buttons),(g!==w||x!==b||y!==c||i(v))&&(w=0|g,b=x||0,c=y||0,r&&r(w,b,c,o))}function a(g){n(0,g)}function s(){(w||b||c||o.shift||o.alt||o.meta||o.control)&&(b=c=0,w=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function l(g){i(g)&&r&&r(w,b,c,o)}function u(g){_.buttons(g)===0?n(0,g):n(w,g)}function p(g){n(w|_.buttons(g),g)}function f(g){n(w&~_.buttons(g),g)}function m(){t||(t=!0,T.addEventListener("mousemove",u),T.addEventListener("mousedown",p),T.addEventListener("mouseup",f),T.addEventListener("mouseleave",a),T.addEventListener("mouseenter",a),T.addEventListener("mouseout",a),T.addEventListener("mouseover",a),T.addEventListener("blur",s),T.addEventListener("keyup",l),T.addEventListener("keydown",l),T.addEventListener("keypress",l),T!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}m();var h={element:T};return Object.defineProperties(h,{enabled:{get:function(){return t},set:function(g){g?m():t&&(t=!1,T.removeEventListener("mousemove",u),T.removeEventListener("mousedown",p),T.removeEventListener("mouseup",f),T.removeEventListener("mouseleave",a),T.removeEventListener("mouseenter",a),T.removeEventListener("mouseout",a),T.removeEventListener("mouseover",a),T.removeEventListener("blur",s),T.removeEventListener("keyup",l),T.removeEventListener("keydown",l),T.removeEventListener("keypress",l),T!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return w},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return c},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),h};var _=e(93784)},29128:function(R){var C={left:0,top:0};R.exports=function(e,_,T){_=_||e.currentTarget||e.srcElement,Array.isArray(T)||(T=[0,0]);var r,w=e.clientX||0,b=e.clientY||0,c=(r=_)===window||r===document||r===document.body?C:r.getBoundingClientRect();return T[0]=w-c.left,T[1]=b-c.top,T}},93784:function(R,C){"use strict";function e(_){return _.target||_.srcElement||window}C.buttons=function(_){if(typeof _=="object"){if("buttons"in _)return _.buttons;if("which"in _){if((T=_.which)===2)return 4;if(T===3)return 2;if(T>0)return 1<<T-1}else if("button"in _){var T;if((T=_.button)===1)return 4;if(T===2)return 2;if(T>=0)return 1<<T}}return 0},C.element=e,C.x=function(_){if(typeof _=="object"){if("offsetX"in _)return _.offsetX;var T=e(_).getBoundingClientRect();return _.clientX-T.left}return 0},C.y=function(_){if(typeof _=="object"){if("offsetY"in _)return _.offsetY;var T=e(_).getBoundingClientRect();return _.clientY-T.top}return 0}},97264:function(R,C,e){"use strict";var _=e(23464);R.exports=function(T,r,w){typeof T=="function"&&(w=!!r,r=T,T=window);var b=_("ex",T),c=function(o){w&&o.preventDefault();var t=o.deltaX||0,i=o.deltaY||0,n=o.deltaZ||0,a=1;switch(o.deltaMode){case 1:a=b;break;case 2:a=window.innerHeight}if(i*=a,n*=a,(t*=a)||i||n)return r(t,i,n,o)};return T.addEventListener("wheel",c),c}},88324:function(R,C,e){var _;(function(T,r,w){r[T]=r[T]||function(){"use strict";var b,c,o,t=Object.prototype.toString,i=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(x,y,A,d){return Object.defineProperty(x,y,{value:A,writable:!0,configurable:d!==!1})}}catch{b=function(y,A,d){return y[A]=d,y}}function n(x,y){o.add(x,y),c||(c=i(o.drain))}function a(x){var y,A=typeof x;return x==null||A!="object"&&A!="function"||(y=x.then),typeof y=="function"&&y}function s(){for(var x=0;x<this.chain.length;x++)l(this,this.state===1?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function l(x,y,A){var d,S;try{y===!1?A.reject(x.msg):(d=y===!0?x.msg:y.call(void 0,x.msg))===A.promise?A.reject(TypeError("Promise-chain cycle")):(S=a(d))?S.call(d,A.resolve,A.reject):A.resolve(d)}catch(k){A.reject(k)}}function u(x){var y,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(y=a(x))?n(function(){var d=new m(A);try{y.call(x,function(){u.apply(d,arguments)},function(){p.apply(d,arguments)})}catch(S){p.call(d,S)}}):(A.msg=x,A.state=1,A.chain.length>0&&n(s,A))}catch(d){p.call(new m(A),d)}}}function p(x){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=x,y.state=2,y.chain.length>0&&n(s,y))}function f(x,y,A,d){for(var S=0;S<y.length;S++)(function(k){x.resolve(y[k]).then(function(E){A(k,E)},d)})(S)}function m(x){this.def=x,this.triggered=!1}function h(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(x){if(typeof x!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new h(this);this.then=function(A,d){var S={success:typeof A!="function"||A,failure:typeof d=="function"&&d};return S.promise=new this.constructor(function(k,E){if(typeof k!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=k,S.reject=E}),y.chain.push(S),y.state!==0&&n(s,y),S.promise},this.catch=function(A){return this.then(void 0,A)};try{x.call(void 0,function(A){u.call(y,A)},function(A){p.call(y,A)})}catch(A){p.call(y,A)}}o=function(){var x,y,A;function d(S,k){this.fn=S,this.self=k,this.next=void 0}return{add:function(S,k){A=new d(S,k),y?y.next=A:x=A,y=A,A=void 0},drain:function(){var S=x;for(x=y=c=void 0;S;)S.fn.call(S.self),S=S.next}}}();var v=b({},"constructor",g,!1);return g.prototype=v,b(v,"__NPO__",0,!1),b(g,"resolve",function(x){return x&&typeof x=="object"&&x.__NPO__===1?x:new this(function(y,A){if(typeof y!="function"||typeof A!="function")throw TypeError("Not a function");y(x)})}),b(g,"reject",function(x){return new this(function(y,A){if(typeof y!="function"||typeof A!="function")throw TypeError("Not a function");A(x)})}),b(g,"all",function(x){var y=this;return t.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):x.length===0?y.resolve([]):new y(function(A,d){if(typeof A!="function"||typeof d!="function")throw TypeError("Not a function");var S=x.length,k=Array(S),E=0;f(y,x,function(L,O){k[L]=O,++E===S&&A(k)},d)})}),b(g,"race",function(x){var y=this;return t.call(x)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(A,d){if(typeof A!="function"||typeof d!="function")throw TypeError("Not a function");f(y,x,function(S,k){A(k)},d)})}),g}(),R.exports?R.exports=r[T]:(_=(function(){return r[T]}).call(C,e,C,R))===void 0||(R.exports=_)})("Promise",e.g!==void 0?e.g:this)},48816:function(R){var C=Math.PI,e=b(120);function _(c,o,t,i){return["C",c,o,t,i,t,i]}function T(c,o,t,i,n,a){return["C",c/3+.6666666666666666*t,o/3+.6666666666666666*i,n/3+.6666666666666666*t,a/3+.6666666666666666*i,n,a]}function r(c,o,t,i,n,a,s,l,u,p){if(p)S=p[0],k=p[1],A=p[2],d=p[3];else{var f=w(c,o,-n);c=f.x,o=f.y;var m=(c-(l=(f=w(l,u,-n)).x))/2,h=(o-(u=f.y))/2,g=m*m/(t*t)+h*h/(i*i);g>1&&(t*=g=Math.sqrt(g),i*=g);var v=t*t,x=i*i,y=(a==s?-1:1)*Math.sqrt(Math.abs((v*x-v*h*h-x*m*m)/(v*h*h+x*m*m)));y==1/0&&(y=1);var A=y*t*h/i+(c+l)/2,d=y*-i*m/t+(o+u)/2,S=Math.asin(((o-d)/i).toFixed(9)),k=Math.asin(((u-d)/i).toFixed(9));(S=c<A?C-S:S)<0&&(S=2*C+S),(k=l<A?C-k:k)<0&&(k=2*C+k),s&&S>k&&(S-=2*C),!s&&k>S&&(k-=2*C)}if(Math.abs(k-S)>e){var E=k,L=l,O=u;k=S+e*(s&&k>S?1:-1);var P=r(l=A+t*Math.cos(k),u=d+i*Math.sin(k),t,i,n,0,s,L,O,[k,E,A,d])}var F=Math.tan((k-S)/4),U=4/3*t*F,I=4/3*i*F,N=[2*c-(c+U*Math.sin(S)),2*o-(o-I*Math.cos(S)),l+U*Math.sin(k),u-I*Math.cos(k),l,u];if(p)return N;P&&(N=N.concat(P));for(var W=0;W<N.length;){var B=w(N[W],N[W+1],n);N[W++]=B.x,N[W++]=B.y}return N}function w(c,o,t){return{x:c*Math.cos(t)-o*Math.sin(t),y:c*Math.sin(t)+o*Math.cos(t)}}function b(c){return c*(C/180)}R.exports=function(c){for(var o,t=[],i=0,n=0,a=0,s=0,l=null,u=null,p=0,f=0,m=0,h=c.length;m<h;m++){var g=c[m],v=g[0];switch(v){case"M":a=g[1],s=g[2];break;case"A":(g=r(p,f,g[1],g[2],b(g[3]),g[4],g[5],g[6],g[7])).unshift("C"),g.length>7&&(t.push(g.splice(0,7)),g.unshift("C"));break;case"S":var x=p,y=f;o!="C"&&o!="S"||(x+=x-i,y+=y-n),g=["C",x,y,g[1],g[2],g[3],g[4]];break;case"T":o=="Q"||o=="T"?(l=2*p-l,u=2*f-u):(l=p,u=f),g=T(p,f,l,u,g[1],g[2]);break;case"Q":l=g[1],u=g[2],g=T(p,f,g[1],g[2],g[3],g[4]);break;case"L":g=_(p,f,g[1],g[2]);break;case"H":g=_(p,f,g[1],f);break;case"V":g=_(p,f,p,g[1]);break;case"Z":g=_(p,f,a,s)}o=v,p=g[g.length-2],f=g[g.length-1],g.length>4?(i=g[g.length-4],n=g[g.length-3]):(i=p,n=f),t.push(g)}return t}},50896:function(R){"use strict";var C=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;R.exports=function(){try{if(!Object.assign)return!1;var T=new String("abc");if(T[5]="de",Object.getOwnPropertyNames(T)[0]==="5")return!1;for(var r={},w=0;w<10;w++)r["_"+String.fromCharCode(w)]=w;if(Object.getOwnPropertyNames(r).map(function(c){return r[c]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(c){b[c]=c}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(T,r){for(var w,b,c=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(T),o=1;o<arguments.length;o++){for(var t in w=Object(arguments[o]))e.call(w,t)&&(c[t]=w[t]);if(C){b=C(w);for(var i=0;i<b.length;i++)_.call(w,b[i])&&(c[b[i]]=w[b[i]])}}return c}},76835:function(R){"use strict";var C=function(e){return e!=e};R.exports=function(e,_){return e===0&&_===0?1/e==1/_:e===_||!(!C(e)||!C(_))}},39896:function(R,C,e){"use strict";var _=e(81288),T=e(57916),r=e(76835),w=e(66148),b=e(16408),c=T(w(),Object);_(c,{getPolyfill:w,implementation:r,shim:b}),R.exports=c},66148:function(R,C,e){"use strict";var _=e(76835);R.exports=function(){return typeof Object.is=="function"?Object.is:_}},16408:function(R,C,e){"use strict";var _=e(66148),T=e(81288);R.exports=function(){var r=_();return T(Object,{is:r},{is:function(){return Object.is!==r}}),r}},32764:function(R,C,e){"use strict";var _;if(!Object.keys){var T=Object.prototype.hasOwnProperty,r=Object.prototype.toString,w=e(97344),b=Object.prototype.propertyIsEnumerable,c=!b.call({toString:null},"toString"),o=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(s){var l=s.constructor;return l&&l.prototype===s},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},a=function(){if(typeof window>"u")return!1;for(var s in window)try{if(!n["$"+s]&&T.call(window,s)&&window[s]!==null&&typeof window[s]=="object")try{i(window[s])}catch{return!0}}catch{return!0}return!1}();_=function(s){var l=s!==null&&typeof s=="object",u=r.call(s)==="[object Function]",p=w(s),f=l&&r.call(s)==="[object String]",m=[];if(!l&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var h=o&&u;if(f&&s.length>0&&!T.call(s,0))for(var g=0;g<s.length;++g)m.push(String(g));if(p&&s.length>0)for(var v=0;v<s.length;++v)m.push(String(v));else for(var x in s)h&&x==="prototype"||!T.call(s,x)||m.push(String(x));if(c)for(var y=function(d){if(typeof window>"u"||!a)return i(d);try{return i(d)}catch{return!1}}(s),A=0;A<t.length;++A)y&&t[A]==="constructor"||!T.call(s,t[A])||m.push(t[A]);return m}}R.exports=_},41820:function(R,C,e){"use strict";var _=Array.prototype.slice,T=e(97344),r=Object.keys,w=r?function(c){return r(c)}:e(32764),b=Object.keys;w.shim=function(){if(Object.keys){var c=function(){var o=Object.keys(arguments);return o&&o.length===arguments.length}(1,2);c||(Object.keys=function(o){return T(o)?b(_.call(o)):b(o)})}else Object.keys=w;return Object.keys||w},R.exports=w},97344:function(R){"use strict";var C=Object.prototype.toString;R.exports=function(e){var _=C.call(e),T=_==="[object Arguments]";return T||(T=_!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&C.call(e.callee)==="[object Function]"),T}},32868:function(R){"use strict";function C(T,r){if(typeof T!="string")return[T];var w=[T];typeof r=="string"||Array.isArray(r)?r={brackets:r}:r||(r={});var b=r.brackets?Array.isArray(r.brackets)?r.brackets:[r.brackets]:["{}","[]","()"],c=r.escape||"___",o=!!r.flat;b.forEach(function(i){var n=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),a=[];function s(l,u,p){var f=w.push(l.slice(i[0].length,-i[1].length))-1;return a.push(f),c+f+c}w.forEach(function(l,u){for(var p,f=0;l!=p;)if(p=l,l=l.replace(n,s),f++>1e4)throw Error("References have circular dependency. Please, check them.");w[u]=l}),a=a.reverse(),w=w.map(function(l){return a.forEach(function(u){l=l.replace(new RegExp("(\\"+c+u+"\\"+c+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+c+"([0-9]+)\\"+c);return o?w:function i(n,a,s){for(var l,u=[],p=0;l=t.exec(n);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,l.index)),u.push(i(a[l[1]],a)),n=n.slice(l.index+l[0].length)}return u.push(n),u}(w[0],w)}function e(T,r){if(r&&r.flat){var w,b=r&&r.escape||"___",c=T[0];if(!c)return"";for(var o=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;c!=w;){if(t++>1e4)throw Error("Circular references in "+T);w=c,c=c.replace(o,i)}return c}return T.reduce(function n(a,s){return Array.isArray(s)&&(s=s.reduce(n,"")),a+s},"");function i(n,a){if(T[a]==null)throw Error("Reference "+a+"is undefined");return T[a]}}function _(T,r){return Array.isArray(T)?e(T,r):C(T,r)}_.parse=C,_.stringify=e,R.exports=_},51160:function(R,C,e){"use strict";var _=e(55616);R.exports=function(T){var r;return arguments.length>1&&(T=arguments),typeof T=="string"?T=T.split(/\s/).map(parseFloat):typeof T=="number"&&(T=[T]),T.length&&typeof T[0]=="number"?r=T.length===1?{width:T[0],height:T[0],x:0,y:0}:T.length===2?{width:T[0],height:T[1],x:0,y:0}:{x:T[0],y:T[1],width:T[2]-T[0]||0,height:T[3]-T[1]||0}:T&&(r={x:(T=_(T,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:T.top||0},T.width==null?T.right?r.width=T.right-r.x:r.width=0:r.width=T.width,T.height==null?T.bottom?r.height=T.bottom-r.y:r.height=0:r.height=T.height),r}},21984:function(R){R.exports=function(T){var r=[];return T.replace(e,function(w,b,c){var o=b.toLowerCase();for(c=function(t){var i=t.match(_);return i?i.map(Number):[]}(c),o=="m"&&c.length>2&&(r.push([b].concat(c.splice(0,2))),o="l",b=b=="m"?"l":"L");;){if(c.length==C[o])return c.unshift(b),r.push(c);if(c.length<C[o])throw new Error("malformed path data");r.push([b].concat(c.splice(0,C[o])))}}),r};var C={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,_=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(R){R.exports=function(C,e){e||(e=[0,""]),C=String(C);var _=parseFloat(C,10);return e[0]=_,e[1]=C.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(R,C,e){var _=e(4168);(function(){var T,r,w,b,c,o;typeof performance<"u"&&performance!==null&&performance.now?R.exports=function(){return performance.now()}:_!=null&&_.hrtime?(R.exports=function(){return(T()-c)/1e6},r=_.hrtime,b=(T=function(){var t;return 1e9*(t=r())[0]+t[1]})(),o=1e9*_.uptime(),c=b-o):Date.now?(R.exports=function(){return Date.now()-w},w=Date.now()):(R.exports=function(){return new Date().getTime()-w},w=new Date().getTime())}).call(this)},55616:function(R){"use strict";R.exports=function(_,T,r){var w,b,c={};if(typeof T=="string"&&(T=e(T)),Array.isArray(T)){var o={};for(b=0;b<T.length;b++)o[T[b]]=!0;T=o}for(w in T)T[w]=e(T[w]);var t={};for(w in T){var i=T[w];if(Array.isArray(i))for(b=0;b<i.length;b++){var n=i[b];if(r&&(t[n]=!0),n in _){if(c[w]=_[n],r)for(var a=b;a<i.length;a++)t[i[a]]=!0;break}}else w in _&&(T[w]&&(c[w]=_[w]),r&&(t[w]=!0))}if(r)for(w in _)t[w]||(c[w]=_[w]);return c};var C={};function e(_){return C[_]?C[_]:(typeof _=="string"&&(_=C[_]=_.split(/\s*,\s*|\s+/)),_)}},61456:function(R){R.exports=function(C,e,_,T){var r=C[0],w=C[1],b=!1;_===void 0&&(_=0),T===void 0&&(T=e.length);for(var c=T-_,o=0,t=c-1;o<c;t=o++){var i=e[o+_][0],n=e[o+_][1],a=e[t+_][0],s=e[t+_][1];n>w!=s>w&&r<(a-i)*(w-n)/(s-n)+i&&(b=!b)}return b}},14756:function(R,C,e){var _,T=e(7688),r=e(28648),w=e(72200),b=e(11403),c=e(82368),o=e(17792),t=!1,i=r();function n(a,s,l){var u=_.segments(a),p=_.segments(s),f=l(_.combine(u,p));return _.polygon(f)}_={buildLog:function(a){return a===!0?t=T():a===!1&&(t=!1),t!==!1&&t.list},epsilon:function(a){return i.epsilon(a)},segments:function(a){var s=w(!0,i,t);return a.regions.forEach(s.addRegion),{segments:s.calculate(a.inverted),inverted:a.inverted}},combine:function(a,s){return{combined:w(!1,i,t).calculate(a.segments,a.inverted,s.segments,s.inverted),inverted1:a.inverted,inverted2:s.inverted}},selectUnion:function(a){return{segments:c.union(a.combined,t),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:c.intersect(a.combined,t),inverted:a.inverted1&&a.inverted2}},selectDifference:function(a){return{segments:c.difference(a.combined,t),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:c.differenceRev(a.combined,t),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:c.xor(a.combined,t),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:b(a.segments,i,t),inverted:a.inverted}},polygonFromGeoJSON:function(a){return o.toPolygon(_,a)},polygonToGeoJSON:function(a){return o.fromPolygon(_,i,a)},union:function(a,s){return n(a,s,_.selectUnion)},intersect:function(a,s){return n(a,s,_.selectIntersect)},difference:function(a,s){return n(a,s,_.selectDifference)},differenceRev:function(a,s){return n(a,s,_.selectDifferenceRev)},xor:function(a,s){return n(a,s,_.selectXor)}},typeof window=="object"&&(window.PolyBool=_),R.exports=_},7688:function(R){R.exports=function(){var C,e=0,_=!1;function T(r,w){return C.list.push({type:r,data:w?JSON.parse(JSON.stringify(w)):void 0}),C}return C={list:[],segmentId:function(){return e++},checkIntersection:function(r,w){return T("check",{seg1:r,seg2:w})},segmentChop:function(r,w){return T("div_seg",{seg:r,pt:w}),T("chop",{seg:r,pt:w})},statusRemove:function(r){return T("pop_seg",{seg:r})},segmentUpdate:function(r){return T("seg_update",{seg:r})},segmentNew:function(r,w){return T("new_seg",{seg:r,primary:w})},segmentRemove:function(r){return T("rem_seg",{seg:r})},tempStatus:function(r,w,b){return T("temp_status",{seg:r,above:w,below:b})},rewind:function(r){return T("rewind",{seg:r})},status:function(r,w,b){return T("status",{seg:r,above:w,below:b})},vert:function(r){return r===_?C:(_=r,T("vert",{x:r}))},log:function(r){return typeof r!="string"&&(r=JSON.stringify(r,!1,"  ")),T("log",{txt:r})},reset:function(){return T("reset")},selected:function(r){return T("selected",{segs:r})},chainStart:function(r){return T("chain_start",{seg:r})},chainRemoveHead:function(r,w){return T("chain_rem_head",{index:r,pt:w})},chainRemoveTail:function(r,w){return T("chain_rem_tail",{index:r,pt:w})},chainNew:function(r,w){return T("chain_new",{pt1:r,pt2:w})},chainMatch:function(r){return T("chain_match",{index:r})},chainClose:function(r){return T("chain_close",{index:r})},chainAddHead:function(r,w){return T("chain_add_head",{index:r,pt:w})},chainAddTail:function(r,w){return T("chain_add_tail",{index:r,pt:w})},chainConnect:function(r,w){return T("chain_con",{index1:r,index2:w})},chainReverse:function(r){return T("chain_rev",{index:r})},chainJoin:function(r,w){return T("chain_join",{index1:r,index2:w})},done:function(){return T("done")}}}},28648:function(R){R.exports=function(C){typeof C!="number"&&(C=1e-10);var e={epsilon:function(_){return typeof _=="number"&&(C=_),C},pointAboveOrOnLine:function(_,T,r){var w=T[0],b=T[1],c=r[0],o=r[1],t=_[0];return(c-w)*(_[1]-b)-(o-b)*(t-w)>=-C},pointBetween:function(_,T,r){var w=_[1]-T[1],b=r[0]-T[0],c=_[0]-T[0],o=r[1]-T[1],t=c*b+w*o;return!(t<C||t-(b*b+o*o)>-C)},pointsSameX:function(_,T){return Math.abs(_[0]-T[0])<C},pointsSameY:function(_,T){return Math.abs(_[1]-T[1])<C},pointsSame:function(_,T){return e.pointsSameX(_,T)&&e.pointsSameY(_,T)},pointsCompare:function(_,T){return e.pointsSameX(_,T)?e.pointsSameY(_,T)?0:_[1]<T[1]?-1:1:_[0]<T[0]?-1:1},pointsCollinear:function(_,T,r){var w=_[0]-T[0],b=_[1]-T[1],c=T[0]-r[0],o=T[1]-r[1];return Math.abs(w*o-c*b)<C},linesIntersect:function(_,T,r,w){var b=T[0]-_[0],c=T[1]-_[1],o=w[0]-r[0],t=w[1]-r[1],i=b*t-c*o;if(Math.abs(i)<C)return!1;var n=_[0]-r[0],a=_[1]-r[1],s=(o*a-t*n)/i,l=(b*a-c*n)/i,u={alongA:0,alongB:0,pt:[_[0]+s*b,_[1]+s*c]};return u.alongA=s<=-C?-2:s<C?-1:s-1<=-C?0:s-1<C?1:2,u.alongB=l<=-C?-2:l<C?-1:l-1<=-C?0:l-1<C?1:2,u},pointInsideRegion:function(_,T){for(var r=_[0],w=_[1],b=T[T.length-1][0],c=T[T.length-1][1],o=!1,t=0;t<T.length;t++){var i=T[t][0],n=T[t][1];n-w>C!=c-w>C&&(b-i)*(w-n)/(c-n)+i-r>C&&(o=!o),b=i,c=n}return o}};return e}},17792:function(R){var C={toPolygon:function(e,_){function T(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function c(i){var n=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[n]})}for(var o=c(b[0]),t=1;t<b.length;t++)o=e.selectDifference(e.combine(o,c(b[t])));return o}if(_.type==="Polygon")return e.polygon(T(_.coordinates));if(_.type==="MultiPolygon"){for(var r=e.segments({inverted:!1,regions:[]}),w=0;w<_.coordinates.length;w++)r=e.selectUnion(e.combine(r,T(_.coordinates[w])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,_,T){function r(l,u){return _.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function w(l){return{region:l,children:[]}}T=e.polygon(e.segments(T));var b=w(null);function c(l,u){for(var p=0;p<l.children.length;p++)if(r(u,(m=l.children[p]).region))return void c(m,u);var f=w(u);for(p=0;p<l.children.length;p++){var m;r((m=l.children[p]).region,u)&&(f.children.push(m),l.children.splice(p,1),p--)}l.children.push(f)}for(var o=0;o<T.regions.length;o++){var t=T.regions[o];t.length<3||c(b,t)}function i(l,u){for(var p=0,f=l[l.length-1][0],m=l[l.length-1][1],h=[],g=0;g<l.length;g++){var v=l[g][0],x=l[g][1];h.push([v,x]),p+=x*f-v*m,f=v,m=x}return p<0!==u&&h.reverse(),h.push([h[0][0],h[0][1]]),h}var n=[];function a(l){var u=[i(l.region,!1)];n.push(u);for(var p=0;p<l.children.length;p++)u.push(s(l.children[p]))}function s(l){for(var u=0;u<l.children.length;u++)a(l.children[u]);return i(l.region,!0)}for(o=0;o<b.children.length;o++)a(b.children[o]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};R.exports=C},72200:function(R,C,e){var _=e(48088);R.exports=function(T,r,w){function b(a,s,l){return{id:w?w.segmentId():-1,start:a,end:s,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var c=_.create();function o(a,s){c.insertBefore(a,function(l){return u=a.isStart,p=a.pt,f=s,m=l.isStart,h=l.pt,g=l.other.pt,((v=r.pointsCompare(p,h))!==0?v:r.pointsSame(f,g)?0:u!==m?u?1:-1:r.pointAboveOrOnLine(f,m?h:g,m?g:h)?1:-1)<0;var u,p,f,m,h,g,v})}function t(a,s){var l=function(u,p){var f=_.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return o(f,u.end),f}(a,s);return function(u,p,f){var m=_.node({isStart:!1,pt:p.end,seg:p,primary:f,other:u,status:null});u.other=m,o(m,u.pt)}(l,a,s),l}function i(a,s){var l=b(s,a.seg.end,a.seg);return function(u,p){w&&w.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,o(u.other,u.pt)}(a,s),t(l,a.primary)}function n(a,s){var l=_.create();function u(E){return l.findTransition(function(L){var O,P,F,U,I,N;return O=E,P=L.ev,F=O.seg.start,U=O.seg.end,I=P.seg.start,N=P.seg.end,(r.pointsCollinear(F,I,N)?r.pointsCollinear(U,I,N)||r.pointAboveOrOnLine(U,I,N)?1:-1:r.pointAboveOrOnLine(F,I,N)?1:-1)>0})}function p(E,L){var O=E.seg,P=L.seg,F=O.start,U=O.end,I=P.start,N=P.end;w&&w.checkIntersection(O,P);var W=r.linesIntersect(F,U,I,N);if(W===!1){if(!r.pointsCollinear(F,U,I)||r.pointsSame(F,N)||r.pointsSame(U,I))return!1;var B=r.pointsSame(F,I),V=r.pointsSame(U,N);if(B&&V)return L;var q=!B&&r.pointBetween(F,I,N),ne=!V&&r.pointBetween(U,I,N);if(B)return ne?i(L,U):i(E,N),L;q&&(V||(ne?i(L,U):i(E,N)),i(L,F))}else W.alongA===0&&(W.alongB===-1?i(E,I):W.alongB===0?i(E,W.pt):W.alongB===1&&i(E,N)),W.alongB===0&&(W.alongA===-1?i(L,F):W.alongA===0?i(L,W.pt):W.alongA===1&&i(L,U));return!1}for(var f=[];!c.isEmpty();){var m=c.getHead();if(w&&w.vert(m.pt[0]),m.isStart){let E=function(){if(g){var L=p(m,g);if(L)return L}return!!v&&p(m,v)};var k=E;w&&w.segmentNew(m.seg,m.primary);var h=u(m),g=h.before?h.before.ev:null,v=h.after?h.after.ev:null;w&&w.tempStatus(m.seg,!!g&&g.seg,!!v&&v.seg);var x,y,A=E();if(A&&(T?(y=m.seg.myFill.below===null||m.seg.myFill.above!==m.seg.myFill.below)&&(A.seg.myFill.above=!A.seg.myFill.above):A.seg.otherFill=m.seg.myFill,w&&w.segmentUpdate(A.seg),m.other.remove(),m.remove()),c.getHead()!==m){w&&w.rewind(m.seg);continue}T?(y=m.seg.myFill.below===null||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=v?v.seg.myFill.above:a,m.seg.myFill.above=y?!m.seg.myFill.below:m.seg.myFill.below):m.seg.otherFill===null&&(x=v?m.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:m.primary?s:a,m.seg.otherFill={above:x,below:x}),w&&w.status(m.seg,!!g&&g.seg,!!v&&v.seg),m.other.status=h.insert(_.node({ev:m}))}else{var d=m.status;if(d===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(d.prev)&&l.exists(d.next)&&p(d.prev.ev,d.next.ev),w&&w.statusRemove(d.ev.seg),d.remove(),!m.primary){var S=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=S}f.push(m.seg)}c.getHead().remove()}return w&&w.done(),f}return T?{addRegion:function(a){for(var s,l,u,p=a[a.length-1],f=0;f<a.length;f++){s=p,p=a[f];var m=r.pointsCompare(s,p);m!==0&&t((l=m<0?s:p,u=m<0?p:s,{id:w?w.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(a){return n(a,!1)}}:{calculate:function(a,s,l,u){return a.forEach(function(p){t(b(p.start,p.end,p),!0)}),l.forEach(function(p){t(b(p.start,p.end,p),!1)}),n(s,u)}}}},48088:function(R){R.exports={create:function(){var C={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==C.root},isEmpty:function(){return C.root.next===null},getHead:function(){return C.root.next},insertBefore:function(e,_){for(var T=C.root,r=C.root.next;r!==null;){if(_(r))return e.prev=r.prev,e.next=r,r.prev.next=e,void(r.prev=e);T=r,r=r.next}T.next=e,e.prev=T,e.next=null},findTransition:function(e){for(var _=C.root,T=C.root.next;T!==null&&!e(T);)_=T,T=T.next;return{before:_===C.root?null:_,after:T,insert:function(r){return r.prev=_,r.next=T,_.next=r,T!==null&&(T.prev=r),r}}}};return C},node:function(C){return C.prev=null,C.next=null,C.remove=function(){C.prev.next=C.next,C.next&&(C.next.prev=C.prev),C.prev=null,C.next=null},C}}},11403:function(R){R.exports=function(C,e,_){var T=[],r=[];return C.forEach(function(w){var b=w.start,c=w.end;if(e.pointsSame(b,c))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{_&&_.chainStart(w);for(var o={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=o,n=0;n<T.length;n++){var a=(f=T[n])[0],s=(f[1],f[f.length-1]);if(f[f.length-2],e.pointsSame(a,b)){if(d(n,!0,!0))break}else if(e.pointsSame(a,c)){if(d(n,!0,!1))break}else if(e.pointsSame(s,b)){if(d(n,!1,!0))break}else if(e.pointsSame(s,c)&&d(n,!1,!1))break}if(i===o)return T.push([b,c]),void(_&&_.chainNew(b,c));if(i===t){_&&_.chainMatch(o.index);var l=o.index,u=o.matches_pt1?c:b,p=o.matches_head,f=T[l],m=p?f[0]:f[f.length-1],h=p?f[1]:f[f.length-2],g=p?f[f.length-1]:f[0],v=p?f[f.length-2]:f[1];return e.pointsCollinear(h,m,u)&&(p?(_&&_.chainRemoveHead(o.index,u),f.shift()):(_&&_.chainRemoveTail(o.index,u),f.pop()),m=h),e.pointsSame(g,u)?(T.splice(l,1),e.pointsCollinear(v,g,m)&&(p?(_&&_.chainRemoveTail(o.index,m),f.pop()):(_&&_.chainRemoveHead(o.index,m),f.shift())),_&&_.chainClose(o.index),void r.push(f)):void(p?(_&&_.chainAddHead(o.index,u),f.unshift(u)):(_&&_.chainAddTail(o.index,u),f.push(u)))}var x=o.index,y=t.index;_&&_.chainConnect(x,y);var A=T[x].length<T[y].length;o.matches_head?t.matches_head?A?(S(x),k(x,y)):(S(y),k(y,x)):k(y,x):t.matches_head?k(x,y):A?(S(x),k(y,x)):(S(y),k(x,y))}function d(E,L,O){return i.index=E,i.matches_head=L,i.matches_pt1=O,i===o?(i=t,!1):(i=null,!0)}function S(E){_&&_.chainReverse(E),T[E].reverse()}function k(E,L){var O=T[E],P=T[L],F=O[O.length-1],U=O[O.length-2],I=P[0],N=P[1];e.pointsCollinear(U,F,I)&&(_&&_.chainRemoveTail(E,F),O.pop(),F=U),e.pointsCollinear(F,I,N)&&(_&&_.chainRemoveHead(L,I),P.shift()),_&&_.chainJoin(E,L),T[E]=O.concat(P),T.splice(L,1)}}),r}},82368:function(R){function C(_,T,r){var w=[];return _.forEach(function(b){var c=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);T[c]!==0&&w.push({id:r?r.segmentId():-1,start:b.start,end:b.end,myFill:{above:T[c]===1,below:T[c]===2},otherFill:null})}),r&&r.selected(w),w}var e={union:function(_,T){return C(_,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(_,T){return C(_,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(_,T){return C(_,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(_,T){return C(_,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(_,T){return C(_,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};R.exports=e},9696:function(R,C,e){"use strict";var _=e(29936).Transform,T=e(55619);function r(){_.call(this,{readableObjectMode:!0})}function w(b,c,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,c&&(this.code=c),o&&(this.statusCode=o)}r.prototype=Object.create(_.prototype),r.prototype.constructor=r,T(r.prototype),C.gS=function(b,c,o){for(var t=c,i=0;i<o.length;)if(b[t++]!==o[i++])return!1;return!0},C.wR=function(b,c){var o=[],t=0;if(c&&c==="hex")for(;t<b.length;)o.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)o.push(255&b.charCodeAt(t));return o},C.Bz=function(b,c){return b[c]|b[c+1]<<8},C.eW=function(b,c){return b[c+1]|b[c]<<8},C.st=function(b,c){return b[c]|b[c+1]<<8|b[c+2]<<16|16777216*b[c+3]},C.eI=function(b,c){return b[c+3]|b[c+2]<<8|b[c+1]<<16|16777216*b[c]},w.prototype=Object.create(Error.prototype),w.prototype.constructor=w},11688:function(R){"use strict";function C(T,r){var w=new Error(T);return w.code=r,w}function e(T){try{return decodeURIComponent(escape(T))}catch{return T}}function _(T,r,w){this.input=T.subarray(r,w),this.start=r;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw C("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}_.prototype.each=function(T){this.aborted=!1;var r=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:r}];this.ifds_to_read.length>0&&!this.aborted;){var w=this.ifds_to_read.shift();w.offset&&this.scan_ifd(w.id,w.offset,T)}},_.prototype.read_uint16=function(T){var r=this.input;if(T+2>r.length)throw C("unexpected EOF","EBADDATA");return this.big_endian?256*r[T]+r[T+1]:r[T]+256*r[T+1]},_.prototype.read_uint32=function(T){var r=this.input;if(T+4>r.length)throw C("unexpected EOF","EBADDATA");return this.big_endian?16777216*r[T]+65536*r[T+1]+256*r[T+2]+r[T+3]:r[T]+256*r[T+1]+65536*r[T+2]+16777216*r[T+3]},_.prototype.is_subifd_link=function(T,r){return T===0&&r===34665||T===0&&r===34853||T===34665&&r===40965},_.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},_.prototype.exif_format_read=function(T,r){var w;switch(T){case 1:case 2:return this.input[r];case 6:return(w=this.input[r])|33554430*(128&w);case 3:return this.read_uint16(r);case 8:return(w=this.read_uint16(r))|131070*(32768&w);case 4:return this.read_uint32(r);case 9:return 0|this.read_uint32(r);default:return null}},_.prototype.scan_ifd=function(T,r,w){var b=this.read_uint16(r);r+=2;for(var c=0;c<b;c++){var o=this.read_uint16(r),t=this.read_uint16(r+2),i=this.read_uint32(r+4),n=this.exif_format_length(t),a=i*n,s=a<=4?r+8:this.read_uint32(r+8),l=!1;if(s+a>this.input.length)throw C("unexpected EOF","EBADDATA");for(var u=[],p=s,f=0;f<i;f++,p+=n){var m=this.exif_format_read(t,p);if(m===null){u=null;break}u.push(m)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(T,o)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:o,offset:u[0]}),l=!0),w({is_big_endian:this.big_endian,ifd:T,tag:o,format:t,count:i,entry_offset:r+this.start,data_length:a,data_offset:s+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);r+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(r)})},R.exports.ExifParser=_,R.exports.get_orientation=function(T){var r=0;try{return new _(T,0,T.length).each(function(w){if(w.ifd===0&&w.tag===274&&Array.isArray(w.value))return r=w.value[0],!1}),r}catch{return-1}}},44600:function(R,C,e){"use strict";var _=e(9696).eW,T=e(9696).eI;function r(i,n){if(i.length<4+n)return null;var a=T(i,n);return i.length<a+n||a<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(n+4,n+8)),data:i.slice(n+8,n+a),end:n+a}}function w(i,n){for(var a=0;;){var s=r(i,a);if(!s)break;switch(s.boxtype){case"ispe":n.sizes.push({width:T(s.data,4),height:T(s.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&s.data[0]})}a=s.end}}function b(i,n,a){for(var s=0,l=0;l<a;l++)s=256*s+(i[n+l]||0);return s}function c(i,n){for(var a=i[4]>>4&15,s=15&i[4],l=i[5]>>4&15,u=_(i,6),p=8,f=0;f<u;f++){var m=_(i,p),h=_(i,p+=2),g=b(i,p+=2,l),v=_(i,p+=l);if(p+=2,h===0&&v===1){var x=b(i,p,a),y=b(i,p+a,s);n.item_loc[m]={length:y,offset:x+g}}p+=v*(a+s)}}function o(i,n){for(var a=_(i,4),s=6,l=0;l<a;l++){var u=r(i,s);if(!u)break;if(u.boxtype==="infe"){for(var p=_(u.data,4),f="",m=8;m<u.data.length&&u.data[m];m++)f+=String.fromCharCode(u.data[m]);n.item_inf[f]=p}s=u.end}}function t(i,n){for(var a=0;;){var s=r(i,a);if(!s)break;s.boxtype==="ipco"&&w(s.data,n),a=s.end}}R.exports.unbox=r,R.exports.readSizeFromMeta=function(i){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,h){for(var g=4;;){var v=r(m,g);if(!v)break;v.boxtype==="iprp"&&t(v.data,h),v.boxtype==="iloc"&&c(v.data,h),v.boxtype==="iinf"&&o(v.data,h),g=v.end}}(i,n),n.sizes.length){var a,s,l,u=(s=(a=n.sizes).reduce(function(m,h){return m.width>h.width||m.width===h.width&&m.height>h.height?m:h}),l=a.reduce(function(m,h){return m.height>h.height||m.height===h.height&&m.width>h.width?m:h}),s.width>l.height||s.width===l.height&&s.height>l.width?s:l),p=1;n.transforms.forEach(function(m){var h={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(m.type==="imir"&&(p=m.value===0?g[p]:h[p=h[p=g[p]]]),m.type==="irot")for(var v=0;v<m.value;v++)p=h[p]});var f=null;return n.item_inf.Exif&&(f=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?p:null,variants:n.sizes,exif_location:f}}},R.exports.getMimeType=function(i){var n=String.fromCharCode.apply(null,i.slice(0,4)),a={};a[n]=!0;for(var s=8;s<i.length;s+=4)a[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(a.mif1||a.msf1||a.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:a.avif||a.avis?{type:"avif",mime:"image/avif"}:a.heic||a.heix||a.hevc||a.hevx||a.heis?a.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).eI,w=e(44600),b=e(11688),c=_("ftyp");R.exports=function(o){if(T(o,4,c)){var t=w.unbox(o,0);if(t){var i=w.getMimeType(t.data);if(i){for(var n,a=t.end;;){var s=w.unbox(o,a);if(!s)break;if(a=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){n=s.data;break}}if(n){var l=w.readSizeFromMeta(n);if(l){var u={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=o.length){var p=r(o,l.exif_location.offset),f=o.slice(l.exif_location.offset+p+4,l.exif_location.offset+l.exif_location.length),m=b.get_orientation(f);m>0&&(u.orientation=m)}return u}}}}}}},38728:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).Bz,w=_("BM");R.exports=function(b){if(!(b.length<26)&&T(b,0,w))return{width:r(b,18),height:r(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).Bz,w=_("GIF87a"),b=_("GIF89a");R.exports=function(c){if(!(c.length<10)&&(T(c,0,w)||T(c,0,b)))return{width:r(c,6),height:r(c,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(R,C,e){"use strict";var _=e(9696).Bz;R.exports=function(T){var r=_(T,0),w=_(T,2),b=_(T,4);if(r===0&&w===1&&b){for(var c=[],o={width:0,height:0},t=0;t<b;t++){var i=T[6+16*t]||256,n=T[6+16*t+1]||256,a={width:i,height:n};c.push(a),(i>o.width||n>o.height)&&(o=a)}return{width:o.width,height:o.height,variants:c,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(R,C,e){"use strict";var _=e(9696).eW,T=e(9696).wR,r=e(9696).gS,w=e(11688),b=T("Exif\0\0");R.exports=function(c){if(!(c.length<2)&&c[0]===255&&c[1]===216&&c[2]===255)for(var o=2;;){for(;;){if(c.length-o<2)return;if(c[o++]===255)break}for(var t,i,n=c[o++];n===255;)n=c[o++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||c.length-o<2)return;t=_(c,o)-2,o+=2}if(n===217||n===218)return;if(n===225&&t>=10&&r(c,o,b)&&(i=w.get_orientation(c.slice(o+6,o+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(c.length-o<t)return;var a={width:_(c,o+3),height:_(c,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(a.orientation=i),a}o+=t}}},37276:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).eI,w=_(`\x89PNG\r

`),b=_("IHDR");R.exports=function(c){if(!(c.length<24)&&T(c,0,w)&&T(c,12,b))return{width:r(c,16),height:r(c,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).eI,w=_("8BPS\0");R.exports=function(b){if(!(b.length<22)&&T(b,0,w))return{width:r(b,18),height:r(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(R){"use strict";function C(o){return typeof o=="number"&&isFinite(o)&&o>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,_=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,T=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,r=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,w=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function c(o){return b.test(o)?o.match(b)[0]:"px"}R.exports=function(o){if(function(g){var v,x=0,y=g.length;for(g[0]===239&&g[1]===187&&g[2]===191&&(x=3);x<y&&((v=g[x])===32||v===9||v===13||v===10);)x++;return x!==y&&g[x]===60}(o)){for(var t="",i=0;i<o.length;i++)t+=String.fromCharCode(o[i]);var n=(t.match(e)||[""])[0];if(_.test(n)){var a=function(g){var v=g.match(T),x=g.match(r),y=g.match(w);return{width:v&&(v[1]||v[2]),height:x&&(x[1]||x[2]),viewbox:y&&(y[1]||y[2])}}(n),s=parseFloat(a.width),l=parseFloat(a.height);if(a.width&&a.height)return!C(s)||!C(l)?void 0:{width:s,height:l,type:"svg",mime:"image/svg+xml",wUnits:c(a.width),hUnits:c(a.height)};var u=(a.viewbox||"").split(" "),p={width:u[2],height:u[3]},f=parseFloat(p.width),m=parseFloat(p.height);if(C(f)&&C(m)&&c(p.width)===c(p.height)){var h=f/m;return a.width?C(s)?{width:s,height:s/h,type:"svg",mime:"image/svg+xml",wUnits:c(a.width),hUnits:c(a.width)}:void 0:a.height?C(l)?{width:l*h,height:l,type:"svg",mime:"image/svg+xml",wUnits:c(a.height),hUnits:c(a.height)}:void 0:{width:f,height:m,type:"svg",mime:"image/svg+xml",wUnits:c(p.width),hUnits:c(p.height)}}}}}},98792:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).Bz,w=e(9696).eW,b=e(9696).st,c=e(9696).eI,o=_("II*\0"),t=_("MM\0*");function i(s,l,u){return u?w(s,l):r(s,l)}function n(s,l,u){return u?c(s,l):b(s,l)}function a(s,l,u){var p=i(s,l+2,u);return n(s,l+4,u)!==1||p!==3&&p!==4?null:p===3?i(s,l+8,u):n(s,l+8,u)}R.exports=function(s){if(!(s.length<8)&&(T(s,0,o)||T(s,0,t))){var l=s[0]===77,u=n(s,4,l)-8;if(!(u<0)){var p=u+8;if(!(s.length-p<2)){var f=12*i(s,p+0,l);if(!(f<=0||(p+=2,s.length-p<f))){var m,h,g,v;for(m=0;m<f;m+=12)(v=i(s,p+m,l))===256?h=a(s,p+m,l):v===257&&(g=a(s,p+m,l));return h&&g?{width:h,height:g,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(R,C,e){"use strict";var _=e(9696).wR,T=e(9696).gS,r=e(9696).Bz,w=e(9696).st,b=e(11688),c=_("RIFF"),o=_("WEBP");function t(a,s){if(a[s+3]===157&&a[s+4]===1&&a[s+5]===42)return{width:16383&r(a,s+6),height:16383&r(a,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(a,s){if(a[s]===47){var l=w(a,s+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(a,s){return{width:1+(a[s+6]<<16|a[s+5]<<8|a[s+4]),height:1+(a[s+9]<<s|a[s+8]<<8|a[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}R.exports=function(a){if(!(a.length<16)&&(T(a,0,c)||T(a,8,o))){var s=12,l=null,u=0,p=w(a,4)+8;if(!(p>a.length)){for(;s+8<p;)if(a[s]!==0){var f=String.fromCharCode.apply(null,a.slice(s,s+4)),m=w(a,s+4);f==="VP8 "&&m>=10?l=l||t(a,s+8):f==="VP8L"&&m>=9?l=l||i(a,s+8):f==="VP8X"&&m>=10?l=l||n(a,s+8):f==="EXIF"&&(u=b.get_orientation(a.slice(s+8,s+8+m)),s=1/0),s+=8+m}else s++;if(l)return u>0&&(l.orientation=u),l}}}},87480:function(R,C,e){"use strict";R.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(R,C,e){"use strict";var _=e(87480);R.exports=function(T){return function(r){for(var w=Object.keys(_),b=0;b<w.length;b++){var c=_[w[b]](r);if(c)return c}return null}(T)},R.exports.parsers=_},4168:function(R){var C,e,_=R.exports={};function T(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function w(l){if(C===setTimeout)return setTimeout(l,0);if((C===T||!C)&&setTimeout)return C=setTimeout,setTimeout(l,0);try{return C(l,0)}catch{try{return C.call(null,l,0)}catch{return C.call(this,l,0)}}}(function(){try{C=typeof setTimeout=="function"?setTimeout:T}catch{C=T}try{e=typeof clearTimeout=="function"?clearTimeout:r}catch{e=r}})();var b,c=[],o=!1,t=-1;function i(){o&&b&&(o=!1,b.length?c=b.concat(c):t=-1,c.length&&n())}function n(){if(!o){var l=w(i);o=!0;for(var u=c.length;u;){for(b=c,c=[];++t<u;)b&&b[t].run();t=-1,u=c.length}b=null,o=!1,function(p){if(e===clearTimeout)return clearTimeout(p);if((e===r||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(p);try{return e(p)}catch{try{return e.call(null,p)}catch{return e.call(this,p)}}}(l)}}function a(l,u){this.fun=l,this.array=u}function s(){}_.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];c.push(new a(l,u)),c.length!==1||o||w(n)},a.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=s,_.addListener=s,_.once=s,_.off=s,_.removeListener=s,_.removeAllListeners=s,_.emit=s,_.prependListener=s,_.prependOnceListener=s,_.listeners=function(l){return[]},_.binding=function(l){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(l){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},3951:function(R,C,e){for(var _=e(41984),T=typeof window>"u"?e.g:window,r=["moz","webkit"],w="AnimationFrame",b=T["request"+w],c=T["cancel"+w]||T["cancelRequest"+w],o=0;!b&&o<r.length;o++)b=T[r[o]+"Request"+w],c=T[r[o]+"Cancel"+w]||T[r[o]+"CancelRequest"+w];if(!b||!c){var t=0,i=0,n=[];b=function(a){if(n.length===0){var s=_(),l=Math.max(0,16.666666666666668-(s-t));t=l+s,setTimeout(function(){var u=n.slice(0);n.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(t)}catch(f){setTimeout(function(){throw f},0)}},Math.round(l))}return n.push({handle:++i,callback:a,cancelled:!1}),i},c=function(a){for(var s=0;s<n.length;s++)n[s].handle===a&&(n[s].cancelled=!0)}}R.exports=function(a){return b.call(T,a)},R.exports.cancel=function(){c.apply(T,arguments)},R.exports.polyfill=function(a){a||(a=T),a.requestAnimationFrame=b,a.cancelAnimationFrame=c}},24544:function(R,C,e){"use strict";var _=e(76752),T=e(72160),r=e(45223),w=e(55616),b=e(50896),c=e(47520),o=e(37816),t=o.float32,i=o.fract32;R.exports=function(a,s){if(typeof a=="function"?(s||(s={}),s.regl=a):s=a,s.length&&(s.positions=s),!(a=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,p,f,m,h,g=a._gl,v={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return f=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=a.buffer({usage:"static",type:"float",data:n}),S(s),l=a({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(E,L){return[L.viewport.x,L.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:f,offset:function(E,L){return 4*L.offset},divisor:1},position:{buffer:u,offset:function(E,L){return 8*L.offset},divisor:1},positionFract:{buffer:p,offset:function(E,L){return 8*L.offset},divisor:1},error:{buffer:m,offset:function(E,L){return 16*L.offset},divisor:1},direction:{buffer:h,stride:24,offset:0},lineOffset:{buffer:h,stride:24,offset:8},capOffset:{buffer:h,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:n.length}),b(y,{update:S,draw:A,destroy:k,regl:a,gl:g,canvas:g.canvas,groups:x}),y;function y(E){E?S(E):E===null&&k(),A()}function A(E){if(typeof E=="number")return d(E);E&&!Array.isArray(E)&&(E=[E]),a._refresh(),x.forEach(function(L,O){L&&(E&&(E[O]?L.draw=!0:L.draw=!1),L.draw?d(O):L.draw=!0)})}function d(E){typeof E=="number"&&(E=x[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var L=0,O=0;if(y.groups=x=E.map(function(B,V){var q=x[V];return B&&(typeof B=="function"?B={after:B}:typeof B[0]=="number"&&(B={positions:B}),B=w(B,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(x[V]=q={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},B=b({},v,B)),r(q,B,[{lineWidth:function(ne){return .5*+ne},capSize:function(ne){return .5*+ne},opacity:parseFloat,errors:function(ne){return ne=c(ne),O+=ne.length,ne},positions:function(ne,$){return ne=c(ne,"float64"),$.count=Math.floor(ne.length/2),$.bounds=_(ne,2),$.offset=L,L+=$.count,ne}},{color:function(ne,$){var K=$.count;if(ne||(ne="transparent"),!Array.isArray(ne)||typeof ne[0]=="number"){var ee=ne;ne=Array(K);for(var J=0;J<K;J++)ne[J]=ee}if(ne.length<K)throw Error("Not enough colors");for(var Z=new Uint8Array(4*K),te=0;te<K;te++){var oe=T(ne[te],"uint8");Z.set(oe,4*te)}return Z},range:function(ne,$,K){var ee=$.bounds;return ne||(ne=ee),$.scale=[1/(ne[2]-ne[0]),1/(ne[3]-ne[1])],$.translate=[-ne[0],-ne[1]],$.scaleFract=i($.scale),$.translateFract=i($.translate),ne},viewport:function(ne){var $;return Array.isArray(ne)?$={x:ne[0],y:ne[1],width:ne[2]-ne[0],height:ne[3]-ne[1]}:ne?($={x:ne.x||ne.left||0,y:ne.y||ne.top||0},ne.right?$.width=ne.right-$.x:$.width=ne.w||ne.width||0,ne.bottom?$.height=ne.bottom-$.y:$.height=ne.h||ne.height||0):$={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},$}}])),q}),L||O){var P=x.reduce(function(B,V,q){return B+(V?V.count:0)},0),F=new Float64Array(2*P),U=new Uint8Array(4*P),I=new Float32Array(4*P);x.forEach(function(B,V){if(B){var q=B.positions,ne=B.count,$=B.offset,K=B.color,ee=B.errors;ne&&(U.set(K,4*$),I.set(ee,4*$),F.set(q,2*$))}});var N=t(F);u(N);var W=i(F,N);p(W),f(U),m(I)}}}function k(){u.destroy(),p.destroy(),f.destroy(),m.destroy(),h.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(R,C,e){"use strict";var _=e(72160),T=e(76752),r=e(50896),w=e(55616),b=e(47520),c=e(28912),o=e(71152),t=e(37816),i=t.float32,n=t.fract32,a=e(60463),s=e(51160),l=e(10272);function u(p,f){if(!(this instanceof u))return new u(p,f);if(typeof p=="function"?(f||(f={}),f.regl=p):f=p,f.length&&(f.positions=f),!(p=f.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=u.shaders.has(p)?u.shaders.get(p):u.shaders.set(p,u.createShaders(p)).get(p),this.update(f)}R.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new a,u.createShaders=function(p){var f,m=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),h={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,x){return x.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(v,x){return[x.viewport.x,x.viewport.y,v.viewportWidth,v.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},g=p(r({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},h));try{f=p(r({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},h))}catch{f=g}return{fill:p({primitive:"triangle",elements:function(v,x){return x.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(v,x){return[x.viewport.x,x.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:h.blend,depth:{enable:!1},scissor:h.scissor,stencil:h.stencil,viewport:h.viewport}),rect:g,miter:f}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var p,f=[],m=arguments.length;m--;)f[m]=arguments[m];f.length&&(p=this).update.apply(p,f),this.draw()},u.prototype.draw=function(){for(var p=this,f=[],m=arguments.length;m--;)f[m]=arguments[m];return(f.length?f:this.passes).forEach(function(h,g){var v;if(h&&Array.isArray(h))return(v=p).draw.apply(v,h);typeof h=="number"&&(h=p.passes[h]),h&&h.count>1&&h.opacity&&(p.regl._refresh(),h.fill&&h.triangles&&h.triangles.length>2&&p.shaders.fill(h),h.thickness&&(h.scale[0]*h.viewport.width>u.precisionThreshold||h.scale[1]*h.viewport.height>u.precisionThreshold||h.join==="rect"||!h.join&&(h.thickness<=2||h.count>=u.maxPoints)?p.shaders.rect(h):p.shaders.miter(h)))}),this},u.prototype.update=function(p){var f=this;if(p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var m=this.regl,h=this.gl;if(p.forEach(function(A,d){var S=f.passes[d];if(A!==void 0)if(A!==null){if(typeof A[0]=="number"&&(A={positions:A}),A=w(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(f.passes[d]=S={id:d,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:m.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:m.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:m.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=r({},u.defaults,A)),A.thickness!=null&&(S.thickness=parseFloat(A.thickness)),A.opacity!=null&&(S.opacity=parseFloat(A.opacity)),A.miterLimit!=null&&(S.miterLimit=parseFloat(A.miterLimit)),A.overlay!=null&&(S.overlay=!!A.overlay,d<u.maxLines&&(S.depth=2*(u.maxLines-1-d%u.maxLines)/u.maxLines-1)),A.join!=null&&(S.join=A.join),A.hole!=null&&(S.hole=A.hole),A.fill!=null&&(S.fill=A.fill?_(A.fill,"uint8"):null),A.viewport!=null&&(S.viewport=s(A.viewport)),S.viewport||(S.viewport=s([h.drawingBufferWidth,h.drawingBufferHeight])),A.close!=null&&(S.close=A.close),A.positions===null&&(A.positions=[]),A.positions){var k,E;if(A.positions.x&&A.positions.y){var L=A.positions.x,O=A.positions.y;E=S.count=Math.max(L.length,O.length),k=new Float64Array(2*E);for(var P=0;P<E;P++)k[2*P]=L[P],k[2*P+1]=O[P]}else k=b(A.positions,"float64"),E=S.count=Math.floor(k.length/2);var F=S.bounds=T(k,2);if(S.fill){for(var U=[],I={},N=0,W=0,B=0,V=S.count;W<V;W++){var q=k[2*W],ne=k[2*W+1];isNaN(q)||isNaN(ne)||q==null||ne==null?(q=k[2*N],ne=k[2*N+1],I[W]=N):N=W,U[B++]=q,U[B++]=ne}if(A.splitNull){S.count-1 in I||(I[S.count]=S.count-1);var $=Object.keys(I).map(Number).sort(function(_t,mt){return _t-mt}),K=[],ee=0,J=S.hole!=null?S.hole[0]:null;if(J!=null){var Z=l($,function(_t){return _t>=J});($=$.slice(0,Z)).push(J)}for(var te=function(_t){var mt=U.slice(2*ee,2*$[_t]).concat(J?U.slice(2*J):[]),tt=(S.hole||[]).map(function(Dt){return Dt-J+($[_t]-ee)}),Qe=c(mt,tt);Qe=Qe.map(function(Dt){return Dt+ee+(Dt+ee<$[_t]?0:J-$[_t])}),K.push.apply(K,Qe),ee=$[_t]+1},oe=0;oe<$.length;oe++)te(oe);for(var se=0,ce=K.length;se<ce;se++)I[K[se]]!=null&&(K[se]=I[K[se]]);S.triangles=K}else{for(var ye=c(U,S.hole||[]),me=0,fe=ye.length;me<fe;me++)I[ye[me]]!=null&&(ye[me]=I[ye[me]]);S.triangles=ye}}var pe=new Float64Array(k);o(pe,2,F);var ge=new Float64Array(2*E+6);S.close?k[0]===k[2*E-2]&&k[1]===k[2*E-1]?(ge[0]=pe[2*E-4],ge[1]=pe[2*E-3]):(ge[0]=pe[2*E-2],ge[1]=pe[2*E-1]):(ge[0]=pe[0],ge[1]=pe[1]),ge.set(pe,2),S.close?k[0]===k[2*E-2]&&k[1]===k[2*E-1]?(ge[2*E+2]=pe[2],ge[2*E+3]=pe[3],S.count-=1):(ge[2*E+2]=pe[0],ge[2*E+3]=pe[1],ge[2*E+4]=pe[2],ge[2*E+5]=pe[3]):(ge[2*E+2]=pe[2*E-2],ge[2*E+3]=pe[2*E-1],ge[2*E+4]=pe[2*E-2],ge[2*E+5]=pe[2*E-1]);var ke=i(ge);S.positionBuffer(ke);var Ce=n(ge,ke);S.positionFractBuffer(Ce)}if(A.range?S.range=A.range:S.range||(S.range=S.bounds),(A.range||A.positions)&&S.count){var de=S.bounds,ae=de[2]-de[0],re=de[3]-de[1],he=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[ae/he,re/Se],S.translate=[-S.range[0]/he+de[0]/he||0,-S.range[1]/Se+de[1]/Se||0],S.scaleFract=n(S.scale),S.translateFract=n(S.translate)}if(A.dashes){var xe,Te=0;if(!A.dashes||A.dashes.length<2)Te=1,xe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Te=0;for(var Ae=0;Ae<A.dashes.length;++Ae)Te+=A.dashes[Ae];xe=new Uint8Array(Te*u.dashMult);for(var Pe=0,De=255,ve=0;ve<2;ve++)for(var we=0;we<A.dashes.length;++we){for(var Ee=0,Fe=A.dashes[we]*u.dashMult*.5;Ee<Fe;++Ee)xe[Pe++]=De;De^=255}}S.dashLength=Te,S.dashTexture({channels:1,data:xe,width:xe.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){var Le=S.count,je=A.color;je||(je="transparent");var Ge=new Uint8Array(4*Le+4);if(Array.isArray(je)&&typeof je[0]!="number"){for(var Je=0;Je<Le;Je++){var rt=_(je[Je],"uint8");Ge.set(rt,4*Je)}Ge.set(_(je[0],"uint8"),4*Le)}else for(var ot=_(je,"uint8"),yt=0;yt<Le+1;yt++)Ge.set(ot,4*yt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ge})}}else f.passes[d]=null}),p.length<this.passes.length){for(var g=p.length;g<this.passes.length;g++){var v=this.passes[g];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=p.length}for(var x=[],y=0;y<this.passes.length;y++)this.passes[y]!==null&&x.push(this.passes[y]);return this.passes=x,this}},u.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(R,C,e){"use strict";function _(g,v){return function(x){if(Array.isArray(x))return x}(g)||function(x,y){var A=x==null?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(A!=null){var d,S,k,E,L=[],O=!0,P=!1;try{if(k=(A=A.call(x)).next,y===0){if(Object(A)!==A)return;O=!1}else for(;!(O=(d=k.call(A)).done)&&(L.push(d.value),L.length!==y);O=!0);}catch(F){P=!0,S=F}finally{try{if(!O&&A.return!=null&&(E=A.return(),Object(E)!==E))return}finally{if(P)throw S}}return L}}(g,v)||T(g,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function T(g,v){if(g){if(typeof g=="string")return r(g,v);var x=Object.prototype.toString.call(g).slice(8,-1);return x==="Object"&&g.constructor&&(x=g.constructor.name),x==="Map"||x==="Set"?Array.from(g):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?r(g,v):void 0}}function r(g,v){(v==null||v>g.length)&&(v=g.length);for(var x=0,y=new Array(v);x<v;x++)y[x]=g[x];return y}var w=e(72160),b=e(76752),c=e(3808),o=e(3108),t=e(50896),i=e(26444),n=e(55616),a=e(45223),s=e(47520),l=e(96604),u=e(37816),p=e(51160),f=m;function m(g,v){var x=this;if(!(this instanceof m))return new m(g,v);typeof g=="function"?(v||(v={}),v.regl=g):(v=g,g=null),v&&v.length&&(v.positions=v);var y,A=(g=v.regl)._gl,d=[];this.tooManyColors=l,y=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:g,gl:A,groups:[],markerCache:[null],markerTextures:[null],palette:d,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:A.canvas}),this.update(v);var S={uniforms:{constPointSize:!!v.constPointSize,opacity:g.prop("opacity"),paletteSize:function(L,O){return[x.tooManyColors?0:255,y.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:y},attributes:{x:function(L,O){return O.xAttr||{buffer:O.positionBuffer,stride:8,offset:0}},y:function(L,O){return O.yAttr||{buffer:O.positionBuffer,stride:8,offset:4}},xFract:function(L,O){return O.xAttr?{constant:[0,0]}:{buffer:O.positionFractBuffer,stride:8,offset:0}},yFract:function(L,O){return O.yAttr?{constant:[0,0]}:{buffer:O.positionFractBuffer,stride:8,offset:4}},size:function(L,O){return O.size.length?{buffer:O.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*O.size/x.maxSize)]}},borderSize:function(L,O){return O.borderSize.length?{buffer:O.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*O.borderSize/x.maxSize)]}},colorId:function(L,O){return O.color.length?{buffer:O.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?d.slice(4*O.color,4*O.color+4):[O.color]}},borderColorId:function(L,O){return O.borderColor.length?{buffer:O.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?d.slice(4*O.borderColor,4*O.borderColor+4):[O.borderColor]}},isActive:function(L,O){return O.activation===!0?{constant:[1]}:O.activation?O.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},k=t({},S);k.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),k.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=g(k);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),k.frag=k.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(E)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},m.prototype.draw=function(){for(var g=this,v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];var A=this.groups;if(x.length===1&&Array.isArray(x[0])&&(x[0][0]===null||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var d=0;d<x.length;d++)this.drawItem(d,x[d]);else A.forEach(function(S,k){g.drawItem(k)});return this},m.prototype.drawItem=function(g,v){var x,y=this.groups,A=y[g];if(typeof v=="number"&&(g=v,A=y[v],v=null),A&&A.count&&A.opacity){A.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,A,v));for(var d=[],S=1;S<A.activation.length;S++)A.activation[S]&&(A.activation[S]===!0||A.activation[S].data.length)&&d.push.apply(d,function(k){if(Array.isArray(k))return r(k)}(x=this.getMarkerDrawOptions(S,A,v))||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(x)||T(x)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());d.length&&this.drawMarker(d)}},m.prototype.getMarkerDrawOptions=function(g,v,x){var y=v.range,A=v.tree,d=v.viewport,S=v.activation,k=v.selectionBuffer,E=v.count;if(this.regl,!A)return x?[t({},v,{markerTexture:this.markerTextures[g],activation:S[g],count:x.length,elements:x,offset:0})]:[t({},v,{markerTexture:this.markerTextures[g],activation:S[g],offset:0})];var L=[],O=A.range(y,{lod:!0,px:[(y[2]-y[0])/d.width,(y[3]-y[1])/d.height]});if(x){for(var P=S[g].data,F=new Uint8Array(E),U=0;U<x.length;U++){var I=x[U];F[I]=P?P[I]:1}k.subdata(F)}for(var N=O.length;N--;){var W=_(O[N],2),B=W[0],V=W[1];L.push(t({},v,{markerTexture:this.markerTextures[g],activation:x?k:S[g],offset:B,count:V-B}))}return L},m.prototype.update=function(){for(var g=this,v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];if(x.length){x.length===1&&Array.isArray(x[0])&&(x=x[0]);var A=this.groups,d=this.gl,S=this.regl,k=this.maxSize,E=this.maxColors,L=this.palette;this.groups=A=x.map(function(O,P){var F=A[P];if(O===void 0)return F;O===null?O={positions:null}:typeof O=="function"?O={ondraw:O}:typeof O[0]=="number"&&(O={positions:O}),(O=n(O,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(O.positions=[]),O.tooManyColors!=null&&(g.tooManyColors=O.tooManyColors),F||(A[P]=F={id:P,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},O=t({},m.defaults,O)),O.positions&&!("marker"in O)&&(O.marker=F.marker,delete F.marker),O.marker&&!("positions"in O)&&(O.positions=F.positions,delete F.positions);var U=0,I=0;if(a(F,O,[{snap:!0,size:function(fe,pe){return fe==null&&(fe=m.defaults.size),U+=fe&&fe.length?1:0,fe},borderSize:function(fe,pe){return fe==null&&(fe=m.defaults.borderSize),U+=fe&&fe.length?1:0,fe},opacity:parseFloat,color:function(fe,pe){return fe==null&&(fe=m.defaults.color),fe=g.updateColor(fe),I++,fe},borderColor:function(fe,pe){return fe==null&&(fe=m.defaults.borderColor),fe=g.updateColor(fe),I++,fe},bounds:function(fe,pe,ge){return"range"in ge||(ge.range=null),fe},positions:function(fe,pe,ge){var ke=pe.snap,Ce=pe.positionBuffer,de=pe.positionFractBuffer,ae=pe.selectionBuffer;if(fe.x||fe.y)return fe.x.length?pe.xAttr={buffer:S.buffer(fe.x),offset:0,stride:4,count:fe.x.length}:pe.xAttr={buffer:fe.x.buffer,offset:4*fe.x.offset||0,stride:4*(fe.x.stride||1),count:fe.x.count},fe.y.length?pe.yAttr={buffer:S.buffer(fe.y),offset:0,stride:4,count:fe.y.length}:pe.yAttr={buffer:fe.y.buffer,offset:4*fe.y.offset||0,stride:4*(fe.y.stride||1),count:fe.y.count},pe.count=Math.max(pe.xAttr.count,pe.yAttr.count),fe;fe=s(fe,"float64");var re=pe.count=Math.floor(fe.length/2),he=pe.bounds=re?b(fe,2):null;if(ge.range||pe.range||(delete pe.range,ge.range=he),ge.marker||pe.marker||(delete pe.marker,ge.marker=null),ke&&(ke===!0||re>ke)?pe.tree=o(fe,{bounds:he}):ke&&ke.length&&(pe.tree=ke),pe.tree){var Se={primitive:"points",usage:"static",data:pe.tree,type:"uint32"};pe.elements?pe.elements(Se):pe.elements=S.elements(Se)}var xe=u.float32(fe);return Ce({data:xe,usage:"dynamic"}),de({data:u.fract32(fe,xe),usage:"dynamic"}),ae({data:new Uint8Array(re),type:"uint8",usage:"stream"}),fe}},{marker:function(fe,pe,ge){var ke=pe.activation;if(ke.forEach(function(xe){return xe&&xe.destroy&&xe.destroy()}),ke.length=0,fe&&typeof fe[0]!="number"){for(var Ce=[],de=0,ae=Math.min(fe.length,pe.count);de<ae;de++){var re=g.addMarker(fe[de]);Ce[re]||(Ce[re]=new Uint8Array(pe.count)),Ce[re][de]=1}for(var he=0;he<Ce.length;he++)if(Ce[he]){var Se={data:Ce[he],type:"uint8",usage:"static"};ke[he]?ke[he](Se):ke[he]=S.buffer(Se),ke[he].data=Ce[he]}}else ke[g.addMarker(fe)]=!0;return fe},range:function(fe,pe,ge){var ke=pe.bounds;if(ke)return fe||(fe=ke),pe.scale=[1/(fe[2]-fe[0]),1/(fe[3]-fe[1])],pe.translate=[-fe[0],-fe[1]],pe.scaleFract=u.fract(pe.scale),pe.translateFract=u.fract(pe.translate),fe},viewport:function(fe){return p(fe||[d.drawingBufferWidth,d.drawingBufferHeight])}}]),U){var N=F,W=N.count,B=N.size,V=N.borderSize,q=N.sizeBuffer,ne=new Uint8Array(2*W);if(B.length||V.length)for(var $=0;$<W;$++)ne[2*$]=Math.round(255*(B[$]==null?B:B[$])/k),ne[2*$+1]=Math.round(255*(V[$]==null?V:V[$])/k);q({data:ne,usage:"dynamic"})}if(I){var K,ee=F,J=ee.count,Z=ee.color,te=ee.borderColor,oe=ee.colorBuffer;if(g.tooManyColors){if(Z.length||te.length){K=new Uint8Array(8*J);for(var se=0;se<J;se++){var ce=Z[se];K[8*se]=L[4*ce],K[8*se+1]=L[4*ce+1],K[8*se+2]=L[4*ce+2],K[8*se+3]=L[4*ce+3];var ye=te[se];K[8*se+4]=L[4*ye],K[8*se+5]=L[4*ye+1],K[8*se+6]=L[4*ye+2],K[8*se+7]=L[4*ye+3]}}}else if(Z.length||te.length){K=new Uint8Array(4*J+2);for(var me=0;me<J;me++)Z[me]!=null&&(K[4*me]=Z[me]%E,K[4*me+1]=Math.floor(Z[me]/E)),te[me]!=null&&(K[4*me+2]=te[me]%E,K[4*me+3]=Math.floor(te[me]/E))}oe({data:K||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return F})}},m.prototype.addMarker=function(g){var v,x=this.markerTextures,y=this.regl,A=this.markerCache,d=g==null?0:A.indexOf(g);if(d>=0)return d;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)v=g;else{v=new Uint8Array(g.length);for(var S=0,k=g.length;S<k;S++)v[S]=255*g[S]}var E=Math.floor(Math.sqrt(v.length));return d=x.length,A.push(g),x.push(y.texture({channels:1,data:v,radius:E,mag:"linear",min:"linear"})),d},m.prototype.updateColor=function(g){var v=this.paletteIds,x=this.palette,y=this.maxColors;Array.isArray(g)||(g=[g]);var A=[];if(typeof g[0]=="number"){var d=[];if(Array.isArray(g))for(var S=0;S<g.length;S+=4)d.push(g.slice(S,S+4));else for(var k=0;k<g.length;k+=4)d.push(g.subarray(k,k+4));g=d}for(var E=0;E<g.length;E++){var L=g[E];L=w(L,"uint8");var O=c(L,!1);if(v[O]==null){var P=x.length;v[O]=Math.floor(P/4),x[P]=L[0],x[P+1]=L[1],x[P+2]=L[2],x[P+3]=L[3]}A[E]=v[O]}return!this.tooManyColors&&x.length>4*y&&(this.tooManyColors=!0),this.updatePalette(x),A.length===1?A[0]:A},m.prototype.updatePalette=function(g){if(!this.tooManyColors){var v=this.maxColors,x=this.paletteTexture,y=Math.ceil(.25*g.length/v);if(y>1)for(var A=.25*(g=g.slice()).length%v;A<y*v;A++)g.push(0,0,0,0);x.height<y&&x.resize(v,y),x.subimage({width:Math.min(.25*g.length,v),height:y,data:g},0,0)}},m.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(v){return v&&v.destroy&&v.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var h=e(50896);R.exports=function(g,v){var x=new f(g,v),y=x.render.bind(x);return h(y,{render:y,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),y}},55795:function(R,C,e){"use strict";var _=e(38540),T=e(55616),r=e(76752),w=e(3951),b=e(67752),c=e(51160),o=e(47520);function t(s,l){if(!(this instanceof t))return new t(s,l);this.traces=[],this.passes={},this.regl=s,this.scatter=_(s),this.canvas=this.scatter.canvas}function i(s,l,u){return(s.id!=null?s.id:s)<<16|(255&l)<<8|255&u}function n(s,l,u){var p,f,m,h,g=s[l],v=s[u];return g.length>2?(g[0],g[2],p=g[1],f=g[3]):g.length?(p=g[0],f=g[1]):(g.x,p=g.y,g.x,g.width,f=g.y+g.height),v.length>2?(m=v[0],h=v[2],v[1],v[3]):v.length?(m=v[0],h=v[1]):(m=v.x,v.y,h=v.x+v.width,v.y,v.height),[m,p,h,f]}function a(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var l=c(s);return[l.x,l.y,l.x+l.width,l.y+l.height]}R.exports=t,t.prototype.render=function(){for(var s,l=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(s=this).update.apply(s,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=w(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,w(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var s,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var p=0;p<l.length;p++)this.updateItem(p,l[p]);this.traces=this.traces.filter(Boolean);for(var f=[],m=0,h=0;h<this.traces.length;h++){for(var g=this.traces[h],v=this.traces[h].passes,x=0;x<v.length;x++)f.push(this.passes[v[x]]);g.passOffset=m,m+=g.passes.length}return(s=this.scatter).update.apply(s,f),this}},t.prototype.updateItem=function(s,l){var u=this.regl;if(l===null)return this.traces[s]=null,this;if(!l)return this;var p,f=T(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:c([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(m.color=f.color),f.size!=null&&(m.size=f.size),f.marker!=null&&(m.marker=f.marker),f.borderColor!=null&&(m.borderColor=f.borderColor),f.borderSize!=null&&(m.borderSize=f.borderSize),f.opacity!=null&&(m.opacity=f.opacity),f.viewport&&(m.viewport=c(f.viewport)),f.diagonal!=null&&(m.diagonal=f.diagonal),f.upper!=null&&(m.upper=f.upper),f.lower!=null&&(m.lower=f.lower),f.data){m.buffer(o(f.data)),m.columns=f.data.length,m.count=f.data[0].length,m.bounds=[];for(var h=0;h<m.columns;h++)m.bounds[h]=r(f.data[h],1)}f.range&&(m.range=f.range,p=m.range&&typeof m.range[0]!="number"),f.domain&&(m.domain=f.domain);var g=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===m.columns&&typeof f.padding[f.padding.length-1]=="number"?(m.padding=f.padding.map(a),g=!0):m.padding=a(f.padding));var v=m.columns,x=m.count,y=m.viewport.width,A=m.viewport.height,d=m.viewport.x,S=m.viewport.y,k=y/v,E=A/v;m.passes=[];for(var L=0;L<v;L++)for(var O=0;O<v;O++)if((m.diagonal||O!==L)&&(m.upper||!(L>O))&&(m.lower||!(L<O))){var P=i(m.id,L,O),F=this.passes[P]||(this.passes[P]={});if(f.data&&(f.transpose?F.positions={x:{buffer:m.buffer,offset:O,count:x,stride:v},y:{buffer:m.buffer,offset:L,count:x,stride:v}}:F.positions={x:{buffer:m.buffer,offset:O*x,count:x},y:{buffer:m.buffer,offset:L*x,count:x}},F.bounds=n(m.bounds,L,O)),f.domain||f.viewport||f.data){var U=g?n(m.padding,L,O):m.padding;if(m.domain){var I=n(m.domain,L,O),N=I[0],W=I[1],B=I[2],V=I[3];F.viewport=[d+N*y+U[0],S+W*A+U[1],d+B*y-U[2],S+V*A-U[3]]}else F.viewport=[d+O*k+k*U[0],S+L*E+E*U[1],d+(O+1)*k-k*U[2],S+(L+1)*E-E*U[3]]}f.color&&(F.color=m.color),f.size&&(F.size=m.size),f.marker&&(F.marker=m.marker),f.borderSize&&(F.borderSize=m.borderSize),f.borderColor&&(F.borderColor=m.borderColor),f.opacity&&(F.opacity=m.opacity),f.range&&(F.range=p?n(m.range,L,O):m.range||F.bounds),m.passes.push(P)}return this},t.prototype.draw=function(){for(var s,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var p=[],f=0;f<l.length;f++)if(typeof l[f]=="number"){var m=this.traces[l[f]],h=m.passes,g=m.passOffset;p.push.apply(p,b(g,g+h.length))}else if(l[f].length){var v=l[f],x=this.traces[f],y=x.passes,A=x.passOffset;y=y.map(function(d,S){p[A+S]=v})}(s=this.scatter).draw.apply(s,p)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(R){R.exports=function(){function C(Ne,Xe){this.id=te++,this.type=Ne,this.data=Xe}function e(Ne){if(Ne.length===0)return[];var Xe=Ne.charAt(0),st=Ne.charAt(Ne.length-1);if(1<Ne.length&&Xe===st&&(Xe==='"'||Xe==="'"))return['"'+Ne.substr(1,Ne.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Xe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ne))return e(Ne.substr(0,Xe.index)).concat(e(Xe[1])).concat(e(Ne.substr(Xe.index+Xe[0].length)));if((Xe=Ne.split(".")).length===1)return['"'+Ne.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ne=[],st=0;st<Xe.length;++st)Ne=Ne.concat(e(Xe[st]));return Ne}function _(Ne){return"["+e(Ne).join("][")+"]"}function T(Ne){return typeof Ne=="string"?Ne.split():Ne}function r(Ne){return typeof Ne=="string"?document.querySelector(Ne):Ne}function w(Ne){var Xe,st,lt,xt,bt=Ne||{};Ne={};var Ve=[],Be=[],at=typeof window>"u"?1:window.devicePixelRatio,ht=!1,dt={},it=function(Tt){},kt=function(){};if(typeof bt=="string"?Xe=document.querySelector(bt):typeof bt=="object"&&(typeof bt.nodeName=="string"&&typeof bt.appendChild=="function"&&typeof bt.getBoundingClientRect=="function"?Xe=bt:typeof bt.drawArrays=="function"||typeof bt.drawElements=="function"?lt=(xt=bt).canvas:("gl"in bt?xt=bt.gl:"canvas"in bt?lt=r(bt.canvas):"container"in bt&&(st=r(bt.container)),"attributes"in bt&&(Ne=bt.attributes),"extensions"in bt&&(Ve=T(bt.extensions)),"optionalExtensions"in bt&&(Be=T(bt.optionalExtensions)),"onDone"in bt&&(it=bt.onDone),"profile"in bt&&(ht=!!bt.profile),"pixelRatio"in bt&&(at=+bt.pixelRatio),"cachedCode"in bt&&(dt=bt.cachedCode))),Xe&&(Xe.nodeName.toLowerCase()==="canvas"?lt=Xe:st=Xe),!xt){if(!lt){if(!(Xe=function(Tt,St,wt){function At(){var rn=window.innerWidth,nn=window.innerHeight;Tt!==document.body&&(rn=(nn=jt.getBoundingClientRect()).right-nn.left,nn=nn.bottom-nn.top),jt.width=wt*rn,jt.height=wt*nn}var Ft,jt=document.createElement("canvas");return Z(jt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Tt.appendChild(jt),Tt===document.body&&(jt.style.position="absolute",Z(Tt.style,{margin:0,padding:0})),Tt!==document.body&&typeof ResizeObserver=="function"?(Ft=new ResizeObserver(function(){setTimeout(At)})).observe(Tt):window.addEventListener("resize",At,!1),At(),{canvas:jt,onDestroy:function(){Ft?Ft.disconnect():window.removeEventListener("resize",At),Tt.removeChild(jt)}}}(st||document.body,0,at)))return null;lt=Xe.canvas,kt=Xe.onDestroy}Ne.premultipliedAlpha===void 0&&(Ne.premultipliedAlpha=!0),xt=function(Tt,St){function wt(At){try{return Tt.getContext(At,St)}catch{return null}}return wt("webgl")||wt("experimental-webgl")||wt("webgl-experimental")}(lt,Ne)}return xt?{gl:xt,canvas:lt,container:st,extensions:Ve,optionalExtensions:Be,pixelRatio:at,profile:ht,cachedCode:dt,onDone:it,onDestroy:kt}:(kt(),it("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Ne,Xe){for(var st=Array(Ne),lt=0;lt<Ne;++lt)st[lt]=Xe(lt);return st}function c(Ne){var Xe,st;return Xe=(65535<Ne)<<4,Xe|=st=(255<(Ne>>>=Xe))<<3,(Xe|=st=(15<(Ne>>>=st))<<2)|(st=(3<(Ne>>>=st))<<1)|Ne>>>st>>1}function o(){function Ne(lt){e:{for(var xt=16;268435456>=xt;xt*=16)if(lt<=xt){lt=xt;break e}lt=0}return 0<(xt=st[c(lt)>>2]).length?xt.pop():new ArrayBuffer(lt)}function Xe(lt){st[c(lt.byteLength)>>2].push(lt)}var st=b(8,function(){return[]});return{alloc:Ne,free:Xe,allocType:function(lt,xt){var bt=null;switch(lt){case 5120:bt=new Int8Array(Ne(xt),0,xt);break;case 5121:bt=new Uint8Array(Ne(xt),0,xt);break;case 5122:bt=new Int16Array(Ne(2*xt),0,xt);break;case 5123:bt=new Uint16Array(Ne(2*xt),0,xt);break;case 5124:bt=new Int32Array(Ne(4*xt),0,xt);break;case 5125:bt=new Uint32Array(Ne(4*xt),0,xt);break;case 5126:bt=new Float32Array(Ne(4*xt),0,xt);break;default:return null}return bt.length!==xt?bt.subarray(0,xt):bt},freeType:function(lt){Xe(lt.buffer)}}}function t(Ne){return!!Ne&&typeof Ne=="object"&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&typeof Ne.offset=="number"&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||fe(Ne.data))}function i(Ne,Xe,st,lt,xt,bt){for(var Ve=0;Ve<Xe;++Ve)for(var Be=Ne[Ve],at=0;at<st;++at)for(var ht=Be[at],dt=0;dt<lt;++dt)xt[bt++]=ht[dt]}function n(Ne,Xe,st,lt,xt){for(var bt=1,Ve=st+1;Ve<Xe.length;++Ve)bt*=Xe[Ve];var Be=Xe[st];if(Xe.length-st==4){var at=Xe[st+1],ht=Xe[st+2];for(Xe=Xe[st+3],Ve=0;Ve<Be;++Ve)i(Ne[Ve],at,ht,Xe,lt,xt),xt+=bt}else for(Ve=0;Ve<Be;++Ve)n(Ne[Ve],Xe,st+1,lt,xt),xt+=bt}function a(Ne){return 0|ke[Object.prototype.toString.call(Ne)]}function s(Ne,Xe){for(var st=0;st<Xe.length;++st)Ne[st]=Xe[st]}function l(Ne,Xe,st,lt,xt,bt,Ve){for(var Be=0,at=0;at<st;++at)for(var ht=0;ht<lt;++ht)Ne[Be++]=Xe[xt*at+bt*ht+Ve]}function u(Ne,Xe,st,lt){function xt(it){this.id=at++,this.buffer=Ne.createBuffer(),this.type=it,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,st.profile&&(this.stats={size:0})}function bt(it,kt,Tt){it.byteLength=kt.byteLength,Ne.bufferData(it.type,kt,Tt)}function Ve(it,kt,Tt,St,wt,At){if(it.usage=Tt,Array.isArray(kt)){if(it.dtype=St||5126,0<kt.length)if(Array.isArray(kt[0])){wt=re(kt);for(var Ft=St=1;Ft<wt.length;++Ft)St*=wt[Ft];it.dimension=St,bt(it,kt=ae(kt,wt,it.dtype),Tt),At?it.persistentData=kt:ye.freeType(kt)}else typeof kt[0]=="number"?(it.dimension=wt,s(wt=ye.allocType(it.dtype,kt.length),kt),bt(it,wt,Tt),At?it.persistentData=wt:ye.freeType(wt)):fe(kt[0])&&(it.dimension=kt[0].length,it.dtype=St||a(kt[0])||5126,bt(it,kt=ae(kt,[kt.length,kt[0].length],it.dtype),Tt),At?it.persistentData=kt:ye.freeType(kt))}else if(fe(kt))it.dtype=St||a(kt),it.dimension=wt,bt(it,kt,Tt),At&&(it.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(t(kt)){wt=kt.shape;var jt=kt.stride,rn=(Ft=kt.offset,0),nn=0,on=0,Ht=0;wt.length===1?(rn=wt[0],nn=1,on=jt[0],Ht=0):wt.length===2&&(rn=wt[0],nn=wt[1],on=jt[0],Ht=jt[1]),it.dtype=St||a(kt.data)||5126,it.dimension=nn,l(wt=ye.allocType(it.dtype,rn*nn),kt.data,rn,nn,on,Ht,Ft),bt(it,wt,Tt),At?it.persistentData=wt:ye.freeType(wt)}else kt instanceof ArrayBuffer&&(it.dtype=5121,it.dimension=wt,bt(it,kt,Tt),At&&(it.persistentData=new Uint8Array(new Uint8Array(kt))))}function Be(it){Xe.bufferCount--,lt(it),Ne.deleteBuffer(it.buffer),it.buffer=null,delete ht[it.id]}var at=0,ht={};xt.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},xt.prototype.destroy=function(){Be(this)};var dt=[];return st.profile&&(Xe.getTotalBufferSize=function(){var it=0;return Object.keys(ht).forEach(function(kt){it+=ht[kt].stats.size}),it}),{create:function(it,kt,Tt,St){function wt(Ft){var jt=35044,rn=null,nn=0,on=0,Ht=1;return Array.isArray(Ft)||fe(Ft)||t(Ft)||Ft instanceof ArrayBuffer?rn=Ft:typeof Ft=="number"?nn=0|Ft:Ft&&("data"in Ft&&(rn=Ft.data),"usage"in Ft&&(jt=de[Ft.usage]),"type"in Ft&&(on=Ce[Ft.type]),"dimension"in Ft&&(Ht=0|Ft.dimension),"length"in Ft&&(nn=0|Ft.length)),At.bind(),rn?Ve(At,rn,jt,on,Ht,St):(nn&&Ne.bufferData(At.type,nn,jt),At.dtype=on||5121,At.usage=jt,At.dimension=Ht,At.byteLength=nn),st.profile&&(At.stats.size=At.byteLength*he[At.dtype]),wt}Xe.bufferCount++;var At=new xt(kt);return ht[At.id]=At,Tt||wt(it),wt._reglType="buffer",wt._buffer=At,wt.subdata=function(Ft,jt){var rn,nn=0|(jt||0);if(At.bind(),fe(Ft)||Ft instanceof ArrayBuffer)Ne.bufferSubData(At.type,nn,Ft);else if(Array.isArray(Ft)){if(0<Ft.length)if(typeof Ft[0]=="number"){var on=ye.allocType(At.dtype,Ft.length);s(on,Ft),Ne.bufferSubData(At.type,nn,on),ye.freeType(on)}else(Array.isArray(Ft[0])||fe(Ft[0]))&&(rn=re(Ft),on=ae(Ft,rn,At.dtype),Ne.bufferSubData(At.type,nn,on),ye.freeType(on))}else if(t(Ft)){rn=Ft.shape;var Ht=Ft.stride,$t=on=0,bn=0,ln=0;rn.length===1?(on=rn[0],$t=1,bn=Ht[0],ln=0):rn.length===2&&(on=rn[0],$t=rn[1],bn=Ht[0],ln=Ht[1]),rn=Array.isArray(Ft.data)?At.dtype:a(Ft.data),l(rn=ye.allocType(rn,on*$t),Ft.data,on,$t,bn,ln,Ft.offset),Ne.bufferSubData(At.type,nn,rn),ye.freeType(rn)}return wt},st.profile&&(wt.stats=At.stats),wt.destroy=function(){Be(At)},wt},createStream:function(it,kt){var Tt=dt.pop();return Tt||(Tt=new xt(it)),Tt.bind(),Ve(Tt,kt,35040,0,1,!1),Tt},destroyStream:function(it){dt.push(it)},clear:function(){pe(ht).forEach(Be),dt.forEach(Be)},getBuffer:function(it){return it&&it._buffer instanceof xt?it._buffer:null},restore:function(){pe(ht).forEach(function(it){it.buffer=Ne.createBuffer(),Ne.bindBuffer(it.type,it.buffer),Ne.bufferData(it.type,it.persistentData||it.byteLength,it.usage)})},_initBuffer:Ve}}function p(Ne,Xe,st,lt){function xt(it){this.id=at++,Be[this.id]=this,this.buffer=it,this.primType=4,this.type=this.vertCount=0}function bt(it,kt,Tt,St,wt,At,Ft){var jt;if(it.buffer.bind(),kt?((jt=Ft)||fe(kt)&&(!t(kt)||fe(kt.data))||(jt=Xe.oes_element_index_uint?5125:5123),st._initBuffer(it.buffer,kt,Tt,jt,3)):(Ne.bufferData(34963,At,Tt),it.buffer.dtype=jt||5121,it.buffer.usage=Tt,it.buffer.dimension=3,it.buffer.byteLength=At),jt=Ft,!Ft){switch(it.buffer.dtype){case 5121:case 5120:jt=5121;break;case 5123:case 5122:jt=5123;break;case 5125:case 5124:jt=5125}it.buffer.dtype=jt}it.type=jt,0>(kt=wt)&&(kt=it.buffer.byteLength,jt===5123?kt>>=1:jt===5125&&(kt>>=2)),it.vertCount=kt,kt=St,0>St&&(kt=4,(St=it.buffer.dimension)===1&&(kt=0),St===2&&(kt=1),St===3&&(kt=4)),it.primType=kt}function Ve(it){lt.elementsCount--,delete Be[it.id],it.buffer.destroy(),it.buffer=null}var Be={},at=0,ht={uint8:5121,uint16:5123};Xe.oes_element_index_uint&&(ht.uint32=5125),xt.prototype.bind=function(){this.buffer.bind()};var dt=[];return{create:function(it,kt){function Tt(At){if(At)if(typeof At=="number")St(At),wt.primType=4,wt.vertCount=0|At,wt.type=5121;else{var Ft=null,jt=35044,rn=-1,nn=-1,on=0,Ht=0;Array.isArray(At)||fe(At)||t(At)?Ft=At:("data"in At&&(Ft=At.data),"usage"in At&&(jt=de[At.usage]),"primitive"in At&&(rn=Se[At.primitive]),"count"in At&&(nn=0|At.count),"type"in At&&(Ht=ht[At.type]),"length"in At?on=0|At.length:(on=nn,Ht===5123||Ht===5122?on*=2:Ht!==5125&&Ht!==5124||(on*=4))),bt(wt,Ft,jt,rn,nn,on,Ht)}else St(),wt.primType=4,wt.vertCount=0,wt.type=5121;return Tt}var St=st.create(null,34963,!0),wt=new xt(St._buffer);return lt.elementsCount++,Tt(it),Tt._reglType="elements",Tt._elements=wt,Tt.subdata=function(At,Ft){return St.subdata(At,Ft),Tt},Tt.destroy=function(){Ve(wt)},Tt},createStream:function(it){var kt=dt.pop();return kt||(kt=new xt(st.create(null,34963,!0,!1)._buffer)),bt(kt,it,35040,-1,-1,0,0),kt},destroyStream:function(it){dt.push(it)},getElements:function(it){return typeof it=="function"&&it._elements instanceof xt?it._elements:null},clear:function(){pe(Be).forEach(Ve)}}}function f(Ne){for(var Xe=ye.allocType(5123,Ne.length),st=0;st<Ne.length;++st)if(isNaN(Ne[st]))Xe[st]=65535;else if(Ne[st]===1/0)Xe[st]=31744;else if(Ne[st]===-1/0)Xe[st]=64512;else{xe[0]=Ne[st];var lt=(bt=Te[0])>>>31<<15,xt=(bt<<1>>>24)-127,bt=bt>>13&1023;Xe[st]=-24>xt?lt:-14>xt?lt+(bt+1024>>-14-xt):15<xt?lt+31744:lt+(xt+15<<10)+bt}return Xe}function m(Ne){return Array.isArray(Ne)||fe(Ne)}function h(Ne){return"[object "+Ne+"]"}function g(Ne){return Array.isArray(Ne)&&(Ne.length===0||typeof Ne[0]=="number")}function v(Ne){return!(!Array.isArray(Ne)||Ne.length===0||!m(Ne[0]))}function x(Ne){return Object.prototype.toString.call(Ne)}function y(Ne){if(!Ne)return!1;var Xe=x(Ne);return 0<=Ge.indexOf(Xe)||g(Ne)||v(Ne)||t(Ne)}function A(Ne,Xe){Ne.type===36193?(Ne.data=f(Xe),ye.freeType(Xe)):Ne.data=Xe}function d(Ne,Xe,st,lt,xt,bt){if(Ne=rt[Ne]!==void 0?rt[Ne]:De[Ne]*Je[Xe],bt&&(Ne*=6),xt){for(lt=0;1<=st;)lt+=Ne*st*st,st/=2;return lt}return Ne*st*lt}function S(Ne,Xe,st,lt,xt,bt,Ve){function Be(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function at(Xt,mn){Xt.internalformat=mn.internalformat,Xt.format=mn.format,Xt.type=mn.type,Xt.compressed=mn.compressed,Xt.premultiplyAlpha=mn.premultiplyAlpha,Xt.flipY=mn.flipY,Xt.unpackAlignment=mn.unpackAlignment,Xt.colorSpace=mn.colorSpace,Xt.width=mn.width,Xt.height=mn.height,Xt.channels=mn.channels}function ht(Xt,mn){if(typeof mn=="object"&&mn){"premultiplyAlpha"in mn&&(Xt.premultiplyAlpha=mn.premultiplyAlpha),"flipY"in mn&&(Xt.flipY=mn.flipY),"alignment"in mn&&(Xt.unpackAlignment=mn.alignment),"colorSpace"in mn&&(Xt.colorSpace=Tn[mn.colorSpace]),"type"in mn&&(Xt.type=Cn[mn.type]);var Pt=Xt.width,Zt=Xt.height,Wt=Xt.channels,gn=!1;"shape"in mn?(Pt=mn.shape[0],Zt=mn.shape[1],mn.shape.length===3&&(Wt=mn.shape[2],gn=!0)):("radius"in mn&&(Pt=Zt=mn.radius),"width"in mn&&(Pt=mn.width),"height"in mn&&(Zt=mn.height),"channels"in mn&&(Wt=mn.channels,gn=!0)),Xt.width=0|Pt,Xt.height=0|Zt,Xt.channels=0|Wt,Pt=!1,"format"in mn&&(Pt=mn.format,Zt=Xt.internalformat=Bn[Pt],Xt.format=Dn[Zt],Pt in Cn&&!("type"in mn)&&(Xt.type=Cn[Pt]),Pt in Xn&&(Xt.compressed=!0),Pt=!0),!gn&&Pt?Xt.channels=De[Xt.format]:gn&&!Pt&&Xt.channels!==Pe[Xt.format]&&(Xt.format=Xt.internalformat=Pe[Xt.channels])}}function dt(Xt){Ne.pixelStorei(37440,Xt.flipY),Ne.pixelStorei(37441,Xt.premultiplyAlpha),Ne.pixelStorei(37443,Xt.colorSpace),Ne.pixelStorei(3317,Xt.unpackAlignment)}function it(){Be.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(Xt,mn){var Pt=null;if(y(mn)?Pt=mn:mn&&(ht(Xt,mn),"x"in mn&&(Xt.xOffset=0|mn.x),"y"in mn&&(Xt.yOffset=0|mn.y),y(mn.data)&&(Pt=mn.data)),mn.copy){var Zt=xt.viewportWidth,Wt=xt.viewportHeight;Xt.width=Xt.width||Zt-Xt.xOffset,Xt.height=Xt.height||Wt-Xt.yOffset,Xt.needsCopy=!0}else if(Pt){if(fe(Pt))Xt.channels=Xt.channels||4,Xt.data=Pt,"type"in mn||Xt.type!==5121||(Xt.type=0|ke[Object.prototype.toString.call(Pt)]);else if(g(Pt)){switch(Xt.channels=Xt.channels||4,Wt=(Zt=Pt).length,Xt.type){case 5121:case 5123:case 5125:case 5126:(Wt=ye.allocType(Xt.type,Wt)).set(Zt),Xt.data=Wt;break;case 36193:Xt.data=f(Zt)}Xt.alignment=1,Xt.needsFree=!0}else if(t(Pt)){Zt=Pt.data,Array.isArray(Zt)||Xt.type!==5121||(Xt.type=0|ke[Object.prototype.toString.call(Zt)]),Wt=Pt.shape;var gn,pn,kn,vn,cn=Pt.stride;Wt.length===3?(kn=Wt[2],vn=cn[2]):vn=kn=1,gn=Wt[0],pn=Wt[1],Wt=cn[0],cn=cn[1],Xt.alignment=1,Xt.width=gn,Xt.height=pn,Xt.channels=kn,Xt.format=Xt.internalformat=Pe[kn],Xt.needsFree=!0,gn=vn,Pt=Pt.offset,kn=Xt.width,vn=Xt.height,pn=Xt.channels;for(var qt=ye.allocType(Xt.type===36193?5126:Xt.type,kn*vn*pn),Nt=0,tn=0;tn<vn;++tn)for(var _n=0;_n<kn;++_n)for(var Fn=0;Fn<pn;++Fn)qt[Nt++]=Zt[Wt*_n+cn*tn+gn*Fn+Pt];A(Xt,qt)}else if(x(Pt)===ve||x(Pt)===we||x(Pt)===Ee)x(Pt)===ve||x(Pt)===we?Xt.element=Pt:Xt.element=Pt.canvas,Xt.width=Xt.element.width,Xt.height=Xt.element.height,Xt.channels=4;else if(x(Pt)===Fe)Xt.element=Pt,Xt.width=Pt.width,Xt.height=Pt.height,Xt.channels=4;else if(x(Pt)===Le)Xt.element=Pt,Xt.width=Pt.naturalWidth,Xt.height=Pt.naturalHeight,Xt.channels=4;else if(x(Pt)===je)Xt.element=Pt,Xt.width=Pt.videoWidth,Xt.height=Pt.videoHeight,Xt.channels=4;else if(v(Pt)){for(Zt=Xt.width||Pt[0].length,Wt=Xt.height||Pt.length,cn=Xt.channels,cn=m(Pt[0][0])?cn||Pt[0][0].length:cn||1,gn=ge.shape(Pt),kn=1,vn=0;vn<gn.length;++vn)kn*=gn[vn];kn=ye.allocType(Xt.type===36193?5126:Xt.type,kn),ge.flatten(Pt,gn,"",kn),A(Xt,kn),Xt.alignment=1,Xt.width=Zt,Xt.height=Wt,Xt.channels=cn,Xt.format=Xt.internalformat=Pe[cn],Xt.needsFree=!0}}else Xt.width=Xt.width||1,Xt.height=Xt.height||1,Xt.channels=Xt.channels||4}function Tt(Xt,mn,Pt,Zt,Wt){var gn=Xt.element,pn=Xt.data,kn=Xt.internalformat,vn=Xt.format,cn=Xt.type,qt=Xt.width,Nt=Xt.height;dt(Xt),gn?Ne.texSubImage2D(mn,Wt,Pt,Zt,vn,cn,gn):Xt.compressed?Ne.compressedTexSubImage2D(mn,Wt,Pt,Zt,kn,qt,Nt,pn):Xt.needsCopy?(lt(),Ne.copyTexSubImage2D(mn,Wt,Pt,Zt,Xt.xOffset,Xt.yOffset,qt,Nt)):Ne.texSubImage2D(mn,Wt,Pt,Zt,qt,Nt,vn,cn,pn)}function St(){return yn.pop()||new it}function wt(Xt){Xt.needsFree&&ye.freeType(Xt.data),it.call(Xt),yn.push(Xt)}function At(){Be.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Ft(Xt,mn,Pt){var Zt=Xt.images[0]=St();Xt.mipmask=1,Zt.width=Xt.width=mn,Zt.height=Xt.height=Pt,Zt.channels=Xt.channels=4}function jt(Xt,mn){var Pt=null;if(y(mn))at(Pt=Xt.images[0]=St(),Xt),kt(Pt,mn),Xt.mipmask=1;else if(ht(Xt,mn),Array.isArray(mn.mipmap))for(var Zt=mn.mipmap,Wt=0;Wt<Zt.length;++Wt)at(Pt=Xt.images[Wt]=St(),Xt),Pt.width>>=Wt,Pt.height>>=Wt,kt(Pt,Zt[Wt]),Xt.mipmask|=1<<Wt;else at(Pt=Xt.images[0]=St(),Xt),kt(Pt,mn),Xt.mipmask=1;at(Xt,Xt.images[0])}function rn(Xt,mn){for(var Pt=Xt.images,Zt=0;Zt<Pt.length&&Pt[Zt];++Zt){var Wt=Pt[Zt],gn=mn,pn=Zt,kn=Wt.element,vn=Wt.data,cn=Wt.internalformat,qt=Wt.format,Nt=Wt.type,tn=Wt.width,_n=Wt.height;dt(Wt),kn?Ne.texImage2D(gn,pn,qt,qt,Nt,kn):Wt.compressed?Ne.compressedTexImage2D(gn,pn,cn,tn,_n,0,vn):Wt.needsCopy?(lt(),Ne.copyTexImage2D(gn,pn,qt,Wt.xOffset,Wt.yOffset,tn,_n,0)):Ne.texImage2D(gn,pn,qt,tn,_n,0,qt,Nt,vn||null)}}function nn(){var Xt=Ln.pop()||new At;Be.call(Xt);for(var mn=Xt.mipmask=0;16>mn;++mn)Xt.images[mn]=null;return Xt}function on(Xt){for(var mn=Xt.images,Pt=0;Pt<mn.length;++Pt)mn[Pt]&&wt(mn[Pt]),mn[Pt]=null;Ln.push(Xt)}function Ht(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function $t(Xt,mn){"min"in mn&&(Xt.minFilter=On[mn.min],0<=Ae.indexOf(Xt.minFilter)&&!("faces"in mn)&&(Xt.genMipmaps=!0)),"mag"in mn&&(Xt.magFilter=wn[mn.mag]);var Pt=Xt.wrapS,Zt=Xt.wrapT;if("wrap"in mn){var Wt=mn.wrap;typeof Wt=="string"?Pt=Zt=An[Wt]:Array.isArray(Wt)&&(Pt=An[Wt[0]],Zt=An[Wt[1]])}else"wrapS"in mn&&(Pt=An[mn.wrapS]),"wrapT"in mn&&(Zt=An[mn.wrapT]);if(Xt.wrapS=Pt,Xt.wrapT=Zt,"anisotropic"in mn&&(Xt.anisotropic=mn.anisotropic),"mipmap"in mn){switch(Pt=!1,typeof mn.mipmap){case"string":Xt.mipmapHint=un[mn.mipmap],Pt=Xt.genMipmaps=!0;break;case"boolean":Pt=Xt.genMipmaps=mn.mipmap;break;case"object":Xt.genMipmaps=!1,Pt=!0}!Pt||"min"in mn||(Xt.minFilter=9984)}}function bn(Xt,mn){Ne.texParameteri(mn,10241,Xt.minFilter),Ne.texParameteri(mn,10240,Xt.magFilter),Ne.texParameteri(mn,10242,Xt.wrapS),Ne.texParameteri(mn,10243,Xt.wrapT),Xe.ext_texture_filter_anisotropic&&Ne.texParameteri(mn,34046,Xt.anisotropic),Xt.genMipmaps&&(Ne.hint(33170,Xt.mipmapHint),Ne.generateMipmap(mn))}function ln(Xt){Be.call(this),this.mipmask=0,this.internalformat=6408,this.id=Vn++,this.refCount=1,this.target=Xt,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ht,Ve.profile&&(this.stats={size:0})}function Kt(Xt){Ne.activeTexture(33984),Ne.bindTexture(Xt.target,Xt.texture)}function fn(){var Xt=fr[0];Xt?Ne.bindTexture(Xt.target,Xt.texture):Ne.bindTexture(3553,null)}function en(Xt){var mn=Xt.texture,Pt=Xt.unit,Zt=Xt.target;0<=Pt&&(Ne.activeTexture(33984+Pt),Ne.bindTexture(Zt,null),fr[Pt]=null),Ne.deleteTexture(mn),Xt.texture=null,Xt.params=null,Xt.pixels=null,Xt.refCount=0,delete Un[Xt.id],bt.textureCount--}var un={"don't care":4352,"dont care":4352,nice:4354,fast:4353},An={repeat:10497,clamp:33071,mirror:33648},wn={nearest:9728,linear:9729},On=Z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wn),Tn={none:0,browser:37444},Cn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Bn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Xn={};Xe.ext_srgb&&(Bn.srgb=35904,Bn.srgba=35906),Xe.oes_texture_float&&(Cn.float32=Cn.float=5126),Xe.oes_texture_half_float&&(Cn.float16=Cn["half float"]=36193),Xe.webgl_depth_texture&&(Z(Bn,{depth:6402,"depth stencil":34041}),Z(Cn,{uint16:5123,uint32:5125,"depth stencil":34042})),Xe.webgl_compressed_texture_s3tc&&Z(Xn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Xe.webgl_compressed_texture_atc&&Z(Xn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Xe.webgl_compressed_texture_pvrtc&&Z(Xn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Xe.webgl_compressed_texture_etc1&&(Xn["rgb etc1"]=36196);var cr=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(Xn).forEach(function(Xt){var mn=Xn[Xt];0<=cr.indexOf(mn)&&(Bn[Xt]=mn)});var Yn=Object.keys(Bn);st.textureFormats=Yn;var jn=[];Object.keys(Bn).forEach(function(Xt){jn[Bn[Xt]]=Xt});var Kn=[];Object.keys(Cn).forEach(function(Xt){Kn[Cn[Xt]]=Xt});var or=[];Object.keys(wn).forEach(function(Xt){or[wn[Xt]]=Xt});var Qt=[];Object.keys(On).forEach(function(Xt){Qt[On[Xt]]=Xt});var an=[];Object.keys(An).forEach(function(Xt){an[An[Xt]]=Xt});var Dn=Yn.reduce(function(Xt,mn){var Pt=Bn[mn];return Pt===6409||Pt===6406||Pt===6409||Pt===6410||Pt===6402||Pt===34041||Xe.ext_srgb&&(Pt===35904||Pt===35906)?Xt[Pt]=Pt:Pt===32855||0<=mn.indexOf("rgba")?Xt[Pt]=6408:Xt[Pt]=6407,Xt},{}),yn=[],Ln=[],Vn=0,Un={},er=st.maxTextureUnits,fr=Array(er).map(function(){return null});return Z(ln.prototype,{bind:function(){this.bindCount+=1;var Xt=this.unit;if(0>Xt){for(var mn=0;mn<er;++mn){var Pt=fr[mn];if(Pt){if(0<Pt.bindCount)continue;Pt.unit=-1}fr[mn]=this,Xt=mn;break}Ve.profile&&bt.maxTextureUnits<Xt+1&&(bt.maxTextureUnits=Xt+1),this.unit=Xt,Ne.activeTexture(33984+Xt),Ne.bindTexture(this.target,this.texture)}return Xt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&en(this)}}),Ve.profile&&(bt.getTotalTextureSize=function(){var Xt=0;return Object.keys(Un).forEach(function(mn){Xt+=Un[mn].stats.size}),Xt}),{create2D:function(Xt,mn){function Pt(Wt,gn){var pn=Zt.texInfo;Ht.call(pn);var kn=nn();return typeof Wt=="number"?Ft(kn,0|Wt,typeof gn=="number"?0|gn:0|Wt):Wt?($t(pn,Wt),jt(kn,Wt)):Ft(kn,1,1),pn.genMipmaps&&(kn.mipmask=(kn.width<<1)-1),Zt.mipmask=kn.mipmask,at(Zt,kn),Zt.internalformat=kn.internalformat,Pt.width=kn.width,Pt.height=kn.height,Kt(Zt),rn(kn,3553),bn(pn,3553),fn(),on(kn),Ve.profile&&(Zt.stats.size=d(Zt.internalformat,Zt.type,kn.width,kn.height,pn.genMipmaps,!1)),Pt.format=jn[Zt.internalformat],Pt.type=Kn[Zt.type],Pt.mag=or[pn.magFilter],Pt.min=Qt[pn.minFilter],Pt.wrapS=an[pn.wrapS],Pt.wrapT=an[pn.wrapT],Pt}var Zt=new ln(3553);return Un[Zt.id]=Zt,bt.textureCount++,Pt(Xt,mn),Pt.subimage=function(Wt,gn,pn,kn){gn|=0,pn|=0,kn|=0;var vn=St();return at(vn,Zt),vn.width=0,vn.height=0,kt(vn,Wt),vn.width=vn.width||(Zt.width>>kn)-gn,vn.height=vn.height||(Zt.height>>kn)-pn,Kt(Zt),Tt(vn,3553,gn,pn,kn),fn(),wt(vn),Pt},Pt.resize=function(Wt,gn){var pn=0|Wt,kn=0|gn||pn;if(pn===Zt.width&&kn===Zt.height)return Pt;Pt.width=Zt.width=pn,Pt.height=Zt.height=kn,Kt(Zt);for(var vn=0;Zt.mipmask>>vn;++vn){var cn=pn>>vn,qt=kn>>vn;if(!cn||!qt)break;Ne.texImage2D(3553,vn,Zt.format,cn,qt,0,Zt.format,Zt.type,null)}return fn(),Ve.profile&&(Zt.stats.size=d(Zt.internalformat,Zt.type,pn,kn,!1,!1)),Pt},Pt._reglType="texture2d",Pt._texture=Zt,Ve.profile&&(Pt.stats=Zt.stats),Pt.destroy=function(){Zt.decRef()},Pt},createCube:function(Xt,mn,Pt,Zt,Wt,gn){function pn(cn,qt,Nt,tn,_n,Fn){var zn,Pn=kn.texInfo;for(Ht.call(Pn),zn=0;6>zn;++zn)vn[zn]=nn();if(typeof cn!="number"&&cn){if(typeof cn=="object")if(qt)jt(vn[0],cn),jt(vn[1],qt),jt(vn[2],Nt),jt(vn[3],tn),jt(vn[4],_n),jt(vn[5],Fn);else if($t(Pn,cn),ht(kn,cn),"faces"in cn)for(cn=cn.faces,zn=0;6>zn;++zn)at(vn[zn],kn),jt(vn[zn],cn[zn]);else for(zn=0;6>zn;++zn)jt(vn[zn],cn)}else for(cn=0|cn||1,zn=0;6>zn;++zn)Ft(vn[zn],cn,cn);for(at(kn,vn[0]),kn.mipmask=Pn.genMipmaps?(vn[0].width<<1)-1:vn[0].mipmask,kn.internalformat=vn[0].internalformat,pn.width=vn[0].width,pn.height=vn[0].height,Kt(kn),zn=0;6>zn;++zn)rn(vn[zn],34069+zn);for(bn(Pn,34067),fn(),Ve.profile&&(kn.stats.size=d(kn.internalformat,kn.type,pn.width,pn.height,Pn.genMipmaps,!0)),pn.format=jn[kn.internalformat],pn.type=Kn[kn.type],pn.mag=or[Pn.magFilter],pn.min=Qt[Pn.minFilter],pn.wrapS=an[Pn.wrapS],pn.wrapT=an[Pn.wrapT],zn=0;6>zn;++zn)on(vn[zn]);return pn}var kn=new ln(34067);Un[kn.id]=kn,bt.cubeCount++;var vn=Array(6);return pn(Xt,mn,Pt,Zt,Wt,gn),pn.subimage=function(cn,qt,Nt,tn,_n){Nt|=0,tn|=0,_n|=0;var Fn=St();return at(Fn,kn),Fn.width=0,Fn.height=0,kt(Fn,qt),Fn.width=Fn.width||(kn.width>>_n)-Nt,Fn.height=Fn.height||(kn.height>>_n)-tn,Kt(kn),Tt(Fn,34069+cn,Nt,tn,_n),fn(),wt(Fn),pn},pn.resize=function(cn){if((cn|=0)!==kn.width){pn.width=kn.width=cn,pn.height=kn.height=cn,Kt(kn);for(var qt=0;6>qt;++qt)for(var Nt=0;kn.mipmask>>Nt;++Nt)Ne.texImage2D(34069+qt,Nt,kn.format,cn>>Nt,cn>>Nt,0,kn.format,kn.type,null);return fn(),Ve.profile&&(kn.stats.size=d(kn.internalformat,kn.type,pn.width,pn.height,!1,!0)),pn}},pn._reglType="textureCube",pn._texture=kn,Ve.profile&&(pn.stats=kn.stats),pn.destroy=function(){kn.decRef()},pn},clear:function(){for(var Xt=0;Xt<er;++Xt)Ne.activeTexture(33984+Xt),Ne.bindTexture(3553,null),fr[Xt]=null;pe(Un).forEach(en),bt.cubeCount=0,bt.textureCount=0},getTexture:function(Xt){return null},restore:function(){for(var Xt=0;Xt<er;++Xt){var mn=fr[Xt];mn&&(mn.bindCount=0,mn.unit=-1,fr[Xt]=null)}pe(Un).forEach(function(Pt){Pt.texture=Ne.createTexture(),Ne.bindTexture(Pt.target,Pt.texture);for(var Zt=0;32>Zt;++Zt)if(Pt.mipmask&1<<Zt)if(Pt.target===3553)Ne.texImage2D(3553,Zt,Pt.internalformat,Pt.width>>Zt,Pt.height>>Zt,0,Pt.internalformat,Pt.type,null);else for(var Wt=0;6>Wt;++Wt)Ne.texImage2D(34069+Wt,Zt,Pt.internalformat,Pt.width>>Zt,Pt.height>>Zt,0,Pt.internalformat,Pt.type,null);bn(Pt.texInfo,Pt.target)})},refresh:function(){for(var Xt=0;Xt<er;++Xt){var mn=fr[Xt];mn&&(mn.bindCount=0,mn.unit=-1,fr[Xt]=null),Ne.activeTexture(33984+Xt),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}function k(Ne,Xe,st,lt,xt,bt){function Ve(ln,Kt,fn){this.target=ln,this.texture=Kt,this.renderbuffer=fn;var en=ln=0;Kt?(ln=Kt.width,en=Kt.height):fn&&(ln=fn.width,en=fn.height),this.width=ln,this.height=en}function Be(ln){ln&&(ln.texture&&ln.texture._texture.decRef(),ln.renderbuffer&&ln.renderbuffer._renderbuffer.decRef())}function at(ln,Kt,fn){ln&&(ln.texture?ln.texture._texture.refCount+=1:ln.renderbuffer._renderbuffer.refCount+=1)}function ht(ln,Kt){Kt&&(Kt.texture?Ne.framebufferTexture2D(36160,ln,Kt.target,Kt.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,ln,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function dt(ln){var Kt=3553,fn=null,en=null,un=ln;return typeof ln=="object"&&(un=ln.data,"target"in ln&&(Kt=0|ln.target)),(ln=un._reglType)==="texture2d"||ln==="textureCube"?fn=un:ln==="renderbuffer"&&(en=un,Kt=36161),new Ve(Kt,fn,en)}function it(ln,Kt,fn,en,un){return fn?((ln=lt.create2D({width:ln,height:Kt,format:en,type:un}))._texture.refCount=0,new Ve(3553,ln,null)):((ln=xt.create({width:ln,height:Kt,format:en}))._renderbuffer.refCount=0,new Ve(36161,null,ln))}function kt(ln){return ln&&(ln.texture||ln.renderbuffer)}function Tt(ln,Kt,fn){ln&&(ln.texture?ln.texture.resize(Kt,fn):ln.renderbuffer&&ln.renderbuffer.resize(Kt,fn),ln.width=Kt,ln.height=fn)}function St(){this.id=$t++,bn[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function wt(ln){ln.colorAttachments.forEach(Be),Be(ln.depthAttachment),Be(ln.stencilAttachment),Be(ln.depthStencilAttachment)}function At(ln){Ne.deleteFramebuffer(ln.framebuffer),ln.framebuffer=null,bt.framebufferCount--,delete bn[ln.id]}function Ft(ln){var Kt;Ne.bindFramebuffer(36160,ln.framebuffer);var fn=ln.colorAttachments;for(Kt=0;Kt<fn.length;++Kt)ht(36064+Kt,fn[Kt]);for(Kt=fn.length;Kt<st.maxColorAttachments;++Kt)Ne.framebufferTexture2D(36160,36064+Kt,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),ht(36096,ln.depthAttachment),ht(36128,ln.stencilAttachment),ht(33306,ln.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,rn.next?rn.next.framebuffer:null),rn.cur=rn.next,Ne.getError()}function jt(ln,Kt){function fn(un,An){var wn,On=0,Tn=0,Cn=!0,Bn=!0;wn=null;var Xn=!0,cr="rgba",Yn="uint8",jn=1,Kn=null,or=null,Qt=null,an=!1;typeof un=="number"?(On=0|un,Tn=0|An||On):un?("shape"in un?(On=(Tn=un.shape)[0],Tn=Tn[1]):("radius"in un&&(On=Tn=un.radius),"width"in un&&(On=un.width),"height"in un&&(Tn=un.height)),("color"in un||"colors"in un)&&(wn=un.color||un.colors,Array.isArray(wn)),wn||("colorCount"in un&&(jn=0|un.colorCount),"colorTexture"in un&&(Xn=!!un.colorTexture,cr="rgba4"),"colorType"in un&&(Yn=un.colorType,!Xn)&&(Yn==="half float"||Yn==="float16"?cr="rgba16f":Yn!=="float"&&Yn!=="float32"||(cr="rgba32f")),"colorFormat"in un&&(cr=un.colorFormat,0<=nn.indexOf(cr)?Xn=!0:0<=on.indexOf(cr)&&(Xn=!1))),("depthTexture"in un||"depthStencilTexture"in un)&&(an=!(!un.depthTexture&&!un.depthStencilTexture)),"depth"in un&&(typeof un.depth=="boolean"?Cn=un.depth:(Kn=un.depth,Bn=!1)),"stencil"in un&&(typeof un.stencil=="boolean"?Bn=un.stencil:(or=un.stencil,Cn=!1)),"depthStencil"in un&&(typeof un.depthStencil=="boolean"?Cn=Bn=un.depthStencil:(Qt=un.depthStencil,Bn=Cn=!1))):On=Tn=1;var Dn=null,yn=null,Ln=null,Vn=null;if(Array.isArray(wn))Dn=wn.map(dt);else if(wn)Dn=[dt(wn)];else for(Dn=Array(jn),wn=0;wn<jn;++wn)Dn[wn]=it(On,Tn,Xn,cr,Yn);for(On=On||Dn[0].width,Tn=Tn||Dn[0].height,Kn?yn=dt(Kn):Cn&&!Bn&&(yn=it(On,Tn,an,"depth","uint32")),or?Ln=dt(or):Bn&&!Cn&&(Ln=it(On,Tn,!1,"stencil","uint8")),Qt?Vn=dt(Qt):!Kn&&!or&&Bn&&Cn&&(Vn=it(On,Tn,an,"depth stencil","depth stencil")),Cn=null,wn=0;wn<Dn.length;++wn)at(Dn[wn]),Dn[wn]&&Dn[wn].texture&&(Bn=_t[Dn[wn].texture._texture.format]*mt[Dn[wn].texture._texture.type],Cn===null&&(Cn=Bn));return at(yn),at(Ln),at(Vn),wt(en),en.width=On,en.height=Tn,en.colorAttachments=Dn,en.depthAttachment=yn,en.stencilAttachment=Ln,en.depthStencilAttachment=Vn,fn.color=Dn.map(kt),fn.depth=kt(yn),fn.stencil=kt(Ln),fn.depthStencil=kt(Vn),fn.width=en.width,fn.height=en.height,Ft(en),fn}var en=new St;return bt.framebufferCount++,fn(ln,Kt),Z(fn,{resize:function(un,An){var wn=Math.max(0|un,1),On=Math.max(0|An||wn,1);if(wn===en.width&&On===en.height)return fn;for(var Tn=en.colorAttachments,Cn=0;Cn<Tn.length;++Cn)Tt(Tn[Cn],wn,On);return Tt(en.depthAttachment,wn,On),Tt(en.stencilAttachment,wn,On),Tt(en.depthStencilAttachment,wn,On),en.width=fn.width=wn,en.height=fn.height=On,Ft(en),fn},_reglType:"framebuffer",_framebuffer:en,destroy:function(){At(en),wt(en)},use:function(un){rn.setFBO({framebuffer:fn},un)}})}var rn={cur:null,next:null,dirty:!1,setFBO:null},nn=["rgba"],on=["rgba4","rgb565","rgb5 a1"];Xe.ext_srgb&&on.push("srgba"),Xe.ext_color_buffer_half_float&&on.push("rgba16f","rgb16f"),Xe.webgl_color_buffer_float&&on.push("rgba32f");var Ht=["uint8"];Xe.oes_texture_half_float&&Ht.push("half float","float16"),Xe.oes_texture_float&&Ht.push("float","float32");var $t=0,bn={};return Z(rn,{getFramebuffer:function(ln){return typeof ln=="function"&&ln._reglType==="framebuffer"&&(ln=ln._framebuffer)instanceof St?ln:null},create:jt,createCube:function(ln){function Kt(en){var un,An={color:null},wn=0,On=null;un="rgba";var Tn="uint8",Cn=1;if(typeof en=="number"?wn=0|en:en?("shape"in en?wn=en.shape[0]:("radius"in en&&(wn=0|en.radius),"width"in en?wn=0|en.width:"height"in en&&(wn=0|en.height)),("color"in en||"colors"in en)&&(On=en.color||en.colors,Array.isArray(On)),On||("colorCount"in en&&(Cn=0|en.colorCount),"colorType"in en&&(Tn=en.colorType),"colorFormat"in en&&(un=en.colorFormat)),"depth"in en&&(An.depth=en.depth),"stencil"in en&&(An.stencil=en.stencil),"depthStencil"in en&&(An.depthStencil=en.depthStencil)):wn=1,On)if(Array.isArray(On))for(en=[],un=0;un<On.length;++un)en[un]=On[un];else en=[On];else for(en=Array(Cn),On={radius:wn,format:un,type:Tn},un=0;un<Cn;++un)en[un]=lt.createCube(On);for(An.color=Array(en.length),un=0;un<en.length;++un)Cn=en[un],wn=wn||Cn.width,An.color[un]={target:34069,data:en[un]};for(un=0;6>un;++un){for(Cn=0;Cn<en.length;++Cn)An.color[Cn].target=34069+un;0<un&&(An.depth=fn[0].depth,An.stencil=fn[0].stencil,An.depthStencil=fn[0].depthStencil),fn[un]?fn[un](An):fn[un]=jt(An)}return Z(Kt,{width:wn,height:wn,color:en})}var fn=Array(6);return Kt(ln),Z(Kt,{faces:fn,resize:function(en){var un=0|en;if(un===Kt.width)return Kt;var An=Kt.color;for(en=0;en<An.length;++en)An[en].resize(un);for(en=0;6>en;++en)fn[en].resize(un);return Kt.width=Kt.height=un,Kt},_reglType:"framebufferCube",destroy:function(){fn.forEach(function(en){en.destroy()})}})},clear:function(){pe(bn).forEach(At)},restore:function(){rn.cur=null,rn.next=null,rn.dirty=!0,pe(bn).forEach(function(ln){ln.framebuffer=Ne.createFramebuffer(),Ft(ln)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function L(Ne,Xe,st,lt,xt,bt,Ve){function Be(){this.id=++dt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Tt=Xe.oes_vertex_array_object;this.vao=Tt?Tt.createVertexArrayOES():null,it[this.id]=this,this.buffers=[]}var at=st.maxAttributes,ht=Array(at);for(st=0;st<at;++st)ht[st]=new E;var dt=0,it={},kt={Record:E,scope:{},state:ht,currentVAO:null,targetVAO:null,restore:Xe.oes_vertex_array_object?function(){Xe.oes_vertex_array_object&&pe(it).forEach(function(Tt){Tt.refresh()})}:function(){},createVAO:function(Tt){function St(At){var Ft;Array.isArray(At)?(Ft=At,wt.elements&&wt.ownsElements&&wt.elements.destroy(),wt.elements=null,wt.ownsElements=!1,wt.offset=0,wt.count=0,wt.instances=-1,wt.primitive=4):(At.elements?(Ft=At.elements,wt.ownsElements?(typeof Ft=="function"&&Ft._reglType==="elements"?wt.elements.destroy():wt.elements(Ft),wt.ownsElements=!1):bt.getElements(At.elements)?(wt.elements=At.elements,wt.ownsElements=!1):(wt.elements=bt.create(At.elements),wt.ownsElements=!0)):(wt.elements=null,wt.ownsElements=!1),Ft=At.attributes,wt.offset=0,wt.count=-1,wt.instances=-1,wt.primitive=4,wt.elements&&(wt.count=wt.elements._elements.vertCount,wt.primitive=wt.elements._elements.primType),"offset"in At&&(wt.offset=0|At.offset),"count"in At&&(wt.count=0|At.count),"instances"in At&&(wt.instances=0|At.instances),"primitive"in At&&(wt.primitive=Se[At.primitive])),At={};var jt=wt.attributes;jt.length=Ft.length;for(var rn=0;rn<Ft.length;++rn){var nn,on=Ft[rn],Ht=jt[rn]=new E,$t=on.data||on;Array.isArray($t)||fe($t)||t($t)?(wt.buffers[rn]&&(nn=wt.buffers[rn],fe($t)&&nn._buffer.byteLength>=$t.byteLength?nn.subdata($t):(nn.destroy(),wt.buffers[rn]=null)),wt.buffers[rn]||(nn=wt.buffers[rn]=xt.create(on,34962,!1,!0)),Ht.buffer=xt.getBuffer(nn),Ht.size=0|Ht.buffer.dimension,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1,At[rn]=1):xt.getBuffer(on)?(Ht.buffer=xt.getBuffer(on),Ht.size=0|Ht.buffer.dimension,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1):xt.getBuffer(on.buffer)?(Ht.buffer=xt.getBuffer(on.buffer),Ht.size=0|(+on.size||Ht.buffer.dimension),Ht.normalized=!!on.normalized||!1,Ht.type="type"in on?Ce[on.type]:Ht.buffer.dtype,Ht.offset=0|(on.offset||0),Ht.stride=0|(on.stride||0),Ht.divisor=0|(on.divisor||0),Ht.state=1):"x"in on&&(Ht.x=+on.x||0,Ht.y=+on.y||0,Ht.z=+on.z||0,Ht.w=+on.w||0,Ht.state=2)}for(nn=0;nn<wt.buffers.length;++nn)!At[nn]&&wt.buffers[nn]&&(wt.buffers[nn].destroy(),wt.buffers[nn]=null);return wt.refresh(),St}var wt=new Be;return lt.vaoCount+=1,St.destroy=function(){for(var At=0;At<wt.buffers.length;++At)wt.buffers[At]&&wt.buffers[At].destroy();wt.buffers.length=0,wt.ownsElements&&(wt.elements.destroy(),wt.elements=null,wt.ownsElements=!1),wt.destroy()},St._vao=wt,St._reglType="vao",St(Tt)},getVAO:function(Tt){return typeof Tt=="function"&&Tt._vao?Tt._vao:null},destroyBuffer:function(Tt){for(var St=0;St<ht.length;++St){var wt=ht[St];wt.buffer===Tt&&(Ne.disableVertexAttribArray(St),wt.buffer=null)}},setVAO:Xe.oes_vertex_array_object?function(Tt){if(Tt!==kt.currentVAO){var St=Xe.oes_vertex_array_object;Tt?St.bindVertexArrayOES(Tt.vao):St.bindVertexArrayOES(null),kt.currentVAO=Tt}}:function(Tt){if(Tt!==kt.currentVAO){if(Tt)Tt.bindAttrs();else{for(var St=Xe.angle_instanced_arrays,wt=0;wt<ht.length;++wt){var At=ht[wt];At.buffer?(Ne.enableVertexAttribArray(wt),At.buffer.bind(),Ne.vertexAttribPointer(wt,At.size,At.type,At.normalized,At.stride,At.offfset),St&&At.divisor&&St.vertexAttribDivisorANGLE(wt,At.divisor)):(Ne.disableVertexAttribArray(wt),Ne.vertexAttrib4f(wt,At.x,At.y,At.z,At.w))}Ve.elements?Ne.bindBuffer(34963,Ve.elements.buffer.buffer):Ne.bindBuffer(34963,null)}kt.currentVAO=Tt}},clear:Xe.oes_vertex_array_object?function(){pe(it).forEach(function(Tt){Tt.destroy()})}:function(){}};return Be.prototype.bindAttrs=function(){for(var Tt=Xe.angle_instanced_arrays,St=this.attributes,wt=0;wt<St.length;++wt){var At=St[wt];At.buffer?(Ne.enableVertexAttribArray(wt),Ne.bindBuffer(34962,At.buffer.buffer),Ne.vertexAttribPointer(wt,At.size,At.type,At.normalized,At.stride,At.offset),Tt&&At.divisor&&Tt.vertexAttribDivisorANGLE(wt,At.divisor)):(Ne.disableVertexAttribArray(wt),Ne.vertexAttrib4f(wt,At.x,At.y,At.z,At.w))}for(Tt=St.length;Tt<at;++Tt)Ne.disableVertexAttribArray(Tt);(Tt=bt.getElements(this.elements))?Ne.bindBuffer(34963,Tt.buffer.buffer):Ne.bindBuffer(34963,null)},Be.prototype.refresh=function(){var Tt=Xe.oes_vertex_array_object;Tt&&(Tt.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,Tt.bindVertexArrayOES(null))},Be.prototype.destroy=function(){if(this.vao){var Tt=Xe.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,Tt.bindVertexArrayOES(null)),Tt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),it[this.id]&&(delete it[this.id],--lt.vaoCount)},kt}function O(Ne,Xe,st,lt){function xt(St,wt,At,Ft){this.name=St,this.id=wt,this.location=At,this.info=Ft}function bt(St,wt){for(var At=0;At<St.length;++At)if(St[At].id===wt.id)return void(St[At].location=wt.location);St.push(wt)}function Ve(St,wt,At){if(!(jt=(At=St===35632?ht:dt)[wt])){var Ft=Xe.str(wt),jt=Ne.createShader(St);Ne.shaderSource(jt,Ft),Ne.compileShader(jt),At[wt]=jt}return jt}function Be(St,wt){this.id=Tt++,this.fragId=St,this.vertId=wt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,lt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function at(St,wt,At){var Ft;Ft=Ve(35632,St.fragId);var jt=Ve(35633,St.vertId);if(wt=St.program=Ne.createProgram(),Ne.attachShader(wt,Ft),Ne.attachShader(wt,jt),At)for(Ft=0;Ft<At.length;++Ft)jt=At[Ft],Ne.bindAttribLocation(wt,jt[0],jt[1]);Ne.linkProgram(wt),jt=Ne.getProgramParameter(wt,35718),lt.profile&&(St.stats.uniformsCount=jt);var rn=St.uniforms;for(Ft=0;Ft<jt;++Ft)if(At=Ne.getActiveUniform(wt,Ft))if(1<At.size)for(var nn=0;nn<At.size;++nn){var on=At.name.replace("[0]","["+nn+"]");bt(rn,new xt(on,Xe.id(on),Ne.getUniformLocation(wt,on),At))}else bt(rn,new xt(At.name,Xe.id(At.name),Ne.getUniformLocation(wt,At.name),At));for(jt=Ne.getProgramParameter(wt,35721),lt.profile&&(St.stats.attributesCount=jt),St=St.attributes,Ft=0;Ft<jt;++Ft)(At=Ne.getActiveAttrib(wt,Ft))&&bt(St,new xt(At.name,Xe.id(At.name),Ne.getAttribLocation(wt,At.name),At))}var ht={},dt={},it={},kt=[],Tt=0;return lt.profile&&(st.getMaxUniformsCount=function(){var St=0;return kt.forEach(function(wt){wt.stats.uniformsCount>St&&(St=wt.stats.uniformsCount)}),St},st.getMaxAttributesCount=function(){var St=0;return kt.forEach(function(wt){wt.stats.attributesCount>St&&(St=wt.stats.attributesCount)}),St}),{clear:function(){var St=Ne.deleteShader.bind(Ne);pe(ht).forEach(St),ht={},pe(dt).forEach(St),dt={},kt.forEach(function(wt){Ne.deleteProgram(wt.program)}),kt.length=0,it={},st.shaderCount=0},program:function(St,wt,At,Ft){var jt=it[wt];jt||(jt=it[wt]={});var rn=jt[St];if(rn&&(rn.refCount++,!Ft))return rn;var nn=new Be(wt,St);return st.shaderCount++,at(nn,At,Ft),rn||(jt[St]=nn),kt.push(nn),Z(nn,{destroy:function(){if(nn.refCount--,0>=nn.refCount){Ne.deleteProgram(nn.program);var on=kt.indexOf(nn);kt.splice(on,1),st.shaderCount--}0>=jt[nn.vertId].refCount&&(Ne.deleteShader(dt[nn.vertId]),delete dt[nn.vertId],delete it[nn.fragId][nn.vertId]),Object.keys(it[nn.fragId]).length||(Ne.deleteShader(ht[nn.fragId]),delete ht[nn.fragId],delete it[nn.fragId])}})},restore:function(){ht={},dt={};for(var St=0;St<kt.length;++St)at(kt[St],null,kt[St].attributes.map(function(wt){return[wt.location,wt.name]}))},shader:Ve,frag:-1,vert:-1}}function P(Ne,Xe,st,lt,xt,bt,Ve){function Be(at){var ht;ht=Xe.next===null?5121:Xe.next.colorAttachments[0].texture._texture.type;var dt=0,it=0,kt=lt.framebufferWidth,Tt=lt.framebufferHeight,St=null;return fe(at)?St=at:at&&(dt=0|at.x,it=0|at.y,kt=0|(at.width||lt.framebufferWidth-dt),Tt=0|(at.height||lt.framebufferHeight-it),St=at.data||null),st(),at=kt*Tt*4,St||(ht===5121?St=new Uint8Array(at):ht===5126&&(St=St||new Float32Array(at))),Ne.pixelStorei(3333,4),Ne.readPixels(dt,it,kt,Tt,6408,ht,St),St}return function(at){return at&&"framebuffer"in at?function(ht){var dt;return Xe.setFBO({framebuffer:ht.framebuffer},function(){dt=Be(ht)}),dt}(at):Be(at)}}function F(Ne,Xe){return Ne>>>Xe|Ne<<32-Xe}function U(Ne,Xe){var st=(65535&Ne)+(65535&Xe);return(Ne>>16)+(Xe>>16)+(st>>16)<<16|65535&st}function I(Ne){return Array.prototype.slice.call(Ne)}function N(Ne){return I(Ne).join("")}function W(Ne){function Xe(){var dt=[],it=[];return Z(function(){dt.push.apply(dt,I(arguments))},{def:function(){var kt="v"+xt++;return it.push(kt),0<arguments.length&&(dt.push(kt,"="),dt.push.apply(dt,I(arguments)),dt.push(";")),kt},toString:function(){return N([0<it.length?"var "+it.join(",")+";":"",N(dt)])}})}function st(){function dt(wt,At){kt(wt,At,"=",it.def(wt,At),";")}var it=Xe(),kt=Xe(),Tt=it.toString,St=kt.toString;return Z(function(){it.apply(it,I(arguments))},{def:it.def,entry:it,exit:kt,save:dt,set:function(wt,At,Ft){dt(wt,At),it(wt,At,"=",Ft,";")},toString:function(){return Tt()+St()}})}var lt=Ne&&Ne.cache,xt=0,bt=[],Ve=[],Be=[],at=Xe(),ht={};return{global:at,link:function(dt,it){var kt=it&&it.stable;if(!kt){for(var Tt=0;Tt<Ve.length;++Tt)if(Ve[Tt]===dt&&!Be[Tt])return bt[Tt]}return Tt="g"+xt++,bt.push(Tt),Ve.push(dt),Be.push(kt),Tt},block:Xe,proc:function(dt,it){function kt(){var At="a"+Tt.length;return Tt.push(At),At}var Tt=[];it=it||0;for(var St=0;St<it;++St)kt();var wt=(St=st()).toString;return ht[dt]=Z(St,{arg:kt,toString:function(){return N(["function(",Tt.join(),"){",wt(),"}"])}})},scope:st,cond:function(){var dt=N(arguments),it=st(),kt=st(),Tt=it.toString,St=kt.toString;return Z(it,{then:function(){return it.apply(it,I(arguments)),this},else:function(){return kt.apply(kt,I(arguments)),this},toString:function(){var wt=St();return wt&&(wt="else{"+wt+"}"),N(["if(",dt,"){",Tt(),"}",wt])}})},compile:function(){var dt=['"use strict";',at,"return {"];Object.keys(ht).forEach(function(Tt){dt.push('"',Tt,'":',ht[Tt].toString(),",")}),dt.push("}");var it,kt=N(dt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return lt&&(it=function(Tt){for(var St,wt="",At=0;At<Tt.length;At++)St=Tt.charCodeAt(At),wt+="0123456789abcdef".charAt(St>>>4&15)+"0123456789abcdef".charAt(15&St);return wt}(function(Tt){for(var St=Array(Tt.length>>2),wt=0;wt<St.length;wt++)St[wt]=0;for(wt=0;wt<8*Tt.length;wt+=8)St[wt>>5]|=(255&Tt.charCodeAt(wt/8))<<24-wt%32;var At,Ft,jt,rn,nn,on,Ht,$t,bn,ln,Kt,fn=8*Tt.length;for(Tt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],wt=Array(64),St[fn>>5]|=128<<24-fn%32,St[15+(fn+64>>9<<4)]=fn,$t=0;$t<St.length;$t+=16){for(fn=Tt[0],At=Tt[1],Ft=Tt[2],jt=Tt[3],rn=Tt[4],nn=Tt[5],on=Tt[6],Ht=Tt[7],bn=0;64>bn;bn++){var en;16>bn?wt[bn]=St[bn+$t]:(ln=bn,Kt=U(Kt=F(Kt=wt[bn-2],17)^F(Kt,19)^Kt>>>10,wt[bn-7]),en=F(en=wt[bn-15],7)^F(en,18)^en>>>3,wt[ln]=U(U(Kt,en),wt[bn-16])),ln=U(U(U(U(Ht,ln=F(ln=rn,6)^F(ln,11)^F(ln,25)),rn&nn^~rn&on),tt[bn]),wt[bn]),Kt=U(Ht=F(Ht=fn,2)^F(Ht,13)^F(Ht,22),fn&At^fn&Ft^At&Ft),Ht=on,on=nn,nn=rn,rn=U(jt,ln),jt=Ft,Ft=At,At=fn,fn=U(ln,Kt)}Tt[0]=U(fn,Tt[0]),Tt[1]=U(At,Tt[1]),Tt[2]=U(Ft,Tt[2]),Tt[3]=U(jt,Tt[3]),Tt[4]=U(rn,Tt[4]),Tt[5]=U(nn,Tt[5]),Tt[6]=U(on,Tt[6]),Tt[7]=U(Ht,Tt[7])}for(St="",wt=0;wt<32*Tt.length;wt+=8)St+=String.fromCharCode(Tt[wt>>5]>>>24-wt%32&255);return St}(function(Tt){for(var St,wt,At="",Ft=-1;++Ft<Tt.length;)St=Tt.charCodeAt(Ft),wt=Ft+1<Tt.length?Tt.charCodeAt(Ft+1):0,55296<=St&&56319>=St&&56320<=wt&&57343>=wt&&(St=65536+((1023&St)<<10)+(1023&wt),Ft++),127>=St?At+=String.fromCharCode(St):2047>=St?At+=String.fromCharCode(192|St>>>6&31,128|63&St):65535>=St?At+=String.fromCharCode(224|St>>>12&15,128|St>>>6&63,128|63&St):2097151>=St&&(At+=String.fromCharCode(240|St>>>18&7,128|St>>>12&63,128|St>>>6&63,128|63&St));return At}(kt))),lt[it])?lt[it].apply(null,Ve):(kt=Function.apply(null,bt.concat(kt)),lt&&(lt[it]=kt),kt.apply(null,Ve))}}}function B(Ne){return Array.isArray(Ne)||fe(Ne)||t(Ne)}function V(Ne){return Ne.sort(function(Xe,st){return Xe==="viewport"?-1:st==="viewport"?1:Xe<st?-1:1})}function q(Ne,Xe,st,lt){this.thisDep=Ne,this.contextDep=Xe,this.propDep=st,this.append=lt}function ne(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function $(Ne){return new q(!1,!1,!1,Ne)}function K(Ne,Xe){var st=Ne.type;if(st===0)return new q(!0,1<=(st=Ne.data.length),2<=st,Xe);if(st===4)return new q((st=Ne.data).thisDep,st.contextDep,st.propDep,Xe);if(st===5)return new q(!1,!1,!1,Xe);if(st===6){for(var lt=st=!1,xt=!1,bt=0;bt<Ne.data.length;++bt){var Ve=Ne.data[bt];Ve.type===1?xt=!0:Ve.type===2?lt=!0:Ve.type===3?st=!0:Ve.type===0?(st=!0,1<=(Ve=Ve.data)&&(lt=!0),2<=Ve&&(xt=!0)):Ve.type===4&&(st=st||Ve.data.thisDep,lt=lt||Ve.data.contextDep,xt=xt||Ve.data.propDep)}return new q(st,lt,xt,Xe)}return new q(st===3,st===2,st===1,Xe)}function ee(Ne,Xe,st,lt,xt,bt,Ve,Be,at,ht,dt,it,kt,Tt,St,wt){function At(Pt){return Pt.replace(".","_")}function Ft(Pt,Zt,Wt){var gn=At(Pt);Vn.push(Pt),Ln[gn]=yn[gn]=!!Wt,Un[gn]=Zt}function jt(Pt,Zt,Wt){var gn=At(Pt);Vn.push(Pt),Array.isArray(Wt)?(yn[gn]=Wt.slice(),Ln[gn]=Wt.slice()):yn[gn]=Ln[gn]=Wt,er[gn]=Zt}function rn(){var Pt=W({cache:St}),Zt=Pt.link,Wt=Pt.global;Pt.id=mn++,Pt.batchId="0";var gn=Zt(fr),pn=Pt.shared={props:"a0"};Object.keys(fr).forEach(function(Nt){pn[Nt]=Wt.def(gn,".",Nt)});var kn=Pt.next={},vn=Pt.current={};Object.keys(er).forEach(function(Nt){Array.isArray(yn[Nt])&&(kn[Nt]=Wt.def(pn.next,".",Nt),vn[Nt]=Wt.def(pn.current,".",Nt))});var cn=Pt.constants={};Object.keys(Xt).forEach(function(Nt){cn[Nt]=Wt.def(JSON.stringify(Xt[Nt]))}),Pt.invoke=function(Nt,tn){switch(tn.type){case 0:var _n=["this",pn.context,pn.props,Pt.batchId];return Nt.def(Zt(tn.data),".call(",_n.slice(0,Math.max(tn.data.length+1,4)),")");case 1:return Nt.def(pn.props,tn.data);case 2:return Nt.def(pn.context,tn.data);case 3:return Nt.def("this",tn.data);case 4:return tn.data.append(Pt,Nt),tn.data.ref;case 5:return tn.data.toString();case 6:return tn.data.map(function(Fn){return Pt.invoke(Nt,Fn)})}},Pt.attribCache={};var qt={};return Pt.scopeAttrib=function(Nt){if((Nt=Xe.id(Nt))in qt)return qt[Nt];var tn=ht.scope[Nt];return tn||(tn=ht.scope[Nt]=new Kn),qt[Nt]=Zt(tn)},Pt}function nn(Pt,Zt){var Wt=Pt.static,gn=Pt.dynamic;if("framebuffer"in Wt){var pn=Wt.framebuffer;return pn?(pn=Be.getFramebuffer(pn),$(function(vn,cn){var qt=vn.link(pn),Nt=vn.shared;return cn.set(Nt.framebuffer,".next",qt),Nt=Nt.context,cn.set(Nt,".framebufferWidth",qt+".width"),cn.set(Nt,".framebufferHeight",qt+".height"),qt})):$(function(vn,cn){var qt=vn.shared;return cn.set(qt.framebuffer,".next","null"),qt=qt.context,cn.set(qt,".framebufferWidth",qt+".drawingBufferWidth"),cn.set(qt,".framebufferHeight",qt+".drawingBufferHeight"),"null"})}if("framebuffer"in gn){var kn=gn.framebuffer;return K(kn,function(vn,cn){var qt=vn.invoke(cn,kn),Nt=vn.shared,tn=Nt.framebuffer;return qt=cn.def(tn,".getFramebuffer(",qt,")"),cn.set(tn,".next",qt),Nt=Nt.context,cn.set(Nt,".framebufferWidth",qt+"?"+qt+".width:"+Nt+".drawingBufferWidth"),cn.set(Nt,".framebufferHeight",qt+"?"+qt+".height:"+Nt+".drawingBufferHeight"),qt})}return null}function on(Pt,Zt,Wt){function gn(Nt){if(Nt in pn){var tn=Xe.id(pn[Nt]);return(Nt=$(function(){return tn})).id=tn,Nt}if(Nt in kn){var _n=kn[Nt];return K(_n,function(Fn,zn){var Pn=Fn.invoke(zn,_n);return zn.def(Fn.shared.strings,".id(",Pn,")")})}return null}var pn=Pt.static,kn=Pt.dynamic,vn=gn("frag"),cn=gn("vert"),qt=null;return ne(vn)&&ne(cn)?(qt=dt.program(cn.id,vn.id,null,Wt),Pt=$(function(Nt,tn){return Nt.link(qt)})):Pt=new q(vn&&vn.thisDep||cn&&cn.thisDep,vn&&vn.contextDep||cn&&cn.contextDep,vn&&vn.propDep||cn&&cn.propDep,function(Nt,tn){var _n,Fn,zn=Nt.shared.shader;return _n=vn?vn.append(Nt,tn):tn.def(zn,".","frag"),Fn=cn?cn.append(Nt,tn):tn.def(zn,".","vert"),tn.def(zn+".program("+Fn+","+_n+")")}),{frag:vn,vert:cn,progVar:Pt,program:qt}}function Ht(Pt,Zt){function Wt(Pn,$n){if(Pn in gn){var Wn=0|gn[Pn];return $n?kn.offset=Wn:kn.instances=Wn,$(function(qn,Jn){return $n&&(qn.OFFSET=Wn),Wn})}if(Pn in pn){var tr=pn[Pn];return K(tr,function(qn,Jn){var sr=qn.invoke(Jn,tr);return $n&&(qn.OFFSET=sr),sr})}if($n){if(qt)return $(function(qn,Jn){return qn.OFFSET=0});if(vn)return new q(cn.thisDep,cn.contextDep,cn.propDep,function(qn,Jn){return Jn.def(qn.shared.vao+".currentVAO?"+qn.shared.vao+".currentVAO.offset:0")})}else if(vn)return new q(cn.thisDep,cn.contextDep,cn.propDep,function(qn,Jn){return Jn.def(qn.shared.vao+".currentVAO?"+qn.shared.vao+".currentVAO.instances:-1")});return null}var gn=Pt.static,pn=Pt.dynamic,kn={},vn=!1,cn=function(){if("vao"in gn){var Pn=gn.vao;return Pn!==null&&ht.getVAO(Pn)===null&&(Pn=ht.createVAO(Pn)),vn=!0,kn.vao=Pn,$(function(Wn){var tr=ht.getVAO(Pn);return tr?Wn.link(tr):"null"})}if("vao"in pn){vn=!0;var $n=pn.vao;return K($n,function(Wn,tr){var qn=Wn.invoke(tr,$n);return tr.def(Wn.shared.vao+".getVAO("+qn+")")})}return null}(),qt=!1,Nt=function(){if("elements"in gn){var Pn=gn.elements;if(kn.elements=Pn,B(Pn)){var $n=kn.elements=bt.create(Pn,!0);Pn=bt.getElements($n),qt=!0}else Pn&&(Pn=bt.getElements(Pn),qt=!0);return $n=$(function(tr,qn){if(Pn){var Jn=tr.link(Pn);return tr.ELEMENTS=Jn}return tr.ELEMENTS=null}),$n.value=Pn,$n}if("elements"in pn){qt=!0;var Wn=pn.elements;return K(Wn,function(tr,qn){var Jn=(sr=tr.shared).isBufferArgs,sr=sr.elements,wr=tr.invoke(qn,Wn),pr=qn.def("null");return Jn=qn.def(Jn,"(",wr,")"),wr=tr.cond(Jn).then(pr,"=",sr,".createStream(",wr,");").else(pr,"=",sr,".getElements(",wr,");"),qn.entry(wr),qn.exit(tr.cond(Jn).then(sr,".destroyStream(",pr,");")),tr.ELEMENTS=pr})}return vn?new q(cn.thisDep,cn.contextDep,cn.propDep,function(tr,qn){return qn.def(tr.shared.vao+".currentVAO?"+tr.shared.elements+".getElements("+tr.shared.vao+".currentVAO.elements):null")}):null}(),tn=Wt("offset",!0),_n=function(){if("primitive"in gn){var Pn=gn.primitive;return kn.primitive=Pn,$(function(Wn,tr){return Se[Pn]})}if("primitive"in pn){var $n=pn.primitive;return K($n,function(Wn,tr){var qn=Wn.constants.primTypes,Jn=Wn.invoke(tr,$n);return tr.def(qn,"[",Jn,"]")})}return qt?ne(Nt)?Nt.value?$(function(Wn,tr){return tr.def(Wn.ELEMENTS,".primType")}):$(function(){return 4}):new q(Nt.thisDep,Nt.contextDep,Nt.propDep,function(Wn,tr){var qn=Wn.ELEMENTS;return tr.def(qn,"?",qn,".primType:",4)}):vn?new q(cn.thisDep,cn.contextDep,cn.propDep,function(Wn,tr){return tr.def(Wn.shared.vao+".currentVAO?"+Wn.shared.vao+".currentVAO.primitive:4")}):null}(),Fn=function(){if("count"in gn){var Pn=0|gn.count;return kn.count=Pn,$(function(){return Pn})}if("count"in pn){var $n=pn.count;return K($n,function(Wn,tr){return Wn.invoke(tr,$n)})}return qt?ne(Nt)?Nt?tn?new q(tn.thisDep,tn.contextDep,tn.propDep,function(Wn,tr){return tr.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET)}):$(function(Wn,tr){return tr.def(Wn.ELEMENTS,".vertCount")}):$(function(){return-1}):new q(Nt.thisDep||tn.thisDep,Nt.contextDep||tn.contextDep,Nt.propDep||tn.propDep,function(Wn,tr){var qn=Wn.ELEMENTS;return Wn.OFFSET?tr.def(qn,"?",qn,".vertCount-",Wn.OFFSET,":-1"):tr.def(qn,"?",qn,".vertCount:-1")}):vn?new q(cn.thisDep,cn.contextDep,cn.propDep,function(Wn,tr){return tr.def(Wn.shared.vao,".currentVAO?",Wn.shared.vao,".currentVAO.count:-1")}):null}(),zn=Wt("instances",!1);return{elements:Nt,primitive:_n,count:Fn,instances:zn,offset:tn,vao:cn,vaoActive:vn,elementsActive:qt,static:kn}}function $t(Pt,Zt){var Wt=Pt.static,gn=Pt.dynamic,pn={};return Object.keys(Wt).forEach(function(kn){var vn=Wt[kn],cn=Xe.id(kn),qt=new Kn;if(B(vn))qt.state=1,qt.buffer=xt.getBuffer(xt.create(vn,34962,!1,!0)),qt.type=0;else if(tn=xt.getBuffer(vn))qt.state=1,qt.buffer=tn,qt.type=0;else if("constant"in vn){var Nt=vn.constant;qt.buffer="null",qt.state=2,typeof Nt=="number"?qt.x=Nt:Qe.forEach(function(Wn,tr){tr<Nt.length&&(qt[Wn]=Nt[tr])})}else{var tn=B(vn.buffer)?xt.getBuffer(xt.create(vn.buffer,34962,!1,!0)):xt.getBuffer(vn.buffer),_n=0|vn.offset,Fn=0|vn.stride,zn=0|vn.size,Pn=!!vn.normalized,$n=0;"type"in vn&&($n=Ce[vn.type]),vn=0|vn.divisor,qt.buffer=tn,qt.state=1,qt.size=zn,qt.normalized=Pn,qt.type=$n||tn.dtype,qt.offset=_n,qt.stride=Fn,qt.divisor=vn}pn[kn]=$(function(Wn,tr){var qn=Wn.attribCache;if(cn in qn)return qn[cn];var Jn={isStream:!1};return Object.keys(qt).forEach(function(sr){Jn[sr]=qt[sr]}),qt.buffer&&(Jn.buffer=Wn.link(qt.buffer),Jn.type=Jn.type||Jn.buffer+".dtype"),qn[cn]=Jn})}),Object.keys(gn).forEach(function(kn){var vn=gn[kn];pn[kn]=K(vn,function(cn,qt){function Nt(qn){qt(Pn[qn],"=",tn,".",qn,"|0;")}var tn=cn.invoke(qt,vn),_n=cn.shared,Fn=cn.constants,zn=_n.isBufferArgs,Pn=(_n=_n.buffer,{isStream:qt.def(!1)}),$n=new Kn;$n.state=1,Object.keys($n).forEach(function(qn){Pn[qn]=qt.def(""+$n[qn])});var Wn=Pn.buffer,tr=Pn.type;return qt("if(",zn,"(",tn,")){",Pn.isStream,"=true;",Wn,"=",_n,".createStream(",34962,",",tn,");",tr,"=",Wn,".dtype;","}else{",Wn,"=",_n,".getBuffer(",tn,");","if(",Wn,"){",tr,"=",Wn,".dtype;",'}else if("constant" in ',tn,"){",Pn.state,"=",2,";","if(typeof "+tn+'.constant === "number"){',Pn[Qe[0]],"=",tn,".constant;",Qe.slice(1).map(function(qn){return Pn[qn]}).join("="),"=0;","}else{",Qe.map(function(qn,Jn){return Pn[qn]+"="+tn+".constant.length>"+Jn+"?"+tn+".constant["+Jn+"]:0;"}).join(""),"}}else{","if(",zn,"(",tn,".buffer)){",Wn,"=",_n,".createStream(",34962,",",tn,".buffer);","}else{",Wn,"=",_n,".getBuffer(",tn,".buffer);","}",tr,'="type" in ',tn,"?",Fn.glTypes,"[",tn,".type]:",Wn,".dtype;",Pn.normalized,"=!!",tn,".normalized;"),Nt("size"),Nt("offset"),Nt("stride"),Nt("divisor"),qt("}}"),qt.exit("if(",Pn.isStream,"){",_n,".destroyStream(",Wn,");","}"),Pn})}),pn}function bn(Pt,Zt,Wt,gn,pn){function kn($n){var Wn=cn[$n];Wn&&(Nt[$n]=Wn)}var vn=function($n,Wn){if(typeof(tr=$n.static).frag=="string"&&typeof tr.vert=="string"){if(0<Object.keys(Wn.dynamic).length)return null;var tr=Wn.static,qn=Object.keys(tr);if(0<qn.length&&typeof tr[qn[0]]=="number"){for(var Jn=[],sr=0;sr<qn.length;++sr)Jn.push([0|tr[qn[sr]],qn[sr]]);return Jn}}return null}(Pt,Zt),cn=function($n,Wn,tr){function qn(pr){if(pr in Jn){var rr=Jn[pr];pr=!0;var yr,kr,Nr=0|rr.x,ti=0|rr.y;return"width"in rr?yr=0|rr.width:pr=!1,"height"in rr?kr=0|rr.height:pr=!1,new q(!pr&&Wn&&Wn.thisDep,!pr&&Wn&&Wn.contextDep,!pr&&Wn&&Wn.propDep,function(Wi,ui){var Di=Wi.shared.context,pa=yr;"width"in rr||(pa=ui.def(Di,".","framebufferWidth","-",Nr));var Da=kr;return"height"in rr||(Da=ui.def(Di,".","framebufferHeight","-",ti)),[Nr,ti,pa,Da]})}if(pr in sr){var mi=sr[pr];return pr=K(mi,function(Wi,ui){var Di=Wi.invoke(ui,mi),pa=Wi.shared.context,Da=ui.def(Di,".x|0"),Rr=ui.def(Di,".y|0");return[Da,Rr,ui.def('"width" in ',Di,"?",Di,".width|0:","(",pa,".","framebufferWidth","-",Da,")"),Di=ui.def('"height" in ',Di,"?",Di,".height|0:","(",pa,".","framebufferHeight","-",Rr,")")]}),Wn&&(pr.thisDep=pr.thisDep||Wn.thisDep,pr.contextDep=pr.contextDep||Wn.contextDep,pr.propDep=pr.propDep||Wn.propDep),pr}return Wn?new q(Wn.thisDep,Wn.contextDep,Wn.propDep,function(Wi,ui){var Di=Wi.shared.context;return[0,0,ui.def(Di,".","framebufferWidth"),ui.def(Di,".","framebufferHeight")]}):null}var Jn=$n.static,sr=$n.dynamic;if($n=qn("viewport")){var wr=$n;$n=new q($n.thisDep,$n.contextDep,$n.propDep,function(pr,rr){var yr=wr.append(pr,rr),kr=pr.shared.context;return rr.set(kr,".viewportWidth",yr[2]),rr.set(kr,".viewportHeight",yr[3]),yr})}return{viewport:$n,scissor_box:qn("scissor.box")}}(Pt,_n=nn(Pt)),qt=Ht(Pt),Nt=function($n,Wn){var tr=$n.static,qn=$n.dynamic,Jn={};return Vn.forEach(function(sr){function wr(rr,yr){if(sr in tr){var kr=rr(tr[sr]);Jn[pr]=$(function(){return kr})}else if(sr in qn){var Nr=qn[sr];Jn[pr]=K(Nr,function(ti,mi){return yr(ti,mi,ti.invoke(mi,Nr))})}}var pr=At(sr);switch(sr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return wr(function(rr){return rr},function(rr,yr,kr){return kr});case"depth.func":return wr(function(rr){return pt[rr]},function(rr,yr,kr){return yr.def(rr.constants.compareFuncs,"[",kr,"]")});case"depth.range":return wr(function(rr){return rr},function(rr,yr,kr){return[yr.def("+",kr,"[0]"),yr=yr.def("+",kr,"[1]")]});case"blend.func":return wr(function(rr){return[zt["srcRGB"in rr?rr.srcRGB:rr.src],zt["dstRGB"in rr?rr.dstRGB:rr.dst],zt["srcAlpha"in rr?rr.srcAlpha:rr.src],zt["dstAlpha"in rr?rr.dstAlpha:rr.dst]]},function(rr,yr,kr){function Nr(ui,Di){return yr.def('"',ui,Di,'" in ',kr,"?",kr,".",ui,Di,":",kr,".",ui)}rr=rr.constants.blendFuncs;var ti=Nr("src","RGB"),mi=Nr("dst","RGB"),Wi=(ti=yr.def(rr,"[",ti,"]"),yr.def(rr,"[",Nr("src","Alpha"),"]"));return[ti,mi=yr.def(rr,"[",mi,"]"),Wi,rr=yr.def(rr,"[",Nr("dst","Alpha"),"]")]});case"blend.equation":return wr(function(rr){return typeof rr=="string"?[or[rr],or[rr]]:typeof rr=="object"?[or[rr.rgb],or[rr.alpha]]:void 0},function(rr,yr,kr){var Nr=rr.constants.blendEquations,ti=yr.def(),mi=yr.def();return(rr=rr.cond("typeof ",kr,'==="string"')).then(ti,"=",mi,"=",Nr,"[",kr,"];"),rr.else(ti,"=",Nr,"[",kr,".rgb];",mi,"=",Nr,"[",kr,".alpha];"),yr(rr),[ti,mi]});case"blend.color":return wr(function(rr){return b(4,function(yr){return+rr[yr]})},function(rr,yr,kr){return b(4,function(Nr){return yr.def("+",kr,"[",Nr,"]")})});case"stencil.mask":return wr(function(rr){return 0|rr},function(rr,yr,kr){return yr.def(kr,"|0")});case"stencil.func":return wr(function(rr){return[pt[rr.cmp||"keep"],rr.ref||0,"mask"in rr?rr.mask:-1]},function(rr,yr,kr){return[rr=yr.def('"cmp" in ',kr,"?",rr.constants.compareFuncs,"[",kr,".cmp]",":",7680),yr.def(kr,".ref|0"),yr=yr.def('"mask" in ',kr,"?",kr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return wr(function(rr){return[sr==="stencil.opBack"?1029:1028,vt[rr.fail||"keep"],vt[rr.zfail||"keep"],vt[rr.zpass||"keep"]]},function(rr,yr,kr){function Nr(mi){return yr.def('"',mi,'" in ',kr,"?",ti,"[",kr,".",mi,"]:",7680)}var ti=rr.constants.stencilOps;return[sr==="stencil.opBack"?1029:1028,Nr("fail"),Nr("zfail"),Nr("zpass")]});case"polygonOffset.offset":return wr(function(rr){return[0|rr.factor,0|rr.units]},function(rr,yr,kr){return[yr.def(kr,".factor|0"),yr=yr.def(kr,".units|0")]});case"cull.face":return wr(function(rr){var yr=0;return rr==="front"?yr=1028:rr==="back"&&(yr=1029),yr},function(rr,yr,kr){return yr.def(kr,'==="front"?',1028,":",1029)});case"frontFace":return wr(function(rr){return We[rr]},function(rr,yr,kr){return yr.def(kr+'==="cw"?2304:2305')});case"colorMask":return wr(function(rr){return rr.map(function(yr){return!!yr})},function(rr,yr,kr){return b(4,function(Nr){return"!!"+kr+"["+Nr+"]"})});case"sample.coverage":return wr(function(rr){return["value"in rr?rr.value:1,!!rr.invert]},function(rr,yr,kr){return[yr.def('"value" in ',kr,"?+",kr,".value:1"),yr=yr.def("!!",kr,".invert")]})}}),Jn}(Pt),tn=on(Pt,0,vn);kn("viewport"),kn(At("scissor.box"));var _n,Fn=0<Object.keys(Nt).length;if((_n={framebuffer:_n,draw:qt,shader:tn,state:Nt,dirty:Fn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function($n){var Wn,tr=$n.static;if($n=$n.dynamic,"profile"in tr){var qn=!!tr.profile;(Wn=$(function(sr,wr){return qn})).enable=qn}else if("profile"in $n){var Jn=$n.profile;Wn=K(Jn,function(sr,wr){return sr.invoke(wr,Jn)})}return Wn}(Pt),_n.uniforms=function($n,Wn){var tr=$n.static,qn=$n.dynamic,Jn={};return Object.keys(tr).forEach(function(sr){var wr,pr=tr[sr];if(typeof pr=="number"||typeof pr=="boolean")wr=$(function(){return pr});else if(typeof pr=="function"){var rr=pr._reglType;rr==="texture2d"||rr==="textureCube"?wr=$(function(yr){return yr.link(pr)}):rr!=="framebuffer"&&rr!=="framebufferCube"||(wr=$(function(yr){return yr.link(pr.color[0])}))}else m(pr)&&(wr=$(function(yr){return yr.global.def("[",b(pr.length,function(kr){return pr[kr]}),"]")}));wr.value=pr,Jn[sr]=wr}),Object.keys(qn).forEach(function(sr){var wr=qn[sr];Jn[sr]=K(wr,function(pr,rr){return pr.invoke(rr,wr)})}),Jn}(Wt),_n.drawVAO=_n.scopeVAO=qt.vao,!_n.drawVAO&&tn.program&&!vn&&st.angle_instanced_arrays&&qt.static.elements){var zn=!0;if(Pt=tn.program.attributes.map(function($n){return $n=Zt.static[$n],zn=zn&&!!$n,$n}),zn&&0<Pt.length){var Pn=ht.getVAO(ht.createVAO({attributes:Pt,elements:qt.static.elements}));_n.drawVAO=new q(null,null,null,function($n,Wn){return $n.link(Pn)}),_n.useVAO=!0}}return vn?_n.useVAO=!0:_n.attributes=$t(Zt),_n.context=function($n){var Wn=$n.static,tr=$n.dynamic,qn={};return Object.keys(Wn).forEach(function(Jn){var sr=Wn[Jn];qn[Jn]=$(function(wr,pr){return typeof sr=="number"||typeof sr=="boolean"?""+sr:wr.link(sr)})}),Object.keys(tr).forEach(function(Jn){var sr=tr[Jn];qn[Jn]=K(sr,function(wr,pr){return wr.invoke(pr,sr)})}),qn}(gn),_n}function ln(Pt,Zt,Wt){var gn=Pt.shared.context,pn=Pt.scope();Object.keys(Wt).forEach(function(kn){Zt.save(gn,"."+kn);var vn=Wt[kn].append(Pt,Zt);Array.isArray(vn)?pn(gn,".",kn,"=[",vn.join(),"];"):pn(gn,".",kn,"=",vn,";")}),Zt(pn)}function Kt(Pt,Zt,Wt,gn){var pn,kn=(cn=Pt.shared).gl,vn=cn.framebuffer;an&&(pn=Zt.def(cn.extensions,".webgl_draw_buffers"));var cn=(qt=Pt.constants).drawBuffer,qt=qt.backBuffer;Pt=Wt?Wt.append(Pt,Zt):Zt.def(vn,".next"),gn||Zt("if(",Pt,"!==",vn,".cur){"),Zt("if(",Pt,"){",kn,".bindFramebuffer(",36160,",",Pt,".framebuffer);"),an&&Zt(pn,".drawBuffersWEBGL(",cn,"[",Pt,".colorAttachments.length]);"),Zt("}else{",kn,".bindFramebuffer(",36160,",null);"),an&&Zt(pn,".drawBuffersWEBGL(",qt,");"),Zt("}",vn,".cur=",Pt,";"),gn||Zt("}")}function fn(Pt,Zt,Wt){var gn=Pt.shared,pn=gn.gl,kn=Pt.current,vn=Pt.next,cn=gn.current,qt=gn.next,Nt=Pt.cond(cn,".dirty");Vn.forEach(function(tn){var _n,Fn;if(!((tn=At(tn))in Wt.state))if(tn in vn){_n=vn[tn],Fn=kn[tn];var zn=b(yn[tn].length,function(Pn){return Nt.def(_n,"[",Pn,"]")});Nt(Pt.cond(zn.map(function(Pn,$n){return Pn+"!=="+Fn+"["+$n+"]"}).join("||")).then(pn,".",er[tn],"(",zn,");",zn.map(function(Pn,$n){return Fn+"["+$n+"]="+Pn}).join(";"),";"))}else _n=Nt.def(qt,".",tn),zn=Pt.cond(_n,"!==",cn,".",tn),Nt(zn),tn in Un?zn(Pt.cond(_n).then(pn,".enable(",Un[tn],");").else(pn,".disable(",Un[tn],");"),cn,".",tn,"=",_n,";"):zn(pn,".",er[tn],"(",_n,");",cn,".",tn,"=",_n,";")}),Object.keys(Wt.state).length===0&&Nt(cn,".dirty=false;"),Zt(Nt)}function en(Pt,Zt,Wt,gn){var pn,kn=Pt.shared,vn=Pt.current,cn=kn.current,qt=kn.gl;V(Object.keys(Wt)).forEach(function(Nt){var tn=Wt[Nt];if(!gn||gn(tn)){var _n=tn.append(Pt,Zt);if(Un[Nt]){var Fn=Un[Nt];ne(tn)?(pn=Pt.link(_n,{stable:!0}),Zt(Pt.cond(pn).then(qt,".enable(",Fn,");").else(qt,".disable(",Fn,");")),Zt(cn,".",Nt,"=",pn,";")):(Zt(Pt.cond(_n).then(qt,".enable(",Fn,");").else(qt,".disable(",Fn,");")),Zt(cn,".",Nt,"=",_n,";"))}else if(m(_n)){var zn=vn[Nt];Zt(qt,".",er[Nt],"(",_n,");",_n.map(function(Pn,$n){return zn+"["+$n+"]="+Pn}).join(";"),";")}else ne(tn)?(pn=Pt.link(_n,{stable:!0}),Zt(qt,".",er[Nt],"(",pn,");",cn,".",Nt,"=",pn,";")):Zt(qt,".",er[Nt],"(",_n,");",cn,".",Nt,"=",_n,";")}})}function un(Pt,Zt){Qt&&(Pt.instancing=Zt.def(Pt.shared.extensions,".angle_instanced_arrays"))}function An(Pt,Zt,Wt,gn,pn){function kn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function vn($n){$n(Nt=Zt.def(),"=",kn(),";"),typeof pn=="string"?$n(Fn,".count+=",pn,";"):$n(Fn,".count++;"),Tt&&(gn?$n(tn=Zt.def(),"=",Pn,".getNumPendingQueries();"):$n(Pn,".beginQuery(",Fn,");"))}function cn($n){$n(Fn,".cpuTime+=",kn(),"-",Nt,";"),Tt&&(gn?$n(Pn,".pushScopeStats(",tn,",",Pn,".getNumPendingQueries(),",Fn,");"):$n(Pn,".endQuery();"))}function qt($n){var Wn=Zt.def(zn,".profile");Zt(zn,".profile=",$n,";"),Zt.exit(zn,".profile=",Wn,";")}var Nt,tn,_n=Pt.shared,Fn=Pt.stats,zn=_n.current,Pn=_n.timer;if(Wt=Wt.profile){if(ne(Wt))return void(Wt.enable?(vn(Zt),cn(Zt.exit),qt("true")):qt("false"));qt(Wt=Wt.append(Pt,Zt))}else Wt=Zt.def(zn,".profile");vn(_n=Pt.block()),Zt("if(",Wt,"){",_n,"}"),cn(Pt=Pt.block()),Zt.exit("if(",Wt,"){",Pt,"}")}function wn(Pt,Zt,Wt,gn,pn){function kn(cn,qt,Nt){function tn(){Zt("if(!",Pn,".buffer){",Fn,".enableVertexAttribArray(",zn,");}");var qn,Jn=Nt.type;qn=Nt.size?Zt.def(Nt.size,"||",qt):qt,Zt("if(",Pn,".type!==",Jn,"||",Pn,".size!==",qn,"||",tr.map(function(sr){return Pn+"."+sr+"!=="+Nt[sr]}).join("||"),"){",Fn,".bindBuffer(",34962,",",$n,".buffer);",Fn,".vertexAttribPointer(",[zn,qn,Jn,Nt.normalized,Nt.stride,Nt.offset],");",Pn,".type=",Jn,";",Pn,".size=",qn,";",tr.map(function(sr){return Pn+"."+sr+"="+Nt[sr]+";"}).join(""),"}"),Qt&&(Jn=Nt.divisor,Zt("if(",Pn,".divisor!==",Jn,"){",Pt.instancing,".vertexAttribDivisorANGLE(",[zn,Jn],");",Pn,".divisor=",Jn,";}"))}function _n(){Zt("if(",Pn,".buffer){",Fn,".disableVertexAttribArray(",zn,");",Pn,".buffer=null;","}if(",Qe.map(function(qn,Jn){return Pn+"."+qn+"!=="+Wn[Jn]}).join("||"),"){",Fn,".vertexAttrib4f(",zn,",",Wn,");",Qe.map(function(qn,Jn){return Pn+"."+qn+"="+Wn[Jn]+";"}).join(""),"}")}var Fn=vn.gl,zn=Zt.def(cn,".location"),Pn=Zt.def(vn.attributes,"[",zn,"]");cn=Nt.state;var $n=Nt.buffer,Wn=[Nt.x,Nt.y,Nt.z,Nt.w],tr=["buffer","normalized","offset","stride"];cn===1?tn():cn===2?_n():(Zt("if(",cn,"===",1,"){"),tn(),Zt("}else{"),_n(),Zt("}"))}var vn=Pt.shared;gn.forEach(function(cn){var qt,Nt=cn.name,tn=Wt.attributes[Nt];if(tn){if(!pn(tn))return;qt=tn.append(Pt,Zt)}else{if(!pn(Ze))return;var _n=Pt.scopeAttrib(Nt);qt={},Object.keys(new Kn).forEach(function(Fn){qt[Fn]=Zt.def(_n,".",Fn)})}kn(Pt.link(cn),function(Fn){switch(Fn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(cn.info.type),qt)})}function On(Pt,Zt,Wt,gn,pn,kn){for(var vn,cn=Pt.shared,qt=cn.gl,Nt=0;Nt<gn.length;++Nt){var tn,_n=(Pn=gn[Nt]).name,Fn=Pn.info.type,zn=Wt.uniforms[_n],Pn=Pt.link(Pn)+".location";if(zn){if(!pn(zn))continue;if(ne(zn)){if(_n=zn.value,Fn===35678||Fn===35680)Zt(qt,".uniform1i(",Pn,",",(Fn=Pt.link(_n._texture||_n.color[0]._texture))+".bind());"),Zt.exit(Fn,".unbind();");else if(Fn===35674||Fn===35675||Fn===35676)zn=2,Fn===35675?zn=3:Fn===35676&&(zn=4),Zt(qt,".uniformMatrix",zn,"fv(",Pn,",false,",_n=Pt.global.def("new Float32Array(["+Array.prototype.slice.call(_n)+"])"),");");else{switch(Fn){case 5126:vn="1f";break;case 35664:vn="2f";break;case 35665:vn="3f";break;case 35666:vn="4f";break;case 35670:case 5124:vn="1i";break;case 35671:case 35667:vn="2i";break;case 35672:case 35668:vn="3i";break;case 35673:case 35669:vn="4i"}Zt(qt,".uniform",vn,"(",Pn,",",m(_n)?Array.prototype.slice.call(_n):_n,");")}continue}tn=zn.append(Pt,Zt)}else{if(!pn(Ze))continue;tn=Zt.def(cn.uniforms,"[",Xe.id(_n),"]")}switch(Fn===35678?Zt("if(",tn,"&&",tn,'._reglType==="framebuffer"){',tn,"=",tn,".color[0];","}"):Fn===35680&&Zt("if(",tn,"&&",tn,'._reglType==="framebufferCube"){',tn,"=",tn,".color[0];","}"),_n=1,Fn){case 35678:case 35680:Fn=Zt.def(tn,"._texture"),Zt(qt,".uniform1i(",Pn,",",Fn,".bind());"),Zt.exit(Fn,".unbind();");continue;case 5124:case 35670:vn="1i";break;case 35667:case 35671:vn="2i",_n=2;break;case 35668:case 35672:vn="3i",_n=3;break;case 35669:case 35673:vn="4i",_n=4;break;case 5126:vn="1f";break;case 35664:vn="2f",_n=2;break;case 35665:vn="3f",_n=3;break;case 35666:vn="4f",_n=4;break;case 35674:vn="Matrix2fv";break;case 35675:vn="Matrix3fv";break;case 35676:vn="Matrix4fv"}if(vn.charAt(0)==="M"){Zt(qt,".uniform",vn,"(",Pn,","),Pn=Math.pow(Fn-35674+2,2);var $n=Pt.global.def("new Float32Array(",Pn,")");Array.isArray(tn)?Zt("false,(",b(Pn,function(tr){return $n+"["+tr+"]="+tn[tr]}),",",$n,")"):Zt("false,(Array.isArray(",tn,")||",tn," instanceof Float32Array)?",tn,":(",b(Pn,function(tr){return $n+"["+tr+"]="+tn+"["+tr+"]"}),",",$n,")"),Zt(");")}else{if(1<_n){Fn=[];var Wn=[];for(zn=0;zn<_n;++zn)Array.isArray(tn)?Wn.push(tn[zn]):Wn.push(Zt.def(tn+"["+zn+"]")),kn&&Fn.push(Zt.def());kn&&Zt("if(!",Pt.batchId,"||",Fn.map(function(tr,qn){return tr+"!=="+Wn[qn]}).join("||"),"){",Fn.map(function(tr,qn){return tr+"="+Wn[qn]+";"}).join("")),Zt(qt,".uniform",vn,"(",Pn,",",Wn.join(","),");")}else kn&&(Fn=Zt.def(),Zt("if(!",Pt.batchId,"||",Fn,"!==",tn,"){",Fn,"=",tn,";")),Zt(qt,".uniform",vn,"(",Pn,",",tn,");");kn&&Zt("}")}}}function Tn(Pt,Zt,Wt,gn){function pn(Jn){var sr=Fn[Jn];return sr?sr.contextDep&&gn.contextDynamic||sr.propDep?sr.append(Pt,Wt):sr.append(Pt,Zt):Zt.def(_n,".",Jn)}function kn(){function Jn(){Wt(qt,".drawElementsInstancedANGLE(",[Pn,Wn,tr,$n+"<<(("+tr+"-5121)>>1)",cn],");")}function sr(){Wt(qt,".drawArraysInstancedANGLE(",[Pn,$n,Wn,cn],");")}zn&&zn!=="null"?qn?Jn():(Wt("if(",zn,"){"),Jn(),Wt("}else{"),sr(),Wt("}")):sr()}function vn(){function Jn(){Wt(tn+".drawElements("+[Pn,Wn,tr,$n+"<<(("+tr+"-5121)>>1)"]+");")}function sr(){Wt(tn+".drawArrays("+[Pn,$n,Wn]+");")}zn&&zn!=="null"?qn?Jn():(Wt("if(",zn,"){"),Jn(),Wt("}else{"),sr(),Wt("}")):sr()}var cn,qt,Nt=Pt.shared,tn=Nt.gl,_n=Nt.draw,Fn=gn.draw,zn=function(){var Jn=Fn.elements,sr=Zt;return Jn?((Jn.contextDep&&gn.contextDynamic||Jn.propDep)&&(sr=Wt),Jn=Jn.append(Pt,sr),Fn.elementsActive&&sr("if("+Jn+")"+tn+".bindBuffer(34963,"+Jn+".buffer.buffer);")):(Jn=sr.def(),sr(Jn,"=",_n,".","elements",";","if(",Jn,"){",tn,".bindBuffer(",34963,",",Jn,".buffer.buffer);}","else if(",Nt.vao,".currentVAO){",Jn,"=",Pt.shared.elements+".getElements("+Nt.vao,".currentVAO.elements);",Dn?"":"if("+Jn+")"+tn+".bindBuffer(34963,"+Jn+".buffer.buffer);","}")),Jn}(),Pn=pn("primitive"),$n=pn("offset"),Wn=function(){var Jn=Fn.count,sr=Zt;return Jn?((Jn.contextDep&&gn.contextDynamic||Jn.propDep)&&(sr=Wt),Jn=Jn.append(Pt,sr)):Jn=sr.def(_n,".","count"),Jn}();if(typeof Wn=="number"){if(Wn===0)return}else Wt("if(",Wn,"){"),Wt.exit("}");Qt&&(cn=pn("instances"),qt=Pt.instancing);var tr=zn+".type",qn=Fn.elements&&ne(Fn.elements)&&!Fn.vaoActive;Qt&&(typeof cn!="number"||0<=cn)?typeof cn=="string"?(Wt("if(",cn,">0){"),kn(),Wt("}else if(",cn,"<0){"),vn(),Wt("}")):kn():vn()}function Cn(Pt,Zt,Wt,gn,pn){return pn=(Zt=rn()).proc("body",pn),Qt&&(Zt.instancing=pn.def(Zt.shared.extensions,".angle_instanced_arrays")),Pt(Zt,pn,Wt,gn),Zt.compile().body}function Bn(Pt,Zt,Wt,gn){un(Pt,Zt),Wt.useVAO?Wt.drawVAO?Zt(Pt.shared.vao,".setVAO(",Wt.drawVAO.append(Pt,Zt),");"):Zt(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(Zt(Pt.shared.vao,".setVAO(null);"),wn(Pt,Zt,Wt,gn.attributes,function(){return!0})),On(Pt,Zt,Wt,gn.uniforms,function(){return!0},!1),Tn(Pt,Zt,Zt,Wt)}function Xn(Pt,Zt,Wt,gn){function pn(){return!0}Pt.batchId="a1",un(Pt,Zt),wn(Pt,Zt,Wt,gn.attributes,pn),On(Pt,Zt,Wt,gn.uniforms,pn,!1),Tn(Pt,Zt,Zt,Wt)}function cr(Pt,Zt,Wt,gn){function pn(_n){return _n.contextDep&&vn||_n.propDep}function kn(_n){return!pn(_n)}un(Pt,Zt);var vn=Wt.contextDep,cn=Zt.def(),qt=Zt.def();Pt.shared.props=qt,Pt.batchId=cn;var Nt=Pt.scope(),tn=Pt.scope();Zt(Nt.entry,"for(",cn,"=0;",cn,"<","a1",";++",cn,"){",qt,"=","a0","[",cn,"];",tn,"}",Nt.exit),Wt.needsContext&&ln(Pt,tn,Wt.context),Wt.needsFramebuffer&&Kt(Pt,tn,Wt.framebuffer),en(Pt,tn,Wt.state,pn),Wt.profile&&pn(Wt.profile)&&An(Pt,tn,Wt,!1,!0),gn?(Wt.useVAO?Wt.drawVAO?pn(Wt.drawVAO)?tn(Pt.shared.vao,".setVAO(",Wt.drawVAO.append(Pt,tn),");"):Nt(Pt.shared.vao,".setVAO(",Wt.drawVAO.append(Pt,Nt),");"):Nt(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(Nt(Pt.shared.vao,".setVAO(null);"),wn(Pt,Nt,Wt,gn.attributes,kn),wn(Pt,tn,Wt,gn.attributes,pn)),On(Pt,Nt,Wt,gn.uniforms,kn,!1),On(Pt,tn,Wt,gn.uniforms,pn,!0),Tn(Pt,Nt,tn,Wt)):(Zt=Pt.global.def("{}"),gn=Wt.shader.progVar.append(Pt,tn),qt=tn.def(gn,".id"),Nt=tn.def(Zt,"[",qt,"]"),tn(Pt.shared.gl,".useProgram(",gn,".program);","if(!",Nt,"){",Nt,"=",Zt,"[",qt,"]=",Pt.link(function(_n){return Cn(Xn,Pt,Wt,_n,2)}),"(",gn,");}",Nt,".call(this,a0[",cn,"],",cn,");"))}function Yn(Pt,Zt){function Wt(cn){var qt=Zt.shader[cn];qt&&(qt=qt.append(Pt,gn),isNaN(qt)?gn.set(pn.shader,"."+cn,qt):gn.set(pn.shader,"."+cn,Pt.link(qt,{stable:!0})))}var gn=Pt.proc("scope",3);Pt.batchId="a2";var pn=Pt.shared,kn=pn.current;if(ln(Pt,gn,Zt.context),Zt.framebuffer&&Zt.framebuffer.append(Pt,gn),V(Object.keys(Zt.state)).forEach(function(cn){var qt=Zt.state[cn],Nt=qt.append(Pt,gn);m(Nt)?Nt.forEach(function(tn,_n){isNaN(tn)?gn.set(Pt.next[cn],"["+_n+"]",tn):gn.set(Pt.next[cn],"["+_n+"]",Pt.link(tn,{stable:!0}))}):ne(qt)?gn.set(pn.next,"."+cn,Pt.link(Nt,{stable:!0})):gn.set(pn.next,"."+cn,Nt)}),An(Pt,gn,Zt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(cn){var qt=Zt.draw[cn];qt&&(qt=qt.append(Pt,gn),isNaN(qt)?gn.set(pn.draw,"."+cn,qt):gn.set(pn.draw,"."+cn,Pt.link(qt),{stable:!0}))}),Object.keys(Zt.uniforms).forEach(function(cn){var qt=Zt.uniforms[cn].append(Pt,gn);Array.isArray(qt)&&(qt="["+qt.map(function(Nt){return isNaN(Nt)?Nt:Pt.link(Nt,{stable:!0})})+"]"),gn.set(pn.uniforms,"["+Pt.link(Xe.id(cn),{stable:!0})+"]",qt)}),Object.keys(Zt.attributes).forEach(function(cn){var qt=Zt.attributes[cn].append(Pt,gn),Nt=Pt.scopeAttrib(cn);Object.keys(new Kn).forEach(function(tn){gn.set(Nt,"."+tn,qt[tn])})}),Zt.scopeVAO){var vn=Zt.scopeVAO.append(Pt,gn);isNaN(vn)?gn.set(pn.vao,".targetVAO",vn):gn.set(pn.vao,".targetVAO",Pt.link(vn,{stable:!0}))}Wt("vert"),Wt("frag"),0<Object.keys(Zt.state).length&&(gn(kn,".dirty=true;"),gn.exit(kn,".dirty=true;")),gn("a1(",Pt.shared.context,",a0,",Pt.batchId,");")}function jn(Pt,Zt,Wt){var gn=Zt.static[Wt];if(gn&&function(tn){if(typeof tn=="object"&&!m(tn)){for(var _n=Object.keys(tn),Fn=0;Fn<_n.length;++Fn)if(oe.isDynamic(tn[_n[Fn]]))return!0;return!1}}(gn)){var pn=Pt.global,kn=Object.keys(gn),vn=!1,cn=!1,qt=!1,Nt=Pt.global.def("{}");kn.forEach(function(tn){var _n=gn[tn];if(oe.isDynamic(_n))typeof _n=="function"&&(_n=gn[tn]=oe.unbox(_n)),tn=K(_n,null),vn=vn||tn.thisDep,qt=qt||tn.propDep,cn=cn||tn.contextDep;else{switch(pn(Nt,".",tn,"="),typeof _n){case"number":pn(_n);break;case"string":pn('"',_n,'"');break;case"object":Array.isArray(_n)&&pn("[",_n.join(),"]");break;default:pn(Pt.link(_n))}pn(";")}}),Zt.dynamic[Wt]=new oe.DynamicVariable(4,{thisDep:vn,contextDep:cn,propDep:qt,ref:Nt,append:function(tn,_n){kn.forEach(function(Fn){var zn=gn[Fn];oe.isDynamic(zn)&&(zn=tn.invoke(_n,zn),_n(Nt,".",Fn,"=",zn,";"))})}}),delete Zt.static[Wt]}}var Kn=ht.Record,or={add:32774,subtract:32778,"reverse subtract":32779};st.ext_blend_minmax&&(or.min=32775,or.max=32776);var Qt=st.angle_instanced_arrays,an=st.webgl_draw_buffers,Dn=st.oes_vertex_array_object,yn={dirty:!0,profile:wt.profile},Ln={},Vn=[],Un={},er={};Ft("dither",3024),Ft("blend.enable",3042),jt("blend.color","blendColor",[0,0,0,0]),jt("blend.equation","blendEquationSeparate",[32774,32774]),jt("blend.func","blendFuncSeparate",[1,0,1,0]),Ft("depth.enable",2929,!0),jt("depth.func","depthFunc",513),jt("depth.range","depthRange",[0,1]),jt("depth.mask","depthMask",!0),jt("colorMask","colorMask",[!0,!0,!0,!0]),Ft("cull.enable",2884),jt("cull.face","cullFace",1029),jt("frontFace","frontFace",2305),jt("lineWidth","lineWidth",1),Ft("polygonOffset.enable",32823),jt("polygonOffset.offset","polygonOffset",[0,0]),Ft("sample.alpha",32926),Ft("sample.enable",32928),jt("sample.coverage","sampleCoverage",[1,!1]),Ft("stencil.enable",2960),jt("stencil.mask","stencilMask",-1),jt("stencil.func","stencilFunc",[519,0,-1]),jt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),jt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Ft("scissor.enable",3089),jt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),jt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var fr={gl:Ne,context:kt,strings:Xe,next:Ln,current:yn,draw:it,elements:bt,buffer:xt,shader:dt,attributes:ht.state,vao:ht,uniforms:at,framebuffer:Be,extensions:st,timer:Tt,isBufferArgs:B},Xt={primTypes:Se,compareFuncs:pt,blendFuncs:zt,blendEquations:or,stencilOps:vt,glTypes:Ce,orientationType:We};an&&(Xt.backBuffer=[1029],Xt.drawBuffer=b(lt.maxDrawbuffers,function(Pt){return Pt===0?[0]:b(Pt,function(Zt){return 36064+Zt})}));var mn=0;return{next:Ln,current:yn,procs:function(){var Pt=rn(),Zt=Pt.proc("poll"),Wt=Pt.proc("refresh"),gn=Pt.block();Zt(gn),Wt(gn);var pn,kn=(qt=Pt.shared).gl,vn=qt.next,cn=qt.current;gn(cn,".dirty=false;"),Kt(Pt,Zt),Kt(Pt,Wt,null,!0),Qt&&(pn=Pt.link(Qt)),st.oes_vertex_array_object&&Wt(Pt.link(st.oes_vertex_array_object),".bindVertexArrayOES(null);");var qt=Wt.def(qt.attributes),Nt=Wt.def(0),tn=Pt.cond(Nt,".buffer");tn.then(kn,".enableVertexAttribArray(i);",kn,".bindBuffer(",34962,",",Nt,".buffer.buffer);",kn,".vertexAttribPointer(i,",Nt,".size,",Nt,".type,",Nt,".normalized,",Nt,".stride,",Nt,".offset);").else(kn,".disableVertexAttribArray(i);",kn,".vertexAttrib4f(i,",Nt,".x,",Nt,".y,",Nt,".z,",Nt,".w);",Nt,".buffer=null;");var _n=Pt.link(lt.maxAttributes,{stable:!0});return Wt("for(var i=0;i<",_n,";++i){",Nt,"=",qt,"[i];",tn,"}"),Qt&&Wt("for(var i=0;i<",_n,";++i){",pn,".vertexAttribDivisorANGLE(i,",qt,"[i].divisor);","}"),Wt(Pt.shared.vao,".currentVAO=null;",Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"),Object.keys(Un).forEach(function(Fn){var zn=Un[Fn],Pn=gn.def(vn,".",Fn),$n=Pt.block();$n("if(",Pn,"){",kn,".enable(",zn,")}else{",kn,".disable(",zn,")}",cn,".",Fn,"=",Pn,";"),Wt($n),Zt("if(",Pn,"!==",cn,".",Fn,"){",$n,"}")}),Object.keys(er).forEach(function(Fn){var zn,Pn,$n=er[Fn],Wn=yn[Fn],tr=Pt.block();tr(kn,".",$n,"("),m(Wn)?($n=Wn.length,zn=Pt.global.def(vn,".",Fn),Pn=Pt.global.def(cn,".",Fn),tr(b($n,function(qn){return zn+"["+qn+"]"}),");",b($n,function(qn){return Pn+"["+qn+"]="+zn+"["+qn+"];"}).join("")),Zt("if(",b($n,function(qn){return zn+"["+qn+"]!=="+Pn+"["+qn+"]"}).join("||"),"){",tr,"}")):(zn=gn.def(vn,".",Fn),Pn=gn.def(cn,".",Fn),tr(zn,");",cn,".",Fn,"=",zn,";"),Zt("if(",zn,"!==",Pn,"){",tr,"}")),Wt(tr)}),Pt.compile()}(),compile:function(Pt,Zt,Wt,gn,pn){var kn=rn();kn.stats=kn.link(pn),Object.keys(Zt.static).forEach(function(cn){jn(kn,Zt,cn)}),Dt.forEach(function(cn){jn(kn,Pt,cn)});var vn=bn(Pt,Zt,Wt,gn);return vn.shader.program&&(vn.shader.program.attributes.sort(function(cn,qt){return cn.name<qt.name?-1:1}),vn.shader.program.uniforms.sort(function(cn,qt){return cn.name<qt.name?-1:1})),function(cn,qt){var Nt=cn.proc("draw",1);un(cn,Nt),ln(cn,Nt,qt.context),Kt(cn,Nt,qt.framebuffer),fn(cn,Nt,qt),en(cn,Nt,qt.state),An(cn,Nt,qt,!1,!0);var tn=qt.shader.progVar.append(cn,Nt);if(Nt(cn.shared.gl,".useProgram(",tn,".program);"),qt.shader.program)Bn(cn,Nt,qt,qt.shader.program);else{Nt(cn.shared.vao,".setVAO(null);");var _n=cn.global.def("{}"),Fn=Nt.def(tn,".id"),zn=Nt.def(_n,"[",Fn,"]");Nt(cn.cond(zn).then(zn,".call(this,a0);").else(zn,"=",_n,"[",Fn,"]=",cn.link(function(Pn){return Cn(Bn,cn,qt,Pn,1)}),"(",tn,");",zn,".call(this,a0);"))}0<Object.keys(qt.state).length&&Nt(cn.shared.current,".dirty=true;"),cn.shared.vao&&Nt(cn.shared.vao,".setVAO(null);")}(kn,vn),Yn(kn,vn),function(cn,qt){function Nt(Wn){return Wn.contextDep&&_n||Wn.propDep}var tn=cn.proc("batch",2);cn.batchId="0",un(cn,tn);var _n=!1,Fn=!0;Object.keys(qt.context).forEach(function(Wn){_n=_n||qt.context[Wn].propDep}),_n||(ln(cn,tn,qt.context),Fn=!1);var zn=!1;if((Pn=qt.framebuffer)?(Pn.propDep?_n=zn=!0:Pn.contextDep&&_n&&(zn=!0),zn||Kt(cn,tn,Pn)):Kt(cn,tn,null),qt.state.viewport&&qt.state.viewport.propDep&&(_n=!0),fn(cn,tn,qt),en(cn,tn,qt.state,function(Wn){return!Nt(Wn)}),qt.profile&&Nt(qt.profile)||An(cn,tn,qt,!1,"a1"),qt.contextDep=_n,qt.needsContext=Fn,qt.needsFramebuffer=zn,(Fn=qt.shader.progVar).contextDep&&_n||Fn.propDep)cr(cn,tn,qt,null);else if(Fn=Fn.append(cn,tn),tn(cn.shared.gl,".useProgram(",Fn,".program);"),qt.shader.program)cr(cn,tn,qt,qt.shader.program);else{tn(cn.shared.vao,".setVAO(null);");var Pn=cn.global.def("{}"),$n=(zn=tn.def(Fn,".id"),tn.def(Pn,"[",zn,"]"));tn(cn.cond($n).then($n,".call(this,a0,a1);").else($n,"=",Pn,"[",zn,"]=",cn.link(function(Wn){return Cn(cr,cn,qt,Wn,2)}),"(",Fn,");",$n,".call(this,a0,a1);"))}0<Object.keys(qt.state).length&&tn(cn.shared.current,".dirty=true;"),cn.shared.vao&&tn(cn.shared.vao,".setVAO(null);")}(kn,vn),Z(kn.compile(),{destroy:function(){vn.shader.program.destroy()}})}}}function J(Ne,Xe){for(var st=0;st<Ne.length;++st)if(Ne[st]===Xe)return st;return-1}var Z=function(Ne,Xe){for(var st=Object.keys(Xe),lt=0;lt<st.length;++lt)Ne[st[lt]]=Xe[st[lt]];return Ne},te=0,oe={DynamicVariable:C,define:function(Ne,Xe){return new C(Ne,_(Xe+""))},isDynamic:function(Ne){return typeof Ne=="function"&&!Ne._reglType||Ne instanceof C},unbox:function Ne(Xe,st){return typeof Xe=="function"?new C(0,Xe):typeof Xe=="number"||typeof Xe=="boolean"?new C(5,Xe):Array.isArray(Xe)?new C(6,Xe.map(function(lt,xt){return Ne(lt,st+"["+xt+"]")})):Xe instanceof C?Xe:void 0},accessor:_},se={next:typeof requestAnimationFrame=="function"?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ye=o();ye.zero=o();var me=function(Ne,Xe){var st=1;Xe.ext_texture_filter_anisotropic&&(st=Ne.getParameter(34047));var lt=1,xt=1;Xe.webgl_draw_buffers&&(lt=Ne.getParameter(34852),xt=Ne.getParameter(36063));var bt=!!Xe.oes_texture_float;if(bt){bt=Ne.createTexture(),Ne.bindTexture(3553,bt),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Ve=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,Ve),Ne.framebufferTexture2D(36160,36064,3553,bt,0),Ne.bindTexture(3553,null),Ne.checkFramebufferStatus(36160)!==36053)bt=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var Be=ye.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,Be),Ne.getError()?bt=!1:(Ne.deleteFramebuffer(Ve),Ne.deleteTexture(bt),bt=Be[0]===1),ye.freeType(Be)}}return Be=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Be=Ne.createTexture(),Ve=ye.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,Be),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,Ve),ye.freeType(Ve),Ne.bindTexture(34067,null),Ne.deleteTexture(Be),Be=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(Xe).filter(function(at){return!!Xe[at]}),maxAnisotropic:st,maxDrawbuffers:lt,maxColorAttachments:xt,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:bt,npotTextureCube:Be}},fe=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},pe=function(Ne){return Object.keys(Ne).map(function(Xe){return Ne[Xe]})},ge={shape:function(Ne){for(var Xe=[];Ne.length;Ne=Ne[0])Xe.push(Ne.length);return Xe},flatten:function(Ne,Xe,st,lt){var xt=1;if(Xe.length)for(var bt=0;bt<Xe.length;++bt)xt*=Xe[bt];else xt=0;switch(st=lt||ye.allocType(st,xt),Xe.length){case 0:break;case 1:for(lt=Xe[0],Xe=0;Xe<lt;++Xe)st[Xe]=Ne[Xe];break;case 2:for(lt=Xe[0],Xe=Xe[1],bt=xt=0;bt<lt;++bt)for(var Ve=Ne[bt],Be=0;Be<Xe;++Be)st[xt++]=Ve[Be];break;case 3:i(Ne,Xe[0],Xe[1],Xe[2],st,0);break;default:n(Ne,Xe,0,st,0)}return st}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},de={dynamic:35048,stream:35040,static:35044},ae=ge.flatten,re=ge.shape,he=[];he[5120]=1,he[5122]=2,he[5124]=4,he[5121]=1,he[5123]=2,he[5125]=4,he[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},xe=new Float32Array(1),Te=new Uint32Array(xe.buffer),Ae=[9984,9986,9985,9987],Pe=[0,6409,6410,6407,6408],De={};De[6409]=De[6406]=De[6402]=1,De[34041]=De[6410]=2,De[6407]=De[35904]=3,De[6408]=De[35906]=4;var ve=h("HTMLCanvasElement"),we=h("OffscreenCanvas"),Ee=h("CanvasRenderingContext2D"),Fe=h("ImageBitmap"),Le=h("HTMLImageElement"),je=h("HTMLVideoElement"),Ge=Object.keys(ke).concat([ve,we,Ee,Fe,Le,je]),Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2,Je[5123]=2,Je[5125]=4;var rt=[];rt[32854]=2,rt[32855]=2,rt[36194]=2,rt[34041]=4,rt[33776]=.5,rt[33777]=.5,rt[33778]=1,rt[33779]=1,rt[35986]=.5,rt[35987]=1,rt[34798]=1,rt[35840]=.5,rt[35841]=.25,rt[35842]=.5,rt[35843]=.25,rt[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var yt=function(Ne,Xe,st,lt,xt){function bt(it){this.id=ht++,this.refCount=1,this.renderbuffer=it,this.format=32854,this.height=this.width=0,xt.profile&&(this.stats={size:0})}function Ve(it){var kt=it.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(kt),it.renderbuffer=null,it.refCount=0,delete dt[it.id],lt.renderbufferCount--}var Be={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Xe.ext_srgb&&(Be.srgba=35907),Xe.ext_color_buffer_half_float&&(Be.rgba16f=34842,Be.rgb16f=34843),Xe.webgl_color_buffer_float&&(Be.rgba32f=34836);var at=[];Object.keys(Be).forEach(function(it){at[Be[it]]=it});var ht=0,dt={};return bt.prototype.decRef=function(){0>=--this.refCount&&Ve(this)},xt.profile&&(lt.getTotalRenderbufferSize=function(){var it=0;return Object.keys(dt).forEach(function(kt){it+=dt[kt].stats.size}),it}),{create:function(it,kt){function Tt(wt,At){var Ft=0,jt=0,rn=32854;if(typeof wt=="object"&&wt?("shape"in wt?(Ft=0|(jt=wt.shape)[0],jt=0|jt[1]):("radius"in wt&&(Ft=jt=0|wt.radius),"width"in wt&&(Ft=0|wt.width),"height"in wt&&(jt=0|wt.height)),"format"in wt&&(rn=Be[wt.format])):typeof wt=="number"?(Ft=0|wt,jt=typeof At=="number"?0|At:Ft):wt||(Ft=jt=1),Ft!==St.width||jt!==St.height||rn!==St.format)return Tt.width=St.width=Ft,Tt.height=St.height=jt,St.format=rn,Ne.bindRenderbuffer(36161,St.renderbuffer),Ne.renderbufferStorage(36161,rn,Ft,jt),xt.profile&&(St.stats.size=ot[St.format]*St.width*St.height),Tt.format=at[St.format],Tt}var St=new bt(Ne.createRenderbuffer());return dt[St.id]=St,lt.renderbufferCount++,Tt(it,kt),Tt.resize=function(wt,At){var Ft=0|wt,jt=0|At||Ft;return Ft===St.width&&jt===St.height||(Tt.width=St.width=Ft,Tt.height=St.height=jt,Ne.bindRenderbuffer(36161,St.renderbuffer),Ne.renderbufferStorage(36161,St.format,Ft,jt),xt.profile&&(St.stats.size=ot[St.format]*St.width*St.height)),Tt},Tt._reglType="renderbuffer",Tt._renderbuffer=St,xt.profile&&(Tt.stats=St.stats),Tt.destroy=function(){St.decRef()},Tt},clear:function(){pe(dt).forEach(Ve)},restore:function(){pe(dt).forEach(function(it){it.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,it.renderbuffer),Ne.renderbufferStorage(36161,it.format,it.width,it.height)}),Ne.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var mt=[];mt[5121]=1,mt[5126]=4,mt[36193]=2;var tt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Qe=["x","y","z","w"],Dt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),zt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},vt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},We={cw:2304,ccw:2305},Ze=new q(!1,!1,!1,function(){});return function(Ne){function Xe(){if(Xn.length===0)nn&&nn.update(),Kn=null;else{Kn=se.next(Xe),dt();for(var Qt=Xn.length-1;0<=Qt;--Qt){var an=Xn[Qt];an&&an(bn,null,0)}Tt.flush(),nn&&nn.update()}}function st(){!Kn&&0<Xn.length&&(Kn=se.next(Xe))}function lt(){Kn&&(se.cancel(Xe),Kn=null)}function xt(Qt){Qt.preventDefault(),lt(),cr.forEach(function(an){an()})}function bt(Qt){Tt.getError(),wt.restore(),un.restore(),Kt.restore(),An.restore(),wn.restore(),On.restore(),en.restore(),nn&&nn.restore(),Tn.procs.refresh(),st(),Yn.forEach(function(an){an()})}function Ve(Qt){function an(Pt,Zt){var Wt={},gn={};return Object.keys(Pt).forEach(function(pn){var kn=Pt[pn];if(oe.isDynamic(kn))gn[pn]=oe.unbox(kn,pn);else{if(Zt&&Array.isArray(kn)){for(var vn=0;vn<kn.length;++vn)if(oe.isDynamic(kn[vn]))return void(gn[pn]=oe.unbox(kn,pn))}Wt[pn]=kn}}),{dynamic:gn,static:Wt}}var Dn=an(Qt.context||{},!0),yn=an(Qt.uniforms||{},!0),Ln=an(Qt.attributes||{},!1);Qt=an(function(Pt){function Zt(gn){if(gn in Wt){var pn=Wt[gn];delete Wt[gn],Object.keys(pn).forEach(function(kn){Wt[gn+"."+kn]=pn[kn]})}}var Wt=Z({},Pt);return delete Wt.uniforms,delete Wt.attributes,delete Wt.context,delete Wt.vao,"stencil"in Wt&&Wt.stencil.op&&(Wt.stencil.opBack=Wt.stencil.opFront=Wt.stencil.op,delete Wt.stencil.op),Zt("blend"),Zt("depth"),Zt("cull"),Zt("stencil"),Zt("polygonOffset"),Zt("scissor"),Zt("sample"),"vao"in Pt&&(Wt.vao=Pt.vao),Wt}(Qt),!1);var Vn={gpuTime:0,cpuTime:0,count:0},Un=Tn.compile(Qt,Ln,yn,Dn,Vn),er=Un.draw,fr=Un.batch,Xt=Un.scope,mn=[];return Z(function(Pt,Zt){var Wt;if(typeof Pt=="function")return Xt.call(this,null,Pt,0);if(typeof Zt=="function")if(typeof Pt=="number")for(Wt=0;Wt<Pt;++Wt)Xt.call(this,null,Zt,Wt);else{if(!Array.isArray(Pt))return Xt.call(this,Pt,Zt,0);for(Wt=0;Wt<Pt.length;++Wt)Xt.call(this,Pt[Wt],Zt,Wt)}else if(typeof Pt=="number"){if(0<Pt)return fr.call(this,function(gn){for(;mn.length<gn;)mn.push(null);return mn}(0|Pt),0|Pt)}else{if(!Array.isArray(Pt))return er.call(this,Pt);if(Pt.length)return fr.call(this,Pt,Pt.length)}},{stats:Vn,destroy:function(){Un.destroy()}})}function Be(Qt,an){var Dn=0;Tn.procs.poll();var yn=an.color;yn&&(Tt.clearColor(+yn[0]||0,+yn[1]||0,+yn[2]||0,+yn[3]||0),Dn|=16384),"depth"in an&&(Tt.clearDepth(+an.depth),Dn|=256),"stencil"in an&&(Tt.clearStencil(0|an.stencil),Dn|=1024),Tt.clear(Dn)}function at(Qt){return Xn.push(Qt),st(),{cancel:function(){var an=J(Xn,Qt);Xn[an]=function Dn(){var yn=J(Xn,Dn);Xn[yn]=Xn[Xn.length-1],--Xn.length,0>=Xn.length&&lt()}}}}function ht(){var Qt=Cn.viewport,an=Cn.scissor_box;Qt[0]=Qt[1]=an[0]=an[1]=0,bn.viewportWidth=bn.framebufferWidth=bn.drawingBufferWidth=Qt[2]=an[2]=Tt.drawingBufferWidth,bn.viewportHeight=bn.framebufferHeight=bn.drawingBufferHeight=Qt[3]=an[3]=Tt.drawingBufferHeight}function dt(){bn.tick+=1,bn.time=kt(),ht(),Tn.procs.poll()}function it(){An.refresh(),ht(),Tn.procs.refresh(),nn&&nn.update()}function kt(){return(ce()-on)/1e3}if(!(Ne=w(Ne)))return null;var Tt=Ne.gl,St=Tt.getContextAttributes();Tt.isContextLost();var wt=function(Qt,an){function Dn(Un){var er;Un=Un.toLowerCase();try{er=yn[Un]=Qt.getExtension(Un)}catch{}return!!er}for(var yn={},Ln=0;Ln<an.extensions.length;++Ln){var Vn=an.extensions[Ln];if(!Dn(Vn))return an.onDestroy(),an.onDone('"'+Vn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return an.optionalExtensions.forEach(Dn),{extensions:yn,restore:function(){Object.keys(yn).forEach(function(Un){if(yn[Un]&&!Dn(Un))throw Error("(regl): error restoring extension "+Un)})}}}(Tt,Ne);if(!wt)return null;var At=function(){var Qt={"":0},an=[""];return{id:function(Dn){var yn=Qt[Dn];return yn||(yn=Qt[Dn]=an.length,an.push(Dn),yn)},str:function(Dn){return an[Dn]}}}(),Ft={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},jt=Ne.cachedCode||{},rn=wt.extensions,nn=function(Qt,an){function Dn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function yn(mn,Pt,Zt){var Wt=Un.pop()||new Dn;Wt.startQueryIndex=mn,Wt.endQueryIndex=Pt,Wt.sum=0,Wt.stats=Zt,er.push(Wt)}if(!an.ext_disjoint_timer_query)return null;var Ln=[],Vn=[],Un=[],er=[],fr=[],Xt=[];return{beginQuery:function(mn){var Pt=Ln.pop()||an.ext_disjoint_timer_query.createQueryEXT();an.ext_disjoint_timer_query.beginQueryEXT(35007,Pt),Vn.push(Pt),yn(Vn.length-1,Vn.length,mn)},endQuery:function(){an.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:yn,update:function(){var mn,Pt;if((mn=Vn.length)!==0){Xt.length=Math.max(Xt.length,mn+1),fr.length=Math.max(fr.length,mn+1),fr[0]=0;var Zt=Xt[0]=0;for(Pt=mn=0;Pt<Vn.length;++Pt){var Wt=Vn[Pt];an.ext_disjoint_timer_query.getQueryObjectEXT(Wt,34919)?(Zt+=an.ext_disjoint_timer_query.getQueryObjectEXT(Wt,34918),Ln.push(Wt)):Vn[mn++]=Wt,fr[Pt+1]=Zt,Xt[Pt+1]=mn}for(Vn.length=mn,Pt=mn=0;Pt<er.length;++Pt){var gn=(Zt=er[Pt]).startQueryIndex;Wt=Zt.endQueryIndex,Zt.sum+=fr[Wt]-fr[gn],gn=Xt[gn],(Wt=Xt[Wt])===gn?(Zt.stats.gpuTime+=Zt.sum/1e6,Un.push(Zt)):(Zt.startQueryIndex=gn,Zt.endQueryIndex=Wt,er[mn++]=Zt)}er.length=mn}},getNumPendingQueries:function(){return Vn.length},clear:function(){Ln.push.apply(Ln,Vn);for(var mn=0;mn<Ln.length;mn++)an.ext_disjoint_timer_query.deleteQueryEXT(Ln[mn]);Vn.length=0,Ln.length=0},restore:function(){Vn.length=0,Ln.length=0}}}(0,rn),on=ce(),Ht=Tt.drawingBufferWidth,$t=Tt.drawingBufferHeight,bn={tick:0,time:0,viewportWidth:Ht,viewportHeight:$t,framebufferWidth:Ht,framebufferHeight:$t,drawingBufferWidth:Ht,drawingBufferHeight:$t,pixelRatio:Ne.pixelRatio},ln=(Ht={elements:null,primitive:4,count:-1,offset:0,instances:-1},me(Tt,rn)),Kt=u(Tt,Ft,Ne,function(Qt){return en.destroyBuffer(Qt)}),fn=p(Tt,rn,Kt,Ft),en=L(Tt,rn,ln,Ft,Kt,fn,Ht),un=O(Tt,At,Ft,Ne),An=S(Tt,rn,ln,function(){Tn.procs.poll()},bn,Ft,Ne),wn=yt(Tt,rn,0,Ft,Ne),On=k(Tt,rn,ln,An,wn,Ft),Tn=ee(Tt,At,rn,ln,Kt,fn,0,On,{},en,un,Ht,bn,nn,jt,Ne),Cn=(At=P(Tt,On,Tn.procs.poll,bn),Tn.next),Bn=Tt.canvas,Xn=[],cr=[],Yn=[],jn=[Ne.onDestroy],Kn=null;Bn&&(Bn.addEventListener("webglcontextlost",xt,!1),Bn.addEventListener("webglcontextrestored",bt,!1));var or=On.setFBO=Ve({framebuffer:oe.define.call(null,1,"framebuffer")});return it(),St=Z(Ve,{clear:function(Qt){if("framebuffer"in Qt)if(Qt.framebuffer&&Qt.framebuffer_reglType==="framebufferCube")for(var an=0;6>an;++an)or(Z({framebuffer:Qt.framebuffer.faces[an]},Qt),Be);else or(Qt,Be);else Be(0,Qt)},prop:oe.define.bind(null,1),context:oe.define.bind(null,2),this:oe.define.bind(null,3),draw:Ve({}),buffer:function(Qt){return Kt.create(Qt,34962,!1,!1)},elements:function(Qt){return fn.create(Qt,!1)},texture:An.create2D,cube:An.createCube,renderbuffer:wn.create,framebuffer:On.create,framebufferCube:On.createCube,vao:en.createVAO,attributes:St,frame:at,on:function(Qt,an){var Dn;switch(Qt){case"frame":return at(an);case"lost":Dn=cr;break;case"restore":Dn=Yn;break;case"destroy":Dn=jn}return Dn.push(an),{cancel:function(){for(var yn=0;yn<Dn.length;++yn)if(Dn[yn]===an){Dn[yn]=Dn[Dn.length-1],Dn.pop();break}}}},limits:ln,hasExtension:function(Qt){return 0<=ln.extensions.indexOf(Qt.toLowerCase())},read:At,destroy:function(){Xn.length=0,lt(),Bn&&(Bn.removeEventListener("webglcontextlost",xt),Bn.removeEventListener("webglcontextrestored",bt)),un.clear(),On.clear(),wn.clear(),en.clear(),An.clear(),fn.clear(),Kt.clear(),nn&&nn.clear(),jn.forEach(function(Qt){Qt()})},_gl:Tt,_refresh:it,poll:function(){dt(),nn&&nn.update()},now:kt,stats:Ft,getCachedCode:function(){return jt},preloadCachedCode:function(Qt){Object.entries(Qt).forEach(function(an){jt[an[0]]=an[1]})}}),Ne.onDone(null,St),St}}()},30456:function(R,C,e){var _=e(33576),T=_.Buffer;function r(b,c){for(var o in b)c[o]=b[o]}function w(b,c,o){return T(b,c,o)}T.from&&T.alloc&&T.allocUnsafe&&T.allocUnsafeSlow?R.exports=_:(r(_,C),C.Buffer=w),w.prototype=Object.create(T.prototype),r(T,w),w.from=function(b,c,o){if(typeof b=="number")throw new TypeError("Argument must not be a number");return T(b,c,o)},w.alloc=function(b,c,o){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=T(b);return c!==void 0?typeof o=="string"?t.fill(c,o):t.fill(c):t.fill(0),t},w.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return T(b)},w.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(b)}},14500:function(R,C,e){"use strict";var _=e(53664),T=e(64348),r=e(39640)(),w=e(2304),b=_("%TypeError%"),c=_("%Math.floor%");R.exports=function(o,t){if(typeof o!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||c(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,a=!0;if("length"in o&&w){var s=w(o,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(a=!1)}return(n||a||!i)&&(r?T(o,"length",t,!0,!0):T(o,"length",t)),o}},29936:function(R,C,e){R.exports=T;var _=e(61252).EventEmitter;function T(){_.call(this)}e(6768)(T,_),T.Readable=e(12348),T.Writable=e(11288),T.Duplex=e(15316),T.Transform=e(22477),T.PassThrough=e(27136),T.finished=e(15932),T.pipeline=e(38180),T.Stream=T,T.prototype.pipe=function(r,w){var b=this;function c(l){r.writable&&r.write(l)===!1&&b.pause&&b.pause()}function o(){b.readable&&b.resume&&b.resume()}b.on("data",c),r.on("drain",o),r._isStdio||w&&w.end===!1||(b.on("end",i),b.on("close",n));var t=!1;function i(){t||(t=!0,r.end())}function n(){t||(t=!0,typeof r.destroy=="function"&&r.destroy())}function a(l){if(s(),_.listenerCount(this,"error")===0)throw l}function s(){b.removeListener("data",c),r.removeListener("drain",o),b.removeListener("end",i),b.removeListener("close",n),b.removeListener("error",a),r.removeListener("error",a),b.removeListener("end",s),b.removeListener("close",s),r.removeListener("close",s)}return b.on("error",a),r.on("error",a),b.on("end",s),b.on("close",s),r.on("close",s),r.emit("pipe",b),r}},92784:function(R){"use strict";var C={};function e(T,r,w){w||(w=Error);var b=function(c){var o,t;function i(n,a,s){return c.call(this,function(l,u,p){return typeof r=="string"?r:r(l,u,p)}(n,a,s))||this}return t=c,(o=i).prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t,i}(w);b.prototype.name=w.name,b.prototype.code=T,C[T]=b}function _(T,r){if(Array.isArray(T)){var w=T.length;return T=T.map(function(b){return String(b)}),w>2?"one of ".concat(r," ").concat(T.slice(0,w-1).join(", "),", or ")+T[w-1]:w===2?"one of ".concat(r," ").concat(T[0]," or ").concat(T[1]):"of ".concat(r," ").concat(T[0])}return"of ".concat(r," ").concat(String(T))}e("ERR_INVALID_OPT_VALUE",function(T,r){return'The value "'+r+'" is invalid for option "'+T+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(T,r,w){var b,c,o,t,i;if(typeof r=="string"&&(c="not ",r.substr(0,4)===c)?(b="must not be",r=r.replace(/^not /,"")):b="must be",function(a,s,l){return(l===void 0||l>a.length)&&(l=a.length),a.substring(l-9,l)===s}(T," argument"))o="The ".concat(T," ").concat(b," ").concat(_(r,"type"));else{var n=(typeof i!="number"&&(i=0),i+1>(t=T).length||t.indexOf(".",i)===-1?"argument":"property");o='The "'.concat(T,'" ').concat(n," ").concat(b," ").concat(_(r,"type"))}return o+". Received type ".concat(typeof w)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),R.exports.i=C},15316:function(R,C,e){"use strict";var _=e(4168),T=Object.keys||function(a){var s=[];for(var l in a)s.push(l);return s};R.exports=t;var r=e(12348),w=e(11288);e(6768)(t,r);for(var b=T(w.prototype),c=0;c<b.length;c++){var o=b[c];t.prototype[o]||(t.prototype[o]=w.prototype[o])}function t(a){if(!(this instanceof t))return new t(a);r.call(this,a),w.call(this,a),this.allowHalfOpen=!0,a&&(a.readable===!1&&(this.readable=!1),a.writable===!1&&(this.writable=!1),a.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||_.nextTick(n,this)}function n(a){a.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})},27136:function(R,C,e){"use strict";R.exports=T;var _=e(22477);function T(r){if(!(this instanceof T))return new T(r);_.call(this,r)}e(6768)(T,_),T.prototype._transform=function(r,w,b){b(null,r)}},12348:function(R,C,e){"use strict";var _,T=e(4168);R.exports=A,A.ReadableState=y,e(61252).EventEmitter;var r,w=function($,K){return $.listeners(K).length},b=e(4776),c=e(33576).Buffer,o=e.g.Uint8Array||function(){},t=e(19768);r=t&&t.debuglog?t.debuglog("stream"):function(){};var i,n,a,s=e(47264),l=e(55324),u=e(24888).getHighWaterMark,p=e(92784).i,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_STREAM_PUSH_AFTER_EOF,h=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(A,b);var v=l.errorOrDestroy,x=["error","close","destroy","pause","resume"];function y($,K,ee){_=_||e(15316),$=$||{},typeof ee!="boolean"&&(ee=K instanceof _),this.objectMode=!!$.objectMode,ee&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=u(this,$,"readableHighWaterMark",ee),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(i||(i=e(86032).o),this.decoder=new i($.encoding),this.encoding=$.encoding)}function A($){if(_=_||e(15316),!(this instanceof A))return new A($);var K=this instanceof _;this._readableState=new y($,this,K),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),b.call(this)}function d($,K,ee,J,Z){r("readableAddChunk",K);var te,oe=$._readableState;if(K===null)oe.reading=!1,function(se,ce){if(r("onEofChunk"),!ce.ended){if(ce.decoder){var ye=ce.decoder.end();ye&&ye.length&&(ce.buffer.push(ye),ce.length+=ce.objectMode?1:ye.length)}ce.ended=!0,ce.sync?L(se):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,O(se)))}}($,oe);else if(Z||(te=function(se,ce){var ye,me;return me=ce,c.isBuffer(me)||me instanceof o||typeof ce=="string"||ce===void 0||se.objectMode||(ye=new f("chunk",["string","Buffer","Uint8Array"],ce)),ye}(oe,K)),te)v($,te);else if(oe.objectMode||K&&K.length>0)if(typeof K=="string"||oe.objectMode||Object.getPrototypeOf(K)===c.prototype||(K=function(se){return c.from(se)}(K)),J)oe.endEmitted?v($,new g):S($,oe,K,!0);else if(oe.ended)v($,new m);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!ee?(K=oe.decoder.write(K),oe.objectMode||K.length!==0?S($,oe,K,!1):P($,oe)):S($,oe,K,!1)}else J||(oe.reading=!1,P($,oe));return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function S($,K,ee,J){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,$.emit("data",ee)):(K.length+=K.objectMode?1:ee.length,J?K.buffer.unshift(ee):K.buffer.push(ee),K.needReadable&&L($)),P($,K)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function($){this._readableState&&(this._readableState.destroyed=$)}}),A.prototype.destroy=l.destroy,A.prototype._undestroy=l.undestroy,A.prototype._destroy=function($,K){K($)},A.prototype.push=function($,K){var ee,J=this._readableState;return J.objectMode?ee=!0:typeof $=="string"&&((K=K||J.defaultEncoding)!==J.encoding&&($=c.from($,K),K=""),ee=!0),d(this,$,K,!1,ee)},A.prototype.unshift=function($){return d(this,$,null,!0,!1)},A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function($){i||(i=e(86032).o);var K=new i($);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var ee=this._readableState.buffer.head,J="";ee!==null;)J+=K.write(ee.data),ee=ee.next;return this._readableState.buffer.clear(),J!==""&&this._readableState.buffer.push(J),this._readableState.length=J.length,this};var k=1073741824;function E($,K){return $<=0||K.length===0&&K.ended?0:K.objectMode?1:$!=$?K.flowing&&K.length?K.buffer.head.data.length:K.length:($>K.highWaterMark&&(K.highWaterMark=function(ee){return ee>=k?ee=k:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee}($)),$<=K.length?$:K.ended?K.length:(K.needReadable=!0,0))}function L($){var K=$._readableState;r("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(r("emitReadable",K.flowing),K.emittedReadable=!0,T.nextTick(O,$))}function O($){var K=$._readableState;r("emitReadable_",K.destroyed,K.length,K.ended),K.destroyed||!K.length&&!K.ended||($.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,W($)}function P($,K){K.readingMore||(K.readingMore=!0,T.nextTick(F,$,K))}function F($,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var ee=K.length;if(r("maybeReadMore read 0"),$.read(0),ee===K.length)break}K.readingMore=!1}function U($){var K=$._readableState;K.readableListening=$.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:$.listenerCount("data")>0&&$.resume()}function I($){r("readable nexttick read 0"),$.read(0)}function N($,K){r("resume",K.reading),K.reading||$.read(0),K.resumeScheduled=!1,$.emit("resume"),W($),K.flowing&&!K.reading&&$.read(0)}function W($){var K=$._readableState;for(r("flow",K.flowing);K.flowing&&$.read()!==null;);}function B($,K){return K.length===0?null:(K.objectMode?ee=K.buffer.shift():!$||$>=K.length?(ee=K.decoder?K.buffer.join(""):K.buffer.length===1?K.buffer.first():K.buffer.concat(K.length),K.buffer.clear()):ee=K.buffer.consume($,K.decoder),ee);var ee}function V($){var K=$._readableState;r("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,T.nextTick(q,K,$))}function q($,K){if(r("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,K.readable=!1,K.emit("end"),$.autoDestroy)){var ee=K._writableState;(!ee||ee.autoDestroy&&ee.finished)&&K.destroy()}}function ne($,K){for(var ee=0,J=$.length;ee<J;ee++)if($[ee]===K)return ee;return-1}A.prototype.read=function($){r("read",$),$=parseInt($,10);var K=this._readableState,ee=$;if($!==0&&(K.emittedReadable=!1),$===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return r("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?V(this):L(this),null;if(($=E($,K))===0&&K.ended)return K.length===0&&V(this),null;var J,Z=K.needReadable;return r("need readable",Z),(K.length===0||K.length-$<K.highWaterMark)&&r("length less than watermark",Z=!0),K.ended||K.reading?r("reading or ended",Z=!1):Z&&(r("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||($=E(ee,K))),(J=$>0?B($,K):null)===null?(K.needReadable=K.length<=K.highWaterMark,$=0):(K.length-=$,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),ee!==$&&K.ended&&V(this)),J!==null&&this.emit("data",J),J},A.prototype._read=function($){v(this,new h("_read()"))},A.prototype.pipe=function($,K){var ee=this,J=this._readableState;switch(J.pipesCount){case 0:J.pipes=$;break;case 1:J.pipes=[J.pipes,$];break;default:J.pipes.push($)}J.pipesCount+=1,r("pipe count=%d opts=%j",J.pipesCount,K);var Z=K&&K.end===!1||$===T.stdout||$===T.stderr?pe:te;function te(){r("onend"),$.end()}J.endEmitted?T.nextTick(Z):ee.once("end",Z),$.on("unpipe",function ge(ke,Ce){r("onunpipe"),ke===ee&&Ce&&Ce.hasUnpiped===!1&&(Ce.hasUnpiped=!0,r("cleanup"),$.removeListener("close",me),$.removeListener("finish",fe),$.removeListener("drain",oe),$.removeListener("error",ye),$.removeListener("unpipe",ge),ee.removeListener("end",te),ee.removeListener("end",pe),ee.removeListener("data",ce),se=!0,!J.awaitDrain||$._writableState&&!$._writableState.needDrain||oe())});var oe=function(ge){return function(){var ke=ge._readableState;r("pipeOnDrain",ke.awaitDrain),ke.awaitDrain&&ke.awaitDrain--,ke.awaitDrain===0&&w(ge,"data")&&(ke.flowing=!0,W(ge))}}(ee);$.on("drain",oe);var se=!1;function ce(ge){r("ondata");var ke=$.write(ge);r("dest.write",ke),ke===!1&&((J.pipesCount===1&&J.pipes===$||J.pipesCount>1&&ne(J.pipes,$)!==-1)&&!se&&(r("false write response, pause",J.awaitDrain),J.awaitDrain++),ee.pause())}function ye(ge){r("onerror",ge),pe(),$.removeListener("error",ye),w($,"error")===0&&v($,ge)}function me(){$.removeListener("finish",fe),pe()}function fe(){r("onfinish"),$.removeListener("close",me),pe()}function pe(){r("unpipe"),ee.unpipe($)}return ee.on("data",ce),function(ge,ke,Ce){if(typeof ge.prependListener=="function")return ge.prependListener(ke,Ce);ge._events&&ge._events[ke]?Array.isArray(ge._events[ke])?ge._events[ke].unshift(Ce):ge._events[ke]=[Ce,ge._events[ke]]:ge.on(ke,Ce)}($,"error",ye),$.once("close",me),$.once("finish",fe),$.emit("pipe",ee),J.flowing||(r("pipe resume"),ee.resume()),$},A.prototype.unpipe=function($){var K=this._readableState,ee={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return $&&$!==K.pipes||($||($=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,$&&$.emit("unpipe",this,ee)),this;if(!$){var J=K.pipes,Z=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var te=0;te<Z;te++)J[te].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=ne(K.pipes,$);return oe===-1||(K.pipes.splice(oe,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),$.emit("unpipe",this,ee)),this},A.prototype.on=function($,K){var ee=b.prototype.on.call(this,$,K),J=this._readableState;return $==="data"?(J.readableListening=this.listenerCount("readable")>0,J.flowing!==!1&&this.resume()):$==="readable"&&(J.endEmitted||J.readableListening||(J.readableListening=J.needReadable=!0,J.flowing=!1,J.emittedReadable=!1,r("on readable",J.length,J.reading),J.length?L(this):J.reading||T.nextTick(I,this))),ee},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function($,K){var ee=b.prototype.removeListener.call(this,$,K);return $==="readable"&&T.nextTick(U,this),ee},A.prototype.removeAllListeners=function($){var K=b.prototype.removeAllListeners.apply(this,arguments);return $!=="readable"&&$!==void 0||T.nextTick(U,this),K},A.prototype.resume=function(){var $=this._readableState;return $.flowing||(r("resume"),$.flowing=!$.readableListening,function(K,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,T.nextTick(N,K,ee))}(this,$)),$.paused=!1,this},A.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function($){var K=this,ee=this._readableState,J=!1;for(var Z in $.on("end",function(){if(r("wrapped end"),ee.decoder&&!ee.ended){var oe=ee.decoder.end();oe&&oe.length&&K.push(oe)}K.push(null)}),$.on("data",function(oe){r("wrapped data"),ee.decoder&&(oe=ee.decoder.write(oe)),ee.objectMode&&oe==null||(ee.objectMode||oe&&oe.length)&&(K.push(oe)||(J=!0,$.pause()))}),$)this[Z]===void 0&&typeof $[Z]=="function"&&(this[Z]=function(oe){return function(){return $[oe].apply($,arguments)}}(Z));for(var te=0;te<x.length;te++)$.on(x[te],this.emit.bind(this,x[te]));return this._read=function(oe){r("wrapped _read",oe),J&&(J=!1,$.resume())},this},typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(60328)),n(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function($){this._readableState&&(this._readableState.flowing=$)}}),A._fromList=B,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(A.from=function($,K){return a===void 0&&(a=e(90555)),a(A,$,K)})},22477:function(R,C,e){"use strict";R.exports=t;var _=e(92784).i,T=_.ERR_METHOD_NOT_IMPLEMENTED,r=_.ERR_MULTIPLE_CALLBACK,w=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=_.ERR_TRANSFORM_WITH_LENGTH_0,c=e(15316);function o(a,s){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new r);l.writechunk=null,l.writecb=null,s!=null&&this.push(s),u(a);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function t(a){if(!(this instanceof t))return new t(a);c.call(this,a),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",i)}function i(){var a=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(s,l){n(a,s,l)})}function n(a,s,l){if(s)return a.emit("error",s);if(l!=null&&a.push(l),a._writableState.length)throw new b;if(a._transformState.transforming)throw new w;return a.push(null)}e(6768)(t,c),t.prototype.push=function(a,s){return this._transformState.needTransform=!1,c.prototype.push.call(this,a,s)},t.prototype._transform=function(a,s,l){l(new T("_transform()"))},t.prototype._write=function(a,s,l){var u=this._transformState;if(u.writecb=l,u.writechunk=a,u.writeencoding=s,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},t.prototype._read=function(a){var s=this._transformState;s.writechunk===null||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},t.prototype._destroy=function(a,s){c.prototype._destroy.call(this,a,function(l){s(l)})}},11288:function(R,C,e){"use strict";var _,T=e(4168);function r(P){var F=this;this.next=null,this.entry=null,this.finish=function(){(function(U,I,N){var W=U.entry;for(U.entry=null;W;){var B=W.callback;I.pendingcb--,B(void 0),W=W.next}I.corkedRequestsFree.next=U})(F,P)}}R.exports=A,A.WritableState=y;var w,b={deprecate:e(96656)},c=e(4776),o=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),n=e(24888).getHighWaterMark,a=e(92784).i,s=a.ERR_INVALID_ARG_TYPE,l=a.ERR_METHOD_NOT_IMPLEMENTED,u=a.ERR_MULTIPLE_CALLBACK,p=a.ERR_STREAM_CANNOT_PIPE,f=a.ERR_STREAM_DESTROYED,m=a.ERR_STREAM_NULL_VALUES,h=a.ERR_STREAM_WRITE_AFTER_END,g=a.ERR_UNKNOWN_ENCODING,v=i.errorOrDestroy;function x(){}function y(P,F,U){_=_||e(15316),P=P||{},typeof U!="boolean"&&(U=F instanceof _),this.objectMode=!!P.objectMode,U&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=n(this,P,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=P.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,B){var V=W._writableState,q=V.sync,ne=V.writecb;if(typeof ne!="function")throw new u;if(function(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}(V),B)(function(K,ee,J,Z,te){--ee.pendingcb,J?(T.nextTick(te,Z),T.nextTick(O,K,ee),K._writableState.errorEmitted=!0,v(K,Z)):(te(Z),K._writableState.errorEmitted=!0,v(K,Z),O(K,ee))})(W,V,q,B,ne);else{var $=E(V)||W.destroyed;$||V.corked||V.bufferProcessing||!V.bufferedRequest||k(W,V),q?T.nextTick(S,W,V,$,ne):S(W,V,$,ne)}})(F,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function A(P){var F=this instanceof(_=_||e(15316));if(!F&&!w.call(A,this))return new A(P);this._writableState=new y(P,this,F),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),c.call(this)}function d(P,F,U,I,N,W,B){F.writelen=I,F.writecb=B,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new f("write")):U?P._writev(N,F.onwrite):P._write(N,W,F.onwrite),F.sync=!1}function S(P,F,U,I){U||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(P,F),F.pendingcb--,I(),O(P,F)}function k(P,F){F.bufferProcessing=!0;var U=F.bufferedRequest;if(P._writev&&U&&U.next){var I=F.bufferedRequestCount,N=new Array(I),W=F.corkedRequestsFree;W.entry=U;for(var B=0,V=!0;U;)N[B]=U,U.isBuf||(V=!1),U=U.next,B+=1;N.allBuffers=V,d(P,F,!0,F.length,N,"",W.finish),F.pendingcb++,F.lastBufferedRequest=null,W.next?(F.corkedRequestsFree=W.next,W.next=null):F.corkedRequestsFree=new r(F),F.bufferedRequestCount=0}else{for(;U;){var q=U.chunk,ne=U.encoding,$=U.callback;if(d(P,F,!1,F.objectMode?1:q.length,q,ne,$),U=U.next,F.bufferedRequestCount--,F.writing)break}U===null&&(F.lastBufferedRequest=null)}F.bufferedRequest=U,F.bufferProcessing=!1}function E(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function L(P,F){P._final(function(U){F.pendingcb--,U&&v(P,U),F.prefinished=!0,P.emit("prefinish"),O(P,F)})}function O(P,F){var U=E(F);if(U&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,T.nextTick(L,N,W)))}(P,F),F.pendingcb===0&&(F.finished=!0,P.emit("finish"),F.autoDestroy))){var I=P._readableState;(!I||I.autoDestroy&&I.endEmitted)&&P.destroy()}return U}e(6768)(A,c),y.prototype.getBuffer=function(){for(var P=this.bufferedRequest,F=[];P;)F.push(P),P=P.next;return F},function(){try{Object.defineProperty(y.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(P){return!!w.call(this,P)||this===A&&P&&P._writableState instanceof y}})):w=function(P){return P instanceof this},A.prototype.pipe=function(){v(this,new p)},A.prototype.write=function(P,F,U){var I,N=this._writableState,W=!1,B=!N.objectMode&&(I=P,o.isBuffer(I)||I instanceof t);return B&&!o.isBuffer(P)&&(P=function(V){return o.from(V)}(P)),typeof F=="function"&&(U=F,F=null),B?F="buffer":F||(F=N.defaultEncoding),typeof U!="function"&&(U=x),N.ending?function(V,q){var ne=new h;v(V,ne),T.nextTick(q,ne)}(this,U):(B||function(V,q,ne,$){var K;return ne===null?K=new m:typeof ne=="string"||q.objectMode||(K=new s("chunk",["string","Buffer"],ne)),!K||(v(V,K),T.nextTick($,K),!1)}(this,N,P,U))&&(N.pendingcb++,W=function(V,q,ne,$,K,ee){if(!ne){var J=function(se,ce,ye){return se.objectMode||se.decodeStrings===!1||typeof ce!="string"||(ce=o.from(ce,ye)),ce}(q,$,K);$!==J&&(ne=!0,K="buffer",$=J)}var Z=q.objectMode?1:$.length;q.length+=Z;var te=q.length<q.highWaterMark;if(te||(q.needDrain=!0),q.writing||q.corked){var oe=q.lastBufferedRequest;q.lastBufferedRequest={chunk:$,encoding:K,isBuf:ne,callback:ee,next:null},oe?oe.next=q.lastBufferedRequest:q.bufferedRequest=q.lastBufferedRequest,q.bufferedRequestCount+=1}else d(V,q,!1,Z,$,K,ee);return te}(this,N,B,P,F,U)),W},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||k(this,P))},A.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new g(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(P,F,U){U(new l("_write()"))},A.prototype._writev=null,A.prototype.end=function(P,F,U){var I=this._writableState;return typeof P=="function"?(U=P,P=null,F=null):typeof F=="function"&&(U=F,F=null),P!=null&&this.write(P,F),I.corked&&(I.corked=1,this.uncork()),I.ending||function(N,W,B){W.ending=!0,O(N,W),B&&(W.finished?T.nextTick(B):N.once("finish",B)),W.ended=!0,N.writable=!1}(this,I,U),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),A.prototype.destroy=i.destroy,A.prototype._undestroy=i.undestroy,A.prototype._destroy=function(P,F){F(P)}},60328:function(R,C,e){"use strict";var _,T=e(4168);function r(m,h,g){return h in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g,m}var w=e(15932),b=Symbol("lastResolve"),c=Symbol("lastReject"),o=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),n=Symbol("handlePromise"),a=Symbol("stream");function s(m,h){return{value:m,done:h}}function l(m){var h=m[b];if(h!==null){var g=m[a].read();g!==null&&(m[i]=null,m[b]=null,m[c]=null,h(s(g,!1)))}}function u(m){T.nextTick(l,m)}var p=Object.getPrototypeOf(function(){}),f=Object.setPrototypeOf((r(_={get stream(){return this[a]},next:function(){var m=this,h=this[o];if(h!==null)return Promise.reject(h);if(this[t])return Promise.resolve(s(void 0,!0));if(this[a].destroyed)return new Promise(function(y,A){T.nextTick(function(){m[o]?A(m[o]):y(s(void 0,!0))})});var g,v=this[i];if(v)g=new Promise(function(y,A){return function(d,S){y.then(function(){A[t]?d(s(void 0,!0)):A[n](d,S)},S)}}(v,this));else{var x=this[a].read();if(x!==null)return Promise.resolve(s(x,!1));g=new Promise(this[n])}return this[i]=g,g}},Symbol.asyncIterator,function(){return this}),r(_,"return",function(){var m=this;return new Promise(function(h,g){m[a].destroy(null,function(v){v?g(v):h(s(void 0,!0))})})}),_),p);R.exports=function(m){var h,g=Object.create(f,(r(h={},a,{value:m,writable:!0}),r(h,b,{value:null,writable:!0}),r(h,c,{value:null,writable:!0}),r(h,o,{value:null,writable:!0}),r(h,t,{value:m._readableState.endEmitted,writable:!0}),r(h,n,{value:function(v,x){var y=g[a].read();y?(g[i]=null,g[b]=null,g[c]=null,v(s(y,!1))):(g[b]=v,g[c]=x)},writable:!0}),h));return g[i]=null,w(m,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=g[c];return x!==null&&(g[i]=null,g[b]=null,g[c]=null,x(v)),void(g[o]=v)}var y=g[b];y!==null&&(g[i]=null,g[b]=null,g[c]=null,y(s(void 0,!0))),g[t]=!0}),m.on("readable",u.bind(null,g)),g}},47264:function(R,C,e){"use strict";function _(o,t){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),i.push.apply(i,n)}return i}function T(o,t,i){return t in o?Object.defineProperty(o,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[t]=i,o}function r(o,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(o,n.key,n)}}var w=e(33576).Buffer,b=e(21576).inspect,c=b&&b.custom||"inspect";R.exports=function(){function o(){(function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var t,i;return t=o,i=[{key:"push",value:function(n){var a={data:n,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}},{key:"unshift",value:function(n){var a={data:n,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var a=this.head,s=""+a.data;a=a.next;)s+=n+a.data;return s}},{key:"concat",value:function(n){if(this.length===0)return w.alloc(0);for(var a,s,l,u=w.allocUnsafe(n>>>0),p=this.head,f=0;p;)a=p.data,s=u,l=f,w.prototype.copy.call(a,s,l),f+=p.data.length,p=p.next;return u}},{key:"consume",value:function(n,a){var s;return n<this.head.data.length?(s=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):s=n===this.head.data.length?this.shift():a?this._getString(n):this._getBuffer(n),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var a=this.head,s=1,l=a.data;for(n-=l.length;a=a.next;){var u=a.data,p=n>u.length?u.length:n;if(p===u.length?l+=u:l+=u.slice(0,n),(n-=p)==0){p===u.length?(++s,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(p));break}++s}return this.length-=s,l}},{key:"_getBuffer",value:function(n){var a=w.allocUnsafe(n),s=this.head,l=1;for(s.data.copy(a),n-=s.data.length;s=s.next;){var u=s.data,p=n>u.length?u.length:n;if(u.copy(a,a.length-n,0,p),(n-=p)==0){p===u.length?(++l,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=u.slice(p));break}++l}return this.length-=l,a}},{key:c,value:function(n,a){return b(this,function(s){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?_(Object(u),!0).forEach(function(p){T(s,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):_(Object(u)).forEach(function(p){Object.defineProperty(s,p,Object.getOwnPropertyDescriptor(u,p))})}return s}({},a,{depth:0,customInspect:!1}))}}],i&&r(t.prototype,i),o}()},55324:function(R,C,e){"use strict";var _=e(4168);function T(b,c){w(b,c),r(b)}function r(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function w(b,c){b.emit("error",c)}R.exports={destroy:function(b,c){var o=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(c?c(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(w,this,b)):_.nextTick(w,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(n){!c&&n?o._writableState?o._writableState.errorEmitted?_.nextTick(r,o):(o._writableState.errorEmitted=!0,_.nextTick(T,o,n)):_.nextTick(T,o,n):c?(_.nextTick(r,o),c(n)):_.nextTick(r,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,c){var o=b._readableState,t=b._writableState;o&&o.autoDestroy||t&&t.autoDestroy?b.destroy(c):b.emit("error",c)}}},15932:function(R,C,e){"use strict";var _=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function T(){}R.exports=function r(w,b,c){if(typeof b=="function")return r(w,null,b);b||(b={}),c=function(m){var h=!1;return function(){if(!h){h=!0;for(var g=arguments.length,v=new Array(g),x=0;x<g;x++)v[x]=arguments[x];m.apply(this,v)}}}(c||T);var o=b.readable||b.readable!==!1&&w.readable,t=b.writable||b.writable!==!1&&w.writable,i=function(){w.writable||a()},n=w._writableState&&w._writableState.finished,a=function(){t=!1,n=!0,o||c.call(w)},s=w._readableState&&w._readableState.endEmitted,l=function(){o=!1,s=!0,t||c.call(w)},u=function(m){c.call(w,m)},p=function(){var m;return o&&!s?(w._readableState&&w._readableState.ended||(m=new _),c.call(w,m)):t&&!n?(w._writableState&&w._writableState.ended||(m=new _),c.call(w,m)):void 0},f=function(){w.req.on("finish",a)};return function(m){return m.setHeader&&typeof m.abort=="function"}(w)?(w.on("complete",a),w.on("abort",p),w.req?f():w.on("request",f)):t&&!w._writableState&&(w.on("end",i),w.on("close",i)),w.on("end",l),w.on("finish",a),b.error!==!1&&w.on("error",u),w.on("close",p),function(){w.removeListener("complete",a),w.removeListener("abort",p),w.removeListener("request",f),w.req&&w.req.removeListener("finish",a),w.removeListener("end",i),w.removeListener("close",i),w.removeListener("finish",a),w.removeListener("end",l),w.removeListener("error",u),w.removeListener("close",p)}}},90555:function(R){R.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(R,C,e){"use strict";var _,T=e(92784).i,r=T.ERR_MISSING_ARGS,w=T.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function c(t){t()}function o(t,i){return t.pipe(i)}R.exports=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var a,s=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new r("streams");var l=i.map(function(u,p){var f=p<i.length-1;return function(m,h,g,v){v=function(A){var d=!1;return function(){d||(d=!0,A.apply(void 0,arguments))}}(v);var x=!1;m.on("close",function(){x=!0}),_===void 0&&(_=e(15932)),_(m,{readable:h,writable:g},function(A){if(A)return v(A);x=!0,v()});var y=!1;return function(A){if(!x&&!y)return y=!0,function(d){return d.setHeader&&typeof d.abort=="function"}(m)?m.abort():typeof m.destroy=="function"?m.destroy():void v(A||new w("pipe"))}}(u,f,p>0,function(m){a||(a=m),m&&l.forEach(c),f||(l.forEach(c),s(a))})});return i.reduce(o)}},24888:function(R,C,e){"use strict";var _=e(92784).i.ERR_INVALID_OPT_VALUE;R.exports={getHighWaterMark:function(T,r,w,b){var c=function(o,t,i){return o.highWaterMark!=null?o.highWaterMark:t?o[i]:null}(r,b,w);if(c!=null){if(!isFinite(c)||Math.floor(c)!==c||c<0)throw new _(b?w:"highWaterMark",c);return Math.floor(c)}return T.objectMode?16:16384}}},4776:function(R,C,e){R.exports=e(61252).EventEmitter},86032:function(R,C,e){"use strict";var _=e(30456).Buffer,T=_.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){var l;switch(this.encoding=function(u){var p=function(f){if(!f)return"utf8";for(var m;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(m)return;f=(""+f).toLowerCase(),m=!0}}(u);if(typeof p!="string"&&(_.isEncoding===T||!T(u)))throw new Error("Unknown encoding: "+u);return p||u}(s),this.encoding){case"utf16le":this.text=c,this.end=o,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=n,void(this.end=a)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(l)}function w(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function b(s){var l=this.lastTotal-this.lastNeed,u=function(p,f,m){if((192&f[0])!=128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&f.length>1){if((192&f[1])!=128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&f.length>2&&(192&f[2])!=128)return p.lastNeed=2,"\uFFFD"}}(this,s);return u!==void 0?u:this.lastNeed<=s.length?(s.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,l,0,s.length),void(this.lastNeed-=s.length))}function c(s,l){if((s.length-l)%2==0){var u=s.toString("utf16le",l);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",l,s.length-1)}function o(s){var l=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(s,l){var u=(s.length-l)%3;return u===0?s.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",l,s.length-u))}function i(s){var l=s&&s.length?this.write(s):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(s){return s.toString(this.encoding)}function a(s){return s&&s.length?this.write(s):""}C.o=r,r.prototype.write=function(s){if(s.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(s))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?l?l+this.text(s,u):this.text(s,u):l||""},r.prototype.end=function(s){var l=s&&s.length?this.write(s):"";return this.lastNeed?l+"\uFFFD":l},r.prototype.text=function(s,l){var u=function(f,m,h){var g=m.length-1;if(g<h)return 0;var v=w(m[g]);return v>=0?(v>0&&(f.lastNeed=v-1),v):--g<h||v===-2?0:(v=w(m[g]))>=0?(v>0&&(f.lastNeed=v-2),v):--g<h||v===-2?0:(v=w(m[g]))>=0?(v>0&&(v===2?v=0:f.lastNeed=v-3),v):0}(this,s,l);if(!this.lastNeed)return s.toString("utf8",l);this.lastTotal=u;var p=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,p),s.toString("utf8",l,p)},r.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},55619:function(R,C,e){var _=e(45408),T=e(86844)("stream-parser");R.exports=function(f){var m=f&&typeof f._transform=="function",h=f&&typeof f._write=="function";if(!m&&!h)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),f._bytes=t,f._skipBytes=i,m&&(f._passthrough=n),m?f._transform=s:f._write=a};var r=-1,w=0,b=1,c=2;function o(f){T("initializing parser stream"),f._parserBytesLeft=0,f._parserBuffers=[],f._parserBuffered=0,f._parserState=r,f._parserCallback=null,typeof f.push=="function"&&(f._parserOutput=f.push.bind(f)),f._parserInit=!0}function t(f,m){_(!this._parserCallback,'there is already a "callback" set!'),_(isFinite(f)&&f>0,'can only buffer a finite number of bytes > 0, got "'+f+'"'),this._parserInit||o(this),T("buffering %o bytes",f),this._parserBytesLeft=f,this._parserCallback=m,this._parserState=w}function i(f,m){_(!this._parserCallback,'there is already a "callback" set!'),_(f>0,'can only skip > 0 bytes, got "'+f+'"'),this._parserInit||o(this),T("skipping %o bytes",f),this._parserBytesLeft=f,this._parserCallback=m,this._parserState=b}function n(f,m){_(!this._parserCallback,'There is already a "callback" set!'),_(f>0,'can only pass through > 0 bytes, got "'+f+'"'),this._parserInit||o(this),T("passing through %o bytes",f),this._parserBytesLeft=f,this._parserCallback=m,this._parserState=c}function a(f,m,h){this._parserInit||o(this),T("write(%o bytes)",f.length),typeof m=="function"&&(h=m),u(this,f,null,h)}function s(f,m,h){this._parserInit||o(this),T("transform(%o bytes)",f.length),typeof m!="function"&&(m=this._parserOutput),u(this,f,m,h)}function l(f,m,h,g){if(f._parserBytesLeft-=m.length,T("%o bytes left for stream piece",f._parserBytesLeft),f._parserState===w?(f._parserBuffers.push(m),f._parserBuffered+=m.length):f._parserState===c&&h(m),f._parserBytesLeft!==0)return g;var v=f._parserCallback;if(v&&f._parserState===w&&f._parserBuffers.length>1&&(m=Buffer.concat(f._parserBuffers,f._parserBuffered)),f._parserState!==w&&(m=null),f._parserCallback=null,f._parserBuffered=0,f._parserState=r,f._parserBuffers.splice(0),v){var x=[];m&&x.push(m),h&&x.push(h);var y=v.length>x.length;y&&x.push(p(g));var A=v.apply(f,x);if(!y||g===A)return g}}var u=p(function f(m,h,g,v){return m._parserBytesLeft<=0?v(new Error("got data but not currently parsing anything")):h.length<=m._parserBytesLeft?function(){return l(m,h,g,v)}:function(){var x=h.slice(0,m._parserBytesLeft);return l(m,x,g,function(y){return y?v(y):h.length>x.length?function(){return f(m,h.slice(x.length),g,v)}:void 0})}});function p(f){return function(){for(var m=f.apply(this,arguments);typeof m=="function";)m=m();return m}}},86844:function(R,C,e){var _=e(4168);function T(){var r;try{r=C.storage.debug}catch{}return!r&&_!==void 0&&"env"in _&&(r=_.env.DEBUG),r}(C=R.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},C.formatArgs=function(r){var w=this.useColors;if(r[0]=(w?"%c":"")+this.namespace+(w?" %c":" ")+r[0]+(w?"%c ":" ")+"+"+C.humanize(this.diff),w){var b="color: "+this.color;r.splice(1,0,b,"color: inherit");var c=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(c++,t==="%c"&&(o=c))}),r.splice(o,0,b)}},C.save=function(r){try{r==null?C.storage.removeItem("debug"):C.storage.debug=r}catch{}},C.load=T,C.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},C.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),C.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],C.formatters.j=function(r){try{return JSON.stringify(r)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}},C.enable(T())},89416:function(R,C,e){var _;function T(r){function w(){if(w.enabled){var b=w,c=+new Date,o=c-(_||c);b.diff=o,b.prev=_,b.curr=c,_=c;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=C.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(a,s){if(a==="%%")return a;n++;var l=C.formatters[s];if(typeof l=="function"){var u=t[n];a=l.call(b,u),t.splice(n,1),n--}return a}),C.formatArgs.call(b,t),(w.log||C.log||console.log.bind(console)).apply(b,t)}}return w.namespace=r,w.enabled=C.enabled(r),w.useColors=C.useColors(),w.color=function(b){var c,o=0;for(c in b)o=(o<<5)-o+b.charCodeAt(c),o|=0;return C.colors[Math.abs(o)%C.colors.length]}(r),typeof C.init=="function"&&C.init(w),w}(C=R.exports=T.debug=T.default=T).coerce=function(r){return r instanceof Error?r.stack||r.message:r},C.disable=function(){C.enable("")},C.enable=function(r){C.save(r),C.names=[],C.skips=[];for(var w=(typeof r=="string"?r:"").split(/[\s,]+/),b=w.length,c=0;c<b;c++)w[c]&&((r=w[c].replace(/\*/g,".*?"))[0]==="-"?C.skips.push(new RegExp("^"+r.substr(1)+"$")):C.names.push(new RegExp("^"+r+"$")))},C.enabled=function(r){var w,b;for(w=0,b=C.skips.length;w<b;w++)if(C.skips[w].test(r))return!1;for(w=0,b=C.names.length;w<b;w++)if(C.names[w].test(r))return!0;return!1},C.humanize=e(93744),C.names=[],C.skips=[],C.formatters={}},93744:function(R){var C=1e3,e=60*C,_=60*e,T=24*_;function r(w,b,c){if(!(w<b))return w<1.5*b?Math.floor(w/b)+" "+c:Math.ceil(w/b)+" "+c+"s"}R.exports=function(w,b){b=b||{};var c,o=typeof w;if(o==="string"&&w.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var n=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*T;case"hours":case"hour":case"hrs":case"hr":case"h":return n*_;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*C;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(w);if(o==="number"&&isNaN(w)===!1)return b.long?r(c=w,T,"day")||r(c,_,"hour")||r(c,e,"minute")||r(c,C,"second")||c+" ms":function(t){return t>=T?Math.round(t/T)+"d":t>=_?Math.round(t/_)+"h":t>=e?Math.round(t/e)+"m":t>=C?Math.round(t/C)+"s":t+"ms"}(w);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(w))}},39956:function(R,C,e){"use strict";var _=e(32868);R.exports=function(T,r,w){if(T==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");w?(typeof w=="string"||Array.isArray(w))&&(w={ignore:w}):w={},w.escape==null&&(w.escape=!0),w.ignore==null?w.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof w.ignore=="string"&&(w.ignore=[w.ignore]),w.ignore=w.ignore.map(function(a){return a.length===1&&(a+=a),a}));var b=_.parse(T,{flat:!0,brackets:w.ignore}),c=b[0].split(r);if(w.escape){for(var o=[],t=0;t<c.length;t++){var i=c[t],n=c[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(o.push(i+r+n),t++):o.push(i)}c=o}for(t=0;t<c.length;t++)b[0]=c[t],c[t]=_.stringify(b,{flat:!0});return c}},78484:function(R){"use strict";R.exports=function(C){for(var e=C.length,_=new Array(e),T=new Array(e),r=new Array(e),w=new Array(e),b=new Array(e),c=new Array(e),o=0;o<e;++o)_[o]=-1,T[o]=0,r[o]=!1,w[o]=0,b[o]=-1,c[o]=[];var t,i=0,n=[],a=[];function s(p){var f=[p],m=[p];for(_[p]=T[p]=i,r[p]=!0,i+=1;m.length>0;){p=m[m.length-1];var h=C[p];if(w[p]<h.length){for(var g=w[p];g<h.length;++g){var v=h[g];if(_[v]<0){_[v]=T[v]=i,r[v]=!0,i+=1,f.push(v),m.push(v);break}r[v]&&(T[p]=0|Math.min(T[p],T[v])),b[v]>=0&&c[p].push(b[v])}w[p]=g}else{if(T[p]===_[p]){var x=[],y=[],A=0;for(g=f.length-1;g>=0;--g){var d=f[g];if(r[d]=!1,x.push(d),y.push(c[d]),A+=c[d].length,b[d]=n.length,d===p){f.length=g;break}}n.push(x);var S=new Array(A);for(g=0;g<y.length;g++)for(var k=0;k<y[g].length;k++)S[--A]=y[g][k];a.push(S)}m.pop()}}}for(o=0;o<e;++o)_[o]<0&&s(o);for(o=0;o<a.length;o++){var l=a[o];if(l.length!==0){l.sort(function(p,f){return p-f}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);a[o]=t}}return{components:n,adjacencyList:a}}},92848:function(R,C,e){"use strict";e.r(C);var _=2*Math.PI,T=function(b,c,o,t,i,n,a){var s=b.x,l=b.y;return{x:t*(s*=c)-i*(l*=o)+n,y:i*s+t*l+a}},r=function(b,c){var o=c===1.5707963267948966?.551915024494:c===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(c/4),t=Math.cos(b),i=Math.sin(b),n=Math.cos(b+c),a=Math.sin(b+c);return[{x:t-i*o,y:i+t*o},{x:n+a*o,y:a-n*o},{x:n,y:a}]},w=function(b,c,o,t){var i=b*o+c*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-c*o<0?-1:1)*Math.acos(i)};C.default=function(b){var c=b.px,o=b.py,t=b.cx,i=b.cy,n=b.rx,a=b.ry,s=b.xAxisRotation,l=s===void 0?0:s,u=b.largeArcFlag,p=u===void 0?0:u,f=b.sweepFlag,m=f===void 0?0:f,h=[];if(n===0||a===0)return[];var g=Math.sin(l*_/360),v=Math.cos(l*_/360),x=v*(c-t)/2+g*(o-i)/2,y=-g*(c-t)/2+v*(o-i)/2;if(x===0&&y===0)return[];n=Math.abs(n),a=Math.abs(a);var A=Math.pow(x,2)/Math.pow(n,2)+Math.pow(y,2)/Math.pow(a,2);A>1&&(n*=Math.sqrt(A),a*=Math.sqrt(A));var d=function(I,N,W,B,V,q,ne,$,K,ee,J,Z){var te=Math.pow(V,2),oe=Math.pow(q,2),se=Math.pow(J,2),ce=Math.pow(Z,2),ye=te*oe-te*ce-oe*se;ye<0&&(ye=0),ye/=te*ce+oe*se;var me=(ye=Math.sqrt(ye)*(ne===$?-1:1))*V/q*Z,fe=ye*-q/V*J,pe=ee*me-K*fe+(I+W)/2,ge=K*me+ee*fe+(N+B)/2,ke=(J-me)/V,Ce=(Z-fe)/q,de=(-J-me)/V,ae=(-Z-fe)/q,re=w(1,0,ke,Ce),he=w(ke,Ce,de,ae);return $===0&&he>0&&(he-=_),$===1&&he<0&&(he+=_),[pe,ge,re,he]}(c,o,t,i,n,a,p,m,g,v,x,y),S=function(I,N){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(W,B){var V=[],q=!0,ne=!1,$=void 0;try{for(var K,ee=W[Symbol.iterator]();!(q=(K=ee.next()).done)&&(V.push(K.value),!B||V.length!==B);q=!0);}catch(J){ne=!0,$=J}finally{try{!q&&ee.return&&ee.return()}finally{if(ne)throw $}}return V}(I,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(d,4),k=S[0],E=S[1],L=S[2],O=S[3],P=Math.abs(O)/(_/4);Math.abs(1-P)<1e-7&&(P=1);var F=Math.max(Math.ceil(P),1);O/=F;for(var U=0;U<F;U++)h.push(r(L,O)),L+=O;return h.map(function(I){var N=T(I[0],n,a,v,g,k,E),W=N.x,B=N.y,V=T(I[1],n,a,v,g,k,E),q=V.x,ne=V.y,$=T(I[2],n,a,v,g,k,E);return{x1:W,y1:B,x2:q,y2:ne,x:$.x,y:$.y}})}},74840:function(R,C,e){"use strict";var _=e(21984),T=e(49972),r=e(41976),w=e(53520),b=e(45408);R.exports=function(c){if(Array.isArray(c)&&c.length===1&&typeof c[0]=="string"&&(c=c[0]),typeof c=="string"&&(b(w(c),"String is not an SVG path."),c=_(c)),b(Array.isArray(c),"Argument should be a string or an array of path segments."),c=T(c),!(c=r(c)).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],t=0,i=c.length;t<i;t++)for(var n=c[t].slice(1),a=0;a<n.length;a+=2)n[a+0]<o[0]&&(o[0]=n[a+0]),n[a+1]<o[1]&&(o[1]=n[a+1]),n[a+0]>o[2]&&(o[2]=n[a+0]),n[a+1]>o[3]&&(o[3]=n[a+1]);return o}},41976:function(R,C,e){"use strict";R.exports=function(w){for(var b,c=[],o=0,t=0,i=0,n=0,a=null,s=null,l=0,u=0,p=0,f=w.length;p<f;p++){var m=w[p],h=m[0];switch(h){case"M":i=m[1],n=m[2];break;case"A":var g=_({px:l,py:u,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!g.length)continue;for(var v,x=0;x<g.length;x++)m=["C",(v=g[x]).x1,v.y1,v.x2,v.y2,v.x,v.y],x<g.length-1&&c.push(m);break;case"S":var y=l,A=u;b!="C"&&b!="S"||(y+=y-o,A+=A-t),m=["C",y,A,m[1],m[2],m[3],m[4]];break;case"T":b=="Q"||b=="T"?(a=2*l-a,s=2*u-s):(a=l,s=u),m=r(l,u,a,s,m[1],m[2]);break;case"Q":a=m[1],s=m[2],m=r(l,u,m[1],m[2],m[3],m[4]);break;case"L":m=T(l,u,m[1],m[2]);break;case"H":m=T(l,u,m[1],u);break;case"V":m=T(l,u,l,m[1]);break;case"Z":m=T(l,u,i,n)}b=h,l=m[m.length-2],u=m[m.length-1],m.length>4?(o=m[m.length-4],t=m[m.length-3]):(o=l,t=u),c.push(m)}return c};var _=e(92848);function T(w,b,c,o){return["C",w,b,c,o,c,o]}function r(w,b,c,o,t,i){return["C",w/3+.6666666666666666*c,b/3+.6666666666666666*o,t/3+.6666666666666666*c,i/3+.6666666666666666*o,t,i]}},20472:function(R,C,e){"use strict";var _,T=e(74840),r=e(21984),w=e(22235),b=e(53520),c=e(29620),o=document.createElement("canvas"),t=o.getContext("2d");R.exports=function(i,n){if(!b(i))throw Error("Argument should be valid svg path string");var a,s;n||(n={}),n.shape?(a=n.shape[0],s=n.shape[1]):(a=o.width=n.w||n.width||200,s=o.height=n.h||n.height||200);var l=Math.min(a,s),u=n.stroke||0,p=n.viewbox||n.viewBox||T(i),f=[a/(p[2]-p[0]),s/(p[3]-p[1])],m=Math.min(f[0]||0,f[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,a,s),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*a,.5*s),t.scale(m,m),function(){if(_!=null)return _;var v=document.createElement("canvas").getContext("2d");if(v.canvas.width=v.canvas.height=1,!window.Path2D)return _=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");v.fillStyle="black",v.fill(x);var y=v.getImageData(0,0,1,1);return _=y&&y.data&&y.data[3]===255}()){var h=new Path2D(i);t.fill(h),u&&t.stroke(h)}else{var g=r(i);w(t,g),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),c(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},49760:function(R,C,e){var _;(function(T){var r=/^\s+/,w=/\s+$/,b=0,c=T.round,o=T.min,t=T.max,i=T.random;function n(J,Z){if(Z=Z||{},(J=J||"")instanceof n)return J;if(!(this instanceof n))return new n(J,Z);var te=function(oe){var se,ce,ye,me={r:0,g:0,b:0},fe=1,pe=null,ge=null,ke=null,Ce=!1,de=!1;return typeof oe=="string"&&(oe=function(ae){ae=ae.replace(r,"").replace(w,"").toLowerCase();var re,he=!1;if(L[ae])ae=L[ae],he=!0;else if(ae=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(re=K.rgb.exec(ae))?{r:re[1],g:re[2],b:re[3]}:(re=K.rgba.exec(ae))?{r:re[1],g:re[2],b:re[3],a:re[4]}:(re=K.hsl.exec(ae))?{h:re[1],s:re[2],l:re[3]}:(re=K.hsla.exec(ae))?{h:re[1],s:re[2],l:re[3],a:re[4]}:(re=K.hsv.exec(ae))?{h:re[1],s:re[2],v:re[3]}:(re=K.hsva.exec(ae))?{h:re[1],s:re[2],v:re[3],a:re[4]}:(re=K.hex8.exec(ae))?{r:I(re[1]),g:I(re[2]),b:I(re[3]),a:V(re[4]),format:he?"name":"hex8"}:(re=K.hex6.exec(ae))?{r:I(re[1]),g:I(re[2]),b:I(re[3]),format:he?"name":"hex"}:(re=K.hex4.exec(ae))?{r:I(re[1]+""+re[1]),g:I(re[2]+""+re[2]),b:I(re[3]+""+re[3]),a:V(re[4]+""+re[4]),format:he?"name":"hex8"}:!!(re=K.hex3.exec(ae))&&{r:I(re[1]+""+re[1]),g:I(re[2]+""+re[2]),b:I(re[3]+""+re[3]),format:he?"name":"hex"}}(oe)),typeof oe=="object"&&(ee(oe.r)&&ee(oe.g)&&ee(oe.b)?(se=oe.r,ce=oe.g,ye=oe.b,me={r:255*F(se,255),g:255*F(ce,255),b:255*F(ye,255)},Ce=!0,de=String(oe.r).substr(-1)==="%"?"prgb":"rgb"):ee(oe.h)&&ee(oe.s)&&ee(oe.v)?(pe=W(oe.s),ge=W(oe.v),me=function(ae,re,he){ae=6*F(ae,360),re=F(re,100),he=F(he,100);var Se=T.floor(ae),xe=ae-Se,Te=he*(1-re),Ae=he*(1-xe*re),Pe=he*(1-(1-xe)*re),De=Se%6;return{r:255*[he,Ae,Te,Te,Pe,he][De],g:255*[Pe,he,he,Ae,Te,Te][De],b:255*[Te,Te,Pe,he,he,Ae][De]}}(oe.h,pe,ge),Ce=!0,de="hsv"):ee(oe.h)&&ee(oe.s)&&ee(oe.l)&&(pe=W(oe.s),ke=W(oe.l),me=function(ae,re,he){var Se,xe,Te;function Ae(ve,we,Ee){return Ee<0&&(Ee+=1),Ee>1&&(Ee-=1),Ee<1/6?ve+6*(we-ve)*Ee:Ee<.5?we:Ee<2/3?ve+(we-ve)*(2/3-Ee)*6:ve}if(ae=F(ae,360),re=F(re,100),he=F(he,100),re===0)Se=xe=Te=he;else{var Pe=he<.5?he*(1+re):he+re-he*re,De=2*he-Pe;Se=Ae(De,Pe,ae+1/3),xe=Ae(De,Pe,ae),Te=Ae(De,Pe,ae-1/3)}return{r:255*Se,g:255*xe,b:255*Te}}(oe.h,pe,ke),Ce=!0,de="hsl"),oe.hasOwnProperty("a")&&(fe=oe.a)),fe=P(fe),{ok:Ce,format:oe.format||de,r:o(255,t(me.r,0)),g:o(255,t(me.g,0)),b:o(255,t(me.b,0)),a:fe}}(J);this._originalInput=J,this._r=te.r,this._g=te.g,this._b=te.b,this._a=te.a,this._roundA=c(100*this._a)/100,this._format=Z.format||te.format,this._gradientType=Z.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=te.ok,this._tc_id=b++}function a(J,Z,te){J=F(J,255),Z=F(Z,255),te=F(te,255);var oe,se,ce=t(J,Z,te),ye=o(J,Z,te),me=(ce+ye)/2;if(ce==ye)oe=se=0;else{var fe=ce-ye;switch(se=me>.5?fe/(2-ce-ye):fe/(ce+ye),ce){case J:oe=(Z-te)/fe+(Z<te?6:0);break;case Z:oe=(te-J)/fe+2;break;case te:oe=(J-Z)/fe+4}oe/=6}return{h:oe,s:se,l:me}}function s(J,Z,te){J=F(J,255),Z=F(Z,255),te=F(te,255);var oe,se,ce=t(J,Z,te),ye=o(J,Z,te),me=ce,fe=ce-ye;if(se=ce===0?0:fe/ce,ce==ye)oe=0;else{switch(ce){case J:oe=(Z-te)/fe+(Z<te?6:0);break;case Z:oe=(te-J)/fe+2;break;case te:oe=(J-Z)/fe+4}oe/=6}return{h:oe,s:se,v:me}}function l(J,Z,te,oe){var se=[N(c(J).toString(16)),N(c(Z).toString(16)),N(c(te).toString(16))];return oe&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0):se.join("")}function u(J,Z,te,oe){return[N(B(oe)),N(c(J).toString(16)),N(c(Z).toString(16)),N(c(te).toString(16))].join("")}function p(J,Z){Z=Z===0?0:Z||10;var te=n(J).toHsl();return te.s-=Z/100,te.s=U(te.s),n(te)}function f(J,Z){Z=Z===0?0:Z||10;var te=n(J).toHsl();return te.s+=Z/100,te.s=U(te.s),n(te)}function m(J){return n(J).desaturate(100)}function h(J,Z){Z=Z===0?0:Z||10;var te=n(J).toHsl();return te.l+=Z/100,te.l=U(te.l),n(te)}function g(J,Z){Z=Z===0?0:Z||10;var te=n(J).toRgb();return te.r=t(0,o(255,te.r-c(-Z/100*255))),te.g=t(0,o(255,te.g-c(-Z/100*255))),te.b=t(0,o(255,te.b-c(-Z/100*255))),n(te)}function v(J,Z){Z=Z===0?0:Z||10;var te=n(J).toHsl();return te.l-=Z/100,te.l=U(te.l),n(te)}function x(J,Z){var te=n(J).toHsl(),oe=(te.h+Z)%360;return te.h=oe<0?360+oe:oe,n(te)}function y(J){var Z=n(J).toHsl();return Z.h=(Z.h+180)%360,n(Z)}function A(J){var Z=n(J).toHsl(),te=Z.h;return[n(J),n({h:(te+120)%360,s:Z.s,l:Z.l}),n({h:(te+240)%360,s:Z.s,l:Z.l})]}function d(J){var Z=n(J).toHsl(),te=Z.h;return[n(J),n({h:(te+90)%360,s:Z.s,l:Z.l}),n({h:(te+180)%360,s:Z.s,l:Z.l}),n({h:(te+270)%360,s:Z.s,l:Z.l})]}function S(J){var Z=n(J).toHsl(),te=Z.h;return[n(J),n({h:(te+72)%360,s:Z.s,l:Z.l}),n({h:(te+216)%360,s:Z.s,l:Z.l})]}function k(J,Z,te){Z=Z||6,te=te||30;var oe=n(J).toHsl(),se=360/te,ce=[n(J)];for(oe.h=(oe.h-(se*Z>>1)+720)%360;--Z;)oe.h=(oe.h+se)%360,ce.push(n(oe));return ce}function E(J,Z){Z=Z||6;for(var te=n(J).toHsv(),oe=te.h,se=te.s,ce=te.v,ye=[],me=1/Z;Z--;)ye.push(n({h:oe,s:se,v:ce})),ce=(ce+me)%1;return ye}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(299*J.r+587*J.g+114*J.b)/1e3},getLuminance:function(){var J,Z,te,oe=this.toRgb();return J=oe.r/255,Z=oe.g/255,te=oe.b/255,.2126*(J<=.03928?J/12.92:T.pow((J+.055)/1.055,2.4))+.7152*(Z<=.03928?Z/12.92:T.pow((Z+.055)/1.055,2.4))+.0722*(te<=.03928?te/12.92:T.pow((te+.055)/1.055,2.4))},setAlpha:function(J){return this._a=P(J),this._roundA=c(100*this._a)/100,this},toHsv:function(){var J=s(this._r,this._g,this._b);return{h:360*J.h,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=s(this._r,this._g,this._b),Z=c(360*J.h),te=c(100*J.s),oe=c(100*J.v);return this._a==1?"hsv("+Z+", "+te+"%, "+oe+"%)":"hsva("+Z+", "+te+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var J=a(this._r,this._g,this._b);return{h:360*J.h,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=a(this._r,this._g,this._b),Z=c(360*J.h),te=c(100*J.s),oe=c(100*J.l);return this._a==1?"hsl("+Z+", "+te+"%, "+oe+"%)":"hsla("+Z+", "+te+"%, "+oe+"%, "+this._roundA+")"},toHex:function(J){return l(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(J){return function(Z,te,oe,se,ce){var ye=[N(c(Z).toString(16)),N(c(te).toString(16)),N(c(oe).toString(16)),N(B(se))];return ce&&ye[0].charAt(0)==ye[0].charAt(1)&&ye[1].charAt(0)==ye[1].charAt(1)&&ye[2].charAt(0)==ye[2].charAt(1)&&ye[3].charAt(0)==ye[3].charAt(1)?ye[0].charAt(0)+ye[1].charAt(0)+ye[2].charAt(0)+ye[3].charAt(0):ye.join("")}(this._r,this._g,this._b,this._a,J)},toHex8String:function(J){return"#"+this.toHex8(J)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*F(this._r,255))+"%",g:c(100*F(this._g,255))+"%",b:c(100*F(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+c(100*F(this._r,255))+"%, "+c(100*F(this._g,255))+"%, "+c(100*F(this._b,255))+"%)":"rgba("+c(100*F(this._r,255))+"%, "+c(100*F(this._g,255))+"%, "+c(100*F(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(O[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(J){var Z="#"+u(this._r,this._g,this._b,this._a),te=Z,oe=this._gradientType?"GradientType = 1, ":"";if(J){var se=n(J);te="#"+u(se._r,se._g,se._b,se._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+Z+",endColorstr="+te+")"},toString:function(J){var Z=!!J;J=J||this._format;var te=!1,oe=this._a<1&&this._a>=0;return Z||!oe||J!=="hex"&&J!=="hex6"&&J!=="hex3"&&J!=="hex4"&&J!=="hex8"&&J!=="name"?(J==="rgb"&&(te=this.toRgbString()),J==="prgb"&&(te=this.toPercentageRgbString()),J!=="hex"&&J!=="hex6"||(te=this.toHexString()),J==="hex3"&&(te=this.toHexString(!0)),J==="hex4"&&(te=this.toHex8String(!0)),J==="hex8"&&(te=this.toHex8String()),J==="name"&&(te=this.toName()),J==="hsl"&&(te=this.toHslString()),J==="hsv"&&(te=this.toHsvString()),te||this.toHexString()):J==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(J,Z){var te=J.apply(null,[this].concat([].slice.call(Z)));return this._r=te._r,this._g=te._g,this._b=te._b,this.setAlpha(te._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(J,Z){return J.apply(null,[this].concat([].slice.call(Z)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(d,arguments)}},n.fromRatio=function(J,Z){if(typeof J=="object"){var te={};for(var oe in J)J.hasOwnProperty(oe)&&(te[oe]=oe==="a"?J[oe]:W(J[oe]));J=te}return n(J,Z)},n.equals=function(J,Z){return!(!J||!Z)&&n(J).toRgbString()==n(Z).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function(J,Z,te){te=te===0?0:te||50;var oe=n(J).toRgb(),se=n(Z).toRgb(),ce=te/100;return n({r:(se.r-oe.r)*ce+oe.r,g:(se.g-oe.g)*ce+oe.g,b:(se.b-oe.b)*ce+oe.b,a:(se.a-oe.a)*ce+oe.a})},n.readability=function(J,Z){var te=n(J),oe=n(Z);return(T.max(te.getLuminance(),oe.getLuminance())+.05)/(T.min(te.getLuminance(),oe.getLuminance())+.05)},n.isReadable=function(J,Z,te){var oe,se,ce,ye,me,fe=n.readability(J,Z);switch(se=!1,(ce=te,(ye=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ye!=="AAA"&&(ye="AA"),(me=(ce.size||"small").toLowerCase())!=="small"&&me!=="large"&&(me="small"),oe={level:ye,size:me}).level+oe.size){case"AAsmall":case"AAAlarge":se=fe>=4.5;break;case"AAlarge":se=fe>=3;break;case"AAAsmall":se=fe>=7}return se},n.mostReadable=function(J,Z,te){var oe,se,ce,ye,me=null,fe=0;se=(te=te||{}).includeFallbackColors,ce=te.level,ye=te.size;for(var pe=0;pe<Z.length;pe++)(oe=n.readability(J,Z[pe]))>fe&&(fe=oe,me=n(Z[pe]));return n.isReadable(J,me,{level:ce,size:ye})||!se?me:(te.includeFallbackColors=!1,n.mostReadable(J,["#fff","#000"],te))};var L=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=n.hexNames=function(J){var Z={};for(var te in J)J.hasOwnProperty(te)&&(Z[J[te]]=te);return Z}(L);function P(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function F(J,Z){(function(oe){return typeof oe=="string"&&oe.indexOf(".")!=-1&&parseFloat(oe)===1})(J)&&(J="100%");var te=function(oe){return typeof oe=="string"&&oe.indexOf("%")!=-1}(J);return J=o(Z,t(0,parseFloat(J))),te&&(J=parseInt(J*Z,10)/100),T.abs(J-Z)<1e-6?1:J%Z/parseFloat(Z)}function U(J){return o(1,t(0,J))}function I(J){return parseInt(J,16)}function N(J){return J.length==1?"0"+J:""+J}function W(J){return J<=1&&(J=100*J+"%"),J}function B(J){return T.round(255*parseFloat(J)).toString(16)}function V(J){return I(J)/255}var q,ne,$,K=(ne="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",$="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+ne),rgba:new RegExp("rgba"+$),hsl:new RegExp("hsl"+ne),hsla:new RegExp("hsla"+$),hsv:new RegExp("hsv"+ne),hsva:new RegExp("hsva"+$),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ee(J){return!!K.CSS_UNIT.exec(J)}R.exports?R.exports=n:(_=(function(){return n}).call(C,e,C,R))===void 0||(R.exports=_)})(Math)},37816:function(R){"use strict";R.exports=e,R.exports.float32=R.exports.float=e,R.exports.fract32=R.exports.fract=function(_,T){if(_.length){if(_ instanceof Float32Array)return new Float32Array(_.length);T instanceof Float32Array||(T=e(_));for(var r=0,w=T.length;r<w;r++)T[r]=_[r]-T[r];return T}return e(_-e(_))};var C=new Float32Array(1);function e(_){return _.length?_ instanceof Float32Array?_:new Float32Array(_):(C[0]=_,C[0])}},23464:function(R,C,e){"use strict";var _=e(65819);R.exports=w;var T=96;function r(b,c){var o=_(getComputedStyle(b).getPropertyValue(c));return o[0]*w(o[1],b)}function w(b,c){switch(c=c||document.body,b=(b||"px").trim().toLowerCase(),c!==window&&c!==document||(c=document.body),b){case"%":return c.clientHeight/100;case"ch":case"ex":return function(o,t){var i=document.createElement("div");i.style["font-size"]="128"+o,t.appendChild(i);var n=r(i,"font-size")/128;return t.removeChild(i),n}(b,c);case"em":return r(c,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return T;case"cm":return T/2.54;case"mm":return T/25.4;case"pt":return T/72;case"pc":return T/6}return 1}},55712:function(R,C,e){"use strict";function _(w){return w}function T(w,b){return typeof b=="string"&&(b=w.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(c){return r(w,c)})}:r(w,b)}function r(w,b){var c=b.id,o=b.bbox,t=b.properties==null?{}:b.properties,i=function(n,a){var s=function(g){if(g==null)return _;var v,x,y=g.scale[0],A=g.scale[1],d=g.translate[0],S=g.translate[1];return function(k,E){E||(v=x=0);var L=2,O=k.length,P=new Array(O);for(P[0]=(v+=k[0])*y+d,P[1]=(x+=k[1])*A+S;L<O;)P[L]=k[L],++L;return P}}(n.transform),l=n.arcs;function u(g,v){v.length&&v.pop();for(var x=l[g<0?~g:g],y=0,A=x.length;y<A;++y)v.push(s(x[y],y));g<0&&function(d,S){for(var k,E=d.length,L=E-S;L<--E;)k=d[L],d[L++]=d[E],d[E]=k}(v,A)}function p(g){return s(g)}function f(g){for(var v=[],x=0,y=g.length;x<y;++x)u(g[x],v);return v.length<2&&v.push(v[0]),v}function m(g){for(var v=f(g);v.length<4;)v.push(v[0]);return v}function h(g){return g.map(m)}return function g(v){var x,y=v.type;switch(y){case"GeometryCollection":return{type:y,geometries:v.geometries.map(g)};case"Point":x=p(v.coordinates);break;case"MultiPoint":x=v.coordinates.map(p);break;case"LineString":x=f(v.arcs);break;case"MultiLineString":x=v.arcs.map(f);break;case"Polygon":x=h(v.arcs);break;case"MultiPolygon":x=v.arcs.map(h);break;default:return null}return{type:y,coordinates:x}}(a)}(w,b);return c==null&&o==null?{type:"Feature",properties:t,geometry:i}:o==null?{type:"Feature",id:c,properties:t,geometry:i}:{type:"Feature",id:c,bbox:o,properties:t,geometry:i}}e.d(C,{NO:function(){return T}})},73384:function(R,C,e){"use strict";var _=e(54612);R.exports=function(T){if(typeof T!="function"||!hasOwnProperty.call(T,"length"))return!1;try{if(typeof T.length!="number"||typeof T.call!="function"||typeof T.apply!="function")return!1}catch{return!1}return!_(T)}},57980:function(R,C,e){"use strict";var _=e(81680),T=e(7328),r=e(33940),w=e(18856),b=function(c,o){return c.replace("%v",w(o))};R.exports=function(c,o,t){if(!T(t))throw new TypeError(b(o,c));if(!_(c)){if("default"in t)return t.default;if(t.isOptional)return null}var i=r(t.errorMessage);throw _(i)||(i=o),new TypeError(b(i,c))}},32336:function(R){"use strict";R.exports=function(C){try{return C.toString()}catch{try{return String(C)}catch{return null}}}},18856:function(R,C,e){"use strict";var _=e(32336),T=/[\n\r\u2028\u2029]/g;R.exports=function(r){var w=_(r);return w===null?"<Non-coercible to string value>":(w.length>100&&(w=w.slice(0,99)+"\u2026"),w=w.replace(T,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(R,C,e){"use strict";var _=e(81680),T={object:!0,function:!0,undefined:!0};R.exports=function(r){return!!_(r)&&hasOwnProperty.call(T,typeof r)}},87396:function(R,C,e){"use strict";var _=e(57980),T=e(85488);R.exports=function(r){return T(r)?r:_(r,"%v is not a plain function",arguments[1])}},85488:function(R,C,e){"use strict";var _=e(73384),T=/^\s*class[\s{/}]/,r=Function.prototype.toString;R.exports=function(w){return!!_(w)&&!T.test(r.call(w))}},54612:function(R,C,e){"use strict";var _=e(7328);R.exports=function(T){if(!_(T))return!1;try{return!!T.constructor&&T.constructor.prototype===T}catch{return!1}}},33940:function(R,C,e){"use strict";var _=e(81680),T=e(7328),r=Object.prototype.toString;R.exports=function(w){if(!_(w))return null;if(T(w)){var b=w.toString;if(typeof b!="function"||b===r)return null}try{return""+w}catch{return null}}},18496:function(R,C,e){"use strict";var _=e(57980),T=e(81680);R.exports=function(r){return T(r)?r:_(r,"Cannot use %v",arguments[1])}},81680:function(R){"use strict";R.exports=function(C){return C!=null}},14144:function(R,C,e){"use strict";var _=e(308),T=e(10352),r=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:T([32,0]),UINT16:T([32,0]),UINT32:T([32,0]),BIGUINT64:T([32,0]),INT8:T([32,0]),INT16:T([32,0]),INT32:T([32,0]),BIGINT64:T([32,0]),FLOAT:T([32,0]),DOUBLE:T([32,0]),DATA:T([32,0]),UINT8C:T([32,0]),BUFFER:T([32,0])});var w=typeof Uint8ClampedArray<"u",b=typeof BigUint64Array<"u",c=typeof BigInt64Array<"u",o=e.g.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=T([32,0])),o.BIGUINT64||(o.BIGUINT64=T([32,0])),o.BIGINT64||(o.BIGINT64=T([32,0])),o.BUFFER||(o.BUFFER=T([32,0]));var t=o.DATA,i=o.BUFFER;function n(S){if(S){var k=S.length||S.byteLength,E=_.log2(k);t[E].push(S)}}function a(S){S=_.nextPow2(S);var k=_.log2(S),E=t[k];return E.length>0?E.pop():new ArrayBuffer(S)}function s(S){return new Uint8Array(a(S),0,S)}function l(S){return new Uint16Array(a(2*S),0,S)}function u(S){return new Uint32Array(a(4*S),0,S)}function p(S){return new Int8Array(a(S),0,S)}function f(S){return new Int16Array(a(2*S),0,S)}function m(S){return new Int32Array(a(4*S),0,S)}function h(S){return new Float32Array(a(4*S),0,S)}function g(S){return new Float64Array(a(8*S),0,S)}function v(S){return w?new Uint8ClampedArray(a(S),0,S):s(S)}function x(S){return b?new BigUint64Array(a(8*S),0,S):null}function y(S){return c?new BigInt64Array(a(8*S),0,S):null}function A(S){return new DataView(a(S),0,S)}function d(S){S=_.nextPow2(S);var k=_.log2(S),E=i[k];return E.length>0?E.pop():new r(S)}C.free=function(S){if(r.isBuffer(S))i[_.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var k=S.length||S.byteLength,E=0|_.log2(k);t[E].push(S)}},C.freeUint8=C.freeUint16=C.freeUint32=C.freeBigUint64=C.freeInt8=C.freeInt16=C.freeInt32=C.freeBigInt64=C.freeFloat32=C.freeFloat=C.freeFloat64=C.freeDouble=C.freeUint8Clamped=C.freeDataView=function(S){n(S.buffer)},C.freeArrayBuffer=n,C.freeBuffer=function(S){i[_.log2(S.length)].push(S)},C.malloc=function(S,k){if(k===void 0||k==="arraybuffer")return a(S);switch(k){case"uint8":return s(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return p(S);case"int16":return f(S);case"int32":return m(S);case"float":case"float32":return h(S);case"double":case"float64":return g(S);case"uint8_clamped":return v(S);case"bigint64":return y(S);case"biguint64":return x(S);case"buffer":return d(S);case"data":case"dataview":return A(S);default:return null}return null},C.mallocArrayBuffer=a,C.mallocUint8=s,C.mallocUint16=l,C.mallocUint32=u,C.mallocInt8=p,C.mallocInt16=f,C.mallocInt32=m,C.mallocFloat32=C.mallocFloat=h,C.mallocFloat64=C.mallocDouble=g,C.mallocUint8Clamped=v,C.mallocBigUint64=x,C.mallocBigInt64=y,C.mallocDataView=A,C.mallocBuffer=d,C.clearCache=function(){for(var S=0;S<32;++S)o.UINT8[S].length=0,o.UINT16[S].length=0,o.UINT32[S].length=0,o.INT8[S].length=0,o.INT16[S].length=0,o.INT32[S].length=0,o.FLOAT[S].length=0,o.DOUBLE[S].length=0,o.BIGUINT64[S].length=0,o.BIGINT64[S].length=0,o.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(R){var C=/[\'\"]/;R.exports=function(e){return e?(C.test(e.charAt(0))&&(e=e.substr(1)),C.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(R){"use strict";R.exports=function(C,e,_){Array.isArray(_)||(_=[].slice.call(arguments,2));for(var T=0,r=_.length;T<r;T++){var w=_[T];for(var b in w)if((e[b]===void 0||Array.isArray(e[b])||C[b]!==e[b])&&b in e){var c;if(w[b]===!0)c=e[b];else if(w[b]===!1||typeof w[b]=="function"&&(c=w[b](e[b],C,e))===void 0)continue;C[b]=c}}return C}},96656:function(R,C,e){function _(T){try{if(!e.g.localStorage)return!1}catch{return!1}var r=e.g.localStorage[T];return r!=null&&String(r).toLowerCase()==="true"}R.exports=function(T,r){if(_("noDeprecation"))return T;var w=!1;return function(){if(!w){if(_("throwDeprecation"))throw new Error(r);_("traceDeprecation")?console.trace(r):console.warn(r),w=!0}return T.apply(this,arguments)}}},75272:function(R){R.exports=function(C){return C&&typeof C=="object"&&typeof C.copy=="function"&&typeof C.fill=="function"&&typeof C.readUInt8=="function"}},41088:function(R,C,e){"use strict";var _=e(91148),T=e(84420),r=e(96632),w=e(7728);function b(F){return F.call.bind(F)}var c=typeof BigInt<"u",o=typeof Symbol<"u",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),n=b(String.prototype.valueOf),a=b(Boolean.prototype.valueOf);if(c)var s=b(BigInt.prototype.valueOf);if(o)var l=b(Symbol.prototype.valueOf);function u(F,U){if(typeof F!="object")return!1;try{return U(F),!0}catch{return!1}}function p(F){return t(F)==="[object Map]"}function f(F){return t(F)==="[object Set]"}function m(F){return t(F)==="[object WeakMap]"}function h(F){return t(F)==="[object WeakSet]"}function g(F){return t(F)==="[object ArrayBuffer]"}function v(F){return typeof ArrayBuffer<"u"&&(g.working?g(F):F instanceof ArrayBuffer)}function x(F){return t(F)==="[object DataView]"}function y(F){return typeof DataView<"u"&&(x.working?x(F):F instanceof DataView)}C.isArgumentsObject=_,C.isGeneratorFunction=T,C.isTypedArray=w,C.isPromise=function(F){return typeof Promise<"u"&&F instanceof Promise||F!==null&&typeof F=="object"&&typeof F.then=="function"&&typeof F.catch=="function"},C.isArrayBufferView=function(F){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(F):w(F)||y(F)},C.isUint8Array=function(F){return r(F)==="Uint8Array"},C.isUint8ClampedArray=function(F){return r(F)==="Uint8ClampedArray"},C.isUint16Array=function(F){return r(F)==="Uint16Array"},C.isUint32Array=function(F){return r(F)==="Uint32Array"},C.isInt8Array=function(F){return r(F)==="Int8Array"},C.isInt16Array=function(F){return r(F)==="Int16Array"},C.isInt32Array=function(F){return r(F)==="Int32Array"},C.isFloat32Array=function(F){return r(F)==="Float32Array"},C.isFloat64Array=function(F){return r(F)==="Float64Array"},C.isBigInt64Array=function(F){return r(F)==="BigInt64Array"},C.isBigUint64Array=function(F){return r(F)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),C.isMap=function(F){return typeof Map<"u"&&(p.working?p(F):F instanceof Map)},f.working=typeof Set<"u"&&f(new Set),C.isSet=function(F){return typeof Set<"u"&&(f.working?f(F):F instanceof Set)},m.working=typeof WeakMap<"u"&&m(new WeakMap),C.isWeakMap=function(F){return typeof WeakMap<"u"&&(m.working?m(F):F instanceof WeakMap)},h.working=typeof WeakSet<"u"&&h(new WeakSet),C.isWeakSet=function(F){return h(F)},g.working=typeof ArrayBuffer<"u"&&g(new ArrayBuffer),C.isArrayBuffer=v,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),C.isDataView=y;var A=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function d(F){return t(F)==="[object SharedArrayBuffer]"}function S(F){return A!==void 0&&(d.working===void 0&&(d.working=d(new A)),d.working?d(F):F instanceof A)}function k(F){return u(F,i)}function E(F){return u(F,n)}function L(F){return u(F,a)}function O(F){return c&&u(F,s)}function P(F){return o&&u(F,l)}C.isSharedArrayBuffer=S,C.isAsyncFunction=function(F){return t(F)==="[object AsyncFunction]"},C.isMapIterator=function(F){return t(F)==="[object Map Iterator]"},C.isSetIterator=function(F){return t(F)==="[object Set Iterator]"},C.isGeneratorObject=function(F){return t(F)==="[object Generator]"},C.isWebAssemblyCompiledModule=function(F){return t(F)==="[object WebAssembly.Module]"},C.isNumberObject=k,C.isStringObject=E,C.isBooleanObject=L,C.isBigIntObject=O,C.isSymbolObject=P,C.isBoxedPrimitive=function(F){return k(F)||E(F)||L(F)||O(F)||P(F)},C.isAnyArrayBuffer=function(F){return typeof Uint8Array<"u"&&(v(F)||S(F))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(F){Object.defineProperty(C,F,{enumerable:!1,value:function(){throw new Error(F+" is not supported in userland")}})})},35840:function(R,C,e){var _=e(4168),T=Object.getOwnPropertyDescriptors||function(P){for(var F=Object.keys(P),U={},I=0;I<F.length;I++)U[F[I]]=Object.getOwnPropertyDescriptor(P,F[I]);return U},r=/%[sdj%]/g;C.format=function(P){if(!m(P)){for(var F=[],U=0;U<arguments.length;U++)F.push(o(arguments[U]));return F.join(" ")}U=1;for(var I=arguments,N=I.length,W=String(P).replace(r,function(V){if(V==="%%")return"%";if(U>=N)return V;switch(V){case"%s":return String(I[U++]);case"%d":return Number(I[U++]);case"%j":try{return JSON.stringify(I[U++])}catch{return"[Circular]"}default:return V}}),B=I[U];U<N;B=I[++U])p(B)||!v(B)?W+=" "+B:W+=" "+o(B);return W},C.deprecate=function(P,F){if(_!==void 0&&_.noDeprecation===!0)return P;if(_===void 0)return function(){return C.deprecate(P,F).apply(this,arguments)};var U=!1;return function(){if(!U){if(_.throwDeprecation)throw new Error(F);_.traceDeprecation?console.trace(F):console.error(F),U=!0}return P.apply(this,arguments)}};var w={},b=/^$/;if(_.env.NODE_DEBUG){var c=_.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+c+"$","i")}function o(P,F){var U={seen:[],stylize:i};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),u(F)?U.showHidden=F:F&&C._extend(U,F),h(U.showHidden)&&(U.showHidden=!1),h(U.depth)&&(U.depth=2),h(U.colors)&&(U.colors=!1),h(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=t),n(U,P,U.depth)}function t(P,F){var U=o.styles[F];return U?"\x1B["+o.colors[U][0]+"m"+P+"\x1B["+o.colors[U][1]+"m":P}function i(P,F){return P}function n(P,F,U){if(P.customInspect&&F&&A(F.inspect)&&F.inspect!==C.inspect&&(!F.constructor||F.constructor.prototype!==F)){var I=F.inspect(U,P);return m(I)||(I=n(P,I,U)),I}var N=function(ee,J){if(h(J))return ee.stylize("undefined","undefined");if(m(J)){var Z="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ee.stylize(Z,"string")}return f(J)?ee.stylize(""+J,"number"):u(J)?ee.stylize(""+J,"boolean"):p(J)?ee.stylize("null","null"):void 0}(P,F);if(N)return N;var W=Object.keys(F),B=function(ee){var J={};return ee.forEach(function(Z,te){J[Z]=!0}),J}(W);if(P.showHidden&&(W=Object.getOwnPropertyNames(F)),y(F)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return a(F);if(W.length===0){if(A(F)){var V=F.name?": "+F.name:"";return P.stylize("[Function"+V+"]","special")}if(g(F))return P.stylize(RegExp.prototype.toString.call(F),"regexp");if(x(F))return P.stylize(Date.prototype.toString.call(F),"date");if(y(F))return a(F)}var q,ne="",$=!1,K=["{","}"];return l(F)&&($=!0,K=["[","]"]),A(F)&&(ne=" [Function"+(F.name?": "+F.name:"")+"]"),g(F)&&(ne=" "+RegExp.prototype.toString.call(F)),x(F)&&(ne=" "+Date.prototype.toUTCString.call(F)),y(F)&&(ne=" "+a(F)),W.length!==0||$&&F.length!=0?U<0?g(F)?P.stylize(RegExp.prototype.toString.call(F),"regexp"):P.stylize("[Object]","special"):(P.seen.push(F),q=$?function(ee,J,Z,te,oe){for(var se=[],ce=0,ye=J.length;ce<ye;++ce)E(J,String(ce))?se.push(s(ee,J,Z,te,String(ce),!0)):se.push("");return oe.forEach(function(me){me.match(/^\d+$/)||se.push(s(ee,J,Z,te,me,!0))}),se}(P,F,U,B,W):W.map(function(ee){return s(P,F,U,B,ee,$)}),P.seen.pop(),function(ee,J,Z){return ee.reduce(function(te,oe){return oe.indexOf(`
`),te+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Z[0]+(J===""?"":J+`
 `)+" "+ee.join(`,
  `)+" "+Z[1]:Z[0]+J+" "+ee.join(", ")+" "+Z[1]}(q,ne,K)):K[0]+ne+K[1]}function a(P){return"["+Error.prototype.toString.call(P)+"]"}function s(P,F,U,I,N,W){var B,V,q;if((q=Object.getOwnPropertyDescriptor(F,N)||{value:F[N]}).get?V=q.set?P.stylize("[Getter/Setter]","special"):P.stylize("[Getter]","special"):q.set&&(V=P.stylize("[Setter]","special")),E(I,N)||(B="["+N+"]"),V||(P.seen.indexOf(q.value)<0?(V=p(U)?n(P,q.value,null):n(P,q.value,U-1)).indexOf(`
`)>-1&&(V=W?V.split(`
`).map(function(ne){return"  "+ne}).join(`
`).slice(2):`
`+V.split(`
`).map(function(ne){return"   "+ne}).join(`
`)):V=P.stylize("[Circular]","special")),h(B)){if(W&&N.match(/^\d+$/))return V;(B=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=P.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=P.stylize(B,"string"))}return B+": "+V}function l(P){return Array.isArray(P)}function u(P){return typeof P=="boolean"}function p(P){return P===null}function f(P){return typeof P=="number"}function m(P){return typeof P=="string"}function h(P){return P===void 0}function g(P){return v(P)&&d(P)==="[object RegExp]"}function v(P){return typeof P=="object"&&P!==null}function x(P){return v(P)&&d(P)==="[object Date]"}function y(P){return v(P)&&(d(P)==="[object Error]"||P instanceof Error)}function A(P){return typeof P=="function"}function d(P){return Object.prototype.toString.call(P)}function S(P){return P<10?"0"+P.toString(10):P.toString(10)}C.debuglog=function(P){if(P=P.toUpperCase(),!w[P])if(b.test(P)){var F=_.pid;w[P]=function(){var U=C.format.apply(C,arguments);console.error("%s %d: %s",P,F,U)}}else w[P]=function(){};return w[P]},C.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},C.types=e(41088),C.isArray=l,C.isBoolean=u,C.isNull=p,C.isNullOrUndefined=function(P){return P==null},C.isNumber=f,C.isString=m,C.isSymbol=function(P){return typeof P=="symbol"},C.isUndefined=h,C.isRegExp=g,C.types.isRegExp=g,C.isObject=v,C.isDate=x,C.types.isDate=x,C.isError=y,C.types.isNativeError=y,C.isFunction=A,C.isPrimitive=function(P){return P===null||typeof P=="boolean"||typeof P=="number"||typeof P=="string"||typeof P=="symbol"||P===void 0},C.isBuffer=e(75272);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(P,F){return Object.prototype.hasOwnProperty.call(P,F)}C.log=function(){var P,F;console.log("%s - %s",(F=[S((P=new Date).getHours()),S(P.getMinutes()),S(P.getSeconds())].join(":"),[P.getDate(),k[P.getMonth()],F].join(" ")),C.format.apply(C,arguments))},C.inherits=e(6768),C._extend=function(P,F){if(!F||!v(F))return P;for(var U=Object.keys(F),I=U.length;I--;)P[U[I]]=F[U[I]];return P};var L=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function O(P,F){if(!P){var U=new Error("Promise was rejected with a falsy value");U.reason=P,P=U}return F(P)}C.promisify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');if(L&&P[L]){var F;if(typeof(F=P[L])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(F,L,{value:F,enumerable:!1,writable:!1,configurable:!0}),F}function F(){for(var U,I,N=new Promise(function(V,q){U=V,I=q}),W=[],B=0;B<arguments.length;B++)W.push(arguments[B]);W.push(function(V,q){V?I(V):U(q)});try{P.apply(this,W)}catch(V){I(V)}return N}return Object.setPrototypeOf(F,Object.getPrototypeOf(P)),L&&Object.defineProperty(F,L,{value:F,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(F,T(P))},C.promisify.custom=L,C.callbackify=function(P){if(typeof P!="function")throw new TypeError('The "original" argument must be of type Function');function F(){for(var U=[],I=0;I<arguments.length;I++)U.push(arguments[I]);var N=U.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,B=function(){return N.apply(W,arguments)};P.apply(this,U).then(function(V){_.nextTick(B.bind(null,null,V))},function(V){_.nextTick(O.bind(null,V,B))})}return Object.setPrototypeOf(F,Object.getPrototypeOf(P)),Object.defineProperties(F,T(P)),F}},5408:function(R,C,e){var _=e(13380);R.exports=function(T){return _("webgl",T)}},96632:function(R,C,e){"use strict";var _=e(46492),T=e(63436),r=e(57916),w=e(99676),b=e(2304),c=w("Object.prototype.toString"),o=e(46672)(),t=typeof globalThis>"u"?e.g:globalThis,i=T(),n=w("String.prototype.slice"),a=Object.getPrototypeOf,s=w("Array.prototype.indexOf",!0)||function(u,p){for(var f=0;f<u.length;f+=1)if(u[f]===p)return f;return-1},l={__proto__:null};_(i,o&&b&&a?function(u){var p=new t[u];if(Symbol.toStringTag in p){var f=a(p),m=b(f,Symbol.toStringTag);if(!m){var h=a(f);m=b(h,Symbol.toStringTag)}l["$"+u]=r(m.get)}}:function(u){var p=new t[u],f=p.slice||p.set;f&&(l["$"+u]=r(f))}),R.exports=function(u){if(!u||typeof u!="object")return!1;if(!o){var p=n(c(u),8,-1);return s(i,p)>-1?p:p==="Object"&&function(f){var m=!1;return _(l,function(h,g){if(!m)try{h(f),m=n(g,1)}catch{}}),m}(u)}return b?function(f){var m=!1;return _(l,function(h,g){if(!m)try{"$"+h(f)===g&&(m=n(g,1))}catch{}}),m}(u):null}},67020:function(R,C,e){var _=e(38700),T=e(50896),r=_.instance();function w(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}w.prototype=new _.baseCalendar,T(w.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,s){if(typeof a=="string"){var l=a.match(c);return l?l[0]:""}var u=this._validateYear(a),p=a.month(),f=""+this.toChineseMonth(u,p);return s&&f.length<2&&(f="0"+f),this.isIntercalaryMonth(u,p)&&(f+="i"),f},monthNames:function(a){if(typeof a=="string"){var s=a.match(o);return s?s[0]:""}var l=this._validateYear(a),u=a.month(),p=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(p="\u95F0"+p),p},monthNamesShort:function(a){if(typeof a=="string"){var s=a.match(t);return s?s[0]:""}var l=this._validateYear(a),u=a.month(),p=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(p="\u95F0"+p),p},parseMonth:function(a,s){a=this._validateYear(a);var l,u=parseInt(s);if(isNaN(u))s[0]==="\u95F0"&&(l=!0,s=s.substring(1)),s[s.length-1]==="\u6708"&&(s=s.substring(0,s.length-1)),u=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(s);else{var p=s[s.length-1];l=p==="i"||p==="I"}return this.toMonthIndex(a,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(a,s){if(a.year&&(a=a.year()),typeof a!="number"||a<1888||a>2111)throw s.replace(/\{0\}/,this.local.name);return a},toMonthIndex:function(a,s,l){var u=this.intercalaryMonth(a);if(l&&s!==u||s<1||s>12)throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&s<=u?s-1:s:s-1},toChineseMonth:function(a,s){a.year&&(s=(a=a.year()).month());var l=this.intercalaryMonth(a);if(s<0||s>(l?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?s<l?s+1:s:s+1},intercalaryMonth:function(a){return a=this._validateYear(a),i[a-i[0]]>>13},isIntercalaryMonth:function(a,s){a.year&&(s=(a=a.year()).month());var l=this.intercalaryMonth(a);return!!l&&l===s},leapYear:function(a){return this.intercalaryMonth(a)!==0},weekOfYear:function(a,s,l){var u,p=this._validateYear(a,_.local.invalidyear),f=n[p-n[0]],m=f>>9&4095,h=f>>5&15,g=31&f;(u=r.newDate(m,h,g)).add(4-(u.dayOfWeek()||7),"d");var v=this.toJD(a,s,l)-u.toJD();return 1+Math.floor(v/7)},monthsInYear:function(a){return this.leapYear(a)?13:12},daysInMonth:function(a,s){a.year&&(s=a.month(),a=a.year()),a=this._validateYear(a);var l=i[a-i[0]];if(s>(l>>13?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-s?30:29},weekDay:function(a,s,l){return(this.dayOfWeek(a,s,l)||7)<6},toJD:function(a,s,l){var u=this._validate(a,f,l,_.local.invalidDate);a=this._validateYear(u.year()),s=u.month(),l=u.day();var p=this.isIntercalaryMonth(a,s),f=this.toChineseMonth(a,s),m=function(h,g,v,x,y){var A,d,S;if(typeof h=="object")d=h,A=g||{};else{var k;if(!(typeof h=="number"&&h>=1888&&h<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof g=="number"&&g>=1&&g<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof v=="number"&&v>=1&&v<=30))throw new Error("Lunar day outside range 1 - 30");typeof x=="object"?(k=!1,A=x):(k=!!x,A={}),d={year:h,month:g,day:v,isIntercalary:k}}S=d.day-1;var E,L=i[d.year-i[0]],O=L>>13;E=O&&(d.month>O||d.isIntercalary)?d.month:d.month-1;for(var P=0;P<E;P++)S+=L&1<<12-P?30:29;var F=n[d.year-n[0]],U=new Date(F>>9&4095,(F>>5&15)-1,(31&F)+S);return A.year=U.getFullYear(),A.month=1+U.getMonth(),A.day=U.getDate(),A}(a,f,l,p);return r.toJD(m.year,m.month,m.day)},fromJD:function(a){var s=r.fromJD(a),l=function(p,f,m,h){var g,v;if(typeof p=="object")g=p,v=f||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof f=="number"&&f>=1&&f<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof m=="number"&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");g={year:p,month:f,day:m},v={}}var x=n[g.year-n[0]],y=g.year<<9|g.month<<5|g.day;v.year=y>=x?g.year:g.year-1,x=n[v.year-n[0]];var A,d=new Date(x>>9&4095,(x>>5&15)-1,31&x),S=new Date(g.year,g.month-1,g.day);A=Math.round((S-d)/864e5);var k,E=i[v.year-i[0]];for(k=0;k<13;k++){var L=E&1<<12-k?30:29;if(A<L)break;A-=L}var O=E>>13;return!O||k<O?(v.isIntercalary=!1,v.month=1+k):k===O?(v.isIntercalary=!0,v.month=k):(v.isIntercalary=!1,v.month=k),v.day=1+A,v}(s.year(),s.month(),s.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(a){var s=a.match(b),l=this._validateYear(+s[1]),u=+s[2],p=!!s[3],f=this.toMonthIndex(l,u,p),m=+s[4];return this.newDate(l,f,m)},add:function(a,s,l){var u=a.year(),p=a.month(),f=this.isIntercalaryMonth(u,p),m=this.toChineseMonth(u,p),h=Object.getPrototypeOf(w.prototype).add.call(this,a,s,l);if(l==="y"){var g=h.year(),v=h.month(),x=this.isIntercalaryMonth(g,m),y=f&&x?this.toMonthIndex(g,m,!0):this.toMonthIndex(g,m,!1);y!==v&&h.month(y)}return h}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,c=/^\d?\d[iI]?/m,o=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;_.calendars.chinese=w;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(R,C,e){var _=e(38700),T=e(50896);function r(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,_.local.invalidYear);return(w=b.year()+(b.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(w,b,c){var o=this.newDate(w,b,c);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var c=this._validate(w,b,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(c.month()===13&&this.leapYear(c.year())?1:0)},weekDay:function(w,b,c){return(this.dayOfWeek(w,b,c)||7)<6},toJD:function(w,b,c){var o=this._validate(w,b,c,_.local.invalidDate);return(w=o.year())<0&&w++,o.day()+30*(o.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var b=Math.floor(w)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;c<=0&&c--,b=Math.floor(w)+.5-this.newDate(c,1,1).toJD();var o=Math.floor(b/30)+1,t=b-30*(o-1)+1;return this.newDate(c,o,t)}}),_.calendars.coptic=r},55668:function(R,C,e){var _=e(38700),T=e(50896);function r(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,_.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,_.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,_.local.invalidYear),400},weekOfYear:function(b,c,o){var t=this.newDate(b,c,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,c){var o=this._validate(b,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[o.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,c,o){return(this._validate(b,c,o,_.local.invalidDate).day()+1)%8},weekDay:function(b,c,o){var t=this.dayOfWeek(b,c,o);return t>=2&&t<=6},extraInfo:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);return{century:w[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);return b=t.year()+(t.year()<0?1:0),c=t.month(),(o=t.day())+(c>1?16:0)+(c>2?32*(c-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var c=Math.floor(b/400)+1;b-=400*(c-1),b+=b>15?16:0;var o=Math.floor(b/32)+1,t=b-32*(o-1)+1;return this.newDate(c<=0?c-1:c,o,t)}});var w={20:"Fruitbat",21:"Anchovy"};_.calendars.discworld=r},65168:function(R,C,e){var _=e(38700),T=e(50896);function r(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,_.local.invalidYear);return(w=b.year()+(b.year()<0?1:0))%4==3||w%4==-1},monthsInYear:function(w){return this._validate(w,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(w,b,c){var o=this.newDate(w,b,c);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var c=this._validate(w,b,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(c.month()===13&&this.leapYear(c.year())?1:0)},weekDay:function(w,b,c){return(this.dayOfWeek(w,b,c)||7)<6},toJD:function(w,b,c){var o=this._validate(w,b,c,_.local.invalidDate);return(w=o.year())<0&&w++,o.day()+30*(o.month()-1)+365*(w-1)+Math.floor(w/4)+this.jdEpoch-1},fromJD:function(w){var b=Math.floor(w)+.5-this.jdEpoch,c=Math.floor((b-Math.floor((b+366)/1461))/365)+1;c<=0&&c--,b=Math.floor(w)+.5-this.newDate(c,1,1).toJD();var o=Math.floor(b/30)+1,t=b-30*(o-1)+1;return this.newDate(c,o,t)}}),_.calendars.ethiopian=r},2084:function(R,C,e){var _=e(38700),T=e(50896);function r(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function w(b,c){return b-c*Math.floor(b/c)}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return this._leapYear(c.year())},_leapYear:function(b){return w(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,_.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,c,o){var t=this.newDate(b,c,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,c){return b.year&&(c=b.month(),b=b.year()),this._validate(b,c,this.minDay,_.local.invalidMonth),c===12&&this.leapYear(b)||c===8&&w(this.daysInYear(b),10)===5?30:c===9&&w(this.daysInYear(b),10)===3?29:this.daysPerMonth[c-1]},weekDay:function(b,c,o){return this.dayOfWeek(b,c,o)!==6},extraInfo:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);b=t.year(),c=t.month(),o=t.day();var i=b<=0?b+1:b,n=this.jdEpoch+this._delay1(i)+this._delay2(i)+o+1;if(c<7){for(var a=7;a<=this.monthsInYear(b);a++)n+=this.daysInMonth(b,a);for(a=1;a<c;a++)n+=this.daysInMonth(b,a)}else for(a=7;a<c;a++)n+=this.daysInMonth(b,a);return n},_delay1:function(b){var c=Math.floor((235*b-234)/19),o=12084+13753*c,t=29*c+Math.floor(o/25920);return w(3*(t+1),7)<3&&t++,t},_delay2:function(b){var c=this._delay1(b-1),o=this._delay1(b);return this._delay1(b+1)-o==356?2:o-c==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var c=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(c===-1?1:c+1,7,1);)c++;for(var o=b<this.toJD(c,1,1)?7:1;b>this.toJD(c,o,this.daysInMonth(c,o));)o++;var t=b-this.toJD(c,o,1)+1;return this.newDate(c,o,t)}}),_.calendars.hebrew=r},26368:function(R,C,e){var _=e(38700),T=e(50896);function r(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(w){return(11*this._validate(w,this.minMonth,this.minDay,_.local.invalidYear).year()+14)%30<11},weekOfYear:function(w,b,c){var o=this.newDate(w,b,c);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(w){return this.leapYear(w)?355:354},daysInMonth:function(w,b){var c=this._validate(w,b,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(c.month()===12&&this.leapYear(c.year())?1:0)},weekDay:function(w,b,c){return this.dayOfWeek(w,b,c)!==5},toJD:function(w,b,c){var o=this._validate(w,b,c,_.local.invalidDate);return w=o.year(),b=o.month(),w=w<=0?w+1:w,(c=o.day())+Math.ceil(29.5*(b-1))+354*(w-1)+Math.floor((3+11*w)/30)+this.jdEpoch-1},fromJD:function(w){w=Math.floor(w)+.5;var b=Math.floor((30*(w-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var c=Math.min(12,Math.ceil((w-29-this.toJD(b,1,1))/29.5)+1),o=w-this.toJD(b,c,1)+1;return this.newDate(b,c,o)}}),_.calendars.islamic=r},24747:function(R,C,e){var _=e(38700),T=e(50896);function r(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(w){var b=this._validate(w,this.minMonth,this.minDay,_.local.invalidYear);return(w=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(w,b,c){var o=this.newDate(w,b,c);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(w,b){var c=this._validate(w,b,this.minDay,_.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(c.month()===2&&this.leapYear(c.year())?1:0)},weekDay:function(w,b,c){return(this.dayOfWeek(w,b,c)||7)<6},toJD:function(w,b,c){var o=this._validate(w,b,c,_.local.invalidDate);return w=o.year(),b=o.month(),c=o.day(),w<0&&w++,b<=2&&(w--,b+=12),Math.floor(365.25*(w+4716))+Math.floor(30.6001*(b+1))+c-1524.5},fromJD:function(w){var b=Math.floor(w+.5)+1524,c=Math.floor((b-122.1)/365.25),o=Math.floor(365.25*c),t=Math.floor((b-o)/30.6001),i=t-Math.floor(t<14?1:13),n=c-Math.floor(i>2?4716:4715),a=b-o-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,i,a)}}),_.calendars.julian=r},65616:function(R,C,e){var _=e(38700),T=e(50896);function r(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}function w(c,o){return c-o*Math.floor(c/o)}function b(c,o){return w(c-1,o)+1}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),!1},formatYear:function(c){c=this._validate(c,this.minMonth,this.minDay,_.local.invalidYear).year();var o=Math.floor(c/400);return c%=400,c+=c<0?400:0,o+"."+Math.floor(c/20)+"."+c%20},forYear:function(c){if((c=c.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,t=0;t<c.length;t++){var i=parseInt(c[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";o=20*o+i}return o},monthsInYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),18},weekOfYear:function(c,o,t){return this._validate(c,o,t,_.local.invalidDate),0},daysInYear:function(c){return this._validate(c,this.minMonth,this.minDay,_.local.invalidYear),360},daysInMonth:function(c,o){return this._validate(c,o,this.minDay,_.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(c,o,t){return this._validate(c,o,t,_.local.invalidDate).day()},weekDay:function(c,o,t){return this._validate(c,o,t,_.local.invalidDate),!0},extraInfo:function(c,o,t){var i=this._validate(c,o,t,_.local.invalidDate).toJD(),n=this._toHaab(i),a=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(c){var o=w(8+(c-=this.jdEpoch)+340,365);return[Math.floor(o/20)+1,w(o,20)]},_toTzolkin:function(c){return[b(20+(c-=this.jdEpoch),20),b(c+4,13)]},toJD:function(c,o,t){var i=this._validate(c,o,t,_.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(c){c=Math.floor(c)+.5-this.jdEpoch;var o=Math.floor(c/360);c%=360,c+=c<0?360:0;var t=Math.floor(c/20),i=c%20;return this.newDate(o,t,i)}}),_.calendars.mayan=r},30632:function(R,C,e){var _=e(38700),T=e(50896);function r(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar;var w=_.instance("gregorian");T(r.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear);return w.leapYear(c.year()+(c.year()<1?1:0)+1469)},weekOfYear:function(b,c,o){var t=this.newDate(b,c,o);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,c){var o=this._validate(b,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(b,c,o){return(this.dayOfWeek(b,c,o)||7)<6},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),n=1;n<t.month();n++)i+=this.daysPerMonth[n-1];return i+w.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var c=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(c+1,1,1);)c++;for(var o=b-Math.floor(this.toJD(c,1,1)+.5)+1,t=1;o>this.daysInMonth(c,t);)o-=this.daysInMonth(c,t),t++;return this.newDate(c,t,o)}}),_.calendars.nanakshahi=r},73040:function(R,C,e){var _=e(38700),T=e(50896);function r(w){this.local=this.regionalOptions[w||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(w){return this.daysInYear(w)!==this.daysPerYear},weekOfYear:function(w,b,c){var o=this.newDate(w,b,c);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(w){if(w=this._validate(w,this.minMonth,this.minDay,_.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[w]===void 0)return this.daysPerYear;for(var b=0,c=this.minMonth;c<=12;c++)b+=this.NEPALI_CALENDAR_DATA[w][c];return b},daysInMonth:function(w,b){return w.year&&(b=w.month(),w=w.year()),this._validate(w,b,this.minDay,_.local.invalidMonth),this.NEPALI_CALENDAR_DATA[w]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[w][b]},weekDay:function(w,b,c){return this.dayOfWeek(w,b,c)!==6},toJD:function(w,b,c){var o=this._validate(w,b,c,_.local.invalidDate);w=o.year(),b=o.month(),c=o.day();var t=_.instance(),i=0,n=b,a=w;this._createMissingCalendarData(w);var s=w-(n>9||n===9&&c>=this.NEPALI_CALENDAR_DATA[a][0]?56:57);for(b!==9&&(i=c,n--);n!==9;)n<=0&&(n=12,a--),i+=this.NEPALI_CALENDAR_DATA[a][n],n--;return b===9?(i+=c-this.NEPALI_CALENDAR_DATA[a][0])<0&&(i+=t.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[a][9]-this.NEPALI_CALENDAR_DATA[a][0],t.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(w){var b=_.instance().fromJD(w),c=b.year(),o=b.dayOfYear(),t=c+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][0],a=this.NEPALI_CALENDAR_DATA[t][i]-n+1;o>a;)++i>12&&(i=1,t++),a+=this.NEPALI_CALENDAR_DATA[t][i];var s=this.NEPALI_CALENDAR_DATA[t][i]-(a-o);return this.newDate(t,i,s)},_createMissingCalendarData:function(w){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var c=w-1;c<w+2;c++)this.NEPALI_CALENDAR_DATA[c]===void 0&&(this.NEPALI_CALENDAR_DATA[c]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),_.calendars.nepali=r},1104:function(R,C,e){var _=e(38700),T=e(50896);function r(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function w(b,c){return b-c*Math.floor(b/c)}r.prototype=new _.baseCalendar,T(r.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return 682*((c.year()-(c.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,c,o){var t=this.newDate(b,c,o);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,c){var o=this._validate(b,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(b,c,o){return this.dayOfWeek(b,c,o)!==5},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);b=t.year(),c=t.month(),o=t.day();var i=b-(b>=0?474:473),n=474+w(i,2820);return o+(c<=7?31*(c-1):30*(c-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var c=(b=Math.floor(b)+.5)-this.toJD(475,1,1),o=Math.floor(c/1029983),t=w(c,1029983),i=2820;if(t!==1029982){var n=Math.floor(t/366),a=w(t,366);i=Math.floor((2134*n+2816*a+2815)/1028522)+n+1}var s=i+2820*o+474;s=s<=0?s-1:s;var l=b-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),p=b-this.toJD(s,u,1)+1;return this.newDate(s,u,p)}}),_.calendars.persian=r,_.calendars.jalali=r},51456:function(R,C,e){var _=e(38700),T=e(50896),r=_.instance();function w(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}w.prototype=new _.baseCalendar,T(w.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return b=this._t2gYear(c.year()),r.leapYear(b)},weekOfYear:function(b,c,o){var t=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return b=this._t2gYear(t.year()),r.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,c){var o=this._validate(b,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(b,c,o){return(this.dayOfWeek(b,c,o)||7)<6},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);return b=this._t2gYear(t.year()),r.toJD(b,t.month(),t.day())},fromJD:function(b){var c=r.fromJD(b),o=this._g2tYear(c.year());return this.newDate(o,c.month(),c.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),_.calendars.taiwan=w},4592:function(R,C,e){var _=e(38700),T=e(50896),r=_.instance();function w(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}w.prototype=new _.baseCalendar,T(w.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return b=this._t2gYear(c.year()),r.leapYear(b)},weekOfYear:function(b,c,o){var t=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return b=this._t2gYear(t.year()),r.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,c){var o=this._validate(b,c,this.minDay,_.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(b,c,o){return(this.dayOfWeek(b,c,o)||7)<6},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate);return b=this._t2gYear(t.year()),r.toJD(b,t.month(),t.day())},fromJD:function(b){var c=r.fromJD(b),o=this._g2tYear(c.year());return this.newDate(o,c.month(),c.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),_.calendars.thai=w},45348:function(R,C,e){var _=e(38700),T=e(50896);function r(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}r.prototype=new _.baseCalendar,T(r.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var c=this._validate(b,this.minMonth,this.minDay,_.local.invalidYear);return this.daysInYear(c.year())===355},weekOfYear:function(b,c,o){var t=this.newDate(b,c,o);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var c=0,o=1;o<=12;o++)c+=this.daysInMonth(b,o);return c},daysInMonth:function(b,c){for(var o=this._validate(b,c,this.minDay,_.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<w.length;i++){if(w[i]>o)return w[t]-w[t-1];t++}return 30},weekDay:function(b,c,o){return this.dayOfWeek(b,c,o)!==5},toJD:function(b,c,o){var t=this._validate(b,c,o,_.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+w[i-1]-1+24e5-.5},fromJD:function(b){for(var c=b-24e5+.5,o=0,t=0;t<w.length&&!(w[t]>c);t++)o++;var i=o+15292,n=Math.floor((i-1)/12),a=n+1,s=i-12*n,l=c-w[o-1]+1;return this.newDate(a,s,l)},isValid:function(b,c,o){var t=_.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,c,o,t){var i=_.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),_.calendars.ummalqura=r;var w=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(R,C,e){var _=e(50896);function T(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function r(t,i,n,a){if(this._calendar=t,this._year=i,this._month=n,this._day=a,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function w(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function c(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}_(T.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var n=this._localCals[t+"-"+i];if(!n&&this.calendars[t]&&(n=new this.calendars[t](i),this._localCals[t+"-"+i]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,i,n,a,s){return(a=(t!=null&&t.year?t.calendar():typeof a=="string"?this.instance(a,s):a)||this.instance()).newDate(t,i,n)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,i){return function(n){for(var a="",s=0;n>0;){var l=n%10;a=(l===0?"":t[l]+i[s])+a,s++,n=Math.floor(n/10)}return a.indexOf(t[1]+i[1])===0&&(a=a.substr(1)),a||t[0]}}}),_(r.prototype,{newDate:function(t,i,n){return this._calendar.newDate(t??this,i,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,n){if(!this._calendar.isValid(t,i,n))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+w(Math.abs(this.year()),4)+"-"+w(this.month(),2)+"-"+w(this.day(),2)}}),_(b.prototype,{_validateLevel:0,newDate:function(t,i,n){return t==null?this.today():(t.year&&(this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),n=t.day(),i=t.month(),t=t.year()),new r(this,t,i,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+w(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,i){var n=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,n){var a=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,n){var a=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(t,i,n){return this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),{}},add:function(t,i,n){return this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,n),i,n)},_add:function(t,i,n){if(this._validateLevel++,n==="d"||n==="w"){var a=t.toJD()+i*(n==="w"?this.daysInWeek():1),s=t.calendar().fromJD(a);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var l=t.year()+(n==="y"?i:0),u=t.monthOfYear()+(n==="m"?i:0);s=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),s=Math.min(s,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):n==="m"&&(function(f){for(;u<f.minMonth;)l--,u+=f.monthsInYear(l);for(var m=f.monthsInYear(l);u>m-1+f.minMonth;)l++,u-=m,m=f.monthsInYear(l)}(this),s=Math.min(s,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var p=[l,this.fromMonthOfYear(l,u),s];return this._validateLevel--,p}catch(f){throw this._validateLevel--,f}},_correctAdd:function(t,i,n,a){if(!(this.hasYearZero||a!=="y"&&a!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a],l=n<0?-1:1;i=this._add(t,n*s[0]+l*s[1],s[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,n){this._validate(t,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate);var a=n==="y"?i:t.year(),s=n==="m"?i:t.month(),l=n==="d"?i:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(a,s))),t.date(a,s,l)},isValid:function(t,i,n){this._validateLevel++;var a=this.hasYearZero||t!==0;if(a){var s=this.newDate(t,i,this.minDay);a=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(s)}return this._validateLevel--,a},toJSDate:function(t,i,n){var a=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);return o.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(t){return this.fromJD(o.instance().fromJSDate(t).toJD())},_validate:function(t,i,n,a){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,n))throw a.replace(/\{0\}/,this.local.name);var s=this.newDate(t,i,n);return this._validateLevel--,s}catch(l){throw this._validateLevel--,l}}}),c.prototype=new b,_(c.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,n){var a=this.newDate(t,i,n);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var n=this._validate(t,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,i,n){return(this.dayOfWeek(t,i,n)||7)<6},toJD:function(t,i,n){var a=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate);t=a.year(),i=a.month(),n=a.day(),t<0&&t++,i<3&&(i+=12,t--);var s=Math.floor(t/100),l=2-s+Math.floor(s/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+n+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),n=Math.floor((i-186721625e-2)/36524.25),a=1524+(n=i+1+n-Math.floor(n/4)),s=Math.floor((a-122.1)/365.25),l=Math.floor(365.25*s),u=Math.floor((a-l)/30.6001),p=a-l-Math.floor(30.6001*u),f=u-(u>13.5?13:1),m=s-(f>2.5?4716:4715);return m<=0&&m--,this.newDate(m,f,p)},toJSDate:function(t,i,n){var a=this._validate(t,i,n,o.local.invalidDate||o.regionalOptions[""].invalidDate),s=new Date(a.year(),a.month()-1,a.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var o=R.exports=new T;o.cdate=r,o.baseCalendar=b,o.calendars.gregorian=c},15168:function(R,C,e){var _=e(50896),T=e(38700);_(T.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),T.local=T.regionalOptions[""],_(T.cdate.prototype,{formatDate:function(r,w){return typeof r!="string"&&(w=r,r=""),this._calendar.formatDate(r||"",this,w)}}),_(T.baseCalendar.prototype,{UNIX_EPOCH:T.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:T.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,w,b){if(typeof r!="string"&&(b=w,w=r,r=""),!w)return"";if(w.calendar()!==this)throw T.local.invalidFormat||T.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var c,o,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,n=b.dayNames||this.local.dayNames,a=b.monthNumbers||this.local.monthNumbers,s=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(d,S){for(var k=1;A+k<r.length&&r.charAt(A+k)===d;)k++;return A+=k-1,Math.floor(k/(S||1))>1}),p=function(d,S,k,E){var L=""+S;if(u(d,E))for(;L.length<k;)L="0"+L;return L},f=this,m=function(d){return typeof a=="function"?a.call(f,d,u("m")):v(p("m",d.month(),2))},h=function(d,S){return S?typeof l=="function"?l.call(f,d):l[d.month()-f.minMonth]:typeof s=="function"?s.call(f,d):s[d.month()-f.minMonth]},g=this.local.digits,v=function(d){return b.localNumbers&&g?g(d):d},x="",y=!1,A=0;A<r.length;A++)if(y)r.charAt(A)!=="'"||u("'")?x+=r.charAt(A):y=!1;else switch(r.charAt(A)){case"d":x+=v(p("d",w.day(),2));break;case"D":x+=(c=w.dayOfWeek(),o=i,t=n,u("D")?t[c]:o[c]);break;case"o":x+=p("o",w.dayOfYear(),3);break;case"w":x+=p("w",w.weekOfYear(),2);break;case"m":x+=m(w);break;case"M":x+=h(w,u("M"));break;case"y":x+=u("y",2)?w.year():(w.year()%100<10?"0":"")+w.year()%100;break;case"Y":u("Y",2),x+=w.formatYear();break;case"J":x+=w.toJD();break;case"@":x+=(w.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(w.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?x+="'":y=!0;break;default:x+=r.charAt(A)}return x},parseDate:function(r,w,b){if(w==null)throw T.local.invalidArguments||T.regionalOptions[""].invalidArguments;if((w=typeof w=="object"?w.toString():w+"")==="")return null;r=r||this.local.dateFormat;var c=(b=b||{}).shortYearCutoff||this.shortYearCutoff;c=typeof c!="string"?c:this.today().year()%100+parseInt(c,10);for(var o=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,n=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,s=b.monthNames||this.local.monthNames,l=-1,u=-1,p=-1,f=-1,m=-1,h=!1,g=!1,v=function(F,U){for(var I=1;L+I<r.length&&r.charAt(L+I)===F;)I++;return L+=I-1,Math.floor(I/(U||1))>1},x=function(F,U){var I=v(F,U),N=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(F)+1],W=new RegExp("^-?\\d{1,"+N+"}"),B=w.substring(E).match(W);if(!B)throw(T.local.missingNumberAt||T.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=B[0].length,parseInt(B[0],10)},y=this,A=function(){if(typeof n=="function"){v("m");var F=n.call(y,w.substring(E));return E+=F.length,F}return x("m")},d=function(F,U,I,N){for(var W=v(F,N)?I:U,B=0;B<W.length;B++)if(w.substr(E,W[B].length).toLowerCase()===W[B].toLowerCase())return E+=W[B].length,B+y.minMonth;throw(T.local.unknownNameAt||T.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof s=="function"){var F=v("M")?s.call(y,w.substring(E)):a.call(y,w.substring(E));return E+=F.length,F}return d("M",a,s)},k=function(){if(w.charAt(E)!==r.charAt(L))throw(T.local.unexpectedLiteralAt||T.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,L=0;L<r.length;L++)if(g)r.charAt(L)!=="'"||v("'")?k():g=!1;else switch(r.charAt(L)){case"d":f=x("d");break;case"D":d("D",o,t);break;case"o":m=x("o");break;case"w":x("w");break;case"m":p=A();break;case"M":p=S();break;case"y":var O=L;h=!v("y",2),L=O,u=x("y",2);break;case"Y":u=x("Y",2);break;case"J":l=x("J")+.5,w.charAt(E)==="."&&(E++,x("J"));break;case"@":l=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=w.length;break;case"'":v("'")?k():g=!0;break;default:k()}if(E<w.length)throw T.local.unexpectedText||T.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&h&&(u+=c===-1?1900:this.today().year()-this.today().year()%100-(u<=c?0:100)),typeof p=="string"&&(p=i.call(this,u,p)),m>-1){p=1,f=m;for(var P=this.daysInMonth(u,p);f>P;P=this.daysInMonth(u,p))p++,f-=P}return l>-1?this.fromJD(l):this.newDate(u,p,f)},determineDate:function(r,w,b,c,o){b&&typeof b!="object"&&(o=c,c=b,b=null),typeof c!="string"&&(o=c,c="");var t=this;return w=w?w.newDate():null,r==null?w:typeof r=="string"?function(i){try{return t.parseDate(c,i,o)}catch{}for(var n=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=a.exec(i);s;)n.add(parseInt(s[1],10),s[2]||"d"),s=a.exec(i);return n}(r):typeof r=="number"?isNaN(r)||r===1/0||r===-1/0?w:t.today().add(r,"d"):t.newDate(r)}})},21576:function(){},19768:function(){},63436:function(R,C,e){"use strict";var _=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],T=typeof globalThis>"u"?e.g:globalThis;R.exports=function(){for(var r=[],w=0;w<_.length;w++)typeof T[_[w]]=="function"&&(r[r.length]=_[w]);return r}},67756:function(R,C,e){"use strict";function _(fe,pe,ge){fe.prototype=pe.prototype=ge,ge.constructor=fe}function T(fe,pe){var ge=Object.create(fe.prototype);for(var ke in pe)ge[ke]=pe[ke];return ge}function r(){}e.d(C,{qy:function(){return me},Gz:function(){return ee}});var w=.7,b=1/w,c="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(c,",").concat(c,",").concat(c,"\\)$")),a=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),s=new RegExp("^rgba\\(".concat(c,",").concat(c,",").concat(c,",").concat(o,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(o,"\\)$")),u=new RegExp("^hsl\\(".concat(o,",").concat(t,",").concat(t,"\\)$")),p=new RegExp("^hsla\\(".concat(o,",").concat(t,",").concat(t,",").concat(o,"\\)$")),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function h(){return this.rgb().formatRgb()}function g(fe){var pe,ge;return fe=(fe+"").trim().toLowerCase(),(pe=i.exec(fe))?(ge=pe[1].length,pe=parseInt(pe[1],16),ge===6?v(pe):ge===3?new A(pe>>8&15|pe>>4&240,pe>>4&15|240&pe,(15&pe)<<4|15&pe,1):ge===8?x(pe>>24&255,pe>>16&255,pe>>8&255,(255&pe)/255):ge===4?x(pe>>12&15|pe>>8&240,pe>>8&15|pe>>4&240,pe>>4&15|240&pe,((15&pe)<<4|15&pe)/255):null):(pe=n.exec(fe))?new A(pe[1],pe[2],pe[3],1):(pe=a.exec(fe))?new A(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,1):(pe=s.exec(fe))?x(pe[1],pe[2],pe[3],pe[4]):(pe=l.exec(fe))?x(255*pe[1]/100,255*pe[2]/100,255*pe[3]/100,pe[4]):(pe=u.exec(fe))?O(pe[1],pe[2]/100,pe[3]/100,1):(pe=p.exec(fe))?O(pe[1],pe[2]/100,pe[3]/100,pe[4]):f.hasOwnProperty(fe)?v(f[fe]):fe==="transparent"?new A(NaN,NaN,NaN,0):null}function v(fe){return new A(fe>>16&255,fe>>8&255,255&fe,1)}function x(fe,pe,ge,ke){return ke<=0&&(fe=pe=ge=NaN),new A(fe,pe,ge,ke)}function y(fe,pe,ge,ke){return arguments.length===1?((Ce=fe)instanceof r||(Ce=g(Ce)),Ce?new A((Ce=Ce.rgb()).r,Ce.g,Ce.b,Ce.opacity):new A):new A(fe,pe,ge,ke??1);var Ce}function A(fe,pe,ge,ke){this.r=+fe,this.g=+pe,this.b=+ge,this.opacity=+ke}function d(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b))}function S(){var fe=k(this.opacity);return"".concat(fe===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(fe===1?")":", ".concat(fe,")"))}function k(fe){return isNaN(fe)?1:Math.max(0,Math.min(1,fe))}function E(fe){return Math.max(0,Math.min(255,Math.round(fe)||0))}function L(fe){return((fe=E(fe))<16?"0":"")+fe.toString(16)}function O(fe,pe,ge,ke){return ke<=0?fe=pe=ge=NaN:ge<=0||ge>=1?fe=pe=NaN:pe<=0&&(fe=NaN),new F(fe,pe,ge,ke)}function P(fe){if(fe instanceof F)return new F(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof r||(fe=g(fe)),!fe)return new F;if(fe instanceof F)return fe;var pe=(fe=fe.rgb()).r/255,ge=fe.g/255,ke=fe.b/255,Ce=Math.min(pe,ge,ke),de=Math.max(pe,ge,ke),ae=NaN,re=de-Ce,he=(de+Ce)/2;return re?(ae=pe===de?(ge-ke)/re+6*(ge<ke):ge===de?(ke-pe)/re+2:(pe-ge)/re+4,re/=he<.5?de+Ce:2-de-Ce,ae*=60):re=he>0&&he<1?0:ae,new F(ae,re,he,fe.opacity)}function F(fe,pe,ge,ke){this.h=+fe,this.s=+pe,this.l=+ge,this.opacity=+ke}function U(fe){return(fe=(fe||0)%360)<0?fe+360:fe}function I(fe){return Math.max(0,Math.min(1,fe||0))}function N(fe,pe,ge){return 255*(fe<60?pe+(ge-pe)*fe/60:fe<180?ge:fe<240?pe+(ge-pe)*(240-fe)/60:pe)}function W(fe,pe,ge,ke,Ce){var de=fe*fe,ae=de*fe;return((1-3*fe+3*de-ae)*pe+(4-6*de+3*ae)*ge+(1+3*fe+3*de-3*ae)*ke+ae*Ce)/6}_(r,g,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:h,toString:h}),_(A,y,T(r,{brighter:function(fe){return fe=fe==null?b:Math.pow(b,fe),new A(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=fe==null?w:Math.pow(w,fe),new A(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},clamp:function(){return new A(E(this.r),E(this.g),E(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d,formatHex:d,formatHex8:function(){return"#".concat(L(this.r)).concat(L(this.g)).concat(L(this.b)).concat(L(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),_(F,function(fe,pe,ge,ke){return arguments.length===1?P(fe):new F(fe,pe,ge,ke??1)},T(r,{brighter:function(fe){return fe=fe==null?b:Math.pow(b,fe),new F(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=fe==null?w:Math.pow(w,fe),new F(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),pe=isNaN(fe)||isNaN(this.s)?0:this.s,ge=this.l,ke=ge+(ge<.5?ge:1-ge)*pe,Ce=2*ge-ke;return new A(N(fe>=240?fe-240:fe+120,Ce,ke),N(fe,Ce,ke),N(fe<120?fe+240:fe-120,Ce,ke),this.opacity)},clamp:function(){return new F(U(this.h),I(this.s),I(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=k(this.opacity);return"".concat(fe===1?"hsl(":"hsla(").concat(U(this.h),", ").concat(100*I(this.s),"%, ").concat(100*I(this.l),"%").concat(fe===1?")":", ".concat(fe,")"))}}));var B=function(fe){return function(){return fe}};function V(fe,pe){var ge=pe-fe;return ge?function(ke,Ce){return function(de){return ke+de*Ce}}(fe,ge):B(isNaN(fe)?pe:fe)}var q=function fe(pe){var ge=function(Ce){return(Ce=+Ce)==1?V:function(de,ae){return ae-de?function(re,he,Se){return re=Math.pow(re,Se),he=Math.pow(he,Se)-re,Se=1/Se,function(xe){return Math.pow(re+xe*he,Se)}}(de,ae,Ce):B(isNaN(de)?ae:de)}}(pe);function ke(Ce,de){var ae=ge((Ce=y(Ce)).r,(de=y(de)).r),re=ge(Ce.g,de.g),he=ge(Ce.b,de.b),Se=V(Ce.opacity,de.opacity);return function(xe){return Ce.r=ae(xe),Ce.g=re(xe),Ce.b=he(xe),Ce.opacity=Se(xe),Ce+""}}return ke.gamma=fe,ke}(1);function ne(fe){return function(pe){var ge,ke,Ce=pe.length,de=new Array(Ce),ae=new Array(Ce),re=new Array(Ce);for(ge=0;ge<Ce;++ge)ke=y(pe[ge]),de[ge]=ke.r||0,ae[ge]=ke.g||0,re[ge]=ke.b||0;return de=fe(de),ae=fe(ae),re=fe(re),ke.opacity=1,function(he){return ke.r=de(he),ke.g=ae(he),ke.b=re(he),ke+""}}}function $(fe,pe){var ge,ke=pe?pe.length:0,Ce=fe?Math.min(ke,fe.length):0,de=new Array(Ce),ae=new Array(ke);for(ge=0;ge<Ce;++ge)de[ge]=me(fe[ge],pe[ge]);for(;ge<ke;++ge)ae[ge]=pe[ge];return function(re){for(ge=0;ge<Ce;++ge)ae[ge]=de[ge](re);return ae}}function K(fe,pe){var ge=new Date;return fe=+fe,pe=+pe,function(ke){return ge.setTime(fe*(1-ke)+pe*ke),ge}}function ee(fe,pe){return fe=+fe,pe=+pe,function(ge){return fe*(1-ge)+pe*ge}}function J(fe){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},J(fe)}function Z(fe,pe){var ge,ke={},Ce={};for(ge in fe!==null&&J(fe)==="object"||(fe={}),pe!==null&&J(pe)==="object"||(pe={}),pe)ge in fe?ke[ge]=me(fe[ge],pe[ge]):Ce[ge]=pe[ge];return function(de){for(ge in ke)Ce[ge]=ke[ge](de);return Ce}}ne(function(fe){var pe=fe.length-1;return function(ge){var ke=ge<=0?ge=0:ge>=1?(ge=1,pe-1):Math.floor(ge*pe),Ce=fe[ke],de=fe[ke+1],ae=ke>0?fe[ke-1]:2*Ce-de,re=ke<pe-1?fe[ke+2]:2*de-Ce;return W((ge-ke/pe)*pe,ae,Ce,de,re)}}),ne(function(fe){var pe=fe.length;return function(ge){var ke=Math.floor(((ge%=1)<0?++ge:ge)*pe),Ce=fe[(ke+pe-1)%pe],de=fe[ke%pe],ae=fe[(ke+1)%pe],re=fe[(ke+2)%pe];return W((ge-ke/pe)*pe,Ce,de,ae,re)}});var te=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oe=new RegExp(te.source,"g");function se(fe,pe){var ge,ke,Ce,de=te.lastIndex=oe.lastIndex=0,ae=-1,re=[],he=[];for(fe+="",pe+="";(ge=te.exec(fe))&&(ke=oe.exec(pe));)(Ce=ke.index)>de&&(Ce=pe.slice(de,Ce),re[ae]?re[ae]+=Ce:re[++ae]=Ce),(ge=ge[0])===(ke=ke[0])?re[ae]?re[ae]+=ke:re[++ae]=ke:(re[++ae]=null,he.push({i:ae,x:ee(ge,ke)})),de=oe.lastIndex;return de<pe.length&&(Ce=pe.slice(de),re[ae]?re[ae]+=Ce:re[++ae]=Ce),re.length<2?he[0]?function(Se){return function(xe){return Se(xe)+""}}(he[0].x):function(Se){return function(){return Se}}(pe):(pe=he.length,function(Se){for(var xe,Te=0;Te<pe;++Te)re[(xe=he[Te]).i]=xe.x(Se);return re.join("")})}function ce(fe,pe){pe||(pe=[]);var ge,ke=fe?Math.min(pe.length,fe.length):0,Ce=pe.slice();return function(de){for(ge=0;ge<ke;++ge)Ce[ge]=fe[ge]*(1-de)+pe[ge]*de;return Ce}}function ye(fe){return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},ye(fe)}function me(fe,pe){var ge,ke,Ce=ye(pe);return pe==null||Ce==="boolean"?B(pe):(Ce==="number"?ee:Ce==="string"?(ge=g(pe))?(pe=ge,q):se:pe instanceof g?q:pe instanceof Date?K:(ke=pe,!ArrayBuffer.isView(ke)||ke instanceof DataView?Array.isArray(pe)?$:typeof pe.valueOf!="function"&&typeof pe.toString!="function"||isNaN(pe)?Z:ee:ce))(fe,pe)}},30584:function(R){"use strict";R.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(R){"use strict";R.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(R){"use strict";R.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(R){"use strict";R.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(R){"use strict";R.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(R){"use strict";R.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},be={};function Re(R){var C=be[R];if(C!==void 0)return C.exports;var e=be[R]={exports:{}};return qe[R].call(e.exports,e,e.exports,Re),e.exports}return Re.n=function(R){var C=R&&R.__esModule?function(){return R.default}:function(){return R};return Re.d(C,{a:C}),C},Re.d=function(R,C){for(var e in C)Re.o(C,e)&&!Re.o(R,e)&&Object.defineProperty(R,e,{enumerable:!0,get:C[e]})},Re.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Re.o=function(R,C){return Object.prototype.hasOwnProperty.call(R,C)},Re.r=function(R){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})},Re(13792)}()})});var n0=js((Ey,Af)=>{"use strict";var Zg=function(){"use strict";function qe(_,T,r,w){var b;typeof T=="object"&&(r=T.depth,w=T.prototype,b=T.filter,T=T.circular);var c=[],o=[],t=typeof Buffer<"u";typeof T>"u"&&(T=!0),typeof r>"u"&&(r=1/0);function i(n,a){if(n===null)return null;if(a==0)return n;var s,l;if(typeof n!="object")return n;if(qe.__isArray(n))s=[];else if(qe.__isRegExp(n))s=new RegExp(n.source,e(n)),n.lastIndex&&(s.lastIndex=n.lastIndex);else if(qe.__isDate(n))s=new Date(n.getTime());else{if(t&&Buffer.isBuffer(n))return Buffer.allocUnsafe?s=Buffer.allocUnsafe(n.length):s=new Buffer(n.length),n.copy(s),s;typeof w>"u"?(l=Object.getPrototypeOf(n),s=Object.create(l)):(s=Object.create(w),l=w)}if(T){var u=c.indexOf(n);if(u!=-1)return o[u];c.push(n),o.push(s)}for(var p in n){var f;l&&(f=Object.getOwnPropertyDescriptor(l,p)),!(f&&f.set==null)&&(s[p]=i(n[p],a-1))}return s}return i(_,r)}qe.clonePrototype=function(T){if(T===null)return null;var r=function(){};return r.prototype=T,new r};function be(_){return Object.prototype.toString.call(_)}qe.__objToStr=be;function Re(_){return typeof _=="object"&&be(_)==="[object Date]"}qe.__isDate=Re;function R(_){return typeof _=="object"&&be(_)==="[object Array]"}qe.__isArray=R;function C(_){return typeof _=="object"&&be(_)==="[object RegExp]"}qe.__isRegExp=C;function e(_){var T="";return _.global&&(T+="g"),_.ignoreCase&&(T+="i"),_.multiline&&(T+="m"),T}return qe.__getRegExpFlags=e,qe}();typeof Af=="object"&&Af.exports&&(Af.exports=Zg)});var i0=js((Cy,r0)=>{"use strict";var Xg=n0();r0.exports=function(qe,be){return qe=qe||{},Object.keys(be).forEach(function(Re){typeof qe[Re]>"u"&&(qe[Re]=Xg(be[Re]))}),qe}});var o0=js((Dy,a0)=>{"use strict";a0.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]});var c0=js((Ly,Ih)=>{"use strict";var Jg=i0(),Tc=o0(),l0={nul:0,control:0};Ih.exports=function(be){return u0(be,l0)};Ih.exports.config=function(qe){return qe=Jg(qe||{},l0),function(Re){return u0(Re,qe)}};function u0(qe,be){if(typeof qe!="string")return s0(qe,be);for(var Re=0,R=0;R<qe.length;R++){var C=s0(qe.charCodeAt(R),be);if(C<0)return-1;Re+=C}return Re}function s0(qe,be){return qe===0?be.nul:qe<32||qe>=127&&qe<160?be.control:Kg(qe)?0:1+(qe>=4352&&(qe<=4447||qe==9001||qe==9002||qe>=11904&&qe<=42191&&qe!=12351||qe>=44032&&qe<=55203||qe>=63744&&qe<=64255||qe>=65040&&qe<=65049||qe>=65072&&qe<=65135||qe>=65280&&qe<=65376||qe>=65504&&qe<=65510||qe>=131072&&qe<=196605||qe>=196608&&qe<=262141))}function Kg(qe){var be=0,Re=Tc.length-1,R;if(qe<Tc[0][0]||qe>Tc[Re][1])return!1;for(;Re>=be;)if(R=Math.floor((be+Re)/2),qe>Tc[R][1])be=R+1;else if(qe<Tc[R][0])Re=R-1;else return!0;return!1}});var d0=js((Iy,p0)=>{"use strict";var Oh;try{Oh=c0()}catch{}p0.exports=Ni;function Ni(){this.rows=[],this.row={__printers:{}}}Ni.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this};Ni.prototype.cell=function(qe,be,Re){return this.row[qe]=be,this.row.__printers[qe]=Re||Ac,this};Ni.prototype.separator="  ";function Ac(qe){return qe===void 0?"":""+qe}function Fh(qe){var be=qe.replace(/\u001b\[\d+m/g,"");return Oh==null?be.length:Oh(be)}Ni.string=Ac;Ni.leftPadder=zh;function zh(qe){return function(be,Re){var R=Ac(be),C=Fh(R),e=Re>C?Array(Re-C+1).join(qe):"";return e+R}}var Rh=Ni.padLeft=zh(" ");Ni.rightPadder=f0;function f0(qe){return function(Re,R){var C=Ac(Re),e=Fh(C),_=R>e?Array(R-e+1).join(qe):"";return C+_}}var $g=f0(" ");Ni.number=function(qe){return function(be,Re){if(be==null)return"";if(typeof be!="number")throw new Error(""+be+" is not a number");var R=qe==null?be+"":be.toFixed(qe);return Rh(R,Re)}};function h0(qe,be){for(var Re in qe)Re!="__printers"&&be(Re,qe[Re])}Ni.prototype.columns=function(){for(var qe={},be=0;be<2;be++)this.rows.forEach(function(Re){var R=0;h0(Re,function(C){R=Math.max(R,qe[C]||0),qe[C]=R,R++})});return Object.keys(qe).sort(function(Re,R){return qe[Re]-qe[R]})};Ni.prototype.print=function(){var qe=this.columns(),be=this.separator,Re={},R="";return this.rows.forEach(function(C){h0(C,function(e,_){var T=C.__printers[e].call(C,_);Re[e]=Math.max(Fh(T),Re[e]||0)})}),this.rows.forEach(function(C){var e="";qe.forEach(function(_){var T=Re[_],r=C.hasOwnProperty(_)?""+C.__printers[_].call(C,C[_],T):"";e+=$g(r,T)+be}),e=e.slice(0,-be.length),R+=e+`
`}),R};Ni.prototype.toString=function(){var qe=this.columns(),be=new Ni;return be.separator=this.separator,qe.forEach(function(Re){be.cell(Re,Re)}),be.newRow(),be.pushDelimeter(qe),be.rows=be.rows.concat(this.rows),this.totals&&this.rows.length&&(be.pushDelimeter(qe),this.forEachTotal(be.cell.bind(be)),be.newRow()),be.print()};Ni.prototype.pushDelimeter=function(qe){return qe=qe||this.columns(),qe.forEach(function(be){this.cell(be,void 0,zh("-"))},this),this.newRow()};Ni.prototype.forEachTotal=function(qe){for(var be in this.totals){var Re=this.totals[be],R=Re.init,C=this.rows.length;this.rows.forEach(function(e,_){R=Re.reduce.call(e,R,e[be],_,C)}),qe(be,R,Re.printer)}};Ni.prototype.printTransposed=function(qe){qe=qe||{};var be=new Ni;return be.separator=qe.separator||this.separator,this.columns().forEach(function(Re){be.cell(0,Re,qe.namePrinter),this.rows.forEach(function(R,C){be.cell(C+1,R[Re],R.__printers[Re])}),be.newRow()},this),be.print()};Ni.prototype.sort=function(qe){if(typeof qe=="function")return this.rows.sort(qe),this;var be=Array.isArray(qe)?qe:this.columns(),Re=be.map(function(R){var C="asc",e=/(.*)\|\s*(asc|des)\s*$/.exec(R);return e&&(R=e[1],C=e[2]),function(_,T){return C=="asc"?Ph(_[R],T[R]):Ph(T[R],_[R])}});return this.sort(function(R,C){for(var e=0;e<Re.length;e++){var _=Re[e](R,C);if(_!=0)return _}return 0})};function Ph(qe,be){return qe===be?0:qe===void 0?1:be===void 0?-1:qe===null?1:be===null?-1:qe>be?1:qe<be?-1:Ph(String(qe),String(be))}Ni.prototype.total=function(qe,be){return be=be||{},this.totals=this.totals||{},this.totals[qe]={reduce:be.reduce||Ni.aggr.sum,printer:be.printer||Rh,init:be.init==null?0:be.init},this};Ni.aggr={};Ni.aggr.printer=function(qe,be){return be=be||Ac,function(Re,R){return Rh(qe+be(Re),R)}};Ni.aggr.sum=function(qe,be){return qe+be};Ni.aggr.avg=function(qe,be,Re,R){return qe=qe+be,Re+1==R?qe/R:qe};Ni.print=function(qe,be,Re){var R=be||{};be=typeof be=="function"?be:function(_,T){for(var r in _)if(_.hasOwnProperty(r)){var w=R[r]||{};T(w.name||r,_[r],w.printer)}};var C=new Ni,e=C.cell.bind(C);return Array.isArray(qe)?(Re=Re||function(_){return _.toString()},qe.forEach(function(_){be(_,e),C.newRow()})):(Re=Re||function(_){return _.printTransposed({separator:" : "})},be(qe,e),C.newRow()),Re(C)};Ni.log=function(qe,be,Re){console.log(Ni.print(qe,be,Re))};Ni.prototype.log=function(){console.log(this.toString())}});var C0=js((By,E0)=>{"use strict";var Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(qe){return typeof qe}:function(qe){return qe&&typeof Symbol=="function"&&qe.constructor===Symbol&&qe!==Symbol.prototype?"symbol":typeof qe},s1=function(qe,be){if(be===void 0||typeof be=="string"){if(typeof qe<"u"&&typeof be=="string"){var Re=/[.\[\]'"]/g,R=be.split(Re).filter(function(C){return C!==""});qe=R.reduce(function(C,e){return C&&C[e]!=="undefined"?C[e]:void 0},qe)}return qe}},Cf=function(qe){if(Object.prototype.toString.call(qe)==="[object Array]")qe.forEach(function(be){return Cf(be)});else if(Object.prototype.toString.call(qe)==="[object Object]")Object.keys(qe).forEach(function(be){return Cf(qe[be])});else return typeof qe>"u"?"undefined":Vh(qe);return qe},Df=function(qe,be){var Re=!1;if(Object.prototype.toString.call(qe)==="[object Array]")if(be.length)for(var R=0;R<qe.length;R+=1){if(!Df(qe[R],be[R])){Re=!1;break}Re=!0}else return!0;else if(Object.prototype.toString.call(qe)==="[object Object]")for(var C in qe){if(!Df(qe[C],be[C])){Re=!1;break}Re=!0}else return(typeof be>"u"?"undefined":Vh(be))===(typeof qe>"u"?"undefined":Vh(qe));return Re},l1=function(qe,be){var Re=Cf(be);return Df(qe,Re)?qe:-1};E0.exports={getNestedObject:s1,buildSchema:Cf,getSchemaMatch:Df,convertSchemaAndGetMatch:l1}});var O0=js((Lf,I0)=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(qe){return typeof qe}:function(qe){return qe&&typeof Symbol=="function"&&qe.constructor===Symbol&&qe!==Symbol.prototype?"symbol":typeof qe},u1=function(){function qe(be,Re){for(var R,C=0;C<Re.length;C++)R=Re[C],R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(be,R.key,R)}return function(be,Re,R){return Re&&qe(be.prototype,Re),R&&qe(be,R),be}}(),D0=C0();function c1(qe,be){if(!(qe instanceof be))throw new TypeError("Cannot call a class as a function")}var L0=function(){function qe(){var be=this;c1(this,qe),this.t=function(Re,R){if(be.input=Re,be.schemaCheck=null,R)if(typeof R=="string")be.input=(0,D0.getNestedObject)(be.input,R);else{var C=(0,D0.convertSchemaAndGetMatch)(be.input,R);C===-1?(be.schemaCheck=!1,be.input=Re):(be.schemaCheck=!0,be.input=C)}return be}}return u1(qe,[{key:"isValid",get:function(){return this.schemaCheck!==null&&this.schemaCheck===!0&&this.input!==null&&this.input!==void 0}},{key:"isDefined",get:function(){return typeof this.input<"u"}},{key:"isUndefined",get:function(){return typeof this.input>"u"}},{key:"isNull",get:function(){return this.input===null&&Hu(this.input)==="object"}},{key:"isNullOrUndefined",get:function(){return!!(this.isNull||this.isUndefined)}},{key:"isBoolean",get:function(){return Hu(this.input)===Hu(!0)}},{key:"isTrue",get:function(){return this.input===!0}},{key:"isFalse",get:function(){return this.input===!1}},{key:"isTruthy",get:function(){return!!this.input}},{key:"isFalsy",get:function(){return!this.input}},{key:"isObject",get:function(){return Hu(this.input)==="object"&&this.input===Object(this.input)&&Object.prototype.toString.call(this.input)!=="[object Array]"&&Object.prototype.toString.call(this.input)!=="[object Date]"}},{key:"isEmptyObject",get:function(){return!!(this.isObject&&Object.keys(this.input).length===0)}},{key:"isString",get:function(){return typeof this.input=="string"}},{key:"isEmptyString",get:function(){return!!(this.isString&&this.input.length===0)}},{key:"isNumber",get:function(){return!!Number.isFinite(this.input)}},{key:"isArray",get:function(){return!!Array.isArray(this.input)}},{key:"isEmptyArray",get:function(){return!!(this.isArray&&this.input.length===0)}},{key:"isFunction",get:function(){return typeof this.input=="function"}},{key:"isDate",get:function(){return this.input instanceof Date||Object.prototype.toString.call(this.input)==="[object Date]"}},{key:"isSymbol",get:function(){return Hu(this.input)==="symbol"||Hu(this.input)==="object"&&Object.prototype.toString.call(this.input)==="[object Symbol]"}},{key:"safeObject",get:function(){return this.input}},{key:"safeObjectOrEmpty",get:function(){return this.input?this.input:{}}},{key:"safeString",get:function(){return this.isString?this.input:""}},{key:"safeNumber",get:function(){return this.isNumber?this.input:0}},{key:"safeBoolean",get:function(){return!!this.isBoolean&&this.input}},{key:"safeFunction",get:function(){return this.isFunction?this.input:function(){}}},{key:"safeArray",get:function(){return this.isArray?this.input:this.isNullOrUndefined?[]:[this.input]}}]),qe}();L0.Schema={Number:1,String:"typy",Boolean:!0,Null:null,Undefined:void 0,Array:[],Function:function(){},Date:new Date,Symbol:Symbol("")},Lf.default=L0,I0.exports=Lf.default});var P0=js(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.addCustomTypes=Fl.Schema=Fl.t=void 0;var f1=O0(),qh=h1(f1);function h1(qe){return qe&&qe.__esModule?qe:{default:qe}}var If=function(qe,be){return new qh.default().t(qe,be)},p1=qh.default.Schema,d1=function(qe){if(If(qe).isObject)Object.keys(qe).forEach(function(be){if(If(qe[be]).isFunction)qh.default.prototype.__defineGetter__(be,function(){return qe[be](this.input)});else throw new Error("validator "+be+" is not a function")});else throw new Error("validators must be key value pairs")};Fl.default=If,Fl.t=If,Fl.Schema=p1,Fl.addCustomTypes=d1});var F0=js((Hh,Gh)=>{"use strict";(function(qe,be){typeof Hh=="object"&&typeof Gh<"u"?Gh.exports=be():typeof define=="function"&&define.amd?define(be):qe.JSON5=be()})(Hh,function(){"use strict";function qe(pt,vt){return vt={exports:{}},pt(vt,vt.exports),vt.exports}var be=qe(function(pt){var vt=pt.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=vt)}),Re=qe(function(pt){var vt=pt.exports={version:"2.6.5"};typeof __e=="number"&&(__e=vt)}),R=Re.version,C=function(pt){return typeof pt=="object"?pt!==null:typeof pt=="function"},e=function(pt){if(!C(pt))throw TypeError(pt+" is not an object!");return pt},_=function(pt){try{return!!pt()}catch{return!0}},T=!_(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),r=be.document,w=C(r)&&C(r.createElement),b=function(pt){return w?r.createElement(pt):{}},c=!T&&!_(function(){return Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a!=7}),o=function(pt,vt){if(!C(pt))return pt;var We,Ze;if(vt&&typeof(We=pt.toString)=="function"&&!C(Ze=We.call(pt))||typeof(We=pt.valueOf)=="function"&&!C(Ze=We.call(pt))||!vt&&typeof(We=pt.toString)=="function"&&!C(Ze=We.call(pt)))return Ze;throw TypeError("Can't convert object to primitive value")},t=Object.defineProperty,i=T?Object.defineProperty:function(vt,We,Ze){if(e(vt),We=o(We,!0),e(Ze),c)try{return t(vt,We,Ze)}catch{}if("get"in Ze||"set"in Ze)throw TypeError("Accessors not supported!");return"value"in Ze&&(vt[We]=Ze.value),vt},n={f:i},a=function(pt,vt){return{enumerable:!(pt&1),configurable:!(pt&2),writable:!(pt&4),value:vt}},s=T?function(pt,vt,We){return n.f(pt,vt,a(1,We))}:function(pt,vt,We){return pt[vt]=We,pt},l={}.hasOwnProperty,u=function(pt,vt){return l.call(pt,vt)},p=0,f=Math.random(),m=function(pt){return"Symbol(".concat(pt===void 0?"":pt,")_",(++p+f).toString(36))},h=!1,g=qe(function(pt){var vt="__core-js_shared__",We=be[vt]||(be[vt]={});(pt.exports=function(Ze,Ne){return We[Ze]||(We[Ze]=Ne!==void 0?Ne:{})})("versions",[]).push({version:Re.version,mode:h?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),v=g("native-function-to-string",Function.toString),x=qe(function(pt){var vt=m("src"),We="toString",Ze=(""+v).split(We);Re.inspectSource=function(Ne){return v.call(Ne)},(pt.exports=function(Ne,Xe,st,lt){var xt=typeof st=="function";xt&&(u(st,"name")||s(st,"name",Xe)),Ne[Xe]!==st&&(xt&&(u(st,vt)||s(st,vt,Ne[Xe]?""+Ne[Xe]:Ze.join(String(Xe)))),Ne===be?Ne[Xe]=st:lt?Ne[Xe]?Ne[Xe]=st:s(Ne,Xe,st):(delete Ne[Xe],s(Ne,Xe,st)))})(Function.prototype,We,function(){return typeof this=="function"&&this[vt]||v.call(this)})}),y=function(pt){if(typeof pt!="function")throw TypeError(pt+" is not a function!");return pt},A=function(pt,vt,We){if(y(pt),vt===void 0)return pt;switch(We){case 1:return function(Ze){return pt.call(vt,Ze)};case 2:return function(Ze,Ne){return pt.call(vt,Ze,Ne)};case 3:return function(Ze,Ne,Xe){return pt.call(vt,Ze,Ne,Xe)}}return function(){return pt.apply(vt,arguments)}},d="prototype",S=function(pt,vt,We){var Ze=pt&S.F,Ne=pt&S.G,Xe=pt&S.S,st=pt&S.P,lt=pt&S.B,xt=Ne?be:Xe?be[vt]||(be[vt]={}):(be[vt]||{})[d],bt=Ne?Re:Re[vt]||(Re[vt]={}),Ve=bt[d]||(bt[d]={}),Be,at,ht,dt;Ne&&(We=vt);for(Be in We)at=!Ze&&xt&&xt[Be]!==void 0,ht=(at?xt:We)[Be],dt=lt&&at?A(ht,be):st&&typeof ht=="function"?A(Function.call,ht):ht,xt&&x(xt,Be,ht,pt&S.U),bt[Be]!=ht&&s(bt,Be,dt),st&&Ve[Be]!=ht&&(Ve[Be]=ht)};be.core=Re,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var k=S,E=Math.ceil,L=Math.floor,O=function(pt){return isNaN(pt=+pt)?0:(pt>0?L:E)(pt)},P=function(pt){if(pt==null)throw TypeError("Can't call method on  "+pt);return pt},F=function(pt){return function(vt,We){var Ze=String(P(vt)),Ne=O(We),Xe=Ze.length,st,lt;return Ne<0||Ne>=Xe?pt?"":void 0:(st=Ze.charCodeAt(Ne),st<55296||st>56319||Ne+1===Xe||(lt=Ze.charCodeAt(Ne+1))<56320||lt>57343?pt?Ze.charAt(Ne):st:pt?Ze.slice(Ne,Ne+2):(st-55296<<10)+(lt-56320)+65536)}},U=F(!1);k(k.P,"String",{codePointAt:function(vt){return U(this,vt)}});var I=Re.String.codePointAt,N=Math.max,W=Math.min,B=function(pt,vt){return pt=O(pt),pt<0?N(pt+vt,0):W(pt,vt)},V=String.fromCharCode,q=String.fromCodePoint;k(k.S+k.F*(!!q&&q.length!=1),"String",{fromCodePoint:function(vt){for(var We=arguments,Ze=[],Ne=arguments.length,Xe=0,st;Ne>Xe;){if(st=+We[Xe++],B(st,1114111)!==st)throw RangeError(st+" is not a valid code point");Ze.push(st<65536?V(st):V(((st-=65536)>>10)+55296,st%1024+56320))}return Ze.join("")}});var ne=Re.String.fromCodePoint,$=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,K=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ee=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,J={Space_Separator:$,ID_Start:K,ID_Continue:ee},Z={isSpaceSeparator:function(vt){return typeof vt=="string"&&J.Space_Separator.test(vt)},isIdStartChar:function(vt){return typeof vt=="string"&&(vt>="a"&&vt<="z"||vt>="A"&&vt<="Z"||vt==="$"||vt==="_"||J.ID_Start.test(vt))},isIdContinueChar:function(vt){return typeof vt=="string"&&(vt>="a"&&vt<="z"||vt>="A"&&vt<="Z"||vt>="0"&&vt<="9"||vt==="$"||vt==="_"||vt==="\u200C"||vt==="\u200D"||J.ID_Continue.test(vt))},isDigit:function(vt){return typeof vt=="string"&&/[0-9]/.test(vt)},isHexDigit:function(vt){return typeof vt=="string"&&/[0-9A-Fa-f]/.test(vt)}},te,oe,se,ce,ye,me,fe,pe,ge,ke=function(vt,We){te=String(vt),oe="start",se=[],ce=0,ye=1,me=0,fe=void 0,pe=void 0,ge=void 0;do fe=xe(),Le[oe]();while(fe.type!=="eof");return typeof We=="function"?Ce({"":ge},"",We):ge};function Ce(pt,vt,We){var Ze=pt[vt];if(Ze!=null&&typeof Ze=="object")if(Array.isArray(Ze))for(var Ne=0;Ne<Ze.length;Ne++){var Xe=String(Ne),st=Ce(Ze,Xe,We);st===void 0?delete Ze[Xe]:Object.defineProperty(Ze,Xe,{value:st,writable:!0,enumerable:!0,configurable:!0})}else for(var lt in Ze){var xt=Ce(Ze,lt,We);xt===void 0?delete Ze[lt]:Object.defineProperty(Ze,lt,{value:xt,writable:!0,enumerable:!0,configurable:!0})}return We.call(pt,vt,Ze)}var de,ae,re,he,Se;function xe(){for(de="default",ae="",re=!1,he=1;;){Se=Te();var pt=Pe[de]();if(pt)return pt}}function Te(){if(te[ce])return String.fromCodePoint(te.codePointAt(ce))}function Ae(){var pt=Te();return pt===`
`?(ye++,me=0):pt?me+=pt.length:me++,pt&&(ce+=pt.length),pt}var Pe={default:function(){switch(Se){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Ae();return;case"/":Ae(),de="comment";return;case void 0:return Ae(),De("eof")}if(Z.isSpaceSeparator(Se)){Ae();return}return Pe[oe]()},comment:function(){switch(Se){case"*":Ae(),de="multiLineComment";return;case"/":Ae(),de="singleLineComment";return}throw Je(Ae())},multiLineComment:function(){switch(Se){case"*":Ae(),de="multiLineCommentAsterisk";return;case void 0:throw Je(Ae())}Ae()},multiLineCommentAsterisk:function(){switch(Se){case"*":Ae();return;case"/":Ae(),de="default";return;case void 0:throw Je(Ae())}Ae(),de="multiLineComment"},singleLineComment:function(){switch(Se){case`
`:case"\r":case"\u2028":case"\u2029":Ae(),de="default";return;case void 0:return Ae(),De("eof")}Ae()},value:function(){switch(Se){case"{":case"[":return De("punctuator",Ae());case"n":return Ae(),ve("ull"),De("null",null);case"t":return Ae(),ve("rue"),De("boolean",!0);case"f":return Ae(),ve("alse"),De("boolean",!1);case"-":case"+":Ae()==="-"&&(he=-1),de="sign";return;case".":ae=Ae(),de="decimalPointLeading";return;case"0":ae=Ae(),de="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ae=Ae(),de="decimalInteger";return;case"I":return Ae(),ve("nfinity"),De("numeric",1/0);case"N":return Ae(),ve("aN"),De("numeric",NaN);case'"':case"'":re=Ae()==='"',ae="",de="string";return}throw Je(Ae())},identifierNameStartEscape:function(){if(Se!=="u")throw Je(Ae());Ae();var vt=Fe();switch(vt){case"$":case"_":break;default:if(!Z.isIdStartChar(vt))throw ot();break}ae+=vt,de="identifierName"},identifierName:function(){switch(Se){case"$":case"_":case"\u200C":case"\u200D":ae+=Ae();return;case"\\":Ae(),de="identifierNameEscape";return}if(Z.isIdContinueChar(Se)){ae+=Ae();return}return De("identifier",ae)},identifierNameEscape:function(){if(Se!=="u")throw Je(Ae());Ae();var vt=Fe();switch(vt){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Z.isIdContinueChar(vt))throw ot();break}ae+=vt,de="identifierName"},sign:function(){switch(Se){case".":ae=Ae(),de="decimalPointLeading";return;case"0":ae=Ae(),de="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ae=Ae(),de="decimalInteger";return;case"I":return Ae(),ve("nfinity"),De("numeric",he*(1/0));case"N":return Ae(),ve("aN"),De("numeric",NaN)}throw Je(Ae())},zero:function(){switch(Se){case".":ae+=Ae(),de="decimalPoint";return;case"e":case"E":ae+=Ae(),de="decimalExponent";return;case"x":case"X":ae+=Ae(),de="hexadecimal";return}return De("numeric",he*0)},decimalInteger:function(){switch(Se){case".":ae+=Ae(),de="decimalPoint";return;case"e":case"E":ae+=Ae(),de="decimalExponent";return}if(Z.isDigit(Se)){ae+=Ae();return}return De("numeric",he*Number(ae))},decimalPointLeading:function(){if(Z.isDigit(Se)){ae+=Ae(),de="decimalFraction";return}throw Je(Ae())},decimalPoint:function(){switch(Se){case"e":case"E":ae+=Ae(),de="decimalExponent";return}if(Z.isDigit(Se)){ae+=Ae(),de="decimalFraction";return}return De("numeric",he*Number(ae))},decimalFraction:function(){switch(Se){case"e":case"E":ae+=Ae(),de="decimalExponent";return}if(Z.isDigit(Se)){ae+=Ae();return}return De("numeric",he*Number(ae))},decimalExponent:function(){switch(Se){case"+":case"-":ae+=Ae(),de="decimalExponentSign";return}if(Z.isDigit(Se)){ae+=Ae(),de="decimalExponentInteger";return}throw Je(Ae())},decimalExponentSign:function(){if(Z.isDigit(Se)){ae+=Ae(),de="decimalExponentInteger";return}throw Je(Ae())},decimalExponentInteger:function(){if(Z.isDigit(Se)){ae+=Ae();return}return De("numeric",he*Number(ae))},hexadecimal:function(){if(Z.isHexDigit(Se)){ae+=Ae(),de="hexadecimalInteger";return}throw Je(Ae())},hexadecimalInteger:function(){if(Z.isHexDigit(Se)){ae+=Ae();return}return De("numeric",he*Number(ae))},string:function(){switch(Se){case"\\":Ae(),ae+=we();return;case'"':if(re)return Ae(),De("string",ae);ae+=Ae();return;case"'":if(!re)return Ae(),De("string",ae);ae+=Ae();return;case`
`:case"\r":throw Je(Ae());case"\u2028":case"\u2029":yt(Se);break;case void 0:throw Je(Ae())}ae+=Ae()},start:function(){switch(Se){case"{":case"[":return De("punctuator",Ae())}de="value"},beforePropertyName:function(){switch(Se){case"$":case"_":ae=Ae(),de="identifierName";return;case"\\":Ae(),de="identifierNameStartEscape";return;case"}":return De("punctuator",Ae());case'"':case"'":re=Ae()==='"',de="string";return}if(Z.isIdStartChar(Se)){ae+=Ae(),de="identifierName";return}throw Je(Ae())},afterPropertyName:function(){if(Se===":")return De("punctuator",Ae());throw Je(Ae())},beforePropertyValue:function(){de="value"},afterPropertyValue:function(){switch(Se){case",":case"}":return De("punctuator",Ae())}throw Je(Ae())},beforeArrayValue:function(){if(Se==="]")return De("punctuator",Ae());de="value"},afterArrayValue:function(){switch(Se){case",":case"]":return De("punctuator",Ae())}throw Je(Ae())},end:function(){throw Je(Ae())}};function De(pt,vt){return{type:pt,value:vt,line:ye,column:me}}function ve(pt){for(var vt=0,We=pt;vt<We.length;vt+=1){var Ze=We[vt],Ne=Te();if(Ne!==Ze)throw Je(Ae());Ae()}}function we(){var pt=Te();switch(pt){case"b":return Ae(),"\b";case"f":return Ae(),"\f";case"n":return Ae(),`
`;case"r":return Ae(),"\r";case"t":return Ae(),"	";case"v":return Ae(),"\v";case"0":if(Ae(),Z.isDigit(Te()))throw Je(Ae());return"\0";case"x":return Ae(),Ee();case"u":return Ae(),Fe();case`
`:case"\u2028":case"\u2029":return Ae(),"";case"\r":return Ae(),Te()===`
`&&Ae(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Je(Ae());case void 0:throw Je(Ae())}return Ae()}function Ee(){var pt="",vt=Te();if(!Z.isHexDigit(vt)||(pt+=Ae(),vt=Te(),!Z.isHexDigit(vt)))throw Je(Ae());return pt+=Ae(),String.fromCodePoint(parseInt(pt,16))}function Fe(){for(var pt="",vt=4;vt-- >0;){var We=Te();if(!Z.isHexDigit(We))throw Je(Ae());pt+=Ae()}return String.fromCodePoint(parseInt(pt,16))}var Le={start:function(){if(fe.type==="eof")throw rt();je()},beforePropertyName:function(){switch(fe.type){case"identifier":case"string":pe=fe.value,oe="afterPropertyName";return;case"punctuator":Ge();return;case"eof":throw rt()}},afterPropertyName:function(){if(fe.type==="eof")throw rt();oe="beforePropertyValue"},beforePropertyValue:function(){if(fe.type==="eof")throw rt();je()},beforeArrayValue:function(){if(fe.type==="eof")throw rt();if(fe.type==="punctuator"&&fe.value==="]"){Ge();return}je()},afterPropertyValue:function(){if(fe.type==="eof")throw rt();switch(fe.value){case",":oe="beforePropertyName";return;case"}":Ge()}},afterArrayValue:function(){if(fe.type==="eof")throw rt();switch(fe.value){case",":oe="beforeArrayValue";return;case"]":Ge()}},end:function(){}};function je(){var pt;switch(fe.type){case"punctuator":switch(fe.value){case"{":pt={};break;case"[":pt=[];break}break;case"null":case"boolean":case"numeric":case"string":pt=fe.value;break}if(ge===void 0)ge=pt;else{var vt=se[se.length-1];Array.isArray(vt)?vt.push(pt):Object.defineProperty(vt,pe,{value:pt,writable:!0,enumerable:!0,configurable:!0})}if(pt!==null&&typeof pt=="object")se.push(pt),Array.isArray(pt)?oe="beforeArrayValue":oe="beforePropertyName";else{var We=se[se.length-1];We==null?oe="end":Array.isArray(We)?oe="afterArrayValue":oe="afterPropertyValue"}}function Ge(){se.pop();var pt=se[se.length-1];pt==null?oe="end":Array.isArray(pt)?oe="afterArrayValue":oe="afterPropertyValue"}function Je(pt){return mt(pt===void 0?"JSON5: invalid end of input at "+ye+":"+me:"JSON5: invalid character '"+_t(pt)+"' at "+ye+":"+me)}function rt(){return mt("JSON5: invalid end of input at "+ye+":"+me)}function ot(){return me-=5,mt("JSON5: invalid identifier character at "+ye+":"+me)}function yt(pt){console.warn("JSON5: '"+_t(pt)+"' in strings is not valid ECMAScript; consider escaping")}function _t(pt){var vt={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(vt[pt])return vt[pt];if(pt<" "){var We=pt.charCodeAt(0).toString(16);return"\\x"+("00"+We).substring(We.length)}return pt}function mt(pt){var vt=new SyntaxError(pt);return vt.lineNumber=ye,vt.columnNumber=me,vt}var tt=function(vt,We,Ze){var Ne=[],Xe="",st,lt,xt="",bt;if(We!=null&&typeof We=="object"&&!Array.isArray(We)&&(Ze=We.space,bt=We.quote,We=We.replacer),typeof We=="function")lt=We;else if(Array.isArray(We)){st=[];for(var Ve=0,Be=We;Ve<Be.length;Ve+=1){var at=Be[Ve],ht=void 0;typeof at=="string"?ht=at:(typeof at=="number"||at instanceof String||at instanceof Number)&&(ht=String(at)),ht!==void 0&&st.indexOf(ht)<0&&st.push(ht)}}return Ze instanceof Number?Ze=Number(Ze):Ze instanceof String&&(Ze=String(Ze)),typeof Ze=="number"?Ze>0&&(Ze=Math.min(10,Math.floor(Ze)),xt="          ".substr(0,Ze)):typeof Ze=="string"&&(xt=Ze.substr(0,10)),dt("",{"":vt});function dt(wt,At){var Ft=At[wt];switch(Ft!=null&&(typeof Ft.toJSON5=="function"?Ft=Ft.toJSON5(wt):typeof Ft.toJSON=="function"&&(Ft=Ft.toJSON(wt))),lt&&(Ft=lt.call(At,wt,Ft)),Ft instanceof Number?Ft=Number(Ft):Ft instanceof String?Ft=String(Ft):Ft instanceof Boolean&&(Ft=Ft.valueOf()),Ft){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Ft=="string")return it(Ft,!1);if(typeof Ft=="number")return String(Ft);if(typeof Ft=="object")return Array.isArray(Ft)?St(Ft):kt(Ft)}function it(wt){for(var At={"'":.1,'"':.2},Ft={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},jt="",rn=0;rn<wt.length;rn++){var nn=wt[rn];switch(nn){case"'":case'"':At[nn]++,jt+=nn;continue;case"\0":if(Z.isDigit(wt[rn+1])){jt+="\\x00";continue}}if(Ft[nn]){jt+=Ft[nn];continue}if(nn<" "){var on=nn.charCodeAt(0).toString(16);jt+="\\x"+("00"+on).substring(on.length);continue}jt+=nn}var Ht=bt||Object.keys(At).reduce(function($t,bn){return At[$t]<At[bn]?$t:bn});return jt=jt.replace(new RegExp(Ht,"g"),Ft[Ht]),Ht+jt+Ht}function kt(wt){if(Ne.indexOf(wt)>=0)throw TypeError("Converting circular structure to JSON5");Ne.push(wt);var At=Xe;Xe=Xe+xt;for(var Ft=st||Object.keys(wt),jt=[],rn=0,nn=Ft;rn<nn.length;rn+=1){var on=nn[rn],Ht=dt(on,wt);if(Ht!==void 0){var $t=Tt(on)+":";xt!==""&&($t+=" "),$t+=Ht,jt.push($t)}}var bn;if(jt.length===0)bn="{}";else{var ln;if(xt==="")ln=jt.join(","),bn="{"+ln+"}";else{var Kt=`,
`+Xe;ln=jt.join(Kt),bn=`{
`+Xe+ln+`,
`+At+"}"}}return Ne.pop(),Xe=At,bn}function Tt(wt){if(wt.length===0)return it(wt,!0);var At=String.fromCodePoint(wt.codePointAt(0));if(!Z.isIdStartChar(At))return it(wt,!0);for(var Ft=At.length;Ft<wt.length;Ft++)if(!Z.isIdContinueChar(String.fromCodePoint(wt.codePointAt(Ft))))return it(wt,!0);return wt}function St(wt){if(Ne.indexOf(wt)>=0)throw TypeError("Converting circular structure to JSON5");Ne.push(wt);var At=Xe;Xe=Xe+xt;for(var Ft=[],jt=0;jt<wt.length;jt++){var rn=dt(String(jt),wt);Ft.push(rn!==void 0?rn:"null")}var nn;if(Ft.length===0)nn="[]";else if(xt===""){var on=Ft.join(",");nn="["+on+"]"}else{var Ht=`,
`+Xe,$t=Ft.join(Ht);nn=`[
`+Xe+$t+`,
`+At+"]"}return Ne.pop(),Xe=At,nn}},Qe={parse:ke,stringify:tt},Dt=Qe,zt=Dt;return zt})});var z0=js((Wh,Yh)=>{"use strict";(function(qe,be){typeof define=="function"&&define.amd?define([],be):typeof Yh=="object"&&typeof Wh<"u"?Yh.exports=be():qe.Papa=be()})(Wh,function qe(){"use strict";var be=typeof self<"u"?self:typeof window<"u"?window:be!==void 0?be:{},Re=!be.document&&!!be.postMessage,R=Re&&/blob:/i.test((be.location||{}).protocol),C={},e=0,_={parse:function(m,h){var g=(h=h||{}).dynamicTyping||!1;if(f(g)&&(h.dynamicTypingFunction=g,g={}),h.dynamicTyping=g,h.transform=!!f(h.transform)&&h.transform,h.worker&&_.WORKERS_SUPPORTED){var v=function(){if(!_.WORKERS_SUPPORTED)return!1;var y=(d=be.URL||be.webkitURL||null,S=qe.toString(),_.BLOB_URL||(_.BLOB_URL=d.createObjectURL(new Blob(["(",S,")();"],{type:"text/javascript"})))),A=new be.Worker(y),d,S;return A.onmessage=a,A.id=e++,C[A.id]=A}();return v.userStep=h.step,v.userChunk=h.chunk,v.userComplete=h.complete,v.userError=h.error,h.step=f(h.step),h.chunk=f(h.chunk),h.complete=f(h.complete),h.error=f(h.error),delete h.worker,void v.postMessage({input:m,config:h,workerId:v.id})}var x=null;return _.NODE_STREAM_INPUT,typeof m=="string"?x=h.download?new w(h):new c(h):m.readable===!0&&f(m.read)&&f(m.on)?x=new o(h):(be.File&&m instanceof File||m instanceof Object)&&(x=new b(h)),x.stream(m)},unparse:function(m,h){var g=!1,v=!0,x=",",y=`\r
`,A='"',d=A+A,S=!1,k=null;(function(){if(typeof h=="object"){if(typeof h.delimiter!="string"||_.BAD_DELIMITERS.filter(function(F){return h.delimiter.indexOf(F)!==-1}).length||(x=h.delimiter),(typeof h.quotes=="boolean"||typeof h.quotes=="function"||Array.isArray(h.quotes))&&(g=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(S=h.skipEmptyLines),typeof h.newline=="string"&&(y=h.newline),typeof h.quoteChar=="string"&&(A=h.quoteChar),typeof h.header=="boolean"&&(v=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");k=h.columns}h.escapeChar!==void 0&&(d=h.escapeChar+A)}})();var E=new RegExp(i(A),"g");if(typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(m)){if(!m.length||Array.isArray(m[0]))return O(null,m,S);if(typeof m[0]=="object")return O(k||L(m[0]),m,S)}else if(typeof m=="object")return typeof m.data=="string"&&(m.data=JSON.parse(m.data)),Array.isArray(m.data)&&(m.fields||(m.fields=m.meta&&m.meta.fields),m.fields||(m.fields=Array.isArray(m.data[0])?m.fields:L(m.data[0])),Array.isArray(m.data[0])||typeof m.data[0]=="object"||(m.data=[m.data])),O(m.fields||[],m.data||[],S);throw new Error("Unable to serialize unrecognized input");function L(F){if(typeof F!="object")return[];var U=[];for(var I in F)U.push(I);return U}function O(F,U,I){var N="";typeof F=="string"&&(F=JSON.parse(F)),typeof U=="string"&&(U=JSON.parse(U));var W=Array.isArray(F)&&0<F.length,B=!Array.isArray(U[0]);if(W&&v){for(var V=0;V<F.length;V++)0<V&&(N+=x),N+=P(F[V],V);0<U.length&&(N+=y)}for(var q=0;q<U.length;q++){var ne=W?F.length:U[q].length,$=!1,K=W?Object.keys(U[q]).length===0:U[q].length===0;if(I&&!W&&($=I==="greedy"?U[q].join("").trim()==="":U[q].length===1&&U[q][0].length===0),I==="greedy"&&W){for(var ee=[],J=0;J<ne;J++){var Z=B?F[J]:J;ee.push(U[q][Z])}$=ee.join("").trim()===""}if(!$){for(var te=0;te<ne;te++){0<te&&!K&&(N+=x);var oe=W&&B?F[te]:te;N+=P(U[q][oe],te)}q<U.length-1&&(!I||0<ne&&!K)&&(N+=y)}}return N}function P(F,U){if(F==null)return"";if(F.constructor===Date)return JSON.stringify(F).slice(1,25);var I=F.toString().replace(E,d),N=typeof g=="boolean"&&g||typeof g=="function"&&g(F,U)||Array.isArray(g)&&g[U]||function(W,B){for(var V=0;V<B.length;V++)if(-1<W.indexOf(B[V]))return!0;return!1}(I,_.BAD_DELIMITERS)||-1<I.indexOf(x)||I.charAt(0)===" "||I.charAt(I.length-1)===" ";return N?A+I+A:I}}};if(_.RECORD_SEP="",_.UNIT_SEP="",_.BYTE_ORDER_MARK="\uFEFF",_.BAD_DELIMITERS=["\r",`
`,'"',_.BYTE_ORDER_MARK],_.WORKERS_SUPPORTED=!Re&&!!be.Worker,_.NODE_STREAM_INPUT=1,_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=n,_.ParserHandle=t,_.NetworkStreamer=w,_.FileStreamer=b,_.StringStreamer=c,_.ReadableStreamStreamer=o,be.jQuery){var T=be.jQuery;T.fn.parse=function(m){var h=m.config||{},g=[];return this.each(function(y){if(!(T(this).prop("tagName").toUpperCase()==="INPUT"&&T(this).attr("type").toLowerCase()==="file"&&be.FileReader)||!this.files||this.files.length===0)return!0;for(var A=0;A<this.files.length;A++)g.push({file:this.files[A],inputElem:this,instanceConfig:T.extend({},h)})}),v(),this;function v(){if(g.length!==0){var y,A,d,S,k=g[0];if(f(m.before)){var E=m.before(k.file,k.inputElem);if(typeof E=="object"){if(E.action==="abort")return y="AbortError",A=k.file,d=k.inputElem,S=E.reason,void(f(m.error)&&m.error({name:y},A,d,S));if(E.action==="skip")return void x();typeof E.config=="object"&&(k.instanceConfig=T.extend(k.instanceConfig,E.config))}else if(E==="skip")return void x()}var L=k.instanceConfig.complete;k.instanceConfig.complete=function(O){f(L)&&L(O,k.file,k.inputElem),x()},_.parse(k.file,k.instanceConfig)}else f(m.complete)&&m.complete()}function x(){g.splice(0,1),v()}}}function r(m){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(h){var g=u(h);g.chunkSize=parseInt(g.chunkSize),h.step||h.chunk||(g.chunkSize=null),this._handle=new t(g),(this._handle.streamer=this)._config=g}).call(this,m),this.parseChunk=function(h,g){if(this.isFirstChunk&&f(this._config.beforeFirstChunk)){var v=this._config.beforeFirstChunk(h);v!==void 0&&(h=v)}this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+h;this._partialLine="";var y=this._handle.parse(x,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var A=y.meta.cursor;this._finished||(this._partialLine=x.substring(A-this._baseIndex),this._baseIndex=A),y&&y.data&&(this._rowCount+=y.data.length);var d=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(R)be.postMessage({results:y,workerId:_.WORKER_ID,finished:d});else if(f(this._config.chunk)&&!g){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);y=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!d||!f(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(h){f(this._config.error)?this._config.error(h):R&&this._config.error&&be.postMessage({workerId:_.WORKER_ID,error:h,finished:!1})}}function w(m){var h;(m=m||{}).chunkSize||(m.chunkSize=_.RemoteChunkSize),r.call(this,m),this._nextChunk=Re?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(g){this._input=g,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),Re||(h.onload=p(this._chunkLoaded,this),h.onerror=p(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!Re),this._config.downloadRequestHeaders){var g=this._config.downloadRequestHeaders;for(var v in g)h.setRequestHeader(v,g[v])}if(this._config.chunkSize){var x=this._start+this._config.chunkSize-1;h.setRequestHeader("Range","bytes="+this._start+"-"+x)}try{h.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}Re&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:h.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(g){var v=g.getResponseHeader("Content-Range");return v===null?-1:parseInt(v.substring(v.lastIndexOf("/")+1))}(h),this.parseChunk(h.responseText)))},this._chunkError=function(g){var v=h.statusText||g;this._sendError(new Error(v))}}function b(m){var h,g;(m=m||{}).chunkSize||(m.chunkSize=_.LocalChunkSize),r.call(this,m);var v=typeof FileReader<"u";this.stream=function(x){this._input=x,g=x.slice||x.webkitSlice||x.mozSlice,v?((h=new FileReader).onload=p(this._chunkLoaded,this),h.onerror=p(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input;if(this._config.chunkSize){var y=Math.min(this._start+this._config.chunkSize,this._input.size);x=g.call(x,this._start,y)}var A=h.readAsText(x,this._config.encoding);v||this._chunkLoaded({target:{result:A}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(h.error)}}function c(m){var h;r.call(this,m=m||{}),this.stream=function(g){return h=g,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var g,v=this._config.chunkSize;return v?(g=h.substring(0,v),h=h.substring(v)):(g=h,h=""),this._finished=!h,this.parseChunk(g)}}}function o(m){r.call(this,m=m||{});var h=[],g=!0,v=!1;this.pause=function(){r.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){r.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):g=!0},this._streamData=p(function(x){try{h.push(typeof x=="string"?x:x.toString(this._config.encoding)),g&&(g=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(y){this._streamError(y)}},this),this._streamError=p(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=p(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=p(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function t(m){var h,g,v,x=Math.pow(2,53),y=-x,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,d=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,S=this,k=0,E=0,L=!1,O=!1,P=[],F={data:[],errors:[],meta:{}};if(f(m.step)){var U=m.step;m.step=function(q){if(F=q,W())N();else{if(N(),F.data.length===0)return;k+=q.data.length,m.preview&&k>m.preview?g.abort():(F.data=F.data[0],U(F,S))}}}function I(q){return m.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function N(){if(F&&v&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),v=!1),m.skipEmptyLines)for(var q=0;q<F.data.length;q++)I(F.data[q])&&F.data.splice(q--,1);return W()&&function(){if(!F)return;function ne(K){f(m.transformHeader)&&(K=m.transformHeader(K)),P.push(K)}if(Array.isArray(F.data[0])){for(var $=0;W()&&$<F.data.length;$++)F.data[$].forEach(ne);F.data.splice(0,1)}else F.data.forEach(ne)}(),function(){if(!F||!m.header&&!m.dynamicTyping&&!m.transform)return F;function ne(K,ee){var J,Z=m.header?{}:[];for(J=0;J<K.length;J++){var te=J,oe=K[J];m.header&&(te=J>=P.length?"__parsed_extra":P[J]),m.transform&&(oe=m.transform(oe,te)),oe=B(te,oe),te==="__parsed_extra"?(Z[te]=Z[te]||[],Z[te].push(oe)):Z[te]=oe}return m.header&&(J>P.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+J,E+ee):J<P.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+J,E+ee)),Z}var $=1;return!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(ne),$=F.data.length):F.data=ne(F.data,0),m.header&&F.meta&&(F.meta.fields=P),E+=$,F}()}function W(){return m.header&&P.length===0}function B(q,ne){return $=q,m.dynamicTypingFunction&&m.dynamicTyping[$]===void 0&&(m.dynamicTyping[$]=m.dynamicTypingFunction($)),(m.dynamicTyping[$]||m.dynamicTyping)===!0?ne==="true"||ne==="TRUE"||ne!=="false"&&ne!=="FALSE"&&(function(K){if(A.test(K)){var ee=parseFloat(K);if(y<ee&&ee<x)return!0}return!1}(ne)?parseFloat(ne):d.test(ne)?new Date(ne):ne===""?null:ne):ne;var $}function V(q,ne,$,K){var ee={type:q,code:ne,message:$};K!==void 0&&(ee.row=K),F.errors.push(ee)}this.parse=function(q,ne,$){var K=m.quoteChar||'"';if(m.newline||(m.newline=function(Z,te){Z=Z.substring(0,1048576);var oe=new RegExp(i(te)+"([^]*?)"+i(te),"gm"),se=(Z=Z.replace(oe,"")).split("\r"),ce=Z.split(`
`),ye=1<ce.length&&ce[0].length<se[0].length;if(se.length===1||ye)return`
`;for(var me=0,fe=0;fe<se.length;fe++)se[fe][0]===`
`&&me++;return me>=se.length/2?`\r
`:"\r"}(q,K)),v=!1,m.delimiter)f(m.delimiter)&&(m.delimiter=m.delimiter(q),F.meta.delimiter=m.delimiter);else{var ee=function(Z,te,oe,se,ce){var ye,me,fe,pe;ce=ce||[",","	","|",";",_.RECORD_SEP,_.UNIT_SEP];for(var ge=0;ge<ce.length;ge++){var ke=ce[ge],Ce=0,de=0,ae=0;fe=void 0;for(var re=new n({comments:se,delimiter:ke,newline:te,preview:10}).parse(Z),he=0;he<re.data.length;he++)if(oe&&I(re.data[he]))ae++;else{var Se=re.data[he].length;de+=Se,fe!==void 0?0<Se&&(Ce+=Math.abs(Se-fe),fe=Se):fe=Se}0<re.data.length&&(de/=re.data.length-ae),(me===void 0||Ce<=me)&&(pe===void 0||pe<de)&&1.99<de&&(me=Ce,ye=ke,pe=de)}return{successful:!!(m.delimiter=ye),bestDelimiter:ye}}(q,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);ee.successful?m.delimiter=ee.bestDelimiter:(v=!0,m.delimiter=_.DefaultDelimiter),F.meta.delimiter=m.delimiter}var J=u(m);return m.preview&&m.header&&J.preview++,h=q,g=new n(J),F=g.parse(h,ne,$),N(),L?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,g.abort(),h=f(m.chunk)?"":h.substring(g.getCharIndex())},this.resume=function(){S.streamer._halted?(L=!1,S.streamer.parseChunk(h,!0)):setTimeout(S.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,g.abort(),F.meta.aborted=!0,f(m.complete)&&m.complete(F),h=""}}function i(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n(m){var h,g=(m=m||{}).delimiter,v=m.newline,x=m.comments,y=m.step,A=m.preview,d=m.fastMode,S=h=m.quoteChar===void 0?'"':m.quoteChar;if(m.escapeChar!==void 0&&(S=m.escapeChar),(typeof g!="string"||-1<_.BAD_DELIMITERS.indexOf(g))&&(g=","),x===g)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<_.BAD_DELIMITERS.indexOf(x))&&(x=!1),v!==`
`&&v!=="\r"&&v!==`\r
`&&(v=`
`);var k=0,E=!1;this.parse=function(L,O,P){if(typeof L!="string")throw new Error("Input must be a string");var F=L.length,U=g.length,I=v.length,N=x.length,W=f(y),B=[],V=[],q=[],ne=k=0;if(!L)return ge();if(d||d!==!1&&L.indexOf(h)===-1){for(var $=L.split(v),K=0;K<$.length;K++){if(q=$[K],k+=q.length,K!==$.length-1)k+=v.length;else if(P)return ge();if(!x||q.substring(0,N)!==x){if(W){if(B=[],ye(q.split(g)),ke(),E)return ge()}else ye(q.split(g));if(A&&A<=K)return B=B.slice(0,A),ge(!0)}}return ge()}for(var ee=L.indexOf(g,k),J=L.indexOf(v,k),Z=new RegExp(i(S)+i(h),"g"),te=L.indexOf(h,k);;)if(L[k]!==h)if(x&&q.length===0&&L.substring(k,k+N)===x){if(J===-1)return ge();k=J+I,J=L.indexOf(v,k),ee=L.indexOf(g,k)}else{if(ee!==-1&&(ee<J||J===-1)){if(!(ee<te)){q.push(L.substring(k,ee)),k=ee+U,ee=L.indexOf(g,k);continue}var oe=Ce(ee,te,J);if(oe&&oe.nextDelim!==void 0){ee=oe.nextDelim,te=oe.quoteSearch,q.push(L.substring(k,ee)),k=ee+U,ee=L.indexOf(g,k);continue}}if(J===-1)break;if(q.push(L.substring(k,J)),pe(J+I),W&&(ke(),E))return ge();if(A&&B.length>=A)return ge(!0)}else for(te=k,k++;;){if((te=L.indexOf(h,te+1))===-1)return P||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:B.length,index:k}),fe();if(te===F-1)return fe(L.substring(k,te).replace(Z,h));if(h!==S||L[te+1]!==S){if(h===S||te===0||L[te-1]!==S){ee!==-1&&ee<te+1&&(ee=L.indexOf(g,te+1)),J!==-1&&J<te+1&&(J=L.indexOf(v,te+1));var se=me(J===-1?ee:Math.min(ee,J));if(L[te+1+se]===g){q.push(L.substring(k,te).replace(Z,h)),L[k=te+1+se+U]!==h&&(te=L.indexOf(h,k)),ee=L.indexOf(g,k),J=L.indexOf(v,k);break}var ce=me(J);if(L.substring(te+1+ce,te+1+ce+I)===v){if(q.push(L.substring(k,te).replace(Z,h)),pe(te+1+ce+I),ee=L.indexOf(g,k),te=L.indexOf(h,k),W&&(ke(),E))return ge();if(A&&B.length>=A)return ge(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:B.length,index:k}),te++}}else te++}return fe();function ye(de){B.push(de),ne=k}function me(de){var ae=0;if(de!==-1){var re=L.substring(te+1,de);re&&re.trim()===""&&(ae=re.length)}return ae}function fe(de){return P||(de===void 0&&(de=L.substring(k)),q.push(de),k=F,ye(q),W&&ke()),ge()}function pe(de){k=de,ye(q),q=[],J=L.indexOf(v,k)}function ge(de){return{data:B,errors:V,meta:{delimiter:g,linebreak:v,aborted:E,truncated:!!de,cursor:ne+(O||0)}}}function ke(){y(ge()),B=[],V=[]}function Ce(de,ae,re){var he={nextDelim:void 0,quoteSearch:void 0},Se=L.indexOf(h,ae+1);if(ae<de&&de<Se&&(Se<re||re===-1)){var xe=L.indexOf(g,Se);if(xe===-1)return he;Se<xe&&(Se=L.indexOf(h,Se+1)),he=Ce(xe,Se,re)}else he={nextDelim:de,quoteSearch:ae};return he}},this.abort=function(){E=!0},this.getCharIndex=function(){return k}}function a(m){var h=m.data,g=C[h.workerId],v=!1;if(h.error)g.userError(h.error,h.file);else if(h.results&&h.results.data){var x={abort:function(){v=!0,s(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:l,resume:l};if(f(g.userStep)){for(var y=0;y<h.results.data.length&&(g.userStep({data:h.results.data[y],errors:h.results.errors,meta:h.results.meta},x),!v);y++);delete h.results}else f(g.userChunk)&&(g.userChunk(h.results,x,h.file),delete h.results)}h.finished&&!v&&s(h.workerId,h.results)}function s(m,h){var g=C[m];f(g.userComplete)&&g.userComplete(h),g.terminate(),delete C[m]}function l(){throw new Error("Not implemented.")}function u(m){if(typeof m!="object"||m===null)return m;var h=Array.isArray(m)?[]:{};for(var g in m)h[g]=u(m[g]);return h}function p(m,h){return function(){m.apply(h,arguments)}}function f(m){return typeof m=="function"}return R&&(be.onmessage=function(m){var h=m.data;if(_.WORKER_ID===void 0&&h&&(_.WORKER_ID=h.workerId),typeof h.input=="string")be.postMessage({workerId:_.WORKER_ID,results:_.parse(h.input,h.config),finished:!0});else if(be.File&&h.input instanceof File||h.input instanceof Object){var g=_.parse(h.input,h.config);g&&be.postMessage({workerId:_.WORKER_ID,results:g,finished:!0})}}),(w.prototype=Object.create(r.prototype)).constructor=w,(b.prototype=Object.create(r.prototype)).constructor=b,(c.prototype=Object.create(c.prototype)).constructor=c,(o.prototype=Object.create(r.prototype)).constructor=o,_})});var V0=js((U0,Pf)=>{"use strict";(function(qe,be){typeof define=="function"&&define.amd?define(be):typeof Pf=="object"&&Pf.exports?Pf.exports=be():qe.numeral=be()})(U0,function(){var qe,be,Re="2.0.6",R={},C={},e={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},_={currentLocale:e.currentLocale,zeroFormat:e.zeroFormat,nullFormat:e.nullFormat,defaultFormat:e.defaultFormat,scalePercentBy100:e.scalePercentBy100};function T(r,w){this._input=r,this._value=w}return qe=function(r){var w,b,c,o;if(qe.isNumeral(r))w=r.value();else if(r===0||typeof r>"u")w=0;else if(r===null||be.isNaN(r))w=null;else if(typeof r=="string")if(_.zeroFormat&&r===_.zeroFormat)w=0;else if(_.nullFormat&&r===_.nullFormat||!r.replace(/[^0-9]+/g,"").length)w=null;else{for(b in R)if(o=typeof R[b].regexps.unformat=="function"?R[b].regexps.unformat():R[b].regexps.unformat,o&&r.match(o)){c=R[b].unformat;break}c=c||qe._.stringToNumber,w=c(r)}else w=Number(r)||null;return new T(r,w)},qe.version=Re,qe.isNumeral=function(r){return r instanceof T},qe._=be={numberToFormat:function(r,w,b){var c=C[qe.options.currentLocale],o=!1,t=!1,i=0,n="",a=1e12,s=1e9,l=1e6,u=1e3,p="",f=!1,m,h,g,v,x,y,A,d,S,k;if(r=r||0,h=Math.abs(r),qe._.includes(w,"(")?(o=!0,w=w.replace(/[\(|\)]/g,"")):(qe._.includes(w,"+")||qe._.includes(w,"-"))&&(d=qe._.includes(w,"+")?w.indexOf("+"):r<0?w.indexOf("-"):-1,w=w.replace(/[\+|\-]/g,"")),qe._.includes(w,"a")&&(m=w.match(/a(k|m|b|t)?/),m=m?m[1]:!1,qe._.includes(w," a")&&(n=" "),w=w.replace(new RegExp(n+"a[kmbt]?"),""),h>=a&&!m||m==="t"?(n+=c.abbreviations.trillion,r=r/a):h<a&&h>=s&&!m||m==="b"?(n+=c.abbreviations.billion,r=r/s):h<s&&h>=l&&!m||m==="m"?(n+=c.abbreviations.million,r=r/l):(h<l&&h>=u&&!m||m==="k")&&(n+=c.abbreviations.thousand,r=r/u)),qe._.includes(w,"[.]")&&(t=!0,w=w.replace("[.]",".")),y=r.toString().split(".")[0],A=w.split(".")[1],S=w.indexOf(","),i=(w.split(".")[0].split(",")[0].match(/0/g)||[]).length,A?(qe._.includes(A,"[")?(A=A.replace("]",""),A=A.split("["),p=qe._.toFixed(r,A[0].length+A[1].length,b,A[1].length)):p=qe._.toFixed(r,A.length,b),y=p.split(".")[0],qe._.includes(p,".")?p=c.delimiters.decimal+p.split(".")[1]:p="",t&&Number(p.slice(1))===0&&(p="")):y=qe._.toFixed(r,0,b),n&&!m&&Number(y)>=1e3&&n!==c.abbreviations.trillion)switch(y=String(Number(y)/1e3),n){case c.abbreviations.thousand:n=c.abbreviations.million;break;case c.abbreviations.million:n=c.abbreviations.billion;break;case c.abbreviations.billion:n=c.abbreviations.trillion;break}if(qe._.includes(y,"-")&&(y=y.slice(1),f=!0),y.length<i)for(var E=i-y.length;E>0;E--)y="0"+y;return S>-1&&(y=y.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c.delimiters.thousands)),w.indexOf(".")===0&&(y=""),k=y+p+(n||""),o?k=(o&&f?"(":"")+k+(o&&f?")":""):d>=0?k=d===0?(f?"-":"+")+k:k+(f?"-":"+"):f&&(k="-"+k),k},stringToNumber:function(r){var w=C[_.currentLocale],b=r,c={thousand:3,million:6,billion:9,trillion:12},o,t,i,n;if(_.zeroFormat&&r===_.zeroFormat)t=0;else if(_.nullFormat&&r===_.nullFormat||!r.replace(/[^0-9]+/g,"").length)t=null;else{t=1,w.delimiters.decimal!=="."&&(r=r.replace(/\./g,"").replace(w.delimiters.decimal,"."));for(o in c)if(n=new RegExp("[^a-zA-Z]"+w.abbreviations[o]+"(?:\\)|(\\"+w.currency.symbol+")?(?:\\))?)?$"),b.match(n)){t*=Math.pow(10,c[o]);break}t*=(r.split("-").length+Math.min(r.split("(").length-1,r.split(")").length-1))%2?1:-1,r=r.replace(/[^0-9\.]+/g,""),t*=Number(r)}return t},isNaN:function(r){return typeof r=="number"&&isNaN(r)},includes:function(r,w){return r.indexOf(w)!==-1},insert:function(r,w,b){return r.slice(0,b)+w+r.slice(b)},reduce:function(r,w){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof w!="function")throw new TypeError(w+" is not a function");var b=Object(r),c=b.length>>>0,o=0,t;if(arguments.length===3)t=arguments[2];else{for(;o<c&&!(o in b);)o++;if(o>=c)throw new TypeError("Reduce of empty array with no initial value");t=b[o++]}for(;o<c;o++)o in b&&(t=w(t,b[o],o,b));return t},multiplier:function(r){var w=r.toString().split(".");return w.length<2?1:Math.pow(10,w[1].length)},correctionFactor:function(){var r=Array.prototype.slice.call(arguments);return r.reduce(function(w,b){var c=be.multiplier(b);return w>c?w:c},1)},toFixed:function(r,w,b,c){var o=r.toString().split("."),t=w-(c||0),i,n,a,s;return o.length===2?i=Math.min(Math.max(o[1].length,t),w):i=t,a=Math.pow(10,i),s=(b(r+"e+"+i)/a).toFixed(i),c>w-i&&(n=new RegExp("\\.?0{1,"+(c-(w-i))+"}$"),s=s.replace(n,"")),s}},qe.options=_,qe.formats=R,qe.locales=C,qe.locale=function(r){return r&&(_.currentLocale=r.toLowerCase()),_.currentLocale},qe.localeData=function(r){if(!r)return C[_.currentLocale];if(r=r.toLowerCase(),!C[r])throw new Error("Unknown locale : "+r);return C[r]},qe.reset=function(){for(var r in e)_[r]=e[r]},qe.zeroFormat=function(r){_.zeroFormat=typeof r=="string"?r:null},qe.nullFormat=function(r){_.nullFormat=typeof r=="string"?r:null},qe.defaultFormat=function(r){_.defaultFormat=typeof r=="string"?r:"0.0"},qe.register=function(r,w,b){if(w=w.toLowerCase(),this[r+"s"][w])throw new TypeError(w+" "+r+" already registered.");return this[r+"s"][w]=b,b},qe.validate=function(r,w){var b,c,o,t,i,n,a,s;if(typeof r!="string"&&(r+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",r)),r=r.trim(),r.match(/^\d+$/))return!0;if(r==="")return!1;try{a=qe.localeData(w)}catch{a=qe.localeData(qe.locale())}return o=a.currency.symbol,i=a.abbreviations,b=a.delimiters.decimal,a.delimiters.thousands==="."?c="\\.":c=a.delimiters.thousands,s=r.match(/^[^\d]+/),s!==null&&(r=r.substr(1),s[0]!==o)||(s=r.match(/[^\d]+$/),s!==null&&(r=r.slice(0,-1),s[0]!==i.thousand&&s[0]!==i.million&&s[0]!==i.billion&&s[0]!==i.trillion))?!1:(n=new RegExp(c+"{2}"),r.match(/[^\d.,]/g)?!1:(t=r.split(b),t.length>2?!1:t.length<2?!!t[0].match(/^\d+.*\d$/)&&!t[0].match(n):t[0].length===1?!!t[0].match(/^\d+$/)&&!t[0].match(n)&&!!t[1].match(/^\d+$/):!!t[0].match(/^\d+.*\d$/)&&!t[0].match(n)&&!!t[1].match(/^\d+$/)))},qe.fn=T.prototype={clone:function(){return qe(this)},format:function(r,w){var b=this._value,c=r||_.defaultFormat,o,t,i;if(w=w||Math.round,b===0&&_.zeroFormat!==null)t=_.zeroFormat;else if(b===null&&_.nullFormat!==null)t=_.nullFormat;else{for(o in R)if(c.match(R[o].regexps.format)){i=R[o].format;break}i=i||qe._.numberToFormat,t=i(b,c,w)}return t},value:function(){return this._value},input:function(){return this._input},set:function(r){return this._value=Number(r),this},add:function(r){var w=be.correctionFactor.call(null,this._value,r);function b(c,o,t,i){return c+Math.round(w*o)}return this._value=be.reduce([this._value,r],b,0)/w,this},subtract:function(r){var w=be.correctionFactor.call(null,this._value,r);function b(c,o,t,i){return c-Math.round(w*o)}return this._value=be.reduce([r],b,Math.round(this._value*w))/w,this},multiply:function(r){function w(b,c,o,t){var i=be.correctionFactor(b,c);return Math.round(b*i)*Math.round(c*i)/Math.round(i*i)}return this._value=be.reduce([this._value,r],w,1),this},divide:function(r){function w(b,c,o,t){var i=be.correctionFactor(b,c);return Math.round(b*i)/Math.round(c*i)}return this._value=be.reduce([this._value,r],w),this},difference:function(r){return Math.abs(qe(this._value).subtract(r).value())}},qe.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(r){var w=r%10;return~~(r%100/10)===1?"th":w===1?"st":w===2?"nd":w===3?"rd":"th"},currency:{symbol:"$"}}),function(){qe.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(r,w,b){var c=qe._.includes(w," BPS")?" ":"",o;return r=r*1e4,w=w.replace(/\s?BPS/,""),o=qe._.numberToFormat(r,w,b),qe._.includes(o,")")?(o=o.split(""),o.splice(-1,0,c+"BPS"),o=o.join("")):o=o+c+"BPS",o},unformat:function(r){return+(qe._.stringToNumber(r)*1e-4).toFixed(15)}})}(),function(){var r={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},w={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},b=r.suffixes.concat(w.suffixes.filter(function(o){return r.suffixes.indexOf(o)<0})),c=b.join("|");c="("+c.replace("B","B(?!PS)")+")",qe.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(c)},format:function(o,t,i){var n,a=qe._.includes(t,"ib")?w:r,s=qe._.includes(t," b")||qe._.includes(t," ib")?" ":"",l,u,p;for(t=t.replace(/\s?i?b/,""),l=0;l<=a.suffixes.length;l++)if(u=Math.pow(a.base,l),p=Math.pow(a.base,l+1),o===null||o===0||o>=u&&o<p){s+=a.suffixes[l],u>0&&(o=o/u);break}return n=qe._.numberToFormat(o,t,i),n+s},unformat:function(o){var t=qe._.stringToNumber(o),i,n;if(t){for(i=r.suffixes.length-1;i>=0;i--){if(qe._.includes(o,r.suffixes[i])){n=Math.pow(r.base,i);break}if(qe._.includes(o,w.suffixes[i])){n=Math.pow(w.base,i);break}}t*=n||1}return t}})}(),function(){qe.register("format","currency",{regexps:{format:/(\$)/},format:function(r,w,b){var c=qe.locales[qe.options.currentLocale],o={before:w.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:w.match(/([\+|\-|\)|\s|\$]*)$/)[0]},t,i,n;for(w=w.replace(/\s?\$\s?/,""),t=qe._.numberToFormat(r,w,b),r>=0?(o.before=o.before.replace(/[\-\(]/,""),o.after=o.after.replace(/[\-\)]/,"")):r<0&&!qe._.includes(o.before,"-")&&!qe._.includes(o.before,"(")&&(o.before="-"+o.before),n=0;n<o.before.length;n++)switch(i=o.before[n],i){case"$":t=qe._.insert(t,c.currency.symbol,n);break;case" ":t=qe._.insert(t," ",n+c.currency.symbol.length-1);break}for(n=o.after.length-1;n>=0;n--)switch(i=o.after[n],i){case"$":t=n===o.after.length-1?t+c.currency.symbol:qe._.insert(t,c.currency.symbol,-(o.after.length-(1+n)));break;case" ":t=n===o.after.length-1?t+" ":qe._.insert(t," ",-(o.after.length-(1+n)+c.currency.symbol.length-1));break}return t}})}(),function(){qe.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(r,w,b){var c,o=typeof r=="number"&&!qe._.isNaN(r)?r.toExponential():"0e+0",t=o.split("e");return w=w.replace(/e[\+|\-]{1}0/,""),c=qe._.numberToFormat(Number(t[0]),w,b),c+"e"+t[1]},unformat:function(r){var w=qe._.includes(r,"e+")?r.split("e+"):r.split("e-"),b=Number(w[0]),c=Number(w[1]);c=qe._.includes(r,"e-")?c*=-1:c;function o(t,i,n,a){var s=qe._.correctionFactor(t,i),l=t*s*(i*s)/(s*s);return l}return qe._.reduce([b,Math.pow(10,c)],o,1)}})}(),function(){qe.register("format","ordinal",{regexps:{format:/(o)/},format:function(r,w,b){var c=qe.locales[qe.options.currentLocale],o,t=qe._.includes(w," o")?" ":"";return w=w.replace(/\s?o/,""),t+=c.ordinal(r),o=qe._.numberToFormat(r,w,b),o+t}})}(),function(){qe.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(r,w,b){var c=qe._.includes(w," %")?" ":"",o;return qe.options.scalePercentBy100&&(r=r*100),w=w.replace(/\s?\%/,""),o=qe._.numberToFormat(r,w,b),qe._.includes(o,")")?(o=o.split(""),o.splice(-1,0,c+"%"),o=o.join("")):o=o+c+"%",o},unformat:function(r){var w=qe._.stringToNumber(r);return qe.options.scalePercentBy100?w*.01:w}})}(),function(){qe.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(r,w,b){var c=Math.floor(r/60/60),o=Math.floor((r-c*60*60)/60),t=Math.round(r-c*60*60-o*60);return c+":"+(o<10?"0"+o:o)+":"+(t<10?"0"+t:t)},unformat:function(r){var w=r.split(":"),b=0;return w.length===3?(b=b+Number(w[0])*60*60,b=b+Number(w[1])*60,b=b+Number(w[2])):w.length===2&&(b=b+Number(w[0])*60,b=b+Number(w[1])),Number(b)}})}(),qe})});var yy=Vu(e0());var Hg=["plot"],Gg=["*"],Ca=class qe{static setModuleName(be){qe.moduleName=be}static getModuleName(){return qe.moduleName}static setPlotly(be){if(typeof be=="object"&&typeof be.react!="function")throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");qe.plotly=be}static insert(be){return qe.instances.indexOf(be)===-1&&qe.instances.push(be),be}static remove(be){let Re=qe.instances.indexOf(be);Re>=0&&(qe.instances.splice(Re,1),qe.plotly.purge(be))}getInstanceByDivId(be){for(let Re of qe.instances)if(Re&&Re.id===be)return Re}getPlotly(){return Eh(this,null,function*(){return yield this.waitFor(()=>this._getPlotly()!=="waiting"),this._getPlotly()})}_getPlotly(){if(typeof qe.plotly>"u"){let be=qe.moduleName==="ViaCDN"?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(be)}return qe.plotly}waitFor(be){return new Promise(Re=>{let R=()=>{be()?Re():setTimeout(R,10)};R()})}newPlot(be,Re,R,C,e){return Eh(this,null,function*(){if(yield this.waitFor(()=>this._getPlotly()!=="waiting"),e){let _={data:Re,layout:R,config:C,frames:e};return this._getPlotly().newPlot(be,_).then(()=>qe.insert(be))}return this._getPlotly().newPlot(be,Re,R,C).then(()=>qe.insert(be))})}plot(be,Re,R,C,e){if(e){let _={data:Re,layout:R,config:C,frames:e};return this._getPlotly().newPlot(be,_)}return this._getPlotly().newPlot(be,Re,R,C)}update(be,Re,R,C,e){if(e){let _={data:Re,layout:R,config:C,frames:e};return this._getPlotly().react(be,_)}return this._getPlotly().react(be,Re,R,C)}resize(be){return this._getPlotly().Plots.resize(be)}};Ca.instances=[];Ca.plotly=void 0;Ca.moduleName=void 0;Ca.\u0275fac=function(be){return new(be||Ca)};Ca.\u0275prov=Ch({token:Ca,factory:Ca.\u0275fac,providedIn:"root"});var Wg=(()=>{class qe{constructor(){this._isLoading=!1}get isLoading(){return this._isLoading}load(Re){return this._isLoading=!0,new Promise(R=>{R(!0)})}}return qe.\u0275fac=function(Re){return new(Re||qe)},qe.\u0275prov=Ch({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe})(),t0=(()=>{class qe{constructor(Re,R,C,e){this.plotly=Re,this.themeLoader=R,this.iterableDiffers=C,this.keyValueDiffers=e,this.defaultClassName="js-plotly-plot",this.theme="none",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new ri,this.update=new ri,this.purge=new ri,this.error=new ri,this.afterExport=new ri,this.afterPlot=new ri,this.animated=new ri,this.animatingFrame=new ri,this.animationInterrupted=new ri,this.autoSize=new ri,this.beforeExport=new ri,this.beforeHover=new ri,this.buttonClicked=new ri,this.click=new ri,this.plotlyClick=new ri,this.clickAnnotation=new ri,this.deselect=new ri,this.doubleClick=new ri,this.framework=new ri,this.hover=new ri,this.legendClick=new ri,this.legendDoubleClick=new ri,this.react=new ri,this.relayout=new ri,this.relayouting=new ri,this.restyle=new ri,this.redraw=new ri,this.selected=new ri,this.selecting=new ri,this.sliderChange=new ri,this.sliderEnd=new ri,this.sliderStart=new ri,this.sunburstclick=new ri,this.transitioning=new ri,this.transitionInterrupted=new ri,this.unhover=new ri,this.treemapclick=new ri,this.webglcontextlost=new ri,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{let Re=this.createFigure();this.initialized.emit(Re)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){if(typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0),this.plotlyInstance){let Re=this.createFigure();this.purge.emit(Re),Ca.remove(this.plotlyInstance)}}ngOnChanges(Re){let R=!1,C=Re.revision;C&&!C.isFirstChange()&&(R=!0);let e=Re.debug;e&&!e.isFirstChange()&&(R=!0),R&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Re=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Re=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Re=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0),Re&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let Re=[this.defaultClassName];return Array.isArray(this.className)?Re=Re.concat(this.className):this.className&&Re.push(this.className),Re.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(Re=>{this.plotlyInstance=Re,this.getWindow().gd=this.debug?Re:void 0,this.eventNames.forEach(R=>{let C=`plotly_${R.toLowerCase()}`,e=this[R];Re.on(C,_=>e.emit(_))}),Re.on("plotly_click",R=>{this.plotlyClick.emit(R)}),this.updateWindowResizeHandler()},Re=>{console.error("Error while plotting:",Re),this.error.emit(Re)})}createFigure(){let Re=this.plotlyInstance;return{data:Re.data,layout:Re.layout,frames:Re._transitionData?Re._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){let R=new Error("Plotly component wasn't initialized");throw this.error.emit(R),R}let Re=zd({},this.layout);return this.plotly.update(this.plotlyInstance,this.getData(),Re,this.config,this.frames).then(()=>{let R=this.createFigure();this.update.emit(R)},R=>{console.error("Error while updating plot:",R),this.error.emit(R)})}updateWindowResizeHandler(){this.useResizeHandler?this.resizeHandler===void 0&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):typeof this.resizeHandler=="function"&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Re,R){let C=Object.assign({},R,{uid:""});return JSON.stringify(C)}loadTheme(){this.layout!==void 0&&console.warn("You fulfill both `theme` and `layout` properties. This will overwrite the `layout` data with the `theme` data."),this.themeLoader.load(this.theme).then(Re=>this.layout=Re)}}return qe.\u0275fac=function(Re){return new(Re||qe)(wc(Ca),wc(Wg),wc(Jd),wc(Kd))},qe.\u0275cmp=mf({type:qe,selectors:[["plotly-plot"]],viewQuery:function(Re,R){if(Re&1&&Gd(Hg,7),Re&2){let C;Wd(C=Yd())&&(R.plotEl=C.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",theme:"theme",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[Zd([Ca]),Bd],ngContentSelectors:Gg,decls:3,vars:3,consts:[["plot",""],[3,"ngClass","ngStyle"]],template:function(Re,R){Re&1&&(qd(),jd(0,"div",1,0),Hd(2),Ud()),Re&2&&(bf("ngClass",R.getClassName())("ngStyle",R.style),Nd("id",R.divId))},dependencies:[$d,Qd],encapsulation:2}),qe})(),Tf=(()=>{class qe{constructor(){}}return qe.\u0275fac=function(Re){return new(Re||qe)},qe.\u0275mod=xf({type:qe}),qe.\u0275inj=yf({providers:[Ca],imports:[_f]}),qe})(),Lh=(()=>{class qe{constructor(){if(!this.isValid()){let Re="Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.";throw new Error(Re)}Ca.setPlotly(qe.plotlyjs)}isValid(){return qe.plotlyjs!==void 0&&(typeof qe.plotlyjs.plot=="function"||typeof qe.plotlyjs.newPlot=="function")}}return qe.plotlyjs={},qe.\u0275fac=function(Re){return new(Re||qe)},qe.\u0275mod=xf({type:qe}),qe.\u0275inj=yf({providers:[Ca],imports:[_f,Tf,Tf]}),qe})(),_l=class qe{constructor(be){this.plotlyService=be,Ca.setModuleName("ViaCDN")}static setPlotlyVersion(be,Re="plotly",R=""){if(!(be==="latest"||/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(be)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");qe.loadViaCDN(Re,R),qe.plotlyVersion=be}static setPlotlyBundle(be){if(!(be===null||qe.plotlyBundleNames.indexOf(be)>=0)){let R=qe.plotlyBundleNames.map(C=>`"${C}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${R} for a partial bundle.`)}qe.plotlyBundle=be}static loadViaCDN(be="plotly",Re=""){Ca.setPlotly("waiting"),setTimeout(()=>{let C="";switch(be){case"cloudflare":if(qe.plotlyVersion=="latest")throw new Error("As cloudflare hosts version specific files, 'latest' as a version is not supported. Please specify a version or you can choose 'plotly' as a CDN provider.");C=qe.plotlyBundle==null?`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${qe.plotlyVersion}/plotly.min.js`:`https://cdnjs.cloudflare.com/ajax/libs/plotly.js/${qe.plotlyVersion}/plotly-${qe.plotlyBundle}.min.js`;break;case"custom":if(!(Re&&typeof Re=="string"))throw new Error("Invalid or missing CDN URL. Please provide a CDN URL in case of custom provider. Alternatively, you can choose from 'plotly' or 'cloudflare'.");C=Re;break;default:C=qe.plotlyBundle==null?`https://cdn.plot.ly/plotly-${qe.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${qe.plotlyBundle}-${qe.plotlyVersion}.min.js`;break}let e=document.createElement("script");e.type="text/javascript",e.src=C,e.onerror=()=>console.error(`Error loading plotly.js library from ${C}`),document.getElementsByTagName("head")[0].appendChild(e);let T=200,r=()=>{let w=window.Plotly;if(w)Ca.setPlotly(w);else if(T>0)T--,setTimeout(r,50);else throw new Error(`Error loading plotly.js library from ${C}. Timeout.`)};r()})}};_l.plotlyBundle=void 0;_l.plotlyVersion="latest";_l.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"];_l.\u0275fac=function(be){return new(be||_l)(Rd(Ca))};_l.\u0275mod=xf({type:_l});_l.\u0275inj=yf({providers:[Ca],imports:[_f,Tf,Tf]});var tp=Vu(d0());var v0=60,g0=v0*60,y0=g0*24,Qg=y0*7,gu=1e3,kf=v0*gu,Bh=g0*gu,m0=y0*gu,x0=Qg*gu,kc="millisecond",Xl="second",Jl="minute",Kl="hour",wl="day",qu="week",Ts="month",Mf="quarter",Tl="year",$l="date",b0="YYYY-MM-DDTHH:mm:ssZ",Nh="Invalid Date",_0=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w0=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;var A0={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(be){var Re=["th","st","nd","rd"],R=be%100;return"["+be+(Re[(R-20)%10]||Re[R]||Re[0])+"]"}};var jh=function(be,Re,R){var C=String(be);return!C||C.length>=Re?be:""+Array(Re+1-C.length).join(R)+be},e1=function(be){var Re=-be.utcOffset(),R=Math.abs(Re),C=Math.floor(R/60),e=R%60;return(Re<=0?"+":"-")+jh(C,2,"0")+":"+jh(e,2,"0")},t1=function qe(be,Re){if(be.date()<Re.date())return-qe(Re,be);var R=(Re.year()-be.year())*12+(Re.month()-be.month()),C=be.clone().add(R,Ts),e=Re-C<0,_=be.clone().add(R+(e?-1:1),Ts);return+(-(R+(Re-C)/(e?C-_:_-C))||0)},n1=function(be){return be<0?Math.ceil(be)||0:Math.floor(be)},r1=function(be){var Re={M:Ts,y:Tl,w:qu,d:wl,D:$l,h:Kl,m:Jl,s:Xl,ms:kc,Q:Mf};return Re[be]||String(be||"").toLowerCase().replace(/s$/,"")},i1=function(be){return be===void 0},k0={s:jh,z:e1,m:t1,a:n1,p:r1,u:i1};var Mc="en",yu={};yu[Mc]=A0;var M0="$isDayjsObject",Uh=function(be){return be instanceof Ef||!!(be&&be[M0])},Sf=function qe(be,Re,R){var C;if(!be)return Mc;if(typeof be=="string"){var e=be.toLowerCase();yu[e]&&(C=e),Re&&(yu[e]=Re,C=e);var _=be.split("-");if(!C&&_.length>1)return qe(_[0])}else{var T=be.name;yu[T]=be,C=T}return!R&&C&&(Mc=C),C||!R&&Mc},$a=function(be,Re){if(Uh(be))return be.clone();var R=typeof Re=="object"?Re:{};return R.date=be,R.args=arguments,new Ef(R)},a1=function(be,Re){return $a(be,{locale:Re.$L,utc:Re.$u,x:Re.$x,$offset:Re.$offset})},Ui=k0;Ui.l=Sf;Ui.i=Uh;Ui.w=a1;var o1=function(be){var Re=be.date,R=be.utc;if(Re===null)return new Date(NaN);if(Ui.u(Re))return new Date;if(Re instanceof Date)return new Date(Re);if(typeof Re=="string"&&!/Z$/i.test(Re)){var C=Re.match(_0);if(C){var e=C[2]-1||0,_=(C[7]||"0").substring(0,3);return R?new Date(Date.UTC(C[1],e,C[3]||1,C[4]||0,C[5]||0,C[6]||0,_)):new Date(C[1],e,C[3]||1,C[4]||0,C[5]||0,C[6]||0,_)}}return new Date(Re)},Ef=function(){function qe(Re){this.$L=Sf(Re.locale,null,!0),this.parse(Re),this.$x=this.$x||Re.x||{},this[M0]=!0}var be=qe.prototype;return be.parse=function(R){this.$d=o1(R),this.init()},be.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},be.$utils=function(){return Ui},be.isValid=function(){return this.$d.toString()!==Nh},be.isSame=function(R,C){var e=$a(R);return this.startOf(C)<=e&&e<=this.endOf(C)},be.isAfter=function(R,C){return $a(R)<this.startOf(C)},be.isBefore=function(R,C){return this.endOf(C)<$a(R)},be.$g=function(R,C,e){return Ui.u(R)?this[C]:this.set(e,R)},be.unix=function(){return Math.floor(this.valueOf()/1e3)},be.valueOf=function(){return this.$d.getTime()},be.startOf=function(R,C){var e=this,_=Ui.u(C)?!0:C,T=Ui.p(R),r=function(s,l){var u=Ui.w(e.$u?Date.UTC(e.$y,l,s):new Date(e.$y,l,s),e);return _?u:u.endOf(wl)},w=function(s,l){var u=[0,0,0,0],p=[23,59,59,999];return Ui.w(e.toDate()[s].apply(e.toDate("s"),(_?u:p).slice(l)),e)},b=this.$W,c=this.$M,o=this.$D,t="set"+(this.$u?"UTC":"");switch(T){case Tl:return _?r(1,0):r(31,11);case Ts:return _?r(1,c):r(0,c+1);case qu:{var i=this.$locale().weekStart||0,n=(b<i?b+7:b)-i;return r(_?o-n:o+(6-n),c)}case wl:case $l:return w(t+"Hours",0);case Kl:return w(t+"Minutes",1);case Jl:return w(t+"Seconds",2);case Xl:return w(t+"Milliseconds",3);default:return this.clone()}},be.endOf=function(R){return this.startOf(R,!1)},be.$set=function(R,C){var e,_=Ui.p(R),T="set"+(this.$u?"UTC":""),r=(e={},e[wl]=T+"Date",e[$l]=T+"Date",e[Ts]=T+"Month",e[Tl]=T+"FullYear",e[Kl]=T+"Hours",e[Jl]=T+"Minutes",e[Xl]=T+"Seconds",e[kc]=T+"Milliseconds",e)[_],w=_===wl?this.$D+(C-this.$W):C;if(_===Ts||_===Tl){var b=this.clone().set($l,1);b.$d[r](w),b.init(),this.$d=b.set($l,Math.min(this.$D,b.daysInMonth())).$d}else r&&this.$d[r](w);return this.init(),this},be.set=function(R,C){return this.clone().$set(R,C)},be.get=function(R){return this[Ui.p(R)]()},be.add=function(R,C){var e=this,_;R=Number(R);var T=Ui.p(C),r=function(o){var t=$a(e);return Ui.w(t.date(t.date()+Math.round(o*R)),e)};if(T===Ts)return this.set(Ts,this.$M+R);if(T===Tl)return this.set(Tl,this.$y+R);if(T===wl)return r(1);if(T===qu)return r(7);var w=(_={},_[Jl]=kf,_[Kl]=Bh,_[Xl]=gu,_)[T]||1,b=this.$d.getTime()+R*w;return Ui.w(b,this)},be.subtract=function(R,C){return this.add(R*-1,C)},be.format=function(R){var C=this,e=this.$locale();if(!this.isValid())return e.invalidDate||Nh;var _=R||b0,T=Ui.z(this),r=this.$H,w=this.$m,b=this.$M,c=e.weekdays,o=e.months,t=e.meridiem,i=function(u,p,f,m){return u&&(u[p]||u(C,_))||f[p].slice(0,m)},n=function(u){return Ui.s(r%12||12,u,"0")},a=t||function(l,u,p){var f=l<12?"AM":"PM";return p?f.toLowerCase():f},s=function(u){switch(u){case"YY":return String(C.$y).slice(-2);case"YYYY":return Ui.s(C.$y,4,"0");case"M":return b+1;case"MM":return Ui.s(b+1,2,"0");case"MMM":return i(e.monthsShort,b,o,3);case"MMMM":return i(o,b);case"D":return C.$D;case"DD":return Ui.s(C.$D,2,"0");case"d":return String(C.$W);case"dd":return i(e.weekdaysMin,C.$W,c,2);case"ddd":return i(e.weekdaysShort,C.$W,c,3);case"dddd":return c[C.$W];case"H":return String(r);case"HH":return Ui.s(r,2,"0");case"h":return n(1);case"hh":return n(2);case"a":return a(r,w,!0);case"A":return a(r,w,!1);case"m":return String(w);case"mm":return Ui.s(w,2,"0");case"s":return String(C.$s);case"ss":return Ui.s(C.$s,2,"0");case"SSS":return Ui.s(C.$ms,3,"0");case"Z":return T;default:break}return null};return _.replace(w0,function(l,u){return u||s(l)||T.replace(":","")})},be.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},be.diff=function(R,C,e){var _=this,T=Ui.p(C),r=$a(R),w=(r.utcOffset()-this.utcOffset())*kf,b=this-r,c=function(){return Ui.m(_,r)},o;switch(T){case Tl:o=c()/12;break;case Ts:o=c();break;case Mf:o=c()/3;break;case qu:o=(b-w)/x0;break;case wl:o=(b-w)/m0;break;case Kl:o=b/Bh;break;case Jl:o=b/kf;break;case Xl:o=b/gu;break;default:o=b;break}return e?o:Ui.a(o)},be.daysInMonth=function(){return this.endOf(Ts).$D},be.$locale=function(){return yu[this.$L]},be.locale=function(R,C){if(!R)return this.$L;var e=this.clone(),_=Sf(R,C,!0);return _&&(e.$L=_),e},be.clone=function(){return Ui.w(this.$d,this)},be.toDate=function(){return new Date(this.valueOf())},be.toJSON=function(){return this.isValid()?this.toISOString():null},be.toISOString=function(){return this.$d.toISOString()},be.toString=function(){return this.$d.toUTCString()},qe}(),S0=Ef.prototype;$a.prototype=S0;[["$ms",kc],["$s",Xl],["$m",Jl],["$H",Kl],["$W",wl],["$M",Ts],["$y",Tl],["$D",$l]].forEach(function(qe){S0[qe[1]]=function(be){return this.$g(be,qe[0],qe[1])}});$a.extend=function(qe,be){return qe.$i||(qe(be,Ef,$a),qe.$i=!0),$a};$a.locale=Sf;$a.isDayjs=Uh;$a.unix=function(qe){return $a(qe*1e3)};$a.en=yu[Mc];$a.Ls=yu;$a.p={};var sl=$a;var xu=Vu(P0()),Y0=Vu(F0()),Z0=Vu(z0());var v1=function(be){return be.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Re,R,C){return R||C.slice(1)})},g1={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},R0=function(be,Re){return be.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(R,C,e){var _=e&&e.toUpperCase();return C||Re[e]||g1[e]||v1(Re[_])})};var y1=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,m1=/\d/,Of=/\d\d/,x1=/\d{3}/,b1=/\d{4}/,Al=/\d\d?/,_1=/[+-]?\d+/,w1=/[+-]\d\d:?(\d\d)?|Z/,Sc=/\d*[^-_:/,()\s\d]+/,Ql={},j0=function(be){return be=+be,be+(be>68?1900:2e3)};function T1(qe){if(!qe||qe==="Z")return 0;var be=qe.match(/([+-]|\d\d)/g),Re=+(be[1]*60)+(+be[2]||0);return Re===0?0:be[0]==="+"?-Re:Re}var ss=function(be){return function(Re){this[be]=+Re}},B0=[w1,function(qe){var be=this.zone||(this.zone={});be.offset=T1(qe)}],Zh=function(be){var Re=Ql[be];return Re&&(Re.indexOf?Re:Re.s.concat(Re.f))},N0=function(be,Re){var R,C=Ql,e=C.meridiem;if(!e)R=be===(Re?"pm":"PM");else for(var _=1;_<=24;_+=1)if(be.indexOf(e(_,0,Re))>-1){R=_>12;break}return R},A1={A:[Sc,function(qe){this.afternoon=N0(qe,!1)}],a:[Sc,function(qe){this.afternoon=N0(qe,!0)}],S:[m1,function(qe){this.milliseconds=+qe*100}],SS:[Of,function(qe){this.milliseconds=+qe*10}],SSS:[x1,function(qe){this.milliseconds=+qe}],s:[Al,ss("seconds")],ss:[Al,ss("seconds")],m:[Al,ss("minutes")],mm:[Al,ss("minutes")],H:[Al,ss("hours")],h:[Al,ss("hours")],HH:[Al,ss("hours")],hh:[Al,ss("hours")],D:[Al,ss("day")],DD:[Of,ss("day")],Do:[Sc,function(qe){var be=Ql,Re=be.ordinal,R=qe.match(/\d+/);if(this.day=R[0],!!Re)for(var C=1;C<=31;C+=1)Re(C).replace(/\[|\]/g,"")===qe&&(this.day=C)}],M:[Al,ss("month")],MM:[Of,ss("month")],MMM:[Sc,function(qe){var be=Zh("months"),Re=Zh("monthsShort"),R=(Re||be.map(function(C){return C.slice(0,3)})).indexOf(qe)+1;if(R<1)throw new Error;this.month=R%12||R}],MMMM:[Sc,function(qe){var be=Zh("months"),Re=be.indexOf(qe)+1;if(Re<1)throw new Error;this.month=Re%12||Re}],Y:[_1,ss("year")],YY:[Of,function(qe){this.year=j0(qe)}],YYYY:[b1,ss("year")],Z:B0,ZZ:B0};function k1(qe){var be=qe.afternoon;if(be!==void 0){var Re=qe.hours;be?Re<12&&(qe.hours+=12):Re===12&&(qe.hours=0),delete qe.afternoon}}function M1(qe){qe=R0(qe,Ql&&Ql.formats);for(var be=qe.match(y1),Re=be.length,R=0;R<Re;R+=1){var C=be[R],e=A1[C],_=e&&e[0],T=e&&e[1];T?be[R]={regex:_,parser:T}:be[R]=C.replace(/^\[|\]$/g,"")}return function(r){for(var w={},b=0,c=0;b<Re;b+=1){var o=be[b];if(typeof o=="string")c+=o.length;else{var t=o.regex,i=o.parser,n=r.slice(c),a=t.exec(n),s=a[0];i.call(w,s),r=r.replace(s,"")}}return k1(w),w}}var S1=function(be,Re,R){try{if(["x","X"].indexOf(Re)>-1)return new Date((Re==="X"?1e3:1)*be);var C=M1(Re),e=C(be),_=e.year,T=e.month,r=e.day,w=e.hours,b=e.minutes,c=e.seconds,o=e.milliseconds,t=e.zone,i=new Date,n=r||(!_&&!T?i.getDate():1),a=_||i.getFullYear(),s=0;_&&!T||(s=T>0?T-1:i.getMonth());var l=w||0,u=b||0,p=c||0,f=o||0;return t?new Date(Date.UTC(a,s,n,l,u,p,f+t.offset*60*1e3)):R?new Date(Date.UTC(a,s,n,l,u,p,f)):new Date(a,s,n,l,u,p,f)}catch{return new Date("")}},Xh=function(qe,be,Re){Re.p.customParseFormat=!0,qe&&qe.parseTwoDigitYear&&(j0=qe.parseTwoDigitYear);var R=be.prototype,C=R.parse;R.parse=function(e){var _=e.date,T=e.utc,r=e.args;this.$u=T;var w=r[1];if(typeof w=="string"){var b=r[2]===!0,c=r[3]===!0,o=b||c,t=r[2];c&&(t=r[2]),Ql=this.$locale(),!b&&t&&(Ql=Re.Ls[t]),this.$d=S1(_,w,T),this.init(),t&&t!==!0&&(this.$L=this.locale(t).$L),o&&_!=this.format(w)&&(this.$d=new Date("")),Ql={}}else if(w instanceof Array)for(var i=w.length,n=1;n<=i;n+=1){r[1]=w[n-1];var a=Re.apply(this,r);if(a.isValid()){this.$d=a.$d,this.$L=a.$L,this.init();break}n===i&&(this.$d=new Date(""))}else C.call(this,e)}};var X0=Vu(V0());var $h=function(qe,be){return $h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,R){Re.__proto__=R}||function(Re,R){for(var C in R)R.hasOwnProperty(C)&&(Re[C]=R[C])},$h(qe,be)};function np(qe,be){$h(qe,be);function Re(){this.constructor=qe}qe.prototype=be===null?Object.create(be):(Re.prototype=be.prototype,new Re)}function hr(qe){var be=typeof Symbol=="function"&&qe[Symbol.iterator],Re=0;return be?be.call(qe):{next:function(){return qe&&Re>=qe.length&&(qe=void 0),{value:qe&&qe[Re++],done:!qe}}}}function Ff(qe,be){var Re=typeof Symbol=="function"&&qe[Symbol.iterator];if(!Re)return qe;var R=Re.call(qe),C,e=[],_;try{for(;(be===void 0||be-- >0)&&!(C=R.next()).done;)e.push(C.value)}catch(T){_={error:T}}finally{try{C&&!C.done&&(Re=R.return)&&Re.call(R)}finally{if(_)throw _.error}}return e}function J0(){for(var qe=[],be=0;be<arguments.length;be++)qe=qe.concat(Ff(arguments[be]));return qe}var E1=function(){function qe(){}return qe.prototype.next=function(){return{done:!0,value:null}},qe}(),K0=function(){function qe(){}return qe.prototype[Symbol.iterator]=function(){return new E1},qe}(),C1=function(){function qe(){this.index=0}return qe.prototype.next=function(){return{done:!1,value:this.index++}},qe}(),Qh=function(){function qe(){}return qe.prototype[Symbol.iterator]=function(){return new C1},qe}(),D1=function(){function qe(be){this.iterators=be}return qe.prototype.next=function(){if(this.iterators.length===0)return{done:!0,value:[]};var be=[];try{for(var Re=hr(this.iterators),R=Re.next();!R.done;R=Re.next()){var C=R.value,e=C.next();if(e.done)return{done:!0,value:[]};be.push(e.value)}}catch(r){_={error:r}}finally{try{R&&!R.done&&(T=Re.return)&&T.call(Re)}finally{if(_)throw _.error}}return{done:!1,value:be};var _,T},qe}(),Ec=function(){function qe(be){this.iterables=be}return qe.prototype[Symbol.iterator]=function(){var be=[];try{for(var Re=hr(this.iterables),R=Re.next();!R.done;R=Re.next()){var C=R.value;be.push(C[Symbol.iterator]())}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return new D1(be);var e,_},qe}(),L1=function(){function qe(be,Re){this.index=0,this.iterator=be,this.selector=Re}return qe.prototype.next=function(){var be=this.iterator.next();return be.done?{done:!0}:{done:!1,value:this.selector(be.value,this.index++)}},qe}(),ho=function(){function qe(be,Re){this.iterable=be,this.selector=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.iterable[Symbol.iterator]();return new L1(be,this.selector)},qe}(),I1=function(){function qe(be,Re){this.index=0,this.iterator=be,this.selector=Re,this.outputIterator=null}return qe.prototype.next=function(){for(;;){if(this.outputIterator===null){var be=this.iterator.next();if(be.done)return{done:!0};var Re=this.selector(be.value,this.index++);this.outputIterator=Re[Symbol.iterator]()}var R=this.outputIterator.next();if(R.done){this.outputIterator=null;continue}else return R}},qe}(),$0=function(){function qe(be,Re){this.iterable=be,this.selector=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.iterable[Symbol.iterator]();return new I1(be,this.selector)},qe}(),O1=function(){function qe(be,Re){this.childIterator=be,this.numElements=Re}return qe.prototype.next=function(){return this.numElements<=0?{done:!0}:(--this.numElements,this.childIterator.next())},qe}(),Gu=function(){function qe(be,Re){this.childIterable=be,this.numElements=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.childIterable[Symbol.iterator]();return new O1(be,this.numElements)},qe}(),P1=function(){function qe(be,Re){this.done=!1,this.childIterator=be,this.predicate=Re}return qe.prototype.next=function(){if(!this.done){var be=this.childIterator.next();if(be.done)this.done=!0;else{if(this.predicate(be.value))return be;this.done=!0}}return{done:!0}},qe}(),Vs=function(){function qe(be,Re){this.childIterable=be,this.predicate=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.childIterable[Symbol.iterator]();return new P1(be,this.predicate)},qe}(),F1=function(){function qe(be,Re){this.childIterator=be,this.predicate=Re}return qe.prototype.next=function(){for(;;){var be=this.childIterator.next();if(be.done||this.predicate(be.value))return be}},qe}(),Wu=function(){function qe(be,Re){this.childIterable=be,this.predicate=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.childIterable[Symbol.iterator]();return new F1(be,this.predicate)},qe}(),z1=function(){function qe(be){this.curIterator=null,this.iterables=be,this.iterator=be[Symbol.iterator](),this.moveToNextIterable()}return qe.prototype.moveToNextIterable=function(){var be=this.iterator.next();be.done?this.curIterator=null:this.curIterator=be.value[Symbol.iterator]()},qe.prototype.next=function(){for(;;){if(this.curIterator==null)return{done:!0};var be=this.curIterator.next();if(!be.done)return be;this.moveToNextIterable()}},qe}(),zf=function(){function qe(be){this.iterables=be}return qe.prototype[Symbol.iterator]=function(){return new z1(this.iterables)},qe}(),R1=function(){function qe(be,Re,R){this.iterable=be,this.period=Re,this.whichIndex=R}return qe.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var be=[],Re=0;Re<this.period;++Re){var R=this.iterator.next();if(R.done)break;be.push(R.value)}if(be.length===0)return{done:!0};var C=new ha({pairs:be});return{value:[this.whichIndex===Cc.Start?C.getIndex().first():C.getIndex().last(),C],done:!1}},qe}(),B1=function(){function qe(be,Re,R){this.iterable=be,this.period=Re,this.whichIndex=R}return qe.prototype[Symbol.iterator]=function(){return new R1(this.iterable,this.period,this.whichIndex)},qe}(),Rf=function(){function qe(be){this.index=0,this.arr=be}return qe.prototype.next=function(){return this.index<this.arr.length?{done:!1,value:this.arr[this.index++]}:{done:!0}},qe}(),Yu=function(){function qe(be){this.iterable=be}return qe.prototype[Symbol.iterator]=function(){var be=[];try{for(var Re=hr(this.iterable),R=Re.next();!R.done;R=Re.next()){var C=R.value;be.push(C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be.reverse(),new Rf(be);var e,_},qe}(),N1=function(){function qe(be,Re){this.iterators=be.map(function(R){return R[Symbol.iterator]()}),this.zipper=Re}return qe.prototype.next=function(){var be=this.iterators.map(function(w){return w.next()});try{for(var Re=hr(be),R=Re.next();!R.done;R=Re.next()){var C=R.value;if(C.done)return{done:!0}}}catch(w){T={error:w}}finally{try{R&&!R.done&&(r=Re.return)&&r.call(Re)}finally{if(T)throw T.error}}var e=be.map(function(w){return w.value}),_=new ha(e);return{done:!1,value:this.zipper(_)};var T,r},qe}(),Q0=function(){function qe(be,Re){this.iterables=be,this.zipper=Re}return qe.prototype[Symbol.iterator]=function(){return new N1(this.iterables,this.zipper)},qe}(),j1=function(){function qe(be,Re){this.valuesAlreadySeen=new Set,this.iterator=be[Symbol.iterator](),this.selector=Re}return qe.prototype.next=function(){for(;;){var be=this.iterator.next();if(be.done)return{done:!0};var Re=void 0;if(this.selector?Re=this.selector(be.value):Re=be.value,!this.valuesAlreadySeen.has(Re))return this.valuesAlreadySeen.add(Re),{done:!1,value:be.value}}},qe}(),Bf=function(){function qe(be,Re){this.iterable=be,this.selector=Re}return qe.prototype[Symbol.iterator]=function(){return new j1(this.iterable,this.selector)},qe}(),U1=function(){function qe(be,Re,R){this.iterable=be,this.period=Re,this.whichIndex=R}return qe.prototype.next=function(){if(this.curWindow){this.curWindow.shift();var Re=this.iterator.next();if(Re.done)return{done:!0};this.curWindow.push(Re.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var be=0;be<this.period;++be){var Re=this.iterator.next();if(Re.done)return{done:!0};this.curWindow.push(Re.value)}}var R=new ha({pairs:this.curWindow});return{value:[this.whichIndex===Cc.Start?R.getIndex().first():R.getIndex().last(),R],done:!1}},qe}(),V1=function(){function qe(be,Re,R){this.iterable=be,this.period=Re,this.whichIndex=R}return qe.prototype[Symbol.iterator]=function(){return new U1(this.iterable,this.period,this.whichIndex)},qe}(),q1=function(){function qe(be,Re){this.iterator=be[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=Re}return qe.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var be=[this.nextValue.value],Re=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(Re[1],this.nextValue.value[1])){Re=this.nextValue.value;break}be.push(this.nextValue.value),Re=this.nextValue.value}var R=new ha({pairs:be});return{value:R,done:!1}},qe}(),H1=function(){function qe(be,Re){this.iterable=be,this.comparer=Re}return qe.prototype[Symbol.iterator]=function(){return new q1(this.iterable,this.comparer)},qe}(),kl=function(qe){return qe[qe.Ascending=0]="Ascending",qe[qe.Descending=1]="Descending",qe}(kl||{}),G1=function(){function qe(be,Re){this.values=be,this.sortSpec=Re,this.keys=[]}return qe.prototype.genKeys=function(){if(!(this.keys.length>0)){var be=0;try{for(var Re=hr(this.values),R=Re.next();!R.done;R=Re.next()){var C=R.value;this.keys.push(this.sortSpec.selector(C,be))}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}var e,_}},qe.prototype.compare=function(be,Re){this.genKeys();var R=this.keys[be],C=this.keys[Re],e=-1;return R===C?e=0:R>C&&(e=1),this.sortSpec.direction===kl.Descending?-e:e},qe}(),Nf=function(){function qe(be,Re){this.iterable=be,this.sortSpec=Re}return qe.prototype[Symbol.iterator]=function(){var be=[],Re=[],R=0;try{for(var C=hr(this.iterable),e=C.next();!e.done;e=C.next()){var _=e.value;be.push(R),Re.push(_),++R}}catch(f){n={error:f}}finally{try{e&&!e.done&&(a=C.return)&&a.call(C)}finally{if(n)throw n.error}}var T=[];try{for(var r=hr(this.sortSpec),w=r.next();!w.done;w=r.next()){var b=w.value;T.push(new G1(Re,b))}}catch(f){s={error:f}}finally{try{w&&!w.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}T[0].genKeys(),be.sort(function(f,m){try{for(var h=hr(T),g=h.next();!g.done;g=h.next()){var v=g.value,x=v.compare(f,m);if(x!==0)return x}}catch(d){y={error:d}}finally{try{g&&!g.done&&(A=h.return)&&A.call(h)}finally{if(y)throw y.error}}return 0;var y,A});var c=[];try{for(var o=hr(be),t=o.next();!t.done;t=o.next()){var i=t.value;c.push(Re[i])}}catch(f){u={error:f}}finally{try{t&&!t.done&&(p=o.return)&&p.call(o)}finally{if(u)throw u.error}}return new Rf(c);var n,a,s,l,u,p},qe}(),W1=function(){function qe(be,Re){this.iterator=be,this.extractIndex=Re}return qe.prototype.next=function(){var be=this.iterator.next();return be.done?be:{done:!1,value:be.value[this.extractIndex]}},qe}(),jf=function(){function qe(be,Re){this.arrayIterable=be,this.extractIndex=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.arrayIterable[Symbol.iterator]();return new W1(be,this.extractIndex)},qe}(),Y1=function(){function qe(be,Re){this.iterator=be,this.numValues=Re}return qe.prototype.next=function(){for(;--this.numValues>=0;){var be=this.iterator.next();if(be.done)return be}return this.iterator.next()},qe}(),Zu=function(){function qe(be,Re){this.iterable=be,this.numValues=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.iterable[Symbol.iterator]();return new Y1(be,this.numValues)},qe}(),Z1=function(){function qe(be,Re){this.doneSkipping=!1,this.childIterator=be,this.predicate=Re}return qe.prototype.next=function(){for(;;){var be=this.childIterator.next();if(be.done)return be;if(!(!this.doneSkipping&&this.predicate(be.value)))return this.doneSkipping=!0,be}},qe}(),qs=function(){function qe(be,Re){this.childIterable=be,this.predicate=Re}return qe.prototype[Symbol.iterator]=function(){var be=this.childIterable[Symbol.iterator]();return new Z1(be,this.predicate)},qe}(),X1=function(){function qe(be,Re,R){this.columnNames=be,this.iterable=Re,this.period=R}return qe.prototype.next=function(){this.iterator||(this.iterator=this.iterable[Symbol.iterator]());for(var be=[],Re=0;Re<this.period;++Re){var R=this.iterator.next();if(R.done)break;be.push(R.value)}if(be.length===0)return{done:!0};var C=new ls({columnNames:this.columnNames,pairs:be});return{value:C,done:!1}},qe}(),J1=function(){function qe(be,Re,R){this.columnNames=be,this.iterable=Re,this.period=R}return qe.prototype[Symbol.iterator]=function(){return new X1(this.columnNames,this.iterable,this.period)},qe}(),K1=function(){function qe(be,Re){this.index=0,this.columnNames=Array.from(be),this.rowsIterator=Re[Symbol.iterator]()}return qe.prototype.next=function(){var be=this.rowsIterator.next();if(be.done)return{done:!0};for(var Re=be.value,R={},C=0;C<this.columnNames.length;++C){var e=this.columnNames[C];R[e]=Re[C]}return{done:!1,value:R}},qe}(),q0=function(){function qe(be,Re){this.columnNames=be,this.rows=Re}return qe.prototype[Symbol.iterator]=function(){return new K1(this.columnNames,this.rows)},qe}(),$1=function(){function qe(be,Re,R){this.columnNames=be,this.iterable=Re,this.period=R}return qe.prototype.next=function(){if(this.curWindow){this.curWindow.shift();var Re=this.iterator.next();if(Re.done)return{done:!0};this.curWindow.push(Re.value)}else{this.curWindow=[],this.iterator=this.iterable[Symbol.iterator]();for(var be=0;be<this.period;++be){var Re=this.iterator.next();if(Re.done)return{done:!0};this.curWindow.push(Re.value)}}var R=new ls({columnNames:this.columnNames,pairs:this.curWindow});return{value:R,done:!1}},qe}(),Q1=function(){function qe(be,Re,R){this.columnNames=be,this.iterable=Re,this.period=R}return qe.prototype[Symbol.iterator]=function(){return new $1(this.columnNames,this.iterable,this.period)},qe}(),ey=function(){function qe(be,Re,R){this.columnNames=be,this.iterator=Re[Symbol.iterator](),this.nextValue=this.iterator.next(),this.comparer=R}return qe.prototype.next=function(){if(this.nextValue.done)return{done:!0};for(var be=[this.nextValue.value],Re=this.nextValue.value;this.nextValue=this.iterator.next(),!this.nextValue.done;){if(!this.comparer(Re[1],this.nextValue.value[1])){Re=this.nextValue.value;break}be.push(this.nextValue.value),Re=this.nextValue.value}var R=new ls({columnNames:this.columnNames,pairs:be});return{value:R,done:!1}},qe}(),ty=function(){function qe(be,Re,R){this.columnNames=be,this.iterable=Re,this.comparer=R}return qe.prototype[Symbol.iterator]=function(){return new ey(this.columnNames,this.iterable,this.comparer)},qe}(),ny=function(){function qe(be,Re){this.repetition=0,this.iterator=be[Symbol.iterator](),this.count=Re,this.result=this.iterator.next()}return qe.prototype.next=function(){return this.count==0?{done:!0}:(this.repetition==this.count&&(this.result=this.iterator.next(),this.repetition=0),this.repetition+=1,this.result.done?{done:!0}:{done:!1,value:this.result.value})},qe}(),ry=function(){function qe(be,Re){this.iterable=be,this.count=Re}return qe.prototype[Symbol.iterator]=function(){return new ny(this.iterable,this.count)},qe}(),iy=function(){function qe(be,Re){this.count=0,this.repetition=0,this.firstIteration=!0,this.iterable=be,this.iterator=be[Symbol.iterator](),this.count=Re}return qe.prototype.next=function(){var be=this.iterator.next();return this.firstIteration&&be.done?{done:!0}:(this.firstIteration=!1,be.done&&(this.repetition+=1,this.iterator=this.iterable[Symbol.iterator](),be=this.iterator.next()),this.repetition<this.count?{done:!1,value:be.value}:{done:!0})},qe}(),ay=function(){function qe(be,Re){this.iterable=be,this.count=Re}return qe.prototype[Symbol.iterator]=function(){return new iy(this.iterable,this.count)},qe}(),oy=function(){function qe(be){this.iteratorIndex=0,this.iterators=be.map(function(Re){return Re[Symbol.iterator]()})}return qe.prototype.next=function(){if(this.iterators.length>0){for(var be=this.iterators[this.iteratorIndex].next();be.done;)if(this.iteratorIndex+=1,this.iteratorIndex<this.iterators.length)be=this.iterators[this.iteratorIndex].next();else return{done:!0};return{done:!1,value:be.value}}return{done:!0}},qe}(),sy=function(){function qe(be){this.iterables=be}return qe.prototype[Symbol.iterator]=function(){return new oy(this.iterables)},qe}(),ly=function(){function qe(be,Re){this.columnNamesIterator=null,this.values=be,this.considerAllRows=Re}return qe.prototype.next=function(){if(this.columnNamesIterator===null)if(this.considerAllRows){var be={};try{for(var Re=hr(this.values),R=Re.next();!R.done;R=Re.next()){var C=R.value;try{for(var e=hr(Object.keys(C)),_=e.next();!_.done;_=e.next()){var T=_.value;be[T]=!0}}catch(i){o={error:i}}finally{try{_&&!_.done&&(t=e.return)&&t.call(e)}finally{if(o)throw o.error}}}}catch(i){b={error:i}}finally{try{R&&!R.done&&(c=Re.return)&&c.call(Re)}finally{if(b)throw b.error}}this.columnNamesIterator=new Rf(Object.keys(be))}else{var r=this.values[Symbol.iterator](),w=r.next();if(w.done)return{done:!0,value:""};this.columnNamesIterator=new Rf(Object.keys(w.value))}return this.columnNamesIterator.next();var b,c,o,t},qe}(),H0=function(){function qe(be,Re){this.values=be,this.considerAllRows=Re}return qe.prototype[Symbol.iterator]=function(){return new ly(this.values,this.considerAllRows)},qe}();function Jh(qe,be){var Re={},R=[];try{for(var C=hr(qe),e=C.next();!e.done;e=C.next()){var _=e.value,T=be&&be(_)||_;Re[T]||(Re[T]=!0,R.push(_))}}catch(b){r={error:b}}finally{try{e&&!e.done&&(w=C.return)&&w.call(C)}finally{if(r)throw r.error}}return R;var r,w}function mu(qe,be,Re){var R={};try{for(var C=hr(qe),e=C.next();!e.done;e=C.next()){var _=e.value,T=be(_);R[T]=Re(_)}}catch(b){r={error:b}}finally{try{e&&!e.done&&(w=C.return)&&w.call(C)}finally{if(r)throw r.error}}return R;var r,w}function uy(qe,be,Re){var R=new Map;try{for(var C=hr(qe),e=C.next();!e.done;e=C.next()){var _=e.value;R.set(be(_),Re(_))}}catch(w){T={error:w}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(T)throw T.error}}return R;var T,r}function ev(qe){return qe===void 0?"undefined":ia(qe)?"number":Ai(qe)?"string":qe instanceof Date?"date":cy(qe)?"boolean":"unsupported"}function qa(qe){return(0,xu.default)(qe).isObject&&!ep(qe)}function mr(qe){return(0,xu.default)(qe).isFunction}function Ai(qe){return(0,xu.default)(qe).isString}function ep(qe){return Object.prototype.toString.call(qe)==="[object Date]"}function cy(qe){return(0,xu.default)(qe).isBoolean}function ia(qe){return(0,xu.default)(qe).isNumber}function Gi(qe){return(0,xu.default)(qe).isArray}function Kh(qe){return qe===void 0}var fy=function(){function qe(be){this.iterable=be,this.index=0}return qe.prototype.next=function(){return this.iterable._next(this.index++)},qe}(),Us=function(){function qe(be){this.iterator=be,this.cached=[]}return qe.prototype[Symbol.iterator]=function(){return new fy(this)},qe.prototype._next=function(be){if(be>=this.cached.length){var Re=this.iterator.next();if(Re.done)return{done:!0};this.cached.push(Re.value)}return{done:!1,value:this.cached[be]}},qe}(),ls=function(){function qe(be){if(this.configFn=null,this.content=null,this.indexedContent=null,be){var Re=be;if(Re.getTypeCode!==void 0){var R=Re.getTypeCode();if(R==="dataframe"||R==="series"){Re.content!==void 0?this.content=Re.content:this.configFn=Re.configFn;return}}mr(be)?this.configFn=be:qe.isIterator(be)?this.content=qe.initFromIterator(be):qe.isIterable(be)?this.content=qe.initFromIterable(be):this.content=qe.initFromConfig(be)}else this.content=qe.initEmpty()}return qe.initFromIterator=function(be){return qe.initFromIterable(new Us(be))},qe.initFromIterable=function(be){var Re=be[Symbol.iterator]().next(),R=Re.done?[]:Object.keys(Re.value);return{index:qe.defaultCountIterable,values:be,pairs:new Ec([qe.defaultCountIterable,be]),isBaked:!0,columnNames:R,isCaseSensitive:!1}},qe.initEmpty=function(){return{index:qe.defaultEmptyIterable,values:qe.defaultEmptyIterable,pairs:qe.defaultEmptyIterable,isBaked:!0,columnNames:[],isCaseSensitive:!1}},qe.initColumnNames=function(be,Re){var R=[],C={},e=Array.from(be).map(function(l){return l.toString()});try{for(var _=hr(e),T=_.next();!T.done;T=_.next()){var r=T.value,w=Re!==void 0&&Re?r:r.toLowerCase();C[w]===void 0?C[w]=1:C[w]+=1}}catch(l){i={error:l}}finally{try{T&&!T.done&&(n=_.return)&&n.call(_)}finally{if(i)throw i.error}}var b={};try{for(var c=hr(e),o=c.next();!o.done;o=c.next()){var r=o.value,w=Re!==void 0&&Re?r:r.toLowerCase();if(C[w]>1){var t=1;b[w]!==void 0&&(t=b[w]),R.push(r+"."+t),b[w]=t+1}else R.push(r)}}catch(l){a={error:l}}finally{try{o&&!o.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return R;var i,n,a,s},qe.isIterator=function(be){return qa(be)&&mr(be.next)},qe.isIterable=function(be){return Gi(be)||qa(be)&&mr(be[Symbol.iterator])},qe.checkIterable=function(be,Re){if(!qe.isIterable(be))throw new Error("Expected '"+Re+"' field of DataFrame config object to be an array of values or an iterable of values.")},qe.initFromConfig=function(be){var Re,R,C,e=!1,_;if(be.pairs&&(qe.isIterator(be.pairs)?C=new Us(be.pairs):(qe.checkIterable(be.pairs,"pairs"),C=be.pairs)),be.columns){var T=be.columns;if(qe.isIterator(T)&&(T=new Us(T)),qe.isIterable(T)){var r=T;_=Array.from(r).map(function(s){return s.name}),T=mu(r,function(s){return s.name},function(s){return s.series})}else{if(!qa(T))throw new Error("Expected 'columns' member of 'config' parameter to DataFrame constructor to be an object with fields that define columns.");_=Object.keys(T)}var w=[];try{for(var b=hr(_),c=b.next();!c.done;c=b.next()){var o=c.value,t=T[o];qe.isIterator(t)?t=new Us(t):qe.checkIterable(t,o),w.push(t)}}catch(s){n={error:s}}finally{try{c&&!c.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}R=new q0(_,new Ec(w))}else if(be.columnNames&&(qe.isIterator(be.columnNames)?_=new Us(be.columnNames):_=be.columnNames,_=this.initColumnNames(_,be.caseSensitive)),be.rows){be.columnNames||(_=new ho(new Qh,function(s){return"Column."+s.toString()}));var i=void 0;qe.isIterator(be.rows)?i=new Us(be.rows):(qe.checkIterable(be.rows,"rows"),i=be.rows),R=new q0(_,i)}else be.values?(qe.isIterator(be.values)?R=new Us(be.values):(qe.checkIterable(be.values,"values"),R=be.values),be.columnNames||(_=new H0(R,be.considerAllRows||!1))):C?(R=new jf(C,1),be.columnNames||(_=new H0(R,be.considerAllRows||!1))):(R=qe.defaultEmptyIterable,be.columnNames||(_=qe.defaultEmptyIterable));return be.index?qe.isIterator(be.index)?Re=new Us(be.index):(qe.checkIterable(be.index,"index"),Re=be.index):C?Re=new jf(C,0):Re=qe.defaultCountIterable,C||(C=new Ec([Re,R])),be.baked!==void 0&&(e=be.baked),{index:Re,values:R,pairs:C,isBaked:e,columnNames:_,isCaseSensitive:be.caseSensitive||!1};var n,a},qe.prototype.lazyInit=function(){this.content===null&&this.configFn!==null&&(this.content=qe.initFromConfig(this.configFn()))},qe.prototype.getContent=function(){return this.lazyInit(),this.content},qe.prototype.getRowByIndex=function(be){if(!this.indexedContent){this.indexedContent=new Map;try{for(var Re=hr(this.getContent().pairs),R=Re.next();!R.done;R=Re.next()){var C=R.value;this.indexedContent.set(C[0],C[1])}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}}return this.indexedContent.get(be);var e,_},qe.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},qe.prototype.getColumnNames=function(){return Array.from(this.getContent().columnNames)},qe.prototype.getColumns=function(){var be=this;return new ha(function(){var Re=be.getColumnNames();return{values:Re.map(function(R){var C=be.getSeries(R).skipWhile(function(_){return _==null}),e=C.any()?C.first():void 0;return{name:R,type:ev(e),series:C}})}})},qe.prototype.isCaseSensitive=function(){return this.getContent().isCaseSensitive},qe.prototype.cast=function(){return this},qe.prototype.getIndex=function(){var be=this;return new tv(function(){return{values:be.getContent().index}})},qe.prototype.setIndex=function(be){if(!Ai(be))throw new Error("Expected 'columnName' parameter to 'DataFrame.setIndex' to be a string that specifies the name of the column to set as the index for the dataframe.");return this.withIndex(this.getSeries(be))},qe.prototype.withIndex=function(be){var Re=this;return mr(be)?new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:R.values,index:Re.deflate(be)}}):(qe.checkIterable(be,"newIndex"),new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:R.values,index:be}}))},qe.prototype.resetIndex=function(){var be=this;return new qe(function(){var Re=be.getContent();return{columnNames:Re.columnNames,values:Re.values}})},qe.prototype.getSeries=function(be){var Re=this;if(!Ai(be))throw new Error("Expected 'columnName' parameter to 'DataFrame.getSeries' function to be a string that specifies the name of the column to retreive.");return new ha(function(){return{values:new ho(Re.getContent().values,function(R){return R[be]}),index:Re.getContent().index}})},qe.prototype.hasSeries=function(be){var Re=be.toLowerCase();try{for(var R=hr(this.getColumnNames()),C=R.next();!C.done;C=R.next()){var e=C.value;if(e.toLowerCase()===Re)return!0}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return!1;var _,T},qe.prototype.expectSeries=function(be){if(!this.hasSeries(be))throw new Error("Expected dataframe to contain series with column name: '"+be+"'.");return this.getSeries(be)},qe.prototype.withSeries=function(be,Re){var R=this;if(qa(be)){if(!Kh(Re))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!Ai(be))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.withSeries' function to be a string that specifies the column to set or replace.");if(!mr(Re)&&!qa(Re))throw new Error("Expected 'series' parameter to 'DataFrame.withSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(qa(be)){var C=be,e=Object.keys(C),_=this;try{for(var T=hr(e),r=T.next();!r.done;r=T.next()){var w=r.value;_=_.withSeries(w,C[w])}}catch(i){o={error:i}}finally{try{r&&!r.done&&(t=T.return)&&t.call(T)}finally{if(o)throw o.error}}return _.cast()}var b=be;if(this.none()){var c=void 0;return mr(Re)?c=Re(this):c=Re,c.inflate(function(i){var n={};return n[b]=i,n}).cast()}return new qe(function(){var i;mr(Re)?i=Re(R):i=Re;var n=uy(i.toPairs(),function(s){return s[0]},function(s){return s[1]}),a=Jh(R.getColumnNames().concat([b]));return{columnNames:a,index:R.getContent().index,pairs:new ho(R.getContent().pairs,function(s){var l=s[0],u=s[1],p=Object.assign({},u);return p[b]=n.get(l),[l,p]})}});var o,t},qe.merge=function(be){var Re=!1,R=new Map;try{for(var C=hr(be),e=C.next();!e.done;e=C.next()){var _=e.value;_.isCaseSensitive()&&(Re=!0);try{for(var T=hr(_.toPairs()),r=T.next();!r.done;r=T.next()){var w=r.value,b=w[0].toString();if(!R.has(b))R.set(b,{index:w[0],value:w[1]});else{var c=R.get(b),o={index:w[0],value:Object.assign({},c.value,w[1])};R.set(b,o)}}}catch(p){l={error:p}}finally{try{r&&!r.done&&(u=T.return)&&u.call(T)}finally{if(l)throw l.error}}}}catch(p){a={error:p}}finally{try{e&&!e.done&&(s=C.return)&&s.call(C)}finally{if(a)throw a.error}}var t=Array.from(be).map(function(p){return p.getColumnNames()}).reduce(function(p,f){return p.concat(f)},[]),i=Jh(t),n=Array.from(R.values()).map(function(p){return[p.index,p.value]});return n.sort(function(p,f){return p[0]===f[0]?0:p[0]>f[0]?1:-1}),new qe({columnNames:i,pairs:n,caseSensitive:Re});var a,s,l,u},qe.prototype.merge=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];return qe.merge([this].concat(be))},qe.prototype.ensureSeries=function(be,Re){if(qa(be)){if(!Kh(Re))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to not be set when 'columnNameOrSpec is an object.")}else{if(!Ai(be))throw new Error("Expected 'columnNameOrSpec' parameter to 'DataFrame.ensureSeries' function to be a string that specifies the column to set or replace.");if(!mr(Re)&&!qa(Re))throw new Error("Expected 'series' parameter to 'DataFrame.ensureSeries' to be a Series object or a function that takes a dataframe and produces a Series.")}if(qa(be)){var R=be,C=Object.keys(be),e=this;try{for(var _=hr(C),T=_.next();!T.done;T=_.next()){var r=T.value;e=e.ensureSeries(r,R[r])}}catch(o){b={error:o}}finally{try{T&&!T.done&&(c=_.return)&&c.call(_)}finally{if(b)throw b.error}}return e}var w=be;if(this.hasSeries(w))return this;return this.withSeries(w,Re);var b,c},qe.prototype.subset=function(be){var Re=this;if(!Gi(be))throw new Error("Expected 'columnNames' parameter to 'DataFrame.subset' to be an array of column names to keep.");return new qe(function(){var R=Re.getContent();return{columnNames:be,index:R.index,values:new ho(R.values,function(C){var e={};try{for(var _=hr(be),T=_.next();!T.done;T=_.next()){var r=T.value;e[r]=C[r]}}catch(c){w={error:c}}finally{try{T&&!T.done&&(b=_.return)&&b.call(_)}finally{if(w)throw w.error}}return e;var w,b}),pairs:new ho(R.pairs,function(C){var e={},_=C[1];try{for(var T=hr(be),r=T.next();!r.done;r=T.next()){var w=r.value;e[w]=_[w]}}catch(o){b={error:o}}finally{try{r&&!r.done&&(c=T.return)&&c.call(T)}finally{if(b)throw b.error}}return[C[0],e];var b,c})}})},qe.prototype.dropSeries=function(be){var Re=this;if(!Gi(be)){if(!Ai(be))throw new Error("'DataFrame.dropSeries' expected either a string or an array or strings.");be=[be]}return new qe(function(){var R=Re.getContent(),C=[];try{for(var e=hr(R.columnNames),_=e.next();!_.done;_=e.next()){var T=_.value;be.indexOf(T)===-1&&C.push(T)}}catch(b){r={error:b}}finally{try{_&&!_.done&&(w=e.return)&&w.call(e)}finally{if(r)throw r.error}}return{columnNames:C,index:R.index,values:new ho(R.values,function(b){var c=Object.assign({},b);try{for(var o=hr(be),t=o.next();!t.done;t=o.next()){var i=t.value;delete c[i]}}catch(s){n={error:s}}finally{try{t&&!t.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return c;var n,a}),pairs:new ho(R.pairs,function(b){var c=Object.assign({},b[1]);try{for(var o=hr(be),t=o.next();!t.done;t=o.next()){var i=t.value;delete c[i]}}catch(s){n={error:s}}finally{try{t&&!t.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return[b[0],c];var n,a})};var r,w})},qe.prototype.reorderSeries=function(be){var Re=this;if(!Gi(be))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.");try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;if(!Ai(e))throw new Error("Expected parameter 'columnNames' to 'DataFrame.reorderSeries' to be an array with column names.")}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return new qe(function(){var r=Re.getContent();return{columnNames:be,index:r.index,values:new ho(r.values,function(w){var b={};try{for(var c=hr(be),o=c.next();!o.done;o=c.next()){var t=o.value;b[t]=w[t]}}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}return b;var i,n}),pairs:new ho(r.pairs,function(w){var b=w[1],c={};try{for(var o=hr(be),t=o.next();!t.done;t=o.next()){var i=t.value;c[i]=b[i]}}catch(s){n={error:s}}finally{try{t&&!t.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return[w[0],c];var n,a}),caseSensitive:r.isCaseSensitive}});var _,T},qe.prototype.bringToFront=function(be){var Re=this;if(Gi(be))try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;if(!Ai(e))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.")}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}else{if(!Ai(be))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToFront' function to specify a column or columns via a string or an array of strings.");be=[be]}return new qe(function(){var r=Re.getContent(),w=Array.from(r.columnNames),b=[];try{for(var c=hr(be),o=c.next();!o.done;o=c.next()){var t=o.value;w.indexOf(t)!==-1&&b.push(t)}}catch(m){l={error:m}}finally{try{o&&!o.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}var i=[];try{for(var n=hr(w),a=n.next();!a.done;a=n.next()){var s=a.value;be.indexOf(s)===-1&&i.push(s)}}catch(m){p={error:m}}finally{try{a&&!a.done&&(f=n.return)&&f.call(n)}finally{if(p)throw p.error}}return{columnNames:b.concat(i),index:r.index,values:r.values,pairs:r.pairs};var l,u,p,f});var _,T},qe.prototype.bringToBack=function(be){var Re=this;if(Gi(be))try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;if(!Ai(e))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.")}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}else{if(!Ai(be))throw new Error("Expect 'columnOrColumns' parameter to 'DataFrame.bringToBack' function to specify a column or columns via a string or an array of strings.");be=[be]}return new qe(function(){var r=Re.getContent(),w=Array.from(r.columnNames),b=[];try{for(var c=hr(be),o=c.next();!o.done;o=c.next()){var t=o.value;w.indexOf(t)!==-1&&b.push(t)}}catch(m){l={error:m}}finally{try{o&&!o.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}var i=[];try{for(var n=hr(w),a=n.next();!a.done;a=n.next()){var s=a.value;be.indexOf(s)===-1&&i.push(s)}}catch(m){p={error:m}}finally{try{a&&!a.done&&(f=n.return)&&f.call(n)}finally{if(p)throw p.error}}return{columnNames:i.concat(b),index:r.index,values:r.values,pairs:r.pairs};var l,u,p,f});var _,T},qe.prototype.renameSeries=function(be){var Re=this;if(!qa(be))throw new Error("Expected parameter 'newColumnNames' to 'DataFrame.renameSeries' to be an array with column names.");var R=Object.keys(be);try{for(var C=hr(R),e=C.next();!e.done;e=C.next()){var _=e.value;if(!Ai(_))throw new Error("Expected existing column name '"+_+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.");if(!Ai(be[_]))throw new Error("Expected new column name '"+be[_]+"' for existing column '"+_+"' of 'newColumnNames' parameter to 'DataFrame.renameSeries' to be a string.")}}catch(w){T={error:w}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(T)throw T.error}}return new qe(function(){var w=Re.getContent(),b=[];try{for(var c=hr(w.columnNames),o=c.next();!o.done;o=c.next()){var t=o.value,i=R.indexOf(t);i===-1?b.push(t):b.push(be[t])}}catch(l){a={error:l}}finally{try{o&&!o.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}function n(l){var u=Object.assign({},l);try{for(var p=hr(R),f=p.next();!f.done;f=p.next()){var m=f.value;u[be[m]]=u[m],delete u[m]}}catch(v){h={error:v}}finally{try{f&&!f.done&&(g=p.return)&&g.call(p)}finally{if(h)throw h.error}}return u;var h,g}return{columnNames:b,index:w.index,values:new ho(w.values,n),pairs:new ho(w.pairs,function(l){return[l[0],n(l[1])]})};var a,s});var T,r},qe.prototype.toArray=function(){var be=[];try{for(var Re=hr(this.getContent().values),R=Re.next();!R.done;R=Re.next()){var C=R.value;C!=null&&be.push(C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be;var e,_},qe.prototype.toPairs=function(){var be=[];try{for(var Re=hr(this.getContent().pairs),R=Re.next();!R.done;R=Re.next()){var C=R.value;C[1]!=null&&C[1]!==null&&be.push(C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be;var e,_},qe.prototype.toObject=function(be,Re){if(!mr(be))throw new Error("Expected 'keySelector' parameter to DataFrame.toObject to be a function.");if(!mr(Re))throw new Error("Expected 'valueSelector' parameter to DataFrame.toObject to be a function.");return mu(this,be,Re)},qe.prototype.toRows=function(){var be=this.getColumnNames(),Re=[];try{for(var R=hr(this.getContent().values),C=R.next();!C.done;C=R.next()){for(var e=C.value,_=[],T=0;T<be.length;++T)_.push(e[be[T]]);Re.push(_)}}catch(b){r={error:b}}finally{try{C&&!C.done&&(w=R.return)&&w.call(R)}finally{if(r)throw r.error}}return Re;var r,w},qe.prototype.select=function(be){if(!mr(be))throw new Error("Expected 'transformer' parameter to 'Series.select' to be a function.");return this.map(be)},qe.prototype.map=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'transformer' parameter to 'DataFrame.map' to be a function.");return new qe(function(){var R=Re.getContent();return{values:new ho(R.values,be),index:R.index}})},qe.prototype.selectMany=function(be){if(!mr(be))throw new Error("Expected 'transformer' parameter to 'DataFrame.selectMany' to be a function.");return this.flatMap(be)},qe.prototype.flatMap=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'transformer' parameter to 'DataFrame.flatMap' to be a function.");return new qe(function(){return{pairs:new $0(Re.getContent().pairs,function(R,C){var e=[];try{for(var _=hr(be(R[1],C)),T=_.next();!T.done;T=_.next()){var r=T.value;e.push([R[0],r])}}catch(c){w={error:c}}finally{try{T&&!T.done&&(b=_.return)&&b.call(_)}finally{if(w)throw w.error}}return e;var w,b})}})},qe.prototype.transformSeries=function(be){if(!qa(be))throw new Error("Expected 'columnSelectors' parameter of 'DataFrame.transformSeries' function to be an object. Field names should specify columns to transform. Field values should be selector functions that specify the transformation for each column.");var Re=this;try{for(var R=hr(Object.keys(be)),C=R.next();!C.done;C=R.next()){var e=C.value;Re.hasSeries(e)&&(Re=Re.withSeries(e,Re.getSeries(e).select(be[e])))}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re;var _,T},qe.prototype.generateSeries=function(be){if(qa(be)){var w=be,C=Object.keys(w),e=this;try{for(var b=hr(C),c=b.next();!c.done;c=b.next()){var r=c.value;e=e.withSeries(r,e.select(w[r]).deflate())}}catch(l){i={error:l}}finally{try{c&&!c.done&&(n=b.return)&&n.call(b)}finally{if(i)throw i.error}}return e}else{if(!mr(be))throw new Error("Expected 'generator' parameter to 'DataFrame.generateSeries' function to be a function or an object.");var Re=be,R=this.select(Re).bake(),C=R.getColumnNames(),e=this;try{for(var _=hr(C),T=_.next();!T.done;T=_.next()){var r=T.value;e=e.withSeries(r,R.getSeries(r))}}catch(a){o={error:a}}finally{try{T&&!T.done&&(t=_.return)&&t.call(_)}finally{if(o)throw o.error}}return e}var o,t,i,n},qe.prototype.deflate=function(be){var Re=this;if(be&&!mr(be))throw new Error("Expected 'selector' parameter to 'DataFrame.deflate' function to be a selector function.");return new ha(function(){var R=Re.getContent();return be?{index:R.index,values:new ho(R.values,be),pairs:new ho(R.pairs,function(C,e){return[C[0],be(C[1],e)]})}:{index:R.index,values:R.values,pairs:R.pairs}})},qe.prototype.inflateSeries=function(be,Re){if(!Ai(be))throw new Error("Expected 'columnName' parameter to 'DataFrame.inflateSeries' to be a string that is the name of the column to inflate.");if(Re&&!mr(Re))throw new Error("Expected optional 'selector' parameter to 'DataFrame.inflateSeries' to be a selector function, if it is specified.");return this.zip(this.getSeries(be).inflate(Re),function(R,C){return Object.assign({},R,C)})},qe.prototype.window=function(be){var Re=this;if(!ia(be))throw new Error("Expected 'period' parameter to 'DataFrame.window' to be a number.");return new ha(function(){var R=Re.getContent();return{values:new J1(R.columnNames,R.pairs,be)}})},qe.prototype.rollingWindow=function(be){var Re=this;if(!ia(be))throw new Error("Expected 'period' parameter to 'DataFrame.rollingWindow' to be a number.");return new ha(function(){var R=Re.getContent();return{values:new Q1(R.columnNames,R.pairs,be)}})},qe.prototype.variableWindow=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'comparer' parameter to 'DataFrame.variableWindow' to be a function.");return new ha(function(){var R=Re.getContent();return{values:new ty(R.columnNames,R.pairs,be)}})},qe.prototype.sequentialDistinct=function(be){if(be){if(!mr(be))throw new Error("Expected 'selector' parameter to 'DataFrame.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else be=function(Re){return Re};return this.variableWindow(function(Re,R){return be(Re)===be(R)}).select(function(Re){return[Re.getIndex().first(),Re.first()]}).withIndex(function(Re){return Re[0]}).inflate(function(Re){return Re[1]})},qe.prototype.aggregate=function(be,Re){var R=this;if(mr(be)&&!Re)return this.skip(1).aggregate(this.first(),be);if(Re){if(!mr(Re))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var C=be;try{for(var e=hr(this),_=e.next();!_.done;_=e.next()){var T=_.value;C=Re(C,T)}}catch(t){c={error:t}}finally{try{_&&!_.done&&(o=e.return)&&o.call(e)}finally{if(c)throw c.error}}return C}else{if(!qa(be))throw new Error("Expected 'seed' parameter to aggregate to be an object.");var r=be,w=Object.keys(r),b=w.map(function(t){var i=r[t];if(!mr(i))throw new Error("Expected column/selector pairs in 'seed' parameter to aggregate.");return[t,R.getSeries(t).aggregate(i)]});return mu(b,function(t){return t[0]},function(t){return t[1]})}var c,o},qe.prototype.reduce=function(be,Re){if(!mr(be))throw new Error("Expected 'reducer' parameter to `DataFrame.reduce` to be a function.");var R=Re,C=this;R===void 0&&C.any()&&(R=C.first(),C=C.skip(1));try{for(var e=hr(C),_=e.next();!_.done;_=e.next()){var T=_.value;R=be(R,T)}}catch(b){r={error:b}}finally{try{_&&!_.done&&(w=e.return)&&w.call(e)}finally{if(r)throw r.error}}return R;var r,w},qe.prototype.skip=function(be){var Re=this;if(!ia(be))throw new Error("Expected 'numValues' parameter to 'DataFrame.skip' to be a number.");return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:new Zu(R.values,be),index:new Zu(R.index,be),pairs:new Zu(R.pairs,be)}})},qe.prototype.skipWhile=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipWhile' function to be a predicate function that returns true/false.");return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:new qs(R.values,be),pairs:new qs(R.pairs,function(C){return be(C[1])})}})},qe.prototype.skipUntil=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(Re){return!be(Re)})},qe.prototype.take=function(be){var Re=this;if(!ia(be))throw new Error("Expected 'numRows' parameter to 'DataFrame.take' function to be a number.");return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,index:new Gu(R.index,be),values:new Gu(R.values,be),pairs:new Gu(R.pairs,be)}})},qe.prototype.takeWhile=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeWhile' function to be a predicate function that returns true/false.");return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:new Vs(R.values,be),pairs:new Vs(R.pairs,function(C){return be(C[1])})}})},qe.prototype.takeUntil=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(Re){return!be(Re)})},qe.prototype.count=function(){var be=0;try{for(var Re=hr(this.getContent().values),R=Re.next();!R.done;R=Re.next()){var C=R.value;++be}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be;var e,_},qe.prototype.first=function(){try{for(var be=hr(this),Re=be.next();!Re.done;Re=be.next()){var R=Re.value;return R}}catch(_){C={error:_}}finally{try{Re&&!Re.done&&(e=be.return)&&e.call(be)}finally{if(C)throw C.error}}throw new Error("DataFrame.first: No values in DataFrame.");var C,e},qe.prototype.last=function(){var be=null;try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;be=C}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}if(be===null)throw new Error("DataFrame.last: No values in DataFrame.");return be;var e,_},qe.prototype.at=function(be){if(!this.none())return this.getRowByIndex(be)},qe.prototype.head=function(be){if(!ia(be))throw new Error("Expected 'numValues' parameter to 'DataFrame.head' function to be a number.");if(be===0)return new qe;var Re=be<0?this.count()-Math.abs(be):be;return this.take(Re)},qe.prototype.tail=function(be){if(!ia(be))throw new Error("Expected 'numValues' parameter to 'DataFrame.tail' function to be a number.");if(be===0)return new qe;var Re=be>0?this.count()-be:Math.abs(be);return this.skip(Re)},qe.prototype.where=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.where' to be a function.");return this.filter(be)},qe.prototype.filter=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.filter' to be a function.");return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:new Wu(R.values,be),pairs:new Wu(R.pairs,function(C){return be(C[1])})}})},qe.prototype.forEach=function(be){if(!mr(be))throw new Error("Expected 'callback' parameter to 'DataFrame.forEach' to be a function.");var Re=0;try{for(var R=hr(this),C=R.next();!C.done;C=R.next()){var e=C.value;be(e,Re++)}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return this;var _,T},qe.prototype.all=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.all' to be a function.");var Re=0;try{for(var R=hr(this),C=R.next();!C.done;C=R.next()){var e=C.value;if(!be(e))return!1;++Re}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re>0;var _,T},qe.prototype.any=function(be){if(be&&!mr(be))throw new Error("Expected optional 'predicate' parameter to 'DataFrame.any' to be a function.");if(be)try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;if(be(C))return!0}}catch(r){_={error:r}}finally{try{R&&!R.done&&(T=Re.return)&&T.call(Re)}finally{if(_)throw _.error}}else{var e=this[Symbol.iterator]();return!e.next().done}return!1;var _,T},qe.prototype.none=function(be){if(be&&!mr(be))throw new Error("Expected 'predicate' parameter to 'DataFrame.none' to be a function.");if(be)try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;if(be(C))return!1}}catch(r){_={error:r}}finally{try{R&&!R.done&&(T=Re.return)&&T.call(Re)}finally{if(_)throw _.error}}else{var e=this[Symbol.iterator]();return e.next().done||!1}return!0;var _,T},qe.prototype.startAt=function(be){var Re=this;return new qe(function(){var R=Re.getContent(),C=Re.getIndex().getLessThan();return{columnNames:R.columnNames,index:new qs(R.index,function(e){return C(e,be)}),pairs:new qs(R.pairs,function(e){return C(e[0],be)})}})},qe.prototype.endAt=function(be){var Re=this;return new qe(function(){var R=Re.getContent(),C=Re.getIndex().getLessThanOrEqualTo();return{columnNames:R.columnNames,index:new Vs(R.index,function(e){return C(e,be)}),pairs:new Vs(R.pairs,function(e){return C(e[0],be)})}})},qe.prototype.before=function(be){var Re=this;return new qe(function(){var R=Re.getContent(),C=Re.getIndex().getLessThan();return{columnNames:R.columnNames,index:new Vs(R.index,function(e){return C(e,be)}),pairs:new Vs(R.pairs,function(e){return C(e[0],be)})}})},qe.prototype.after=function(be){var Re=this;return new qe(function(){var R=Re.getContent(),C=Re.getIndex().getLessThanOrEqualTo();return{columnNames:R.columnNames,index:new qs(R.index,function(e){return C(e,be)}),pairs:new qs(R.pairs,function(e){return C(e[0],be)})}})},qe.prototype.between=function(be,Re){return this.startAt(be).endAt(Re)},qe.prototype.toString=function(){var be=this.getColumnNames(),Re=["__index__"].concat(be),R=new tp.default;try{for(var C=hr(this.toPairs()),e=C.next();!e.done;e=C.next()){var _=e.value,T=_[0],r=_[1];R.cell(Re[0],T);for(var w=0;w<be.length;++w){var b=be[w];R.cell(Re[w+1],r[b])}R.newRow()}}catch(t){c={error:t}}finally{try{e&&!e.done&&(o=C.return)&&o.call(C)}finally{if(c)throw c.error}}return R.toString();var c,o},qe.prototype.parseInts=function(be){if(Gi(be)){var Re=this;try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;Re=Re.parseInts(e)}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re}else return this.withSeries(be,this.getSeries(be).parseInts());var _,T},qe.prototype.parseFloats=function(be){if(Gi(be)){var Re=this;try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;Re=Re.parseFloats(e)}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re}else return this.withSeries(be,this.getSeries(be).parseFloats());var _,T},qe.prototype.parseDates=function(be,Re){if(Re&&!Ai(Re))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.parseDates' to be a string (if specified).");if(Gi(be)){var R=this;try{for(var C=hr(be),e=C.next();!e.done;e=C.next()){var _=e.value;R=R.parseDates(_,Re)}}catch(w){T={error:w}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(T)throw T.error}}return R}else return this.withSeries(be,this.getSeries(be).parseDates(Re));var T,r},qe.prototype.toStrings=function(be,Re){if(qa(be)){try{for(var R=hr(Object.keys(be)),C=R.next();!C.done;C=R.next()){var e=C.value;if(!Ai(be[e]))throw new Error("Expected values of 'columnNames' parameter to be strings when a format spec is passed in.")}}catch(u){t={error:u}}finally{try{C&&!C.done&&(i=R.return)&&i.call(R)}finally{if(t)throw t.error}}if(!Kh(Re))throw new Error("Optional 'formatString' parameter to 'DataFrame.toStrings' should not be set when passing in a format spec.")}else{if(!Gi(be)&&!Ai(be))throw new Error("Expected 'columnNames' parameter to 'DataFrame.toStrings' to be a string, array of strings or format spec that specifes which columns should be converted to strings.");if(Re&&!Ai(Re))throw new Error("Expected optional 'formatString' parameter to 'DataFrame.toStrings' to be a string (if specified).")}if(qa(be)){var _=this;try{for(var T=hr(Object.keys(be)),r=T.next();!r.done;r=T.next()){var e=r.value,w=be[e];_=_.toStrings(e,w)}}catch(u){n={error:u}}finally{try{r&&!r.done&&(a=T.return)&&a.call(T)}finally{if(n)throw n.error}}return _}else if(Gi(be)){var _=this;try{for(var b=hr(be),c=b.next();!c.done;c=b.next()){var e=c.value;_=_.toStrings(e,Re)}}catch(p){s={error:p}}finally{try{c&&!c.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}return _}else{var o=be;return this.withSeries(o,this.getSeries(o).toStrings(Re))}var t,i,n,a,s,l},qe.prototype.truncateStrings=function(be){if(!ia(be))throw new Error("Expected 'maxLength' parameter to 'truncateStrings' to be an integer.");return this.select(function(Re){var R={};try{for(var C=hr(Object.keys(Re)),e=C.next();!e.done;e=C.next()){var _=e.value,T=Re[_];Ai(T)?R[_]=T.substring(0,be):R[_]=T}}catch(b){r={error:b}}finally{try{e&&!e.done&&(w=C.return)&&w.call(C)}finally{if(r)throw r.error}}return R;var r,w})},qe.prototype.round=function(be){if(be!==void 0){if(!ia(be))throw new Error("Expected 'numDecimalPlaces' parameter to 'DataFrame.round' to be a number.")}else be=2;return this.select(function(Re){var R={};try{for(var C=hr(Object.keys(Re)),e=C.next();!e.done;e=C.next()){var _=e.value,T=Re[_];ia(T)?R[_]=parseFloat(T.toFixed(be)):R[_]=T}}catch(b){r={error:b}}finally{try{e&&!e.done&&(w=C.return)&&w.call(C)}finally{if(r)throw r.error}}return R;var r,w})},qe.prototype.bake=function(){return this.getContent().isBaked?this:new qe({columnNames:this.getColumnNames(),values:this.toArray(),pairs:this.toPairs(),baked:!0})},qe.prototype.reverse=function(){var be=this;return new qe(function(){var Re=be.getContent();return{columnNames:Re.columnNames,values:new Yu(Re.values),index:new Yu(Re.index),pairs:new Yu(Re.pairs)}})},qe.prototype.distinct=function(be){var Re=this;return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,values:new Bf(R.values,be),pairs:new Bf(R.pairs,function(C){return be&&be(C[1])||C[1]})}})},qe.prototype.groupBy=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'selector' parameter to 'DataFrame.groupBy' to be a selector function that determines the value to group the series by.");return new ha(function(){var R=[],C={},e=0;try{for(var _=hr(Re.getContent().pairs),T=_.next();!T.done;T=_.next()){var r=T.value,w=be(r[1],e);++e;var b=C[w];if(b)b.push(r);else{var c=[];c.push(r),R.push(c),C[w]=c}}}catch(i){o={error:i}}finally{try{T&&!T.done&&(t=_.return)&&t.call(_)}finally{if(o)throw o.error}}return{values:R.map(function(i){return new qe({pairs:i})})};var o,t})},qe.prototype.groupSequentialBy=function(be){if(be){if(!mr(be))throw new Error("Expected 'selector' parameter to 'DataFrame.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else be=function(Re){return Re};return this.variableWindow(function(Re,R){return be(Re)===be(R)})},qe.concat=function(be){if(!Gi(be))throw new Error("Expected 'dataframes' parameter to 'DataFrame.concat' to be an array of dataframes.");return new qe(function(){var Re=be,R=Re.map(function(n){return n.getContent()}),C=[];try{for(var e=hr(R),_=e.next();!_.done;_=e.next()){var T=_.value;try{for(var r=hr(T.columnNames),w=r.next();!w.done;w=r.next()){var b=w.value;C.push(b)}}catch(n){t={error:n}}finally{try{w&&!w.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}}catch(n){c={error:n}}finally{try{_&&!_.done&&(o=e.return)&&o.call(e)}finally{if(c)throw c.error}}return C=Jh(C),{columnNames:C,values:new zf(R.map(function(n){return n.values})),pairs:new zf(R.map(function(n){return n.pairs}))};var c,o,t,i})},qe.prototype.concat=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];var R=[this];try{for(var C=hr(be),e=C.next();!e.done;e=C.next()){var _=e.value;if(Gi(_))try{for(var T=hr(_),r=T.next();!r.done;r=T.next()){var w=r.value;R.push(w)}}catch(i){o={error:i}}finally{try{r&&!r.done&&(t=T.return)&&t.call(T)}finally{if(o)throw o.error}}else R.push(_)}}catch(i){b={error:i}}finally{try{e&&!e.done&&(c=C.return)&&c.call(C)}finally{if(b)throw b.error}}return qe.concat(R);var b,c,o,t},qe.zip=function(be,Re){var R=Array.from(be);if(R.length===0)return new qe;var C=R[0];return C.none()?new qe:new qe(function(){var e=C,_=R;return{index:e.getContent().index,values:new Q0(_.map(function(T){return T.getContent().values}),Re)}})},qe.prototype.zip=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];var R=be[be.length-1],C=[this].concat(be.slice(0,be.length-1));return qe.zip(C,function(e){return R.apply(void 0,J0(e))})},qe.prototype.orderBy=function(be){var Re=this.getContent();return new G0({columnNames:Re.columnNames,values:Re.values,pairs:Re.pairs,selector:be,direction:kl.Ascending,parent:null})},qe.prototype.orderByDescending=function(be){var Re=this.getContent();return new G0({columnNames:Re.columnNames,values:Re.values,pairs:Re.pairs,selector:be,direction:kl.Descending,parent:null})},qe.prototype.union=function(be,Re){if(Re&&!mr(Re))throw new Error("Expected optional 'selector' parameter to 'DataFrame.union' to be a selector function.");return this.concat(be).distinct(Re)},qe.prototype.intersection=function(be,Re,R){if(Re){if(!mr(Re))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.intersection' to be a function.")}else Re=function(e){return e};if(R){if(!mr(R))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.intersection' to be a function.")}else R=function(e){return e};var C=this;return C.filter(function(e){var _=Re(e);return be.filter(function(T){return _===R(T)}).any()})},qe.prototype.except=function(be,Re,R){if(Re){if(!mr(Re))throw new Error("Expected optional 'outerSelector' parameter to 'DataFrame.except' to be a function.")}else Re=function(e){return e};if(R){if(!mr(R))throw new Error("Expected optional 'innerSelector' parameter to 'DataFrame.except' to be a function.")}else R=function(e){return e};var C=this;return C.filter(function(e){var _=Re(e);return be.filter(function(T){return _===R(T)}).none()})},qe.prototype.join=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.join' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.join' to be a selector function.");var e=this;return new qe(function(){var _=be.groupBy(R).toObject(function(f){return R(f.first())},function(f){return f}),T=e.getContent(),r=[];try{for(var w=hr(e),b=w.next();!b.done;b=w.next()){var c=b.value,o=Re(c),t=_[o];if(t)try{for(var i=hr(t),n=i.next();!n.done;n=i.next()){var a=n.value;r.push(C(c,a))}}catch(f){u={error:f}}finally{try{n&&!n.done&&(p=i.return)&&p.call(i)}finally{if(u)throw u.error}}}}catch(f){s={error:f}}finally{try{b&&!b.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}return{values:r};var s,l,u,p})},qe.prototype.joinOuter=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuter' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuter' to be a selector function.");var e=this,_=e.except(be,Re,R).select(function(w){return C(w,null)}).resetIndex(),T=be.except(e,R,Re).select(function(w){return C(null,w)}).resetIndex(),r=e.join(be,Re,R,C);return _.concat(r).concat(T).resetIndex()},qe.prototype.joinOuterLeft=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterLeft' to be a selector function.");var e=this,_=e.except(be,Re,R).select(function(r){return C(r,null)}).resetIndex(),T=e.join(be,Re,R,C);return _.concat(T).resetIndex()},qe.prototype.joinOuterRight=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'DataFrame.joinOuterRight' to be a selector function.");var e=this,_=be.except(e,R,Re).select(function(r){return C(null,r)}).resetIndex(),T=e.join(be,Re,R,C);return T.concat(_).resetIndex()},qe.prototype.summarize=function(be){if(be&&!qa(be))throw new Error("Expected 'spec' parameter to 'DataFrame.summarize' to be an object that specifies how to summarize the dataframe.");if(!be){be={};try{for(var Re=hr(this.getColumnNames()),R=Re.next();!R.done;R=Re.next()){var C=R.value,e={};e[C+"_sum"]=ha.sum,e[C+"_average"]=ha.average,e[C+"_count"]=ha.count,be[C]=e}}catch(A){p={error:A}}finally{try{R&&!R.done&&(f=Re.return)&&f.call(Re)}finally{if(p)throw p.error}}}try{for(var _=hr(Object.keys(be)),T=_.next();!T.done;T=_.next()){var r=T.value,w=be[r];mr(w)&&(be[r]={},be[r][r]=w)}}catch(A){m={error:A}}finally{try{T&&!T.done&&(h=_.return)&&h.call(_)}finally{if(m)throw m.error}}var b=Object.keys(be),c=mu(b,function(A){return A},function(A){return Object.keys(be[A])}),o={};try{for(var t=hr(b),i=t.next();!i.done;i=t.next()){var r=i.value,n=c[r];try{for(var a=hr(n),s=a.next();!s.done;s=a.next()){var l=s.value,u=be[r][l];o[l]=u(this.getSeries(r))}}catch(d){x={error:d}}finally{try{s&&!s.done&&(y=a.return)&&y.call(a)}finally{if(x)throw x.error}}}}catch(A){g={error:A}}finally{try{i&&!i.done&&(v=t.return)&&v.call(t)}finally{if(g)throw g.error}}return o;var p,f,m,h,g,v,x,y},qe.prototype.pivot=function(be,Re,R){var C;if(Ai(be))C=[be];else{if(!Gi(be))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's columns.");if(C=Array.from(be),C.length===0)throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to contain at least one string.");try{for(var e=hr(C),_=e.next();!_.done;_=e.next()){var T=_.value;if(!Ai(T))throw new Error("Expected 'columnOrColumns' parameter to 'DataFrame.pivot' to be an array of strings, each string identifies a column in the DataFrame on which to pivot.")}}catch(A){g={error:A}}finally{try{_&&!_.done&&(v=e.return)&&v.call(e)}finally{if(g)throw g.error}}}var r;if(qa(Re)){r=Re;try{for(var c=hr(Object.keys(r)),o=c.next();!o.done;o=c.next()){var t=o.value,i=r[t];mr(i)&&(r[t]={},r[t][t]=i)}}catch(A){x={error:A}}finally{try{o&&!o.done&&(y=c.return)&&y.call(c)}finally{if(x)throw x.error}}}else{if(!Ai(Re))throw new Error("Expected 'value' parameter to 'DataFrame.pivot' to be a string that identifies the column whose values to aggregate or a column spec that defines which column contains the value ot aggregate and the ways to aggregate that value.");if(!mr(R))throw new Error("Expected 'aggregator' parameter to 'DataFrame.pivot' to be a function to aggregate pivoted values.");var w=Re,b={};b[w]=R,r={},r[w]=b}for(var n=C[0],a=this.groupBy(function(A){return A[n]}).select(function(A){var d={};return d[n]=A.first()[n],d.src=A,d}),s=function(A){var d=C[A];a=a.selectMany(function(S){var k=S.src;return k.groupBy(function(E){return E[d]}).select(function(E){var L=Object.assign({},S);return L[d]=E.first()[d],L.src=E,L})})},l=1;l<C.length;++l)s(l);for(var u=Object.keys(r),p=mu(u,function(A){return A},function(A){return Object.keys(r[A])}),f=a.inflate(function(A){var d=function(P){var F=p[P];try{for(var U=hr(F),I=U.next();!I.done;I=U.next()){var N=I.value,W=r[P][N];A[N]=W(A.src.deflate(function(q){return q[P]}))}}catch(q){B={error:q}}finally{try{I&&!I.done&&(V=U.return)&&V.call(U)}finally{if(B)throw B.error}}var B,V};try{for(var S=hr(u),k=S.next();!k.done;k=S.next()){var E=k.value;d(E)}}catch(P){L={error:P}}finally{try{k&&!k.done&&(O=S.return)&&O.call(S)}finally{if(L)throw L.error}}return delete A.src,A;var L,O}),m=f.orderBy(function(A){return A[n]}),h=function(A){var d=C[A];m=m.thenBy(function(S){return S[d]})},l=1;l<C.length;++l)h(l);return m;var g,v,x,y},qe.prototype.melt=function(be,Re){var R,C;if(Ai(be))R=[be];else{if(!Gi(be))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.");R=Array.from(be);try{for(var e=hr(R),_=e.next();!_.done;_=e.next()){var T=_.value;if(!Ai(T))throw new Error("Expected 'idColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose values make the new DataFrame's identity columns.")}}catch(P){y={error:P}}finally{try{_&&!_.done&&(A=e.return)&&A.call(e)}finally{if(y)throw y.error}}}if(Ai(Re))C=[Re];else{if(!Gi(Re))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.");C=Array.from(Re);try{for(var r=hr(C),w=r.next();!w.done;w=r.next()){var T=w.value;if(!Ai(T))throw new Error("Expected 'valueColumnOrColumns' parameter to 'DataFrame.melt' to be a string or an array of strings that identifies the column(s) whose molten values make the new DataFrame's 'variable' and 'value' columns.")}}catch(P){d={error:P}}finally{try{w&&!w.done&&(S=r.return)&&S.call(r)}finally{if(d)throw d.error}}}var b=C.length,c=this.count(),o=new qe,t=this.subset(R.concat(C));try{for(var i=hr(R),n=i.next();!n.done;n=i.next()){var a=n.value;t=t.dropSeries(a);var s=this.getSeries(a),l=new ay(s,b),u=new ha(l);o=o.withSeries(a,u)}}catch(P){k={error:P}}finally{try{n&&!n.done&&(E=i.return)&&E.call(i)}finally{if(k)throw k.error}}var p=[];try{for(var f=hr(t.getColumns()),m=f.next();!m.done;m=f.next()){var a=m.value;p.push(this.getSeries(a.name))}}catch(P){L={error:P}}finally{try{m&&!m.done&&(O=f.return)&&O.call(f)}finally{if(L)throw L.error}}var h=new sy(p),g=new ha(h);o=o.withSeries("value",g);var v=new ry(C,c),x=new ha(v);return o=o.withSeries("variable",x),o;var y,A,d,S,k,E,L,O},qe.prototype.insertPair=function(be){if(!Gi(be))throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array.");if(be.length!==2)throw new Error("Expected 'pair' parameter to 'DataFrame.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new qe({pairs:[be]}).concat(this)},qe.prototype.appendPair=function(be){if(!Gi(be))throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array.");if(be.length!==2)throw new Error("Expected 'pair' parameter to 'DataFrame.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new qe({pairs:[be]}))},qe.prototype.remove=function(be){var Re=this;return new qe(function(){var R=Re.getContent();return{columnNames:R.columnNames,pairs:new Wu(R.pairs,function(C){return C[0]!==be})}})},qe.prototype.fillGaps=function(be,Re){if(!mr(be))throw new Error("Expected 'comparer' parameter to 'DataFrame.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!mr(Re))throw new Error("Expected 'generator' parameter to 'DataFrame.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(R){var C=R.toPairs(),e=C[0],_=C[1];if(!be(e,_))return[e];var T=Re(e,_);if(!Gi(T))throw new Error("Expected return from 'generator' parameter to 'DataFrame.fillGaps' to be an array of pairs, instead got a "+typeof T);return[e].concat(T)}).withIndex(function(R){return R[0]}).inflate(function(R){return R[1]}).concat(this.tail(1))},qe.prototype.defaultIfEmpty=function(be){if(this.none()){if(be instanceof qe)return be;if(Gi(be))return new qe(be);throw new Error("Expected 'defaultSequence' parameter to 'DataFrame.defaultIfEmpty' to be an array or a series.")}else return this},qe.prototype.detectTypes=function(){var be=this;return new qe(function(){var Re=be.getColumns().selectMany(function(R){return R.series.detectTypes().select(function(C){var e=Object.assign({},C);return e.Column=R.name,e})});return{columnNames:["Type","Frequency","Column"],values:Re}})},qe.prototype.detectValues=function(){var be=this;return new qe(function(){var Re=be.getColumns().selectMany(function(R){return R.series.detectValues().select(function(C){var e=Object.assign({},C);return e.Column=R.name,e})});return{columnNames:["Value","Frequency","Column"],values:Re}})},qe.prototype.toJSON=function(){return JSON.stringify(this.toArray(),null,4)},qe.prototype.toJSON5=function(){return Y0.default.stringify(this.toArray(),null,4)},qe.prototype.toCSV=function(be){var Re=be===void 0||be.header===void 0||be.header?[this.getColumnNames()]:[],R=Re.concat(this.toRows());return Z0.default.unparse(R,be)},qe.prototype.toHTML=function(){var be=this.getColumnNames(),Re=be.map(function(C){return"            <th>"+C+"</th>"}).join(`
`),R=this.toPairs();return`<table border="1" class="dataframe">
    <thead>
        <tr style="text-align: right;">
            <th></th>
`+Re+`
       </tr>
    </thead>
    <tbody>
`+R.map(function(C){var e=C[0],_=C[1];return`        <tr>
            <th>`+e+`</th>
`+be.map(function(T){return"            <td>"+_[T]+"</td>"}).join(`
`)+`
        </tr>`}).join(`
`)+`
    </tbody>
</table>`},qe.prototype.serialize=function(){var be=this.toArray(),Re=this.getIndex(),R=Re.head(be.length).toArray(),C=this.getColumns(),e=mu(C,function(l){return l.name},function(l){return l.type}),_=Re.getType();_==="date"&&(R=R.map(function(l){return sl(l).toISOString()}));var T=!1;try{for(var r=hr(C),w=r.next();!w.done;w=r.next()){var b=w.value;if(b.type==="date"){T||(be=be.map(function(l){return Object.assign({},l)}),T=!0);try{for(var c=hr(be),o=c.next();!o.done;o=c.next()){var t=o.value;t[b.name]=sl(t[b.name]).toISOString()}}catch(l){a={error:l}}finally{try{o&&!o.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}}}}catch(l){i={error:l}}finally{try{w&&!w.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return{columnOrder:this.getColumnNames(),columns:e,index:{type:_,values:R},values:be};var i,n,a,s},qe.deserialize=function(be){var Re=be.index&&be.index.values||[],R=be.values&&be.values||[],C=!1;if(be.columns)try{for(var e=hr(Object.keys(be.columns)),_=e.next();!_.done;_=e.next()){var T=_.value;if(be.columns[T]==="date"){C||(R=R.map(function(n){return Object.assign({},n)}),C=!0);try{for(var r=hr(R),w=r.next();!w.done;w=r.next()){var b=w.value;b[T]=sl(b[T]).toDate()}}catch(n){t={error:n}}finally{try{w&&!w.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}}}}catch(n){c={error:n}}finally{try{_&&!_.done&&(o=e.return)&&o.call(e)}finally{if(c)throw c.error}}return be.index&&be.index.type==="date"&&(Re=Re.map(function(n){return sl(n).toDate()})),new qe({columnNames:be.columnOrder||[],index:Re,values:R});var c,o,t,i},qe.prototype.getTypeCode=function(){return"dataframe"},qe.defaultCountIterable=new Qh,qe.defaultEmptyIterable=new K0,qe}(),G0=function(qe){np(be,qe);function be(Re){for(var R=this,C=[],e=[],_=0,T=Re.parent,r=[];T!==null;)r.push(T),T=T.config.parent;r.reverse();try{for(var w=hr(r),b=w.next();!b.done;b=w.next()){var c=b.value,o=c.config;C.push(be.makeSortSpec(_,o.selector,o.direction)),e.push(be.makeSortSpec(_,be.makePairsSelector(o.selector),o.direction)),++_}}catch(n){t={error:n}}finally{try{b&&!b.done&&(i=w.return)&&i.call(w)}finally{if(t)throw t.error}}return C.push(be.makeSortSpec(_,Re.selector,Re.direction)),e.push(be.makeSortSpec(_,be.makePairsSelector(Re.selector),Re.direction)),R=qe.call(this,{columnNames:Re.columnNames,values:new Nf(Re.values,C),pairs:new Nf(Re.pairs,e)})||this,R.config=Re,R;var t,i}return be.makeSortSpec=function(Re,R,C){return{sortLevel:Re,selector:R,direction:C}},be.makePairsSelector=function(Re){return function(R,C){return Re(R[1],C)}},be.prototype.thenBy=function(Re){return new be({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:Re,direction:kl.Ascending,parent:this})},be.prototype.thenByDescending=function(Re){return new be({columnNames:this.config.columnNames,values:this.config.values,pairs:this.config.pairs,selector:Re,direction:kl.Descending,parent:this})},be}(ls);sl.extend(Xh);var Cc=function(qe){return qe.Start="start",qe.End="end",qe}(Cc||{}),ha=function(){function qe(be){if(this.configFn=null,this.content=null,this.indexedContent=null,be){var Re=be;if(Re.getTypeCode!==void 0){var R=Re.getTypeCode();if(R==="dataframe"||R==="series"){Re.content!==void 0?this.content=Re.content:this.configFn=Re.configFn;return}}mr(be)?this.configFn=be:qe.isIterator(be)?this.content=qe.initFromIterator(be):qe.isIterable(be)?this.content=qe.initFromIterable(be):this.content=qe.initFromConfig(be)}else this.content=qe.initEmpty()}return qe.initFromIterator=function(be){return qe.initFromIterable(new Us(be))},qe.initFromIterable=function(be){return{index:qe.defaultCountIterable,values:be,pairs:new Ec([qe.defaultCountIterable,be]),isBaked:!0}},qe.initEmpty=function(){return{index:qe.defaultEmptyIterable,values:qe.defaultEmptyIterable,pairs:qe.defaultEmptyIterable,isBaked:!0}},qe.isIterator=function(be){return qa(be)&&mr(be.next)},qe.isIterable=function(be){return Gi(be)||qa(be)&&mr(be[Symbol.iterator])},qe.checkIterable=function(be,Re){if(!qe.isIterable(be))throw new Error("Expected '"+Re+"' field of Series config object to be an array of values or an iterable of values.")},qe.initFromConfig=function(be){var Re,R,C,e=!1;return be.pairs&&(qe.isIterator(be.pairs)?C=new Us(be.pairs):(qe.checkIterable(be.pairs,"pairs"),C=be.pairs)),be.index?qe.isIterator(be.index)?Re=new Us(be.index):(qe.checkIterable(be.index,"index"),Re=be.index):C?Re=new jf(C,0):Re=qe.defaultCountIterable,be.values?qe.isIterator(be.values)?R=new Us(be.values):(qe.checkIterable(be.values,"values"),R=be.values):C?R=new jf(C,1):R=qe.defaultEmptyIterable,C||(C=new Ec([Re,R])),be.baked!==void 0&&(e=be.baked),{index:Re,values:R,pairs:C,isBaked:e}},qe.prototype.lazyInit=function(){this.content===null&&this.configFn!==null&&(this.content=qe.initFromConfig(this.configFn()))},qe.prototype.getContent=function(){return this.lazyInit(),this.content},qe.prototype.getRowByIndex=function(be){if(!this.indexedContent){this.indexedContent=new Map;try{for(var Re=hr(this.getContent().pairs),R=Re.next();!R.done;R=Re.next()){var C=R.value;this.indexedContent.set(C[0],C[1])}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}}return this.indexedContent.get(be);var e,_},qe.prototype[Symbol.iterator]=function(){return this.getContent().values[Symbol.iterator]()},qe.prototype.cast=function(){return this},qe.prototype.getIndex=function(){var be=this;return new tv(function(){return{values:be.getContent().index}})},qe.prototype.withIndex=function(be){var Re=this;return mr(be)?new qe(function(){return{values:Re.getContent().values,index:Re.select(be)}}):(qe.checkIterable(be,"newIndex"),new qe(function(){return{values:Re.getContent().values,index:be}}))},qe.prototype.resetIndex=function(){var be=this;return new qe(function(){return{values:be.getContent().values}})},qe.merge=function(be){var Re=new Map,R=Array.from(be).length,C=0;try{for(var e=hr(be),_=e.next();!_.done;_=e.next()){var T=_.value;try{for(var r=hr(T.toPairs()),w=r.next();!w.done;w=r.next()){var b=w.value,c=b[0].toString();Re.has(c)||Re.set(c,{index:b[0],values:new Array(R)}),Re.get(c).values[C]=b[1]}}catch(s){n={error:s}}finally{try{w&&!w.done&&(a=r.return)&&a.call(r)}finally{if(n)throw n.error}}++C}}catch(s){t={error:s}}finally{try{_&&!_.done&&(i=e.return)&&i.call(e)}finally{if(t)throw t.error}}var o=Array.from(Re.values()).map(function(s){return[s.index,s.values]});return o.sort(function(s,l){return s[0]===l[0]?0:s[0]>l[0]?1:-1}),new qe({pairs:o});var t,i,n,a},qe.prototype.merge=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];return qe.merge([this].concat(be))},qe.prototype.toArray=function(be){var Re=[];try{for(var R=hr(this.getContent().values),C=R.next();!C.done;C=R.next()){var e=C.value;(be&&be.includeNulls&&e!==void 0||e!=null)&&Re.push(e)}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re;var _,T},qe.prototype.toPairs=function(){var be=[];try{for(var Re=hr(this.getContent().pairs),R=Re.next();!R.done;R=Re.next()){var C=R.value;C[1]!==void 0&&C[1]!==null&&be.push(C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be;var e,_},qe.prototype.toObject=function(be,Re){if(!mr(be))throw new Error("Expected 'keySelector' parameter to Series.toObject to be a function.");if(!mr(Re))throw new Error("Expected 'valueSelector' parameter to Series.toObject to be a function.");return mu(this,be,Re)},qe.prototype.select=function(be){if(!mr(be))throw new Error("Expected 'transformer' parameter to 'Series.select' to be a function.");return this.map(be)},qe.prototype.map=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'transformer' parameter to 'Series.map' to be a function.");return new qe(function(){var R=Re.getContent();return{values:new ho(R.values,be),index:R.index}})},qe.prototype.selectMany=function(be){if(!mr(be))throw new Error("Expected 'transformer' parameter to 'Series.selectMany' to be a function.");return this.flatMap(be)},qe.prototype.flatMap=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'transformer' parameter to 'Series.flatMap' to be a function.");return new qe(function(){return{pairs:new $0(Re.getContent().pairs,function(R,C){var e=[];try{for(var _=hr(be(R[1],C)),T=_.next();!T.done;T=_.next()){var r=T.value;e.push([R[0],r])}}catch(c){w={error:c}}finally{try{T&&!T.done&&(b=_.return)&&b.call(_)}finally{if(w)throw w.error}}return e;var w,b})}})},qe.prototype.window=function(be,Re){var R=this;if(!ia(be))throw new Error("Expected 'period' parameter to 'Series.window' to be a number.");return new qe(function(){return{pairs:new B1(R.getContent().pairs,be,Re||Cc.End)}})},qe.prototype.rollingWindow=function(be,Re){var R=this;if(!ia(be))throw new Error("Expected 'period' parameter to 'Series.rollingWindow' to be a number.");return new qe(function(){return{pairs:new V1(R.getContent().pairs,be,Re||Cc.End)}})},qe.prototype.variableWindow=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'comparer' parameter to 'Series.variableWindow' to be a function.");return new qe(function(){return{values:new H1(Re.getContent().pairs,be)}})},qe.prototype.sequentialDistinct=function(be){if(be){if(!mr(be))throw new Error("Expected 'selector' parameter to 'Series.sequentialDistinct' to be a selector function that determines the value to compare for duplicates.")}else be=function(Re){return Re};return this.variableWindow(function(Re,R){return be(Re)===be(R)}).select(function(Re){return[Re.getIndex().first(),Re.first()]}).withIndex(function(Re){return Re[0]}).select(function(Re){return Re[1]})},qe.prototype.aggregate=function(be,Re){if(mr(be)&&!Re)return this.skip(1).aggregate(this.first(),be);if(!mr(Re))throw new Error("Expected 'selector' parameter to aggregate to be a function.");var R=be;try{for(var C=hr(this),e=C.next();!e.done;e=C.next()){var _=e.value;R=Re(R,_)}}catch(w){T={error:w}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(T)throw T.error}}return R;var T,r},qe.prototype.reduce=function(be,Re){if(!mr(be))throw new Error("Expected 'reducer' parameter to `Series.reduce` to be a function.");var R=Re,C=this;R===void 0&&C.any()&&(R=C.first(),C=C.skip(1));try{for(var e=hr(C),_=e.next();!_.done;_=e.next()){var T=_.value;R=be(R,T)}}catch(b){r={error:b}}finally{try{_&&!_.done&&(w=e.return)&&w.call(e)}finally{if(r)throw r.error}}return R;var r,w},qe.prototype.amountRange=function(be,Re){return this.rollingWindow(be,Re).select(function(R){return R.max()-R.min()})},qe.prototype.proportionRange=function(be,Re){return this.rollingWindow(be,Re).select(function(R){return(R.max()-R.min())/R.last()})},qe.prototype.percentRange=function(be,Re){return this.proportionRange(be,Re).select(function(R){return R*100})},qe.prototype.amountChange=function(be,Re){return this.rollingWindow(be===void 0?2:be,Re).select(function(R){return R.last()-R.first()})},qe.prototype.proportionChange=function(be,Re){return this.rollingWindow(be===void 0?2:be,Re).select(function(R){return(R.last()-R.first())/R.first()})},qe.prototype.percentChange=function(be,Re){return this.proportionChange(be,Re).select(function(R){return R*100})},qe.prototype.proportionRank=function(be){if(be===void 0&&(be=2),!ia(be))throw new Error("Expected 'period' parameter to 'Series.proportionRank' to be a number that specifies the time period for the ranking.");return this.rollingWindow(be+1).select(function(Re){var R=Re.last(),C=Re.head(-1).filter(function(_){return _<R}).count(),e=C/be;return e})},qe.prototype.percentRank=function(be){if(be===void 0&&(be=2),!ia(be))throw new Error("Expected 'period' parameter to 'Series.percentRank' to be a number that specifies the time period for the ranking.");return this.proportionRank(be).select(function(Re){return Re*100})},qe.prototype.cumsum=function(){var be=this;return new qe(function(){var Re=0,R=be.toPairs(),C=R.map(function(e){var _=Ff(e,2),T=_[0],r=_[1];return[T,Re+=r]});return{pairs:C}})},qe.prototype.skip=function(be){var Re=this;return new qe(function(){return{values:new Zu(Re.getContent().values,be),index:new Zu(Re.getContent().index,be),pairs:new Zu(Re.getContent().pairs,be)}})},qe.prototype.skipWhile=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.skipWhile' function to be a predicate function that returns true/false.");return new qe(function(){return{values:new qs(Re.getContent().values,be),pairs:new qs(Re.getContent().pairs,function(R){return be(R[1])})}})},qe.prototype.skipUntil=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.skipUntil' function to be a predicate function that returns true/false.");return this.skipWhile(function(Re){return!be(Re)})},qe.prototype.take=function(be){var Re=this;if(!ia(be))throw new Error("Expected 'numRows' parameter to 'Series.take' function to be a number.");return new qe(function(){return{index:new Gu(Re.getContent().index,be),values:new Gu(Re.getContent().values,be),pairs:new Gu(Re.getContent().pairs,be)}})},qe.prototype.takeWhile=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.takeWhile' function to be a predicate function that returns true/false.");return new qe(function(){return{values:new Vs(Re.getContent().values,be),pairs:new Vs(Re.getContent().pairs,function(R){return be(R[1])})}})},qe.prototype.takeUntil=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.takeUntil' function to be a predicate function that returns true/false.");return this.takeWhile(function(Re){return!be(Re)})},qe.count=function(be){return be.count()},qe.prototype.count=function(){var be=0;try{for(var Re=hr(this.getContent().values),R=Re.next();!R.done;R=Re.next()){var C=R.value;++be}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}return be;var e,_},qe.prototype.first=function(){try{for(var be=hr(this),Re=be.next();!Re.done;Re=be.next()){var R=Re.value;return R}}catch(_){C={error:_}}finally{try{Re&&!Re.done&&(e=be.return)&&e.call(be)}finally{if(C)throw C.error}}throw new Error("Series.first: No values in Series.");var C,e},qe.prototype.last=function(){var be=null;try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;be=C}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}if(be===null)throw new Error("Series.last: No values in Series.");return be;var e,_},qe.prototype.at=function(be){if(!this.none())return this.getRowByIndex(be)},qe.prototype.head=function(be){if(!ia(be))throw new Error("Expected 'numValues' parameter to 'Series.head' function to be a number.");if(be===0)return new qe;var Re=be<0?this.count()-Math.abs(be):be;return this.take(Re)},qe.prototype.tail=function(be){if(!ia(be))throw new Error("Expected 'numValues' parameter to 'Series.tail' function to be a number.");if(be===0)return new qe;var Re=be>0?this.count()-be:Math.abs(be);return this.skip(Re)},qe.prototype.where=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.where' to be a function.");return this.filter(be)},qe.prototype.filter=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.filter' to be a function.");return new qe(function(){var R=Re.getContent();return{values:new Wu(Re.getContent().values,be),pairs:new Wu(Re.getContent().pairs,function(C){return be(C[1])})}})},qe.prototype.forEach=function(be){if(!mr(be))throw new Error("Expected 'callback' parameter to 'Series.forEach' to be a function.");var Re=0;try{for(var R=hr(this),C=R.next();!C.done;C=R.next()){var e=C.value;be(e,Re++)}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return this;var _,T},qe.prototype.all=function(be){if(!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.all' to be a function.");var Re=0;try{for(var R=hr(this),C=R.next();!C.done;C=R.next()){var e=C.value;if(!be(e))return!1;++Re}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re>0;var _,T},qe.prototype.any=function(be){if(be&&!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.any' to be a function.");if(be)try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;if(be(C))return!0}}catch(r){_={error:r}}finally{try{R&&!R.done&&(T=Re.return)&&T.call(Re)}finally{if(_)throw _.error}}else{var e=this[Symbol.iterator]();return!e.next().done}return!1;var _,T},qe.prototype.none=function(be){if(be&&!mr(be))throw new Error("Expected 'predicate' parameter to 'Series.none' to be a function.");if(be)try{for(var Re=hr(this),R=Re.next();!R.done;R=Re.next()){var C=R.value;if(be(C))return!1}}catch(r){_={error:r}}finally{try{R&&!R.done&&(T=Re.return)&&T.call(Re)}finally{if(_)throw _.error}}else{var e=this[Symbol.iterator]();return e.next().done}return!0;var _,T},qe.prototype.startAt=function(be){var Re=this;return new qe(function(){var R=Re.getIndex().getLessThan();return{index:new qs(Re.getContent().index,function(C){return R(C,be)}),pairs:new qs(Re.getContent().pairs,function(C){return R(C[0],be)})}})},qe.prototype.endAt=function(be){var Re=this;return new qe(function(){var R=Re.getIndex().getLessThanOrEqualTo();return{index:new Vs(Re.getContent().index,function(C){return R(C,be)}),pairs:new Vs(Re.getContent().pairs,function(C){return R(C[0],be)})}})},qe.prototype.before=function(be){var Re=this;return new qe(function(){var R=Re.getIndex().getLessThan();return{index:new Vs(Re.getContent().index,function(C){return R(C,be)}),pairs:new Vs(Re.getContent().pairs,function(C){return R(C[0],be)})}})},qe.prototype.after=function(be){var Re=this;return new qe(function(){var R=Re.getIndex().getLessThanOrEqualTo();return{index:new qs(Re.getContent().index,function(C){return R(C,be)}),pairs:new qs(Re.getContent().pairs,function(C){return R(C[0],be)})}})},qe.prototype.between=function(be,Re){return this.startAt(be).endAt(Re)},qe.prototype.toString=function(){for(var be=["__index__","__value__"],Re=this.toPairs(),R=new tp.default,C=0;C<Re.length;++C){for(var e=Re[C],_=0;_<e.length;++_){var T=e[_];R.cell(be[_],T)}R.newRow()}return R.toString()},qe.parseInt=function(be,Re){if(be!=null){if(!Ai(be))throw new Error("Called Series.parseInts, expected all values in the series to be strings, instead found a '"+typeof be+"' at index "+Re);return be.length===0?void 0:parseInt(be)}},qe.prototype.parseInts=function(){return this.select(qe.parseInt)},qe.parseFloat=function(be,Re){if(be!=null){if(!Ai(be))throw new Error("Called Series.parseFloats, expected all values in the series to be strings, instead found a '"+typeof be+"' at index "+Re);return be.length===0?void 0:parseFloat(be)}},qe.prototype.parseFloats=function(){return this.select(qe.parseFloat)},qe.parseDate=function(be,Re,R){if(be!=null){if(!Ai(be))throw new Error("Called Series.parseDates, expected all values in the series to be strings, instead found a '"+typeof be+"' at index "+Re);return be.length===0?void 0:sl(be,R).toDate()}},qe.prototype.parseDates=function(be){if(be&&!Ai(be))throw new Error("Expected optional 'formatString' parameter to Series.parseDates to be a string (if specified).");return this.select(function(Re,R){return qe.parseDate(Re,R,be)})},qe.toString=function(be,Re){if(be!==void 0)return be===null?null:Re&&ep(be)?sl(be).format(Re):Re&&ia(be)?(0,X0.default)(be).format(Re):be.toString()},qe.prototype.toStrings=function(be){if(be&&!Ai(be))throw new Error("Expected optional 'formatString' parameter to Series.toStrings to be a string (if specified).");return this.select(function(Re){return qe.toString(Re,be)})},qe.prototype.bake=function(){return this.getContent().isBaked?this:new qe({values:this.toArray(),pairs:this.toPairs(),baked:!0})},qe.prototype.inflate=function(be){var Re=this;if(be){if(!mr(be))throw new Error("Expected 'selector' parameter to Series.inflate to be a selector function.");return new ls(function(){var R=Re.getContent();return{values:new ho(R.values,be),index:R.index,pairs:new ho(R.pairs,function(C,e){return[C[0],be(C[1],e)]})}})}else return new ls(function(){var R=Re.getContent();return{values:R.values,index:R.index,pairs:R.pairs}})},qe.prototype.asNumberSeries=function(){var be=this.filter(function(Re){return Re!=null});if(be.any(function(Re){return typeof Re!="number"}))throw new Error("Expected series to contain only numbers, you should parse this series or filter out non-number values.");return be},qe.sum=function(be){return be.sum()},qe.prototype.sum=function(){var be=this.asNumberSeries();if(be.none())return 0;var Re=0;try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;Re+=e}}catch(r){_={error:r}}finally{try{C&&!C.done&&(T=R.return)&&T.call(R)}finally{if(_)throw _.error}}return Re;var _,T},qe.average=function(be){return be.average()},qe.prototype.average=function(){return this.mean()},qe.mean=function(be){return be.mean()},qe.prototype.mean=function(){var be=this.asNumberSeries();if(be.none())return 0;var Re=0,R=0;try{for(var C=hr(be),e=C.next();!e.done;e=C.next()){var _=e.value;R+=1,Re+=_}}catch(w){T={error:w}}finally{try{e&&!e.done&&(r=C.return)&&r.call(C)}finally{if(T)throw T.error}}if(R===0)return 0;return Re/R;var T,r},qe.median=function(be){return be.median()},qe.prototype.median=function(){var be=this.asNumberSeries(),Re=be.count();if(Re===0)return 0;var R=be.orderBy(function(_){return _}).toArray();if(Re%2==0){var C=R[Re/2-1],e=R[Re/2];return(C+e)/2}return R[Math.floor(Re/2)]},qe.mode=function(be){return be.mode()},qe.prototype.mode=function(){var be=this.asNumberSeries();if(!be.none()){var Re=new Map;try{for(var R=hr(be),C=R.next();!C.done;C=R.next()){var e=C.value;Re.has(e)?Re.set(e,Re.get(e)+1):Re.set(e,1)}}catch(w){T={error:w}}finally{try{C&&!C.done&&(r=R.return)&&r.call(R)}finally{if(T)throw T.error}}var _=Array.from(Re.entries());return _.sort(function(w,b){return b[1]-w[1]}),_[0][0];var T,r}},qe.prototype.sumOfSquares=function(){if(this.none())return[0,1];var be=this.mean(),Re=0,R=this.asNumberSeries(),C=0;try{for(var e=hr(R),_=e.next();!_.done;_=e.next()){var T=_.value;C+=1;var r=T,w=r-be,b=w*w;Re+=b}}catch(t){c={error:t}}finally{try{_&&!_.done&&(o=e.return)&&o.call(e)}finally{if(c)throw c.error}}return[Re,C];var c,o},qe.variance=function(be){return be.variance()},qe.prototype.variance=function(){if(this.none())return 0;var be=Ff(this.sumOfSquares(),2),Re=be[0],R=be[1];return Re/R},qe.std=function(be){return be.std()},qe.prototype.std=function(){return this.none()?0:Math.sqrt(this.variance())},qe.prototype.standardize=function(){if(this.none())return new qe;var be=this.mean(),Re=this.std();if(Re===0)throw new Error("Can't standardize a series that has no variation.");var R=this.asNumberSeries();return R.map(function(C){var e=(C-be)/Re;return e})},qe.sampleVariance=function(be){return be.sampleVariance()},qe.prototype.sampleVariance=function(){if(this.none())return 0;var be=Ff(this.sumOfSquares(),2),Re=be[0],R=be[1];return Re/(R-1)},qe.sampleStd=function(be){return be.sampleStd()},qe.prototype.sampleStd=function(){return this.none()?0:Math.sqrt(this.sampleVariance())},qe.prototype.sampleStandardize=function(){if(this.none())return new qe;var be=this.mean(),Re=this.sampleStd();if(Re===0)throw new Error("Can't standardize a series that has no variation.");var R=this.asNumberSeries();return R.map(function(C){var e=(C-be)/Re;return e})},qe.min=function(be){return be.min()},qe.prototype.min=function(){var be;try{for(var Re=hr(this.asNumberSeries()),R=Re.next();!R.done;R=Re.next()){var C=R.value;be===void 0?be=C:be=Math.min(be,C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}if(be===void 0)return 0;return be;var e,_},qe.max=function(be){return be.max()},qe.prototype.max=function(){var be;try{for(var Re=hr(this.asNumberSeries()),R=Re.next();!R.done;R=Re.next()){var C=R.value;be===void 0?be=C:be=Math.max(be,C)}}catch(T){e={error:T}}finally{try{R&&!R.done&&(_=Re.return)&&_.call(Re)}finally{if(e)throw e.error}}if(be===void 0)return 0;return be;var e,_},qe.range=function(be){return be.range()},qe.prototype.range=function(){return this.max()-this.min()},qe.prototype.invert=function(){return this.asNumberSeries().select(function(be){return-be})},qe.prototype.counter=function(be){return this.groupSequentialBy(be).selectMany(function(Re,R){return be(Re.first())?vy(1,Re.count()).withIndex(Re.getIndex()).toPairs():gy(0,Re.count()).withIndex(Re.getIndex()).toPairs()}).withIndex(function(Re){return Re[0]}).select(function(Re){return Re[1]})},qe.prototype.reverse=function(){var be=this;return new qe(function(){return{values:new Yu(be.getContent().values),index:new Yu(be.getContent().index),pairs:new Yu(be.getContent().pairs)}})},qe.prototype.distinct=function(be){var Re=this;return new qe(function(){return{values:new Bf(Re.getContent().values,be),pairs:new Bf(Re.getContent().pairs,function(R){return be&&be(R[1])||R[1]})}})},qe.prototype.groupBy=function(be){var Re=this;if(!mr(be))throw new Error("Expected 'selector' parameter to 'Series.groupBy' to be a selector function that determines the value to group the series by.");return new qe(function(){var R=[],C={},e=0;try{for(var _=hr(Re.getContent().pairs),T=_.next();!T.done;T=_.next()){var r=T.value,w=be(r[1],e);++e;var b=C[w];if(b)b.push(r);else{var c=[];c.push(r),R.push(c),C[w]=c}}}catch(i){o={error:i}}finally{try{T&&!T.done&&(t=_.return)&&t.call(_)}finally{if(o)throw o.error}}return{values:R.map(function(i){return new qe({pairs:i})})};var o,t})},qe.prototype.groupSequentialBy=function(be){if(be){if(!mr(be))throw new Error("Expected 'selector' parameter to 'Series.groupSequentialBy' to be a selector function that determines the value to group the series by.")}else be=function(Re){return Re};return this.variableWindow(function(Re,R){return be(Re)===be(R)})},qe.concat=function(be){if(!Gi(be))throw new Error("Expected 'series' parameter to 'Series.concat' to be an array of series.");return new qe(function(){var Re=be,R=Re.map(function(C){return C.getContent()});return{values:new zf(R.map(function(C){return C.values})),pairs:new zf(R.map(function(C){return C.pairs}))}})},qe.prototype.concat=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];var R=[this];try{for(var C=hr(be),e=C.next();!e.done;e=C.next()){var _=e.value;if(Gi(_))try{for(var T=hr(_),r=T.next();!r.done;r=T.next()){var w=r.value;R.push(w)}}catch(i){o={error:i}}finally{try{r&&!r.done&&(t=T.return)&&t.call(T)}finally{if(o)throw o.error}}else R.push(_)}}catch(i){b={error:i}}finally{try{e&&!e.done&&(c=C.return)&&c.call(C)}finally{if(b)throw b.error}}return qe.concat(R);var b,c,o,t},qe.zip=function(be,Re){var R=Array.from(be);if(R.length===0)return new qe;var C=R[0];return C.none()?new qe:new qe(function(){var e=C,_=R;return{index:e.getContent().index,values:new Q0(_.map(function(T){return T.getContent().values}),Re)}})},qe.prototype.zip=function(){for(var be=[],Re=0;Re<arguments.length;Re++)be[Re]=arguments[Re];var R=be[be.length-1],C=[this].concat(be.slice(0,be.length-1));return qe.zip(C,function(e){return R.apply(void 0,J0(e))})},qe.prototype.orderBy=function(be){var Re=this.getContent();return new W0({values:Re.values,pairs:Re.pairs,selector:be,direction:kl.Ascending,parent:null})},qe.prototype.orderByDescending=function(be){var Re=this.getContent();return new W0({values:Re.values,pairs:Re.pairs,selector:be,direction:kl.Descending,parent:null})},qe.prototype.union=function(be,Re){if(Re&&!mr(Re))throw new Error("Expected optional 'selector' parameter to 'Series.union' to be a selector function.");return this.concat(be).distinct(Re)},qe.prototype.intersection=function(be,Re,R){if(Re){if(!mr(Re))throw new Error("Expected optional 'outerSelector' parameter to 'Series.intersection' to be a function.")}else Re=function(e){return e};if(R){if(!mr(R))throw new Error("Expected optional 'innerSelector' parameter to 'Series.intersection' to be a function.")}else R=function(e){return e};var C=this;return C.filter(function(e){var _=Re(e);return be.filter(function(T){return _===R(T)}).any()})},qe.prototype.except=function(be,Re,R){if(Re){if(!mr(Re))throw new Error("Expected optional 'outerSelector' parameter to 'Series.except' to be a function.")}else Re=function(e){return e};if(R){if(!mr(R))throw new Error("Expected optional 'innerSelector' parameter to 'Series.except' to be a function.")}else R=function(e){return e};var C=this;return C.filter(function(e){var _=Re(e);return be.filter(function(T){return _===R(T)}).none()})},qe.prototype.join=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'Series.join' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'Series.join' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'Series.join' to be a selector function.");var e=this;return new qe(function(){var _=be.groupBy(R).toObject(function(f){return R(f.first())},function(f){return f}),T=e.getContent(),r=[];try{for(var w=hr(e),b=w.next();!b.done;b=w.next()){var c=b.value,o=Re(c),t=_[o];if(t)try{for(var i=hr(t),n=i.next();!n.done;n=i.next()){var a=n.value;r.push(C(c,a))}}catch(f){u={error:f}}finally{try{n&&!n.done&&(p=i.return)&&p.call(i)}finally{if(u)throw u.error}}}}catch(f){s={error:f}}finally{try{b&&!b.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}return{values:r};var s,l,u,p})},qe.prototype.joinOuter=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuter' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuter' to be a selector function.");var e=this,_=e.except(be,Re,R).select(function(w){return C(w,null)}).resetIndex(),T=be.except(e,R,Re).select(function(w){return C(null,w)}).resetIndex(),r=e.join(be,Re,R,C);return _.concat(r).concat(T).resetIndex()},qe.prototype.joinOuterLeft=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterLeft' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterLeft' to be a selector function.");var e=this,_=e.except(be,Re,R).select(function(r){return C(r,null)}).resetIndex(),T=e.join(be,Re,R,C);return _.concat(T).resetIndex()},qe.prototype.joinOuterRight=function(be,Re,R,C){if(!mr(Re))throw new Error("Expected 'outerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!mr(R))throw new Error("Expected 'innerKeySelector' parameter of 'Series.joinOuterRight' to be a selector function.");if(!mr(C))throw new Error("Expected 'resultSelector' parameter of 'Series.joinOuterRight' to be a selector function.");var e=this,_=be.except(e,R,Re).select(function(r){return C(null,r)}).resetIndex(),T=e.join(be,Re,R,C);return T.concat(_).resetIndex()},qe.prototype.truncateStrings=function(be){if(!ia(be))throw new Error("Expected 'maxLength' parameter to 'Series.truncateStrings' to be a number.");return this.select(function(Re){return Ai(Re)&&Re.length>be?Re.substring(0,be):Re})},qe.prototype.round=function(be){if(be!==void 0){if(!ia(be))throw new Error("Expected 'numDecimalPlaces' parameter to 'Series.round' to be a number.")}else be=2;return this.select(function(Re){return ia(Re)?parseFloat(Re.toFixed(be)):Re})},qe.prototype.insertPair=function(be){if(!Gi(be))throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array.");if(be.length!==2)throw new Error("Expected 'pair' parameter to 'Series.insertPair' to be an array with two elements. The first element is the index, the second is the value.");return new qe({pairs:[be]}).concat(this)},qe.prototype.appendPair=function(be){if(!Gi(be))throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array.");if(be.length!==2)throw new Error("Expected 'pair' parameter to 'Series.appendPair' to be an array with two elements. The first element is the index, the second is the value.");return this.concat(new qe({pairs:[be]}))},qe.prototype.remove=function(be){var Re=this;return new qe(function(){var R=Re.getContent();return{pairs:new Wu(R.pairs,function(C){return C[0]!==be})}})},qe.prototype.fillGaps=function(be,Re){if(!mr(be))throw new Error("Expected 'comparer' parameter to 'Series.fillGaps' to be a comparer function that compares two values and returns a boolean.");if(!mr(Re))throw new Error("Expected 'generator' parameter to 'Series.fillGaps' to be a generator function that takes two values and returns an array of generated pairs to span the gap.");return this.rollingWindow(2).selectMany(function(R){var C=R.toPairs(),e=C[0],_=C[1];if(!be(e,_))return[e];var T=Re(e,_);if(!Gi(T))throw new Error("Expected return from 'generator' parameter to 'Series.fillGaps' to be an array of pairs, instead got a "+typeof T);return[e].concat(T)}).withIndex(function(R){return R[0]}).select(function(R){return R[1]}).concat(this.tail(1))},qe.prototype.defaultIfEmpty=function(be){if(this.none()){if(be instanceof qe)return be;if(Gi(be))return new qe(be);throw new Error("Expected 'defaultSequence' parameter to 'Series.defaultIfEmpty' to be an array or a series.")}else return this},qe.prototype.detectTypes=function(){var be=this;return new ls(function(){var Re=be.count(),R=be.select(function(C){var e=typeof C;return e==="object"&&ep(C)&&(e="date"),e}).aggregate({},function(C,e){var _=C[e];return _||(_={count:0},C[e]=_),++_.count,C});return{columnNames:["Type","Frequency"],rows:Object.keys(R).map(function(C){return[C,R[C].count/Re*100]})}})},qe.prototype.detectValues=function(){var be=this;return new ls(function(){var Re=be.count(),R=be.aggregate(new Map,function(C,e){var _=C.get(e);return _||(_={count:0,value:e},C.set(e,_)),++_.count,C});return{columnNames:["Value","Frequency"],rows:Array.from(R.keys()).map(function(C){var e=R.get(C);return[e.value,e.count/Re*100]})}})},qe.prototype.bucket=function(be){if(console.warn("Series.bucket is deprecated and will be removed in the future."),!ia(be))throw new Error("Expected 'numBuckets' parameter to 'Series.bucket' to be a number.");if(this.none())return new ls;var Re=this,R=Re.min(),C=Re.max(),e=C-R,_=e/(be-1);return Re.select(function(T){var r=Math.floor((T-R)/_),w=r*_+R;return{Value:T,Bucket:r,Min:w,Mid:w+_*.5,Max:w+_}}).inflate()},qe.prototype.frequency=function(be){var Re=this;return this.none()?new ls:new ls(function(){var R=Re,C=be&&be.captureValues||!1,e=Number.MAX_VALUE,_=Number.MIN_VALUE,T=0;try{for(var r=hr(R),w=r.next();!w.done;w=r.next()){var b=w.value;e=Math.min(b,e),_=Math.max(b,_),T+=1}}catch(L){y={error:L}}finally{try{w&&!w.done&&(A=r.return)&&A.call(r)}finally{if(y)throw y.error}}var c;be&&be.lower!==void 0?c=be.lower:c=e;var o;be&&be.upper!==void 0?o=be.upper:o=_;var t=be&&be.interval,i=o-c,n;t!==void 0?n=Math.ceil(i/t):n=10,T<n&&(n=T),t===void 0&&(t=i/(n-1));for(var a=new Array(n),s=0;s<n;++s){var l=c+s*t;a[s]={lower:l,upper:l+t,count:0,proportion:0,cumulative:0},C&&(a[s].values=[])}var u={upper:c,count:0,proportion:0,cumulative:0};C&&(u.values=[]);var p={lower:o,count:0,proportion:0,cumulative:0};C&&(p.values=[]);try{for(var f=hr(R),m=f.next();!m.done;m=f.next()){var b=m.value,h=void 0;if(b<c)h=u;else if(b>o)h=p;else{var s=Math.floor((b-c)/t);h=a[s]}h.count+=1,C&&h.values.push(b)}}catch(L){d={error:L}}finally{try{m&&!m.done&&(S=f.return)&&S.call(f)}finally{if(d)throw d.error}}var g=0;u.count>0&&a.unshift(u),p.count>0&&a.push(p);try{for(var v=hr(a),x=v.next();!x.done;x=v.next()){var h=x.value;h.proportion=h.count/T,g+=h.proportion,h.cumulative=g}}catch(L){k={error:L}}finally{try{x&&!x.done&&(E=v.return)&&E.call(v)}finally{if(k)throw k.error}}return{values:a};var y,A,d,S,k,E})},qe.prototype.getTypeCode=function(){return"series"},qe.defaultCountIterable=new Qh,qe.defaultEmptyIterable=new K0,qe}(),W0=function(qe){np(be,qe);function be(Re){for(var R=this,C=[],e=[],_=0,T=Re.parent,r=[];T!==null;)r.push(T),T=T.config.parent;r.reverse();try{for(var w=hr(r),b=w.next();!b.done;b=w.next()){var c=b.value,o=c.config;C.push(be.makeSortSpec(_,o.selector,o.direction)),e.push(be.makeSortSpec(_,be.makePairsSelector(o.selector),o.direction)),++_}}catch(n){t={error:n}}finally{try{b&&!b.done&&(i=w.return)&&i.call(w)}finally{if(t)throw t.error}}return C.push(be.makeSortSpec(_,Re.selector,Re.direction)),e.push(be.makeSortSpec(_,be.makePairsSelector(Re.selector),Re.direction)),R=qe.call(this,{values:new Nf(Re.values,C),pairs:new Nf(Re.pairs,e)})||this,R.config=Re,R;var t,i}return be.makeSortSpec=function(Re,R,C){return{sortLevel:Re,selector:R,direction:C}},be.makePairsSelector=function(Re){return function(R,C){return Re(R[1],C)}},be.prototype.thenBy=function(Re){return new be({values:this.config.values,pairs:this.config.pairs,selector:Re,direction:kl.Ascending,parent:this})},be.prototype.thenByDescending=function(Re){return new be({values:this.config.values,pairs:this.config.pairs,selector:Re,direction:kl.Descending,parent:this})},be}(ha),tv=function(qe){np(be,qe);function be(Re){return qe.call(this,Re)||this}return be.prototype.getType=function(){return this._type||(this.any()?this._type=ev(this.first()):this._type="empty"),this._type},be.prototype.getLessThan=function(){switch(this.getType()){case"date":return function(Re,R){return sl(Re).isBefore(R)};case"string":case"number":return function(Re,R){return Re<R};case"empty":return function(){return!0};default:throw new Error("No less than operation available for type: "+this.getType())}},be.prototype.getLessThanOrEqualTo=function(){var Re=this;return function(R,C){return!Re.getGreaterThan()(R,C)}},be.prototype.getGreaterThan=function(){switch(this.getType()){case"date":return function(Re,R){return sl(Re).isAfter(R)};case"string":case"number":return function(Re,R){return Re>R};case"empty":return function(){return!0};default:throw new Error("No greater than operation available for type: "+this.getType())}},be}(ha);function rp(qe,be){return be={exports:{}},qe(be,be.exports),be.exports}var hy=function(be){return be instanceof Buffer},py=rp(function(qe){typeof Object.create=="function"?qe.exports=function(Re,R){Re.super_=R,Re.prototype=Object.create(R.prototype,{constructor:{value:Re,enumerable:!1,writable:!0,configurable:!0}})}:qe.exports=function(Re,R){Re.super_=R;var C=function(){};C.prototype=R.prototype,Re.prototype=new C,Re.prototype.constructor=Re}}),dy=rp(function(qe){try{var be=ra;if(typeof be.inherits!="function")throw"";qe.exports=be.inherits}catch{qe.exports=py}}),ra=rp(function(qe,be){var Re=Object.getOwnPropertyDescriptors||function(N){for(var W=Object.keys(N),B={},V=0;V<W.length;V++)B[W[V]]=Object.getOwnPropertyDescriptor(N,W[V]);return B},R=/%[sdj%]/g;be.format=function(I){if(!f(I)){for(var N=[],W=0;W<arguments.length;W++)N.push(_(arguments[W]));return N.join(" ")}for(var W=1,B=arguments,V=B.length,q=String(I).replace(R,function($){if($==="%%")return"%";if(W>=V)return $;switch($){case"%s":return String(B[W++]);case"%d":return Number(B[W++]);case"%j":try{return JSON.stringify(B[W++])}catch{return"[Circular]"}default:return $}}),ne=B[W];W<V;ne=B[++W])l(ne)||!v(ne)?q+=" "+ne:q+=" "+_(ne);return q},be.deprecate=function(I,N){if(typeof process<"u"&&process.noDeprecation===!0)return I;if(typeof process>"u")return function(){return be.deprecate(I,N).apply(this,arguments)};var W=!1;function B(){if(!W){if(process.throwDeprecation)throw new Error(N);process.traceDeprecation?console.trace(N):console.error(N),W=!0}return I.apply(this,arguments)}return B};var C={},e;be.debuglog=function(I){if(h(e)&&(e=process.env.NODE_DEBUG||""),I=I.toUpperCase(),!C[I])if(new RegExp("\\b"+I+"\\b","i").test(e)){var N=process.pid;C[I]=function(){var W=be.format.apply(be,arguments);console.error("%s %d: %s",I,N,W)}}else C[I]=function(){};return C[I]};function _(I,N){var W={seen:[],stylize:r};return arguments.length>=3&&(W.depth=arguments[2]),arguments.length>=4&&(W.colors=arguments[3]),s(N)?W.showHidden=N:N&&be._extend(W,N),h(W.showHidden)&&(W.showHidden=!1),h(W.depth)&&(W.depth=2),h(W.colors)&&(W.colors=!1),h(W.customInspect)&&(W.customInspect=!0),W.colors&&(W.stylize=T),b(W,I,W.depth)}be.inspect=_,_.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(I,N){var W=_.styles[N];return W?"\x1B["+_.colors[W][0]+"m"+I+"\x1B["+_.colors[W][1]+"m":I}function r(I,N){return I}function w(I){var N={};return I.forEach(function(W,B){N[W]=!0}),N}function b(I,N,W){if(I.customInspect&&N&&A(N.inspect)&&N.inspect!==be.inspect&&!(N.constructor&&N.constructor.prototype===N)){var B=N.inspect(W,I);return f(B)||(B=b(I,B,W)),B}var V=c(I,N);if(V)return V;var q=Object.keys(N),ne=w(q);if(I.showHidden&&(q=Object.getOwnPropertyNames(N)),y(N)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return o(N);if(q.length===0){if(A(N)){var $=N.name?": "+N.name:"";return I.stylize("[Function"+$+"]","special")}if(g(N))return I.stylize(RegExp.prototype.toString.call(N),"regexp");if(x(N))return I.stylize(Date.prototype.toString.call(N),"date");if(y(N))return o(N)}var K="",ee=!1,J=["{","}"];if(a(N)&&(ee=!0,J=["[","]"]),A(N)){var Z=N.name?": "+N.name:"";K=" [Function"+Z+"]"}if(g(N)&&(K=" "+RegExp.prototype.toString.call(N)),x(N)&&(K=" "+Date.prototype.toUTCString.call(N)),y(N)&&(K=" "+o(N)),q.length===0&&(!ee||N.length==0))return J[0]+K+J[1];if(W<0)return g(N)?I.stylize(RegExp.prototype.toString.call(N),"regexp"):I.stylize("[Object]","special");I.seen.push(N);var te;return ee?te=t(I,N,W,ne,q):te=q.map(function(oe){return i(I,N,W,ne,oe,ee)}),I.seen.pop(),n(te,K,J)}function c(I,N){if(h(N))return I.stylize("undefined","undefined");if(f(N)){var W="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return I.stylize(W,"string")}if(p(N))return I.stylize(""+N,"number");if(s(N))return I.stylize(""+N,"boolean");if(l(N))return I.stylize("null","null")}function o(I){return"["+Error.prototype.toString.call(I)+"]"}function t(I,N,W,B,V){for(var q=[],ne=0,$=N.length;ne<$;++ne)O(N,String(ne))?q.push(i(I,N,W,B,String(ne),!0)):q.push("");return V.forEach(function(K){K.match(/^\d+$/)||q.push(i(I,N,W,B,K,!0))}),q}function i(I,N,W,B,V,q){var ne,$,K;if(K=Object.getOwnPropertyDescriptor(N,V)||{value:N[V]},K.get?K.set?$=I.stylize("[Getter/Setter]","special"):$=I.stylize("[Getter]","special"):K.set&&($=I.stylize("[Setter]","special")),O(B,V)||(ne="["+V+"]"),$||(I.seen.indexOf(K.value)<0?(l(W)?$=b(I,K.value,null):$=b(I,K.value,W-1),$.indexOf(`
`)>-1&&(q?$=$.split(`
`).map(function(ee){return"  "+ee}).join(`
`).substr(2):$=`
`+$.split(`
`).map(function(ee){return"   "+ee}).join(`
`))):$=I.stylize("[Circular]","special")),h(ne)){if(q&&V.match(/^\d+$/))return $;ne=JSON.stringify(""+V),ne.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ne=ne.substr(1,ne.length-2),ne=I.stylize(ne,"name")):(ne=ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ne=I.stylize(ne,"string"))}return ne+": "+$}function n(I,N,W){var B=I.reduce(function(V,q){return q.indexOf(`
`)>=0,V+q.replace(/\u001b\[\d\d?m/g,"").length+1},0);return B>60?W[0]+(N===""?"":N+`
 `)+" "+I.join(`,
  `)+" "+W[1]:W[0]+N+" "+I.join(", ")+" "+W[1]}function a(I){return Array.isArray(I)}be.isArray=a;function s(I){return typeof I=="boolean"}be.isBoolean=s;function l(I){return I===null}be.isNull=l;function u(I){return I==null}be.isNullOrUndefined=u;function p(I){return typeof I=="number"}be.isNumber=p;function f(I){return typeof I=="string"}be.isString=f;function m(I){return typeof I=="symbol"}be.isSymbol=m;function h(I){return I===void 0}be.isUndefined=h;function g(I){return v(I)&&S(I)==="[object RegExp]"}be.isRegExp=g;function v(I){return typeof I=="object"&&I!==null}be.isObject=v;function x(I){return v(I)&&S(I)==="[object Date]"}be.isDate=x;function y(I){return v(I)&&(S(I)==="[object Error]"||I instanceof Error)}be.isError=y;function A(I){return typeof I=="function"}be.isFunction=A;function d(I){return I===null||typeof I=="boolean"||typeof I=="number"||typeof I=="string"||typeof I=="symbol"||typeof I>"u"}be.isPrimitive=d,be.isBuffer=hy;function S(I){return Object.prototype.toString.call(I)}function k(I){return I<10?"0"+I.toString(10):I.toString(10)}var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var I=new Date,N=[k(I.getHours()),k(I.getMinutes()),k(I.getSeconds())].join(":");return[I.getDate(),E[I.getMonth()],N].join(" ")}be.log=function(){console.log("%s - %s",L(),be.format.apply(be,arguments))},be.inherits=dy,be._extend=function(I,N){if(!N||!v(N))return I;for(var W=Object.keys(N),B=W.length;B--;)I[W[B]]=N[W[B]];return I};function O(I,N){return Object.prototype.hasOwnProperty.call(I,N)}var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;be.promisify=function(N){if(typeof N!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&N[P]){var W=N[P];if(typeof W!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(W,P,{value:W,enumerable:!1,writable:!1,configurable:!0}),W}function W(){for(var B,V,q=new Promise(function(K,ee){B=K,V=ee}),ne=[],$=0;$<arguments.length;$++)ne.push(arguments[$]);ne.push(function(K,ee){K?V(K):B(ee)});try{N.apply(this,ne)}catch(K){V(K)}return q}return Object.setPrototypeOf(W,Object.getPrototypeOf(N)),P&&Object.defineProperty(W,P,{value:W,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(W,Re(N))},be.promisify.custom=P;function F(I,N){if(!I){var W=new Error("Promise was rejected with a falsy value");W.reason=I,I=W}return N(I)}function U(I){if(typeof I!="function")throw new TypeError('The "original" argument must be of type Function');function N(){for(var W=[],B=0;B<arguments.length;B++)W.push(arguments[B]);var V=W.pop();if(typeof V!="function")throw new TypeError("The last argument must be of type Function");var q=this,ne=function(){return V.apply(q,arguments)};I.apply(this,W).then(function($){process.nextTick(ne,null,$)},function($){process.nextTick(F,$,ne)})}return Object.setPrototypeOf(N,Object.getPrototypeOf(I)),Object.defineProperties(N,Re(I)),N}be.callbackify=U}),Gy=ra.format,Wy=ra.deprecate,Yy=ra.debuglog,Zy=ra.inspect,Xy=ra.isArray,Jy=ra.isBoolean,Ky=ra.isNull,$y=ra.isNullOrUndefined,Qy=ra.isNumber,em=ra.isString,tm=ra.isSymbol,nm=ra.isUndefined,rm=ra.isRegExp,im=ra.isObject,am=ra.isDate,om=ra.isError,sm=ra.isFunction,lm=ra.isPrimitive,um=ra.isBuffer,cm=ra.log,fm=ra.inherits,hm=ra._extend,pm=ra.promisify,dm=ra.callbackify;sl.extend(Xh);var vm=ha.concat,gm=ha.zip;function vy(qe,be){if(!ia(qe))throw new Error("Expect 'start' parameter to 'dataForge.range' function to be a number.");if(!ia(be))throw new Error("Expect 'count' parameter to 'dataForge.range' function to be a number.");for(var Re=[],R=0;R<be;++R)Re.push(qe+R);return new ha(Re)}function gy(qe,be){for(var Re=[],R=0;R<be;++R)Re.push(qe);return new ha(Re)}Lh.plotlyjs=yy;var bm=(()=>{let be=class be{set data(R){this._data=new ls(R),this.draw()}get data(){return this._data}constructor(){this._data=new ls,this.plotType="precursor",this.minPrecursor=null,this.maxPrecursor=null,this.minProtein=null,this.maxProtein=null,this.barWidth=50,this.graphData=[],this.graphLayout={font:{family:"Arial, sans-serif",size:12,color:"#333"},title:{text:"Your Graph Title Here",font:{size:16}},xaxis:{title:{text:"Sample",font:{size:14}},tickfont:{size:12},showgrid:!0,gridcolor:"#efefef",tickmode:"array"},yaxis:{title:{text:"Count",font:{size:14}},tickfont:{size:12},showgrid:!0,gridcolor:"#efefef"},legend:{orientation:"h",x:.5,xanchor:"center",y:-.2,yanchor:"top"},plot_bgcolor:"#fff",margin:{l:50,r:50,b:200,t:50,pad:4},showlegend:!1},this.revision=0}draw(){let R=[];this.data.groupBy(C=>C.analysis.id).forEach(C=>{let e={type:"bar",x:[],y:[],name:C.first().analysis.analysis_path,marker:{line:{color:"rgb(0,0,0)",width:2}}};this.plotType==="precursor"?e.y=C.getSeries("precursor_identified").toArray():e.y=C.getSeries("protein_identified").toArray();let _=[];C.forEach(T=>{let r="";T.analysis.analysis_name?r=`${T.created_at} - ${T.file.file_path}`:r=`${T.created_at} - ${T.file.file_path}`,_.push(r)}),e.x=_,R.push(e)}),this.plotType==="precursor"?this.graphLayout.title="Precursor Identified":this.graphLayout.title="Protein Identified",this.graphLayout.width=this.barWidth*this.data.count()+this.graphLayout.margin.l+this.graphLayout.margin.r,this.graphData=R,this.revision+=1}};be.\u0275fac=function(C){return new(C||be)},be.\u0275cmp=mf({type:be,selectors:[["app-bar-chart-result-summary"]],inputs:{data:"data",plotType:"plotType",minPrecursor:"minPrecursor",maxPrecursor:"maxPrecursor",minProtein:"minProtein",maxProtein:"maxProtein"},standalone:!0,features:[Xd],decls:1,vars:4,consts:[[3,"data","layout","updateOnlyWithRevision","revision"]],template:function(C,e){C&1&&Vd(0,"plotly-plot",0),C&2&&bf("data",e.graphData)("layout",e.graphLayout)("updateOnlyWithRevision",!0)("revision",e.revision)},dependencies:[Lh,t0]});let qe=be;return qe})();export{bm as a};
